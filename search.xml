<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[iOSç¼–è¯‘åŸç†]]></title>
      <url>/2018/07/10/2015/iOS%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/</url>
      <content type="html"><![CDATA[<h3 id="å…³äºæŒ‡ä»¤é›†"><a href="#å…³äºæŒ‡ä»¤é›†" class="headerlink" title="å…³äºæŒ‡ä»¤é›†"></a>å…³äºæŒ‡ä»¤é›†</h3><p>æ¨¡æ‹Ÿå™¨è·‘åœ¨macä¸Šï¼Œæ‰€ä»¥éœ€è¦æ”¯æŒmacçš„å¤„ç†å™¨æ¶æ„ï¼Œè€ŒçœŸæœºä¸Šå°±ä¸éœ€è¦ã€‚</p>
<p>armv7ï½œarmv7sï½œarm64éƒ½æ˜¯ARMå¤„ç†å™¨çš„æŒ‡ä»¤é›†</p>
<p>i386ï½œx86_64 æ˜¯Macå¤„ç†å™¨çš„æŒ‡ä»¤é›†</p>
<p>è¿™äº›æŒ‡ä»¤é›†åœ¨é‚£äº›è®¾å¤‡ä¸­æœ‰ç”¨åˆ°å‘¢ï¼Ÿ</p>
<pre><code>arm64ï¼šiPhone6s | iphone6s plusï½œiPhone6ï½œ iPhone6 plusï½œiPhone5S | iPad Airï½œ iPad mini2(iPad mini with Retina Display)
armv7sï¼šiPhone5ï½œiPhone5Cï½œiPad4(iPad with Retina Display)
armv7ï¼šiPhone4ï½œiPhone4Sï½œiPadï½œiPad2ï½œiPad3(The New iPad)ï½œiPad miniï½œiPod Touch 3Gï½œiPod Touch4
</code></pre><p>i386æ˜¯é’ˆå¯¹intelé€šç”¨å¾®å¤„ç†å™¨32ä½å¤„ç†å™¨</p>
<p>x86_64æ˜¯é’ˆå¯¹x86æ¶æ„çš„64ä½å¤„ç†å™¨</p>
<ul>
<li>æ¨¡æ‹Ÿå™¨32ä½å¤„ç†å™¨æµ‹è¯•éœ€è¦i386æ¶æ„ï¼Œ</li>
<li>æ¨¡æ‹Ÿå™¨64ä½å¤„ç†å™¨æµ‹è¯•éœ€è¦x86_64æ¶æ„ï¼Œ</li>
<li>çœŸæœº32ä½å¤„ç†å™¨éœ€è¦armv7,æˆ–è€…armv7sæ¶æ„ï¼Œ</li>
<li>çœŸæœº64ä½å¤„ç†å™¨éœ€è¦arm64æ¶æ„ã€‚</li>
</ul>
<h3 id="C-C-ç¼–è¯‘è¿‡ç¨‹"><a href="#C-C-ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="C/C++ç¼–è¯‘è¿‡ç¨‹:"></a>C/C++ç¼–è¯‘è¿‡ç¨‹:</h3><p> 1ã€é¢„å¤„ç†é˜¶æ®µ ï¼š ä»hello.cå˜æˆhello.iæ–‡ä»¶ï¼Œé¢„å¤„ç†ä¸€èˆ¬å°±æ˜¯å°†includeæˆ–è€…defineä¹‹ç±»çš„ä¸œè¥¿ï¼Œæ’å…¥åˆ°ä»£ç ä¸­ï¼›</p>
<p> 2ã€ç¼–è¯‘ ï¼š ä»hello.i å˜æˆhello.sæ–‡ä»¶ï¼Œè¿‡ç¨‹ï¼šæ£€æŸ¥è¯­æ³•ã€è§„èŒƒï¼Œåœ¨ç¡®å®šæ— è¯¯ä¹‹åï¼Œå°†ä»£ç ç¿»è¯‘æˆæ±‡ç¼–è¯­è¨€ã€‚</p>
<p> 3ã€æ±‡ç¼– ï¼š ä»hello.s å˜æˆhello.oæ–‡ä»¶ï¼Œè¿‡ç¨‹ï¼šå°†æ±‡ç¼–ä»£ç è½¬æ¢æˆäºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p>
<p> 4ã€è¿æ¥ ï¼š æ ¹æ®ç›®æ ‡æ–‡ä»¶ä»¥åŠåº“æ–‡ä»¶ï¼Œå®Œæˆé“¾æ¥ä¹‹åï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
 <a id="more"></a>
<p> <a href="https://blog.csdn.net/aas319/article/details/78606342" target="_blank" rel="external">iOSç¼–è¯‘è¿‡ç¨‹</a></p>
]]></content>
      
        
        <tags>
            
            <tag> iOSåŸºç¡€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[NSDictionaryå®ç°(è½¬)]]></title>
      <url>/2018/07/10/2015/NSDictionary%E5%AE%9E%E7%8E%B0/</url>
      <content type="html"><![CDATA[<p><a href="https://www.jianshu.com/p/d4b5542740d5" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a></p>
<p>NSDictionary å†…éƒ¨ç»“æ„ã€å®ç°åŸç†</p>
<p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰æ€è€ƒè¿‡NSDictionaryå’ŒNSArrayå†…éƒ¨æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œé‚£ä¹ˆä»Šå¤©å°±æ·±æŒ–ä¸€ä¸‹NSDictionary&amp; NSArrayçš„ å†…éƒ¨ç»“æ„ã€‚</p>
<p>é¦–å…ˆå’±ä»¬äº†è§£ä¸€ä¸‹è¿™å‡ ä¸ªæ¦‚å¿µï¼šå“ˆå¸Œè¡¨ã€æ—¶é—´å¤æ‚åº¦ã€é“¾è¡¨<br><a id="more"></a><br>çœ‹äº†ä¸Šé¢çš„æ–‡ç« ï¼Œä¼°è®¡å¤§å®¶éƒ½æ‡µé€¼äº†ã€‚ã€‚ã€‚å¥½å§ï¼Œæ­£æ–‡æ¥äº†</p>
<p>NSDictionary<br>NSDictionaryï¼ˆå­—å…¸ï¼‰æ˜¯ä½¿ç”¨ å“ˆå¸Œè¡¨æ¥å®ç°keyå’Œvalueä¹‹é—´çš„æ˜ å°„å’Œå­˜å‚¨çš„ï¼Œ hashå‡½æ•°è®¾è®¡çš„å¥½åå½±å“ç€æ•°æ®çš„æŸ¥æ‰¾è®¿é—®æ•ˆç‡ã€‚æ•°æ®åœ¨hashè¡¨ä¸­åˆ†å¸ƒçš„è¶Šå‡åŒ€ï¼Œå…¶è®¿é—®æ•ˆç‡è¶Šé«˜ã€‚è€Œåœ¨Objective-Cä¸­ï¼Œé€šå¸¸éƒ½æ˜¯åˆ©ç”¨NSString æ¥ä½œä¸ºé”®å€¼ï¼Œå…¶å†…éƒ¨ä½¿ç”¨çš„hashå‡½æ•°ä¹Ÿæ˜¯é€šè¿‡ä½¿ç”¨ NSStringå¯¹è±¡ä½œä¸ºé”®å€¼æ¥ä¿è¯æ•°æ®çš„å„ä¸ªèŠ‚ç‚¹åœ¨hashè¡¨ä¸­å‡åŒ€åˆ†å¸ƒã€‚</p>
<p><code>- (void)setObject:(id)anObject forKey:(id &lt;NSCopying&gt;)aKey;</code><br>NSDictionaryä¸­çš„keyæ˜¯å”¯ä¸€çš„ï¼Œkeyå¯ä»¥æ˜¯éµå¾ªNSCopying åè®®å’Œé‡è½½- (NSUInteger)hash;ã€- (BOOL)isEqual:(id)object;æ–¹æ³•çš„ä»»ä½•å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨NSDictionaryå†…éƒ¨ï¼Œä¼šå¯¹ aKey å¯¹è±¡ copy ä¸€ä»½æ–°çš„ã€‚è€Œ anObject å¯¹è±¡åœ¨å…¶å†…éƒ¨æ˜¯ä½œä¸ºå¼ºå¼•ç”¨ï¼ˆretainæˆ–strong)ã€‚</p>
<p>hash æ–¹æ³•æ˜¯ç”¨æ¥è®¡ç®—è¯¥å¯¹è±¡çš„ hash å€¼ï¼Œæœ€ç»ˆçš„ hash å€¼å†³å®šäº†è¯¥å¯¹è±¡åœ¨ hash è¡¨ä¸­å­˜å‚¨çš„ä½ç½®ã€‚æ‰€ä»¥åŒæ ·ï¼Œå¦‚æœæƒ³é‡å†™è¯¥æ–¹æ³•ï¼Œæˆ‘ä»¬å°½é‡è®¾è®¡ä¸€ä¸ªèƒ½è®©æ•°æ®åˆ†å¸ƒå‡åŒ€çš„ hash å‡½æ•°ã€‚<br>ï¿½isEqual : æ–¹æ³•æ˜¯ä¸ºäº†é€šè¿‡ hash å€¼æ¥æ‰¾åˆ° å¯¹è±¡ åœ¨hash ï¿½è¡¨ä¸­çš„ä½ç½®ã€‚<br>åœ¨è°ƒç”¨setObject: forKey: åï¼Œå†…éƒ¨ä¼šå»è°ƒç”¨ ï¿½ key å¯¹è±¡çš„ hash æ–¹æ³•ç¡®å®š object åœ¨hashè¡¨å†…çš„å…¥å£ä½ç½®ï¼Œç„¶åä¼šè°ƒç”¨ isEqual : æ¥ç¡®å®šè¯¥å€¼æ˜¯å¦å·²ç»å­˜åœ¨äº NSDictionaryä¸­ã€‚<br>æ³¨ï¼šå…³äºhashï¼ŒisEqual :å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç«  iOSå¼€å‘ ä¹‹ ä¸è¦å‘Šè¯‰æˆ‘ä½ çœŸçš„æ‡‚isEqualä¸hash!</p>
<p>å…¶å®ï¼ŒNSDictionaryä½¿ç”¨NSMapTableå®ç°ã€‚NSMapTableåŒæ ·æ˜¯ä¸€ä¸ªkeyï¼valueçš„å®¹å™¨ï¼Œä¸‹é¢æ˜¯NSMapTableçš„éƒ¨åˆ†ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@interface NSMapTable : NSObject &#123;</div><div class="line">   NSMapTableKeyCallBacks   *keyCallBacks;</div><div class="line">   NSMapTableValueCallBacks *valueCallBacks;</div><div class="line">   NSUInteger             count;</div><div class="line">   NSUInteger             nBuckets;</div><div class="line">   struct _NSMapNode  **buckets;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºæ¥NSMapTableæ˜¯ä¸€ä¸ªå“ˆå¸Œï¼‹é“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œå› æ­¤åœ¨NSMapTableä¸­æ’å…¥æˆ–è€…åˆ é™¤ä¸€å¯¹å¯¹è±¡æ—¶</p>
<p>å¯»æ‰¾çš„æ—¶é—´æ˜¯Oï¼ˆ1ï¼‰ï¼‹Oï¼ˆmï¼‰ï¼Œmæœ€åæ—¶å¯èƒ½ä¸ºnã€‚</p>
<ul>
<li>Oï¼ˆ1ï¼‰ï¼šä¸ºå¯¹keyè¿›è¡Œhashå¾—åˆ°bucketçš„ä½ç½®</li>
<li>Oï¼ˆmï¼‰ï¼šéå†è¯¥bucketåé¢å†²çªçš„valueï¼Œé€šè¿‡é“¾è¡¨è¿æ¥èµ·æ¥ã€‚<br>NSDictionaryä¸­çš„key Valueéå†æ—¶æ˜¯æ— åºçš„ï¼Œè‡³å¦‚æŒ‰ç…§ä»€ä¹ˆæ ·çš„é¡ºåºï¼Œè·Ÿhashå‡½æ•°ç›¸å…³ã€‚NSMapTableä½¿ç”¨NSObjectçš„å“ˆå¸Œå‡½æ•°ã€‚</li>
</ul>
<p>-(NSUInteger)hash {<br>   return (NSUInteger)self&gt;&gt;4;<br>}<br>ä¸Šè¿°æ˜¯NSObjectçš„å“ˆå¸Œå€¼çš„è®¡ç®—æ–¹å¼ï¼Œç®€å•é€šè¿‡ç§»ä½å®ç°ã€‚å³ç§»4ä½ï¼Œå·¦è¾¹è¡¥0.<br>å› ä¸ºå¯¹è±¡å¤§å¤šå­˜äºå †ä¸­ï¼Œåœ°å€ç›¸å·®4ä½åº”è¯¥å¾ˆæ­£å¸¸ã€‚</p>
<p>è¡¥å……ä¸€ä¸ªå°çŸ¥è¯†ï¼šiOS setValueå’ŒsetObjectçš„åŒºåˆ«ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">- (void)setObject:(ObjectType)anObject forKey:(KeyType &lt;NSCopying&gt;)aKey;</div><div class="line">- (void)setValue:(nullable ObjectType)value forKey:(NSString *)key;</div></pre></td></tr></table></figure>
<p>é¦–å…ˆï¼šsetObject: ForKey:æ˜¯NSMutableDictionaryç‰¹æœ‰çš„ï¼›setValue: ForKey:æ˜¯KVCçš„ä¸»è¦æ–¹æ³•ã€‚</p>
<p>åŒºåˆ«ï¼š<br>&gt;<br>(1) setValue: ForKey:çš„valueæ˜¯å¯ä»¥ä¸ºnilçš„ï¼ˆä½†æ˜¯å½“valueä¸ºnilçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨removeObjectï¼šforKeyæ–¹æ³•ï¼‰ï¼›<br>setObject: ForKey:çš„valueåˆ™ä¸å¯ä»¥ä¸ºnilã€‚<br>(2) setValue: ForKey:çš„keyå¿…é¡»æ˜¯ä¸ä¸ºnilçš„å­—ç¬¦ä¸²ç±»å‹ï¼›<br>setObject: ForKey:çš„keyå¯ä»¥æ˜¯ä¸ä¸ºnilçš„æ‰€æœ‰ç»§æ‰¿NSCopyingçš„ç±»å‹ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> iOSåŸºç¡€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[NSNotificationCenterå®ç°]]></title>
      <url>/2018/07/10/2015/NSNotification%E5%AE%9E%E7%8E%B0/</url>
      <content type="html"><![CDATA[<ul>
<li>å¤šæ¬¡æ·»åŠ å¤šæ¬¡æ‰§è¡Œ</li>
<li>iOS8ä¹‹åä¸éœ€è¦ç§»é™¤ï¼Œç§»é™¤æ–¹æ³•è‡ªåŠ¨æ·»åŠ </li>
<li>unsafe_unretainedä¿®é¥°</li>
</ul>
<p><a href="https://juejin.im/entry/5a8fe5c551882518c0797ebe" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a></p>
<p>é€å½»ç†è§£ NSNotificationCenter é€šçŸ¥ï¼ˆå«å®ç°ä»£ç ï¼‰</p>
<p>å†™åœ¨å‰é¢<br>NSNotificationCenterè¿™ä¸ªä¸œè¥¿ä½œä¸ºiOSå·¥ç¨‹å¸ˆæƒ³å¿…éƒ½ä¸é™Œç”Ÿï¼Œä½†æ˜¯æœ‰äººå¯èƒ½è¿å‚æ•°çš„æ„ä¹‰éƒ½æ²¡ææ˜ç™½ï¼Œå†™è¿™ç¯‡æ–‡ç« çš„ç›®çš„ä¸æ­¢æ˜¯ä¸ºäº†è®©ä¸ä¼šç”¨çš„äººä¼šç”¨ï¼Œæ›´æ˜¯ä¸ºäº†è®©ä¼šç”¨çš„äººç†è§£å¾—æ›´é€å½»ã€‚æœ¬ç¯‡æ–‡ç« ä¸»è¦æ˜¯æ¢³ç†NSNotificationCenterçš„ç‰¹æ€§å’Œå€¼å¾—æ³¨æ„çš„åœ°æ–¹ï¼Œå¹¶ä¸”åœ¨åé¢ç»“åˆå¯¹å…¶ç‰¹æ€§çš„åˆ†ææ‰‹åŠ¨åˆ©ç”¨ä»£ç æ¥å®ç°å®ƒã€‚<br><a id="more"></a></p>
<h3 id="ä¸€ã€åˆ†æ"><a href="#ä¸€ã€åˆ†æ" class="headerlink" title="ä¸€ã€åˆ†æ"></a>ä¸€ã€åˆ†æ</h3><h4 id="1ã€-åŸºæœ¬ä½¿ç”¨æ–¹æ³•"><a href="#1ã€-åŸºæœ¬ä½¿ç”¨æ–¹æ³•" class="headerlink" title="1ã€ åŸºæœ¬ä½¿ç”¨æ–¹æ³•"></a>1ã€ åŸºæœ¬ä½¿ç”¨æ–¹æ³•</h4><p>ç›´æ¥è¿›å…¥NSNotificationæ–‡ä»¶ã€‚<br>@property (class, readonly, strong) NSNotificationCenter *defaultCenter;<br>è¯¥å±æ€§æ˜¯è·å–NSNotificationCenterå”¯ä¸€å•ä¾‹ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ¶ˆæ¯åˆ†å‘ä¸­å¿ƒï¼Œé€šè¿‡ä½¿ç”¨è¿™ä¸ªå”¯ä¸€çš„å®ä¾‹æˆ‘ä»¬è¿›è¡Œæ·»åŠ é€šçŸ¥ã€å‘é€é€šçŸ¥ã€ç§»é™¤é€šçŸ¥ã€‚</p>
<p>#####(1) æ·»åŠ é€šçŸ¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(respondsToNotification:) name:@&quot;test0&quot; object:_obj0];</div></pre></td></tr></table></figure>
<p>_obj0æ˜¯åˆ›å»ºçš„ä¸€ä¸ªå®ä¾‹ï¼Œè¿™é‡Œæš‚æ—¶ä¸è®¨è®ºobjectå‚æ•°çš„ç”¨æ³•ã€‚Observerå³ä¸ºå“åº”è€…æ— éœ€å¤šè¯´ï¼›selectorå³ä¸ºä¸€ä¸ªå“åº”é€šçŸ¥çš„æ–¹æ³•ï¼Œéœ€è¦SELç±»å‹ï¼›nameæ˜¯ä¸€ä¸ªæ ‡è¯†ï¼Œé€šçŸ¥ä¸­å¿ƒä¸»è¦æ˜¯é€šè¿‡å®ƒæ¥å®ç°æ¶ˆæ¯çš„ç²¾ç¡®åˆ†å‘ï¼ˆå½“ç„¶objectä¹Ÿæœ‰å®šä½ä½œç”¨ï¼‰ã€‚</p>
<p>#####(2) å‘é€é€šçŸ¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//ä¾¿åˆ©æ–¹æ³•</div><div class="line">[[NSNotificationCenter defaultCenter] postNotificationName:@&quot;test0&quot; object:_obj0 userInfo:@&#123;@&quot;key&quot;:@&quot;_obj0&quot;&#125;];</div><div class="line">//ä½¿ç”¨NSNotification</div><div class="line">NSNotification *notification = [[NSNotification alloc] initWithName:@&quot;test0&quot; object:_obj2 userInfo:@&#123;@&quot;key&quot;:@&quot;_obj2&quot;&#125;];</div><div class="line"> [[NSNotificationCenter defaultCenter] postNotification:notification];</div></pre></td></tr></table></figure>
<p>å‘é€é€šçŸ¥å’Œæ·»åŠ é€šçŸ¥å¯¹åº”ï¼Œéœ€è¦nameã€objectå‚æ•°ï¼Œè¿™é‡Œå¤šäº†ä¸€ä¸ªuserInfoï¼Œè¯¥å‚æ•°å¯ä»¥æŠŠä½ éœ€è¦æºå¸¦çš„æ•°æ®å‘é€ç»™è¯¥é€šçŸ¥çš„å“åº”è€…ã€‚<br>å…¶å®æˆ‘ä»¬å¯ä»¥å¾ˆè½»æ˜“çš„æƒ³åˆ°ï¼Œä¾¿åˆ©å‘é€é€šçŸ¥æ–¹æ³•ä¸è¿‡æ˜¯å¯¹äºä½¿ç”¨NSNotificationå‘é€é€šçŸ¥çš„ä¸€ä¸ªè¯­æ³•ç³–ï¼ŒNSNotificationæ‰æ˜¯æ¶ˆæ¯ä½“ã€‚</p>
<h5 id="3-ç§»é™¤é€šçŸ¥"><a href="#3-ç§»é™¤é€šçŸ¥" class="headerlink" title="(3) ç§»é™¤é€šçŸ¥"></a>(3) ç§»é™¤é€šçŸ¥</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//ç§»é™¤è¯¥å“åº”è€…çš„å…¨éƒ¨é€šçŸ¥</div><div class="line">[[NSNotificationCenter defaultCenter]  removeObserver:self];</div><div class="line">//ç§»é™¤è¯¥å“åº”è€… name==@&quot;test0&quot; çš„å…¨éƒ¨é€šçŸ¥</div><div class="line">[[NSNotificationCenter defaultCenter] removeObserver:self name:@&quot;test0&quot; object:nil];</div><div class="line">//ç§»é™¤è¯¥å“åº”è€… name==@&quot;test0&quot; ä¸” object==_obj0 çš„å…¨éƒ¨é€šçŸ¥</div><div class="line">[[NSNotificationCenter defaultCenter] removeObserver:self name:@&quot;test0&quot; object:_obj0];</div></pre></td></tr></table></figure>
<p>ç§»é™¤é€šçŸ¥è¿™é‡Œæœ‰ç‚¹è®²ç©¶ï¼Œä»ä¸Šè‡³ä¸‹è¶Šæ¥è¶Šâ€œç²¾å‡†â€ã€‚<br>åœ¨åˆç†çš„ä½ç½®ç§»é™¤é€šçŸ¥æ˜¯è‡³å…³é‡è¦çš„ï¼š</p>
<p>1ã€è®©ä¸å¸Œæœ›ç»§ç»­æ¥å—é€šçŸ¥çš„å“åº”è€…å¤±å»å¯¹è¯¥é€šçŸ¥çš„å“åº”ï¼›</p>
<p>2ã€é¿å…é‡å¤æ·»åŠ ç›¸åŒé€šçŸ¥ï¼ˆå“åº”è€…çš„å†…å­˜ä¸ºåŒä¸€å—çš„æ—¶å€™ï¼‰ï¼›</p>
<p>3ã€é€šçŸ¥ä¸­å¿ƒå¯¹å“åº”è€…observeræ˜¯ä½¿ç”¨unsafe_unretainedä¿®é¥°ï¼Œå½“å“åº”è€…é‡Šæ”¾ä¼šå‡ºç°é‡æŒ‡é’ˆï¼Œå‘é‡æŒ‡é’ˆå‘é€æ¶ˆæ¯é€ æˆå´©æºƒï¼›åœ¨iOS n(æ›´æ–°çš„ç³»ç»Ÿç‰ˆæœ¬æœ‰å¾…è€ƒè¯)ä¹‹åï¼Œè‹¹æœå¯¹å…¶åšäº†ä¼˜åŒ–ï¼Œä¼šåœ¨å“åº”è€…è°ƒç”¨deallocæ–¹æ³•çš„æ—¶å€™æ‰§è¡ŒremoveObserver:æ–¹æ³•ã€‚<br>æ³¨æ„ï¼šåœ¨åæ–‡ä¼šè¯¦ç»†åˆ†æè¯¥é—®é¢˜ã€‚</p>
<p>å½“ç„¶ï¼Œå¸¸è§„çš„ä¸šåŠ¡åœºæ™¯ä¸€èˆ¬æ˜¯åœ¨è¯¥å“åº”è€…é‡Šæ”¾çš„æ—¶å€™ç§»é™¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- (void)dealloc &#123;</div><div class="line">    [[NSNotificationCenter defaultCenter] removeObserver:self];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="4-å“åº”é€šçŸ¥"><a href="#4-å“åº”é€šçŸ¥" class="headerlink" title="(4) å“åº”é€šçŸ¥"></a>(4) å“åº”é€šçŸ¥</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (void)respondsToNotification:(NSNotification *)noti &#123;</div><div class="line">    id obj = noti.object;</div><div class="line">    NSDictionary *dic = noti.userInfo;</div><div class="line">    NSLog(@&quot;\n- self:%@ \n- obj:%@ \n- notificationInfo:%@&quot;, self, obj, dic);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å“åº”é€šçŸ¥çš„æ—¶å€™ä¼šå°†NSNotificationæ¶ˆæ¯ä½“ä¼ é€’è¿‡æ¥ï¼Œå¦‚ä»£ç æ‰€ç¤ºã€‚</p>
<h3 id="2ã€object-nullable-id-anObjectå‚æ•°"><a href="#2ã€object-nullable-id-anObjectå‚æ•°" class="headerlink" title="2ã€object:(nullable id)anObjectå‚æ•°"></a>2ã€object:(nullable id)anObjectå‚æ•°</h3><p>æ·»åŠ é€šçŸ¥æ—¶ï¼Œè‹¥æŒ‡å®šäº†objectå‚æ•°ï¼Œé‚£ä¹ˆè¯¥å“åº”è€…åªä¼šæ¥æ”¶å‘é€é€šçŸ¥æ—¶objectå‚æ•°æŒ‡å®šä¸ºåŒä¸€å®ä¾‹çš„é€šçŸ¥ã€‚<br>å‘é€é€šçŸ¥æ—¶ï¼Œè‹¥æŒ‡å®šäº†objectå‚æ•°ï¼Œå¹¶ä¸ä¼šå½±å“æ·»åŠ é€šçŸ¥æ—¶æ²¡æœ‰æŒ‡å®šobjectå‚æ•°çš„å“åº”è€…æ¥æ”¶é€šçŸ¥ã€‚<br>å¦‚æœæ„Ÿè§‰æœ‰ç‚¹ç»•ï¼Œçœ‹å¦‚ä¸‹ä»£ç ä¾¿çŸ¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//æ·»åŠ é€šçŸ¥</div><div class="line">    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(respondsToNotification:) name:@&quot;test0&quot; object:nil];</div><div class="line">//å‘é€é€šçŸ¥</div><div class="line">    [[NSNotificationCenter defaultCenter] postNotificationName:@&quot;test0&quot; object:_obj0];</div></pre></td></tr></table></figure>
<p>//ç”±äºæ·»åŠ é€šçŸ¥æ—¶ï¼Œobject==nilï¼Œæ‰€ä»¥è¯¥å“åº”è€…ä»ç„¶èƒ½æ¥æ”¶åˆ°è¯¥é€šçŸ¥ã€‚<br>å¤åˆ¶ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//æ·»åŠ é€šçŸ¥</div><div class="line">    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(respondsToNotification:) name:@&quot;test0&quot; object: _obj0];</div><div class="line">//å‘é€é€šçŸ¥</div><div class="line">    [[NSNotificationCenter defaultCenter] postNotificationName:@&quot;test0&quot; object:nil];</div></pre></td></tr></table></figure>
<p>//ç”±äºæ·»åŠ é€šçŸ¥æ—¶ï¼ŒæŒ‡å®šäº†object==_obj0ï¼Œè€Œå‘é€é€šçŸ¥æ—¶ï¼Œobject==nilï¼Œæ‰€ä»¥æ— æ³•æ¥æ”¶åˆ°é€šçŸ¥<br>//ï¼ˆåªæœ‰å½“object==_obj0æ‰èƒ½æ¥æ”¶åˆ°é€šçŸ¥ï¼‰ã€‚<br>å¤åˆ¶ä»£ç </p>
<h3 id="3ã€é€šçŸ¥çº¿ç¨‹é—®é¢˜"><a href="#3ã€é€šçŸ¥çº¿ç¨‹é—®é¢˜" class="headerlink" title="3ã€é€šçŸ¥çº¿ç¨‹é—®é¢˜"></a>3ã€é€šçŸ¥çº¿ç¨‹é—®é¢˜</h3><p>æˆ‘ä»¬è¿›å…¥å…¨å±€é˜Ÿåˆ—å‘é€è¿™ä¸ªé€šçŸ¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line">        NSLog(@&quot;å‘é€é€šçŸ¥ currentThread : %@&quot;, [NSThread currentThread]);</div><div class="line">        [[NSNotificationCenter defaultCenter] postNotificationName:@&quot;test0&quot; object:nil];</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>åœ¨æ¥æ”¶é€šçŸ¥çš„åœ°æ–¹å°†çº¿ç¨‹æ‰“å°å‡ºæ¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">å‘é€é€šçŸ¥ currentThread : &lt;NSThread: 0x60400046aec0&gt;&#123;number = 3, name = (null)&#125;</div><div class="line">å“åº”é€šçŸ¥ currentThread : &lt;NSThread: 0x60400046aec0&gt;&#123;number = 3, name = (null)&#125;</div></pre></td></tr></table></figure>
<p>ç»“è®ºï¼šé€šçŸ¥å‘é€çº¿ç¨‹å’Œé€šçŸ¥æ¥æ”¶çº¿ç¨‹æ˜¯ä¸€è‡´çš„ã€‚ ç”±æ­¤çœ‹æ¥ï¼Œå¦‚æœå½“æˆ‘ä»¬ä¸æ˜¯ç™¾åˆ†ä¹‹ç™¾ç¡®è®¤é€šçŸ¥çš„å‘é€é˜Ÿåˆ—æ˜¯åœ¨ä¸»é˜Ÿåˆ—ä¸­æ—¶ï¼Œæˆ‘ä»¬æœ€å¥½åŠ ä¸Šå¦‚ä¸‹ä»£ç ä»è€Œå¯¹æˆ‘ä»¬çš„UIè¿›è¡Œå¤„ç†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">if (strcmp(dispatch_queue_get_label(DISPATCH_CURRENT_QUEUE_LABEL), dispatch_queue_get_label(dispatch_get_main_queue())) == 0) &#123;</div><div class="line">        //UIå¤„ç†</div><div class="line">&#125; else &#123;</div><div class="line">    dispatch_async(dispatch_get_main_queue(), ^&#123;</div><div class="line">        //UIå¤„ç†</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="4ã€æ˜¯å¦éœ€è¦ç§»é™¤é€šçŸ¥ï¼Ÿ"><a href="#4ã€æ˜¯å¦éœ€è¦ç§»é™¤é€šçŸ¥ï¼Ÿ" class="headerlink" title="4ã€æ˜¯å¦éœ€è¦ç§»é™¤é€šçŸ¥ï¼Ÿ"></a>4ã€æ˜¯å¦éœ€è¦ç§»é™¤é€šçŸ¥ï¼Ÿ</h4><p>ä»¥ä¸‹ä»£ç æ¨¡æ‹Ÿé‡å¤æ·»åŠ é€šçŸ¥çš„æƒ…å†µï¼Œæ‰€ä»¥å¦‚æœå¯èƒ½ä¼šé‡å¤æ·»åŠ é€šçŸ¥ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥åšå¥½ç›¸åº”çš„å¤„ç†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for (int i = 0; i &lt; 3; i++) &#123;</div><div class="line">        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(respondsToNotification:) name:@&quot;test0&quot; object:nil];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>//è¯¥ä»£ç å¯¼è‡´çš„ç»“æœæ˜¯ï¼Œå“åº”é€šçŸ¥å›è°ƒä¼šèµ°ä¸‰æ¬¡ã€‚<br>å¤åˆ¶ä»£ç <br>å¯èƒ½æœ‰äººä¼šé—®ï¼Œä¸ºä»€ä¹ˆç³»ç»Ÿåº“æ²¡æœ‰åšä¸ªé‡å¤æ·»åŠ çš„åˆ¤æ–­ï¼Ÿå½“ç„¶ï¼Œè¿™å¯èƒ½æ˜¯ä¸ºäº†è®©æˆ‘ä»¬æ›´çµæ´»çš„è¿ç”¨ï¼Œä¹Ÿå¯èƒ½æ˜¯å¯¹æ—¶é—´å¤æ‚åº¦çš„ä¸€ç§å¦¥åå§ğŸ˜ã€‚</p>
<p>æœ‰è¿‡æ¯”è¾ƒé•¿å¼€å‘ç»éªŒçš„åŒå­¦åº”è¯¥éƒ½æœ‰è¿‡ï¼Œæ²¡æœ‰åŠæ—¶çš„ç§»é™¤é€šçŸ¥è€Œå¯¼è‡´æ„å¤–å´©æºƒçš„æƒ…å†µã€‚å‰é¢ä¹Ÿè¯´è¿‡ï¼Œé€šçŸ¥ä¸­å¿ƒå¯¹å“åº”è€…observeræ˜¯ä½¿ç”¨unsafe_unretainedä¿®é¥°ï¼Œå½“å“åº”è€…é‡Šæ”¾ä¼šå‡ºç°é‡æŒ‡é’ˆï¼Œå¦‚æœå‘é‡æŒ‡é’ˆå‘é€æ¶ˆæ¯é€ æˆå´©æºƒã€‚åœ¨iOS8ç³»ç»Ÿä¹‹åï¼ˆæ›´æ—©ç‰ˆæœ¬æ²¡æœ‰æµ‹è¯•ï¼‰ï¼Œ[NSNotificationCenter defaultCenter]ä¼šåœ¨å“åº”è€…observerè°ƒç”¨-deallocæ–¹æ³•çš„æ—¶å€™æ‰§è¡Œ-removeObserver:æ–¹æ³•ã€‚</p>
<p>åŠ¨æ‰‹åšä¸ªå°å®éªŒï¼š<br>æ–°å»ºä¸€ä¸ªNSNotificationCenterçš„åˆ†ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">@implementation NSNotificationCenter (YB)</div><div class="line">+ (void)load &#123;</div><div class="line">    Method origin = class_getInstanceMethod([self class], @selector(removeObserver:));</div><div class="line">    Method current = class_getInstanceMethod([self class], @selector(_removeObserver:));</div><div class="line">    method_exchangeImplementations(origin, current);</div><div class="line">&#125;</div><div class="line">- (void)_removeObserver:(id)observer &#123;</div><div class="line">    NSLog(@&quot;è°ƒç”¨ç§»é™¤é€šçŸ¥æ–¹æ³•: %@&quot;, observer);</div><div class="line">//    [self _removeObserver:observer];</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>ç„¶åæ–°å»ºä¸€ä¸ªç±»æ­£å¸¸çš„ä½¿ç”¨é€šçŸ¥ï¼Œä½†æ˜¯è¯·ä¸è¦æ‰‹åŠ¨åœ¨-deallocä¸­é‡Šæ”¾é€šçŸ¥ï¼ˆæˆ‘ä»¬è¦åšå®éªŒï¼‰ã€‚ç„¶åæˆ‘ä»¬é‡Šæ”¾æ‰è¿™ä¸ªç±»ï¼ˆå¯ä»¥ä½¿ç”¨æ§åˆ¶å™¨presentã€dismissï¼‰ã€‚</p>
<p>è°ƒç”¨ç§»é™¤é€šçŸ¥æ–¹æ³•: <test_vc: 0x7f9a0a4d9240=""><br>å¤åˆ¶ä»£ç <br>ç¥å¥‡çš„ç°è±¡å‘ç”Ÿäº†ï¼Œé€šè¿‡æ¯”è¾ƒå†…å­˜åœ°å€ï¼Œ[NSNotificationCenter defaultCenter]ç¡®å®æ˜¯è°ƒç”¨äº†removeObserver :æ–¹æ³•ç§»é™¤å¯¹åº”å“åº”è€…çš„é€šçŸ¥ç›‘å¬ã€‚</test_vc:></p>
<p>æ³¨æ„ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘å°†[self _removeObserver:observer];æ³¨é‡Šæ‰äº†ï¼Œæ„å‘³ç€è¯¥æ–¹æ³•å·²ç»è¢«æˆ‘æˆªå–äº†ï¼Œæˆ‘ä»¬å†å‘è¯¥â€œç§»é™¤é€šçŸ¥æœªé‚â€çš„å“åº”è€…observerå‘é€é€šçŸ¥ï¼Œç›´æ¥å´©æºƒã€‚å½“å»é™¤æ³¨é‡Šï¼Œæ­£å¸¸è¿è¡Œï¼Œæ— éœ€æ‰‹åŠ¨ç§»é™¤ã€‚</p>
<p>ç»“è®ºï¼šå¦‚æœiOSæ”¯æŒç‰ˆæœ¬åœ¨iOS8ä»¥ä¸Šï¼Œå¤šæ•°æƒ…å†µç†è®ºä¸Šå¯ä»¥ä¸ç”¨ç§»é™¤é€šçŸ¥ï¼Œä½†æ˜¯ç”±äºå†å²é—ç•™ã€å¼€å‘è€…ä¹ æƒ¯ç­‰å› ç´ ï¼Œçœ‹ä¸ªäººå–œå¥½äº†</p>
<p>äºŒã€ä»£ç å®ç°<br>NSNotification ä»£ç å®ç°åœ°å€<br>å¿ƒè¡€æ¥æ½®ï¼Œçœ‹ç€NSNotification.hçš„APIå’Œæœ¬ç€å¯¹å…¶çš„ç†è§£ï¼Œå†³å®šç€æ‰‹å®ç°ä¸€æ³¢ã€‚<br>å…¶å®ä»”ç»†ä¸€æƒ³ï¼Œé€šçŸ¥çš„åŠŸèƒ½ç±»ä¼¼äºä¸€ä¸ªè·¯ç”±ï¼Œå®ƒçš„åŸºæœ¬å®ç°æ€è·¯å¹¶ä¸å¤æ‚ã€‚æˆ‘ä»¬è¦åšçš„æ— éæ˜¯â€œæ·»åŠ â€ã€â€œå‘é€â€ã€â€œç§»é™¤â€ä¸‰ä»¶äº‹ã€‚<br>ä½†æ˜¯åœ¨å…·ä½“å®ç°ä¸­ï¼Œè¿˜æ˜¯æœ‰äº›æ¯”è¾ƒéº»çƒ¦çš„åœ°æ–¹ï¼Œä¸‹é¢å…·ä½“å™è¿°ï¼ˆæœ€å¥½ä¸‹è½½demoä¾¿äºç†è§£ï¼‰ã€‚</p>
<p>1ã€æ·»åŠ é€šçŸ¥<br>é¦–å…ˆï¼Œåˆ›å»ºäº†ä¸€ä¸ªYBNotificationCenterç±»ï¼Œå±æ€§å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">@property (class, strong) YBNotificationCenter *defaultCenter;</div><div class="line">@property (strong) NSMutableDictionary *observersDic;</div></pre></td></tr></table></figure>
<p>defaultCenterç±»å±æ€§ä¸ç”¨è¯´ï¼Œå®ƒæ˜¯å”¯ä¸€å•ä¾‹ï¼ˆå…·ä½“å®ç°çœ‹ä»£ç ï¼‰ï¼›observersDicå³ä¸ºç”¨æ¥å­˜å‚¨æ·»åŠ é€šçŸ¥ç›¸å…³ä¿¡æ¯çš„å­—å…¸ã€‚</p>
<p>ç„¶ååˆ›å»ºäº†ä¸€ä¸ªYBObserverInfoModelç±»ï¼Œå±æ€§å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">@property (weak) id observer;</div><div class="line">@property (strong) id observer_strong;</div><div class="line">@property (strong) NSString *observerId;</div><div class="line">@property (assign) SEL selector;</div><div class="line">@property (weak) id object;</div><div class="line">@property (copy) NSString *name;</div><div class="line">@property (strong) NSOperationQueue *queue;</div><div class="line">@property (copy) void(^block)(YBNotification *noti);</div></pre></td></tr></table></figure>
<p>è¯¥ç±»å°±æ˜¯å“åº”è€…ä¿¡æ¯å­˜å‚¨æ¨¡å‹ç±»ï¼Œä¹Ÿå°±æ˜¯ä¼šæ”¾åœ¨ä¸Šé¢observersDicå­—å…¸å†…çš„å…ƒç´ ã€‚å…ˆå›å¿†ä¸€ä¸‹ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨<code>- (void)addObserver:(id)observer selector:(SEL)aSelector name:(nullable NSString *)aName object:(nullable id)anObject;æˆ–- (id&lt;NSObject&gt;)addObserverForName:(nullable NSString *)name object:(nullable id)obj queue:(nullable NSOperationQueue *)queue usingBlock:(void (^)(YBNotification *note))block;</code>æ–¹æ³•æ—¶ï¼Œè¿™äº›é…ç½®çš„å˜é‡æ˜¯ä¸æ˜¯åœ¨YBObserverInfoModeléƒ½æœ‰ä½“ç°å‘¢ï¼Ÿ</p>
<p>æ˜¯çš„ï¼Œæ·»åŠ é€šçŸ¥çš„æ“ä½œä¸è¿‡å°±æ˜¯å°†æˆ‘ä»¬éœ€è¦é…ç½®çš„å˜é‡ç»Ÿç»Ÿå­˜å‚¨èµ·æ¥ï¼Œä½†æ˜¯æ³¨æ„å‡ ç‚¹ï¼šä¸€æ˜¯å¯¹observerå’Œobjectä¸èƒ½å¼ºæŒæœ‰ï¼Œå¦åˆ™å…¶æ— æ³•æ­£å¸¸é‡Šæ”¾ï¼›äºŒæ˜¯å¯¹nameå±æ€§æœ€å¥½ä½¿ç”¨copyä¿®é¥°ï¼Œä¿è¯å…¶ä¸ä¼šå—å¤–éƒ¨å¹²æ‰°ï¼›ä¸‰æ˜¯observer_strongå±æ€§æ˜¯åœ¨ä½¿ç”¨ä»£ç å—å›è°ƒçš„é‚£ä¸ªæ·»åŠ é€šçŸ¥æ–¹æ³•æ—¶ï¼Œéœ€è¦ä½¿ç”¨åˆ°çš„å¼ºå¼•ç”¨å±æ€§ï¼›å››æ˜¯observerIdå±æ€§ä¼šæ¯”è¾ƒé™Œç”Ÿï¼Œå®ƒçš„ä½œç”¨å¤§å®¶å¯ä»¥å…ˆä¸ç®¡ï¼Œä¹‹åä¼šæœ‰ç”¨å¤„ã€‚</p>
<p>æ·»åŠ é€šçŸ¥æ ¸å¿ƒä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (void)addObserverInfo:(YBObserverInfoModel *)observerInfo &#123;</div><div class="line">    //æ·»åŠ è¿›observersDic</div><div class="line">    NSMutableDictionary *observersDic = YBNotificationCenter.defaultCenter.observersDic;</div><div class="line">    @synchronized(observersDic) &#123;</div><div class="line">        NSString *key = (observerInfo.name &amp;&amp; [observerInfo.name isKindOfClass:NSString.class]) ? observerInfo.name : key_observersDic_noContent;</div><div class="line">        if ([observersDic objectForKey:key]) &#123;</div><div class="line">            NSMutableArray *tempArr = [observersDic objectForKey:key];</div><div class="line">            [tempArr addObject:observerInfo];</div><div class="line">        &#125; else &#123;</div><div class="line">            NSMutableArray *tempArr = [NSMutableArray array];</div><div class="line">            [tempArr addObject:observerInfo];</div><div class="line">            [observersDic setObject:tempArr forKey:key];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªé…ç½®å¥½çš„YBObserverInfoModelæ¨¡å‹è¿›å…¥æ–¹æ³•ï¼Œæ„å»ºä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œç”¨ä¼ å…¥çš„nameä½œä¸ºkeyï¼ˆå¦‚æœnameä¸ºç©ºä½¿ç”¨key_observersDic_noContentå¸¸é‡ä»£æ›¿ï¼‰ï¼ŒæŠŠæ‰€æœ‰ä½¿ç”¨ç›¸åŒnameçš„é€šçŸ¥æ”¾è¿›åŒä¸€ä¸ªæ•°ç»„ä½œä¸ºvalueï¼Œå¹¶ä¸”æ·»åŠ äº†çº¿ç¨‹é”ä¿è¯observersDicæ•°æ®è¯»å†™å®‰å…¨ã€‚</p>
<p>è¿™ä¹ˆåšçš„ç†ç”±ï¼šåœ¨é€šçŸ¥çš„æ•´ä¸ªåŠŸèƒ½ä½“ç³»ä¸­ï¼Œâ€œæ·»åŠ â€ã€â€œå‘é€â€ã€â€œç§»é™¤â€å“ªä¸€æ­¥å¯¹æ•ˆç‡çš„è¦æ±‚æœ€é«˜ï¼Ÿæ¯«æ— ç–‘é—®æ˜¯â€œå‘é€â€çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨- (void)postNotificationName:(NSString *)aName object:(nullable id)anObjectæ–¹æ³•å‘é€é€šçŸ¥ï¼ŒaNameå‚æ•°å°†æ˜¯æˆ‘ä»¬æ‰¾åˆ°å¯¹åº”é€šçŸ¥çš„ç¬¬ä¸€åŒ¹é…ç‚¹ã€‚å¦‚æœæˆ‘ä»¬å°†å…¶å®ƒå‚æ•°ä½œä¸ºobserversDicçš„keyï¼Œæˆ‘ä»¬å‘é€é€šçŸ¥çš„æ—¶å€™ä¸å¾—ä¸éå†æ•´ä¸ªobserversDicï¼›è€Œå¦‚ä¸Šä»£ç å®ç°ï¼Œå‘é€é€šçŸ¥çš„æ—¶å€™ï¼Œç›´æ¥å°±èƒ½é€šè¿‡keyç›´æ¥æ‰¾åˆ°å¯¹åº”çš„é€šçŸ¥ä¿¡æ¯äº†ï¼Œæœ‰æ•ˆé™ä½äº†æ—¶é—´å¤æ‚åº¦ã€‚</p>
<p>ä½¿ç”¨ä»£ç å—å›è°ƒé€šçŸ¥æ–¹æ³•çš„å®ç°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">- (id&lt;NSObject&gt;)addObserverForName:(NSString *)name object:(id)obj queue:(NSOperationQueue *)queue usingBlock:(void (^)(YBNotification * _Nonnull))block &#123;</div><div class="line">    if (!block) &#123;</div><div class="line">        return nil;</div><div class="line">    &#125;</div><div class="line">    YBObserverInfoModel *observerInfo = [YBObserverInfoModel new];</div><div class="line">    observerInfo.object = obj;</div><div class="line">    observerInfo.name = name;</div><div class="line">    observerInfo.queue = queue;</div><div class="line">    observerInfo.block = block;</div><div class="line">    NSObject *observer = [NSObject new];</div><div class="line">    observerInfo.observer_strong = observer;</div><div class="line">    observerInfo.observerId = [NSString stringWithFormat:@&quot;%@&quot;, observer];</div><div class="line">    </div><div class="line">    [self addObserverInfo:observerInfo];</div><div class="line">    return observer;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæœ‰ä¸ªåœ°æ–¹éœ€è¦æå‡ºæ¥è°ˆè°ˆï¼Œåœ¨ä½¿ç”¨ç³»ç»Ÿçš„è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œä¸€ç»å®éªŒå°±èƒ½å‘ç°ï¼Œä¸ç®¡æˆ‘ä»¬å¼ºå¼•ç”¨æˆ–è€…å¼±å¼•ç”¨è¿™ä¸ªè¿”å›å€¼id<nsobject>æ—¶ï¼Œéƒ½èƒ½åœ¨ä¸šåŠ¡ç±»deallocé‡Šæ”¾çš„æ—¶å€™æœ‰æ•ˆçš„ç§»é™¤è¯¥é€šçŸ¥ã€‚</nsobject></p>
<p>ç”±äºä½¿ç”¨è¯¥æ–¹æ³•æ·»åŠ é€šçŸ¥çš„æ—¶å€™ä¸ä¼šä¼ å…¥observerå‚æ•°ï¼Œè¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªobserverï¼Œå¦‚æœè¿™é‡Œä½¿ç”¨observerInfo.observer = observer;ï¼Œè€Œä¸šåŠ¡ç±»æ²¡æœ‰å¼ºå¼•ç”¨è¿™ä¸ªè¿”å›å€¼observerï¼Œå®ƒå°†ä¼šè‡ªç„¶é‡Šæ”¾ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œåšäº†ä¸€ä¸ªç‰¹æ®Šå¤„ç†ï¼Œè®©observerInfoå®ä¾‹å¼ºæŒæœ‰observerã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¤–éƒ¨å¦‚æœå¼ºå¼•ç”¨è¿”å›çš„id<nsobject>ç±»å‹çš„observerï¼Œä¼šé€ æˆobserveræ— æ³•åŠæ—¶çš„é‡Šæ”¾ï¼Œä½†æ˜¯è¿™ç‚¹å†…å­˜æˆ‘è®¤ä¸ºè¿˜æ˜¯å¯ä»¥æ¥å—çš„ï¼Œå½“ç„¶ä¸šåŠ¡ç±»ä½¿ç”¨å¼±å¼•ç”¨è¯¥observeræ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</nsobject></p>
<p>2ã€å‘é€é€šçŸ¥<br>å’Œç³»ç»Ÿé€šçŸ¥ä¸€æ ·ï¼ŒåŒæ ·åˆ›å»ºäº†ä¸€ä¸ªç±»YBNotificationå‘é€é€šçŸ¥æ¶ˆæ¯ä½“ï¼Œå±æ€§å°±æˆ‘ä»¬ç†Ÿæ‚‰çš„å‡ ä¸ªï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">@property (copy) NSString *name;</div><div class="line">@property (weak) id object;</div><div class="line">@property (copy) NSDictionary *userInfo;</div><div class="line">å¤åˆ¶ä»£ç </div><div class="line">ç„¶åå°†&lt;NSCopying, NSCoding&gt;ä¸¤ä¸ªåè®®å®ç°ä¸€ä¸‹å°±å¥½äº†ï¼Œå…·ä½“çœ‹demoã€‚</div><div class="line"></div><div class="line">å‘é€é€šçŸ¥æ ¸å¿ƒä»£ç </div><div class="line">- (void)postNotification:(YBNotification *)notification &#123;</div><div class="line">    if (!notification) &#123;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    NSMutableDictionary *observersDic = YBNotificationCenter.defaultCenter.observersDic;</div><div class="line">    NSMutableArray *tempArr = [observersDic objectForKey:notification.name];</div><div class="line">    if (tempArr) &#123;</div><div class="line">        [tempArr enumerateObjectsUsingBlock:^(YBObserverInfoModel *obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;</div><div class="line">            if (obj.block) &#123;</div><div class="line">                if (obj.queue) &#123;</div><div class="line">                    NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^&#123;</div><div class="line">                        obj.block(notification);</div><div class="line">                    &#125;];</div><div class="line">                    NSOperationQueue *queue = obj.queue;</div><div class="line">                    [queue addOperation:operation];</div><div class="line">                &#125; else &#123;</div><div class="line">                    obj.block(notification);</div><div class="line">                &#125;</div><div class="line">            &#125; else &#123;</div><div class="line">                if (!obj.object || obj.object == notification.object) &#123;</div><div class="line">#pragma clang diagnostic push</div><div class="line">#pragma clang diagnostic ignored &quot;-Warc-performSelector-leaks&quot;</div><div class="line">                    obj.observer?[obj.observer performSelector:obj.selector withObject:notification]:nil;</div><div class="line">#pragma clang diagnostic pop</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å‘é€é€šçŸ¥ç›¸å¯¹ç®€å•ï¼Œåªéœ€è¦åˆ†æ¸…æ˜¯ä½¿ç”¨ä»£ç å—å›è°ƒï¼Œè¿˜æ˜¯é€šè¿‡æ‰§è¡ŒSELå›è°ƒã€‚åœ¨ä½¿ç”¨ä»£ç å—å›è°ƒæ—¶ï¼Œå¦‚æœä¼ å…¥äº†é˜Ÿåˆ—queueï¼Œå°±è®©è¯¥ä»£ç å—åœ¨è¯¥é˜Ÿåˆ—ä¸­æ‰§è¡Œï¼Œå¦åˆ™æ­£å¸¸æ‰§è¡Œã€‚<br>!obj.object || obj.object == notification.objectifè¯­å¥ä¸­è¿™ä¸ªåˆ¤æ–­å€¼å¾—æ³¨æ„ã€‚</p>
<p>3ã€ç§»é™¤é€šçŸ¥<br>ç§»é™¤é€šçŸ¥æœ¬èº«ç®€å•ï¼Œæœ‰äº›éº»çƒ¦çš„æ˜¯è‡ªåŠ¨ç§»é™¤ã€‚å…ˆè´´ä¸Šç§»é™¤ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">- (void)removeObserverId:(NSString *)observerId name:(NSString *)aName object:(id)anObject &#123;</div><div class="line">    if (!observerId) &#123;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    NSMutableDictionary *observersDic = YBNotificationCenter.defaultCenter.observersDic;</div><div class="line">    @synchronized(observersDic) &#123;</div><div class="line">        if (aName &amp;&amp; [aName isKindOfClass:[NSString class]]) &#123;</div><div class="line">            NSMutableArray *tempArr = [observersDic objectForKey:[aName mutableCopy]];</div><div class="line">            [self array_removeObserverId:observerId object:anObject array:tempArr];</div><div class="line">        &#125; else &#123;</div><div class="line">            [observersDic enumerateKeysAndObjectsUsingBlock:^(NSString *key, NSMutableArray *obj, BOOL * _Nonnull stop) &#123;</div><div class="line">                [self array_removeObserverId:observerId object:anObject array:obj];</div><div class="line">            &#125;];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">- (void)array_removeObserverId:(NSString *)observerId object:(id)anObject array:(NSMutableArray *)array &#123;</div><div class="line">    @autoreleasepool &#123;</div><div class="line">        [array.copy enumerateObjectsUsingBlock:^(YBObserverInfoModel *obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;</div><div class="line">            if ([obj.observerId isEqualToString:observerId] &amp;&amp; (!anObject || anObject == obj.object)) &#123;</div><div class="line">                [array removeObject:obj];</div><div class="line">            &#125;</div><div class="line">        &#125;];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ‰€æœ‰ç§»é™¤é€šçŸ¥çš„æ–¹æ³•ï¼Œæœ€ç»ˆè½è„šç‚¹éƒ½æ˜¯åœ¨è¿™é‡Œã€‚<br>ä¸Šé¢æ–¹æ³•ä¸­ï¼Œå¦‚æœaNameä¸æ˜¯åˆç†çš„ï¼Œå°±éœ€è¦éå†observersDicç§»é™¤å¯¹åº”çš„é€šçŸ¥ï¼›å¦‚æœaNameæ˜¯åˆç†çš„ï¼Œå°±ç›´æ¥æŸ¥æ‰¾å¯¹åº”çš„æ•°ç»„ç§»é™¤å†…å®¹ã€‚<br>ä¸‹é¢æ–¹æ³•ä¸­ï¼Œç”±äºarray.copyé€ æˆäº†å±€éƒ¨å˜é‡ï¼Œè€Œä¸Šçº§å¯èƒ½æ˜¯ä¸€ä¸ªéå†ï¼Œæ‰€ä»¥å¾—åŠ ä¸Šè‡ªåŠ¨é‡Šæ”¾æ± é¿å…å†…å­˜æ³„éœ²ã€‚</p>
<p>ä½¿ç”¨observerIdå±æ€§ç§»é™¤é€šçŸ¥ï¼Œè€Œä¸ç”¨observerå“åº”è€…æ¥ç›´æ¥æ¯”è¾ƒç§»é™¤ï¼š<br>è¿˜è®°å¾—æ·»åŠ é€šçŸ¥æ—¶YBObserverInfoModelç±»çš„@property (strong) NSString *observerId;å±æ€§ä¹ˆï¼Ÿåœ¨æ·»åŠ é€šçŸ¥çš„æ—¶å€™ï¼Œæˆ‘å°†å“åº”è€…çš„åœ°å€ä¿¡æ¯ä½œä¸ºè¯¥å±æ€§çš„å€¼ï¼ˆä¿è¯å…¶å”¯ä¸€æ€§ï¼‰ï¼š</p>
<p>observerInfo.observerId = [NSString stringWithFormat:@â€%@â€, observer];<br>å¤åˆ¶ä»£ç <br>ç„¶ååœ¨ç§»é™¤çš„æ—¶å€™é€šè¿‡æ¯”è¾ƒè¿›è¡Œç›¸åº”çš„æ“ä½œã€‚</p>
<p>å®ç°è‡ªåŠ¨ç§»é™¤é€šçŸ¥ï¼ˆè§£é‡Šä¸ºä½•ä½¿ç”¨observerIdç§»é™¤é€šçŸ¥è€Œä¸ç”¨observerï¼‰<br>å®ç°è‡ªåŠ¨ç§»é™¤é€šçŸ¥ï¼Œæ€è·¯æ˜¯åœ¨å“åº”è€…observerèµ°deallocçš„æ—¶å€™ç§»é™¤å¯¹åº”çš„é€šçŸ¥ï¼Œéš¾ç‚¹å°±æ˜¯åœ¨ARCä¸­æ˜¯ä¸å…è®¸å¯¹deallocåšç»§æ‰¿å’Œäº¤æ¢æ–¹æ³•ç­‰æ“ä½œçš„ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨äº†ä¸€ä¸ªç¼“å…µä¹‹è®¡â€”â€”åŠ¨æ€ç»™observeræ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œæˆ‘ä»¬ç›‘å¬è¿™ä¸ªå±æ€§çš„deallocæ–¹æ³•ç§»é™¤å¯¹åº”çš„é€šçŸ¥ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">- (void)addObserverInfo:(YBObserverInfoModel *)observerInfo &#123;</div><div class="line">    </div><div class="line">    //ä¸ºobserverå…³è”ä¸€ä¸ªé‡Šæ”¾ç›‘å¬å™¨</div><div class="line">    id resultObserver = observerInfo.observer?observerInfo.observer:observerInfo.observer_strong;</div><div class="line">    if (!resultObserver) &#123;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    YBObserverMonitor *monitor = [YBObserverMonitor new];</div><div class="line">    monitor.observerId = observerInfo.observerId;</div><div class="line">    const char *keyOfmonitor = [[NSString stringWithFormat:@&quot;%@&quot;, monitor] UTF8String];</div><div class="line">    objc_setAssociatedObject(resultObserver, keyOfmonitor, monitor, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</div><div class="line">    </div><div class="line">    //æ·»åŠ è¿›observersDic</div><div class="line">    NSMutableDictionary *observersDic = YBNotificationCenter.defaultCenter.observersDic;</div><div class="line">    @synchronized(observersDic) &#123;</div><div class="line">        NSString *key = (observerInfo.name &amp;&amp; [observerInfo.name isKindOfClass:NSString.class]) ? observerInfo.name : key_observersDic_noContent;</div><div class="line">        if ([observersDic objectForKey:key]) &#123;</div><div class="line">            NSMutableArray *tempArr = [observersDic objectForKey:key];</div><div class="line">            [tempArr addObject:observerInfo];</div><div class="line">        &#125; else &#123;</div><div class="line">            NSMutableArray *tempArr = [NSMutableArray array];</div><div class="line">            [tempArr addObject:observerInfo];</div><div class="line">            [observersDic setObject:tempArr forKey:key];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åªä¸è¿‡åœ¨æ·»åŠ é€šçŸ¥åˆ°observersDicä¹‹å‰ï¼Œæ·»åŠ ä¸€ä¸ªmonitorå®ä¾‹ï¼Œä½¿ç”¨objc_setAssociatedObjectåŠ¨æ€å…³è”æ–¹æ³•ç»™resultObserveræ·»åŠ ä¸€ä¸ªå¼ºå¼•ç”¨çš„å±æ€§ï¼Œæ³¨æ„objc_setAssociatedObjectæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»ä¿è¯å…¶å”¯ä¸€æ€§ï¼Œå› ä¸ºåŒä¸€ä¸ªå“åº”è€…å¯èƒ½æ·»åŠ å¤šä¸ªé€šçŸ¥ã€‚</p>
<p>å¥½äº†ï¼Œç°åœ¨åŸºæœ¬å·¥ä½œéƒ½å®Œæˆäº†ï¼Œåªéœ€è¦åœ¨è¿™ä¸ªYBObserverMonitoræ–¹æ³•ä¸­åšç®€å•çš„ç§»é™¤é€»è¾‘å°±OKäº†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//ç›‘å¬å“åº”è€…é‡Šæ”¾ç±»</div><div class="line">@interface YBObserverMonitor : NSObject</div><div class="line">@property (strong) NSString *observerId;</div><div class="line">@end</div><div class="line">@implementation YBObserverMonitor</div><div class="line">- (void)dealloc &#123;</div><div class="line">    NSLog(@&quot;%@ dealloc&quot;, self);</div><div class="line">    [YBNotificationCenter.defaultCenter removeObserverId:self.observerId];</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>æœºæ™ºçš„ä½ å‘ç°äº†ä»€ä¹ˆäº†ä¹ˆï¼Ÿ<br>ç±»é‡Šæ”¾çš„é¡ºåºæ˜¯å…ˆè‡ªå·±é‡Šæ”¾ç„¶åå…¶å±æ€§é‡Šæ”¾ï¼Œä¹Ÿå°±æ˜¯è¯´ç†è®ºä¸Šåœ¨èµ°YBObserverMonitorçš„ deallocæ—¶ï¼Œobserverå“åº”è€…å¯¹è±¡å·²ç»é‡Šæ”¾äº†ã€‚<br>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨observerå“åº”è€…å¯¹è±¡å¯¹æ¯”åšé‡Šæ”¾æ“ä½œã€‚</p>
<p>å†™åœ¨åé¢<br>å…³äºå®ç°éƒ¨åˆ†ï¼Œè™½ç„¶æˆ‘åšäº†ä¸ªå¤§è‡´çš„æµ‹è¯•ï¼Œå¯èƒ½è¿˜æ˜¯ä¼šå­˜åœ¨ä¸€äº›æ½œåœ¨çš„é—®é¢˜ï¼Œå¸Œæœ›å„ä½å¤§ä½¬ä¸æƒœç¬”å¢¨ç‚¹æ‹¨ä¸€ç•ªğŸ˜ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> iOSåŸºç¡€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[opencvä½¿ç”¨å…¥é—¨]]></title>
      <url>/2018/06/06/2018/opencv%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/</url>
      <content type="html"><![CDATA[<h4 id="DCTä¿¡æ¯çš„è·å–"><a href="#DCTä¿¡æ¯çš„è·å–" class="headerlink" title="DCTä¿¡æ¯çš„è·å–"></a>DCTä¿¡æ¯çš„è·å–</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">import cv2</div><div class="line">import numpy as np</div><div class="line"></div><div class="line">def dct(m):</div><div class="line">    # img = np.uint8(dst)*255.0</div><div class="line">    m = np.float32(m)/255.0</div><div class="line">    return cv2.dct(m)*255</div><div class="line"></div><div class="line">img = cv2.imread(&apos;new.jpeg&apos;,0)</div><div class="line">#cv2.IMREAD_COLORï¼Œæœ€åä¸€ä¸ªå‚æ•°ç•™ç©ºä»£è¡¨å½©è‰²ï¼Œå¦‚æœç”¨0ä»£è¡¨ç°åº¦è½½å…¥</div><div class="line"></div><div class="line"></div><div class="line">cv2.namedWindow(&apos;image&apos;,cv2.WINDOW_NORMAL)</div><div class="line">cv2.imshow(&apos;image&apos;,img)#æ˜¾ç¤ºå›¾åƒï¼Œ</div><div class="line">cv2.waitKey(0)#ç­‰å¾…é”®ç›˜è¾“å…¥ï¼Œä¸ºæ¯«ç§’çº§</div><div class="line">cv2.destroyAllWindows()#å¯ä»¥è½»æ˜“åˆ é™¤ä»»ä½•æˆ‘ä»¬å»ºç«‹çš„çª—å£ï¼Œæ‹¬å·å†…è¾“å…¥æƒ³åˆ é™¤çš„çª—å£å</div></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="åˆ†é€šé“ï¼Œåˆå¹¶ï¼Œå­˜å‚¨å›¾ç‰‡"><a href="#åˆ†é€šé“ï¼Œåˆå¹¶ï¼Œå­˜å‚¨å›¾ç‰‡" class="headerlink" title="åˆ†é€šé“ï¼Œåˆå¹¶ï¼Œå­˜å‚¨å›¾ç‰‡"></a>åˆ†é€šé“ï¼Œåˆå¹¶ï¼Œå­˜å‚¨å›¾ç‰‡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">import cv2  </div><div class="line">import numpy as np  </div><div class="line">import matplotlib.pyplot as plt  </div><div class="line"></div><div class="line">img = cv2.imread(&quot;new.jpeg&quot;) #å…¨è‰²å½©</div><div class="line">b, g, r = cv2.split(img)#é€šé“æ‹†åˆ†</div><div class="line"></div><div class="line">out = cv2.merge([b,g,r])</div><div class="line"></div><div class="line">img1 = cv2.imread(&apos;new.jpeg&apos;,0) #ä¸€ä¸ªé€šé“çš„è‰²å½©</div><div class="line"></div><div class="line">def dct(m):</div><div class="line">    m = np.float32(m)/255.0</div><div class="line">    return cv2.dct(m)*255</div><div class="line"></div><div class="line">img_dct = dct(img1)         #è¿›è¡Œç¦»æ•£ä½™å¼¦å˜æ¢  </div><div class="line">  </div><div class="line">img_dct_log = np.log(abs(img_dct))  #è¿›è¡Œlogå¤„ç†  </div><div class="line">  </div><div class="line">img_recor2 = cv2.idct(img_dct)    #è¿›è¡Œç¦»æ•£ä½™å¼¦åå˜æ¢  </div><div class="line"></div><div class="line">plt.subplot(121)  </div><div class="line">plt.imshow(img, &apos;gray&apos;)  </div><div class="line">plt.title(&apos;original image&apos;)  </div><div class="line">  </div><div class="line">plt.subplot(122)  </div><div class="line">plt.imshow(out,&apos;gray&apos;)  </div><div class="line">plt.title(&apos;IDCT2(cv2_idct)&apos;) </div><div class="line"></div><div class="line">cv2.imwrite(&quot;ouput.jpg&quot;,img) #å­˜å‚¨è¦æ³¨æ„ï¼Œåªèƒ½å­˜å‚¨ä¸ºjpgæ ¼å¼ï¼Œå› ä¸ºæˆ‘è§£å‡ºæ¥åæ²¡æœ‰è¿›è¡Œå‹ç¼©ï¼Œä¸çŸ¥é“å‹ç¼©åä¸èƒ½ä¸èƒ½å­˜å‚¨ä¸ºjpegï¼Œ</div><div class="line">è¿™é‡Œå¦‚æœæ”¹ä¸ºjpegä¼šæŠ¥é”™ could not find a writer for the specified extensi</div><div class="line">on in function cv::imwrite_</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h4 id="è‡ªè¡Œåˆ†ç¦»"><a href="#è‡ªè¡Œåˆ†ç¦»" class="headerlink" title="è‡ªè¡Œåˆ†ç¦»"></a>è‡ªè¡Œåˆ†ç¦»</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">è‡ªè¡Œåˆ†ç¦»ä¸‰é€šé“å‡½æ•°</div><div class="line">å®šä¹‰äº†ä¸‰ä¸ªå‡½æ•°æ¥è·å–ä¸‰ä¸ªé€šé“çš„å­çŸ©é˜µã€‚</div><div class="line"></div><div class="line">è·å–çº¢è‰²é€šé“ï¼š</div><div class="line"></div><div class="line">def get_red(img):</div><div class="line">    redImg = img[:,:,2]</div><div class="line">    return redImg</div><div class="line">è·å–ç»¿è‰²é€šé“ï¼š</div><div class="line"></div><div class="line">def get_green(img):</div><div class="line">    greenImg = img[:,:,1]</div><div class="line">    return greenImg</div><div class="line">è·å–è“è‰²é€šé“</div><div class="line"></div><div class="line">def get_blue(img):</div><div class="line">    blueImg = img[:,:,0]</div><div class="line">    return blueImg</div></pre></td></tr></table></figure>
<h4 id="opencvçš„DCTä½¿ç”¨"><a href="#opencvçš„DCTä½¿ç”¨" class="headerlink" title="opencvçš„DCTä½¿ç”¨"></a>opencvçš„DCTä½¿ç”¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">import cv2</div><div class="line">import numpy as np</div><div class="line"></div><div class="line">B = np.array([[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8]])</div><div class="line">#æœ€å°‘éœ€è¦8*8</div><div class="line">B = B.astype(&apos;float&apos;) #intè½¬float</div><div class="line"></div><div class="line">print B</div><div class="line"></div><div class="line">print type(B)</div><div class="line">print B.shape</div><div class="line"></div><div class="line">dctn = cv2.dct(B) #dctå˜æ¢</div><div class="line"></div><div class="line">print dctn.shape</div><div class="line"></div><div class="line">print dctn</div><div class="line"></div><div class="line">B1 = cv2.idct(dctn) #é€†dctå˜æ¢æˆåŸæ¥çš„æ•°æ®</div><div class="line"></div><div class="line">print B1</div></pre></td></tr></table></figure>
<h4 id="opencvåŠ è½½å›¾åƒ"><a href="#opencvåŠ è½½å›¾åƒ" class="headerlink" title="opencvåŠ è½½å›¾åƒ"></a>opencvåŠ è½½å›¾åƒ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">import cv2</div><div class="line">import numpy as np</div><div class="line">import matplotlib.pyplot as plt  </div><div class="line"></div><div class="line">B=8 # blocksize (In Jpeg the</div><div class="line">img1 = cv2.imread(&quot;new.jpeg&quot;)</div><div class="line"></div><div class="line">h,w=np.array(img1.shape[:2])/B * B  #è¿›è¡Œåƒç´ ä¸ªæ•°çš„æ ¼å¼åŒ–ï¼Œå› ä¸ºè¿™æ ·å°±å¯ä»¥ä¿è¯æ˜¯8*8çš„ä¸ªæ•°é…æ¯”äº†</div><div class="line">print h,w</div><div class="line">img1=img1[:h,:w] #è¿™ä¸€æ­¥å»æ‰æ— ç”¨çš„æ•°æ®ï¼Œè€Œä¸æ˜¯åƒæˆ‘æƒ³çš„ï¼Œå¢åŠ åƒç´ </div><div class="line"></div><div class="line">#Convert BGR to RGB</div><div class="line">img2=np.zeros(img1.shape,np.uint8)</div><div class="line">img2[:,:,0]=img1[:,:,2]</div><div class="line">img2[:,:,1]=img1[:,:,1]</div><div class="line">img2[:,:,2]=img1[:,:,0]</div><div class="line"># plt.imshow(img1) #è¿™ä¸ªæ˜¾ç¤ºçš„æ—¶å€™æ˜¯BGRé¢œè‰²æœ‰ç‚¹å¥‡æ€ª</div><div class="line">plt.imshow(img2)</div></pre></td></tr></table></figure>
<h4 id="å®Œæ•´ä¾‹å­"><a href="#å®Œæ•´ä¾‹å­" class="headerlink" title="å®Œæ•´ä¾‹å­"></a>å®Œæ•´ä¾‹å­</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line">import cv2  </div><div class="line">import numpy as np  </div><div class="line">import matplotlib.pyplot as plt  </div><div class="line"></div><div class="line">img = cv2.imread(&quot;ori.jpg&quot;) #å…¨è‰²å½©</div><div class="line"></div><div class="line">b,g,r = cv2.split(img)</div><div class="line"></div><div class="line">imgYCC = cv2.cvtColor(img, cv2.COLOR_BGR2YCR_CB)</div><div class="line"></div><div class="line">y,cr,cb = cv2.split(imgYCC)</div><div class="line"></div><div class="line">QY=np.array([[16,11,10,16,24,40,51,61],</div><div class="line">                             [12,12,14,19,26,48,60,55],</div><div class="line">                             [14,13,16,24,40,57,69,56],</div><div class="line">                             [14,17,22,29,51,87,80,62],</div><div class="line">                             [18,22,37,56,68,109,103,77],</div><div class="line">                             [24,35,55,64,81,104,113,92],</div><div class="line">                             [49,64,78,87,103,121,120,101],</div><div class="line">                             [72,92,95,98,112,100,103,99]])</div><div class="line"></div><div class="line">def compile(y):</div><div class="line">    print &apos;y&apos;</div><div class="line">    print y</div><div class="line">    b = y.astype(&apos;float&apos;)</div><div class="line">#     b = y.astype(&apos;float&apos;)</div><div class="line">    print type(b)</div><div class="line">    print &apos;b&apos;</div><div class="line">    print b</div><div class="line">    bd = b[:8,:8]</div><div class="line">    print bd.shape</div><div class="line">    print &apos;bd&apos;</div><div class="line">    print bd</div><div class="line">    bdct = cv2.dct(bd)</div><div class="line">    print &apos;bdct&apos;</div><div class="line">    print bdct</div><div class="line">    print &apos;8&apos;</div><div class="line">    print bdct.astype(&apos;int16&apos;)</div><div class="line">    # dct1 = np.uint8(bdct)</div><div class="line">    dct1 = bdct.astype(&apos;int16&apos;)</div><div class="line">    </div><div class="line">    dct1 = dct1 / QY</div><div class="line">    </div><div class="line">    print &apos;dct1&apos;</div><div class="line">    print dct1</div><div class="line">    </div><div class="line">    return dct1</div><div class="line"></div><div class="line">dct1 = compile(y)</div><div class="line"></div><div class="line">dct1 = dct1 * QY</div><div class="line"></div><div class="line">imgf = dct1.astype(&apos;float&apos;)</div><div class="line"># print &apos;imgf&apos;,imgf</div><div class="line">iTrans = cv2.idct(imgf)</div><div class="line"># print &apos;iTrans&apos;,iTrans</div><div class="line">y2 = iTrans.astype(&apos;int16&apos;)</div><div class="line">print &apos;y2&apos;,y2</div><div class="line"></div><div class="line">dct2 = compile(y2.astype(&apos;float&apos;))</div><div class="line"></div><div class="line">dst = cv2.cvtColor(img_YUV, cv2.COLOR_YUV2BGR)</div><div class="line"></div><div class="line"># dct2 = compile(y2)</div></pre></td></tr></table></figure>
<h4 id="åŸºäºDCTå’ŒRBGæ–¹å·®çš„éšå†™ç®—æ³•"><a href="#åŸºäºDCTå’ŒRBGæ–¹å·®çš„éšå†™ç®—æ³•" class="headerlink" title="åŸºäºDCTå’ŒRBGæ–¹å·®çš„éšå†™ç®—æ³•"></a>åŸºäºDCTå’ŒRBGæ–¹å·®çš„éšå†™ç®—æ³•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div></pre></td><td class="code"><pre><div class="line">import cv2</div><div class="line">import numpy as np</div><div class="line">import matplotlib.pyplot as plt</div><div class="line">from compiler.ast import flatten</div><div class="line"></div><div class="line">QC=np.array([[17,18,24,47,99,99,99,99],</div><div class="line">                         [18,21,26,66,99,99,99,99],</div><div class="line">                         [24,26,56,99,99,99,99,99],</div><div class="line">                         [47,66,99,99,99,99,99,99],</div><div class="line">                         [99,99,99,99,99,99,99,99],</div><div class="line">                         [99,99,99,99,99,99,99,99],</div><div class="line">                         [99,99,99,99,99,99,99,99],</div><div class="line">                         [99,99,99,99,99,99,99,99]])</div><div class="line"></div><div class="line">QY=np.array([[16,11,10,16,24,40,51,61],</div><div class="line">             [12,12,14,19,26,48,60,55],</div><div class="line">             [14,13,16,24,40,57,69,56],</div><div class="line">             [14,17,22,29,51,87,80,62],</div><div class="line">             [18,22,37,56,68,109,103,77],</div><div class="line">             [24,35,55,64,81,104,113,92],</div><div class="line">             [49,64,78,87,103,121,120,101],</div><div class="line">             [72,92,95,98,112,100,103,99]])</div><div class="line"></div><div class="line"># QY=np.array([[8,1,1,1,1,1,1,1],</div><div class="line">#              [1,1,1,1,1,1,1,55],</div><div class="line">#              [1,1,1,1,1,1,69,56],</div><div class="line">#              [1,1,1,1,1,87,80,62],</div><div class="line">#              [1,1,1,1,68,109,103,77],</div><div class="line">#              [1,1,1,64,81,104,113,92],</div><div class="line">#              [1,1,78,87,103,121,120,101],</div><div class="line">#              [1,92,95,98,112,100,103,99]])</div><div class="line"></div><div class="line">zag = [(7,7),(7,6),(6,7),(5,7),(6,6),(7,5),(7,4),(6,5),</div><div class="line">       (5,6),(4,7),(3,7),(4,6),(5,5),(6,4),(7,3),(7,2),</div><div class="line">       (6,3),(5,4),(4,5),(3,6),(2,7),(1,7),(2,6),(3,5),</div><div class="line">       (4,4),(5,3),(6,2),(7,1),(7,0),(6,1),(5,2),(4,3),</div><div class="line">       (3,4),(2,5),(1,6),(0,7),(0,6),(1,5),(2,4),(3,3),</div><div class="line">       (4,2),(5,1),(6,0),(5,0),(4,1),(3,2),(2,3),(1,4),</div><div class="line">       (0,5),(0,4),(1,3),(2,2),(3,1),(4,0),(3,0),(2,1),</div><div class="line">       (1,2),(0,3),(0,2),(1,1),(2,0),(1,0),(0,1),(0,0)]</div><div class="line"></div><div class="line">singleO = &apos;0b&apos;</div><div class="line">output = &apos;&apos;</div><div class="line"></div><div class="line">printindex = []</div><div class="line"></div><div class="line">writeinfolist = []</div><div class="line">index = 0</div><div class="line"></div><div class="line">def convertcontenttobit(content): #æŠŠæ–‡å­—è½¬åŒ–ä¸ºäºŒè¿›åˆ¶è¿›è¡Œå†™å…¥</div><div class="line">    global writeinfolist</div><div class="line">    strnew = content</div><div class="line">#     bits = []</div><div class="line">    for item in list(strnew):</div><div class="line">        bit = ord(item) #è½¬ä½ç½®ç¼–ç </div><div class="line">        bitstring = bin(bit) #ä½ç½®ç¼–ç è½¬äºŒè¿›åˆ¶</div><div class="line">        bitnew = bitstring[2:]</div><div class="line">        bitnew = &apos;0&apos; * (8 - len(bitnew)) + bitnew</div><div class="line">        bitnewlist = []</div><div class="line">        for bi in bitnew:</div><div class="line">            bitnewlist.append(int(bi))</div><div class="line">        writeinfolist = writeinfolist + bitnewlist</div><div class="line">    end = [1,1,1,1,1,1,1,1]</div><div class="line">    writeinfolist = writeinfolist + end</div><div class="line">    print writeinfolist</div><div class="line">    </div><div class="line">def convertbittocontent(bit): #æŠŠäºŒè¿›åˆ¶è¯»å–ç„¶åè½¬åŒ–ä¸ºæ–‡å­—   </div><div class="line">    </div><div class="line">    global singleO</div><div class="line">    global output</div><div class="line">    </div><div class="line">    bits = str(bit)</div><div class="line">    if len(singleO) == 9:</div><div class="line">        singleO = singleO + bits</div><div class="line">        if singleO.count(&apos;1&apos;) &gt; 6:</div><div class="line">            print &apos;eeeeeend&apos;,singleO</div><div class="line">            return False</div><div class="line">        inten = int(singleO,2)</div><div class="line">        output = output + chr(inten)</div><div class="line">        print &apos;*********&apos;,singleO,chr(inten)</div><div class="line">        singleO = &apos;0b&apos;</div><div class="line">    else:</div><div class="line">        singleO = singleO + bits</div><div class="line">    </div><div class="line">    return True  </div><div class="line">    </div><div class="line">def writeinfo(origin):</div><div class="line">    </div><div class="line">    global index</div><div class="line">    global writeinfolist</div><div class="line">    </div><div class="line">    if index &gt;= len(writeinfolist) - 1:</div><div class="line">        return origin</div><div class="line">    </div><div class="line">    data = writeinfolist[index]</div><div class="line">     </div><div class="line">#     data = 1</div><div class="line">    lower_bit=origin%2</div><div class="line">    </div><div class="line">#     print index,len(writeinfolist),lower_bit,data,origin</div><div class="line">    if lower_bit==data:</div><div class="line">#         print index,len(writeinfolist),lower_bit,data,origin</div><div class="line">#         print &apos;---------------&apos;</div><div class="line">        index = index + 1</div><div class="line">        return origin</div><div class="line">    elif origin&gt;0:</div><div class="line">        if (lower_bit,data) == (0,1):</div><div class="line">            origin = origin+1</div><div class="line">        elif (lower_bit,data) == (1,0):</div><div class="line">            origin = origin-1</div><div class="line">    elif origin&lt;0:</div><div class="line">        if (lower_bit,data) == (0,1):</div><div class="line">            origin=origin-1</div><div class="line">        elif (lower_bit,data) == (1,0):</div><div class="line">            origin=origin+1</div><div class="line">    </div><div class="line">#     print index,len(writeinfolist),lower_bit,data,origin</div><div class="line">#     print &apos;---------------&apos;</div><div class="line">    index = index + 1</div><div class="line">    return origin</div><div class="line"></div><div class="line">def findcanwritedct(dct):</div><div class="line">    global index</div><div class="line">    global writeinfolist</div><div class="line">    </div><div class="line">    change = False</div><div class="line">    </div><div class="line">#     if index == len(writeinfolist) - 1:</div><div class="line">#         return dct,change</div><div class="line">    </div><div class="line">    dcttemp = dct.copy()</div><div class="line">    dcttemp[0,0] = 0</div><div class="line">    </div><div class="line">    z = np.fabs(dcttemp)</div><div class="line">    z = flatten(z.tolist())</div><div class="line">    lenz = len(z)</div><div class="line">    zerocount = z.count(0)</div><div class="line">    sumz = np.sum(z)</div><div class="line">    total = sumz * 1.0 / (lenz - zerocount)</div><div class="line">#     if total &gt; 1 and dct[0,0] &lt; 100:</div><div class="line">    change = True</div><div class="line">    dct[0,0] = writeinfo(dct[0,0])</div><div class="line">#         for i in range(63):</div><div class="line">#             target = dct[zag[i]]</div><div class="line">#             if target not in [-1,0,1]:</div><div class="line">#                 dct[zag[i]] = writeinfo(target)</div><div class="line">#                 change = True</div><div class="line">#                 break</div><div class="line">                </div><div class="line">    return dct,change</div><div class="line"></div><div class="line">def findwriteddct(dct):</div><div class="line">    </div><div class="line">#     dcttemp = dct.copy()</div><div class="line">#     dcttemp[0,0] = 0</div><div class="line">    </div><div class="line">#     z = np.fabs(dcttemp)</div><div class="line">#     z = flatten(z.tolist())</div><div class="line">#     lenz = len(z)</div><div class="line">#     zerocount = z.count(0)</div><div class="line">#     sumz = np.sum(z)</div><div class="line">#     total = sumz * 1.0 / (lenz - zerocount)</div><div class="line">#     if total &gt; 1 and dct[0,0] &lt; 100:</div><div class="line">    change = True</div><div class="line">#         dct[0,0] = writeinfo(dct[0,0])</div><div class="line">    return dct[0,0]</div><div class="line">#         for i in range(63):</div><div class="line">#             if dct[zag[i]] not in [-1,0,1]:</div><div class="line">#                 return dct[zag[i]]</div><div class="line">#                 break</div><div class="line">                </div><div class="line">#     return None</div><div class="line"></div><div class="line">def converttodct(y):</div><div class="line">    global QY</div><div class="line">    </div><div class="line">    b = y.astype(&apos;float&apos;)</div><div class="line">    bdct = cv2.dct(b)</div><div class="line">    </div><div class="line">    dct1 = bdct.tolist()</div><div class="line">    dct1 = np.around(dct1) #å››èˆäº”å…¥</div><div class="line">    dct1 = dct1 / QY</div><div class="line">    dct1 = dct1.tolist()</div><div class="line">    dct1 = np.around(dct1) #å†æ¬¡å››èˆäº”å…¥</div><div class="line">    dct1 = dct1.astype(&apos;int16&apos;)</div><div class="line">    </div><div class="line">    dct1,change = findcanwritedct(dct1)</div><div class="line">    </div><div class="line">    return dct1,change</div><div class="line"></div><div class="line">def converttoycr(dct):</div><div class="line">    global QY</div><div class="line">    dct = dct * QY</div><div class="line">    imgf = dct.astype(&apos;float&apos;)</div><div class="line">    iTrans = cv2.idct(imgf)</div><div class="line">    iTrans = iTrans.tolist()</div><div class="line">    iTrans = np.around(iTrans)</div><div class="line">    cr = iTrans.astype(&apos;int16&apos;)</div><div class="line">    return cr</div><div class="line"></div><div class="line">def readinfofromyc(cr8):</div><div class="line">    global QY</div><div class="line">    global index</div><div class="line">    global printindex</div><div class="line">    global writeinfolist</div><div class="line">    </div><div class="line">    b = cr8.astype(&apos;float&apos;)</div><div class="line">    aver = b.mean()</div><div class="line">    </div><div class="line">    if aver &gt; 200 or aver &lt; 60:</div><div class="line">        return True</div><div class="line">    </div><div class="line">    bdct = cv2.dct(b)</div><div class="line">    </div><div class="line">    dct1 = bdct.tolist()</div><div class="line">    dct1 = np.around(dct1) #å››èˆäº”å…¥</div><div class="line">    dct1 = dct1 / QY</div><div class="line">    dct1 = dct1.tolist()</div><div class="line">    dct1 = np.around(dct1) #å†æ¬¡å››èˆäº”å…¥</div><div class="line">    dct1 = dct1.astype(&apos;int16&apos;)</div><div class="line">    </div><div class="line">    var = b.var()</div><div class="line">#     print var</div><div class="line">#     print dct1</div><div class="line"></div><div class="line">#     key = aver / 2</div><div class="line">#     topline = aver * 1.4</div><div class="line">#     m = b[np.where(b &lt; key)].shape[0]</div><div class="line">#     n = b[np.where(b &gt; topline)].shape[0]</div><div class="line">#     if var &gt; 5 or m &gt; 10 or n &gt; 5:</div><div class="line">#         return True</div><div class="line">    if var &gt; 1:</div><div class="line">        return True</div><div class="line">    </div><div class="line">#     if dct1[0,0] % 2 == 1:</div><div class="line">#         print &apos;aver&apos;,aver</div><div class="line">#         print &apos;shape+++++++&apos;,m</div><div class="line">#         print &apos;origin&apos;,b</div><div class="line">#         print &apos;dct&apos;,dct1</div><div class="line">#         print &apos;var&apos;,b.var()</div><div class="line"></div><div class="line">    if (index - 1) in printindex:</div><div class="line">        print &apos;new############start&apos;,writeinfolist[index - 1],index - 1</div><div class="line">        print dct1</div><div class="line">        print cr8</div><div class="line">        print &apos;new############end&apos;</div><div class="line"></div><div class="line">    origin = findwriteddct(dct1)</div><div class="line">    if (origin != None):</div><div class="line">        return convertbittocontent(origin % 2)</div><div class="line"></div><div class="line">def addinfotoyc(yc8):</div><div class="line">    global index</div><div class="line">    global printindex</div><div class="line">    global writeinfolist</div><div class="line">    </div><div class="line">    aver = yc8.mean()</div><div class="line">    </div><div class="line">    if aver &gt; 200 or aver &lt; 60:</div><div class="line">        return yc8</div><div class="line">    </div><div class="line">    var = yc8.var()</div><div class="line">#     key = aver / 2</div><div class="line">#     topline = aver * 1.4</div><div class="line">#     m = yc8[np.where(yc8 &lt; key)].shape[0]</div><div class="line">#     n = yc8[np.where(yc8 &gt; topline)].shape[0]</div><div class="line">#     if var &gt; 3 or m &gt; 10 or n &gt; 5:</div><div class="line">#         print yc8</div><div class="line">#         print &apos;var&apos;,var</div><div class="line">#         print &apos;m&apos;,m</div><div class="line">#         print &apos;n&apos;,n</div><div class="line">#         print &apos;topline&apos;,topline</div><div class="line">#         print &apos;key&apos;,key</div><div class="line">#         print &apos;aver&apos;,aver</div><div class="line">#         return yc8</div><div class="line">    if var &gt; 1:</div><div class="line">        return yc8</div><div class="line">    </div><div class="line">    dct,change = converttodct(yc8)</div><div class="line">    </div><div class="line">    if change == False:</div><div class="line">        return yc8</div><div class="line">    </div><div class="line">    cr = converttoycr(dct)</div><div class="line">    </div><div class="line">    if cr.var() &gt; 1:</div><div class="line">        index = index - 1</div><div class="line">#         print &apos;origin&apos;</div><div class="line">#         print yc8</div><div class="line">#         print &apos;oldvar&apos;,var</div><div class="line">#         print &apos;new&apos;</div><div class="line">#         print cr</div><div class="line">#         print &apos;newvar&apos;,cr.var()</div><div class="line">#         print &apos;index&apos;,index</div><div class="line">        return yc8</div><div class="line">    </div><div class="line">#     print dct</div><div class="line">#     print cr.var()</div><div class="line">    </div><div class="line">    </div><div class="line">    if (index - 1) in printindex:</div><div class="line">        print &apos;origin###########start&apos;,writeinfolist[index-1],index - 1</div><div class="line">        print dct</div><div class="line">        print cr</div><div class="line">        print &apos;origin###########end&apos;</div><div class="line">    </div><div class="line">    readinfofromyc(cr)</div><div class="line">    </div><div class="line">    cr[np.where(cr &gt; 254)] = 254</div><div class="line">    cr[np.where(cr &lt; 1)] = 0</div><div class="line">    </div><div class="line">    return cr</div><div class="line"></div><div class="line">def convertimg(img):</div><div class="line">    B = 8</div><div class="line">    imgYCC = cv2.cvtColor(img, cv2.COLOR_BGR2YCR_CB)</div><div class="line">    h,w=np.array(imgYCC.shape[:2])/B * B  #è¿›è¡Œåƒç´ ä¸ªæ•°çš„æ ¼å¼åŒ–ï¼Œå› ä¸ºè¿™æ ·å°±å¯ä»¥ä¿è¯æ˜¯8*8çš„ä¸ªæ•°é…æ¯”äº†</div><div class="line">    imgYCC = imgYCC[:h,:w] #è¿™ä¸€æ­¥å»æ‰æ— ç”¨çš„æ•°æ®ï¼Œè€Œä¸æ˜¯åƒæˆ‘æƒ³çš„ï¼Œå¢åŠ åƒç´ </div><div class="line">    y = imgYCC[:,:,0]</div><div class="line">    cr = imgYCC[:,:,1]</div><div class="line">    cb = imgYCC[:,:,2]</div><div class="line">    return y,cr,cb</div><div class="line"></div><div class="line">def scanpiex(cr):</div><div class="line">    global index</div><div class="line">    </div><div class="line">#     crn = np.zeros(cr.shape)</div><div class="line">    crn = cr.copy()</div><div class="line">    (h,w) = cr.shape</div><div class="line">    h = h/8</div><div class="line">    w = w/8</div><div class="line">    print h,w</div><div class="line">    for i in range(0,h):</div><div class="line">        for j in range(0,w):</div><div class="line">            cr8 = cr[i*8:i*8+8,j*8:j*8+8]</div><div class="line">            crn[i*8:i*8+8,j*8:j*8+8] = addinfotoyc(cr8)</div><div class="line">            if index &gt;= len(writeinfolist) - 1:</div><div class="line">                print &apos;stop&apos;,&apos;i=&apos;,i,&apos;j=&apos;,j,&apos;i*j=&apos;,i * j</div><div class="line">                index = 0</div><div class="line">                return crn</div><div class="line">    index = 0        </div><div class="line">    return crn</div><div class="line"></div><div class="line">def readinfo(cr):</div><div class="line">    global output</div><div class="line">    (h,w) = cr.shape</div><div class="line">    h = h/8</div><div class="line">    w = w/8</div><div class="line">    print h,w</div><div class="line">    for i in range(0,h):</div><div class="line">        for j in range(0,w):</div><div class="line">            cr8 = cr[i*8:i*8+8,j*8:j*8+8]</div><div class="line">            out = readinfofromyc(cr8)</div><div class="line">#             print &apos;stop&apos;,&apos;i=&apos;,i,&apos;j=&apos;,j,&apos;i*j=&apos;,i * j</div><div class="line">            if out == False or (i == (h - 1) and j == (w - 1)):</div><div class="line">                print output</div><div class="line">                break</div><div class="line"></div><div class="line">def test():            </div><div class="line">            </div><div class="line">    print &apos;write&apos;,writeinfolist       </div><div class="line">    img = cv2.imread(&quot;WechatIMG37.jpeg&quot;) #å…¨è‰²å½©</div><div class="line"></div><div class="line">    y,cr,cb = convertimg(img)</div><div class="line"></div><div class="line">    y = scanpiex(y)</div><div class="line">    y = y.astype(&apos;uint8&apos;)</div><div class="line">    </div><div class="line">    print &apos;åˆ†å‰²çº¿åˆ†å‰²çº¿åˆ†å‰²çº¿&apos;</div><div class="line">    </div><div class="line">    img_YCbCr = cv2.merge([y,cr,cb])</div><div class="line">    imgnew = cv2.cvtColor(img_YCbCr, cv2.COLOR_YCR_CB2BGR)</div><div class="line"></div><div class="line">#     cv2.imwrite(&quot;newpress.jpg&quot;,imgnew,[cv2.IMWRITE_JPEG_QUALITY, 50])</div><div class="line">    cv2.imwrite(&quot;newpress.jpg&quot;,imgnew)</div><div class="line"></div><div class="line">    imgout = cv2.imread(&quot;newpress.jpg&quot;) #å…¨è‰²å½©</div><div class="line"></div><div class="line">    y,cr,cb = convertimg(imgout)</div><div class="line">    print &apos;read&apos;</div><div class="line">    readinfo(y)</div><div class="line">    </div><div class="line">def writecontent():</div><div class="line">    global writeinfolist</div><div class="line">    global output</div><div class="line">    convertcontenttobit(&apos;wangxiugang618wangxiugang618wangxiugang618wangxiugang618wangxiugang618&apos;)   </div><div class="line"></div><div class="line">def readimage(imagename):</div><div class="line">    imgout = cv2.imread(imagename) #å…¨è‰²å½©</div><div class="line">    y,cr,cb = convertimg(imgout)</div><div class="line">    print &apos;read&apos;</div><div class="line">    readinfo(y)</div><div class="line"></div><div class="line">writecontent()</div><div class="line">test()</div><div class="line"># readimage(&apos;WechatIMG65.jpegâ€™)</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSåŒ…å¤§å°è®¡ç®—å¤‡å¿˜]]></title>
      <url>/2018/05/30/2018/iOS%E5%8C%85%E5%A4%A7%E5%B0%8F%E8%AE%A1%E7%AE%97%E5%A4%87%E5%BF%98/</url>
      <content type="html"><![CDATA[<p>é¦–å…ˆéœ€è¦LinkMapæ–‡ä»¶</p>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/env python</div><div class="line">#coding:utf-8</div><div class="line"></div><div class="line">import os,shutil</div><div class="line">import urllib2</div><div class="line">import time, sys,copy</div><div class="line">from pymongo import MongoClient</div><div class="line">from biplist import *</div><div class="line">from prettytable import PrettyTable</div><div class="line">from numpy import *</div><div class="line"># 0æºç  1SDK</div><div class="line"># (projectname,sdkname,filename,size)</div><div class="line"></div><div class="line">projectNameList = []#è®°å½•å·¥ç¨‹åå­—åˆ—è¡¨</div><div class="line"></div><div class="line">def parItemText(text):</div><div class="line">    global projectNameList</div><div class="line">    fileNumberList = []#æ–‡ä»¶ç¼–å·åˆ—è¡¨</div><div class="line">    fileSizeDic = &#123;&#125;#æ–‡ä»¶å°ºå¯¸å­—å…¸</div><div class="line"></div><div class="line">    projectNameDic = &#123;&#125;#å·¥ç¨‹åå­—å­—å…¸ï¼Œè®°å½•å¤§å°</div><div class="line">    </div><div class="line">    fileItems = text.split(&apos;\n&apos;)</div><div class="line">    count = 0</div><div class="line">    for singleItem in fileItems:</div><div class="line">        # æœ€åæ˜¯æ‹¬å·</div><div class="line">        # æœ€åæ˜¯.o</div><div class="line">        # æœ€åæ˜¯</div><div class="line">        projectname = &apos;&apos; # æœ€å¤–å±‚nameï¼Œæ¯”å¦‚Library</div><div class="line">        sdkname = &apos;&apos;     # ç¼–è¯‘å®Œä¹‹åçš„åå­—.aæˆ–è€….framework</div><div class="line">        filename = &apos;&apos;    # .oçš„åå­—</div><div class="line"></div><div class="line">        if len(singleItem) &gt; 0 and singleItem[0] == &apos;[&apos;:</div><div class="line">           if singleItem[-1] == &apos;)&apos;:</div><div class="line">                if &apos;Analyse-iphoneos&apos; in singleItem:#æºç </div><div class="line">                    # print singleItem + &apos;æºç &apos;</div><div class="line">                    filenameitem = singleItem.split(&apos;/&apos;)[-1]</div><div class="line">                    count = count + 1</div><div class="line">                    nameL = filenameitem.split(&apos;(&apos;)[0].replace(&apos;.a&apos;,&apos;&apos;)</div><div class="line">                    nameR = filenameitem.split(&apos;(&apos;)[1].replace(&apos;.o&apos;,&apos;&apos;).replace(&apos;)&apos;,&apos;&apos;)</div><div class="line"></div><div class="line">                    filename = nameR</div><div class="line">                    if &apos;lib&apos; in nameL:</div><div class="line">                        nameL = nameL.replace(&apos;lib&apos;,&apos;&apos;)</div><div class="line">                        sdkname = nameL</div><div class="line">                    else:</div><div class="line">                        projectname = nameL</div><div class="line">                    </div><div class="line">                elif &apos;JRMobileAnalyse/&apos; in singleItem or &apos;../&apos; in singleItem:#SDK</div><div class="line">                    # print singleItem + &apos;SDKæ–‡ä»¶&apos;</div><div class="line">                    filenameitems = singleItem.split(&apos;/&apos;)</div><div class="line">                    filenameitem = filenameitems[-1]</div><div class="line">                    </div><div class="line">                    indexJR = -1</div><div class="line">                    indexVe = -1</div><div class="line">                    indexPods = -1</div><div class="line">                    if &apos;JRLibrary&apos; in filenameitems:</div><div class="line">                       indexJR = filenameitems.index(&apos;JRLibrary&apos;)</div><div class="line"></div><div class="line">                    if &apos;Vendors&apos; in filenameitems:</div><div class="line">                       indexVe = filenameitems.index(&apos;Vendors&apos;)</div><div class="line"></div><div class="line">                    if &apos;Pods&apos; in filenameitems:</div><div class="line">                       indexVe = filenameitems.index(&apos;Pods&apos;)   </div><div class="line">                    </div><div class="line">                    index = 0</div><div class="line">                    if indexJR != -1:</div><div class="line">                       index = indexJR + 1</div><div class="line">                    elif indexVe != -1:</div><div class="line">                       index = indexVe + 1</div><div class="line">                    elif indexPods != -1:</div><div class="line">                       index = indexPods + 1   </div><div class="line"></div><div class="line">                    count = count + 1</div><div class="line">                    nameL = filenameitem.split(&apos;(&apos;)[0].replace(&apos;.a&apos;,&apos;&apos;)</div><div class="line">                    nameR = filenameitem.split(&apos;(&apos;)[1].replace(&apos;.o&apos;,&apos;&apos;).replace(&apos;)&apos;,&apos;&apos;)  </div><div class="line">                    filename = nameR</div><div class="line">                    projectname = filenameitems[index]</div><div class="line">                    sdkname = nameL</div><div class="line">                else:</div><div class="line">                    # print singleItem + &apos;å…¶ä»–çš„&apos;</div><div class="line">                    filenameitem = singleItem.split(&apos;/&apos;)[-1]</div><div class="line">                    filename = filenameitem</div><div class="line">                    projectname = &apos;Apple&apos;</div><div class="line">                    sdkname = &apos;Apple&apos;</div><div class="line">                    count = count + 1</div><div class="line">           elif &apos;] /Applications&apos; in singleItem:</div><div class="line">               # print singleItem + &apos;ç³»ç»Ÿæ–‡ä»¶&apos;</div><div class="line">               filenameitem = singleItem.split(&apos;/&apos;)[-1]</div><div class="line">               filename = filenameitem</div><div class="line">               projectname = &apos;Apple&apos;</div><div class="line">               sdkname = &apos;Apple&apos;</div><div class="line">               count = count + 1</div><div class="line">           else:    </div><div class="line">               if singleItem[-1] == &apos;o&apos;:</div><div class="line">                #   print singleItem + &apos;ä¸»å·¥ç¨‹&apos;</div><div class="line">                  count = count + 1</div><div class="line">                  projectname = &apos;JDMobile&apos;</div><div class="line">                  filename = singleItem.split(&apos;/&apos;)[-1].replace(&apos;.o&apos;,&apos;&apos;)</div><div class="line">                #   print &apos;-------&gt;&apos;,&apos;projectname,filename</div><div class="line"></div><div class="line">           filenumber = singleItem.split(&apos;] &apos;)[0] + &apos;]&apos;</div><div class="line">           if filenumber not in fileNumberList:</div><div class="line">              fileNumberList.append(filenumber) </div><div class="line">        #    print filenumber,projectname,sdkname,filename</div><div class="line">           fileSizeDic[filenumber] = [projectname,sdkname,filename,0]</div><div class="line">        elif singleItem[:2] == &apos;0x&apos;:</div><div class="line">            if chr(9) + &apos;[&apos; in singleItem:</div><div class="line">                sizestring = singleItem.split(chr(9)+&apos;[&apos;)[0].split(chr(9))[1]</div><div class="line">                size = int(sizestring,16)</div><div class="line">                filenumber = &apos;[&apos; + singleItem.split(chr(9)+&apos;[&apos;)[1].split(&apos;]&apos;)[0] + &apos;]&apos;</div><div class="line">                fileList = fileSizeDic.get(filenumber)</div><div class="line">                if type(fileList) != type(None):</div><div class="line">                   fileSize = fileList[3]</div><div class="line">                   fileList[3] = fileSize + size</div><div class="line">                else:</div><div class="line">                   print singleItem</div><div class="line">                   print filenumber   </div><div class="line">    </div><div class="line">    for item in fileNumberList:</div><div class="line">        fileList = fileSizeDic[item]</div><div class="line">        projectname = fileList[0]</div><div class="line">        sdkname = fileList[1]</div><div class="line">        size = fileList[3]</div><div class="line"></div><div class="line">        name = &apos;&apos;</div><div class="line">        if len(projectname) == 0:</div><div class="line">           name = sdkname</div><div class="line">        else:</div><div class="line">           name = projectname</div><div class="line"></div><div class="line">        if name not in projectNameList:</div><div class="line">           projectNameList.append(name)</div><div class="line"></div><div class="line">        objec = projectNameDic.get(name)</div><div class="line">        </div><div class="line">        if type(objec) == type(None):</div><div class="line">           projectNameDic[name] = (size,1)</div><div class="line">        else:</div><div class="line">           (projectSize,count) = objec</div><div class="line">           projectNameDic[name] = (size + projectSize,count + 1)</div><div class="line"></div><div class="line">    return projectNameDic</div><div class="line"></div><div class="line">def saveDataToMongo():</div><div class="line">    global projectNameList</div><div class="line">    mc = MongoClient(&quot;localhost&quot;,27017)</div><div class="line">    db = mc.classsize</div><div class="line">    baseinfo = db.baseinfo</div><div class="line"></div><div class="line">    sourceFileList = [&apos;JDMobile&apos;,&apos;Pods&apos;,&apos;CommunityTools&apos;,&apos;JRAssemblyUITools&apos;,&apos;JRBankCardModule&apos;,&apos;JRHomeChannel&apos;,&apos;RecognitionTools&apos;,&apos;MobileTopUpModule&apos;,&apos;ReactNative&apos;,&apos;TradeOrderModule&apos;,&apos;JRTemPlateTools&apos;,&apos;FinancingModule&apos;,&apos;JRWebViewTools&apos;,&apos;CrowdfundModule&apos;,&apos;JRBrickTools&apos;,&apos;IousModule&apos;,&apos;JROperateModule&apos;,&apos;JRContainerModule&apos;,&apos;JDWallet&apos;]</div><div class="line">    sdkFileList = [&apos;BankCard&apos;,&apos;LDBraceletSDK&apos;,&apos;TencentMapSDK&apos;,&apos;TencentMapSDK_2D&apos;,&apos;JDTDRisk&apos;,&apos;TSMKit&apos;,&apos;JRDnsAks&apos;,&apos;JRStat&apos;,&apos;JDMA_v13&apos;,&apos;JDPayJR&apos;,&apos;LiveSDK&apos;,&apos;Stock&apos;,&apos;React&apos;,&apos;SingularitySDK&apos;,&apos;UMSocial_Sdk&apos;,&apos;SouFang&apos;,&apos;MTASDK&apos;,&apos;JDKPL&apos;,&apos;FireEye&apos;,&apos;JDJROCRSDK&apos;,&apos;OCR&apos;,&apos;JDCNSDK&apos;,&apos;YITUSDK&apos;,&apos;BUGLY&apos;,&apos;Apple&apos;]</div><div class="line">    podFileList = []</div><div class="line"></div><div class="line">    appversion = &apos;&apos;</div><div class="line">    plistPath = os.popen(&apos;find /Users/jdjr/Documents/Build/JRMobileAnalyse -name JDMobile-Info.plist&apos;).read().split(&apos;\n&apos;)[0]</div><div class="line">    if os.path.exists(plistPath):</div><div class="line">       plist = readPlist(plistPath)</div><div class="line">       appversion = plist[&apos;CFBundleShortVersionString&apos;]</div><div class="line">    print appversion</div><div class="line">    time1 = time.time()</div><div class="line"></div><div class="line">    text1 = open(&apos;/Users/jdjr/Documents/Build/JRMobileAnalyse/Build/Products/JDMobile-LinkMap-normal-arm64.txt&apos;).read()</div><div class="line">    text2 = open(&apos;/Users/jdjr/Documents/Build/JRMobileAnalyse/Build/Products/JDMobile-LinkMap-normal-armv7.txt&apos;).read()</div><div class="line"></div><div class="line">    projectDic1 = parItemText(text1)</div><div class="line">    projectDic2 = parItemText(text2)</div><div class="line"></div><div class="line">    totalCount = 0</div><div class="line">    totalSize = 0</div><div class="line">    podsize = 0</div><div class="line">    podscount = 0</div><div class="line"></div><div class="line">    dataSoureList = []</div><div class="line">    dataSdkList = []</div><div class="line"></div><div class="line">    for item in projectNameList:</div><div class="line">        obj1 = projectDic1.get(item)</div><div class="line">        obj2 = projectDic2.get(item)</div><div class="line">        </div><div class="line">        if type(obj1) == type(None):</div><div class="line">            print item,0</div><div class="line">        else:</div><div class="line">            (size1,count1) = obj1</div><div class="line">            (size2,count2) = obj2</div><div class="line">            totalCount = totalCount + count2</div><div class="line">            totalSize = totalSize + size1 + size2</div><div class="line">            if item in sourceFileList:</div><div class="line">               dataSoureList.append((item,&apos;%.2fM&apos; % ((size1 + size2) / 1024.0 / 1024.0),&apos;%.2fK&apos; % ((size1 + size2) / 1024.0),size1 + size2,count2))</div><div class="line">            elif item in sdkFileList:</div><div class="line">               dataSdkList.append((item,&apos;%.2fM&apos; % ((size1 + size2) / 1024.0 / 1024.0),&apos;%.2fK&apos; % ((size1 + size2) / 1024.0),size1 + size2,count2))   </div><div class="line">            else:</div><div class="line">               podsize = podsize + size1 + size2</div><div class="line">               podscount = podscount + count2  </div><div class="line"></div><div class="line">    podString = &apos;Pods &apos; + &apos;%.2fM&apos; % (podsize / 1024.0 / 1024.0) + &apos;------&gt;&apos; + &apos;%.2fK&apos; % (podsize / 1024.0) + &apos;  æ–‡ä»¶ä¸ªæ•°%d&apos; % podscount</div><div class="line"></div><div class="line">    dataSoureList.append((&apos;Pods&apos;,&apos;%.2fM&apos; % (podsize / 1024.0 / 1024.0),&apos;%.2fK&apos; % (podsize / 1024.0),podsize,podscount))</div><div class="line">    print &apos;æ€»æ–‡ä»¶ä¸ªæ•°%d&apos; % totalCount</div><div class="line">    print &apos;æ€»æ–‡ä»¶ä½“ç§¯%.2fM&apos; % (totalSize / 1024.0 / 1024.0)</div><div class="line"></div><div class="line">    dataSoureList = sorted(dataSoureList, key=lambda sortItem: sortItem[3],reverse=True)</div><div class="line">    dataSdkList = sorted(dataSdkList, key=lambda sortItem: sortItem[3],reverse=True)</div><div class="line"></div><div class="line">    lastinfoDict = &#123;&#125;</div><div class="line">    lastinfoDict[&apos;sorcedata&apos;] = dataSoureList</div><div class="line">    lastinfoDict[&apos;sdkdata&apos;] = dataSdkList</div><div class="line"></div><div class="line">    bds = baseinfo.find(&#123;&apos;appversion&apos;:appversion&#125;)</div><div class="line"></div><div class="line">    bdscount = 0</div><div class="line">    for item in bds:</div><div class="line">        bdscount = bdscount + 1</div><div class="line"></div><div class="line">    if bdscount &gt; 0 and len(dataSoureList) &gt; 0 and len(dataSdkList) &gt; 0:</div><div class="line">       baseinfo.remove(&#123;&apos;appversion&apos;:appversion&#125;) </div><div class="line"></div><div class="line">    baseinfo.save(&#123;&apos;appversion&apos;:appversion,&apos;lastinfo&apos;:lastinfoDict&#125;)</div><div class="line"></div><div class="line">def buildProject(branchName):</div><div class="line">    os.chdir(&apos;/Users/jdjr/Documents/Build/JRMobileAnalyse&apos;)</div><div class="line">    os.system(&apos;git add .&apos;)</div><div class="line">    os.system(&apos;git checkout -f&apos;)</div><div class="line">    os.system(&apos;git checkout &apos; + branchName)</div><div class="line">    os.system(&apos;git pull origin &apos; + branchName)</div><div class="line">    os.system(&apos;!wq&apos;)</div><div class="line">    os.system(&apos;xcodebuild -workspace JDFinance.xcworkspace -scheme JDMobile -configuration Analyse clean&apos;)</div><div class="line">    os.system(&apos;xcodebuild -workspace JDFinance.xcworkspace -scheme JDMobile -configuration Analyse build&apos;)</div><div class="line">    saveDataToMongo()</div><div class="line"></div><div class="line">def findHistoryData():</div><div class="line">    mc = MongoClient(&quot;localhost&quot;,27017)</div><div class="line">    db = mc.classsize</div><div class="line">    baseinfo = db.baseinfo</div><div class="line"></div><div class="line">    bds = baseinfo.find(&#123;&#125;).sort([(&apos;appversion&apos;, 1)])</div><div class="line"></div><div class="line">    ItemDataList = []#å› ä¸ºæˆ‘ä»¬çš„bdsç”¨ä¸€æ¬¡ä¹‹åå°±ä¼šé‡Šæ”¾ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠå®ƒä¿å­˜èµ·æ¥</div><div class="line"></div><div class="line">    count = 0</div><div class="line">    lastItem = &apos;&apos;</div><div class="line"></div><div class="line">    TotalSize = []</div><div class="line">    for item in bds:</div><div class="line">        count = count + 1</div><div class="line">        lastItem = item#è·å¾—æœ€åä¸€ä¸ªç‰ˆæœ¬çš„æ•°æ®ï¼Œæˆ‘ä»¬ç”¨è¿™ä¸ªä½œä¸ºæ ‡å‡†æ’åºçš„é¡ºåº</div><div class="line">        sdkList = item[&apos;lastinfo&apos;][&apos;sdkdata&apos;]</div><div class="line">        sorceList = item[&apos;lastinfo&apos;][&apos;sorcedata&apos;]</div><div class="line">        </div><div class="line">        total = 0</div><div class="line">        for obj in sdkList:</div><div class="line">            total = total + obj[3]</div><div class="line"></div><div class="line">        for obj in sorceList:</div><div class="line">            total = total + obj[3]</div><div class="line">        </div><div class="line">        TotalSize.append(total)</div><div class="line">        ItemDataList.append(item)#ä¿å­˜bds</div><div class="line"></div><div class="line">    if count == 0:</div><div class="line">       print &apos;æ²¡æœ‰æ•°æ®&apos; </div><div class="line">       sys.exit(1) </div><div class="line"></div><div class="line">    showdataList = []</div><div class="line"></div><div class="line">    titlesdk = [&apos;sdkæ–‡ä»¶åå­—*ç‰ˆæœ¬&apos;]</div><div class="line">    titlesource = [&apos;æºç æ–‡ä»¶åå­—*ç‰ˆæœ¬&apos;]</div><div class="line"></div><div class="line">    sourcetitleList = [&apos;JDMobile&apos;,&apos;CommunityTools&apos;,&apos;JRAssemblyUITools&apos;,&apos;JRBankCardModule&apos;,&apos;JRHomeChannel&apos;,&apos;Pods&apos;,&apos;RecognitionTools&apos;,&apos;MobileTopUpModule&apos;,&apos;ReactNative&apos;,&apos;TradeOrderModule&apos;,&apos;JRTemPlateTools&apos;,&apos;FinancingModule&apos;,&apos;JRWebViewTools&apos;,&apos;CrowdfundModule&apos;,&apos;JRBrickTools&apos;,&apos;IousModule&apos;,&apos;JROperateModule&apos;,&apos;JRContainerModule&apos;,&apos;JDWallet&apos;]</div><div class="line">    sdktitleList = [&apos;BankCard&apos;,&apos;LDBraceletSDK&apos;,&apos;TencentMapSDK&apos;,&apos;TencentMapSDK_2D&apos;,&apos;JDTDRisk&apos;,&apos;TSMKit&apos;,&apos;JRDnsAks&apos;,&apos;JRStat&apos;,&apos;JDMA_v13&apos;,&apos;JDPayJR&apos;,&apos;LiveSDK&apos;,&apos;Stock&apos;,&apos;React&apos;,&apos;SingularitySDK&apos;,&apos;UMSocial_Sdk&apos;,&apos;SouFang&apos;,&apos;MTASDK&apos;,&apos;JDKPL&apos;,&apos;FireEye&apos;,&apos;JDJROCRSDK&apos;,&apos;OCR&apos;,&apos;JDCNSDK&apos;,&apos;YITUSDK&apos;,&apos;BUGLY&apos;,&apos;Apple&apos;]</div><div class="line">    # sdktitleList = []#sdkçš„åå­—é¡ºåº</div><div class="line">    # sourcetitleList = []#æºç æ–‡ä»¶çš„åå­—é¡ºåº</div><div class="line"></div><div class="line">    sdkitemList = lastItem[&apos;lastinfo&apos;][&apos;sdkdata&apos;]</div><div class="line">    sourceitemList = lastItem[&apos;lastinfo&apos;][&apos;sorcedata&apos;]</div><div class="line"></div><div class="line">    # for titleItem in sdkitemList:</div><div class="line">    #     sdktitleList.append(titleItem[0])</div><div class="line"></div><div class="line">    # for titleItem in sourceitemList:</div><div class="line">    #     sourcetitleList.append(titleItem[0])</div><div class="line"></div><div class="line">    for item in ItemDataList:</div><div class="line">        version = item[&apos;appversion&apos;]</div><div class="line">        titlesdk.append(version)</div><div class="line">        titlesource.append(version)</div><div class="line"></div><div class="line">    x = PrettyTable(titlesdk)</div><div class="line">    y = PrettyTable(titlesource)</div><div class="line"></div><div class="line">    for title in sdktitleList:</div><div class="line">        rowList = [title]</div><div class="line">        for item in ItemDataList:</div><div class="line">            sdkDataList = item[&apos;lastinfo&apos;][&apos;sdkdata&apos;]</div><div class="line">            hasAdd = False</div><div class="line">            for data in sdkDataList:</div><div class="line">                if data[0] == title:</div><div class="line">                   dataString = data[1].encode(&quot;utf-8&quot;) + &apos;    &apos; + data[2].encode(&quot;utf-8&quot;) + &apos;    &apos; + &apos;%d&apos; % data[4]</div><div class="line">                   rowList.append(dataString)</div><div class="line">                   hasAdd = True</div><div class="line">             </div><div class="line">            if hasAdd == False:</div><div class="line">               rowList.append(&apos;Nan&apos;) </div><div class="line"></div><div class="line">        x.add_row(rowList)</div><div class="line"></div><div class="line">    for title in sourcetitleList:</div><div class="line">        rowList = [title]</div><div class="line">        for item in ItemDataList:</div><div class="line">            sourceDataList = item[&apos;lastinfo&apos;][&apos;sorcedata&apos;]</div><div class="line">            </div><div class="line">            hasAdd = False</div><div class="line">            for data in sourceDataList:</div><div class="line">                if data[0] == title:</div><div class="line">                   dataString = data[1].encode(&quot;utf-8&quot;) + &apos;    &apos; + data[2].encode(&quot;utf-8&quot;) + &apos;    &apos; + &apos;%d&apos; % data[4]</div><div class="line">                   rowList.append(dataString)</div><div class="line">                   hasAdd = True</div><div class="line">            if hasAdd == False:</div><div class="line">               rowList.append(&apos;Nan&apos;)       </div><div class="line"></div><div class="line">        y.add_row(rowList) </div><div class="line"></div><div class="line">    print y</div><div class="line">    print x</div><div class="line"></div><div class="line">    print array(TotalSize)/1024.0/1024.0,&apos;M&apos;</div><div class="line"></div><div class="line">command = sys.argv[1]</div><div class="line"></div><div class="line">argv1 = &apos;&apos;</div><div class="line">argv2 = &apos;&apos;</div><div class="line">argv3 = &apos;&apos;</div><div class="line">argv4 = &apos;&apos;</div><div class="line">if (len(sys.argv) &gt;= 3):</div><div class="line">   argv1 = sys.argv[2]</div><div class="line"></div><div class="line">if (len(sys.argv) &gt;= 4):</div><div class="line">   argv2 = sys.argv[3]</div><div class="line"></div><div class="line">if command == &apos;--h&apos;:</div><div class="line">   print &apos;jdjr analyse branchname  åˆ†ææŸä¸ªåˆ†æ”¯&apos;</div><div class="line">   print &apos;jdjr history æŸ¥çœ‹å†å²æ•°æ®&apos;</div><div class="line">elif command == &apos;analyse&apos;:</div><div class="line">   if len(argv1) == 0:</div><div class="line">      print &apos;è¯·è¾“å…¥åˆ†æ”¯åç§°&apos;</div><div class="line">   else:</div><div class="line">      buildProject(argv1)</div><div class="line">      findHistoryData()</div><div class="line">elif command == &apos;history&apos;:</div><div class="line">   findHistoryData()</div><div class="line">elif command == &apos;analyseCommon&apos;:</div><div class="line">   saveDataToMongo()</div><div class="line">else:</div><div class="line">   print &apos;jdjr analyse branchname  åˆ†ææŸä¸ªåˆ†æ”¯&apos;</div><div class="line">   print &apos;jdjr history æŸ¥çœ‹å†å²æ•°æ®&apos;</div><div class="line"></div><div class="line"></div><div class="line"># buildProject()</div><div class="line"># saveDataToMongo()</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ç§»åŠ¨ç«¯å›¾ç‰‡éšå†™æœ¯çš„å®ç°æ€è·¯]]></title>
      <url>/2018/04/17/2015/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%9B%BE%E7%89%87%E9%9A%90%E5%86%99%E6%9C%AF%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/</url>
      <content type="html"><![CDATA[<h3 id="JPEGå‹ç¼©ç®—æ³•ç†è§£"><a href="#JPEGå‹ç¼©ç®—æ³•ç†è§£" class="headerlink" title="JPEGå‹ç¼©ç®—æ³•ç†è§£"></a>JPEGå‹ç¼©ç®—æ³•ç†è§£</h3><p>å‚è€ƒ <a href="https://thecodeway.com/blog/?p=69" target="_blank" rel="external">https://thecodeway.com/blog/?p=69</a></p>
<p>é¦–å…ˆè¿™æ˜¯ä¸€ç§æœ‰æŸçš„ä¿¡æ¯å‹ç¼©æ–¹å¼ï¼Œå‹ç¼©çš„æ ¸å¿ƒåŸç†æ˜¯ï¼Œå°†ä¿¡æ¯åˆ†ä¸ºé‡è¦å’Œä¸é‡è¦ï¼Œç„¶åèˆå¼ƒæ‰ä¸é‡è¦çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†ä¼šé€šè¿‡ä¸¤éƒ¨ä¿¡æ¯åŒºåˆ†æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œç¬¬ä¸€ä¸ªæ˜¯RGBè½¬YCbCrï¼Œç¬¬äºŒä¸ªæ˜¯DCTè½¬åŒ–å’Œé‡åŒ–ï¼Œè¿™ä¸¤æ­¥æ¯ä¸€æ­¥éƒ½æ˜¯æœ‰ä¿¡æ¯æŸè€—ï¼Œéƒ½æ˜¯ä¸å¯é€†çš„ï¼Œè€Œå“ˆå¤«æ›¼ç¼–ç å’Œå‹ç¼©æ˜¯å¯é€†çš„ï¼Œè¦æ·±åˆ»çš„ç†è§£è¿™äº›ä¸ªç‚¹ã€‚</p>
<a id="more"></a>
<ul>
<li>å›¾ç‰‡ä¼šä»¥ä¸åŒçš„æ•°æ®æ ¼å¼å­˜åœ¨äºä¸åŒçš„æ—¶åˆ»ï¼Œåœ¨å±å¹•ä¸­æ˜¾ç¤ºçš„æ—¶å€™è‚¯å®šæ˜¯RGBæ ¼å¼ï¼Œåœ¨å­˜å‚¨çš„æ—¶å€™å´ä¸æ˜¯ï¼Œæ˜¯ç»è¿‡ç¼–ç å’Œå‹ç¼©ä¹‹åçš„æ•°æ®</li>
<li>ç¬¬ä¸€æ­¥ï¼Œæ¯ä¸€ä¸ªç‚¹éƒ½æ˜¯ç”±RBGä¸‰ä¸ªå€¼ç»„æˆï¼Œåœ¨ç§»åŠ¨ç«¯æ˜¯å››ä¸ªå€¼RGBAï¼Œæ¯ä¸ªå€¼åˆç”±8ä½æ¥å­˜å‚¨ï¼Œæ‰€ä»¥æ¯ä¸ªé¢œè‰²å†…å­˜ä¸­éœ€è¦32ä½æ¥å­˜å‚¨ï¼Œæˆ‘ä»¬åœ¨å‹ç¼©å¤„ç†å›¾ç‰‡çš„æ—¶å€™å¹¶ä¸æ˜¯ä¸€ä¸ªç‚¹ä¸€ä¸ªç‚¹çš„å¤„ç†ï¼Œè¿™æ ·æ•ˆç‡å¾ˆä½ï¼Œæˆ‘ä»¬æ˜¯64ä¸ªç‚¹ä½œä¸ºä¸€ä¸ªå•å…ƒå»å¤„ç†ï¼Œ8x8çš„çŸ©é˜µ</li>
<li>é¢œè‰²ç©ºé—´è½¬æ¢RGB-&gt;YCbCr</li>
</ul>
<p>çœ‹ä¸€ä¸‹RGBå’ŒYCbCrç›¸äº’è½¬åŒ–çš„c++ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">float computeY(float red,float green,float blue) &#123;</div><div class="line">    float Y = 0.299 * red + 0.587 * green + 0.114 * blue;</div><div class="line">    return float(roundfunc(Y));</div><div class="line">&#125;</div><div class="line"></div><div class="line">float computeCr(float red,float green,float blue) &#123;</div><div class="line">    float Cr = 0.500 * red - 0.419 * green - 0.081 * blue;</div><div class="line">    Cr = Cr + 128.0;</div><div class="line">    return float(roundfunc(Cr));</div><div class="line">&#125;</div><div class="line"></div><div class="line">float computeCb(float red,float green,float blue) &#123;</div><div class="line">    float Cb = 0.500 * blue - 0.169 * red - 0.331 * green;</div><div class="line">    Cb = Cb + 128.0;</div><div class="line">    return float(roundfunc(Cb));</div><div class="line">&#125;</div><div class="line"></div><div class="line">int16_t computeR(float Y,float Cb,float Cr) &#123;</div><div class="line">    float R = 1.000 * Y  + 0.000 * (Cb - 128) + 1.400 * (Cr - 128);</div><div class="line">    R = int16_t(roundfunc(R));</div><div class="line">    return int16_t(roundfunc(R));</div><div class="line">&#125;</div><div class="line"></div><div class="line">int16_t computeG(float Y,float Cb,float Cr) &#123;</div><div class="line">    float G = 1.000 * Y - 0.343 * (Cb - 128) - 0.711 * (Cr - 128);</div><div class="line">    return int16_t(roundfunc(G));</div><div class="line">&#125;</div><div class="line"></div><div class="line">int16_t computeB(float Y,float Cb,float Cr) &#123;</div><div class="line">    float B = 1.000 * Y + 1.765 * (Cb - 128) + 0.000 * (Cr - 128);</div><div class="line">    return int16_t(roundfunc(B));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>pythonä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">BGRè½¬åŒ–</div><div class="line">imgYCC = cv2.cvtColor(img, cv2.COLOR_BGR2YCR_CB)</div></pre></td></tr></table></figure>
<ul>
<li>DCTå˜æ¢ï¼Œè¿™é‡Œè½¬åŒ–çš„YCbCræ•°æ®ï¼Œä½†æ˜¯è‚¯å®šæ˜¯é€‰æ‹©ä¸€ä¸ªé€šé“ï¼Œä¸å¯èƒ½å…¨éƒ½è½¬æ¢ä¸€éï¼Œä¸è¿‡éƒ½è½¬åŒ–ä¹Ÿæ²¡å•¥é—®é¢˜ï¼Œè¿™æ ·æˆ‘ä»¬ä¿¡æ¯å®¹é‡ä¼šæ›´å¤§</li>
<li>DCTé‡åŒ–ï¼Œé‡åŒ–çš„ç†è§£æ˜¯æœ€å¤§é™åº¦çš„å»å¤„ä¸é‡è¦çš„ä¿¡æ¯ï¼Œæ‰€ä»¥è¿™ä¸ªé‡åŒ–è¡¨æœ¬è´¨æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯æ¨èå®˜æ–¹çš„æ ‡å‡†é‡åŒ–è¡¨</li>
<li>å“ˆå¼—æ›¼ç¼–ç å’Œå‹ç¼©</li>
</ul>
<h3 id="JPEGè½½å…¥ä¿¡æ¯æ–¹æ³•ç†è§£"><a href="#JPEGè½½å…¥ä¿¡æ¯æ–¹æ³•ç†è§£" class="headerlink" title="JPEGè½½å…¥ä¿¡æ¯æ–¹æ³•ç†è§£"></a>JPEGè½½å…¥ä¿¡æ¯æ–¹æ³•ç†è§£</h3><p>æ–¹æ³•æœ‰ä¸¤ç§ï¼Œç¬¬ä¸€ç§æ˜¯ç›´æ¥åœ¨RGBä¿¡æ¯ä¸­å­˜å…¥ä¿¡æ¯ï¼Œç¬¬äºŒç§æ˜¯åœ¨DCTä¿¡æ¯ä¸­åŠ å…¥ä¿¡æ¯ï¼Œä¸‹è¾¹æ¥åˆ†åˆ«åˆ†æã€‚</p>
<h4 id="åœ¨RGBä¸­ç›´æ¥éšè—ä¿¡æ¯"><a href="#åœ¨RGBä¸­ç›´æ¥éšè—ä¿¡æ¯" class="headerlink" title="åœ¨RGBä¸­ç›´æ¥éšè—ä¿¡æ¯"></a>åœ¨RGBä¸­ç›´æ¥éšè—ä¿¡æ¯</h4><p>è¿™ç§åšæ³•æ˜¯åŸºäºLBSï¼Œæ›´æ”¹ä¿¡æ¯çš„æœ€ä½æœ‰æ•ˆä½ï¼Œé¦–å…ˆä¸ä¼šæ›´æ”¹äººçœ¼å¯åˆ†åˆ«çš„å›¾ç‰‡è®¤çŸ¥ï¼Œå› ä¸ºé¢œè‰²æ”¹å˜æå°ï¼Œä½†æ˜¯å¦‚æœæ˜¯jpegæ–‡ä»¶ï¼Œå­˜å‚¨å†è¯»å–ä½ å†™å…¥çš„ä¿¡æ¯å°±ä¼šé”™ä¹±ï¼Œå°±æ˜¯å› ä¸ºè¿™æ˜¯ä¸€ç§æœ‰æŸå‹ç¼©ï¼Œä½ æŠŠRedå€¼æ”¹æˆäº†220ï¼Œç­‰ä½ å­˜å‚¨æŸå¤±ä¹‹åï¼Œå†è¯»å–å¯èƒ½å°±å˜æˆäº†119ï¼Œæ€»ä¹‹å°±æ˜¯è¿™ä¸ªå€¼ä¸é è°±ã€‚</p>
<h4 id="åŸºäºDCTçš„éšè—"><a href="#åŸºäºDCTçš„éšè—" class="headerlink" title="åŸºäºDCTçš„éšè—"></a>åŸºäºDCTçš„éšè—</h4><p>DCTçš„ä¿¡æ¯æ˜¯æ¯”è¾ƒç¨³å®šçš„ï¼Œä½†æ˜¯ä»ç„¶ä¼šæœ‰å˜åŒ–çš„æƒ…å†µï¼Œè¿™æ˜¯å› ä¸ºå›¾åƒå­˜åœ¨æå€¼ï¼Œæ¯”å¦‚ä¸€ä¸ª255çš„è‰²å€¼ï¼Œä½ è—ä¿¡æ¯çš„æ—¶å€™å¢åŠ äº†è¿™ä¸ªå€¼ï¼Œä½†æ˜¯è¿”å›å›æ¥ä¹‹åè®¡ç®—çš„å€¼æ˜¯256ï¼Œä½†æ˜¯è¿™ä¸ªå€¼æ˜¯æ— æ•ˆçš„ï¼Œé‚£ä¹ˆä½ æ€ä¹ˆå¤„ç†å°±å¾ˆé‡è¦äº†ï¼Œä½ å¦‚æœç›´æ¥å°†å…¶çº¦ä¸º255ï¼Œé‚£ä¹ˆä½ çš„æ•°æ®å°†ä¼šé”™ä¹±ï¼Œå¦‚æœä½ ä¸é‡‡å–è¿™æ ·çš„ç‚¹ï¼Œé‚£ä¹ˆç›²æå–ä½ ä»ç„¶ä¼šé”™ä¹±ï¼Œå› ä¸ºå¦‚æœä½ çš„åˆ¤æ–­æ ‡å‡†æ˜¯ï¼Œè¿™ä¸ªå€¼ä¸èƒ½æ˜¯255ï¼Œä½ å†™çš„æ—¶å€™ä¸æ˜¯ï¼Œæ›´æ”¹ä¹‹åè¯»çš„æ—¶å€™å¯èƒ½å°±æ˜¯äº†ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§ä¸ç¨³å®šçš„å¤„ç†æ–¹æ³•ã€‚</p>
<p>è§£å†³åŠæ³•å°±æ˜¯å°†éšè—ä¿¡æ¯çš„å¤„ç†æ‰©å¼ æ”¹ä¸ºæ”¶ç¼©ï¼Œè¿™æ ·å³ä½¿é‡åˆ°æå€¼æƒ…å†µï¼Œä»ç„¶ä¸ä¼šè¢«è£å‡ï¼Œå°±è¿™æ ·è½»æ¾ç»•è¿‡è¿™ä¸ªé—®é¢˜ï¼ŒåŒæ—¶é…åˆå››èˆäº”å…¥çš„è§„åˆ™æ›¿æ¢ä¸ºé€€ä¸€çš„æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬èƒ½å¤Ÿä¿è¯æ‰€æœ‰çš„æ•°æ®æ˜¯ç¼©å‡çš„ï¼Œè¿™æ ·è‚¯å®šä¸ä¼šè§¦ç¢°é‚£ä¸ªä¸´ç•Œäº†ï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬å¦‚æœä¸è€ƒè™‘åæ£€æµ‹çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å¤§æ–¹çš„å°†ä¿¡æ¯å†™åœ¨DCæ•°æ®ä¸Šã€‚</p>
]]></content>
      
        
    </entry>
    
    <entry>
      <title><![CDATA[Seabornæ•°æ®å±•ç¤ºå…¥é—¨]]></title>
      <url>/2018/03/21/2018/Seaborn%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA%E5%85%A5%E9%97%A8/</url>
      <content type="html"><![CDATA[<ul>
<li>éƒ½æœ‰ä»€ä¹ˆç±»å‹çš„å›¾</li>
<li>éƒ½èƒ½åšå“ªå‡ ç§åˆ†æ</li>
</ul>
<p>Seabornæœ‰äº”ä¸ªé¢„è®¾å¥½çš„ä¸»é¢˜ï¼šdarkgrid, whitegrid, dark, white,å’Œticks</p>
<h3 id="distplot-kdeplot"><a href="#distplot-kdeplot" class="headerlink" title="distplot()  kdeplot()"></a>distplot()  kdeplot()</h3><p>distplot()ä¸ºhiståŠ å¼ºç‰ˆï¼Œkdeplot()ä¸ºå¯†åº¦æ›²çº¿å›¾ </p>
<h3 id="ç®±å‹å›¾-boxplot"><a href="#ç®±å‹å›¾-boxplot" class="headerlink" title="ç®±å‹å›¾ boxplot()"></a>ç®±å‹å›¾ boxplot()</h3><h3 id="è”åˆåˆ†å¸ƒjointplot"><a href="#è”åˆåˆ†å¸ƒjointplot" class="headerlink" title="è”åˆåˆ†å¸ƒjointplot()"></a>è”åˆåˆ†å¸ƒjointplot()</h3><h3 id="çƒ­ç‚¹å›¾heatmap"><a href="#çƒ­ç‚¹å›¾heatmap" class="headerlink" title="çƒ­ç‚¹å›¾heatmap()"></a>çƒ­ç‚¹å›¾heatmap()</h3><h3 id="Histogramsç›´æ–¹å›¾"><a href="#Histogramsç›´æ–¹å›¾" class="headerlink" title="Histogramsç›´æ–¹å›¾"></a>Histogramsç›´æ–¹å›¾</h3><h3 id="Kernel-density-estimatonæ ¸å¯†åº¦ä¼°è®¡"><a href="#Kernel-density-estimatonæ ¸å¯†åº¦ä¼°è®¡" class="headerlink" title="Kernel density estimatonæ ¸å¯†åº¦ä¼°è®¡"></a>Kernel density estimatonæ ¸å¯†åº¦ä¼°è®¡</h3>]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
            <tag> æ•°æ®æŒ–æ˜ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[pythonçš„æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨]]></title>
      <url>/2018/03/20/2018/python%E7%9A%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œå¦‚æœç›´æ¥ç»™å‡ºå­—ç¬¦ï¼Œå°±æ˜¯ç²¾ç¡®åŒ¹é…ã€‚ç”¨\då¯ä»¥åŒ¹é…ä¸€ä¸ªæ•°å­—ï¼Œ\wå¯ä»¥åŒ¹é…ä¸€ä¸ªå­—æ¯æˆ–æ•°å­—ï¼Œæ‰€ä»¥ï¼š<br><a id="more"></a></p>
<ul>
<li>â€˜00\dâ€™å¯ä»¥åŒ¹é…â€™007â€™ï¼Œä½†æ— æ³•åŒ¹é…â€™00Aâ€™ï¼›</li>
<li>â€˜\d\d\dâ€™å¯ä»¥åŒ¹é…â€™010â€™ï¼›</li>
<li>â€˜\w\w\dâ€™å¯ä»¥åŒ¹é…â€™py3â€™ï¼›</li>
<li>.å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦ï¼Œæ‰€ä»¥ï¼šâ€™py.â€™å¯ä»¥åŒ¹é…â€™pycâ€™ã€â€™pyoâ€™ã€â€™py!â€™ç­‰ç­‰ã€‚</li>
<li>è¦åŒ¹é…å˜é•¿çš„å­—ç¬¦ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œç”¨*è¡¨ç¤ºä»»æ„ä¸ªå­—ç¬¦ï¼ˆåŒ…æ‹¬0ä¸ªï¼‰ï¼Œç”¨+è¡¨ç¤ºè‡³å°‘ä¸€ä¸ªå­—ç¬¦ï¼Œç”¨?è¡¨ç¤º0ä¸ªæˆ–1ä¸ªå­—ç¬¦ï¼Œç”¨{n}è¡¨ç¤ºnä¸ªå­—ç¬¦ï¼Œç”¨{n,m}è¡¨ç¤ºn-mä¸ªå­—ç¬¦ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">æ¥çœ‹ä¸€ä¸ªå¤æ‚çš„ä¾‹å­ï¼š\d&#123;3&#125;\s+\d&#123;3,8&#125;ã€‚</div><div class="line"></div><div class="line">æˆ‘ä»¬æ¥ä»å·¦åˆ°å³è§£è¯»ä¸€ä¸‹ï¼š</div><div class="line"></div><div class="line">\d&#123;3&#125;è¡¨ç¤ºåŒ¹é…3ä¸ªæ•°å­—ï¼Œä¾‹å¦‚&apos;010&apos;ï¼›</div><div class="line"></div><div class="line">\så¯ä»¥åŒ¹é…ä¸€ä¸ªç©ºæ ¼ï¼ˆä¹ŸåŒ…æ‹¬Tabç­‰ç©ºç™½ç¬¦ï¼‰ï¼Œæ‰€ä»¥\s+è¡¨ç¤ºè‡³å°‘æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œä¾‹å¦‚åŒ¹é…&apos; &apos;ï¼Œ&apos; &apos;ç­‰ï¼›</div><div class="line"></div><div class="line">\d&#123;3,8&#125;è¡¨ç¤º3-8ä¸ªæ•°å­—ï¼Œä¾‹å¦‚&apos;1234567&apos;ã€‚</div><div class="line"></div><div class="line">ç»¼åˆèµ·æ¥ï¼Œä¸Šé¢çš„æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥åŒ¹é…ä»¥ä»»æ„ä¸ªç©ºæ ¼éš”å¼€çš„å¸¦åŒºå·çš„ç”µè¯å·ç ã€‚</div><div class="line"></div><div class="line">å¦‚æœè¦åŒ¹é…&apos;010-12345&apos;è¿™æ ·çš„å·ç å‘¢ï¼Ÿç”±äº&apos;-&apos;æ˜¯ç‰¹æ®Šå­—ç¬¦ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œè¦ç”¨&apos;\&apos;è½¬ä¹‰ï¼Œæ‰€ä»¥ï¼Œä¸Šé¢çš„æ­£åˆ™æ˜¯\d&#123;3&#125;\-\d&#123;3,8&#125;ã€‚</div><div class="line"></div><div class="line">ä½†æ˜¯ï¼Œä»ç„¶æ— æ³•åŒ¹é…&apos;010 - 12345&apos;ï¼Œå› ä¸ºå¸¦æœ‰ç©ºæ ¼ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›´å¤æ‚çš„åŒ¹é…æ–¹å¼ã€‚</div></pre></td></tr></table></figure>
<p>è¿›é˜¶<br>è¦åšæ›´ç²¾ç¡®åœ°åŒ¹é…ï¼Œå¯ä»¥ç”¨[]è¡¨ç¤ºèŒƒå›´ï¼Œæ¯”å¦‚ï¼š</p>
<p>[0-9a-zA-Z_]å¯ä»¥åŒ¹é…ä¸€ä¸ªæ•°å­—ã€å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ï¼›</p>
<p>[0-9a-zA-Z_]+å¯ä»¥åŒ¹é…è‡³å°‘ç”±ä¸€ä¸ªæ•°å­—ã€å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚â€™a100â€™ï¼Œâ€™0_Zâ€™ï¼Œâ€™Py3000â€™ç­‰ç­‰ï¼›</p>
<p>[a-zA-Z_][0-9a-zA-Z_]*å¯ä»¥åŒ¹é…ç”±å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å¤´ï¼Œåæ¥ä»»æ„ä¸ªç”±ä¸€ä¸ªæ•°å­—ã€å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯Pythonåˆæ³•çš„å˜é‡ï¼›</p>
<p>[a-zA-Z_][0-9a-zA-Z_]{0, 19}æ›´ç²¾ç¡®åœ°é™åˆ¶äº†å˜é‡çš„é•¿åº¦æ˜¯1-20ä¸ªå­—ç¬¦ï¼ˆå‰é¢1ä¸ªå­—ç¬¦+åé¢æœ€å¤š19ä¸ªå­—ç¬¦ï¼‰ã€‚</p>
<p>A|Bå¯ä»¥åŒ¹é…Aæˆ–Bï¼Œæ‰€ä»¥(P|p)ythonå¯ä»¥åŒ¹é…â€™Pythonâ€™æˆ–è€…â€™pythonâ€™ã€‚</p>
<p>^è¡¨ç¤ºè¡Œçš„å¼€å¤´ï¼Œ^\dè¡¨ç¤ºå¿…é¡»ä»¥æ•°å­—å¼€å¤´ã€‚</p>
<p>$è¡¨ç¤ºè¡Œçš„ç»“æŸï¼Œ\d$è¡¨ç¤ºå¿…é¡»ä»¥æ•°å­—ç»“æŸã€‚</p>
<p>ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œpyä¹Ÿå¯ä»¥åŒ¹é…â€™pythonâ€™ï¼Œä½†æ˜¯åŠ ä¸Š^py$å°±å˜æˆäº†æ•´è¡ŒåŒ¹é…ï¼Œå°±åªèƒ½åŒ¹é…â€™pyâ€™äº†ã€‚</p>
<h3 id="pythonä¸­çš„æ­£åˆ™"><a href="#pythonä¸­çš„æ­£åˆ™" class="headerlink" title="pythonä¸­çš„æ­£åˆ™"></a>pythonä¸­çš„æ­£åˆ™</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">import re</div><div class="line"></div><div class="line">def handlere(rematchs, inputString):</div><div class="line">    for match in rematchs:</div><div class="line">        matchout = match.findall(inputString)</div><div class="line">        for item in matchout:</div><div class="line">            if type(item) == type((1, 2, 3)):</div><div class="line">                inputString = inputString.replace(item[0], &apos;&apos;)</div><div class="line">            else:</div><div class="line">                inputString = inputString.replace(item, &apos;&apos;)</div><div class="line"></div><div class="line">    return inputString</div><div class="line">    </div><div class="line">matchs = [re.compile(u&apos;å‘¨[ä¸€äºŒä¸‰å››äº”å…­æ—¥]&apos;),re.compile(r&apos;(\d&#123;1,2&#125;\:\d&#123;1,2&#125;)&apos;), re.compile(r&apos;(\d&#123;4&#125;(\.|\-|\/)\d&#123;1,2&#125;(\.|\-|\/)\d&#123;1,2&#125;)&apos;)]</div><div class="line">    comment = handlere(matchs, comment)</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[skleanrnæ–‡æœ¬åˆ†ç±»ä»£ç è®°å½•]]></title>
      <url>/2018/03/19/2018/skleanrn%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/</url>
      <content type="html"><![CDATA[<p>æ–‡æœ¬åˆ†ç±»æ¨¡å‹ä»¥åŠä½¿ç”¨ä»£ç è®°å½•<br><a id="more"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">import os,re  </div><div class="line">import sys,jieba</div><div class="line">import codecs,time</div><div class="line">import shutil</div><div class="line">import numpy as np</div><div class="line">import pandas as pd</div><div class="line">import matplotlib</div><div class="line">import scipy,json,pinyin</div><div class="line">from sklearn.externals import joblib</div><div class="line">from sklearn.svm import SVC</div><div class="line">import matplotlib.pyplot as plt</div><div class="line">from sklearn.naive_bayes import MultinomialNB  </div><div class="line">from sklearn.naive_bayes import GaussianNB</div><div class="line">from sklearn.linear_model import Perceptron</div><div class="line">from sklearn.model_selection import train_test_split</div><div class="line">from sklearn import feature_extraction  </div><div class="line">from sklearn.feature_extraction.text import TfidfTransformer  </div><div class="line">from sklearn.feature_extraction.text import CountVectorizer</div><div class="line">from sklearn.feature_extraction.text import HashingVectorizer </div><div class="line">from pandas import DataFrame </div><div class="line">import enchant</div><div class="line">checkeng = enchant.Dict(&quot;en_US&quot;)</div><div class="line">    </div><div class="line">reload(sys) # Python2.5 åˆå§‹åŒ–åä¼šåˆ é™¤ sys.setdefaultencoding è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è½½å…¥   </div><div class="line">sys.setdefaultencoding(&apos;utf-8&apos;)  </div><div class="line"></div><div class="line">jieba.load_userdict(&apos;customdict.txt&apos;)</div><div class="line">stopwords = open(&apos;stopwords.txt&apos;,&apos;r&apos;).read().split(&apos;\n&apos;)</div><div class="line">stopwordsadv = open(&apos;stopwordsadv.txt&apos;,&apos;r&apos;).read().split(&apos;\n&apos;)</div><div class="line">stopwords = open(&apos;teststopwords.txt&apos;,&apos;r&apos;).read().split(&apos;\n&apos;) + stopwords + stopwordsadv</div><div class="line"></div><div class="line">def handleadvkeywords(inputString):</div><div class="line">    if hasNumbers(inputString) == False:</div><div class="line">        return inputString</div><div class="line">    </div><div class="line">    pinyinlist = []</div><div class="line">    </div><div class="line">    for char in inputString:</div><div class="line">        pin = pinyin.get(char, format=&apos;strip&apos;, delimiter=&quot;&quot;)</div><div class="line">        pinyinlist.append(pin)</div><div class="line">    </div><div class="line">    setp = 2</div><div class="line">    </div><div class="line">    indexwei = 100</div><div class="line">    indexxin = 200</div><div class="line">    indexjia = 300</div><div class="line">    indexhao = 400</div><div class="line">    indexxing = 500</div><div class="line">    indexkou = 600</div><div class="line">    </div><div class="line">    if &apos;wei&apos; in pinyinlist:    </div><div class="line">        indexwei = pinyinlist.index(&apos;wei&apos;)</div><div class="line">        </div><div class="line">    if &apos;v&apos; in pinyinlist:    </div><div class="line">        indexwei = pinyinlist.index(&apos;v&apos;)    </div><div class="line">        </div><div class="line">    if &apos;xin&apos; in pinyinlist:    </div><div class="line">        indexxin = pinyinlist.index(&apos;xin&apos;)</div><div class="line">        </div><div class="line">    if &apos;xing&apos; in pinyinlist:    </div><div class="line">        indexxin = pinyinlist.index(&apos;xing&apos;)</div><div class="line">        </div><div class="line">    if &apos;hao&apos; in pinyinlist:    </div><div class="line">        indexhao = pinyinlist.index(&apos;hao&apos;)</div><div class="line">        </div><div class="line">    if &apos;jia&apos; in pinyinlist:    </div><div class="line">        indexjia = pinyinlist.index(&apos;jia&apos;)</div><div class="line">        </div><div class="line">    if &apos;zhao&apos; in pinyinlist:  </div><div class="line">        indexjia = pinyinlist.index(&apos;zhao&apos;)    </div><div class="line">    </div><div class="line">    if abs(indexxin - indexwei) &lt; setp:</div><div class="line">        inputString = u&apos;å¾®ä¿¡&apos; + inputString</div><div class="line">    </div><div class="line">    if abs(indexhao - indexwei) &lt; setp:</div><div class="line">        inputString = u&apos;å¾®å·&apos; + inputString</div><div class="line">    </div><div class="line">    if abs(indexwei - indexjia) &lt; setp:</div><div class="line">        inputString = u&apos;åŠ å¾®&apos; + inputString</div><div class="line">        </div><div class="line">#     if indexwei - indexjia &lt;= 2:</div><div class="line">#         inputString = &apos;åŠ å¾®&apos; + inputString</div><div class="line">        </div><div class="line">    if abs(indexxing - indexwei) &lt; setp:</div><div class="line">        inputString = u&apos;å¾®ä¿¡&apos; + inputString</div><div class="line">         </div><div class="line">    if  pinyinlist.count(&apos;kou&apos;) &gt;= 2:</div><div class="line">        inputString = &apos;qq&apos; + inputString</div><div class="line">    </div><div class="line">    if abs(indexkou - indexjia) &lt; setp:</div><div class="line">        inputString = u&apos;qq&apos; + inputString</div><div class="line">    </div><div class="line">    if &apos;åŠ å¾®å¾®&apos; in inputString:</div><div class="line">        inputString = inputString.replace(&apos;åŠ å¾®å¾®&apos;,&apos;åŠ å¾®&apos;)</div><div class="line">    </div><div class="line">    return inputString    </div><div class="line"></div><div class="line">def getwordcount(inputString):</div><div class="line">    df = pd.read_excel(&apos;lowfrequency.xls&apos;)</div><div class="line">    </div><div class="line">    negkeydicstring = open(&apos;negkeydic.json&apos;,&apos;r&apos;).read()</div><div class="line">    negkeydic = json.loads(negkeydicstring)</div><div class="line">    </div><div class="line">    count = 0</div><div class="line">    countdic = negkeydic.get(inputString)</div><div class="line">    if type(countdic) != type(None):</div><div class="line">        count = countdic[1]</div><div class="line">    print df[df[&apos;name&apos;] == inputString],count</div><div class="line"></div><div class="line">def cos_sim(vector_a, vector_b):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    è®¡ç®—ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦</div><div class="line">    :param vector_a: å‘é‡ a </div><div class="line">    :param vector_b: å‘é‡ b</div><div class="line">    :return: sim</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    vector_a = np.mat(vector_a)</div><div class="line">    vector_b = np.mat(vector_b)</div><div class="line">    num = float(vector_a * vector_b.T)</div><div class="line">    denom = np.linalg.norm(vector_a) * np.linalg.norm(vector_b)</div><div class="line">    cos = num / denom</div><div class="line">    sim = 0.5 + 0.5 * cos</div><div class="line">    return sim</div><div class="line"></div><div class="line">def hasNumbers(inputString):</div><div class="line">    return any(char.isdigit() for char in inputString)</div><div class="line">    </div><div class="line">def replacenum(inputString):</div><div class="line">    </div><div class="line">    replaceDic = &#123;&apos;yi&apos;:&apos;1&apos;,&apos;yao&apos;:&apos;1&apos;,&apos;er&apos;:&apos;2&apos;,&apos;san&apos;:&apos;3&apos;,&apos;si&apos;:&apos;4&apos;,&apos;wu&apos;:&apos;5&apos;,&apos;liu&apos;:&apos;6&apos;,&apos;qi&apos;:&apos;7&apos;,&apos;ba&apos;:&apos;8&apos;,&apos;jiu&apos;:&apos;9&apos;,&apos;ling&apos;:&apos;0&apos;&#125;</div><div class="line">#     .replace(u&apos;è…°&apos;,&apos;1&apos;).replace(u&apos;ä¸€&apos;,&apos;1&apos;).replace(u&apos;äºŒ&apos;,&apos;2&apos;).replace(u&apos;ä¸‰&apos;,&apos;3&apos;).replace(u&apos;æ–¯&apos;,&apos;4&apos;).replace(u&apos;å››&apos;,&apos;4&apos;).replace(u&apos;äº”&apos;,&apos;5&apos;).replace(u&apos;å…­&apos;,&apos;6&apos;).replace(u&apos;é½&apos;,&apos;7&apos;).replace(u&apos;ä¸ƒ&apos;,&apos;7&apos;).replace(u&apos;æ‰’&apos;,&apos;8&apos;).replace(u&apos;å…«&apos;,&apos;8&apos;).replace(u&apos;ä¹&apos;,&apos;9&apos;).replace(u&apos;é›¶&apos;,&apos;0&apos;)</div><div class="line">    returnString = &apos;&apos;</div><div class="line">    if len(inputString) &lt;= 2:</div><div class="line">        for item in inputString:</div><div class="line">            pin = pinyin.get(item, format=&apos;strip&apos;, delimiter=&quot;&quot;)</div><div class="line">            output = replaceDic.get(pin)</div><div class="line">            if type(output) == type(&apos;1&apos;):</div><div class="line">                returnString = returnString + output   </div><div class="line">    </div><div class="line">    if returnString == &apos;&apos; or len(returnString) &lt; len(inputString):</div><div class="line">        returnString = inputString</div><div class="line">    </div><div class="line">    return returnString</div><div class="line">    </div><div class="line">def handlenum(inputString):</div><div class="line">    </div><div class="line">    if inputString.count(&apos;0&apos;) &gt;= 2:</div><div class="line">        inputString = inputString.replace(&apos;0&apos;,&apos;&apos;)</div><div class="line">    </div><div class="line">    if hasNumbers(inputString):</div><div class="line">        s = re.findall(&quot;\d+&quot;,inputString)</div><div class="line">        for item in s:</div><div class="line">            if len(item) == 11:</div><div class="line">                inputString = inputString.replace(item,&apos;ä„&apos;) #ç”µè¯</div><div class="line">            else:</div><div class="line">                if len(inputString.replace(&apos;0&apos;,&apos;&apos;).replace(&apos;g&apos;,&apos;&apos;)) &gt;= 5 and inputString[-1] != &apos;0&apos;:</div><div class="line">                    if &apos;988511&apos; in inputString:</div><div class="line">                        inputString = &apos;äº¬ä¸œ&apos;</div><div class="line">                    else:</div><div class="line">                        if len(item) &gt;= 2:</div><div class="line">                            inputString = inputString.replace(item,&apos;è—¨&apos;) #qqå¾®ä¿¡ä¹‹ç±»çš„</div><div class="line">                        else:</div><div class="line">                            inputString = inputString.replace(item,&apos;&apos;)</div><div class="line"> </div><div class="line">        outList = jieba.lcut(inputString)</div><div class="line">        if &apos;&apos; in outList:</div><div class="line">            outList.remove(&apos;&apos;)</div><div class="line">        if &apos; &apos; in outList:</div><div class="line">            outList.remove(&apos; &apos;)    </div><div class="line">        outListNew = []</div><div class="line">        </div><div class="line">        for item in outList:</div><div class="line">            if (&apos;ä„&apos; in item) or (&apos;è—¨&apos; in item) or (&apos;äº¬ä¸œ&apos; in item):</div><div class="line">                outListNew.append(item)</div><div class="line">            else:</div><div class="line">                if hasNumbers(item) == False:</div><div class="line">                    if checkeng.check(item):</div><div class="line">                        outListNew.append(&apos;isenglish&apos;)</div><div class="line">                    else:</div><div class="line">                        outListNew.append(item)</div><div class="line">                               </div><div class="line">        return outListNew</div><div class="line">    </div><div class="line">    if inputString.isalpha() == True and len(inputString) &gt; 5:#å¦‚æœæ˜¯çº¯è‹±æ–‡ï¼Œå¹¶ä¸”è‹±æ–‡é•¿åº¦å¤§äº5</div><div class="line">        if &apos;jd&apos; in inputString:</div><div class="line">            inputString = &apos;äº¬ä¸œ&apos;</div><div class="line">        else:</div><div class="line">            if checkeng.check(inputString):</div><div class="line">                inputString = &apos;isallenglish&apos;</div><div class="line">    </div><div class="line">    return [inputString]</div><div class="line"></div><div class="line">def translate(comment):</div><div class="line">    testline = re.sub(u&quot;[\s+\.\!\/_,$%^*(+\&quot;\&apos;]+|[+â€”â€”ï¼ï¼Œï¼ã€‚ï¼Ÿã€~@#ï¿¥%â€¦â€¦&amp;*ï¼ˆï¼‰]+&quot;, &apos;&apos;, comment)</div><div class="line">    testline = testline.replace(u&apos;[&apos;,&apos;&apos;).replace(u&apos;ä¸¨&apos;,&apos;&apos;).replace(chr(32),&apos;&apos;).replace(u&apos;ï¼&apos;, u&apos;&apos;).replace(u&apos;ï¼Œ&apos;, u&apos;&apos;).replace(u&apos;ã€‚&apos;, u&apos;&apos;).replace(u&apos;\n&apos;, u&apos;&apos;).replace(u&apos;\t&apos;, u&apos;&apos;).replace(</div><div class="line">        u&apos;?&apos;, u&apos;&apos;).replace(u&apos;ã€&apos;,&apos;&apos;).replace(u&apos;o&apos;,&apos;&apos;).replace(u&apos;O&apos;,&apos;&apos;).replace(u&apos;ä¸¶&apos;,&apos;&apos;).replace(u&apos;â€˜&apos;,&apos;&apos;).replace(&apos;:&apos;,&apos;&apos;).replace(u&apos;ï¼š&apos;,&apos;&apos;).replace(&apos;(&apos;,&apos;&apos;).replace(&apos;)&apos;,&apos;&apos;).replace(&apos;&#123;&apos;,&apos;&apos;).replace(&apos;&#125;&apos;,&apos;&apos;).replace(u&apos;ï¼Ÿ&apos;, u&apos;&apos;).replace(u&apos;-&apos;,&apos;&apos;)</div><div class="line">    </div><div class="line">    if &apos;å±é™©æ€§&apos; in testline:</div><div class="line">        testline = testline.replace(&apos;å±é™©æ€§&apos;,&apos;&apos;)</div><div class="line">    if &apos;2018&apos; in testline:</div><div class="line">        testline = testline.replace(&apos;2018&apos;,&apos;&apos;)</div><div class="line">    if &apos;è¡Œä¸º&apos; in testline:</div><div class="line">        testline = testline.replace(&apos;è¡Œä¸º&apos;,&apos;&apos;)</div><div class="line">    if &apos;vivox&apos; in testline:</div><div class="line">        testline = testline.replace(&apos;vivox&apos;,&apos;&apos;)  </div><div class="line">    if &apos;è¶Šæ¥è¶Šæ‰£&apos; in testline:</div><div class="line">        testline = testline.replace(&apos;è¶Šæ¥è¶Šæ‰£&apos;,&apos;&apos;)      </div><div class="line">    if &apos;weixin&apos; in testline:</div><div class="line">        testline = testline.replace(&apos;weixin&apos;, &apos;å¾®ä¿¡&apos;)</div><div class="line">    if &apos;vxin&apos; in testline:</div><div class="line">        testline = testline.replace(&apos;vxin&apos;,&apos;å¾®ä¿¡&apos;)</div><div class="line">    if &apos;wxin&apos; in testline:</div><div class="line">        testline = testline.replace(&apos;wxin&apos;,&apos;å¾®ä¿¡&apos;)</div><div class="line">    </div><div class="line">    testline = testline.lower()</div><div class="line">    return testline </div><div class="line"></div><div class="line">def changeToWords(sentence):</div><div class="line">    global stopwords</div><div class="line">    out = translate(sentence)</div><div class="line">    out = handleadvkeywords(out)</div><div class="line">    jiebalistnew = []</div><div class="line">    jiebalist = jieba.lcut(out)</div><div class="line">    </div><div class="line">    forcut = &apos;&apos;</div><div class="line">    for item in jiebalist:</div><div class="line">        item = replacenum(item)</div><div class="line">        forcut = forcut + item</div><div class="line">    </div><div class="line">    jiebalist = jieba.lcut(forcut)</div><div class="line">    </div><div class="line">    for item in jiebalist:</div><div class="line">        if item not in stopwords:</div><div class="line">            jiebalistnew = jiebalistnew + handlenum(item)</div><div class="line">    </div><div class="line">    if &apos;&apos; in jiebalistnew:</div><div class="line">        jiebalistnew.remove(&apos;&apos;) </div><div class="line">    if &apos; &apos; in jiebalistnew:</div><div class="line">        jiebalistnew.remove(&apos; &apos;)     </div><div class="line">    string = &apos; &apos;.join(jiebalistnew)</div><div class="line">    print string</div><div class="line">    return string</div><div class="line"></div><div class="line">def getkeywords(corpus): #åº”è¯¥æ˜¯è®¡ç®—æ¯ä¸ªè¯ä¸ªæ•°é™¤ä»¥æˆ‘è¿™ä¸ªé˜µè¥çš„è¯æ€»æ•°ï¼Œå€’æ•°ï¼Œè¿™æ ·æ¥è¡¡é‡å çš„æ¯”é‡ï¼Œå¦‚æœä¸¤è€…æ¯”é‡æ¥è¿‘ï¼Œé‚£ä¹ˆæ— æ„ä¹‰</div><div class="line">    corpus = map(changeToWords,corpus)</div><div class="line">    vectorizer = CountVectorizer(token_pattern=u&apos;(?u)\w+&apos;)</div><div class="line">    X = vectorizer.fit_transform(corpus)</div><div class="line">    names = vectorizer.get_feature_names()</div><div class="line">    count = X.toarray().sum(axis=0)</div><div class="line">    dictn = &#123;&#125;</div><div class="line">    values = vectorizer.vocabulary_.values()</div><div class="line">    </div><div class="line">    sum = np.array(values).sum()</div><div class="line">    </div><div class="line">    for i in range(len(names)):</div><div class="line">        key = names[i]</div><div class="line">        value = sum * 1.0 / count[i]</div><div class="line">        valuenew = count[i]</div><div class="line">        dictn[key] = (value,valuenew)</div><div class="line">    </div><div class="line">    return dictn</div><div class="line"></div><div class="line">def getcompare(cols1,cols2):#æ¯”è¾ƒä¸¤è¾¹çš„å æ¯”æƒ…å†µ</div><div class="line">    coldic1 = getkeywords(cols1)</div><div class="line">    coldic2 = getkeywords(cols2)</div><div class="line">    </div><div class="line">    negkeydicstring = json.dumps(coldic1)</div><div class="line">    f = open(&apos;negkeydic.json&apos;,&apos;w&apos;)</div><div class="line">    f.write(negkeydicstring)</div><div class="line">    f.close()</div><div class="line">    </div><div class="line">    listn = sorted(coldic1.items(), key=lambda d: d[1][0], reverse=True) </div><div class="line">    </div><div class="line">    returnList = []</div><div class="line">    for item in listn:</div><div class="line">        name = item[0]</div><div class="line">        count = coldic1.get(name)[0]</div><div class="line">        if name in coldic2.keys():</div><div class="line">            count1 = coldic2.get(name)[0]</div><div class="line">            ratio = count * 1.0 / count1</div><div class="line">            if ratio &gt; 0.7 and ratio &lt; 1.5:</div><div class="line">                returnList.append(name)</div><div class="line">            </div><div class="line">            countppos = coldic2.get(name)[1]</div><div class="line">            countpneg = coldic1.get(name)[1]</div><div class="line">            </div><div class="line">            if countppos * 1.0 / countpneg &gt; 3:</div><div class="line">                returnList.append(name)</div><div class="line">        </div><div class="line">    return returnList</div><div class="line">    </div><div class="line"></div><div class="line">def trainmodel():</div><div class="line">    </div><div class="line">    #########################################################################</div><div class="line">    #                           ç¬¬ä¸€æ­¥ è®¡ç®—TFIDF</div><div class="line">    #æ–‡æ¡£é¢„æ–™ ç©ºæ ¼è¿æ¥</div><div class="line">    corpus = []</div><div class="line">    global stopwords</div><div class="line">    </div><div class="line">    #è¯»å–é¢„æ–™ ä¸€è¡Œé¢„æ–™ä¸ºä¸€ä¸ªæ–‡æ¡£</div><div class="line">    neg = pd.read_excel(&apos;adver.xls&apos;)</div><div class="line">    negcontents = neg[&apos;content&apos;].dropna()</div><div class="line">    negcorpus = list(negcontents)</div><div class="line">    negcorpus = map(changeToWords,negcorpus)</div><div class="line">    </div><div class="line">    #è¯»å–é¢„æ–™ ä¸€è¡Œé¢„æ–™ä¸ºä¸€ä¸ªæ–‡æ¡£</div><div class="line">    pos = pd.read_excel(&apos;notadver.xls&apos;)</div><div class="line">    poscontents = pos[&apos;content&apos;].dropna() </div><div class="line">    poscorpus = list(poscontents)</div><div class="line">    poscorpus = map(changeToWords,poscorpus)</div><div class="line">    </div><div class="line">    stopwords = getcompare(negcorpus,poscorpus) + stopwords #åœæ­¢è¯ï¼Œä¸¤è¾¹æ¯”é‡å·®ä¸å¤šæˆ–è€…æ­£å¸¸çš„å¤šçš„è¯</div><div class="line">    tostop = CountVectorizer(stop_words=stopwords,token_pattern=u&apos;(?u)\w+&apos;)</div><div class="line">    #ç¬¬ä¸€ä¸ªfit_transformæ˜¯è®¡ç®—tf-idf ç¬¬äºŒä¸ªfit_transformæ˜¯å°†æ–‡æœ¬è½¬ä¸ºè¯é¢‘çŸ©é˜µ</div><div class="line">    tostopcount = tostop.fit_transform(poscorpus+negcorpus)</div><div class="line">    words = tostop.get_feature_names()</div><div class="line">    sumlist = list(tostopcount.toarray().sum(axis=0))</div><div class="line">    a1 = np.array([words,sumlist])</div><div class="line">    a1 = np.transpose(a1)</div><div class="line">    dfnew = DataFrame(a1,columns=[&apos;name&apos;,&apos;count&apos;])</div><div class="line">    dfnew[&apos;count&apos;] = dfnew[&apos;count&apos;].astype(int)</div><div class="line">    dfnew.to_excel(&apos;lowfrequency.xls&apos;)</div><div class="line">    tostopwords = list(dfnew[dfnew[&apos;count&apos;] &lt; 7][&apos;name&apos;]) #å»é™¤é¢‘æ¬¡å°äº7çš„è¯ç»„</div><div class="line"></div><div class="line">    stopwords = stopwords + tostopwords</div><div class="line">    if os.path.exists(&apos;teststopwords.txt&apos;):</div><div class="line">        os.popen(&apos;rm -rf teststopwords.txt&apos;)</div><div class="line">    f = open(&apos;teststopwords.txt&apos;,&apos;w&apos;)</div><div class="line">    for item in stopwords:</div><div class="line">        if item.isalpha() == False:</div><div class="line">            f.write(item + &apos;\n&apos;)</div><div class="line">    f.close()   </div><div class="line">    </div><div class="line">#     #è¯¥ç±»ä¼šç»Ÿè®¡æ¯ä¸ªè¯è¯­çš„tf-idfæƒå€¼</div><div class="line">    transformer = TfidfTransformer()</div><div class="line">    vectorizer = CountVectorizer(token_pattern=u&apos;(?u)\w+&apos;)</div><div class="line">    count0 = vectorizer.fit_transform(poscorpus+negcorpus)</div><div class="line">    tfidf = transformer.fit_transform(count0)</div><div class="line">    </div><div class="line">    #å°†tf-idfçŸ©é˜µæŠ½å–å‡ºæ¥ï¼Œå…ƒç´ w[i][j]è¡¨ç¤ºjè¯åœ¨iç±»æ–‡æœ¬ä¸­çš„tf-idfæƒé‡</div><div class="line">    weight = tfidf.toarray()</div><div class="line">    </div><div class="line">    x = weight</div><div class="line">    y = np.concatenate((np.zeros(len(poscorpus)), np.ones(len(negcorpus))))</div><div class="line">    </div><div class="line">    list0 = list(poscontents) + list(negcontents)</div><div class="line">    list1 = list(poscorpus+negcorpus)</div><div class="line">    list2 = list(weight)</div><div class="line">   </div><div class="line">    list3 = []</div><div class="line">    for item in list2:</div><div class="line">        item = list(item)</div><div class="line">        list3.append(&apos;/&apos;.join(&apos;%s&apos; % id for id in item))</div><div class="line">    </div><div class="line">    a2 = np.array([list0,list1,list3,y])</div><div class="line">    a2 = np.transpose(a2)</div><div class="line"></div><div class="line">    dftosave = DataFrame(a2,columns=[&apos;content&apos;,&apos;name&apos;,&apos;weight&apos;,&apos;isadver&apos;])</div><div class="line">    dftosave.to_csv(&apos;vecdict.csv&apos;)</div><div class="line">    </div><div class="line">    x_train, x_test, y_train, y_test = train_test_split(x, y, test_size=0.01)</div><div class="line">    </div><div class="line">    # æ„å»ºæ”¯æŒå‘é‡æœºåˆ†ç±»æ¨¡å‹</div><div class="line">#     model = SVC(kernel=&apos;rbf&apos;, verbose=True)</div><div class="line">    </div><div class="line">#     model = GaussianNB()</div><div class="line">    modelnew = MultinomialNB()</div><div class="line">#     model = Perceptron()</div><div class="line">    </div><div class="line">#     model.fit(x_train, y_train)</div><div class="line">    modelnew.fit(x_train, y_train)</div><div class="line">    </div><div class="line">#     score = model.score(x_test, y_test)</div><div class="line">    scorenew = modelnew.score(x_test, y_test)</div><div class="line">#     print score</div><div class="line">    print scorenew</div><div class="line">    print &apos;donetest&apos;</div><div class="line">    joblib.dump(modelnew, &apos;bayes.pkl&apos;)</div><div class="line">    joblib.dump(transformer, &apos;transformer&apos;)</div><div class="line">    joblib.dump(vectorizer, &apos;vectorizer&apos;)</div><div class="line">    </div><div class="line">def testmodel(testString):</div><div class="line">    </div><div class="line">    isadver = False       </div><div class="line">    </div><div class="line">    testList = [testString]</div><div class="line">    negtestcorpus = map(changeToWords,testList)</div><div class="line">    </div><div class="line">    foruse = negtestcorpus[0].split(&apos; &apos;)</div><div class="line">    </div><div class="line">    nums = re.findall(r&apos;\d+&apos;, testString)</div><div class="line">    numstring = &apos;&apos;.join(nums)</div><div class="line">    count = len(numstring)</div><div class="line">    </div><div class="line">    forteststring = translate(testString) + &apos;&apos;.join(negtestcorpus)</div><div class="line">    </div><div class="line">    abList = [u&apos;å¾®å·&apos;,u&apos;QQ&apos;,u&apos;qq&apos;,u&apos;å¾®æˆ‘&apos;,u&apos;å¾®ä¿¡&apos;,u&apos;åŠ å¾®&apos;,u&apos;å«æ˜Ÿ&apos;,u&apos;*ä¿¡&apos;,u&apos;ç»´æ–°&apos;,u&apos;ä¼é¹…&apos;,u&apos;åŠ æ‰£&apos;]</div><div class="line">    if count &gt;= 2:</div><div class="line">        for item in abList:</div><div class="line">            if item in forteststring:</div><div class="line">                isadver = True</div><div class="line">    </div><div class="line">    if (&apos;http&apos; in testString and &apos;jd&apos; not in testString) or (&apos;www&apos; in testString and &apos;jd&apos; not in testString) or ((&apos;com&apos; in testString and &apos;jd&apos; not in testString)):</div><div class="line">        isadver = True</div><div class="line">    </div><div class="line">    if isadver == True:</div><div class="line">        return isadver </div><div class="line">    </div><div class="line">    model = joblib.load(&apos;bayes.pkl&apos;)</div><div class="line">    vectorizer = joblib.load(&apos;vectorizer&apos;)</div><div class="line">    transformer = joblib.load(&apos;transformer&apos;)</div><div class="line">    </div><div class="line">    counts_train = vectorizer.transform(negtestcorpus)</div><div class="line">    testtfidf = transformer.transform(counts_train)</div><div class="line">    </div><div class="line">    result = model.predict(testtfidf.toarray())</div><div class="line">    </div><div class="line">    if result[0] == 0.0:</div><div class="line">        isadver = False</div><div class="line">    </div><div class="line">    if result[0] == 1.0:</div><div class="line">        isadver = True</div><div class="line">    </div><div class="line">    return isadver</div><div class="line"></div><div class="line">def tagalldata():</div><div class="line">    </div><div class="line">    negtest = pd.read_excel(&apos;notadver.xls&apos;)</div><div class="line">    print negtest.info()</div><div class="line">    negtest = negtest.dropna()</div><div class="line">    negtestcontents = negtest[&apos;content&apos;]</div><div class="line">    </div><div class="line">    df1 = map(testmodel,negtestcontents)</div><div class="line">    negtest[&apos;isadnew&apos;] = df1</div><div class="line">    </div><div class="line">    f = open(&apos;outputpos.txt&apos;,&apos;w&apos;)</div><div class="line">    for item in negtest[negtest[&apos;isadnew&apos;] == True][&apos;content&apos;]:</div><div class="line">        f.write(item + &apos;\n&apos;)</div><div class="line">    f.close()</div><div class="line">    print &apos;done&apos;</div><div class="line"></div><div class="line">def getsimiliar(testString):</div><div class="line">    vecdic = pd.read_csv(&apos;vecdict.csv&apos;)</div><div class="line">    namelist = list(vecdic[&apos;name&apos;])</div><div class="line">    weightlist = list(vecdic[&apos;weight&apos;])</div><div class="line">    contentlist = list(vecdic[&apos;content&apos;])</div><div class="line">    adverlist = list(vecdic[&apos;isadver&apos;])</div><div class="line"></div><div class="line">    weightlistnew = []</div><div class="line">    for item in weightlist:</div><div class="line">        itemlist = item.split(&apos;/&apos;)</div><div class="line">        outlist = []</div><div class="line">        for i in itemlist:</div><div class="line">            outlist.append(float(i))</div><div class="line">        weightlistnew.append(outlist)</div><div class="line">    </div><div class="line">    testList = [testString]</div><div class="line">    </div><div class="line">    negtestcorpus = map(changeToWords,testList)</div><div class="line">    </div><div class="line">    model = joblib.load(&apos;bayes.pkl&apos;)</div><div class="line">    transformer = joblib.load(&apos;transformer&apos;)</div><div class="line">    vectorizer = joblib.load(&apos;vectorizer&apos;)</div><div class="line">    </div><div class="line">    names = vectorizer.get_feature_names()</div><div class="line">    </div><div class="line">    counts_train = vectorizer.transform(negtestcorpus)</div><div class="line">    testtfidf = transformer.transform(counts_train)</div><div class="line">    </div><div class="line">    sentence = testtfidf.toarray()[0]</div><div class="line">    for item in weightlist:</div><div class="line">        itemlist = item.split(&apos;/&apos;)</div><div class="line">        outlist = []</div><div class="line">        for i in itemlist:</div><div class="line">            outlist.append(float(i))</div><div class="line">        similar = cos_sim(sentence,outlist)</div><div class="line">        if similar &gt; 0.65:</div><div class="line">            print contentlist[weightlist.index(item)],&apos;+++++++&apos;,namelist[weightlist.index(item)],&apos;------&apos;,adverlist[weightlist.index(item)]</div><div class="line">    </div><div class="line">def testsentence(inputString):</div><div class="line">    global contentlist</div><div class="line">    time1 = time.time()</div><div class="line">    print testmodel(inputString)</div><div class="line">    print time.time() - time1</div><div class="line">    getsimiliar(inputString)</div><div class="line">    print time.time() - time1</div><div class="line">    </div><div class="line">    </div><div class="line"># print testmodel(u&apos;äº¬ä¸œï¼Œç™½ï¼Œæ¡å¥½å•Šï¼Œç™½ï¼Œæ¡ï¼Œå¯ï¼Œä»¥ï¼Œå”¤ï¼Œçº¿ï¼Œé‡‘ã€‚ç§’ï¼Œåˆ°æ‰‹ã€‚ æœ‰æ— ï¼Œé—ªï¼Œä»˜éƒ½ä¸€æ ·ï¼Œç§’ï¼Œåˆ°ã€‚è¿˜å¯ä»¥ä»»ï¼Œæ€§ï¼Œç¦ï¼ŒèŠ±ï¼ŒæŠŠã€‚ä»»ï¼Œæ€§ï¼Œå¸¦ã€‚å«ï¼Œæ˜Ÿï¼ˆq29206ï¼‰&apos;)</div><div class="line"># tagalldata()</div><div class="line">print &apos;******&apos;</div><div class="line">time1 = time.time()</div><div class="line"># trainmodel()</div><div class="line"># tagalldata()</div><div class="line">testsentence(u&apos;æˆ‘ä¸ç›¸ä¿¡weixinasdfasdf&apos;)</div><div class="line"># print getwordcount(u&apos;å¼€æˆ·&apos;)</div><div class="line"># changeToWords(u&apos;æƒ³è·å¾—ç™½æ¡è”ç³»æˆ‘qw6727444&apos;)</div><div class="line">print time.time() - time1</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> sklearn </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSé¢è¯•é¢˜æ€»ç»“]]></title>
      <url>/2018/03/17/2015/iOS%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<p>è½¬ç‚¹é¢è¯•é¢˜<br><a id="more"></a></p>
<h3 id="ä¸­å°å‹å…¬å¸"><a href="#ä¸­å°å‹å…¬å¸" class="headerlink" title="ä¸­å°å‹å…¬å¸"></a>ä¸­å°å‹å…¬å¸</h3><p>è°ˆä¸‹iOSå¼€å‘ä¸­çŸ¥é“çš„å“ªäº›é”? å“ªä¸ªæ€§èƒ½æœ€å·®?SDå’ŒAFNä½¿ç”¨çš„å“ªä¸ª? ä¸€èˆ¬å¼€å‘ä¸­ä½ æœ€å¸¸ç”¨å“ªä¸ª? å“ªä¸ªé”appleå­˜åœ¨é—®é¢˜åˆæ˜¯ä»€ä¹ˆé—®é¢˜?</p>
<p>iOSä¸‹å¦‚ä½•å®ç°æŒ‡å®šçº¿ç¨‹æ•°ç›®çš„çº¿ç¨‹æ± ?</p>
<p>å¦‚ä½•ç”¨HTTPå®ç°é•¿è¿æ¥ï¼Ÿ</p>
<p>httpçš„postå’Œgetå•¥åŒºåˆ«</p>
<p>ä½¿ç”¨atomicä¸€å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</p>
<p>æ•°æ®åº“å»ºè¡¨çš„æ—¶å€™ç´¢å¼•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</p>
<p>ä»‹ç»ä¸‹iOSè®¾å¤‡è·å–å”¯ä¸€è®¾å¤‡å·çš„å†å²å˜è¿</p>
<p>å¦‚ä½•ä½¿ç”¨runtime hookä¸€ä¸ªclassçš„æŸä¸ªæ–¹æ³•ï¼Œåˆå¦‚ä½•hookæŸä¸ªinstanceçš„æ–¹æ³•ï¼Ÿ</p>
<p>èŠä¸‹HTTPçš„POSTçš„bodyä½“ä½¿ç”¨form-urlencodedå’Œmultipart/form-dataçš„åŒºåˆ«ã€‚</p>
<p>é€šè¿‡[UIImage imageNamed:]ç”Ÿæˆçš„å¯¹è±¡ä»€ä¹ˆæ—¶å€™è¢«é‡Šæ”¾ï¼Ÿ</p>
<p>applicationWillEnterForegroundå’ŒapplicationDidBecomeActiveéƒ½ä¼šåœ¨å“ªäº›åœºæ™¯ä¸‹è¢«è°ƒç”¨ï¼Ÿä¸¾ä¾‹è¶Šå¤šè¶Šå¥½ã€‚</p>
<p>å¦‚ä½•ç»ˆæ­¢æ­£åœ¨è¿è¡Œçš„å·¥ä½œçº¿ç¨‹ï¼Ÿ</p>
<p>iOSä¸‹æ‰€æœ‰çš„æœ¬åœ°æŒä¹…åŒ–æ–¹æ¡ˆã€‚</p>
<p>weakä¿®é¥°çš„é‡Šæ”¾åˆ™è‡ªåŠ¨è¢«ç½®ä¸ºnilçš„å®ç°åŸç†</p>
<p>HTTPSçš„åŠ å¯†åŸç†</p>
<p>ç½‘ç»œé€šè®¯ä¸­åŠ å¯†æ–¹å¼æœ‰å“ªäº›ï¼Œå„è‡ªçš„åŸç†?</p>
<p>è°ˆä¸‹å¼€å‘ä¸­iOSç¼“å­˜çš„ç†è§£</p>
<p>ä½ è®¤ä¸ºå¼€å‘ä¸­é‚£äº›å¯¼è‡´crash?</p>
<p>åˆ†æä¸‹SDWebImage (q3:å†…éƒ¨åšDecoderçš„åŸå›  (å…¸å‹çš„ç©ºé—´æ¢æ—¶é—´))</p>
<p>crashçš„æ”¶é›†å’Œå®šä½bugçš„æ–¹å¼è°ˆä¸‹</p>
<p>SELå’ŒMethodå’ŒIMPåˆ†åˆ«è¯´ä¸‹å†è°ˆä¸‹å¯¹IMPçš„ç†è§£?</p>
<p>Autoreleaseçš„åŸç† ?</p>
<p>ARCçš„å·¥ä½œåŸç†</p>
<p>weakå¼±å¼•ç”¨çš„ä»£ç é€»è¾‘å®ç°?</p>
<p>å¤§æ–‡ä»¶ç¦»çº¿ä¸‹è½½æ€ä¹ˆå¤„ç†?ä¼šé‡åˆ°å“ªäº›é—®é¢˜?åˆå¦‚ä½•è§£å†³</p>
<p>Socketå»ºç«‹ç½‘ç»œè¿æ¥çš„æ­¥éª¤</p>
<p>ç”¨æˆ·éœ€è¦ä¸Šä¼ å’Œä¸‹è½½ä¸€ä¸ªé‡è¦çš„èµ„æ–™æ–‡ä»¶ï¼Œåº”è¯¥å¦‚ä½•åˆ¤æ–­ç”¨æˆ·æœ¬æ¬¡æ˜¯å¦ä¸Šä¼ æˆåŠŸå’Œä¸‹è½½æˆåŠŸäº†?</p>
<p>ReactiveCocoa(RAC)å¦‚ä½•é˜²æ­¢UIButtonçŸ­æ—¶é—´å†…å¤šæ¬¡é‡å¤ç‚¹å‡»ï¼Œå¤§æ¦‚æ€è·¯?</p>
<p>å€’è®¡æ—¶å¦‚ä½•å®ç° ï¼Ÿ</p>
<p>ç†Ÿæ‚‰ CocoaPods ä¹ˆï¼Ÿèƒ½å¤§æ¦‚è®²ä¸€ä¸‹å·¥ä½œåŸç†ä¹ˆï¼Ÿ</p>
<p>ä½¿ç”¨SDWebImageå†…å­˜çˆ†æ¶¨çš„é—®é¢˜é‡åˆ°æ²¡,æ€ä¹ˆè§£å†³</p>
<p>isaæŒ‡é’ˆçš„ä½œç”¨</p>
<p>æµ‹è¯•éƒ½æœ‰å“ªäº›æ–¹å¼?ä¼˜ç¼ºç‚¹å‘¢</p>
<p>é¡¹ç›®ä¸­ä½ æ˜¯æ€ä¹ˆå¤„ç†ç½‘ç»œé€Ÿåº¦æ…¢ã€ä¸­æ–­æŠ–åŠ¨ç­‰ç½‘ç»œè¯·æ±‚ä¸­çš„é—®é¢˜?</p>
<p>å¯¹æ•°ç»„ä¸­çš„å…ƒç´ å»é‡å¤ (å››ç§)</p>
<p>è¯·ç®€å•å†™å‡ºå¢ã€åˆ ã€æ”¹ã€æŸ¥çš„SQLè¯­å¥</p>
<p>ä¸ NSURLConnection ç›¸æ¯”ï¼ŒNSURLsession æ”¹è¿›å“ªäº›?</p>
<p>ä½¿ç”¨drawRectæœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</p>
<p>ä»€ä¹ˆæ—¶å€™ä¼šæŠ¥unrecognized selectorçš„å¼‚å¸¸ï¼Ÿå¦‚ä½•é¿å…?</p>
<p>ç•Œé¢å¤šä¸ªç½‘ç»œè¯·æ±‚,å¦‚ä½•å¤„ç†åˆ·æ–°çš„?</p>
<p>å¦‚æœtableViewç•Œé¢ç½‘ç»œè¯·æ±‚æœ‰ç¼“å­˜æ•°æ®é€»è¾‘?</p>
<p>initæ–¹æ³•ç§æœ‰åŒ–?</p>
<p>çº¿ç¨‹ä¸­æ ˆä¸å †æ˜¯å…¬æœ‰çš„è¿˜æ˜¯ç§æœ‰çš„ ?</p>
<p>é¡¹ç›®ä¸­çš„å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½å¦‚ä½•å®ç°ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨é˜Ÿåˆ—ä¸Šä¼ ï¼Œä¸ºä»€ä¹ˆä¸ç”¨å¼‚æ­¥ä¸Šä¼ ?</p>
<h3 id="å»å“ªå„¿ç½‘ä¸€é¢"><a href="#å»å“ªå„¿ç½‘ä¸€é¢" class="headerlink" title="å»å“ªå„¿ç½‘ä¸€é¢"></a>å»å“ªå„¿ç½‘ä¸€é¢</h3><p>è‡ªæˆ‘ä»‹ç»</p>
<p>atomic å’Œ nonatomic çš„åŒºåˆ«</p>
<p>æ‰‹å†™@property (nonatomic, strong, readonly) NSString *context çš„get æ–¹æ³•ã€‚å‰ææ˜¯çº¿ç¨‹å®‰å…¨ï¼Œlazy loadçš„æ–¹å¼</p>
<p>@property (atomic, strong) NSString *str; å¦‚æœé‡å†™äº†strçš„setæ–¹æ³•ï¼Œé‚£atomicè¿˜æœ‰æ•ˆå—ï¼Ÿ</p>
<p>å†™ä¸€ä¸ªmethod èƒ½æ»¡è¶³è¾“å…¥[6, 5, 4, 3, 2, 1]æ•°ç»„ è¾“å‡º [1, 2, 3, 4, 5, 6]æ•°ç»„</p>
<p>http socketçš„åŒºåˆ«ï¼Œhttpæ˜¯åœ¨ç½‘ç»œé‡Œé¢çš„é‚£ä¸€å±‚ã€‚è¿™é‡Œè€ƒçš„æ˜¯ç½‘ç»œä¼ è¾“çš„é‚£7å±‚ã€‚å¦‚ä½•çŸ¥é“æ¶ˆæ¯ä½“çš„æ•°æ®å·²ç»å‘é€å®Œæˆäº†ã€‚tcp udpçš„ç†è§£ã€‚</p>
<p>ä¸€ä¸ªæ–°çš„appçš„è®¾è®¡æ€è·¯ï¼Œä¸»è¦çœ‹æ¶æ„æ–¹é¢çš„æƒ³æ³•</p>
<p>å¤šä¸ªç™»å½•æ–¹å¼ï¼Œæ¯”å¦‚qqï¼Œ å¾®ä¿¡ï¼Œå¾®åšï¼Œæ‰‹æœºå·ï¼Œé‚®ç®±ç­‰çš„ç™»å½•ï¼Œå¦‚æœçœŸå¯¹å˜åŒ–è¿›è¡Œå°è£…ã€‚è¿™é‡Œè€ƒè™‘çš„æ›´å¤šçš„æ˜¯è®¾è®¡æ¨¡å¼ä¸Šçš„é—®é¢˜ã€‚</p>
<p>äº‹ä»¶å“åº”é“¾ï¼ˆæ¯”å¦‚ç‚¹å‡»äº‹ä»¶ï¼‰</p>
<p>GCDä¸­groupçš„ä¼˜ç‚¹ï¼ŒåŠä¸²è¡Œï¼Œå¹¶è¡Œé˜Ÿåˆ—</p>
<p><a href="https://www.cnblogs.com/bboymars/p/4980754.html" target="_blank" rel="external">frameworkæ—¶åŠ¨æ€é“¾æ¥åº“è¿˜æ˜¯é™æ€é“¾æ¥åº“ï¼Œå’Œ.açš„åŒºåˆ«æ˜¯ä»€ä¹ˆ</a></p>
<p>å°†å¯¹è±¡åŠ å…¥å­—å…¸ï¼Œarrayæ—¶çš„å¼•ç”¨è®¡æ•°æ˜¯å¤šå°‘</p>
<p>weakçš„å®ç°åŸç† strongçš„å®ç°åŸç†</p>
<p>å…³äºå¼•ç”¨è®¡æ•°çš„çŸ¥è¯†ç‚¹</p>
<p>æ‰‹å†™ä¸€ä¸ªsetæ–¹æ³•</p>
<p>blockä¸­çš„å¼±å¼•ç”¨å¼ºå¼•ç”¨ï¼Œä»€ä¹ˆæƒ…å†µä¼šå¯¼è‡´å¾ªç¯å¼•ç”¨ï¼Œä»€ä¹ˆæ—¶å€™éœ€è¦__strongä¿æŒå¼ºå¼•ç”¨</p>
<p>appçš„æ€§èƒ½ä¼˜åŒ–ï¼Œéƒ½æœ‰å“ªäº›</p>
<p>å¯¹äºimageåŠ è½½çš„ä¼˜åŒ–æ–¹æ¡ˆæœ‰å“ªäº›</p>
<p>Runloop, runtimeçš„ç†è§£</p>
<h3 id="é˜¿é‡Œä¸€é¢"><a href="#é˜¿é‡Œä¸€é¢" class="headerlink" title="é˜¿é‡Œä¸€é¢"></a>é˜¿é‡Œä¸€é¢</h3><p>ç¬¬ä¸€ç»„(p5)<br>Androidçš„activity</p>
<p>Categoryæ”¯æŒæ·»åŠ å±æ€§ä¸æˆå‘˜å˜é‡å—</p>
<p>æ˜¯å¦äº†è§£è®¾è®¡æ¨¡å¼, ç”¨è¿‡å“ªäº›</p>
<p>iOS7ä¹‹å, è“ç‰™çš„å›´æ åŠŸèƒ½</p>
<p>MVCæ˜¯å¦äº†è§£?ä»‹ç»ä¸‹ä½¿ç”¨æƒ…å†µã€‚</p>
<p>MVCé‡Œé¢, Viewæ€ä¹ˆé€šçŸ¥åˆ°Model</p>
<p>äº†è§£delegateå—?å¹¶ä»‹ç»</p>
<p>è¯´è¯´Cellé‡ç”¨åŸç†</p>
<p>å¼‚æ­¥ä¸‹è½½å¦‚ä½•å®ç°</p>
<p>åšè¿‡æœ€å¤§çš„é¡¹ç›®æ˜¯ä»€ä¹ˆ?ä¸»è¦éš¾ç‚¹åœ¨å“ªé‡Œ</p>
<p>å¦‚æœç°åœ¨è¦å®ç°ä¸€ä¸ªä¸‹è½½åŠŸèƒ½, ä½ è¦å¦‚ä½•è®¾è®¡ã€‚è¯´è¯´æ¯ä¸ªç±»å…·ä½“åšä»€ä¹ˆ</p>
<p>å­¦è¿‡å“ªäº›è¯­è¨€</p>
<p>C++é‡Œé¢è™šå‡½æ•°ä½œç”¨</p>
<p>å¯¹o2oæœ‰ä»€ä¹ˆçœ‹æ³•(ä»–æ˜¯o2oéƒ¨é—¨çš„)</p>
<p>æœ‰æ²¡æœ‰ä»€ä¹ˆæƒ³é—®çš„</p>
<h3 id="ç¬¬äºŒç»„-p5"><a href="#ç¬¬äºŒç»„-p5" class="headerlink" title="ç¬¬äºŒç»„(p5)"></a>ç¬¬äºŒç»„(p5)</h3><p>MVCå…·æœ‰ä»€ä¹ˆæ ·çš„ä¼˜åŠ¿ï¼Œå„ä¸ªæ¨¡å—ä¹‹é—´æ€ä¹ˆé€šä¿¡ï¼Œæ¯”å¦‚ç‚¹å‡» Button å æ€ä¹ˆé€šçŸ¥ Modelï¼Ÿ</p>
<p>ä¸¤ä¸ªæ— é™é•¿åº¦é“¾è¡¨ï¼ˆä¹Ÿå°±æ˜¯å¯èƒ½æœ‰ç¯ï¼‰ åˆ¤æ–­æœ‰æ²¡æœ‰äº¤ç‚¹</p>
<p>UITableViewçš„ç›¸å…³ä¼˜åŒ–</p>
<p>KVOã€Notificationã€delegateå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œæ•ˆç‡è¿˜æœ‰ä½¿ç”¨åœºæ™¯</p>
<p>å¦‚ä½•æ‰‹åŠ¨é€šçŸ¥KVO</p>
<p>Objective-C ä¸­çš„copyæ–¹æ³•</p>
<p>runtime ä¸­ï¼ŒSELå’ŒIMPçš„åŒºåˆ«</p>
<p>autoreleasepoolçš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†</p>
<p>RunLoopçš„å®ç°åŸç†å’Œæ•°æ®ç»“æ„ï¼Œä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°</p>
<p>blockä¸ºä»€ä¹ˆä¼šæœ‰å¾ªç¯å¼•ç”¨</p>
<p>ä½¿ç”¨GCDå¦‚ä½•å®ç°è¿™ä¸ªéœ€æ±‚ï¼šAã€Bã€C ä¸‰ä¸ªä»»åŠ¡å¹¶å‘ï¼Œå®Œæˆåæ‰§è¡Œä»»åŠ¡ Dã€‚</p>
<p>NSOperationå’ŒGCDçš„åŒºåˆ«</p>
<p>CoreDataçš„ä½¿ç”¨ï¼Œå¦‚ä½•å¤„ç†å¤šçº¿ç¨‹é—®é¢˜</p>
<p>å¦‚ä½•è®¾è®¡å›¾ç‰‡ç¼“å­˜ï¼Ÿ</p>
<p>æœ‰æ²¡æœ‰è‡ªå·±è®¾è®¡è¿‡ç½‘ç»œæ§ä»¶ï¼Ÿ</p>
<h3 id="ç¬¬ä¸‰ç»„-p6"><a href="#ç¬¬ä¸‰ç»„-p6" class="headerlink" title="ç¬¬ä¸‰ç»„(p6)"></a>ç¬¬ä¸‰ç»„(p6)</h3><p>ä»‹ç»ä¸‹å†…å­˜çš„å‡ å¤§åŒºåŸŸï¼Ÿ</p>
<p>ä½ æ˜¯å¦‚ä½•ç»„ä»¶åŒ–è§£è€¦çš„ï¼Ÿ</p>
<p>runtimeå¦‚ä½•é€šè¿‡selectoræ‰¾åˆ°å¯¹åº”çš„IMPåœ°å€</p>
<p>runloopå†…éƒ¨å®ç°é€»è¾‘ï¼Ÿ</p>
<p>ä½ ç†è§£çš„å¤šçº¿ç¨‹ï¼Ÿ</p>
<p>GCDæ‰§è¡ŒåŸç†ï¼Ÿ</p>
<p>æ€ä¹ˆé˜²æ­¢åˆ«äººåç¼–è¯‘ä½ çš„appï¼Ÿ</p>
<p>YYAsyncLayerå¦‚ä½•å¼‚æ­¥ç»˜åˆ¶ï¼Ÿ</p>
<p>ä¼˜åŒ–ä½ æ˜¯ä»å“ªå‡ æ–¹é¢ç€æ‰‹ï¼Ÿ</p>
<h3 id="é˜¿é‡ŒäºŒé¢"><a href="#é˜¿é‡ŒäºŒé¢" class="headerlink" title="é˜¿é‡ŒäºŒé¢"></a>é˜¿é‡ŒäºŒé¢</h3><p>ç¬¬ä¸€ç»„(p5)<br>ä»€ä¹ˆæ—¶å€™æ¥è§¦iOS</p>
<p>ä½ çš„è¿™äº›é¡¹ç›®æ˜¯å¤–åŒ…è¿˜æ˜¯è‡ªå·±å¼€å‘çš„</p>
<p>OCå…è®¸å¤šç»§æ‰¿å—</p>
<p>è¦ç”¨ä»€ä¹ˆæ–¹å¼å®ç°å¤šç»§æ‰¿</p>
<p>äº†è§£å†…å­˜ç®¡ç†å—, å§å”§å§å”§â€¦</p>
<p>äº†è§£è®¾è®¡æ¨¡å¼å—</p>
<p>å…·ä½“è¯´è¯´MVC</p>
<p>äº†è§£KVOå—</p>
<p>å¦‚æœè®©ä½ è®¾è®¡KVO, è¦æ€ä¹ˆè®¾è®¡</p>
<p>ç°åœ¨ä½ æ˜¯å¦‚ä½•é€‚é…çš„</p>
<p>æ¯”è¾ƒä¸‹storyboardå’Œå…¨ä»£ç </p>
<p>å°è±¡æ¯”è¾ƒæ·±çš„é¡¹ç›®, éš¾ç‚¹åœ¨å“ª</p>
<p>Cellé‡ç”¨æœºåˆ¶å…·ä½“æ€ä¹ˆå®ç°</p>
<p>å¦‚æœæœ‰1wå¼ å›¾ç‰‡è¦åœ¨å±å¹•æ»šåŠ¨æ˜¾ç¤º(æ¯å¼ å›¾ç‰‡æ»¡å±), è‡³å°‘è¦å‡ ä¸ªcell, å¦‚ä½•å®ç°å¾ªç¯æ»šåŠ¨</p>
<p>å¹³æ—¶æ˜¯æ€ä¹ˆè¿›è¡Œæµ‹è¯•çš„, å†…å­˜æ–¹é¢æ€ä¹ˆæµ‹è¯•</p>
<p>å¹³æ—¶å¦‚ä½•å®ç°ç½‘ç»œè¯·æ±‚, ä¸€èˆ¬è¿”å›çš„æ•°æ®æ˜¯ä»€ä¹ˆæ ¼å¼, å¦‚ä½•è§£æ..</p>
<p>å¹³æ—¶è‡ªå·±æœ‰æ²¡æœ‰å°è£…è¿‡æ¯”è¾ƒå¤æ‚çš„æ§ä»¶</p>
<p>åœ¨ä»€ä¹ˆæƒ…å†µä½¿ç”¨Notification</p>
<p>å¦‚ä½•å®ç°ç±»ä¼¼ â€œFind My iPhoneâ€ è¿™æ ·åŠŸèƒ½</p>
<h3 id="ç¬¬äºŒç»„-p5-1"><a href="#ç¬¬äºŒç»„-p5-1" class="headerlink" title="ç¬¬äºŒç»„(p5)"></a>ç¬¬äºŒç»„(p5)</h3><p>æ€ä¹ˆåˆ¤æ–­æŸä¸ª cell æ˜¯å¦æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</p>
<p>è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</p>
<p>TCP ä¸ UDP åŒºåˆ«</p>
<p>TCP æµé‡æ§åˆ¶</p>
<p>æ•°ç»„å’Œé“¾è¡¨çš„åŒºåˆ«</p>
<p>UIView ç”Ÿå‘½å‘¨æœŸ</p>
<p>å¦‚æœé¡µé¢ A è·³è½¬åˆ° é¡µé¢ Bï¼ŒA çš„ viewDidDisappear æ–¹æ³•å’Œ B çš„ viewDidAppear æ–¹æ³•å“ªä¸ªå…ˆè°ƒç”¨ï¼Ÿ</p>
<p>block å¾ªç¯å¼•ç”¨é—®é¢˜</p>
<p>ARC çš„æœ¬è´¨</p>
<p>RunLoop çš„åŸºæœ¬æ¦‚å¿µï¼Œå®ƒæ˜¯æ€ä¹ˆä¼‘çœ çš„ï¼Ÿ</p>
<p>Autoreleasepool ä»€ä¹ˆæ—¶å€™é‡Šæ”¾ï¼Œåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨ï¼Ÿ</p>
<p>å¦‚ä½•æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªä¸é‡å¤çš„å­—ç¬¦</p>
<p>å“ˆå¸Œè¡¨å¦‚ä½•å¤„ç†å†²çª</p>
<p>ç¬¬ä¸‰ç»„(p6)<br>åœ¨ä¸€ä¸ªappä¸­é—´æœ‰ä¸€ä¸ªbuttonï¼Œåœ¨ä½ æ‰‹è§¦æ‘¸å±å¹•ç‚¹å‡»åï¼Œåˆ°è¿™ä¸ªbuttonæ”¶åˆ°ç‚¹å‡»äº‹ä»¶ï¼Œä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆ</p>
<p>ä»£ç æ–‡ä»¶ç¼–è¯‘ç”Ÿæˆè¿‡ç¨‹ï¼Œåšäº†å“ªäº›äº‹æƒ…ï¼›</p>
<p>appå¯åŠ¨åšäº†å“ªäº›äº‹æƒ…ï¼›</p>
<p>AFNåŸç†</p>
<p>è¯´è¯´ä½ é¡¹ç›®ä¸­å¸¸ç”¨åˆ°çš„è°ƒè¯•æŠ€å·§ï¼Ÿ</p>
<h3 id="é˜¿é‡Œä¸‰é¢"><a href="#é˜¿é‡Œä¸‰é¢" class="headerlink" title="é˜¿é‡Œä¸‰é¢"></a>é˜¿é‡Œä¸‰é¢</h3><p>ç¬¬ä¸€ç»„(p5)<br>dSYMä½ æ˜¯å¦‚ä½•åˆ†æçš„ï¼Ÿ</p>
<p>å¤šçº¿ç¨‹æœ‰å“ªå‡ ç§ï¼Ÿä½ æ›´å€¾å‘äºå“ªä¸€ç§ï¼Ÿ</p>
<p>å•ä¾‹å¼Šç«¯ï¼Ÿ</p>
<p>å¦‚ä½•æŠŠå¼‚æ­¥çº¿ç¨‹è½¬æ¢æˆåŒæ­¥ä»»åŠ¡è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Ÿ</p>
<p>ä»‹ç»ä¸‹Appå¯åŠ¨çš„å®Œæˆè¿‡ç¨‹ï¼Ÿ</p>
<p>æ¯”å¦‚Appå¯åŠ¨è¿‡æ…¢ï¼Œä½ å¯èƒ½æƒ³åˆ°çš„å› ç´ æœ‰å“ªäº›ï¼Ÿ</p>
<p>0x8badf00dè¡¨ç¤ºæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æ€ä¹ˆé˜²æ­¢åç¼–è¯‘ï¼Ÿ</p>
<p>è¯´è¯´ä½ é‡åˆ°åˆ°çš„æŠ€æœ¯éš¾ç‚¹ï¼Ÿ</p>
<p>è¯´è¯´ä½ äº†è§£çš„ç¬¬ä¸‰æ–¹åŸç†æˆ–åº•å±‚çŸ¥è¯†ï¼Ÿ</p>
<p>èš‚èšé‡‘æœ<br>åœ¨KVOä¸­ï¼Œä»–æ˜¯æ€ä¹ˆçŸ¥é“ç›‘å¬çš„å¯¹è±¡å‘ç”Ÿäº†å˜åŒ–ï¼Ÿ</p>
<p>å­—å…¸çš„å·¥ä½œåŸç† ï¼Ÿæ€100wä¸ªä¸­æ˜¯æ€ä¹ˆå¿«é€Ÿå»å–valueï¼Ÿ</p>
<p>ä¸€ä¸ªä¸Šçº¿çš„é¡¹ç›®ï¼ŒçŸ¥é“è¿™ä¸ªæ–¹æ³•å¯èƒ½ä¼šå‡ºé—®é¢˜ï¼Œåœ¨ä¸ç ´åæ”¹æ–¹æ³•å‰æä¸‹ï¼Œæ€ä¹ˆæï¼Ÿ</p>
<p>Blockå’Œå‡½æ•°æŒ‡é’ˆçš„åŒºåˆ«ï¼Ÿ</p>
<h3 id="æ”¯ä»˜å®"><a href="#æ”¯ä»˜å®" class="headerlink" title="æ”¯ä»˜å®"></a>æ”¯ä»˜å®</h3><p>iOSå¤šçº¿ç¨‹æœ‰å“ªäº›ï¼Ÿä»–ä»¬ä¹‹é—´å„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä¼˜åŠ£æ€§ï¼Ÿ</p>
<p>UIViewå’ŒNSObjectè¿™ä¸¤ä¸ªç±»ï¼Œæ‰€æœ‰é‡Œé¢çš„æ–¹æ³•å’ŒåŸç†éƒ½éœ€è¦äº†è§£ä¸€ä¸‹ã€‚</p>
<p>Runloopå’Œçº¿ç¨‹çš„å…³ç³»ï¼Ÿ</p>
<p>Runloopçš„ä½œç”¨ï¼ŸRunloopModeçš„åŸç†ï¼Ÿ</p>
<h3 id="é¥¿äº†ä¹ˆé¢è¯•é¢˜"><a href="#é¥¿äº†ä¹ˆé¢è¯•é¢˜" class="headerlink" title="é¥¿äº†ä¹ˆé¢è¯•é¢˜"></a>é¥¿äº†ä¹ˆé¢è¯•é¢˜</h3><p>automicä¸€å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„å—</p>
<p>iOSä¸­çš„æ¶ˆæ¯ä¼ é€’æ˜¯æ€ä¹ˆä¸€æ­¥ä¸€æ­¥å®ç°çš„</p>
<p>categoryå’Œextensionæœ‰ä»€ä¹ˆåŒºåˆ«</p>
<p>iOSä¸­çš„ç§æœ‰å±æ€§å¦‚ä½•è®¾ç½®</p>
<p>ä¸²è¡Œé˜Ÿåˆ—å’ŒåŒæ­¥é”ä¸¤è€…åœ¨ä¿æŠ¤çº¿ç¨‹å®‰å…¨ä¸Šçš„æ€§èƒ½å¯¹æ¯”</p>
<p>å¹¶è¡Œé˜Ÿåˆ—æ˜¯åŒæ—¶æ‰§è¡Œçš„å—</p>
<p>iOSä¸­æœ‰å“ªäº›é”ï¼Œä½ äº†è§£å¤šå°‘</p>
<p>iOSä¸­UIKitæ¡†æ¶çš„æ¶æ„</p>
<p>UIViewå’ŒCALayerä¹‹é—´çš„å…³ç³»</p>
<p>UIViewã€CoreAnimationå’ŒCoreGraphicsçš„å…³ç³»</p>
<p>åº”è¯¥çŸ¥é“SegmentFaultï¼Œè¿™ä¸ªåœ¨iOSä¸­æ˜¯ä»€ä¹ˆé”™è¯¯ï¼Œé‚£StackOverFlowå‘¢</p>
<p>GCDã€NSThreadã€NSOperationæ€§èƒ½ä¸Šæœ‰ä½•åŒºåˆ«</p>
<h3 id="ç½‘æ˜“ä¸€é¢"><a href="#ç½‘æ˜“ä¸€é¢" class="headerlink" title="ç½‘æ˜“ä¸€é¢"></a>ç½‘æ˜“ä¸€é¢</h3><p>ç¬¬ä¸€ç»„<br>è‡ªæˆ‘ä»‹ç»</p>
<p>å­¦ä¹ iOSåŠ¨æœº</p>
<p>å¯¹iOSçš„çœ‹æ³•</p>
<p>è°ˆé¡¹ç›®</p>
<p>æ€ä¹ˆçœ‹å¾…å®¡æ ¸è¢«æ‹’</p>
<p>æ€ä¹ˆå®ŒæˆåæœŸæ£€æµ‹, ä¼˜åŒ–</p>
<p>id ,NSObject, idåŒºåˆ«</p>
<p>äº†è§£iOSå†…å­˜ç®¡ç†å—</p>
<p>release å’Œ autorelease åŒºåˆ«</p>
<p>autorelease å’Œ @autoreleaseåŒºåˆ«</p>
<p>weakä»€ä¹ˆæ—¶å€™ç”¨</p>
<p>unsafe_unretained , weak, assign åŒºåˆ«</p>
<p>__blockä»€ä¹ˆæ—¶å€™ç”¨</p>
<p>åœ¨blocké‡Œé¢, å¯¹æ•°ç»„æ‰§è¡Œæ·»åŠ æ“ä½œ, è¿™ä¸ªæ•°ç»„éœ€è¦å£°æ˜æˆ __blockå—</p>
<p>åœ¨blocké‡Œé¢, å¯¹NSIntegerè¿›è¡Œä¿®æ”¹, è¿™ä¸ªNSIntegeræ˜¯å¦éœ€è¦å£°æ˜æˆ__blcok</p>
<p>äº†è§£å¾ªç¯å¼•ç”¨å—</p>
<p>NSThread, NSOperation, GCDåŒºåˆ«</p>
<p>å¦‚ä½•åœ¨å¼‚æ­¥ä¸‹è½½æ—¶å€™, å–æ¶ˆä¸‹è½½, ä¿è¯æµé‡ä¸æµªè´¹</p>
<p>äº†è§£runtimeå—</p>
<p>runtimeä»€ä¹ˆæ—¶å€™ç”¨</p>
<p>é€šçŸ¥å’ŒKVOåŒºåˆ«</p>
<p>æœ‰åºå’Œæ— åºsetå®ç°åŸç†åŒºåˆ«</p>
<p>æ·±åº¦éå†å’Œå¹¿åº¦éå†ä½¿ç”¨åœºæ™¯</p>
<p>ç®—æ³•é¢˜ * 2</p>
<p>å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼</p>
<p>å“ªäº›è®¾è®¡æ¨¡å¼å±äºè§‚å¯Ÿè€…æ¨¡å¼</p>
<p>æ€»ç»“ä¸‹åˆšæ‰é¢è¯•ä¸­å“ªäº›ä¸è¶³</p>
<p>è‡ªå·±æœ‰ä»€ä¹ˆä¼˜ç‚¹</p>
<p>æœ‰ä»€ä¹ˆæƒ³é—®çš„</p>
<p>ç¬¬äºŒç»„<br>ä½ ä¸€èˆ¬å­¦ä¹ iOSæ˜¯å¦‚ä½•å­¦ä¹ çš„ï¼Ÿ</p>
<p>appå†…å­˜ä½ æ˜¯å¦‚ä½•åˆ†æçš„ï¼Ÿ</p>
<p>ç”¨è¿‡ TableView å—ï¼Œå¹³æ—¶æ€ä¹ˆè§£å†³ TableView æ»‘åŠ¨å¡é¡¿é—®é¢˜çš„ï¼Ÿ</p>
<p>ç½‘ç»œæ¨¡å‹äº†è§£ä¹ˆï¼Ÿæœ‰å“ªå‡ ç§ï¼Ÿè¯´è¯´ä½ çš„çœ‹æ³•ï¼Ÿ</p>
<p>blockæœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>KVCæœºåˆ¶æ˜¯å¦‚ä½•é€šè¿‡keyæ‰¾åˆ°valueã€‚</p>
<p>è¯´è¯´ä½ æœ€ç†Ÿæ‚‰çš„ç¬¬ä¸‰æ–¹ï¼ŒçŸ¥æ™“å…¶åŸç†ä¹ˆï¼Ÿ</p>
<h3 id="ç½‘æ˜“äºŒé¢"><a href="#ç½‘æ˜“äºŒé¢" class="headerlink" title="ç½‘æ˜“äºŒé¢"></a>ç½‘æ˜“äºŒé¢</h3><p>ç¬¬ä¸€ç»„<br>å¦‚ä½•å®ç°ä¸€ä¸ªæ•°ç»„æ¯ä¸ªå…ƒç´ ä¾æ¬¡å‘å³ç§»åŠ¨kä½ã€‚(åå¤´çš„å¾€å‰é¢è¡¥) æ¯”å¦‚: [1, 2, 3, 4, 5] æŒªä¸¤ä½å˜æˆ[4, 5, 1, 2, 3]</p>
<p>å®ç°è¿è¿çœ‹ç®—æ³•</p>
<p>T9ç®—æ³•å¦‚ä½•å®ç°, å…¨æ‹¼ç®—æ³•</p>
]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[sklearnä¸­æ–‡æ–‡æœ¬åˆ†ç±»å®æˆ˜]]></title>
      <url>/2018/03/12/2018/sklearn%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E5%AE%9E%E6%88%98/</url>
      <content type="html"><![CDATA[<p>è®­ç»ƒæ­¥éª¤</p>
<ul>
<li>æ•°æ®é›†åˆ</li>
<li>æ–‡æœ¬åˆ†è¯</li>
<li>å»é™¤åœç”¨è¯ï¼Œä½é¢‘è¯</li>
<li>æŠ½å–ç‰¹å¾</li>
<li>è®¡ç®—ç‰¹å¾å‘é‡æƒå€¼</li>
<li>è®­ç»ƒåˆ†ç±»å™¨</li>
</ul>
<p>ä½¿ç”¨æ¨¡å‹æ­¥éª¤</p>
<ul>
<li>æ–‡æœ¬åˆ†è¯</li>
<li>å»é™¤åœç”¨è¯ï¼Œä½é¢‘è¯</li>
<li>è®¡ç®—ç‰¹å¾å‘é‡æƒå€¼</li>
<li>ä½¿ç”¨æ¨¡å‹è¿›è¡Œåˆ†ç±»</li>
</ul>
<a id="more"></a>
<h3 id="å»é™¤åœç”¨è¯å’Œä½é¢‘è¯"><a href="#å»é™¤åœç”¨è¯å’Œä½é¢‘è¯" class="headerlink" title="å»é™¤åœç”¨è¯å’Œä½é¢‘è¯"></a>å»é™¤åœç”¨è¯å’Œä½é¢‘è¯</h3><p>å› ä¸ºåœ¨è‡ªç„¶è¯­è¨€ä¸­æ¯ä¸ªè¯ä»£è¡¨ä¸€ä¸ªç‰¹å¾ï¼Œæ‰€ä»¥è‡ªç„¶è¯­è¨€æ³¨å®šäº†æ˜¯ä¸€ç§è¶…é«˜çº¬ç‰¹å¾çš„æœºå™¨å­¦ä¹ é—®é¢˜ï¼Œä½†æ˜¯åœ¨åˆ†ç±»é—®é¢˜ä¸­å¾ˆå¤šè¯æ˜¯ä¸å…·å¤‡åˆ†ç±»èƒ½åŠ›çš„ï¼Œæ¯”å¦‚ï¼Œå•Šï¼Œæˆ‘ç­‰ç­‰ï¼Œè¿™äº›æ˜¯è¦å»é™¤çš„åœç”¨è¯ï¼Œè¿™äº›è¯è¯­åœ¨ä¸åŒåœºæ™¯ä¸‹å¯ä»¥æ˜¯é€šç”¨çš„ã€‚å¦å¤–å°±æ˜¯è¦å»é™¤ä½é¢‘è¯ï¼Œå¦‚æœæŸäº›è¯åœ¨åœ¨æ•´ä¸ªè®­ç»ƒæ•°æ®é›†ä¸­åªå‡ºç°äº†ä¸€ä¸¤æ¬¡ï¼Œé‚£ä¹ˆè¿™æ ·çš„ç‰¹å¾å°†ä¼šå¯¼è‡´è¡¨ç¤ºå‘é‡å¤§é‡çš„0000å­˜åœ¨ï¼Œæ˜¯å¾’å¢åŠ è®¡ç®—æˆæœ¬è€Œä¸ä¼šå¯¹ç²¾å‡†åˆ†ç±»æœ‰ä»€ä¹ˆè´¡çŒ®ï¼Œæ‰€ä»¥æœ€å¥½çš„åŠæ³•å°±æ˜¯ç›´æ¥å¿½ç•¥è¿™äº›è¯ã€‚</p>
<p>å…·ä½“åœ¨sklearnä¸­æˆ‘ä»¬ç”¨åˆ°çš„æ˜¯<code>from sklearn.feature_extraction.text import CountVectorizer</code>è¿™ä¸ªç±»</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vectorizer = CountVectorizer(vocabulary=vocabularyDic,stop_words=[&apos;ä¸­å›½&apos;],token_pattern=u&apos;(?u)\w+&apos;,max_features=200)</div></pre></td></tr></table></figure>
<p>é‚£ä¹ˆæ˜¯ä¸æ˜¯ä½¿ç”¨stop_wordsè¿™ä¸ªå‚æ•°å‘¢ï¼Œè¿™ä¸ªè¦åŒºåˆ†ï¼Œå¦‚æœæ˜¯è‹±æ–‡æ–‡æœ¬åˆ†ç±»æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ä¸­æ–‡ä¸è¡Œï¼Œè¿™å°±æ˜¯å‘å•Šï¼Œæ‰€ä»¥ä¸­æ–‡å»é™¤åœç”¨è¯åªèƒ½é è‡ªå·±ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">def translate(comment):</div><div class="line">    testline = re.sub(u&quot;[\s+\.\!\/_,$%^*(+\&quot;\&apos;]+|[+â€”â€”ï¼ï¼Œï¼ã€‚ï¼Ÿã€~@#ï¿¥%â€¦â€¦&amp;*ï¼ˆï¼‰]+&quot;, &apos;&apos;, comment)</div><div class="line">    testline = testline.replace(chr(32),&apos;&apos;).replace(u&apos;ï¼&apos;, u&apos;&apos;).replace(u&apos;ï¼Œ&apos;, u&apos;&apos;).replace(u&apos;ã€‚&apos;, u&apos;&apos;).replace(u&apos;\n&apos;, u&apos;&apos;).replace(u&apos;\t&apos;, u&apos;&apos;).replace(</div><div class="line">        u&apos;?&apos;, u&apos;&apos;).replace(u&apos;ã€&apos;,&apos;&apos;).replace(u&apos;o&apos;,&apos;&apos;).replace(u&apos;O&apos;,&apos;&apos;).replace(u&apos;ä¸¶&apos;,&apos;&apos;).replace(u&apos;â€˜&apos;,&apos;&apos;).replace(&apos;:&apos;,&apos;&apos;).replace(u&apos;ï¼š&apos;,&apos;&apos;).replace(&apos;(&apos;,&apos;&apos;).replace(&apos;)&apos;,&apos;&apos;).replace(&apos;&#123;&apos;,&apos;&apos;).replace(&apos;&#125;&apos;,&apos;&apos;).replace(u&apos;ï¼Ÿ&apos;, u&apos;&apos;).replace(u&apos;-&apos;,&apos;&apos;).replace(u&apos;ä¸€&apos;,&apos;1&apos;).replace(u&apos;äºŒ&apos;,&apos;2&apos;).replace(u&apos;ä¸‰&apos;,&apos;3&apos;).replace(u&apos;å››&apos;,&apos;4&apos;).replace(u&apos;äº”&apos;,&apos;5&apos;).replace(u&apos;å…­&apos;,&apos;6&apos;).replace(u&apos;ä¸ƒ&apos;,&apos;7&apos;).replace(u&apos;å…«&apos;,&apos;8&apos;).replace(u&apos;ä¹&apos;,&apos;9&apos;).replace(u&apos;é›¶&apos;,&apos;0&apos;)</div><div class="line">    testline = testline.lower()</div><div class="line">    return testline</div><div class="line"></div><div class="line">def changeToWords(sentence):</div><div class="line">    global stopwords</div><div class="line">    out = translate(sentence)</div><div class="line">    jiebalistnew = []</div><div class="line">    jiebalist = jieba.lcut(out)</div><div class="line">    for item in jiebalist:</div><div class="line">        if item not in stopwords:#å»é™¤åœç”¨è¯</div><div class="line">            jiebalistnew = jiebalistnew + handlenum(item)</div><div class="line">    </div><div class="line">    if &apos;&apos; in jiebalistnew:</div><div class="line">        jiebalistnew.remove(&apos;&apos;) </div><div class="line">    if &apos; &apos; in jiebalistnew:</div><div class="line">        jiebalistnew.remove(&apos; &apos;)     </div><div class="line">    string = &apos; &apos;.join(jiebalistnew)</div><div class="line">#     return string,jiebalistnew</div><div class="line">    return string</div></pre></td></tr></table></figure>
<p>ä»”ç»†çœ‹translateä¸»è¦ä½œç”¨å°±æ˜¯å»é™¤ä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼ŒåŒæ—¶å¯¹å¤§å†™æ•°å­—è¿›è¡Œè½¬åŒ–ï¼Œè¿™ä¸ªä¸€ä¸ªå¹¿å‘Šè¯†åˆ«çš„é¢„å¤„ç†ï¼Œå› ä¸ºå¥½å¤šå¹¿å‘Šè¦ç•™ä¸‹æ¥å·ç ä»€ä¹ˆçš„ã€‚</p>
<h3 id="æŠ½å–ç‰¹å¾"><a href="#æŠ½å–ç‰¹å¾" class="headerlink" title="æŠ½å–ç‰¹å¾"></a>æŠ½å–ç‰¹å¾</h3><p>æŠ½å–ç‰¹å¾å‘¢ï¼Œä¸»è¦æ˜¯å½¢æˆä¸€ä¸ªè¯å…¸ï¼Œç„¶åæŠŠæ¯å¥è¯å¯¹åº”åˆ°è¯å…¸é‡Œçš„è¯ï¼Œå­˜åœ¨å°±æ˜¯1ï¼Œä¸å­˜åœ¨å°±æ˜¯0ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æŠŠæ¯å¥è¯è½¬æ¢æˆ10100001è¿™ç§å‘é‡ã€‚</p>
<h4 id="æˆ‘ä»¬åº”è¯¥è¾“å…¥ä»€ä¹ˆï¼Œè¾“å‡ºçš„åˆæ˜¯ä»€ä¹ˆ"><a href="#æˆ‘ä»¬åº”è¯¥è¾“å…¥ä»€ä¹ˆï¼Œè¾“å‡ºçš„åˆæ˜¯ä»€ä¹ˆ" class="headerlink" title="æˆ‘ä»¬åº”è¯¥è¾“å…¥ä»€ä¹ˆï¼Œè¾“å‡ºçš„åˆæ˜¯ä»€ä¹ˆ"></a>æˆ‘ä»¬åº”è¯¥è¾“å…¥ä»€ä¹ˆï¼Œè¾“å‡ºçš„åˆæ˜¯ä»€ä¹ˆ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> #è¯¥ç±»ä¼šç»Ÿè®¡æ¯ä¸ªè¯è¯­çš„tf-idfæƒå€¼</div><div class="line">transformer = TfidfTransformer()</div><div class="line">vectorizer = CountVectorizer(token_pattern=u&apos;(?u)\w+&apos;)</div><div class="line">#ç¬¬ä¸€ä¸ªfit_transformæ˜¯è®¡ç®—tf-idf ç¬¬äºŒä¸ªfit_transformæ˜¯å°†æ–‡æœ¬è½¬ä¸ºè¯é¢‘çŸ©é˜µ</div><div class="line">count0 = vectorizer.fit_transform(inputList)</div><div class="line">tfidf = transformer.fit_transform(count0)</div></pre></td></tr></table></figure>
<p>çœ‹ä¸€ä¸‹ä¸Šè¾¹çš„ä»£ç ï¼Œæˆ‘ä»¬çš„è¾“å…¥æ˜¯inputListï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡æ˜æ˜¾å°±æ˜¯æˆ‘ä»¬çš„ä¸€ä¸ªä¸ªçš„å¥å­äº†ï¼Œè¿™æ˜¯listç±»å‹ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå¥å­ï¼Œå¦‚æœæ˜¯è‹±æ–‡æ–‡æœ¬ï¼Œè¿™æ ·ç›´æ¥è¾“å…¥å°±å¥½äº†ï¼Œä½†æ˜¯ä¸­æ–‡è¦è¿›è¡Œä¸€ä¸ªè½¬æ¢ï¼Œå‚ç…§è‹±æ–‡çš„æ ·å¼ï¼Œç”¨ç©ºæ ¼åˆ†éš”å¼€ï¼Œæ‰€ä»¥è¾“å…¥æ˜¯ä¸‹è¾¹è¿™æ ·çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">inputList = [&apos;æˆ‘ çˆ± ä¸­å›½&apos;,&apos;æˆ‘ æ˜¯ ä¸­å›½äºº&apos;]</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºï¼š</p>
<p>ç‰¹å¾æå–ï¼Œè¾“å‡ºçš„å½“ç„¶æ˜¯ç‰¹å¾äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">transformer = TfidfTransformer()</div><div class="line">vectorizer = CountVectorizer(token_pattern=u&apos;(?u)\w+&apos;)</div><div class="line">count0 = vectorizer.fit_transform(pos)</div><div class="line">tran = transformer.fit_transform(count0)</div><div class="line"></div><div class="line"></div><div class="line">print vectorizer.vocabulary_ #è¿™ä¸ªå­—å…¸é‡Œè¾¹å­˜å‚¨äº†æˆ‘ä»¬çš„å…³é”®å­—ï¼Œä»¥å…³é”®è¯ä¸ºkeyï¼Œç„¶ååè¾¹çš„valueæ˜¯å®ƒåœ¨å‘é‡å­—å…¸é‡Œè¾¹çš„ä½ç½®ç´¢å¼•</div><div class="line">names = vectorizer.get_feature_names() #è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬çš„å‘é‡è¯å…¸äº†</div><div class="line">print count0.toarray() #è¿™ä¸ªæ˜¯å°†ä¸ºæœ¬è½¬æ¢ä¸ºäº†å‘é‡ï¼Œæ¯”å¦‚[0,2,1,2]2å‘¢ä»£è¡¨å‡ºç°äº†ä¸¤æ¬¡</div><div class="line"></div><div class="line"></div><div class="line">for item in names:</div><div class="line">    print item</div><div class="line">sumlist = list(count0.toarray().sum(axis=0))#è¿™é‡Œå‘¢æ˜¯å°†æ‰€æœ‰çš„è¯ä»¥åŠå‡ºç°çš„æ¬¡æ•°è¿›è¡Œäº†åŠ å’Œï¼Œçœ‹çœ‹æ¯ä¸ªè¯ä¸€å…±å‡ºç°äº†å¤šå°‘æ¬¡ï¼Œåè¾¹ä¸¤è¡Œä»£ç éƒ½æ˜¯ä¸ºäº†è¿™ä¸ªäº‹</div><div class="line"></div><div class="line">a1 = np.array([names,sumlist])</div><div class="line">a1 = np.transpose(a1)</div><div class="line">df = DataFrame(a1,columns=[&apos;name&apos;,&apos;count&apos;])</div></pre></td></tr></table></figure>
<h4 id="tokenæå–è§„åˆ™"><a href="#tokenæå–è§„åˆ™" class="headerlink" title="tokenæå–è§„åˆ™"></a>tokenæå–è§„åˆ™</h4><p>è¿™ä¸ªè¯´çš„æ˜¯<code>token_pattern</code>è¿™ä¸ªå‚æ•°ï¼Œå®ƒå†³å®šäº†æ¯ä¸ªå•ç‹¬çš„ç‰¹å¾æ˜¯å¦‚ä½•æå–çš„ï¼Œå¦‚æœä½ ä¸èµ‹å€¼ï¼Œè¿™ä¸ªåˆå§‹å€¼æ˜¯<code>&#39;(?u)\\b\\w\\w+\b&#39;</code>æ„æ€æ˜¯ï¼Œæå–å­—ç¬¦åŠ ç©ºæ ¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨ç©ºæ ¼æ¥åŒºåˆ†ï¼Œä½†æ˜¯è¿™ä¸ªæœ‰ä¸ªå‘ï¼Œé»˜è®¤æ˜¯æå–ä¸¤ä¸ªä»¥ä¸Šçš„å­—ç¬¦ï¼Œè¿™å°±æ„å‘³ç€å¦‚æœä½ çš„ä¸€äº›ç‰¹å¾åªæœ‰ä¸€ä¸ªå­—ç¬¦é‚£ä¹ˆè¿™ä¸ªç‰¹å¾å°±è¢«è‡ªåŠ¨å¿½ç•¥äº†ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»æœ‰äº†åœç”¨è¯å»é™¤æœºåˆ¶ï¼Œæ‰€ä»¥è¿™é‡Œå°½é‡åšä¸ªä¿®æ”¹ï¼Œ<code>token_pattern=u&#39;(?u)\w+&#39;</code>è¿™æ ·å†™å°±èƒ½å¤Ÿæå–ä¸€ä¸ªçš„ä¸­æ–‡äº†ï¼Œç½‘ä¸ŠåŸºæœ¬ä¸Šéƒ½åœ¨è¯´è‹±æ–‡å’‹æ•´ï¼Œéš¾é“å¤§å®¶åšçš„éƒ½æ˜¯è‹±æ–‡çš„æ–‡æœ¬åˆ†ç±»â€¦.ä¸­æ–‡çš„è¡¨ç¤ºå¿ƒç´¯â€¦</p>
<h4 id="æœ€å¤§ç‰¹å¾æ•°"><a href="#æœ€å¤§ç‰¹å¾æ•°" class="headerlink" title="æœ€å¤§ç‰¹å¾æ•°"></a>æœ€å¤§ç‰¹å¾æ•°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vectorizer = CountVectorizer(token_pattern=u&apos;(?u)\w+&apos;ï¼Œmax_features=200)</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªå€¼å¯ä»¥å’Œå»é™¤ä½é¢‘è¯æ˜¯å¼‚æ›²åŒå·¥ï¼Œå¦‚æœæˆ‘ä»¬ç»è¿‡åˆ†æå‘ç°ç‰¹å¾è¯æœ‰1000ä¸ªï¼Œç„¶åä½é¢‘æ˜¯300ï¼Œè¿™æ ·ç›´æ¥è®¾ç½®è¿™ä¸ªå€¼æ˜¯700å°±å¥½äº†ï¼Œå®ƒä¼šè‡ªåŠ¨é€‰å–æœ€é«˜é¢‘çš„700ä¸ªè¯ä½œä¸ºç‰¹å¾</p>
<h3 id="è®­ç»ƒæ¨¡å‹ä»¥åŠä½¿ç”¨æ¨¡å‹"><a href="#è®­ç»ƒæ¨¡å‹ä»¥åŠä½¿ç”¨æ¨¡å‹" class="headerlink" title="è®­ç»ƒæ¨¡å‹ä»¥åŠä½¿ç”¨æ¨¡å‹"></a>è®­ç»ƒæ¨¡å‹ä»¥åŠä½¿ç”¨æ¨¡å‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">pos = [u&apos;i&apos;,u&apos;ä¸­å›½/çˆ±ä½  ä¸­å›½&apos;,u&apos;ä¸­å›½)çˆ±è° asf i&apos;,u&apos;æˆ‘+çˆ±ä½ &apos;,u&apos;æˆ‘+çˆ±ä½ &apos;]</div><div class="line"># pos = [&apos;this is a dog&apos;,&apos;the dog is cute,oh lovely dog&apos;,&apos;my dauter is smiling&apos;]</div><div class="line"># pos = [&apos;i love you&apos;, &apos;i hate you&apos;, &apos;i&apos;]</div><div class="line">#è¯¥ç±»ä¼šç»Ÿè®¡æ¯ä¸ªè¯è¯­çš„tf-idfæƒå€¼</div><div class="line">transformer = TfidfTransformer()</div><div class="line">vectorizer = CountVectorizer(analyzer=&apos;word&apos;,token_pattern=u&apos;(?u)\w+&apos;)</div><div class="line"># u&apos;(?u)\\b\\w\\w+\\b&apos;</div><div class="line"># vectorizer = CountVectorizer()</div><div class="line">#ç¬¬ä¸€ä¸ªfit_transformæ˜¯è®¡ç®—tf-idf ç¬¬äºŒä¸ªfit_transformæ˜¯å°†æ–‡æœ¬è½¬ä¸ºè¯é¢‘çŸ©é˜µ</div><div class="line">count0 = vectorizer.fit_transform(pos)</div><div class="line">tran = transformer.fit_transform(count0)</div><div class="line"></div><div class="line">x = weight</div><div class="line">y = np.concatenate((np.zeros(len(poscorpus)), np.ones(len(negcorpus))))</div><div class="line">    </div><div class="line">x_train, x_test, y_train, y_test = train_test_split(x, y, test_size=0.3)</div><div class="line">    </div><div class="line">modelnew = MultinomialNB()</div><div class="line">modelnew.fit(x_train, y_train)</div><div class="line">scorenew = modelnew.score(x_test, y_test)</div><div class="line">print scorenew</div><div class="line">print &apos;donetest&apos;</div><div class="line"></div><div class="line"></div><div class="line">##å¿…é¡»è¦ä¿å­˜ä¸‰ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯è®­ç»ƒä¹‹åçš„æ¨¡å‹ï¼Œç„¶åæ˜¯</div><div class="line">joblib.dump(modelnew, &apos;bayes.pkl&apos;)</div><div class="line">joblib.dump(transformer, &apos;transformer&apos;)  # ä¿å­˜åˆ†ç±»å™¨</div><div class="line">joblib.dump(vectorizer, &apos;vectorizer&apos;)  # ä¿å­˜åˆ†ç±»å™¨</div><div class="line"></div><div class="line">print vectorizer.vocabulary_</div><div class="line">print count0.toarray()</div><div class="line"></div><div class="line">## è¿™é‡Œç”¨äºæ–°æ•°æ®çš„é¢„æµ‹ï¼Œæˆ‘ä»¬éœ€è¦è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œvecï¼Œtranè¿™ä¸‰ä¸ªä¸œè¥¿</div><div class="line">modelnew = joblib.load(&apos;bayes.pkl&apos;)</div><div class="line">transformer1 = joblib.load(&apos;transformer&apos;)</div><div class="line">vectorizer1 = joblib.load(&apos;vectorizer&apos;)</div><div class="line"></div><div class="line">CountVectorizer(vocabulary=vectorizer.vocabulary_,analyzer=&apos;word&apos;,token_pattern=u&apos;(?u)\w+&apos;) #æ³¨æ„è¿™ä¸ªä¼šå»é™¤ç‰¹æ®Šå­—ç¬¦</div><div class="line">count1 = vectorizer1.transform([u&apos;ä¸­å›½/çˆ±ä½  ä¸­å›½&apos;])</div><div class="line">tran1 = transformer1.transform(count1)</div></pre></td></tr></table></figure>
<p>æ³¨æ„è®­ç»ƒç”¨<code>fit_transform</code>ï¼Œè€Œä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬ç”¨çš„æ˜¯<code>transform</code></p>
<h3 id="æ¨¡å‹çš„æ”¹è¿›æ–¹æ³•"><a href="#æ¨¡å‹çš„æ”¹è¿›æ–¹æ³•" class="headerlink" title="æ¨¡å‹çš„æ”¹è¿›æ–¹æ³•"></a>æ¨¡å‹çš„æ”¹è¿›æ–¹æ³•</h3><blockquote>
<p>ä¾‹å¦‚å¯ä»¥è°ƒèŠ‚å¦‚ä¸‹ä¸€äº›å‚æ•°ï¼Œè§‚å¯Ÿå®ƒä»¬å¯¹åƒåœ¾é‚®ä»¶è¿‡æ»¤çš„å®é™…æ•ˆæœçš„å½±å“ï¼š</p>
</blockquote>
<ul>
<li><p>è®­ç»ƒæ•°æ®çš„å¤§å°</p>
</li>
<li><p>è¯å…¸çš„å¤§å°</p>
</li>
<li><p>ä¸åŒçš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼ŒåŒ…æ‹¬ GaussianNBï¼ŒBernoulliNBï¼ŒSVC</p>
</li>
<li><p>ä¸åŒçš„ SVM æ¨¡å‹å‚æ•°</p>
</li>
<li><p>åˆ é™¤æ— å…³ç´§è¦çš„è¯æ¥æ”¹è¿›è¯å…¸ ï¼ˆä¾‹å¦‚æ‰‹åŠ¨åˆ é™¤ï¼‰</p>
</li>
<li><p>é‡‡ç”¨å…¶ä»–ç‰¹å¾æ¨¡å‹ ï¼ˆå¯»æ‰¾ td-idfï¼‰</p>
</li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
            <tag> sklearn </tag>
            
            <tag> æ–‡æœ¬åˆ†ç±» </tag>
            
            <tag> è‡ªç„¶è¯­è¨€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ•°æ®ç§‘å­¦-pandas]]></title>
      <url>/2018/02/28/2018/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6-pandas/</url>
      <content type="html"><![CDATA[<h4 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">In [28]: s1 = Series([1, 2, 3, 4, 5])</div><div class="line"></div><div class="line">In [29]: s1</div><div class="line">Out[29]:</div><div class="line">0    1</div><div class="line">1    2</div><div class="line">2    3</div><div class="line">3    4</div><div class="line">4    5</div><div class="line">dtype: int64</div><div class="line"></div><div class="line">In [30]: s2 = Series([1, 2, 3, 4, 5], index=[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;])</div><div class="line"></div><div class="line">In [31]: s2</div><div class="line">Out[31]:</div><div class="line">a    1</div><div class="line">b    2</div><div class="line">c    3</div><div class="line">d    4</div><div class="line">e    5</div><div class="line">dtype: int64</div><div class="line"></div><div class="line">In [32]: s2.index.name = &apos;index&apos;</div><div class="line"></div><div class="line">In [33]: s2.index</div><div class="line">Out[33]: Index([&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;], dtype=&apos;object&apos;, name=&apos;index&apos;)</div></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="pandas"><a href="#pandas" class="headerlink" title="pandas"></a>pandas</h4><h5 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line">#æ–°å»ºæˆ–è€…è¯»å–æ•°æ®</div><div class="line"></div><div class="line">df1 = DataFrame(np.arange(9).reshape(3,3), colums=list(&apos;ABC&apos;), index = list(&apos;abc&apos;))</div><div class="line"></div><div class="line">df2 = pd.read_json(&quot;/Users/Hanxiaoyang/Titanic_data/Train.json&quot;) #è¯»</div><div class="line">df = pd.read_csv(&quot;/Users/Hanxiaoyang/Titanic_data/Train.csv&quot;) #è¯»</div><div class="line">import pandas as pd</div><div class="line"></div><div class="line"># JSON æ–‡ä»¶</div><div class="line">pd.read_json</div><div class="line"></div><div class="line"># HTML æ–‡ä»¶</div><div class="line">pd.read_html</div><div class="line"></div><div class="line"># æœ¬åœ°å‰ªåˆ‡æ¿</div><div class="line">pd.read_clipboard</div><div class="line"></div><div class="line"># MS Excel æ–‡ä»¶</div><div class="line">pd.read_excel</div><div class="line"></div><div class="line"># HDF5Format æ–‡ä»¶</div><div class="line">pd.read_hdf    </div><div class="line"></div><div class="line"># Feather æ ¼å¼</div><div class="line">pd.read_feather</div><div class="line"></div><div class="line">#Msgpack</div><div class="line">pd.read_msgpack</div><div class="line"></div><div class="line"># Stata</div><div class="line">pd.read_stata</div><div class="line"></div><div class="line"># SAS</div><div class="line">pd.read_sas     </div><div class="line"></div><div class="line"># Python Pickle æ ¼å¼</div><div class="line">pd.read_pickle</div><div class="line"></div><div class="line"># SQL æ•°æ®åº“</div><div class="line">pd.read_sql</div><div class="line"></div><div class="line"># Google Big Query</div><div class="line">pd.read_gbq</div><div class="line"></div><div class="line">## æ•°æ®æŸ¥çœ‹</div><div class="line">df.info()</div><div class="line">df.describe()</div><div class="line">df.head(10)</div><div class="line">df.info()</div><div class="line">df.describe()</div><div class="line">df.index</div><div class="line">df.columns</div><div class="line">len(df[df[&apos;Age&apos;] == 10].index)age=10çš„æ˜¯å¤šå°‘è¡Œ</div><div class="line"></div><div class="line"># å–æ•°æ®</div><div class="line">df[0:3] #ç¬¬ä¸€è¡Œåˆ°ç¬¬ä¸‰è¡Œ</div><div class="line">df[&apos;Age&apos;][0:10] #pandas.core.series.Series Ageè¿™ä¸ªåˆ—çš„ç¬¬ä¸€è¡Œåˆ°ç¬¬åè¡Œ </div><div class="line">df.Age[0:10] #Ageè¿™ä¸€åˆ—çš„å‰åä¸ª</div><div class="line">df[&apos;Age&apos;].mean() #å¹³å‡å€¼</div><div class="line">df[[&apos;Sex&apos;,&apos;Pclass&apos;,&apos;Age&apos;]] #æ˜¾ç¤ºå¤šä¸ªåˆ—</div><div class="line">df[df.columns[0:2]] #æ˜¾ç¤ºå¤šåˆ—</div><div class="line">df[df[&apos;Age&apos;]&gt;60][[&apos;Sex&apos;,&apos;Pclass&apos;,&apos;Age&apos;,&apos;Survived&apos;]] #å¤§äº60å²çš„</div><div class="line">df[df[&apos;Age&apos;].isnull()][[&apos;Sex&apos;, &apos;Pclass&apos;, &apos;Age&apos;]]#ä¸ºç©ºçš„</div><div class="line"></div><div class="line">df[&apos;Gender&apos;] = 4 #å¢åŠ ä¸€åˆ—</div><div class="line">df[&apos;Gender&apos;] = df[&apos;Sex&apos;].map( &#123;&apos;female&apos;: 0, &apos;male&apos;: 1&#125; ).astype(int) #å¯¹åº”çš„æŠŠsexçš„femaleå’Œmaleå˜æ¢ä¸º0ï¼Œ1æ˜ å°„åˆ°å¯¹åº”çš„è¡Œ</div><div class="line"></div><div class="line">df[&apos;FamilySize&apos;] = df[&apos;SibSp&apos;] + df[&apos;Parch&apos;] </div><div class="line">df[&apos;Age*Class&apos;] = df.FamilySize * df.Pclass  #æ„é€ æ–°ç‰¹å¾</div><div class="line"></div><div class="line">df = df.drop([&apos;Name&apos;, &apos;Sex&apos;, &apos;Ticket&apos;, &apos;Cabin&apos;, &apos;Embarked&apos;], axis=1)  #åˆ é™¤æ— ç”¨åˆ—</div><div class="line"></div><div class="line">df.loc[:,[&apos;Age&apos;,&apos;Pclass&apos;]] </div><div class="line">df.iloc[0:2,[0,2]] # å‰è¾¹æ˜¯è¡Œï¼Œåè¾¹æ˜¯æ˜¯åˆ—ï¼Œlocå¿…é¡»ç”¨labelï¼Œilocå¯ä»¥ç”¨æ•°å­—</div><div class="line">æ³¨æ„è¿™é‡Œilocå’Œlocä»£è¡¨çš„æ˜¯è¡Œ</div><div class="line"></div><div class="line">known_age = age_df[age_df.Age.notnull()].as_matrix()</div><div class="line">unknown_age = age_df[age_df.Age.isnull()].as_matrix()</div><div class="line"></div><div class="line">import pylab as P  </div><div class="line">df[&apos;Age&apos;].dropna().hist(bins=16, range=(0,80), alpha = .5)  </div><div class="line">P.show() #ç”»ç›´æ–¹å›¾</div><div class="line">##</div></pre></td></tr></table></figure>
<h5 id="ä¿®æ”¹åˆ—åç§°"><a href="#ä¿®æ”¹åˆ—åç§°" class="headerlink" title="ä¿®æ”¹åˆ—åç§°"></a>ä¿®æ”¹åˆ—åç§°</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">é—®é¢˜ï¼š</div><div class="line">æœ‰ä¸€ä¸ªDataFrameï¼Œåˆ—åä¸ºï¼š[&apos;$a&apos;, &apos;$b&apos;, &apos;$c&apos;, &apos;$d&apos;, &apos;$e&apos;]</div><div class="line">ç°éœ€è¦æ”¹ä¸ºï¼š[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;]</div><div class="line">æœ‰ä½•åŠæ³•ï¼Ÿ</div><div class="line"></div><div class="line">import pandas as pd</div><div class="line">df = pd.DataFrame(&#123;&apos;$a&apos;: [1], &apos;$b&apos;: [1], &apos;$c&apos;: [1], &apos;$d&apos;: [1], &apos;$e&apos;: [1]&#125;)</div><div class="line">è§£å†³ï¼š</div><div class="line"></div><div class="line">æ–¹å¼ä¸€ï¼šcolumnså±æ€§</div><div class="line"># â‘ æš´åŠ›</div><div class="line">df.columns = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;]</div><div class="line"></div><div class="line"># â‘¡ä¿®æ”¹</div><div class="line">df.columns = df.columns.str.strip(&apos;$&apos;)</div><div class="line"></div><div class="line"># â‘¢ä¿®æ”¹</div><div class="line">df.columns = df.columns.map(lambda x:x[1:])</div><div class="line">æ–¹å¼äºŒï¼šrenameæ–¹æ³•ã€columnså‚æ•°</div><div class="line"># â‘£æš´åŠ›ï¼ˆå¥½å¤„ï¼šä¹Ÿå¯åªä¿®æ”¹ç‰¹å®šçš„åˆ—ï¼‰</div><div class="line">df.rename(columns=(&apos;$a&apos;: &apos;a&apos;, &apos;$b&apos;: &apos;b&apos;, &apos;$c&apos;: &apos;c&apos;, &apos;$d&apos;: &apos;d&apos;, &apos;$e&apos;: &apos;e&apos;&#125;, inplace=True)</div></pre></td></tr></table></figure>
<h5 id="èµ‹å€¼æ›¿æ¢"><a href="#èµ‹å€¼æ›¿æ¢" class="headerlink" title="èµ‹å€¼æ›¿æ¢"></a>èµ‹å€¼æ›¿æ¢</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">data[&quot;D&quot;] = data[&apos;class&apos;] #å°†classçš„ç»™D</div><div class="line">data[&apos;D&apos;].replace([&apos;C1&apos;,&apos;C2&apos;], [0,1], inplace = True) #å°†classé‡Œè¾¹çš„C1å’ŒC2æ›¿æ¢ä¸º0ï¼Œ1</div></pre></td></tr></table></figure>
<h5 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">train_data = df.values  #pandasè½¬numpyæ•°ç»„</div><div class="line"></div><div class="line">Age = df[&apos;Age&apos;]</div><div class="line">Age = np.array(Age)</div><div class="line">Age = Age.reshape(Age.size,1) #Seriseè½¬numpyæ•°ç»„</div></pre></td></tr></table></figure>
<h5 id="å›¾åƒå¤„ç†"><a href="#å›¾åƒå¤„ç†" class="headerlink" title="å›¾åƒå¤„ç†"></a>å›¾åƒå¤„ç†</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">data_train.Survived.value_counts().plot(kind=&apos;bar&apos;)# æŸ±çŠ¶å›¾</div><div class="line"></div><div class="line">plt.scatter(data_train.Survived, data_train.Age)# æ•£åˆ—</div><div class="line"></div><div class="line">data_train.Age[data_train.Pclass == 1].plot(kind=&apos;kde&apos;)   </div><div class="line">data_train.Age[data_train.Pclass == 2].plot(kind=&apos;kde&apos;)</div><div class="line">data_train.Age[data_train.Pclass == 3].plot(kind=&apos;kde&apos;)# å¯†åº¦å›¾</div><div class="line"></div><div class="line">Survived_0 = data_train.Pclass[data_train.Survived == 0].value_counts()</div><div class="line">Survived_1 = data_train.Pclass[data_train.Survived == 1].value_counts()</div><div class="line">df=pd.DataFrame(&#123;u&apos;è·æ•‘&apos;:Survived_1, u&apos;æœªè·æ•‘&apos;:Survived_0&#125;)</div><div class="line">df.plot(kind=&apos;bar&apos;, stacked=True)#æŸ±çŠ¶å›¾</div></pre></td></tr></table></figure>
<h5 id="å°†dataformatçš„æ•°æ®å†™å…¥csv"><a href="#å°†dataformatçš„æ•°æ®å†™å…¥csv" class="headerlink" title="å°†dataformatçš„æ•°æ®å†™å…¥csv"></a>å°†dataformatçš„æ•°æ®å†™å…¥csv</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df.to_csv(&apos;foo.csv&apos;)</div></pre></td></tr></table></figure>
<h5 id="å°†æ•°æ®åº“çš„æ•°æ®å†™å…¥csv"><a href="#å°†æ•°æ®åº“çš„æ•°æ®å†™å…¥csv" class="headerlink" title="å°†æ•°æ®åº“çš„æ•°æ®å†™å…¥csv"></a>å°†æ•°æ®åº“çš„æ•°æ®å†™å…¥csv</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">import csv</div><div class="line"></div><div class="line"># æ–‡ä»¶å¤´ï¼Œä¸€èˆ¬å°±æ˜¯æ•°æ®å</div><div class="line">fileHeader = [&quot;name&quot;, &quot;score&quot;]</div><div class="line"></div><div class="line"># å‡è®¾æˆ‘ä»¬è¦å†™å…¥çš„æ˜¯ä»¥ä¸‹ä¸¤è¡Œæ•°æ®</div><div class="line">d1 = [&quot;Wang&quot;, &quot;100&quot;]</div><div class="line">d2 = [&quot;Li&quot;, &quot;80&quot;]</div><div class="line"></div><div class="line"># å†™å…¥æ•°æ®</div><div class="line"></div><div class="line">csvFile = open(&quot;instance.csv&quot;, &quot;w&quot;)</div><div class="line">writer = csv.writer(csvFile)</div><div class="line"></div><div class="line"># å†™å…¥çš„å†…å®¹éƒ½æ˜¯ä»¥åˆ—è¡¨çš„å½¢å¼ä¼ å…¥å‡½æ•°</div><div class="line">writer.writerow(fileHeader)</div><div class="line">writer.writerow(d1)</div><div class="line">writer.writerow(d1)</div><div class="line"></div><div class="line">csvFile.close()</div></pre></td></tr></table></figure>
<h4 id="ç»Ÿè®¡ä¿¡æ¯"><a href="#ç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="ç»Ÿè®¡ä¿¡æ¯"></a>ç»Ÿè®¡ä¿¡æ¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">- `count` å…ƒç´ å€¼çš„æ•°é‡ï¼›</div><div class="line">- `mean` å¹³å‡å€¼ï¼›</div><div class="line">- `std` æ ‡å‡†å·®ï¼›</div><div class="line">- `min` æœ€å°å€¼ï¼›</div><div class="line">- `25%` ä¸‹å››åˆ†ä½æ•°ï¼›</div><div class="line">- `50%` ä¸­ä½æ•°ï¼›</div><div class="line">- `75%` ä¸Šå››åˆ†ä½æ•°ï¼›</div><div class="line">- `max` æœ€å¤§å€¼ï¼›</div></pre></td></tr></table></figure>
<h4 id="åˆå¹¶"><a href="#åˆå¹¶" class="headerlink" title="åˆå¹¶"></a>åˆå¹¶</h4><p>è¿™äº›æ•°æ®é›†æœ‰ç›¸åŒçš„åˆ—</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">pd.concat([df1, df2])</div><div class="line">pd.merge(df1, df2)</div></pre></td></tr></table></figure>
<h4 id="æŸä¸ªuser-idçš„å­¦ä¹ æ—¶é—´æ€»å’Œ"><a href="#æŸä¸ªuser-idçš„å­¦ä¹ æ—¶é—´æ€»å’Œ" class="headerlink" title="æŸä¸ªuser_idçš„å­¦ä¹ æ—¶é—´æ€»å’Œ"></a>æŸä¸ªuser_idçš„å­¦ä¹ æ—¶é—´æ€»å’Œ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">In [471]: df[df[&apos;user_id&apos;] == 5348][&apos;minutes&apos;]</div><div class="line">Out[471]:</div><div class="line">0     9</div><div class="line">2    45</div><div class="line">Name: minutes, dtype: int64</div><div class="line"></div><div class="line">In [472]: df[df[&apos;user_id&apos;] == 5348]</div><div class="line">Out[472]:</div><div class="line">   course  minutes  user_id</div><div class="line">0      12        9     5348</div><div class="line">2      23       45     5348</div><div class="line"></div><div class="line">In [475]: df[df[&apos;user_id&apos;] == 5348][&apos;minutes&apos;]</div><div class="line">Out[475]:</div><div class="line">0     9</div><div class="line">2    45</div><div class="line">Name: minutes, dtype: int64</div><div class="line"></div><div class="line">In [476]: df[df[&apos;user_id&apos;] == 5348][&apos;minutes&apos;].sum()</div><div class="line">Out[476]: 54</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨groupby</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">In [471]: df[df[&apos;user_id&apos;] == 5348][&apos;minutes&apos;]</div><div class="line">Out[471]:</div><div class="line">0     9</div><div class="line">2    45</div><div class="line">Name: minutes, dtype: int64</div><div class="line"></div><div class="line">In [472]: df[df[&apos;user_id&apos;] == 5348]</div><div class="line">Out[472]:</div><div class="line">   course  minutes  user_id</div><div class="line">0      12        9     5348</div><div class="line">2      23       45     5348</div><div class="line"></div><div class="line">In [475]: df[df[&apos;user_id&apos;] == 5348][&apos;minutes&apos;]</div><div class="line">Out[475]:</div><div class="line">0     9</div><div class="line">2    45</div><div class="line">Name: minutes, dtype: int64</div><div class="line"></div><div class="line">In [476]: df[df[&apos;user_id&apos;] == 5348][&apos;minutes&apos;].sum()</div><div class="line">Out[476]: 54</div></pre></td></tr></table></figure>
<h3 id="ç¼ºå¤±å€¼å¤„ç†"><a href="#ç¼ºå¤±å€¼å¤„ç†" class="headerlink" title="ç¼ºå¤±å€¼å¤„ç†"></a>ç¼ºå¤±å€¼å¤„ç†</h3><h4 id="æŸ¥æ‰¾ç¼ºå¤±å€¼"><a href="#æŸ¥æ‰¾ç¼ºå¤±å€¼" class="headerlink" title="æŸ¥æ‰¾ç¼ºå¤±å€¼"></a>æŸ¥æ‰¾ç¼ºå¤±å€¼</h4><p>æŸ¥æ‰¾ç¼ºå¤±å€¼ï¼Œæˆ‘ä»¬ä¾æ—§å¯ä»¥ä½¿ç”¨ Pandas è¿›è¡Œå¤„ç†ã€‚Pandas ä¸­ï¼Œç¼ºå¤±æ•°æ®ä¸€èˆ¬é‡‡ç”¨NaNæ ‡è®°NaN ä»£è¡¨ Not a Numberã€‚ç‰¹åˆ«åœ°ï¼Œåœ¨æ—¶é—´åºåˆ—é‡Œï¼Œæ—¶é—´æˆ³çš„ä¸¢å¤±é‡‡ç”¨ NaT æ ‡è®°</p>
<p>Pandas ç”¨äºæ£€æµ‹ç¼ºå¤±å€¼ä¸»è¦ç”¨åˆ°ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ï¼šisnull() å’Œ notnull()ï¼Œæ•…åæ€æ„å°±æ˜¯ã€Œæ˜¯ç¼ºå¤±å€¼ã€å’Œã€Œä¸æ˜¯ç¼ºå¤±å€¼ã€ã€‚é»˜è®¤ä¼šè¿”å›å¸ƒå°”å€¼ç”¨äºåˆ¤æ–­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print(df.head(10).isnull())</div><div class="line">print(df.head(10).notnull())</div></pre></td></tr></table></figure>
<p>å…³äºç¼ºå¤±å€¼å¤„ç†ï¼Œä¸»è¦æœ‰ä¸¤ç§å¤„ç†æ‰‹æ®µï¼šåˆ é™¤ç¼ºå¤±å€¼æ‰€åœ¨çš„è¡Œæˆ–åˆ—æˆ–å¡«å……ç¼ºå¤±å€¼</p>
<h4 id="å¤„ç†ç¼ºå¤±å€¼"><a href="#å¤„ç†ç¼ºå¤±å€¼" class="headerlink" title="å¤„ç†ç¼ºå¤±å€¼"></a>å¤„ç†ç¼ºå¤±å€¼</h4><p>åˆ é™¤ç¼ºå¤±å€¼æ˜¯æœ€ç®€å•ç›´æ¥çš„åŠæ³•ä¹‹ä¸€ã€‚å®ƒé€‚ç”¨äºä¸‰ç§æƒ…å†µï¼š</p>
<ul>
<li><p>ç¼ºå¤±å€¼å°‘ï¼Œå¯¹æ•°æ®é›†çš„å½±å“å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚è¿™å¥è¯çš„æ„æ€åº”è¯¥å¾ˆå¥½ç†è§£ã€‚æ¯”å¦‚ä¸€ä¸ªæ•°ä¸‡è¡Œçš„æ•°æ®é›†ï¼Œæ°å¥½æœ‰æŸå‡ è¡Œç¼ºå¤±äº†å‡ ä¸ªç‰¹å¾å€¼ã€‚ç¼ºå¤±çš„æ•°æ®è¡Œè¿œè¿œå°äºå…¨éƒ¨æ•°æ®çš„æ•°é‡ï¼Œä¸”åˆ é™¤è¿™å‡ è¡Œä¹‹åï¼Œå¯¹åŸæ•°æ®é›†çš„å½±å“å¯ä»¥å¿½ç•¥ã€‚è¿™æ—¶å€™ï¼Œç›´æ¥åˆ é™¤ç¼ºå¤±å€¼æ‰€åœ¨çš„è¡Œæ˜¯æœ€å¥½çš„ã€‚</p>
</li>
<li><p>ç¼ºå¤±æ•°æ®é‡å¤§ï¼Œå·²æ— æ³•æŒ½æ•‘ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªæ•°æ®é›†æœ‰1 ä¸‡è¡Œï¼Œå­˜åœ¨ 10 ä¸ªç‰¹å¾åˆ—ã€‚å…¶ä¸­æŸä¸€é¡¹ç‰¹å¾æ‰€åœ¨çš„åˆ—å­˜åœ¨ 9000 ä¸ªç©ºå€¼ã€‚è¿™ä¹Ÿå°±è¡¨æ˜è¯¥åˆ—å­˜åœ¨çš„æ„ä¹‰å·²ç»ä¸å¤§äº†ã€‚æ‰€ä»¥ä¹Ÿéœ€è¦åˆ é™¤æ•°æ®ã€‚</p>
</li>
<li><p>è¯¥ç¼ºå¤±å€¼æ— æ³•è¢«å¡«å……ã€‚è¿™ç§æƒ…å†µä¹Ÿå¾ˆå¸¸è§ã€‚å°±æ‹¿æˆ‘ä»¬ä¸Šé¢ä¸€ç›´åœ¨ç”¨çš„ test_file.csv æ•°æ®é›†è·ç¦»ã€‚è¯¥æ•°æ®é›†å®é™…ä¸ºæ´›æ‰çŸ¶äººå£æ™®æŸ¥æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ•°æ®é›†ä¸­æœ‰ä¸€åˆ—ä¸º Zip Codeï¼Œä¹Ÿå°±æ˜¯é‚®ç¼–ã€‚é‚®ç¼–æ˜¯å®¢è§‚å­˜åœ¨çš„ï¼Œä¹Ÿæ˜¯ä¸èƒ½éšæ„æ›´æ”¹çš„ã€‚å¦‚æœæŸå‡ é¡¹é‚®ç¼–ç¼ºå¤±ï¼Œä½ æ˜¯æ— æ³•éšæ„é€šè¿‡ä¸€äº›æ•°å€¼æ¥å¡«å……é‚®ç¼–ã€‚æ‰€ä»¥ï¼Œå¯¹åº”è¿™æ ·çš„æ•°æ®è¡Œå·²ç»æ²¡æœ‰æ„ä¹‰ï¼Œé€‰æ‹©ç›´æ¥åˆ é™¤å¾€å¾€æ˜¯æœ€å¥½çš„ã€‚<br>åˆ é™¤ç¼ºå¤±å€¼æ‰€åœ¨çš„åˆ—æˆ–è¡Œéå¸¸ç®€å•ï¼Œä½¿ç”¨Pandasæä¾›çš„ dropna() æ–¹æ³•ã€‚dropna() æ–¹æ³•å¯ä»¥å°†æœ‰ç¼ºå¤±å€¼çš„è¡Œæˆ–åˆ—å…¨éƒ¨ç§»é™¤ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ axis=0 å‚æ•°æŒ‡å®šè¡Œï¼Œæˆ– axis=1 å‚æ•°æŒ‡å®šåˆ—</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">import pandas as pd</div><div class="line"></div><div class="line">df = pd.read_csv(&quot;test_file_nan.csv&quot;)</div><div class="line"></div><div class="line">print(df.dropna(axis=0)) #è¿™ä¸ªä¼šåˆ é™¤å­˜åœ¨ç©ºå€¼çš„è¡Œ</div><div class="line">print(df.dropna(axis=1)) #è¿™ä¸ªä¼šåˆ é™¤å­˜åœ¨ç©ºå€¼çš„åˆ—</div></pre></td></tr></table></figure>
<h4 id="å¡«å……ç¼ºå¤±å€¼"><a href="#å¡«å……ç¼ºå¤±å€¼" class="headerlink" title="å¡«å……ç¼ºå¤±å€¼"></a>å¡«å……ç¼ºå¤±å€¼</h4><p>é™¤äº†åˆ é™¤ç¼ºå¤±å€¼ï¼Œå¯¹ç¼ºå¤±å€¼å¤„ç†çš„å¦å¤–ä¸€ç§æ–¹æ³•å°±æ˜¯å¡«å……ç¼ºå¤±å€¼ã€‚å¦‚æœä½ ç¬¬ä¸€æ¬¡æ¥è§¦ç¼ºå¤±å€¼å¤„ç†ï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºå¡«å……ç¼ºå¤±å€¼çš„å¤„ç†å¥½äºç›´æ¥åˆ é™¤ç¼ºå¤±å€¼ã€‚å…¶å®å¹¶ä¸ä¸€å®šï¼ŒåŸå› åœ¨äºå¡«å……ç¼ºå¤±å€¼ä¼šç›´æ¥æ”¹å˜åŸæœ‰æ•°æ®é›†ï¼Œè¿™å¯èƒ½ä¼šå½±å“åç»­é¢„æµ‹åˆ†æçš„ç»“æœã€‚æ‰€ä»¥ï¼Œä½¿ç”¨å¡«å……ç¼ºå¤±å€¼æ—¶ä¸€å®šè¦æ›´åŠ è°¨æ…ã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¡«å……ç¼ºå¤±å€¼æœ‰ä¸‰ç§æ–¹æ³•ã€‚</p>
<h5 id="æ‰‹åŠ¨å¡«å……"><a href="#æ‰‹åŠ¨å¡«å……" class="headerlink" title="æ‰‹åŠ¨å¡«å……"></a>æ‰‹åŠ¨å¡«å……</h5><p>æ‰‹åŠ¨å¡«å……è™½ç„¶æ˜¯ç¬¨åŠæ³•ï¼Œä½†å¾€å¾€æ˜¯æ•ˆæœæœ€å¥½çš„æ–¹æ³•ã€‚æ‰‹åŠ¨å¡«å……éå¸¸é€‚åˆäºä¸€ç§æƒ…å½¢ï¼Œé‚£å°±æ˜¯æ•°æ®å¯ä»¥è¢«äººä¸ºæœ‰æ•ˆç¡®å®šã€‚ä¸¾ä¸ªä¾‹å­ï¼šä¸Šé¢çš„æ´›æ‰çŸ¶äººå£æ™®æŸ¥æ•°æ®è¡¨ä¸­ï¼Œç¬¬ä¸€åˆ—ä¸ºé‚®ç¼–ï¼Œå®ƒç”¨äºæ ‡è®°ä¸åŒçš„åœ°åŒºã€‚å¦‚æœé‚®ç¼–æœ‰å‡ é¡¹æ•°æ®ç¼ºå¤±ï¼Œé‚£ä¹ˆé€šè¿‡æ‰‹åŠ¨ç­›é€‰å†å¡«å……é‚®ç¼–å°±æ˜¯æœ€é€‚åˆçš„æ–¹æ³•ã€‚åŸå› åœ¨äºï¼Œé‚®ç¼–å’Œå…¶ä»–æ•°æ®ä¸ä¸€æ ·ï¼Œå¦‚æœå®ƒä¸å­˜åœ¨æˆ–ä¸æ­£ç¡®ï¼Œå°±ç›´æ¥å¯¼è‡´è¿™è¡Œæ•°æ®æ— æ•ˆï¼Œç”šè‡³å½±å“åˆ°å…¶ä»–æ•°æ®ã€‚æ‰‹åŠ¨å¡«å……ï¼Œå……åˆ†å±•ç°äº†äººçš„çµæ´»æ€§ï¼Œä½†åŒæ ·æ˜¯ä¸€ä¸ªè´¹æ—¶è´¹åŠ›çš„åŠæ³•ã€‚</p>
<h5 id="ä¸´è¿‘å¡«å……"><a href="#ä¸´è¿‘å¡«å……" class="headerlink" title="ä¸´è¿‘å¡«å……"></a>ä¸´è¿‘å¡«å……</h5><p> ä¸´è¿‘å¡«å……ï¼Œæ•…åæ€æ„å°±æ˜¯é‡‡ç”¨ä¸ç¼ºå¤±å€¼ç›¸é‚»çš„æ•°æ®è¿›è¡Œå¡«å……ç¼ºå¤±å€¼çš„æ–¹æ³•ã€‚ä¸´è¿‘å¡«å……æ¯”è¾ƒé€‚åˆäºé›¶æ•£çš„ä¸ç¡®å®šæ•°æ®ã€‚é›¶æ•£ï¼ŒæŒ‡çš„æ˜¯ä¸ä¼šè¿ç»­ç¼ºå¤±æ•°åä¸ªæˆ–ä¸Šç™¾ä¸ªæ•°æ®å€¼ã€‚å¦‚æœè¿ç»­ç¼ºå¤±çš„å€¼å¤ªå¤šï¼Œä½ ç”¨ä¸´è¿‘å¡«å……å°†å…¶å˜ä¸ºåŒä¸€æ•°æ®å€¼ï¼Œè¿™å¯¹æ•°æ®é›†æ•´ä½“çš„å½±å“å¯æƒ³è€ŒçŸ¥ã€‚ä¸ç¡®å®šæ•°æ®ï¼Œå°±æ˜¯é€šè¿‡è§†è§‰è§‚å¯Ÿï¼Œæ— æ³•å‘ç°ç›¸é‚»æ•°æ®ä¹‹é—´æœ‰ä»€ä¹ˆè”ç³»ï¼Œå‰åæ•°æ®æ—¶å¤§æ—¶å°ï¼Œæ— æ³•è¢«äººä¸ºç¡®å®šæˆ–æ‰¾å‡ºè§„å¾‹ã€‚</p>
<p>Pandas æä¾›äº†ç”¨äºä¸´è¿‘å¡«å……çš„fillna()æ–¹æ³•ã€‚è¯¥æ–¹æ³•çš„ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">import pandas as pd</div><div class="line"></div><div class="line">df = pd.read_csv(&quot;test_file_nan.csv&quot;)</div><div class="line"></div><div class="line">print(df.head(10).fillna(method=&apos;pad&apos;))</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥å¯¹ç…§ç¼ºå¤±å€¼æ•°æ®ï¼Œçœ‹åˆ°å…¶è¢«å‰é¢çš„ä¸´è¿‘å€¼è¿›è¡Œäº†å¡«å……ã€‚</p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ›´æ¢ method=â€™bfillâ€™ å‚æ•°ï¼Œä½¿ç”¨åé¢çš„ä¸´è¿‘å€¼è¿›è¡Œå¡«å……ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(df.head(10).fillna(method=&apos;bfill&apos;))</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå› ä¸ºæœ€åä¸€é¡¹ä¸ºç¼ºå¤±æ•°æ®ï¼Œæ‰€ä»¥æœ‰ä¸€éƒ¨åˆ†ç¼ºå¤±å€¼æ— æ³•è¢«æœ‰æ•ˆå¡«å……ã€‚</p>
<p>è¿™é‡Œä½ ä¹Ÿæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬çš„æ•°æ®å…¶å®æœ‰ 200 å¤šè¡Œï¼Œç¬¬ä¸‰åˆ—çš„ 4-9 è¡Œåº”è¯¥èƒ½è¢«å¡«å……ï¼Œä½†ä¸ºä»€ä¹ˆè¿˜æ˜¯ NaN ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œfillna()æ–¹æ³•åœ¨å¡«å……æ—¶å¹¶ä¸ä¼šå½±å“åŸæœ‰æ•°æ®é›†ã€‚</p>
<p>é™¤äº†ä¸´è¿‘å¡«å……ï¼Œæœ‰äº‹æˆ‘ä»¬è¿˜ä¼šç”¨mean()è¿›è¡Œå¹³å‡å€¼å¡«å……ã€‚</p>
<h5 id="3-æ’å€¼å¡«å……"><a href="#3-æ’å€¼å¡«å……" class="headerlink" title="3. æ’å€¼å¡«å……"></a>3. æ’å€¼å¡«å……</h5><p>æ’å€¼å¡«å……å°±æ˜¯é‡‡ç”¨æ•°å­¦çš„æ–¹æ³•å¯¹æ•°æ®è¿›è¡Œæ’å€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæœ‰ä¸€åˆ—æ•°æ®ä¸º [2011, 2012, 2013, ç¼ºå¤±å€¼, ç¼ºå¤±å€¼, 2016, 2017] ã€‚è¿™é‡Œï¼Œæ— è®ºä½ é‡‡ç”¨å‘å‰è¿˜æ˜¯å‘åå¡«å……ï¼Œå…¶å®éƒ½ä¸æ˜¯æœ€å¥½çš„ã€‚ä½ å¯ä»¥å‘ç°æ•°æ®æ˜¯ä¸€ä¸ªç­‰å·®æ•°åˆ—ï¼Œç¼ºå¤±å€¼åº”è¯¥åˆ†åˆ«ä¸º[2014, 2015]ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸€ä¸ªçº¿æ€§æ’å€¼çš„è¿‡ç¨‹ã€‚</p>
<p>Pandas æä¾›äº†ç›¸å…³æ’å€¼æ–¹æ³•ï¼Œé€šè¿‡interpolate()æ–¹æ³•å®ç°ã€‚é»˜è®¤ä¸ºå‚æ•°ä¸ºçº¿æ€§æ’å€¼ï¼Œå³ method=â€™linearâ€™ã€‚ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">import pandas as pd</div><div class="line"></div><div class="line">df = pd.read_csv(&quot;test_file_nan.csv&quot;)</div><div class="line"></div><div class="line">print(df.interpolate().head(10))</div></pre></td></tr></table></figure>
<p>æ³¨æ„çº¿æ€§æ’å€¼ç»“æœä¸å‰é¢ä¸´è¿‘æ’å€¼ç»“æœçš„åŒºåˆ«ï¼Œç¬¬ä¸€åˆ—æ˜æ˜¾è¦å¥½å¾ˆå¤šã€‚</p>
<p>å¡«å……ç¼ºå¤±å€¼<br>é™¤äº†åˆ é™¤ç¼ºå¤±å€¼ï¼Œå¯¹ç¼ºå¤±å€¼å¤„ç†çš„å¦å¤–ä¸€ç§æ–¹æ³•å°±æ˜¯å¡«å……ç¼ºå¤±å€¼ã€‚å¦‚æœä½ ç¬¬ä¸€æ¬¡æ¥è§¦ç¼ºå¤±å€¼å¤„ç†ï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºå¡«å……ç¼ºå¤±å€¼çš„å¤„ç†å¥½äºç›´æ¥åˆ é™¤ç¼ºå¤±å€¼ã€‚å…¶å®å¹¶ä¸ä¸€å®šï¼ŒåŸå› åœ¨äºå¡«å……ç¼ºå¤±å€¼ä¼šç›´æ¥æ”¹å˜åŸæœ‰æ•°æ®é›†ï¼Œè¿™å¯èƒ½ä¼šå½±å“åç»­é¢„æµ‹åˆ†æçš„ç»“æœã€‚æ‰€ä»¥ï¼Œä½¿ç”¨å¡«å……ç¼ºå¤±å€¼æ—¶ä¸€å®šè¦æ›´åŠ è°¨æ…ã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¡«å……ç¼ºå¤±å€¼æœ‰ä¸‰ç§æ–¹æ³•ã€‚</p>
<ol>
<li><p>æ‰‹åŠ¨å¡«å……ã€‚æ‰‹åŠ¨å¡«å……è™½ç„¶æ˜¯ç¬¨åŠæ³•ï¼Œä½†å¾€å¾€æ˜¯æ•ˆæœæœ€å¥½çš„æ–¹æ³•ã€‚æ‰‹åŠ¨å¡«å……éå¸¸é€‚åˆäºä¸€ç§æƒ…å½¢ï¼Œé‚£å°±æ˜¯æ•°æ®å¯ä»¥è¢«äººä¸ºæœ‰æ•ˆç¡®å®šã€‚ä¸¾ä¸ªä¾‹å­ï¼šä¸Šé¢çš„æ´›æ‰çŸ¶äººå£æ™®æŸ¥æ•°æ®è¡¨ä¸­ï¼Œç¬¬ä¸€åˆ—ä¸ºé‚®ç¼–ï¼Œå®ƒç”¨äºæ ‡è®°ä¸åŒçš„åœ°åŒºã€‚å¦‚æœé‚®ç¼–æœ‰å‡ é¡¹æ•°æ®ç¼ºå¤±ï¼Œé‚£ä¹ˆé€šè¿‡æ‰‹åŠ¨ç­›é€‰å†å¡«å……é‚®ç¼–å°±æ˜¯æœ€é€‚åˆçš„æ–¹æ³•ã€‚åŸå› åœ¨äºï¼Œé‚®ç¼–å’Œå…¶ä»–æ•°æ®ä¸ä¸€æ ·ï¼Œå¦‚æœå®ƒä¸å­˜åœ¨æˆ–ä¸æ­£ç¡®ï¼Œå°±ç›´æ¥å¯¼è‡´è¿™è¡Œæ•°æ®æ— æ•ˆï¼Œç”šè‡³å½±å“åˆ°å…¶ä»–æ•°æ®ã€‚æ‰‹åŠ¨å¡«å……ï¼Œå……åˆ†å±•ç°äº†äººçš„çµæ´»æ€§ï¼Œä½†åŒæ ·æ˜¯ä¸€ä¸ªè´¹æ—¶è´¹åŠ›çš„åŠæ³•ã€‚</p>
</li>
<li><p>ä¸´è¿‘å¡«å……ã€‚ ä¸´è¿‘å¡«å……ï¼Œæ•…åæ€æ„å°±æ˜¯é‡‡ç”¨ä¸ç¼ºå¤±å€¼ç›¸é‚»çš„æ•°æ®è¿›è¡Œå¡«å……ç¼ºå¤±å€¼çš„æ–¹æ³•ã€‚ä¸´è¿‘å¡«å……æ¯”è¾ƒé€‚åˆäºé›¶æ•£çš„ä¸ç¡®å®šæ•°æ®ã€‚é›¶æ•£ï¼ŒæŒ‡çš„æ˜¯ä¸ä¼šè¿ç»­ç¼ºå¤±æ•°åä¸ªæˆ–ä¸Šç™¾ä¸ªæ•°æ®å€¼ã€‚å¦‚æœè¿ç»­ç¼ºå¤±çš„å€¼å¤ªå¤šï¼Œä½ ç”¨ä¸´è¿‘å¡«å……å°†å…¶å˜ä¸ºåŒä¸€æ•°æ®å€¼ï¼Œè¿™å¯¹æ•°æ®é›†æ•´ä½“çš„å½±å“å¯æƒ³è€ŒçŸ¥ã€‚ä¸ç¡®å®šæ•°æ®ï¼Œå°±æ˜¯é€šè¿‡è§†è§‰è§‚å¯Ÿï¼Œæ— æ³•å‘ç°ç›¸é‚»æ•°æ®ä¹‹é—´æœ‰ä»€ä¹ˆè”ç³»ï¼Œå‰åæ•°æ®æ—¶å¤§æ—¶å°ï¼Œæ— æ³•è¢«äººä¸ºç¡®å®šæˆ–æ‰¾å‡ºè§„å¾‹ã€‚</p>
</li>
</ol>
<p>Pandas æä¾›äº†ç”¨äºä¸´è¿‘å¡«å……çš„fillna()æ–¹æ³•ã€‚è¯¥æ–¹æ³•çš„ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p>import pandas as pd</p>
<p>df = pd.read_csv(â€œtest_file_nan.csvâ€)</p>
<p>print(df.head(10).fillna(method=â€™padâ€™))<br>æˆ‘ä»¬å¯ä»¥å¯¹ç…§ç¼ºå¤±å€¼æ•°æ®ï¼Œçœ‹åˆ°å…¶è¢«å‰é¢çš„ä¸´è¿‘å€¼è¿›è¡Œäº†å¡«å……ã€‚</p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ›´æ¢ method=â€™bfillâ€™ å‚æ•°ï¼Œä½¿ç”¨åé¢çš„ä¸´è¿‘å€¼è¿›è¡Œå¡«å……ã€‚</p>
<p>print(df.head(10).fillna(method=â€™bfillâ€™))<br>è¿™é‡Œå› ä¸ºæœ€åä¸€é¡¹ä¸ºç¼ºå¤±æ•°æ®ï¼Œæ‰€ä»¥æœ‰ä¸€éƒ¨åˆ†ç¼ºå¤±å€¼æ— æ³•è¢«æœ‰æ•ˆå¡«å……ã€‚</p>
<p>è¿™é‡Œä½ ä¹Ÿæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬çš„æ•°æ®å…¶å®æœ‰ 200 å¤šè¡Œï¼Œç¬¬ä¸‰åˆ—çš„ 4-9 è¡Œåº”è¯¥èƒ½è¢«å¡«å……ï¼Œä½†ä¸ºä»€ä¹ˆè¿˜æ˜¯ NaN ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œfillna()æ–¹æ³•åœ¨å¡«å……æ—¶å¹¶ä¸ä¼šå½±å“åŸæœ‰æ•°æ®é›†ã€‚</p>
<p>é™¤äº†ä¸´è¿‘å¡«å……ï¼Œæœ‰äº‹æˆ‘ä»¬è¿˜ä¼šç”¨mean()è¿›è¡Œå¹³å‡å€¼å¡«å……ã€‚</p>
<ol>
<li>æ’å€¼å¡«å……ã€‚æ’å€¼å¡«å……å°±æ˜¯é‡‡ç”¨æ•°å­¦çš„æ–¹æ³•å¯¹æ•°æ®è¿›è¡Œæ’å€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæœ‰ä¸€åˆ—æ•°æ®ä¸º [2011, 2012, 2013, ç¼ºå¤±å€¼, ç¼ºå¤±å€¼, 2016, 2017] ã€‚è¿™é‡Œï¼Œæ— è®ºä½ é‡‡ç”¨å‘å‰è¿˜æ˜¯å‘åå¡«å……ï¼Œå…¶å®éƒ½ä¸æ˜¯æœ€å¥½çš„ã€‚ä½ å¯ä»¥å‘ç°æ•°æ®æ˜¯ä¸€ä¸ªç­‰å·®æ•°åˆ—ï¼Œç¼ºå¤±å€¼åº”è¯¥åˆ†åˆ«ä¸º[2014, 2015]ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸€ä¸ªçº¿æ€§æ’å€¼çš„è¿‡ç¨‹ã€‚</li>
</ol>
<p>Pandas æä¾›äº†ç›¸å…³æ’å€¼æ–¹æ³•ï¼Œé€šè¿‡interpolate()æ–¹æ³•å®ç°ã€‚é»˜è®¤ä¸ºå‚æ•°ä¸ºçº¿æ€§æ’å€¼ï¼Œå³ method=â€™linearâ€™ã€‚ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">import pandas as pd</div><div class="line"></div><div class="line">df = pd.read_csv(&quot;test_file_nan.csv&quot;)</div><div class="line"></div><div class="line">print(df.interpolate().head(10))</div></pre></td></tr></table></figure>
<p>æ³¨æ„çº¿æ€§æ’å€¼ç»“æœä¸å‰é¢ä¸´è¿‘æ’å€¼ç»“æœçš„åŒºåˆ«ï¼Œç¬¬ä¸€åˆ—æ˜æ˜¾è¦å¥½å¾ˆå¤šã€‚</p>
<h4 id="ç‹¬çƒ­ç¼–ç "><a href="#ç‹¬çƒ­ç¼–ç " class="headerlink" title="ç‹¬çƒ­ç¼–ç "></a>ç‹¬çƒ­ç¼–ç </h4><p>åœ¨å¯¹æ•°æ®çš„é¢„å¤„ç†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°æœ‰ä¸€äº›ç‰¹å¾åˆ—ä¸­çš„æ ·æœ¬å¹¶ä¸æ˜¯è¿ç»­å­˜åœ¨çš„ï¼Œè€Œæ˜¯ä»¥åˆ†ç±»å½¢å¼å­˜åœ¨çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼ŒæŸä¸€è£…ç½®çš„çŠ¶æ€æœ‰ä¸‰ç§æƒ…å†µï¼Œåˆ†åˆ«ä¸ºï¼šæ­£å¸¸ã€æœºæ¢°æ•…éšœã€ç”µè·¯æ•…éšœã€‚å¦‚æœæˆ‘ä»¬è¦å°†è¿™äº›æ•°æ®è¿ç”¨åˆ°åç»­çš„é¢„æµ‹åˆ†æä¸­ï¼Œå°±éœ€è¦å¯¹æ–‡å­—çŠ¶æ€è¿›è¡Œè½¬æ¢ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯ä»¥ç”¨ 0 è¡¨ç¤ºæ­£å¸¸ï¼Œ1 ä»£è¡¨æœºæ¢°æ•…éšœï¼Œ2 ä»£è¡¨ç”µè·¯æ•…éšœã€‚</p>
<p>ä½†æ˜¯è¿™ç§æ˜ å°„æ–¹å¼ï¼Œå¾€å¾€ä¼šè®©å­¦ä¹ å™¨è®¤ä¸º 2 ä»£è¡¨ç”µè·¯æ•…éšœæ¯” 1 ä»£è¡¨æœºæ¢°æ•…éšœæ›´ã€Œå¤§ã€ï¼Œä»è€Œå½±å“æ¨¡å‹åˆ†æç»“æœï¼Œè¿™è‚¯å®šæ˜¯ä¸è¡Œçš„ã€‚</p>
<p>æ‰€ä»¥ï¼Œå¯¹äºä»¥åˆ†ç±»å½¢å¼å­˜åœ¨çš„ç‰¹å¾å˜é‡ï¼Œæˆ‘ä»¬ä¼šé‡‡ç”¨ä¸€ç§å«ç‹¬çƒ­ç¼–ç ï¼ˆOne-Hot Encodingï¼‰çš„æ–¹å¼å°†å…¶è½¬æ¢æˆäºŒå…ƒç‰¹å¾ç¼–ç ï¼Œè¿›ä¸€æ­¥å¯¹ç‰¹å¾è¿›è¡Œäº†ç¨€ç–å¤„ç†ã€‚ç‹¬çƒ­ç¼–ç é‡‡ç”¨ä½çŠ¶æ€å¯„å­˜å™¨æ¥å¯¹ä¸ªçŠ¶æ€è¿›è¡Œç¼–ç ï¼Œæ¯ä¸ªçŠ¶æ€éƒ½ç”±ä»–ç‹¬ç«‹çš„å¯„å­˜å™¨ä½ï¼Œå¹¶ä¸”åœ¨ä»»æ„æ—¶å€™åªæœ‰ä¸€ä½æœ‰æ•ˆã€‚ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<p>Pandas æä¾›äº†æ›´ç®€å•çš„æ–¹æ³•æ¥å¤„ç†ä»¥åˆ†ç±»å½¢å¼çš„å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ get_dummies() å°†ä»¥åˆ†ç±»å½¢å¼å­˜åœ¨çš„å˜é‡è½¬æ¢ä¸ºç‹¬çƒ­ç¼–ç ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">import pandas as pd</div><div class="line"></div><div class="line">df = pd.read_csv(&quot;one_hot_demo.csv&quot;, header=0)</div></pre></td></tr></table></figure></p>
<p>åœ¨æ­¤æ¼”ç¤ºæ–‡ä»¶ä¸­ï¼Œstatus å…±æœ‰ none, electric, engineä¸‰ç±»æ•°å€¼ã€‚color æœ‰red å’Œ greenä¸¤ç±»ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">oneHot = pd.get_dummies(df[[&apos;status&apos;, &apos;color&apos;]])</div><div class="line">oneHot.head(10)</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå­—ç¬¦ä¸²è¢«è¿›è¡Œäº†ç‹¬çƒ­ç¼–ç ï¼Œç‰¹å¾ä¹Ÿä»åŸå…ˆçš„ 2 åˆ—æ‹“å……ä¸º 5 åˆ—ã€‚æ‰€ä»¥ï¼Œç‹¬çƒ­ç¼–ç çš„å¥½å¤„å¤šå¤š</p>
<h4 id="é‡å¤å€¼å¤„ç†"><a href="#é‡å¤å€¼å¤„ç†" class="headerlink" title="é‡å¤å€¼å¤„ç†"></a>é‡å¤å€¼å¤„ç†</h4><p>æ•°æ®é›†ä¸­åŒ…å«å¤§é‡çš„é‡å¤æ•°æ®ä¹Ÿæ˜¯æ•°æ®é¢„å¤„ç†ä¼šç»å¸¸é¢ä¸´çš„çŠ¶å†µã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ Pandas æä¾›äº†å“ªäº›ç”¨äºå¤„ç†é‡å¤æ•°æ®çš„æ–¹æ³•ã€‚</p>
<p>pandas.DataFrame.duplicated() å¯ä»¥ç”¨æ¥æ ‡è¯†é‡å¤æ•°æ®ï¼Œæ•°æ®é›†ä¸­é‡å¤æ•°æ®è¡Œä¼šè¿”å›å¸ƒå°”ç±»å‹ Trueã€‚ä¸Šé¢çš„ç‹¬çƒ­ç¼–ç ç¤ºä¾‹æ•°æ®é›†ä¸­å­˜åœ¨å¤§é‡é‡å¤æ•°æ®ï¼Œæˆ‘ä»¬å°±æ‹¿å®ƒä¸¾ä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">import pandas as pd</div><div class="line"></div><div class="line">df = pd.read_csv(&quot;one_hot_demo.csv&quot;, header=0)</div></pre></td></tr></table></figure>
<p>print(pd.DataFrame.duplicated(df).head(10))<br>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå‰ 10 è¡Œæ•°æ®ä¸­ï¼Œå°±æœ‰ 5 è¡Œä¸ºé‡å¤æ•°æ®ã€‚å½“ç„¶è¿™ä¸ªæ˜¯å®Œæ•´æ•°æ®é›†çš„æ¯”å¯¹ç»“æœï¼Œè¿™é‡Œåªæ˜¯æ˜¾ç¤ºäº†å‰ 10 è¡Œã€‚</p>
<p>pandas.DataFrame.drop_duplicates()å¯ä»¥è¿”å›ä¸€ä¸ªå»é‡åçš„æ•°æ®é›†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">import pandas as pd</div><div class="line"></div><div class="line">df = pd.read_csv(&quot;one_hot_demo.csv&quot;, header=0)</div><div class="line"></div><div class="line">print(pd.DataFrame.drop_duplicates(df))</div></pre></td></tr></table></figure></p>
<p>å»é‡åçš„æ•°æ®é›†å¦‚ä¸‹ï¼Œä»…æœ‰ 6 è¡Œéé‡å¤é¡¹ã€‚</p>
<p>å¼‚å¸¸å€¼æ£€æµ‹<br>é™¤äº†ç¼ºå¤±å€¼ä¸é‡å¤å€¼ï¼Œåœ¨å¤„ç†æ•°å€¼å‹æ•°æ®æ—¶ï¼Œæˆ‘ä»¬è¿˜å®¹æ˜“é‡åˆ°ä¸€ç§çŠ¶å†µï¼Œé‚£å°±æ˜¯å¼‚å¸¸å€¼ã€‚å¼‚å¸¸å€¼æ£€æµ‹æ˜¯å¤„ç†æ•°å€¼å‹æ•°æ®è¿‡ç¨‹ä¸­å¿…é¡»é‡è§†çš„ä¸€é¡¹å·¥ä½œã€‚é‚£äº›åœ¨æ”¶é›†ã€å½•å…¥è¿‡ç¨‹ä¸­äº§ç”Ÿçš„å¼‚å¸¸æ•°æ®ï¼Œå¦‚æœä¸åŠæ—¶å‰”é™¤ï¼Œå¾ˆå¯èƒ½å¯¹åç»­çš„é¢„æµ‹åˆ†æå¸¦æ¥ä¸¥é‡ä¸è‰¯å½±å“ã€‚</p>
<p>åº”ç”¨æ•°å­¦å’Œç»Ÿè®¡å­¦é¢†åŸŸå¯¹å¼‚å¸¸å€¼æ£€æµ‹ç ”ç©¶æ¯”è¾ƒæ·±å…¥ï¼Œç›®å‰å­˜åœ¨çš„æ£€æµ‹æ–¹æ³•ä¹Ÿéå¸¸å¤šã€‚å¤§è‡´æ¥è®²ï¼Œæœ‰ä»æ¦‚ç‡æ–¹æ³•å…¥æ‰‹çš„ä¸€å…ƒæ­£æ€åˆ†å¸ƒåŠå¤šå…ƒé«˜æ–¯æ–¹æ³•ï¼Œè¿˜æœ‰é€šè¿‡çŸ©é˜µåˆ†è§£å’Œç¥ç»ç½‘ç»œè¿›è¡Œå¼‚å¸¸å€¼æ£€æµ‹çš„ç›¸å…³æ–¹æ³•ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä»‹ç»ä¸€ç§ç®€å•ç›´è§‚çš„å¼‚å¸¸å€¼æ£€æµ‹æ–¹æ³•ï¼Œé‚£å°±æ˜¯é€šè¿‡ç®±å½¢å›¾ï¼ˆç®±çº¿å›¾ï¼‰æ¥è¯†åˆ«å¼‚å¸¸æ•°æ®ã€‚ç®±å½¢å›¾æ˜¯ç”¨æ¥è§‚æµ‹æ•°æ®é›†åˆ†å¸ƒçš„ä¸€ç§å›¾å½¢ç±»å‹ã€‚ç®±å½¢å›¾ä¸­ï¼Œä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æœ‰ 6 ä¸ªæ•°æ®èŠ‚ç‚¹ï¼Œåˆ†åˆ«æ˜¯ä¸Šç•Œã€ä¸Šå››åˆ†ä½ã€å‡å€¼ã€ä¸­ä½æ•°ã€ä¸‹å››åˆ†ä½ã€ä¸‹ç•Œã€‚è€Œé‚£äº›è¶…è¿‡ä¸Šç•Œçš„å€¼å°±ä¼šè¢«æ ‡è®°ä¸ºç¦»ç¾¤ç‚¹ï¼Œä¹Ÿå°±æ˜¯å¼‚å¸¸æ•°æ®ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ä¸Šä¸€èŠ‚æåˆ°çš„æ´›æ‰çŸ¶äººå£æ•°æ®è¿›è¡Œç®±å½¢å›¾ç»˜åˆ¶ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">from matplotlib import pyplot as plt</div><div class="line">import pandas as pd</div><div class="line"></div><div class="line">data = pd.read_csv(&quot;test_file.csv&quot;, header=0)</div><div class="line"></div><div class="line">Total_Population = data[&quot;Total Population&quot;]</div><div class="line"></div><div class="line">plt.boxplot(Total_Population)</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å¯ä»¥å°†ç¦»ç¾¤ç‚¹æ ‡è®°å¹¶å¯¼å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">from matplotlib import pyplot as plt</div><div class="line">import pandas as pd</div><div class="line"></div><div class="line">data = pd.read_csv(&quot;test_file.csv&quot;, header=0)</div><div class="line"></div><div class="line">Total_Population = data[&quot;Total Population&quot;]</div><div class="line"></div><div class="line">P = plt.boxplot(Total_Population)</div><div class="line"></div><div class="line">outlier = P[&apos;fliers&apos;][0].get_ydata()</div><div class="line"></div><div class="line">print(outlier)</div></pre></td></tr></table></figure>
<p>å…¶å®ï¼ŒDataFrame å¸¦æœ‰ boxplot() æ–¹æ³•å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†æ‰€æœ‰åˆ—æ•°æ®çš„ç®±å½¢å›¾ç”»åœ¨ä¸€å¼ å›¾ä¸­å¯¹æ¯”ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">from matplotlib import pyplot as plt</div><div class="line">import pandas as pd</div><div class="line"></div><div class="line">data = pd.read_csv(&quot;test_file.csv&quot;, header=0)</div><div class="line"></div><div class="line">data.boxplot()</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h3 id="å¼‚å¸¸å€¼"><a href="#å¼‚å¸¸å€¼" class="headerlink" title="å¼‚å¸¸å€¼"></a>å¼‚å¸¸å€¼</h3><p>åœ¨å‰é¢çš„å®éªŒä¸­æˆ‘ä»¬å­¦ä¹ è¿‡å››åˆ†ä½æ•°ã€‚å››åˆ†ä½æ•°ï¼Œæ˜¯æŒ‡å°†ä¸€ç»„æ•°æ®å€¼æŒ‰å¤§å°æ’åºååˆ†æˆå››ç­‰åˆ†ï¼Œæ¯ä¸€éƒ¨åˆ†åŒ…å« 1/4 çš„æ•°æ®ï¼Œè¿™ç§åˆ’åˆ†çš„åˆ†å‰²ç‚¹å°±æ˜¯å››åˆ†ä½æ•°ã€‚å…¶ä¸­ç¬¬1éƒ¨åˆ†å’Œç¬¬2éƒ¨åˆ†çš„åˆ†å‰²ç‚¹ç§°ä¸ºç¬¬1åˆ†ä½æ•° Q_1<br>, ä¹Ÿè¢«ç§°ä¸ºç¬¬25ç™¾åˆ†ä½æ•°ï¼ˆä¸Šå››åˆ†ä½ï¼‰ï¼Œç¬¬3éƒ¨åˆ†å’Œç¬¬4éƒ¨åˆ†çš„åˆ†å‰²ç‚¹ç§°ä¸ºç¬¬3å››åˆ†ä½æ•° Q_3â€‹â€‹ ï¼Œä¹Ÿè¢«ç§°ä¸ºç¬¬75ç™¾åˆ†ä½æ•°ï¼ˆä¸‹å››åˆ†ä½ï¼‰ã€‚è€Œç¬¬äºŒéƒ¨åˆ†å’Œç¬¬ä¸‰éƒ¨åˆ†çš„åˆ†å‰²ç‚¹æ˜¯ç¬¬2å››åˆ†æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸­ä½æ•°ã€‚å…¶ä¸­å››åˆ†ä½è· IQRIQR æ˜¯æŒ‡ç¬¬ä¸‰å››åˆ†ä½æ•°å’Œç¬¬ä¸€åˆ†å››åˆ†ä½æ•°çš„å·®ï¼Œä¹Ÿå°±æ˜¯ IQR = Q_3 - Q_1 IQR=Q3âˆ’Q1ã€‚æ‰€æœ‰å°äº Q_1 - 1.5IQR æˆ– å¤§äº Q_3 + 1.5IQR Q3â€‹â€‹ +1.5IQR çš„æ•°æ®é¡¹è¢«ç§°ä¸ºå¼‚å¸¸å€¼</p>
<p>å¼‚å¸¸å€¼ç›‘æµ‹çš„ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">import numpy as np</div><div class="line"></div><div class="line">def find_outlier(data):</div><div class="line">    outlier = []</div><div class="line">    a = np.array(data)</div><div class="line">    # å®Œæˆå‰©ä½™ä»£ç </div><div class="line">    Q1 = np.percentile(a,25)</div><div class="line">    Q3 = np.percentile(a,75)</div><div class="line">    IQR = Q3 - Q1</div><div class="line"></div><div class="line">    condition = (a &lt; Q1 - 1.5*IQR)</div><div class="line">    ca = np.extract(condition, a)</div><div class="line">    b = np.extract(condition, a)</div><div class="line">    conditionb = (a &gt; Q3 +1.5*IQR)</div><div class="line">    c = np.extract(conditionb, a)</div><div class="line">    </div><div class="line">    outlier = np.concatenate((b,c))</div><div class="line"></div><div class="line">    return outlier</div></pre></td></tr></table></figure>
<p>Dx5Qup71pt</p>
]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
            <tag> æ•°æ®æŒ–æ˜ </tag>
            
            <tag> pandas </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ•°æ®ç§‘å­¦--ç»˜å›¾--matplotlib+Seaborn+Bokeh]]></title>
      <url>/2018/02/28/2018/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6-matplotlib/</url>
      <content type="html"><![CDATA[<p>matplotlib æ˜¯é¢å‘å¯¹è±¡çš„ç»˜å›¾å·¥å…·åŒ…ï¼Œç»˜åˆ¶çš„å›¾å½¢ä¸­æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ¯”å¦‚çº¿æ¡ï¼Œæ–‡å­—ï¼Œåˆ»åº¦ç­‰ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹è¿™äº›å¯¹è±¡çš„å±æ€§ï¼Œä»è€Œæ”¹å˜ç»˜å›¾æ ·å¼ã€‚</p>
<p>matplotlib ä¸­ä¸»è¦çš„ç»˜å›¾å¯¹è±¡åˆ—è¡¨å¦‚ä¸‹ï¼š<br>&gt;</p>
<ul>
<li>Figure å¯¹è±¡ï¼Œå¯ä»¥æƒ³è±¡ä¸ºä¸€å¼ ç”»å¸ƒï¼›</li>
<li>Axes å¯¹è±¡ï¼Œå­—é¢ç†è§£ä¸ºåæ ‡è½´ï¼ˆå› ä¸ºæ¯ä¸€ä¸ª Axes éƒ½æœ‰ä¸€å¥— X Yè½´åæ ‡ç³»ï¼Œç»˜åˆ¶å›¾å½¢æ—¶åŸºäºæ­¤åæ ‡ç³»ç»˜åˆ¶ã€‚) ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯å­å›¾ï¼Œåœ¨ä¸€ä¸ª Figure å¯¹è±¡ä¸­å¯ä»¥åŒ…å«å¤šä¸ª Axes å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€å¼ ç”»å¸ƒå¯ä»¥åŒ…å«å¤šä¸ªå­å›¾ï¼›å¯ä»¥é€šè¿‡ plt.gcf() å’Œ plt.gca() åˆ†åˆ«è·å–å½“å‰ç”¨äºç»˜å›¾çš„ Figure å’Œ Axes å¯¹è±¡</li>
<li>Line2D å¯¹è±¡ï¼Œä»£è¡¨çº¿æ¡ï¼›</li>
<li>Text å¯¹è±¡ï¼Œä»£è¡¨äº†æ–‡å­—ï¼Œæ¯”å¦‚ä¸€å¼ å­å›¾éœ€è¦æ ‡é¢˜ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸€ä¸ª Text å¯¹è±¡ï¼›</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fig.add_subplot(2, 2, 4ï¼‰#æ„æ€æ˜¯ï¼Œæ·»åŠ ä¸€ä¸ªåæ ‡ä½“ç³»ï¼Œä¸¤è¡Œä¸¤åˆ—ï¼Œç„¶åæ·»åŠ åˆ°ç¬¬å››ä¸ªä½ç½®ä¸Š</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">import numpy as np</div><div class="line">import matplotlib.pyplot as plt</div><div class="line"></div><div class="line">fig1 = plt.figure()</div><div class="line"></div><div class="line">ax1 = fig1.add_subplot(2,2,1) #2è¡Œ2åˆ—ï¼Œæˆ‘æ˜¯ç¬¬1ä¸ª</div><div class="line">ax1.plot(np.random.randn(150).cumsum(), &apos;k--&apos;) #</div><div class="line"></div><div class="line">ax2 = fig1.add_subplot(2,2,2) #2è¡Œ2åˆ—ï¼Œæˆ‘æ˜¯ç¬¬2ä¸ª</div><div class="line">ax2.hist(np.random.randn(100), bins=20, color=&apos;k&apos;)</div><div class="line"></div><div class="line">ax3 = fig1.add_subplot(2,2,3) #2è¡Œ2åˆ—ï¼Œæˆ‘æ˜¯ç¬¬3ä¸ª</div><div class="line">ax3.scatter(np.arange(30), np.arange(30) + 3 * np.random.randn(30)) #æ•£ç‚¹</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p>å…¶ä»–çš„ä¸€äº›è®¾ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">import numpy as np                                                               </div><div class="line">import matplotlib.pyplot as plt                                                                                                                                 </div><div class="line"></div><div class="line">fig = plt.figure()                                                               </div><div class="line">ax = fig.add_subplot(1,1,1)                                                      </div><div class="line"></div><div class="line"># è®¾ç½®æ ‡é¢˜</div><div class="line">ax.set_title(&quot;Axes Example&quot;)</div><div class="line"></div><div class="line">major_ticks = np.arange(0, 101, 20)                                              </div><div class="line">minor_ticks = np.arange(0, 101, 5)                                               </div><div class="line"></div><div class="line"># è®¾ç½®åˆ»åº¦</div><div class="line">ax.set_xticks(major_ticks)                                                       </div><div class="line">ax.set_xticks(minor_ticks, minor=True)                                           </div><div class="line">ax.set_yticks(major_ticks)                                                       </div><div class="line">ax.set_yticks(minor_ticks, minor=True)                                         </div><div class="line"></div><div class="line"># è®¾ç½® X, Y è½´ æ ‡ç­¾</div><div class="line">ax.set_xlabel(&quot;X axis&quot;)</div><div class="line">ax.set_ylabel(&quot;Y axis&quot;)</div><div class="line"></div><div class="line"># è®¾ç½®ç½‘æ ¼                                                                       </div><div class="line">ax.grid(which=&apos;minor&apos;, alpha=0.2)                                                </div><div class="line">ax.grid(which=&apos;major&apos;, alpha=0.5)</div><div class="line"></div><div class="line"># æ·»åŠ æ–‡å­—</div><div class="line">ax.text(42.5, 50, &quot;shiyanlou&quot;)</div></pre></td></tr></table></figure>
<h3 id="å¸¸ç”¨å›¾å½¢"><a href="#å¸¸ç”¨å›¾å½¢" class="headerlink" title="å¸¸ç”¨å›¾å½¢"></a>å¸¸ç”¨å›¾å½¢</h3><h4 id="çº¿æ€§å›¾"><a href="#çº¿æ€§å›¾" class="headerlink" title="çº¿æ€§å›¾"></a>çº¿æ€§å›¾</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">import numpy as np</div><div class="line">import matplotlib.pyplot as plt</div><div class="line"></div><div class="line">fig = plt.figure()                                                               </div><div class="line">ax = fig.add_subplot(1,1,1)</div><div class="line"></div><div class="line">x = np.random.randn(100)</div><div class="line">y = np.random.randn(100)</div><div class="line"></div><div class="line">ax.plot(x, y)</div><div class="line">fig.show()</div></pre></td></tr></table></figure>
<h4 id="ç›´æ–¹å›¾"><a href="#ç›´æ–¹å›¾" class="headerlink" title="ç›´æ–¹å›¾"></a>ç›´æ–¹å›¾</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">data = np.random.normal(0, 20, 1000)</div><div class="line">bins = np.arange(-100, 100, 5)</div><div class="line">ax.hist(data, bins=bins)</div><div class="line">fig.show()</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç é¦–å…ˆé€šè¿‡ np.random.normal æ–¹æ³•ï¼Œåœ¨ 0 åˆ° 20 çš„èŒƒå›´äº§ç”Ÿ 1000 ä¸ªç¬¦åˆæ­£æ€åˆ†å¸ƒçš„æ•°æ®å€¼ï¼Œç„¶åé€šè¿‡ np.arange(-100, 100, 5) åˆ›å»ºäº† X è½´çš„åŒºé—´åˆ»åº¦</p>
<h4 id="æ•£ç‚¹å›¾"><a href="#æ•£ç‚¹å›¾" class="headerlink" title="æ•£ç‚¹å›¾"></a>æ•£ç‚¹å›¾</h4><p>æ•£ç‚¹å›¾ï¼Œå°†æ‰€æœ‰çš„æ•°æ®å€¼åœ¨å›¾å½¢ä¸­ç»˜åˆ¶æˆç‚¹ï¼Œè¿™æ ·æœ‰å¤šå°‘æ•°æ®å€¼åœ¨å›¾å½¢ä¸­å°±ä¼šæœ‰å¤šå°‘ä¸ªç‚¹ã€‚é€šè¿‡è¿™äº›æ•°æ®ç‚¹å¯ä»¥çœ‹å‡ºæ•°æ®å€¼çš„åˆ†å¸ƒæ¨¡å¼ï¼Œæ¯”å¦‚æ˜¯å¦æœ‰èšç±»æ¨¡å¼ï¼Œæˆ–è€…ç›¸å…³å…³ç³»æˆ–è€…å‘ç°ç¦»ç¾¤ç‚¹ã€‚åœ¨ matplotlib ä¸­å¯ä»¥é€šè¿‡ Axes.scatter ç»˜åˆ¶æ•£ç‚¹å›¾ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">x = np.arange(1, 101)</div><div class="line">y = 20 + 3 * x + np.random.normal(0, 60, 100)</div><div class="line">ax.scatter(x, y)</div><div class="line">fig.show()</div></pre></td></tr></table></figure>
<p>ä¸ºäº†æ¨¡æ‹Ÿæ•£ç‚¹å›¾ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ np.arange(1, 101) åˆ›å»ºäº† 100 ä¸ªæ•°æ®å€¼ï¼Œæ¥ç€åŸºäºæ­¤åˆ›å»ºäº† 100 ä¸ª Y è½´æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œä¸¤ç»„æ•°æ®å€¼ä¹‹é—´æœ‰ç›¸å…³å…³ç³»ï¼Œå› ä¸ºæ˜¯åŸºäºçº¿æ€§å…³ç³»ç„¶ååŠ ä¸Šéšæœºæ•°ç”Ÿæˆçš„ï¼Œç»˜åˆ¶çš„æ•£ç‚¹å›¾ä¹Ÿè¯æ˜äº†è¿™ç‚¹ï¼ˆå›¾å½¢å‘ä¸Šå€¾æ–œï¼‰</p>
<h4 id="ç®±çº¿å›¾"><a href="#ç®±çº¿å›¾" class="headerlink" title="ç®±çº¿å›¾"></a>ç®±çº¿å›¾</h4><p>ç®±çº¿å›¾å¯ä»¥çœ‹å‡ºæ•°æ®çš„åˆ†æ•£ç¨‹åº¦ï¼Œå¼‚å¸¸å€¼ç­‰ä¿¡æ¯ï¼Œç®±çº¿å›¾æ ¹æ®ä¸€ç»„æ•°æ®çš„ä»¥ä¸‹ 5 ä¸ªç»Ÿè®¡å€¼è¿›è¡Œç»˜åˆ¶ï¼š</p>
<p>æœ€å°å€¼ï¼›<br>ç¬¬1å››åˆ†ä½æ•°ï¼›<br>ä¸­ä½æ•°ï¼›<br>ç¬¬3å››åˆ†ä½æ•°ï¼›<br>æœ€å¤§å€¼ï¼›<br>å…¶ä¸­å››åˆ†ä½æ•°ï¼Œæ˜¯æŒ‡å°†ä¸€ç»„æ•°æ®å€¼æŒ‰å¤§å°æ’åºååˆ†æˆå››ç­‰åˆ†ï¼Œæ¯ä¸€éƒ¨åˆ†åŒ…å« 1/4 çš„æ•°æ®ï¼Œè¿™ç§åˆ’åˆ†çš„åˆ†å‰²ç‚¹å°±æ˜¯å››åˆ†ä½æ•°ã€‚å…¶ä¸­ç¬¬1éƒ¨åˆ†å’Œç¬¬2éƒ¨åˆ†çš„åˆ†å‰²ç‚¹ç§°ä¸ºç¬¬1åˆ†ä½æ•° Q_1Q<br>â€‹1<br>â€‹â€‹ , ä¹Ÿè¢«ç§°ä¸ºç¬¬25ç™¾åˆ†ä½æ•°ï¼Œç¬¬3éƒ¨åˆ†å’Œç¬¬4éƒ¨åˆ†çš„åˆ†å‰²ç‚¹ç§°ä¸ºç¬¬3å››åˆ†ä½æ•° Q_3Q<br>â€‹3<br>â€‹â€‹ ï¼Œä¹Ÿè¢«ç§°ä¸ºç¬¬75ç™¾åˆ†ä½æ•°ã€‚è€Œç¬¬äºŒéƒ¨åˆ†å’Œç¬¬ä¸‰éƒ¨åˆ†çš„åˆ†å‰²ç‚¹æ˜¯ç¬¬2å››åˆ†æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸­ä½æ•°ã€‚å…¶ä¸­å››åˆ†ä½è· IQRIQR æ˜¯æŒ‡ç¬¬ä¸‰å››åˆ†ä½æ•°å’Œç¬¬ä¸€åˆ†å››åˆ†ä½æ•°çš„å·®ï¼Œä¹Ÿå°±æ˜¯ IQR = Q_3 - Q_1 IQR=Q<br>â€‹3<br>â€‹â€‹ âˆ’Q<br>â€‹1<br>â€‹â€‹ ã€‚å››åˆ†ä½è·åæ˜ äº†ä¸­é—´ 50% æ•°æ®çš„ç¦»æ•£ç¨‹åº¦ï¼Œæ•°å€¼è¶Šå°ä»£è¡¨æ•°æ®è¶Šé›†ä¸­ï¼Œè¶Šå¤§ä»£è¡¨æ•°æ®è¶Šåˆ†æ•£ã€‚</p>
<p>åœ¨ matplotlib ä¸­å¯ä»¥ä½¿ç”¨ Axes.boxplot æ–¹æ³•ç»˜åˆ¶ç®±çº¿å›¾ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"># äº§ç”Ÿ 50 ä¸ªå°äº 100 çš„éšæœºæ•°</div><div class="line">spread = np.random.rand(50) * 100</div><div class="line"># äº§ç”Ÿ 25 ä¸ªå€¼ä¸º 50 çš„æ•°æ®</div><div class="line">center = np.ones(25) * 50</div><div class="line"># å¼‚å¸¸å€¼</div><div class="line"></div><div class="line">outlier_high = np.random.rand(10) * 100 + 100</div><div class="line">outlier_low = np.random.rand(10) * -100</div><div class="line">data = np.concatenate((spread, center, outlier_high, outlier_low), 0)</div><div class="line">ax.boxplot(data)</div><div class="line">fig.show()</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç‰¹æ„åˆ›å»ºäº† data æ•°æ®ï¼Œå¯ä»¥æ¨æ–­å‡ºè¯¥æ•°æ®çš„ä¸­ä½æ•°æ˜¯ 50ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–å¼‚å¸¸å€¼</p>
<h3 id="Seaborn"><a href="#Seaborn" class="headerlink" title="Seaborn"></a>Seaborn</h3><h3 id="Bokeh"><a href="#Bokeh" class="headerlink" title="Bokeh"></a>Bokeh</h3>]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> æ•°æ®åˆ†æ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[kaggleå…¥é—¨éšç¬”]]></title>
      <url>/2018/02/26/2018/kaggle%E5%85%A5%E9%97%A8%E9%9A%8F%E7%AC%94/</url>
      <content type="html"><![CDATA[<h3 id="åˆçº§é—®é¢˜"><a href="#åˆçº§é—®é¢˜" class="headerlink" title="åˆçº§é—®é¢˜"></a>åˆçº§é—®é¢˜</h3><ul>
<li>åœ¨å“ªé‡Œç¼–ç <ul>
<li>æ— æ‰€è°“ï¼Œä½†æ˜¯kaggleæä¾›äº†kernalï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å…¶ç¡¬ä»¶èµ„æº</li>
</ul>
</li>
<li>åœ¨å“ªé‡Œæäº¤ï¼Œæäº¤çš„æ˜¯ä»€ä¹ˆ<ul>
<li>åœ¨é—®é¢˜é¡µé¢çš„submitï¼Œç„¶åæäº¤çš„æ˜¯æœ€åä½ é¢„æµ‹çš„ç»“æœï¼Œè€Œä¸æ˜¯ä»£ç <a id="more"></a>
<h3 id="ä¸€èˆ¬æµç¨‹"><a href="#ä¸€èˆ¬æµç¨‹" class="headerlink" title="ä¸€èˆ¬æµç¨‹"></a>ä¸€èˆ¬æµç¨‹</h3></li>
</ul>
</li>
</ul>
<p>æ•°æ®é›†â€“&gt;è®¤è¯†æ•°æ®â€“&gt;æ•°æ®é¢„å¤„ç†â€“&gt;æ„å»ºç‰¹å¾å·¥ç¨‹â€“&gt;é€‰æ‹©ç®—æ³•â€“&gt;ç”Ÿæˆæ¨¡å‹</p>
<h3 id="å·¥å…·é›†"><a href="#å·¥å…·é›†" class="headerlink" title="å·¥å…·é›†"></a>å·¥å…·é›†</h3><ul>
<li>sklearn æœºå™¨å­¦ä¹ ç®—æ³•</li>
<li>pandas æ•°æ®å¤„ç†</li>
<li>numpy æ•°æ®å¤„ç†</li>
<li>matplotlib ä½œå›¾</li>
<li>Seaborn ä½œå›¾</li>
</ul>
<h4 id="matplotlib"><a href="#matplotlib" class="headerlink" title="matplotlib"></a>matplotlib</h4><h3 id="å¼‚å¸¸å€¼ç›‘æµ‹-Outlier-detection"><a href="#å¼‚å¸¸å€¼ç›‘æµ‹-Outlier-detection" class="headerlink" title="å¼‚å¸¸å€¼ç›‘æµ‹(Outlier detection)"></a>å¼‚å¸¸å€¼ç›‘æµ‹(Outlier detection)</h3><p>æ‰¾åˆ°å¼‚å¸¸å€¼ï¼Œç„¶åèˆå¼ƒè¿™äº›æ•°æ®</p>
<h3 id="ç¼ºå¤±å€¼å¤„ç†"><a href="#ç¼ºå¤±å€¼å¤„ç†" class="headerlink" title="ç¼ºå¤±å€¼å¤„ç†"></a>ç¼ºå¤±å€¼å¤„ç†</h3><p>æŸäº›å€¼å¯èƒ½å’Œç¼ºå¤±å€¼å­˜åœ¨æ˜æ˜¾çš„ç›¸å…³æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº›å€¼æ¥æ¨æ–­ç¼ºå¤±çš„å€¼</p>
<h3 id="ç‰¹å¾åˆ†æ-Feature-analysis"><a href="#ç‰¹å¾åˆ†æ-Feature-analysis" class="headerlink" title="ç‰¹å¾åˆ†æ(Feature analysis)"></a>ç‰¹å¾åˆ†æ(Feature analysis)</h3><h3 id="ç®—æ³•æ¯”è¾ƒ"><a href="#ç®—æ³•æ¯”è¾ƒ" class="headerlink" title="ç®—æ³•æ¯”è¾ƒ"></a>ç®—æ³•æ¯”è¾ƒ</h3><p>å¥½å¤šç®—æ³•éƒ½ç”Ÿæˆæ¨¡å‹ï¼Œç„¶åæ¥æµ‹ä¸€ä¸‹è¿™ä¸ªå€¼æ˜¯å¤šå°‘ï¼Œæ¯”è¾ƒä¸€ä¸‹ç”¨å“ªä¸ª</p>
<h3 id="äº¤å‰éªŒè¯-cross-validation"><a href="#äº¤å‰éªŒè¯-cross-validation" class="headerlink" title="äº¤å‰éªŒè¯(cross validation)"></a>äº¤å‰éªŒè¯(cross validation)</h3><h3 id="æ¨¡å‹èåˆ-Combining-models"><a href="#æ¨¡å‹èåˆ-Combining-models" class="headerlink" title="æ¨¡å‹èåˆ(Combining models)"></a>æ¨¡å‹èåˆ(Combining models)</h3><h3 id="ç”¨åˆ°çš„æ–°å‡½æ•°"><a href="#ç”¨åˆ°çš„æ–°å‡½æ•°" class="headerlink" title="ç”¨åˆ°çš„æ–°å‡½æ•°"></a>ç”¨åˆ°çš„æ–°å‡½æ•°</h3><p>collectionsæ¨¡å—<br>Counter ç»Ÿè®¡å…³é”®å­—è®¡æ•°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">In [3]: collections.Counter([&apos;a&apos;,&apos;b&apos;,&apos;b&apos;,&apos;c&apos;,&apos;c&apos;,&apos;c&apos;])</div><div class="line">Out[3]: Counter(&#123;&apos;c&apos;: 3, &apos;b&apos;: 2, &apos;a&apos;: 1&#125;)</div></pre></td></tr></table></figure></p>
<h3 id="å¸¸ç”¨å•è¯"><a href="#å¸¸ç”¨å•è¯" class="headerlink" title="å¸¸ç”¨å•è¯"></a>å¸¸ç”¨å•è¯</h3><p>gaussian distribution â€“ é«˜æ–¯åˆ†å¸ƒ<br>peak corresponding â€“ å³°å€¼<br>cross validation- äº¤å‰éªŒè¯</p>
]]></content>
      
        
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> kaggle </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[xcodeè¯ä¹¦ç›¸å…³]]></title>
      <url>/2018/02/24/2018/xcode%E8%AF%81%E4%B9%A6%E7%9B%B8%E5%85%B3/</url>
      <content type="html"><![CDATA[<p>1.å¦‚æœä½ çš„profileæ–‡ä»¶å§‹ç»ˆæ‰¾ä¸åˆ°è¯ä¹¦ï¼Œä½†æ˜¯è¿™ä¸ªè¯ä¹¦æ˜æ˜åœ¨ä½ çš„è¯ä¹¦é‡Œè¾¹ï¼Œè¿™ä¸ªæ—¶å€™æŸ¥çœ‹å…¨éƒ¨è¯ä¹¦ï¼Œå¯èƒ½å­˜åœ¨é‡åçš„è¯ä¹¦<br><a id="more"></a><br>2.è¯ä¹¦ä»ç½‘ç«™ä¸Šä¸‹è½½æ˜¯ä¸å¥½ä½¿çš„ï¼Œå› ä¸ºæ²¡æœ‰ç§é’¥ï¼Œéœ€è¦è¯ä¹¦çš„åˆ›å»ºè€…å»ç»™ä½ å¯¼å‡ºä¸€ä¸ªp12ï¼Œæˆ–è€…æ‹¥æœ‰p12è¯ä¹¦çš„äººç»™ä½ å¯¼å‡ºä¸€ä¸ªp12ï¼Œè®°å¾—è¦å¸¦ç€é‡Œè¾¹çš„é’¥åŒ™<br>3.appidæ˜¯å†³å®šä½ çš„appæ˜¯å¦å”¯ä¸€çš„ä¸œè¥¿ï¼Œè¯ä¹¦æ˜¯å†³å®šçš„æ˜¯å“ªå°ç”µè„‘æœ‰ç­¾åçš„èƒ½åŠ›ï¼Œprofileæ–‡ä»¶åœ¨åˆ›å»ºçš„æ—¶å€™éœ€è¦ç»‘å®šidï¼Œè¯ä¹¦ï¼Œå’Œè®¾å¤‡idï¼Œå®ƒå†³å®šï¼Œè¿™ä¸ªç”µè„‘ä¸Šèƒ½å¤Ÿç­¾åå“ªä¸ªappï¼Œç„¶åç­¾åå‡ºæ¥çš„appå¯ä»¥ç»™è°å®‰è£…</p>
]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[c++é¢è¯•é¢˜æ±‡æ€»]]></title>
      <url>/2018/02/17/2015/c-%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B1%87%E6%80%BB/</url>
      <content type="html"><![CDATA[<p><a href="https://www.jianshu.com/p/cc1bdada166f" target="_blank" rel="external">https://www.jianshu.com/p/cc1bdada166f</a><br><a href="https://www.jianshu.com/p/06d2f28d0747" target="_blank" rel="external">https://www.jianshu.com/p/06d2f28d0747</a><br><a href="https://www.cnblogs.com/fangyukuan/archive/2010/09/18/1829871.html" target="_blank" rel="external">https://www.cnblogs.com/fangyukuan/archive/2010/09/18/1829871.html</a><br><a href="https://github.com/huihut/interview" target="_blank" rel="external">https://github.com/huihut/interview</a></p>
]]></content>
      
        
        <tags>
            
            <tag> c++ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[python/mongoå¸¸ç”¨è®°å½•]]></title>
      <url>/2018/02/05/2018/python%E8%BF%9B%E9%98%B6%E5%B8%B8%E7%94%A8/</url>
      <content type="html"><![CDATA[<h3 id="pythonå¸¸ç”¨"><a href="#pythonå¸¸ç”¨" class="headerlink" title="pythonå¸¸ç”¨"></a>pythonå¸¸ç”¨</h3><ul>
<li>å¤šè¿›ç¨‹</li>
<li>æ’åº</li>
<li>æ—¶é—´æ¨¡å—</li>
<li>æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£<code>dir(os)</code></li>
<li>å•å…ƒæµ‹è¯•</li>
</ul>
<h4 id="å¤šè¿›ç¨‹"><a href="#å¤šè¿›ç¨‹" class="headerlink" title="å¤šè¿›ç¨‹"></a>å¤šè¿›ç¨‹</h4><p>multiprocessingæ¨¡å—å°±æ˜¯è·¨å¹³å°ç‰ˆæœ¬çš„å¤šè¿›ç¨‹æ¨¡å—ã€‚<br>multiprocessingæ¨¡å—æä¾›äº†ä¸€ä¸ªProcessç±»æ¥ä»£è¡¨ä¸€ä¸ªè¿›ç¨‹å¯¹è±¡ï¼Œä¸‹é¢çš„ä¾‹å­æ¼”ç¤ºäº†å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹å¹¶ç­‰å¾…å…¶ç»“æŸ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">import os</div><div class="line">from multiprocessing import Process</div><div class="line"></div><div class="line">def runfunction(d):</div><div class="line">    time.sleep(3)</div><div class="line">    print &apos;%s &apos; % (os.getpid()) + &apos;is the subprocess&apos;</div><div class="line">    </div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    print &apos;Parent is %s&apos; % os.getpid()</div><div class="line">    p = Process(target=runfunction, args=(&apos;1&apos;,))</div><div class="line">    print &apos;Process will start.&apos;</div><div class="line">    p.start()</div><div class="line">    p.join()#è¿™æ ·å†™å…¶å®æ˜¯åŒæ­¥æ‰§è¡Œçš„è‚¯å®š</div><div class="line">    print &apos;Process end.&apos;</div></pre></td></tr></table></figure>
<p>å¤šä¸ªè¿›ç¨‹ï¼Œä½†æ˜¯å¼‚æ­¥æ‰§è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"># !/usr/bin/env python  </div><div class="line"># -*- coding:utf-8 -*-  </div><div class="line">#</div><div class="line"># Copyright 2015 mimvp.com</div><div class="line">   </div><div class="line">import multiprocessing</div><div class="line">import time</div><div class="line">import os</div><div class="line">   </div><div class="line">def func(name, processName):</div><div class="line">    print &apos;Process[%s]  hello %s&apos; % (processName, name)</div><div class="line">    print &apos;sub pid: %d, ppid: %d&apos; % (os.getpid(), os.getppid())</div><div class="line">    time.sleep(0.1)</div><div class="line">   </div><div class="line">   </div><div class="line">def main():</div><div class="line">    print &apos;main pid: %d, ppid: %d&apos; % (os.getpid(), os.getppid())</div><div class="line">     </div><div class="line">    processList = []</div><div class="line">    for i in xrange(4):</div><div class="line">        pro = multiprocessing.Process(target=func, args=(i, &apos;Process-&apos; + str(i)))</div><div class="line">        pro.start()</div><div class="line">#         pro.join()      # ä¸è¦åœ¨æ­¤å¤„é˜»å¡å­è¿›ç¨‹ï¼Œå¦åˆ™å­è¿›ç¨‹éƒ½å°†æ˜¯çº¿æ€§é¡ºåºæ‰§è¡Œ</div><div class="line">        processList.append(pro)</div><div class="line">         </div><div class="line">    for pro in processList:</div><div class="line">        pro.join()      # åœ¨æ­¤å¤„é˜»å¡å­è¿›ç¨‹ï¼Œå¯å®ç°å¼‚æ­¥æ‰§è¡Œæ•ˆæœï¼Œç›´è‡³å­è¿›ç¨‹å…¨éƒ¨å®Œæˆåå†ç»§ç»­æ‰§è¡Œçˆ¶è¿›ç¨‹</div><div class="line">       </div><div class="line"># æµ‹è¯•</div><div class="line">if __name__ == &apos;__main__&apos;:  </div><div class="line">    main()</div><div class="line">    print(&apos;end.&apos;)</div></pre></td></tr></table></figure>
<p>åŒæ—¶åˆ›å»ºå¤šä¸ªè¿›ç¨‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">from multiprocessing import Pool</div><div class="line">import os, time, random</div><div class="line"></div><div class="line">def long_time_task(name):</div><div class="line">    print &apos;Run task %s (%s)...&apos; % (name, os.getpid())</div><div class="line">    start = time.time()</div><div class="line">    time.sleep(2)</div><div class="line">    end = time.time()</div><div class="line">    print &apos;Task %s runs %0.2f seconds.&apos; % (name, (end - start))</div><div class="line"></div><div class="line">if __name__==&apos;__main__&apos;:</div><div class="line">    print &apos;Parent process %s.&apos; % os.getpid()</div><div class="line">    p = Pool(10)</div><div class="line">    for i in range(10):</div><div class="line">        p.apply_async(long_time_task, args=(i,))</div><div class="line">    print &apos;Waiting for all subprocesses done...&apos;</div><div class="line">    p.close()</div><div class="line">    p.join()</div><div class="line">    print &apos;All subprocesses done.&apos;</div></pre></td></tr></table></figure>
<p>æ ¹æ®å¤šä¸ªå‚æ•°ï¼Œåˆ›å»ºå¤šä¸ªè¿›ç¨‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">def sortwithnum():</div><div class="line">    pass</div><div class="line">    </div><div class="line">dataList = [1,2,3,4,5]    </div><div class="line"></div><div class="line">pool = Pool()  #åˆ›å»ºæ‹¥æœ‰5ä¸ªè¿›ç¨‹æ•°é‡çš„è¿›ç¨‹æ± </div><div class="line">rl = pool.map(sortwithnum, dateList) </div><div class="line">pool.close()#å…³é—­è¿›ç¨‹æ± ï¼Œä¸å†æ¥å—æ–°çš„è¿›ç¨‹</div><div class="line">pool.join()#ä¸»è¿›ç¨‹é˜»å¡ç­‰å¾…å­è¿›ç¨‹çš„é€€å‡º</div></pre></td></tr></table></figure>
<p>è¿›ç¨‹é€šä¿¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">import multiprocessing</div><div class="line">import time</div><div class="line">import os</div><div class="line">   </div><div class="line"> </div><div class="line">lock = multiprocessing.Lock()</div><div class="line"> </div><div class="line">def func(name, processName, queue):</div><div class="line">    p_info = &apos;Process[%s]  hello %s&apos; % (processName, name)</div><div class="line">    queue.put(p_info)</div><div class="line">     </div><div class="line">    print &apos;queue put: &apos;, p_info</div><div class="line">    print &apos;sub pid: %d, ppid: %d&apos; % (os.getpid(), os.getppid())</div><div class="line">    time.sleep(0.5)</div><div class="line">   </div><div class="line">   </div><div class="line">def main():</div><div class="line">    print &apos;main pid: %d, ppid: %d&apos; % (os.getpid(), os.getppid())</div><div class="line">     </div><div class="line">    qu = multiprocessing.Queue()    </div><div class="line">     </div><div class="line">    processList = []</div><div class="line">    for i in xrange(4):</div><div class="line">        pro = multiprocessing.Process(target=func, args=(i, &apos;Process-&apos; + str(i), qu))</div><div class="line">        pro.start()</div><div class="line">        processList.append(pro)</div><div class="line">         </div><div class="line">    for pro in processList:</div><div class="line">        pro.join()  </div><div class="line">       </div><div class="line">    while not qu.empty():</div><div class="line">        p_info = qu.get(block=False)</div><div class="line">        print &apos;queue get: &apos;, p_info</div><div class="line">         </div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:  </div><div class="line">    main()</div><div class="line">    print(&apos;end.&apos;)</div></pre></td></tr></table></figure>
<h4 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">itemList.sort(key=lambda k : (k.get(&apos;datetime&apos;,0),(&apos;createtime&apos;,0)), reverse=False)</div></pre></td></tr></table></figure>
<h4 id="æ—¶é—´æ¨¡å—"><a href="#æ—¶é—´æ¨¡å—" class="headerlink" title="æ—¶é—´æ¨¡å—"></a>æ—¶é—´æ¨¡å—</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">now_time = datetime.datetime.now()</div><div class="line">now_time_string = now_time.strftime(&apos;%Y-%m-%d&apos;)</div><div class="line">yes_time = now_time + datetime.timedelta(days=daysl)</div><div class="line">yes_time_nyr = yes_time.strftime(&apos;%Y-%m-%d&apos;)</div></pre></td></tr></table></figure>
<p>```</p>
]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSçº¿ç¨‹å®‰å…¨ä¸åŸå­å±æ€§]]></title>
      <url>/2018/01/29/2015/iOS%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E4%B8%8E%E5%8E%9F%E5%AD%90%E5%B1%9E%E6%80%A7/</url>
      <content type="html"><![CDATA[<p>Objective-C åœ¨å£°æ˜ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œæƒ³å¿…å¤§å®¶éƒ½æ˜¯ä¸ç”¨ç»è¿‡å¤§è„‘æ€è€ƒå°±ä¼šå†™ <code>@property (nonatomic, ...</code></p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“å±æ€§å¯ä»¥æ˜¯ nonatomic ä¹Ÿå¯ä»¥ä½¿ atomic çš„ï¼Œä½†æ˜¯å¥½åƒå‡ ä¹æ‰€æœ‰å±æ€§åœ¨å£°æ˜çš„æ—¶å€™ nonatomicï¼Œatomic çš„å±æ€§å‡ ä¹æ²¡å‡ºç°è¿‡ã€‚atomic ä¿®é¥°ç¬¦ä»¿ä½›å·²è¢«å¤§å®¶é—å¿˜ã€‚</p>
<p>å®é™…ä¸Šï¼Œå¦‚æœå£°æ˜å±æ€§æ—¶æ—¢ä¸å†™ atomic ä¹Ÿä¸å†™ nonatomicï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§é»˜è®¤æ˜¯ atomic çš„ã€‚</p>
<h3 id="atomic-çš„ä½œç”¨å’Œå·¥ä½œåŸç†"><a href="#atomic-çš„ä½œç”¨å’Œå·¥ä½œåŸç†" class="headerlink" title="atomic çš„ä½œç”¨å’Œå·¥ä½œåŸç†"></a>atomic çš„ä½œç”¨å’Œå·¥ä½œåŸç†</h3><p>ä»å­—é¢ä¸Šæ¥çœ‹ nonatomic æ˜¯éåŸå­çš„ï¼Œatomic æ˜¯åŸå­çš„ã€‚</p>
<h3 id="atomic-çš„ä½œç”¨ä¸ºï¼š"><a href="#atomic-çš„ä½œç”¨ä¸ºï¼š" class="headerlink" title="atomic çš„ä½œç”¨ä¸ºï¼š"></a>atomic çš„ä½œç”¨ä¸ºï¼š</h3><p>atomic ä¿®é¥°çš„å±æ€§çš„å†™æ“ä½œæ˜¯ä¸€ä¸ªåŸå­æ“ä½œã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯åŸå­æ“ä½œï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åŸå­æ“ä½œï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åŸå­æ“ä½œï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åŸå­æ“ä½œï¼Ÿ</h3><p>åŸå­æ“ä½œå°±æ˜¯æŒ‡ä¸ä¼šè¢«çº¿ç¨‹è°ƒåº¦æœºåˆ¶æ‰“æ–­çš„æ“ä½œã€‚è¿™ä¸ªæ“ä½œæ˜¯ä¸€ä¸ªæ•´ä½“ï¼ŒCPU ä¸€æ—¦å¼€å§‹æ‰§è¡Œå®ƒï¼Œå°±ä¼šä¸€ç›´åˆ°æ‰§è¡Œç»“æŸï¼Œåœ¨è¿™æœŸé—´ CPU ä¸ä¼šè½¬è€Œå»æ‰§è¡Œå…¶å®ƒçº¿ç¨‹çš„æ“ä½œã€‚</p>
<h3 id="ä¸¤ç§åŠ é”çš„æ–¹å¼"><a href="#ä¸¤ç§åŠ é”çš„æ–¹å¼" class="headerlink" title="ä¸¤ç§åŠ é”çš„æ–¹å¼"></a>ä¸¤ç§åŠ é”çš„æ–¹å¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (void)setCount:(NSInteger)count &#123;</div><div class="line">    @synchronized (self) &#123;</div><div class="line">        _count = count;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç å®ç°äº†å’Œ atomic ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†æ˜¯åº•å±‚çš„å·¥ä½œæ–¹å¼è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚æˆ‘ä»¬å¸¸å¸¸ç”¨ @synchronized æ¥åŠ é”ï¼Œè¿™ç§é”æ˜¯äº’æ–¥é”ã€‚è€Œ atomic ä¿®é¥°çš„å±æ€§è‡ªå¸¦äº†ä¸€æŠŠè‡ªæ—‹é”ã€‚</p>
<ul>
<li>äº’æ–¥é”    <code>å½“æŸä¸ªèµ„æºè¢«å…ˆè¿›å…¥çš„çº¿ç¨‹ä¸Šäº†é”ä»¥åï¼Œå…¶å®ƒåé¢è¿›å…¥çš„çº¿ç¨‹ä¼šè¿›å…¥ä¼‘çœ çŠ¶æ€ã€‚å½“é”é‡Šæ”¾åï¼Œè¿›å…¥ä¼‘çœ çŠ¶æ€çš„çº¿ç¨‹å˜ä¸ºå”¤é†’çŠ¶æ€ã€‚</code></li>
<li>è‡ªæ—‹é”    <code>å½“æŸä¸ªèµ„æºè¢«å…ˆè¿›å…¥çš„çº¿ç¨‹ä¸Šäº†é”ä»¥åï¼Œå…¶å®ƒåè¿›å…¥çš„çº¿ç¨‹ä¼šå¼€å¯ä¸€ä¸ªå¾ªç¯ï¼Œä¸æ–­æ£€æŸ¥é”æœ‰æ²¡æœ‰é‡Šæ”¾ï¼Œå½“é”é‡Šæ”¾åï¼Œé€€å‡ºå¾ªç¯å¼€å§‹è®¿é—®èµ„æºï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­åè¿›å…¥çš„çº¿ç¨‹ä¸€ç›´ä¿æŒè¿è¡ŒçŠ¶æ€ã€‚</code></li>
</ul>
<h3 id="å¯¹æ¯”-nonatomic-å’Œ-atomic"><a href="#å¯¹æ¯”-nonatomic-å’Œ-atomic" class="headerlink" title="å¯¹æ¯” nonatomic å’Œ atomic"></a>å¯¹æ¯” nonatomic å’Œ atomic</h3><ul>
<li>nonatomic    æ‰§è¡Œæ•ˆç‡é«˜ï¼Œæ€§èƒ½å¥½    ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</li>
<li>atomic    çº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯ä»…èƒ½ä¿è¯å†™æ“ä½œçš„çº¿ç¨‹å®‰å…¨    å¤§å¹…é™ä½æ‰§è¡Œæ•ˆç‡</li>
</ul>
<h3 id="å…³äºçº¿ç¨‹å®‰å…¨é¦–å…ˆç†è§£"><a href="#å…³äºçº¿ç¨‹å®‰å…¨é¦–å…ˆç†è§£" class="headerlink" title="å…³äºçº¿ç¨‹å®‰å…¨é¦–å…ˆç†è§£"></a>å…³äºçº¿ç¨‹å®‰å…¨é¦–å…ˆç†è§£</h3><p>æˆ‘ä»¬åªæœ‰ä¸€ä¸ªåœ°å€æ€»çº¿ï¼Œä¸€ä¸ªå†…å­˜ã€‚å³ä½¿æ˜¯åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ï¼Œä¹Ÿä¸å¯èƒ½å­˜åœ¨ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€å—å†…å­˜åŒºåŸŸçš„åœºæ™¯ï¼Œå†…å­˜çš„è®¿é—®ä¸€å®šæ˜¯é€šè¿‡ä¸€ä¸ªåœ°å€æ€»çº¿ä¸²è¡Œæ’é˜Ÿè®¿é—®çš„ï¼Œæ‰€ä»¥åœ¨ç»§ç»­åç»­ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦æ˜ç¡®å‡ ä¸ªç»“è®ºï¼š</p>
<p>ç»“è®ºä¸€ï¼šå†…å­˜çš„è®¿é—®æ—¶ä¸²è¡Œçš„ï¼Œå¹¶ä¸ä¼šå¯¼è‡´å†…å­˜æ•°æ®çš„é”™ä¹±æˆ–è€…åº”ç”¨çš„crashã€‚</p>
<p>ç»“è®ºäºŒï¼šå¦‚æœè¯»å†™ï¼ˆload or storeï¼‰çš„å†…å­˜é•¿åº¦å°äºç­‰äºåœ°å€æ€»çº¿çš„é•¿åº¦ï¼Œé‚£ä¹ˆè¯»å†™çš„æ“ä½œæ˜¯åŸå­çš„ï¼Œä¸€æ¬¡å®Œæˆã€‚æ¯”å¦‚boolï¼Œintï¼Œlongåœ¨64ä½ç³»ç»Ÿä¸‹çš„å•æ¬¡è¯»å†™éƒ½æ˜¯åŸå­æ“ä½œã€‚</p>
<h3 id="çº¿ç¨‹ä¸å®‰å…¨ä¸¾ä¾‹"><a href="#çº¿ç¨‹ä¸å®‰å…¨ä¸¾ä¾‹" class="headerlink" title="çº¿ç¨‹ä¸å®‰å…¨ä¸¾ä¾‹"></a>çº¿ç¨‹ä¸å®‰å…¨ä¸¾ä¾‹</h3><ul>
<li>é’ˆå¯¹intç±»å‹ï¼Œå¯èƒ½å‡ºç°ï¼Œæ•°å€¼è®¡ç®—ä¸å¯¹çš„æƒ…å†µ</li>
<li>é’ˆå¯¹æŒ‡é’ˆé‚£å°±æ˜¯ï¼Œå¦‚æœAçº¿ç¨‹è·å–äº†æŒ‡é’ˆï¼Œä½†æ˜¯åœ¨Bçº¿ç¨‹å¯¹å¯¹è¿™ä¸ªæŒ‡é’ˆçš„å†…å­˜ç©ºé—´è¿›è¡Œäº†é‡Šæ”¾ï¼Œé‚£ä¹ˆåœ¨Açº¿ç¨‹å°±ä¼šé€ æˆå´©æºƒ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">@property (atomic, strong) NSString*                 stringA;</div><div class="line"></div><div class="line">//thread A</div><div class="line">for (int i = 0; i &lt; 100000; i ++) &#123;</div><div class="line">    if (i % 2 == 0) &#123;</div><div class="line">        self.stringA = @&quot;a very long string&quot;;</div><div class="line">    &#125;</div><div class="line">    else &#123;</div><div class="line">        self.stringA = @&quot;string&quot;;</div><div class="line">    &#125;</div><div class="line">    NSLog(@&quot;Thread A: %@\n&quot;, self.stringA);</div><div class="line">&#125;</div><div class="line"></div><div class="line">//thread B</div><div class="line">for (int i = 0; i &lt; 100000; i ++) &#123;</div><div class="line">    if (self.stringA.length &gt;= 10) &#123;</div><div class="line">        NSString* subStr = [self.stringA substringWithRange:NSMakeRange(0, 10)];</div><div class="line">    &#125;</div><div class="line">    NSLog(@&quot;Thread B: %@\n&quot;, self.stringA);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ­£ç¡®åšæ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">//thread A</div><div class="line">[_lock lock];</div><div class="line">for (int i = 0; i &lt; 100000; i ++) &#123;</div><div class="line">    if (i % 2 == 0) &#123;</div><div class="line">        self.stringA = @&quot;a very long string&quot;;</div><div class="line">    &#125;</div><div class="line">    else &#123;</div><div class="line">        self.stringA = @&quot;string&quot;;</div><div class="line">    &#125;</div><div class="line">    NSLog(@&quot;Thread A: %@\n&quot;, self.stringA);</div><div class="line">&#125;</div><div class="line">[_lock unlock];</div><div class="line"></div><div class="line">//thread B</div><div class="line">[_lock lock];</div><div class="line">if (self.stringA.length &gt;= 10) &#123;</div><div class="line">    NSString* subStr = [self.stringA substringWithRange:NSMakeRange(0, 10)];</div><div class="line">&#125;</div><div class="line">[_lock unlock];</div></pre></td></tr></table></figure>
<p>è™½ç„¶stringAæ˜¯atomicçš„propertyï¼Œè€Œä¸”åœ¨å–substringçš„æ—¶å€™åšäº†lengthåˆ¤æ–­ï¼Œçº¿ç¨‹Bè¿˜æ˜¯å¾ˆå®¹æ˜“crashï¼Œå› ä¸ºåœ¨å‰ä¸€åˆ»è¯»lengthçš„æ—¶å€™self.stringA = @â€a very long stringâ€;ï¼Œä¸‹ä¸€åˆ»å–substringçš„æ—¶å€™çº¿ç¨‹Aå·²ç»å°†self.stringA = @â€stringâ€;ï¼Œç«‹å³å‡ºç°out of boundsçš„Exceptionï¼Œcrashï¼Œå¤šçº¿ç¨‹ä¸å®‰å…¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">@property (atomic, strong) NSArray*                 arr;</div><div class="line"></div><div class="line">//thread A</div><div class="line">for (int i = 0; i &lt; 100000; i ++) &#123;</div><div class="line">    if (i % 2 == 0) &#123;</div><div class="line">        self.arr = @[@&quot;1&quot;, @&quot;2&quot;, @&quot;3&quot;];</div><div class="line">    &#125;</div><div class="line">    else &#123;</div><div class="line">        self.arr = @[@&quot;1&quot;];</div><div class="line">    &#125;</div><div class="line">    NSLog(@&quot;Thread A: %@\n&quot;, self.arr);</div><div class="line">&#125;</div><div class="line"></div><div class="line">//thread B</div><div class="line">for (int i = 0; i &lt; 100000; i ++) &#123;</div><div class="line">    if (self.arr.count &gt;= 2) &#123;</div><div class="line">        NSString* str = [self.arr objectAtIndex:1];</div><div class="line">    &#125;</div><div class="line">    NSLog(@&quot;Thread B: %@\n&quot;, self.arr);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">//thread A</div><div class="line">[_lock lock];</div><div class="line">for (int i = 0; i &lt; 100000; i ++) &#123;</div><div class="line">    if (i % 2 == 0) &#123;</div><div class="line">        self.arr = @[@&quot;1&quot;, @&quot;2&quot;, @&quot;3&quot;];</div><div class="line">    &#125;</div><div class="line">    else &#123;</div><div class="line">        self.arr = @[@&quot;1&quot;];</div><div class="line">    &#125;</div><div class="line">    NSLog(@&quot;Thread A: %@\n&quot;, self.arr);</div><div class="line">&#125;</div><div class="line">[_lock unlock];</div><div class="line">    </div><div class="line">//thread B</div><div class="line">[_lock lock];</div><div class="line">if (self.arr.count &gt;= 2) &#123;</div><div class="line">    NSString* str = [self.arr objectAtIndex:1];</div><div class="line">&#125;</div><div class="line">[_lock unlock];</div></pre></td></tr></table></figure>
<p>åŒç†ï¼Œå³ä½¿æˆ‘ä»¬åœ¨è®¿é—®objectAtIndexä¹‹å‰åšäº†countçš„åˆ¤æ–­ï¼Œçº¿ç¨‹Bä¾æ—§å¾ˆå®¹æ˜“crashï¼ŒåŸå› ä¹Ÿæ˜¯ç”±äºå‰åä¸¤è¡Œä»£ç ä¹‹é—´arræ‰€æŒ‡å‘çš„å†…å­˜åŒºåŸŸè¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº†ã€‚</p>
<p>æ‰€ä»¥ä½ çœ‹ï¼ŒçœŸæ­£éœ€è¦æ“å¿ƒçš„æ˜¯è¿™ä¸€ç±»å†…å­˜åŒºåŸŸçš„è®¿é—®ï¼Œå³ä½¿å£°æ˜ä¸ºatomicä¹Ÿæ²¡æœ‰ç”¨ï¼Œæˆ‘ä»¬å¹³å¸¸Appå‡ºç°è«åå…¶å¦™éš¾ä»¥é‡ç°çš„å¤šçº¿ç¨‹crashå¤šæ˜¯å±äºè¿™ä¸€ç±»ï¼Œä¸€æ—¦åœ¨å¤šçº¿ç¨‹çš„åœºæ™¯ä¸‹è®¿é—®è¿™ç±»å†…å­˜åŒºåŸŸçš„æ—¶å€™ï¼Œè¦æèµ·åäºŒåˆ†çš„å°å¿ƒã€‚å¦‚ä½•é¿å…è¿™ç±»crashåé¢ä¼šè°ˆåˆ°ã€‚</p>
<h3 id="Propertyå¤šçº¿ç¨‹å®‰å…¨å°ç»“ï¼š"><a href="#Propertyå¤šçº¿ç¨‹å®‰å…¨å°ç»“ï¼š" class="headerlink" title="Propertyå¤šçº¿ç¨‹å®‰å…¨å°ç»“ï¼š"></a>Propertyå¤šçº¿ç¨‹å®‰å…¨å°ç»“ï¼š</h3><p>ç®€è€Œè¨€ä¹‹ï¼Œatomicçš„ä½œç”¨åªæ˜¯ç»™getterå’ŒsetteråŠ äº†ä¸ªé”ï¼Œatomicåªèƒ½ä¿è¯ä»£ç è¿›å…¥getteræˆ–è€…setterå‡½æ•°å†…éƒ¨æ—¶æ˜¯å®‰å…¨çš„ï¼Œä¸€æ—¦å‡ºäº†getterå’Œsetterï¼Œå¤šçº¿ç¨‹å®‰å…¨åªèƒ½é ç¨‹åºå‘˜è‡ªå·±ä¿éšœäº†ã€‚æ‰€ä»¥atomicå±æ€§å’Œä½¿ç”¨propertyçš„å¤šçº¿ç¨‹å®‰å…¨å¹¶æ²¡ä»€ä¹ˆç›´æ¥çš„è”ç³»ã€‚å¦å¤–ï¼Œatomicç”±äºåŠ é”ä¹Ÿä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½æŸè€—ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ç¼–å†™iOSä»£ç çš„æ—¶å€™ï¼Œä¸€èˆ¬å£°æ˜propertyä¸ºnonatomicï¼Œåœ¨éœ€è¦åšå¤šçº¿ç¨‹å®‰å…¨çš„åœºæ™¯ï¼Œè‡ªå·±å»é¢å¤–åŠ é”åšåŒæ­¥ã€‚</p>
<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="http://mrpeak.cn/blog/ios-thread-safety/" target="_blank" rel="external">MrPeak</a></p>
]]></content>
      
        
        <tags>
            
            <tag> iOSåŸºç¡€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ç”¨æˆ·è¡Œä¸ºè·¯å¾„åˆ†ææ€è·¯]]></title>
      <url>/2018/01/23/2018/%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E8%B7%AF%E5%BE%84%E5%88%86%E6%9E%90%E6%80%9D%E8%B7%AF/</url>
      <content type="html"><![CDATA[<ul>
<li>ç”¨æˆ·ç‰¹å¾åˆ†æ</li>
<li>é¢„æµ‹æ¨¡å‹</li>
<li>æ´»è·ƒåº¦å®šä¹‰</li>
<li>ç”¨æˆ·è·¯å¾„åˆ†æ</li>
<li>äº¤å‰é”€å”®</li>
<li>ç”¨æˆ·åˆ†å±‚</li>
</ul>
<p>Predict Customer Behaviour<br>customerâ€™s classification</p>
<p>æ„å›¾è¯†åˆ«<br>ç¡®å®šå“ªäº›è·¯å¾„å¯ä»¥ä¿ƒè¿›å¢é•¿ï¼Œå®¢æˆ·å¿ è¯šåº¦å’Œæ»¡æ„åº¦ï¼Œå“ªäº›è·¯å¾„ä¼šå¢åŠ ç”¨æˆ·çš„æŠ±æ€¨</p>
<p>å‘ç°ã€‚ æœºå™¨å­¦ä¹ æ­ç¤ºäº†å®¢æˆ·è·¨è¶Šæ¸ é“å’Œæ—¶é—´è·¨è¶Šçš„æœ€å…³é”®é€”å¾„ï¼Œå¹¶è¯†åˆ«å®¢æˆ·æ—…ç¨‹ä¸­çš„å…³é”®éšœç¢å’Œæœºä¼šï¼Œä»¥ä¾¿å°†æ³¨æ„åŠ›é›†ä¸­åœ¨é’ˆå¤´ä¸Šã€‚<br>ç›®æ ‡ã€‚ ä½¿ç”¨äººå£ç»Ÿè®¡ç‰¹æ€§å’Œä¸Šä¸‹æ–‡å±æ€§ï¼Œå¯ä»¥å¿«é€ŸæŸ¥æ˜ç‰¹å®šå®¢æˆ·ç¾¤çš„è½¬æ¢å¯èƒ½æ€§æœ€é«˜ã€‚<br>ä»äº‹ã€‚æ ¹æ®æ¯ä½å®¢æˆ·çš„ä¸ªäººè¡Œä¸ºï¼Œåœ¨æ­£ç¡®çš„æ—¶é—´ä¸ºåˆé€‚çš„å®¢æˆ·æä¾›ä¸ªæ€§åŒ–çš„ä½“éªŒï¼Œåˆ©ç”¨Pointillistå¹³å°çš„æ™ºæ…§ä»¥åŠä¸æŠ€æœ¯æ ˆä¸­ç°æœ‰çš„è¥é”€å·¥å…·çš„é›†æˆã€‚<br>ç›‘æ§ã€‚è¯„ä¼°è¥é”€æ´»åŠ¨å’Œç­–ç•¥å¯¹æ‚¨çš„KPIçš„å½±å“å¹¶å®æ—¶ç›‘æ§å˜åŒ–ï¼Œä»¥ä¾¿æ‚¨çš„å›¢é˜Ÿèƒ½å¤Ÿè¿…é€Ÿå°†æ´å¯ŸåŠ›è½¬åŒ–ä¸ºæ¨åŠ¨ç»“æœçš„è¡ŒåŠ¨</p>
<p>åœ¨ä¸€æ®µæ—¶é—´å†…å¿«é€Ÿäº†è§£æ‰€æœ‰æ¥è§¦ç‚¹å’Œæ¸ é“ä¸­çš„å®¢æˆ·è¡Œä¸º<br>å‘ç°å’Œé¢„æµ‹é«˜å½±å“åŠ›çš„å®¢æˆ·æ—…ç¨‹<br>æ¨åŠ¨ä¸ªæ€§åŒ–ï¼Œå¤šæ¸ é“çš„å®¢æˆ·ä½“éªŒ </p>
<p>ç”¨æˆ·åˆ†å±‚ï¼Œåˆ†ç±»çš„ä¾æ®</p>
<p>ç›®çš„æ˜¯ä»€ä¹ˆï¼Œæœ‰æ²¡æœ‰è¾¾åˆ°ä»–çš„ç›®çš„</p>
<p>ç”¨æˆ·åœ¨å¦‚ä½•ä½¿ç”¨æˆ‘ä»¬çš„äº§å“ï¼Œåœ¨æˆ‘ä»¬äº§å“é‡Œå¹²ä»€ä¹ˆ</p>
<p>é€šè¿‡ä½¿ç”¨é…å¤‡å…ˆè¿›çš„æœºå™¨å­¦ä¹ ç®—æ³•çš„å®¢æˆ·æ—…ç¨‹åˆ†æå¹³å°ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿå‘ç°æ—…ç¨‹ä¸­çš„é‡è¦äº‹ä»¶ï¼Œä¾‹å¦‚å®¢æˆ·ä»æ—…ç¨‹ä¸­çš„Aç‚¹åˆ°Bç‚¹æœ€å¸¸è§çš„è·¯å¾„ã€‚æ­¤å¤–ï¼Œå®ƒä½¿æ‚¨èƒ½å¤Ÿå®æ—¶é¢„æµ‹å®¢æˆ·è¡Œä¸ºï¼Œå¹¶å†³å®šæœ€åˆé€‚çš„å‚ä¸æ–¹å¼ã€‚<br>åœ¨ä¸Šé¢çš„å›¾è¡¨ä¸­ï¼Œæœºå™¨å­¦ä¹ ç®—æ³•ç”¨äºå¯¹æ•°ç™¾ä¸‡æ¬¡å®é™…æ—…ç¨‹è¿›è¡Œåˆ†ç±»ï¼Œä»¥æ­ç¤ºå®¢æˆ·åœ¨åœ¨çº¿æŸ¥çœ‹äº§å“å’Œé€€å‡ºä¹‹é—´æ‰€é‡‡ç”¨çš„æœ€é‡è¦è·¯å¾„ã€‚</p>
<p>å®¢æˆ·æ—…ç¨‹åˆ†æä½¿è¥é”€å’ŒCXå›¢é˜Ÿä¸ä»…èƒ½å¤Ÿå‘ç°å“ªäº›æ—…ç¨‹æœ€é‡è¦ï¼Œè€Œä¸”èƒ½å¤Ÿé€šè¿‡ä»–ä»¬çš„é¦–é€‰æ¸ é“å’Œç›¸å…³çš„ä¸ªæ€§åŒ–æ–¹å¼ï¼Œåœ¨æœ€ä½³æ—¶é—´è‡ªåŠ¨ä¸æ¯ä¸ªå®¢æˆ·è¿›è¡Œäº’åŠ¨ã€‚<br>é€šè¿‡åœ¨æ—…é€”ä¸­çš„ä»»ä½•äº‹ä»¶ä¸­åµŒå…¥è§¦å‘å™¨ï¼Œæ‚¨å¯ä»¥åœ¨ç‰¹å®šäº‹ä»¶ä¸­æ¿€æ´»å‚ä¸ï¼ˆä¾‹å¦‚ç”µå­é‚®ä»¶å‘é€ï¼‰åˆ°ç›®æ ‡å®¢æˆ·ç¾¤ - è½¬æ¢çš„å®¢æˆ·ï¼Œå‘å‰ç§»åŠ¨çš„å®¢æˆ·ï¼Œç”šè‡³åœ¨ç‰¹å®šçš„ç‚¹æ—…ç¨‹ã€‚ è¿™äº›å®æ—¶å‚ä¸è§¦å‘å™¨æ¯”ä»¥å¾€çš„åŸºäºè§„åˆ™çš„ç¼–ç ç³»ç»Ÿæ›´å®¹æ˜“ç®¡ç†å’Œæ›´æœ‰æ•ˆã€‚</p>
<p>é«˜çº§å®¢æˆ·æ—…ç¨‹åˆ†æå¹³å°ä¸å¸¸ç”¨çš„è¥é”€å·¥å…·é›†æˆåœ¨ä¸€èµ·ï¼Œå› æ­¤æ‚¨å¯ä»¥ä½¿ç”¨ç°æœ‰çš„è¥é”€æŠ€æœ¯å †æ ˆä¸æ‚¨çš„å®¢æˆ·è¿›è¡Œäº’åŠ¨ã€‚ç»“æœæ˜¯è¥é”€å’ŒCXå¹¿å‘Šç³»åˆ—çš„æ€§èƒ½æé«˜äº†ä¸€ä¸ªæ–°çš„æ°´å¹³ï¼Œé€šè¿‡æ›´å¥½çš„ç²¾åº¦ï¼Œç›®æ ‡å’Œæ—¶é—´ã€‚</p>
<p>å†…å®¹æŠ¥å‘Šå¯å¸®åŠ©æ‚¨äº†è§£ç½‘ç«™çš„å“ªäº›éƒ¨åˆ†æ•ˆæœç†æƒ³ã€å“ªäº›é¡µé¢æœ€å—æ¬¢è¿ï¼Œå¹¶æ®æ­¤ä¸ºå®¢æˆ·è¥é€ æ›´ä½³çš„ä½“éªŒã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œç›®æ ‡æ˜¯ï¼š</p>
<p>é€šè¿‡äººç‰©è§’è‰²å½¢è±¡åŒ–å’Œæ˜ å°„ç«¯åˆ°ç«¯çš„å®¢æˆ·æ—…ç¨‹<br>ä¼˜åŒ–æ­£ç¡®çš„æ—…ç¨‹å±æ€§å¯ä»¥æé«˜æ”¶ç›Š30ï¼…ä»¥ä¸Šâ€¦å‘ç°æœ€ä½³å®ç°ç›®æ ‡ç›®æ ‡çš„ç½‘ç»œï¼Œç§»åŠ¨å’Œå®ä½“æ¸ é“ï¼Œå†…å®¹å’Œä½“éªŒçš„æ­£ç¡®ç»„åˆ<br>ä½¿è¥é”€äººå‘˜èƒ½å¤Ÿè¯†åˆ«ä¸ªäººå’Œå›¢ä½“çš„æ—…ç¨‹ç“¶é¢ˆ<br>åˆ©ç”¨å®é™…è¡Œä¸ºæ•°æ®æ¥å¢å¼ºå’Œä¸ªæ€§åŒ–æ¯ä¸ªå®¢æˆ·çš„ä½“éªŒ</p>
<p>ç®€å•çš„ä¸ªæ€§åŒ–â€¦ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡ç®€å•çš„â€œä¸ªæ€§åŒ–â€å®¢æˆ·ä½“éªŒï¼ŒåŸºäºæµ…æ•°æ®ï¼Œå¦‚è´­ä¹°å†å²ï¼Œæ€§åˆ«ï¼Œå•èº«æˆ–ç»“å©šï¼Œä½åœ¨å“ªé‡Œç­‰ç­‰ã€‚<br>åŠ¨æ€ä¸ªæ€§åŒ–â€¦ç°åœ¨ï¼Œæˆ‘ä»¬æ­£åœ¨è¿›å…¥ä¸€ä¸ªæ–°çš„é˜¶æ®µï¼Œé‡ç‚¹æ˜¯æœ€ä½³æ¶ˆæ¯+æœ€ä½³é€šé“+æœ€ä½³æ—¶æœº+æœ€ä½³è®¾å¤‡ã€‚è¿™ä¸»è¦æ˜¯ç”±é¢„æµ‹åˆ†æï¼ˆä¾‹å¦‚Next Next Offerï¼‰ï¼Œæœºå™¨å­¦ä¹ ï¼Œå…´è¶£å›¾ï¼Œä½ç½®æ„ŸçŸ¥ä¸Šä¸‹æ–‡æ•æ„Ÿåº¦ä»¥åŠå¤§è§„æ¨¡ä¸ªæ€§åŒ–æ‰€é©±åŠ¨çš„ã€‚</p>
<p>æ›´å¤æ‚çš„å…¬å¸æ— ç¼åœ°åˆ›å»ºé—­ç¯ï¼ˆåˆ†æå’Œå‚ä¸å’Œæœºå™¨å­¦ä¹ ï¼‰ã€‚å®ƒä»¬åˆ©ç”¨å®¢æˆ·èº«ä»½ï¼Œä½ç½®ï¼Œå½“å‰æ´»åŠ¨ï¼Œç‰©ç†çŠ¶å†µï¼ˆå¤©æ°”ï¼Œäº¤é€šç­‰ï¼‰ï¼Œè´­ä¹°å†å²ï¼Œç§»åŠ¨æ¨¡å¼ï¼Œéšå«å’Œæ˜ç¡®çš„æ„å›¾ä¿¡å·ä»¥åŠç¤¾äº¤å›¾å½¢ç­‰å®æ—¶ä¿¡å·ã€‚</p>
<p>å‡ å®¶å…¬å¸æ­£åœ¨å°†é¢„æµ‹åˆ†æçº³å…¥ç§»åŠ¨è¥é”€å¹³å°ã€‚é€šè¿‡æ ¹æ®å†å²æ•°æ®åˆ†æå¤šä¸ªå®æ—¶æ•°æ®æµï¼Œç®—æ³•æ¨¡å‹é¢„æµ‹æœªæ¥è¶‹åŠ¿ï¼Œç”¨æˆ·åå¥½å’Œè¡ŒåŠ¨ï¼Œè®©å“ç‰ŒçŸ¥é“å®¢æˆ·åœ¨åšä»€ä¹ˆä¹‹å‰è¦åšçš„äº‹æƒ…ï¼Œæ¯”å¦‚æ”¾å¼ƒè´­ç‰©è½¦ï¼Œæ…åŠ¨æˆ–åˆ†äº«ä»–ä»¬çš„ä½“éªŒï¼Ÿç›®æ ‡æ˜¯ä»‹å…¥æ­£ç¡®çš„ä¿¡æ¯æˆ–æè®®æ¥æ¿€åŠ±æˆ–æ”¹å˜ä»–ä»¬çš„è¡Œä¸ºã€‚</p>
<p>è¿™ç§åˆ†ææ´å¯ŸåŠ›ä½¿é›¶å”®å•†èƒ½å¤Ÿè½¬ç§»åº—å†…ç­–ç•¥å’Œè¿è¥ï¼Œä»¥åŒ¹é…è´­ç‰©è€…çš„å…´è¶£å’Œè¡Œä¸ºï¼Œä»è€Œæé«˜å®¢æˆ·çš„å¿ è¯šåº¦</p>
<p>å®¢æˆ·æµå¤±é€šè¿‡æ”¶å…¥æŸå¤±é™ä½ç›ˆåˆ©èƒ½åŠ›<br>å®¢æˆ·æµå¤±å¯¼è‡´æ›´å¤§çš„è¥é”€å’Œé‡æ–°è´­ç½®æˆæœ¬<br>å‘ç°æœ‰å®¢æˆ·é”€å”®çš„å¯èƒ½æ€§è¿œé«˜äºæ–°çš„å‰æ™¯<br>äº†è§£å®¢æˆ·æµå¤±ç‡æœ‰åŠ©äºè®¡ç®—å®¢æˆ·çš„ç”Ÿå‘½å‘¨æœŸä»·å€¼<br>è¿™æ˜¯è¡¡é‡å…¬å¸å¥åº·çŠ¶å†µå’Œé•¿è¿œå‰æ™¯çš„ä¸€ä¸ªæŒ‡æ ‡<br>å®¢æˆ·æµå¤±å†³å®šäº†å®¢æˆ·ä¿ç•™æ˜¯å¦åœ¨æ”¹å–„<br>å®ƒæœ‰åŠ©äºç¡®å®šå“ªäº›å®¢æˆ·å’Œç»†åˆ†å¸‚åœºæœ€é€‚åˆæ‚¨çš„äº§å“</p>
<p>ä¸€ä¸ªå…¸å‹çš„é¡¾å®¢ä»Šå¤©å¯èƒ½ä¼šé¦–å…ˆé€šè¿‡ç¤¾äº¤åª’ä½“å¹¿å‘Šæ‰¾åˆ°äº§å“ï¼Œåœ¨å…¬å¸ç½‘ç«™ä¸ŠæŸ¥çœ‹å¹¶åœ¨å®ä½“åº—è´­ä¹°ã€‚ä½†æ˜¯ï¼Œæ‚¨æ˜¯å¦æœ‰èƒ½åŠ›å°†è¿™ä¸ªå®¢æˆ·è§†ä¸ºä¸€ä¸ªäººè€Œä¸æ˜¯ä¸‰ä¸ªä¸åŒçš„è´­ç‰©è€…ï¼Ÿå¤§å¤šæ•°å…¬å¸ä»å°†æ¯ä¸ªè®¾å¤‡å’Œæ¯ä¸ªäº¤äº’ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„å®¢æˆ·ï¼Œå°†å®¢æˆ·æ—…ç¨‹åˆ†è§£æˆä¸åŒçš„ç¢ç‰‡ã€‚</p>
<h3 id="ç”¨æˆ·è·¯å¾„åˆ†æ"><a href="#ç”¨æˆ·è·¯å¾„åˆ†æ" class="headerlink" title="ç”¨æˆ·è·¯å¾„åˆ†æ"></a>ç”¨æˆ·è·¯å¾„åˆ†æ</h3><ul>
<li>ç”¨æˆ·å…¸å‹ï¼Œé¢‘ç¹è·¯å¾„è¯†åˆ«</li>
<li>ç”¨æˆ·è¡Œä¸ºç‰¹å¾è¯†åˆ«</li>
</ul>
<h3 id="è¾“å‡º"><a href="#è¾“å‡º" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h3><ul>
<li>æ´»è·ƒåº¦å®šä¹‰ï¼Œç¬¦åˆè¯¥åˆ†å€¼çš„ç”¨æˆ·æ›´å®¹æ˜“è½¬åŒ–ä¸ºä»˜è´¹ç”¨æˆ·å•Šï¼Œæ–°çš„æ ‡å‡†æ›´å®¹æ˜“ååº”å’Œè¡¡é‡äº§å“çš„è¿è¥æ•ˆæœå’Œæ•ˆç‡ï¼Œæ¯”å¦‚ç›®æ ‡æ˜¯ä»˜è´¹ç”¨æˆ·ï¼Œé‚£ä¹ˆç¬¦åˆè¯¥æŒ‡æ ‡çš„ç”¨æˆ·åº”è¯¥è¶Šå¤§ç¨‹åº¦å±äºä»˜è´¹ç”¨æˆ·ï¼Œé‚£ä¹ˆè¯´æ˜è¯¥æŒ‡æ ‡çš„è¶Šåˆç†(ä¸»æˆåˆ†æ+å†³ç­–å½’å› )</li>
<li>åŸºäºè¡Œä¸ºè·¯å¾„çš„ç”¨æˆ·æ ‡ç­¾ç³»ç»Ÿ(ç”¨æˆ·åˆ†å±‚/åˆ†ç±»)å¯ä»¥æä¾›ç»™åƒäººåƒé¢+è¿è¥ æ¯”å¦‚æµå¤±ï¼Œä»˜è´¹ï¼Œæ´»åŠ¨å“åº”ç­‰ç»´åº¦(ç»´åº¦æ¥æºå¢é‡å¯ä»¥æ˜¯ç”¨æˆ·åé¦ˆ)<ul>
<li>å®æ—¶é¢„æµ‹å®¢æˆ·è¡Œä¸ºï¼Œå¹¶å†³å®šæœ€åˆé€‚çš„å‚ä¸æ–¹å¼<ul>
<li>é€šè¿‡åœ¨æ—…é€”ä¸­çš„ä»»ä½•äº‹ä»¶ä¸­åµŒå…¥è§¦å‘å™¨ï¼Œæ‚¨å¯ä»¥åœ¨ç‰¹å®šäº‹ä»¶ä¸­æ¿€æ´»å‚ä¸ï¼ˆä¾‹å¦‚ç”µå­é‚®ä»¶å‘é€ï¼‰åˆ°ç›®æ ‡å®¢æˆ·ç¾¤ - è½¬æ¢çš„å®¢æˆ·ï¼Œå‘å‰ç§»åŠ¨çš„å®¢æˆ·ï¼Œç”šè‡³åœ¨ç‰¹å®šçš„ç‚¹æ—…ç¨‹ã€‚ è¿™äº›å®æ—¶å‚ä¸è§¦å‘å™¨æ¯”ä»¥å¾€çš„åŸºäºè§„åˆ™çš„ç¼–ç ç³»ç»Ÿæ›´å®¹æ˜“ç®¡ç†å’Œæ›´æœ‰æ•ˆ </li>
</ul>
</li>
</ul>
</li>
<li>å®æ—¶çš„Journey Map(ç”¨æˆ·æ—…è¡Œåœ°å›¾)<ul>
<li>äº§å“ä½¿ç”¨æ¨¡å¼è®¾è®¡ä¸å®é™…æƒ…å†µå¯¹æ¯”ï¼Œæå‰é¢„æƒ³ç”¨æˆ·å¯èƒ½çš„æ“ä½œæ¨¡å¼ï¼Œä¸å®é™…çš„å¯¹æ¯”ï¼Œå¦‚æœå‘ç°ä¸ä¸€è‡´å¯ä»¥æ·±å…¥åˆ†æåŸå› è°ƒæ•´äº§å“ç­–ç•¥å’Œè¿è¥ç­–ç•¥ï¼Œä¸ºä»€ä¹ˆè¿™ç§è®¾è®¡æ˜¯æœ‰æ•ˆçš„ï¼Œè€Œé‚£ç§æ˜¯æ— æ•ˆçš„(å› ç´ æç‚¼)</li>
<li>é¢‘ç¹è·¯å¾„å’Œå…¸å‹è·¯å¾„æ­ç¤ºï¼Œæ­ç¤ºå®¢æˆ·åœ¨åœ¨çº¿æŸ¥çœ‹äº§å“å’Œé€€å‡ºä¹‹é—´æ‰€é‡‡ç”¨çš„æœ€é‡è¦è·¯å¾„:å®¢æˆ·åœ¨åšä»€ä¹ˆä¹‹å‰è¦åšçš„äº‹æƒ…ï¼Œæ¯”å¦‚æ”¾å¼ƒè´­ä¹°æˆ–åˆ†äº«ä»–ä»¬çš„ä½“éªŒï¼Ÿç›®æ ‡æ˜¯ä»‹å…¥æ­£ç¡®çš„ä¿¡æ¯æˆ–æè®®æ¥æ¿€åŠ±æˆ–æ”¹å˜ä»–ä»¬çš„è¡Œä¸ºï¼Œå…·ä½“æ¯”å¦‚è¯´ï¼Œé€šè¿‡èšç±»æŠ€æœ¯åˆ’åˆ†ä»˜è´¹å’Œéä»˜è´¹ï¼Œå¯¹æ¯”ä¸¤è€…è·¯å¾„ä¼˜åŒ–é¡µé¢å¸ƒå±€ï¼Œé€šè¿‡å‘ç°ä»˜è´¹ç”¨æˆ·è·¯å¾„ä¸­çš„å¼‚å¸¸æ¨¡å¼æ¥å¯¹ä»˜è´¹ç¯å¢ƒè¿›è¡Œä¼˜åŒ–</li>
<li>å‘ç°å†·åƒ»åŠŸèƒ½ç‚¹å’Œè·¯å¾„</li>
</ul>
</li>
</ul>
]]></content>
      
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSç¼–è¯‘è¿‡ç¨‹è¯¦è§£]]></title>
      <url>/2018/01/22/2017/iOS%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E8%AF%A6%E8%A7%A3/</url>
      <content type="html"><![CDATA[<p>é€šè¿‡Xcodeè®¾ç½®å·¥ç¨‹ä¾èµ–ä¹‹åï¼ŒXcodeä¼šå…ˆç¼–è¯‘è¢«ä¾èµ–å·¥ç¨‹ï¼Œæœ€åç¼–è¯‘æœ‰ä¾èµ–å·¥ç¨‹ã€‚è¾¾åˆ°æ§åˆ¶ç¼–è¯‘é¡ºåºçš„ç›®çš„ã€‚</p>
<p>ä¸‹é¢æ˜¯ç¼–è¯‘è¿‡ç¨‹å®Œæ•´æ­¥éª¤</p>
<ul>
<li>ç¼–è¯‘ä¿¡æ¯å†™å…¥è¾…åŠ©æ–‡ä»¶ï¼Œåˆ›å»ºæ–‡ä»¶æ¶æ„ .app æ–‡ä»¶</li>
<li>å¤„ç†æ–‡ä»¶æ‰“åŒ…ä¿¡æ¯</li>
<li>æ‰§è¡Œ CocoaPod ç¼–è¯‘å‰è„šæœ¬ï¼ŒcheckPods Manifest.lock</li>
<li>ç¼–è¯‘.mæ–‡ä»¶ï¼Œä½¿ç”¨ CompileC å’Œ clang å‘½ä»¤</li>
<li>é“¾æ¥éœ€è¦çš„ Framework</li>
<li>ç¼–è¯‘ xib</li>
<li>æ‹·è´ xib ï¼Œèµ„æºæ–‡ä»¶</li>
<li>ç¼–è¯‘ ImageAssets</li>
<li>å¤„ç† info.plist</li>
<li>æ‰§è¡Œ CocoaPod è„šæœ¬</li>
<li>æ‹·è´æ ‡å‡†åº“</li>
<li>åˆ›å»º .app æ–‡ä»¶å’Œç­¾å</li>
</ul>
<h3 id="åŸºç¡€æ¦‚å¿µ"><a href="#åŸºç¡€æ¦‚å¿µ" class="headerlink" title="åŸºç¡€æ¦‚å¿µ"></a>åŸºç¡€æ¦‚å¿µ</h3><p>åœ¨äº†è§£xcodeæ„å»ºåŸåˆ™ä¹‹å‰ï¼Œéœ€è¦ç†Ÿæ‚‰workspaceç›¸å…³çš„æ¦‚å¿µï¼Œå³workspace,projectå’Œtargetã€‚</p>
<h4 id="target"><a href="#target" class="headerlink" title="target"></a>target</h4><p>targetæŒ‡å®šäº†æ„å»ºçš„product,åŒ…å«å°†workspaceæˆ–projectä¸­çš„ä¸€ç»„æ–‡ä»¶æ„å»ºæˆproductçš„æŒ‡ä»¤ã€‚å•ä¸ªtargetå®šä¹‰ä¸€ä¸ªproduct,å®ƒå°†è¾“å…¥ï¼ˆæºæ–‡ä»¶å’Œå¤„ç†è¿™äº›æºæ–‡ä»¶çš„æŒ‡ä»¤ï¼ˆåŒ…å«æ‰€è®¾å®šçš„æ„å»ºsettingså’Œphasesï¼‰ï¼‰ç»„ç»‡è¿›æ„å»ºç³»ç»Ÿä¸­ã€‚projectå’Œtargetæ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚</p>
<p>targetä¼šç»§æ‰¿projectçš„build settingsï¼Œä½†å¯ä»¥ä»¥targetä¸ºç²’åº¦è®¾ç½®build settings,ä¸”Xcodeä¸­å½“å‰ä¸€æ¬¡åªä¼šæœ‰ä¸€ä¸ªæœ‰æ•ˆtarget,æ­¤æœ‰æ•ˆtargetåœ¨xcode schemeä¸­æ ‡è¯†ã€‚</p>
<p>è‹¥target Aä¾èµ–target Bçš„è¾“å‡ºæ¥æ„å»ºï¼Œåˆ™Aä¾èµ–Bï¼Œå½“å®ƒä»¬å­˜åœ¨äºä¸€ä¸ªxcode workspaceä¸­çš„æ—¶å€™ï¼ŒXcodeä¼šå‘ç°æ­¤ä¾èµ–å…³ç³»å¹¶æŒ‰é¡ºåºæ„å»ºã€‚è¿™ç§ä¾èµ–ç§°ä¸ºéšæ€§ä¾èµ–ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨build settingsä¸­å£°æ˜æ˜¾æ€§ä¾èµ–ï¼Œä¹Ÿå¯å°†éšæ€§ä¾èµ–çš„ä¸¤ä¸ªtargetæ˜¾æ€§å£°æ˜ä¸ºæ²¡æœ‰ä¾èµ–ã€‚æ¯”å¦‚å¯èƒ½åœ¨åŒä¸€ä¸ªworkspaceä¸­åŒæ—¶æ„å»ºä¸€ä¸ªåº“å¹¶æ„å»ºä¸€ä¸ªä¾èµ–è¿™ä¸ªåº“çš„åº”ç”¨ï¼Œåˆ™xcodeä¼šé€‰æ‹©å…ˆæ„å»ºåº“ã€‚ä½†å¦‚æœåº”ç”¨æƒ³é“¾æ¥åº“çš„æŸä¸ªç‰¹å®šç‰ˆæœ¬ï¼Œåˆ™å¯ä»¥æ˜¾æ€§å£°æ˜è¿™ä¸ªä¾èµ–å…³ç³»ï¼Œæ­¤æ—¶éšæ€§ä¾èµ–å³è¢«è¦†ç›–äº†ã€‚</p>
<h4 id="project"><a href="#project" class="headerlink" title="project"></a>project</h4><p>xcode projectæ˜¯å­˜å‚¨æ„å»ºä¸€ä¸ªæˆ–å¤šä¸ªè½¯ä»¶äº§å“æ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ï¼Œèµ„æºå’Œä¿¡æ¯çš„ä»“åº“ã€‚<br>projectåŒ…å«æ„å»ºproductæ‰€éœ€çš„æ‰€æœ‰è¦ç´ å¹¶ç»´æŠ¤å®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªtargets(targetæŒ‡å®šäº†æ„å»ºproductçš„æ–¹å¼)ã€‚<br>projectå®šä¹‰äº†æ‰€æœ‰targetçš„é»˜è®¤build settingsï¼Œå„targetå¯ä»¥é‡è½½ã€‚Xcode projectæ–‡ä»¶åŒ…å«å¦‚ä¸‹ä¿¡æ¯ï¼šæºæ–‡ä»¶çš„å¼•ç”¨ï¼šæºä»£ç ï¼ˆåŒ…æ‹¬å¤´æ–‡ä»¶å’Œå®ç°æ–‡ä»¶ï¼‰ï¼Œlibraryå’Œframework(xcodeå†…éƒ¨æˆ–è€…å¤–éƒ¨),èµ„æºæ–‡ä»¶ï¼Œinterface builderæ–‡ä»¶æ–‡ä»¶ç»“æ„åˆ—è¡¨ä¸­ç»„ç»‡æºæ–‡ä»¶çš„Groupsprojectçº§åˆ«çš„buildé€‰é¡¹targetsdebugæˆ–æµ‹è¯•programçš„å¯æ‰§è¡Œç¯å¢ƒï¼šä»xcodeè¿è¡Œæˆ–è°ƒè¯•æ—¶å¯åŠ¨å“ªäº›å¯ä»¥æ‰§è¡Œæ–‡ä»¶ï¼Œä¼ ç»™å¯æ‰§è¡Œæ–‡ä»¶çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œç¨‹åºè¿è¡Œæ—¶è®¾ç½®çš„ç¯å¢ƒå˜é‡æ€»ä¹‹ï¼Œprojectå¯ä»¥å•ç‹¬å­˜åœ¨ä¹Ÿå¯ä»¥åŒ…å«åœ¨workspaceä¸­ï¼ŒåŒæ—¶å¯ä»¥åœ¨Schemeä¸­æŒ‡å®šå“ªä¸ªTargetã€buildé…ç½®ã€å“ªä¸ªå¯æ‰§è¡Œé…ç½®åœ¨æŸä¸ªæ—¶åˆ»æ˜¯æœ‰æ•ˆçš„ã€‚</p>
<h4 id="build-settings"><a href="#build-settings" class="headerlink" title="build settings"></a>build settings</h4><p>ä¸€ä¸ªbuild settingæ˜¯ä¸€ä¸ªæŒ‡ç¤ºäº§å“æŸä¸ªæ–¹é¢æ„å»ºæ–¹å¼çš„å˜é‡ï¼Œæ¯”å¦‚å†³å®šxcodeä¼ ç»™ç¼–è¯‘å™¨çš„å‚æ•°é€‰é¡¹æ˜¯æ€æ ·ã€‚å…¶æ˜¯ä¸€ä¸ªå¸¸é‡æˆ–è€…ä¸€ä¸ªå…¬å¼ä¾›ç»™xcodeåœ¨æ„å»ºçš„æ—¶å€™è®¡ç®—build settingã€‚</p>
<h4 id="workspace"><a href="#workspace" class="headerlink" title="workspace"></a>workspace</h4><p>workspace æ˜¯ç»„ç»‡projectså’Œå…¶ä»–ååŒå·¥ä½œçš„æ–‡æ¡£çš„ä¸€ä»½æ–‡æ¡£ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜ç»´æŠ¤projectå’Œtargetä¹‹é—´çš„æ˜¾æ€§åŠéšæ€§çš„ä¾èµ–å…³ç³»ã€‚é»˜è®¤workspaceä¸­çš„æ‰€æœ‰Xcode projectséƒ½åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹æ„å»ºï¼Œç§°ä¸ºworkspace build directoryï¼Œç”±äºæ‰€æœ‰projectçš„æ‰€æœ‰æ–‡ä»¶éƒ½åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œæ‰€ä»¥æ‰€æœ‰æ–‡ä»¶éƒ½å¯¹æ¯ä¸ªprojectå¯è§ã€‚<br>æ¯”å¦‚ä¸¤ä¸ªprojectä½¿ç”¨åŒä¸€ä¸ªåº“ï¼Œåˆ™ä¸ç”¨å¤åˆ¶åˆ°å¦ä¸€ä¸ªprojectç›®å½•ä¸­ã€‚workspaceä¸­çš„æ¯ä¸ªprojectéƒ½æœ‰å…¶ç‹¬ç«‹id,åŒæ—¶projectå¯ä»¥å±äºå¤šä¸ªworkspaceï¼Œå¯ä»¥å•ç‹¬æ‰“å¼€projectæˆ–è€…åœ¨å…¶ä»–workspaceä¸­æ‰“å¼€ï¼Œä¸”éƒ½ä¸ç”¨é‡æ–°é…ç½®projectæˆ–è€…workspaceã€‚<br>å¯ä»¥ä½¿ç”¨workspaceé»˜è®¤çš„build ç›®å½•ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªã€‚å¦‚æœprojectæŒ‡å®šäº†æ„å»ºç›®å½•ï¼Œè¿™ä¸ªç›®å½•ä¼šè¢«projectæ„å»ºæ—¶æ‰€åœ¨çš„workspaceçš„buildç›®å½•è¦†ç›–ã€‚</p>
<h4 id="xcode-schemexcode"><a href="#xcode-schemexcode" class="headerlink" title="xcode schemexcode"></a>xcode schemexcode</h4><p>schemeå®šä¹‰äº†ä¸€ç³»åˆ—æ„å»ºçš„targetsï¼Œæ„å»ºæ—¶çš„é…ç½®ï¼Œå’Œä¸€ç³»åˆ—æ‰§è¡Œçš„æµ‹è¯•ã€‚å¯ä»¥æœ‰å¾ˆå¤šscheme,ä½†åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„ã€‚é€‰æ‹©schemeæ—¶ï¼Œæ„å‘³ç€ä½ ä¹Ÿé€‰æ‹©äº†ä¸€ä¸ªè¿è¡Œç›®æ ‡ï¼ˆproductæ„å»ºçš„ç¡¬ä»¶å¹³å°)ã€‚å¯ä»¥æŒ‡å®šschemeæ˜¯å¦å­˜å‚¨åœ¨projectä¸­ï¼Œä»¥ä¾¿åŒ…å«æ­¤projectçš„æ‰€æœ‰workspaceéƒ½å¯ä»¥ä½¿ç”¨äº›scheme,å½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®šåªå­˜å‚¨åœ¨æŸä¸ªworkspaceä¸­ã€‚</p>
<p>ä¸€èˆ¬çš„æŸä¸ªåº”ç”¨å•ç‹¬æ–°å»ºä¸€ä¸ª project å°±å¯ä»¥äº†ï¼Œç„¶åæŠŠæ‰€æœ‰çš„ç¨‹åºæ–‡ä»¶éƒ½æ”¾åœ¨é‡Œé¢ï¼Œè¿™ä¸ªå¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†æ™®é€šçš„éœ€æ±‚ï¼Œä½†æ˜¯æœ‰æ—¶å€™ï¼Œé¡¹ç›®æœ‰å¯èƒ½è¦ä½¿ç”¨å…¶ä»–çš„é¡¹ç›®æ–‡ä»¶ï¼Œæˆ–è€…å¼•å…¥å…¶ä»–çš„é™æ€åº“æ–‡ä»¶ï¼Œè¿™ä¸ªæ—¶å€™ workspace å°±æ´¾ä¸Šç”¨åœºäº†ï¼Œworkspace å³å¯ä»¥å•ç‹¬ç®¡ç†å¤šä¸ªé¡¹ç›®ï¼Œåˆå¯ä»¥é€šè¿‡é…ç½®ï¼Œè®©å„ä¸ªé¡¹ç›®ç›¸äº’ä¾èµ–ï¼Œå¦‚æœä¸ç”¨ workspaceï¼Œä»¥å‰çš„åšæ³•æ˜¯å¦‚æœç”¨åˆ°å…¶ä»–é¡¹ç›®çš„æ–‡ä»¶ï¼Œè¦æ‰‹åŠ¨ copy æ–‡ä»¶åˆ°å½“å‰çš„é¡¹ç›®ï¼Œåœ¨ workspace é‡Œè¿™ä¸ªæ­¥éª¤ä¸éœ€è¦äº†ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ•°æ®ç§‘å­¦numpy]]></title>
      <url>/2018/01/02/2018/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6numpy/</url>
      <content type="html"><![CDATA[<ul>
<li>æ•°ç»„çš„åˆ›å»º</li>
<li>æœ‰å…³æ•°ç»„çš„å±æ€§å’Œå‡½æ•°</li>
<li>æ•°ç»„å…ƒç´ çš„è·å–â€“æ™®é€šç´¢å¼•ã€åˆ‡ç‰‡ã€å¸ƒå°”ç´¢å¼•å’ŒèŠ±å¼ç´¢å¼•</li>
<li>ç»Ÿè®¡å‡½æ•°ä¸çº¿æ€§ä»£æ•°è¿ç®—</li>
<li>éšæœºæ•°çš„ç”Ÿæˆ</li>
<li>çŸ©é˜µå¯¹è±¡</li>
</ul>
<a id="more"></a>
<p>åˆ—è¡¨ï¼Œæ•°ç»„ï¼Œå…ƒç»„</p>
<h3 id="æ•°ç»„çš„åˆ›å»º"><a href="#æ•°ç»„çš„åˆ›å»º" class="headerlink" title="æ•°ç»„çš„åˆ›å»º"></a>æ•°ç»„çš„åˆ›å»º</h3><p>numpyä¸­ä½¿ç”¨array()å‡½æ•°åˆ›å»ºæ•°ç»„ï¼Œarrayçš„é¦–ä¸ªå‚æ•°ä¸€å®šæ˜¯ä¸€ä¸ªåºåˆ—ï¼Œå¯ä»¥æ˜¯å…ƒç»„ä¹Ÿå¯ä»¥æ˜¯åˆ—è¡¨ã€‚</p>
<h4 id="arange-å‡½æ•°åˆ›å»ºä¸€ç»´æœ‰åºæ•°ç»„"><a href="#arange-å‡½æ•°åˆ›å»ºä¸€ç»´æœ‰åºæ•°ç»„" class="headerlink" title="arange()å‡½æ•°åˆ›å»ºä¸€ç»´æœ‰åºæ•°ç»„"></a>arange()å‡½æ•°åˆ›å»ºä¸€ç»´æœ‰åºæ•°ç»„</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; import numpy as np</div><div class="line">&gt;&gt;&gt; ls1 = range(10)</div><div class="line">&gt;&gt;&gt; list(ls1)</div><div class="line">[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</div><div class="line">&gt;&gt;&gt; type(ls1)</div><div class="line">&lt;type &apos;list&apos;&gt;</div><div class="line">&gt;&gt;&gt; ls2 = np.arange(10)</div><div class="line">&gt;&gt;&gt; list(ls2)</div><div class="line">[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</div><div class="line">&gt;&gt;&gt; type(ls2)</div><div class="line">&lt;type &apos;numpy.ndarray&apos;&gt;</div></pre></td></tr></table></figure>
<p>ä»[2,20)é—´éš”ä¸º3çš„ç­‰å·®æ•°åˆ—</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a = np.arange(2,20,3)</div><div class="line">[ 2  5  8 11 14 17]</div></pre></td></tr></table></figure>
<h4 id="array-å‡½æ•°"><a href="#array-å‡½æ•°" class="headerlink" title="array()å‡½æ•°"></a>array()å‡½æ•°</h4><p>å¦‚æœä¸€ç»´æ•°ç»„ä¸æ˜¯ä¸€ä¸ªè§„å¾‹çš„æœ‰åºå…ƒç´ ï¼Œè€Œæ˜¯äººä¸ºçš„è¾“å…¥ï¼Œå°±éœ€è¦array()å‡½æ•°åˆ›å»ºäº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; arr1 = np.array((1,20,13,28,22))</div><div class="line">&gt;&gt;&gt; arr1</div><div class="line">array([ 1, 20, 13, 28, 22])</div><div class="line">&gt;&gt;&gt; type(arr1)</div><div class="line">&lt;type &apos;numpy.ndarray&apos;&gt;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢æ˜¯ç”±å…ƒç»„åºåˆ—æ„æˆçš„ä¸€ç»´æ•°ç»„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; arr2 = np.array([1,1,2,3,5,8,13,21])</div><div class="line">&gt;&gt;&gt; arr2</div><div class="line">array([ 1,  1,  2,  3,  5,  8, 13, 21])</div><div class="line">&gt;&gt;&gt; type(arr2)</div><div class="line">&lt;type &apos;numpy.ndarray&apos;&gt;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢æ˜¯ç”±åˆ—è¡¨åºåˆ—æ„æˆçš„ä¸€ç»´æ•°ç»„ã€‚</p>
<h4 id="äºŒç»´æ•°ç»„çš„åˆ›å»º"><a href="#äºŒç»´æ•°ç»„çš„åˆ›å»º" class="headerlink" title="äºŒç»´æ•°ç»„çš„åˆ›å»º"></a>äºŒç»´æ•°ç»„çš„åˆ›å»º</h4><p>äºŒç»´æ•°ç»„çš„åˆ›å»ºï¼Œå…¶å®åœ¨å°±æ˜¯åˆ—è¡¨å¥—åˆ—è¡¨æˆ–å…ƒç»„å¥—å…ƒç»„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; arr3 = np.array(((1,1,2,3),(5,8,13,21),(34,55,89,144)))</div><div class="line">&gt;&gt;&gt; arr3</div><div class="line">array([[  1,   1,   2,   3],</div><div class="line">       [  5,   8,  13,  21],</div><div class="line">       [ 34,  55,  89, 144]])</div><div class="line">```       </div><div class="line">ä¸Šé¢ä½¿ç”¨å…ƒç»„å¥—å…ƒç»„çš„æ–¹å¼ã€‚</div></pre></td></tr></table></figure>
<blockquote>
<blockquote>
<blockquote>
<p>arr4 = np.array([[1,2,3,4],[5,6,7,8],[9,10,11,12]])<br>arr4<br>array([[ 1,  2,  3,  4],<br>       [ 5,  6,  7,  8],<br>       [ 9, 10, 11, 12]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ä¸Šé¢ä½¿ç”¨åˆ—è¡¨å¥—åˆ—è¡¨çš„æ–¹å¼ã€‚</div><div class="line">å¯¹äºé«˜ç»´æ•°ç»„åœ¨å°†æ¥çš„æ•°æ®åˆ†æä¸­ç”¨çš„æ¯”è¾ƒå°‘ï¼Œè¿™é‡Œå…³äºé«˜ç»´æ•°ç»„çš„åˆ›å»ºå°±ä¸èµ˜è¿°äº†ã€‚</div><div class="line"></div><div class="line">#### ç‰¹æ®Šæ•°ç»„</div><div class="line">numpyä¸­ä¹Ÿæä¾›äº†å‡ ç§ç‰¹æ®Šçš„æ•°ç»„</div><div class="line"></div><div class="line">np.ones è¿”å›ä¸€ç»´å…ƒç´ å…¨ä¸º1çš„æ•°ç»„</div></pre></td></tr></table></figure></p>
<p>np.ones(5)<br>array([ 1.,  1.,  1.,  1.,  1.])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è¿”å›å…ƒç´ å…¨ä¸º1çš„3Ã—4äºŒç»´æ•°ç»„</div></pre></td></tr></table></figure></p>
<p>np.ones([3,4])<br>array([[ 1.,  1.,  1.,  1.],<br>       [ 1.,  1.,  1.,  1.],<br>       [ 1.,  1.,  1.,  1.]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">np.zeros è¿”å›ä¸€ç»´å…ƒç´ å…¨ä¸º0çš„æ•°ç»„</div></pre></td></tr></table></figure></p>
<p>np.zeros(3)<br>array([ 0.,  0.,  0.])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è¿”å›å…ƒç´ å…¨ä¸º0çš„3Ã—4äºŒç»´æ•°ç»„</div></pre></td></tr></table></figure></p>
<p>np.zeros([3,4])<br>array([[ 0.,  0.,  0.,  0.],<br>       [ 0.,  0.,  0.,  0.],<br>       [ 0.,  0.,  0.,  0.]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">np.empty è¿”å›ä¸€ç»´ç©ºæ•°ç»„</div></pre></td></tr></table></figure></p>
<p>np.empty(3)<br>array([ 0.,  0.,  0.])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">è¿”å›3Ã—4äºŒç»´ç©ºæ•°ç»„</div></pre></td></tr></table></figure></p>
<p>np.empty([3,4])<br>array([[ 0.,  0.,  0.,  0.],<br>       [ 0.,  0.,  0.,  0.],<br>       [ 0.,  0.,  0.,  0.]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### æ•°ç»„çš„å±æ€§</div><div class="line"></div><div class="line">arr3.shape è¡Œåˆ—</div><div class="line">arr3.dtype å…ƒç´ ç±»å‹</div><div class="line">arr3.ndim çº¬åº¦</div><div class="line">arr3.size å…ƒç´ æ€»ä¸ªæ•°</div></pre></td></tr></table></figure></p>
<p>arr3<br>array([[  1,   1,   2,   3],<br>       [  5,   8,  13,  21],<br>       [ 34,  55,  89, 144]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">shapeæ–¹æ³•è¿”å›æ•°ç»„çš„è¡Œæ•°å’Œåˆ—æ•°</div></pre></td></tr></table></figure></p>
<p>arr3.shape<br>(3L, 4L)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dtypeæ–¹æ³•è¿”å›æ•°ç»„çš„æ•°æ®ç±»å‹</div></pre></td></tr></table></figure></p>
<p>arr3.dtype<br>dtype(â€˜int32â€™)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">é€šè¿‡ravelçš„æ–¹æ³•å°†æ•°ç»„æ‹‰ç›´ï¼ˆå¤šç»´æ•°ç»„é™ä¸ºä¸€ç»´æ•°ç»„ï¼‰</div></pre></td></tr></table></figure></p>
<p>arr3.ravel()<br>array([  1,   1,   2,   3,   5,   8,  13,  21,  34,  55,  89, 144])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">é€šè¿‡flattençš„æ–¹æ³•å°†æ•°ç»„æ‹‰ç›´</div></pre></td></tr></table></figure></p>
<p>b = arr3.flatten()<br>b<br>array([  1,   1,   2,   3,   5,   8,  13,  21,  34,  55,  89, 144])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ä¸¤è€…çš„åŒºåˆ«åœ¨äºravelæ–¹æ³•ç”Ÿæˆçš„æ˜¯åŸæ•°ç»„çš„è§†å›¾ï¼Œæ— éœ€å æœ‰å†…å­˜ç©ºé—´ï¼Œä½†è§†å›¾çš„æ”¹å˜ä¼šå½±å“åˆ°åŸæ•°ç»„çš„å˜åŒ–ã€‚è€Œflattenæ–¹æ³•è¿”å›çš„æ˜¯çœŸå®å€¼ï¼Œå…¶å€¼çš„æ”¹å˜å¹¶ä¸ä¼šå½±å“åŸæ•°ç»„çš„æ›´æ”¹ã€‚</div><div class="line">é€šè¿‡ä¸‹é¢çš„ä¾‹å­ä¹Ÿè®¸å°±èƒ½æ˜ç™½äº†ï¼š</div></pre></td></tr></table></figure></p>
<p>b[:3] = 0<br>b<br>array([  0,   0,   0,   3,   5,   8,  13,  21,  34,  55,  89, 144])<br>arr3<br>array([[  1,   1,   2,   3],<br>       [  5,   8,  13,  21],<br>       [ 34,  55,  89, 144]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">é€šè¿‡æ›´æ”¹bçš„å€¼ï¼ŒåŸæ•°ç»„æ²¡æœ‰å˜åŒ–ã€‚</div></pre></td></tr></table></figure></p>
<p>a[:3] = 0<br>a<br>array([  0,   0,   0,   3,   5,   8,  13,  21,  34,  55,  89, 144])<br>arr3<br>array([[  0,   0,   0,   3],<br>       [  5,   8,  13,  21],<br>       [ 34,  55,  89, 144]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">açš„å€¼å˜åŒ–åï¼Œä¼šå¯¼è‡´åŸæ•°ç»„è·Ÿç€å˜åŒ–ã€‚</div></pre></td></tr></table></figure></p>
<p>arr4<br>array([[ 1,  2,  3,  4],<br>       [ 5,  6,  7,  8],<br>       [ 9, 10, 11, 12]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ndim è¿”å›æ•°ç»„çš„ç»´æ•°</div></pre></td></tr></table></figure></p>
<p>arr4.ndim<br>2<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">size è¿”å›æ•°ç»„å…ƒç´ çš„ä¸ªæ•°</div></pre></td></tr></table></figure></p>
<p>arr4.size<br>12<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">T è¿”å›æ•°ç»„çš„è½¬ç½®ç»“æœ</div></pre></td></tr></table></figure></p>
<p>arr4.T<br>array([[ 1,  5,  9],<br>       [ 2,  6, 10],<br>       [ 3,  7, 11],<br>       [ 4,  8, 12]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">æ³¨ï¼š å¦‚æœæ•°ç»„çš„æ•°æ®ç±»å‹ä¸ºå¤æ•°çš„è¯ï¼Œrealæ–¹æ³•å¯ä»¥è¿”å›å¤æ•°çš„å®éƒ¨ï¼Œimagæ–¹æ³•è¿”å›å¤æ•°çš„è™šéƒ¨</div><div class="line"></div><div class="line">### æ•°ç»„å‡½æ•°</div><div class="line"></div><div class="line">reshape()å‡½æ•°å’Œresize()å‡½æ•°å¯ä»¥é‡æ–°è®¾ç½®æ•°ç»„çš„è¡Œæ•°å’Œåˆ—æ•°ï¼š</div></pre></td></tr></table></figure></p>
<p>arr5 = np.array(np.arange(24))<br>arr5<br>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,17, 18, 19, 20, 21, 22, 23])<br>a = arr5.reshape(4,6)<br>a<br>array([[ 0,  1,  2,  3,  4,  5],<br>       [ 6,  7,  8,  9, 10, 11],<br>       [12, 13, 14, 15, 16, 17],<br>       [18, 19, 20, 21, 22, 23]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">é€šè¿‡reshapeå‡½æ•°å°†ä¸€ç»´æ•°ç»„è®¾ç½®ä¸ºäºŒç»´æ•°ç»„ï¼Œä¸”ä¸º4è¡Œ6åˆ—çš„æ•°ç»„ã€‚</div></pre></td></tr></table></figure></p>
<p>a.resize(6,4)<br>a<br>array([[ 0,  1,  2,  3],<br>       [ 4,  5,  6,  7],<br>       [ 8,  9, 10, 11],<br>       [12, 13, 14, 15],<br>       [16, 17, 18, 19],<br>       [20, 21, 22, 23]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">é€šè¿‡resizeå‡½æ•°ä¼šç›´æ¥æ”¹å˜åŸæ•°ç»„çš„å½¢çŠ¶ã€‚</div><div class="line"></div><div class="line">### æ•°ç»„å…ƒç´ çš„è·å–</div><div class="line"></div><div class="line">#### ä¸€ç»´æ•°ç»„å…ƒç´ </div><div class="line">é€šè¿‡ç´¢å¼•å’Œåˆ‡ç‰‡çš„æ–¹å¼è·å–æ•°ç»„å…ƒç´ ï¼Œä¸€ç»´æ•°ç»„å…ƒç´ çš„è·å–ä¸åˆ—è¡¨ã€å…ƒç»„çš„è·å–æ–¹å¼ä¸€æ ·ï¼š</div></pre></td></tr></table></figure></p>
<p>arr7 = np.array(np.arange(10))<br>arr7<br>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è·å–ç¬¬4ä¸ªå…ƒç´ </div></pre></td></tr></table></figure></p>
<p>arr7[3]<br>3<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è·å–å‰3ä¸ªå…ƒç´ </div></pre></td></tr></table></figure></p>
<p>arr7[:3]<br>array([0, 1, 2])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è·å–ç¬¬4ä¸ªå…ƒç´ å³ä¹‹åçš„æ‰€æœ‰å…ƒç´ </div></pre></td></tr></table></figure></p>
<p>arr7[3:]<br>array([3, 4, 5, 6, 7, 8, 9])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è·å–æœ«å°¾çš„2ä¸ªå…ƒç´ </div></pre></td></tr></table></figure></p>
<p>arr7[-2:]<br>array([8, 9])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ä»ç¬¬1ä¸ªå…ƒç´ å¼€å§‹ï¼Œè·å–æ­¥é•¿ä¸º2çš„æ‰€æœ‰å…ƒç´ </div></pre></td></tr></table></figure></p>
<p>arr7[::2]<br>array([0, 2, 4, 6, 8])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#### äºŒç»´æ•°ç»„å…ƒç´ </div></pre></td></tr></table></figure></p>
<p>arr8 = np.array(np.arange(12)).reshape(3,4)<br>arr8<br>array([[ 0,  1,  2,  3],<br>       [ 4,  5,  6,  7],<br>       [ 8,  9, 10, 11]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è¿”å›æ•°ç»„çš„ç¬¬2è¡Œ</div></pre></td></tr></table></figure></p>
<p>arr8[1]<br>array([4, 5, 6, 7])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è¿”å›æ•°ç»„çš„å‰2è¡Œ</div></pre></td></tr></table></figure></p>
<p>arr8[:2]<br>array([[0, 1, 2, 3],<br>       [4, 5, 6, 7]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è¿”å›æŒ‡å®šçš„ç¬¬1è¡Œå’Œç¬¬3è¡Œ</div></pre></td></tr></table></figure></p>
<p>arr8[[0,2]]<br>array([[ 0,  1,  2,  3],<br>       [ 8,  9, 10, 11]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è¿”å›æ•°ç»„çš„ç¬¬1åˆ—</div></pre></td></tr></table></figure></p>
<p>arr8[:,0]<br>array([0, 4, 8])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è¿”å›æ•°ç»„çš„å2åˆ—</div></pre></td></tr></table></figure></p>
<p>arr8[:,2:]<br>array([[ 2,  3],<br>       [ 6,  7],<br>       [10, 11]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è¿”å›æ•°ç»„çš„ç¬¬1åˆ—å’Œç¬¬3åˆ—</div></pre></td></tr></table></figure></p>
<p>arr8[:,[0,2]]<br>array([[ 0,  2],<br>       [ 4,  6],<br>       [ 8, 10]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è¿”å›æ•°ç»„ä¸­ç¬¬2è¡Œç¬¬3åˆ—å¯¹åº”çš„å…ƒç´ </div></pre></td></tr></table></figure></p>
<p>arr8[1,2]<br>6<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">#### å¸ƒå°”ç´¢å¼•</div><div class="line">å¸ƒå°”ç´¢å¼•ï¼Œå³ç´¢å¼•å€¼ä¸ºTrueå’ŒFalseï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å¸ƒå°”ç´¢å¼•å¿…é¡»è¾“æ•°ç»„å¯¹è±¡ã€‚</div></pre></td></tr></table></figure></p>
<p>log = np.array([True,False,False,True,True,False])<br>arr9 = np.array(np.arange(24)).reshape(6,4)<br>arr9<br>array([[ 0,  1,  2,  3],<br>       [ 4,  5,  6,  7],<br>       [ 8,  9, 10, 11],<br>       [12, 13, 14, 15],<br>       [16, 17, 18, 19],<br>       [20, 21, 22, 23]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è¿”å›æ‰€æœ‰ä¸ºTrueçš„å¯¹åº”è¡Œ</div></pre></td></tr></table></figure></p>
<p>arr9[log]<br>array([[ 0,  1,  2,  3],<br>       [12, 13, 14, 15],<br>       [16, 17, 18, 19]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">é€šè¿‡è´Ÿå·ç­›é€‰å‡ºæ‰€æœ‰ä¸ºFalseçš„å¯¹åº”è¡Œ</div></pre></td></tr></table></figure></p>
<p>arr9[-log]<br>array([[ 4,  5,  6,  7],<br>       [ 8,  9, 10, 11],<br>       [20, 21, 22, 23]])</p>
</blockquote>
</blockquote>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ä¸¾ä¸€ä¸ªåœºæ™¯ï¼Œä¸€ç»´æ•°ç»„è¡¨ç¤ºåŒºåŸŸï¼ŒäºŒç»´æ•°ç»„è¡¨ç¤ºè§‚æµ‹å€¼ï¼Œå¦‚ä½•é€‰å–ç›®æ ‡åŒºåŸŸçš„è§‚æµ‹ï¼Ÿ</div></pre></td></tr></table></figure>
<blockquote>
<blockquote>
<blockquote>
<p>area = np.array([â€˜Aâ€™,â€™Bâ€™,â€™Aâ€™,â€™Câ€™,â€™Aâ€™,â€™Bâ€™,â€™Dâ€™])<br>area<br>array([â€˜Aâ€™, â€˜Bâ€™, â€˜Aâ€™, â€˜Câ€™, â€˜Aâ€™, â€˜Bâ€™, â€˜Dâ€™],<br>      dtype=â€™|S1â€™)<br>observes = np.array(np.arange(21)).reshape(7,3)<br>observes<br>array([[ 0,  1,  2],<br>       [ 3,  4,  5],<br>       [ 6,  7,  8],<br>       [ 9, 10, 11],<br>       [12, 13, 14],<br>       [15, 16, 17],<br>       [18, 19, 20]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è¿”å›æ‰€æœ‰AåŒºåŸŸçš„è§‚æµ‹ã€‚</div></pre></td></tr></table></figure></p>
<p>observes[area == â€˜Aâ€™]<br>array([[ 0,  1,  2],<br>       [ 6,  7,  8],<br>       [12, 13, 14]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è¿”å›æ‰€æœ‰AåŒºåŸŸå’ŒDåŒºåŸŸçš„è§‚æµ‹ã€‚#æ¡ä»¶å€¼éœ€è¦åœ¨&amp;(and),|(or)ä¸¤ç«¯ç”¨åœ†æ‹¬å·æ‹¬èµ·æ¥</div></pre></td></tr></table></figure></p>
<p>observes[(area == â€˜Aâ€™)|(area == â€˜Dâ€™)]<br>array([[ 0,  1,  2],<br>       [ 6,  7,  8],<br>       [12, 13, 14],<br>       [18, 19, 20]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">å¸ƒå°”ç´¢å¼•ä¹Ÿå¯ä»¥ä¸æ™®é€šç´¢å¼•æˆ–åˆ‡ç‰‡æ··åˆä½¿ç”¨ï¼š</div><div class="line">è¿”å›AåŒºåŸŸçš„æ‰€æœ‰è¡Œï¼Œä¸”åªè·å–ç¬¬1åˆ—ä¸ç¬¬3åˆ—æ•°æ®ã€‚</div></pre></td></tr></table></figure></p>
<p>observes[area == â€˜Aâ€™][:,[0,2]]<br>array([[ 0,  2],<br>       [ 6,  8],<br>       [12, 14]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#### èŠ±å¼ç´¢å¼•</div><div class="line">èŠ±å¼ç´¢å¼•ï¼šå®é™…ä¸Šå°±æ˜¯å°†æ•°ç»„ä½œä¸ºç´¢å¼•å°†åŸæ•°ç»„çš„å…ƒç´ æå–å‡ºæ¥</div></pre></td></tr></table></figure></p>
<p>arr10 = np.arange(1,29).reshape(7,4)<br>arr10<br>array([[ 1,  2,  3,  4],<br>       [ 5,  6,  7,  8],<br>       [ 9, 10, 11, 12],<br>       [13, 14, 15, 16],<br>       [17, 18, 19, 20],<br>       [21, 22, 23, 24],<br>       [25, 26, 27, 28]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">æŒ‰ç…§æŒ‡å®šé¡ºåºè¿”å›æŒ‡å®šè¡Œ</div></pre></td></tr></table></figure></p>
<p>arr10[[4,1,3,5]]<br>array([[17, 18, 19, 20],<br>       [ 5,  6,  7,  8],<br>       [13, 14, 15, 16],<br>       [21, 22, 23, 24]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è¿”å›æŒ‡å®šçš„è¡Œä¸åˆ—</div></pre></td></tr></table></figure></p>
<p>arr10[[4,1,5]][:,[0,2,3]]<br>array([[17, 19, 20],<br>       [ 5,  7,  8],<br>       [21, 23, 24]])<br>arr10[[4,1,5],[0,2,3]]<br>array([17,  7, 24])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### æ•°ç»„è¿ç®—</div><div class="line"></div><div class="line">#### å››åˆ™</div></pre></td></tr></table></figure></p>
</blockquote>
</blockquote>
</blockquote>
<p>a = np.array([1,2])<br>b= np.array([3,4])<br>print a+b<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#### æ ¹å·å’ŒæŒ‡æ•°</div></pre></td></tr></table></figure></p>
<p>import numpy as np<br>a = np.array([1,2])<br>print np.sqrt(a)<br>print np.exp(a)<br>print np.square(a)<br>print np.power(a,5)<br>print a <strong> 5        #å¯ä»¥ç”¨Powerä¹Ÿå¯ä»¥ç›´æ¥ </strong> ,å½“ç„¶è¿™ä¹ˆå†™æ¯”è¾ƒçˆ½<br>Output:<br>[ 1.          1.41421356]<br>[ 2.71828183  7.3890561 ]<br>[1 4]<br>[ 1 32]<br>[ 1 32]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#### æ•°ç»„æœ€å¤§æœ€å°å€¼</div></pre></td></tr></table></figure>
<p>import numpy as np<br>a = np.arange(20).reshape(4,5)<br>print a<br>print a.min()<br>print a.max()<br>print a.sum()<br>print a.min(axis=0) #minimun element in each column<br>print a.min(axis=1) #minimun element in each row<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#### æ•°ç»„çš„å‡å€¼/ä¸­ä½æ•°</div></pre></td></tr></table></figure></p>
<p>import numpy<br>a =range(5) +[1000]<br>print a<br>print numpy.mean(a),numpy.median(a)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### çŸ©é˜µå¯¹è±¡</div><div class="line"></div><div class="line">&gt;çŸ©é˜µå¯¹è±¡å’Œæ•°ç»„çš„ä¸»è¦æœ‰ä¸¤ç‚¹å·®åˆ«ï¼š</div><div class="line">çŸ©é˜µæ˜¯äºŒç»´çš„ï¼Œè€Œæ•°ç»„çš„å¯ä»¥æ˜¯ä»»æ„æ­£æ•´æ•°ç»´</div><div class="line">çŸ©é˜µçš„*æ“ä½œç¬¦è¿›è¡Œçš„æ˜¯çŸ©é˜µä¹˜æ³•ï¼Œä¹˜å·å·¦ä¾§çš„çŸ©é˜µåˆ—å’Œä¹˜å·å³ä¾§çš„çŸ©é˜µè¡Œè¦ç›¸ç­‰ï¼Œè€Œåœ¨æ•°ç»„ä¸­*æ“ä½œç¬¦è¿›è¡Œçš„æ˜¯æ¯ä¸€å…ƒç´ çš„å¯¹åº”ç›¸ä¹˜ï¼Œä¹˜å·ä¸¤ä¾§çš„æ•°ç»„æ¯ä¸€ç»´å¤§å°éœ€è¦ä¸€è‡´</div><div class="line"></div><div class="line">#### æ•°ç»„è½¬çŸ©é˜µ</div></pre></td></tr></table></figure></p>
<p>a = np.ones(4)<br>np.asmatrix(a)<br>np.mat(np.ones((2,4)))<br>np.mat(np.random.rand(2,2))<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#### é€†çŸ©é˜µ</div></pre></td></tr></table></figure></p>
<p>arr_mat_i = arr_mat.I<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#### çŸ©é˜µä¹˜æ³•</div></pre></td></tr></table></figure></p>
<p>arr_mat * arr_mat_i<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#### eyeå‡½æ•°</div></pre></td></tr></table></figure></p>
<p>np.eye(4)</p>
<p>array([[ 1.,  0.,  0.,  0.],<br>       [ 0.,  1.,  0.,  0.],<br>       [ 0.,  0.,  1.,  0.],<br>       [ 0.,  0.,  0.,  1.]])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#### çŸ©é˜µæœ€å¤§å€¼ç´¢å¼•</div></pre></td></tr></table></figure></p>
<p>import numpy as np</p>
<p>a = np.array([[1,4,6,9,10],[3,6,2,8,12]])</p>
<p>a = a.flatten()#å¤šç»´å˜1ç»´åº¦<br>print type(a)<br>print np.argmax(a)</p>
<p>print a<br>print a.reshape(2,5)#å†å˜å›æ¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#### çŸ©é˜µè¡Œç›¸åŠ </div></pre></td></tr></table></figure></p>
<p>X.toarray().sum(axis=0) #è¡Œ<br>X.toarray().sum() #æ‰€æœ‰å…ƒç´ </p>
<p>```</p>
]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
            <tag> æ•°æ® </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[gitåº“ä½¿ç”¨è¿›é˜¶]]></title>
      <url>/2017/12/20/2017/git%E5%BA%93%E4%BD%BF%E7%94%A8%E8%BF%9B%E9%98%B6/</url>
      <content type="html"><![CDATA[<p>Gitåœ¨å­˜å‚¨æ•°æ®çš„æ—¶å€™ï¼Œå­˜å‚¨çš„éƒ½æ˜¯å®Œæ•´çš„å¯¹è±¡ï¼Œå¹¶ä¸æ˜¯å·®å¼‚ï¼Œå«åšæ¾æ•£å¯¹è±¡Loose Objectï¼Œæœ‰æ—¶å€™ä½ åªæ”¹å˜äº†ä¸€ç‚¹ï¼Œä½†æ˜¯åŒæ—¶ä¼šæ‹¥æœ‰è¿‘ä¹ä¸¤å€å¤§å°çš„blobå¯¹è±¡ã€‚<br><a id="more"></a><br>è¿™æ ·å­åšå²‚ä¸æ˜¯å¾ˆä¸èŠ‚çœç£ç›˜ï¼Ÿæ‰€ä»¥Gitä¼šåœ¨æ¯æ¬¡pushåˆ°è¿œç¨‹çš„æ—¶å€™è¿›è¡Œgarbage collectæ“ä½œï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±æ‰‹åŠ¨æ”¹è¿›è¡Œgcï¼Œå¦‚ï¼š<br>git gc<br>Counting objects: 6, done.<br>Delta compression using up to 4 threads.<br>Compressing objects: 100% (3/3), done.<br>Writing objects: 100% (6/6), done.<br>Total 6 (delta 0), reused 0 (delta 0)</p>
<p>ç„¶åæŸ¥çœ‹ä¸€ä¸‹.git/objectsä¸‹æœ‰å“ªäº›æ–‡ä»¶ï¼š<br>find .git/objects -type f<br>å‘ç°å¤šäº†ä¸€äº›packæ–‡ä»¶ï¼š<br>.git/objects/info/packs<br>.git/objects/pack/pack-abcde.idx<br>.git/objects/pack/pack-abcde.pack<br>å½“ç„¶ä¹Ÿè¿˜æœ‰å¯èƒ½è¿˜æœ‰ä¸€äº›danglingçš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡æ˜¯æ²¡æœ‰è¢«å…¶å®ƒå¼•ç”¨çš„å¯¹è±¡ï¼Œgitä¸ä¼šå¯¹å…¶è¿›è¡Œpackã€‚.packæ–‡ä»¶å­˜å‚¨äº†æ‰€æœ‰åˆ é™¤çš„å¯¹è±¡ï¼Œ .idxæ–‡ä»¶æ˜¯ç´¢å¼•æ–‡ä»¶ï¼Œå­˜å‚¨ç›¸åº”çš„åç§»ä¿¡æ¯ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨verify-packå‘½ä»¤æ˜¾ç¤ºpackçš„ä¿¡æ¯ï¼š<br>git verify-pack -v .git/objects/pack/pack-abcde.idx<br>a35a7ea3f7b55be91743c708d150b573116515ec commit 239 160 12<br>fb1c75a143de21f30004dab829b39f99d225d292 commit 187 128 172<br>ca2b7d42454d33b31cfc810592e8bd47f811decd tree   70 76 300<br>fd5d73ef7deb282cbf47826c58448597f24453ba blob   18 28 376<br>56166dc42a6a2f694e088694a2a2c90606e28f2d blob   16 23 404<br>4e1ba2916b4b903d2e5a2209cdcca7129a891c2f tree   36 46 427<br>non delta: 6 objects<br>objects/pack/pack-83c7f603b25c063accec33ee8869a6afb1e9fd0a.pack: ok</p>
<p>ç¬¬ä¸€åˆ—æ˜¾ç¤ºå¯¹è±¡çš„æŒ‡é’ˆï¼Œå³Hashå€¼ï¼Œç¬¬äºŒåˆ—å±•ç¤ºæ˜¯ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ï¼Œç¬¬ä¸‰åˆ—å±•ç¤ºå ç”¨äº†å¤šå°‘å­—èŠ‚ã€‚</p>
<!--more-->
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/bin/git filter-branch --force --index-filter &quot;/usr/bin/git rm --cached --ignore-unmatch JDMobile_2.0/Classes/Sections/BrickPlatForm/ViewController/BrickPFItemViewController.m&quot; --prune-empty --tag-name-filter cat -- --all</div></pre></td></tr></table></figure>
<h3 id="gitæäº¤å‹ç¼©"><a href="#gitæäº¤å‹ç¼©" class="headerlink" title="gitæäº¤å‹ç¼©"></a>gitæäº¤å‹ç¼©</h3><p><code>git gc  --prune=now</code></p>
<h3 id="åˆ é™¤tag"><a href="#åˆ é™¤tag" class="headerlink" title="åˆ é™¤tag"></a>åˆ é™¤tag</h3><p><code>git tag | xargs git tag -d</code></p>
<h3 id="ä¸€é”®ç˜¦èº«ä»£ç "><a href="#ä¸€é”®ç˜¦èº«ä»£ç " class="headerlink" title="ä¸€é”®ç˜¦èº«ä»£ç "></a>ä¸€é”®ç˜¦èº«ä»£ç </h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/env python</div><div class="line">#coding:utf-8</div><div class="line">import os,sys,shutil,time</div><div class="line"></div><div class="line">def checksize():</div><div class="line">    systemPath = os.environ[&apos;HOME&apos;]</div><div class="line"></div><div class="line">    if os.path.exists(systemPath + &apos;/.gitthin&apos;):</div><div class="line">        pass</div><div class="line">    else:</div><div class="line">        tagetPath = systemPath + &apos;/.gitthin&apos;  </div><div class="line">        os.system(&apos;mkdir &apos; + tagetPath)</div><div class="line"></div><div class="line">    if os.path.exists(&apos;.git&apos;) == False: </div><div class="line">       print &apos;do not have .git&apos;</div><div class="line">       sys.exit(1)</div><div class="line"></div><div class="line">    fileLogPath = systemPath + &apos;/.gitthin/file_log&apos;</div><div class="line"></div><div class="line">    if os.path.exists(fileLogPath):</div><div class="line">      os.system(&apos;rm -rf fileLogPath&apos;)</div><div class="line"></div><div class="line">    os.system(&apos;git rev-list --objects --all &gt;&gt; &apos; + fileLogPath)</div><div class="line">    # print &apos;createNew &apos; + fileLogPath   </div><div class="line"></div><div class="line">    packLogPath = systemPath + &apos;/.gitthin/pack_log&apos;</div><div class="line"></div><div class="line">    if os.path.exists(packLogPath):</div><div class="line">      print packLogPath + &apos; exits&apos;</div><div class="line">    else: </div><div class="line">        os.system(&apos;git verify-pack -v .git/objects/pack/*.idx &gt;&gt; &apos; + packLogPath)</div><div class="line">        print &apos;createNew &apos; + packLogPath</div><div class="line"></div><div class="line">    outputlist = os.popen(&apos;sort -k 3 -n %s | tail -10&apos; % packLogPath).read().split(&apos;\n&apos;)</div><div class="line"></div><div class="line">    outputlist = list(reversed(outputlist))</div><div class="line"></div><div class="line">    for item in outputlist:</div><div class="line">        if len(item) &gt; 0:</div><div class="line">           items = item.split(&apos; &apos;)</div><div class="line">           hashstring = items[0]</div><div class="line">           filesize = items[4]</div><div class="line"></div><div class="line">           filename = os.popen(&apos;grep %s %s&apos; % (hashstring, fileLogPath)).read()</div><div class="line">           print filename.split(&apos;\n&apos;)[0],&apos;   &apos;,filesize</div><div class="line"></div><div class="line"></div><div class="line">command = &apos;&apos;</div><div class="line">filename = &apos;&apos;</div><div class="line">if (len(sys.argv)) &gt; 1:</div><div class="line">   command = sys.argv[1] </div><div class="line">else:   </div><div class="line">   print &apos;è¯·è¾“å…¥å‚æ•°&apos;</div><div class="line">   sys.exit(1)</div><div class="line"></div><div class="line">if command == &apos;checksize&apos;:</div><div class="line">   checksize()</div><div class="line"></div><div class="line">elif command == &apos;reset&apos;:</div><div class="line">   systemPath = os.environ[&apos;HOME&apos;]</div><div class="line">   thinpath = systemPath + &apos;/.gitthin&apos;</div><div class="line">   if os.path.exists:</div><div class="line">      os.system(&apos;rm -rf %s&apos; % thinpath)</div><div class="line"></div><div class="line">elif command == &apos;rewrite&apos;:</div><div class="line">   if len(sys.argv) &gt; 2:</div><div class="line">      filename = sys.argv[2]</div><div class="line">      print &apos;\033[1;31m&apos; + &apos;è¯·ç¡®è®¤å½“å‰ä¸ºæœ€æ–°åˆ†æ”¯&apos; + &apos;\033[0m&apos;</div><div class="line">   else:</div><div class="line">      print &apos;è¯·è¾“å…¥æ–‡ä»¶å&apos;</div><div class="line">      sys.exit(1)</div><div class="line">   </div><div class="line">   systemPath = os.environ[&apos;HOME&apos;]</div><div class="line">   copyfilePath = systemPath + &apos;/.gitthin/&apos; + filename.split(&apos;/&apos;)[-1]</div><div class="line">   copyfilePath = copyfilePath.replace(&apos;\n&apos;,&apos;&apos;)</div><div class="line"></div><div class="line">   if os.path.exists(copyfilePath):</div><div class="line">      os.system(&apos;rm -rf &apos; + copyfilePath)</div><div class="line">   </div><div class="line">   filenamePath = os.popen(&apos;find . -name &apos; + filename.split(&apos;/&apos;)[-1]).read().replace(&apos;\n&apos;,&apos;&apos;)</div><div class="line"></div><div class="line">   copyString = &apos;cp -R %s %s&apos; % (filenamePath,copyfilePath)</div><div class="line"></div><div class="line">   os.system(copyString)   </div><div class="line"></div><div class="line">   os.system(&apos;/usr/bin/git filter-branch --force --index-filter &quot;/usr/bin/git rm --cached --ignore-unmatch %s&quot; --prune-empty --tag-name-filter cat -- --all&apos; %  filename)</div><div class="line"></div><div class="line">   os.system(&apos;cp -R %s %s&apos; % (copyfilePath,filenamePath))</div><div class="line">   </div><div class="line">   text = os.popen(&apos;git diff&apos;).read()</div><div class="line">   print &apos;text&apos; + text</div><div class="line">   if len(text) &gt; 0:</div><div class="line">      os.system(&apos;git add .&apos;)</div><div class="line">      os.system(&apos;git commit -m &quot;gitåº“ç˜¦èº«ï¼Œè¿˜åŸæ–‡ä»¶&quot;&apos;) </div><div class="line"></div><div class="line">elif command == &apos;--h&apos;:</div><div class="line">   print &apos;\033[1;31m&apos; + &apos;thingit checksize&apos; + &apos;\033[0m&apos;</div><div class="line">   print &apos;\033[1;34m&apos; + &apos;æ£€æŸ¥æ’åå‰åçš„å¤§æ–‡ä»¶&apos; + &apos;\033[0m&apos;</div><div class="line"></div><div class="line">   print &apos;\033[1;31m&apos; + &apos;thingit rewrite filename&apos; + &apos;\033[0m&apos;</div><div class="line">   print &apos;\033[1;34m&apos; + &apos;åˆ é™¤å¤§æ–‡ä»¶æäº¤&apos; + &apos;\033[0m&apos;</div><div class="line"></div><div class="line">   print &apos;\033[1;31m&apos; + &apos;thingit reset&apos; + &apos;\033[0m&apos;</div><div class="line">   print &apos;\033[1;34m&apos; + &apos;åˆå§‹åŒ–ç¯å¢ƒ&apos; + &apos;\033[0m&apos;</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> å·¥å…· </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[mongoæ—¥å¸¸å‘½ä»¤è®°å½•]]></title>
      <url>/2017/12/18/2018/pymongo/</url>
      <content type="html"><![CDATA[<h3 id="mongoå¸¸ç”¨"><a href="#mongoå¸¸ç”¨" class="headerlink" title="mongoå¸¸ç”¨"></a>mongoå¸¸ç”¨</h3><h4 id="mongoå‘½ä»¤è¡Œ"><a href="#mongoå‘½ä»¤è¡Œ" class="headerlink" title="mongoå‘½ä»¤è¡Œ"></a>mongoå‘½ä»¤è¡Œ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mongo jrappcomment:jrappcomment@xxxxxx:27017/jrappcomment?authSource=jrappcomment //è¿æ¥è¿œç¨‹æ•°æ®åº“</div><div class="line"></div><div class="line">mongoexport -h xxxxxx --port 27017 -d jrappcomment -u jrappcomment -p jrappcomment -c jrcommentcategory -o goods2.json //å¯¼å‡º</div><div class="line"></div><div class="line">mongoimport -h xxxxxx --port 27017 -d jrappcomment -u jrappcomment -p jrappcomment -c cachecomment --file goods2.json//å¯¼å…¥</div></pre></td></tr></table></figure>
<ul>
<li>db.stats()</li>
<li>show dbs</li>
<li>show tables</li>
<li>show collections</li>
<li>db.collection.totalIndexSize()</li>
<li>db.collection.totalSize()</li>
<li>db.jrcomment.ensureIndex({id:1}) //mongoå»ºç«‹ç´¢å¼• </li>
</ul>
<h4 id="pymongoè¿œç¨‹è¿æ¥æ•°æ®åº“"><a href="#pymongoè¿œç¨‹è¿æ¥æ•°æ®åº“" class="headerlink" title="pymongoè¿œç¨‹è¿æ¥æ•°æ®åº“"></a>pymongoè¿œç¨‹è¿æ¥æ•°æ®åº“</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">dbs = comment.find(&#123;&#125;).sort([(&apos;datetime&apos;,1),(&apos;created_time&apos;,1)]).limit(10000)</div><div class="line">print type(list(dbs))</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">import os, time, json ,sys</div><div class="line">from pymongo import MongoClient</div><div class="line">import urllib</div><div class="line"></div><div class="line">username = urllib.quote_plus(&apos;jrappcomment&apos;)</div><div class="line">password = urllib.quote_plus(&apos;jrappcomment&apos;)</div><div class="line"></div><div class="line">client = MongoClient(&apos;mongodb://%s:%s@xxxxxx:27017/jrappcomment?authSource=jrappcomment&apos; % (username, password))</div><div class="line"></div><div class="line"># client = MongoClient(&quot;mongodb://172.25.60.48:27017&quot;)</div><div class="line"># client.adb.authenticate(username, password, mechanism=&apos;SCRAM-SHA-1&apos;)</div><div class="line"></div><div class="line"># client = MongoClient(&apos;mongodb://jrappcomment:jrappcomment@172.25.60.48:27017/&apos;)</div><div class="line">db = client.jrappcomment</div><div class="line"></div><div class="line">comment = db.Comment</div><div class="line"></div><div class="line">comment.insert(&#123;&apos;name&apos;:&apos;ceshi&apos;&#125;)</div><div class="line"></div><div class="line">dbs = comment.find(&#123;&#125;)</div><div class="line"></div><div class="line">print dbs</div><div class="line">for item in dbs:</div><div class="line">    print &apos;ceshi&apos;</div><div class="line">    print item</div></pre></td></tr></table></figure>
<h4 id="pymongoå¸¸ç”¨å‘½ä»¤"><a href="#pymongoå¸¸ç”¨å‘½ä»¤" class="headerlink" title="pymongoå¸¸ç”¨å‘½ä»¤"></a>pymongoå¸¸ç”¨å‘½ä»¤</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">comment.update(&#123;&apos;name&apos;:&apos;hanshenghui&apos;&#125;,&#123;&apos;$set&apos;:&#123;&apos;age&apos;:30&#125;&#125;)</div></pre></td></tr></table></figure>
<p>ä¸ç­‰äº<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123; x : &#123; $ne : 3 &#125; &#125;</div></pre></td></tr></table></figure></p>
]]></content>
      
        
        <tags>
            
            <tag> mongo </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[centos6é…ç½®]]></title>
      <url>/2017/12/15/2017/centos6%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<ul>
<li>é¦–å…ˆéœ€è¦pythonç¯å¢ƒä¸º2.7ä»¥ä¸Šç‰ˆæœ¬</li>
<li>éœ€è¦yumç‰ˆæœ¬ä¸º<code>3.4.3</code>åŠä»¥ä¸Šï¼Œå› ä¸ºè¿™æ ·æ‰èƒ½å®‰è£…httpdä¸º<code>2.4</code>ç‰ˆæœ¬åŠä»¥ä¸Š</li>
<li>å®‰è£…Django<code>sudo pip install --upgrade django==1.11</code></li>
<li>å®‰è£…numpy<code>sudo pip install numpy</code></li>
<li>å®‰è£…pymong<code>sudo pip install pymongo</code></li>
<li>lunix å®‰è£…apxsæ‰©å±•<code>yum install httpd-devel</code>å®‰è£…mod-wsgiéœ€è¦</li>
<li>å®‰è£…mod_wsgi<code>sudo pip install mod_wsgi</code>Djangoéœ€è¦</li>
<li>å®‰è£…mod_wsgi<code>sudo yum install mod_wsgi</code>è¿™ä¸ªæ¨¡å—ä¼šå‡ºç°åœ¨./usr/lib64/httpd/modules/mod_wsgi.soè¿™é‡Œ</li>
<li>ä½¿ç”¨rz/szæ¥ä¸Šä¼ æˆ–è€…ä¸‹è½½æ–‡ä»¶<code>yum install lrzsz</code><a id="more"></a>
</li>
</ul>
<h3 id="æ‰‹åŠ¨å®‰è£…apache"><a href="#æ‰‹åŠ¨å®‰è£…apache" class="headerlink" title="æ‰‹åŠ¨å®‰è£…apache"></a>æ‰‹åŠ¨å®‰è£…apache</h3><h4 id="ä¸‹è½½æ–‡ä»¶"><a href="#ä¸‹è½½æ–‡ä»¶" class="headerlink" title="ä¸‹è½½æ–‡ä»¶"></a>ä¸‹è½½æ–‡ä»¶</h4><ul>
<li><p>Apache HTTP Server</p>
<p>  æˆªæ­¢ç›®å‰ä¸ºæ­¢ï¼ŒApache HTTP Server ç›®å‰æœ€æ–°çš„ç‰ˆæœ¬æ˜¯ Apache httpd 2.4.6 Releasedï¼Œ ä¸‹è½½åœ°å€ï¼š<a href="http://httpd.apache.org/download.cgi#apache24" target="_blank" rel="external">http://httpd.apache.org/download.cgi#apache24</a></p>
</li>
<li><p>APR and APR-UtilåŒ…</p>
<p>  æˆªæ­¢ç›®å‰ä¸ºæ­¢ï¼ŒAPR and APR-Utilçš„æœ€æ–°ç‰ˆæœ¬å¦‚ä¸‹ï¼Œä¸‹è½½åœ°å€ï¼š<a href="http://apr.apache.org/download.cgi" target="_blank" rel="external">http://apr.apache.org/download.cgi</a></p>
</li>
</ul>
<p>APR 1.4.8, released June 21, 2013<br>APR-util 1.5.2, released April 4, 2013<br>APR-iconv 1.2.1, released November 26, 2007</p>
<ul>
<li><p>PCREåŒ…</p>
<p> æˆªæ­¢ç›®å‰ä¸ºæ­¢ï¼ŒPCREæœ€æ–°çš„åŒ…ä¸º8.33ï¼Œä¸‹è½½åœ°å€å¦‚ä¸‹</p>
</li>
</ul>
<p><a href="https://sourceforge.net/projects/pcre/files/pcre/" target="_blank" rel="external">https://sourceforge.net/projects/pcre/files/pcre/</a></p>
<h4 id="å®‰è£…æ–¹æ³•"><a href="#å®‰è£…æ–¹æ³•" class="headerlink" title="å®‰è£…æ–¹æ³•"></a>å®‰è£…æ–¹æ³•</h4><ul>
<li>1ï¼šå®‰è£…åŒ…gccæˆ–gcc-c++<code>yum install gcc-c++</code></li>
<li>2:å®‰è£…devel<code>yum install expat-devel</code></li>
<li>3:å®‰è£…apr<ul>
<li><code>mkdir /usr/local/apr</code></li>
<li><code>./configure --prefix=/usr/local/apr</code></li>
<li><code>make &amp;&amp; sudo make install</code></li>
</ul>
</li>
<li>4:å®‰è£…apr-util<ul>
<li><code>mkdir /usr/local/apr-util</code></li>
<li><code>./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr/bin/apr-1-config</code></li>
<li><code>make &amp;&amp; sudo make install</code></li>
</ul>
</li>
<li>5:å®‰è£…pcre<ul>
<li><code>mkdir /usr/local/pcre</code></li>
<li><code>./configure --prefix=/usr/local/pcre --with-apr=/usr/local/apr/bin/apr-1-config</code></li>
<li><code>make &amp;&amp; sudo make install</code></li>
</ul>
</li>
<li>6:å®‰è£…apache<ul>
<li><code>./configure --prefix=/usr/local/apache --with-pcre=/usr/local/pcre --with-apr=/usr/local/apr --with-apr-util=/usr/local/apr-util</code></li>
<li><code>make &amp;&amp; sudo make install</code></li>
</ul>
</li>
<li>6:å°†apachectlè½¯é“¾æ¥åˆ°/usr/sbin/apachectlè¿™ä¸ªè·¯å¾„ä¸‹</li>
<li>7:httpdä¹Ÿè¦è½¯é“¾åˆ°/usr/sbin/ä¸‹</li>
<li>8:å®‰è£…mod_wsgi<ul>
<li><code>https://github.com/GrahamDumpleton/mod_wsgi/releases</code>è¿™ä¸ªåœ°å€ä¸‹è½½</li>
<li><code>tar â€“zxvf mod_wsgi-3.4.tar.gz</code></li>
<li><code>./configure --with-apxs=/usr/local/apache/bin/apxs --with-python=/usr/bin/python</code></li>
<li><code>make &amp;&amp; make install</code></li>
<li><code>chmod 755 /usr/local/apache/modules/mod_wsgi.so</code></li>
</ul>
</li>
</ul>
<h3 id="apacheé…ç½®"><a href="#apacheé…ç½®" class="headerlink" title="apacheé…ç½®"></a>apacheé…ç½®</h3><ul>
<li>apacheè·¯å¾„<code>/etc/httpd/conf</code></li>
<li>é‡å¯ Apacheï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service httpd restart</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="pipé…ç½®"><a href="#pipé…ç½®" class="headerlink" title="pipé…ç½®"></a>pipé…ç½®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[global]</div><div class="line">trusted-host = 10.13.8.31</div><div class="line">index-url = http://10.13.8.31/simple/</div></pre></td></tr></table></figure>
<h3 id="é”™è¯¯"><a href="#é”™è¯¯" class="headerlink" title="é”™è¯¯"></a>é”™è¯¯</h3><h4 id="error-while-loading-shared-libraries-libpython2-7-so-1-0-cannot-open-shared-object-file-No-such-file-or-directory"><a href="#error-while-loading-shared-libraries-libpython2-7-so-1-0-cannot-open-shared-object-file-No-such-file-or-directory" class="headerlink" title="error while loading shared libraries: libpython2.7.so.1.0: cannot open shared object file: No such file or directory"></a>error while loading shared libraries: libpython2.7.so.1.0: cannot open shared object file: No such file or directory</h4><p>sudo find . -name libpython2.7.so.1.0<br>æ‰¾åˆ°è·¯å¾„ï¼Œç„¶ååŠ å…¥ä¸‹è¾¹çš„æ–‡ä»¶</p>
<p>vi /etc/ld.so.conf<br>åŠ å…¥æ–°è¡Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/export/python/lib</div></pre></td></tr></table></figure></p>
<p>è¿è¡Œ<code>sudo ldconfig</code></p>
]]></content>
      
        
        <tags>
            
            <tag> linux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[python-setçš„ç”¨æ³•]]></title>
      <url>/2017/11/22/2018/python-set%E7%9A%84%E7%94%A8%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>pythonçš„setå’Œå…¶ä»–è¯­è¨€ç±»ä¼¼, æ˜¯ä¸€ä¸ªæ— åºä¸é‡å¤å…ƒç´ é›†, åŸºæœ¬åŠŸèƒ½åŒ…æ‹¬å…³ç³»æµ‹è¯•å’Œæ¶ˆé™¤é‡å¤å…ƒç´ . é›†åˆå¯¹è±¡è¿˜æ”¯æŒunion(è”åˆ), intersection(äº¤), difference(å·®)å’Œsysmmetric difference(å¯¹ç§°å·®é›†)ç­‰æ•°å­¦è¿ç®—.  </p>
<p>sets æ”¯æŒ x in set, len(set),å’Œ for x in setã€‚ä½œä¸ºä¸€ä¸ªæ— åºçš„é›†åˆï¼Œsetsä¸è®°å½•å…ƒç´ ä½ç½®æˆ–è€…æ’å…¥ç‚¹ã€‚å› æ­¤ï¼Œsetsä¸æ”¯æŒ indexing, slicing, æˆ–å…¶å®ƒç±»åºåˆ—ï¼ˆsequence-likeï¼‰çš„æ“ä½œã€‚<br><a id="more"></a></p>
<p>ä¸‹é¢æ¥ç‚¹ç®€å•çš„å°ä¾‹å­è¯´æ˜æŠŠã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">x = set(&apos;spam&apos;)  </div><div class="line">y = set([&apos;h&apos;,&apos;a&apos;,&apos;m&apos;])  </div><div class="line">x, y  </div><div class="line">(set([&apos;a&apos;, &apos;p&apos;, &apos;s&apos;, &apos;m&apos;]), set([&apos;a&apos;, &apos;h&apos;, &apos;m&apos;]))</div></pre></td></tr></table></figure></p>
<p>å†æ¥äº›å°åº”ç”¨ã€‚  </p>
<pre><code>x &amp; y # äº¤é›†  
set([&apos;a&apos;, &apos;m&apos;])  

x | y # å¹¶é›†  
set([&apos;a&apos;, &apos;p&apos;, &apos;s&apos;, &apos;h&apos;, &apos;m&apos;])  

x - y # å·®é›†  
set([&apos;p&apos;, &apos;s&apos;])
</code></pre><p>è®°å¾—ä»¥å‰ä¸ªç½‘å‹æé—®æ€ä¹ˆå»é™¤æµ·é‡åˆ—è¡¨é‡Œé‡å¤å…ƒç´ ï¼Œç”¨hashæ¥è§£å†³ä¹Ÿè¡Œï¼Œåªä¸è¿‡æ„Ÿè§‰åœ¨æ€§èƒ½ä¸Šä¸æ˜¯å¾ˆé«˜ï¼Œç”¨setè§£å†³è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š  </p>
<pre><code>a = [11,22,33,44,11,22]  
b = set(a)  

set([33, 11, 44, 22])  
c = [i for i in b]  
c  
[33, 11, 44, 22]
</code></pre><p>å¾ˆé…·æŠŠï¼Œå‡ è¡Œå°±å¯ä»¥æå®šã€‚  </p>
<p>1.8ã€€é›†åˆ   </p>
<p>é›†åˆç”¨äºåŒ…å«ä¸€ç»„æ— åºçš„å¯¹è±¡ã€‚è¦åˆ›å»ºé›†åˆï¼Œå¯ä½¿ç”¨set()å‡½æ•°å¹¶åƒä¸‹é¢è¿™æ ·æä¾›ä¸€ç³»åˆ—çš„é¡¹ï¼š  </p>
<p>s = set([3,5,9,10])      #åˆ›å»ºä¸€ä¸ªæ•°å€¼é›†åˆ  </p>
<p>t = set(â€œHelloâ€)         #åˆ›å»ºä¸€ä¸ªå”¯ä¸€å­—ç¬¦çš„é›†åˆ  </p>
<p>ä¸åˆ—è¡¨å’Œå…ƒç»„ä¸åŒï¼Œé›†åˆæ˜¯æ— åºçš„ï¼Œä¹Ÿæ— æ³•é€šè¿‡æ•°å­—è¿›è¡Œç´¢å¼•ã€‚æ­¤å¤–ï¼Œé›†åˆä¸­çš„å…ƒç´ ä¸èƒ½é‡å¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ£€æŸ¥å‰é¢ä»£ç ä¸­té›†åˆçš„å€¼ï¼Œç»“æœä¼šæ˜¯ï¼š<br>t<br>set([â€˜Hâ€™, â€˜eâ€™, â€˜lâ€™, â€˜oâ€™])  </p>
<p>æ³¨æ„åªå‡ºç°äº†ä¸€ä¸ªâ€™lâ€™ã€‚  </p>
<p>é›†åˆæ”¯æŒä¸€ç³»åˆ—æ ‡å‡†æ“ä½œï¼ŒåŒ…æ‹¬å¹¶é›†ã€äº¤é›†ã€å·®é›†å’Œå¯¹ç§°å·®é›†ï¼Œä¾‹å¦‚ï¼š  </p>
<pre><code>a = t | s          # t å’Œ sçš„å¹¶é›†  

b = t &amp; s          # t å’Œ sçš„äº¤é›†  

c = t â€“ s          # æ±‚å·®é›†ï¼ˆé¡¹åœ¨tä¸­ï¼Œä½†ä¸åœ¨sä¸­ï¼‰  

d = t ^ s          # å¯¹ç§°å·®é›†ï¼ˆé¡¹åœ¨tæˆ–sä¸­ï¼Œä½†ä¸ä¼šåŒæ—¶å‡ºç°åœ¨äºŒè€…ä¸­ï¼‰
</code></pre><p>åŸºæœ¬æ“ä½œï¼š  </p>
<p>t.add(â€˜xâ€™)            # æ·»åŠ ä¸€é¡¹  </p>
<p>s.update([10,37,42])  # åœ¨sä¸­æ·»åŠ å¤šé¡¹  </p>
<p>ä½¿ç”¨remove()å¯ä»¥åˆ é™¤ä¸€é¡¹ï¼š  </p>
<p>t.remove(â€˜Hâ€™)  </p>
<p>len(s)<br>set çš„é•¿åº¦  </p>
<p>x in s<br>æµ‹è¯• x æ˜¯å¦æ˜¯ s çš„æˆå‘˜  </p>
<p>x not in s<br>æµ‹è¯• x æ˜¯å¦ä¸æ˜¯ s çš„æˆå‘˜  </p>
<p>s.issubset(t)<br>s &lt;= t<br>æµ‹è¯•æ˜¯å¦ s ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½åœ¨ t ä¸­  </p>
<p>s.issuperset(t)<br>s &gt;= t<br>æµ‹è¯•æ˜¯å¦ t ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½åœ¨ s ä¸­  </p>
<p>s.union(t)<br>s | t<br>è¿”å›ä¸€ä¸ªæ–°çš„ set åŒ…å« s å’Œ t ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´   </p>
<p>s.intersection(t)<br>s &amp; t<br>è¿”å›ä¸€ä¸ªæ–°çš„ set åŒ…å« s å’Œ t ä¸­çš„å…¬å…±å…ƒç´   </p>
<p>s.difference(t)<br>s - t<br>è¿”å›ä¸€ä¸ªæ–°çš„ set åŒ…å« s ä¸­æœ‰ä½†æ˜¯ t ä¸­æ²¡æœ‰çš„å…ƒç´   </p>
<p>s.symmetric_difference(t)<br>s ^ t<br>è¿”å›ä¸€ä¸ªæ–°çš„ set åŒ…å« s å’Œ t ä¸­ä¸é‡å¤çš„å…ƒç´   </p>
<p>s.copy()<br>è¿”å› set â€œsâ€çš„ä¸€ä¸ªæµ…å¤åˆ¶  </p>
<p>è¯·æ³¨æ„ï¼šunion(), intersection(), difference() å’Œ symmetric_difference() çš„éè¿ç®—ç¬¦ï¼ˆnon-operatorï¼Œå°±æ˜¯å½¢å¦‚ s.union()è¿™æ ·çš„ï¼‰ç‰ˆæœ¬å°†ä¼šæ¥å—ä»»ä½• iterable ä½œä¸ºå‚æ•°ã€‚ç›¸åï¼Œå®ƒä»¬çš„è¿ç®—ç¬¦ç‰ˆæœ¬ï¼ˆoperator based counterpartsï¼‰è¦æ±‚å‚æ•°å¿…é¡»æ˜¯ setsã€‚è¿™æ ·å¯ä»¥é¿å…æ½œåœ¨çš„é”™è¯¯ï¼Œå¦‚ï¼šä¸ºäº†æ›´å¯è¯»è€Œä½¿ç”¨ set(â€˜abcâ€™) &amp; â€˜cbsâ€™ æ¥æ›¿ä»£ set(â€˜abcâ€™).intersection(â€˜cbsâ€™)ã€‚ä» 2.3.1 ç‰ˆæœ¬ä¸­åšçš„æ›´æ”¹ï¼šä»¥å‰æ‰€æœ‰å‚æ•°éƒ½å¿…é¡»æ˜¯ setsã€‚  </p>
<p>å¦å¤–ï¼ŒSet å’Œ ImmutableSet ä¸¤è€…éƒ½æ”¯æŒ set ä¸ set ä¹‹é—´çš„æ¯”è¾ƒã€‚ä¸¤ä¸ª sets åœ¨ä¹Ÿåªæœ‰åœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯ç›¸ç­‰çš„ï¼šæ¯ä¸€ä¸ª set ä¸­çš„å…ƒç´ éƒ½æ˜¯å¦ä¸€ä¸ªä¸­çš„å…ƒç´ ï¼ˆäºŒè€…äº’ä¸ºsubsetï¼‰ã€‚ä¸€ä¸ª set æ¯”å¦ä¸€ä¸ª set å°ï¼Œåªæœ‰åœ¨ç¬¬ä¸€ä¸ª set æ˜¯ç¬¬äºŒä¸ª set çš„ subset æ—¶ï¼ˆæ˜¯ä¸€ä¸ª subsetï¼Œä½†æ˜¯å¹¶ä¸ç›¸ç­‰ï¼‰ã€‚ä¸€ä¸ª set æ¯”å¦ä¸€ä¸ª set æ‰“ï¼Œåªæœ‰åœ¨ç¬¬ä¸€ä¸ª set æ˜¯ç¬¬äºŒä¸ª set çš„ superset æ—¶ï¼ˆæ˜¯ä¸€ä¸ª supersetï¼Œä½†æ˜¯å¹¶ä¸ç›¸ç­‰ï¼‰ã€‚  </p>
<p>å­ set å’Œç›¸ç­‰æ¯”è¾ƒå¹¶ä¸äº§ç”Ÿå®Œæ•´çš„æ’åºåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼šä»»æ„ä¸¤ä¸ª sets éƒ½ä¸ç›¸ç­‰ä¹Ÿä¸äº’ä¸ºå­ setï¼Œå› æ­¤ä»¥ä¸‹çš„è¿ç®—éƒ½ä¼šè¿”å› Falseï¼ša<b, a="=b," æˆ–è€…a="">bã€‚å› æ­¤ï¼Œsets ä¸æä¾› <strong>cmp</strong> æ–¹æ³•ã€‚  </b,></p>
<p>å› ä¸º sets åªå®šä¹‰äº†éƒ¨åˆ†æ’åºåŠŸèƒ½ï¼ˆsubset å…³ç³»ï¼‰ï¼Œlist.sort() æ–¹æ³•çš„è¾“å‡ºå¯¹äº sets çš„åˆ—è¡¨æ²¡æœ‰å®šä¹‰ã€‚  </p>
<p>è¿ç®—ç¬¦<br>   è¿ç®—ç»“æœ  </p>
<p>hash(s)<br>   è¿”å› s çš„ hash å€¼  </p>
<p>ä¸‹é¢è¿™ä¸ªè¡¨åˆ—å‡ºäº†å¯¹äº Set å¯ç”¨äºŒå¯¹äº ImmutableSet ä¸å¯ç”¨çš„è¿ç®—ï¼š  </p>
<p>è¿ç®—ç¬¦ï¼ˆvoperatorï¼‰<br>ç­‰ä»·äº<br>è¿ç®—ç»“æœ  </p>
<p>s.update(t)<br>s |= t<br>è¿”å›å¢åŠ äº† set â€œtâ€ä¸­å…ƒç´ åçš„ set â€œsâ€  </p>
<p>s.intersection_update(t)<br>s &amp;= t<br>è¿”å›åªä¿ç•™å«æœ‰ set â€œtâ€ä¸­å…ƒç´ çš„ set â€œsâ€  </p>
<p>s.difference_update(t)<br>s -= t<br>è¿”å›åˆ é™¤äº† set â€œtâ€ä¸­å«æœ‰çš„å…ƒç´ åçš„ set â€œsâ€  </p>
<p>s.symmetric_difference_update(t)<br>s ^= t<br>è¿”å›å«æœ‰ set â€œtâ€æˆ–è€… set â€œsâ€ä¸­æœ‰è€Œä¸æ˜¯ä¸¤è€…éƒ½æœ‰çš„å…ƒç´ çš„ set â€œsâ€  </p>
<p>s.add(x)  </p>
<p>å‘ set â€œsâ€ä¸­å¢åŠ å…ƒç´  x  </p>
<p>s.remove(x)  </p>
<p>ä» set â€œsâ€ä¸­åˆ é™¤å…ƒç´  x, å¦‚æœä¸å­˜åœ¨åˆ™å¼•å‘ KeyError  </p>
<p>s.discard(x)  </p>
<p>å¦‚æœåœ¨ set â€œsâ€ä¸­å­˜åœ¨å…ƒç´  x, åˆ™åˆ é™¤  </p>
<p>s.pop()  </p>
<p>åˆ é™¤å¹¶ä¸”è¿”å› set â€œsâ€ä¸­çš„ä¸€ä¸ªä¸ç¡®å®šçš„å…ƒç´ , å¦‚æœä¸ºç©ºåˆ™å¼•å‘ KeyError  </p>
<p>s.clear()  </p>
<p>åˆ é™¤ set â€œsâ€ä¸­çš„æ‰€æœ‰å…ƒç´   </p>
<p>è¯·æ³¨æ„ï¼šéè¿ç®—ç¬¦ç‰ˆæœ¬çš„ update(), intersection_update(), difference_update()å’Œsymmetric_difference_update()å°†ä¼šæ¥å—ä»»æ„ iterable ä½œä¸ºå‚æ•°ã€‚ä» 2.3.1 ç‰ˆæœ¬åšçš„æ›´æ”¹ï¼šä»¥å‰æ‰€æœ‰å‚æ•°éƒ½å¿…é¡»æ˜¯ setsã€‚  </p>
<p>è¿˜è¯·æ³¨æ„ï¼šè¿™ä¸ªæ¨¡å—è¿˜åŒ…å«ä¸€ä¸ª union_update() æ–¹æ³•ï¼Œå®ƒæ˜¯ update() æ–¹æ³•çš„ä¸€ä¸ªåˆ«åã€‚åŒ…å«è¿™ä¸ªæ–¹æ³•æ˜¯ä¸ºäº†å‘åå…¼å®¹ã€‚ç¨‹åºå‘˜ä»¬åº”è¯¥å¤šä½¿ç”¨ update() æ–¹æ³•ï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•ä¹Ÿè¢«å†…ç½®çš„ set() å’Œ frozenset() ç±»å‹æ”¯æŒã€‚  </p>
]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Mac-Vimä½¿ç”¨æ•™ç¨‹]]></title>
      <url>/2017/11/11/2018/Mac-Vim%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</url>
      <content type="html"><![CDATA[<h4 id="å„ç§å…‰æ ‡ç§»åŠ¨"><a href="#å„ç§å…‰æ ‡ç§»åŠ¨" class="headerlink" title="å„ç§å…‰æ ‡ç§»åŠ¨"></a>å„ç§å…‰æ ‡ç§»åŠ¨</h4><p>w     è·³åˆ°ä¸‹ä¸€ä¸ªå­—é¦–ï¼ŒæŒ‰æ ‡ç‚¹æˆ–å•è¯åˆ†å‰²<br>W     è·³åˆ°ä¸‹ä¸€ä¸ªå­—é¦–ï¼Œé•¿è·³ï¼Œå¦‚end-of-lineè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå­—<br>e     è·³åˆ°ä¸‹ä¸€ä¸ªå­—å°¾<br>E     è·³åˆ°ä¸‹ä¸€ä¸ªå­—å°¾ï¼Œé•¿è·³<br>b     è·³åˆ°ä¸Šä¸€ä¸ªå­—<br>B     è·³åˆ°ä¸Šä¸€ä¸ªå­—ï¼Œé•¿è·³<br>0     è·³è‡³è¡Œé¦–ï¼Œä¸ç®¡æœ‰æ— ç¼©è¿›ï¼Œå°±æ˜¯è·³åˆ°ç¬¬0ä¸ªå­—ç¬¦</p>
<p>n+ ç§»nè¡Œè¡Œé¦–<br>n- ç§»nè¡Œè¡Œé¦–<br>n$ ç§»nè¡Œ(1è¡¨ç¤ºæœ¬è¡Œ)è¡Œå°¾<br>0 æ‰€è¡Œè¡Œé¦–<br>$ æ‰€è¡Œè¡Œå°¾<br>^ æ‰€è¡Œé¦–å­—æ¯<br>h,j,k,l å·¦ç§»ç§»ç§»å³ç§»<br>H å‰å±å¹•é¦–è¡Œè¡Œé¦–<br>M å±å¹•æ˜¾ç¤ºæ–‡ä»¶é—´è¡Œè¡Œé¦–<br>L å‰å±å¹•åº•è¡Œè¡Œé¦–</p>
<h4 id="å„ç§åˆ é™¤"><a href="#å„ç§åˆ é™¤" class="headerlink" title="å„ç§åˆ é™¤"></a>å„ç§åˆ é™¤</h4><p>dG    åˆ é™¤è‡³æ–‡ç« ç»“å°¾éƒ¨<br>d1G   åˆ é™¤è‡³æ–‡ç« å¼€å¤´éƒ¨<br>2dd   åˆ é™¤ä¸¤è¡Œ<br>dd    åˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œ<br>dw    åˆ é™¤ä¸€ä¸ªå­—(word)ä¸é€‚åˆä¸­æ–‡<br>x     åˆ é™¤å½“å‰å­—ç¬¦<br>10x   åˆ é™¤åä¸ªè¿ç»­å­—ç¬¦<br>X     åˆ é™¤å‰ä¸€ä¸ªå­—ç¬¦<br>D     åˆ é™¤åˆ°è¡Œæœ«</p>
<h4 id="å¤åˆ¶ç²˜è´´"><a href="#å¤åˆ¶ç²˜è´´" class="headerlink" title="å¤åˆ¶ç²˜è´´"></a>å¤åˆ¶ç²˜è´´</h4><p>yy     å¤åˆ¶ä¸€è¡Œï¼Œæ­¤å‘½ä»¤å‰å¯è·Ÿæ•°å­—ï¼Œæ ‡è¯†å¤åˆ¶å¤šè¡Œï¼Œå¦‚6yyï¼Œè¡¨ç¤ºä»å½“å‰è¡Œå¼€å§‹å¤åˆ¶6è¡Œ<br>yw     å¤åˆ¶ä¸€ä¸ªå­—<br>y$     å¤åˆ¶åˆ°è¡Œæœ«<br>p     ç²˜è´´ç²˜è´´æ¿çš„å†…å®¹åˆ°å½“å‰è¡Œçš„ä¸‹é¢<br>P     ç²˜è´´ç²˜è´´æ¿çš„å†…å®¹åˆ°å½“å‰è¡Œçš„ä¸Šé¢<br>]p     æœ‰ç¼©è¿›çš„ç²˜è´´ï¼Œvimä¼šè‡ªåŠ¨è°ƒèŠ‚ä»£ç çš„ç¼©è¿›<br>â€œa     å°†å†…å®¹æ”¾å…¥/å­˜å…¥aå¯„å­˜å™¨ï¼Œå¯ä»¥æ”¯æŒå¤šç²˜è´´æ¿<br>é™„ï¼šæ¯”å¦‚å¸¸ç”¨çš„ä¸€ä¸ªå¯„å­˜å™¨å°±æ˜¯ç³»ç»Ÿå¯„å­˜å™¨ï¼Œåç§°ä¸º+ï¼Œæ‰€ä»¥ä»ç³»ç»Ÿç²˜è´´æ¿ç²˜è´´åˆ°vimä¸­çš„å‘½ä»¤ä¸ºâ€+p,æ³¨æ„æ­¤å¤„çš„+ä¸è¡¨ç¤ºæ“ä½œç¬¦ï¼ŒäºŒåä¸€ä¸ªå¯„å­˜å™¨ã€‚<br>ç§»åŠ¨å…‰æ ‡<br>åœ¨vimä¸­ç§»åŠ¨å…‰æ ‡è·Ÿå…¶ä»–çš„ç¼–è¾‘å™¨ä¸­æœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œä¸è¿‡ä¸€æ—¦å­¦ä¼šäº†ï¼Œå°±ä¼šé£é€Ÿçš„åœ¨æ–‡æœ¬ä¸­ç§»åŠ¨äº†ã€‚</p>
<h4 id="å…‰æ ‡å¿«é€Ÿç§»åŠ¨"><a href="#å…‰æ ‡å¿«é€Ÿç§»åŠ¨" class="headerlink" title="å…‰æ ‡å¿«é€Ÿç§»åŠ¨"></a>å…‰æ ‡å¿«é€Ÿç§»åŠ¨</h4><p><code>gg</code>å¿«é€Ÿç§»åŠ¨åˆ°å¤´éƒ¨<br><code>G</code>å¿«é€Ÿç§»åŠ¨åˆ°å°¾éƒ¨<br><code>10G</code>ç§»åŠ¨åˆ°ç¬¬åè¡Œ</p>
<blockquote>
<p>æ˜¾ç¤ºè¡Œå·<br>:set number</p>
<p>æ°¸ä¹…æ˜¾ç¤ºè¡Œå·:</p>
<p>$vi ~/.vimrc<br>å¾€æ–‡ä»¶é‡Œé¢æ·»åŠ å†…å®¹ï¼š set number , ä¿å­˜é€€å‡ºã€‚</p>
</blockquote>
<h4 id="è¡Œå†…å…‰æ ‡è·³è½¬"><a href="#è¡Œå†…å…‰æ ‡è·³è½¬" class="headerlink" title="è¡Œå†…å…‰æ ‡è·³è½¬"></a>è¡Œå†…å…‰æ ‡è·³è½¬</h4><ul>
<li><code>w</code>å½“å‰å•è¯å¼€å¤´</li>
<li><code>e</code>å½“å‰å•è¯æœ«å°¾</li>
<li><code>b</code>å‰ä¸€ä¸ªå•è¯å¼€å¤´</li>
<li><code>ge</code>å‰ä¸€ä¸ªå•è¯æœ«å°¾</li>
<li><code>o/^</code>è¡Œå¼€å§‹</li>
<li><code>$</code>è¡Œæœ«å°¾</li>
<li><code>f&lt;name&gt;</code>å‘åæœç´¢å¹¶ä¸”è·³è½¬åˆ°è¯¥å­—æ¯</li>
<li><code>F&lt;name&gt;</code>å‘å‰æœç´¢å¹¶ä¸”è·³è½¬åˆ°è¯¥å­—æ¯</li>
</ul>
<h4 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h4><p><code>/name</code>å¼€å§‹è¿›è¡ŒæŸ¥æ‰¾nameï¼Œç„¶åè¾“å…¥nç»§ç»­å‘ä¸‹æŸ¥æ‰¾ï¼Œè¾“å…¥Nç»§ç»­å‘ä¸ŠæŸ¥æ‰¾</p>
]]></content>
      
        
        <tags>
            
            <tag> å·¥å…· </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[linuxå…¥é—¨]]></title>
      <url>/2017/11/09/2018/lunix%E5%85%A5%E9%97%A8/</url>
      <content type="html"><![CDATA[<p>æŸ¥çœ‹linuxç‰ˆæœ¬ <code>lsb_release -a</code></p>
<p>Ctrl+a ç§»åŠ¨åˆ°è¡Œåˆ<br>Ctrl+e ç§»åŠ¨åˆ°è¡Œæœ«<br>Ctrl+k åˆ é™¤ä»å…‰æ ‡ä½ç½®åˆ°è¡Œæœ«<br>Alts+backspace å‘å‰åˆ é™¤ä¸€ä¸ªå•è¯<br><a id="more"></a><br><code>ls *.txt</code>æ˜¾ç¤ºæ‰€æœ‰çš„.txtç»“å°¾çš„æ–‡ä»¶<br><code>touch love{1..10}.txt</code>åˆ›å»ºäº†åä¸ªæ–‡ä»¶<br><code>touch today{name,hahm,ceshi}.txt</code>åˆ›å»ºäº†ä¸‰ä¸ªæ–‡ä»¶</p>
<h3 id="ç”¨æˆ·ç›¸å…³"><a href="#ç”¨æˆ·ç›¸å…³" class="headerlink" title="ç”¨æˆ·ç›¸å…³"></a>ç”¨æˆ·ç›¸å…³</h3><p><code>who -a</code>æ‰“å°å…¨éƒ¨<br><code>who -d</code>æ‰“å°æ­»æ‰çš„è¿›ç¨‹<br><code>who -m</code>æˆ–è€…<code>who am i</code>å½“å‰ç™»å½•ç”¨æˆ·<br><code>who -q</code>æ‰“å°å½“å‰ç™»å½•ç”¨æˆ·æ•°ä»¥åŠç”¨æˆ·å<br><code>who -u</code>æ‰“å°å½“å‰ç™»å½•ç”¨æˆ·ç™»å½•ä¿¡æ¯<br><code>who -r</code>æ‰“å°è¿è¡Œç­‰çº§</p>
<p><code>sudo adduser username</code>æ·»åŠ ç”¨æˆ·<br><code>su -l username</code>åˆ‡æ¢ç”¨æˆ·<br><code>exit</code>é€€å‡ºå½“å‰ç”¨æˆ·å›åˆ°ä¸Šä¸€ä¸ªç”¨æˆ·</p>
<p>æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cat /etc/passwd å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·çš„åˆ—è¡¨</div><div class="line">w å¯ä»¥æŸ¥çœ‹å½“å‰æ´»è·ƒçš„ç”¨æˆ·åˆ—è¡¨</div><div class="line">cat /etc/group æŸ¥çœ‹ç”¨æˆ·ç»„</div></pre></td></tr></table></figure></p>
<p>ç”¨æˆ·ç»„<br><code>groups han</code>æŸ¥çœ‹å½“å‰ç”¨æˆ·å±äºå•¥ç»„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">han : han //å‰è¾¹æ˜¯ç”¨æˆ·ï¼Œåè¾¹æ˜¯ç»„</div></pre></td></tr></table></figure></p>
<p><code>chgrp -R</code></p>
<p>æ–°å»ºçš„ç”¨æˆ·ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåŒåçš„ç»„ï¼Œæ³¨æ„è¿™ä¸ªæ–°å»ºçš„ç”¨æˆ·ä¸åœ¨rootç”¨æˆ·ç»„ä¸‹è¾¹ï¼Œé‚£å°±æ„å‘³ç€å½“ä½ åˆ‡æ¢åˆ°hanè¿™ä¸ªç”¨æˆ·ä¸‹è¾¹çš„æ—¶å€™ï¼Œå…¶å®ä½ æ˜¯ä¸èƒ½ä½¿ç”¨sudoçš„ï¼Œé‚£æ€ä¹ˆå°†hanæ·»åŠ åˆ°sudoä¸‹å‘¢ï¼Ÿ<br><code>sudo usermod -G root han</code>æ·»åŠ hanåˆ°ç”¨æˆ·ç»„ä¸‹è¾¹<br><code>sudo deluser han --remove-home</code>åˆ é™¤ç”¨æˆ·</p>
<h3 id="æƒé™"><a href="#æƒé™" class="headerlink" title="æƒé™"></a>æƒé™</h3><p><code>ls -l</code></p>
<blockquote>
<p>-rw-râ€“râ€“  1 jrmacpro  staff  0 11  9 09:12 love1.txt<br>æ–‡ä»¶ç±»å‹å’Œæƒé™ é“¾æ¥æ•° æ‰€æœ‰è€… æ‰€æœ‰è€…ç”¨æˆ·ç»„ æ–‡ä»¶å¤§å° æœ€åä¿®æ”¹æ—¥æœŸ æ–‡ä»¶å</p>
</blockquote>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹ç”¨æˆ·æƒé™<br>drwxr-xr-x<br>drwxræ‹¥æœ‰è€…æƒé™<br>ç¬¬ä¸€ä¸ª-xrç”¨æˆ·ç»„æƒé™<br>ç¬¬äºŒä¸ª-xå…¶ä»–ç”¨æˆ·æƒé™</p>
<p>rå…è®¸è¯»<br>wå…è®¸å†™<br>xå…è®¸æ‰§è¡Œ</p>
<ul>
<li>æ–‡ä»¶ç±»å‹ï¼šlunixä¸­ä¸€åˆ‡çš†æ–‡ä»¶</li>
<li>æ–‡ä»¶æƒé™ï¼š<ul>
<li><code>cat filename</code>ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ¥è¯»</li>
<li>å†™è¡¨ç¤ºä½ å¯ä»¥ç¼–è¾‘å’Œä¿®æ”¹</li>
<li>æ‰§è¡Œæƒé™é€šå¸¸æŒ‡å¯ä»¥è¿è¡ŒäºŒè¿›åˆ¶ç¨‹åºæ–‡æœ¬æˆ–è€…è„šæœ¬æ–‡ä»¶ï¼Œä¸€ä¸ªç›®å½•åŒæ—¶å…·æœ‰è¯»å’Œæ‰§è¡Œæƒé™ä½ æ‰å¯ä»¥æ‰“å¼€å¹¶ä¸”æŸ¥çœ‹å†…éƒ¨æ–‡ä»¶ï¼Œè€Œä¸€ä¸ªç›®å½•è¦æœ‰å†™æƒé™æ‰èƒ½åœ¨å…¶ä¸­åˆ›å»ºå…¶ä»–æ–‡ä»¶</li>
</ul>
</li>
</ul>
<p><code>ls -lh</code>ç›´è§‚æŸ¥çœ‹æ–‡ä»¶å¤§å°</p>
<h4 id="ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…"><a href="#ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…"></a>ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…</h4><blockquote>
<p><code>sudo chown hanshenghui filename</code>æ”¹å˜æ–‡ä»¶æ‰€æœ‰è€…<br><code>sudo chgrp apache project</code>æ”¹å˜æ–‡ä»¶ç»„</p>
</blockquote>
<h4 id="ä¿®æ”¹æ–‡ä»¶æƒé™"><a href="#ä¿®æ”¹æ–‡ä»¶æƒé™" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶æƒé™"></a>ä¿®æ”¹æ–‡ä»¶æƒé™</h4><p>åˆ©ç”¨<code>+</code>å’Œ<code>-</code><br><code>chmod go-r filename</code><br>g/o/uåˆ†åˆ«ä»£è¡¨groupï¼Œothersï¼Œuserï¼Œä¸Šè¾¹é‚£å¥çš„æ„æ€æ˜¯è¯´çœŸå¯¹è¿™ä¸ªæ–‡ä»¶groupå’Œotherå»æ‰è¯»æƒé™</p>
<h3 id="æŸ¥çœ‹è¿›ç¨‹å’Œæ€è¿›ç¨‹"><a href="#æŸ¥çœ‹è¿›ç¨‹å’Œæ€è¿›ç¨‹" class="headerlink" title="æŸ¥çœ‹è¿›ç¨‹å’Œæ€è¿›ç¨‹"></a>æŸ¥çœ‹è¿›ç¨‹å’Œæ€è¿›ç¨‹</h3><p>1ã€å…ˆæŸ¥çœ‹è¿›ç¨‹pid</p>
<p>ps -ef | grep è¿›ç¨‹å</p>
<p>2ã€é€šè¿‡pidæŸ¥çœ‹å ç”¨ç«¯å£</p>
<p>netstat -nap | grep è¿›ç¨‹pid</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">ä¾‹ï¼šé€šè¿‡nginxè¿›ç¨‹æŸ¥çœ‹å¯¹åº”çš„ç«¯å£å·</div><div class="line"></div><div class="line">æŸ¥çœ‹nginxè¿›ç¨‹pidï¼š</div><div class="line">å‘½ä»¤ï¼š</div><div class="line">ps -ef | grep nginx</div><div class="line">ç»“æœï¼š</div><div class="line">root      9836     1  0 Jul11 ?        00:00:00 nginx: master process /usr/local/nginx/sbin/nginx</div><div class="line">nobody    9841  9836  0 Jul11 ?        00:00:09 nginx: worker process      </div><div class="line"></div><div class="line">é€šè¿‡nginxè¿›ç¨‹pidæŸ¥çœ‹å ç”¨ç«¯å£ï¼ˆè¿›ç¨‹pidä¸º9836ï¼‰</div><div class="line">å‘½ä»¤ï¼š</div><div class="line">netstat -nap | grep 9836</div><div class="line">ç»“æœï¼š</div><div class="line">tcp        0      0 0.0.0.0:8081                0.0.0.0:*                   LISTEN      9836/nginx          </div><div class="line">tcp        0      0 0.0.0.0:81                  0.0.0.0:*                   LISTEN      9836/nginx          </div><div class="line">tcp        0      0 0.0.0.0:8082                0.0.0.0:*                   LISTEN      9836/nginx          </div><div class="line">tcp        0      0 0.0.0.0:8083                0.0.0.0:*                   LISTEN      9836/nginx        </div><div class="line">å¤åˆ¶ä»£ç </div></pre></td></tr></table></figure>
<p>3.æ€è¿›ç¨‹<br><code>sudo kill -9 pid</code></p>
<h3 id="æ–‡ä»¶å’Œç›®å½•"><a href="#æ–‡ä»¶å’Œç›®å½•" class="headerlink" title="æ–‡ä»¶å’Œç›®å½•"></a>æ–‡ä»¶å’Œç›®å½•</h3><ul>
<li><code>tree</code>ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æŸ¥çœ‹ç›®å½•ç»“æ„</li>
<li><code>ls -a</code>æŸ¥çœ‹éšè—æ–‡ä»¶</li>
<li><code>cd ~</code>home</li>
<li><code>cd ..</code>ä¸Šä¸€çº§</li>
<li><code>pwd</code>å½“å‰è·¯å¾„</li>
<li><code>cd ..</code>ä¸Šä¸€å±‚ç›®å½•</li>
<li><code>cp test /opt/test</code>æŠŠtestå¤åˆ¶åˆ°optä¸‹è¾¹çš„test</li>
<li><code>cp -r test /opt/test</code>æŠŠtestè¿™ä¸ªæ–‡ä»¶å¤¹å¤åˆ¶åˆ°optä¸‹ï¼Œé€’å½’å¤åˆ¶</li>
<li><code>rm filename</code></li>
<li><code>rm -f filename</code>å¿½ç•¥æƒé™ï¼Œå¼ºåˆ¶åˆ é™¤</li>
<li><code>rm -r direction</code>é€’å½’åˆ é™¤</li>
<li><code>mv file1 file2</code>æŠŠfile1ç§»åŠ¨åˆ°file2ï¼Œæˆ–è€…è¯´æ˜¯é‡å‘½å</li>
<li><code>rename file1 file2</code>å°†file1é‡å‘½åä¸ºfile2</li>
</ul>
<h4 id="æŸ¥çœ‹æ–‡ä»¶"><a href="#æŸ¥çœ‹æ–‡ä»¶" class="headerlink" title="æŸ¥çœ‹æ–‡ä»¶"></a>æŸ¥çœ‹æ–‡ä»¶</h4><ul>
<li><code>cat</code>æ­£åº</li>
<li><code>tac</code>å€’åº</li>
<li><code>nl</code>å¸¦ç€ç¼–å·</li>
<li><code>more/less</code></li>
<li><code>head</code>æŸ¥çœ‹å¤´åè¡Œ</li>
<li><code>tail</code>æŸ¥çœ‹æœ«å°¾å‡ è¡Œ</li>
<li><code>tail -f</code>å¯ä»¥å®ç°å®æ—¶æŸ¥çœ‹æ—¥å¿—</li>
<li><code>file</code>æŸ¥çœ‹æ–‡ä»¶ç±»å‹</li>
</ul>
<h3 id="ç¯å¢ƒå˜é‡å’Œæ–‡ä»¶æŸ¥æ‰¾"><a href="#ç¯å¢ƒå˜é‡å’Œæ–‡ä»¶æŸ¥æ‰¾" class="headerlink" title="ç¯å¢ƒå˜é‡å’Œæ–‡ä»¶æŸ¥æ‰¾"></a>ç¯å¢ƒå˜é‡å’Œæ–‡ä»¶æŸ¥æ‰¾</h3><p><code>~.profile</code>å¯¹å½“å‰ç”¨æˆ·ç”Ÿæ•ˆ<br><code>/etc/profile</code>æ‰€æœ‰ç”¨æˆ·ç”Ÿæ•ˆ</p>
<h4 id="ç¯å¢ƒå˜é‡PATHä»‹ç»"><a href="#ç¯å¢ƒå˜é‡PATHä»‹ç»" class="headerlink" title="ç¯å¢ƒå˜é‡PATHä»‹ç»"></a>ç¯å¢ƒå˜é‡PATHä»‹ç»</h4><p>å½“æˆ‘ä»¬åœ¨shellä¸­è¾“å…¥ä¸€ä¸ªå‘½ä»¤çš„æ—¶å€™ï¼Œå®ƒæ€ä¹ˆçŸ¥é“å»å“ªé‡Œå¯»æ‰¾è¯¥æ‰§è¡Œå“ªä¸ªå‘½ä»¤å‘¢ï¼Œè¿™äº›è·¯å¾„å°±å­˜åœ¨PATHä¸­ã€‚</p>
<p><code>echo $PATH</code>æ¥æŸ¥çœ‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/local/opt/swig@3.04/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin</div></pre></td></tr></table></figure></p>
<h5 id="æ·»åŠ è‡ªå®šä¹‰çš„PATH"><a href="#æ·»åŠ è‡ªå®šä¹‰çš„PATH" class="headerlink" title="æ·»åŠ è‡ªå®šä¹‰çš„PATH"></a>æ·»åŠ è‡ªå®šä¹‰çš„PATH</h5><p><code>PATH=$PATH:/home/han/mybin</code>æ³¨æ„è¿™é‡Œä¸€å®šè¦ç”¨ç»å¯¹è·¯å¾„</p>
<h3 id="æ–‡ä»¶å‹ç¼©"><a href="#æ–‡ä»¶å‹ç¼©" class="headerlink" title="æ–‡ä»¶å‹ç¼©"></a>æ–‡ä»¶å‹ç¼©</h3><h4 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">zip -r -9 -q -o shiyanlou.zip /home/shiyanlou -x ~/*.zip</div><div class="line">du -h shiyanlou.zip</div><div class="line">file shiyanlou.zip</div></pre></td></tr></table></figure>
<p><code>-r</code>é€’å½’å‹ç¼©</p>
<p><code>-9/-1</code>å‹ç¼©çº§åˆ«-9å‹ç¼©æœ€å‰å®³ï¼Œ-1æœ€ä¸å‰å®³</p>
<p><code>-q</code>é™é»˜ï¼Œä¸è¾“å‡ºåˆ°å‘½ä»¤è¡Œ</p>
<p><code>-o</code>è¾“å‡ºæ–‡ä»¶åå­—</p>
<p><code>du</code>æŸ¥çœ‹æ–‡ä»¶å¤§å°</p>
<h4 id="unzip"><a href="#unzip" class="headerlink" title="unzip"></a>unzip</h4><p><code>unzip -q ceshi.zip -d ceshiname</code>è§£å‹ç„¶åè§£å‹åå«å•¥åå­—</p>
<h4 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h4><p>å‹ç¼©</p>
<p>tar -cvf jpg.tar *.jpg //å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆtar.jpg </p>
<p>tar -czf jpg.tar.gz *.jpg   //å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆjpg.taråï¼Œå¹¶ä¸”å°†å…¶ç”¨gzipå‹ç¼©ï¼Œç”Ÿæˆä¸€ä¸ªgzipå‹ç¼©è¿‡çš„åŒ…ï¼Œå‘½åä¸ºjpg.tar.gz</p>
<p> tar -cjf jpg.tar.bz2 *.jpg //å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆjpg.taråï¼Œå¹¶ä¸”å°†å…¶ç”¨bzip2å‹ç¼©ï¼Œç”Ÿæˆä¸€ä¸ªbzip2å‹ç¼©è¿‡çš„åŒ…ï¼Œå‘½åä¸ºjpg.tar.bz2</p>
<p>tar -cZf jpg.tar.Z *.jpg   //å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆjpg.taråï¼Œå¹¶ä¸”å°†å…¶ç”¨compresså‹ç¼©ï¼Œç”Ÿæˆä¸€ä¸ªumcompresså‹ç¼©è¿‡çš„åŒ…ï¼Œå‘½åä¸ºjpg.tar.Z</p>
<p>rar a jpg.rar *.jpg //raræ ¼å¼çš„å‹ç¼©ï¼Œéœ€è¦å…ˆä¸‹è½½rar for linux</p>
<p>zip jpg.zip *.jpg //zipæ ¼å¼çš„å‹ç¼©ï¼Œéœ€è¦å…ˆä¸‹è½½zip for linux</p>
<p>è§£å‹</p>
<p>tar -xvf file.tar //è§£å‹ taråŒ…</p>
<p>tar -xzvf file.tar.gz //è§£å‹tar.gz</p>
<p>tar -xjvf file.tar.bz2   //è§£å‹ tar.bz2</p>
<p>tar -xZvf file.tar.Z   //è§£å‹tar.Z</p>
<p>unrar e file.rar //è§£å‹rar</p>
<p>unzip file.zip //è§£å‹zip</p>
<h3 id="ç£ç›˜ç›¸å…³"><a href="#ç£ç›˜ç›¸å…³" class="headerlink" title="ç£ç›˜ç›¸å…³"></a>ç£ç›˜ç›¸å…³</h3><p><code>df</code>æŸ¥çœ‹ç£ç›˜å®¹é‡<br><code>du</code> æŸ¥çœ‹è¯¥ç›®å½•<br><code>du -h</code>æ›´ç®€å•çš„æ–¹å¼æ¥æŸ¥çœ‹</p>
<h3 id="Linuxä»»åŠ¡è®¡åˆ’crontab"><a href="#Linuxä»»åŠ¡è®¡åˆ’crontab" class="headerlink" title="Linuxä»»åŠ¡è®¡åˆ’crontab"></a>Linuxä»»åŠ¡è®¡åˆ’crontab</h3><p><code>crontab -e</code>ç„¶åè¿›å…¥åˆ°äº†ä¸€ä¸ªæ–‡ä»¶åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æ·»åŠ ä»»åŠ¡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">*/1 * * * * * python /Users/jrmacpro/Desktop/ceshi.py &gt;&gt; /Users/jrmacpro/Desktop/log.txt</div></pre></td></tr></table></figure></p>
<p>ä¸€å…±æœ‰äº”ä¸ª*åˆ†åˆ«ä»£è¡¨ï¼šåˆ†ï¼Œå°æ—¶ï¼Œå‡ å·ï¼Œæœˆä»½ï¼Œæ˜ŸæœŸå‡ </p>
<p>&gt;<br>åœ¨ä»¥ä¸Šå„ä¸ªå­—æ®µä¸­ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç‰¹æ®Šå­—ç¬¦ï¼š<br>&gt;</p>
<ul>
<li>æ˜Ÿå·ï¼ˆ*ï¼‰ï¼šä»£è¡¨æ‰€æœ‰å¯èƒ½çš„å€¼ï¼Œä¾‹å¦‚monthå­—æ®µå¦‚æœæ˜¯æ˜Ÿå·ï¼Œåˆ™è¡¨ç¤ºåœ¨æ»¡è¶³å…¶å®ƒå­—æ®µçš„åˆ¶çº¦æ¡ä»¶åæ¯æœˆéƒ½æ‰§è¡Œè¯¥å‘½ä»¤æ“ä½œã€‚</li>
<li>é€—å·ï¼ˆ,ï¼‰ï¼šå¯ä»¥ç”¨é€—å·éš”å¼€çš„å€¼æŒ‡å®šä¸€ä¸ªåˆ—è¡¨èŒƒå›´ï¼Œä¾‹å¦‚ï¼Œâ€œ1,2,5,7,8,9â€</li>
<li>ä¸­æ ï¼ˆ-ï¼‰ï¼šå¯ä»¥ç”¨æ•´æ•°ä¹‹é—´çš„ä¸­æ è¡¨ç¤ºä¸€ä¸ªæ•´æ•°èŒƒå›´ï¼Œä¾‹å¦‚â€œ2-6â€è¡¨ç¤ºâ€œ2,3,4,5,6â€</li>
<li>æ­£æ–œçº¿ï¼ˆ/ï¼‰ï¼šå¯ä»¥ç”¨æ­£æ–œçº¿æŒ‡å®šæ—¶é—´çš„é—´éš”é¢‘ç‡ï¼Œä¾‹å¦‚â€œ0-23/2â€è¡¨ç¤ºæ¯ä¸¤å°æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚åŒæ—¶æ­£æ–œçº¿å¯ä»¥å’Œæ˜Ÿå·ä¸€èµ·ä½¿ç”¨ï¼Œä¾‹å¦‚*/10ï¼Œå¦‚æœç”¨åœ¨minuteå­—æ®µï¼Œè¡¨ç¤ºæ¯ååˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ã€‚</li>
</ul>
<p><code>sudo cron -f &amp;</code>    å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼Œæˆ‘ä»¬çš„è®¾ç½®æ‰èƒ½ç”Ÿæ•ˆ</p>
<h4 id="ä½¿ç”¨å®ä¾‹ï¼š"><a href="#ä½¿ç”¨å®ä¾‹ï¼š" class="headerlink" title="ä½¿ç”¨å®ä¾‹ï¼š"></a>ä½¿ç”¨å®ä¾‹ï¼š</h4><ul>
<li>å®ä¾‹1ï¼šæ¯1åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡command<br>å‘½ä»¤ï¼š</li>
</ul>
<ul>
<li><ul>
<li><ul>
<li><ul>
<li><ul>
<li>command</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>å®ä¾‹2ï¼šæ¯å°æ—¶çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ<br>å‘½ä»¤ï¼š<br><code>3,15 * * * * command</code></p>
</li>
<li><p>å®ä¾‹3ï¼šåœ¨ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ<br>å‘½ä»¤ï¼š<br><code>3,15 8-11 * * * command</code></p>
</li>
<li><p>å®ä¾‹4ï¼šæ¯éš”ä¸¤å¤©çš„ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ<br>å‘½ä»¤ï¼š<br><code>3,15 8-11 */2 * * command</code></p>
</li>
<li><p>å®ä¾‹5ï¼šæ¯ä¸ªæ˜ŸæœŸä¸€çš„ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ<br>å‘½ä»¤ï¼š<br><code>3,15 8-11 * * 1 command</code></p>
</li>
<li><p>å®ä¾‹6ï¼šæ¯æ™šçš„21:30é‡å¯smb<br>å‘½ä»¤ï¼š<br><code>30 21 * * * /etc/init.d/smb restart</code></p>
</li>
<li><p>å®ä¾‹7ï¼šæ¯æœˆ1ã€10ã€22æ—¥çš„4 : 45é‡å¯smb<br>å‘½ä»¤ï¼š<br><code>45 4 1,10,22 * * /etc/init.d/smb restart</code></p>
</li>
<li><p>å®ä¾‹8ï¼šæ¯å‘¨å…­ã€å‘¨æ—¥çš„1 : 10é‡å¯smb<br>å‘½ä»¤ï¼š<br><code>10 1 * * 6,0 /etc/init.d/smb restart</code></p>
</li>
<li><p>å®ä¾‹9ï¼šæ¯å¤©18 : 00è‡³23 : 00ä¹‹é—´æ¯éš”30åˆ†é’Ÿé‡å¯smb<br>å‘½ä»¤ï¼š<br><code>0,30 18-23 * * * /etc/init.d/smb restart</code></p>
</li>
<li><p>å®ä¾‹10ï¼šæ¯æ˜ŸæœŸå…­çš„æ™šä¸Š11 : 00 pmé‡å¯smb<br>å‘½ä»¤ï¼š<br><code>0 23 * * 6 /etc/init.d/smb restart</code></p>
</li>
<li><p>å®ä¾‹11ï¼šæ¯ä¸€å°æ—¶é‡å¯smb<br>å‘½ä»¤ï¼š<br><code>* */1 * * * /etc/init.d/smb restart</code></p>
</li>
<li><p>å®ä¾‹12ï¼šæ™šä¸Š11ç‚¹åˆ°æ—©ä¸Š7ç‚¹ä¹‹é—´ï¼Œæ¯éš”ä¸€å°æ—¶é‡å¯smb<br>å‘½ä»¤ï¼š<br><code>* 23-7/1 * * * /etc/init.d/smb restart</code></p>
</li>
<li><p>å®ä¾‹13ï¼šæ¯æœˆçš„4å·ä¸æ¯å‘¨ä¸€åˆ°å‘¨ä¸‰çš„11ç‚¹é‡å¯smb<br>å‘½ä»¤ï¼š<br><code>0 11 4 * mon-wed /etc/init.d/smb restart</code></p>
</li>
<li><p>å®ä¾‹14ï¼šä¸€æœˆä¸€å·çš„4ç‚¹é‡å¯smb<br>å‘½ä»¤ï¼š<br><code>0 4 1 jan * /etc/init.d/smb restart</code></p>
</li>
<li><p>å®ä¾‹15ï¼šæ¯å°æ—¶æ‰§è¡Œ/etc/cron.hourlyç›®å½•å†…çš„è„šæœ¬<br>å‘½ä»¤ï¼š<br><code>01   *   *   *   *     root run-parts /etc/cron.hourly</code><br>è¯´æ˜ï¼š<br>run-partsè¿™ä¸ªå‚æ•°äº†ï¼Œå¦‚æœå»æ‰è¿™ä¸ªå‚æ•°çš„è¯ï¼Œåé¢å°±å¯ä»¥å†™è¦è¿è¡Œçš„æŸä¸ªè„šæœ¬åï¼Œè€Œä¸æ˜¯ç›®å½•åäº†</p>
</li>
<li><p>å®ä¾‹16ï¼šä»¥æ—¶é—´å‘½å<br><code>01 * * * * touch $(date +%Y-%m-%d)</code></p>
</li>
</ul>
<h4 id="crontabè®¾ç½®"><a href="#crontabè®¾ç½®" class="headerlink" title="crontabè®¾ç½®"></a>crontabè®¾ç½®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">1. ç¡®è®¤crontabæ˜¯å¦å®‰è£…ï¼š</div><div class="line"></div><div class="line">æ‰§è¡Œ crontab å‘½ä»¤å¦‚æœæŠ¥ command not foundï¼Œå°±è¡¨æ˜æ²¡æœ‰å®‰è£…</div><div class="line"></div><div class="line">2. å®‰è£… crontab</div><div class="line"></div><div class="line">æ‰§è¡Œ yum install -y vixie-cron</div><div class="line"></div><div class="line">3. ç¡®è®¤æ˜¯å¦å®‰è£…æˆåŠŸ:</div><div class="line"></div><div class="line">æ‰§è¡Œ crontab -l</div><div class="line"></div><div class="line">4. çœ‹æ˜¯å¦è®¾ç½®äº†å¼€æœºè‡ªåŠ¨å¯åŠ¨</div><div class="line"></div><div class="line">chkconfig --list crond</div><div class="line"></div><div class="line">5. å¯åŠ¨crontab</div><div class="line"></div><div class="line">service crond start</div></pre></td></tr></table></figure>
<p>çœ‹æ—¥å¿— /var/log/cron.logè¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥ï¼Œå¯ä»¥ç”¨tail -f /var/log/cron.logè§‚å¯Ÿ</p>
<h3 id="å‘½ä»¤æ‰§è¡Œé¡ºåºå’Œç®¡é“"><a href="#å‘½ä»¤æ‰§è¡Œé¡ºåºå’Œç®¡é“" class="headerlink" title="å‘½ä»¤æ‰§è¡Œé¡ºåºå’Œç®¡é“"></a>å‘½ä»¤æ‰§è¡Œé¡ºåºå’Œç®¡é“</h3><p>å¤šå‘½ä»¤ä¸€èµ·è¾“å…¥é€‰æ‹©æ€§æ‰§è¡Œ<br><code>which git &amp;&amp; echo &#39;YES&#39; || echo &#39;NO&#39;</code><br>è¿™æ®µè¯çš„æ„æ€æ˜¯å¦‚æœgitå­˜åœ¨å°±è¾“å‡ºYESï¼Œå¦åˆ™è¾“å‡ºNO<br><code>echo $?</code>æŸ¥çœ‹ç¨‹åºæ‰§è¡Œç»“æœ</p>
<h4 id="ç®¡é“"><a href="#ç®¡é“" class="headerlink" title="ç®¡é“"></a>ç®¡é“</h4><p>å°†å‰ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºåä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ï¼Œä»¥<code>|</code>ä½œä¸ºè¡¨ç¤ºç¬¦ã€‚<br><code>ls -la /etc | less</code><br>è¿™ä¸ªæ—¶å€™å‰ä¸€ä¸ªå‘½ä»¤è¾“å‡ºäº†å¥½å¤šï¼Œæ— æ‰€è°“æˆ‘å¯ä»¥ç”¨lessæ¥ä¸€è¡Œä¸€è¡Œçš„çœ‹</p>
<h4 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h4><p>åœ¨æ–‡æœ¬ä¸­æŸ¥æ‰¾åŒ¹é…å…³é”®å­—</p>
<h4 id="wcè®¡æ•°å·¥å…·"><a href="#wcè®¡æ•°å·¥å…·" class="headerlink" title="wcè®¡æ•°å·¥å…·"></a>wcè®¡æ•°å·¥å…·</h4><p><code>wc -l filename</code>æ–‡ä»¶è¡Œæ•°<br><code>wc -w filename</code>å•è¯æ•°<br><code>wc -c filename</code>å­—èŠ‚æ•°<br><code>wc -m filename</code>å­—ç¬¦æ•°<br><code>wc -L filename</code>æœ€é•¿è¡Œå­—èŠ‚æ•°</p>
<h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><p><code>cat /etc/passwd | sort -r</code>ååº</p>
<h4 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h4><p><code>cut -f 1-3 text.txt</code><br><code>cut -f -3 text.txt</code><br><code>cut -f 3- text.txt</code></p>
<h3 id="æ–‡æœ¬å¤„ç†"><a href="#æ–‡æœ¬å¤„ç†" class="headerlink" title="æ–‡æœ¬å¤„ç†"></a>æ–‡æœ¬å¤„ç†</h3><p><code>join file1 file2</code>å°†è¡Œç›¸åŒçš„åˆå¹¶åœ¨ä¸€èµ·<br><code>paste file1 file2</code>ç›´æ¥åˆå¹¶</p>
<h3 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a>é‡å®šå‘</h3><p><code>echo &#39;hi&#39; &gt;&gt; text.txt</code><br><code>echo &#39;hi&#39; | tee text.txt</code>å¤šå‘é‡å®šå‘</p>
<h3 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h3><p><code>wget http://xxxx</code></p>
]]></content>
      
        
        <tags>
            
            <tag> linux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æœºå™¨å­¦ä¹ å­¦ä¹ è·¯å¾„]]></title>
      <url>/2017/11/07/2018/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84/</url>
      <content type="html"><![CDATA[<h3 id="æœºå™¨å­¦ä¹ è§£å†³çš„é—®é¢˜"><a href="#æœºå™¨å­¦ä¹ è§£å†³çš„é—®é¢˜" class="headerlink" title="æœºå™¨å­¦ä¹ è§£å†³çš„é—®é¢˜"></a>æœºå™¨å­¦ä¹ è§£å†³çš„é—®é¢˜</h3><p>å¹¶éæ‰€æœ‰çš„é—®é¢˜éƒ½é€‚åˆç”¨æœºå™¨å­¦ä¹ è§£å†³(å¾ˆå¤šé€»è¾‘æ¸…æ™°çš„é—®é¢˜ç”¨è§„åˆ™èƒ½å¾ˆé«˜æ•ˆå’Œå‡†ç¡®åœ°å¤„ç†)ï¼Œä¹Ÿæ²¡æœ‰ä¸€ä¸ªæœºå™¨å­¦ä¹ ç®—æ³•å¯ä»¥é€šç”¨äºæ‰€æœ‰é—®é¢˜ã€‚å’±ä»¬å…ˆæ¥äº†è§£äº†è§£ï¼Œæœºå™¨å­¦ä¹ ï¼Œåˆ°åº•å…³å¿ƒå’Œè§£å†³ä»€ä¹ˆæ ·çš„é—®é¢˜ã€‚<br><a id="more"></a><br>ä»åŠŸèƒ½çš„è§’åº¦åˆ†ç±»ï¼Œæœºå™¨å­¦ä¹ åœ¨ä¸€å®šé‡çº§çš„æ•°æ®ä¸Šï¼Œå¯ä»¥è§£å†³ä¸‹åˆ—é—®é¢˜ï¼š</p>
<ul>
<li>åˆ†ç±»é—®é¢˜</li>
</ul>
<blockquote>
<p>æ ¹æ®æ•°æ®æ ·æœ¬ä¸ŠæŠ½å–å‡ºçš„ç‰¹å¾ï¼Œåˆ¤å®šå…¶å±äºæœ‰é™ä¸ªç±»åˆ«ä¸­çš„å“ªä¸€ä¸ªã€‚æ¯”å¦‚ï¼š </p>
</blockquote>
<pre><code>- åƒåœ¾é‚®ä»¶è¯†åˆ«(ç»“æœç±»åˆ«ï¼š1ã€åƒåœ¾é‚®ä»¶ 2ã€æ­£å¸¸é‚®ä»¶)
- æ–‡æœ¬æƒ…æ„Ÿè¤’è´¬åˆ†æ(ç»“æœç±»åˆ«ï¼š1ã€è¤’ 2ã€è´¬)
- å›¾åƒå†…å®¹è¯†åˆ«è¯†åˆ«(ç»“æœç±»åˆ«ï¼š1ã€å–µæ˜Ÿäºº 2ã€æ±ªæ˜Ÿäºº 3ã€äººç±» 4ã€è‰æ³¥é©¬ 5ã€éƒ½ä¸æ˜¯)ã€‚
</code></pre><ul>
<li>å›å½’é—®é¢˜</li>
</ul>
<blockquote>
<p>æ ¹æ®æ•°æ®æ ·æœ¬ä¸ŠæŠ½å–å‡ºçš„ç‰¹å¾ï¼Œé¢„æµ‹ä¸€ä¸ªè¿ç»­å€¼çš„ç»“æœã€‚æ¯”å¦‚ï¼š </p>
</blockquote>
<pre><code>- æ˜Ÿçˆ·ã€Šç¾äººé±¼ã€‹ç¥¨æˆ¿
- å¤§å¸éƒ½2ä¸ªæœˆåçš„æˆ¿ä»·
- éš”å£ç†Šå­©å­ä¸€å¤©æ¥ä½ å®¶å‡ æ¬¡ï¼Œå® å¹¸ä½ å¤šå°‘ç©å…·
</code></pre><ul>
<li>èšç±»ç­‰é—®é¢˜</li>
</ul>
<blockquote>
<p>æ ¹æ®æ•°æ®æ ·æœ¬ä¸ŠæŠ½å–å‡ºçš„ç‰¹å¾ï¼Œè®©æ ·æœ¬æŠ±æŠ±å›¢(ç›¸è¿‘/ç›¸å…³çš„æ ·æœ¬åœ¨ä¸€å›¢å†…)ã€‚æ¯”å¦‚ï¼š </p>
</blockquote>
<pre><code>- googleçš„æ–°é—»åˆ†ç±»
- ç”¨æˆ·ç¾¤ä½“åˆ’åˆ†
</code></pre><p>æˆ‘ä»¬å†æŠŠä¸Šè¿°å¸¸è§é—®é¢˜åˆ’åˆ°æœºå™¨å­¦ä¹ æœ€å…¸å‹çš„2ä¸ªåˆ†ç±»ä¸Šã€‚</p>
<blockquote>
<ul>
<li>åˆ†ç±»ä¸å›å½’é—®é¢˜éœ€è¦ç”¨å·²çŸ¥ç»“æœçš„æ•°æ®åšè®­ç»ƒï¼Œå±äºâ€œç›‘ç£å­¦ä¹ â€</li>
<li>èšç±»çš„é—®é¢˜ä¸éœ€è¦å·²çŸ¥æ ‡ç­¾ï¼Œå±äºâ€œéç›‘ç£å­¦ä¹ â€ã€‚</li>
</ul>
</blockquote>
<p>å¦‚æœåœ¨ITè¡Œä¸š(å°¤å…¶æ˜¯äº’è”ç½‘)é‡Œæºœè¾¾ä¸€åœˆï¼Œä½ ä¼šå‘ç°æœºå™¨å­¦ä¹ åœ¨ä»¥ä¸‹çƒ­ç‚¹é—®é¢˜ä¸­æœ‰å¹¿æ³›åº”ç”¨ï¼š</p>
<p>1.è®¡ç®—æœºè§†è§‰</p>
<p>å…¸å‹çš„åº”ç”¨åŒ…æ‹¬ï¼šäººè„¸è¯†åˆ«ã€è½¦ç‰Œè¯†åˆ«ã€æ‰«ææ–‡å­—è¯†åˆ«ã€å›¾ç‰‡å†…å®¹è¯†åˆ«ã€å›¾ç‰‡æœç´¢ç­‰ç­‰ã€‚</p>
<p>2.è‡ªç„¶è¯­è¨€å¤„ç†</p>
<p>å…¸å‹çš„åº”ç”¨åŒ…æ‹¬ï¼šæœç´¢å¼•æ“æ™ºèƒ½åŒ¹é…ã€æ–‡æœ¬å†…å®¹ç†è§£ã€æ–‡æœ¬æƒ…ç»ªåˆ¤æ–­ï¼Œè¯­éŸ³è¯†åˆ«ã€è¾“å…¥æ³•ã€æœºå™¨ç¿»è¯‘ç­‰ç­‰ã€‚</p>
<p>3.ç¤¾ä¼šç½‘ç»œåˆ†æ</p>
<p>å…¸å‹çš„åº”ç”¨åŒ…æ‹¬ï¼šç”¨æˆ·ç”»åƒã€ç½‘ç»œå…³è”åˆ†æã€æ¬ºè¯ˆä½œå¼Šå‘ç°ã€çƒ­ç‚¹å‘ç°ç­‰ç­‰ã€‚</p>
<p>4.æ¨è</p>
<p>å…¸å‹çš„åº”ç”¨åŒ…æ‹¬ï¼šè™¾ç±³éŸ³ä¹çš„â€œæ­Œæ›²æ¨èâ€ï¼ŒæŸå®çš„â€œçŒœä½ å–œæ¬¢â€ç­‰ç­‰ã€‚</p>
<h3 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h3><h4 id="é˜¶æ®µ1ï¼šå…¥é—¨çŸ¥è¯†"><a href="#é˜¶æ®µ1ï¼šå…¥é—¨çŸ¥è¯†" class="headerlink" title="é˜¶æ®µ1ï¼šå…¥é—¨çŸ¥è¯†"></a>é˜¶æ®µ1ï¼šå…¥é—¨çŸ¥è¯†</h4><ul>
<li><a href="https://www.shiyanlou.com/courses/1" target="_blank" rel="external">LunixåŸºç¡€å…¥é—¨</a></li>
<li><a href="https://www.shiyanlou.com/courses/2" target="_blank" rel="external">Vimå…¥é—¨</a></li>
</ul>
<h4 id="é˜¶æ®µ2-æœºå™¨å­¦ä¹ ç†è®º"><a href="#é˜¶æ®µ2-æœºå™¨å­¦ä¹ ç†è®º" class="headerlink" title="é˜¶æ®µ2: æœºå™¨å­¦ä¹ ç†è®º"></a>é˜¶æ®µ2: æœºå™¨å­¦ä¹ ç†è®º</h4><p>è¿™éƒ¨åˆ†ä¸»è¦æ˜¯è¦æŒæ¡ä¸€äº›å…¸å‹çš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œå¦‚åˆ†ç±»ã€èšç±»ã€æ¨èã€æ¦‚ç‡å›¾ã€ç¥ç»ç½‘ç»œã€‚ï¼ˆå¯ä»¥åˆ†ä¸ºåˆçº§ã€ä¸­çº§å’Œé«˜çº§ä¸‰ä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µçš„ä¾§é‡ç‚¹ä¸åŒã€‚ï¼‰</p>
<h5 id="åˆçº§é˜¶æ®µ"><a href="#åˆçº§é˜¶æ®µ" class="headerlink" title="åˆçº§é˜¶æ®µ"></a>åˆçº§é˜¶æ®µ</h5><p>åˆçº§é˜¶æ®µæ¨èå¯ä»¥çœ‹ã€Šæœºå™¨å­¦ä¹ ç®—æ³•åŸç†ä¸ç¼–ç¨‹å®è·µ ã€‹å’Œã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹è¿™ä¸¤æœ¬ä¹¦ã€‚</p>
<p>è¿™ä¸¤æœ¬ä¹¦æ›´åå‘äºç®—æ³•çš„åº”ç”¨æ–¹é¢ï¼Œå­¦ä¹ èµ·æ¥ç›¸å¯¹è½»æ¾ä¸€äº›ã€‚å¦‚æœä¸€ä¸Šæ¥ç›´æ¥å°±å•ƒé‚£äº›çº¯ç®—æ³•ç†è®ºï¼Œä¼°è®¡å¾ˆå¤šäººæ˜¯åšæŒä¸ä¸‹å»çš„ã€‚</p>
<p>å†è€…ï¼Œä¸€ä¸ªä¸œè¥¿ï¼Œå½“ä½ è¿˜ä¸çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆç”¨ï¼Œä»¥åŠæ€ä¹ˆç”¨æ—¶ï¼Œè®©ä½ å»ç¡¬ç€å¤´çš®å•ƒï¼Œä½ ä¸€å®šä¼šæ„Ÿè§‰å¾ˆéƒé—·ï¼Œå¹¶ä¸”æ ¹æœ¬ä¸å¯èƒ½èƒ½å¤Ÿæ·±å…¥ç†è§£é‚£äº›ç†è®ºã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸ªäººå¼ºçƒˆå»ºè®®ä¸è¦ä¸€ä¸Šæ¥å°±è´ªå›¾é‚£äº›ç®—æ³•ç†è®ºçš„æ¨å¯¼ï¼Œå…ˆå¤§èƒ†çš„å»äº†è§£å„ä¸ªç®—æ³•çš„åº”ç”¨åœºåˆå¹¶å°è¯•ç€åº”ç”¨ï¼Œè¿™å¯¹ä½ å…¥é—¨æœºå™¨å­¦ä¹ æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚</p>
<h5 id="ä¸­çº§é˜¶æ®µ"><a href="#ä¸­çº§é˜¶æ®µ" class="headerlink" title="ä¸­çº§é˜¶æ®µ"></a>ä¸­çº§é˜¶æ®µ</h5><p>ä¸­çº§é˜¶æ®µå°±è¦å¼€å§‹å•ƒé‚£äº›ç®—æ³•èƒŒåçš„ç†è®ºäº†ï¼Œå‰é¢åº”ç”¨æ˜¯çŸ¥å…¶ç„¶ï¼Œç°åœ¨è¦å¼€å§‹çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚</p>
<p>è¿™ä¸ªé˜¶æ®µé‡ç‚¹æ¨èçœ‹æ—è½©ç”°çš„ã€Šæœºå™¨å­¦ä¹ åŸºçŸ³ã€‹å’Œã€Šæœºå™¨å­¦ä¹ æŠ€æ³•ã€‹è§†é¢‘ï¼Œæ€»å…±ä¸‰åäºŒè¯¾ï¼Œæ¯ä¸€è¯¾éƒ½ç›¸å½“ç²¾å½©ï¼Œç»†è‡´å­¦ä¸‹æ¥éœ€è¦ä¸‰ä¸ªæœˆï¼Œæˆ‘æŒ‡çš„æ˜¯ç»†è‡´çš„çœ‹ï¼Œæ¯ä¸€è¯¾éƒ½åº”è¯¥å†™ç¬”è®°ï¼Œæ¢³ç†è„‰ç»œï¼Œå¼ºçƒˆå»ºè®®åšç¬”è®°ã€‚</p>
<p>è¸è¸å®å®çœ‹å®Œï¼Œé¢è¯•ä¸­è®©ä½ æ¨ä¸ªsvmè®²è®²adboostï¼ŒgbdtåŸç†åŸºæœ¬å°±æ˜¯æ‰‹åˆ°æ“’æ¥ï¼Œå†è¾…ä»¥æèˆªçš„ã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹å’Œå‘¨å¿—åçš„ã€Šæœºå™¨å­¦ä¹ ã€‹ï¼ˆä¿—ç§°â€œè¥¿ç“œä¹¦â€ï¼‰æŸ¥æ¼è¡¥ç¼ºï¼ŒåŸºç¡€å°±ç®—æ¯”è¾ƒæ‰å®äº†ã€‚</p>
<h5 id="é«˜çº§é˜¶æ®µ"><a href="#é«˜çº§é˜¶æ®µ" class="headerlink" title="é«˜çº§é˜¶æ®µ"></a>é«˜çº§é˜¶æ®µ</h5><p>é«˜çº§é˜¶æ®µå°±æ˜¯è¦è‡ªå·±å¼€å§‹å»çµæ´»è¿ç”¨å¹¶ç»„åˆå„ä¸ªç®—æ³•äº†ã€‚è¿™ä¸ªé˜¶æ®µå¯ä»¥åœ¨ç½‘ä¸Šæ‰¾ä¸€äº›æ¯”è¾ƒå…¸å‹çš„é¡¹ç›®æ¥è¿›è¡Œå®æˆ˜æ¼”ç»ƒã€‚</p>
<p>æ¨èå­¦ä¹ èµ„æºï¼šKaggleã€CCFã€Datacastleã€é˜¿é‡Œäº‘å¤©æ± ç­‰ã€‚</p>
<p>kaggleæ˜¯å›½å¤–ä¸€ä¸ªä¸“é—¨åšæ•°æ®æŒ–æ˜æ¯”èµ›çš„åœ°æ–¹ï¼Œé‡Œé¢å¾ˆå¤šæ¯”èµ›æ¯”è¾ƒé€‚åˆæ–°äººï¼Œè€Œä¸”é‡Œé¢çš„æ°›å›´ä¹Ÿæ¯”è¾ƒå¥½ï¼Œæ¯ä¸ªæ¯”èµ›éƒ½æœ‰å¯¹åº”çš„è®ºå›ï¼Œæ—¶ä¸æ—¶æœ‰äººä¼šå‘å¸ƒè‡ªå·±çš„ä»£ç ï¼Œå¤§å®¶é›†æ€å¹¿ç›Šä¸€èµ·è®¨è®ºï¼Œå¯ä»¥å­¦åˆ°å¾ˆå¤šã€‚</p>
<p>å¦‚æœä½ è§‰å¾—ä¸Šé¢çš„å†…å®¹å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæˆ–è€…ä½ æƒ³è¦è¿›ä¸€æ­¥äº†è§£å’Œå­¦ä¹ æ•°æ®æŒ–æ˜å’Œæœºå™¨å­¦ä¹ ç­‰çŸ¥è¯†ï¼Œæ¬¢è¿å…³æ³¨æˆ‘ä»¬çš„å¾®ä¿¡å…¬ä¼—å·â€œDTæ–°çºªå…ƒâ€ã€‚</p>
<p>ã€å¦å¤–è¯´æ˜ä¸€ä¸‹ï¼Œæˆ‘ä¸ªäººå¹³æ—¶æœ‰å¹¿æ³›é˜…è¯»å’Œæ‘˜å½•ç»å…¸çš„ä¹ æƒ¯ï¼Œä½†æœ‰æ—¶å¯èƒ½ç”±äºæ—¶é—´ä¹…è¿œä¸çŸ¥é“åŸæ–‡å‡ºå¤„äº†ï¼Œé€ æˆè‡ªå·±çš„æ–‡ç« ä¸­éƒ¨åˆ†å†…å®¹è·ŸæŸäº›ä½œè€…æœ‰é‡åˆå’Œç›¸ä¼¼çš„ï¼Œè¯·æ‚¨ç»™æˆ‘ç•™è¨€ï¼Œæˆ‘ä¼šåŠæ—¶åšå‡ºæ”¹æ­£ï¼Œè°¢è°¢ï¼ç›®å‰ç¡®è®¤çš„æ˜¯æ­¤ç¯‡æ–‡ç« ä¸­çš„æ•°æ®åˆ†æéƒ¨åˆ†åº”è¯¥æ˜¯åœ¨@ç§¦è·¯ æŸç¯‡æ–‡ç« çš„åŸºç¡€ä¸Šæ›´æ”¹çš„ï¼Œåœ¨æ­¤ç‰¹åˆ«è¡¨ç¤ºè¯´æ˜ä¸æ„Ÿè°¢ï¼ã€‘</p>
<h4 id="é˜¶æ®µ3-åŸºç¡€é¡¹ç›®"><a href="#é˜¶æ®µ3-åŸºç¡€é¡¹ç›®" class="headerlink" title="é˜¶æ®µ3:åŸºç¡€é¡¹ç›®"></a>é˜¶æ®µ3:åŸºç¡€é¡¹ç›®</h4><ul>
<li><a href="https://www.shiyanlou.com/courses/746" target="_blank" rel="external">äººæœºå¯¹æˆ˜åˆä½“éªŒ:PythonåŸºäºPygameå®ç°å››å­æ£‹æ¸¸æˆ</a></li>
<li><a href="https://www.shiyanlou.com/courses/741" target="_blank" rel="external">Python å®ç°è‹±æ–‡æ–°é—»æ‘˜è¦è‡ªåŠ¨æå–</a></li>
<li><a href="https://www.shiyanlou.com/courses/814" target="_blank" rel="external">ä½¿ç”¨ Python å®ç°æ·±åº¦ç¥ç»ç½‘ç»œ</a></li>
<li><a href="https://www.shiyanlou.com/courses/820" target="_blank" rel="external">ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œè¿›è¡Œå›¾ç‰‡åˆ†ç±»</a></li>
<li><a href="https://www.shiyanlou.com/courses/861" target="_blank" rel="external">åŸºäºå·ç§¯ç¥ç»ç½‘ç»œå®ç°å›¾ç‰‡é£æ ¼çš„è¿ç§»</a></li>
</ul>
<h4 id="é˜¶æ®µ4-è¿›é˜¶é¡¹ç›®"><a href="#é˜¶æ®µ4-è¿›é˜¶é¡¹ç›®" class="headerlink" title="é˜¶æ®µ4: è¿›é˜¶é¡¹ç›®"></a>é˜¶æ®µ4: è¿›é˜¶é¡¹ç›®</h4><ul>
<li><a href="https://www.shiyanlou.com/courses/678" target="_blank" rel="external">Pythonåº”ç”¨é©¬å°”å¯å¤«é“¾ç®—æ³•å®ç°éšæœºæ–‡æœ¬ç”Ÿæˆ</a></li>
<li><a href="https://www.shiyanlou.com/courses/707" target="_blank" rel="external">ç¥ç»ç½‘ç»œå®ç°äººè„¸è¯†åˆ«ä»»åŠ¡</a></li>
<li><a href="https://www.shiyanlou.com/courses/696" target="_blank" rel="external">åŸºäºæ— ç›‘ç£å­¦ä¹ çš„è‡ªç¼–ç å™¨å®ç°</a></li>
<li><a href="https://www.shiyanlou.com/courses/782" target="_blank" rel="external">NBAå¸¸è§„èµ›ç»“æœé¢„æµ‹â€”â€”åˆ©ç”¨Pythonè¿›è¡Œæ¯”èµ›æ•°æ®åˆ†æ</a></li>
<li><a href="https://www.shiyanlou.com/courses/780" target="_blank" rel="external">Python æ°”è±¡æ•°æ®åˆ†æ â€“ ã€ŠPython æ•°æ®åˆ†æå®æˆ˜ã€‹</a></li>
<li><a href="https://www.shiyanlou.com/courses/722" target="_blank" rel="external">Twitteræ•°æ®æƒ…æ„Ÿåˆ†æ</a></li>
<li><a href="https://www.shiyanlou.com/courses/714" target="_blank" rel="external">ebayåœ¨çº¿æ‹å–æ•°æ®åˆ†æ</a></li>
<li><a href="https://www.shiyanlou.com/courses/736" target="_blank" rel="external">å¤§æ•°æ®å¸¦ä½ æŒ–æ˜æ‰“è½¦çš„ç§˜ç±</a></li>
<li><a href="https://www.shiyanlou.com/courses/610" target="_blank" rel="external">ä½¿ç”¨ Spark å’Œ D3.js åˆ†æèˆªç­å¤§æ•°æ®</a></li>
</ul>
<h3 id="åŸºæœ¬å·¥ä½œæµç¨‹"><a href="#åŸºæœ¬å·¥ä½œæµç¨‹" class="headerlink" title="åŸºæœ¬å·¥ä½œæµç¨‹"></a>åŸºæœ¬å·¥ä½œæµç¨‹</h3><p>ä»¥ä¸Šæˆ‘ä»¬åŸºæœ¬å…·å¤‡äº†æœºå™¨å­¦ä¹ çš„å¿…è¦æ¡ä»¶ï¼Œå‰©ä¸‹çš„å°±æ˜¯æ€ä¹ˆè¿ç”¨å®ƒä»¬å»åšä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®ã€‚å…¶å·¥ä½œæµç¨‹å¦‚ä¸‹:</p>
<ul>
<li>æŠ½è±¡æˆæ•°å­¦é—®é¢˜</li>
</ul>
<blockquote>
<p>æ˜ç¡®é—®é¢˜æ˜¯è¿›è¡Œæœºå™¨å­¦ä¹ çš„ç¬¬ä¸€æ­¥ã€‚æœºå™¨å­¦ä¹ çš„è®­ç»ƒè¿‡ç¨‹é€šå¸¸éƒ½æ˜¯ä¸€ä»¶éå¸¸è€—æ—¶çš„äº‹æƒ…ï¼Œèƒ¡ä¹±å°è¯•æ—¶é—´æˆæœ¬æ˜¯éå¸¸é«˜çš„ã€‚<br>è¿™é‡Œçš„æŠ½è±¡æˆæ•°å­¦é—®é¢˜ï¼ŒæŒ‡çš„æˆ‘ä»¬æ˜ç¡®æˆ‘ä»¬å¯ä»¥è·å¾—ä»€ä¹ˆæ ·çš„æ•°æ®ï¼Œç›®æ ‡æ˜¯ä¸€ä¸ªåˆ†ç±»è¿˜æ˜¯å›å½’æˆ–è€…æ˜¯èšç±»çš„é—®é¢˜ï¼Œå¦‚æœéƒ½ä¸æ˜¯çš„è¯ï¼Œå¦‚æœåˆ’å½’ä¸ºå…¶ä¸­çš„æŸç±»é—®é¢˜ã€‚</p>
</blockquote>
<ul>
<li>è·å–æ•°æ®</li>
</ul>
<blockquote>
<p>æ•°æ®å†³å®šäº†æœºå™¨å­¦ä¹ ç»“æœçš„ä¸Šé™ï¼Œè€Œç®—æ³•åªæ˜¯å°½å¯èƒ½é€¼è¿‘è¿™ä¸ªä¸Šé™ã€‚<br>æ•°æ®è¦æœ‰ä»£è¡¨æ€§ï¼Œå¦åˆ™å¿…ç„¶ä¼šè¿‡æ‹Ÿåˆã€‚<br>è€Œä¸”å¯¹äºåˆ†ç±»é—®é¢˜ï¼Œæ•°æ®åæ–œä¸èƒ½è¿‡äºä¸¥é‡ï¼Œä¸åŒç±»åˆ«çš„æ•°æ®æ•°é‡ä¸è¦æœ‰æ•°ä¸ªæ•°é‡çº§çš„å·®è·ã€‚<br>è€Œä¸”è¿˜è¦å¯¹æ•°æ®çš„é‡çº§æœ‰ä¸€ä¸ªè¯„ä¼°ï¼Œå¤šå°‘ä¸ªæ ·æœ¬ï¼Œå¤šå°‘ä¸ªç‰¹å¾ï¼Œå¯ä»¥ä¼°ç®—å‡ºå…¶å¯¹å†…å­˜çš„æ¶ˆè€—ç¨‹åº¦ï¼Œåˆ¤æ–­è®­ç»ƒè¿‡ç¨‹ä¸­å†…å­˜æ˜¯å¦èƒ½å¤Ÿæ”¾å¾—ä¸‹ã€‚å¦‚æœæ”¾ä¸ä¸‹å°±å¾—è€ƒè™‘æ”¹è¿›ç®—æ³•æˆ–è€…ä½¿ç”¨ä¸€äº›é™ç»´çš„æŠ€å·§äº†ã€‚å¦‚æœæ•°æ®é‡å®åœ¨å¤ªå¤§ï¼Œé‚£å°±è¦è€ƒè™‘åˆ†å¸ƒå¼äº†ã€‚</p>
</blockquote>
<ul>
<li>ç‰¹å¾é¢„å¤„ç†ä¸ç‰¹å¾é€‰æ‹©</li>
</ul>
<blockquote>
<p>è‰¯å¥½çš„æ•°æ®è¦èƒ½å¤Ÿæå–å‡ºè‰¯å¥½çš„ç‰¹å¾æ‰èƒ½çœŸæ­£å‘æŒ¥æ•ˆåŠ›ã€‚<br>ç‰¹å¾é¢„å¤„ç†ã€æ•°æ®æ¸…æ´—æ˜¯å¾ˆå…³é”®çš„æ­¥éª¤ï¼Œå¾€å¾€èƒ½å¤Ÿä½¿å¾—ç®—æ³•çš„æ•ˆæœå’Œæ€§èƒ½å¾—åˆ°æ˜¾è‘—æé«˜ã€‚å½’ä¸€åŒ–ã€ç¦»æ•£åŒ–ã€å› å­åŒ–ã€ç¼ºå¤±å€¼å¤„ç†ã€å»é™¤å…±çº¿æ€§ç­‰ï¼Œæ•°æ®æŒ–æ˜è¿‡ç¨‹ä¸­å¾ˆå¤šæ—¶é—´å°±èŠ±åœ¨å®ƒä»¬ä¸Šé¢ã€‚è¿™äº›å·¥ä½œç®€å•å¯å¤åˆ¶ï¼Œæ”¶ç›Šç¨³å®šå¯é¢„æœŸï¼Œæ˜¯æœºå™¨å­¦ä¹ çš„åŸºç¡€å¿…å¤‡æ­¥éª¤ã€‚<br>ç­›é€‰å‡ºæ˜¾è‘—ç‰¹å¾ã€æ‘’å¼ƒéæ˜¾è‘—ç‰¹å¾ï¼Œéœ€è¦æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆåå¤ç†è§£ä¸šåŠ¡ã€‚è¿™å¯¹å¾ˆå¤šç»“æœæœ‰å†³å®šæ€§çš„å½±å“ã€‚ç‰¹å¾é€‰æ‹©å¥½äº†ï¼Œéå¸¸ç®€å•çš„ç®—æ³•ä¹Ÿèƒ½å¾—å‡ºè‰¯å¥½ã€ç¨³å®šçš„ç»“æœã€‚è¿™éœ€è¦è¿ç”¨ç‰¹å¾æœ‰æ•ˆæ€§åˆ†æçš„ç›¸å…³æŠ€æœ¯ï¼Œå¦‚ç›¸å…³ç³»æ•°ã€å¡æ–¹æ£€éªŒã€å¹³å‡äº’ä¿¡æ¯ã€æ¡ä»¶ç†µã€åéªŒæ¦‚ç‡ã€é€»è¾‘å›å½’æƒé‡ç­‰æ–¹æ³•ã€‚</p>
</blockquote>
<ul>
<li>è®­ç»ƒæ¨¡å‹ä¸è°ƒä¼˜</li>
</ul>
<blockquote>
<p>ç›´åˆ°è¿™ä¸€æ­¥æ‰ç”¨åˆ°æˆ‘ä»¬ä¸Šé¢è¯´çš„ç®—æ³•è¿›è¡Œè®­ç»ƒã€‚ç°åœ¨å¾ˆå¤šç®—æ³•éƒ½èƒ½å¤Ÿå°è£…æˆé»‘ç›’ä¾›äººä½¿ç”¨ã€‚ä½†æ˜¯çœŸæ­£è€ƒéªŒæ°´å¹³çš„æ˜¯è°ƒæ•´è¿™äº›ç®—æ³•çš„ï¼ˆè¶…ï¼‰å‚æ•°ï¼Œä½¿å¾—ç»“æœå˜å¾—æ›´åŠ ä¼˜è‰¯ã€‚è¿™éœ€è¦æˆ‘ä»¬å¯¹ç®—æ³•çš„åŸç†æœ‰æ·±å…¥çš„ç†è§£ã€‚ç†è§£è¶Šæ·±å…¥ï¼Œå°±è¶Šèƒ½å‘ç°é—®é¢˜çš„ç—‡ç»“ï¼Œæå‡ºè‰¯å¥½çš„è°ƒä¼˜æ–¹æ¡ˆã€‚</p>
</blockquote>
<ul>
<li>æ¨¡å‹è¯Šæ–­</li>
</ul>
<blockquote>
<p>å¦‚ä½•ç¡®å®šæ¨¡å‹è°ƒä¼˜çš„æ–¹å‘ä¸æ€è·¯å‘¢ï¼Ÿè¿™å°±éœ€è¦å¯¹æ¨¡å‹è¿›è¡Œè¯Šæ–­çš„æŠ€æœ¯ã€‚</p>
<p>è¿‡æ‹Ÿåˆã€æ¬ æ‹Ÿåˆ åˆ¤æ–­æ˜¯æ¨¡å‹è¯Šæ–­ä¸­è‡³å…³é‡è¦çš„ä¸€æ­¥ã€‚å¸¸è§çš„æ–¹æ³•å¦‚äº¤å‰éªŒè¯ï¼Œç»˜åˆ¶å­¦ä¹ æ›²çº¿ç­‰ã€‚è¿‡æ‹Ÿåˆçš„åŸºæœ¬è°ƒä¼˜æ€è·¯æ˜¯å¢åŠ æ•°æ®é‡ï¼Œé™ä½æ¨¡å‹å¤æ‚åº¦ã€‚æ¬ æ‹Ÿåˆçš„åŸºæœ¬è°ƒä¼˜æ€è·¯æ˜¯æé«˜ç‰¹å¾æ•°é‡å’Œè´¨é‡ï¼Œå¢åŠ æ¨¡å‹å¤æ‚åº¦ã€‚<br>è¯¯å·®åˆ†æ ä¹Ÿæ˜¯æœºå™¨å­¦ä¹ è‡³å…³é‡è¦çš„æ­¥éª¤ã€‚é€šè¿‡è§‚å¯Ÿè¯¯å·®æ ·æœ¬ï¼Œå…¨é¢åˆ†æè¯¯å·®äº§ç”Ÿè¯¯å·®çš„åŸå› :æ˜¯å‚æ•°çš„é—®é¢˜è¿˜æ˜¯ç®—æ³•é€‰æ‹©çš„é—®é¢˜ï¼Œæ˜¯ç‰¹å¾çš„é—®é¢˜è¿˜æ˜¯æ•°æ®æœ¬èº«çš„é—®é¢˜â€¦â€¦<br>è¯Šæ–­åçš„æ¨¡å‹éœ€è¦è¿›è¡Œè°ƒä¼˜ï¼Œè°ƒä¼˜åçš„æ–°æ¨¡å‹éœ€è¦é‡æ–°è¿›è¡Œè¯Šæ–­ï¼Œè¿™æ˜¯ä¸€ä¸ªåå¤è¿­ä»£ä¸æ–­é€¼è¿‘çš„è¿‡ç¨‹ï¼Œéœ€è¦ä¸æ–­åœ°å°è¯•ï¼Œ è¿›è€Œè¾¾åˆ°æœ€ä¼˜çŠ¶æ€ã€‚</p>
</blockquote>
<ul>
<li>æ¨¡å‹èåˆ</li>
</ul>
<blockquote>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæ¨¡å‹èåˆåéƒ½èƒ½ä½¿å¾—æ•ˆæœæœ‰ä¸€å®šæå‡ã€‚è€Œä¸”æ•ˆæœå¾ˆå¥½ã€‚<br>å·¥ç¨‹ä¸Šï¼Œä¸»è¦æå‡ç®—æ³•å‡†ç¡®åº¦çš„æ–¹æ³•æ˜¯åˆ†åˆ«åœ¨æ¨¡å‹çš„å‰ç«¯ï¼ˆç‰¹å¾æ¸…æ´—å’Œé¢„å¤„ç†ï¼Œä¸åŒçš„é‡‡æ ·æ¨¡å¼ï¼‰ä¸åç«¯ï¼ˆæ¨¡å‹èåˆï¼‰ä¸Šä¸‹åŠŸå¤«ã€‚å› ä¸ºä»–ä»¬æ¯”è¾ƒæ ‡å‡†å¯å¤åˆ¶ï¼Œæ•ˆæœæ¯”è¾ƒç¨³å®šã€‚è€Œç›´æ¥è°ƒå‚çš„å·¥ä½œä¸ä¼šå¾ˆå¤šï¼Œæ¯•ç«Ÿå¤§é‡æ•°æ®è®­ç»ƒèµ·æ¥å¤ªæ…¢äº†ï¼Œè€Œä¸”æ•ˆæœéš¾ä»¥ä¿è¯ã€‚</p>
</blockquote>
<ul>
<li>ä¸Šçº¿è¿è¡Œ</li>
</ul>
<blockquote>
<p>è¿™ä¸€éƒ¨åˆ†å†…å®¹ä¸»è¦è·Ÿå·¥ç¨‹å®ç°çš„ç›¸å…³æ€§æ¯”è¾ƒå¤§ã€‚å·¥ç¨‹ä¸Šæ˜¯ç»“æœå¯¼å‘ï¼Œæ¨¡å‹åœ¨çº¿ä¸Šè¿è¡Œçš„æ•ˆæœç›´æ¥å†³å®šæ¨¡å‹çš„æˆè´¥ã€‚ ä¸å•çº¯åŒ…æ‹¬å…¶å‡†ç¡®ç¨‹åº¦ã€è¯¯å·®ç­‰æƒ…å†µï¼Œè¿˜åŒ…æ‹¬å…¶è¿è¡Œçš„é€Ÿåº¦(æ—¶é—´å¤æ‚åº¦)ã€èµ„æºæ¶ˆè€—ç¨‹åº¦ï¼ˆç©ºé—´å¤æ‚åº¦ï¼‰ã€ç¨³å®šæ€§æ˜¯å¦å¯æ¥å—ã€‚<br>è¿™äº›å·¥ä½œæµç¨‹ä¸»è¦æ˜¯å·¥ç¨‹å®è·µä¸Šæ€»ç»“å‡ºçš„ä¸€äº›ç»éªŒã€‚å¹¶ä¸æ˜¯æ¯ä¸ªé¡¹ç›®éƒ½åŒ…å«å®Œæ•´çš„ä¸€ä¸ªæµç¨‹ã€‚è¿™é‡Œçš„éƒ¨åˆ†åªæ˜¯ä¸€ä¸ªæŒ‡å¯¼æ€§çš„è¯´æ˜ï¼Œåªæœ‰å¤§å®¶è‡ªå·±å¤šå®è·µï¼Œå¤šç§¯ç´¯é¡¹ç›®ç»éªŒï¼Œæ‰ä¼šæœ‰è‡ªå·±æ›´æ·±åˆ»çš„è®¤è¯†ã€‚</p>
</blockquote>
<h3 id="å…³äºç§¯ç´¯é¡¹ç›®ç»éªŒ"><a href="#å…³äºç§¯ç´¯é¡¹ç›®ç»éªŒ" class="headerlink" title="å…³äºç§¯ç´¯é¡¹ç›®ç»éªŒ"></a>å…³äºç§¯ç´¯é¡¹ç›®ç»éªŒ</h3><p>åˆå­¦æœºå™¨å­¦ä¹ å¯èƒ½æœ‰ä¸€ä¸ªè¯¯åŒºï¼Œå°±æ˜¯ä¸€ä¸Šæ¥å°±é™·å…¥åˆ°å¯¹å„ç§é«˜å¤§ä¸Šç®—æ³•çš„è¿½é€å½“ä¸­ã€‚åŠ¨ä¸åŠ¨å°±æˆ‘èƒ½ä¸èƒ½ç”¨æ·±åº¦å­¦ä¹ å»è§£å†³è¿™ä¸ªé—®é¢˜å•Šï¼Ÿæˆ‘æ˜¯ä¸æ˜¯è¦ç”¨boostingç®—æ³•åšä¸€äº›æ¨¡å‹èåˆå•Šï¼Ÿæˆ‘ä¸€ç›´æŒæœ‰ä¸€ä¸ªè§‚ç‚¹ï¼Œã€è„±ç¦»ä¸šåŠ¡å’Œæ•°æ®çš„ç®—æ³•è®¨è®ºæ˜¯æ¯«æ— æ„ä¹‰çš„ã€ã€‚</p>
<p>å®é™…ä¸ŠæŒ‰æˆ‘ä»¬çš„å­¦ä¹ ç»éªŒï¼Œä»ä¸€ä¸ªæ•°æ®æºå¼€å§‹ï¼Œå³ä½¿æ˜¯ç”¨æœ€ä¼ ç»Ÿï¼Œå·²ç»åº”ç”¨å¤šå¹´çš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œå…ˆå®Œæ•´åœ°èµ°å®Œæœºå™¨å­¦ä¹ çš„æ•´ä¸ªå·¥ä½œæµç¨‹ï¼Œä¸æ–­å°è¯•å„ç§ç®—æ³•æ·±æŒ–è¿™äº›æ•°æ®çš„ä»·å€¼ï¼Œåœ¨è¿ç”¨è¿‡ç¨‹ä¸­æŠŠæ•°æ®ã€ç‰¹å¾å’Œç®—æ³•æé€ï¼ŒçœŸæ­£ç§¯ç´¯å‡ºé¡¹ç›®ç»éªŒ æ‰æ˜¯æœ€å¿«ã€æœ€é è°±çš„å­¦ä¹ è·¯å¾„ã€‚</p>
<p>é‚£å¦‚ä½•è·å–æ•°æ®å’Œé¡¹ç›®å‘¢ï¼Ÿä¸€ä¸ªæ·å¾„å°±æ˜¯ç§¯æå‚åŠ å›½å†…å¤–å„ç§æ•°æ®æŒ–æ˜ç«èµ›ï¼Œæ•°æ®ç›´æ¥ä¸‹è½½ä¸‹æ¥ï¼ŒæŒ‰ç…§ç«èµ›çš„è¦æ±‚å»ä¸æ–­ä¼˜åŒ–ï¼Œç§¯ç´¯ç»éªŒã€‚å›½å¤–çš„<a href="https://www.kaggle.com/" target="_blank" rel="external">Kaggle</a>å’Œå›½å†…çš„<a href="http://www.pkbigdata.com/" target="_blank" rel="external">DataCastle</a> ä»¥åŠ<a href="https://tianchi.aliyun.com/" target="_blank" rel="external">é˜¿é‡Œå¤©æ± æ¯”èµ›</a>éƒ½æ˜¯å¾ˆå¥½çš„å¹³å°ï¼Œä½ å¯ä»¥åœ¨ä¸Šé¢è·å–çœŸå®çš„æ•°æ®å’Œæ•°æ®ç§‘å­¦å®¶ä»¬ä¸€èµ·å­¦ä¹ å’Œè¿›è¡Œç«èµ›ï¼Œå°è¯•ä½¿ç”¨å·²ç»å­¦è¿‡çš„æ‰€æœ‰çŸ¥è¯†æ¥å®Œæˆè¿™ä¸ªæ¯”èµ›æœ¬èº«ä¹Ÿæ˜¯ä¸€ä»¶å¾ˆæœ‰ä¹è¶£çš„äº‹æƒ…ã€‚å’Œå…¶ä»–æ•°æ®ç§‘å­¦å®¶çš„è®¨è®ºèƒ½å¼€é˜”è§†é‡ï¼Œå¯¹æœºå™¨å­¦ä¹ ç®—æ³•æœ‰æ›´æ·±å±‚æ¬¡çš„è®¤è¯†ã€‚</p>
<p>æœ‰æ„æ€çš„æ˜¯ï¼Œæœ‰äº›å¹³å°ï¼Œæ¯”å¦‚é˜¿é‡Œå¤©æ± æ¯”èµ›ï¼Œç”šè‡³ç»™å‡ºäº†ä»æ•°æ®å¤„ç†åˆ°æ¨¡å‹è®­ç»ƒåˆ°æ¨¡å‹è¯„ä¼°ã€å¯è§†åŒ–åˆ°æ¨¡å‹èåˆå¢å¼ºçš„å…¨éƒ¨ç»„ä»¶ï¼Œä½ è¦åšçš„äº‹æƒ…åªæ˜¯å‚ä¸æ¯”èµ›ï¼Œè·å–æ•°æ®ï¼Œç„¶åä½¿ç”¨è¿™äº›ç»„ä»¶å»å®ç°è‡ªå·±çš„ideaå³å¯ã€‚å…·ä½“å†…å®¹å¯ä»¥å‚è§<a href="https://help.aliyun.com/document_detail/shujia/machine-learning/pai-quickstart.html" target="_blank" rel="external">é˜¿é‡Œäº‘æœºå™¨å­¦ä¹ æ–‡æ¡£</a>ã€‚</p>
<h3 id="ä¹¦ç±æ¨è"><a href="#ä¹¦ç±æ¨è" class="headerlink" title="ä¹¦ç±æ¨è"></a>ä¹¦ç±æ¨è</h3><ul>
<li>Mitchell çš„ã€Šæœºå™¨å­¦ä¹ ã€‹ã€‚Mitchellæ˜¯æœºå™¨å­¦ä¹ çš„é¼»ç¥–ï¼Œç¬¬ä¸€ä¸ªæå‡ºæœºå™¨å­¦ä¹ æ¦‚å¿µçš„äººã€‚è¿™æœ¬ä¹¦å¾ˆè–„ï¼Œå¾ˆç®€å•ã€‚å†…å®¹å¾ˆé™ˆæ—§ï¼Œä½†æ˜¯éƒ½æ˜¯æœºå™¨å­¦ä¹ çš„ç»å…¸é—®é¢˜ã€‚è€Œä¸”ï¼Œè¿™æœ¬ä¹¦æ¦‚å¿µæ¸…æ™°æ­£ç¡®(å¾ˆå¯è´µå•Šï¼Œåˆç®€å•åˆæ­£ç¡®çš„ä¹¦ï¼Œè¯´æ˜ä½œè€…åŠŸåŠ›å¾ˆå¼º)</li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[lunixåˆ‡æ¢é˜²ç«å¢™]]></title>
      <url>/2017/11/06/2018/lunix%E5%88%87%E6%8D%A2%E9%98%B2%E7%81%AB%E5%A2%99/</url>
      <content type="html"><![CDATA[<p>å½“ç„¶ä½ å¯ä»¥è¿˜åŸä¼ ç»Ÿçš„ç®¡ç†æ–¹å¼ã€‚</p>
<p>æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼š</p>
<ul>
<li>åœæ­¢åŸæ¥çš„é˜²ç«å¢™æ¨¡å¼</li>
</ul>
<p><code>systemctl stop firewalld</code> </p>
<p><code>systemctl mask firewalld</code></p>
<ul>
<li><p>å¹¶ä¸”å®‰è£…iptables-servicesï¼š<br><code>yum install iptables-services</code></p>
</li>
<li><p>è®¾ç½®å¼€æœºå¯åŠ¨ï¼š</p>
</li>
</ul>
<p><code>systemctl enable iptables</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1. systemctl stop iptables  </div><div class="line">2. systemctl start iptables  </div><div class="line">3. systemctl restart iptables  </div><div class="line">4. systemctl reload iptables</div></pre></td></tr></table></figure>
<p>OKï¼Œå†è¯•ä¸€ä¸‹åº”è¯¥å°±å¥½ä½¿äº†</p>
<h3 id="å¼€æ”¾æŸä¸ªç«¯å£çš„ä¸¤ç§æ–¹å¼"><a href="#å¼€æ”¾æŸä¸ªç«¯å£çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="å¼€æ”¾æŸä¸ªç«¯å£çš„ä¸¤ç§æ–¹å¼"></a>å¼€æ”¾æŸä¸ªç«¯å£çš„ä¸¤ç§æ–¹å¼</h3><h4 id="ç›´æ¥ç¼–è¾‘æ–‡ä»¶"><a href="#ç›´æ¥ç¼–è¾‘æ–‡ä»¶" class="headerlink" title="ç›´æ¥ç¼–è¾‘æ–‡ä»¶"></a>ç›´æ¥ç¼–è¾‘æ–‡ä»¶</h4><p>å¼€æ”¾æŸä¸ªç«¯å£ åœ¨/etc/sysconfig/iptablesé‡Œæ·»åŠ <br>-A RH-Firewall-1-INPUT -m state â€“state NEW -m tcp -p tcp â€“dport 8080 -j ACCEPT</p>
<p>vim /etc/sysconfig/iptables<br>å°†ä¸Šé¢çš„è¯­å¥-A INPUT -p tcp -m state â€“state NEW -m tcp â€“dport 82 -j ACCEPTç›´æ¥æ’å…¥åˆ°ä¸Šè¿°æ–‡ä»¶ä¸­ã€‚ </p>
<p>è¿™æ—¶å€™è§„åˆ™æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼Œéœ€è¦é‡å¯æœåŠ¡service iptables restartã€‚ä¹‹åè¿™æ¡è§„åˆ™å°±æ°¸ä¹…ç”Ÿæ•ˆäº†</p>
<h4 id="ç”¨å‘½ä»¤è¡Œæ·»åŠ "><a href="#ç”¨å‘½ä»¤è¡Œæ·»åŠ " class="headerlink" title="ç”¨å‘½ä»¤è¡Œæ·»åŠ "></a>ç”¨å‘½ä»¤è¡Œæ·»åŠ </h4><p>æ·»åŠ inputè®°å½•ï¼š iptables -A INPUT -p tcp â€“dport 22 -j ACCEPT<br>æ·»åŠ outputè®°å½•ï¼š iptables -A OUTPUT -p tcp â€“sport 22 -j ACCEPT   </p>
<p>æœ€åæ³¨æ„éœ€è¦å†æ‰§è¡Œä¸€ä¸‹ /etc/init.d/iptables saveï¼Œè¿™æ ·è¿™ä¸¤æ¡è¯­å¥å°±ä¿å­˜åˆ°åˆšæ‰é‚£ä¸ª/etc/sysconfig/iptables æ–‡ä»¶ä¸­äº†</p>
<p>æ³¨æ„è¿™ä¸¤ç§æ–¹æ³•äºŒé€‰ä¸€ï¼Œä¸å¯åŒæ—¶ä½¿ç”¨</p>
]]></content>
      
        
        <tags>
            
            <tag> lunix </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[xcodeè‡ªåŠ¨åˆ›å»ºç»“æ„åŒ–æ¨¡ç‰ˆ]]></title>
      <url>/2017/11/03/2018/xcode%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%E7%BB%93%E6%9E%84%E5%8C%96%E6%A8%A1%E7%89%88/</url>
      <content type="html"><![CDATA[<p>ä¸‹è¾¹è¿™ä¸ªè·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼Œæ˜¯å¯ä»¥è¢«xcodeåŠ è½½ï¼Œç„¶åå½¢æˆä¸€ä¸ªæ¨¡ç‰ˆçš„ï¼Œæˆ‘ä»¬ç°åœ¨å…·ä½“æ¥çœ‹çœ‹<br><code>&quot;/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates/File Templates/JDJRCustom&quot;</code></p>
]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Lunix-Centos7 scrapyå®æˆ˜]]></title>
      <url>/2017/11/02/2018/Lunix-Centos7-scrapy%E5%AE%9E%E6%88%98/</url>
      <content type="html"><![CDATA[<h3 id="å®‰è£…scrapy"><a href="#å®‰è£…scrapy" class="headerlink" title="å®‰è£…scrapy"></a>å®‰è£…scrapy</h3><ul>
<li>centos7ä¸Šè½¯ä»¶ç®¡ç†å·¥å…·ä¸ºyumè€Œä¸æ˜¯apt-get</li>
<li>å®‰è£…scrapy<code>sudo pip install scrapy</code>ï¼Œè¿™ä¸ªæ—¶å€™å¯èƒ½æŠ¥é”™ï¼Œ<code>fatal error: Python.h: No such file or directory</code>ï¼Œè¿™æ˜¯å› ä¸ºç¼ºå°‘python-devè¿™ä¸ªåº“ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…<code>sudo yum install python-dev</code>ä½†æ˜¯åœ¨centos7ä¸Šä¼šè¯´æ‰¾ä¸åˆ°ï¼Œæ˜¯å› ä¸ºåœ¨è¯¥ç‰ˆæœ¬ä¸Šä¸æ˜¯python-devè€Œæ˜¯<code>python-devel</code></li>
</ul>
<p>æˆ–è€…æ˜¯ä½¿ç”¨å¦å¤–ä¸€ç§æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">root@localhost ~]# yum -y update</div><div class="line">å®‰è£…gccåŠæ‰©å±•åŒ…</div><div class="line">[root@localhost ~]# yum install gcc libffi-devel python-devel openssl-devel</div><div class="line">å®‰è£…å¼€å‘å·¥å…·åŒ…</div><div class="line">[root@localhost ~]# yum groupinstall -y development</div><div class="line">å®‰è£…libxslt-develæ”¯æŒlxml</div><div class="line">[root@localhost ~]# yum install libxslt-devel</div><div class="line">å®‰è£…pip</div><div class="line">[root@localhost ~]# yum -y install python-pip</div><div class="line">å®‰è£…Scrapy</div><div class="line">[root@localhost ~]# pip install scrapy</div></pre></td></tr></table></figure>
<h3 id="é…ç½®mongo"><a href="#é…ç½®mongo" class="headerlink" title="é…ç½®mongo"></a>é…ç½®mongo</h3><h4 id="å®‰è£…ç¯å¢ƒåŠé…ç½®yum"><a href="#å®‰è£…ç¯å¢ƒåŠé…ç½®yum" class="headerlink" title="å®‰è£…ç¯å¢ƒåŠé…ç½®yum"></a>å®‰è£…ç¯å¢ƒåŠé…ç½®yum</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># more /etc/redhat-release </div><div class="line">CentOS Linux release 7.2.1511 (Core)</div><div class="line"></div><div class="line"># vi /etc/yum.repos.d/mongodb-org-3.2.repo </div><div class="line">[mongodb-org-3.2]</div><div class="line">name=MongoDB Repository</div><div class="line">baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.2/x86_64/</div><div class="line">gpgcheck=1</div><div class="line">enabled=1</div><div class="line">gpgkey=https://www.mongodb.org/static/pgp/server-3.2.asc</div></pre></td></tr></table></figure>
<h4 id="å®‰è£…MongoDB"><a href="#å®‰è£…MongoDB" class="headerlink" title="å®‰è£…MongoDB"></a>å®‰è£…MongoDB</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum -y install mongodb-org</div></pre></td></tr></table></figure>
<h4 id="åˆ›å»ºdataæ–‡ä»¶å’Œlogæ–‡ä»¶å¹¶ä¸”å¯åŠ¨"><a href="#åˆ›å»ºdataæ–‡ä»¶å’Œlogæ–‡ä»¶å¹¶ä¸”å¯åŠ¨" class="headerlink" title="åˆ›å»ºdataæ–‡ä»¶å’Œlogæ–‡ä»¶å¹¶ä¸”å¯åŠ¨"></a>åˆ›å»ºdataæ–‡ä»¶å’Œlogæ–‡ä»¶å¹¶ä¸”å¯åŠ¨</h4><ul>
<li>å…ˆåœ¨åŒçº§ç›®å½•ä¸‹åˆ›å»ºæ•°æ®æ–‡ä»¶å’Œæ—¥å¿—æ–‡ä»¶mkdir dataå’Œmkdir log</li>
<li>å¯åŠ¨mongodbæœåŠ¡mongod â€“dbpath data â€“logpath log/mongod.log â€“logappend â€“fork</li>
<li>å†æ¬¡mongoå¦‚æœæ˜¾ç¤ºconnecting to testè¯´æ˜å¯åŠ¨æˆåŠŸï¼Œè¾“å…¥exit;é€€å‡ºmongo</li>
</ul>
<h3 id="Lunixé•¿æ—¶é—´è¿è¡Œå‘½ä»¤è¡Œæ–¹æ³•"><a href="#Lunixé•¿æ—¶é—´è¿è¡Œå‘½ä»¤è¡Œæ–¹æ³•" class="headerlink" title="Lunixé•¿æ—¶é—´è¿è¡Œå‘½ä»¤è¡Œæ–¹æ³•"></a>Lunixé•¿æ—¶é—´è¿è¡Œå‘½ä»¤è¡Œæ–¹æ³•</h3><p>ä½¿ç”¨screen</p>
<p>å¸¸ç”¨å‘½ä»¤</p>
<blockquote>
<ul>
<li><code>screen -ls</code>æŸ¥çœ‹å½“å‰çš„screen</li>
<li><code>screen -S screenname</code>åˆ›å»ºä¸€ä¸ªæ–°çš„screenå¹¶ä¸”ç»™å‘½åï¼Œè¿™ä¸ªåå­—å¯ä»¥åæœŸç”¨ä»¥æ¢å¤screen</li>
<li><code>control+a----&gt;d</code>é€€å‡ºå½“å‰screenå¹¶ä¸”æŒ‚èµ·</li>
<li><code>screen -r number/name</code>è¿›å…¥æŸä¸ªscreen</li>
</ul>
</blockquote>
<h3 id="å®šæ—¶è¿è¡Œä»»åŠ¡"><a href="#å®šæ—¶è¿è¡Œä»»åŠ¡" class="headerlink" title="å®šæ—¶è¿è¡Œä»»åŠ¡"></a>å®šæ—¶è¿è¡Œä»»åŠ¡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">while True:  </div><div class="line">    print time.strftime(&apos;%Y-%m-%d %X&apos;,time.localtime())  </div><div class="line">    yourTask() # æ­¤å¤„ä¸ºè¦æ‰§è¡Œçš„ä»»åŠ¡  </div><div class="line">    time.sleep(n)</div></pre></td></tr></table></figure>
<h3 id="è¾“å‡ºåˆ°log"><a href="#è¾“å‡ºåˆ°log" class="headerlink" title="è¾“å‡ºåˆ°log"></a>è¾“å‡ºåˆ°log</h3><p>ç›´æ¥ç”¨printæ¥è¾“å‡ºï¼Œæ­£å¸¸åœ¨terminalè¿è¡Œå°±å¯ä»¥çœ‹åˆ°æ‰“å°è¾“å‡ºä½†æ˜¯å¦‚æœç”¨ä¸‹é¢è¿™ç§æ–¹å¼æ¥è¾“å‡ºå°±ä¼šç›´æ¥è¾“å‡ºåˆ°logä¸­<br><code>python test.py &gt;&gt; test.log</code>è¿™æ ·å°±printåˆ°logle</p>
<h3 id="Scrapyè¯¦è§£"><a href="#Scrapyè¯¦è§£" class="headerlink" title="Scrapyè¯¦è§£"></a>Scrapyè¯¦è§£</h3><p>ä¸»è¦æ˜¯ä¸‰ä¸ªæ–‡ä»¶</p>
<ul>
<li>items.py</li>
<li>pipelines.py</li>
<li>xxx_spider.py(è¿™ä¸ªæ–‡ä»¶æ˜¯è‡ªå·±åˆ›å»ºçš„ï¼Œåœ¨spidersè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹è¾¹)</li>
</ul>
<p>ä¸‹è¾¹åˆ†åˆ«è¯´æ˜æ–‡ä»¶ä»¥åŠå…¶æ•´ä½“å…³ç³»</p>
<h4 id="xxx-spider-py"><a href="#xxx-spider-py" class="headerlink" title="xxx_spider.py"></a>xxx_spider.py</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">import scrapy</div><div class="line">import json</div><div class="line">from tutorial.items import JdjrItem#è¿™é‡Œå€’å…¥çš„æ˜¯ä¸€ä¸ªç›¸å½“äºiosä¸­çš„modelä¸€æ ·çš„ä¸œè¥¿ï¼Œæ˜¯å®šä¹‰äºitems.pyè¿™ä¸ªæ–‡ä»¶</div><div class="line"></div><div class="line">class DmozSpider(scrapy.Spider):</div><div class="line">    name = &quot;spider&quot;#è¿™ä¸ªåå­—ç›¸å½“é‡è¦ï¼Œå®ƒæ˜¯çˆ¬è™«çš„å”¯ä¸€æ ‡ç¤ºï¼Œä½ è¿è¡Œå‘½ä»¤è¡Œçš„æ—¶å€™ï¼Œå®ƒè¯†åˆ«çš„ä¹Ÿæ˜¯è¿™ä¸ªåå­—ï¼Œè·Ÿä½ å¤–è¾¹æ–‡ä»¶å«å•¥æ²¡å…³ç³»ï¼Œè·Ÿä½ è¿™ä¸ªç±»å«å•¥ä¹Ÿæ²¡æœ‰å…³ç³»</div><div class="line">    allowed_domains = [&quot;itunes.apple.com&quot;]</div><div class="line">    start_urls = []</div><div class="line">    start = 0</div><div class="line">    for i in range(0,2):</div><div class="line">        end = start + 100</div><div class="line">        endString = &apos;%d&apos; % end</div><div class="line">        startString = &apos;%d&apos; % start</div><div class="line">        start = end + 1</div><div class="line">#       url1 = &quot;https://itunes.apple.com/WebObjects/MZStore.woa/wa/userReviewsRow?id=895682747&amp;displayable-kind=11&amp;startIndex=%s&amp;endIndex=%s&amp;sort=1&amp;appVersion=all&quot; % (startString,endString)</div><div class="line">        url2 = &quot;https://itunes.apple.com/WebObjects/MZStore.woa/wa/userReviewsRow?id=895682747&amp;displayable-kind=11&amp;startIndex=%s&amp;endIndex=%s&amp;sort=1&amp;appVersion=current&quot; % (startString,endString)</div><div class="line">#       start_urls.append(url1)</div><div class="line">        start_urls.append(url2)</div><div class="line"></div><div class="line">#     start_urls = [</div><div class="line">#         # &quot;https://itunes.apple.com/WebObjects/MZStore.woa/wa/userReviewsRow?id=895682747&amp;displayable-kind=11&amp;startIndex=0&amp;endIndex=50&amp;sort=1&amp;appVersion=cureent&quot;</div><div class="line"># # ,</div><div class="line">#             &quot;https://itunes.apple.com/WebObjects/MZStore.woa/wa/userReviewsRow?id=895682747&amp;displayable-kind=11&amp;startIndex=0&amp;endIndex=50&amp;sort=1&amp;appVersion=all&quot;</div><div class="line"># ]</div><div class="line">    def parse(self, response):</div><div class="line">        sites = json.loads(response.body_as_unicode())#å‰è¾¹çš„urlè¯·æ±‚æˆåŠŸä¹‹åå°±æ˜¯è°ƒç”¨è¿™ä¸ªparseæ–¹æ³•ï¼Œè¿™é‡Œçš„responseçš„å¤„ç†ç›¸å½“å…³é”®ï¼Œä½†æ€»ç»“æ¥çœ‹ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯jsonï¼Œä¸€ç§æ˜¯htmlï¼Œè¿™é‡Œä¸¾ä¾‹çš„æ˜¯jsonçš„å¤„ç†æ–¹å¼</div><div class="line">        siteitems = sites[&apos;userReviewList&apos;]</div><div class="line">        for item in siteitems:</div><div class="line">            JrItem = JdjrItem()</div><div class="line">            JrItem[&apos;userReviewId&apos;] = item[&apos;userReviewId&apos;].encode(&quot;utf-8&quot;)</div><div class="line">            JrItem[&apos;body&apos;] = item[&apos;body&apos;].encode(&quot;utf-8&quot;)</div><div class="line">            dateString = item[&apos;date&apos;].encode(&quot;utf-8&quot;)</div><div class="line">            dateStringList = dateString.split(&apos;T&apos;)</div><div class="line">            date = dateStringList[0]</div><div class="line">            time = dateStringList[1]</div><div class="line">            JrItem[&apos;date&apos;] = date</div><div class="line">            JrItem[&apos;time&apos;] = time</div><div class="line">            JrItem[&apos;name&apos;] = item[&apos;name&apos;].encode(&quot;utf-8&quot;)</div><div class="line">            JrItem[&apos;rating&apos;] = item[&apos;rating&apos;]</div><div class="line">            JrItem[&apos;title&apos;] = item[&apos;title&apos;].encode(&quot;utf-8&quot;)</div><div class="line">            yield JrItem#æˆ‘ä»¬æŠŠæ•°æ®åšä¸€ä¸ªè§£æï¼Œç„¶åæŠŠæ•°æ®è£…å…¥æˆ‘ä»¬çš„JrItemè¿™ä¸ªModelé‡Œè¾¹ï¼Œè¿›è¡Œè¿”å›ï¼Œè¿›è¡Œä¸‹ä¸€æ­¥çš„å¤„ç†</div></pre></td></tr></table></figure>
<h4 id="pipelines-py"><a href="#pipelines-py" class="headerlink" title="pipelines.py"></a>pipelines.py</h4><p>è¿™é‡Œæ˜¯æ¥æ”¶ä¸Šä¸€æ­¥<code>yield JrItem</code>çš„å†…å®¹ï¼Œç„¶åè¿›è¡Œè¿›ä¸€æ­¥çš„å¤„ç†ï¼Œå…·ä½“æ¥è®²å°±æ˜¯æˆ‘ä»¬åˆå§‹åŒ–äº†mongoï¼Œç„¶åæŠŠæ•°æ®å­˜å…¥mongo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">import pymongo</div><div class="line">from scrapy.conf import settings</div><div class="line"></div><div class="line">class TutorialPipeline(object):</div><div class="line"></div><div class="line">    def __init__(self):#åœ¨è¿™é‡Œå¾ˆé‡è¦çš„ä¸€æ­¥æ˜¯æˆ‘ä»¬åˆå§‹åŒ–äº†mongoï¼Œç„¶åæŠŠæ•°æ®å­˜å…¥mongo</div><div class="line">        # é“¾æ¥æ•°æ®åº“</div><div class="line">        self.client = pymongo.MongoClient(host=settings[&apos;MONGO_HOST&apos;], port=settings[&apos;MONGO_PORT&apos;])</div><div class="line">        # æ•°æ®åº“ç™»å½•éœ€è¦å¸å·å¯†ç çš„è¯</div><div class="line">        # self.client.admin.authenticate(settings[&apos;MINGO_USER&apos;], settings[&apos;MONGO_PSW&apos;])</div><div class="line">        self.db = self.client[settings[&apos;MONGO_DB&apos;]]  # è·å¾—æ•°æ®åº“çš„å¥æŸ„</div><div class="line">        self.coll = self.db[settings[&apos;MONGO_COLL&apos;]]  # è·å¾—collectionçš„å¥æŸ„</div><div class="line"></div><div class="line">    def process_item(self, item, spider):</div><div class="line">        dbs = self.coll.find(&#123;&apos;userReviewId&apos;:item[&apos;userReviewId&apos;]&#125;)</div><div class="line">        count = 0</div><div class="line">        for itemnew in dbs:#è¿›è¡Œäº†ä¸€ä¸ªå»é‡</div><div class="line">            count = count + 1</div><div class="line">        if count == 0: </div><div class="line">           postItem = dict(item)  # æŠŠitemè½¬åŒ–æˆå­—å…¸å½¢å¼</div><div class="line">           self.coll.insert(postItem)  # å‘æ•°æ®åº“æ’å…¥ä¸€æ¡è®°å½•</div><div class="line">        return item</div></pre></td></tr></table></figure>
<h4 id="item-py"><a href="#item-py" class="headerlink" title="item.py"></a>item.py</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">import scrapy</div><div class="line"></div><div class="line">class JdjrItem(scrapy.Item):</div><div class="line">    # define the fields for your item here like:</div><div class="line">    userReviewId = scrapy.Field()</div><div class="line">    body = scrapy.Field()</div><div class="line">    date = scrapy.Field()</div><div class="line">    name = scrapy.Field()</div><div class="line">    rating = scrapy.Field()</div><div class="line">    title = scrapy.Field()</div><div class="line">    time = scrapy.Field()</div></pre></td></tr></table></figure>
<h3 id="è‡ªå®šä¹‰header"><a href="#è‡ªå®šä¹‰header" class="headerlink" title="è‡ªå®šä¹‰header"></a>è‡ªå®šä¹‰header</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">class AppstoreSpider(scrapy.Spider):</div><div class="line">    name = &quot;ios&quot;</div><div class="line">    allowed_domains = [&quot;itunes.apple.com&quot;]</div><div class="line">    start_urls = []</div><div class="line">    start = 0</div><div class="line">    for i in range(10,12):</div><div class="line">        end = start + 100</div><div class="line">        endString = &apos;%d&apos; % end</div><div class="line">        startString = &apos;%d&apos; % start</div><div class="line">        start = end + 1</div><div class="line">        url1 = &quot;https://itunes.apple.com/WebObjects/MZStore.woa/wa/userReviewsRow?id=895682747&amp;displayable-kind=11&amp;startIndex=%s&amp;endIndex=%s&amp;sort=1&amp;appVersion=all&quot; % (startString,endString)</div><div class="line">        url2 = &quot;https://itunes.apple.com/WebObjects/MZStore.woa/wa/userReviewsRow?id=895682747&amp;displayable-kind=11&amp;startIndex=%s&amp;endIndex=%s&amp;sort=1&amp;appVersion=current&quot; % (startString,endString)</div><div class="line">        start_urls.append(url1)</div><div class="line">        start_urls.append(url2)</div><div class="line"></div><div class="line">    def start_requests(self):</div><div class="line"></div><div class="line">        headers = &#123;</div><div class="line">            &quot;Host&quot;: &quot;itunes.apple.com&quot;,</div><div class="line">            &quot;X-Apple-Tz&quot;: &quot;28800&quot;,</div><div class="line">            &quot;Connection&quot;: &quot;keep-alive&quot;,</div><div class="line">            &quot;Accept&quot;: &quot;*/*&quot;,</div><div class="line">            &quot;X-Apple-Store-Front&quot;: &quot;143465-19,32&quot;,</div><div class="line">            &quot;Proxy-Connection&quot;: &quot;keep-alive&quot;,</div><div class="line">            &quot;If-Modified-Since&quot;: &quot;Mon, 30 Oct 2017 05:09:14 GMT&quot;,</div><div class="line">            &quot;Accept-Language&quot;: &quot;zh-Hans;q=1.0, en;q=0.9&quot;,</div><div class="line">            &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,</div><div class="line">            &quot;X-Apple-I-MD-RINFO&quot;: &quot;17106176&quot;,</div><div class="line">            &quot;X-Apple-I-MD-M&quot;: &quot;4yta1gxLU2/1yorU7oVB982KDbxQfTgDNV0Kx6rMh83dcH6GSFvvMX4j2xTK1pydINZyrdPRmrAqnMrx&quot;,</div><div class="line">            &quot;User-Agent&quot;: &quot;iTunes/12.5.5 (Macintosh; OS X 10.11.6) AppleWebKit/601.7.7&quot;,</div><div class="line">            &quot;X-Apple-I-Client-Time&quot;: &quot;2017-10-30T06:38:41Z&quot;,</div><div class="line">            &quot;Referer&quot;: &quot;https://itunes.apple.com/cn/app/%E4%BA%AC%E4%B8%9C%E9%87%91%E8%9E%8D-%E6%96%B0%E4%BA%BA%E9%A2%86666%E5%85%83%E5%A4%A7%E7%A4%BC%E5%8C%85/id895682747?mt=8&quot;,</div><div class="line">            &quot;X-Apple-I-MD&quot;: &quot;AAAABQAAABB/8E70ajsA2bpSsQneRzRzAAAAAQ==&quot;,</div><div class="line">            &quot;X-Dsid&quot;: &quot;1851386458&quot;,</div><div class="line">            &quot;Cookie&quot;: &quot;groupingPillToken=1_iphone; mt-asn-1851386458=5; mt-asn-1952598692=5; mt-tkn-1851386458=AquPBN7pBVJrtDMwCG1MrwviP60xe4f/EE45hsAOovLfR/ovUuHxcsKrlj2pxor0U9F3HIkuroemH+0MuFQnpjqUFC4oYoymULT5CpIKnJ3VpDni/Y/moZel5PjbSHG4GD+Ijl5r7uyk/NbjAbcP2c6m643pr8/RJ8pEGPfTmpVhsZJWGga7Uku1jMcsYZwUcq4thww=; mt-tkn-1952598692=AmPsxyX+Zm3hcSBdOCr1LAg942a/+QI1OZsorJ+0WD2wkyUHZ6Dv3jDaRipaZfgo7xzHgpeVUdtG70RFfh0FA5pOHGZGJ/5b/MiFc4VGex0OtgQ9XasD8i89/gI1Ai21Fi7kJkngVal3DewE6NPKYC8difiYN7R7wY/nH/Z3bcgGM9wio22SK/ZdDyrs38XhS717EKw=; X-Dsid=1851386458; itspod=24; mz_at0-1851386458=AwQAAAEBAAHWuQAAAABZo5zH8UZyjuA18kRtUGbvu8lLlA89jpk=; mz_at0-1952598692=AwQAAAEBAAHWUwAAAABX91VVP4AXK30/tKDBEUr2V9fwfUERl9A=; mz_at_ssl-1851386458=AwUAAAEBAAHWUwAAAABYFwZni0EdGJhw1mXiPHOZnkeCs8m3DaU=; mz_at_ssl-1952598692=AwUAAAEBAAHWUQAAAABXfIMB4QjT3cNSHm+BuLBHSWqkz1Ndd0g=; s_vi=[CS]v1|2B45BA5205011739-600001038013C541[CE]; xp_ab=1#isj11bm+3579+17Eg4xa0; xp_abc=17Eg4xa0; xp_ci=3z34ZpILzCUZz4Vrz9pTzlq8yrxrJ&quot;,</div><div class="line">            &quot;iCloud-DSID&quot;: &quot;1851386458&quot;</div><div class="line">        &#125;</div><div class="line">        for url in self.start_urls:</div><div class="line">            yield scrapy.Request(url,</div><div class="line">                                   headers=headers,</div><div class="line">                                       callback=self.parse)</div></pre></td></tr></table></figure>
<h3 id="å®šæ—¶è·‘å¤šä¸ªspider"><a href="#å®šæ—¶è·‘å¤šä¸ªspider" class="headerlink" title="å®šæ—¶è·‘å¤šä¸ªspider"></a>å®šæ—¶è·‘å¤šä¸ªspider</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">class AppstoreSpider(scrapy.Spider):</div><div class="line">    name = &quot;ios&quot;</div></pre></td></tr></table></figure>
<p>é‡ç‚¹æ˜¯è¿™é‡Œçš„nameï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ¥é©±åŠ¨è¿™ä¸ªnameçš„spider</p>
<h3 id="å…¶ä»–å‘½ä»¤"><a href="#å…¶ä»–å‘½ä»¤" class="headerlink" title="å…¶ä»–å‘½ä»¤"></a>å…¶ä»–å‘½ä»¤</h3><h4 id="æŸ¥çœ‹-æ–°å»º-åˆ é™¤ç”¨æˆ·"><a href="#æŸ¥çœ‹-æ–°å»º-åˆ é™¤ç”¨æˆ·" class="headerlink" title="æŸ¥çœ‹/æ–°å»º/åˆ é™¤ç”¨æˆ·"></a>æŸ¥çœ‹/æ–°å»º/åˆ é™¤ç”¨æˆ·</h4><ul>
<li>cat /etc/passwd å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·çš„åˆ—è¡¨</li>
<li>cat /etc/group æŸ¥çœ‹ç”¨æˆ·ç»„</li>
<li>userdel peter åˆ é™¤ç”¨æˆ·</li>
<li>useradd phpq å¢åŠ ç”¨æˆ·</li>
<li>passwd xxx  è¯¥ç”¨æˆ·å¯†ç </li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[pythonè¾“å‡ºè¡¨æ ¼]]></title>
      <url>/2017/10/31/2018/python%E8%BE%93%E5%87%BA%E8%A1%A8%E6%A0%BC/</url>
      <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">from prettytable import PrettyTable  </div><div class="line">x = PrettyTable([&quot;City name&quot;, &quot;Area&quot;, &quot;Population&quot;, &quot;Annual Rainfall&quot;])  </div><div class="line">x.align[&quot;City name&quot;] = &quot;l&quot;# Left align city names</div><div class="line">x.padding_width = 1# One space between column edges and contents (default)</div><div class="line">x.add_row([&quot;Adelaide&quot;,1295, 1158259, 600.5])  </div><div class="line">x.add_row([&quot;Brisbane&quot;,5905, 1857594, 1146.4])  </div><div class="line">x.add_row([&quot;Darwin&quot;, 112, 120900, 1714.7])  </div><div class="line">x.add_row([&quot;Hobart&quot;, 1357, 205556, 619.5])  </div><div class="line">x.add_row([&quot;Sydney&quot;, 2058, 4336374, 1214.8])  </div><div class="line">x.add_row([&quot;Melbourne&quot;, 1566, 3806092, 646.9])  </div><div class="line">x.add_row([&quot;Perth&quot;, 5386, 1554769, 869.4])  </div><div class="line">print x</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[appstroeè¯„è®ºçˆ¬å–]]></title>
      <url>/2017/10/30/2018/appstroe%E8%AF%84%E8%AE%BA%E7%88%AC%E5%8F%96/</url>
      <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/env python</div><div class="line"># coding:utf-8</div><div class="line">import requests</div><div class="line"></div><div class="line"># ç¦ç”¨å®‰å…¨è¯·æ±‚è­¦å‘Š</div><div class="line">from requests.packages.urllib3.exceptions import InsecureRequestWarning</div><div class="line">requests.packages.urllib3.disable_warnings(InsecureRequestWarning)</div><div class="line"></div><div class="line">url = &apos;https://itunes.apple.com/WebObjects/MZStore.woa/wa/userReviewsRow?id=895682747&amp;displayable-kind=11&amp;startIndex=600&amp;endIndex=800&amp;sort=1&amp;appVersion=all&apos;</div><div class="line"></div><div class="line">headers = &#123;</div><div class="line">&quot;Host&quot;: &quot;itunes.apple.com&quot;,</div><div class="line">&quot;X-Apple-Tz&quot;: &quot;28800&quot;,</div><div class="line">&quot;Connection&quot;: &quot;keep-alive&quot;,</div><div class="line">&quot;Accept&quot;: &quot;*/*&quot;,</div><div class="line">&quot;X-Apple-Store-Front&quot;: &quot;143465-19,32&quot;,</div><div class="line">&quot;Proxy-Connection&quot;: &quot;keep-alive&quot;,</div><div class="line">&quot;If-Modified-Since&quot;: &quot;Mon, 30 Oct 2017 05:09:14 GMT&quot;,</div><div class="line">&quot;Accept-Language&quot;: &quot;zh-Hans;q=1.0, en;q=0.9&quot;,</div><div class="line">&quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,</div><div class="line">&quot;X-Apple-I-MD-RINFO&quot;: &quot;17106176&quot;,</div><div class="line">&quot;X-Apple-I-MD-M&quot;: &quot;4yta1gxLU2/1yorU7oVB982KDbxQfTgDNV0Kx6rMh83dcH6GSFvvMX4j2xTK1pydINZyrdPRmrAqnMrx&quot;,</div><div class="line">&quot;User-Agent&quot;: &quot;iTunes/12.5.5 (Macintosh; OS X 10.11.6) AppleWebKit/601.7.7&quot;,</div><div class="line">&quot;X-Apple-I-Client-Time&quot;: &quot;2017-10-30T06:38:41Z&quot;,</div><div class="line">&quot;Referer&quot;: &quot;https://itunes.apple.com/cn/app/%E4%BA%AC%E4%B8%9C%E9%87%91%E8%9E%8D-%E6%96%B0%E4%BA%BA%E9%A2%86666%E5%85%83%E5%A4%A7%E7%A4%BC%E5%8C%85/id895682747?mt=8&quot;,</div><div class="line">&quot;X-Apple-I-MD&quot;: &quot;AAAABQAAABB/8E70ajsA2bpSsQneRzRzAAAAAQ==&quot;,</div><div class="line">&quot;X-Dsid&quot;: &quot;1851386458&quot;,</div><div class="line">&quot;Cookie&quot;: &quot;groupingPillToken=1_iphone; mt-asn-1851386458=5; mt-asn-1952598692=5; mt-tkn-1851386458=AquPBN7pBVJrtDMwCG1MrwviP60xe4f/EE45hsAOovLfR/ovUuHxcsKrlj2pxor0U9F3HIkuroemH+0MuFQnpjqUFC4oYoymULT5CpIKnJ3VpDni/Y/moZel5PjbSHG4GD+Ijl5r7uyk/NbjAbcP2c6m643pr8/RJ8pEGPfTmpVhsZJWGga7Uku1jMcsYZwUcq4thww=; mt-tkn-1952598692=AmPsxyX+Zm3hcSBdOCr1LAg942a/+QI1OZsorJ+0WD2wkyUHZ6Dv3jDaRipaZfgo7xzHgpeVUdtG70RFfh0FA5pOHGZGJ/5b/MiFc4VGex0OtgQ9XasD8i89/gI1Ai21Fi7kJkngVal3DewE6NPKYC8difiYN7R7wY/nH/Z3bcgGM9wio22SK/ZdDyrs38XhS717EKw=; X-Dsid=1851386458; itspod=24; mz_at0-1851386458=AwQAAAEBAAHWuQAAAABZo5zH8UZyjuA18kRtUGbvu8lLlA89jpk=; mz_at0-1952598692=AwQAAAEBAAHWUwAAAABX91VVP4AXK30/tKDBEUr2V9fwfUERl9A=; mz_at_ssl-1851386458=AwUAAAEBAAHWUwAAAABYFwZni0EdGJhw1mXiPHOZnkeCs8m3DaU=; mz_at_ssl-1952598692=AwUAAAEBAAHWUQAAAABXfIMB4QjT3cNSHm+BuLBHSWqkz1Ndd0g=; s_vi=[CS]v1|2B45BA5205011739-600001038013C541[CE]; xp_ab=1#isj11bm+3579+17Eg4xa0; xp_abc=17Eg4xa0; xp_ci=3z34ZpILzCUZz4Vrz9pTzlq8yrxrJ&quot;,</div><div class="line">&quot;iCloud-DSID&quot;: &quot;1851386458&quot;</div><div class="line">&#125;</div><div class="line"></div><div class="line">r = requests.get(url, headers=headers, verify=True)</div><div class="line"># print(r.status_code)</div><div class="line">respose = r.text</div><div class="line">print(type(respose))</div><div class="line">print respose</div></pre></td></tr></table></figure>
<p>å…ˆè¯´ä¸€ä¸‹å‘åœ¨å“ªé‡Œï¼Œé‚£å°±æ˜¯æœ€æ–°ç‰ˆæœ¬çš„itunsæ²¡æœ‰åº”ç”¨æœç´¢è¿™ä¸ªåŠŸèƒ½ï¼Œè€Œappstroeçš„æ¥å£å®Œå…¨æŠ“ä¸åˆ°ï¼Œè¿™é‡Œè¦è®°ä½æˆ‘ä»¬è¦ä½¿ç”¨10.11.6ä»¥å‰çš„ç³»ç»Ÿç‰ˆæœ¬ï¼Œç„¶åä½¿ç”¨12.5.5.5ä»¥å‰çš„itunesç‰ˆæœ¬</p>
]]></content>
      
        
        <tags>
            
            <tag> å·¥å…· </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¯æ‰§è¡Œæ–‡ä»¶åˆ†æè®°å½•ç³»ç»Ÿæ„å»º]]></title>
      <url>/2017/10/25/2017/iOS%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E5%88%86%E6%9E%90%E8%AE%B0%E5%BD%95%E7%B3%BB%E7%BB%9F%E6%9E%84%E5%BB%BA/</url>
      <content type="html"><![CDATA[<ul>
<li>é…ç½®æ–‡ä»¶é€‰é¡¹æ„å»º</li>
<li>è®¾ç½®æ–‡ä»¶è·¯å¾„å’Œlinkmapé€‰é¡¹ä¸ºYES</li>
<li>ç¼–å†™è‡ªåŠ¨åŒ–è§£æè„šæœ¬</li>
<li>ç¼–å†™è‡ªåŠ¨æ‰“åŒ…è„šæœ¬</li>
<li>å°†è„šæœ¬è¿›è¡Œç¼–è¯‘ï¼Œå¹¶ä¸”åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œå®‰è£…</li>
<li>æ­å»ºå¯è§†åŒ–ç•Œé¢</li>
<li>å°†ä»»åŠ¡å¼€å§‹å‘½ä»¤æ¤å…¥git</li>
<li>å†å²æ•°æ®å±•ç¤º</li>
</ul>
<h3 id="é…ç½®æ–‡ä»¶é€‰é¡¹æ„å»º"><a href="#é…ç½®æ–‡ä»¶é€‰é¡¹æ„å»º" class="headerlink" title="é…ç½®æ–‡ä»¶é€‰é¡¹æ„å»º"></a>é…ç½®æ–‡ä»¶é€‰é¡¹æ„å»º</h3><p><img src="/25/2017/iOSå¯æ‰§è¡Œæ–‡ä»¶åˆ†æè®°å½•ç³»ç»Ÿæ„å»º/../../../images/configImage.png" alt="Alt text"><br>é‡ç‚¹ï¼š<br>æ‰€æœ‰çš„å·¥ç¨‹éƒ½è¦æ·»åŠ ä¸€ä¸ªAnalyseè¿™ä¸ªé¡¹ï¼Œå¦åˆ™ä½ é€‰æ‹©è¿™ä¸ªè¿›è¡Œç¼–è¯‘ï¼Œå°±ä¼šæŠ¥é”™</p>
<h3 id="è®¾ç½®æ–‡ä»¶è·¯å¾„å’Œlinkmapé€‰é¡¹ä¸ºYES"><a href="#è®¾ç½®æ–‡ä»¶è·¯å¾„å’Œlinkmapé€‰é¡¹ä¸ºYES" class="headerlink" title="è®¾ç½®æ–‡ä»¶è·¯å¾„å’Œlinkmapé€‰é¡¹ä¸ºYES"></a>è®¾ç½®æ–‡ä»¶è·¯å¾„å’Œlinkmapé€‰é¡¹ä¸ºYES</h3><p><img src="/25/2017/iOSå¯æ‰§è¡Œæ–‡ä»¶åˆ†æè®°å½•ç³»ç»Ÿæ„å»º/../../../images/linkmapconfig.png" alt="Alt text"></p>
<blockquote>
<ul>
<li>$(TARGET_TEMP_DIR)/$(PRODUCT_NAME)-LinkMap-$(CURRENT_VARIANT)-$(CURRENT_ARCH).txt</li>
<li>$(BUILD_DIR)/$(CONFIGURATION)$(EFFECTIVE_PLATFORM_NAME)<br>æˆ‘ä»¬å¯ä»¥è®¾ç½®è·¯å¾„ä¸ºBUILD_DIRï¼Œè¿™æ ·å°±ç›´æ¥å‡ºç°åœ¨Buildè¿™ä¸ªç›®å½•ä¸‹äº†</li>
</ul>
</blockquote>
<h3 id="ç¼–å†™è‡ªåŠ¨åŒ–è§£æè„šæœ¬"><a href="#ç¼–å†™è‡ªåŠ¨åŒ–è§£æè„šæœ¬" class="headerlink" title="ç¼–å†™è‡ªåŠ¨åŒ–è§£æè„šæœ¬"></a>ç¼–å†™è‡ªåŠ¨åŒ–è§£æè„šæœ¬</h3><h3 id="ç¼–å†™è‡ªåŠ¨æ‰“åŒ…è„šæœ¬"><a href="#ç¼–å†™è‡ªåŠ¨æ‰“åŒ…è„šæœ¬" class="headerlink" title="ç¼–å†™è‡ªåŠ¨æ‰“åŒ…è„šæœ¬"></a>ç¼–å†™è‡ªåŠ¨æ‰“åŒ…è„šæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xcodebuild -workspace JDFinance.xcworkspace -scheme JDMobile -configuration Analyse build</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSå®‰å…¨ç‚¹ç½—åˆ—]]></title>
      <url>/2017/10/23/2017/iOS%E5%AE%89%E5%85%A8%E7%82%B9%E7%BD%97%E5%88%97/</url>
      <content type="html"><![CDATA[<p>é’ˆå¯¹å¯æ‰§è¡Œæ–‡ä»¶å»é™¤ç¬¦å·è¡¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">strip JDMobile</div></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å»é™¤äº†ç¬¦å·è¡¨ï¼Œé˜²æ­¢ä»–äººæŸ¥çœ‹æˆ‘ä»¬ä½¿ç”¨çš„ç±»å’Œæ–¹æ³•ï¼Œä½†æ˜¯éœ€è¦é‡æ–°ç­¾åæˆ‘ä»¬çš„åŒ…æ‰èƒ½å‘å‡ºå»</p>
]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ•°æ®ç§‘å­¦å…¥é—¨]]></title>
      <url>/2017/10/23/2018/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%85%A5%E9%97%A8/</url>
      <content type="html"><![CDATA[<p>äº§å“æœ¬è´¨ä¸Šæ‰¿è½½çš„æ˜¯æ•°æ®ï¼Œé€šè¿‡å¯¹æ•°æ®çš„æŒ–æ˜ç„¶åä¸æ–­çš„ä¼˜åŒ–äº§å“ï¼Œä»è€Œè¾¾åˆ°å˜ç°çš„ç›®çš„</p>
<p>å…³äºå¤§æ•°æ®ï¼š</p>
<ul>
<li>æ•°æ®æ¥æº <ul>
<li>äº¤æ˜“æ•°æ®ï¼šä¸šåŠ¡å¼€å±•å¿…é¡»è®°å½•çš„æ•°æ®ï¼Œæ¯”å¦‚åŸºé‡‘äº¤æ˜“æ•°æ®ï¼Œæ¯”å¦‚ç—…ä¾‹</li>
<li>è¡Œä¸ºæ•°æ®ï¼šæ—¥å¿—æ•°æ®ï¼Œè¿™æ˜¯æœ€å…³é”®çš„ç‚¹ï¼Œæ¯”å¦‚æ“ä½œä¹ æƒ¯ï¼Œä»€ä¹ˆæ—¶å€™å–œæ¬¢ä½¿ç”¨ï¼Œä»€ä¹ˆåœ°ç‚¹ï¼Œä¸€ä¸ªæ²¡æœ‰ç—…çš„äººæ¯å¤©å¹²ä»€ä¹ˆï¼Œä¸€ä¸ªæœ‰ç—…çš„äººæ¯å¤©å¹²ä»€ä¹ˆ</li>
</ul>
</li>
<li>å…¨é‡åŠ å·¥<ul>
<li>æ— æ³•é€šè¿‡é‡‡æ ·çš„æ–¹å¼æ¥è¾¾åˆ°ç›®çš„ï¼Œæ¯”å¦‚ç»Ÿè®¡ä½¿ç”¨è”é€šå¡çš„ç”¨æˆ·æ¯”ä¾‹ï¼Œé‡‡æŸå‡ ä¸ªç‰¹å¾åŒºåŸŸæ•°æ®ï¼Œç„¶ååŠ æƒåä½ å‘ç°æ”¾åˆ°å…¨å›½å¤§å·®ä¸å·®ï¼Œä½†æ˜¯è¡Œä¸ºæ•°æ®åƒå·®ä¸‡åˆ«ï¼Œå¹¶ä¸”å¯¹ç»†åˆ†äººç¾¤æ„ä¹‰é‡å¤§</li>
<li>åˆ†å¸ƒå¼çš„å¿…è¦æ€§</li>
</ul>
</li>
<li>è‡ªåŠ¨åŒ–åº”ç”¨<ul>
<li>ç›¸å¯¹äºæ´å¯Ÿåº”ç”¨è€Œè¨€ï¼Œå°†æ•°æ®æ€»ç»“ä¸ºæŠ¥è¡¨ï¼Œç„¶åå†³ç­–äººå‘˜æ ¹æ®æ•°æ®è¿›è¡Œå†³ç­–ï¼Œæ¯”å¦‚è´¢åŠ¡æŠ¥è¡¨å’Œè¿è¥æŠ¥è¡¨ï¼Œæœ¬è´¨æ˜¯æ•°æ®åˆ°äººå†åˆ°äººçš„å†³ç­–ï¼Œæ•°æ®åˆ°æœºå™¨ç„¶ååˆ°æœºå™¨è‡ªåŠ¨å†³ç­–ï¼Œè¿™æ˜¯è‡ªåŠ¨åŒ–åº”ç”¨</li>
<li>æ¯”å¦‚å¹¿å‘Šç³»ç»Ÿå’Œå¾ä¿¡ç³»ç»Ÿå’Œè‡ªåŠ¨è¡¥è´§ç³»ç»Ÿï¼Œåœ¨äººè¿›è¡Œæµè§ˆçš„æ—¶å€™å¹¿å‘Šç­–ç•¥å°±ä¼šè‡ªåŠ¨è°ƒæ•´</li>
</ul>
</li>
</ul>
<p>å…·å¤‡äº†ä¸Šè¾¹çš„ç‰¹ç‚¹æ‰æ˜¯ä¸€ä¸ªå…¸å‹çš„å¤§æ•°æ®é—®é¢˜</p>
<h3 id="è½åœ°"><a href="#è½åœ°" class="headerlink" title="è½åœ°"></a>è½åœ°</h3><p>å…·ä½“åˆ°è½åœ°çš„æ—¶å€™ï¼Œéœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ul>
<li>æ”¶é›†</li>
<li>æ•°æ®è½¬åŒ–ä¸ºä¿¡æ¯</li>
<li>æŒ–æ˜</li>
<li>å˜ç°</li>
</ul>
<h3 id="æ€»ä½“æ€è·¯"><a href="#æ€»ä½“æ€è·¯" class="headerlink" title="æ€»ä½“æ€è·¯"></a>æ€»ä½“æ€è·¯</h3><p>ç›®çš„ï¼šæ•°æ®å’Œæµé‡æˆ–è€…IPå˜ç°</p>
<ul>
<li>æµé‡å˜ç°ï¼šæ­£å¸¸å†…å®¹å¤¹å¸¦ä»˜è´¹å†…å®¹æˆ–è€…å¯è½¬åŒ–çš„å†…å®¹</li>
<li>æ•°æ®å˜ç°ï¼šæ ¹æ®ç”¨æˆ·åå¥½æˆ–è€…å«ç”»åƒæé«˜ä»˜è´¹å†…å®¹æˆ–è€…æ¸ é“çš„æŠ•æ”¾æˆ–è€…è¯´ç”±äºæ•°æ®çš„å­˜åœ¨ï¼Œæµé‡çš„å•ä½å˜ç°èƒ½åŠ›å˜å¼º</li>
<li>å“ç‰Œå˜ç°ï¼šåˆ©ç”¨ç†Ÿæ‚‰çš„å½¢è±¡æé«˜å…³æ³¨åº¦å’Œæ¥å—åº¦ï¼Œå¢åŠ è½¬åŒ–ç‡ï¼Œå»¶ä¼¸åˆ©ç”¨ç†Ÿæ‚‰å“ç‰Œè¿›è¡Œå†è¥é”€</li>
</ul>
<p>ä¸¾ä¾‹1ï¼šå¹¿å‘Šä½å®šä»·1ä¸‡ï¼Œè¿™æ˜¯æµé‡å˜ç°ï¼Œç°åœ¨æˆ‘ä»¬åˆ©ç”¨æ•°æ®ä¸€ä¸ªå¹¿å‘Šä½ä¸€åˆ†ä¸ºäºŒï¼Œä¸Šè¾¹å–å‰ƒé¡»åˆ€ä¸‹è¾¹å–æŠ¤è‚¤å“ï¼Œæ¯ä¸ªå¹¿å‘Šä½å–6åƒï¼Œå¤šå–2åƒï¼Œå¤šçš„æ”¶å…¥ä¾¿æ˜¯æ•°æ®æ”¶å…¥ã€‚å¤§å®¶åŒèµ¢<br>ä¸¾ä¾‹2:ç½‘çº¢ï¼Œè‡ªåª’ä½“</p>
<p>åŸåˆ™ï¼š</p>
<ul>
<li>æ•°æ®ä¼˜äºç»éªŒ</li>
<li>è‡ªåŠ¨å…ˆäºäººå·¥</li>
</ul>
<h3 id="è¡Œä¸ºæ•°æ®å…·ä½“"><a href="#è¡Œä¸ºæ•°æ®å…·ä½“" class="headerlink" title="è¡Œä¸ºæ•°æ®å…·ä½“"></a>è¡Œä¸ºæ•°æ®å…·ä½“</h3><ul>
<li>å±å¹•æ‹–åŠ¨å¿«æ…¢</li>
<li>gg</li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å›¾ç‰‡å‹ç¼©å·¥å…·ImageOptimåœ¨gitçš„é›†æˆ]]></title>
      <url>/2017/10/23/2018/%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9%E5%B7%A5%E5%85%B7ImageOptim%E5%9C%A8git%E7%9A%84%E9%9B%86%E6%88%90/</url>
      <content type="html"><![CDATA[<p>è¿‡ç¨‹æ˜¯çœ‹çœ‹æœ‰æ²¡æœ‰è£…è¿™ä¸ªè½¯ä»¶ï¼Œå¦‚æœæ²¡æœ‰è£…å°±å…ˆä¸‹è½½å†è£…ä¸Šï¼Œç„¶åå¼€å§‹è¿›è¡Œæ£€ç´¢æ‰€æœ‰çš„å›¾ç‰‡ï¼Œç„¶åæŠŠå›¾ç‰‡ä¼ å…¥è¿™ä¸ªè½¯ä»¶ï¼Œæ‰“å¼€è¿›è¡Œå‹ç¼©</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/env python</div><div class="line">#coding:utf-8</div><div class="line"></div><div class="line">import sys,os,time,shutil</div><div class="line">import urllib </div><div class="line">import urllib2</div><div class="line">import zipfile</div><div class="line">import tarfile</div><div class="line"></div><div class="line">def un_tar(file_name):</div><div class="line">    tar = tarfile.open(file_name)</div><div class="line">    names = tar.getnames()</div><div class="line">    if os.path.isdir(file_name + &quot;_files&quot;):</div><div class="line">        pass</div><div class="line">    else:</div><div class="line">        os.mkdir(file_name + &quot;_files&quot;)</div><div class="line">    #å› ä¸ºè§£å‹åæ˜¯å¾ˆå¤šæ–‡ä»¶ï¼Œé¢„å…ˆå»ºç«‹åŒåç›®å½•</div><div class="line">    for name in names:</div><div class="line">        tar.extract(name, file_name + &quot;_files/&quot;)</div><div class="line">    tar.close()</div><div class="line"></div><div class="line">if os.path.exists(&apos;/Applications/ImageOptim.app&apos;) == False:</div><div class="line">   print &apos;ä¸‹è½½&apos;	</div><div class="line">   un_tar(&apos;ImageOptim.tar&apos;)</div><div class="line">   shutil.copytree(&apos;ImageOptim.tar_files/ImageOptim.app&apos;,&apos;/Applications/ImageOptim.app&apos;)</div><div class="line"></div><div class="line">text = os.popen(&apos;find . -name *.png&apos;).read()</div><div class="line">images = text.split(&apos;\n&apos;)</div><div class="line"></div><div class="line">imagepaths = &apos;&apos;</div><div class="line"></div><div class="line">for x in xrange(1,200):</div><div class="line">    image = images[x]</div><div class="line">    if chr(32) in image:</div><div class="line">       print &apos;è¯¥æ–‡ä»¶ä¸å¯ç”¨ï¼Œè¯·å»é™¤æ–‡ä»¶åå­—çš„ç©ºæ ¼&apos; + image	</div><div class="line">       continue</div><div class="line"></div><div class="line">    imagepaths = imagepaths + &apos; &apos; + image</div><div class="line"></div><div class="line">os.system(&apos;open -a ImageOptim &apos; + imagepaths)</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> å·¥å…· </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSå®‰å…¨--ç¬¦å·è¡¨]]></title>
      <url>/2017/10/20/2017/iOS%E5%AE%89%E5%85%A8-%E7%AC%A6%E5%8F%B7%E8%A1%A8/</url>
      <content type="html"><![CDATA[<p>ç¬¦å·è¡¨ä¸­æœ‰äº›ç¬¦å·æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯å¾ˆå¤šç¬¦å·éƒ½æ˜¯å»æ‰çš„ã€‚</p>
<p>å…ˆæ¥çœ‹ä¸€ä¸ªæ­£å¸¸çš„äºŒè¿›åˆ¶æ–‡ä»¶çš„ç¬¦å·è¡¨ï¼š</p>
<p>IOSå®‰å…¨â€“ä½¿ç”¨stripä»ç¬¦å·è¡¨ä¸­å»æ‰ä¸éœ€è¦çš„ç¬¦å·</p>
<p>ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¾ˆå¤šæš´éœ²çš„ç±»åã€å‡½æ•°åç­‰ï¼Œè¿™è®©æ”»å‡»è€…å¾ˆå®¹æ˜“çœ‹å‡ºä½ çš„ç¨‹åºä¸­æœ‰å“ªäº›å…³é”®çš„é€»è¾‘ã€‚ä½†æ˜¯æˆ‘ä»¬å¯¹è¯¥æ–‡ä»¶stripåï¼Œå†æ¥çœ‹å®ƒçš„ç¬¦å·è¡¨ï¼š</p>
<p><code>strip JDMobile</code></p>
<p>IOSå®‰å…¨â€“ä½¿ç”¨stripä»ç¬¦å·è¡¨ä¸­å»æ‰ä¸éœ€è¦çš„ç¬¦å·</p>
<p>è¿™æ—¶æˆ‘ä»¬çœ‹åˆ°ç¨‹åºä¸­å®šä¹‰çš„å‡½æ•°åœ¨ç¬¦å·è¡¨ä¸­éƒ½æ²¡æœ‰äº†ã€‚</p>
<p>è€Œä¸”è¿™æ ·åœ¨åæ±‡ç¼–çš„ä»£ç ä¸­ä¹Ÿä¸ä¼šå­˜åœ¨ç¬¦å·ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iosç¼–è¯‘è¿‡ç¨‹]]></title>
      <url>/2017/10/20/2017/ios%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/</url>
      <content type="html"><![CDATA[<p>çœ‹ä¸€ä¸‹iosé¡¹ç›®çš„å½’æ¡£æ„å»ºæµç¨‹:</p>
<ul>
<li><p>å‡†å¤‡æ„å»ºç¯å¢ƒï¼Œæ„å»ºç›®å½•</p>
</li>
<li><p>ç¼–è¯‘ä¸»å·¥ç¨‹ä¾èµ–çš„Podså·¥ç¨‹çš„é™æ€åº“æˆ–è€…Framework (=== BUILD TARGET Aspects OF PROJECT Pods WITH CONFIGURATION Debug ===)</p>
</li>
<li><p>ç¼–è¯‘ä¸»å·¥ç¨‹çš„æºä»£ç æ–‡ä»¶ (CompileC)</p>
</li>
<li><p>é“¾æ¥ç”Ÿæˆä¸»å·¥ç¨‹å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ (Ld)</p>
</li>
<li><p>æ‹·è´å›¾ç‰‡ï¼Œlocalizedå­—ç¬¦ä¸²ç­‰èµ„æºæ–‡ä»¶ (CpResource)</p>
</li>
<li><p>ç¼–è¯‘storyboardæ–‡ä»¶ (CompileStoryboard)</p>
</li>
<li><p>CompileAssetCatalog</p>
</li>
<li><p>å¤„ç†pinfo.listæ–‡ä»¶ (ProcessInfoPlistFile)</p>
</li>
<li><p>ç”Ÿæˆç¬¦å·è¡¨æ–‡ä»¶(GenerateDSYMFile)</p>
</li>
<li><p>é“¾æ¥StoryBoard(LinkStoryboards)</p>
</li>
<li><p>æ‰§è¡Œé…ç½®çš„è„šæœ¬æ–‡ä»¶(PhaseScriptExecution)</p>
</li>
<li><p>æ‰“åŒ…ç”Ÿæˆappæ–‡ä»¶ï¼Œä¸æ˜¯ipaæ–‡ä»¶(ProcessProductPackaging)</p>
</li>
<li><p>ç­¾å (CodeSign)</p>
</li>
<li><p>æ ¡éªŒ (Validate)</p>
</li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ipaè‡ªåŠ¨åˆ›å»ºä¸Šä¼ åŠŸèƒ½æ„å»º]]></title>
      <url>/2017/10/16/2017/ipa%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%E4%B8%8A%E4%BC%A0%E5%8A%9F%E8%83%BD%E6%9E%84%E5%BB%BA/</url>
      <content type="html"><![CDATA[<p>æˆ‘ä»¬å…¶å®æ˜¯å¯¹Application LoaderåŠŸèƒ½è¿›è¡Œè„šæœ¬åŒ–<br><a id="more"></a></p>
<ul>
<li><p>åšä¸€ä¸ªè½¯é“¾é¦–å…ˆ<code>ln -s /Applications/Xcode.app/Contents/Applications/Application\ Loader.app/Contents/Frameworks/ITunesSoftwareService.framework/Versions/A/Support/altool /usr/local/bin/altool</code></p>
</li>
<li><p>å¢åŠ å…³è”é¡¹ç›®<code>ln -s /Applications/Xcode.app/Contents/Applications/Application\ Loader.app/Contents/itms /usr/local/itms</code></p>
</li>
<li><p>æ‰“åŒ…è„šæœ¬<code>xcodebuild -workspace JDFinance.xcworkspace -scheme JDMobile -configuration Beta build</code></p>
</li>
<li><p>æ‰“åŒ…è„šæœ¬<code>xcodebuild archive -workspace JDFinance.xcworkspace -scheme JDMobile -configuration Beta -archivePath JDMobile.xcarchive</code></p>
</li>
<li><p><code>altool -v -f JDMobile.ipa -u xxxxxxxx@126.com -p xxxxxx -t ios</code>æ£€éªŒæ˜¯å¦å¯ä»¥è¿›è¡Œä¸Šä¼ </p>
</li>
<li><p><code>altool --upload-app -f JDMobile.ipa -u xxxxxxxx@126.com -p xxxxxxxx -t ios</code>ä¸Šä¼ </p>
</li>
</ul>
<p><code>ERROR ITMS-90535: &quot;Unexpected CFBundleExecutable Key. The bundle at &#39;Payload/JDMobile.app/CBPResource.bundle&#39; does not contain a bundle executable. If this bundle intentionally does not contain an executable, consider removing the CFBundleExecutable key</code>å‡ºç°è¿™ä¸ªé”™è¯¯çš„æ—¶å€™åˆ é™¤è¿™ä¸ªkeyå°±å¥½</p>
<p><code>ERROR ITMS-90207: &quot;Invalid Bundle. The bundle at &#39;JDMobile.app&#39; does not contain a bundle executable.&quot;</code>å‡ºç°è¿™ä¸ªé”™è¯¯çš„æ—¶å€™çœ‹çœ‹é‡Œè¾¹æ˜¯ä¸æ˜¯å­˜åœ¨ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå½“ç„¶å¦‚æœä½ ç¼–è¯‘ä¸€ä¸ªbundleæ˜¯å®Œå…¨å¯èƒ½çš„ï¼Œè¿™ä¸ªæ—¶å€™ä½ å°±è¦å…ˆæ‰‹åŠ¨ç¼–è¯‘ï¼Œç„¶ååˆ é™¤å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç„¶ååœ¨æ‰‹åŠ¨åŠ å…¥è¿›å»å°±å¥½äº†</p>
<p>ç­¾åå¤±è´¥ï¼Œcodesigné‚£ä¹ˆçœ‹ä¸€çœ‹ä½ çš„è¯ä¹¦æ˜¯ä¸æ˜¯åœ¨é’¥åŒ™ä¸²é‡Œè¾¹ï¼Œè¦åšçš„å°±æ˜¯æŠŠå®ƒå¼„åˆ°ç³»ç»Ÿé‡Œè¾¹</p>
]]></content>
      
        
        <tags>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[hexoå¤šç«¯åŒæ­¥é”™è¯¯è§£å†³æ–¹æ¡ˆ]]></title>
      <url>/2017/10/11/2017/hexo%E5%A4%9A%E7%AB%AF%E5%90%8C%E6%AD%A5%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      <content type="html"><![CDATA[<p><code>hexo d</code>è¿™ä¸ªå‘½ä»¤æ˜¯ç›¸å½“äºç›´æ¥<code>git push</code>ï¼Œå¦‚æœåªæœ‰ä¸€å°æœºå™¨é‚£ä¹ˆæ˜¯æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœæ˜¯ä¸¤å°æœºå™¨ï¼Œé‚£ä¹ˆè¿˜å°‘ä¸€æ­¥<code>git pull</code>ï¼Œæ‰€ä»¥å¦‚æœæ˜¯ä¸¤å°æœºå™¨åŒæ—¶ç»´æŠ¤ä¸€ä¸ªåº“çš„æ—¶å€™éœ€è¦</p>
<ul>
<li>è¿›å…¥åˆ°<code>.deploy_git</code>è¿™ä¸ªç›®å½•ä¸‹</li>
<li>ç„¶åæ‰§è¡Œ<code>git pull origin master --allow-unrelated-histories</code></li>
<li>ç„¶åå†push</li>
<li>æ‰§è¡Œ<code>hexo d</code>å°±å¥½äº†</li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title></title>
      <url>/2017/10/11/2016/%E8%BD%AC-block%E8%BF%9B%E9%98%B61-block%E5%AE%9E%E7%8E%B0/</url>
      <content type="html"><![CDATA[<hr>
<p>title: (è½¬)blockè¿›é˜¶1â€“blockå®ç°<br>date: 2016-06-29 14:15:20<br>tags:</p>
<ul>
<li>iOSåŸºç¡€<br>categories: iOS</li>
</ul>
<hr>
<p>æœ¬ç³»åˆ—åšæ–‡æ€»ç»“è‡ªã€ŠPro Multithreading and Memory Management for iOS and OS X with ARCã€‹</p>
<a id="more"></a>
<p>block é¡¾åæ€ä¹‰å°±æ˜¯ä»£ç å—ï¼Œå°†åŒä¸€é€»è¾‘çš„ä»£ç æ”¾åœ¨ä¸€ä¸ªå—ï¼Œä½¿ä»£ç æ›´ç®€æ´ç´§å‡‘ï¼Œæ˜“äºé˜…è¯»ï¼Œè€Œä¸”å®ƒæ¯”å‡½æ•°ä½¿ç”¨æ›´æ–¹ä¾¿ï¼Œä»£ç æ›´ç¾è§‚ï¼Œå› è€Œå¹¿å—å¼€å‘è€…æ¬¢è¿ã€‚ä½†åŒæ—¶ block ä¹Ÿæ˜¯ iOS å¼€å‘ä¸­å‘æœ€å¤šçš„åœ°æ–¹ä¹‹ä¸€ï¼Œå› æ­¤æœ‰å¿…è¦äº†è§£ä¸‹ block çš„å®ç°åŸç†ï¼ŒçŸ¥å…¶ç„¶ï¼Œæ›´çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œæ‰èƒ½ä»æ ¹æœ¬ä¸Šé¿å…æŒ–å‘å’Œè¸©å‘ã€‚</p>
<p>éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œblock åªæ˜¯ Objective-C å¯¹é—­åŒ…çš„å®ç°ï¼Œå¹¶ä¸æ˜¯ iOS ç‹¬æœ‰çš„æ¦‚å¿µï¼Œåœ¨ C++ã€Java ç­‰è¯­è¨€ä¹Ÿæœ‰å®ç°é—­åŒ…ï¼Œåç§°ä¸åŒè€Œå·²ã€‚</p>
<blockquote>
<p>ä»¥ä¸‹ç ”ç©¶æ‰€ç”¨çš„è¿‡ç¨‹ä»£ç ç”± clang ç¼–è¯‘å‰ç«¯ç”Ÿæˆï¼Œä»…ä½œç†è§£ä¹‹ç”¨ã€‚å®é™…ä¸Š clang æ ¹æœ¬ä¸ä¼šå°† block è½¬æ¢æˆäººç±»å¯è¯»çš„ä»£ç ï¼Œå®ƒå¯¹ block åˆ°åº•åšäº†ä»€ä¹ˆï¼Œè°ä¹Ÿä¸çŸ¥é“ã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œåˆ‡å‹¿å°†è¿‡ç¨‹ä»£ç å½“åšblockçš„å®é™…å®ç°ï¼Œåˆ‡è®°åˆ‡è®°ï¼ï¼ï¼</p>
<p>å°†ä¸‹é¢çš„ <code>test.m</code> ä»£ç ç”¨ clang å·¥å…·ç¿»è¯‘ <code>test.cpp</code> ä»£ç </p>
<blockquote>
<p>clang -rewrite-objc test.m</p>
</blockquote>
<p><code>test.m ä»£ç </code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/************* Objective-C æºç  *************/</div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    void (^blk)(void) = ^&#123; printf(&quot;Block\n&quot;); &#125;; </div><div class="line">    blk();</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>test.cpp</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">/************* ä½¿ç”¨ clang ç¿»è¯‘åå¦‚ä¸‹ *************/</div><div class="line">struct __block_impl</div><div class="line">&#123;</div><div class="line">    void *isa;</div><div class="line">    int Flags;</div><div class="line">    int Reserved;</div><div class="line">    void *FuncPtr;</div><div class="line">&#125;;</div><div class="line">struct __main_block_impl_0</div><div class="line">&#123;</div><div class="line">    struct __block_impl impl;</div><div class="line">    struct __main_block_desc_0* Desc;</div><div class="line">    __main_block_impl_0(void *fp, struct __main_block_desc_0 *desc, int flags=0)</div><div class="line">    &#123;</div><div class="line">        impl.isa = &amp;_NSConcreteStackBlock;</div><div class="line">        impl.Flags = flags;</div><div class="line">        impl.FuncPtr = fp;</div><div class="line">        Desc = desc;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">static void __main_block_func_0(struct __main_block_impl_0 *__cself)</div><div class="line">&#123;</div><div class="line">    printf(&quot;Block\n&quot;);</div><div class="line">&#125;</div><div class="line">static struct __main_block_desc_0</div><div class="line">&#123;</div><div class="line">    size_t reserved;</div><div class="line">    size_t Block_size;</div><div class="line">&#125; __main_block_desc_0_DATA = &#123; 0, sizeof(struct __main_block_impl_0) &#125;;</div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    void (*blk)(void) = (void (*)())&amp;__main_block_impl_0((void *)__main_block_func_0, &amp;__main_block_desc_0_DATA);</div><div class="line">    ((void (*)(__block_impl *))((__block_impl *)blk)-&gt;FuncPtr)((__block_impl *)blk);</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æ¥ç€ï¼Œæˆ‘ä»¬é€ä¸€æ¥çœ‹ä¸‹è¿™äº›å‡½æ•°å’Œç»“æ„ä½“</p>
<h2 id="block-ç»“æ„ä½“ä¿¡æ¯è¯¦è§£"><a href="#block-ç»“æ„ä½“ä¿¡æ¯è¯¦è§£" class="headerlink" title="block ç»“æ„ä½“ä¿¡æ¯è¯¦è§£"></a>block ç»“æ„ä½“ä¿¡æ¯è¯¦è§£</h2><h3 id="struct-block-impl"><a href="#struct-block-impl" class="headerlink" title="struct __block_impl"></a>struct __block_impl</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// __block_impl æ˜¯ block å®ç°çš„ç»“æ„ä½“</div><div class="line">struct __block_impl</div><div class="line">&#123;</div><div class="line">    void *isa;</div><div class="line">    int Flags;</div><div class="line">    int Reserved;</div><div class="line">    void *FuncPtr;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li><p><code>isa</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">impl.isa = &amp;_NSConcreteStackBlock; </div><div class="line">impl.isa = &amp;_NSConcreteMallocBlock; </div><div class="line">impl.isa = &amp;_NSConcreteGlobalBlock;</div></pre></td></tr></table></figure>
</li>
<li><p>Flags<br>æŒ‰ä½æ‰¿è½½ block çš„é™„åŠ ä¿¡æ¯ï¼›</p>
</li>
<li><p>Reserved<br>ä¿ç•™å˜é‡ï¼›</p>
</li>
<li><p>FuncPtr<br>å‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘ Block è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œå³{ printf(â€œBlock\nâ€) };</p>
</li>
</ul>
<h3 id="struct-main-block-impl-0"><a href="#struct-main-block-impl-0" class="headerlink" title="struct __main_block_impl_0"></a>struct __main_block_impl_0</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// __main_block_impl_0 æ˜¯ block å®ç°çš„ç»“æ„ä½“ï¼Œä¹Ÿæ˜¯ block å®ç°çš„å…¥å£</div><div class="line">struct __main_block_impl_0</div><div class="line">&#123;</div><div class="line">    struct __block_impl impl;</div><div class="line">    struct __main_block_desc_0* Desc;</div><div class="line">    __main_block_impl_0(void *fp, struct __main_block_desc_0 *desc, int flags=0)</div><div class="line">    &#123;</div><div class="line">        impl.isa = &amp;_NSConcreteStackBlock;</div><div class="line">        impl.Flags = flags;</div><div class="line">        impl.FuncPtr = fp;</div><div class="line">        Desc = desc;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li><p>impl<br>block å®ç°çš„ç»“æ„ä½“å˜é‡ï¼Œè¯¥ç»“æ„ä½“å‰é¢å·²è¯´æ˜ï¼›</p>
</li>
<li><p>Desc<br>æè¿° block çš„ç»“æ„ä½“å˜é‡ï¼›</p>
</li>
<li><p>__main_block_impl_0<br>ç»“æ„ä½“çš„æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–ç»“æ„ä½“å˜é‡ implã€Descï¼›</p>
</li>
</ul>
<h3 id="static-void-main-block-func-0"><a href="#static-void-main-block-func-0" class="headerlink" title="static void __main_block_func_0"></a>static void __main_block_func_0</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// __main_block_func_0 æ˜¯ block è¦æœ€ç»ˆè¦æ‰§è¡Œçš„å‡½æ•°ä»£ç </div><div class="line">static void __main_block_func_0(struct __main_block_impl_0 *__cself)</div><div class="line">&#123;</div><div class="line">    printf(&quot;Block\n&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="static-struct-main-block-desc-0"><a href="#static-struct-main-block-desc-0" class="headerlink" title="static struct __main_block_desc_0"></a>static struct __main_block_desc_0</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// __main_block_desc_0 æ˜¯ block çš„æè¿°ä¿¡æ¯ç»“æ„ä½“</div><div class="line">static struct __main_block_desc_0</div><div class="line">&#123;</div><div class="line">    size_t reserved;</div><div class="line">    size_t Block_size;</div><div class="line">&#125; __main_block_desc_0_DATA = &#123; 0, sizeof(struct __main_block_impl_0) &#125;;</div></pre></td></tr></table></figure>
<ul>
<li><p>reserved<br>ç»“æ„ä½“ä¿¡æ¯ä¿ç•™å­—æ®µ</p>
</li>
<li><p>Block_size<br>ç»“æ„ä½“å¤§å°</p>
</li>
</ul>
<p>æ­¤å¤„å·²å®šä¹‰äº†ä¸€ä¸ªè¯¥ç»“æ„ä½“ç±»å‹çš„å˜é‡ __main_block_desc_0_DATA</p>
<blockquote>
<p><img src="http://i4.piimg.com/567571/75ff5f7241b14097.png" alt="blockæ‰§è¡Œè¿‡ç¨‹"></p>
</blockquote>
<p>æ¥ç€å†çœ‹ block è·å–å¤–éƒ¨å˜é‡</p>
<h2 id="block-è·å–å¤–éƒ¨å˜é‡"><a href="#block-è·å–å¤–éƒ¨å˜é‡" class="headerlink" title="block è·å–å¤–éƒ¨å˜é‡"></a>block è·å–å¤–éƒ¨å˜é‡</h2><p>è¿è¡Œä¸‹é¢çš„ä»£ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    int intValue = 1;</div><div class="line">    void (^blk)(void) = ^&#123; printf(&quot;intValue = %d\n&quot;, intValue); &#125;;</div><div class="line">    blk();</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æ‰“å°ç»“æœ</p>
<p>intValue = 1<br>å’Œç¬¬ä¸€æ®µæºç ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œå¤šäº†ä¸ªå±€éƒ¨å˜é‡ intValueï¼Œè€Œä¸”è¿˜åœ¨ block é‡Œé¢è·å–åˆ°äº†ã€‚</p>
<p>é€šè¿‡å‰ä¸€æ®µå¯¹ block æºç çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»äº†è§£åˆ° block çš„å‡½æ•°å®šä¹‰åœ¨ main() å‡½æ•°ä¹‹å¤–ï¼Œé‚£å®ƒåˆæ˜¯å¦‚ä½•è·å– main() é‡Œé¢çš„å±€éƒ¨å˜é‡å‘¢ï¼Ÿä¸ºäº†è§£å¼€ç–‘æƒ‘ï¼Œæˆ‘ä»¬å†æ¬¡ç”¨ clang é‡å†™è¿™æ®µä»£ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">struct __block_impl</div><div class="line">&#123;</div><div class="line">    void *isa;</div><div class="line">    int Flags;</div><div class="line">    int Reserved;</div><div class="line">    void *FuncPtr;</div><div class="line">&#125;;</div><div class="line">struct __main_block_impl_0</div><div class="line">&#123;</div><div class="line">    struct __block_impl impl;</div><div class="line">    struct __main_block_desc_0* Desc;</div><div class="line">    int intValue;</div><div class="line">    __main_block_impl_0(void *fp, struct __main_block_desc_0 *desc, int _intValue, int flags=0) : intValue(_intValue)</div><div class="line">    &#123;</div><div class="line">        impl.isa = &amp;_NSConcreteStackBlock;</div><div class="line">        impl.Flags = flags;</div><div class="line">        impl.FuncPtr = fp;</div><div class="line">        Desc = desc;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">static void __main_block_func_0(struct __main_block_impl_0 *__cself)</div><div class="line">&#123;</div><div class="line">    int intValue = __cself-&gt;intValue; // bound by copy</div><div class="line">    printf(&quot;intValue = %d\n&quot;, intValue);</div><div class="line">&#125;</div><div class="line">static struct __main_block_desc_0</div><div class="line">&#123;</div><div class="line">    size_t reserved;</div><div class="line">    size_t Block_size;</div><div class="line">&#125; __main_block_desc_0_DATA = &#123; 0, sizeof(struct __main_block_impl_0)&#125;;</div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    int intValue = 1;</div><div class="line">    void (*blk)(void) = (void (*)())&amp;__main_block_impl_0((void *)__main_block_func_0, &amp;__main_block_desc_0_DATA, intValue);</div><div class="line">    ((void (*)(__block_impl *))((__block_impl *)blk)-&gt;FuncPtr)((__block_impl *)blk);</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>åŸæ¥ block é€šè¿‡å‚æ•°å€¼ä¼ é€’è·å–åˆ° intValue å˜é‡ï¼Œé€šè¿‡å‡½æ•°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">__main_block_impl_0 (void *fp, struct __main_block_desc_0 *desc, int _intValue, int flags=0) : intValue(_intValue)</div><div class="line">ä¿å­˜åˆ° __main_block_impl_0 ç»“æ„ä½“çš„åŒåå˜é‡ intValueï¼Œé€šè¿‡ä»£ç  int intValue = __cself-&gt;intValue; å–å‡º intValueï¼Œæ‰“å°å‡ºæ¥ã€‚</div><div class="line"></div><div class="line">æ„é€ å‡½æ•° __main_block_impl_0 å†’å·åçš„è¡¨è¾¾å¼ intValue(_intValue) çš„æ„æ€æ˜¯ï¼Œç”¨ _intValue åˆå§‹åŒ–ç»“æ„ä½“æˆå‘˜å˜é‡ intValueã€‚</div></pre></td></tr></table></figure></p>
<p>æœ‰å››ç§æƒ…å†µä¸‹åº”è¯¥ä½¿ç”¨åˆå§‹åŒ–è¡¨è¾¾å¼æ¥åˆå§‹åŒ–æˆå‘˜ï¼š<br>1ï¼šåˆå§‹åŒ–constæˆå‘˜<br>2ï¼šåˆå§‹åŒ–å¼•ç”¨æˆå‘˜<br>3ï¼šå½“è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°ï¼Œè€Œå®ƒæ‹¥æœ‰ä¸€ç»„å‚æ•°æ—¶<br>4ï¼šå½“è°ƒç”¨æˆå‘˜ç±»çš„æ„é€ å‡½æ•°ï¼Œè€Œå®ƒæ‹¥æœ‰ä¸€ç»„å‚æ•°æ—¶</p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†block çš„å®ç°ï¼Œä»¥åŠè·å–å¤–éƒ¨å˜é‡çš„åŸç†ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬è¿˜ä¸èƒ½åœ¨ block å†…ä¿®æ”¹ intValue å˜é‡ã€‚å¦‚æœä½ æœ‰å¿ƒè¯•ä¸‹ï¼Œåœ¨ block å†…éƒ¨ä¿®æ”¹ intValue çš„å€¼ï¼Œä¼šæŠ¥ç¼–è¯‘é”™è¯¯</p>
<p>Variable is not assignable(missing __block type specifier)</p>
]]></content>
      
        
    </entry>
    
    <entry>
      <title><![CDATA[pythonå­¦ä¹ ç¯å¢ƒæ­å»º-jupyter notebook]]></title>
      <url>/2017/10/11/2018/python%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-jupyter-notebook/</url>
      <content type="html"><![CDATA[<h3 id="å…ˆè¯´ä¸€ä¸‹å¥½å¤„ï¼š"><a href="#å…ˆè¯´ä¸€ä¸‹å¥½å¤„ï¼š" class="headerlink" title="å…ˆè¯´ä¸€ä¸‹å¥½å¤„ï¼š"></a>å…ˆè¯´ä¸€ä¸‹å¥½å¤„ï¼š</h3><p>æˆ‘ä»¬å­¦ä¹ pythonå¯ä»¥åœ¨å‘½ä»¤è¡Œè¾“å…¥pythonç›´æ¥è¿›å…¥pythonç¯å¢ƒè¿›è¡Œç»ƒä¹ ï¼Œä½†æ˜¯é—®é¢˜æ˜¯å¤šè¡Œè¿è¡Œæ¯”è¾ƒç¹çï¼Œè¿™é‡Œæˆ‘ä»¬æ¨èä½¿ç”¨jupyteræ¥è¿è¡Œä»£ç </p>
<h3 id="å†è¯´ä¸€ä¸‹ç¯å¢ƒ-ï¼š"><a href="#å†è¯´ä¸€ä¸‹ç¯å¢ƒ-ï¼š" class="headerlink" title="å†è¯´ä¸€ä¸‹ç¯å¢ƒ ï¼š"></a>å†è¯´ä¸€ä¸‹ç¯å¢ƒ ï¼š</h3><p>MACå°å¼æœº</p>
<p>python:macä¸‹è‡ªå¸¦Python 2.7.10</p>
<ul>
<li><p>1.å…ˆå‡çº§äº†pipå®‰è£…å·¥å…·ï¼šsudo python -m pip install â€“upgrade â€“force pip</p>
</li>
<li><p>2.å®‰è£…setuptools å·¥å…·ï¼šsudo pip install setuptools==33.1.1</p>
</li>
<li><p>3.å®‰è£… Python-dateutil:sudo pip install python-dateutil==2.2</p>
</li>
<li><p>4.å®‰è£…six:sudo pip install â€“ignore-installed six</p>
</li>
<li><p>5.å®‰è£…jupyterï¼šsudo install jupyter</p>
</li>
</ul>
<p>å¯åŠ¨å‘½ä»¤ï¼šç›´æ¥åœ¨ç»ˆç«¯è¾“å…¥jupyter notebook</p>
<p>æŠ˜è…¾äº†åŠå¤©ï¼Œæ‰æå¥½ï¼Œä»¥ä¸Šå‘½ä»¤æ˜¯åœ¨å®‰è£…çš„æ—¶å€™é‡åˆ°å„ç§é—®é¢˜æ—¶ä½¿ç”¨çš„ï¼Œä¸‹é¢å†™è®°å½•ä¸€ä¸‹é‡åˆ°çš„é—®é¢˜ ä»¥åŠå¯¹åº”çš„è§£å†³åŠæ³•</p>
<p>1.ImportError: cannot import name _thread  æŠ¥è¿™ä¸ªé”™è¯¯ è§£å†³åŠæ³•ï¼š</p>
<p>sudo pip uninstall python-dateutil<br>sudo pip install python-dateutil==2.2<br>2.File â€œ/Library/Python/2.7/site-packages/dateutil/tz/_common.pyâ€, line 2, in <module></module></p>
<p>from six.moves import _thread<br>ImportError: cannot import name _thread</p>
<p>è§£å†³åŠæ³•ï¼šå®‰è£…six å‘½ä»¤å†ä¸Šæ–¹</p>
<p>è§£å†³äº†ä¸Šé¢çš„é—®é¢˜ å¯åŠ¨çš„æ—¶å€™ è¿˜æ˜¯ä¼šæŠ¥é”™è¿™æ˜¯ä¸ªé¡½å›ºçš„é”™è¯¯ï¼š</p>
<p>  File â€œ/Library/Python/2.7/site-packages/packaging/requirements.pyâ€, line 59, in <module></module></p>
<pre><code>MARKER_EXPR = originalTextFor(MARKER_EXPR())(&quot;marker&quot;)
</code></pre><p>TypeError: <strong>call</strong>() takes exactly 2 arguments (1 given)</p>
<p>è§£å†³åŠæ³•ï¼šæ ¹æ®é”™è¯¯ä¿¡æ¯ç›´æ¥æ‰¾åˆ°è·¯å¾„ä¸­çš„æ–‡ä»¶ï¼Œæ‰“å¼€æ–‡ä»¶å°† 59 è¡Œä¸­çš„å‡½æ•°ä¿®æ”¹</p>
<p>59ï¼š#MARKER_EXPR = originalTextFor(MARKER_EXPR())(â€œmarkerâ€)<br>60ï¼šMARKER_EXPR = originalTextFor(MARKER_EXPR(â€œmarkerâ€))</p>
<p>ä¿®æ”¹å¥½ä¹‹åç›´æ¥ä¿å­˜æ–‡ä»¶ å†æ¬¡è¿è¡Œjupyter notebook å‘½ä»¤ å³å¯å¯åŠ¨jupyter </p>
<p>å…³äºsixé‚£ä¸ªé—®é¢˜ï¼Œè¿˜æœ‰ä¸€ç‚¹ éœ€è¦åˆ é™¤æˆ‘ä»¬é»˜è®¤è·¯å¾„ä¸‹çš„six å¦åˆ™ å³ä½¿æ›´æ–°æˆåŠŸäº† ä¹Ÿä¸ä¼šä½¿ç”¨æœ€æ–°çš„six</p>
<p>æ–¹æ³•ï¼šå…ˆæŸ¥çœ‹ä¸€ä¸‹é»˜è®¤çš„sixè·¯å¾„</p>
<p> import six</p>
<h3 id="æœ€åè¯´ä¸€ä¸‹æ€ä¹ˆä½¿ç”¨"><a href="#æœ€åè¯´ä¸€ä¸‹æ€ä¹ˆä½¿ç”¨" class="headerlink" title="æœ€åè¯´ä¸€ä¸‹æ€ä¹ˆä½¿ç”¨"></a>æœ€åè¯´ä¸€ä¸‹æ€ä¹ˆä½¿ç”¨</h3><p>fileâ€“&gt;newâ€“&gt;python2</p>
]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[pythonå‘é€é‚®ä»¶ä»£ç è®°å½•]]></title>
      <url>/2017/10/10/2018/python%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/</url>
      <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/env python</div><div class="line">#coding:utf-8</div><div class="line"></div><div class="line">from email import encoders</div><div class="line">from email.header import Header</div><div class="line">from email.mime.text import MIMEText</div><div class="line">from email.mime.multipart import MIMEMultipart</div><div class="line">from email.mime.application import MIMEApplication</div><div class="line">from email.utils import parseaddr, formataddr</div><div class="line">import smtplib,os</div><div class="line"></div><div class="line">def _format_addr(s):</div><div class="line">    name, addr = parseaddr(s)</div><div class="line">    return formataddr(( \</div><div class="line">        Header(name, &apos;utf-8&apos;).encode(), \</div><div class="line">        addr.encode(&apos;utf-8&apos;) if isinstance(addr, unicode) else addr))</div><div class="line"></div><div class="line">def sendMail():</div><div class="line">    username = &apos;hanshenghui&apos;</div><div class="line">    password = &apos;11111111111&apos;</div><div class="line"></div><div class="line">    from_addr = &apos;hanshenghui@jd.com&apos;</div><div class="line">    to_addr = &apos;hanshenghui@jd.com&apos;</div><div class="line">    # to_addrList = [&apos;hanshenghui@jd.com&apos;,&apos;gaixutian@jd.com&apos;,&apos;wangzhenyang1@jd.com&apos;]</div><div class="line">    to_addrList = [&apos;hanshenghui@jd.com&apos;,&apos;wangxiugang@jd.com&apos;,&apos;dingchao1@jd.com&apos;]</div><div class="line">    smtp_server = &apos;smtp.jd.local&apos;</div><div class="line"></div><div class="line">    msg = MIMEMultipart()</div><div class="line">    part = MIMEText(&quot;è¿™æ˜¯ä¸€å°æµ‹è¯•é‚®ä»¶\n\nç°åœ¨ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå¾…ç¡®å®šç‚¹:\n1.æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹æ•°æ®è¿›è¡Œæå–ï¼Œåšä¸€äº›åˆ†æå’Œç®€ä»‹ä½œä¸ºé‚®ä»¶çš„æ­£æ–‡ï¼Œæˆ–è€…æ˜¯ä¸€äº›å…¶ä»–ä»€ä¹ˆå†…å®¹\n2.ç°åœ¨é‚®ç®±æˆ‘æ·»åŠ äº†åå­—ä¸ºJDJRMobileï¼Œå®é™…ä¸Šæ˜¯æˆ‘è‡ªå·±çš„é‚®ç®±ï¼Œç”¨å“ªä¸ªé‚®ç®±æ¥å‘é€æ¯”è¾ƒåˆé€‚\n3.æ£€æµ‹å“ªä¸ªåˆ†æ”¯\n4.æ£€æµ‹é¢‘ç‡\n\n&quot;)</div><div class="line">    msg.attach(part)</div><div class="line">    </div><div class="line">    basePath = os.environ[&apos;HOME&apos;]</div><div class="line">    reportPath = basePath + &apos;/Documents/Build/JDJRAPPAndroid/infer-out/report.csv&apos;</div><div class="line">    if os.path.exists(reportPath):    </div><div class="line">       part1 = MIMEApplication(open(reportPath,&apos;rb&apos;).read())</div><div class="line">       part1.add_header(&apos;Content-Disposition&apos;, &apos;attachment&apos;, filename=&quot;report.csv&quot;)</div><div class="line">       msg.attach(part1)</div><div class="line"></div><div class="line">    # part2 = MIMEApplication(open(&apos;cesh.png&apos;,&apos;rb&apos;).read())</div><div class="line">    # part2.add_header(&apos;Content-Disposition&apos;, &apos;attachment&apos;, filename=&quot;cesh.png&quot;)</div><div class="line">    # msg.attach(part2)</div><div class="line"></div><div class="line">    msg[&apos;From&apos;] = _format_addr(u&apos;JDJRMobile &lt;%s&gt;&apos; % from_addr)</div><div class="line">    msg[&apos;To&apos;] = _format_addr(&apos;JDJR&apos;)</div><div class="line">    msg[&apos;Subject&apos;] = Header(u&apos;JDJRå®‰å“æºç æ£€æµ‹æŠ¥å‘Š&apos;, &apos;utf-8&apos;).encode()</div><div class="line"></div><div class="line">    server = smtplib.SMTP(smtp_server,25)</div><div class="line">    server.set_debuglevel(1)</div><div class="line">    server.sendmail(from_addr, to_addrList, msg.as_string())</div><div class="line">    server.quit()</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[xcodeå·¥ç¨‹åŠ å¯†æ€è·¯]]></title>
      <url>/2017/10/10/2018/xcode%E5%B7%A5%E7%A8%8B%E5%8A%A0%E5%AF%86%E6%80%9D%E8%B7%AF/</url>
      <content type="html"><![CDATA[<p>ç°åœ¨æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼Œå¦‚ä½•åšåˆ°å¦‚æœä¸å®‰è£…æˆ‘ä»¬çš„å¼€å‘ç¯å¢ƒï¼Œå°±æ— æ³•æŸ¥çœ‹iOSå·¥ç¨‹ã€‚<br>é¦–å…ˆæˆ‘ä»¬å¦‚æœå¯¹æ‰€æœ‰çš„ä»£ç è¿›è¡ŒåŠ å¯†è¿™è‚¯å®šæ˜¯ä¸€ä¸ªæµ©å¤§çš„å·¥ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©æ˜¯å¯¹projectåŠ å¯†ï¼Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">/usr/bin/env python</div><div class="line">#coding:utf-8</div><div class="line"></div><div class="line">from Crypto.Cipher import AES  </div><div class="line">from binascii import b2a_hex,a2b_hex  </div><div class="line">  </div><div class="line">class prpcrypt():   #å®šä¹‰ä¸€ä¸ªç±»  </div><div class="line">    def __init__(self,key):  </div><div class="line">        self.key=key  </div><div class="line">        self.mode=AES.MODE_CBC  </div><div class="line">    def encrypt(self,text):  </div><div class="line">        cryptor=AES.new(self.key,self.mode,self.key)  </div><div class="line">        x = len(text) % 16  </div><div class="line">        if x != 0:  </div><div class="line">            text = text + &apos;0&apos; * (16 - x)     #ä¸æ»¡16ï¼Œ32ï¼Œ64ä½è¡¥0  </div><div class="line">        self.ciphertext=cryptor.encrypt(text)  </div><div class="line">        return b2a_hex(self.ciphertext)  </div><div class="line">    def decrypt(self,text):  </div><div class="line">        cryptor=AES.new(self.key,self.mode,self.key)  </div><div class="line">        plain_text=cryptor.decrypt(a2b_hex(text))  </div><div class="line">        return plain_text.rstrip(&apos;\0&apos;)  </div><div class="line">  </div><div class="line">pc=prpcrypt(&apos;tecentbluewhaleA&apos;) #è‡ªå·±è®¾å®šçš„å¯†é’¥</div><div class="line"></div><div class="line">f = open(&apos;project.pbxproj&apos;,&apos;r&apos;)</div><div class="line">text = f.read()</div><div class="line">liens = text.split(&apos;\n&apos;)</div><div class="line"></div><div class="line">if len(liens) &gt; 10:</div><div class="line">    item = liens[10]</div><div class="line">    print item</div><div class="line">    # item = pc.decrypt(item)</div><div class="line">    item = pc.encrypt(item)</div><div class="line">    item = item.replace(&apos;000000000000000&apos;,&apos;&apos;)</div><div class="line">    print item</div><div class="line">    liens[10] = item</div><div class="line"></div><div class="line">for i in range(0,len(liens) - 1):</div><div class="line">    liens[i] = liens[i] + &apos;\n&apos;</div><div class="line"></div><div class="line">strings = &apos;&apos;.join(liens)</div><div class="line"></div><div class="line">f = open(&apos;project.pbxproj&apos;,&apos;w&apos;)</div><div class="line">f.writelines(strings)</div><div class="line">f.close()</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨åˆ°äº†pycryptoåº“ï¼Œå®‰è£…çš„æ—¶å€™éœ€è¦å…ˆå¸è½½<br><code>sudo pip uninstall crypto</code><br><code>sudo pip uninstall pycrypto</code></p>
<p>ç„¶å<br><code>sudo pip install pycrypto</code>è¿™æ ·å°±å®‰è£…å¥½äº†éœ€è¦çš„åº“</p>
<p>å…³äºæˆ‘ä»¬åŠ å¯†é‚£å“ªäº›ä¸œè¥¿ï¼Œå…¶å®ä¸»è¦æ˜¯projectæ–‡ä»¶é‡Œè¾¹çš„è§£ææ–‡ä»¶ï¼Œå°†ä¸€äº›å…³é”®æ˜¯è¢«ç¬¦å·è¿›è¡ŒåŠ å¯†ï¼Œå…¶å®å¦‚æœæŸ¥çœ‹gitæ“ä½œè®°å½•æ˜¯å¯ä»¥å‘ç°è¯¥å¦‚ä½•è¿˜åŸçš„ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦é å¤šè¡Œæ›¿æ¢æ¥å¢å¤§æ›¿æ¢çš„å·¥ä½œé‡æ¥äººä¸ºè®¾ç½®é—¨æ§›</p>
<p>å¦å¤–éœ€è¦é…åˆæ”¹è£…çš„gitï¼Œåœ¨commitçš„æ—¶å€™è¿›è¡ŒåŠ å¯†ç„¶åcommitï¼Œåœ¨pullçš„æ—¶å€™ä¹Ÿæ˜¯è§£å¯†ç„¶åcommitä¸€ä¸‹ï¼Œè¿™æ ·æˆ‘ä»¬å°±åšåˆ°äº†ï¼Œåœ¨è¿œç«¯åº“é‡Œè¾¹æ˜¯ä¸èƒ½è¢«ç›´æ¥æœ‰åºæŸ¥çœ‹çš„ä»£ç ï¼Œåœ¨æœ¬åœ°éœ€è¦é…åˆæˆ‘ä»¬çš„gitæ‰èƒ½è¢«é¡ºç•…çš„ä½¿ç”¨</p>
]]></content>
      
        
        <tags>
            
            <tag> å·¥å…· </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[xcodeå¤šç‰ˆæœ¬è‡ªåŠ¨åŒ–æ‰“åŒ…è®¾ç½®]]></title>
      <url>/2017/10/10/2018/xcode%E5%A4%9A%E7%89%88%E6%9C%AC%E8%87%AA%E5%8A%A8%E5%8C%96%E6%89%93%E5%8C%85%E8%AE%B0%E5%BD%95/</url>
      <content type="html"><![CDATA[<p>å¦‚æœä½ å‡çº§äº†xcodeä½†æ˜¯è¿™ä¸ªæ—¶å€™ä½ åˆæƒ³é™çº§å›å»ï¼Œä½ å‘ç°appstoreå·²ç»ä¸è¦æŒ‡æœ›äº†ï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½ä¸€ä¸ªä½ éœ€è¦ç‰ˆæœ¬çš„xcodeã€‚<br>ä¸‹è½½å„ä¸ªXcodeç‰ˆæœ¬çš„åœ°å€<code>https://developer.apple.com/download/more</code><br>ç„¶åæ”¾ç½®åˆ°æˆ‘ä»¬çš„ç¨‹åºç›®å½•ä¸‹ï¼Œæ”¹ä¸ªåå­—æ¯”å¦‚è¯´å«Xcode2<br>ä½†æ˜¯ç°åœ¨é—®é¢˜åˆæ¥äº†ï¼ŒåŠ å…¥ä½ æ˜¯ä¸ªæ‰“åŒ…æœåŠ¡å™¨ï¼Œä½ ä½¿ç”¨çš„æ˜¯xcodebuildæ¥æ‰“åŒ…çš„ï¼Œè¿™ä¸ªæ—¶å€™ä¸¤ä¸ªç‰ˆæœ¬çš„xcodeåŒæ—¶å­˜åœ¨ï¼Œå®ƒå¦‚ä½•é€‰æ‹©sdkè¿›è¡Œæ‰“åŒ…å‘¢ï¼Ÿ</p>
<ul>
<li>é¦–å…ˆæŸ¥çœ‹sdkç‰ˆæœ¬     <code>xcodebuild -showsdks</code></li>
<li>ç„¶ååˆ‡æ¢é»˜è®¤çš„xcode <code>sudo xcode-select -switch /Applications/Xcode2.app</code></li>
<li>ç„¶ååœ¨æ‰§è¡Œ<code>xcodebuild -showsdks</code></li>
</ul>
<p>ä½ ä¼šå‘ç°sdkå·²ç»å˜äº†ï¼Œè¿™ä¸ªæ—¶å€™ä½ ä½¿ç”¨xcodebuildæ¥æ‰“åŒ…å¯ä»¥é€‰æ‹©ä½ éœ€è¦çš„è¿™ä¸ªç‰ˆæœ¬çš„sdkäº†</p>
]]></content>
      
        
        <tags>
            
            <tag> å·¥å…· </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Macä¸­çš„äºŒè¿›åˆ¶æ–‡ä»¶]]></title>
      <url>/2017/10/09/2018/Mach-O%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90/</url>
      <content type="html"><![CDATA[<p>åœ¨Unixç³»ç»Ÿä¸­ï¼Œä»»ä½•æ–‡ä»¶éƒ½å¯ä»¥é€šè¿‡chmod+xå‘½ä»¤æ¥æ ‡è®°ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä½†æ˜¯è¿™å¹¶ä¸èƒ½ä¿è¯è¿™ä¸ªæ–‡ä»¶æ˜¯èƒ½å¤Ÿè¢«æ‰§è¡Œçš„ï¼Œè¿™ä¸ªæ ‡å¿—åªæ˜¯å‘Šè¯‰ç³»ç»Ÿè¿™ä¸ªæ–‡ä»¶å¯ä»¥è¯»å…¥å†…å®¹ï¼Œç„¶åå¯»æ‰¾ä¸€ä¸ªå¤´ç­¾åï¼Œæ®æ­¤å¯ä»¥ç¡®å®šç²¾ç¡®çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼Œè¿™ä¸ªæ–‡ä»¶ç­¾åé€šå¸¸ç§°ä¸ºâ€magicâ€ã€‚<br>ä¾‹å¦‚:</p>
<ul>
<li>#!è„šæœ¬</li>
<li>0xcafebabe/0xbebafecaåŒ…å«å¤šç§æ¶æ„æ”¯æŒçš„äºŒè¿›åˆ¶ï¼Œåˆè¢«ç§°ä¸ºé€šç”¨äºŒè¿›åˆ¶æˆ–è€…èƒ–äºŒè¿›åˆ¶</li>
<li>0xfeedface(32ä½)ï¼Œ0xfeedfacf(64ä½)Mach-Oæ ¼å¼æˆ–è€…å«OSXåŸç”ŸäºŒè¿›åˆ¶æ ¼å¼</li>
</ul>
<h3 id="èƒ–äºŒè¿›åˆ¶"><a href="#èƒ–äºŒè¿›åˆ¶" class="headerlink" title="èƒ–äºŒè¿›åˆ¶"></a>èƒ–äºŒè¿›åˆ¶</h3><p>é€šç”¨äºŒè¿›åˆ¶åªä¸è¿‡æ˜¯å…¶æ”¯æŒçš„å„ç§æ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶çš„æ‰“åŒ…æ–‡ä»¶ï¼Œè¿™ç§æ ¼å¼çš„æ–‡ä»¶åŒ…å«ä¸€ä¸ªæ–‡ä»¶å¤´ï¼Œç„¶åæ–‡ä»¶å¤´åé¢ä¾æ¬¡æ‹·è´äº†æ¯ä¸€ç§æ”¯æŒæ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p>
<ul>
<li>é€šç”¨äºŒè¿›åˆ¶æ–‡ä»¶çš„å¤„ç†å·¥å…·å«åš<code>lipo</code>è„‚è‚ªçš„æ„æ€ï¼Œå¯¹åº”èƒ–äºŒè¿›åˆ¶çš„æ„æ€</li>
<li>è¿™ä¸ªå·¥å…·å¯ä»¥æå–ï¼Œåˆ é™¤å’Œæ›¿æ¢é€šç”¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­åˆ¶å®šæ¶æ„çš„äºŒè¿›åˆ¶ä»£ç ï¼Œå› æ­¤å¯ä»¥é€šè¿‡è¿™ä¸ªå·¥å…·å¯¹äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œç˜¦èº«</li>
</ul>
<h3 id="Mach-O"><a href="#Mach-O" class="headerlink" title="Mach-O"></a>Mach-O</h3><p>é¦–å…ˆçœ‹mach_header<br><code>otool -hV JDMobile</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Mach header</div><div class="line"></div><div class="line">magic cputype cpusubtype  caps    filetype ncmds sizeofcmds      flags</div><div class="line"></div><div class="line">MH_MAGIC_64   ARM64        ALL  0x00     EXECUTE    68       7464   NOUNDEFS DYLDLINK TWOLEVEL WEAK_DEFINES BINDS_TO_WEAK PIE</div></pre></td></tr></table></figure></p>
<ul>
<li>magicé­”æ•°ä»£è¡¨32æˆ–è€…64ä½</li>
<li>cputypeå’Œsubcuptypeä»£è¡¨cupç±»å‹</li>
<li>filetypeä»£è¡¨æ–‡ä»¶ç±»å‹(å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåº“æ–‡ä»¶ï¼Œæ ¸å¿ƒè½¬å‚¨æ–‡ä»¶ï¼Œå†…æ ¸æ‰©å±•)</li>
<li>ncmdså’Œsizeofcmdsç”¨äºåŠ è½½çš„å®¶åœ¨å‘½ä»¤çš„æ¡æ•°å’Œå¤§å°</li>
<li>flagsä»£è¡¨åŠ¨æ€è¿æ¥å™¨(dyld)çš„æ ‡å¿—</li>
</ul>
<h3 id="åˆ†ææ–¹æ³•"><a href="#åˆ†ææ–¹æ³•" class="headerlink" title="åˆ†ææ–¹æ³•"></a>åˆ†ææ–¹æ³•</h3><p>stings<br>otool<br>nm</p>
<h4 id="otool"><a href="#otool" class="headerlink" title="otool"></a>otool</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">-f print the fat headers</div><div class="line">-a print the archive header</div><div class="line">-h print the mach header</div><div class="line">-l print the load commands</div><div class="line">-L print shared libraries used #ä½¿ç”¨åˆ°çš„åº“</div><div class="line">-D print shared library id name #æ”¯æŒçš„æ¶æ„arm64 armv7</div><div class="line">-t print the text section (disassemble with -v)#æŸ¥çœ‹æ•°æ®æ®µï¼ŒåŸºæœ¬æ— ç”¨</div><div class="line">-p &lt;routine name&gt;  start dissassemble from routine name#æ— ç”¨</div><div class="line">-s &lt;segname&gt; &lt;sectname&gt; print contents of section</div><div class="line">-d print the data section</div><div class="line">-o print the Objective-C segment</div><div class="line">-r print the relocation entries</div><div class="line">-S print the table of contents of a library</div><div class="line">-T print the table of contents of a dynamic shared library</div><div class="line">-M print the module table of a dynamic shared library</div><div class="line">-R print the reference table of a dynamic shared library</div><div class="line">-I print the indirect symbol table</div><div class="line">-H print the two-level hints table</div><div class="line">-G print the data in code table</div><div class="line">-v print verbosely (symbolically) when possible</div><div class="line">-V print disassembled operands symbolically</div><div class="line">-c print argument strings of a core file</div><div class="line">-X print no leading addresses or headers</div><div class="line">-m don&apos;t use archive(member) syntax</div><div class="line">-B force Thumb disassembly (ARM objects only)</div><div class="line">-q use llvm&apos;s disassembler (the default)</div><div class="line">-Q use otool(1)&apos;s disassembler</div><div class="line">-mcpu=arg use `arg&apos; as the cpu for disassembly</div><div class="line">-j print opcode bytes</div><div class="line">-P print the info plist section as strings</div><div class="line">-C print linker optimization hints</div></pre></td></tr></table></figure>
<h3 id="ç˜¦èº«å®æˆ˜"><a href="#ç˜¦èº«å®æˆ˜" class="headerlink" title="ç˜¦èº«å®æˆ˜"></a>ç˜¦èº«å®æˆ˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"># Address	Size    	Segment	Section</div><div class="line">0x1000070C0	0x02C814F0	__TEXT	__text</div><div class="line">0x102C885B0	0x00005C58	__TEXT	__stubs</div><div class="line">0x102C8E208	0x0000420C	__TEXT	__stub_helper</div><div class="line">0x102C92420	0x002C8B1F	__TEXT	__const</div><div class="line">0x102F5AF3F	0x0012A102	__TEXT	__objc_methname</div><div class="line">0x103085050	0x0017170F	__TEXT	__cstring</div><div class="line">0x1031F6760	0x000120F8	__TEXT	__ustring</div><div class="line">0x103208858	0x0002402D	__TEXT	__objc_classname</div><div class="line">0x10322C885	0x00028B82	__TEXT	__objc_methtype</div><div class="line">0x103255408	0x000C4E54	__TEXT	__gcc_except_tab</div><div class="line">0x10331A25C	0x00055918	__TEXT	__unwind_info</div><div class="line">0x10336FB78	0x00000464	__TEXT	__eh_frame</div><div class="line">0x103370000	0x00001910	__DATA	__got</div><div class="line">0x103371910	0x00003D90	__DATA	__la_symbol_ptr</div><div class="line">0x1033756A0	0x00000438	__DATA	__mod_init_func</div><div class="line">0x103375AE0	0x000DF810	__DATA	__const</div><div class="line">0x1034552F0	0x000BA100	__DATA	__cfstring</div><div class="line">0x10350F3F0	0x0000BAB0	__DATA	__objc_classlist</div><div class="line">0x10351AEA0	0x00000428	__DATA	__objc_nlclslist</div><div class="line">0x10351B2C8	0x00001120	__DATA	__objc_catlist</div><div class="line">0x10351C3E8	0x000000C0	__DATA	__objc_nlcatlist</div><div class="line">0x10351C4A8	0x000015E0	__DATA	__objc_protolist</div><div class="line">0x10351DA88	0x00000008	__DATA	__objc_imageinfo</div><div class="line">0x10351DA90	0x004ECB80	__DATA	__objc_const</div><div class="line">0x103A0A610	0x00047820	__DATA	__objc_selrefs</div><div class="line">0x103A51E30	0x00000148	__DATA	__objc_protorefs</div><div class="line">0x103A51F78	0x0000AA08	__DATA	__objc_classrefs</div><div class="line">0x103A5C980	0x00007DC8	__DATA	__objc_superrefs</div><div class="line">0x103A64748	0x0001E8A0	__DATA	__objc_ivar</div><div class="line">0x103A82FE8	0x00074B30	__DATA	__objc_data</div><div class="line">0x103AF7B20	0x002FCC08	__DATA	__data</div><div class="line">0x103DF4740	0x00489580	__DATA	__bss</div><div class="line">0x10427E000	0x000AD71C	__DATA	__common</div></pre></td></tr></table></figure>
<h4 id="æŸ¥çœ‹æ‰€æœ‰ç¼–è¯‘è¿›å»çš„æ–¹æ³•"><a href="#æŸ¥çœ‹æ‰€æœ‰ç¼–è¯‘è¿›å»çš„æ–¹æ³•" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰ç¼–è¯‘è¿›å»çš„æ–¹æ³•"></a>æŸ¥çœ‹æ‰€æœ‰ç¼–è¯‘è¿›å»çš„æ–¹æ³•</h4><p><code>nm JDMobile</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<h4 id="æŸ¥çœ‹æ‰€æœ‰è¢«ä½¿ç”¨çš„æ–¹æ³•"><a href="#æŸ¥çœ‹æ‰€æœ‰è¢«ä½¿ç”¨çš„æ–¹æ³•" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰è¢«ä½¿ç”¨çš„æ–¹æ³•"></a>æŸ¥çœ‹æ‰€æœ‰è¢«ä½¿ç”¨çš„æ–¹æ³•</h4><p><code>otool -v -s __DATA  __objc_selrefs JDMobile-build-beta</code><br>-s æ˜¯è¯´æˆ‘è¦çœ‹è¿™ä¸ªsegä¸‹çš„è¿™ä¸ªsection<br>-v æ˜¯è¯´å°½å¯èƒ½å±•ç¤ºå¯è¯†åˆ«å†…å®¹</p>
<p><code>GetFileInfo filename| grep modified</code>æŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯ï¼ŒåŒ…æ‹¬</p>
<blockquote>
<ul>
<li>directory: â€œ/Users/jrmacpro/Library/Developer/Xcode/DerivedData/JDFinance-eqeqtaeyecxhiqgogjuodubajlyt/Build/Products/Beta-iphoneos/JDMobile.appâ€</li>
<li>attributes: avbstclinmedz</li>
<li>created: 10/18/2017 12:55:09</li>
<li>modified: 10/18/2017 12:59:11</li>
</ul>
</blockquote>
<h3 id="nmçš„ä½¿ç”¨"><a href="#nmçš„ä½¿ç”¨" class="headerlink" title="nmçš„ä½¿ç”¨"></a>nmçš„ä½¿ç”¨</h3><p>nm [option(s)] [file(s)]<br>æœ‰ç”¨çš„options:</p>
<p>-A åœ¨æ¯ä¸ªç¬¦å·ä¿¡æ¯çš„å‰é¢æ‰“å°æ‰€åœ¨å¯¹è±¡æ–‡ä»¶åç§°ï¼›</p>
<p>-C è¾“å‡ºdemangleè¿‡äº†çš„ç¬¦å·åç§°ï¼›</p>
<p>-D æ‰“å°åŠ¨æ€ç¬¦å·ï¼›</p>
<p>-l ä½¿ç”¨å¯¹è±¡æ–‡ä»¶ä¸­çš„è°ƒè¯•ä¿¡æ¯æ‰“å°å‡ºæ‰€åœ¨æºæ–‡ä»¶åŠè¡Œå·ï¼›</p>
<p>-n æŒ‰ç…§åœ°å€/ç¬¦å·å€¼æ¥æ’åºï¼›</p>
<p>-u æ‰“å°å‡ºé‚£äº›æœªå®šä¹‰çš„ç¬¦å·ï¼›</p>
<p>å¸¸è§çš„ç¬¦å·ç±»å‹:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">A è¯¥ç¬¦å·çš„å€¼åœ¨ä»Šåçš„é“¾æ¥ä¸­å°†ä¸å†æ”¹å˜ï¼›</div><div class="line">B è¯¥ç¬¦å·æ”¾åœ¨BSSæ®µä¸­ï¼Œé€šå¸¸æ˜¯é‚£äº›æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼›</div><div class="line">D è¯¥ç¬¦å·æ”¾åœ¨æ™®é€šçš„æ•°æ®æ®µä¸­ï¼Œé€šå¸¸æ˜¯é‚£äº›å·²ç»åˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼›</div><div class="line">T è¯¥ç¬¦å·æ”¾åœ¨ä»£ç æ®µä¸­ï¼Œé€šå¸¸æ˜¯é‚£äº›å…¨å±€éé™æ€å‡½æ•°ï¼›</div><div class="line">U è¯¥ç¬¦å·æœªå®šä¹‰è¿‡ï¼Œéœ€è¦è‡ªå…¶ä»–å¯¹è±¡æ–‡ä»¶ä¸­é“¾æ¥è¿›æ¥ï¼›</div><div class="line">W æœªæ˜ç¡®æŒ‡å®šçš„å¼±é“¾æ¥ç¬¦å·ï¼›åŒé“¾æ¥çš„å…¶ä»–å¯¹è±¡æ–‡ä»¶ä¸­æœ‰å®ƒçš„å®šä¹‰å°±ç”¨ä¸Šï¼Œ</div><div class="line">å¦åˆ™å°±ç”¨ä¸€ä¸ªç³»ç»Ÿç‰¹åˆ«æŒ‡å®šçš„é»˜è®¤å€¼ã€‚</div></pre></td></tr></table></figure>
<p>æ³¨æ„å‡ ç‚¹ï¼š<br>-C æ€»æ˜¯é€‚ç”¨äºc++ç¼–è¯‘å‡ºæ¥çš„å¯¹è±¡æ–‡ä»¶ã€‚è¿˜è®°å¾—c++ä¸­æœ‰é‡è½½ä¹ˆï¼Ÿä¸ºäº†åŒºåˆ†é‡è½½å‡½æ•°ï¼Œc++ç¼–è¯‘å™¨ä¼šå°†å‡½æ•°è¿”å›å€¼/å‚æ•°ç­‰ä¿¡æ¯é™„åŠ åˆ°å‡½æ•°åç§°ä¸­å»å½¢æˆä¸€ä¸ªmangleè¿‡çš„ç¬¦å·ï¼Œé‚£ç”¨è¿™ä¸ªé€‰é¡¹åˆ—å‡ºç¬¦å·çš„æ—¶å€™ï¼Œåšä¸€ä¸ªé€†æ“ä½œï¼Œè¾“å‡ºé‚£äº›åŸå§‹çš„ã€æˆ‘ä»¬å¯ç†è§£çš„ç¬¦å·åç§°ã€‚<br>ä½¿ç”¨ -l æ—¶ï¼Œå¿…é¡»ä¿è¯ä½ çš„å¯¹è±¡æ–‡ä»¶ä¸­å¸¦æœ‰ç¬¦å·è°ƒå¼ä¿¡æ¯ï¼Œè¿™ä¸€èˆ¬è¦æ±‚ä½ åœ¨ç¼–è¯‘çš„æ—¶å€™æŒ‡å®šä¸€ä¸ª -g é€‰é¡¹ï¼Œè§ Linux:Gccã€‚<br>ä½¿ç”¨nmå‰ï¼Œæœ€å¥½å…ˆç”¨Linux:FileæŸ¥çœ‹å¯¹è±¡æ–‡ä»¶æ‰€å±å¤„ç†å™¨æ¶æ„ï¼Œç„¶åå†ç”¨ç›¸åº”äº¤å‰ç‰ˆæœ¬çš„nmå·¥å…·ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> iOSè¿›é˜¶ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[otoolä½œç”¨ä»¥åŠä½¿ç”¨]]></title>
      <url>/2017/09/28/2018/otool%E4%BD%9C%E7%94%A8%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>é¦–å…ˆæ¥çœ‹çœ‹é‚£äº›å‘½ä»¤<br><a id="more"></a></p>
<ul>
<li>-h print the mach headeræ‰“å°å¤´éƒ¨</li>
<li></li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> å·¥å…· </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[findä¸grepå‘½ä»¤]]></title>
      <url>/2017/09/22/2017/find%E5%91%BD%E4%BB%A4/</url>
      <content type="html"><![CDATA[<h2 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h2><ul>
<li>findå‘½ä»¤æ˜¯æ ¹æ®æ–‡ä»¶çš„å±æ€§è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æ–‡ä»¶åï¼Œæ–‡ä»¶å¤§å°ï¼Œæ‰€æœ‰è€…ï¼Œæ‰€å±ç»„ï¼Œæ˜¯å¦ä¸ºç©ºï¼Œè®¿é—®æ—¶é—´ï¼Œä¿®æ”¹æ—¶é—´ç­‰ã€‚ </li>
<li>grepæ˜¯æ ¹æ®æ–‡ä»¶çš„å†…å®¹è¿›è¡ŒæŸ¥æ‰¾ï¼Œä¼šå¯¹æ–‡ä»¶çš„æ¯ä¸€è¡ŒæŒ‰ç…§ç»™å®šçš„æ¨¡å¼(patter)è¿›è¡ŒåŒ¹é…æŸ¥æ‰¾ã€‚</li>
</ul>
<h2 id="find"><a href="#find" class="headerlink" title="find"></a>find</h2><p>åŸºæœ¬æ ¼å¼ï¼šfind  path expression</p>
<h3 id="æŒ‰ç…§æ–‡ä»¶åæŸ¥æ‰¾"><a href="#æŒ‰ç…§æ–‡ä»¶åæŸ¥æ‰¾" class="headerlink" title="æŒ‰ç…§æ–‡ä»¶åæŸ¥æ‰¾"></a>æŒ‰ç…§æ–‡ä»¶åæŸ¥æ‰¾</h3><ul>
<li><code>find / -name httpd.conf</code> #åœ¨æ ¹ç›®å½•ä¸‹æŸ¥æ‰¾æ–‡ä»¶httpd.confï¼Œè¡¨ç¤ºåœ¨æ•´ä¸ªç¡¬ç›˜æŸ¥æ‰¾</li>
<li><code>find /etc -name httpd.conf</code> #åœ¨/etcç›®å½•ä¸‹æ–‡ä»¶httpd.conf</li>
<li><code>find /etc -name &#39;*srm*&#39;</code> #ä½¿ç”¨é€šé…ç¬¦*(0æˆ–è€…ä»»æ„å¤šä¸ª)ã€‚è¡¨ç¤ºåœ¨/etcç›®å½•ä¸‹æŸ¥æ‰¾æ–‡ä»¶åä¸­å«æœ‰å­—ç¬¦ä¸²â€˜srmâ€™çš„æ–‡ä»¶</li>
<li><code>find . -name &#39;srm*&#39;</code> #è¡¨ç¤ºå½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾æ–‡ä»¶åå¼€å¤´æ˜¯å­—ç¬¦ä¸²â€˜srmâ€™çš„æ–‡ä»¶</li>
</ul>
<h3 id="æŒ‰ç…§æ–‡ä»¶ç‰¹å¾æŸ¥æ‰¾"><a href="#æŒ‰ç…§æ–‡ä»¶ç‰¹å¾æŸ¥æ‰¾" class="headerlink" title="æŒ‰ç…§æ–‡ä»¶ç‰¹å¾æŸ¥æ‰¾ ã€€ã€€ã€€ã€€"></a>æŒ‰ç…§æ–‡ä»¶ç‰¹å¾æŸ¥æ‰¾ ã€€ã€€ã€€ã€€</h3><ul>
<li><code>find / -amin -10</code> ã€€ã€€# æŸ¥æ‰¾åœ¨ç³»ç»Ÿä¸­æœ€å10åˆ†é’Ÿè®¿é—®çš„æ–‡ä»¶(access time)</li>
<li><code>find / -atime -2</code>ã€€ã€€ # æŸ¥æ‰¾åœ¨ç³»ç»Ÿä¸­æœ€å48å°æ—¶è®¿é—®çš„æ–‡ä»¶</li>
<li><code>find / -empty</code> ã€€ã€€# æŸ¥æ‰¾åœ¨ç³»ç»Ÿä¸­ä¸ºç©ºçš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹</li>
<li><code>find / -group cat</code> ã€€ã€€# æŸ¥æ‰¾åœ¨ç³»ç»Ÿä¸­å±äº groupä¸ºcatçš„æ–‡ä»¶</li>
<li><code>find / -mmin -5</code> ã€€ã€€# æŸ¥æ‰¾åœ¨ç³»ç»Ÿä¸­æœ€å5åˆ†é’Ÿé‡Œä¿®æ”¹è¿‡çš„æ–‡ä»¶(modify time)</li>
<li><code>find / -mtime -1</code> ã€€ã€€#æŸ¥æ‰¾åœ¨ç³»ç»Ÿä¸­æœ€å24å°æ—¶é‡Œä¿®æ”¹è¿‡çš„æ–‡ä»¶</li>
<li><code>find / -user fred</code> ã€€ã€€#æŸ¥æ‰¾åœ¨ç³»ç»Ÿä¸­å±äºfredè¿™ä¸ªç”¨æˆ·çš„æ–‡ä»¶</li>
<li><code>find / -size +10000c</code>ã€€ã€€#æŸ¥æ‰¾å‡ºå¤§äº10000000å­—èŠ‚çš„æ–‡ä»¶(c:å­—èŠ‚ï¼Œw:åŒå­—ï¼Œk:KBï¼ŒM:MBï¼ŒG:GB)</li>
<li><code>find / -size -1000k</code> ã€€ã€€#æŸ¥æ‰¾å‡ºå°äº1000KBçš„æ–‡ä»¶</li>
</ul>
<h3 id="ä½¿ç”¨æ··åˆæŸ¥æ‰¾æ–¹å¼æŸ¥æ‰¾æ–‡ä»¶"><a href="#ä½¿ç”¨æ··åˆæŸ¥æ‰¾æ–¹å¼æŸ¥æ‰¾æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨æ··åˆæŸ¥æ‰¾æ–¹å¼æŸ¥æ‰¾æ–‡ä»¶"></a>ä½¿ç”¨æ··åˆæŸ¥æ‰¾æ–¹å¼æŸ¥æ‰¾æ–‡ä»¶</h3><p>å‚æ•°æœ‰ï¼š ï¼ï¼Œ-and(-a)ï¼Œ-or(-o)ã€‚</p>
<ul>
<li><code>find /tmp -size +10000c -and -mtime +2</code> #åœ¨/tmpç›®å½•ä¸‹æŸ¥æ‰¾å¤§äº10000å­—èŠ‚å¹¶åœ¨æœ€å2åˆ†é’Ÿå†…ä¿®æ”¹çš„æ–‡ä»¶</li>
<li><code>find / -user fred -or -user george</code> ã€€#åœ¨/ç›®å½•ä¸‹æŸ¥æ‰¾ç”¨æˆ·æ˜¯fredæˆ–è€…georgeçš„æ–‡ä»¶æ–‡ä»¶</li>
<li><code>find /tmp ! -user panda</code>ã€€#åœ¨/tmpç›®å½•ä¸­æŸ¥æ‰¾æ‰€æœ‰ä¸å±äºpandaç”¨æˆ·çš„æ–‡ä»¶</li>
</ul>
<h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h3><p><code>grep &#39;^[0-9]&#39; text.txt</code>è¿”å›ä»¥æ•°å­—å¼€å¤´çš„è¡Œ<br><code>grep &#39;@&#39; text.txt</code>è¿”å›åŒ…å«@çš„è¡Œ</p>
]]></content>
      
        
        <tags>
            
            <tag> linux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[c++ stringç”¨æ³•]]></title>
      <url>/2017/09/06/2017/c-string%E7%94%A8%E6%B3%95/</url>
      <content type="html"><![CDATA[<h2 id="C-stringçš„ç”¨æ³•å’Œä¾‹å­-è½¬-Markä¸€ä¸‹"><a href="#C-stringçš„ç”¨æ³•å’Œä¾‹å­-è½¬-Markä¸€ä¸‹" class="headerlink" title="C++ stringçš„ç”¨æ³•å’Œä¾‹å­(è½¬)Markä¸€ä¸‹"></a>C++ stringçš„ç”¨æ³•å’Œä¾‹å­(è½¬)Markä¸€ä¸‹</h2><h3 id="ä½¿ç”¨åœºåˆï¼š"><a href="#ä½¿ç”¨åœºåˆï¼š" class="headerlink" title="ä½¿ç”¨åœºåˆï¼š"></a>ä½¿ç”¨åœºåˆï¼š</h3><p>stringæ˜¯C++æ ‡å‡†åº“çš„ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ï¼Œä¸»è¦ç”¨äºå­—ç¬¦ä¸²å¤„ç†ã€‚å¯ä»¥ä½¿ç”¨è¾“å…¥è¾“å‡ºæµæ–¹å¼ç›´æ¥è¿›è¡Œæ“ä½œï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ–‡ä»¶ç­‰æ‰‹æ®µè¿›è¡Œæ“ä½œã€‚åŒæ—¶C++çš„ç®—æ³•åº“å¯¹stringä¹Ÿæœ‰ç€å¾ˆå¥½çš„æ”¯æŒï¼Œè€Œä¸”stringè¿˜å’Œcè¯­è¨€çš„å­—ç¬¦ä¸²ä¹‹é—´æœ‰ç€è‰¯å¥½çš„æ¥å£ã€‚è™½ç„¶ä¹Ÿæœ‰ä¸€äº›å¼Šç«¯ï¼Œä½†æ˜¯ç‘•ä¸æ©ç‘œã€‚<br>å…¶ä¸­ä½¿ç”¨çš„ä»£ç å¤šæ•°éƒ½æ˜¯æ¥è‡ªcppå®˜ç½‘ï¼Œå› ä¸ºä¾‹å­éå¸¸å…¨ã€‚<br><a id="more"></a></p>
<h4 id="å£°æ˜å’Œåˆå§‹åŒ–æ–¹æ³•ï¼š"><a href="#å£°æ˜å’Œåˆå§‹åŒ–æ–¹æ³•ï¼š" class="headerlink" title="å£°æ˜å’Œåˆå§‹åŒ–æ–¹æ³•ï¼š"></a>å£°æ˜å’Œåˆå§‹åŒ–æ–¹æ³•ï¼š</h4><p>æƒ³ä½¿ç”¨stringé¦–å…ˆè¦åœ¨å¤´æ–‡ä»¶å½“ä¸­åŠ å…¥&lt; string &gt;<br>å£°æ˜æ–¹å¼ä¹Ÿå¾ˆç®€å•</p>
<h4 id="å£°æ˜ï¼š"><a href="#å£°æ˜ï¼š" class="headerlink" title="å£°æ˜ï¼š"></a>å£°æ˜ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">string s;//å£°æ˜ä¸€ä¸ªstring å¯¹è±¡</div><div class="line">string ss[10];//å£°æ˜ä¸€ä¸ªstringå¯¹è±¡çš„æ•°ç»„</div></pre></td></tr></table></figure>
<h4 id="åˆå§‹åŒ–ï¼š"><a href="#åˆå§‹åŒ–ï¼š" class="headerlink" title="åˆå§‹åŒ–ï¼š"></a>åˆå§‹åŒ–ï¼š</h4><p>ä½¿ç”¨ç­‰å·çš„åˆå§‹åŒ–å«åšæ‹·è´åˆå§‹åŒ–ï¼Œä¸ä½¿ç”¨ç­‰å·çš„åˆå§‹åŒ–å«åšç›´æ¥åˆå§‹åŒ–ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">#include &lt;bits/stdc++.h&gt;</div><div class="line">using namespace std;</div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    ios::sync_with_stdio(false);</div><div class="line">    string s;//é»˜è®¤åˆå§‹åŒ–ï¼Œä¸€ä¸ªç©ºå­—ç¬¦ä¸²</div><div class="line">    string s1(&quot;ssss&quot;);//s1æ˜¯å­—é¢å€¼â€œssssâ€çš„å‰¯æœ¬</div><div class="line">    string s2(s1);//s2æ˜¯s1çš„å‰¯æœ¬</div><div class="line">    string s3=s2;//s3æ˜¯s2çš„å‰¯æœ¬</div><div class="line">    string s4(10,&apos;c&apos;);//æŠŠs4åˆå§‹åŒ–</div><div class="line">    string s5=&quot;hiya&quot;;//æ‹·è´åˆå§‹åŒ–</div><div class="line">    string s6=string(10,&apos;c&apos;);//æ‹·è´åˆå§‹åŒ–ï¼Œç”Ÿæˆä¸€ä¸ªåˆå§‹åŒ–å¥½çš„å¯¹è±¡ï¼Œæ‹·è´ç»™s6</div><div class="line"></div><div class="line">    //string s(cp,n)</div><div class="line">    char cs[]=&quot;12345&quot;;</div><div class="line">    string s7(cs,3);//å¤åˆ¶å­—ç¬¦ä¸²csçš„å‰3ä¸ªå­—ç¬¦åˆ°så½“ä¸­</div><div class="line"></div><div class="line">    //string s(s2,pos2)</div><div class="line">    string s8=&quot;asac&quot;;</div><div class="line">    string s9(s8,2);//ä»s2çš„ç¬¬äºŒä¸ªå­—ç¬¦å¼€å§‹æ‹·è´ï¼Œä¸èƒ½è¶…è¿‡s2çš„size</div><div class="line"></div><div class="line">    //string s(s2,pos2,len2)</div><div class="line">    string s10=&quot;qweqweqweq&quot;;</div><div class="line">    string s11(s10,3,4);//s4æ˜¯s3ä»ä¸‹æ ‡3å¼€å§‹4ä¸ªå­—ç¬¦çš„æ‹·è´ï¼Œè¶…è¿‡s3.sizeå‡ºç°æœªå®šä¹‰</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²å¤„ç†ï¼š"><a href="#å­—ç¬¦ä¸²å¤„ç†ï¼š" class="headerlink" title="å­—ç¬¦ä¸²å¤„ç†ï¼š"></a>å­—ç¬¦ä¸²å¤„ç†ï¼š</h3><h4 id="substræ“ä½œï¼š"><a href="#substræ“ä½œï¼š" class="headerlink" title="substræ“ä½œï¼š"></a>substræ“ä½œï¼š</h4><p>æ³¨æ„substræ²¡æœ‰è¿­ä»£å™¨ä½œä¸ºå‚æ•°çš„æ“ä½œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">#include &lt;bits/stdc++.h&gt;</div><div class="line">using namespace std;</div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    ios::sync_with_stdio(false);</div><div class="line">    string s=&quot;abcdefg&quot;;</div><div class="line"></div><div class="line">    //s.substr(pos1,n)è¿”å›å­—ç¬¦ä¸²ä½ç½®ä¸ºpos1åé¢çš„nä¸ªå­—ç¬¦ç»„æˆçš„ä¸²</div><div class="line">    string s2=s.substr(1,5);//abcde</div><div class="line"></div><div class="line">    //s.substr(pos)//å¾—åˆ°ä¸€ä¸ªposåˆ°ç»“å°¾çš„ä¸²</div><div class="line">    string s3=s.substr(4);//efg</div><div class="line"></div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœè¾“å…¥çš„ä½ç½®è¶…è¿‡å­—ç¬¦çš„é•¿åº¦ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªout_of_rangeçš„å¼‚å¸¸</p>
<h4 id="insertæ“ä½œ"><a href="#insertæ“ä½œ" class="headerlink" title="insertæ“ä½œ:"></a>insertæ“ä½œ:</h4><p>ä»£ç æ¥è‡ªcppå®˜ç½‘ï¼Œç»è¿‡è‡ªå·±çš„æ•´ç†<br>æ³¨æ„ç”¨è¿­ä»£å™¨å½“å‚æ•°å’Œæ— ç¬¦å·æ•°å½“å‚æ•°çš„åŒºåˆ«</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">#include &lt;bits/stdc++.h&gt;</div><div class="line">using namespace std;</div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    ios::sync_with_stdio(false);</div><div class="line">    string str=&quot;to be question&quot;;</div><div class="line">    string str2=&quot;the &quot;;</div><div class="line">    string str3=&quot;or not to be&quot;;</div><div class="line">    string::iterator it;</div><div class="line"></div><div class="line">    //s.insert(pos,str)//åœ¨sçš„posä½ç½®æ’å…¥str</div><div class="line">    str.insert(6,str2);                 // to be the question</div><div class="line"></div><div class="line">    //s.insert(pos,str,a,n)åœ¨sçš„posä½ç½®æ’å…¥strä¸­æ’å…¥ä½ç½®aåˆ°åé¢çš„nä¸ªå­—ç¬¦</div><div class="line">    str.insert(6,str3,3,4);             // to be not the question</div><div class="line"></div><div class="line">    //s.insert(pos,cstr,n)//åœ¨posä½ç½®æ’å…¥cstrå­—ç¬¦ä¸²ä»å¼€å§‹åˆ°åé¢çš„nä¸ªå­—ç¬¦</div><div class="line">    str.insert(10,&quot;that is cool&quot;,8);    // to be not that is the question</div><div class="line"></div><div class="line">    //s.insert(pos,cstr)åœ¨sçš„posä½ç½®æ’å…¥cstr</div><div class="line">    str.insert(10,&quot;to be &quot;);            // to be not to be that is the question</div><div class="line"></div><div class="line">    //s.insert(pos,n,ch)åœ¨s.posä½ç½®ä¸Šé¢æ’å…¥nä¸ªch</div><div class="line">    str.insert(15,1,&apos;:&apos;);               // to be not to be: that is the question</div><div class="line"></div><div class="line">    //s.insert(s.it,ch)åœ¨sçš„itæŒ‡å‘ä½ç½®å‰é¢æ’å…¥ä¸€ä¸ªå­—ç¬¦chï¼Œè¿”å›æ–°æ’å…¥çš„ä½ç½®çš„è¿­ä»£å™¨</div><div class="line">    it = str.insert(str.begin()+5,&apos;,&apos;); // to be, not to be: that is the question</div><div class="line"></div><div class="line">    //s.insert(s.it,n,ch)//åœ¨sçš„itæ‰€æŒ‡å‘ä½ç½®çš„å‰é¢æ’å…¥nä¸ªch</div><div class="line">    str.insert (str.end(),3,&apos;.&apos;);       // to be, not to be: that is the question...</div><div class="line"></div><div class="line">    //s.insert(it,str.ita,str.itb)åœ¨itæ‰€æŒ‡å‘çš„ä½ç½®çš„å‰é¢æ’å…¥[ita,itb)çš„å­—ç¬¦ä¸²</div><div class="line">    str.insert (it+2,str3.begin(),str3.begin()+3); // to be, or not to be: that is the question...</div><div class="line"></div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="eraseæ“ä½œï¼š"><a href="#eraseæ“ä½œï¼š" class="headerlink" title="eraseæ“ä½œï¼š"></a>eraseæ“ä½œï¼š</h4><p>ç”¨æ¥æ‰§è¡Œåˆ é™¤æ“ä½œ<br>åˆ é™¤æ“ä½œæœ‰ä¸‰ç§</p>
<p>æŒ‡å®šposå’Œlenï¼Œå…¶ä¸­posä¸ºä¸ºèµ·å§‹ä½ç½®ï¼Œposä»¥åŠåé¢len-1ä¸ªå­—ç¬¦ä¸²éƒ½åˆ é™¤<br>è¿­ä»£å™¨ï¼Œåˆ é™¤è¿­ä»£å™¨æŒ‡å‘çš„å­—ç¬¦<br>è¿­ä»£å™¨èŒƒå›´ï¼Œåˆ é™¤è¿™ä¸€èŒƒå›´çš„å­—ç¬¦ä¸²ï¼ŒèŒƒå›´å·¦é—­å³å¼€<br>ä»£ç æ¥è‡ªcppå®˜ç½‘</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line"></div><div class="line">int main ()</div><div class="line">&#123;</div><div class="line">  std::string str (&quot;This is an example sentence.&quot;);</div><div class="line">  std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;;</div><div class="line">                          // &quot;This is an example sentence.&quot;</div><div class="line">  str.erase (10,8);       //            ^^^^^^^^</div><div class="line">  //ç›´æ¥æŒ‡å®šåˆ é™¤çš„å­—ç¬¦ä¸²ä½ç½®ç¬¬åä¸ªåé¢çš„8ä¸ªå­—ç¬¦</div><div class="line">  std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;;</div><div class="line">                            // &quot;This is an sentence.&quot;</div><div class="line">  str.erase (str.begin()+9);//           ^</div><div class="line">  //åˆ é™¤è¿­ä»£å™¨æŒ‡å‘çš„å­—ç¬¦</div><div class="line">  std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;;</div><div class="line">                            // &quot;This is a sentence.&quot;</div><div class="line">                            //       ^^^^^</div><div class="line">  str.erase (str.begin()+5, str.end()-9);</div><div class="line">  //åˆ é™¤è¿­ä»£å™¨èŒƒå›´çš„å­—ç¬¦</div><div class="line">  std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;;</div><div class="line">                            // &quot;This sentence.&quot;</div><div class="line">  return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="appendå’Œreplaceæ“ä½œ"><a href="#appendå’Œreplaceæ“ä½œ" class="headerlink" title="appendå’Œreplaceæ“ä½œ:"></a>appendå’Œreplaceæ“ä½œ:</h4><p>appendå‡½æ•°å¯ä»¥ç”¨æ¥åœ¨å­—ç¬¦ä¸²çš„æœ«å°¾è¿½åŠ å­—ç¬¦å’Œå­—ç¬¦ä¸²ã€‚ç”±äºstringé‡è½½äº†è¿ç®—ç¬¦ï¼Œä¹Ÿå¯ä»¥ç”¨+=æ“ä½œå®ç°<br>repalceé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ›¿æ¢çš„æ„æ€ï¼Œå…ˆåˆ é™¤ï¼Œåå¢åŠ ã€‚<br>ä»£ç æ¥è‡ªcppå®˜ç½‘ï¼Œé™„ä¸Šè‡ªå·±çš„è§£é‡Š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line"></div><div class="line">int main ()</div><div class="line">&#123;</div><div class="line">    std::string str;</div><div class="line">    std::string str2=&quot;Writing &quot;;</div><div class="line">    std::string str3=&quot;print 10 and then 5 more&quot;;</div><div class="line"></div><div class="line">    //ç›´æ¥è¿½åŠ ä¸€ä¸ªstr2çš„å­—ç¬¦ä¸²</div><div class="line">    str.append(str2);                       // &quot;Writing &quot;</div><div class="line">    //åé¢è¿½åŠ str3ç¬¬6ä¸ªå­—ç¬¦å¼€å§‹çš„3ä¸ªå­—ç¬¦ä¸²</div><div class="line">    str.append(str3,6,3);                   // &quot;10 &quot;</div><div class="line">    //è¿½åŠ å­—ç¬¦ä¸²å½¢å‚çš„å‰5ä¸ªå­—ç¬¦</div><div class="line">    str.append(&quot;dots are cool&quot;,5);          // &quot;dots &quot;</div><div class="line">    //ç›´æ¥æ·»åŠ </div><div class="line">    str.append(&quot;here: &quot;);                   // &quot;here: &quot;</div><div class="line">    //æ·»åŠ 10ä¸ª&apos;.&apos;</div><div class="line">    str.append(10u,&apos;.&apos;);                    // &quot;..........&quot;</div><div class="line">    //æ·»åŠ str3è¿­ä»£å™¨èŒƒå›´çš„å­—ç¬¦ä¸²</div><div class="line">    str.append(str3.begin()+8,str3.end());  // &quot; and then 5 more&quot;</div><div class="line">    //æœ€åè¿™ä¸ªæ¯”è¾ƒç‰¹æ®Šï¼Œæ„æ€æ˜¯æ·»åŠ 5ä¸ª&apos;A&apos;ï¼Œå®é™…ä¸Šå‚æ•°é‡Œé¢çš„65å¯¹åº”çš„ascç å°±æ˜¯65</div><div class="line">    str.append&lt;int&gt;(5,65);                // &quot;.....&quot;</div><div class="line">    //å­—ç¬¦ä¸²è¿½åŠ ä¹Ÿå¯ä»¥ç”¨é‡è½½è¿ç®—ç¬¦å®ç°</div><div class="line">    str+=&quot;lalala&quot;;</div><div class="line">    std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>replaceçš„ä½¿ç”¨æ–¹æ³•ï¼Œreplaceæ”¯æŒä½¿ç”¨æ— ç¬¦å·æ•´æ•°å¯»æ‰¾ä½ç½®ï¼Œä¹Ÿæ”¯æŒç”¨è¿­ä»£å™¨å¯»æ‰¾ä½ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line"></div><div class="line">int main ()</div><div class="line">&#123;</div><div class="line">    std::string base=&quot;this is a test string.&quot;;</div><div class="line">    std::string str2=&quot;n example&quot;;</div><div class="line">    std::string str3=&quot;sample phrase&quot;;</div><div class="line">    std::string str4=&quot;useful.&quot;;</div><div class="line"></div><div class="line">    // replace signatures used in the same order as described above:</div><div class="line"></div><div class="line">    // Using positions:                 0123456789*123456789*12345</div><div class="line">    std::string str=base;           // &quot;this is a test string.&quot;</div><div class="line">    //ç¬¬9ä¸ªå­—ç¬¦ä»¥åŠåé¢çš„4ä¸ªå­—ç¬¦è¢«str2ä»£æ›¿</div><div class="line">    str.replace(9,5,str2);          // &quot;this is an example string.&quot; (1)</div><div class="line">    //ç¬¬19ä¸ªå­—ç¬¦ä¸²ä»¥åŠåé¢çš„5ä¸ªå­—ç¬¦ç”¨strçš„ç¬¬7ä¸ªå­—ç¬¦ä»¥åŠåé¢çš„5ä¸ªå­—ç¬¦ä»£æ›¿</div><div class="line">    str.replace(19,6,str3,7,6);     // &quot;this is an example phrase.&quot; (2)</div><div class="line">    //ç¬¬8ä¸ªå­—ç¬¦ä»¥åŠåé¢çš„9ä¸ªå­—ç¬¦ç”¨å­—ç¬¦ä¸²å‚æ•°ä»£æ›¿</div><div class="line">    str.replace(8,10,&quot;just a&quot;);     // &quot;this is just a phrase.&quot;     (3)</div><div class="line">    //ç¬¬8ä¸ªå­—ç¬¦ä»¥åŠåé¢çš„5ä¸ªå­—ç¬¦ç”¨å­—ç¬¦ä¸²å‚æ•°çš„å‰7ä¸ªå­—ç¬¦æ›¿æ¢</div><div class="line">    str.replace(8,6,&quot;a shorty&quot;,7);  // &quot;this is a short phrase.&quot;    (4)</div><div class="line">    //ç¬¬22ä»¥åŠåé¢çš„0ä¸ªå­—ç¬¦ç”¨3ä¸ªå¹å·æ›¿æ¢</div><div class="line">    str.replace(22,1,3,&apos;!&apos;);        // &quot;this is a short phrase!!!&quot;  (5)</div><div class="line">    //è¿­ä»£å™¨çš„åŸç†åŒä¸Š</div><div class="line">    // Using iterators:                                               0123456789*123456789*</div><div class="line">    str.replace(str.begin(),str.end()-3,str3);                    // &quot;sample phrase!!!&quot;      (1)</div><div class="line">    str.replace(str.begin(),str.begin()+6,&quot;replace&quot;);             // &quot;replace phrase!!!&quot;     (3)</div><div class="line">    str.replace(str.begin()+8,str.begin()+14,&quot;is coolness&quot;,7);    // &quot;replace is cool!!!&quot;    (4)</div><div class="line">    str.replace(str.begin()+12,str.end()-4,4,&apos;o&apos;);                // &quot;replace is cooool!!!&quot;  (5)</div><div class="line">    str.replace(str.begin()+11,str.end(),str4.begin(),str4.end());// &quot;replace is useful.&quot;    (6)</div><div class="line">    std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;;   </div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šçš„replaceæ“ä½œå¯ä»¥ç”¨insertå’Œeraseçš„æ“ä½œç»„åˆæ›¿æ¢ï¼Œä½†æ˜¯replaceæ“ä½œæ›´åŠ æ–¹ä¾¿ã€‚</p>
<h4 id="assignæ“ä½œï¼š"><a href="#assignæ“ä½œï¼š" class="headerlink" title="assignæ“ä½œï¼š"></a>assignæ“ä½œï¼š</h4><p>assignæ“ä½œåœ¨ä¸€èµ·åˆ—å®¹å™¨å½“ä¸­éƒ½å­˜åœ¨ï¼Œæ¯”å¦‚vectorç­‰ç­‰ã€‚æ˜¯ä¸€ä¸ªå¾ˆåŸºæœ¬çš„æ“ä½œå‡½æ•°ï¼Œstringä½¿ç”¨assignå¯ä»¥çµæ´»çš„å¯¹å…¶è¿›è¡Œèµ‹å€¼ã€‚<br>ä»£ç æ¥è‡ªcppå®˜ç½‘</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line"></div><div class="line">int main ()</div><div class="line">&#123;</div><div class="line">    std::string str;</div><div class="line">    std::string base=&quot;The quick brown fox jumps over a lazy dog.&quot;;</div><div class="line"></div><div class="line">    // used in the same order as described above:</div><div class="line">    //ç›´æ¥æŠŠbaseèµ‹å€¼ç»™str</div><div class="line">    str.assign(base);</div><div class="line">    std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;;</div><div class="line">    //æŠŠbaseç¬¬10ä¸ªå­—ç¬¦ä»¥åŠåé¢çš„8ä¸ªå­—ç¬¦èµ‹ç»™str</div><div class="line">    str.assign(base,10,9);</div><div class="line">    std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;;         // &quot;brown fox&quot;</div><div class="line">    //æŠŠå‚æ•°ä¸­çš„0åˆ°6ä¸ªå­—ç¬¦ä¸²èµ‹ç»™str</div><div class="line">    str.assign(&quot;pangrams are cool&quot;,7);</div><div class="line">    std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;;         // &quot;pangram&quot;</div><div class="line">    //ç›´æ¥ä½¿ç”¨å‚æ•°èµ‹å€¼</div><div class="line">    str.assign(&quot;c-string&quot;);</div><div class="line">    std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;;         // &quot;c-string&quot;</div><div class="line">    //ç»™strèµ‹å€¼10ä¸ª&apos;*&apos;å­—ç¬¦</div><div class="line">    str.assign(10,&apos;*&apos;);</div><div class="line">    std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;;         // &quot;**********&quot;</div><div class="line">    //èµ‹å€¼æ˜¯10ä¸ª&apos;-&apos;</div><div class="line">    str.assign&lt;int&gt;(10,0x2D);</div><div class="line">    std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;;         // &quot;----------&quot;</div><div class="line">    //æŒ‡å®šbaseè¿­ä»£å™¨èŒƒå›´çš„å­—ç¬¦ä¸²</div><div class="line">    str.assign(base.begin()+16,base.end()-12);</div><div class="line">    std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;;         // &quot;fox jumps over&quot;</div><div class="line"></div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="stringçš„æœç´¢æ“ä½œ"><a href="#stringçš„æœç´¢æ“ä½œ" class="headerlink" title="stringçš„æœç´¢æ“ä½œ:"></a>stringçš„æœç´¢æ“ä½œ:</h4><p>stringç±»ä¸­æä¾›äº†å¾ˆå¤šæ€§èƒ½ä¼˜ç§€ï¼Œä½¿ç”¨æ–¹ä¾¿çš„æˆå‘˜æ–¹æ³•ã€‚è€Œä¸”åœ¨æ³›å‹ç®—æ³•å½“ä¸­ä¹Ÿæœ‰å¾ˆå¤šå®ç”¨çš„æŠ€å·§ã€‚</p>
<p>findå’Œrfindå‡½æ•°:</p>
<p>findå‡½æ•°ä¸»è¦æ˜¯æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åœ¨è°ƒç”¨çš„å­—ç¬¦ä¸²ä¸­å‡ºç°è¿‡ï¼Œå¤§å°å†™æ•æ„Ÿã€‚<br>ä»£ç æ¥è‡ªcppå®˜ç½‘</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">#include &lt;bits/stdc++.h&gt;</div><div class="line">using namespace std;</div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    ios::sync_with_stdio(false);</div><div class="line">    std::string str (&quot;There are two needles in this haystack with needles.&quot;);</div><div class="line">    std::string str2 (&quot;needle&quot;);</div><div class="line"></div><div class="line">    // different member versions of find in the same order as above:</div><div class="line">    //åœ¨strå½“ä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå‡ºç°çš„needleï¼Œæ‰¾åˆ°åˆ™è¿”å›å‡ºç°çš„ä½ç½®ï¼Œå¦åˆ™è¿”å›ç»“å°¾</div><div class="line">    std::size_t found = str.find(str2);</div><div class="line">    if (found!=std::string::npos)</div><div class="line">    std::cout &lt;&lt; &quot;first &apos;needle&apos; found at: &quot; &lt;&lt; found &lt;&lt; &apos;\n&apos;;</div><div class="line">    //åœ¨strå½“ä¸­ï¼Œä»ç¬¬found+1çš„ä½ç½®å¼€å§‹æŸ¥æ‰¾å‚æ•°å­—ç¬¦ä¸²çš„å‰6ä¸ªå­—ç¬¦</div><div class="line">    found=str.find(&quot;needles are small&quot;,found+1,6);</div><div class="line">    if (found!=std::string::npos)</div><div class="line">    std::cout &lt;&lt; &quot;second &apos;needle&apos; found at: &quot; &lt;&lt; found &lt;&lt; &apos;\n&apos;;</div><div class="line">    //åœ¨strå½“ä¸­æŸ¥æ‰¾å‚æ•°ä¸­çš„å­—ç¬¦ä¸²</div><div class="line">    found=str.find(&quot;haystack&quot;);</div><div class="line">    if (found!=std::string::npos)</div><div class="line">    std::cout &lt;&lt; &quot;&apos;haystack&apos; also found at: &quot; &lt;&lt; found &lt;&lt; &apos;\n&apos;;</div><div class="line">    //æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦</div><div class="line">    found=str.find(&apos;.&apos;);</div><div class="line">    if (found!=std::string::npos)</div><div class="line">    std::cout &lt;&lt; &quot;Period found at: &quot; &lt;&lt; found &lt;&lt; &apos;\n&apos;;</div><div class="line">    //ç»„åˆä½¿ç”¨ï¼ŒæŠŠstr2ç”¨å‚æ•°è¡¨ä¸­çš„å­—ç¬¦ä¸²ä»£æ›¿</div><div class="line">    // let&apos;s replace the first needle:</div><div class="line">    str.replace(str.find(str2),str2.length(),&quot;preposition&quot;);</div><div class="line">    std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>rfindå‡½æ•°å°±æ˜¯æ‰¾æœ€åä¸€ä¸ªå‡ºç°çš„åŒ¹é…å­—ç¬¦ä¸²ï¼Œè¿”å›çš„ä½ç½®ä»ç„¶æ˜¯ä»å‰å¾€åæ•°çš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">#include &lt;bits/stdc++.h&gt;</div><div class="line">using namespace std;</div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    ios::sync_with_stdio(false);</div><div class="line">    std::string str (&quot;The sixth sick sheik&apos;s sixth sheep&apos;s sick.&quot;);</div><div class="line">    std::string key (&quot;sixth&quot;);//                    ^</div><div class="line">    //rfindæ˜¯æ‰¾æœ€åä¸€ä¸ªå‡ºç°çš„åŒ¹é…å­—ç¬¦ä¸²</div><div class="line">    std::size_t found = str.rfind(key);</div><div class="line">    if (found!=std::string::npos)</div><div class="line">    &#123;</div><div class="line">        cout&lt;&lt;found&lt;&lt;endl;//è¾“å‡º23</div><div class="line">        str.replace (found,key.length(),&quot;seventh&quot;);//æ‰¾åˆ°çš„sixthæ›¿æ¢æˆseventh</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æŸ¥æ‰¾çš„æ•ˆç‡éå¸¸é«˜ï¼Œæˆ‘æ²¡çœ‹è¿‡stlæºç å‰–æï¼Œä½†æ˜¯æ„Ÿè§‰æ˜¯ç”¨kmpå®ç°çš„ã€‚å‘µå‘µï¼Œå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªã€‚</p>
<p>find_â€¦.ofå‡½æ•°:</p>
<p>find_first_of(args) æŸ¥æ‰¾argsä¸­ä»»ä½•ä¸€ä¸ªå­—ç¬¦ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®<br>find_last_of(args) æœ€åä¸€ä¸ªå‡ºç°çš„ä½ç½®<br>find_fist_not_of(args) æŸ¥æ‰¾ç¬¬ä¸€ä¸ªä¸åœ¨argsä¸­çš„å­—ç¬¦<br>find_last_not_of æŸ¥æ‰¾æœ€åä¸€ä¸ªä¸åœ¨argsä¸­å‡ºç°çš„å­—ç¬¦</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">#include &lt;bits/stdc++.h&gt;</div><div class="line">using namespace std;</div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    ios::sync_with_stdio(false);</div><div class="line">    std::string str1 (&quot;Please, replace the vowels in this sentence by asterisks.&quot;);</div><div class="line">    std::size_t found1 = str1.find_first_of(&quot;aeiou&quot;);</div><div class="line">    //æŠŠæ‰€æœ‰å…ƒéŸ³æ‰¾å‡ºæ¥ç”¨*ä»£æ›¿</div><div class="line">    while (found1!=std::string::npos)</div><div class="line">    &#123;</div><div class="line">        str1[found1]=&apos;*&apos;;</div><div class="line">        found1=str1.find_first_of(&quot;aeiou&quot;,found1+1);</div><div class="line">    &#125;</div><div class="line">    std::cout &lt;&lt; str1 &lt;&lt; &apos;\n&apos;;</div><div class="line"></div><div class="line">    //åœ¨str2ä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸æ˜¯æ¶ˆåè‹±æ–‡å­—æ¯å’Œç©ºæ ¼çš„å­—ç¬¦</div><div class="line">    std::string str2 (&quot;look for non-alphabetic characters...&quot;);</div><div class="line">    std::size_t found2 = str2.find_first_not_of(&quot;abcdefghijklmnopqrstuvwxyz &quot;);</div><div class="line">    if (found2!=std::string::npos)</div><div class="line">    &#123;</div><div class="line">        std::cout &lt;&lt; &quot;The first non-alphabetic character is &quot; &lt;&lt; str2[found2];</div><div class="line">        std::cout &lt;&lt; &quot; at position &quot; &lt;&lt; found2 &lt;&lt; &apos;\n&apos;;</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>find_last_ofå’Œfind_last_not_ofä¸firståŸºæœ¬ç›¸åŒï¼Œå°±ä¸å†™ä¾‹å­ä»£ç äº†ã€‚</p>
<p>æ¯”è¾ƒä¸è½¬æ¢:</p>
<p>ç±»ä¼¼cè¯­è¨€çš„å­—ç¬¦ä¸²æ¯”è¾ƒå‡½æ•°strcmpå‡½æ•°ä¸€æ ·ï¼Œæ”¯æŒå­—ç¬¦ä¸²æ¯”è¾ƒæ“ä½œï¼ŒåŒæ—¶ä¹Ÿç±»ä¼¼pythonã€C#è¯­è¨€ä¸­çš„å‡½æ•°ä¸€æ ·ï¼Œæ”¯æŒæŠŠæ•°å­—å’Œå­—ç¬¦ä¸²è½¬æ¢ã€‚æœ‰äº›ç‰¹æ€§æ˜¯C++11å½“ä¸­æ‰æœ‰ã€‚<br>æ³¨æ„ç¼–è¯‘å™¨bugï¼š<br>åœ¨MinGWç¼–è¯‘å™¨å½“ä¸­å¦‚æœç‰ˆæœ¬ä½äº3.8ï¼Œè™½ç„¶æ”¯æŒc++11ä½†æ˜¯é‡Œé¢æœ‰ä¸€ä¸ªbugï¼Œå°±æ˜¯ä¸æ”¯æŒå­—ç¬¦ä¸²å’Œæ•°ç»„çš„è½¬æ¢ï¼è¦æ›´æ–°MinGWçš„ç‰ˆæœ¬æ‰å¯ä»¥ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨g++ã€‚</p>
<h4 id="compareå‡½æ•°"><a href="#compareå‡½æ•°" class="headerlink" title="compareå‡½æ•°:"></a>compareå‡½æ•°:</h4><p>å’Œstrcmpå‡½æ•°ä¸€æ ·ï¼Œå¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ï¼Œé‚£ä¹ˆè¿”å›0ï¼Œè°ƒç”¨å¯¹è±¡å¤§äºå‚æ•°è¿”å›1ï¼Œå°äºè¿”å›-1ã€‚<br>åœ¨compareå½“ä¸­è¿˜æ”¯æŒéƒ¨åˆ†æ¯”è¾ƒï¼Œé‡Œé¢æœ‰6ä¸ªå‚æ•°å¯ä»¥è®¾ç½®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">#include &lt;bits/stdc++.h&gt;</div><div class="line">using namespace std;</div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    ios::sync_with_stdio(false);</div><div class="line">    string s1=&quot;123&quot;,s2=&quot;123&quot;;</div><div class="line">    cout&lt;&lt;s1.compare(s2)&lt;&lt;endl;//0</div><div class="line"></div><div class="line">    s1=&quot;123&quot;,s2=&quot;1234&quot;;</div><div class="line">    cout&lt;&lt;s1.compare(s2)&lt;&lt;endl;//-1</div><div class="line"></div><div class="line">    s1=&quot;1234&quot;,s2=&quot;123&quot;;</div><div class="line">    cout&lt;&lt;s1.compare(s2)&lt;&lt;endl;//1</div><div class="line"></div><div class="line">    std::string str1 (&quot;green apple&quot;);</div><div class="line">    std::string str2 (&quot;red apple&quot;);</div><div class="line"></div><div class="line">    if (str1.compare(str2) != 0)</div><div class="line">    std::cout &lt;&lt; str1 &lt;&lt; &quot; is not &quot; &lt;&lt; str2 &lt;&lt; &apos;\n&apos;;</div><div class="line">    //str1çš„ç¬¬6ä¸ªå­—ç¬¦ä»¥åŠåé¢çš„4ä¸ªå­—ç¬¦å’Œå‚æ•°æ¯”è¾ƒ</div><div class="line">    if (str1.compare(6,5,&quot;apple&quot;) == 0)</div><div class="line">    std::cout &lt;&lt; &quot;still, &quot; &lt;&lt; str1 &lt;&lt; &quot; is an apple\n&quot;;</div><div class="line"></div><div class="line">    if (str2.compare(str2.size()-5,5,&quot;apple&quot;) == 0)</div><div class="line">    std::cout &lt;&lt; &quot;and &quot; &lt;&lt; str2 &lt;&lt; &quot; is also an apple\n&quot;;</div><div class="line">    //str1çš„ç¬¬6ä¸ªå­—ç¬¦ä»¥åŠåé¢çš„4ä¸ªå­—ç¬¦å’Œstr2çš„ç¬¬4ä¸ªå­—ç¬¦ä»¥åŠåé¢çš„4ä¸ªå­—ç¬¦æ¯”è¾ƒ</div><div class="line">    if (str1.compare(6,5,str2,4,5) == 0)</div><div class="line">    std::cout &lt;&lt; &quot;therefore, both are apples\n&quot;;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç”±äºstringé‡è½½äº†è¿ç®—ç¬¦ï¼Œå¯ä»¥ç›´æ¥ç”¨&gt;,&lt;ï¼Œ==æ¥è¿›è¡Œæ¯”è¾ƒï¼Œä¹Ÿå¾ˆæ–¹ä¾¿ã€‚</p>
<h4 id="æ•°å€¼è½¬æ¢ï¼š"><a href="#æ•°å€¼è½¬æ¢ï¼š" class="headerlink" title="æ•°å€¼è½¬æ¢ï¼š"></a>æ•°å€¼è½¬æ¢ï¼š</h4><p>åœ¨ioçš„éƒ¨åˆ†æœ‰è¿‡æ•°å€¼å’Œå­—ç¬¦ä¸²ç›¸äº’è½¬æ¢çš„ä¾‹å­ï¼Œä½¿ç”¨çš„æ˜¯stringstreamå‡½æ•°ï¼Œåœ¨c++11å½“ä¸­æœ‰å®šä¹‰å¥½çš„ç°æˆçš„å‡½æ•°å–è°ƒç”¨ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<p>stringå’Œæ•°å€¼è½¬æ¢<br>to_string(val)    æŠŠvalè½¬æ¢æˆstring<br>stoi(s,p,b)    æŠŠå­—ç¬¦ä¸²sä»på¼€å§‹è½¬æ¢æˆbè¿›åˆ¶çš„int<br>stol(s,p,b)    long<br>stoul(s,p,b)    unsigned long<br>stoll(s,p,b)    long long<br>stoull(s,p,b)    unsigned long long<br>stof(s,p)    float<br>stod(s,p)    double<br>stold(s,p)    long double<br>//æ³¨æ„ï¼Œä¸‹æ®µä»£ç åœ¨MinGwä¸­ä¼šæŠ¥é”™ï¼å³ä½¿ä½¿ç”¨c++11ç¼–è¯‘ä¹Ÿä¸€æ ·ï¼Œæ— æ³•è¯†åˆ«to_stringï¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#include &lt;bits/stdc++.h&gt;</div><div class="line">using namespace std;</div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    ios::sync_with_stdio(false);</div><div class="line">    string s1;</div><div class="line">    s1=to_string(100);</div><div class="line">    cout&lt;&lt;s1&lt;&lt;endl;</div><div class="line">    int a=stoi(s1,0,10)+1;</div><div class="line">    cout&lt;&lt;a&lt;&lt;endl;</div><div class="line"></div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[clangæ’ä»¶å¼€å‘]]></title>
      <url>/2017/09/05/2017/clang%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/</url>
      <content type="html"><![CDATA[<h2 id="èµ„æºå‡†å¤‡-amp-amp-ç¼–è¯‘æºæ–‡ä»¶"><a href="#èµ„æºå‡†å¤‡-amp-amp-ç¼–è¯‘æºæ–‡ä»¶" class="headerlink" title="èµ„æºå‡†å¤‡&amp;&amp;ç¼–è¯‘æºæ–‡ä»¶"></a>èµ„æºå‡†å¤‡&amp;&amp;ç¼–è¯‘æºæ–‡ä»¶</h2><p>æˆ‘ä»¬éœ€è¦llvmå’Œclangçš„æºæ–‡ä»¶ï¼Œè€Œä¸”è¿™äº›æ–‡ä»¶éƒ½å­˜åœ¨äºgithubä¸Šï¼Œæˆ‘ä»¬å¦‚æœç›´æ¥ä»githubä¸‹è½½ä¼šå¾ˆæ…¢ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥æ˜¯åˆ¶ä½œå›½å†…æºã€‚</p>
<a id="more"></a>
<ul>
<li>åˆ¶ä½œå›½å†…æº<code>http://jingyan.baidu.com/article/f79b7cb367e72e9145023e40.html</code></li>
</ul>
<p>è¿˜æœ‰å°±æ˜¯ä¸è¦æŠŠè¿™äº›æºæ–‡ä»¶æ”¾åˆ°ä¸€äº›éœ€è¦æƒé™æ‰§è¡Œçš„æ–‡ä»¶é‡Œï¼Œè¿™æ ·åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä½ ä¼šå‘ç°å„ç§é—®é¢˜ã€‚</p>
<ul>
<li>ä¸‹è½½æºç çš„æ—¶å€™æ³¨æ„ç‚¹å°±æ˜¯è¦å¯¹ç…§ä½ çš„xcodeçš„ç‰ˆæœ¬:<code>https://trac.macports.org/wiki/XcodeVersionInfo</code></li>
<li>ç„¶åæ‰¾åˆ°å¯¹åº”çš„clangç‰ˆæœ¬<code>https://opensource.apple.com/source/clang/clang-800.0.42.1/src/configure.auto.html</code></li>
</ul>
<p>ç»è¿‡å¯¹æ¯”æˆ‘ä»¬å‘ç°æˆ‘ä»¬éœ€è¦çš„æ˜¯39ç‰ˆæœ¬</p>
<p>æ¯”å¦‚ç°åœ¨æˆ‘ä»¬åœ¨ä¸€ä¸ªå«åšGitHubçš„æ–‡ä»¶å¤¹ä¸‹éå»ºç«‹äº†ä¸€ä¸ªå«åšllvmçš„æ–‡ä»¶<br>æŒ‰ç…§é¡ºåºæ‰§è¡Œä»¥åä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">cd GitHub</div><div class="line">sudo mkdir llvm</div><div class="line">sudo chown `whoami` llvm</div><div class="line">cd llvm</div><div class="line">export LLVM_HOME=`pwd`</div><div class="line"></div><div class="line">git clone -b release_39 https://git.coding.net/hanshenghui/llvm.git llvm</div><div class="line">git clone -b release_39 https://git.coding.net/hanshenghui/clangnew.git llvm/tools/clang</div><div class="line">git clone -b release_39 https://git.coding.net/hanshenghui/clang-tools-extra.git llvm/tools/clang/tools/extra</div><div class="line">git clone -b release_39 https://git.coding.net/hanshenghui/compiler-rt.git llvm/projects/compiler-rt</div><div class="line"></div><div class="line">mkdir llvm_build</div><div class="line">cd llvm_build</div><div class="line">cmake -G Xcode ../llvm -DCMAKE_BUILD_TYPE:STRING=MinSizeRel</div></pre></td></tr></table></figure>
<p>æœ€åä¸€å¥<code>cmake -G Xcode</code>æ˜¯å…³é”®ï¼Œç”¨è¿™ç§æ–¹å¼cmakeçš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨Xcodeæ¥ç¼–è¯‘åè¾¹çš„å·¥ç¨‹<br>æ‰§è¡Œå®Œæ¯•ä¹‹åä½ ä¼šå‘ç°ï¼Œåœ¨llvm_buildè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹è¾¹ä½ ä¼šå‘ç°æœ‰ä¸€ä¸ªLLVM.xcodeprojçš„æ–‡ä»¶ï¼Œæœ‰äº†è¿™ä¸ªæˆ‘ä»¬å¯ä»¥åƒiOSå¼€å‘æ ·å»ç¼–è¯‘ä»»ä½•ä¸€ä¸ªåº“äº†</p>
<h2 id="ç¼–å†™æ’ä»¶ä»£ç "><a href="#ç¼–å†™æ’ä»¶ä»£ç " class="headerlink" title="ç¼–å†™æ’ä»¶ä»£ç "></a>ç¼–å†™æ’ä»¶ä»£ç </h2><ul>
<li>è¿›å…¥æ–‡ä»¶<code>/llvm/tools/clang/examples</code>åœ¨é‡Œé¢æ–°å»ºä¸€ä¸ªç›®å½•å¦‚MyPlugin</li>
<li><p>ç„¶åä¿®æ”¹exampleç›®å½•çš„CMakeLists.txtæ–‡ä»¶ï¼Œæ·»åŠ ä¸€é¡¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">add_subdirectory(MyPlugin)</div></pre></td></tr></table></figure>
</li>
<li><p>ç„¶åè¿›å…¥åˆ›å»ºçš„MyPluginç›®å½•ï¼Œç”Ÿæˆä¸‰ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CodingStyleUtil.hpp</div><div class="line">MyPlugin.cpp</div><div class="line">CMakeLists.txt</div></pre></td></tr></table></figure>
</li>
</ul>
<p>CMakeLists.txtä¸­çš„å†…å®¹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">add_llvm_loadable_module(MyPlugin MyPlugin.cpp PLUGIN_TOOL clang)</div><div class="line"></div><div class="line">if(LLVM_ENABLE_PLUGINS AND (WIN32 OR CYGWIN))</div><div class="line">  target_link_libraries(MyPlugin $&#123;cmake_2_8_12_PRIVATE&#125;</div><div class="line">    clangAST</div><div class="line">    clangBasic</div><div class="line">    clangFrontend</div><div class="line">    LLVMSupport</div><div class="line">    )</div><div class="line">endif()</div></pre></td></tr></table></figure></p>
<p>CodingStyleUtil.hpp<br>ä¸»è¦æ˜¯ä¸€äº›å¤„ç†å­—ç¬¦ä¸²çš„å‡½æ•°</p>
<p>MyPlugin.cpp<br>è¿™ä¸ªæ–‡ä»¶æ˜¯å…³é”®æ‰€åœ¨ï¼Œå½“æˆ‘ä»¬ç¼–è¯‘æ’ä»¶çš„æ—¶å€™ï¼Œä¸»è¦å°±æ˜¯è¿™é‡Œçš„ä»£ç åœ¨èµ·ä½œç”¨ï¼Œå…ˆæ¥ä¸ªç®€åŒ–ç‰ˆçš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#include &quot;clang/Frontend/FrontendPluginRegistry.h&quot;</div><div class="line">#include &quot;clang/AST/AST.h&quot;</div><div class="line">#include &quot;clang/AST/ASTConsumer.h&quot;</div><div class="line">#include &quot;clang/Frontend/CompilerInstance.h&quot;</div><div class="line">#include &quot;clang/AST/RecursiveASTVisitor.h&quot;</div><div class="line">#include &quot;CodingStyleUtil.hpp&quot;</div><div class="line">#include &lt;fstream&gt;</div><div class="line"></div><div class="line">using namespace clang;</div><div class="line">using namespace std;</div><div class="line">using namespace llvm;</div><div class="line"></div><div class="line">string gSrcRootPath;</div><div class="line">static string kClassInterfPrefix = &quot;JR&quot;;</div><div class="line">static int kMethodParamMaxLen = 15;</div><div class="line">//static int kMethodParamMaxParamsSingleLine = 3;</div><div class="line">static int kMethodBodyMaxLines = 500;</div><div class="line"></div><div class="line">namespace MyPlugin</div><div class="line"> &#123;</div><div class="line"></div><div class="line">class MyPluginVisitor : public RecursiveASTVisitor&lt;MyPluginVisitor&gt;//è¿™é‡Œæˆ‘ä»¬è¦å£°æ˜ä¸€ä¸ªclassï¼Œè¿™ä¸ªclassæ˜¯ç»§æ‰¿è‡ªRecursiveASTVisitorçš„ï¼Œå¯ä»¥éšä¾¿å–åå­—ï¼Œå°–æ‹¬å·é‡Œè¾¹å°±æ˜¯è¿™ä¸ªvisitorçš„åå­—</div><div class="line">    &#123;</div><div class="line">    private:</div><div class="line">        CompilerInstance &amp;Instance;</div><div class="line">        ASTContext *Context;</div><div class="line">        string objcClsImpl;</div><div class="line">        bool objcIsInstanceMethod;</div><div class="line">        string objcSelector;</div><div class="line">        string objcMethodSrcCode;</div><div class="line">        </div><div class="line">    public:</div><div class="line">        </div><div class="line">        void setASTContext (ASTContext &amp;context)//è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªèƒ½æ–¹æ³•ï¼Œç”¨æ¥ä¾¿æ·çš„å¯¹contextè¿›è¡Œèµ‹å€¼æ“ä½œ</div><div class="line">        &#123;</div><div class="line">            this -&gt; Context = &amp;context;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        MyPluginVisitor (CompilerInstance &amp;Instance)</div><div class="line">        :Instance(Instance)</div><div class="line">        &#123;</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        bool VisitDecl(Decl *decl) &#123;//æ‰€æœ‰çš„å£°æ˜åˆ†æéƒ½éœ€è¦é‡è½½è¿™ä¸ªæ–¹æ³•</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    class MyPluginConsumer : public ASTConsumer</div><div class="line">    &#123;</div><div class="line">        CompilerInstance &amp;Instance;</div><div class="line">        std::set&lt;std::string&gt; ParsedTemplates;</div><div class="line">    public:</div><div class="line">        MyPluginConsumer(CompilerInstance &amp;Instance,</div><div class="line">                         std::set&lt;std::string&gt; ParsedTemplates)</div><div class="line">        : Instance(Instance), ParsedTemplates(ParsedTemplates), visitor(Instance) &#123;&#125;</div><div class="line">        </div><div class="line">        bool HandleTopLevelDecl(DeclGroupRef DG) override</div><div class="line">        &#123;</div><div class="line">            return true;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        void HandleTranslationUnit(ASTContext&amp; context) override</div><div class="line">        &#123;</div><div class="line">            visitor.setASTContext(context);</div><div class="line">            visitor.TraverseDecl(context.getTranslationUnitDecl());</div><div class="line">        &#125;</div><div class="line">    private:</div><div class="line">        MyPluginVisitor visitor;</div><div class="line">    &#125;;</div><div class="line">    //è¿™é‡Œæ˜¯æ‰€æœ‰å¤„ç†é€»è¾‘çš„å…¥å£ï¼Œåœ¨è¿™é‡Œè°ƒç”¨äº†consumer</div><div class="line">    class MyPluginASTAction : public PluginASTAction</div><div class="line">    &#123;</div><div class="line">        std::set&lt;std::string&gt; ParsedTemplates;</div><div class="line">    protected:</div><div class="line">        std::unique_ptr&lt;ASTConsumer&gt; CreateASTConsumer(CompilerInstance &amp;CI,</div><div class="line">                                                       llvm::StringRef) override</div><div class="line">        &#123;</div><div class="line">            return llvm::make_unique&lt;MyPluginConsumer&gt;(CI, ParsedTemplates);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        bool ParseArgs(const CompilerInstance &amp;CI,</div><div class="line">                       const std::vector&lt;std::string&gt; &amp;args) override &#123;</div><div class="line">            return true;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
<p>ç°åœ¨å…ˆå›åˆ°æºç æ ¹ç›®å½•ï¼Œä½¿ç”¨åŒæ ·çš„cmakeè¯­å¥æ¥æ›´æ–°Xcodeé¡¹ç›®ï¼Œæ›´æ–°å®ŒæˆååŸæ¥çš„é¡¹ç›®ä¼šå¤šå‡ºä¸€ä¸ªå«MyPluginçš„æ’ä»¶é¡¹ç›®ï¼Œç„¶åå¯¹è¿™ä¸ªæ’ä»¶é¡¹ç›®è¿›è¡Œç¼–è¯‘ã€‚ç¼–è¯‘æˆåŠŸåä¼šåœ¨Debug/libç›®å½•ä¸­å¤šå‡ºä¸€ä¸ªåå­—å«åšMyPlugin.dylibæ–‡ä»¶</p>
<p>åªæœ‰è¿™ä¸ªpluginæ–‡ä»¶æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå¯¹åº”çš„clangå’Œclang++ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶æ˜¯å“ªé‡Œæ¥çš„å‘¢ï¼Œç­”æ¡ˆå°±æ˜¯æˆ‘ä»¬è‡ªå·±ç¼–è¯‘çš„ï¼Œè¿™ä¸ªæ’ä»¶å’Œclangç‰ˆæœ¬å¿…é¡»æ˜¯å¯¹åº”çš„ï¼Œå¦åˆ™åœ¨è¿è¡Œå·¥ç¨‹çš„æ—¶å€™å°±ä¼šè¯´symbolä¸å­˜åœ¨ç­‰é”™è¯¯</p>
<h2 id="å®‰è£…è°ƒè¯•æ’ä»¶"><a href="#å®‰è£…è°ƒè¯•æ’ä»¶" class="headerlink" title="å®‰è£…è°ƒè¯•æ’ä»¶"></a>å®‰è£…è°ƒè¯•æ’ä»¶</h2><p>æ‰“å¼€è¦ä½¿ç”¨æ’ä»¶çš„Xcodeé¡¹ç›®ï¼Œåœ¨build settingsä¸€æ ä¸­å¯¹Other C Flagsä¸€é¡¹è¿›è¡Œç¼–è¾‘ï¼Œè°ƒæ•´ä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-Xclang -load -Xclang /Users/han/GitHub/llvm/llvm_build/Debug/lib/MyPlugin.dylib -Xclang -add-plugin -Xclang MyPlugin</div></pre></td></tr></table></figure></p>
<blockquote>
<p>æ³¨ï¼šæœ€åä¸€é¡¹-Xclang MyPluginä¸­çš„MyPluginä¸ºæ’ä»¶åå­—ï¼Œä¸€å®šè¦æ˜¯è‡ªå·±è®¾ç½®çš„æ’ä»¶åç§°ï¼Œå¦åˆ™æ— æ³•è°ƒç”¨æ’ä»¶</p>
</blockquote>
<p>è¿™ä¸ªæ—¶å€™è¿è¡Œä½ ä¼šå‘ç°æŠ¥é”™ï¼Œerror:unable to load plugin</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜éœ€è¦è°ƒæ•´Xcodeä¸­ä½¿ç”¨çš„Clangç¼–è¯‘å™¨ï¼Œå°†é»˜è®¤çš„ç¼–è¯‘å™¨æ”¹ä¸ºæˆ‘ä»¬è‡ªå·±ç¼–è¯‘å‡ºæ¥çš„ç¼–è¯‘å™¨ã€‚å…·ä½“çš„æ–¹æ³•æ˜¯åœ¨build settingsä¸­å†æ·»åŠ ä¸¤é¡¹è‡ªå®šä¹‰é¡¹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CC = /Users/han/GitHub/llvm/llvm_build/Debug/bin/clang</div><div class="line">CXX = &quot;/Users/han/GitHub/llvm/llvm_build/Debug/bin/clang+</div></pre></td></tr></table></figure></p>
<h2 id="clangæ’ä»¶ä½œç”¨èŒƒå›´"><a href="#clangæ’ä»¶ä½œç”¨èŒƒå›´" class="headerlink" title="clangæ’ä»¶ä½œç”¨èŒƒå›´"></a>clangæ’ä»¶ä½œç”¨èŒƒå›´</h2>]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ•°æ®ç»“æ„ç®—æ³•-æ¦‚è®º]]></title>
      <url>/2017/07/17/2018/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95-%E6%A6%82%E8%AE%BA/</url>
      <content type="html"><![CDATA[<h3 id="ç»ªè®º"><a href="#ç»ªè®º" class="headerlink" title="ç»ªè®º"></a>ç»ªè®º</h3><ul>
<li>ç®—æ³•ä¸ä¸€å®šæ˜¯ç¨‹åºï¼Œç®—æ³•éœ€è¦æœ‰ç©·æ€§</li>
<li>ç®—æ³•ç»„é‡è¦çš„æ˜¯æ•ˆç‡ï¼Œé€Ÿåº¦å°½å¯èƒ½å¿«ï¼Œå­˜å‚¨ç©ºé—´å°½å¯èƒ½å°‘</li>
<li>DSA</li>
</ul>
<h3 id="æ–¹æ³•è®º"><a href="#æ–¹æ³•è®º" class="headerlink" title="æ–¹æ³•è®º"></a>æ–¹æ³•è®º</h3><ul>
<li>å¦‚æœé—®é¢˜å®ä¾‹æœ‰å¾ˆå¤šï¼Œé‚£ä¹ˆå¾ˆæ˜æ˜¾æˆ‘ä»¬æ— æ³•ä¸€ä¸€è§£å†³ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ€è·¯å°±æ˜¯å¯¹é—®é¢˜è¿›è¡Œåˆ†ç±»ï¼Œç„¶åå»è§£å†³è¿™ä¸€ç±»é—®é¢˜</li>
<li>å¦‚æœä½ æƒ³æ”¹è¿›å’Œä¼˜åŒ–ä¸€ä¸ªä¸œè¥¿ï¼Œä½ é¦–å…ˆéœ€è¦èƒ½å¤Ÿå‡†ç¡®çš„æµ‹é‡å®ƒï¼Œä½ éœ€è¦ä¸€æŠŠå°ºå­</li>
<li>å¤æ‚çš„é—®é¢˜åªæœ‰ç®€åŒ–ä¹‹åæˆ‘ä»¬æ‰èƒ½æŠ“ä½ä¸»è¦çš„çŸ›ç›¾ï¼Œè€Œç®€åŒ–çš„æ–¹æ³•å°±æ˜¯å¿½ç•¥é‚£äº›ä¸é‡è¦çš„ä¸œè¥¿</li>
<li>å»ç²—å­˜ç²¾</li>
<li>è¿­ä»£ä¹ƒäººå·¥ï¼Œé€’å½’ä¹ƒç¥é€š</li>
<li>å‡¡æ²»ä¼—å¦‚æ²»å¯¡ï¼Œåˆ†è€Œæ²»ä¹‹</li>
<li>å¤æ‚é—®é¢˜åˆ†è§£ä¸ºä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯è§„æ¨¡å‡å°çš„é—®é¢˜ï¼Œå¦ä¸€ä¸ªæ˜¯å¹³å‡¡é—®é¢˜</li>
</ul>
<h3 id="ç®—æ³•åˆ†æ"><a href="#ç®—æ³•åˆ†æ" class="headerlink" title="ç®—æ³•åˆ†æ"></a>ç®—æ³•åˆ†æ</h3><p>æ—¶é—´æˆæœ¬å’Œç©ºé—´æˆæœ¬ï¼Œæˆ‘ä»¬æ›´å…³æ³¨æ—¶é—´æˆæœ¬</p>
<h2 id="æ¸è¿›åˆ†æ"><a href="#æ¸è¿›åˆ†æ" class="headerlink" title="æ¸è¿›åˆ†æ"></a>æ¸è¿›åˆ†æ</h2><h3 id="å¤§Oè®°å·"><a href="#å¤§Oè®°å·" class="headerlink" title="å¤§Oè®°å·"></a>å¤§Oè®°å·</h3><p>nè¶³å¤Ÿå¤§çš„æ—¶å€™æˆç«‹å°±å¥½</p>
<ul>
<li>å¸¸æ•°é¡¹å¯å¿½ç•¥</li>
<li>ä½æ¬¡é¡¹å¯å¿½ç•¥</li>
</ul>
<p><img src="/17/2018/æ•°æ®ç»“æ„ç®—æ³•-æ¦‚è®º/../../../images/Ojihao.png" alt="å¤§O"></p>
<h4 id="å…·ä½“çš„åˆ»åº¦"><a href="#å…·ä½“çš„åˆ»åº¦" class="headerlink" title="å…·ä½“çš„åˆ»åº¦"></a>å…·ä½“çš„åˆ»åº¦</h4><ul>
<li>O(1)ï¼Œå†å¤§çš„å¸¸æ•°éƒ½æ˜¯è¿™ä¸ªå¤æ‚åº¦2023x239238</li>
<li>O(logn)</li>
<li>O(n^c)å¤šé¡¹å¼å¤æ‚åº¦</li>
</ul>
<h3 id="å¤æ‚åº¦åˆ†æä¸»è¦æ–¹æ³•"><a href="#å¤æ‚åº¦åˆ†æä¸»è¦æ–¹æ³•" class="headerlink" title="å¤æ‚åº¦åˆ†æä¸»è¦æ–¹æ³•"></a>å¤æ‚åº¦åˆ†æä¸»è¦æ–¹æ³•</h3><ul>
<li>è¿­ä»£ï¼šçº§æ•°æ±‚å’Œ</li>
<li>é€’å½’ï¼šé€’å½’è·Ÿè¸ªå’Œé€’å½’æ–¹ç¨‹</li>
<li>çŒœæµ‹+éªŒè¯</li>
</ul>
<h4 id="çº§æ•°-è¿­ä»£"><a href="#çº§æ•°-è¿­ä»£" class="headerlink" title="çº§æ•°(è¿­ä»£)"></a>çº§æ•°(è¿­ä»£)</h4><p><img src="/17/2018/æ•°æ®ç»“æ„ç®—æ³•-æ¦‚è®º/../../../images/jishu.png" alt=""><br><img src="/17/2018/æ•°æ®ç»“æ„ç®—æ³•-æ¦‚è®º/../../../images/jishu1.png" alt=""><br><img src="/17/2018/æ•°æ®ç»“æ„ç®—æ³•-æ¦‚è®º/../../../images/jishu2.png" alt=""><br><img src="/17/2018/æ•°æ®ç»“æ„ç®—æ³•-æ¦‚è®º/../../../images/jishu3.png" alt=""></p>
<p>ä¼°ç®—ï¼š</p>
<ul>
<li>ä¸€å¤©æ˜¯10^5s</li>
<li>ä¸€ä¸–çºªæ˜¯3 x 10^9</li>
<li>æ™®é€šçš„pcä¸€ç§’æ˜¯10^9æ¬¡è¿ç®—</li>
<li>æœ€å‰å®³çš„æœºå™¨æ˜¯10^15æ¬¡è¿ç®—</li>
</ul>
<h4 id="é€’å½’-æ›´é«˜çº§çš„åšæ³•ï¼Œä½†æ˜¯æ•ˆç‡ä¸åº”æœ€å¥½"><a href="#é€’å½’-æ›´é«˜çº§çš„åšæ³•ï¼Œä½†æ˜¯æ•ˆç‡ä¸åº”æœ€å¥½" class="headerlink" title="é€’å½’(æ›´é«˜çº§çš„åšæ³•ï¼Œä½†æ˜¯æ•ˆç‡ä¸åº”æœ€å¥½)"></a>é€’å½’(æ›´é«˜çº§çš„åšæ³•ï¼Œä½†æ˜¯æ•ˆç‡ä¸åº”æœ€å¥½)</h4><p><img src="/17/2018/æ•°æ®ç»“æ„ç®—æ³•-æ¦‚è®º/../../../images/fenerzhizhi.png" alt=""></p>
]]></content>
      
        
        <tags>
            
            <tag> æ•°æ®ç»“æ„ç®—æ³• </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[è‡ªç„¶è¯­è¨€å¤„ç†æ¦‚å¿µåŸºç¡€]]></title>
      <url>/2017/06/27/2018/%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E6%A6%82%E5%BF%B5%E5%9F%BA%E7%A1%80/</url>
      <content type="html"><![CDATA[<p>markAllAsReadSuccess<br>åˆ†è¯ï¼Œè¯é¢‘ï¼Œè¯æ€§</p>
<p><a href="https://m.jr.jd.com/bzx/fillpolicy.html?iteamid=10000103&amp;source=jrm&amp;sid=" target="_blank" rel="external">https://m.jr.jd.com/bzx/fillpolicy.html?iteamid=10000103&amp;source=jrm&amp;sid=</a></p>
<p><a href="http://m.jr.jd.com/bzx/fillpolicy.html?iteamid=10000901&amp;source=jrm" target="_blank" rel="external">http://m.jr.jd.com/bzx/fillpolicy.html?iteamid=10000901&amp;source=jrm</a></p>
]]></content>
      
        
    </entry>
    
    <entry>
      <title><![CDATA[itchatä½¿ç”¨æ€»ç»“]]></title>
      <url>/2017/06/14/2017/itchat%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<h3 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">itchat.auto_login()</div></pre></td></tr></table></figure>
<h3 id="æŸ¥æ‰¾å¥½å‹"><a href="#æŸ¥æ‰¾å¥½å‹" class="headerlink" title="æŸ¥æ‰¾å¥½å‹"></a>æŸ¥æ‰¾å¥½å‹</h3><blockquote>
<p>è·å–ä»»ä½•ä¸€é¡¹ç­‰äºnameé”®å€¼çš„ç”¨æˆ·<br>itchat.search_friends(name=â€™littlecodershâ€™)<br>è¿™é‡Œçš„nameæ˜¯RemarkNameâ€™, â€˜NickNameâ€™, â€˜Alias</p>
</blockquote>
<h3 id="å‘é€ä¸­æ–‡"><a href="#å‘é€ä¸­æ–‡" class="headerlink" title="å‘é€ä¸­æ–‡"></a>å‘é€ä¸­æ–‡</h3><p>è¦è¿›è¡Œä¸€ä¸ªè½¬æ¢<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">f = open(path,&apos;r&apos;)</div><div class="line">text = f.read()</div><div class="line">text = text.decode(&apos;utf-8&apos;)</div></pre></td></tr></table></figure></p>
]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[åˆ©ç”¨hexoæ­å»ºå›¢é˜Ÿåšå®¢ç³»ç»Ÿ]]></title>
      <url>/2017/06/12/2018/%E5%88%A9%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E5%9B%A2%E9%98%9F%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/</url>
      <content type="html"><![CDATA[<h3 id="hexoæ­å»ºä¸ªäººåšå®¢çš„åŸç†"><a href="#hexoæ­å»ºä¸ªäººåšå®¢çš„åŸç†" class="headerlink" title="hexoæ­å»ºä¸ªäººåšå®¢çš„åŸç†"></a>hexoæ­å»ºä¸ªäººåšå®¢çš„åŸç†</h3><ul>
<li>å°†mdæ¸²æŸ“ä¸ºhtml</li>
<li>å°†htmlä»¥åŠèµ„æºæ–‡ä»¶ä¸Šä¼ åˆ°githubï¼Œåˆ©ç”¨githubpagesåŠŸèƒ½è¿›è¡Œå±•ç¤º</li>
<li>è§£æçš„è¿‡ç¨‹æ˜¯å°†ç›®å½•ä¸‹source/_postæ–‡ä»¶ä¸­çš„ä¸œè¥¿ï¼Œæ¸²æŸ“ä¸ºpublickä¸­çš„htmlæ–‡ä»¶ï¼Œç„¶åå°†è¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å¤åˆ¶åˆ°.deploy_gitæ–‡ä»¶ä¸‹ï¼Œç„¶ååˆ©ç”¨gitæ“ä½œå°†è¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶pushåˆ°å¯¹åº”çš„gitåº“<a id="more"></a>
</li>
</ul>
<h3 id="ä½¿ç”¨hexoåˆ¶ä½œå›¢é˜Ÿåšå®¢çš„å›°éš¾"><a href="#ä½¿ç”¨hexoåˆ¶ä½œå›¢é˜Ÿåšå®¢çš„å›°éš¾" class="headerlink" title="ä½¿ç”¨hexoåˆ¶ä½œå›¢é˜Ÿåšå®¢çš„å›°éš¾"></a>ä½¿ç”¨hexoåˆ¶ä½œå›¢é˜Ÿåšå®¢çš„å›°éš¾</h3><ul>
<li>å†…ç½‘ä¸èƒ½ç›´æ¥ä¾èµ–äºgithub</li>
<li>å›¢é˜Ÿå¼€å‘çš„æƒé™ç®¡ç†é—®é¢˜</li>
<li>å›¢é˜Ÿå¼€å‘çš„ä½œè€…è¯†åˆ«é—®é¢˜</li>
<li>å›¢é˜Ÿå¼€å‘çš„æ–‡ä»¶å†²çªé—®é¢˜</li>
</ul>
<h3 id="é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ"><a href="#é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ"></a>é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ</h3>]]></content>
      
        
        <tags>
            
            <tag> hexo </tag>
            
            <tag> python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Pythonå¤šè¿›ç¨‹é€šä¿¡å’Œè°ƒç”¨]]></title>
      <url>/2017/06/12/2018/Python%E5%A4%9A%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E5%92%8C%E8%B0%83%E7%94%A8/</url>
      <content type="html"><![CDATA[<h2 id="pythonå¤šè¿›ç¨‹é€šä¿¡"><a href="#pythonå¤šè¿›ç¨‹é€šä¿¡" class="headerlink" title="pythonå¤šè¿›ç¨‹é€šä¿¡"></a>pythonå¤šè¿›ç¨‹é€šä¿¡</h2><blockquote>
<p>è¿™é‡Œè§£å†³çš„ä¸»è¦æ˜¯ï¼Œå¦‚æœæ˜¯å¯åŠ¨ä¸€ä¸ªå‘½ä»¤è¡Œï¼Œç„¶åæ‰§è¡Œä¸€ä¸ªpythonè„šæœ¬ï¼Œå¦‚æœæœ‰å¤šä¸ªpythonè„šæœ¬å°±éœ€è¦å¤šä¸ªå‘½ä»¤è¡Œç¨‹åºï¼Œè¿™ä¸æ˜¯å¾ˆæ˜æ™ºçš„é€‰æ‹©ï¼Œæœ€å¥½çš„åšæ³•æ˜¯ï¼Œä¸€ä¸ªå‘½ä»¤è¡Œæå®šæ‰€æœ‰çš„pythonè„šæœ¬ï¼Œè¿™é‡Œå°±æ¶‰åŠåˆ°ä¸¤ä¸ªé—®é¢˜</p>
<ul>
<li>å¦‚ä½•åšåˆ°å¹¶å‘</li>
<li>å¦‚ä½•åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªpythonçš„æ‰§è¡Œå…¥å£<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div></pre></td><td class="code"><pre><div class="line">#coding:utf-8</div><div class="line"></div><div class="line">import os,re,time</div><div class="line">import multiprocessing,commands,shutil,subprocess</div><div class="line">from pymongo import MongoClient</div><div class="line"></div><div class="line">lock = multiprocessing.Lock()</div><div class="line"></div><div class="line">def func(name, processName, pipe):</div><div class="line">    p_info = &apos;Process[%s]  hello %s&apos; % (processName, name)</div><div class="line">    print &apos;pipe send: &apos;, p_info</div><div class="line">    pipe.send(p_info)</div><div class="line">    </div><div class="line">    print &apos;sub pid: %d, ppid: %d&apos; % (os.getpid(), os.getppid())</div><div class="line">    time.sleep(0.1)</div><div class="line"></div><div class="line">def serverForPull(name,pipe):</div><div class="line"></div><div class="line">    path = &apos;/Users/jdjr/Desktop/branches.txt&apos;</div><div class="line"></div><div class="line">    while True:</div><div class="line">        time.sleep(3)</div><div class="line">        newpath = &apos;/Users/jdjr/Desktop/gradleDir&apos;</div><div class="line">        if os.path.exists(newpath) == True:</div><div class="line">            os.chdir(&apos;/Users/jdjr/Documents/Build/JDJRAPPAndroid&apos;)</div><div class="line"></div><div class="line">            currentbranch = &apos;&apos;</div><div class="line"></div><div class="line">            branch = os.popen(&apos;git branch&apos;).read()</div><div class="line"></div><div class="line">            lines = branch.split(&apos;\n&apos;)</div><div class="line">            for item in lines:</div><div class="line">                if &apos;*&apos; in item:</div><div class="line">                   currentbranch = item[2:]</div><div class="line"></div><div class="line">            p = subprocess.Popen(&quot;gradle assembleDebug&quot;,shell=True,stdout=subprocess.PIPE)</div><div class="line"></div><div class="line">            indexcount = 0</div><div class="line"></div><div class="line">            returncode = p.poll()</div><div class="line"></div><div class="line">            while returncode is None:</div><div class="line">                  text = p.stdout.readline().strip()</div><div class="line">                  f = open(&apos;/Users/jdjr/Desktop/buildlog.txt&apos;,&apos;a&apos;)</div><div class="line">                  f.write(text)</div><div class="line">                  f.close()</div><div class="line">        </div><div class="line">                  mc = MongoClient(&quot;localhost&quot;,27017)</div><div class="line">                  db = mc.package</div><div class="line">                  post_info = db.index</div><div class="line"></div><div class="line">                  dbs = post_info.find(&#123;&apos;branchname&apos;:currentbranch&#125;)</div><div class="line">                  count = 0</div><div class="line">                  itemc = &#123;&#125;</div><div class="line">                  for itemn in dbs:</div><div class="line">                      itemc = itemn</div><div class="line">                      count = count + 1</div><div class="line"></div><div class="line">                  if count == 0:</div><div class="line">                     post_info.save(&#123;&apos;branchname&apos;:currentbranch,&apos;count&apos;:indexcount,&apos;time&apos;:0,&apos;lastcount&apos;:0&#125;)</div><div class="line">                  else:</div><div class="line">                     ctime = itemc[&apos;time&apos;]</div><div class="line">                     lastcount = itemc[&apos;lastcount&apos;]</div><div class="line">                     </div><div class="line">                     if &apos;Total time:&apos; in text:</div><div class="line">                         indexnew = text.find(&apos;:&apos;)</div><div class="line">                         newtime = text[indexnew + 1:]</div><div class="line"></div><div class="line">                         post_info.update(&#123;&apos;branchname&apos;:currentbranch&#125;,&#123;&apos;branchname&apos;:currentbranch,&apos;count&apos;:indexcount,&apos;time&apos;:newtime,&apos;lastcount&apos;:lastcount&#125;)</div><div class="line">                     else:</div><div class="line">                         post_info.update(&#123;&apos;branchname&apos;:currentbranch&#125;,&#123;&apos;branchname&apos;:currentbranch,&apos;count&apos;:indexcount,&apos;time&apos;:ctime,&apos;lastcount&apos;:lastcount&#125;)</div><div class="line"></div><div class="line"></div><div class="line">                     if &apos;BUILD SUCCESSFUL&apos; in text:</div><div class="line">                         post_info.update(&#123;&apos;branchname&apos;:currentbranch&#125;,&#123;&apos;branchname&apos;:currentbranch,&apos;count&apos;:0,&apos;time&apos;:ctime,&apos;lastcount&apos;:indexcount&#125;)</div><div class="line">                     else:</div><div class="line">                         post_info.update(&#123;&apos;branchname&apos;:currentbranch&#125;,&#123;&apos;branchname&apos;:currentbranch,&apos;count&apos;:indexcount,&apos;time&apos;:ctime,&apos;lastcount&apos;:lastcount&#125;)</div><div class="line"></div><div class="line">                  indexcount = indexcount + 1</div><div class="line">        </div><div class="line">                  returncode = p.poll()</div><div class="line">        </div><div class="line">            f1 = open(&apos;/Users/jdjr/Desktop/buildlog.txt&apos;,&apos;r&apos;)</div><div class="line">            texts = f1.read()</div><div class="line">            f1.close()</div><div class="line">            if &apos;BUILD FAILED&apos; in texts:</div><div class="line">                (status, output) = commands.getstatusoutput(&apos;gradle assembleDebug&apos;)</div><div class="line">                f2 = open(&apos;/Users/jdjr/Desktop/buildlog.txt&apos;,&apos;w&apos;)</div><div class="line">                texts = f2.write(output)</div><div class="line">                f2.close()</div><div class="line"></div><div class="line">            shutil.rmtree(newpath)</div><div class="line"></div><div class="line">            time.sleep(2)</div><div class="line"></div><div class="line">            mc = MongoClient(&quot;localhost&quot;,27017)</div><div class="line">            db = mc.package</div><div class="line">            post_info = db.index</div><div class="line"></div><div class="line">            post_info.update(&#123;&apos;branchname&apos;:currentbranch&#125;,&#123;&apos;branchname&apos;:currentbranch,&apos;count&apos;:20,&apos;time&apos;:0,&apos;lastcount&apos;:indexcount&#125;)</div><div class="line"></div><div class="line">        if os.path.exists(path):</div><div class="line">            f1 = open(path,&apos;r&apos;)</div><div class="line">            lists = f1.readlines()</div><div class="line"></div><div class="line">            if len(lists) == 2:</div><div class="line">               dir = lists[0]</div><div class="line">               branch = lists[1]</div><div class="line">               </div><div class="line">               if &apos;JDJRAPPAndroid&apos; in dir:</div><div class="line">                  dir = &apos;/Users/jdjr/Documents/Build/JDJRAPPAndroid&apos;</div><div class="line"></div><div class="line">               if &apos;JDMobileNew&apos; in dir:</div><div class="line">                  dir = &apos;/Users/wxg/Documents/JDMobileNew&apos;</div><div class="line"></div><div class="line">               if len(dir) &gt; 0:</div><div class="line">                   print dir</div><div class="line">              </div><div class="line">                   os.chdir(dir)         </div><div class="line">                   (status, output) = commands.getstatusoutput(&apos;git pull origin %s&apos; % branch)</div><div class="line">                   f1 = open(&apos;/Users/jdjr/Desktop/buildlog.txt&apos;,&apos;r&apos;)</div><div class="line">                   text = f1.read()</div><div class="line">                   f1.close()</div><div class="line"></div><div class="line">                   f1 = open(&apos;/Users/jdjr/Desktop/buildlog.txt&apos;,&apos;w&apos;)</div><div class="line">                   text1 = text + &apos;\n&apos; + output + &apos;%i&apos; % status</div><div class="line">                   f1.write(text1)</div><div class="line">                   f1.close()</div><div class="line"></div><div class="line">                   f2 = open(path,&apos;w&apos;)</div><div class="line">                   f2.write(&apos;&apos;)</div><div class="line">                   f2.close()</div><div class="line"></div><div class="line">            f1.close()</div><div class="line"></div><div class="line">def monitorForBlog(name,pipe):</div><div class="line">    lastTimeStr = &apos;&apos;</div><div class="line">    while True:</div><div class="line">      time.sleep(3)</div><div class="line">      os.chdir(&apos;/Users/jdjr/Documents/Blog/blogsource&apos;)</div><div class="line">      </div><div class="line">#      os.chdir(&apos;/usr/local/var/www&apos;)</div><div class="line"></div><div class="line">      (status, output) = commands.getstatusoutput(&apos;git pull origin blog&apos;)</div><div class="line"></div><div class="line">      (status, output) = commands.getstatusoutput(&apos;git log&apos;)</div><div class="line"></div><div class="line">      f = open(&apos;/Users/jdjr/Documents/Blog/logcommit.txt&apos;,&apos;w&apos;)</div><div class="line">      f.write(output)</div><div class="line">      f.close()</div><div class="line"></div><div class="line">      f1 = open(&apos;/Users/jdjr/Documents/Blog/logcommit.txt&apos;,&apos;r&apos;)</div><div class="line">      lines = f1.readlines()</div><div class="line">      firstline = lines[0]</div><div class="line">      f1.close()</div><div class="line"></div><div class="line">      if lastTimeStr != firstline:</div><div class="line">          print &apos;æ¨é€ä¸€æ¬¡åšå®¢&apos;</div><div class="line">          sourcepath = &apos;/Users/jdjr/Documents/Blog/blog/source&apos;</div><div class="line">          </div><div class="line">          if os.path.exists(sourcepath):</div><div class="line">             shutil.rmtree(sourcepath)</div><div class="line">          </div><div class="line">          shutil.copytree(&apos;/Users/jdjr/Documents/Blog/blogsource/source&apos;,&apos;/Users/jdjr/Documents/Blog/blog/source&apos;)</div><div class="line"></div><div class="line">          os.chdir(&apos;/Users/jdjr/Documents/Blog/blog&apos;)</div><div class="line"></div><div class="line">#          os.popen(&apos;hexo clean&apos;)</div><div class="line">          os.system(&apos;hexo clean&apos;)</div><div class="line">          os.system(&apos;hexo g&apos;)</div><div class="line">          </div><div class="line">          filepath = &apos;/usr/local/var/www&apos;</div><div class="line">          if os.path.exists(filepath):</div><div class="line">             shutil.rmtree(filepath)</div><div class="line"></div><div class="line">          publicfile = &apos;/Users/jdjr/Documents/Blog/blog/public&apos;</div><div class="line">          while not os.path.exists(publicfile):</div><div class="line">                time.sleep(1)</div><div class="line">#                print &apos;not exist&apos;</div><div class="line"></div><div class="line">          shutil.move(publicfile,filepath)</div><div class="line">          </div><div class="line">          lastTimeStr = firstline</div><div class="line">          print lastTimeStr</div><div class="line"></div><div class="line"></div><div class="line">def main():</div><div class="line">    print &apos;main pid: %d, ppid: %d&apos; % (os.getpid(), os.getppid())</div><div class="line">    </div><div class="line">    # æ³¨æ„ï¼š æ­¤å¤„æ˜¯Pipeæ¥è‡ªmultiprocessing.Pipe(), å…¶æ¥æºäº multiprocessing.connection import Pipe</div><div class="line">    pipe_parent, pipe_child = multiprocessing.Pipe(duplex=False)</div><div class="line">    </div><div class="line">    processList = []</div><div class="line">#    for i in xrange(4):</div><div class="line">#    pro = multiprocessing.Process(target=func, args=(&apos;ceshi&apos;, &apos;Process-&apos; + str(10), pipe_child))</div><div class="line">#    pro.start()</div><div class="line">#    processList.append(pro)</div><div class="line">#    </div><div class="line">#    pro1 = multiprocessing.Process(target=func1, args=(&apos;waha&apos;,pipe_child))</div><div class="line">#    pro1.start()</div><div class="line">#    processList.append(pro1)</div><div class="line">#    </div><div class="line">#    pro2 = multiprocessing.Process(target=func2, args=(&apos;heihei&apos;,pipe_child))</div><div class="line">#    pro2.start()</div><div class="line">#    processList.append(pro2)</div><div class="line"></div><div class="line">    pro3 = multiprocessing.Process(target=serverForPull, args=(&apos;heihei&apos;,pipe_child))</div><div class="line">    pro3.start()</div><div class="line">    processList.append(pro3)</div><div class="line"></div><div class="line">    pro4 = multiprocessing.Process(target=monitorForBlog, args=(&apos;heihei&apos;,pipe_child))</div><div class="line">    pro4.start()</div><div class="line">    processList.append(pro4)</div><div class="line">    </div><div class="line">    for pro in processList:</div><div class="line">        pro.join()      # åœ¨æ­¤å¤„é˜»å¡å­è¿›ç¨‹ï¼Œå¯å®ç°å¼‚æ­¥æ‰§è¡Œæ•ˆæœï¼Œç›´è‡³å­è¿›ç¨‹å…¨éƒ¨å®Œæˆåå†ç»§ç»­æ‰§è¡Œçˆ¶è¿›ç¨‹</div><div class="line">    </div><div class="line">    pipe_child.send(None)   # æ­¤å¤„ç­‰å…¨éƒ¨å­è¿›ç¨‹æ‰§è¡Œå®Œæˆåï¼Œè¾“å…¥&apos;None&apos;æ ‡è®°ï¼Œè¡¨ç¤ºPipeç»“æŸæ¥æ”¶ä»»åŠ¡ï¼Œå¯ä»¥é€€å‡º</div><div class="line"></div><div class="line">    while pipe_parent:</div><div class="line">          p_info = pipe_parent.recv()</div><div class="line">          print &apos;pipe get: &apos;, p_info</div><div class="line">        </div><div class="line">          if not p_info:      # å¦‚æœæ¥æ”¶åˆ°äº†&apos;None&apos;æ ‡è®°ï¼Œé€€å‡ºPipe</div><div class="line">             print &apos;pipe get:  None, then exit out.&apos;</div><div class="line">             break</div><div class="line"></div><div class="line"># æµ‹è¯•</div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    main()</div><div class="line">    print(&apos;end.&apos;)</div></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
]]></content>
      
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[macä¸‹ä½¿ç”¨virtualboxå®‰è£…win7ä»¥åŠè®¾ç½®å…±äº«æ–‡ä»¶]]></title>
      <url>/2017/05/25/2017/mac%E4%B8%8B%E4%BD%BF%E7%94%A8virtualbox%E5%AE%89%E8%A3%85win7%E4%BB%A5%E5%8F%8A%E8%AE%BE%E7%BD%AE%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6/</url>
      <content type="html"><![CDATA[<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>é¦–å…ˆè¿›å…¥win7-peç¯å¢ƒï¼Œç„¶åè¿›è¡Œåˆ†åŒºï¼Œè¿™é‡Œçš„å…³é”®åœ¨äºcç›˜è¦å¤§äº10G</p>
<h3 id="è®¾ç½®å…±äº«æ–‡ä»¶å¤¹"><a href="#è®¾ç½®å…±äº«æ–‡ä»¶å¤¹" class="headerlink" title="è®¾ç½®å…±äº«æ–‡ä»¶å¤¹"></a>è®¾ç½®å…±äº«æ–‡ä»¶å¤¹</h3><p>è¦å®ç°macä¸windowsçš„æ–‡ä»¶å…±äº«ï¼Œä¿¡æ¯äº’é€šï¼Œéœ€è¦æœ‰ä¸€ä¸ªéƒ½å¯ä»¥è®¿é—®çš„æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œçš„å…³é”®æ˜¯ï¼Œè¦é¦–å…ˆå®‰è£…virtualboxçš„deviceä¸‹çš„insert Guest Additions CD image</p>
]]></content>
      
        
        <tags>
            
            <tag> mac </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[åŸºäºDjangoçš„å¹³å°æ„å»ºç¬”è®°(2)]]></title>
      <url>/2017/05/18/2017/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E5%B9%B3%E5%8F%B0%E6%9E%84%E5%BB%BA%E7%AC%94%E8%AE%B0(2)/</url>
      <content type="html"><![CDATA[<h3 id="pythonä¸­Jsonå­—ç¬¦ä¸²çš„åˆ›å»ºä¸javascriptä¸­jsonå­—ç¬¦ä¸²çš„è½¬æ¢"><a href="#pythonä¸­Jsonå­—ç¬¦ä¸²çš„åˆ›å»ºä¸javascriptä¸­jsonå­—ç¬¦ä¸²çš„è½¬æ¢" class="headerlink" title="pythonä¸­Jsonå­—ç¬¦ä¸²çš„åˆ›å»ºä¸javascriptä¸­jsonå­—ç¬¦ä¸²çš„è½¬æ¢"></a>pythonä¸­Jsonå­—ç¬¦ä¸²çš„åˆ›å»ºä¸javascriptä¸­jsonå­—ç¬¦ä¸²çš„è½¬æ¢</h3><a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">import json</div><div class="line"></div><div class="line">def getindex(indexname):</div><div class="line"></div><div class="line">    datas = []</div><div class="line"></div><div class="line">    for item in namelist:</div><div class="line">    </div><div class="line">        pes.append(dic) </div><div class="line">        pes = json.dumps(pes)</div><div class="line">        datas.append(pes)</div><div class="line"></div><div class="line">    datas = json.dumps(datas)</div><div class="line">    return datas</div></pre></td></tr></table></figure>
<p>ä»”ç»†çœ‹ä¸Šè¾¹è¿™æ®µpythonæˆ‘ä»¬èƒ½å¾—å‡ºæ¥ä¸€ä¸ªç»“è®ºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨jsonè¿™ä¸ªåŠŸèƒ½ï¼Œå°†ä¸€ä¸ªpythonä¸­çš„åˆ—è¡¨ï¼Œè½¬æ¢ä¸ºä¸€æ®µå­—ç¬¦ä¸²ï¼Œç„¶åè¿”å›å‡ºå»ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å°±æ˜¯ä¸€æ®µjsonå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™æ®µjsonå­—ç¬¦ä¸²åè¿‡æ¥è½¬æ¢æˆä¸€ä¸ªæ•°ç»„</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥ç…ç…ï¼Œå¦‚ä½•å°†ä¸€ä¸ªjsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ªjsonæ•°ç»„</p>
<blockquote>
<p>é¦–å…ˆè¯´æ˜åŸºæœ¬åŠŸèƒ½ï¼š</p>
</blockquote>
<p>dumpsæ˜¯å°†dictè½¬åŒ–æˆstræ ¼å¼ï¼Œloadsæ˜¯å°†strè½¬åŒ–æˆdictæ ¼å¼ã€‚</p>
<p>dumpå’Œloadä¹Ÿæ˜¯ç±»ä¼¼çš„åŠŸèƒ½ï¼Œåªæ˜¯ä¸æ–‡ä»¶æ“ä½œç»“åˆèµ·æ¥äº†ã€‚</p>
<p>çœ‹ä»£ç å®ä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">In [1]: import json</div><div class="line"></div><div class="line">In [2]: a = &#123;&apos;name&apos;: &apos;wang&apos;, &apos;age&apos;: 29&#125;</div><div class="line"></div><div class="line">In [3]: b = json.dumps(a)</div><div class="line"></div><div class="line">In [4]: print b, type(b)</div><div class="line">&#123;&quot;age&quot;: 29, &quot;name&quot;: &quot;wang&quot;&#125; &lt;type &apos;str&apos;&gt;</div><div class="line"></div><div class="line">In [11]: json.loads(b)</div><div class="line">Out[11]: &#123;u&apos;age&apos;: 29, u&apos;name&apos;: u&apos;wang&apos;&#125;</div><div class="line"></div><div class="line">In [12]: print type(json.loads(b))</div><div class="line">&lt;type &apos;dict&apos;&gt;</div></pre></td></tr></table></figure>
<p>ç„¶åå†çœ‹dumpå’Œdumpsçš„åŒºåˆ«ï¼Œè§ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">In [1]: import json</div><div class="line"></div><div class="line">In [2]: a = &#123;&apos;name&apos;: &apos;wang&apos;, &apos;age&apos;: 29&#125;</div><div class="line"></div><div class="line">In [3]: b = json.dumps(a)</div><div class="line"></div><div class="line">In [4]: print b, type(b)</div><div class="line">&#123;&quot;age&quot;: 29, &quot;name&quot;: &quot;wang&quot;&#125; &lt;type &apos;str&apos;&gt;</div><div class="line"></div><div class="line">In [5]: c = json.dump(a)</div><div class="line">---------------------------------------------------------------------------</div><div class="line">TypeError                                 Traceback (most recent call last)</div><div class="line">&lt;ipython-input-5-92dc0d929363&gt; in &lt;module&gt;()</div><div class="line">----&gt; 1 c = json.dump(a)</div><div class="line"></div><div class="line">TypeError: dump() takes at least 2 arguments (1 given)</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæç¤ºæˆ‘ä»¬å°‘ä¸€ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å¸®åŠ©æ–‡ä»¶ï¼ˆiPyhtonä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨help(json.dumps)æ¥æŸ¥çœ‹å¸®åŠ©æ–‡ä»¶ï¼‰ï¼š</p>
<p>dumps(obj, skipkeys=False, ensure_ascii=True, check_circular=True, allow_nan=True, cls=None, indent=None, separators=None, encoding=â€™utf-8â€™, default=None, sort_keys=False, **kw)<br>Serialize <code>obj</code> to a JSON formatted <code>str</code>.</p>
<p>dump(obj, fp, skipkeys=False, ensure_ascii=True, check_circular=True, allow_nan=True, cls=None, indent=None, separators=None, encoding=â€™utf-8â€™, default=None, sort_keys=False, **kw)<br>Serialize <code>obj</code> as a JSON formatted stream to <code>fp</code> (a<br><code>.write()</code>-supporting file-like object).</p>
<p>ç®€å•è¯´å°±æ˜¯dumpéœ€è¦ä¸€ä¸ªç±»ä¼¼äºæ–‡ä»¶æŒ‡é’ˆçš„å‚æ•°ï¼ˆå¹¶ä¸æ˜¯çœŸçš„æŒ‡é’ˆï¼Œå¯ç§°ä¹‹ä¸ºç±»æ–‡ä»¶å¯¹è±¡ï¼‰ï¼Œå¯ä»¥ä¸æ–‡ä»¶æ“ä½œç»“åˆï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥å°†dictè½¬æˆstrç„¶åå­˜å…¥æ–‡ä»¶ä¸­ï¼›è€Œdumpsç›´æ¥ç»™çš„æ˜¯strï¼Œä¹Ÿå°±æ˜¯å°†å­—å…¸è½¬æˆstrã€‚</p>
<p>ä¾‹å­è§ä»£ç ï¼ˆæ³¨æ„æ–‡ä»¶æ“ä½œçš„ä¸€äº›å°ç»†èŠ‚ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">In [1]: import json</div><div class="line"></div><div class="line">In [2]: a = &#123;&apos;name&apos;: &apos;wang&apos;&#125;</div><div class="line"></div><div class="line">In [3]: fp = file(&apos;test.txt&apos;, &apos;w&apos;)</div><div class="line"></div><div class="line">In [4]: type(fp)</div><div class="line">Out[4]: file</div><div class="line"></div><div class="line">In [5]: json.dump(a, fp)</div><div class="line"></div><div class="line">In [6]: cat test.txt</div><div class="line"></div><div class="line">In [7]: fp.close()</div><div class="line"></div><div class="line">In [8]: cat test.txt</div><div class="line">&#123;&quot;name&quot;: &quot;wang&quot;&#125;</div><div class="line">In [9]: json.load(fp)</div><div class="line">---------------------------------------------------------------------------</div><div class="line">ValueError                                Traceback (most recent call last)</div><div class="line">&lt;ipython-input-9-0064dabedb17&gt; in &lt;module&gt;()</div><div class="line">----&gt; 1 json.load(fp)</div><div class="line"></div><div class="line">/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.pyc in load(fp, encoding, cls, object_hook, parse_float, parse_int, parse_constant, object_pairs_hook, **kw)</div><div class="line">285</div><div class="line">286     &quot;&quot;&quot;</div><div class="line">--&gt; 287     return loads(fp.read(),</div><div class="line">288         encoding=encoding, cls=cls, object_hook=object_hook,</div><div class="line">289         parse_float=parse_float, parse_int=parse_int,</div><div class="line"></div><div class="line">ValueError: I/O operation on closed file</div><div class="line"></div><div class="line">In [10]: fp = file(&apos;test.txt&apos;, &apos;r&apos;)</div><div class="line"></div><div class="line">In [11]: json.load(fp)</div><div class="line">Out[11]: &#123;u&apos;name&apos;: u&apos;wang&apos;&#125;</div><div class="line">æ³¨ï¼šå®é™…ä¸­dumpç”¨çš„è¾ƒå°‘ã€‚</div></pre></td></tr></table></figure>
<h3 id="javascriptä¸­å¦‚ä½•å°†ä¸€æ®µjsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºjsonå¯¹è±¡"><a href="#javascriptä¸­å¦‚ä½•å°†ä¸€æ®µjsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºjsonå¯¹è±¡" class="headerlink" title="javascriptä¸­å¦‚ä½•å°†ä¸€æ®µjsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºjsonå¯¹è±¡"></a>javascriptä¸­å¦‚ä½•å°†ä¸€æ®µjsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºjsonå¯¹è±¡</h3><p>var obj = JSON.parse(data);</p>
<h3 id="webä¸­ä¸Šä¼ æ–‡ä»¶ï¼Œå¸¦è¿›åº¦æ¡çš„åšæ³•"><a href="#webä¸­ä¸Šä¼ æ–‡ä»¶ï¼Œå¸¦è¿›åº¦æ¡çš„åšæ³•" class="headerlink" title="webä¸­ä¸Šä¼ æ–‡ä»¶ï¼Œå¸¦è¿›åº¦æ¡çš„åšæ³•"></a>webä¸­ä¸Šä¼ æ–‡ä»¶ï¼Œå¸¦è¿›åº¦æ¡çš„åšæ³•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;upload&quot;&gt;</div><div class="line"></div><div class="line">     &lt;form&gt;</div><div class="line">        &#123;% csrf_token %&#125;</div><div class="line">        &lt;input type=&quot;file&quot; id=&apos;file&apos; class=&apos;file&apos; style=&quot;margin-top: 5px;margin-left: 10px&quot; name=&quot;file&quot;&gt;&lt;br&gt;</div><div class="line">        &lt;div id=&apos;1&apos; style=&quot;margin-top: 40px;margin-left: 10px;height:10px;width:200px;border-color: rgba(110,3,120,1);border:1px solid gray;float:left;margin-right:10px;&quot;&gt;</div><div class="line">            &lt;div id=&apos;2&apos; style=&quot;height:100%;width:0px;background:rgba(220,220,220,1);&quot;&gt;&lt;/div&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">        &lt;a style=&quot;position: absolute;top: 72px;;margin-right:25px&quot; id=&apos;3&apos;&gt;0%&lt;/a&gt;</div><div class="line"></div><div class="line">        &lt;button type=&quot;button&quot; style=&quot;margin-top: 32px;margin-left: 50px;&quot; onclick=&quot;upload();&quot;&gt;ä¸Šä¼ &lt;/button&gt;</div><div class="line"></div><div class="line">    &lt;/form&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<p>æ˜¯è¦å®šä¹‰ä¸€ä¸ªfile,ä¸‹è¾¹æ˜¯jsçš„ä»£ç ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸Šä¼ åŠŸèƒ½</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">function upload() &#123;</div><div class="line"></div><div class="line">            var apktextinput = document.getElementById(&apos;apkname&apos;)</div><div class="line">            var apkname = apktextinput.value</div><div class="line"></div><div class="line">            if (apkname.length == 0) &#123;</div><div class="line">                alert(&apos;è¯·è¾“å…¥è¯ä¹¦åç§°&apos;)</div><div class="line">                return</div><div class="line">            &#125;</div><div class="line"></div><div class="line">			var xhr = new XMLHttpRequest();</div><div class="line">			var file = document.getElementById(&apos;file&apos;).files[0];   //å–å¾—æ–‡ä»¶æ•°æ®ï¼Œè€Œ.fileå¯¹è±¡åªæ˜¯æ–‡ä»¶ä¿¡æ¯</div><div class="line">			var form = new FormData();   //FormDataæ˜¯HTML5ä¸ºå®ç°åºåˆ—åŒ–è¡¨å•è€Œæä¾›çš„ç±»ï¼Œæ›´å¤šç»†èŠ‚å¯è‡ªè¡ŒæŸ¥è¯¢</div><div class="line">            form.append(&apos;file&apos;,file);   //è¿™é‡Œä¸ºåºåˆ—åŒ–è¡¨å•å¯¹è±¡formæ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå³file</div><div class="line">			xhr.upload.addEventListener(&apos;progress&apos;,on_progress,false);     //xhrå¯¹è±¡å«æœ‰ä¸€ä¸ªuploadå¯¹è±¡ï¼Œå®ƒæœ‰ä¸€ä¸ªprogressäº‹ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸Šä¼ è¿‡ç¨‹ä¸­ä¼šè¢«ä¸æ–­è§¦å‘ï¼Œæˆ‘ä»¬ä¸ºè¿™ä¸ªäº‹ä»¶å¯¹åº”ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œæ¯å½“äº‹ä»¶è§¦å‘å°±ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œäºæ˜¯ä¾¿å¯åˆ©ç”¨è¿™ä¸ªå‡½æ•°æ¥ä¿®æ”¹å½“å‰è¿›åº¦ï¼Œæ›´å¤šç»†èŠ‚å¯è‡ªè¡ŒæŸ¥è¯¢</div><div class="line">			xhr.open(&apos;POST&apos;,&apos;http://10.13.8.12:89/uploadAPK/&apos;,true);  //è¯·å°†urlæ”¹æˆä¸Šä¼ url</div><div class="line">            xhr.setRequestHeader(&apos;X-CSRFTOKEN&apos;,&apos;&#123;&#123; request.COOKIES.csrftoken &#125;&#125;&apos;);   //æ­¤å¤„ä¸ºDjangoè¦æ±‚ï¼Œå¯æ— è§†ï¼Œæˆ–è€…æ¢æˆç›¸åº”åå°æ‰€è¦æ±‚çš„CSRFé˜²æŠ¤ï¼Œä¸æ˜¯djangoç”¨æˆ·è¯·å»æ‰</div><div class="line">			xhr.send(form);   //å‘é€è¡¨å•</div><div class="line">		&#125;</div></pre></td></tr></table></figure>
<p>é‡ç‚¹æ˜¯<code>xhr.upload.addEventListener(&#39;progress&#39;,on_progress,false);</code>è¿™ä¸ªæ–¹æ³•ä¼šä¿è¯ä¸Šä¼ è¿‡ç¨‹ä¸­ä¸æ–­çš„å›è°ƒæˆ‘ä»¬æ¥å®ç°on_progress</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">function on_progress(evt) &#123;       //çœ‹è¿™ä¸ªå‡½æ•°ä¹‹å‰å…ˆçœ‹uploadå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ªevt(event)å¯¹è±¡(ç»†èŠ‚è‡ªè¡ŒæŸ¥è¯¢progress)ï¼Œä»–æœ‰3ä¸ªå±æ€§lengthComputableï¼Œloadedï¼Œtotalï¼Œç¬¬ä¸€ä¸ªå±æ€§æ˜¯ä¸ªboolç±»å‹çš„ï¼Œä»£è¡¨æ˜¯å¦æ”¯æŒï¼Œç¬¬äºŒä¸ªä»£è¡¨å½“å‰ä¸Šä¼ çš„å¤§å°ï¼Œç¬¬ä¸‰ä¸ªä¸ºæ€»çš„å¤§å°ï¼Œç”±æ­¤ä¾¿å¯ä»¥è®¡ç®—å‡ºå®æ—¶ä¸Šä¼ çš„ç™¾åˆ†æ¯”</div><div class="line">		if(evt.lengthComputable) &#123;</div><div class="line">			var ele = document.getElementById(&apos;2&apos;);</div><div class="line">			var percent = Math.round((evt.loaded) * 100 / evt.total);</div><div class="line">               if (percent == 100 &amp;&amp; strongapk == 1) &#123;</div><div class="line">                   strongapk = 0</div><div class="line">                   var textcontent = document.getElementById(&quot;wating&quot;)</div><div class="line">                   textcontent.style.display = &apos;block&apos;</div><div class="line"></div><div class="line">                   var apktextinput = document.getElementById(&apos;apkname&apos;)</div><div class="line">                   var apkname = apktextinput.value</div><div class="line"></div><div class="line">                    $.ajax(&#123;</div><div class="line">                       url: &quot;/startstrongapk/&quot;,    //åå°webserviceé‡Œçš„æ–¹æ³•åç§°</div><div class="line">                       data:&#123;&quot;apkname&quot;:apkname&#125;,</div><div class="line">                       type: &quot;post&quot;,</div><div class="line">                       traditional: true,</div><div class="line">                       success: function (data) &#123;</div><div class="line">                           downloadurl = data</div><div class="line">                           alert(data)</div><div class="line">                           $(&quot;#wating&quot;).css(&apos;display&apos;,&apos;none&apos;);</div><div class="line">                           if (confirm(&quot;ä½ ç¡®å®šè¦ä¸‹è½½æ–‡ä»¶å—ï¼Ÿ&quot;)) &#123;</div><div class="line">                               self.location=(&apos;downloadsdk?url=&apos; + data)</div><div class="line">                           &#125;</div><div class="line">                       &#125;,</div><div class="line">                       error: function (msg) &#123;</div><div class="line">                           alert(msg)</div><div class="line">                           $(&quot;#wating&quot;).css(&apos;display&apos;,&apos;none&apos;);</div><div class="line">                       &#125;</div><div class="line">                  &#125;);</div><div class="line"></div><div class="line">               &#125;</div><div class="line">			ele.style.width = percent + &apos;%&apos;;</div><div class="line">			document.getElementById(&apos;3&apos;).innerHTML = percent + &apos;%&apos;;</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬åœ¨percentè¾¾åˆ°100ä¹‹åï¼Œè°ƒç”¨ajaxåšä¸€äº›äº‹æƒ…</p>
<h3 id="djangoä¸­æ¥å£è°ƒç”¨çš„æ–¹å¼æ€»ç»“"><a href="#djangoä¸­æ¥å£è°ƒç”¨çš„æ–¹å¼æ€»ç»“" class="headerlink" title="djangoä¸­æ¥å£è°ƒç”¨çš„æ–¹å¼æ€»ç»“"></a>djangoä¸­æ¥å£è°ƒç”¨çš„æ–¹å¼æ€»ç»“</h3><p>ç½‘ç»œæ–¹æ³•è°ƒç”¨å¤§è‡´æœ‰è¿™ä¹ˆå‡ ç§</p>
<h4 id="ç‚¹å‡»æŒ‰é’®è·³è½¬æ–°é¡µé¢"><a href="#ç‚¹å‡»æŒ‰é’®è·³è½¬æ–°é¡µé¢" class="headerlink" title="ç‚¹å‡»æŒ‰é’®è·³è½¬æ–°é¡µé¢"></a>ç‚¹å‡»æŒ‰é’®è·³è½¬æ–°é¡µé¢</h4><p>è¿™ç§ç›´æ¥ç”¨<a>æ ‡ç­¾ï¼Œç„¶åç”¨hrefå°±å¥½</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;a class=&quot;button&quot; id=&quot;ios&quot; style=&quot;position: absolute;top: 50px;&quot; href=&quot;jinkensios&quot; onmouseover=&quot;showDetailText(this)&quot; onmouseout=&quot;clearTest()&quot;&gt;â— æ‰“åŒ…(iOS)&lt;/a&gt;</div></pre></td></tr></table></figure>
<h4 id="ç‚¹å‡»æŒ‰é’®åˆ·æ–°å±€éƒ¨æ•°æ®"><a href="#ç‚¹å‡»æŒ‰é’®åˆ·æ–°å±€éƒ¨æ•°æ®" class="headerlink" title="ç‚¹å‡»æŒ‰é’®åˆ·æ–°å±€éƒ¨æ•°æ®"></a>ç‚¹å‡»æŒ‰é’®åˆ·æ–°å±€éƒ¨æ•°æ®</h4><h5 id="è¿™ç§æœ€å¥½æ˜¯é¢„å…ˆåŸ‹ä¼å¥½ajaxï¼Œç„¶åç”¨idç»‘å®šï¼Œç‚¹å‡»ä¹‹åç›´æ¥è°ƒç”¨"><a href="#è¿™ç§æœ€å¥½æ˜¯é¢„å…ˆåŸ‹ä¼å¥½ajaxï¼Œç„¶åç”¨idç»‘å®šï¼Œç‚¹å‡»ä¹‹åç›´æ¥è°ƒç”¨" class="headerlink" title="è¿™ç§æœ€å¥½æ˜¯é¢„å…ˆåŸ‹ä¼å¥½ajaxï¼Œç„¶åç”¨idç»‘å®šï¼Œç‚¹å‡»ä¹‹åç›´æ¥è°ƒç”¨"></a>è¿™ç§æœ€å¥½æ˜¯é¢„å…ˆåŸ‹ä¼å¥½ajaxï¼Œç„¶åç”¨idç»‘å®šï¼Œç‚¹å‡»ä¹‹åç›´æ¥è°ƒç”¨</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$(document).ready(function()&#123;</div><div class="line">      $(&quot;#btn&quot;).click(function()&#123;</div><div class="line">        string = $(&quot;#textarea1&quot;).val()</div><div class="line">        $.get(&quot;/ajaxcreateui/&quot;, &#123;&apos;text&apos;: string&#125;,function(ret)&#123;</div><div class="line">            $(&apos;#textarea2&apos;).html(ret)</div><div class="line">        &#125;)</div><div class="line">      &#125;);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<ul>
<li><code>$(document).ready(function(){}</code>é¢„å…ˆåŸ‹ä¼çš„å†™æ³•è¦å†™åœ¨è¿™å¥ä»£ç é‡Œè¾¹</li>
<li><code>$(&quot;#btn&quot;).click(function(){}</code>è¿™ä¸ªæ˜¯é¢„å…ˆåŸ‹ä¼</li>
<li><code>$.get(&quot;/ajaxcreateui/&quot;, {&#39;text&#39;: string},function(ret){}</code>ajaxçš„getè°ƒç”¨</li>
</ul>
<h5 id="ç›´æ¥ä½¿ç”¨XMLHttpRequest"><a href="#ç›´æ¥ä½¿ç”¨XMLHttpRequest" class="headerlink" title="ç›´æ¥ä½¿ç”¨XMLHttpRequest"></a>ç›´æ¥ä½¿ç”¨XMLHttpRequest</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">var progresshttp;</div><div class="line">function getprogress() &#123;</div><div class="line"></div><div class="line">    progresshttp=null;</div><div class="line">    if (window.XMLHttpRequest)</div><div class="line">      &#123;// code for all new browsers</div><div class="line">      progresshttp=new XMLHttpRequest();</div><div class="line">      &#125;</div><div class="line">    else if (window.ActiveXObject)</div><div class="line">      &#123;// code for IE5 and IE6</div><div class="line">      progresshttp=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</div><div class="line">      &#125;</div><div class="line"></div><div class="line">    if (progresshttp!=null)</div><div class="line">      &#123;</div><div class="line">          progresshttp.onreadystatechange=progressstate_Change;</div><div class="line">          progresshttp.open(&quot;POST&quot;,&apos;getpackprogress&apos;,false);</div><div class="line">          var formData = new FormData();</div><div class="line">          formData.append(&apos;branchname&apos;, branchname);</div><div class="line">          progresshttp.send(formData);</div><div class="line">      &#125;</div><div class="line">    else</div><div class="line">      &#123;</div><div class="line">      alert(&quot;Your browser does not support XMLHTTP.&quot;);</div><div class="line">      &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function progressstate_Change()</div><div class="line">&#123;</div><div class="line">if (progresshttp.readyState==4)</div><div class="line">  &#123;// 4 = &quot;loaded&quot;</div><div class="line">  if (progresshttp.status==200)</div><div class="line">    &#123;// 200 = OK</div><div class="line"></div><div class="line">      num = this.responseText</div><div class="line"></div><div class="line">      var ele = document.getElementById(&apos;12&apos;);</div><div class="line">      var percent = num * 100;</div><div class="line">      percent = percent.toFixed(2)</div><div class="line">      if (percent &gt;= 100.00) &#123;</div><div class="line">          percent = 100.00</div><div class="line">      &#125;</div><div class="line">      ele.style.width = percent + &apos;%&apos;;</div><div class="line">      document.getElementById(&apos;13&apos;).innerHTML = percent + &apos;%&apos;;</div><div class="line">      if (percent &gt;= 100) &#123;</div><div class="line">          window.clearInterval(waitinterval)</div><div class="line">          ele.style.width = 100 + &apos;%&apos;;</div><div class="line">          var text = document.getElementById(&apos;building&apos;)</div><div class="line">          text.innerHTML = &quot;&quot;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  else</div><div class="line">    &#123;</div><div class="line">    alert(&quot;Problem retrieving XML data&quot;);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ·»åŠ å›è°ƒçš„æ–¹å¼</p>
<blockquote>
<ul>
<li><code>xhr.upload.addEventListener(&#39;progress&#39;,on_progress,false);</code>è¿›åº¦æ¡</li>
<li><code>progresshttp.onreadystatechange=progressstate_Change</code>äº‹ä»¶å›è°ƒ</li>
</ul>
</blockquote>
<h4 id="æŸä¸ªäº‹ä»¶è°ƒç”¨ç»“æŸåˆ·æ–°å±€éƒ¨æ•°æ®"><a href="#æŸä¸ªäº‹ä»¶è°ƒç”¨ç»“æŸåˆ·æ–°å±€éƒ¨æ•°æ®" class="headerlink" title="æŸä¸ªäº‹ä»¶è°ƒç”¨ç»“æŸåˆ·æ–°å±€éƒ¨æ•°æ®"></a>æŸä¸ªäº‹ä»¶è°ƒç”¨ç»“æŸåˆ·æ–°å±€éƒ¨æ•°æ®</h4><p>ç›´æ¥ä½¿ç”¨ajaxæˆ–è€…XMLHttpRequestå°±å¥½</p>
<h3 id="pythonä¸­è°ƒç”¨å‘½ä»¤è¡Œéšæ—¶è¾“å‡ºçš„åšæ³•"><a href="#pythonä¸­è°ƒç”¨å‘½ä»¤è¡Œéšæ—¶è¾“å‡ºçš„åšæ³•" class="headerlink" title="pythonä¸­è°ƒç”¨å‘½ä»¤è¡Œéšæ—¶è¾“å‡ºçš„åšæ³•"></a>pythonä¸­è°ƒç”¨å‘½ä»¤è¡Œéšæ—¶è¾“å‡ºçš„åšæ³•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">p = subprocess.Popen(&quot;gradle assembleDebug&quot;,shell=True,stdout=subprocess.PIPE)</div><div class="line"></div><div class="line">indexcount = 0</div><div class="line"></div><div class="line">returncode = p.poll()</div><div class="line"></div><div class="line">while returncode is None:</div><div class="line">      text = p.stdout.readline().strip()</div><div class="line">      f = open(&apos;/Users/jdjr/Desktop/buildlog.txt&apos;,&apos;a&apos;)#è¿½åŠ æ‰“å¼€æ–¹å¼</div><div class="line">      f.write(text)</div><div class="line">      f.close()</div><div class="line">        </div><div class="line">      returncode = p.poll()</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
            <tag> Django </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[mongodbä½¿ç”¨å°ç»“]]></title>
      <url>/2017/05/17/2017/mongodb%E4%BD%BF%E7%94%A8%E5%B0%8F%E7%BB%93/</url>
      <content type="html"><![CDATA[<h3 id="åˆ›å»ºä¸€ä¸ªmongoæ•°æ®åº“"><a href="#åˆ›å»ºä¸€ä¸ªmongoæ•°æ®åº“" class="headerlink" title="åˆ›å»ºä¸€ä¸ªmongoæ•°æ®åº“"></a>åˆ›å»ºä¸€ä¸ªmongoæ•°æ®åº“</h3><a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">from pymongo import MongoClient</div><div class="line">import json,time</div><div class="line"></div><div class="line">connection = MongoClient(&quot;localhost&quot;,27017)</div><div class="line">mydb = connection.mydb # new a database</div><div class="line">myser = mydb.allindex # new a table</div></pre></td></tr></table></figure>
<h3 id="æŸ¥"><a href="#æŸ¥" class="headerlink" title="æŸ¥"></a>æŸ¥</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">dicn = &#123;&#125;</div><div class="line">dicn[&apos;indexname&apos;] = item</div><div class="line">dicn[&apos;date&apos;] = dateString</div><div class="line">dbs = myser.find(dicn)</div><div class="line"></div><div class="line">for item in dbs:</div><div class="line"></div><div class="line">  dic = &#123;&#125;</div><div class="line">  datestring = item[&apos;date&apos;]</div><div class="line">  datestring = datestring.encode(&apos;utf-8&apos;)</div><div class="line">  dic[&apos;date&apos;] = datestring</div><div class="line">  dic[&apos;earyeild&apos;] = item[&apos;earyeild&apos;]</div><div class="line">  dic[&apos;indexname&apos;] = item[&apos;indexname&apos;]</div></pre></td></tr></table></figure>
<blockquote>
</blockquote>
<p>MongoDBæä¾›äº†ä¸€ç»„æ¯”è¾ƒæ“ä½œç¬¦ï¼š$lt/$lte/$gt/$gte/$neï¼Œä¾æ¬¡ç­‰ä»·äº&lt;/&lt;=/&gt;/&gt;=/!=ã€‚</p>
<ul>
<li><p>ä¸‹é¢çš„ç¤ºä¾‹è¿”å›ç¬¦åˆæ¡ä»¶age &gt;= 18 &amp;&amp; age &lt;= 40çš„æ–‡æ¡£ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; db.test.find(&#123;&quot;age&quot;:&#123;&quot;$gte&quot;:18, &quot;$lte&quot;:40&#125;&#125;)</div><div class="line">&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>ä¸‹é¢çš„ç¤ºä¾‹è¿”å›æ¡ä»¶ç¬¦åˆname != â€œstephen1â€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; db.test.find(&#123;&quot;name&quot;:&#123;&quot;$ne&quot;:&quot;stephen1&quot;&#125;&#125;)</div><div class="line">&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>$inç­‰åŒäºSQLä¸­çš„inï¼Œä¸‹é¢çš„ç¤ºä¾‹ç­‰åŒäºSQLä¸­çš„in (â€œstephenâ€,â€stephen1â€)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; db.test.find(&#123;&quot;name&quot;:&#123;&quot;$in&quot;:[&quot;stephen&quot;,&quot;stephen1&quot;]&#125;&#125;)</div><div class="line">&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>å’ŒSQLä¸åŒçš„æ˜¯ï¼ŒMongoDBçš„in listä¸­çš„æ•°æ®å¯ä»¥æ˜¯ä¸åŒç±»å‹ã€‚è¿™ç§æƒ…å†µå¯ç”¨äºä¸åŒç±»å‹çš„åˆ«ååœºæ™¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; db.test.find(&#123;&quot;name&quot;:&#123;&quot;$in&quot;:[&quot;stephen&quot;,123]&#125;&#125;)</div><div class="line">&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>$ninç­‰åŒäºSQLä¸­çš„not inï¼ŒåŒæ—¶ä¹Ÿæ˜¯$inçš„å–åã€‚å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; db.test.find(&#123;&quot;name&quot;:&#123;&quot;$nin&quot;:[&quot;stephen2&quot;,&quot;stephen1&quot;]&#125;&#125;)</div><div class="line">&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>$orç­‰åŒäºSQLä¸­çš„orï¼Œ$oræ‰€é’ˆå¯¹çš„æ¡ä»¶è¢«æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œæ¯ä¸ªæ•°ç»„å…ƒç´ è¡¨ç¤ºorçš„ä¸€ä¸ªæ¡ä»¶ã€‚<br>ä¸‹é¢çš„ç¤ºä¾‹ç­‰åŒäºname = â€œstephen1â€ or age = 35</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; db.test.find(&#123;&quot;$or&quot;: [&#123;&quot;name&quot;:&quot;stephen1&quot;&#125;, &#123;&quot;age&quot;:35&#125;]&#125;)</div><div class="line">&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•æ··åˆä½¿ç”¨$orå’Œ$inã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; db.test.find(&#123;&quot;$or&quot;: [&#123;&quot;name&quot;:&#123;&quot;$in&quot;:[&quot;stephen&quot;,&quot;stephen1&quot;]&#125;&#125;, &#123;&quot;age&quot;:36&#125;]&#125;)</div><div class="line">&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>$notè¡¨ç¤ºå–åï¼Œç­‰åŒäºSQLä¸­çš„notã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; db.test.find(&#123;&quot;name&quot;: &#123;&quot;$not&quot;: &#123;&quot;$in&quot;:[&quot;stephen2&quot;,&quot;stephen1&quot;]&#125;&#125;&#125;)</div><div class="line">&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="å¢"><a href="#å¢" class="headerlink" title="å¢"></a>å¢</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">myser.save(&#123;&apos;æŒ‡æ•°åç§°&apos;:item,&apos;å¸‚ç›ˆç‡&apos;:pe,&apos;ç›ˆåˆ©æ”¶ç›Šç‡&apos;:roe,&apos;æ—¥æœŸ&apos;:date,&apos;å¸‚å‡€ç‡&apos;:pb,&apos;è‚¡æ¯ç‡&apos;:rate&#125;)</div></pre></td></tr></table></figure>
<h3 id="æ—¶é—´çš„ç”¨æ³•"><a href="#æ—¶é—´çš„ç”¨æ³•" class="headerlink" title="æ—¶é—´çš„ç”¨æ³•"></a>æ—¶é—´çš„ç”¨æ³•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">current = time.localtime(time.time())</div><div class="line">year = current.tm_year</div><div class="line">month = current.tm_mon</div><div class="line">day = current.tm_mday</div><div class="line"></div><div class="line">yearStr = &apos;%i&apos; % year</div><div class="line">yearList = list(yearStr)</div><div class="line">yearStr1 = yearList[-1]</div><div class="line">yearStr2 = yearList[-2]</div><div class="line">yearStr = yearStr2 + yearStr1</div><div class="line"></div><div class="line">monthStr = months[month - 1]</div><div class="line"></div><div class="line">targetStr = &apos;idx_%i%s%s&apos; % (day,monthStr,yearStr)</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> mongo </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSå·¥ç¨‹å°çŸ¥è¯†]]></title>
      <url>/2017/02/26/2017/iOS%E5%B7%A5%E7%A8%8B%E5%B0%8F%E7%9F%A5%E8%AF%86/</url>
      <content type="html"><![CDATA[<h3 id="1-å‡ºç°ï¼ˆ-linker-command-failed-with-exit-code-1ï¼‰"><a href="#1-å‡ºç°ï¼ˆ-linker-command-failed-with-exit-code-1ï¼‰" class="headerlink" title="1:å‡ºç°ï¼ˆ linker command failed with exit code 1ï¼‰"></a>1:å‡ºç°ï¼ˆ linker command failed with exit code 1ï¼‰</h3><p>å¦‚æœå…·ä½“çš„é”™è¯¯æ˜¯è¿™ä¸ªä¸ç¬¬ä¸‰æ–¹.aåº“é‡å¤ï¼Œé‚£ä¹ˆè¦æ›´æ”¹çš„æ˜¯ï¼Œç±»åå’Œå…¨å±€å˜é‡çš„åå­—<br><a id="more"></a></p>
<h3 id="2-SEGV-ACCERRé”™è¯¯"><a href="#2-SEGV-ACCERRé”™è¯¯" class="headerlink" title="2.SEGV_ACCERRé”™è¯¯"></a>2.SEGV_ACCERRé”™è¯¯</h3><p>è¯´æ˜å¯¹è±¡è¢«è¿‡åº¦é‡Šæ”¾ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰åœ¨=nilä¹‹ååˆä½¿ç”¨äº†è¯¥å¯¹è±¡ï¼Œæ¯”å¦‚è¯´è¿™æ®µä»£ç <br>case MessageComposeResultSent:<br>        {<br>            //ä¿¡æ¯ä¼ é€æˆåŠŸ<br>//            [JRMsgShow showMsg:@â€å‘é€æˆåŠŸâ€];<br>            if (self.closeBlock) {<br>                self.closeBlock();<br>            }<br>            if (self.messageSuccessBlock) {<br>                self.messageSuccessBlock();<br>            }<br>            [[UIApplication sharedApplication].keyWindow.rootViewController dismissViewControllerAnimated:YES completion:nil];<br>        }</p>
<p>å¾ˆæ˜æ˜¾å‰è¾¹æˆ‘ä»¬ä½¿ç”¨äº†closeblockï¼Œè¿™ä¸ªblockä¹‹è¡Œä¹‹åï¼Œå¾ˆå¿«selfä¼šæ­»æ‰ï¼Œè€Œè¿™ä¸ªä¹‹åæˆ‘ä»¬åˆä½¿ç”¨äº†self.messageSuccessBlockè¿™æ ·å†æ¬¡ä½¿ç”¨selfï¼Œå¿…ç„¶å¯¼è‡´å´©æºƒï¼Œä¸è¿‡è¿™æ˜¯åœ¨iOS8ä¸Šé¢ï¼Œåœ¨iOS9å’Œ10ä¸Šå°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œè¯´æ˜è‹¹æœåšäº†ç³»ç»Ÿçº§çš„ä¼˜åŒ–</p>
<h3 id="3-å‚æ•°ä¼ é€’å°½é‡è¦ç”¨modelï¼Œå“ªæ€•æ˜¯å›è°ƒï¼Œå› ä¸ºå¯èƒ½åè¾¹ä¼šå¢åŠ éœ€æ±‚ï¼Œé‚£ä¹ˆå‚æ•°ä¼ é€’å°†ä¼šå˜å¾—å¾ˆæ¶å¿ƒ"><a href="#3-å‚æ•°ä¼ é€’å°½é‡è¦ç”¨modelï¼Œå“ªæ€•æ˜¯å›è°ƒï¼Œå› ä¸ºå¯èƒ½åè¾¹ä¼šå¢åŠ éœ€æ±‚ï¼Œé‚£ä¹ˆå‚æ•°ä¼ é€’å°†ä¼šå˜å¾—å¾ˆæ¶å¿ƒ" class="headerlink" title="3.å‚æ•°ä¼ é€’å°½é‡è¦ç”¨modelï¼Œå“ªæ€•æ˜¯å›è°ƒï¼Œå› ä¸ºå¯èƒ½åè¾¹ä¼šå¢åŠ éœ€æ±‚ï¼Œé‚£ä¹ˆå‚æ•°ä¼ é€’å°†ä¼šå˜å¾—å¾ˆæ¶å¿ƒ"></a>3.å‚æ•°ä¼ é€’å°½é‡è¦ç”¨modelï¼Œå“ªæ€•æ˜¯å›è°ƒï¼Œå› ä¸ºå¯èƒ½åè¾¹ä¼šå¢åŠ éœ€æ±‚ï¼Œé‚£ä¹ˆå‚æ•°ä¼ é€’å°†ä¼šå˜å¾—å¾ˆæ¶å¿ƒ</h3>]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å®šæ—¶æ£€æŸ¥ç½‘é¡µæ›´æ–°å¹¶å‘é€å¾®ä¿¡æ¶ˆæ¯]]></title>
      <url>/2017/02/16/2017/%E5%AE%9A%E6%97%B6%E6%A3%80%E6%9F%A5%E7%BD%91%E9%A1%B5%E6%9B%B4%E6%96%B0%E5%B9%B6%E5%8F%91%E9%80%81%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF/</url>
      <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"># -*- coding: utf-8 -*-</div><div class="line">import urllib2,time,urllib</div><div class="line"></div><div class="line">    while True:</div><div class="line">    current = time.localtime(time.time())</div><div class="line"></div><div class="line">    year = current.tm_year</div><div class="line">    month = current.tm_mon</div><div class="line">    day = current.tm_mday</div><div class="line"></div><div class="line">    hour = current.tm_hour</div><div class="line">    minite = current.tm_min</div><div class="line">    sec = current.tm_sec</div><div class="line">    if sec == 0:</div><div class="line"></div><div class="line">    downLoadStr = &apos;http://www.bjjs.gov.cn/bjjs/fwgl/zzxspzf/index.shtml&apos;</div><div class="line">    print downLoadStr</div><div class="line">    try:</div><div class="line">        i_headers = &#123;&quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.1) Gecko/20090624 Firefox/3.5&quot;,\</div><div class="line">        &quot;Referer&quot;: &apos;http://www.baidu.com&apos;&#125;</div><div class="line">        req = urllib2.Request(downLoadStr, headers=i_headers)</div><div class="line">        f = urllib2.urlopen(req)</div><div class="line">        data = f.read()</div><div class="line"></div><div class="line">        date = &apos;&apos;</div><div class="line">        if month &lt; 10 and day &lt; 10:</div><div class="line">            date = &apos;%i-0%i-0%i&apos; % (year, month, day)</div><div class="line">        elif month &gt; 10 and day &lt; 10:</div><div class="line">            date = &apos;%i-%i-0%i&apos; % (year, month, day)</div><div class="line">        elif month &lt; 10 and day &gt; 10:    </div><div class="line">            date = &apos;%i-0%i-%i&apos; % (year, month, day)</div><div class="line">        else:</div><div class="line">            date = &apos;%i-%i-%i&apos; % (year, month, day)   </div><div class="line"></div><div class="line">        string = &apos;the web has update http://www.bjjs.gov.cn/bjjs/fwgl/zzxspzf/index.shtml&apos;</div><div class="line">        print date</div><div class="line">        if date in data:</div><div class="line">            f = open(&apos;update.txt&apos;,&apos;w&apos;)</div><div class="line">            f.write(date + string)</div><div class="line">            f.close()</div><div class="line">            print &apos;yes&apos;</div><div class="line">        else:</div><div class="line">            print &apos;no&apos;    </div><div class="line"></div><div class="line">    except Exception,ex:</div><div class="line">        print ex</div><div class="line"></div><div class="line"></div><div class="line">#import itchat</div><div class="line">#</div><div class="line">#itchat.auto_login()</div><div class="line">#</div><div class="line">#itchat.send(&apos;Hello, filehelper&apos;, toUserName=&apos;filehelper&apos;)</div><div class="line"></div><div class="line">#while True:</div><div class="line">#     f = open(&apos;update.txt&apos;,&apos;r&apos;)</div><div class="line">#     text = f.read()</div><div class="line">#     f.close()</div><div class="line">#     if len(text) != 0:</div><div class="line">#        f = open(&apos;update.txt&apos;,&apos;w&apos;)</div><div class="line">#        f.write(&apos;&apos;)</div><div class="line">#        f.close()</div><div class="line">#        itchat.send(&apos;the web has update http://www.bjjs.gov.cn/bjjs/fwgl/zzxspzf/index.shtml&apos;, toUserName=&apos;Liu647ziqi&apos;)</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æŒ‡æ•°è‡ªåŠ¨è·å–]]></title>
      <url>/2017/02/16/2017/%E6%8C%87%E6%95%B0%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96/</url>
      <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div></pre></td><td class="code"><pre><div class="line"># -*- coding: utf-8 -*-</div><div class="line">import urllib2,time,urllib</div><div class="line">import ast,os,sys,string</div><div class="line">from pymongo import MongoClient</div><div class="line"></div><div class="line">months = [&apos;Jan&apos;,&apos;Feb&apos;,&apos;Mar&apos;,&apos;Apr&apos;,&apos;May&apos;,&apos;Jun&apos;,&apos;Jul&apos;,&apos;Aug&apos;,&apos;Sep&apos;,&apos;Oct&apos;,&apos;Nov&apos;,&apos;Dec&apos;]</div><div class="line">dicts = &#123;&apos;zsgz00&apos;:&apos;no&apos;,&apos;zsgz10&apos;:&apos;ä¸Šè¯æŒ‡æ•°&apos;,&apos;zsgz20&apos;:&apos;ä¸Šè¯180&apos;,&apos;zsgz30&apos;:&apos;ä¸Šè¯50&apos;,&apos;zsgz40&apos;:&apos;æ²ªæ·±300&apos;,&apos;zsgz50&apos;:&apos;æ·±è¯æˆæŒ‡&apos;,&apos;zsgz60&apos;:&apos;æ·±è¯100R&apos;,&apos;zsgz70&apos;:&apos;ä¸­å°æ¿æŒ‡&apos;,&apos;zsgz80&apos;:&apos;ä¸Šè¯380&apos;,&apos;zsgz90&apos;:&apos;çº¢åˆ©æŒ‡æ•°&apos;,&apos;zsgz100&apos;:&apos;ä¸­è¯çº¢åˆ©&apos;,&apos;zsgz110&apos;:&apos;ä¸­è¯500&apos;&#125;</div><div class="line"></div><div class="line">connection = MongoClient(&quot;localhost&quot;,27017)</div><div class="line">mydb = connection.mydb # new a database</div><div class="line">myser = mydb.hengsengindex # new a table</div><div class="line"></div><div class="line">def getindexs():</div><div class="line"></div><div class="line">    downLoadStr = &apos;http://www.csindex.com.cn/sseportal/ps/zhs/hqjt/csi/show_zsgz.js&apos;</div><div class="line">    print downLoadStr</div><div class="line">    try:</div><div class="line">        i_headers = &#123;&quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.1) Gecko/20090624 Firefox/3.5&quot;,\</div><div class="line">        &quot;Referer&quot;: &apos;http://www.baidu.com&apos;&#125;</div><div class="line">        req = urllib2.Request(downLoadStr, headers=i_headers)  </div><div class="line">        f = urllib2.urlopen(req)</div><div class="line">        data = f.read()</div><div class="line">        str = data.decode(&apos;gbk&apos;)</div><div class="line">        data = str.encode(&apos;utf-8&apos;)</div><div class="line">        print data</div><div class="line">        listString = data.split(&apos;\n&apos;)</div><div class="line"></div><div class="line">        date = &apos;&apos;</div><div class="line">        index = 0</div><div class="line">        for item in listString:</div><div class="line">        if &apos;zsgz00&apos; in item:</div><div class="line">            date = item[12:-2]</div><div class="line">            datelist = list(date)</div><div class="line">            for s in datelist:</div><div class="line">            if s == &apos;-&apos;:</div><div class="line">            datelist.remove(s)</div><div class="line">            date = &apos;&apos;.join(datelist)</div><div class="line">            print date</div><div class="line">        if &apos;0=&apos; in item:</div><div class="line">            pe = listString[index + 1]</div><div class="line">            pb = listString[index + 3]</div><div class="line">            rate = listString[index + 4]</div><div class="line">            indexitem = item.index(&apos;=&apos;)</div><div class="line">            indexpe = pe.index(&apos;=&apos;)</div><div class="line">            indexpb = pb.index(&apos;=&apos;)</div><div class="line">            indexrate = rate.index(&apos;=&apos;)</div><div class="line">            pe = pe[indexpe+2:-2]</div><div class="line">            pb = pb[indexpe+2:-2]</div><div class="line">            rate = rate[indexpe+2:-2]</div><div class="line">            item = item[indexitem+2:-2]</div><div class="line">            print item</div><div class="line"></div><div class="line">            pe = filter(lambda ch: ch in &apos;.0123456789&apos;, pe)</div><div class="line">            pb = filter(lambda ch: ch in &apos;.0123456789&apos;, pb)</div><div class="line">            rate = filter(lambda ch: ch in &apos;.0123456789&apos;, rate)</div><div class="line"></div><div class="line">            if len(pe) and len(pb) and len(rate):</div><div class="line">                roaf = float(pe)</div><div class="line">                roe = 1/roaf * 100</div><div class="line">                dbs = myser.find(&#123;&apos;æŒ‡æ•°åç§°&apos;:item,&apos;æ—¥æœŸ&apos;:date&#125;)</div><div class="line">                count = 0</div><div class="line">                for item in dbs:</div><div class="line">                count = count + 1</div><div class="line">                if count == 0:</div><div class="line">                    myser.save(&#123;&apos;æŒ‡æ•°åç§°&apos;:item,&apos;å¸‚ç›ˆç‡&apos;:pe,&apos;ç›ˆåˆ©æ”¶ç›Šç‡&apos;:roe,&apos;æ—¥æœŸ&apos;:date,&apos;å¸‚å‡€ç‡&apos;:pb,&apos;è‚¡æ¯ç‡&apos;:rate&#125;)</div><div class="line"></div><div class="line">            index = index + 1</div><div class="line"></div><div class="line">    except Exception,ex:</div><div class="line">    print ex</div><div class="line"></div><div class="line"></div><div class="line">def gethenghseng(day,month,year):</div><div class="line"></div><div class="line">yearStr = &apos;%i&apos; % year</div><div class="line">yearList = list(yearStr)</div><div class="line">yearStr1 = yearList[-1]</div><div class="line">yearStr2 = yearList[-2]</div><div class="line">yearStr = yearStr2 + yearStr1</div><div class="line"></div><div class="line">monthStr = months[month - 1]</div><div class="line"></div><div class="line">targetStr = &apos;idx_%i%s%s&apos; % (day,monthStr,yearStr)</div><div class="line"></div><div class="line">fileName = &apos;/Users/han/Desktop/index/hengsheng/%i%s%s.txt&apos; % (day,monthStr,yearStr)</div><div class="line"></div><div class="line">downLoadStr = &apos;http://sc.hangseng.com/gb/www.hsi.com.hk/HSI-Net/static/revamp/contents/en/indexes/report/hsi/&apos; + targetStr + &apos;.csv&apos;</div><div class="line">print downLoadStr</div><div class="line">try:</div><div class="line">i_headers = &#123;&quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.1) Gecko/20090624 Firefox/3.5&quot;,\</div><div class="line">&quot;Referer&quot;: &apos;http://www.baidu.com&apos;&#125;</div><div class="line">req = urllib2.Request(downLoadStr, headers=i_headers)</div><div class="line">f = urllib2.urlopen(req)</div><div class="line">data = f.read()</div><div class="line">f = open(fileName,&apos;wb&apos;)</div><div class="line">f.write(data)</div><div class="line">f.close()</div><div class="line"></div><div class="line">f1 = open(fileName,&apos;rb&apos;)</div><div class="line">dataList = f1.readlines()</div><div class="line">item  = dataList[2]</div><div class="line">list2 = item.split(&apos;	&apos;)</div><div class="line">date = list2[0]</div><div class="line">index = list2[5]</div><div class="line">roa = list2[9]</div><div class="line">date = filter(lambda ch: ch in &apos;0123456789&apos;, date)</div><div class="line">index = filter(lambda ch: ch in &apos;.0123456789&apos;, index)</div><div class="line">string = filter(lambda ch: ch in &apos;.0123456789&apos;, roa)</div><div class="line">roaf = float(string)</div><div class="line">roe = 1/roaf * 100</div><div class="line">print date</div><div class="line">print index</div><div class="line">dbs = myser.find(&#123;&apos;æŒ‡æ•°åç§°&apos;:&apos;æ’ç”ŸæŒ‡æ•°&apos;,&apos;æ—¥æœŸ&apos;:date&#125;)</div><div class="line">count = 0</div><div class="line">for item in dbs:</div><div class="line">count = count + 1</div><div class="line">if count == 0:</div><div class="line">myser.save(&#123;&apos;æŒ‡æ•°åç§°&apos;:&apos;æ’ç”ŸæŒ‡æ•°&apos;,&apos;å¸‚ç›ˆç‡&apos;:roaf,&apos;ç›ˆåˆ©æ”¶ç›Šç‡&apos;:roe,&apos;æ—¥æœŸ&apos;:date,&apos;æŒ‡æ•°&apos;:index&#125;) # add a record</div><div class="line"></div><div class="line">saveStr = &apos;%s  %f&apos; % (date, roe)</div><div class="line"></div><div class="line">f = open(&apos;hengseng.txt&apos;,&apos;r&apos;)</div><div class="line">data = f.read()</div><div class="line">f.close()</div><div class="line"></div><div class="line">dataStr = data + &apos;\n&apos; + saveStr</div><div class="line">f = open(&apos;hengseng.txt&apos;,&apos;w&apos;)</div><div class="line">f.write(dataStr)</div><div class="line">f.close()</div><div class="line">except Exception,ex:</div><div class="line">print ex</div><div class="line"></div><div class="line"></div><div class="line">def gethenghsengchina(day,month,year):</div><div class="line"></div><div class="line">yearStr = &apos;%i&apos; % year</div><div class="line">yearList = list(yearStr)</div><div class="line">yearStr1 = yearList[-1]</div><div class="line">yearStr2 = yearList[-2]</div><div class="line">yearStr = yearStr2 + yearStr1</div><div class="line"></div><div class="line">monthStr = months[month - 1]</div><div class="line"></div><div class="line">targetStr = &apos;idx_%i%s%s&apos; % (day,monthStr,yearStr)</div><div class="line"></div><div class="line">fileName = &apos;/Users/han/Desktop/index/hengsheng/china%i%s%s.txt&apos; % (day,monthStr,yearStr)</div><div class="line"></div><div class="line">downLoadStr = &apos;http://sc.hangseng.com/gb/www.hsi.com.hk/HSI-Net/static/revamp/contents/en/indexes/report/hscei/&apos; + targetStr + &apos;.csv&apos;</div><div class="line">print downLoadStr</div><div class="line">try:</div><div class="line">i_headers = &#123;&quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.1) Gecko/20090624 Firefox/3.5&quot;,\</div><div class="line">&quot;Referer&quot;: &apos;http://www.baidu.com&apos;&#125;</div><div class="line">req = urllib2.Request(downLoadStr, headers=i_headers)</div><div class="line">f = urllib2.urlopen(req)</div><div class="line">data = f.read()</div><div class="line">f = open(fileName,&apos;wb&apos;)</div><div class="line">f.write(data)</div><div class="line">f.close()</div><div class="line"></div><div class="line">f1 = open(fileName,&apos;rb&apos;)</div><div class="line">dataList = f1.readlines()</div><div class="line">item  = dataList[2]</div><div class="line">list2 = item.split(&apos;	&apos;)</div><div class="line">date = list2[0]</div><div class="line">index = list2[5]</div><div class="line">roa = list2[9]</div><div class="line">date = filter(lambda ch: ch in &apos;0123456789&apos;, date)</div><div class="line">index = filter(lambda ch: ch in &apos;.0123456789&apos;, index)</div><div class="line">string = filter(lambda ch: ch in &apos;.0123456789&apos;, roa)</div><div class="line">roaf = float(string)</div><div class="line">roe = 1/roaf * 100</div><div class="line"></div><div class="line">print index</div><div class="line">dbs = myser.find(&#123;&apos;æŒ‡æ•°åç§°&apos;:&apos;æ’ç”ŸæŒ‡H&apos;,&apos;æ—¥æœŸ&apos;:date&#125;)</div><div class="line">count = 0</div><div class="line">for item in dbs:</div><div class="line">count = count + 1</div><div class="line">if count == 0:</div><div class="line">myser.save(&#123;&apos;æŒ‡æ•°åç§°&apos;:&apos;æ’ç”ŸæŒ‡æ•°H&apos;, &apos;å¸‚ç›ˆç‡&apos;:roaf,&apos;ç›ˆåˆ©æ”¶ç›Šç‡&apos;:roe,&apos;æ—¥æœŸ&apos;:date,&apos;æŒ‡æ•°&apos;:index&#125;)</div><div class="line"></div><div class="line">saveStr = &apos;%s  %f&apos; % (date, roe)</div><div class="line"></div><div class="line">f = open(&apos;hengsengchina.txt&apos;,&apos;r&apos;)</div><div class="line">data = f.read()</div><div class="line">f.close()</div><div class="line"></div><div class="line">dataStr = data + &apos;\n&apos; + saveStr</div><div class="line">f = open(&apos;hengsengchina.txt&apos;,&apos;w&apos;)</div><div class="line">f.write(dataStr)</div><div class="line">f.close()</div><div class="line">except Exception,ex:</div><div class="line">print ex</div><div class="line"></div><div class="line"></div><div class="line">getindexs()</div><div class="line"></div><div class="line">current = time.localtime(time.time())</div><div class="line">year = current.tm_year</div><div class="line">month = current.tm_mon</div><div class="line">day = current.tm_mday</div><div class="line"></div><div class="line">index = 0</div><div class="line">if month == 12:</div><div class="line">index = 1</div><div class="line"></div><div class="line">index = month - 1</div><div class="line"></div><div class="line">day = day - 1</div><div class="line"></div><div class="line"># gethenghseng(day,month,year)</div><div class="line"></div><div class="line">for month in xrange(1,3):</div><div class="line">for day in xrange(1,31):</div><div class="line">gethenghsengchina(day,month,year)</div><div class="line">gethenghseng(day,month,year)</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[çˆ¬è™«ç³»åˆ—]]></title>
      <url>/2017/02/10/2017/%E7%88%AC%E8%99%AB%E7%B3%BB%E5%88%97/</url>
      <content type="html"><![CDATA[<p>è¿™é‡Œä¸»è¦å®ç°çš„æ˜¯åˆ©ç”¨çˆ¬è™«æ¥å®ç°å¯¹å…³æ³¨æŒ‡æ•°åŸºé‡‘çš„ä¼°å€¼æ•°æ®çš„æŠ“å–ï¼Œç„¶åè¿›è¡Œä¼°å€¼åˆ†æï¼Œé…åˆäº‘æœåŠ¡å™¨å¹¶ä¸”æ¯å¤©è¿›è¡Œæ¨é€ã€‚</p>
<p>çˆ¬è™«çš„åŸºæœ¬æ­¥éª¤å¾ˆç®€å•ï¼Œå°†è¯¥ç½‘é¡µçš„jså’Œhtmlå…¨éƒ¨ä¸‹è½½ä¸‹æ¥ï¼Œç„¶åä»å…¶ä¸­å¯»æ‰¾æœ‰ç”¨çš„ä¿¡æ¯ï¼Œè¿›è€Œå°†æœ‰ç”¨çš„ä¿¡æ¯è¿›è¡Œç»“æ„åŒ–çš„å­˜å‚¨ï¼Œå…¶ä¸­å°†ç½‘é¡µçˆ¬å–ä¸‹æ¥ä½¿ç”¨çš„scrapyï¼Œè€Œå¯»æ‰¾ä¿¡æ¯æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯xpathï¼Œå­˜å‚¨æˆ‘ä»¬ä½¿ç”¨mongo<br><a id="more"></a></p>
<h3 id="ä½¿ç”¨scrapyæ¡†æ¶"><a href="#ä½¿ç”¨scrapyæ¡†æ¶" class="headerlink" title="ä½¿ç”¨scrapyæ¡†æ¶"></a>ä½¿ç”¨scrapyæ¡†æ¶</h3><ul>
<li><p>å®‰è£…<br><code>sudo pip install scrapy</code>æˆ–è€…ç›´æ¥ä¸‹è½½æºç ï¼Œè‡ªå·±ç¼–è¯‘*ä¸‹è½½0.24ç‰ˆæœ¬çš„scrapy<a href="http://scrapy.org/download/" target="_blank" rel="external">http://scrapy.org/download/</a><br>ç„¶åcd è¿›å…¥è§£å‹åçš„æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œsudo python setup.py installå®‰è£…scrapy</p>
<blockquote>
<p>å¦‚æœåœ¨ä½¿ç”¨å‘½ä»¤è¡Œè¿‡ç¨‹ä¸­å‘ç°sudoä¹‹åä»ç„¶æ— æ³•è·å–æƒé™ï¼Œåˆ é™¤æ–‡ä»¶æ—¶ä¼šæç¤ºOperation not permittedï¼Œé‚£å°±å…³æœºé‡å¯ï¼Œç„¶åæŒ‰ä½comman+Rï¼Œå¯åŠ¨ä¹‹åå¯åŠ¨å‘½ä»¤è¡Œï¼Œè¾“å…¥ï¼Œcsrutil disableå…³é—­rootlesså°±å¯ä»¥äº†</p>
</blockquote>
</li>
<li><p>scrapy startproject tutorialåˆ›å»ºçˆ¬è™«å·¥ç¨‹</p>
</li>
</ul>
<ul>
<li>scrapy.cfg: é¡¹ç›®çš„é…ç½®æ–‡ä»¶</li>
<li>tutorial/: è¯¥é¡¹ç›®çš„pythonæ¨¡å—ã€‚ä¹‹åæ‚¨å°†åœ¨æ­¤åŠ å…¥ä»£ç ã€‚</li>
<li>tutorial/items.py: é¡¹ç›®ä¸­çš„itemæ–‡ä»¶.</li>
<li>tutorial/pipelines.py: é¡¹ç›®ä¸­çš„pipelinesæ–‡ä»¶.</li>
<li>tutorial/settings.py: é¡¹ç›®çš„è®¾ç½®æ–‡ä»¶.</li>
<li>tutorial/spiders/: æ”¾ç½®spiderä»£ç çš„ç›®å½•.</li>
</ul>
<blockquote>
<p>æ–‡ä»¶ä½œç”¨è¯´æ˜</p>
</blockquote>
<ul>
<li>items.pyï¼šå®šä¹‰åæœŸå¤„ç†çš„æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œåƒä¸€ä¸ªå­—å…¸</li>
<li>settings.pyï¼šé…ç½®scrapyï¼Œä»è€Œä¿®æ”¹user-agent,è®¾ç½®çˆ¬å–æ—¶é—´ï¼Œè®¾ç½®ä»£ç†ï¼Œè®¾ç½®ä¸­é—´ä»¶</li>
<li>pipelines.py:ç”¨äºå­˜æ”¾æ‰§è¡Œåå»æ•°æ®å¤„ç†çš„åŠŸèƒ½ï¼Œä»è€ŒæŠŠçˆ¬å–ä¸å¤„ç†åˆ†å¼€<br>itemæˆåŠŸè·å–æ•°æ®ä¹‹åï¼Œå®ƒä¼šé€åˆ°pipelineï¼Œè®©pipelineå¯¹æ•°æ®è¿›è¡Œå¤„ç†</li>
</ul>
<p>è¿è¡Œå·¥ç¨‹ï¼š<br>scrapyç›®å‰åªèƒ½ä½¿ç”¨å‘½ä»¤è¡Œæ¥è¿è¡Œ<code>scrapy crawl demo</code>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯åè¾¹çš„è¿™ä¸ªdemoè¿™ä¸ªåå­—ä¸æ˜¯éšä¾¿æ¥çš„ï¼Œspiderè¿™ä¸ªæ–‡ä»¶å‘½åè¦æ˜¯demo_spideræ‰å¯ä»¥</p>
<h3 id="xpathçš„ä½¿ç”¨"><a href="#xpathçš„ä½¿ç”¨" class="headerlink" title="xpathçš„ä½¿ç”¨"></a>xpathçš„ä½¿ç”¨</h3><p>ç”¨åˆ°çš„å·¥å…·ï¼š</p>
<ul>
<li>ç«ç‹æµè§ˆå™¨</li>
<li>FirePathæ’ä»¶</li>
<li>Firebugæ’ä»¶</li>
<li>XPath Checkeræ’ä»¶</li>
</ul>
<p>1.å³é”®é€‰æ‹©ï¼Inspect in FirePath<br>2.å¤åˆ¶xpath<br>3.åœ¨è¯¥é¡µé¢ä¸Šå³é”®ï¼&gt;View XPath<br>4.æŠŠxpathçš„è·¯å¾„å¤åˆ¶è¿›å…¥è¯¥é¡µé¢ï¼ŒæŸ¥çœ‹æ˜¯å¦èƒ½å¤Ÿæ‰¾åˆ°è‡ªå·±æƒ³è¦çš„å…ƒç´ </p>
<h3 id="mongodbçš„å®‰è£…ä»¥åŠä½¿ç”¨"><a href="#mongodbçš„å®‰è£…ä»¥åŠä½¿ç”¨" class="headerlink" title="mongodbçš„å®‰è£…ä»¥åŠä½¿ç”¨"></a>mongodbçš„å®‰è£…ä»¥åŠä½¿ç”¨</h3><ul>
<li><p>ä¸€è¡Œä»£ç å®‰è£…mongodbbrew install mongoDBå‰ææ˜¯å·²ç»å®‰è£…äº†brewå·¥å…·ï¼Œä¸€æ¬¡å¤±è´¥å°±æ‰§è¡Œç¬¬äºŒæ¬¡<br>*<br>å¦‚æœä¸Šè¾¹çš„æ–¹æ³•è¿˜æ˜¯ä¸è¡Œï¼Œé‚£å°±åªèƒ½æ‰‹åŠ¨ä¸‹è½½äº†</p>
<ul>
<li><a href="https://fastdl.mongodb.org/osx/mongodb-osx-x86_64-3.2.3.tgz" target="_blank" rel="external">https://fastdl.mongodb.org/osx/mongodb-osx-x86_64-3.2.3.tgz</a></li>
<li>å‘½ä»¤è¡Œè§£å‹è¯¥åŒ…tar xzvf mongodb-osx-x86_64-3.2.3.tgz</li>
<li>å°†è§£å‹åçš„æ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªå¯ä»¥é•¿æœŸæ”¾ç½®çš„åœ°æ–¹ï¼Œç„¶åè¿›å…¥è¯¥æ–‡ä»¶å¤¹</li>
<li>pwdè®°å½•å½“å‰æ–‡ä»¶è·¯å¾„ï¼Œcopyä¸€ä¸‹ï¼Œä¸€ä¼šå„¿æœ‰ç”¨</li>
<li>vim ~/.zshrcè¿›å…¥é…ç½®ç›®å½•<br><em><br>#mongod config<br>MONGODB_HOME=/Users/shenghuihan/Desktop/mongodb-osx-x86_64-3.2.3<br>PATH=$PATH:$MONGODB_HOME/binæ·»åŠ binç›®å½•æ–‡ä»¶åˆ°ç³»ç»Ÿæœç´¢ç›®å½•ä¸‹
</em><br>source ~/.zshrcä½¿è®¾ç½®ç”Ÿæ•ˆ</li>
</ul>
</li>
<li>æŸ¥çœ‹mongoæ˜¯å¦ç”Ÿæ•ˆmongoï¼Œå¦‚æœæ˜¾ç¤ºç‰ˆæœ¬å·è¯´æ˜ç”Ÿæ•ˆï¼Œä½†æ˜¯æ²¡æœ‰å¯åŠ¨ä¸‹é¢æˆ‘ä»¬æ¥å¯åŠ¨æœåŠ¡</li>
<li>å…ˆåœ¨åŒçº§ç›®å½•ä¸‹åˆ›å»ºæ•°æ®æ–‡ä»¶å’Œæ—¥å¿—æ–‡ä»¶mkdir dataå’Œmkdir log</li>
<li>å¯åŠ¨mongodbæœåŠ¡mongod â€“dbpath data â€“logpath log/mongod.log â€“logappend â€“fork</li>
<li>å†æ¬¡mongoå¦‚æœæ˜¾ç¤ºconnecting to testè¯´æ˜å¯åŠ¨æˆåŠŸï¼Œè¾“å…¥exit;é€€å‡ºmongo</li>
<li>å°†å¯åŠ¨å‘½ä»¤å†™å…¥ä¸€ä¸ªå¯åŠ¨è„šæœ¬ä¸­echo â€œmongod â€“dbpath data â€“logpath log/mongod.log â€“logappend â€“forkâ€ &gt;&gt; start.sh</li>
<li>å¯è§†åŒ–å·¥å…·å®‰è£…<a href="https://mongohub.s3.amazonaws.com/MongoHub.zipç›´æ¥å»è¿™é‡Œä¸‹è½½" target="_blank" rel="external">https://mongohub.s3.amazonaws.com/MongoHub.zipç›´æ¥å»è¿™é‡Œä¸‹è½½</a></li>
<li>å®‰è£…pythonæ“ä½œmongodbçš„é©±åŠ¨sudo pip install pymongoå‰ææ˜¯è¦å®‰è£…pipå•Šï¼Œè¿™æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨æ¥å®‰è£…pythonå„ç§åº“çš„è½¯ä»¶</li>
<li>é»˜è®¤ç«¯å£27017</li>
<li>æŸ¥çœ‹ipçš„æ–¹å¼ï¼Œdb.getMongo()</li>
</ul>
<h4 id="ä½¿ç”¨mongodbå‘½ä»¤è¡Œ"><a href="#ä½¿ç”¨mongodbå‘½ä»¤è¡Œ" class="headerlink" title="ä½¿ç”¨mongodbå‘½ä»¤è¡Œ"></a>ä½¿ç”¨mongodbå‘½ä»¤è¡Œ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">bogon:mongo shenghuihan$ mongo</div><div class="line">MongoDB shell version: 3.2.3</div><div class="line">connecting to: test</div><div class="line">Server has startup warnings: </div><div class="line">2016-09-08T17:51:01.057+0800 I CONTROL  [initandlisten] </div><div class="line">2016-09-08T17:51:01.057+0800 I CONTROL  [initandlisten] ** WARNING: soft rlimits too low. Number of files is 256, should be at least 1000</div><div class="line">&gt; use mydb//åˆ›å»ºä¸€ä¸ªæ–°çš„åº“</div><div class="line">switched to db mydb</div><div class="line">&gt; show collections</div><div class="line">&gt; show dbs</div></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨ä»¥åŠæŸ¥çœ‹æ•°æ®"><a href="#ä½¿ç”¨ä»¥åŠæŸ¥çœ‹æ•°æ®" class="headerlink" title="ä½¿ç”¨ä»¥åŠæŸ¥çœ‹æ•°æ®"></a>ä½¿ç”¨ä»¥åŠæŸ¥çœ‹æ•°æ®</h4><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨mongohubæŸ¥çœ‹æ•°æ®ï¼Œå½“ç„¶è¿˜å¯ä»¥ä½¿ç”¨æˆ‘ä»¬æœ€å–œæ¬¢çš„python<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">import pymongo</div><div class="line"></div><div class="line">connection = pymongo.MongoClient()</div><div class="line">tdb = connection.jikexueyuan</div><div class="line">post_info = tdb.ceshi</div><div class="line"></div><div class="line">jike = &#123;&apos;name&apos;:u&apos;å“ˆå“ˆå“ˆ&apos;&#125;#æ’å…¥æ•°æ®</div><div class="line">goog = &#123;&apos;name&apos;:u&apos;æ ¡é•¿&apos;&#125;</div><div class="line"></div><div class="line"># post_info.insert(jike)</div><div class="line"># post_info.insert(goog)</div><div class="line">post_info.remove(&#123;&apos;name&apos;:u&apos;æ ¡é•¿&apos;&#125;)</div><div class="line"></div><div class="line">print u&apos;æ“ä½œå®Œæˆ&apos;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">from pymongo import MongoClient</div><div class="line"></div><div class="line">mc = MongoClient(&quot;localhost&quot;,27017)</div><div class="line"></div><div class="line">db = mc.users</div><div class="line"></div><div class="line">c = db.users.find()</div><div class="line"></div><div class="line">db.users.save(&#123;&quot;age&quot;:8&#125;)</div><div class="line"></div><div class="line">for objc in c:</div><div class="line">    print(objc)</div><div class="line"></div><div class="line">mc.close()</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Lunixäº‘æœåŠ¡å™¨æŠ˜è…¾å°è®°]]></title>
      <url>/2017/01/17/2017/Lunix%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8A%98%E8%85%BE%E5%B0%8F%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h3 id="Macç™»å½•äº‘æœåŠ¡å™¨"><a href="#Macç™»å½•äº‘æœåŠ¡å™¨" class="headerlink" title="Macç™»å½•äº‘æœåŠ¡å™¨"></a>Macç™»å½•äº‘æœåŠ¡å™¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh root@127.987.883.888</div></pre></td></tr></table></figure>
<p>è¿™æ ·å†è¾“å…¥å¯†ç æˆ‘ä»¬å°±è¿›å…¥äº†æˆ‘ä»¬çš„æœåŠ¡å™¨çš„å‘½ä»¤è¡Œç•Œé¢ï¼Œè¿™é‡Œæ‰§è¡Œçš„å‘½ä»¤è¡Œä¸æœ¬æœºæ˜¯ä¸€è‡´çš„ï¼Œä¸è¿‡ä½ çœ‹åˆ°çš„æ˜¯ä½ æœåŠ¡å™¨çš„ä¸€äº›æƒ…å†µ<br><a id="more"></a></p>
<h3 id="æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½"><a href="#æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½" class="headerlink" title="æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½"></a>æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½</h3><ul>
<li>ä¸Šä¼ <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scp ceshi.txt root@127.987.883.888:~</div></pre></td></tr></table></figure>
</li>
</ul>
<p>è¿™æ ·æ–‡ä»¶ä¼šè¢«ä¼ è¾“åˆ°ä½ çš„ç”¨æˆ·åä¸‹çš„æ–‡ä»¶å¤¹ä¸‹</p>
<ul>
<li>ä¸‹è½½<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scp root@127.987.883.888:~ï¼ceshi.txt ceshi.txt</div></pre></td></tr></table></figure>
</li>
</ul>
<!--more-->
<h3 id="apacheå®‰è£…"><a href="#apacheå®‰è£…" class="headerlink" title="apacheå®‰è£…"></a>apacheå®‰è£…</h3><p>-1. è¿è¡Œ Terminalï¼Œè¾“å…¥å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh username@ipï¼Œç„¶åè¾“å…¥å¯†ç ã€‚</div></pre></td></tr></table></figure></p>
<ol>
<li><p>å®‰è£… Apache è½¯ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install httpd</div></pre></td></tr></table></figure>
</li>
<li><p>è®¾ç½® Apache åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶è¿è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chkconfig --levels 235 httpd on</div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ Apache é…ç½®æ–‡ä»¶ä¸­é…ç½®åŸŸåï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi /etc/httpd/conf/httpd.confï¼Œæ‰¾åˆ° ServerName ï¼Œæ·»åŠ â€œåŸŸå:80â€ï¼Œä¿å­˜å¹¶é€€å‡ºã€‚</div></pre></td></tr></table></figure>
</li>
<li><p>é‡å¯ Apacheï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service httpd restart</div></pre></td></tr></table></figure>
</li>
<li><p>æµè§ˆå™¨ä¸­è®¿é—®ç¬¬4æ­¥é…ç½®çš„åŸŸåï¼Œå¦‚æœå‡ºç°â€œApache 2 Test Page powered by CentOSâ€çš„é¡µé¢ï¼Œè¯´æ˜é…ç½®æˆåŠŸã€‚</p>
</li>
</ol>
<h3 id="djangoå®‰è£…"><a href="#djangoå®‰è£…" class="headerlink" title="djangoå®‰è£…"></a>djangoå®‰è£…</h3><ul>
<li><p>å®‰è£…pip<code>sudo yum install python-pip</code></p>
</li>
<li><p>pipå®‰è£…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo pip install --upgrade django==1.11</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="é‡æ–°æ ¼å¼åŒ–äº‘æœåŠ¡å™¨ä¹‹åç™»å½•ä¸ä¸Šæ€ä¹ˆåŠ"><a href="#é‡æ–°æ ¼å¼åŒ–äº‘æœåŠ¡å™¨ä¹‹åç™»å½•ä¸ä¸Šæ€ä¹ˆåŠ" class="headerlink" title="é‡æ–°æ ¼å¼åŒ–äº‘æœåŠ¡å™¨ä¹‹åç™»å½•ä¸ä¸Šæ€ä¹ˆåŠ"></a>é‡æ–°æ ¼å¼åŒ–äº‘æœåŠ¡å™¨ä¹‹åç™»å½•ä¸ä¸Šæ€ä¹ˆåŠ</h3><p>å°†æœ¬åœ°çš„./sshæ–‡ä»¶å¤¹ä¸­çš„know_hostsé‡Œè¾¹å¯¹åº”çš„ipçš„è®°å½•åˆ é™¤æ‰ï¼Œé‡æ–°ç”Ÿæˆ</p>
<h3 id="lunixä¸­çš„å¤åˆ¶æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹"><a href="#lunixä¸­çš„å¤åˆ¶æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹" class="headerlink" title="lunixä¸­çš„å¤åˆ¶æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹"></a>lunixä¸­çš„å¤åˆ¶æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp -r xxx xxx</div></pre></td></tr></table></figure>
<p>-rä»£è¡¨æˆ‘ä»¬å¤åˆ¶å…¶ä¸­çš„æ‰€æœ‰æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹</p>
<h3 id="lunixåˆ é™¤æ–‡ä»¶"><a href="#lunixåˆ é™¤æ–‡ä»¶" class="headerlink" title="lunixåˆ é™¤æ–‡ä»¶"></a>lunixåˆ é™¤æ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm -rf xxx</div></pre></td></tr></table></figure>
<h3 id="åœ¨python-çš„djangoæœåŠ¡ä¸å¯ç”¨"><a href="#åœ¨python-çš„djangoæœåŠ¡ä¸å¯ç”¨" class="headerlink" title="åœ¨python çš„djangoæœåŠ¡ä¸å¯ç”¨"></a>åœ¨python çš„djangoæœåŠ¡ä¸å¯ç”¨</h3><p>æŸ¥çœ‹</p>
<h3 id="lunixå‡çº§python"><a href="#lunixå‡çº§python" class="headerlink" title="lunixå‡çº§python"></a>lunixå‡çº§python</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">é¦–å…ˆä¸‹è½½æºtaråŒ…</div><div class="line"></div><div class="line">ã€€ã€€å¯åˆ©ç”¨linuxè‡ªå¸¦ä¸‹è½½å·¥å…·wgetä¸‹è½½ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</div><div class="line"></div><div class="line">1# wget http://www.python.org/ftp/python/2.7.3/Python-2.7.3.tgz</div><div class="line">ã€€ã€€ä¸‹è½½å®Œæˆååˆ°ä¸‹è½½ç›®å½•ä¸‹ï¼Œè§£å‹</div><div class="line"></div><div class="line">1	tar -zxvf Python-2.7.3.tgz</div><div class="line">2	</div><div class="line">ã€€ã€€è¿›å…¥è§£å‹ç¼©åçš„æ–‡ä»¶å¤¹</div><div class="line"></div><div class="line">1	cd Python-2.7.3</div><div class="line">ã€€ã€€åœ¨ç¼–è¯‘å‰å…ˆåœ¨/usr/localå»ºä¸€ä¸ªæ–‡ä»¶å¤¹python27ï¼ˆä½œä¸ºpythonçš„å®‰è£…è·¯å¾„ï¼Œä»¥å…è¦†ç›–è€çš„ç‰ˆæœ¬ï¼‰</div><div class="line"></div><div class="line">1	mkdir /usr/local/python27</div><div class="line">ã€€ã€€åœ¨è§£å‹ç¼©åçš„ç›®å½•ä¸‹ç¼–è¯‘å®‰è£…</div><div class="line"></div><div class="line">1	./configure --prefix=/usr/local/python27</div><div class="line">2	make</div><div class="line">3	make install</div><div class="line">ã€€ã€€æ­¤æ—¶æ²¡æœ‰è¦†ç›–è€ç‰ˆæœ¬ï¼Œå†å°†åŸæ¥/usr/bin/pythoné“¾æ¥æ”¹ä¸ºåˆ«çš„åå­—</div><div class="line"></div><div class="line">1	mv /usr/bin/python /usr/bin/python_old</div><div class="line">ã€€ã€€å†å»ºç«‹æ–°ç‰ˆæœ¬pythonçš„é“¾æ¥</div><div class="line"></div><div class="line">1</div><div class="line">ln -s /usr/local/python27/bin/python2.7 </div><div class="line">ã€€ã€€è¿™ä¸ªæ—¶å€™è¾“å…¥</div><div class="line"></div><div class="line">1	python</div><div class="line">ã€€ã€€å°±ä¼šæ˜¾ç¤ºå‡ºpythonçš„æ–°ç‰ˆæœ¬ä¿¡æ¯</div><div class="line"></div><div class="line">1	Python 2.7.3 (default, Sep 29 2013, 11:05:02)</div><div class="line">2	[GCC 4.1.2 20080704 (Red Hat 4.1.2-54)] on linux2</div><div class="line">3	Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</div><div class="line">4	&gt;&gt;&gt;</div><div class="line">ä¿®æ”¹YUM   /usr/bin/yum</div><div class="line"></div><div class="line">æ–‡ä»¶è®©yumèƒ½æ­£å¸¸çš„å·¥ä½œï¼šæ”¹æˆä¸Šé¢æˆ‘ä»¬ä¿®æ”¹çš„PYTHON 2.6.6çš„åå­—</div></pre></td></tr></table></figure>
<blockquote>
<p>lunixè§£å‹å‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">1ã€*.tar ç”¨ tar -xvf è§£å‹</div><div class="line"></div><div class="line">2ã€*.gz ç”¨ gzip -dæˆ–è€…gunzip è§£å‹</div><div class="line"></div><div class="line">3ã€*.tar.gzå’Œ*.tgz ç”¨ tar -xzf è§£å‹</div><div class="line"></div><div class="line">4ã€*.bz2 ç”¨ bzip2 -dæˆ–è€…ç”¨bunzip2 è§£å‹</div><div class="line"></div><div class="line">5ã€*.tar.bz2ç”¨tar -xjf è§£å‹</div><div class="line"></div><div class="line">6ã€*.Z ç”¨ uncompress è§£å‹</div><div class="line"></div><div class="line">7ã€*.tar.Z ç”¨tar -xZf è§£å‹</div><div class="line"></div><div class="line">8ã€*.rar ç”¨ unrar eè§£å‹</div><div class="line"></div><div class="line">9ã€*.zip ç”¨ unzip è§£å‹</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="å®‰è£…apex"><a href="#å®‰è£…apex" class="headerlink" title="å®‰è£…apex"></a>å®‰è£…apex</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">lunix å®‰è£…apxsæ‰©å±•</div><div class="line"></div><div class="line">å¥½åƒå‘½ä»¤è¡Œå®‰è£…çš„ï¼Œè‡ªå¸¦äº†è¿™ä¸ªæ¨¡å—ï¼Œæ‰‹åŠ¨ç¼–è¯‘çš„apacheï¼ŒåŒæ ·éœ€è¦æ‰‹åŠ¨ç¼–è¯‘è¿™ä¸ªæ¨¡å—ï¼Œç¼–è¯‘çš„æ—¶å€™å¯èƒ½ä¼šé‡åˆ°è¿™ä¸ªé”™è¯¯ï¼šmod_wsgi.c Python.hï¼šæ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•,ï¼Œè§£å†³æ–¹æ³•ï¼šyum install python-develï¼Œå®‰è£…apacheçš„apxsæ‰©å±•ã€‚</div><div class="line">python 2.7 No module named â€˜zlib&apos;</div><div class="line"></div><div class="line">yum -y install zlib-devel openssl-devel</div><div class="line">cd /wls/softwares/Python-2.7.10</div><div class="line">./configure --prefix=/usr/local/python27 make make install</div><div class="line"></div><div class="line">pipæ˜¯pythonçš„åŒ…ç®¡ç†å·¥å…·ï¼Œæˆ‘ä»¬é€šè¿‡pipæ¥å®‰è£…pythonæ‰€éœ€è¦çš„ä¸€äº›æ¨¡å—ï¼Œå½“ç„¶å¦‚æœä½ æœ‰å¤šç‰ˆæœ¬å­˜åœ¨ï¼Œå¯èƒ½éœ€è¦å°†pipè¿™ä¸ªæ¨¡å—copyåˆ°å¯¹åº”çš„pythonç‰ˆæœ¬ä¸‹è¾¹</div><div class="line"></div><div class="line">åœ¨å®‰è£…   Linux ç³»ç»Ÿæ˜¯é¡ºä¾¿æŠŠapache æœåŠ¡è£…å¥½äº† ï¼Œè¿™æ—¶è¿™æ˜¯è£…äº†ä¸€ä¸ªæœåŠ¡ä¸èƒ½è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œ</div><div class="line"></div><div class="line">æ‰€ä»¥å¾ˆå¤šçš„å¼€å‘å·¥å…·å’Œæ–‡ä»¶åœ¨apacheä¸‹æ‰¾ä¸åˆ°ï¼Œæ¯”å¦‚æ¨¡å—ç¼–è¯‘å·¥å…·apxs ï¼Œè¿™æ—¶å°±è¦æ±‚å®‰è£… å¼€å‘åŒ…ï¼Œ</div><div class="line"></div><div class="line"></div><div class="line">å‘½ä»¤ rpm -ql httpd-devel   ï¼Œç„¶åä¼šåœ¨  usr/local/ä¸‹é¢å¤šå‡ºä¸ª apache2æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸å°‘å¼€å‘éœ€è¦çš„æ–‡ä»¶ã€‚</div><div class="line">å¦‚æœæç¤ºæ²¡æœ‰apxsï¼Œé‚£å°±å…ˆyum install httpd-devel</div></pre></td></tr></table></figure>
<h3 id="lunix-å®‰è£…git"><a href="#lunix-å®‰è£…git" class="headerlink" title="lunix å®‰è£…git"></a>lunix å®‰è£…git</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">1.2 CentOS6.6ä¸‹</div><div class="line"></div><div class="line">åœ¨CentOS5çš„æ—¶ä»£ï¼Œç”±äºyumæºä¸­æ²¡æœ‰gitï¼Œæ‰€ä»¥éœ€è¦é¢„å…ˆå®‰è£…ä¸€ç³»åˆ—çš„ä¾èµ–åŒ…ã€‚ä½†åœ¨CentOS6çš„yumæºä¸­å·²ç»æœ‰gitçš„ç‰ˆæœ¬äº†ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨yumæºè¿›è¡Œå®‰è£…ã€‚</div><div class="line"></div><div class="line">$ sudo yum install git</div><div class="line">ä½†æ˜¯yumæºä¸­å®‰è£…çš„gitç‰ˆæœ¬æ˜¯1.7.1ï¼Œå¤ªè€äº†ï¼ŒGithubç­‰éœ€è¦çš„Gitç‰ˆæœ¬æœ€ä½éƒ½ä¸èƒ½ä½äº1.7.2 ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¸ç”¨ä¸Šé¢çš„æ–¹æ³•ã€‚è€Œæ˜¯ä¸‹è½½gitæºç ï¼Œç¼–è¯‘å®‰è£…ã€‚</div><div class="line"></div><div class="line">ç¼–è¯‘å®‰è£…çš„æ­¥éª¤æ˜¯ã€4ã€‘ï¼š</div><div class="line"></div><div class="line">ï¼ˆ1ï¼‰é¦–å…ˆå…ˆæ›´æ–°ç³»ç»Ÿ</div><div class="line"></div><div class="line">sudo yum update</div><div class="line">ï¼ˆ2ï¼‰å®‰è£…ä¾èµ–çš„åŒ…</div><div class="line"></div><div class="line">sudo yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker</div><div class="line">ï¼ˆ3ï¼‰ä¸‹è½½gitæºç å¹¶è§£å‹ç¼©</div><div class="line"></div><div class="line">$ wget https://github.com/git/git/archive/v2.3.0.zip</div><div class="line">$ unzip v2.3.0.zip</div><div class="line">$ cd git-2.3.0</div><div class="line">ï¼ˆ4ï¼‰ç¼–è¯‘å®‰è£…</div><div class="line"></div><div class="line">å°†å…¶å®‰è£…åœ¨â€œ/usr/local/gitâ€ç›®å½•ä¸‹ã€‚</div><div class="line"></div><div class="line">make prefix=/usr/local/git all</div><div class="line">sudo make prefix=/usr/local/git install</div><div class="line">ï¼ˆ5ï¼‰æ­¤æ—¶ä½ å¦‚æœä½¿ç”¨git --version æŸ¥çœ‹gitç‰ˆæœ¬çš„è¯ï¼Œå‘ç°gitä»ç„¶æ˜¯1.7.1ç‰ˆæœ¬ã€‚è¿™æ˜¯å› ä¸ºå®ƒé»˜è®¤ä½¿ç”¨äº†&quot;/usr/bin&quot;ä¸‹çš„gitã€‚</div><div class="line"></div><div class="line">ä½ å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹gitæ‰€åœ¨çš„è·¯å¾„ï¼š</div><div class="line"></div><div class="line">$ whereis git</div><div class="line">git: /usr/bin/git /usr/local/git /usr/share/man/man1/git.1.gz</div><div class="line">ï¼ˆ6ï¼‰æˆ‘ä»¬è¦æŠŠç¼–è¯‘å®‰è£…çš„gitè·¯å¾„æ”¾åˆ°ç¯å¢ƒå˜é‡é‡Œï¼Œè®©å®ƒæ›¿æ¢&quot;/usr/bin&quot;ä¸‹çš„gitã€‚ä¸ºæ­¤æˆ‘ä»¬å¯ä»¥ä¿®æ”¹â€œ/etc/profileâ€æ–‡ä»¶ï¼ˆæˆ–è€…/etc/bashrcæ–‡ä»¶ï¼‰ã€‚</div><div class="line"></div><div class="line">sudo vim /etc/profile</div><div class="line">ç„¶ååœ¨æ–‡ä»¶çš„æœ€åä¸€è¡Œï¼Œæ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼Œç„¶åä¿å­˜é€€å‡ºã€‚</div><div class="line"></div><div class="line">export PATH=/usr/local/git/bin:$PATH</div><div class="line">ï¼ˆ7ï¼‰ä½¿ç”¨sourceå‘½ä»¤åº”ç”¨ä¿®æ”¹ã€‚</div><div class="line"></div><div class="line">source /etc/profile</div><div class="line"></div><div class="line">ï¼ˆ8ï¼‰ç„¶åå†æ¬¡ä½¿ç”¨git --version æŸ¥çœ‹gitç‰ˆæœ¬ï¼Œå‘ç°è¾“å‡º2.3.0ï¼Œè¡¨æ˜å®‰è£…æˆåŠŸã€‚</div></pre></td></tr></table></figure>
<h3 id="djangoé”™è¯¯"><a href="#djangoé”™è¯¯" class="headerlink" title="djangoé”™è¯¯"></a>djangoé”™è¯¯</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">DisallowedHost at /</div><div class="line"></div><div class="line">Invalid HTTP_HOST header: &apos;10.211.55.6:8000&apos;. You may need to add u&apos;10.211.55.6&apos; to ALLOWED_HOSTS.</div><div class="line">Request Method:	GET</div><div class="line">Request URL:	http://10.211.55.6:8000/</div><div class="line">Django Version:	1.10.4</div><div class="line">Exception Type:	DisallowedHost</div><div class="line">Exception Value:	</div><div class="line">Invalid HTTP_HOST header: &apos;10.211.55.6:8000&apos;. You may need to add u&apos;10.211.55.6&apos; to ALLOWED_HOSTS.</div><div class="line">Exception Location:	/usr/lib/python2.7/site-packages/django/http/request.py in get_host, line 113</div><div class="line">Python Executable:	/usr/bin/python</div><div class="line">Python Version:</div><div class="line"></div><div class="line">1ï¼Œä»¥ä¸Šæ—¶æˆ‘è®¿é—®è¯·æ±‚çš„æ—¶å€™å‡ºç°çš„ï¼ŒåŸå› åœ¨äºDjangoæ¡†æ¶ä¸­çš„åˆ›å»ºçš„ä¸€ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œ</div><div class="line"></div><div class="line">2ï¼Œè·‘ä¸‹è¿™ä¸ªå‘½ä»¤ï¼šPython manage.py runserver 10.211.55.5:8000</div><div class="line"></div><div class="line">3ï¼Œç„¶ååœ¨æˆ‘æœ¬æœºçš„æµè§ˆå™¨ä¸­å†™å…¥ä¸Šè¿°IPå’Œç«¯å£è¯·æ±‚è¿‡å»ï¼šhttp://10.211.55.6:8000</div><div class="line"></div><div class="line">4ï¼Œäºæ˜¯å°±å‡ºç°äº†æœ€ä¸Šé¢çš„é‚£ä¸ªé—®é¢˜ï¼›</div><div class="line"></div><div class="line">5ï¼Œäºæ˜¯å°±å»django-admin.py startproject project-nameåˆ›å»ºçš„é¡¹ç›®ä¸­å»ä¿®æ”¹ setting.py æ–‡ä»¶ï¼š</div><div class="line"></div><div class="line">ALLOWED_HOSTS = [&apos;*&apos;]  ï¼ƒåœ¨è¿™é‡Œè¯·æ±‚çš„hostæ·»åŠ äº†ï¼Š</div><div class="line"></div><div class="line"></div><div class="line">6ï¼Œäºæ˜¯å°±æˆåŠŸçš„è®¿é—®åˆ°äº†Djangoçš„é¡¹ç›®äº†ï¼›</div></pre></td></tr></table></figure>
<h3 id="é…ç½®django"><a href="#é…ç½®django" class="headerlink" title="é…ç½®django"></a>é…ç½®django</h3><p><code>/etc/httpd/conf/httpd.conf</code>confåœ°å€<br><code>/etc/httpd/modules/mod_wsgi.so</code>soæ–‡ä»¶åœ°å€<br><code>/etc/httpd/extra/vhosts/dev.mysite.com.conf</code></p>
<h4 id="httpd-confé…ç½®"><a href="#httpd-confé…ç½®" class="headerlink" title="httpd.confé…ç½®"></a>httpd.confé…ç½®</h4><ul>
<li>è®°å¾—ä¿®æ”¹userå’Œgroupä¸ºwwwï¼Œè¿™ä¸ªwwwæ˜¯ä½ è‡ªå·±åˆ›å»ºçš„ç”¨æˆ·ï¼Œè®°å¾—è¿™ä¸ªwwwè¦åŠ åˆ°rootä¸‹ï¼Œç„¶åå°†æ ¹æ–‡ä»¶æ›´æ”¹æ‰€æœ‰è€…</li>
<li>è®°å¾—æ·»åŠ ä½ çš„ç«¯å£åˆ°iptablesä¸­å»</li>
</ul>
<h4 id="wsgi-pyæ–‡ä»¶å†…å®¹"><a href="#wsgi-pyæ–‡ä»¶å†…å®¹" class="headerlink" title="wsgi.pyæ–‡ä»¶å†…å®¹"></a>wsgi.pyæ–‡ä»¶å†…å®¹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">import os</div><div class="line"></div><div class="line">from os.path import join,dirname,abspath</div><div class="line"></div><div class="line">PROJECT_DIR = dirname(dirname(abspath(__file__)))#3</div><div class="line">import sys # 4</div><div class="line">sys.path.insert(0,PROJECT_DIR) # 5</div><div class="line"></div><div class="line">from django.core.wsgi import get_wsgi_application</div><div class="line"></div><div class="line">os.environ.setdefault(&quot;DJANGO_SETTINGS_MODULE&quot;, &quot;jdjrweb.settings&quot;)</div><div class="line"></div><div class="line">application = get_wsgi_application()</div></pre></td></tr></table></figure>
<h4 id="etc-httpd-extra-vhosts-dev-mysite-com-confé…ç½®"><a href="#etc-httpd-extra-vhosts-dev-mysite-com-confé…ç½®" class="headerlink" title="/etc/httpd/extra/vhosts/dev.mysite.com.confé…ç½®"></a>/etc/httpd/extra/vhosts/dev.mysite.com.confé…ç½®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">Listen 80</div><div class="line">&lt;VirtualHost *:80&gt;</div><div class="line"></div><div class="line">    LogLevel info</div><div class="line"></div><div class="line">    ServerName 104.238.153.13</div><div class="line">    ServerAdmin my@mysite.com</div><div class="line"></div><div class="line">    ErrorLog &quot;/root/jdjr/datalog/error_log&quot;</div><div class="line">    CustomLog &quot;/root/jdjr/datalog/access_log&quot; common</div><div class="line"></div><div class="line">    WSGIScriptAlias / /root/jdjr/jdjrweb/jdjrweb/wsgi.py</div><div class="line">   #WSGIScriptAlias / /root/jdjr/jdjrweb </div><div class="line">    &lt;Directory &quot;/root/jdjr/jdjrweb&quot;&gt;</div><div class="line">         Require all granted</div><div class="line">    &lt;/Directory&gt;</div><div class="line"></div><div class="line">    Alias /static/ /root/jdjr/jdjrweb/jdjrweb/static/</div><div class="line"></div><div class="line">    &lt;Directory &quot;/root/jdjr/jdjrweb/jdjrweb/static/&quot;&gt;</div><div class="line">         Require all granted</div><div class="line">    &lt;/Directory&gt;</div><div class="line"></div><div class="line">    &lt;Directory &quot;/root/jdjr/jdjrweb&quot;&gt;</div><div class="line">         #Options Indexes FollowSymLinks</div><div class="line">         #AllowOverride All</div><div class="line">         #Order allow,deny</div><div class="line">         Require all granted</div><div class="line">    &lt;/Directory&gt;</div><div class="line"></div><div class="line">    &lt;Directory &quot;/root/jdjr/datalog&quot;&gt;</div><div class="line">        Require all granted</div><div class="line">    &lt;/Directory&gt;</div><div class="line"></div><div class="line">    &lt;Directory &quot;/root/jdjr/jdjrweb/jdjrweb&quot;&gt;</div><div class="line">        &lt;Files wsgi.py&gt;</div><div class="line">           Require all granted</div><div class="line">        &lt;/Files&gt;</div><div class="line">    &lt;/Directory&gt;</div><div class="line"></div><div class="line"></div><div class="line">    #&lt;Files &quot;/root/jdjr/jdjrweb/jdjrweb/wsgi.py&quot;&gt;</div><div class="line">    #   Require all granted</div><div class="line">   # &lt;/Files&gt;</div><div class="line"></div><div class="line">&lt;/VirtualHost&gt;</div></pre></td></tr></table></figure>
<h4 id="æ–‡ä»¶æƒé™é…ç½®"><a href="#æ–‡ä»¶æƒé™é…ç½®" class="headerlink" title="æ–‡ä»¶æƒé™é…ç½®"></a>æ–‡ä»¶æƒé™é…ç½®</h4><p>çœ‹<code>/etc/httpd/conf/httpd.conf</code>è¿™ä¸ªæ–‡ä»¶é‡Œè¾¹çš„userå’Œgroupï¼Œè¿™é‡Œé…ç½®çš„æ˜¯apacheï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦ç»™æˆ‘ä»¬ç”¨åˆ°çš„æ–‡ä»¶çš„ç”¨æˆ·åˆ‡æ¢åˆ°apacheï¼Œç„¶åç»™è¿™ä¸ªç”¨æˆ·æœ€é«˜æƒé™</p>
<p><code>sudo chmod -R u+wrx jdjr</code>å…¶ä¸­jdjræ˜¯æˆ‘æ‰€ç”¨åˆ°çš„æ–‡ä»¶å¤¹ï¼Œ-Rä»£è¡¨é€’å½’æ‰€æœ‰å­æ–‡ä»¶</p>
<blockquote>
<p>ah01797: client denied by server configuration /wsgi.py<br>å‡å¦‚æŠ¥è¿™ä¸ªé”™è¯¯è¯´æ˜æ–‡ä»¶å¤¹çš„æƒé™é…ç½®ä¸å¯¹ï¼Œåº”è¯¥æŠŠä¸‹è¾¹æˆ‘æ³¨é‡Šæ‰çš„é‚£äº›ä¸œè¥¿å»äº†å°±å¥½äº†ï¼Œåªç•™ä¸‹<code>Require all granted</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;Directory &quot;/root/jdjr/jdjrweb&quot;&gt;</div><div class="line">     #Options Indexes FollowSymLinks</div><div class="line">     #AllowOverride All</div><div class="line">     #Order allow,deny</div><div class="line">     Require all granted</div><div class="line">&lt;/Directory&gt;</div></pre></td></tr></table></figure></blockquote>
]]></content>
      
        
        <tags>
            
            <tag> Lunix </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Andoridè‡ªåŠ¨æ‰“åŒ…gradleå®‰è£…ç¬”è®°]]></title>
      <url>/2016/12/16/2017/Andorid%E8%87%AA%E5%8A%A8%E6%89%93%E5%8C%85gradle%E5%AE%89%E8%A3%85%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<ul>
<li>å®‰è£…andorid studio</li>
<li>copyä¸€ä»½sdkè¿‡æ¥</li>
<li>è®¾ç½®andorid studioçš„sdkè·¯å¾„<a id="more"></a></li>
<li><p>å®‰è£…sdkman</p>
<ul>
<li><p>åœ¨æ§åˆ¶å°æˆ–è€…item2ä¸­è¾“å…¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">curl -s https://get.sdkman.io | bash</div><div class="line">source &quot;$HOME/.sdkman/bin/sdkman-init.sh&quot;</div></pre></td></tr></table></figure>
<p>æ£€éªŒsdkmanæ˜¯å¦å®‰è£…æˆåŠŸ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sdk version</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>å®‰è£…andorid studioä¸­è®¤å¯çš„gradleç‰ˆæœ¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sdk install gradle 2.8</div></pre></td></tr></table></figure>
</li>
<li><p>å‡çº§jdkåˆ°andorid studioè®¤å¯çš„ç‰ˆæœ¬æ¯”å¦‚è¯´1.7</p>
</li>
<li>åˆ°å·¥ç¨‹æ ¹ç›®å½•ï¼Œæ‰§è¡Œgradle buildå°±å¯ä»¥äº†â€™gradle assembleDebugâ€™</li>
<li>æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶åœ¨outputsä¸­</li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> andorid </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[åŸºäºDjangoçš„è‡ªåŠ¨åŒ–å¹³å°æ„å»ºç¬”è®°(1)]]></title>
      <url>/2016/12/15/2017/%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B9%B3%E5%8F%B0%E6%9E%84%E5%BB%BA%E7%AC%94%E8%AE%B0(1)/</url>
      <content type="html"><![CDATA[<p>ç°åœ¨æä¾›çš„æœåŠ¡ä¸»è¦æœ‰ï¼š</p>
<ul>
<li>æ ¹æ®propertyåˆ›å»ºUIä»£ç </li>
<li>JSONè‡ªåŠ¨è½¬æ¨¡å‹</li>
<li>è‡ªåŠ¨æ‰“åŒ…æœåŠ¡</li>
<li>å…¶ä»–æ•ˆç‡å·¥å…·çš„é“¾æ¥<a id="more"></a>
</li>
</ul>
<p>å…¶ä¸­æœ€é‡è¦çš„ï¼Œä¹Ÿæ˜¯æœ€å¤æ‚çš„åº”è¯¥æ˜¯è‡ªåŠ¨æ‰“åŒ…çš„æœåŠ¡ï¼Œè¿™å¥—æœåŠ¡ç”¨pythonè¯­è¨€æ¥å®ç°ï¼ŒåŸºäºpythonçš„djangoæ¡†æ¶ï¼Œå…¶ä¸­djangoæ¡†æ¶ä¸»è¦ç”¨æ¥æä¾›webæœåŠ¡ï¼Œç”¨æ¥ç»™ç”¨æˆ·è®¿é—®ï¼Œè€ŒæœåŠ¡çš„æ‰§è¡Œè€…ï¼Œæ¯”å¦‚è¯´UIçš„ä»£ç åˆ›å»ºï¼Œéœ€è¦ç”¨åˆ°å­—ç¬¦ä¸²è§£æç­‰åŠŸèƒ½ï¼Œå®Œå…¨ç”±pythonåœ¨æœåŠ¡å™¨ç«¯æ¥å®Œæˆï¼Œæˆ‘ä»¬é€šè¿‡ç½‘ç»œå°†éœ€è¦è§£æçš„æ•°æ®å‘é€ç»™æœåŠ¡å™¨ï¼Œç„¶åæœåŠ¡å™¨åšå®Œå¤„ç†ä¹‹åï¼Œå†é€šè¿‡ç½‘ç»œå°†æ•°æ®è¿”å›ï¼Œç„¶åé€šè¿‡djangoæ¥å®Œæˆå±•ç¤ºã€‚å†åˆ°æ‰“åŒ…æœåŠ¡ä¹Ÿæ˜¯è¿™ç§é€»è¾‘ï¼Œé€šè¿‡webæœåŠ¡æ¥å‘é€æŒ‡ä»¤ç»™æœåŠ¡å™¨ï¼Œç„¶åæœåŠ¡å™¨è°ƒç”¨å‘½ä»¤è¡Œæ¥å®Œæˆæ‰“åŒ…çš„å…·ä½“çš„åŠ¨ä½œ</p>
<h3 id="Djangoä½¿ç”¨ç®€è§£"><a href="#Djangoä½¿ç”¨ç®€è§£" class="headerlink" title="Djangoä½¿ç”¨ç®€è§£"></a>Djangoä½¿ç”¨ç®€è§£</h3><p>Djangoæ˜¯ä¸€ä¸ªpythonçš„é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨WebStormæ¥ç¼–è¾‘è¯¥é¡¹ç›®ã€‚å½“è¿è¡Œçš„æ—¶å€™ä¼šç”Ÿæˆä¸€ä¸ªæœ¬åœ°çš„webæœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯¥åœ°å€ï¼Œåœ¨æµè§ˆå™¨è®¿é—®è¿™ä¸ªæœåŠ¡ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œæ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œè¿›å…¥åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼Œmanager.pyçš„æ‰€åœ¨ç›®å½•ï¼Œæ‰§è¡Œ<code>python manager.py runserver</code>ï¼Œç„¶åç‚¹å‡»ç»™å‡ºçš„åœ°å€ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥æŸ¥çœ‹æœåŠ¡ã€‚</p>
<p>å¯¹äºè¿™ä¸ªæ–°å»ºçš„djangoå·¥ç¨‹æˆ‘ä»¬ä¸»è¦å…³æ³¨çš„æ˜¯ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯ProjectName/urls.pyï¼Œå¦ä¸€ä¸ªæ˜¯appName/views.pyã€‚</p>
<h4 id="urls-py"><a href="#urls-py" class="headerlink" title="urls.py"></a>urls.py</h4><p>è¿™ä¸ªæ–‡ä»¶æ—¶æ•´ä¸ªå·¥ç¨‹çš„è·¯ç”±ï¼Œå°†urlä¸å…·ä½“çš„æœåŠ¡æˆ–è€…è¦å±•ç¤ºçš„é¡µé¢ç›¸å¯¹åº”ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">from django.conf.urls import url</div><div class="line">from django.contrib import admin</div><div class="line">from learn import views as learn_views  # new</div><div class="line">from django.contrib.staticfiles.urls import staticfiles_urlpatterns</div><div class="line"></div><div class="line"></div><div class="line">urlpatterns = [</div><div class="line">url(r&apos;next&apos;, learn_views.nextPage),  # new</div><div class="line">url(r&apos;^$&apos;, learn_views.home,name=&apos;home&apos;),  # new</div><div class="line">url(r&apos;^admin/&apos;, admin.site.urls),</div><div class="line">url(r&apos;callPython&apos;, learn_views.compute),  # new</div><div class="line">url(r&apos;ajaxpack&apos;, learn_views.ajaxpack),</div><div class="line">url(r&apos;ajaxgetbranches&apos;, learn_views.ajaxgetbranchesfunc),</div><div class="line">url(r&apos;add&apos;, learn_views.compute),  # new</div><div class="line">url(r&apos;uicreate&apos;, learn_views.uicreate),</div><div class="line">url(r&apos;ajaxcreateui&apos;, learn_views.createui),</div><div class="line">url(r&apos;package&apos;, learn_views.package),</div><div class="line">url(r&apos;buildlist&apos;, learn_views.buildlist),</div><div class="line">url(r&apos;ajaxsendMail&apos;, learn_views.sendMails),</div><div class="line">url(r&apos;jsonFormatClick1&apos;, learn_views.jsonFormat1),</div><div class="line">url(r&apos;jsonFormatClick2&apos;, learn_views.jsonFormat2),</div><div class="line">url(r&apos;interfaceTestClick&apos;, learn_views.interfaceTest),</div><div class="line">url(r&apos;url1&apos;, learn_views.getUrl1),</div><div class="line">url(r&apos;url2&apos;, learn_views.getUrl2),  # new</div><div class="line">url(r&apos;url3&apos;, learn_views.getUrl3),</div><div class="line">url(r&apos;url4&apos;, learn_views.getUrl4),</div><div class="line">url(r&apos;url5&apos;, learn_views.getUrl5),  # new</div><div class="line">url(r&apos;url6&apos;, learn_views.getUrl6),</div><div class="line">url(r&apos;url7&apos;, learn_views.getUrl7)</div><div class="line">]</div><div class="line"></div><div class="line"># ... the rest of your URLconf goes here ...</div><div class="line">urlpatterns += staticfiles_urlpatterns()</div></pre></td></tr></table></figure>
<p>çœ‹ä¸Šè¾¹è¿™æ®µä»£ç ï¼Œæ–°åŠ å…¥çš„æœ‰<code>from learn import views as learn_views  # new</code>è¿™ä¸ªæ˜¯å¼•å…¥äº†learnè¿™ä¸ªappä¸­çš„viewsè¿™ä¸ªæ–‡ä»¶ï¼Œç„¶ååœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ—è¡¨ä¸­æ·»åŠ å¾ˆå¤šçš„urlä¸æœåŠ¡çš„å¯¹åº”ï¼Œurlçš„å†™æ³•çš„è®²ç©¶åœ¨äºï¼Œ<code>next</code>æ„å‘³ç€åŒ…å«nextå°±è·³è¿™ä¸ªï¼Œ<code>^next</code>æ„å‘³ç€ä»¥nextå¼€å¤´ï¼Œ<code>next$</code>æ„å‘³ç€ä»¥nextç»“å°¾ï¼Œ<code>^next$</code>æ„å‘³ç€ç›´é‚®nextæ‰è·³è¿™ä¸ªï¼Œå®Œå…¨å¯¹åº”çš„æ„æ€ï¼Œè¿™ä¸ªæ–‡ä»¶çš„ä½œç”¨ä¸»è¦å°±è¿™äº›</p>
<h4 id="views-py"><a href="#views-py" class="headerlink" title="views.py"></a>views.py</h4><p>å…·ä½“çš„æœåŠ¡æˆ‘ä»¬æ˜¯ç”±è¿™ä¸ªæ–‡ä»¶æ¥æä¾›çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div></pre></td><td class="code"><pre><div class="line">from django.http import HttpResponse</div><div class="line">from django.shortcuts import render</div><div class="line">from DIY.compute import getModelFromJson</div><div class="line">from DIY.createui import getCreatedStringWithProperties</div><div class="line">from DIY.packServer import packaged,getbranches</div><div class="line">from django.http import HttpResponseRedirect</div><div class="line">from DIY.mail import sendMail</div><div class="line"></div><div class="line">def home(request):</div><div class="line">string = &apos;è¿™æ˜¯&apos;</div><div class="line">return render(request,&apos;home.html&apos;,&#123;&apos;string&apos;:string&#125;)</div><div class="line"></div><div class="line"></div><div class="line">def nextPage(request):</div><div class="line">return render(request,&apos;next.html&apos;)</div><div class="line"></div><div class="line">def compute(request):</div><div class="line">string = request.POST[&apos;text&apos;]</div><div class="line">string = getModelFromJson(string)</div><div class="line">return HttpResponse(string)</div><div class="line"></div><div class="line">def uicreate(request):</div><div class="line">return render(request,&apos;UICreate.html&apos;)</div><div class="line"></div><div class="line">def createui(request):</div><div class="line">string = request.GET[&apos;text&apos;]</div><div class="line">string = getCreatedStringWithProperties(string)</div><div class="line">return HttpResponse(string)</div><div class="line"></div><div class="line">def package(request):</div><div class="line">return render(request,&apos;package.html&apos;)</div><div class="line"></div><div class="line">def ajaxpack(request):</div><div class="line"></div><div class="line">f = open(&apos;/Users/wxg/Documents/Build/building.txt&apos;,&apos;r&apos;)</div><div class="line">text = f.read()</div><div class="line">if text == &apos;&apos;:</div><div class="line">string = request.GET[&apos;text&apos;]</div><div class="line">resurtString = packaged(string)</div><div class="line">return HttpResponse(&apos;done&apos;)</div><div class="line">else:</div><div class="line">return HttpResponse(&apos;wait&apos;)   </div><div class="line"></div><div class="line">def ajaxgetbranchesfunc(request):</div><div class="line">return HttpResponse(getbranches(&apos;string&apos;))</div><div class="line"></div><div class="line">def buildlist(requets):</div><div class="line">return HttpResponseRedirect(&apos;http://10.13.80.19:8000/Documents/Build&apos;)</div><div class="line"></div><div class="line">def sendMails(request):</div><div class="line">sendMail(&apos;&apos;)</div><div class="line">return HttpResponse(&apos;hi&apos;)  </div><div class="line"></div><div class="line">def jsonFormat1(request):</div><div class="line">return HttpResponseRedirect(&apos;http://www.jsonparseronline.com&apos;)</div><div class="line"></div><div class="line">def jsonFormat2(request):</div><div class="line">return HttpResponseRedirect(&apos;http://www.sojson.com&apos;)    </div><div class="line"></div><div class="line">def interfaceTest(request):</div><div class="line">return HttpResponseRedirect(&apos;http://www.atool.org/httptest.php&apos;)</div><div class="line"></div><div class="line">def getUrl1(request):</div><div class="line">f = open(&apos;/Users/han/Desktop/text1.txt&apos;, &apos;r&apos;)</div><div class="line">text = f.read()</div><div class="line">f.close()</div><div class="line">return HttpResponse(text)</div><div class="line"></div><div class="line">def getUrl2(request):</div><div class="line">f = open(&apos;/Users/han/Desktop/text2.txt&apos;, &apos;r&apos;)</div><div class="line">text = f.read()</div><div class="line">f.close()</div><div class="line">return HttpResponse(text)</div><div class="line"></div><div class="line">def getUrl3(request):</div><div class="line">f = open(&apos;/Users/han/Desktop/text3.txt&apos;, &apos;r&apos;)</div><div class="line">text = f.read()</div><div class="line">f.close()</div><div class="line">return HttpResponse(text)</div><div class="line"></div><div class="line">def getUrl4(request):</div><div class="line">f = open(&apos;/Users/han/Desktop/text4.txt&apos;, &apos;r&apos;)</div><div class="line">text = f.read()</div><div class="line">f.close()</div><div class="line">return HttpResponse(text)</div><div class="line"></div><div class="line">def getUrl5(request):</div><div class="line">f = open(&apos;/Users/han/Desktop/text5.txt&apos;, &apos;r&apos;)</div><div class="line">text = f.read()</div><div class="line">f.close()</div><div class="line">return HttpResponse(text)</div><div class="line"></div><div class="line">def getUrl6(request):</div><div class="line">f = open(&apos;/Users/han/Desktop/text6.txt&apos;, &apos;r&apos;)</div><div class="line">text = f.read()</div><div class="line">f.close()</div><div class="line">return HttpResponse(text)</div><div class="line"></div><div class="line">def getUrl7(request):</div><div class="line">f = open(&apos;/Users/han/Desktop/text7.txt&apos;, &apos;r&apos;)</div><div class="line">text = f.read()</div><div class="line">f.close()</div><div class="line">return HttpResponse(text)</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ‹¿å…·ä½“çš„ä¾‹å­æ¥è¯´ï¼Œä¸Šè¾¹çš„è¿™äº›ä»£ç ï¼Œå°±æ˜¯æˆ‘ä»¬èƒ½å¤Ÿæä¾›çš„å…·ä½“çš„æœåŠ¡ï¼Œå…·ä½“è¯´æ¥æˆ‘ä»¬ä¸»è¦æä¾›ä¸‰ç§æœåŠ¡</p>
<h5 id="è¿”å›json"><a href="#è¿”å›json" class="headerlink" title="è¿”å›json"></a>è¿”å›json</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">def compute(request):</div><div class="line">string = request.POST[&apos;text&apos;]</div><div class="line">string = getModelFromJson(string)</div><div class="line">return HttpResponse(string)</div></pre></td></tr></table></figure>
<p>æ¯”å¦‚è¿™ä¸ªï¼Œéœ€è¦å¼•å…¥<br>from django.http import HttpResponse</p>
<h5 id="è¿”å›ä¸€ä¸ªhtmlæ–‡ä»¶"><a href="#è¿”å›ä¸€ä¸ªhtmlæ–‡ä»¶" class="headerlink" title="è¿”å›ä¸€ä¸ªhtmlæ–‡ä»¶"></a>è¿”å›ä¸€ä¸ªhtmlæ–‡ä»¶</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">def home(request):</div><div class="line">string = &apos;è¿™æ˜¯&apos;</div><div class="line">return render(request,&apos;home.html&apos;,&#123;&apos;string&apos;:string&#125;)</div></pre></td></tr></table></figure>
<p>ä¸­é—´çš„å‚æ•°<code>home.html</code>å°±æ˜¯ä¸€ä¸ªhtmlçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Œä¸views.pyåŒçº§æœ‰ä¸ªtemplatesæ–‡ä»¶å¤¹ï¼Œé‡Œè¾¹æ˜¯æˆ‘ä»¬è¦å­˜æ”¾çš„htmlæ–‡ä»¶ï¼Œè¿™ä¸ªéœ€è¦htmlå’Œcssçš„ä¸€äº›çŸ¥è¯†æ¥ç¼–å†™</p>
<h5 id="è¿”å›è·³ä¸€ä¸ªå…¶ä»–çš„urlï¼Œæ¯”å¦‚è·³baiduæˆ–è€…æ¡æœåŠ¡å™¨çš„æŸä¸ªæ–‡ä»¶å¤¹éƒ½æ˜¯å¯ä»¥çš„"><a href="#è¿”å›è·³ä¸€ä¸ªå…¶ä»–çš„urlï¼Œæ¯”å¦‚è·³baiduæˆ–è€…æ¡æœåŠ¡å™¨çš„æŸä¸ªæ–‡ä»¶å¤¹éƒ½æ˜¯å¯ä»¥çš„" class="headerlink" title="è¿”å›è·³ä¸€ä¸ªå…¶ä»–çš„urlï¼Œæ¯”å¦‚è·³baiduæˆ–è€…æ¡æœåŠ¡å™¨çš„æŸä¸ªæ–‡ä»¶å¤¹éƒ½æ˜¯å¯ä»¥çš„"></a>è¿”å›è·³ä¸€ä¸ªå…¶ä»–çš„urlï¼Œæ¯”å¦‚è·³baiduæˆ–è€…æ¡æœåŠ¡å™¨çš„æŸä¸ªæ–‡ä»¶å¤¹éƒ½æ˜¯å¯ä»¥çš„</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">def jsonFormat1(request):</div><div class="line">return HttpResponseRedirect(&apos;http://www.jsonparseronline.com&apos;)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">def buildlist(requets):</div><div class="line">return HttpResponseRedirect(&apos;http://10.13.80.19:8000/Documents/Build&apos;)</div></pre></td></tr></table></figure>
<p>è¿˜æœ‰ä¸ªé—®é¢˜éœ€è¦è¯´æ˜å°±æ˜¯ï¼Œæˆ‘ä»¬è¿™é‡Œéœ€è¦å¾ˆå¤špythonçš„æœåŠ¡ï¼Œå¦‚ä½•å¼•å…¥å‘¢ï¼Œç›´æ¥å¼•å…¥å‡½æ•°çš„åç§°å°±å¯ä»¥äº†ï¼Œå°±åƒæ˜¯<code>from DIY.packServer import packaged,getbranches</code></p>
<p>Djangoå®‰è£…å’Œé…ç½®å…·ä½“å¯ä»¥å‚è€ƒ<a href="http://hanson647.com/2016/11/09/2016/Djangoéƒ¨ç½²-apache-mod-wsgi/" target="_blank" rel="external">Djangoéƒ¨ç½²+apache+mod_wsgi</a></p>
<h3 id="è‡ªåŠ¨æ‰“åŒ…æœåŠ¡çš„æ„å»ºè¿‡ç¨‹"><a href="#è‡ªåŠ¨æ‰“åŒ…æœåŠ¡çš„æ„å»ºè¿‡ç¨‹" class="headerlink" title="è‡ªåŠ¨æ‰“åŒ…æœåŠ¡çš„æ„å»ºè¿‡ç¨‹"></a>è‡ªåŠ¨æ‰“åŒ…æœåŠ¡çš„æ„å»ºè¿‡ç¨‹</h3><p>è¿™é‡Œè¯´ä¸¤ç‚¹ï¼Œç¬¬ä¸€ä¸ªæ˜¯æˆ‘ä»¬å®ç°çš„ä¸€äº›æ¯”è¾ƒä¸å¸¸è§çš„åŠŸèƒ½ï¼Œä¸€ä¸ªæ˜¯è¸©åˆ°çš„å‘ã€‚<br>å…ˆæ¥è¯´ä¸€ä¸‹åŠŸèƒ½ç‚¹ï¼š</p>
<ul>
<li>çº¿ä¸Šå’Œé¢„å‘çš„åˆ‡æ¢</li>
<li>æ¸…é™¤æœ¬åˆ†æ”¯åšçš„æ“ä½œ</li>
<li>.appè½¬æ¢ä¸º.ipa</li>
<li>xcode XCBuildConfigurationé…ç½®æ–‡ä»¶è‡ªåŠ¨è®¾ç½®</li>
</ul>
<h4 id="appè½¬æ¢ä¸º-ipa"><a href="#appè½¬æ¢ä¸º-ipa" class="headerlink" title=".appè½¬æ¢ä¸º.ipa"></a>.appè½¬æ¢ä¸º.ipa</h4><p>å½“æˆ‘ä»¬æ‰§è¡Œäº†<code>xcodebuild build</code>çš„å‘½ä»¤ä¹‹åï¼Œå½¢æˆçš„æ˜¯ä¸€ä¸ª.appæ–‡ä»¶ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦åšçš„å‹ç¼©è¿™ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ˜¯ipaæ–‡ä»¶ç”Ÿæˆçš„åŸç†<br>å…·ä½“æ­¥éª¤ï¼š</p>
<ul>
<li>Step1: æ–°å»ºâ€œPayloadâ€æ–‡ä»¶å¤¹ï¼Œæ³¨æ„åå­—è¦ä¸€å­—ä¸å·®ï¼›</li>
<li>Step2: å°†ä½ çš„.appåŒ…æ”¾åˆ°Payloadä¸­ï¼Œæ³¨æ„appçš„åå­—ä¸åšä»»ä½•æ›´æ”¹ï¼Œå°±ç”¨xcodeç”Ÿæˆçš„appåç§°ï¼›</li>
<li>Step3: åœ¨Payloadæ–‡ä»¶å¤¹ä¸Šå³é”®å‹ç¼©æˆzipï¼Œç„¶åå°†ç”Ÿæˆçš„.zipæ–‡ä»¶åç¼€æ”¹æˆ.ipaå³å¯<br>å…·ä½“ä»£ç :</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">import os,shutil</div><div class="line"></div><div class="line">os.mkdir(&apos;Payload&apos;)</div><div class="line"></div><div class="line">shutil.copytree(&apos;JDMobile.app&apos;,&apos;Payload/JDMobile.app&apos;)</div><div class="line"></div><div class="line">os.system(&apos;zip -r Payload.zip Payload&apos;)</div><div class="line"></div><div class="line">files=os.listdir(&quot;.&quot;)</div><div class="line"></div><div class="line">for filename in files:</div><div class="line">    li=os.path.splitext(filename)</div><div class="line">    if li[1]==&quot;.zip&quot;:</div><div class="line">        newname=li[0]+&quot;.ipa&quot;</div><div class="line">        os.rename(filename,newname)</div><div class="line"></div><div class="line">shutil.rmtree(&apos;JDMobile.app&apos;)</div><div class="line">shutil.rmtree(&apos;Payload&apos;)</div></pre></td></tr></table></figure>
<h4 id="xcode-XCBuildConfigurationé…ç½®æ–‡ä»¶è‡ªåŠ¨è®¾ç½®"><a href="#xcode-XCBuildConfigurationé…ç½®æ–‡ä»¶è‡ªåŠ¨è®¾ç½®" class="headerlink" title="xcode XCBuildConfigurationé…ç½®æ–‡ä»¶è‡ªåŠ¨è®¾ç½®"></a>xcode XCBuildConfigurationé…ç½®æ–‡ä»¶è‡ªåŠ¨è®¾ç½®</h4><p>è¿™é‡Œä½¿ç”¨mod-pbxprojï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªpythonè§£æåº“ï¼Œç”¨æ³•å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">from mod_pbxproj import XcodeProject</div><div class="line">import commands</div><div class="line"></div><div class="line">def configProject():</div><div class="line"></div><div class="line">    project = XcodeProject.Load(&apos;/Users/wxg/Documents/JDMobileNew/JDMobile_2.0/JDMobile.xcodeproj/project.pbxproj&apos;)</div><div class="line"></div><div class="line">    for item in project.objects.values():</div><div class="line">        nameIsa = item.get(&apos;isa&apos;)</div><div class="line"></div><div class="line">        if (nameIsa == &apos;XCBuildConfiguration&apos;):</div><div class="line">            setting = item.get(&apos;buildSettings&apos;)</div><div class="line">            nameReference = item.get(&apos;baseConfigurationReference&apos;)</div><div class="line">            if (nameReference):</div><div class="line">               idStr = setting.get(&apos;PRODUCT_BUNDLE_IDENTIFIER&apos;)</div><div class="line">               print &apos;----&gt;&apos; + idStr</div><div class="line">               setting.__setitem__(&apos;PRODUCT_BUNDLE_IDENTIFIER&apos;,&apos;com.jd.jinrong2016&apos;)</div><div class="line">               setting.__setitem__(&apos;PROVISIONING_PROFILE&apos;,&apos;&apos;)</div><div class="line">               setting.__setitem__(&apos;PROVISIONING_PROFILE_SPECIFIER&apos;,&apos;&apos;)</div><div class="line">               setting.__setitem__(&apos;DEVELOPMENT_TEAM&apos;,&apos;5TKVHWTT79&apos;)</div><div class="line">               setting.__setitem__(&apos;CODE_SIGN_IDENTITY[sdk=iphoneos*]&apos;,&apos;iPhone Developer&apos;)</div><div class="line">               item.__setitem__(&apos;buildSettings&apos;,setting)</div><div class="line">            else:</div><div class="line">               codeSign = setting.get(&apos;CODE_SIGN_IDENTITY&apos;)</div><div class="line">               profile = setting.get(&apos;PROVISIONING_PROFILE&apos;)</div><div class="line">               print codeSign</div><div class="line">               print profile</div><div class="line">               setting.__setitem__(&apos;CODE_SIGN_IDENTITY&apos;,&apos;iPhone Distribution: Beijing Jingdong Century Trading Co., Ltd. (TQZTTUQ9ZE)&apos;)</div><div class="line">               setting.__setitem__(&apos;PROVISIONING_PROFILE&apos;,&apos;0d8cd55a-c922-4f27-b1aa-df6a2f277ea5&apos;)</div><div class="line">               item.__setitem__(&apos;buildSettings&apos;,setting)</div><div class="line"></div><div class="line">        elif (nameIsa == &apos;PBXProject&apos;):</div><div class="line">            attributes = item.get(&apos;attributes&apos;)</div><div class="line">            targetAttributes = attributes.get(&apos;TargetAttributes&apos;)</div><div class="line">            targets = item.get(&apos;targets&apos;)</div><div class="line">            tar = targets[0]</div><div class="line">            attr = targetAttributes.get(&apos;%s&apos; % tar)</div><div class="line">            developmentTeamName = attr.get(&apos;DevelopmentTeamName&apos;)</div><div class="line">            developmentTeamName = attr.get(&apos;ProvisioningStyle&apos;)</div><div class="line">            print developmentTeamName</div><div class="line">            attr.__setitem__(&apos;DevelopmentTeamName&apos;,&apos;Beijing Jingdong Century Information Technology Co., Ltd.&apos;)</div><div class="line">            attr.__setitem__(&apos;ProvisioningStyle&apos;, &apos;Automatic&apos;)</div><div class="line">            attr.__setitem__(&apos;DevelopmentTeam&apos;, &apos;5TKVHWTT79&apos;)</div><div class="line"></div><div class="line">    project.save()</div></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„å‘ä¸»è¦æ˜¯ç”±æƒé™å¼•èµ·çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä»webæœåŠ¡å»è°ƒç”¨ä¸€ä¸ªå‘½ä»¤è¡Œçš„æŒ‡ä»¤çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™çš„å¹¶ä¸æ˜¯ç™»å½•çŠ¶æ€çš„æƒé™ï¼Œè€Œæ˜¯ä¸€ä¸ªéç™»å½•çŠ¶æ€çš„æƒé™ï¼Œè¿™ä¸ªæ—¶å€™æœ‰ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ˜¯å¾ˆå¤šæœåŠ¡æ˜¯æ²¡æœ‰è¢«åŠ è½½çš„ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸€äº›æ–‡ä»¶æ²¡æœ‰æƒé™å»è°ƒç”¨ï¼Œä¸‹é¢åˆ†åˆ«æ¥è¯´</p>
<ul>
<li>gradleæ— æ³•è°ƒç”¨</li>
<li>è‹¹æœçš„å¼€å‘è€…è¯ä¹¦ä¸èƒ½è¯»å–</li>
<li>git pullå‘½ä»¤éœ€è¦ç”¨æˆ·åå’Œå¯†ç </li>
</ul>
<h4 id="gradleæ— æ³•è°ƒç”¨"><a href="#gradleæ— æ³•è°ƒç”¨" class="headerlink" title="gradleæ— æ³•è°ƒç”¨"></a>gradleæ— æ³•è°ƒç”¨</h4><p>è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªé—®é¢˜æ˜¯macçš„ç¯å¢ƒå˜é‡ï¼Œé€šè¿‡åœ¨ç»ˆç«¯è¾“å…¥<code>$PATH</code>æ¥æŸ¥çœ‹å½“å‰ç”¨æˆ·ä¸‹åŠ è½½çš„è·¯å¾„æœ‰å“ªäº›ï¼Œå¦‚æœè¿”å›çš„è·¯å¾„ä¸­åŒ…å«æˆ‘ä»¬çš„æœåŠ¡çš„è·¯å¾„ï¼Œé‚£ä¹ˆè‚¯å®šè¿™ä¸ªæœåŠ¡å½“å‰ç”¨æˆ·æ˜¯å¯ä»¥è°ƒç”¨çš„ï¼Œæˆ‘ä»¬åœ¨webæœåŠ¡ä¸­è°ƒç”¨è¿™ä¸ªå‘½ä»¤å‘ç°è¿”å›çš„åªæœ‰<code>usr/bin</code>ç­‰ç€å‡ ä¸ªè·¯å¾„ï¼Œé‚£ä¹ˆæ€è·¯å°±æ¥äº†ï¼Œå¦‚æœgradleæƒ³è¦è¢«ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±éœ€è¦åŠ åˆ°è¿™è·¯å¾„ä¸‹ï¼Œè§£å†³çš„åŠæ³•å°±æ˜¯åŠ ä¸€ä¸ªè½¯è¿æ¥åˆ°/usr/binæ–‡ä»¶ä¸‹ï¼Œsudo ln -s xxxxx xxxxxå°±å¯ä»¥äº†ï¼Œé‚£ä¹ˆå¦‚æœæ‰¾åˆ°è¿™ä¸ªæœåŠ¡çš„å®‰è£…è·¯å¾„å‘¢ï¼Ÿä»¥gradleä¸ºä¾‹<code>which gradle</code>ï¼Œå¦‚æœæ˜¯gitçš„è¯å°±æ˜¯<code>which git</code><br>è¿™é‡Œè¿˜æœ‰ä¸ªé—®é¢˜æ˜¯macå‡çº§ç³»ç»Ÿåï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ä¸å…è®¸æ›´æ”¹çš„ï¼Œè§£å†³åŠæ³•:</p>
<blockquote>
<p>å¯¹äºMac OS X 10.11 El Capitanç”¨æˆ·ï¼Œç”±äºç³»ç»Ÿå¯ç”¨äº†SIP(System Integrity Protection), å¯¼è‡´rootç”¨æˆ·ä¹Ÿæ²¡æœ‰æƒé™ä¿®æ”¹/usr/binç›®å½•ã€‚æŒ‰å¦‚ä¸‹æ–¹å¼å¯æ¢å¤æƒé™ã€‚<br>å±è”½æ–¹æ³•ï¼šé‡å¯Macï¼ŒæŒ‰ä½command+R,è¿›å…¥recoveryæ¨¡å¼ã€‚é€‰æ‹©æ‰“å¼€Utilitiesä¸‹çš„ç»ˆç«¯ï¼Œè¾“å…¥ï¼šcsrutil disableå¹¶å›è½¦ï¼Œç„¶åæ­£å¸¸é‡å¯Macå³å¯</p>
</blockquote>
<h4 id="è‹¹æœçš„å¼€å‘è€…è¯ä¹¦ä¸èƒ½è¯»å–"><a href="#è‹¹æœçš„å¼€å‘è€…è¯ä¹¦ä¸èƒ½è¯»å–" class="headerlink" title="è‹¹æœçš„å¼€å‘è€…è¯ä¹¦ä¸èƒ½è¯»å–"></a>è‹¹æœçš„å¼€å‘è€…è¯ä¹¦ä¸èƒ½è¯»å–</h4><p>User interaction is not allowedè¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºè¯ä¹¦ä¸èƒ½è¢«è¯»å–ï¼Œè¿™æ˜¯å› ä¸ºè¯ä¹¦åœ¨ç™»å½•ä¸‹ï¼Œæˆ‘ä»¬å°†è¯ä¹¦ç§»åŠ¨åˆ°ç³»ç»Ÿä¸‹å°±å¯ä»¥äº†</p>
<h4 id="git-pullå‘½ä»¤éœ€è¦ç”¨æˆ·åå’Œå¯†ç "><a href="#git-pullå‘½ä»¤éœ€è¦ç”¨æˆ·åå’Œå¯†ç " class="headerlink" title="git pullå‘½ä»¤éœ€è¦ç”¨æˆ·åå’Œå¯†ç "></a>git pullå‘½ä»¤éœ€è¦ç”¨æˆ·åå’Œå¯†ç </h4><p>è¿™ä¸ªä¸èƒ½è¢«æ‰§è¡Œä¹Ÿæ˜¯å› ä¸ºæƒé™çš„é—®é¢˜ï¼Œæœ€åçš„è§£å†³æ–¹æ¡ˆï¼Œæ˜¯åœ¨ç™»å½•çŠ¶æ€ä¸‹(å‘½ä»¤è¡Œ)ç›´æ¥å¼€ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œæ­»å¾ªç¯ä¸æ–­çš„æ£€æµ‹ä¸€ä¸ªæ–‡ä»¶ä¸‹æ˜¯å¦æœ‰å¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œå¦‚æœæœ‰è¿™ä¸ªæ–‡ä»¶å¤¹å°±æ‰§è¡Œ<code>git pull</code>å‘½ä»¤ï¼Œæ‰§è¡Œå®Œæ¯•ä¹‹åå†™å…¥æ—¥å¿—ï¼Œç„¶ååˆ é™¤æ–‡ä»¶å†…å®¹ï¼Œç»§ç»­è¿›å…¥åˆ°ä¸‹ä¸€ä¸ªå¾ªç¯ï¼Œè¿™ä¸ªä¸iOSçš„runloopæ˜¯ä¸€ä¸ªé“ç†</p>
<h3 id="djangoä¸­ä½¿ç”¨ajaxçš„postæ–¹æ³•"><a href="#djangoä¸­ä½¿ç”¨ajaxçš„postæ–¹æ³•" class="headerlink" title="djangoä¸­ä½¿ç”¨ajaxçš„postæ–¹æ³•"></a>djangoä¸­ä½¿ç”¨ajaxçš„postæ–¹æ³•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$(&quot;#insert&quot;).click(function()&#123;</div><div class="line">           text =  $(&apos;#textarea1&apos;).val()</div><div class="line">           $.post(&quot;/writecontent/&quot;, &#123;&apos;content&apos;: text,&apos;foldername&apos;:foldername,&apos;filename&apos;:filename&#125;,function(ret)&#123;</div><div class="line">               alert(ret)</div><div class="line">           &#125;)</div><div class="line">       &#125;);</div></pre></td></tr></table></figure>
<p>ä¹‹æ‰€ä»¥ä½¿ç”¨postè¿™é‡Œæ˜¯å› ä¸ºæ— æ³•çªç ´apacheå¯¹äºgetæ–¹æ³•çš„æ•´ä½“å‚æ•°é•¿åº¦é™åˆ¶ï¼Œè€Œä½¿ç”¨postæ–¹æ³•æœ‰ä¸ªé—®é¢˜å°±æ˜¯ä¼šå¼ºåˆ¶CSRFæ ¡éªŒï¼Œè§£å†³æ–¹æ³•å°±æ˜¯å…³é—­djangoçš„éªŒè¯ï¼Œå…·ä½“æ¥è¯´æ˜¯åˆ°settingæ–‡ä»¶ä¸­æ³¨é‡Šä¸€è¡Œä»£ç </p>
<blockquote>
<p>django.middleware.csrf.CsrfViewMiddleware</p>
</blockquote>
<h3 id="å®‰è£…pymongo"><a href="#å®‰è£…pymongo" class="headerlink" title="å®‰è£…pymongo"></a>å®‰è£…pymongo</h3><p>é¦–å…ˆè¦å®‰è£…pipï¼Œç„¶åç”¨pipå®‰è£…pymongo<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo easy_install pip</div></pre></td></tr></table></figure></p>
<p>ç„¶åä½¿ç”¨pipå®‰è£…pymongo<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo pip install pymongo</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªæ—¶å€™è¿›å…¥pythonç¯å¢ƒä½¿ç”¨å‘½ä»¤è¡Œå»è®¿é—®pymongoåº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯ä½ ä½¿ç”¨webè°ƒç”¨çš„æ–¹å¼å»è°ƒç”¨ä¸ä¸€å®šèƒ½å¤Ÿè®¿é—®åˆ°mongoï¼Œè¿™å¯èƒ½æ˜¯å› ä¸ºä½ ä½¿ç”¨çš„pythonå®‰è£…è·¯å¾„çš„é—®é¢˜<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">which python</div></pre></td></tr></table></figure></p>
<p>çœ‹ä¸€ä¸‹å½“å‰åŠ è½½çš„pythonï¼Œä¸å‡ºæ„å¤–åº”è¯¥æ˜¯/usr/local/bin/pythonï¼Œè¿™ä¸ªæ˜¯ç™»å½•çŠ¶æ€ä¸‹æ‰èƒ½åŠ è½½çš„ä¸€ä¸ªç¯å¢ƒå’Œè·¯å¾„ï¼Œè€Œwebæ˜¯éç™»å½•çš„ï¼Œæ‰€ä»¥å¾ˆå¤šåŠŸèƒ½è®¿é—®ä¸åˆ°æ­£å¸¸ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯è®©ç³»ç»Ÿç›´æ¥åŠ è½½/usr/bin/pythonï¼Œè¿™å°±æ¶‰åŠåˆ°ä¸€ä¸ªåŠ è½½ä¼˜å…ˆçº§çš„é—®é¢˜<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo emacs /etc/paths</div></pre></td></tr></table></figure></p>
<blockquote>
<p>/usr/local/bin<br>/usr/bin<br>/bin<br>/usr/sbin<br>/sbin</p>
<p>tips:<br>ç¾åœ¨è¦æŠŠ /usr/local/bin ç§»åˆ°ä¸Šé¢å»</p>
</blockquote>
<p>control + kï¼šæŠŠä¸€è¡Œå­—å‰ªä¸‹ä¾†</p>
<p>control + yï¼šæŠŠå­—è²¼ä¸Š</p>
<p>control + x + sï¼šå­˜æª”</p>
<p>control + x + cï¼šé—œæ‰ emacs</p>
<p>ç„¶åå†æ‰§è¡Œä¸‹è¾¹è¿™å¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo $PATH</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªæ—¶å€™ä½ å†æ‰“å¼€<br>å‘ç°å·²ç»å˜æˆäº†ä¸‹è¾¹è¿™æ ·</p>
<blockquote>
<p>/usr/bin<br>/usr/local/bin<br>/bin<br>/usr/sbin<br>/sbin</p>
</blockquote>
<p>è¿™ä¸ªæ—¶å€™ä½ å†æ‰§è¡Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">which python</div></pre></td></tr></table></figure></p>
<p>å‘ç°å·²ç»å˜æˆäº†<code>/usr/bin/python</code><br>ç°åœ¨çœ‹æ¥ï¼Œç³»ç»ŸåŠ è½½æŸä¸ªåŠŸèƒ½çš„é€»è¾‘ï¼Œå°±æ˜¯ç›´æ¥åœ¨è¿™äº›ä¸ªåŠ è½½åˆ—è¡¨ä¸­æ‰¾è¿™äº›ä¸ªåŠŸèƒ½ï¼Œå¦‚æœé€ä¸ªåŠ è½½äº†ä¸€éå‘ç°æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ï¼Œå¦‚æœç¬¬ä¸€è·¯å¾„ä¸‹æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œç¬¬äºŒè·¯å¾„ä¸‹ä¹Ÿæœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œé‚£ä¹ˆå°±ä¼šç”¨ç¬¬ä¸€è·¯å¾„ä¸‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ›´æ”¹ç¬¬ä¸€è·¯å¾„æ˜¯æœ‰æ„ä¹‰çš„</p>
]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
            <tag> Django </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[NSString && NSData]]></title>
      <url>/2016/11/15/2014/Foundation%E7%B3%BB%E5%88%97-NSString/</url>
      <content type="html"><![CDATA[<h3 id="å†…å­˜ç®€è¿°ï¼ŒCopyä¸Strongå…³é”®å­—"><a href="#å†…å­˜ç®€è¿°ï¼ŒCopyä¸Strongå…³é”®å­—" class="headerlink" title="å†…å­˜ç®€è¿°ï¼ŒCopyä¸Strongå…³é”®å­—"></a>å†…å­˜ç®€è¿°ï¼ŒCopyä¸Strongå…³é”®å­—</h3><h4 id="å†…å­˜ç®€è¿°"><a href="#å†…å­˜ç®€è¿°" class="headerlink" title="å†…å­˜ç®€è¿°"></a>å†…å­˜ç®€è¿°</h4><p>ä¸ºäº†æ–¹ä¾¿è§‚å¯Ÿå¼•ç”¨è®¡æ•°ï¼Œè¿™é‡Œåœ¨MRCä¸‹æ¥è¿›è¡Œæµ‹è¯•ã€‚å…ˆé‡æ–°å®šä¹‰NSLogè®©å…¶ä¸æ‰“å°æ—¶é—´æˆ³ã€‚å†ç¼–å†™ä¸€ä¸ªæ‰“å°å®ï¼Œç”¨æ¥æ‰“å°NSStringå¯¹è±¡çš„ç±»ã€å†…å­˜åœ°å€ã€å€¼ã€å¼•ç”¨è®¡æ•°ã€‚<br><a id="more"></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#define NSLog(FORMAT, ...) fprintf(stderr,&quot;%s\n&quot;,[[NSString stringWithFormat:FORMAT, ##__VA_ARGS__] UTF8String]);</div><div class="line">#define YLog(_var) (&#123; NSString *name = @#_var; NSLog(@&quot;%@: %@ -&gt; %p : %@  %tu&quot;, name, [_var class], _var, _var, [_var retainCount]); &#125;)</div></pre></td></tr></table></figure></p>
<p>å†æ–°å»ºä¸€ä¸ªStrObjectç±»ï¼Œç”¨äºæµ‹è¯•ã€‚è¯¥ç±»åˆ›å»ºå®ä¾‹æ—¶ï¼Œå°†æ‰“å°ä¸€ä¸ªNSStringï¼Œå†…å®¹ä¸ºâ€Strâ€ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">@interface StrObject : NSObject</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">@implementation StrObject</div><div class="line"></div><div class="line">- (id)init &#123;</div><div class="line"></div><div class="line">  self = [super init];</div><div class="line"></div><div class="line">  if (self) &#123;</div><div class="line">    NSLog(@&quot;StrObj Create&quot;);</div><div class="line">    NSString *strA = @&quot;Str&quot;;</div><div class="line">    YLog(strA);</div><div class="line">&#125;</div><div class="line"></div><div class="line">return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)dealloc &#123;</div><div class="line"></div><div class="line">  [super dealloc];</div><div class="line"></div><div class="line">  NSLog(@&quot;StrObj Dealloc&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¹‹åè¿è¡Œä»¥ä¸‹ä»£ç ã€‚<br>ï¼ˆä¸€èˆ¬æ¥è¯´æˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹å‡ ç§æ–¹æ³•æ¥åˆ›å»ºNSStringå¯¹è±¡ï¼Œå…¶ä¸­stringWithStringåœ¨iOS 6ä¹‹åå·²å˜ä¸ºå¤šä½™çš„æ–¹æ³•ï¼ˆredundantï¼‰ï¼Œå› å…¶ç­‰åŒäºå­—é¢é‡åˆ›å»ºæ³•ï¼Œä½¿ç”¨è¿™æ–¹æ³•ç¼–è¯‘å™¨ä¼šç»™å‡ºè­¦å‘Šï¼Œï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">//åˆ›å»ºå¹¶é‡Šæ”¾StrObjectå¯¹è±¡</div><div class="line">StrObject *obj = [StrObject new];</div><div class="line">[obj release];</div><div class="line"></div><div class="line">//åˆ›å»ºä¸€äº›å­—ç¬¦ä¸²</div><div class="line">NSString *str1 = @&quot;Str&quot;; YLog(str1);</div><div class="line">NSString *str2 = @&quot;Str&quot;; YLog(str2);</div><div class="line">NSString *str3 = [NSString stringWithString:@&quot;Str&quot;]; YLog(str3);</div><div class="line">NSString *str4 = [NSString stringWithFormat:@&quot;Str&quot;]; YLog(str4);</div><div class="line">NSString *str5 = [str1 retain]; YLog(str5);</div><div class="line">NSString *str6 = [str1 copy]; YLog(str6);</div><div class="line">NSString *str7 = [str1 mutableCopy]; YLog(str7);</div><div class="line"></div><div class="line">//æ”¹å˜NSStringå˜é‡çš„å­—ç¬¦ä¸²å†…å®¹</div><div class="line">str1 = @&quot;StrNew&quot;; YLog(str1);</div><div class="line">str2 = str1; YLog(str2);</div><div class="line"></div><div class="line">//åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å¹¶å°†å…¶é‡Šæ”¾</div><div class="line">NSString *str8 = @&quot;Str&quot;;</div><div class="line">[str8 retain];</div><div class="line">[str8 release];</div><div class="line">[str8 release];</div><div class="line">YLog(str8);</div><div class="line"></div><div class="line">//=======è¾“å‡ºç»“æœ========</div><div class="line">//åˆ›å»ºå¹¶é‡Šæ”¾StrObjectå¯¹è±¡</div><div class="line">//StrObj Create</div><div class="line">//strA: __NSCFConstantString -&gt; 0x10d2ce088 : Str  18446744073709551615</div><div class="line">//StrObj Dealloc</div><div class="line"></div><div class="line">//åˆ›å»ºä¸€äº›å­—ç¬¦ä¸²</div><div class="line">//str1: __NSCFConstantString -&gt; 0x10d2ce088 : Str  18446744073709551615</div><div class="line">//str2: __NSCFConstantString -&gt; 0x10d2ce088 : Str  18446744073709551615</div><div class="line">//str3: __NSCFConstantString -&gt; 0x10d2ce088 : Str  18446744073709551615</div><div class="line">//str4: NSTaggedPointerString -&gt; 0xa000000007274533 : Str  18446744073709551615</div><div class="line">//str5: __NSCFConstantString -&gt; 0x10d2ce088 : Str  18446744073709551615</div><div class="line">//str6: __NSCFConstantString -&gt; 0x10d2ce088 : Str  18446744073709551615</div><div class="line">//str7: __NSCFString -&gt; 0x7f951a409c80 : Str  1</div><div class="line"></div><div class="line">//æ”¹å˜NSStringå˜é‡çš„å­—ç¬¦ä¸²å†…å®¹</div><div class="line">//str1: __NSCFConstantString -&gt; 0x10d2ce1e8 : StrNew  18446744073709551615</div><div class="line">//str2: __NSCFConstantString -&gt; 0x10d2ce1e8 : StrNew  18446744073709551615</div><div class="line"></div><div class="line">//åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å¹¶å°†å…¶é‡Šæ”¾</div><div class="line">//str8: __NSCFConstantString -&gt; 0x10d2ce088 : Str  18446744073709551615</div></pre></td></tr></table></figure>
<p>å¯è§‚å¯Ÿåˆ°ï¼Œè™½ç„¶æˆ‘ä»¬é€šè¿‡ä¸åŒæ–¹æ³•åˆ›å»ºäº†ä¸åŒçš„NSStringå¯¹è±¡ï¼Œä½†å­—ç¬¦ä¸²å†…å®¹ä¸€è‡´ï¼Œç»“æœæ˜¾ç¤ºstrAã€str1ã€str2ã€str3ã€str5ã€str6éƒ½æŒ‡å‘åŒä¸€ä¸ªåœ°å€ã€‚å³ä¾¿@â€Strâ€é¦–å…ˆåœ¨StrObjectå¯¹è±¡ä¸­å‡ºç°ï¼Œèµ‹å€¼ç»™strAï¼Œé‡Šæ”¾äº†ä¹‹åï¼Œstr1å’Œå…¶ä»–å¯¹è±¡ä»ç„¶æŒ‡å‘åŒä¸€ä¸ªåœ°å€ã€‚</p>
<p>å°†ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å†…å®¹@â€Str aâ€èµ‹å€¼ç»™str1ï¼Œå¹¶ä¸”å°†str1èµ‹å€¼ç»™str2åï¼Œä»ç»“æœçœ‹åˆ°str1ã€str2çš„å†…å­˜åœ°å€æ”¹å˜äº†ï¼Œä¸”æŒ‡å‘åŒä¸€ä¸ªåœ°å€ã€‚</p>
<p>ä¹‹ååˆ›å»ºçš„str8ï¼Œå¯¹å…¶è¿›è¡Œå¤šæ¬¡releaseåï¼Œå†…å­˜åœ°å€ï¼ˆå’ŒstrAåœ°å€ç›¸åŒï¼‰å’ŒretaionCountéƒ½ä¸æ›¾å˜åŒ–ã€‚</p>
<h5 id="NSCFConstantString"><a href="#NSCFConstantString" class="headerlink" title="__NSCFConstantString"></a>__NSCFConstantString</h5><p>è¿™äº›å¯¹è±¡åœ°å€ç›¸åŒï¼Œæ˜¯å› ä¸ºä»–ä»¬éƒ½æ˜¯<strong>NSCFConstantStringå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²å¸¸é‡å¯¹è±¡ï¼Œå¯ä»¥çœ‹åˆ°å…¶isaéƒ½æ˜¯</strong>NSCFConstantStringï¼Œè¯¥å¯¹è±¡å­˜å‚¨åœ¨æ ˆä¸Šï¼Œåˆ›å»ºä¹‹åç”±ç³»ç»Ÿæ¥ç®¡ç†å†…å­˜é‡Šæ”¾ï¼Œç›¸åŒå†…å®¹çš„NSCFConstantStringå¯¹è±¡åœ°å€ç›¸åŒã€‚è¯¥å¯¹è±¡å¼•ç”¨è®¡æ•°å¾ˆå¤§ï¼Œä¸ºå›ºå®šå€¼ä¸ä¼šå˜åŒ–ï¼Œè¡¨ç¤ºæ— é™è¿è¡Œçš„retainCountï¼Œå¯¹å…¶è¿›è¡Œretainæˆ–releaseä¹Ÿä¸ä¼šå½±å“å…¶å¼•ç”¨è®¡æ•°ã€‚</p>
<p>å½“åˆ›å»ºä¸€ä¸ªNSCFConstantStringå¯¹è±¡æ—¶ï¼Œä¼šæ£€æµ‹è¿™ä¸ªå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ç›´æ¥å°†åœ°å€èµ‹å€¼ç»™å˜é‡ï¼›ä¸å­˜åœ¨çš„è¯ï¼Œåˆ™åˆ›å»ºæ–°åœ°å€ï¼Œå†èµ‹å€¼ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œå¯¹äºNSCFConstantStringå¯¹è±¡ï¼Œåªè¦å­—ç¬¦ä¸²å†…å®¹ä¸å˜ï¼Œå°±ä¸ä¼šåˆ†é…æ–°çš„å†…å­˜åœ°å€ï¼Œæ— è®ºä½ æ˜¯èµ‹å€¼ã€retainã€copyã€‚è¿™ç§ä¼˜åŒ–åœ¨å¤§é‡ä½¿ç”¨NSStringçš„æƒ…å†µä¸‹å¯ä»¥èŠ‚çœå†…å­˜ï¼Œæé«˜æ€§èƒ½ã€‚</p>
<h5 id="NSCFString"><a href="#NSCFString" class="headerlink" title="__NSCFString"></a>__NSCFString</h5><p>åœ¨ä¸Šé¢çš„è¾“å‡ºç»“æœä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°å¦å¤–è¿˜æœ‰ä¸¤ç±»isaåˆ†åˆ«æ˜¯ï¼š<strong>NSCFStringå’ŒNSTaggedPointerStringï¼Œå…ˆæ¥çœ‹</strong>NSCFStringã€‚</p>
<p>åœ¨æˆ‘çš„ç†è§£ï¼Œ__NSCFStringå¯¹è±¡æ˜¯ä¸€ç§NSStringå­ç±»ï¼Œå­˜å‚¨åœ¨å †ä¸Šï¼Œä¸å±äºå­—ç¬¦ä¸²å¸¸é‡å¯¹è±¡ã€‚è¯¥å¯¹è±¡åˆ›å»ºä¹‹åå’Œå…¶ä»–çš„Objå¯¹è±¡ä¸€æ ·å¼•ç”¨è®¡æ•°ä¸º1ï¼Œå¯¹å…¶æ‰§è¡Œretainå’Œreleaseå°†æ”¹å˜å…¶retainCountã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">NSString *str1 = [NSString stringWithFormat:@&quot;ThisIsAStr&quot;];</div><div class="line">YLog(str1);</div><div class="line">NSString *str2 = [str1 retain];</div><div class="line">YLog(str1);</div><div class="line">YLog(str2);</div><div class="line"></div><div class="line">NSString *str3 = [str1 copy];</div><div class="line">YLog(str1);</div><div class="line">YLog(str2);</div><div class="line">YLog(str3);</div><div class="line"></div><div class="line">//è¾“å‡ºç»“æœ</div><div class="line">//str1: __NSCFString -&gt; 0x100206c70 : ThisIsAStr  1</div><div class="line"></div><div class="line">//str1 retainåèµ‹å€¼ç»™str2</div><div class="line">//str1: __NSCFString -&gt; 0x100206c70 : ThisIsAStr  2</div><div class="line">//str2: __NSCFString -&gt; 0x100206c70 : ThisIsAStr  2</div><div class="line"></div><div class="line">//str3ç”±str1æµ…å¤åˆ¶å¾—æ¥</div><div class="line">//str1: __NSCFString -&gt; 0x100206c70 : ThisIsAStr  3</div><div class="line">//str2: __NSCFString -&gt; 0x100206c70 : ThisIsAStr  3</div><div class="line">//str3: __NSCFString -&gt; 0x100206c70 : ThisIsAStr  3</div><div class="line"></div><div class="line">//å¯¹str1è¿›è¡Œrelease</div><div class="line">//str1: __NSCFString -&gt; 0x100206c70 : ThisIsAStr  2</div><div class="line">//str2: __NSCFString -&gt; 0x100206c70 : ThisIsAStr  2</div><div class="line">//str3: __NSCFString -&gt; 0x100206c70 : ThisIsAStr  2</div></pre></td></tr></table></figure></p>
<h5 id="NSTaggedPointerString"><a href="#NSTaggedPointerString" class="headerlink" title="NSTaggedPointerString"></a>NSTaggedPointerString</h5><p>è¿™ä¸ªå¯¹è±¡æ˜¯æ ‡ç­¾æŒ‡é’ˆï¼Œè‹¹æœåœ¨ 64 ä½ç¯å¢ƒä¸‹å¯¹NSStringã€NSNumberç­‰å¯¹è±¡åšäº†ä¸€äº›ä¼˜åŒ–ã€‚ç®€å•çš„è¯´å°±æ˜¯æŠŠæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ç›´æ¥æ”¾åœ¨äº†æŒ‡é’ˆå˜é‡çš„å†…å­˜åœ°å€ä¸­ï¼Œåœ¨ 64 ä½ç¯å¢ƒä¸‹æŒ‡é’ˆå˜é‡çš„å¤§å°è¾¾åˆ°äº† 8 ä½ï¼Œèƒ½å®¹çº³é•¿åº¦è¾ƒå°çš„å†…å®¹ï¼Œäºæ˜¯ä½¿ç”¨äº†æ ‡ç­¾æŒ‡é’ˆæ¥ä¼˜åŒ–æ•°æ®çš„å­˜å‚¨ã€‚ä»å…¶å¼•ç”¨è®¡æ•°å¯ä»¥çœ‹å‡ºï¼Œè¿™ç§å¯¹è±¡ä¹Ÿæ˜¯æ— å çš„retainCountï¼Œè¿™ç§å¯¹è±¡å­˜å‚¨åœ¨æŒ‡é’ˆçš„å†…å®¹ä¸­ã€‚</p>
<p>å¯¹ NSStringå¯¹è±¡æ¥è¯´ï¼Œå½“éå­—é¢é‡çš„æ•°å­—ï¼Œè‹±æ–‡å­—æ¯å­—ç¬¦ä¸²çš„é•¿åº¦å°äºç­‰äº9çš„æ—¶å€™ä¼šè‡ªåŠ¨æˆä¸ºNSTaggedPointerStringç±»å‹ï¼Œå¦‚æœæœ‰ä¸­æ–‡æˆ–å…¶ä»–ç‰¹æ®Šç¬¦å·ï¼ˆå¯èƒ½æ˜¯é ASCII å­—ç¬¦ï¼‰å­˜åœ¨çš„è¯åˆ™ä¼šç›´æ¥æˆä¸º__NSCFStringç±»å‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">NSString *str1 = @&quot;123456789&quot;; YLog(str1);</div><div class="line">NSString *str2 = [NSString stringWithFormat:@&quot;123456789&quot;]; YLog(str2);</div><div class="line">NSString *str3 = [NSString stringWithFormat:@&quot;1234567890&quot;]; YLog(str3);</div><div class="line">NSString *str4 = [NSString stringWithFormat:@&quot;äº”&quot;]; YLog(str4);</div><div class="line"></div><div class="line">//è¾“å‡ºç»“æœ</div><div class="line">//str1: __NSCFConstantString -&gt; 0x10a0c5108 : 123456789  18446744073709551615</div><div class="line">//str2: NSTaggedPointerString -&gt; 0xa1ea1f72bb30ab19 : 123456789  18446744073709551615</div><div class="line">//str3: __NSCFString -&gt; 0x7f8183c02630 : 1234567890  1</div><div class="line">//str4: __NSCFString -&gt; 0x7f8183c0fae0 : äº”  1</div></pre></td></tr></table></figure>
<h4 id="å£°æ˜NSStingä¸ºå±æ€§æ—¶ç”¨copyè¿˜æ˜¯strong"><a href="#å£°æ˜NSStingä¸ºå±æ€§æ—¶ç”¨copyè¿˜æ˜¯strong" class="headerlink" title="å£°æ˜NSStingä¸ºå±æ€§æ—¶ç”¨copyè¿˜æ˜¯strong"></a>å£°æ˜NSStingä¸ºå±æ€§æ—¶ç”¨copyè¿˜æ˜¯strong</h4><p>å£°æ˜NSStringå±æ€§ä¸€èˆ¬æ¥è¯´ç”¨copyï¼Œå› ä¸ºçˆ¶ç±»æŒ‡é’ˆå¯ä»¥æŒ‡å‘å­ç±»å¯¹è±¡ï¼Œè€ŒNSMutableNSStringæ˜¯NSStringçš„å­ç±»ï¼Œä½¿ç”¨strongçš„è¯è¯¥NSStringå±æ€§å¯èƒ½æŒ‡å‘ä¸€ä¸ªNSMutableNSStringå¯å˜å¯¹è±¡ï¼Œå¦‚æœè¿™ä¸ªå¯å˜å¯¹è±¡çš„å†…å®¹åœ¨å¤–éƒ¨è¢«ä¿®æ”¹äº†ï¼Œé‚£è¯¥å±æ€§æ‰€å±çš„å¯¹è±¡å¯èƒ½å¯¹æ­¤æ¯«ä¸çŸ¥æƒ…ã€‚</p>
<p>å…ˆæ¥çœ‹æ­£å¸¸çš„æƒ…å†µï¼ŒNSStringå±æ€§æŒ‡å‘ä¸€ä¸ªä¸å¯å˜å¯¹è±¡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">//Personå¯¹è±¡</div><div class="line">@interface Person : NSObject</div><div class="line">@property (nonatomic, strong) NSString *name;</div><div class="line">@end</div><div class="line"></div><div class="line">@implementation Person</div><div class="line">@end</div><div class="line"></div><div class="line">//æµ‹è¯•ä»£ç </div><div class="line">NSString *strA = @&quot;Susan_Miller&quot;;</div><div class="line">Person *personA = [Person new];</div><div class="line">personA.name = strA;</div><div class="line">YLog(strA);</div><div class="line">YLog(personA.name);</div><div class="line"></div><div class="line">strA = @&quot;Susan_Test&quot;;</div><div class="line">YLog(strA);</div><div class="line">YLog(personA.name);</div><div class="line"></div><div class="line">//è¾“å‡ºç»“æœ</div><div class="line">//strA: __NSCFConstantString -&gt; 0x102f20108 : Susan_Miller  18446744073709551615</div><div class="line">//personA.name: __NSCFConstantString -&gt; 0x102f20108 : Susan_Miller  18446744073709551615</div><div class="line">//strA: __NSCFConstantString -&gt; 0x102f20148 : Susan_Test  18446744073709551615</div><div class="line">//personA.name: __NSCFConstantString -&gt; 0x102f20108 : Susan_Miller  18446744073709551615</div></pre></td></tr></table></figure></p>
<p>ä»ç»“æœå¯è§‚å¯Ÿåˆ°æ­¤æ—¶çš„nameå±æ€§æŒ‡å‘ä¸€ä¸ªä¸å¯å˜çš„å­—ç¬¦ä¸²å¸¸é‡ï¼Œå°±ç®—strAå› ä¸ºå†…å®¹å˜åŒ–è€Œç”Ÿæˆäº†æ–°åœ°å€ï¼Œå¯¹nameå±æ€§ä¸ä¼šæœ‰å½±å“ï¼Œæ— è®ºå£°æ˜nameå±æ€§æ—¶å…³é”®å­—ç”¨copyè¿˜æ˜¯strongï¼ˆä¸å¯å˜å¯¹è±¡çš„copyæ˜¯æµ…å¤åˆ¶ï¼Œstrongä¹Ÿæ˜¯æŒ‡é’ˆå¼•ç”¨ï¼Œæ‰€ä»¥strAå†…å®¹æ”¹å˜ååœ°å€åŒæ—¶æ”¹å˜ï¼Œä¸ä¼šå½±å“nameå±æ€§ï¼‰ã€‚</p>
<p>å†æ¥çœ‹nameå±æ€§æŒ‡å‘ä¸€ä¸ªå¯å˜å¯¹è±¡çš„æƒ…å†µï¼Œå±æ€§å…³é”®å­—ç”¨strongã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">//å±æ€§å…³é”®å­—ä¸ºstrong</div><div class="line">@property (nonatomic, strong) NSString *name;</div><div class="line"></div><div class="line">//æµ‹è¯•ä»£ç </div><div class="line">NSMutableString *strB = [@&quot;Susan_Miller&quot; mutableCopy];</div><div class="line">Person *personB = [Person new];</div><div class="line">personB.name = strB;</div><div class="line">YLog(strB);</div><div class="line">YLog(personB.name);</div><div class="line"></div><div class="line">[strB setString:@&quot;Susan_Test&quot;];</div><div class="line">YLog(strB);</div><div class="line">YLog(personB.name);</div><div class="line"></div><div class="line">//è¾“å‡ºç»“æœ</div><div class="line">//strB: __NSCFString -&gt; 0x7ff9b2c1a090 : Susan_Miller  2</div><div class="line">//personB.name: __NSCFString -&gt; 0x7ff9b2c1a090 : Susan_Miller  2</div><div class="line">//strB: __NSCFString -&gt; 0x7ff9b2c1a090 : Susan_Test  2</div><div class="line">//personB.name: __NSCFString -&gt; 0x7ff9b2c1a090 : Susan_Test  2</div></pre></td></tr></table></figure></p>
<p>ä»ç»“æœå¯çœ‹å‡ºï¼Œnameå±æ€§æŒ‡å‘äº†ä¸€ä¸ªå¯å˜å¯¹è±¡strBï¼Œå½“strBçš„å†…å®¹æ”¹å˜æ—¶ï¼Œnameå±æ€§ä¹Ÿè·Ÿç€æ”¹å˜ï¼Œè€Œpersonå¯¹æ­¤ä¸çŸ¥æƒ…ï¼Œå¯èƒ½ä¼šäº§ç”Ÿé”™è¯¯ã€‚</p>
<p>ç»§ç»­æ¥çœ‹nameå±æ€§å…³é”®å­—ä½¿ç”¨copyæ—¶çš„æƒ…å†µã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">//å±æ€§å…³é”®å­—ä¸ºcopy</div><div class="line">@property (nonatomic, copy) NSString *name;</div><div class="line"></div><div class="line">//æµ‹è¯•ä»£ç </div><div class="line">NSMutableString *strB = [@&quot;Susan_Miller&quot; mutableCopy];</div><div class="line">Person *personB = [Person new];</div><div class="line">personB.name = strB;</div><div class="line">YLog(strB);</div><div class="line">YLog(personB.name);</div><div class="line"></div><div class="line">[strB setString:@&quot;Susan_Test&quot;];</div><div class="line">YLog(strB);</div><div class="line">YLog(personB.name);</div><div class="line"></div><div class="line">//è¾“å‡ºç»“æœ</div><div class="line">//strB: __NSCFString -&gt; 0x7fb15af31360 : Susan_Miller  1**</div><div class="line">//personB.name: __NSCFString -&gt; 0x7fb15af26620 : Susan_Miller  1**</div><div class="line">//strB: __NSCFString -&gt; 0x7fb15af31360 : Susan_Test  1**</div><div class="line">//personB.name: __NSCFString -&gt; 0x7fb15af26620 : Susan_Miller  1**</div></pre></td></tr></table></figure></p>
<p>æ­¤æ—¶ï¼Œå› ä¸ºå¯¹NSMutableStringè¿›è¡Œcopyæ˜¯æ·±å¤åˆ¶ï¼ˆå³å†…å®¹æ‹·è´ï¼‰ï¼Œæ‰€ä»¥nameå±æ€§ä¸strBæŒ‡å‘ä¸åŒçš„åœ°å€ï¼ŒstrBçš„å†…å®¹æ›´æ”¹ä¸ä¼šå½±å“åˆ°nameå±æ€§ã€‚</p>
<p>æ‰€ä»¥ï¼Œå£°æ˜NSStringä¸ºå±æ€§æ—¶ï¼Œå¦‚æœå¸Œæœ›ä¿æŠ¤å±æ€§å°è£…æ€§ä¸å—å¤–ç•Œå½±å“ï¼Œåˆ™åº”è¯¥ä½¿ç”¨copyå…³é”®å­—ï¼Œè®©æ‰€å±å¯¹è±¡æŒæœ‰çš„æ˜¯ä¸€ä»½â€œä¸å¯å˜â€ï¼ˆimmutableï¼‰å‰¯æœ¬ï¼Œä¸ç”¨æ‹…å¿ƒå­—ç¬¦ä¸²å†…å®¹æ— æ„é—´å˜åŠ¨ã€‚</p>
<h3 id="å»é™¤å­—ç¬¦ä¸²ä¸­çš„ä¸­æ–‡"><a href="#å»é™¤å­—ç¬¦ä¸²ä¸­çš„ä¸­æ–‡" class="headerlink" title="å»é™¤å­—ç¬¦ä¸²ä¸­çš„ä¸­æ–‡"></a>å»é™¤å­—ç¬¦ä¸²ä¸­çš„ä¸­æ–‡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">- (NSString *)removeChinese:(NSString *)string &#123;</div><div class="line"></div><div class="line">    NSString *chi = [self getChineseStringWithString:string];</div><div class="line"></div><div class="line">    return [string stringByReplacingOccurrencesOfString:chi withString:@&quot;&quot;];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (NSString *)getChineseStringWithString:(NSString *)string</div><div class="line">&#123;</div><div class="line">    //(unicodeä¸­æ–‡ç¼–ç èŒƒå›´æ˜¯0x4e00~0x9fa5)</div><div class="line">    for (int i = 0; i &lt; string.length; i++) &#123;</div><div class="line">        int utfCode = 0;</div><div class="line">        void *buffer = &amp;utfCode;</div><div class="line">        NSRange range = NSMakeRange(i, 1);</div><div class="line"></div><div class="line">        BOOL b = [string getBytes:buffer maxLength:2 usedLength:NULL encoding:NSUTF16LittleEndianStringEncoding options:NSStringEncodingConversionExternalRepresentation range:range remainingRange:NULL];</div><div class="line"></div><div class="line">        if (b &amp;&amp; (utfCode &gt;= 0x4e00 &amp;&amp; utfCode &lt;= 0x9fa5)) &#123;</div><div class="line">            return [string substringFromIndex:i];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return nil;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="BOOL-containsString-NSString-str-NS-AVAILABLE-10-10-8-0-7ä»¥ä¸‹ä¸å¯ç”¨"><a href="#BOOL-containsString-NSString-str-NS-AVAILABLE-10-10-8-0-7ä»¥ä¸‹ä¸å¯ç”¨" class="headerlink" title="- (BOOL)containsString:(NSString *)str NS_AVAILABLE(10_10, 8_0);//7ä»¥ä¸‹ä¸å¯ç”¨"></a>- (BOOL)containsString:(NSString *)str NS_AVAILABLE(10_10, 8_0);//7ä»¥ä¸‹ä¸å¯ç”¨</h3><h3 id="NSStringçš„å„ç§è½¬æ¢"><a href="#NSStringçš„å„ç§è½¬æ¢" class="headerlink" title="NSStringçš„å„ç§è½¬æ¢"></a>NSStringçš„å„ç§è½¬æ¢</h3><h4 id="NSData-ä¸-NSString"><a href="#NSData-ä¸-NSString" class="headerlink" title="NSData ä¸ NSString"></a>NSData ä¸ NSString</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ã€€ã€€NSData --&gt; NSString</div><div class="line">ã€€ã€€NSString *aString = [[NSString alloc] initWithData:adata encoding:NSUTF8StringEncoding];</div><div class="line">ã€€ã€€NSString --&gt; NSData</div><div class="line">ã€€ã€€NSString *aString = @&quot;1234&quot;;</div><div class="line">ã€€ã€€NSData *aData = [aString dataUsingEncoding: NSUTF8StringEncoding];</div></pre></td></tr></table></figure>
<h4 id="NSStringè½¬åŒ–ä¸ºUNICODE-Stringï¼š"><a href="#NSStringè½¬åŒ–ä¸ºUNICODE-Stringï¼š" class="headerlink" title="NSStringè½¬åŒ–ä¸ºUNICODE Stringï¼š"></a>NSStringè½¬åŒ–ä¸ºUNICODE Stringï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(NSString*)fname ï¼ @â€œTestâ€;</div><div class="line">char fnameStr[10];</div><div class="line">memcpy(fnameStr, [fname cStringUsingEncoding:NSUnicodeStringEncoding], 2*([fname length]));</div><div class="line">ä¸strcpyç›¸æ¯”ï¼Œmemcpyå¹¶ä¸æ˜¯é‡åˆ°&apos;\0&apos;å°±ç»“æŸï¼Œè€Œæ˜¯ä¸€å®šä¼šæ‹·è´å®Œnä¸ªå­—èŠ‚</div></pre></td></tr></table></figure>
<h4 id="NSString-è½¬åŒ–ä¸º-char"><a href="#NSString-è½¬åŒ–ä¸º-char" class="headerlink" title="NSString è½¬åŒ–ä¸º char *"></a>NSString è½¬åŒ–ä¸º char *</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">NSString * strï¼ @â€œTestâ€;</div><div class="line">const char * a =[str UTF8String];</div></pre></td></tr></table></figure>
<h4 id="char-è½¬åŒ–ä¸º-NSString"><a href="#char-è½¬åŒ–ä¸º-NSString" class="headerlink" title="char * è½¬åŒ–ä¸º NSString"></a>char * è½¬åŒ–ä¸º NSString</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NSString *str=[NSString stringWithCString encoding:NSUTF8StringEncoding];</div></pre></td></tr></table></figure>
<h4 id="char-è½¬åŒ–-NSData"><a href="#char-è½¬åŒ–-NSData" class="headerlink" title="char * è½¬åŒ– NSData"></a>char * è½¬åŒ– NSData</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">æ–¹æ³•ä¸€ï¼š char * a = (char*)malloc(sizeof(byte)*16); NSData *data = [NSData dataWithBytes: a length:strlen(a)]; </div><div class="line">æ–¹æ³•äºŒï¼š è½¬æ¢ä¸ºNSStringï¼š - (id)initWithUTF8String:(const char *)bytes ç„¶åç”¨NSStringçš„ - (NSData *)dataUsingEncoding:(NSStringEncoding)encoding</div></pre></td></tr></table></figure>
<h4 id="NSData-è½¬åŒ–-char"><a href="#NSData-è½¬åŒ–-char" class="headerlink" title="NSData è½¬åŒ– char *"></a>NSData è½¬åŒ– char *</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">NSData data ï¼› </div><div class="line">char* a=[data bytes];</div></pre></td></tr></table></figure>
<h4 id="NSString-è½¬åŒ–-NSURL"><a href="#NSString-è½¬åŒ–-NSURL" class="headerlink" title="NSString è½¬åŒ– NSURL"></a>NSString è½¬åŒ– NSURL</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//NSURL *url = [NSURL URLWithString:[str  stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding ]];</div><div class="line"></div><div class="line">NSString *urlString=[@&quot;http://www.google.com/search?client=safari&amp;rls=en&amp;q=æœç´¢&amp;ie=UTF-8&amp;oe=UTF-8&quot; stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];</div></pre></td></tr></table></figure>
<h4 id="NSURL-è½¬åŒ–-NSString"><a href="#NSURL-è½¬åŒ–-NSString" class="headerlink" title="NSURL è½¬åŒ– NSString"></a>NSURL è½¬åŒ– NSString</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSURL *url=[NSURL URLWithString:urlString];</div><div class="line"></div><div class="line">NSString *s=[[url absoluteString] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];</div></pre></td></tr></table></figure>
<h4 id="NSData-ä¸-Byte"><a href="#NSData-ä¸-Byte" class="headerlink" title="NSData ä¸ Byte"></a>NSData ä¸ Byte</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ã€€ã€€NSData --&gt; Byte</div><div class="line">ã€€ã€€NSString *testString = @&quot;1234567890&quot;;</div><div class="line">ã€€ã€€NSData *testData = [testString dataUsingEncoding: NSUTF8StringEncoding];</div><div class="line">ã€€ã€€Byte *testByte = (Byte *)[testData bytes];</div><div class="line">ã€€ã€€Byte --&gt; NSData</div><div class="line">ã€€ã€€Byte byte[] = &#123;0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23&#125;;</div><div class="line">ã€€ã€€NSData *adata = [[NSData alloc] initWithBytes:byte length:24];</div></pre></td></tr></table></figure>
<h4 id="NSData-ä¸-UIImage"><a href="#NSData-ä¸-UIImage" class="headerlink" title="NSData ä¸ UIImage"></a>NSData ä¸ UIImage</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">ã€€ã€€NSData --&gt; UIImage</div><div class="line">ã€€ã€€UIImage *aimage = [UIImage imageWithData: imageData];</div><div class="line">ã€€ã€€//ä¾‹ï¼šä»æœ¬åœ°æ–‡ä»¶æ²™ç›’ä¸­å–å›¾ç‰‡å¹¶è½¬æ¢ä¸ºNSData</div><div class="line">ã€€ã€€NSString *path = [[NSBundle mainBundle] bundlePath];</div><div class="line">ã€€ã€€NSString *name = [NSString stringWithFormat:@&quot;ceshi.png&quot;];</div><div class="line">ã€€ã€€NSString *finalPath = [path stringByAppendingPathComponent:name];</div><div class="line">ã€€ã€€NSData *imageData = [NSData dataWithContentsOfFile: finalPath];</div><div class="line">ã€€ã€€UIImage *aimage = [UIImage imageWithData: imageData];</div><div class="line">ã€€ã€€UIImageï¼&gt; NSData</div><div class="line">ã€€ã€€NSData *imageData = UIImagePNGRepresentation(aimae);</div></pre></td></tr></table></figure>
<h4 id="NSData-ä¸-NSMutableData"><a href="#NSData-ä¸-NSMutableData" class="headerlink" title="NSData ä¸ NSMutableData"></a>NSData ä¸ NSMutableData</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ã€€ã€€NSData --&gt; MSMutableData</div><div class="line">ã€€ã€€NSData *data=[[NSData alloc]init];</div><div class="line">ã€€ã€€NSMutableData *mdata=[[NSMutableData alloc]init];</div><div class="line">ã€€ã€€mdata=[NSData dataWithData:data];</div></pre></td></tr></table></figure>
<h4 id="NSDataåˆå¹¶ä¸ºä¸€ä¸ªNSMutableData"><a href="#NSDataåˆå¹¶ä¸ºä¸€ä¸ªNSMutableData" class="headerlink" title="NSDataåˆå¹¶ä¸ºä¸€ä¸ªNSMutableData"></a>NSDataåˆå¹¶ä¸ºä¸€ä¸ªNSMutableData</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">- (NSString *)filePathWithName:(NSString *)filename</div><div class="line">&#123;</div><div class="line">NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);</div><div class="line">NSString *documentsDirectory = [paths objectAtIndex:0];</div><div class="line">return [documentsDirectory stringByAppendingPathComponent:filename];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;</div><div class="line">//éŸ³é¢‘æ–‡ä»¶è·¯å¾„</div><div class="line">NSString *mp3Path1 = [[NSBundle mainBundle] pathForResource:@&quot;1&quot; ofType:@&quot;mp3&quot;];</div><div class="line">NSString *mp3Path2 = [[NSBundle mainBundle] pathForResource:@&quot;2&quot; ofType:@&quot;mp3&quot;];</div><div class="line">//éŸ³é¢‘æ•°æ®</div><div class="line">NSData *sound1Data = [[NSData alloc] initWithContentsOfFile: mp3Path1];</div><div class="line">NSData *sound2Data = [[NSData alloc] initWithContentsOfFile: mp3Path2];</div><div class="line">//åˆå¹¶éŸ³é¢‘</div><div class="line">NSMutableData *sounds = [NSMutableData alloc];</div><div class="line">[sounds appendData:sound1Data];</div><div class="line">[sounds appendData:sound2Data];</div><div class="line">//ä¿å­˜éŸ³é¢‘</div><div class="line"></div><div class="line">NSLog(@&quot;data length:%d&quot;, [sounds length]);</div><div class="line"></div><div class="line">[sounds writeToFile:[self filePathWithName:@&quot;tmp.mp3&quot;] atomically:YES];</div><div class="line"></div><div class="line">[window makeKeyAndVisible];</div><div class="line"></div><div class="line">return YES;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è½¬è¯‘å­—ç¬¦"><a href="#è½¬è¯‘å­—ç¬¦" class="headerlink" title="è½¬è¯‘å­—ç¬¦"></a>è½¬è¯‘å­—ç¬¦</h3><blockquote>
<p>è½¬ä¹‰å­—ç¬¦ æ„ä¹‰ ASCIIç å€¼(åè¿›åˆ¶)<br>\a å“é“ƒ(BEL) 007<br>\b é€€æ ¼(BS) 008<br>\f æ¢é¡µ(FF) 012<br>\n æ¢è¡Œ(LF) 010<br>\r å›è½¦(CR) 013<br>\t æ°´å¹³åˆ¶è¡¨(HT) 009<br>\v å‚ç›´åˆ¶è¡¨(VT) 011<br>\ åæ–œæ  092<br>\? é—®å·å­—ç¬¦ 063<br>\â€™ å•å¼•å·å­—ç¬¦ 039<br>\â€ åŒå¼•å·å­—ç¬¦ 034<br>\0 ç©ºå­—ç¬¦(NULL) 000<br>\ddd ä»»æ„å­—ç¬¦ ä¸‰ä½å…«è¿›åˆ¶<br>\xhh ä»»æ„å­—ç¬¦ äºŒä½åå…­è¿›åˆ¶<br>\a:èœ‚é¸£ï¼Œå“é“ƒ<br>\b:å›é€€ï¼šå‘åé€€ä¸€æ ¼<br>\f:æ¢é¡µ<br>\n:æ¢è¡Œï¼Œå…‰æ ‡åˆ°ä¸‹è¡Œè¡Œé¦–<br>\r:å›è½¦ï¼Œå…‰æ ‡åˆ°æœ¬è¡Œè¡Œé¦–<br>\t:æ°´å¹³åˆ¶è¡¨<br>\v:å‚ç›´åˆ¶è¡¨<br>\:åæ–œæ <br>\â€™:å•å¼•å·<br>\â€:åŒå¼•å·<br>\?:é—®å·<br>\ddd:ä¸‰ä½å…«è¿›åˆ¶<br>\xhh:äºŒä½åå…­è¿›åˆ¶<br>\0:ç©ºå­—ç¬¦(NULL),ä»€ä¹ˆéƒ½ä¸åš<br>æ³¨ï¼š<br>1ï¼Œ\vå‚ç›´åˆ¶è¡¨å’Œ\fæ¢é¡µç¬¦å¯¹å±å¹•æ²¡æœ‰ä»»ä½•å½±å“ï¼Œä½†ä¼šå½±å“æ‰“å°æœºæ‰§è¡Œå“åº”æ“ä½œã€‚<br>2ï¼Œ\nå…¶å®åº”è¯¥å«å›è½¦æ¢è¡Œã€‚æ¢è¡Œåªæ˜¯æ¢ä¸€è¡Œï¼Œä¸æ”¹å˜å…‰æ ‡çš„æ¨ªåæ ‡ï¼›å›è½¦åªæ˜¯å›åˆ°è¡Œé¦–ï¼Œä¸æ”¹å˜å…‰æ ‡çš„çºµåæ ‡ã€‚<br>3ï¼Œ\t å…‰æ ‡å‘å‰ç§»åŠ¨å››æ ¼æˆ–å…«æ ¼ï¼Œå¯ä»¥åœ¨ç¼–è¯‘å™¨é‡Œè®¾ç½®<br>4ï¼Œ\â€™ åœ¨å­—ç¬¦é‡Œï¼ˆå³å•å¼•å·é‡Œï¼‰ä½¿ç”¨ã€‚åœ¨å­—ç¬¦ä¸²é‡Œ(å³åŒå¼•å·é‡Œ)ä¸éœ€è¦ï¼Œåªè¦ç”¨ â€˜ å³å¯ã€‚<br>5ï¼Œ\? å…¶å®ä¸å¿…è¦ã€‚åªè¦ç”¨ ? å°±å¯ä»¥äº†ï¼ˆåœ¨windows VC6 å’Œtc2 ä¸­éªŒè¯ï¼‰ã€‚</p>
</blockquote>
<h3 id="å¸¸ç”¨çš„å¯Œæ–‡æœ¬"><a href="#å¸¸ç”¨çš„å¯Œæ–‡æœ¬" class="headerlink" title="å¸¸ç”¨çš„å¯Œæ–‡æœ¬"></a>å¸¸ç”¨çš„å¯Œæ–‡æœ¬</h3><h4 id="å•çº¯æ”¹å˜ä¸€å¥è¯ä¸­çš„æŸäº›å­—çš„é¢œè‰²ï¼ˆä¸€ç§é¢œè‰²ï¼‰"><a href="#å•çº¯æ”¹å˜ä¸€å¥è¯ä¸­çš„æŸäº›å­—çš„é¢œè‰²ï¼ˆä¸€ç§é¢œè‰²ï¼‰" class="headerlink" title="å•çº¯æ”¹å˜ä¸€å¥è¯ä¸­çš„æŸäº›å­—çš„é¢œè‰²ï¼ˆä¸€ç§é¢œè‰²ï¼‰"></a>å•çº¯æ”¹å˜ä¸€å¥è¯ä¸­çš„æŸäº›å­—çš„é¢œè‰²ï¼ˆä¸€ç§é¢œè‰²ï¼‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">*  å•çº¯æ”¹å˜ä¸€å¥è¯ä¸­çš„æŸäº›å­—çš„é¢œè‰²ï¼ˆä¸€ç§é¢œè‰²ï¼‰</div><div class="line">*</div><div class="line">*  @param color    éœ€è¦æ”¹å˜æˆçš„é¢œè‰²</div><div class="line">*  @param totalStr æ€»çš„å­—ç¬¦ä¸²</div><div class="line">*  @param subArray éœ€è¦æ”¹å˜é¢œè‰²çš„æ–‡å­—æ•°ç»„(è¦æ˜¯æœ‰ç›¸åŒçš„ åªå–ç¬¬ä¸€ä¸ª)</div><div class="line">*</div><div class="line">*  @return ç”Ÿæˆçš„å¯Œæ–‡æœ¬</div><div class="line">*/</div><div class="line">+ (NSMutableAttributedString *)ls_changeCorlorWithColor:(UIColor *)color TotalString:(NSString *)totalStr SubStringArray:(NSArray *)subArray &#123;</div><div class="line"></div><div class="line">NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:totalStr];</div><div class="line">for (NSString *rangeStr in subArray) &#123;</div><div class="line"></div><div class="line">NSRange range = [totalStr rangeOfString:rangeStr options:NSBackwardsSearch];</div><div class="line">[attributedStr addAttribute:NSForegroundColorAttributeName value:color range:range];</div><div class="line">&#125;</div><div class="line"></div><div class="line">return attributedStr;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æ”¹å˜æ¯è¡Œçš„å­—é—´è·"><a href="#æ”¹å˜æ¯è¡Œçš„å­—é—´è·" class="headerlink" title="æ”¹å˜æ¯è¡Œçš„å­—é—´è·"></a>æ”¹å˜æ¯è¡Œçš„å­—é—´è·</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">*  å•çº¯æ”¹å˜å¥å­çš„å­—é—´è·ï¼ˆéœ€è¦ &lt;CoreText/CoreText.h&gt;ï¼‰</div><div class="line">*</div><div class="line">*  @param totalString éœ€è¦æ›´æ”¹çš„å­—ç¬¦ä¸²</div><div class="line">*  @param space       å­—é—´è·</div><div class="line">*</div><div class="line">*  @return ç”Ÿæˆçš„å¯Œæ–‡æœ¬</div><div class="line">*/</div><div class="line">+ (NSMutableAttributedString *)ls_changeSpaceWithTotalString:(NSString *)totalString Space:(CGFloat)space &#123;</div><div class="line"></div><div class="line">NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:totalString];</div><div class="line">long number = space;</div><div class="line">CFNumberRef num = CFNumberCreate(kCFAllocatorDefault,kCFNumberSInt8Type,&amp;number);</div><div class="line">[attributedStr addAttribute:(id)kCTKernAttributeName value:(__bridge id)num range:NSMakeRange(0,[attributedStr length])];</div><div class="line">CFRelease(num);</div><div class="line"></div><div class="line">return attributedStr;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æ”¹å˜è¡Œé—´è·"><a href="#æ”¹å˜è¡Œé—´è·" class="headerlink" title="æ”¹å˜è¡Œé—´è·"></a>æ”¹å˜è¡Œé—´è·</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">*  å•çº¯æ”¹å˜æ®µè½çš„è¡Œé—´è·</div><div class="line">*</div><div class="line">*  @param totalString éœ€è¦æ›´æ”¹çš„å­—ç¬¦ä¸²</div><div class="line">*  @param lineSpace   è¡Œé—´è·</div><div class="line">*</div><div class="line">*  @return ç”Ÿæˆçš„å¯Œæ–‡æœ¬</div><div class="line">*/</div><div class="line">+ (NSMutableAttributedString *)ls_changeLineSpaceWithTotalString:(NSString *)totalString LineSpace:(CGFloat)lineSpace &#123;</div><div class="line"></div><div class="line">NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:totalString];</div><div class="line"></div><div class="line">NSMutableParagraphStyle * paragraphStyle = [[NSMutableParagraphStyle alloc] init];</div><div class="line">[paragraphStyle setLineSpacing:lineSpace];</div><div class="line"></div><div class="line">[attributedStr addAttribute:NSParagraphStyleAttributeName value:paragraphStyle range:NSMakeRange(0, [totalString length])];</div><div class="line"></div><div class="line">return attributedStr;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="åŒæ—¶æ›´æ”¹è¡Œé—´è·å’Œå­—é—´è·"><a href="#åŒæ—¶æ›´æ”¹è¡Œé—´è·å’Œå­—é—´è·" class="headerlink" title="åŒæ—¶æ›´æ”¹è¡Œé—´è·å’Œå­—é—´è·"></a>åŒæ—¶æ›´æ”¹è¡Œé—´è·å’Œå­—é—´è·</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">*  åŒæ—¶æ›´æ”¹è¡Œé—´è·å’Œå­—é—´è·</div><div class="line">*</div><div class="line">*  @param totalString éœ€è¦æ”¹å˜çš„å­—ç¬¦ä¸²</div><div class="line">*  @param lineSpace   è¡Œé—´è·</div><div class="line">*  @param textSpace   å­—é—´è·</div><div class="line">*</div><div class="line">*  @return ç”Ÿæˆçš„å¯Œæ–‡æœ¬</div><div class="line">*/</div><div class="line">+ (NSMutableAttributedString *)ls_changeLineAndTextSpaceWithTotalString:(NSString *)totalString LineSpace:(CGFloat)lineSpace textSpace:(CGFloat)textSpace &#123;</div><div class="line"></div><div class="line">NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:totalString];</div><div class="line"></div><div class="line">NSMutableParagraphStyle * paragraphStyle = [[NSMutableParagraphStyle alloc] init];</div><div class="line">[paragraphStyle setLineSpacing:lineSpace];</div><div class="line"></div><div class="line">[attributedStr addAttribute:NSParagraphStyleAttributeName value:paragraphStyle range:NSMakeRange(0, [totalString length])];</div><div class="line"></div><div class="line">long number = textSpace;</div><div class="line">CFNumberRef num = CFNumberCreate(kCFAllocatorDefault,kCFNumberSInt8Type,&amp;number);</div><div class="line">[attributedStr addAttribute:(id)kCTKernAttributeName value:(__bridge id)num range:NSMakeRange(0,[attributedStr length])];</div><div class="line">CFRelease(num);</div><div class="line"></div><div class="line">return attributedStr;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æ›´æ”¹æŸäº›æ–‡å­—çš„é¢œè‰²å¹¶ä¿®æ”¹å…¶å­—ä½“ï¼Œçªå‡ºé‡ç‚¹å¼ºè°ƒ"><a href="#æ›´æ”¹æŸäº›æ–‡å­—çš„é¢œè‰²å¹¶ä¿®æ”¹å…¶å­—ä½“ï¼Œçªå‡ºé‡ç‚¹å¼ºè°ƒ" class="headerlink" title="æ›´æ”¹æŸäº›æ–‡å­—çš„é¢œè‰²å¹¶ä¿®æ”¹å…¶å­—ä½“ï¼Œçªå‡ºé‡ç‚¹å¼ºè°ƒ"></a>æ›´æ”¹æŸäº›æ–‡å­—çš„é¢œè‰²å¹¶ä¿®æ”¹å…¶å­—ä½“ï¼Œçªå‡ºé‡ç‚¹å¼ºè°ƒ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">*  æ”¹å˜æŸäº›æ–‡å­—çš„é¢œè‰² å¹¶å•ç‹¬è®¾ç½®å…¶å­—ä½“</div><div class="line">*</div><div class="line">*  @param font        è®¾ç½®çš„å­—ä½“</div><div class="line">*  @param color       é¢œè‰²</div><div class="line">*  @param totalString æ€»çš„å­—ç¬¦ä¸²</div><div class="line">*  @param subArray    æƒ³è¦å˜è‰²çš„å­—ç¬¦æ•°ç»„</div><div class="line">*</div><div class="line">*  @return ç”Ÿæˆçš„å¯Œæ–‡æœ¬</div><div class="line">*/</div><div class="line">+ (NSMutableAttributedString *)ls_changeFontAndColor:(UIFont *)font Color:(UIColor *)color TotalString:(NSString *)totalString SubStringArray:(NSArray *)subArray &#123;</div><div class="line"></div><div class="line">NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:totalString];</div><div class="line"></div><div class="line">for (NSString *rangeStr in subArray) &#123;</div><div class="line"></div><div class="line">NSRange range = [totalString rangeOfString:rangeStr options:NSBackwardsSearch];</div><div class="line"></div><div class="line">[attributedStr addAttribute:NSForegroundColorAttributeName value:color range:range];</div><div class="line">[attributedStr addAttribute:NSFontAttributeName value:font range:range];</div><div class="line">&#125;</div><div class="line"></div><div class="line">return attributedStr;</div></pre></td></tr></table></figure>
<h3 id="å¯Œæ–‡æœ¬ç›¸å…³å±æ€§æ±‡æ€»"><a href="#å¯Œæ–‡æœ¬ç›¸å…³å±æ€§æ±‡æ€»" class="headerlink" title="å¯Œæ–‡æœ¬ç›¸å…³å±æ€§æ±‡æ€»"></a>å¯Œæ–‡æœ¬ç›¸å…³å±æ€§æ±‡æ€»</h3><blockquote>
<ul>
<li>NSFontAttributeName ï¼šå­—ä½“å­—å·<ul>
<li>valueå€¼ï¼šUIFontç±»å‹</li>
</ul>
</li>
<li>NSParagraphStyleAttributeName ï¼š æ®µè½æ ·å¼<ul>
<li>valueå€¼ï¼šNSParagraphStyleç±»å‹ï¼ˆå…¶å±æ€§å¦‚ä¸‹ï¼‰</li>
<li>lineSpacing è¡Œé—´è·(å…·ä½“ç”¨æ³•å¯æŸ¥çœ‹ä¸Šé¢çš„è®¾ç½®è¡Œé—´è·API)</li>
<li>paragraphSpacing æ®µè½é—´è·</li>
<li>alignment å¯¹é½æ–¹å¼</li>
<li>firstLineHeadIndent æŒ‡å®šæ®µè½å¼€å§‹çš„ç¼©è¿›åƒç´ </li>
<li>headIndent è°ƒæ•´å…¨éƒ¨æ–‡å­—çš„ç¼©è¿›åƒç´ </li>
</ul>
</li>
<li>NSForegroundColorAttributeName å­—ä½“é¢œè‰²<ul>
<li>valueå€¼ï¼šUIColorç±»å‹</li>
</ul>
</li>
<li>NSBackgroundColorAttributeName èƒŒæ™¯é¢œè‰²<ul>
<li>valueå€¼ï¼šUIColorç±»å‹</li>
</ul>
</li>
<li>NSObliquenessAttributeName å­—ä½“ç²—å€¾æ–œ<ul>
<li>valueå€¼ï¼šNSNumberç±»å‹</li>
</ul>
</li>
<li>NSExpansionAttributeName å­—ä½“åŠ ç²—<ul>
<li>valueå€¼ï¼šNSNumberç±»å‹(æ¯”ä¾‹) 0å°±æ˜¯ä¸å˜ 1å¢åŠ ä¸€å€</li>
</ul>
</li>
<li>NSKernAttributeName å­—é—´è·<ul>
<li>valueå€¼ï¼šCGFloatç±»å‹</li>
</ul>
</li>
<li>NSUnderlineStyleAttributeName ä¸‹åˆ’çº¿<ul>
<li>valueå€¼ï¼š1æˆ–0</li>
</ul>
</li>
<li>NSUnderlineColorAttributeName ä¸‹åˆ’çº¿é¢œè‰²<ul>
<li>valueå€¼ï¼šUIColorç±»å‹</li>
</ul>
</li>
<li>NSStrikethroughStyleAttributeName åˆ é™¤çº¿<ul>
<li>valueå€¼ï¼š1æˆ–0</li>
</ul>
</li>
<li>NSStrikethroughColorAttributeName åˆ é™¤çº¿é¢œè‰²<ul>
<li>valueå€¼ï¼šUIColorç±»å‹</li>
</ul>
</li>
<li>NSStrokeColorAttributeName å­—ä½“é¢œè‰²<ul>
<li>valueå€¼ï¼šUIColorç±»å‹</li>
</ul>
</li>
<li>NSStrokeWidthAttributeName å­—ä½“æè¾¹<ul>
<li>valueå€¼ï¼šCGFloat</li>
</ul>
</li>
<li>NSLigatureAttributeName è¿ç¬”å­—<ul>
<li>valueå€¼ï¼š1æˆ–0</li>
</ul>
</li>
<li>NSShadowAttributeName é˜´å½±<ul>
<li>valueå€¼ï¼šNSShawdowç±»å‹ï¼ˆä¸‹é¢æ˜¯å…¶å±æ€§ï¼‰</li>
<li>shadowOffset å½±å­ä¸å­—ç¬¦ä¸²çš„åç§»é‡</li>
<li>shadowBlurRadius å½±å­çš„æ¨¡ç³Šç¨‹åº¦</li>
<li>shadowColor å½±å­çš„é¢œè‰²</li>
</ul>
</li>
<li>NSTextEffectAttributeName è®¾ç½®æ–‡æœ¬ç‰¹æ®Šæ•ˆæœ,ç›®å‰åªæœ‰å›¾ç‰ˆå°åˆ·æ•ˆæœå¯ç”¨<ul>
<li>valueå€¼ï¼šNSStringç±»å‹</li>
</ul>
</li>
<li>NSAttachmentAttributeName è®¾ç½®æ–‡æœ¬é™„ä»¶<ul>
<li>valueå€¼ï¼šNSTextAttachmentç±»å‹ï¼ˆæ²¡ç ”ç©¶è¿‡ï¼Œå¯è‡ªè¡Œç™¾åº¦ç ”ç©¶ï¼‰</li>
</ul>
</li>
<li>NSLinkAttributeName é“¾æ¥<ul>
<li>valueå€¼ï¼šNSURL (preferred) or NSStringç±»å‹</li>
</ul>
</li>
<li>NSBaselineOffsetAttributeName åŸºå‡†çº¿åç§»<ul>
<li>valueå€¼ï¼šNSNumberç±»å‹</li>
</ul>
</li>
<li>NSWritingDirectionAttributeName æ–‡å­—æ–¹å‘ åˆ†åˆ«ä»£è¡¨ä¸åŒçš„æ–‡å­—å‡ºç°æ–¹å‘<ul>
<li>valueå€¼ï¼š@[@(1),@(2)]</li>
</ul>
</li>
<li>NSVerticalGlyphFormAttributeName æ°´å¹³æˆ–è€…ç«–ç›´æ–‡æœ¬ åœ¨iOSæ²¡åµç”¨ï¼Œä¸æ”¯æŒç«–ç‰ˆ<ul>
<li>valueå€¼ï¼š1ç«–ç›´ 0æ°´å¹³</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="è·å–æ±‰å­—çš„æ‹¼éŸ³"><a href="#è·å–æ±‰å­—çš„æ‹¼éŸ³" class="headerlink" title="è·å–æ±‰å­—çš„æ‹¼éŸ³"></a>è·å–æ±‰å­—çš„æ‹¼éŸ³</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">+ (NSString *)transform:(NSString *)chinese</div><div class="line">&#123;</div><div class="line">//å°†NSStringè£…æ¢æˆNSMutableString</div><div class="line">NSMutableString *pinyin = [chinese mutableCopy];</div><div class="line">//å°†æ±‰å­—è½¬æ¢ä¸ºæ‹¼éŸ³(å¸¦éŸ³æ ‡)</div><div class="line">CFStringTransform((__bridge CFMutableStringRef)pinyin, NULL, kCFStringTransformMandarinLatin, NO);</div><div class="line">NSLog(@&quot;%@&quot;, pinyin);</div><div class="line">//å»æ‰æ‹¼éŸ³çš„éŸ³æ ‡</div><div class="line">CFStringTransform((__bridge CFMutableStringRef)pinyin, NULL, kCFStringTransformStripCombiningMarks, NO);</div><div class="line">NSLog(@&quot;%@&quot;, pinyin);</div><div class="line">//è¿”å›æœ€è¿‘ç»“æœ</div><div class="line">return pinyin;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Djangoéƒ¨ç½²+apache+mod_wsgi]]></title>
      <url>/2016/11/09/2016/Django%E9%83%A8%E7%BD%B2-apache-mod-wsgi/</url>
      <content type="html"><![CDATA[<h2 id="Djangoçš„éƒ¨ç½²-apache-mod-wsgi"><a href="#Djangoçš„éƒ¨ç½²-apache-mod-wsgi" class="headerlink" title="Djangoçš„éƒ¨ç½²(apache + mod_wsgi)"></a>Djangoçš„éƒ¨ç½²(apache + mod_wsgi)</h2><h3 id="æ¦‚å¿µè§£æ"><a href="#æ¦‚å¿µè§£æ" class="headerlink" title="æ¦‚å¿µè§£æ"></a>æ¦‚å¿µè§£æ</h3><h4 id="Django"><a href="#Django" class="headerlink" title="Django"></a>Django</h4><p>Djangoæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå¯ä»¥ç”¨pythonæ¥å¼€å‘webåº”ç”¨ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯ç‹¬ç«‹çš„å¼€å‘webï¼Œåœ¨UIæ”¾é¢ä¾ç„¶éœ€è¦ä¾é html+css+jsï¼Œç”¨è¿™äº›æ¥æ­å»ºç•Œé¢ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥ä½¿ç”¨djangoæ— ç¼çš„ä½¿ç”¨pythonçš„é€»è¾‘åŠŸèƒ½ï¼Œæ¯”å¦‚ä½¿ç”¨pythonæ¥å¤„ç†æ•°æ®ï¼Œç„¶åäº¤ç»™é¡µé¢æ¥è¿›è¡Œå±•ç¤º </p>
<blockquote>
<p>Djangoæœ¬èº«æ˜¯æœ‰webæœåŠ¡å™¨çš„ï¼Œä½†æ˜¯è¿™ä¸ªæœåŠ¡å™¨åªèƒ½åœ¨æœ¬æœºæä¾›webæœåŠ¡ï¼Œå…¶ä½œç”¨ä¸»è¦æ˜¯ç”¨æ¥åšæµ‹è¯•ï¼Œå¦‚æœæƒ³å…¶ä»–æœºå™¨ä¹Ÿèƒ½è®¿é—®ä½ çš„webè¿™ä¸ªæ—¶å€™ä½ è¿˜éœ€è¦å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæä¾›ç½‘ç»œè®¿é—®çš„åŠŸèƒ½<br><a id="more"></a></p>
<h4 id="apache"><a href="#apache" class="headerlink" title="apache"></a>apache</h4><p>Apacheæ˜¯ä¸“é—¨ç”¨äº†æä¾›HTTPæœåŠ¡çš„ï¼Œä»¥åŠç›¸å…³é…ç½®çš„ï¼ˆä¾‹å¦‚è™šæ‹Ÿä¸»æœºã€URLè½¬å‘ç­‰ç­‰ï¼‰</p>
</blockquote>
<h4 id="mod-wsgi"><a href="#mod-wsgi" class="headerlink" title="mod_wsgi"></a>mod_wsgi</h4><p>mod_wsgiçš„ç›®çš„æ˜¯å®ç°ä¸€ä¸ªç®€å•çš„ä½¿ç”¨Apacheæ¨¡å—å¯ä»¥ä¸¾åŠä»»ä½•Pythonåº”ç”¨ç¨‹åºæ”¯æŒPythonçš„WSGIæ¥å£ã€‚è¯¥æ¨¡å—å°†é€‚ç”¨äºä¸»æœºçš„é«˜æ€§èƒ½ç”Ÿäº§çš„ç½‘ç«™ï¼Œä»¥åŠä¸€èˆ¬çš„è‡ªæˆ‘ç®¡ç†ä¸ªäººç½‘ç«™çš„ç½‘é¡µå¯„å­˜æœåŠ¡è¿è¡Œã€‚ï¼‰</p>
<h4 id="è™šæ‹Ÿä¸»æœº"><a href="#è™šæ‹Ÿä¸»æœº" class="headerlink" title="è™šæ‹Ÿä¸»æœº"></a>è™šæ‹Ÿä¸»æœº</h4><p>åœ¨apacheä¸Šé…ç½®è™šæ‹Ÿä¸»æœºï¼Œè¿™å°†åœ¨ä½ macä¸Šæä¾›ä¸€ä¸ªç®€å•ç®¡ç†å¤šä¸ªç½‘ç«™çš„æ¡†æ¶</p>
<h4 id="é™æ€æ–‡ä»¶"><a href="#é™æ€æ–‡ä»¶" class="headerlink" title="é™æ€æ–‡ä»¶"></a>é™æ€æ–‡ä»¶</h4><p>django1.3æ–°åŠ å…¥äº†ä¸€ä¸ªé™æ€èµ„æºç®¡ç†çš„appï¼Œdjango.contrib.staticfilesã€‚åœ¨ä»¥å¾€çš„djangoç‰ˆæœ¬ä¸­ï¼Œé™æ€èµ„æºçš„ç®¡ç†ä¸€å‘éƒ½æ˜¯ä¸ªé—®é¢˜ã€‚éƒ¨åˆ†appå‘å¸ƒçš„æ—¶å€™ä¼šå¸¦ä¸Šé™æ€èµ„æºæ–‡ä»¶ï¼Œåœ¨éƒ¨ç½²çš„æ—¶å€™ä½ å¿…é¡»æ‰‹åŠ¨ä»å„ä¸ªappä¸­å°†è¿™äº›é™æ€èµ„æºæ–‡ä»¶å¤åˆ¶åˆ°åŒä¸€ä¸ªstaticç›®å½•ã€‚åœ¨å¼•å…¥staticfilesåï¼Œä½ åªéœ€è¦æ‰§è¡Œ./manage.py collectstaticå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†æ‰€ç”¨åˆ°appä¸­çš„é™æ€èµ„æºå¤åˆ¶åˆ°åŒä¸€ç›®å½•ã€‚<br>staticfilesçš„å¼•å…¥ï¼Œæ–¹ä¾¿äº†djangoé™æ€æ–‡ä»¶çš„ç®¡ç†ï¼Œä¸è¿‡æ„Ÿè§‰staticfilesçš„æ–‡æ¡£å†™çš„å¹¶ä¸æ˜¯å¤ªæ¸…æ¥šï¼Œåˆæ¬¡ä½¿ç”¨çš„æ—¶å€™è¿˜æ˜¯è®©æˆ‘æœ‰äº›å›°æƒ‘ã€‚<br>ä¸‹é¢ç®€å•çš„ä»‹ç»ä¸€ä¸‹staticfilesçš„ä¸»è¦é…ç½®ï¼š</p>
<ul>
<li><p><code>STATIC_ROOT</code>ï¼šè¿è¡Œmanage.py collectstaticåé™æ€æ–‡ä»¶å°†å¤åˆ¶åˆ°çš„ç›®å½•ã€‚æ³¨æ„ï¼šä¸è¦æŠŠä½ é¡¹ç›®çš„é™æ€æ–‡ä»¶æ”¾åˆ°è¿™ä¸ªç›®å½•ã€‚è¿™ä¸ªç›®å½•åªæœ‰åœ¨è¿è¡Œcollectstaticæ—¶æ‰ä¼šç”¨åˆ°ã€‚æˆ‘æœ€å¼€å§‹æƒ³å½“ç„¶çš„ä»¥ä¸ºè¿™ä¸ªç›®å½•å’ŒMEDIA_ROOTçš„ä½œç”¨æ˜¯ç›¸åŒçš„ï¼Œè‡´ä½¿åœ¨å¼€å‘ç¯å¢ƒä¸‹ä¸€ç›´æ— æ³•æ‰¾åˆ°é™æ€æ–‡ä»¶ã€‚</p>
</li>
<li><p><code>STATIC_URL</code>ï¼šè®¾ç½®çš„static fileçš„èµ·å§‹urlï¼Œè¿™ä¸ªåªå¯ä»¥åœ¨templateé‡Œé¢å¼•ç”¨åˆ°ã€‚è¿™ä¸ªå‚æ•°å’ŒMEDIA_URLçš„å«ä¹‰å·®ä¸å¤šã€‚</p>
</li>
<li><p><code>STATICFILES_DIRS</code>ï¼šé™¤äº†å„ä¸ªappçš„staticç›®å½•ä»¥å¤–è¿˜éœ€è¦ç®¡ç†çš„é™æ€æ–‡ä»¶ä½ç½®ï¼Œæ¯”å¦‚é¡¹ç›®å…¬å…±çš„é™æ€æ–‡ä»¶å·®ä¸å¤šã€‚å’ŒTEMPLATE_DIRSçš„å«ä¹‰å·®ä¸å¤šã€‚<br>å„ä¸ªAPPä¸‹static/ç›®å½•ä¸‹çš„é™æ€æ–‡ä»¶djangoçš„å¼€å‘æœåŠ¡å™¨ä¼šè‡ªåŠ¨æ‰¾åˆ°ï¼Œè¿™ç‚¹å’Œä»¥å‰APPä¸‹çš„templatesç›®å½•å·®ä¸å¤šã€‚<br>åœ¨urls.pyä¸­åŠ å…¥é™æ€æ–‡ä»¶å¤„ç†çš„ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">from django.contrib.staticfiles.urls import staticfiles_urlpatterns</div><div class="line"># ... the rest of your URLconf goes here ...</div><div class="line">urlpatterns += staticfiles_urlpatterns()</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="å„ç§ç›®å½•"><a href="#å„ç§ç›®å½•" class="headerlink" title="å„ç§ç›®å½•"></a>å„ç§ç›®å½•</h3><ul>
<li>djangoé¡¹ç›®ç›®å½•</li>
<li>é™æ€æ–‡ä»¶ç›®å½•</li>
<li>é”™è¯¯æ—¥å¿—ç›®å½•</li>
</ul>
<h3 id="è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹"><a href="#è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹" class="headerlink" title="è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹"></a>è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹</h3><p>sitename.conf â€“&gt; wsgi.py â€“&gt; settings.py â€“&gt; urls.py â€“&gt; views.py</p>
<h3 id="é…ç½®çš„è¿‡ç¨‹"><a href="#é…ç½®çš„è¿‡ç¨‹" class="headerlink" title="é…ç½®çš„è¿‡ç¨‹"></a>é…ç½®çš„è¿‡ç¨‹</h3><ul>
<li>pythonæ˜¯ç³»ç»Ÿè‡ªå¸¦ä¸éœ€è¦å®‰è£…</li>
<li>apacheç³»ç»Ÿè‡ªå¸¦ä¸éœ€è¦å®‰è£…<h4 id="mod-wsgiå®‰è£…"><a href="#mod-wsgiå®‰è£…" class="headerlink" title="mod_wsgiå®‰è£…"></a>mod_wsgiå®‰è£…</h4></li>
<li><code>brew tap homebrew/apache</code></li>
<li><code>brew install mod_wsgi</code></li>
</ul>
<h4 id="djangoå®‰è£…åŠå·¥ç¨‹åˆ›å»º"><a href="#djangoå®‰è£…åŠå·¥ç¨‹åˆ›å»º" class="headerlink" title="djangoå®‰è£…åŠå·¥ç¨‹åˆ›å»º"></a>djangoå®‰è£…åŠå·¥ç¨‹åˆ›å»º</h4><ul>
<li>å®‰è£…pip<code>sudo easy_install pip</code></li>
<li>åˆ©ç”¨pipå®‰è£…django<code>ï¼ˆsudo) pip install Django</code></li>
<li><p>æ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; import django</div><div class="line">&gt;&gt;&gt; django.VERSION</div><div class="line">(1, 7, 6, &apos;final&apos;, 0)</div><div class="line">&gt;&gt;&gt; </div><div class="line">&gt;&gt;&gt; django.get_version()</div><div class="line">&apos;1.7.6&apos;</div></pre></td></tr></table></figure>
</li>
<li><p>åˆ›å»ºå·¥ç¨‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">django-admin.py startproject project-name</div></pre></td></tr></table></figure>
</li>
<li><p>åˆ›å»ºapp<br>åˆ°å·¥ç¨‹çš„ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°namage.pyè¿™ä¸ªæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">python manage.py startapp app-name</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="apacheé…ç½®"><a href="#apacheé…ç½®" class="headerlink" title="apacheé…ç½®"></a>apacheé…ç½®</h4><p>/etc/apache2/httpd.conf<br>è¿™ä¸ªæ–‡å†…</p>
<ul>
<li><code>LoadModule wsgi_module /usr/local/Cellar/mod_wsgi/4.5.6/libexec/mod_wsgi.so</code>è¿™ä¸ªç›®å½•æ˜¯å®‰è£…mod_wsgiè¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œç”Ÿæˆçš„ï¼Œæ‰¾åˆ°å®ƒ</li>
<li><code>Include /private/etc/apache2/extra/httpd-vhosts.conf</code>æ”¾å¼€è¿™å¥è¯ï¼Œæ„æ€æ˜¯æˆ‘è¦ä½¿ç”¨è™šæ‹Ÿä¸»æœº</li>
<li>é…ç½®è™šæ‹Ÿä¸»æœºåœ¨httpd-vhosts.confè¿™ä¸ªæ–‡ä»¶å†…å¯¼å…¥æ–‡ä»¶<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">include /private/etc/apache2/extra/vhosts/localhost.conf</div><div class="line">include /private/etc/apache2/extra/vhosts/dev.mysite.com.conf</div></pre></td></tr></table></figure>
</li>
</ul>
<p>æ„æ€æ˜¯å¯¼å…¥è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œä½œä¸ºè™šæ‹Ÿä¸»æœºçš„é…ç½®ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªæ–‡ä»¶éœ€è¦è‡ªå·±åˆ›å»º</p>
<ul>
<li>è™šæ‹Ÿä¸»æœºé…ç½®<code>dev.mysite.com.conf</code><br>è¿™ä¸ªæ˜¯æœ€å…³é”®çš„åœ°æ–¹<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">Listen 89#è™šæ‹Ÿä¸»æœºçš„ç›‘å¬ç«¯å£</div><div class="line">&lt;VirtualHost *:89&gt;</div><div class="line"></div><div class="line">LogLevel info</div><div class="line"></div><div class="line">ServerName dev.mysite.com#è™šæ‹Ÿä¸»æœºçš„åå­—</div><div class="line">ServerAdmin my@mysite.com</div><div class="line"></div><div class="line">ErrorLog &quot;/Users/han/Sites/logs/mysite.com-error_log&quot;</div><div class="line">CustomLog &quot;/Users/han/Sites/logs/mysite.com-access_log&quot; common#è¿™ä¸¤ä¸ªä¸€å®šè¦é…ç½®ï¼Œå› ä¸ºä¸€æ—¦æœ‰é”™è¯¯ï¼Œæˆ‘ä»¬éœ€è¦ä¾é è¿™ä¸¤ä¸ªæ–‡ä»¶çš„å†…çš„æ—¥å¿—æ¥æ‰¾åˆ°é”™è¯¯</div><div class="line"></div><div class="line"></div><div class="line">WSGIScriptAlias / /Users/han/Documents/mysite/mysite/wsgi.py#è¿™ä¸ªæ˜¯æ•´ä¸ªè®¾ç½®æœ€é‡è¦çš„åœ°æ–¹ï¼Œè®©apacheå¯ä»¥çŸ¥é“ä½¿ç”¨å“ªä¸ªwsgi</div><div class="line"></div><div class="line">&lt;Directory &quot;/Users/han/Documents/mysite/mysite&quot;&gt;</div><div class="line">&lt;Files wsgi.py&gt;</div><div class="line">Require all granted</div><div class="line">&lt;/Files&gt;</div><div class="line">&lt;/Directory&gt;#è®¾ç½®wsgiçš„æ–‡ä»¶æƒé™</div><div class="line"></div><div class="line">#################ä¸‹è¾¹çš„éƒ½ä¸æ˜¯é‡ç‚¹äº†##################</div><div class="line"># Static files</div><div class="line">DocumentRoot &quot;/Users/han/Sites/mysite.com&quot;</div><div class="line">&lt;Directory &quot;/Users/han/Sites/mysite.com&quot;&gt;</div><div class="line">Options FollowSymLinks Multiviews</div><div class="line">Require all granted</div><div class="line">&lt;/Directory&gt;</div><div class="line"></div><div class="line">Alias /static/ /Users/han/Sites/mysite.com/static/</div><div class="line"></div><div class="line">&lt;Directory &quot;/Users/han/Sites/mysite.com/static&quot;&gt;</div><div class="line">Require all granted</div><div class="line">&lt;/Directory&gt;</div><div class="line"></div><div class="line"># WGSI configuration</div><div class="line">#WSGIDaemonProcess dev.mysite.com processes=2 threads=15 display-name=%&#123;GROUP&#125; python-#path=/Users/han/Documents/mysite/:/Users/han/Documents/VirtualEnvs/python2.7-django/lib/python2.7/site-#packages</div><div class="line"></div><div class="line">#WSGIProcessGroup dev.mysite.com</div><div class="line"></div><div class="line">&lt;Directory &quot;/Users/han/Documents/mysite&quot;&gt;</div><div class="line">Options FollowSymLinks Multiviews</div><div class="line">Require all granted</div><div class="line">&lt;/Directory&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;/VirtualHost&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="djangoå·¥ç¨‹é…ç½®"><a href="#djangoå·¥ç¨‹é…ç½®" class="headerlink" title="djangoå·¥ç¨‹é…ç½®"></a>djangoå·¥ç¨‹é…ç½®</h4><p>è®¾ç½®wsgiæ–‡ä»¶ï¼Œè®©mod_wsgiçŸ¥é“ï¼Œä½¿ç”¨å“ªä¸ªdjangoé¡¹ç›®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">import os</div><div class="line"></div><div class="line">from os.path import join,dirname,abspath</div><div class="line"></div><div class="line">PROJECT_DIR = dirname(dirname(abspath(__file__)))#3</div><div class="line">import sys # 4</div><div class="line">sys.path.insert(0,PROJECT_DIR) # 5</div><div class="line"></div><div class="line">from django.core.wsgi import get_wsgi_application</div><div class="line"></div><div class="line">os.environ.setdefault(&quot;DJANGO_SETTINGS_MODULE&quot;, &quot;mysite.settings&quot;)</div><div class="line"></div><div class="line">application = get_wsgi_application()</div></pre></td></tr></table></figure></p>
<p>æœ€é‡è¦çš„æ˜¯3ï¼Œ4ï¼Œ5ä¸‰å¥ï¼Œè®©mod_wsgiçŸ¥é“å»å“ªé‡Œæ‰¾djangoé¡¹ç›®ï¼Œå‰©ä¸‹çš„å°±æ˜¯djangoçš„äº‹æƒ…äº†</p>
<h3 id="é”™è¯¯è¯´æ˜"><a href="#é”™è¯¯è¯´æ˜" class="headerlink" title="é”™è¯¯è¯´æ˜"></a>é”™è¯¯è¯´æ˜</h3><blockquote>
<p>å…¶å®æ‰€æœ‰çš„staticæ–‡ä»¶éƒ½æ˜¯éé‡ç‚¹ï¼Œå› ä¸ºæˆ‘ä»¬æœ€ç»ˆè°ƒç”¨çš„æ˜¯djangoçš„æœåŠ¡ï¼Œæ‰€ä»¥æ²¡æœ‰é™æ€æ–‡ä»¶ï¼Œåªæ˜¯ä¸å±•ç¤ºè€Œå·²ï¼Œä¸è¿‡å¦‚æœæˆ‘ä»¬éœ€è¦ä¸€äº›å°çš„iconç­‰ç­‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦è¿™ä¸ªé™æ€æ–‡ä»¶çš„ï¼Œè¿™æ˜¯åè¯ï¼Œå…ˆå®ç°æœåŠ¡è¿™æ˜¯å¤§äº‹</p>
</blockquote>
<p>å¦‚æœæˆ‘ä»¬é‡åˆ°äº†æƒé™é—®é¢˜ï¼Œ</p>
<blockquote>
<p>Permission denied: access to / denied (filesystem path â€˜/Users/han/Documents/mysite use search permissions are missing on a component of the path</p>
</blockquote>
<p>åƒä¸‹è¾¹è¿™æ ·çš„ï¼Œè¯´æ˜æˆ‘ä»¬æ²¡æœ‰åˆé€‚çš„æƒé™ï¼Œè¿™æ˜¯æ‰€æœ‰æ–‡æ¡£éƒ½æ²¡æœ‰è¯´æ˜ç™½çš„åœ°æ–¹ï¼Œè¿™é‡Œä¹‹æ‰€ä»¥å›è®¿é—®è¿™ä¸ªæ˜¯å› ä¸ºåœ¨mod_wsgiä¸­è¿›è¡Œäº†è®¾ç½®ï¼Œmod_wsgiå»è¿™ä¸ªæ–‡ä»¶ä¸­å¯»æ‰¾djangoçš„æœåŠ¡ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰åœ¨æ‰€æœ‰çš„è®¾ç½®ä¸­è®¾ç½®mod_wsgiçš„è®¿é—®æƒé™ï¼Œè¿™æ˜¯å…¶ä¸€ï¼Œå…¶äºŒæˆ‘ä»¬å¹¶ä¸èƒ½ç›´æ¥è®¾ç½®mysiteçš„æƒé™ï¼Œè¿™æ ·åˆ°æœ€åæˆ‘ä»¬å‘ç°è¿˜æ˜¯ä¸€ç›´æŠ¥è¿™ä¸ªé”™è¯¯ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸Šå±‚ç›®å½•çš„æƒé™ï¼Œä¸çŸ¥é“ä¸ºå•¥ä¼šè¿™ä¹ˆå‘çˆ¹<br>åˆ°ï½ç›®å½•ä¸‹ï¼Œç„¶å<br><code>chmod o+rx Documents</code><br>æœ€åæˆ‘ä»¬è¾“å…¥<code>dev.mysite.com:89</code>çš„æ—¶å€™æ˜¾ç¤ºçš„å°±æ˜¯djangoçš„é¦–é¡µäº†</p>
<h3 id="å¸¸ç”¨å‘½ä»¤è¡Œ"><a href="#å¸¸ç”¨å‘½ä»¤è¡Œ" class="headerlink" title="å¸¸ç”¨å‘½ä»¤è¡Œ"></a>å¸¸ç”¨å‘½ä»¤è¡Œ</h3><ul>
<li><code>sudo apachectl restart</code>é‡å¯å‘½ä»¤</li>
<li><code>apachectl confittest</code>ä¿®æ”¹é…ä¹‹åæµ‹è¯•ä¸€ä¸‹çœ‹çœ‹å“ªé‡Œæœ‰é”™è¯¯ï¼Œåªå‡ºç°ä¸€ä¸ªOKæ‰æ˜¯æ²¡æœ‰é—®é¢˜</li>
</ul>
]]></content>
      
        <categories>
            
            <category> Python </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[FLVæ ¼å¼è§£æ]]></title>
      <url>/2016/07/30/2016/FLV%E6%A0%BC%E5%BC%8F%E8%A7%A3%E6%9E%90/</url>
      <content type="html"><![CDATA[<p>FLV æ˜¯ FLASH VIDEO çš„ç®€ç§°,ï¼ŒFLVæµåª’ä½“æ ¼å¼æ˜¯ä¸€ç§æ–°çš„è§†é¢‘æ ¼å¼ï¼Œå…¨ç§°ä¸ºFlash Videoã€‚FLV å‹ç¼©ä¸è½¬æ¢éå¸¸æ–¹ä¾¿ï¼Œé€‚åˆåšçŸ­ç‰‡.ï¼Œå¹¶ä¸” FLV å¯ä»¥å¾ˆå¥½çš„ä¿æŠ¤åŸå§‹åœ°å€ï¼Œä¸å®¹æ˜“ä¸‹è½½åˆ°ï¼Œå¯ä»¥èµ·åˆ°ä¿æŠ¤ç‰ˆæƒçš„ç›®çš„<br><a id="more"></a></p>
<p>æœ€è¿‘è¦ç”¨åˆ°flvï¼Œæ•´ç†äº†ä¸€äº›flvæ ¼å¼çš„èµ„æ–™ï¼Œä¾›å‚è€ƒã€‚ flvæ–‡ä»¶ä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šheaderå’Œbodyã€‚</p>
<h2 id="1-header"><a href="#1-header" class="headerlink" title="1.header"></a>1.header</h2><p>headeréƒ¨åˆ†è®°å½•äº†flvçš„ç±»å‹ã€ç‰ˆæœ¬ç­‰ä¿¡æ¯ï¼Œæ˜¯flvçš„å¼€å¤´ï¼Œä¸€èˆ¬éƒ½å·®ä¸å¤šï¼Œå 9bytesã€‚å…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>æ–‡ä»¶ç±»å‹</th>
<th>3bytes</th>
<th>â€œFLVâ€</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç‰ˆæœ¬</td>
<td>1 byte</td>
<td>ä¸€èˆ¬ä¸º0x01</td>
</tr>
<tr>
<td>æµä¿¡æ¯</td>
<td>1 byte</td>
<td>å€’æ•°ç¬¬ä¸€ä½æ˜¯1è¡¨ç¤ºæœ‰è§†é¢‘ï¼Œå€’æ•°ç¬¬ä¸‰ä½æ˜¯1è¡¨ç¤ºæœ‰éŸ³é¢‘ï¼Œå€’æ•°ç¬¬äºŒã€å››ä½å¿…é¡»ä¸º0</td>
</tr>
<tr>
<td>headeré•¿åº¦</td>
<td>4 bytes</td>
<td>æ•´ä¸ªheaderçš„é•¿åº¦ï¼Œä¸€èˆ¬ä¸º9ï¼›å¤§äº9è¡¨ç¤ºä¸‹é¢è¿˜æœ‰æ‰©å±•ä¿¡æ¯</td>
</tr>
</tbody>
</table>
<h2 id="2-body"><a href="#2-body" class="headerlink" title="2.body"></a>2.body</h2><p>bodyéƒ¨åˆ†ç”±ä¸€ä¸ªä¸ªTagç»„æˆï¼Œæ¯ä¸ªTagçš„ä¸‹é¢æœ‰ä¸€å—4bytesçš„ç©ºé—´ï¼Œç”¨æ¥è®°å½•è¿™ä¸ªtagçš„é•¿åº¦ï¼Œè¿™ä¸ªåç½®ç”¨äºé€†å‘è¯»å–å¤„ç†ï¼Œä»–ä»¬çš„å…³ç³»å¦‚ä¸‹å›¾ï¼š flv<br><img src="http://i1.piimg.com/567571/9a6b94bf91e209d3.jpg" alt=""></p>
<h3 id="2-1-Tag"><a href="#2-1-Tag" class="headerlink" title="2.1.Tag"></a>2.1.Tag</h3><p>æ¯ä¸ªTagç”±ä¹Ÿæ˜¯ç”±ä¸¤éƒ¨åˆ†ç»„æˆçš„ï¼šTag Headerå’ŒTag Dataã€‚Tag Headeré‡Œå­˜æ”¾çš„æ˜¯å½“å‰Tagçš„ç±»å‹ã€æ•°æ®åŒºï¼ˆTag Dataï¼‰é•¿åº¦ç­‰ä¿¡æ¯ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>é•¿åº¦</th>
<th>ä»‹ç»</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tagç±»å‹</td>
<td>1 bytes</td>
<td>8ï¼šéŸ³é¢‘ 9ï¼šè§†é¢‘ 18ï¼šè„šæœ¬  å…¶ä»–ï¼šä¿ç•™</td>
</tr>
<tr>
<td>æ•°æ®åŒºé•¿åº¦</td>
<td>3 bytes</td>
<td>åœ¨æ•°æ®åŒºçš„é•¿åº¦</td>
</tr>
<tr>
<td>æ—¶é—´æˆ³</td>
<td>3 bytes</td>
<td>æ•´æ•°ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚å¯¹äºè„šæœ¬å‹çš„tagæ€»æ˜¯0</td>
</tr>
<tr>
<td>æ—¶é—´æˆ³æ‰©å±•</td>
<td>1 bytes</td>
<td>å°†æ—¶é—´æˆ³æ‰©å±•ä¸º4bytesï¼Œä»£è¡¨é«˜8ä½ã€‚å¾ˆå°‘ç”¨åˆ°</td>
</tr>
<tr>
<td>StreamsID</td>
<td>3 bytes</td>
<td>æ€»æ˜¯0</td>
</tr>
</tbody>
</table>
<p>æ•°æ®åŒº(data)    ç”±æ•°æ®åŒºé•¿åº¦å†³å®š    æ•°æ®å®ä½“</p>
<h3 id="2-2-Tag-Data"><a href="#2-2-Tag-Data" class="headerlink" title="2.2.Tag Data"></a>2.2.Tag Data</h3><p>æ•°æ®åŒºæ ¹æ®Tagç±»å‹çš„ä¸åŒå¯åˆ†ä¸ºä¸‰ç§ï¼ŒéŸ³é¢‘æ•°æ®ã€è§†é¢‘æ•°æ®å’Œè„šæœ¬æ•°æ®ã€‚</p>
<h4 id="2-2-1-éŸ³é¢‘æ•°æ®"><a href="#2-2-1-éŸ³é¢‘æ•°æ®" class="headerlink" title="2.2.1.éŸ³é¢‘æ•°æ®"></a>2.2.1.éŸ³é¢‘æ•°æ®</h4><p>ç¬¬ä¸€ä¸ªbyteæ˜¯éŸ³é¢‘çš„ä¿¡æ¯ï¼Œæ ¼å¼å¦‚ä¸‹ã€‚</p>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>é•¿åº¦</th>
<th>ä»‹ç»</th>
</tr>
</thead>
<tbody>
<tr>
<td>éŸ³é¢‘æ ¼å¼</td>
<td>4 bits</td>
<td>0 = Linear PCM, platform endian,1 = ADPCM,2 = MP3,3 = Linear PCM, little endian,4 = Nellymoser 16-kHz mono,5 = Nellymoser 8-kHz mono,6 = Nellymoser,7 = G.711 A-law logarithmic PCM,8 = G.711 mu-law logarithmic PCM,9 = reserved,10 = AAC,11 = Speex,14 = MP3 8-Khz,15 = Device-specific sound</td>
</tr>
<tr>
<td>é‡‡æ ·ç‡</td>
<td>2 bits</td>
<td>0 = 5.5-kHz,1 = 11-kHz,2 = 22-kHz,3 = 44-kHz,å¯¹äºAACæ€»æ˜¯3</td>
</tr>
<tr>
<td>é‡‡æ ·çš„é•¿åº¦</td>
<td>1 bit</td>
<td>0 = snd8Bit,1 = snd16Bit,å‹ç¼©è¿‡çš„éŸ³é¢‘éƒ½æ˜¯16bit</td>
</tr>
<tr>
<td>éŸ³é¢‘ç±»å‹</td>
<td>1 bit</td>
<td>0 = sndMono,1 = sndStereo,å¯¹äºAACæ€»æ˜¯1</td>
</tr>
</tbody>
</table>
<p>ç¬¬2byteå¼€å§‹å°±æ˜¯éŸ³é¢‘æµæ•°æ®äº†ã€‚</p>
<h4 id="2-2-2-è§†é¢‘æ•°æ®"><a href="#2-2-2-è§†é¢‘æ•°æ®" class="headerlink" title="2.2.2.è§†é¢‘æ•°æ®"></a>2.2.2.è§†é¢‘æ•°æ®</h4><p>å’ŒéŸ³é¢‘æ•°æ®ä¸€æ ·ï¼Œç¬¬ä¸€ä¸ªbyteæ˜¯è§†é¢‘ä¿¡æ¯ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>é•¿åº¦</th>
<th>ä»‹ç»</th>
</tr>
</thead>
<tbody>
<tr>
<td>å¸§ç±»å‹</td>
<td>4 bits</td>
<td>1: keyframe (for AVC, a seekable frame)</td>
</tr>
</tbody>
</table>
<p>2: inter frame (for AVC, a non-seekable frame)<br>3: disposable inter frame (H.263 only)<br>4: generated keyframe (reserved for server use only)<br>5: video info/command frame|<br>|ç¼–ç ID    |4 bits    |1: JPEG (currently unused)<br>2: Sorenson H.263<br>3: Screen video<br>4: On2 VP6<br>5: On2 VP6 with alpha channel<br>6: Screen video version 2<br>7: AVC|</p>
<h4 id="2-2-3è„šæœ¬æ•°æ®"><a href="#2-2-3è„šæœ¬æ•°æ®" class="headerlink" title="2.2.3è„šæœ¬æ•°æ®"></a>2.2.3è„šæœ¬æ•°æ®</h4><p>è„šæœ¬Tagä¸€èˆ¬åªæœ‰ä¸€ä¸ªï¼Œæ˜¯flvçš„ç¬¬ä¸€ä¸ªTagï¼Œç”¨äºå­˜æ”¾flvçš„ä¿¡æ¯ï¼Œæ¯”å¦‚durationã€audiodatarateã€creatorã€widthç­‰ã€‚<br>é¦–å…ˆä»‹ç»ä¸‹è„šæœ¬çš„æ•°æ®ç±»å‹ã€‚æ‰€æœ‰æ•°æ®éƒ½æ˜¯ä»¥æ•°æ®ç±»å‹+ï¼ˆæ•°æ®é•¿åº¦ï¼‰+æ•°æ®çš„æ ¼å¼å‡ºç°çš„ï¼Œæ•°æ®ç±»å‹å 1byteï¼Œæ•°æ®é•¿åº¦çœ‹æ•°æ®ç±»å‹æ˜¯å¦å­˜åœ¨ï¼Œåé¢æ‰æ˜¯æ•°æ®ã€‚<br>å…¶ä¸­æ•°æ®ç±»å‹çš„ç§ç±»æœ‰ï¼š</p>
<ul>
<li>0 = Number type</li>
<li>1 = Boolean type</li>
<li>2 = String type</li>
<li>3 = Object type</li>
<li>4 = MovieClip type</li>
<li>5 = Null type</li>
<li>6 = Undefined type</li>
<li>7 = Reference type</li>
<li>8 = ECMA array type</li>
<li>10 = Strict array type</li>
<li>11 = Date type</li>
<li>12 = Long string type</li>
</ul>
<p>å¦‚æœç±»å‹ä¸ºStringï¼Œåé¢çš„2bytesä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆLong Stringæ˜¯4bytesï¼‰ï¼Œå†åé¢æ‰æ˜¯å­—ç¬¦ä¸²æ•°æ®ï¼›å¦‚æœæ˜¯Numberç±»å‹ï¼Œåé¢çš„8bytesä¸ºDoubleç±»å‹çš„æ•°æ®ï¼›Booleanç±»å‹ï¼Œåé¢1byteä¸ºBoolç±»å‹ã€‚</p>
<p>çŸ¥é“äº†è¿™äº›åå†æ¥çœ‹çœ‹flvä¸­çš„è„šæœ¬ï¼Œä¸€èˆ¬å¼€å¤´æ˜¯0x02ï¼Œè¡¨ç¤ºStringç±»å‹ï¼Œåé¢çš„2bytesä¸ºå­—ç¬¦ä¸²é•¿åº¦ï¼Œä¸€èˆ¬æ˜¯0x000aï¼ˆâ€œonMetaDataâ€çš„é•¿åº¦ï¼‰ï¼Œå†åé¢å°±æ˜¯å­—ç¬¦ä¸²â€œonMetaDataâ€ã€‚å¥½åƒflvæ ¼å¼çš„æ–‡ä»¶éƒ½æœ‰onMetaDataæ ‡è®°ï¼Œåœ¨è¿è¡ŒActionScriptçš„æ—¶å€™ä¼šç”¨åˆ°å®ƒã€‚åé¢è·Ÿçš„æ˜¯0x08ï¼Œè¡¨ç¤ºECMA Arrayç±»å‹ï¼Œè¿™ä¸ªå’ŒMapæ¯”è¾ƒç›¸ä¼¼ï¼Œä¸€ä¸ªé”®è·Ÿç€ä¸€ä¸ªå€¼ã€‚é”®éƒ½æ˜¯Stringç±»å‹çš„ï¼Œæ‰€ä»¥å¼€å¤´çš„0x02è¢«çœç•¥äº†ï¼Œç›´æ¥è·Ÿç€çš„æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œç„¶åæ˜¯å­—ç¬¦ä¸²ï¼Œå†æ˜¯å€¼çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ä»‹ç»çš„é‚£äº›äº†ã€‚</p>
<h2 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3.æ€»ç»“"></a>3.æ€»ç»“</h2><p>flvçš„æ ¼å¼è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œheaderéƒ¨åˆ†å¾ˆç®€æ´ï¼Œbodyéƒ¨åˆ†éƒ½æ˜¯ç”±ä¸€ä¸ªä¸ªtagï¼Œtagçš„è¯ä¹Ÿå°±ä¸‰ç§ï¼Œè„šæœ¬tagä¸€èˆ¬åªæœ‰ä¸€ä¸ªçš„ï¼Œæˆ‘æƒ³è¿™ä¹Ÿæ˜¯flvèƒ½æˆä¸ºåœ¨çº¿è§†é¢‘æ ¼å¼çš„åŸå› å§ã€‚åªè¦äº†è§£äº†æ ¼å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™ä¸ªç¨‹åºæ¥è§£æflvæ–‡ä»¶äº†ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä¸‹ä¸€æ­¥è¦åšçš„ã€‚<br>æœ€åé™„ä¸Šflvå®˜æ–¹æ‰‹å†Œï¼švideo_file_format_spec_v10</p>
]]></content>
      
        <categories>
            
            <category> åŸºç¡€ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æµåª’ä½“ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSæ€§èƒ½ä¼˜åŒ–æ¦‚è¿°]]></title>
      <url>/2016/07/21/2016/iOS%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%A6%82%E8%BF%B0/</url>
      <content type="html"><![CDATA[<h2 id="å“åº”é€Ÿåº¦ä¸è¿è¡Œé€Ÿåº¦"><a href="#å“åº”é€Ÿåº¦ä¸è¿è¡Œé€Ÿåº¦" class="headerlink" title="å“åº”é€Ÿåº¦ä¸è¿è¡Œé€Ÿåº¦"></a>å“åº”é€Ÿåº¦ä¸è¿è¡Œé€Ÿåº¦</h2><p>å“åº”é€Ÿåº¦å’Œè¿è¡Œé€Ÿåº¦ä¹‹é—´æœ‰ç€å¾®å¦™çš„åŒºåˆ«ï¼Œå“åº”é€Ÿåº¦æ˜¯æŒ‡ç›‘å¬ç”¨æˆ·è¾“å…¥åˆ°åé¦ˆç”¨æˆ·çš„é€Ÿåº¦ï¼Œè€Œè¿è¡Œé€Ÿåº¦æ˜¯æŒ‡å¤„ç†ä»»åŠ¡çš„é€Ÿåº¦ã€‚<br><a id="more"></a><br>ç”¨æˆ·éƒ½è®¨åŒç­‰å¾…ï¼Œæ‰€ä»¥ä½ ä¼šè¯´è®©Appè¿è¡Œçš„æ›´å¿«éå¸¸é‡è¦ã€‚ç¡®å®å¦‚æ­¤ï¼Œä½†æ˜¯è¿è¡Œé€Ÿåº¦çš„æå‡æœ‰ä¸€ä¸ªè¾¹ç•Œï¼Œå‡å¦‚æ•°æ®è¦é€šè¿‡ç½‘ç»œä¸‹è½½ï¼Œæˆ–è€…è¦è¿›è¡Œå¤æ‚çš„è®¡ç®—å’Œæ¸²æŸ“ï¼Œé‚£ä¹ˆAppä¸å¯èƒ½ç«‹å³æ˜¾ç¤ºè¿™äº›å†…å®¹ã€‚è¿™ç§æƒ…å†µä¸‹ç”¨æˆ·å®é™…ä¸Šè¿˜æ˜¯æ„¿æ„ç­‰å¾…çš„ï¼Œä½†æ˜¯ä½ è¦é’ˆå¯¹ä»–ä»¬çš„æ“ä½œç»™å‡ºå³æ—¶çš„å“åº”ï¼Œè¿™ç§å“åº”å¯ä»¥æ˜¯ç®€å•çš„æŒ‰é’®çŠ¶æ€çš„æ”¹å˜ä¹Ÿå¯ä»¥æ˜¯å¤æ‚çš„åŠ¨ç”»æ•ˆæœã€‚è®©Appè¿è¡Œæ›´å¿«å¾ˆé‡è¦ï¼Œè®©å…¶è¿…é€Ÿå“åº”åŒæ ·é‡è¦ã€‚<br>ä½¿ç”¨ç°å®ä¸­çœŸå®çš„æŒ‰é’®å’Œå¼€å…³æ—¶ä¼šè®©äººæ„Ÿè§‰é è°±ï¼Œå½“æŒ‰ä¸‹æŒ‰é’®æˆ–è€…æ‰“å¼€å¼€å…³æ—¶ä½ å¯ä»¥ç™¾åˆ†ç™¾ç¡®å®šä½ è¿›è¡Œäº†æ“ä½œã€‚ä½†æ˜¯åœ¨è§¦æ‘¸å±ä¸Šä½ æ— æ³•æ„ŸçŸ¥ï¼Œæ‰€ä»¥è§†è§‰å“åº”éå¸¸é‡è¦ã€‚å¦‚æœä¸€ä¸ªAppä¸èƒ½æä¾›è¿™ç§å³æ—¶çš„å“åº”é‚£ä½“éªŒå°†å˜å¾—éå¸¸ç³Ÿç³•ï¼Œæ›´å…·ä½“ç‚¹è¯´å°±æ˜¯å“åº”æ—¶é—´ä¸è¦è¶…è¿‡ä¸‰åˆ†ä¹‹ä¸€ç§’ã€‚å½“ä½ ç‚¹å‡»äº†æŸä¸ªä½ç½®ä½†æ˜¯æ²¡æœ‰ä»»ä½•äº‹æƒ…å‘ç”Ÿï¼Œä½ ä¼šè‡ªç„¶è€Œç„¶çš„è®¤ä¸ºç‚¹å‡»æœ‰å¯èƒ½æ²¡æœ‰è¢«æ¥å—ã€‚ç»å¤§å¤šæ•°äººåœ¨è¿™æ—¶ä¼šå†ç‚¹å‡»ä¸€æ¬¡ï¼Œè¿™å¯èƒ½é€ æˆé‡å¤çš„æ“ä½œã€‚</p>
<p>å…³äºå“åº”é€Ÿåº¦çš„ä¸‰ä¸ªåŸåˆ™ï¼š</p>
<ul>
<li>è¿…é€Ÿå›é¦ˆç”¨æˆ·ä»–çš„æ“ä½œå·²ç»è¢«æ¥å—ï¼Œç„¶åè¿…é€Ÿæ‰§è¡Œã€‚ä¾‹å¦‚ç‚¹å‡»æŒ‰é’®æ—¶æä¾›ä¸€ä¸ªtouch-downçŠ¶æ€å‘ˆç°ç»™ç”¨æˆ·ã€‚</li>
<li>å…è®¸ç”¨æˆ·ä»»æ„æ—¶åˆ»ä¸­æ–­</li>
<li>å½“è€—æ—¶æ“ä½œè¿›è¡Œæ—¶ï¼Œåé¦ˆç”¨æˆ·ä¸€ä¸ªè¿›åº¦</li>
</ul>
<p>é’ˆå¯¹ä¸Šè¾¹æå‡ºçš„é—®é¢˜ï¼Œç»™äºˆçŠ¶æ€æç¤ºæ˜¯UIå±‚é¢çš„äº‹æƒ…ï¼Œæ¯”è¾ƒå®¹æ˜“åšåˆ°ï¼Œä½†æ˜¯å¦‚æœä¿è¯æ— è®ºä»»ä½•æ—¶å€™ç”¨æˆ·çš„æ“ä½œå’Œè§¦æ‘¸äº‹ä»¶éƒ½èƒ½å¾—åˆ°ç«‹åˆ»çš„å“åº”å‘¢ï¼Ÿ</p>
<h3 id="runloopä¸ç”¨æˆ·äº‹ä»¶å“åº”"><a href="#runloopä¸ç”¨æˆ·äº‹ä»¶å“åº”" class="headerlink" title="runloopä¸ç”¨æˆ·äº‹ä»¶å“åº”"></a>runloopä¸ç”¨æˆ·äº‹ä»¶å“åº”</h3><p>åœ¨æ¯æ¬¡çš„runloopä¸­ï¼Œéœ€è¦å¤„ç†ä¸‹è¾¹å‡ ç§äº‹ä»¶ï¼š</p>
<ul>
<li>handlePortï¼šè·¨çº¿ç¨‹é€šä¿¡çš„ä¸€äº›æ¶ˆæ¯</li>
<li>customSrc: è¢«æ ‡è®°ä¸ºUIå¾…å¤„ç†çš„äº‹ä»¶</li>
<li>mySelectorï¼šæœ¬çº¿ç¨‹æ–¹æ³•çš„è°ƒç”¨</li>
<li>timerFiredï¼šå®šæ—¶å™¨</li>
</ul>
<p>å½“æˆ‘ä»¬ç¨‹åºå¯åŠ¨å®Œä¹‹åï¼ŒåŸºæœ¬ä¸Šçº¿ç¨‹å°±æ²¡æœ‰ä»€ä¹ˆäº‹æƒ…è¦å¤„ç†äº†ï¼Œè¿™ä¸ªæ—¶å€™èƒ½å¤Ÿåšå‡ºæ”¹å˜è¿™ä¸ªçŠ¶æ€çš„äº‹ç‰©æœ‰ä¸‹è¾¹è¿™å‡ ç§ï¼š</p>
<ul>
<li>ç”¨æˆ·æ‰‹åŠ¿äº‹ä»¶ï¼Œç‚¹ä¸€ä¸‹æˆ–è€…æ‹–ä¸€ä¸‹</li>
<li>ç³»ç»Ÿæ¶ˆæ¯ï¼Œæ¥ç”µè¯ç­‰</li>
</ul>
<p>å…·ä½“çš„ä¸¤ç§å¦‚ä¸‹é¢æ‰€æè¿°ï¼š</p>
<ul>
<li><p>ç•Œé¢åˆ·æ–°ï¼š å½“UIæ”¹å˜ï¼ˆ Frameå˜åŒ–ã€ UIView/CALayer çš„ç»§æ‰¿ç»“æ„å˜åŒ–ç­‰ï¼‰æ—¶ï¼Œæˆ–æ‰‹åŠ¨è°ƒç”¨äº† UIView/CALayer çš„ setNeedsLayout/setNeedsDisplayæ–¹æ³•åï¼Œè¿™ä¸ª UIView/CALayer å°±è¢«æ ‡è®°ä¸ºå¾…å¤„ç†ã€‚ è‹¹æœæ³¨å†Œäº†ä¸€ä¸ªç”¨æ¥ç›‘å¬BeforeWaitingå’ŒExitçš„Observerï¼Œåœ¨å®ƒçš„å›è°ƒå‡½æ•°é‡Œä¼šéå†æ‰€æœ‰å¾…å¤„ç†çš„ UIView/CAlayer ä»¥æ‰§è¡Œå®é™…çš„ç»˜åˆ¶å’Œè°ƒæ•´ï¼Œå¹¶æ›´æ–° UI ç•Œé¢ã€‚</p>
</li>
<li><p>æ‰‹åŠ¿è¯†åˆ«ï¼š å¦‚æœä¸Šä¸€æ­¥çš„ _UIApplicationHandleEventQueue() è¯†åˆ«åˆ°æ˜¯ä¸€ä¸ªguestureæ‰‹åŠ¿ï¼Œä¼šè°ƒç”¨Cancelæ–¹æ³•å°†å½“å‰çš„touchesBegin/Move/End ç³»åˆ—å›è°ƒæ‰“æ–­ã€‚éšåç³»ç»Ÿå°†å¯¹åº”çš„ UIGestureRecognizer æ ‡è®°ä¸ºå¾…å¤„ç†ã€‚ è‹¹æœæ³¨å†Œäº†ä¸€ä¸ª Observer ç›‘æµ‹ BeforeWaiting (Loopå³å°†è¿›å…¥ä¼‘çœ ) äº‹ä»¶ï¼Œå…¶å›è°ƒå‡½æ•°ä¸º _UIGestureRecognizerUpdateObserver()ï¼Œå…¶å†…éƒ¨ä¼šè·å–æ‰€æœ‰åˆšè¢«æ ‡è®°ä¸ºå¾…å¤„ç†çš„ GestureRecognizerï¼Œå¹¶æ‰§è¡ŒGestureRecognizerçš„å›è°ƒã€‚ å½“æœ‰ UIGestureRecognizer çš„å˜åŒ–(åˆ›å»º/é”€æ¯/çŠ¶æ€æ”¹å˜)æ—¶ï¼Œè¿™ä¸ªå›è°ƒéƒ½ä¼šè¿›è¡Œç›¸åº”å¤„ç†ã€‚</p>
</li>
</ul>
<blockquote>
<p>æ€»çš„æ¥è®²ï¼Œå¹¶ä¸æ˜¯å½“ç”¨æˆ·è§¦å‘ä¸€ä¸ªäº‹ä»¶çš„æ—¶å€™è¿™ä¸ªäº‹ä»¶å°±ä¼šè¢«é©¬ä¸Šæ‰§è¡Œï¼Œè€Œæ˜¯è¿™ä¸ªäº‹ä»¶ä¼šè¢«æ ‡è®°ï¼ŒåŠ å…¥è¢«æ‰§è¡Œçš„äº‹ä»¶é˜Ÿåˆ—ï¼Œç„¶åç­‰å¾…runloopä»è¿™ä¸ªäº‹ä»¶é˜Ÿåˆ—ä¸­å–å‡ºæ¥äº‹ä»¶ï¼Œç„¶åæ‰§è¡Œã€‚<br>ç°åœ¨å‡å¦‚è¯´ï¼Œä½ æœ‰ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œè¿™ä¸ªæ—¶å€™è¿™ä¸ªäº‹ä»¶è¢«åŠ å…¥åˆ°å¾…æ‰§è¡Œçš„äº‹ä»¶ä¸­ï¼Œå¦‚æœå‰è¾¹æœ‰ä¸€ç³»åˆ—çš„äº‹ä»¶è¦åšï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹ä»¶å°±è¦æ’é˜Ÿï¼Œç°è±¡å°±æ˜¯ï¼Œä½ å‘ç°ä½ ç‚¹å®Œä¹‹åæ²¡æœ‰ä»»ä½•çš„ååº”ã€‚<br><code>[self performSelector:@selector(perform4) withObject:nil afterDelay:0.005];</code>åˆ©ç”¨è¯¥æ–¹æ³•å°†å¤§æ®µçš„æ–¹æ³•è¿›è¡Œæ‹†åˆ†ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ç”¨æˆ·äº‹ä»¶çš„å“åº”ã€‚</p>
</blockquote>
<h2 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h2><h3 id="è¿è¡Œæ—¶é—´"><a href="#è¿è¡Œæ—¶é—´" class="headerlink" title="è¿è¡Œæ—¶é—´"></a>è¿è¡Œæ—¶é—´</h3><p>å‰è¾¹æˆ‘ä»¬ä¿è¯äº†å“åº”é€Ÿåº¦ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼Œå¦‚ä½•åŠ å¿«æ‰§è¡Œçš„é€Ÿåº¦ã€‚<br>åŸºæœ¬ä¸Šæˆ‘ä»¬èƒ½å¤Ÿä¾èµ–çš„å°±æ˜¯Time Profilerï¼Œ</p>
<h3 id="æ¸²æŸ“é€Ÿåº¦"><a href="#æ¸²æŸ“é€Ÿåº¦" class="headerlink" title="æ¸²æŸ“é€Ÿåº¦"></a>æ¸²æŸ“é€Ÿåº¦</h3><p>ä¸å¹¸çš„æ˜¯Time Profilerä¸èƒ½æ‰¾å‡ºæ‰€æœ‰çš„æ€§èƒ½é—®é¢˜ã€‚å½“ä½ çš„Appçš„å¸§ç‡æ‰åˆ°60ï¼ˆå¸§/ç§’ï¼‰ä»¥ä¸‹ä½ çš„Appå°±æ„Ÿè§‰è¿è¡Œå¾—ä¸æ˜¯é‚£ä¹ˆå¹³æ»‘äº†ã€‚ä½å¸§ç‡å¯¼è‡´æ»šåŠ¨è§†å›¾å’ŒåŠ¨ç”»å¡é¡¿ã€‚<br>ã€€ã€€å¸§ç‡ä¸‹é™é€šå¸¸æ„å‘³ç€iPadçš„æ¸²æŸ“é€Ÿåº¦è·Ÿä¸ä¸Šã€‚è§†è§‰ä¸Šè¾ƒä¸ºç†æƒ³çš„å¸§ç‡ä¸ä½äº60ï¼ˆå¸§/ç§’ï¼‰ï¼Œæ„å‘³ç€æ¯ä¸€å¸§åº”è¯¥åœ¨å…­ååˆ†ä¹‹ä¸€ç§’å†…æ¸²æŸ“å®Œã€‚</p>
<p><img src="http://i2.piimg.com/567571/8a0a7cd7094e8ce0.png" alt=""><br>åŸºæœ¬ä¸Šæˆ‘ä»¬ä½¿ç”¨ä¸Šè¾¹è¿™äº›é€‰é¡¹æ¥æŸ¥æ‰¾å½±å“æ¸²æŸ“çš„å› ç´ ã€‚</p>
<h4 id="color-blended-layers"><a href="#color-blended-layers" class="headerlink" title="color blended layers"></a>color blended layers</h4><p>æˆ‘ä»¬çŸ¥é“GPUæ˜¯å›¾å½¢ç¡¬ä»¶ï¼Œä¸»è¦çš„å·¥ä½œæ˜¯æ··åˆçº¹ç†å¹¶ç®—å‡ºåƒç´ çš„RGBå€¼ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„è®¡ç®—è¿‡ç¨‹ï¼Œè®¡ç®—çš„è¿‡ç¨‹è¶Šå¤æ‚ï¼Œæ‰€éœ€è¦æ¶ˆè€—çš„æ—¶é—´å°±è¶Šé•¿ï¼ŒGPUçš„ä½¿ç”¨ç‡å°±è¶Šé«˜ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„ç°åƒï¼Œè€Œæˆ‘ä»¬éœ€è¦åšçš„æ˜¯å‡å°‘GPUçš„è®¡ç®—é‡ã€‚<br>æˆ‘ä»¬åœ¨è¿™ä¸ªå›¾å±‚ä¸Šæ”¾ç½®ä¸€ä¸ªå®Œå…¨ä¸é€æ˜çš„å›¾å±‚ï¼Œé‚£ä¹ˆGPUå°†ä¼šæŠŠä¸Šé¢çš„å›¾å±‚åˆæˆåˆ°ä¸‹é¢çš„å›¾å±‚å½“ä¸­ï¼Œç”±äºä¸Šé¢çš„æ˜¯ä¸€ä¸ªå®Œå…¨ä¸é€æ˜çš„å›¾å±‚ï¼Œæ‰€ä»¥ä¸Šé¢çš„å›¾å±‚ä¼šéƒ¨ä»½é®ç›–æ‰ä¸‹é¢çš„å›¾å±‚ï¼Œè€Œåœ¨é®ç›–æ‰çš„çŸ©å½¢åŒºåŸŸå†…ï¼ŒGPUä¼šç›´æ¥ä½¿ç”¨ä¸Šé¢å›¾å±‚çš„åƒç´ æ¥æ˜¾ç¤ºã€‚å¦‚æœæˆ‘ä»¬æœ€åº•çš„å›¾å±‚ä¸Šæ”¾ç½®çš„æ˜¯ä¸€ä¸ªæœ‰é€æ˜åº¦çš„å›¾å±‚ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªçŸ©å½¢åŒºåŸŸé‡Œï¼ŒGPUéœ€è¦æ··åˆä¸Šä¸‹ä¸¤ä¸ªå›¾å±‚æ¥è®¡ç®—å‡ºåœ¨å±å¹•ä¸Šæ˜¾ç¤ºå‡ºæ¥çš„åƒç´ çš„RGBå€¼ã€‚è‹¥åœ¨åŒä¸€ä¸ªåŒºåŸŸå†…ï¼Œå­˜åœ¨ç€å¤šä¸ªæœ‰é€æ˜åº¦çš„å›¾å±‚ï¼Œé‚£ä¹ˆGPUéœ€è¦æ›´å¤šçš„è®¡ç®—æ‰èƒ½å¾—å‡ºæœ€ç»ˆåƒç´ çš„RGBå€¼ã€‚è€Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯é¿å…åƒç´ æ··åˆï¼Œå°½å¯èƒ½åœ°ä¸ºè§†å›¾è®¾ç½®èƒŒæ™¯è‰²ï¼Œä¸”è®¾ç½®opaqueä¸ºYESï¼Œè¿™ä¼šå¤§å¤§å‡å°‘GPUçš„è®¡ç®—ã€‚<br>ä»¥labelä¸ºä¾‹<br><img src="http://i2.piimg.com/567571/324a6b489d2c6fa0.png" alt=""><br>ä¸Šè¾¹ä¸ºä¸é€æ˜ï¼Œä¸‹è¾¹ä¸ºé€æ˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¾—åˆ°çš„ç»“æœæ˜¯ä¸‹è¾¹æ··åˆä¸¥é‡<br>ä¸Šè¾¹ä¸ºiOS7çš„æƒ…å†µï¼Œé‚£ä¹ˆiOS8å‘¢<br><img src="http://i1.piimg.com/567571/10dcf06a1af655ab.png" alt=""><br>è™½ç„¶è®¾ç½®äº†èƒŒæ™¯è‰²ï¼Œä½†åœ¨iOS8ä¸Šç”¨UILabelæ˜¾ç¤ºä¸­æ–‡å´å‡ºç°äº†åƒç´ æ··åˆçš„æƒ…å†µï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹çœ‹UILabelåœ¨iOS8å‰åçš„å˜åŒ–ï¼Œåœ¨iOS8ä»¥å‰ï¼ŒUILabelä½¿ç”¨çš„æ˜¯CALayerä½œä¸ºåº•å›¾å±‚ï¼Œè€Œåœ¨iOS8å¼€å§‹ï¼ŒUILabelçš„åº•å›¾å±‚å˜æˆäº†_UILabelLayerï¼Œç»˜åˆ¶æ–‡æœ¬ä¹Ÿæœ‰æ‰€æ”¹å˜ï¼Œå°±åƒä¸Šå›¾æ‰€è§†(åœ¨iOS8åˆšå‘å¸ƒçš„æ—¶å€™ï¼Œæˆ‘ä¸€åº¦æ€€ç–‘Appleæ­§è§†ä¸­æ–‡)ã€‚</p>
<p>é‚£æ€ä¹ˆè§£å†³å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬æ¥è§‚å¯Ÿä¸€ä¸‹ä¸Šå›¾ï¼Œä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨èƒŒæ™¯è‰²çš„å››å‘¨å¤šäº†ä¸€åœˆé€æ˜çš„è¾¹ï¼Œè€Œè¿™ä¸€åœˆé€æ˜çš„è¾¹æ˜æ˜¾è¶…å‡ºäº†å›¾å±‚çš„çŸ©å½¢åŒºåŸŸï¼Œæ—¢ç„¶å‘ç°è¿™äº†ä¸€ç‚¹ï¼Œé‚£ä¹ˆè§£å†³æ–¹æ¡ˆå°±å¾ˆæ˜äº†äº†ã€‚</p>
<p>è®¾ç½®å›¾å±‚çš„masksToBoundsä¸ºYESæ—¶ï¼Œå›¾å±‚å°†ä¼šæ²¿ç€Boundsè¿›è¡Œè£å‰ªï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¿®æ”¹åçš„æ•ˆæœã€‚æœ¨æœ‰é—®é¢˜äº†ã€‚<br>maskToboundséœ€è¦ä¸cornerRadiusç»“åˆæ‰ä¼šç¦»å±æ¸²æŸ“ï¼Œæ‰€ä»¥è¿™é‡Œå¹¶ä¸ä¼šå¯¼è‡´ç¦»å±æ¸²æŸ“ã€‚<br>å¯ä»¥çš„è¯ï¼Œè¦æ±‚ç¾å·¥åœ¨åˆ‡å›¾çš„æ—¶å€™ï¼Œä¸€å®šä¸è¦åˆ‡å‡ºé‚£äº›ç•™æœ‰é€æ˜åŒºåŸŸçš„å›¾ç‰‡ï¼Œä¸ç„¶åœ¨ä½ æ˜¾ç¤ºå›¾ç‰‡çš„æ—¶å€™ï¼ŒåŒæ ·ä¼šå‡ºç°åƒç´ æ··åˆé—®é¢˜ã€‚</p>
<h2 id="tableViewçš„ä¼˜åŒ–"><a href="#tableViewçš„ä¼˜åŒ–" class="headerlink" title="tableViewçš„ä¼˜åŒ–"></a>tableViewçš„ä¼˜åŒ–</h2><p>iOSå¹³å°å› ä¸ºUIKitæœ¬èº«çš„ç‰¹æ€§ï¼Œéœ€è¦å°†æ‰€æœ‰çš„UIæ“ä½œéƒ½æ”¾åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œæ‰€ä»¥æœ‰æ—¶å€™å°±ä¹ æƒ¯å°†ä¸€äº›çº¿ç¨‹å®‰å…¨æ€§ä¸ç¡®å®šçš„é€»è¾‘ï¼Œä»¥åŠå®ƒçº¿ç¨‹ç»“æŸåçš„æ±‡æ€»å·¥ä½œç­‰ç­‰æ”¾åˆ°äº†ä¸»çº¿ç¨‹ï¼Œæ‰€ä»¥ä¸»çº¿ç¨‹åŒ…å«å¤§é‡è®¡ç®—ã€IOã€ç»˜åˆ¶éƒ½æœ‰å¯èƒ½é€ æˆå¡é¡¿ã€‚</p>
<ul>
<li>å¯ä»¥é€šè¿‡ç›‘æ§runLoopç›‘æ§ç›‘æ§å¡é¡¿ï¼Œè°ƒç”¨æ–¹æ³•ä¸»è¦å°±æ˜¯åœ¨kCFRunLoopBeforeSourceså’ŒkCFRunLoopBeforeWaitingä¹‹é—´,è¿˜æœ‰kCFRunLoopAfterWaitingä¹‹å,ä¹Ÿå°±æ˜¯å¦‚æœæˆ‘ä»¬å‘ç°è¿™ä¸¤ä¸ªæ—¶é—´å†…è€—æ—¶å¤ªé•¿,é‚£ä¹ˆå°±å¯ä»¥åˆ¤å®šå‡ºæ­¤æ—¶ä¸»çº¿ç¨‹å¡é¡¿.</li>
<li>ä½¿ç”¨åˆ°CFRunLoopObserverRef,é€šè¿‡å®ƒå¯ä»¥å®æ—¶è·å¾—è¿™äº›çŠ¶æ€å€¼çš„å˜åŒ–</li>
<li>ç›‘æ§åå¦å¤–å†å¼€å¯ä¸€ä¸ªçº¿ç¨‹,å®æ—¶è®¡ç®—è¿™ä¸¤ä¸ªçŠ¶æ€åŒºåŸŸä¹‹é—´çš„è€—æ—¶æ˜¯å¦åˆ°è¾¾æŸä¸ªé˜€å€¼,ä¾¿èƒ½æªå‡ºè¿™äº›æ€§èƒ½æ€æ‰‹.</li>
<li><p>ç›‘æ§åˆ°äº†å¡é¡¿ç°åœº,å½“ç„¶ä¸‹ä¸€æ­¥ä¾¿æ˜¯è®°å½•æ­¤æ—¶çš„å‡½æ•°è°ƒç”¨ä¿¡æ¯,æ­¤å¤„å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹Crashæ”¶é›†ç»„ä»¶PLCrashReporter,å®ƒä¸ä»…å¯ä»¥æ”¶é›†Crashä¿¡æ¯ä¹Ÿå¯ç”¨äºå®æ—¶è·å–å„çº¿ç¨‹çš„è°ƒç”¨å †æ ˆ</p>
</li>
<li><p>å½“æ£€æµ‹åˆ°å¡é¡¿æ—¶,æŠ“å–å †æ ˆä¿¡æ¯,ç„¶ååœ¨å®¢æˆ·ç«¯åšä¸€äº›è¿‡æ»¤å¤„ç†,ä¾¿å¯ä»¥ä¸ŠæŠ¥åˆ°æœåŠ¡å™¨,é€šè¿‡æ”¶é›†ä¸€å®šé‡çš„å¡é¡¿æ•°æ®åç»è¿‡åˆ†æä¾¿èƒ½å‡†ç¡®å®šä½éœ€è¦ä¼˜åŒ–çš„é€»è¾‘</p>
</li>
<li><p>è®¾ç½®æ­£ç¡®çš„ reuseidentifer ä»¥é‡ç”¨ cell</p>
</li>
<li><p>å°½é‡å°† View è®¾ç½®ä¸ºä¸é€æ˜,åŒ…æ‹¬ cell æœ¬èº«ï¼ˆbackgroundcoloré»˜è®¤æ˜¯é€æ˜çš„ï¼‰ï¼Œå›¾å±‚æ··åˆé GPUå»æ¸²æŸ“,å¦‚æœé€æ˜åº¦è®¾ç½®ä¸º100%ï¼Œé‚£ä¹ˆGPUå°±ä¼šå¿½ç•¥ä¸‹é¢æ‰€æœ‰çš„layerï¼ŒèŠ‚çº¦äº†å¾ˆå¤šä¸å¿…è¦çš„è¿ç®—ã€‚æ¨¡æ‹Ÿå™¨ä¸Šç‚¹å‡»â€œDebugâ€èœå•ï¼Œç„¶åé€‰æ‹©â€œcolor Blended Layersâ€ï¼Œä¼šæŠŠæ‰€æœ‰åŒºåŸŸåˆ†æˆç»¿è‰²å’Œçº¢è‰²,ç»¿è‰²çš„å¥½,çº¢è‰²çš„æ€§èƒ½å·®ï¼ˆç»è¿‡æ··åˆæ¸²æŸ“çš„ï¼‰ï¼Œå½“ç„¶ä¹Ÿæœ‰ä¸€äº›å›¾ç‰‡è™½ç„¶æ˜¯ä¸é€æ˜çš„ï¼Œä½†æ˜¯ä¹Ÿä¼šæ˜¾ç¤ºçº¢è‰²ï¼Œå¦‚æœæ£€æŸ¥ä»£ç æ²¡é”™çš„è¯ï¼Œä¸€èˆ¬å°±æ˜¯å›¾ç‰‡è‡ªèº«çš„æ€§è´¨é—®é¢˜äº†ï¼Œç›´æ¥è”ç³»ç¾å·¥æˆ–åå°è§£å†³å°±å¥½äº†ã€‚é™¤éå¿…é¡»è¦ç”¨GPUåŠ è½½çš„ï¼Œå…¶ä»–æœ€å¥½è¦ç”¨CPUåŠ è½½ï¼Œå› ä¸ºCPUä¸€èˆ¬ä¸ä¼šç™¾åˆ†ç™¾åŠ è½½ï¼Œå¯ä»¥é€šè¿‡CoreGraphicsç”»å‡ºåœ†è§’</p>
</li>
<li><p>æœ‰æ—¶å€™ç¾å·¥å¤±è¯¯ï¼Œå›¾ç‰‡å¤§å°ç»™é”™äº†ï¼Œå¼•èµ·ä¸å¿…è¦çš„å›¾ç‰‡ç¼©æ”¾ï¼ˆå¯ä»¥æ‰¾ç¾å·¥å»æ”¹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¼‚æ­¥å»è£å‰ªå›¾ç‰‡ç„¶åç¼“å­˜ä¸‹æ¥ï¼‰ï¼Œè¿˜æ˜¯ä½¿ç”¨Instrumentçš„Color Misaligned Imagesï¼Œé»„è‰²è¡¨ç¤ºå›¾ç‰‡éœ€è¦ç¼©æ”¾ï¼Œç´«è‰²è¡¨ç¤ºæ²¡æœ‰åƒç´ å¯¹é½ã€‚å½“ç„¶ä¸€èˆ¬æƒ…å†µä¸‹å›¾ç‰‡æ ¼å¼ä¸ä¼šç»™é”™ï¼Œæœ‰äº›å›¾ç‰‡æ ¼å¼æ˜¯GPUä¸æ”¯æŒçš„ï¼Œå°±è¿˜è¦åŠ³çƒ¦CPUå»è¿›è¡Œæ ¼å¼è½¬æ¢ã€‚è¿˜æœ‰å¯ä»¥é€šè¿‡Color Offscreen-Rendered Yellowæ¥æ£€æµ‹ç¦»å±æ¸²æŸ“ï¼ˆå°±æ˜¯æŠŠæ¸²æŸ“ç»“æœä¸´æ—¶ä¿å­˜ï¼Œç­‰åˆ°ç”¨çš„æ—¶å€™å†å–å‡ºï¼Œè¿™æ ·ç›¸å¯¹äºæ™®é€šæ¸²æŸ“æ›´æ¶ˆè€—å†…å­˜ï¼Œä½¿ç”¨maskToBoundsã€è®¾ç½®shadowï¼Œé‡å†™drawRectæ–¹æ³•éƒ½ä¼šå¯¼è‡´ç¦»å±æ¸²æŸ“ï¼‰<br>é¿å…æ¸å˜ï¼ŒcornerRadiusåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå±æ€§åªä¼šå½±å“è§†å›¾çš„èƒŒæ™¯é¢œè‰²å’Œ borderï¼Œä½†æ˜¯ä¸ä¼šç¦»å±ç»˜åˆ¶ï¼Œä¸å½±å“æ€§èƒ½ã€‚ä¸ç”¨clipsToBoundsï¼ˆè¿‡å¤šè°ƒç”¨GPUå»ç¦»å±æ¸²æŸ“ï¼‰ï¼Œè€Œæ˜¯è®©åå°åŠ è½½å›¾ç‰‡å¹¶å¤„ç†åœ†è§’ï¼Œå¹¶å°†å¤„ç†è¿‡çš„å›¾ç‰‡èµ‹å€¼ç»™UIImageViewã€‚UIImageView çš„åœ†è§’é€šè¿‡ç›´æ¥æˆªå–å›¾ç‰‡å®ç°ï¼Œåœ†è§’è·¯å¾„ç›´æ¥ç”¨è´å¡å°”æ›²çº¿UIBezierPathç»˜åˆ¶ï¼ˆäººä¸ºæŒ‡å®šè·¯å¾„ä¹‹åå°±ä¸ä¼šè§¦å‘ç¦»å±æ¸²æŸ“ï¼‰ï¼ŒUIGraphicsBeginImageContextWithOptionsã€‚UIViewçš„åœ†è§’å¯ä»¥ä½¿ç”¨CoreGraphicsç”»å‡ºåœ†è§’çŸ©å½¢ï¼Œæ ¸å¿ƒæ˜¯CGContextAddArcToPoint å‡½æ•°ã€‚å®ƒä¸­é—´çš„å››ä¸ªå‚æ•°è¡¨ç¤ºæ›²çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹åæ ‡ï¼Œæœ€åä¸€ä¸ªå‚æ•°è¡¨ç¤ºåŠå¾„ã€‚è°ƒç”¨äº†å››æ¬¡å‡½æ•°åï¼Œå°±å¯ä»¥ç”»å‡ºåœ†è§’çŸ©å½¢ã€‚æœ€åå†ä»å½“å‰çš„ç»˜å›¾ä¸Šä¸‹æ–‡ä¸­è·å–å›¾ç‰‡å¹¶è¿”å›ï¼Œæœ€åæŠŠè¿™ä¸ªå›¾ç‰‡æ’å…¥åˆ°è§†å›¾å±‚çº§çš„åº•éƒ¨ã€‚<br>â€œFlash updated Regionsâ€ç”¨äºæ ‡è®°å‘ç”Ÿé‡ç»˜çš„åŒºåŸŸ</p>
</li>
<li><p>å¦‚æœ row çš„é«˜åº¦ä¸ç›¸åŒ,é‚£ä¹ˆå°†å…¶ç¼“å­˜ä¸‹æ¥</p>
</li>
<li>å¦‚æœ cell æ˜¾ç¤ºçš„å†…å®¹æ¥è‡ªç½‘ç»œ,é‚£ä¹ˆç¡®ä¿è¿™äº›å†…å®¹æ˜¯é€šè¿‡å¼‚æ­¥ä¸‹è½½</li>
<li>ä½¿ç”¨ shadowPath æ¥è®¾ç½®é˜´å½±ï¼Œå›¾å±‚æœ€å¥½ä¸è¦ä½¿ç”¨é˜´å½±,é˜´å½±ä¼šå¯¼è‡´ç¦»å±æ¸²æŸ“(åœ¨è¿›å…¥å±å¹•æ¸²æŸ“ä¹‹å‰,è¿˜çœ‹ä¸åˆ°çš„æ—¶å€™ä¼šå†æ¸²æŸ“ä¸€æ¬¡,å°½é‡ä¸è¦äº§ç”Ÿç¦»å±æ¸²æŸ“)</li>
<li>å‡å°‘ subview çš„æ•°é‡ï¼Œä¸è¦å»æ·»åŠ æˆ–ç§»é™¤viewï¼Œè¦å°±æ˜¾ç¤ºï¼Œä¸è¦å°±éšè—</li>
<li>åœ¨ cellForRowAtIndexPath ä¸­å°½é‡åšæ›´å°‘çš„æ“ä½œ,æœ€å¥½æ˜¯åœ¨åˆ«çš„åœ°æ–¹ç®—å¥½ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œåªåšæ•°æ®çš„æ˜¾ç¤ºï¼Œå¦‚æœéœ€è¦åšä¸€äº›å¤„ç†,é‚£ä¹ˆæœ€å¥½åšä¸€æ¬¡ä¹‹åå°†ç»“æœå‚¨å­˜èµ·æ¥.</li>
<li>ä½¿ç”¨é€‚å½“çš„æ•°æ®ç»“æ„æ¥ä¿å­˜éœ€è¦çš„ä¿¡æ¯,ä¸åŒçš„ç»“æ„ä¼šå¸¦æ¥ä¸åŒçš„æ“ä½œä»£ä»·</li>
<li>ä½¿ç”¨,rowHeight , sectionFooterHeight å’Œ sectionHeaderHeight æ¥è®¾ç½®ä¸€ä¸ªæ’å®šé«˜åº¦ , è€Œä¸æ˜¯ä»ä»£ç†(delegate)ä¸­è·å–</li>
<li>cellåšæ•°æ®ç»‘å®šçš„æ—¶å€™ï¼Œæœ€å¥½åœ¨willDisPlayCellé‡Œé¢è¿›è¡Œï¼Œå…¶ä»–æ“ä½œåœ¨cellForRowAtIndexPathï¼Œå› ä¸ºå‰è€…æ˜¯ç¬¬ä¸€é¡µæœ‰å¤šå°‘æ¡å°±æ‰§è¡Œå¤šå°‘æ¬¡ï¼Œåè€…æ˜¯ç¬¬ä¸€æ¬¡åŠ è½½æœ‰å¤šå°‘ä¸ªcellå°±æ‰§è¡Œå¤šå°‘æ¬¡ï¼Œè€Œä¸”è°ƒç”¨åè€…çš„æ—¶å€™cellè¿˜æ²¡æ˜¾ç¤º</li>
<li>è¯»å–æ–‡ä»¶,å†™å…¥æ–‡ä»¶,æœ€å¥½æ˜¯æ”¾åˆ°å­çº¿ç¨‹,æˆ–å…ˆè¯»å–å¥½,åœ¨è®©tableViewå»æ˜¾ç¤º</li>
<li>tableViewæ»šåŠ¨çš„æ—¶å€™,ä¸è¦å»åšåŠ¨ç”»(å¾®ä¿¡çš„èŠå¤©ç•Œé¢åšçš„å°±å¾ˆå¥½,åœ¨æ»šåŠ¨çš„æ—¶å€™,åŠ¨æ€å›¾å°±ä¸è®©ä»–åŠ¨,æ»šåŠ¨åœæ­¢çš„æ—¶å€™æ‰åŠ¨,ä¸ç„¶å¯èƒ½ä¼šæœ‰ç‚¹å½±å“æµç•…åº¦)ã€‚åœ¨æ»šåŠ¨çš„æ—¶å€™åŠ è½½å›¾ç‰‡ï¼Œåœæ­¢æ‹–æ‹½ååœ¨å‡é€Ÿè¿‡ç¨‹ä¸­ä¸åŠ è½½å›¾ç‰‡ï¼Œå‡é€Ÿåœæ­¢ååŠ è½½å¯è§èŒƒå›´å†…å›¾ç‰‡</li>
</ul>
<h2 id="ä»£ç ä¼˜åŒ–checkList"><a href="#ä»£ç ä¼˜åŒ–checkList" class="headerlink" title="ä»£ç ä¼˜åŒ–checkList"></a>ä»£ç ä¼˜åŒ–checkList</h2><h3 id="2-3-æå‰è°ƒæ•´ImageViewä¸­çš„å›¾ç‰‡å¤§å°ï¼ˆåŒå›¾ç‰‡å’ŒåŠ¨ç”»çš„æ¸²æŸ“ï¼‰"><a href="#2-3-æå‰è°ƒæ•´ImageViewä¸­çš„å›¾ç‰‡å¤§å°ï¼ˆåŒå›¾ç‰‡å’ŒåŠ¨ç”»çš„æ¸²æŸ“ï¼‰" class="headerlink" title="2.3 æå‰è°ƒæ•´ImageViewä¸­çš„å›¾ç‰‡å¤§å°ï¼ˆåŒå›¾ç‰‡å’ŒåŠ¨ç”»çš„æ¸²æŸ“ï¼‰"></a>2.3 æå‰è°ƒæ•´ImageViewä¸­çš„å›¾ç‰‡å¤§å°ï¼ˆåŒå›¾ç‰‡å’ŒåŠ¨ç”»çš„æ¸²æŸ“ï¼‰</h3><p>å¦‚æœè¦åœ¨UIImageViewä¸­æ˜¾ç¤ºä¸€ä¸ªå›¾ç‰‡ï¼Œä½ åº”ä¿è¯å›¾ç‰‡çš„å¤§å°å’ŒUIImageViewçš„å¤§å°ç›¸åŒã€‚<br>å› ä¸ºåœ¨è¿è¡Œä¸­ç¼©æ”¾å›¾ç‰‡æ˜¯å¾ˆè€—è´¹èµ„æºçš„ï¼Œç‰¹åˆ«æ˜¯UIImageViewåµŒå¥—åœ¨UIScrollViewä¸­çš„æƒ…å†µä¸‹ã€‚</p>
<p>å¦‚æœå›¾ç‰‡æ˜¯ä»è¿œç«¯æœåŠ¡åŠ è½½çš„ä½ ä¸èƒ½æ§åˆ¶å›¾ç‰‡å¤§å°ï¼Œæ¯”å¦‚åœ¨ä¸‹è½½å‰è°ƒæ•´åˆ°åˆé€‚å¤§å°çš„è¯ï¼Œä½ å¯ä»¥åœ¨ä¸‹è½½å®Œæˆåï¼Œæœ€å¥½æ˜¯ç”¨background threadï¼Œç¼©æ”¾ä¸€æ¬¡ï¼Œç„¶ååœ¨UIImageViewä¸­ä½¿ç”¨ç¼©æ”¾åçš„å›¾ç‰‡ã€‚</p>
<p>è¿™ä¸ªç±»æ¯”åˆ°å›¾ç‰‡å’ŒåŠ¨ç”»çš„æ¸²æŸ“ä¸­ï¼Œæ˜¯é€šç”¨çš„ã€‚</p>
<p>å…·ä½“æ–¹æ³•å‚è€ƒä¸Šé¢çš„GCDæ“ä½œã€‚</p>
<h3 id="2-4-æ­£ç¡®ä½¿ç”¨å®¹å™¨çš„ç‰¹æ€§"><a href="#2-4-æ­£ç¡®ä½¿ç”¨å®¹å™¨çš„ç‰¹æ€§" class="headerlink" title="2.4 æ­£ç¡®ä½¿ç”¨å®¹å™¨çš„ç‰¹æ€§"></a>2.4 æ­£ç¡®ä½¿ç”¨å®¹å™¨çš„ç‰¹æ€§</h3><p>Arrays: æœ‰åºçš„ä¸€ç»„å€¼ã€‚ä½¿ç”¨indexæ¥æŸ¥æ‰¾å¾ˆå¿«ï¼Œä½¿ç”¨value æŸ¥æ‰¾å¾ˆæ…¢ï¼Œ æ’å…¥/åˆ é™¤å¾ˆæ…¢ã€‚ Dictionaries: å­˜å‚¨é”®å€¼å¯¹ã€‚ ç”¨é”®æ¥æŸ¥æ‰¾æ¯”è¾ƒå¿«ã€‚ Sets: æ— åºçš„ä¸€ç»„å€¼ã€‚ç”¨å€¼æ¥æŸ¥æ‰¾å¾ˆå¿«ï¼Œæ’å…¥/åˆ é™¤å¾ˆå¿«ã€‚ </p>
<h3 id="2-5-å¤§æ–‡ä»¶ä¼ è¾“ä½¿ç”¨gzip"><a href="#2-5-å¤§æ–‡ä»¶ä¼ è¾“ä½¿ç”¨gzip" class="headerlink" title="2.5 å¤§æ–‡ä»¶ä¼ è¾“ä½¿ç”¨gzip"></a>2.5 å¤§æ–‡ä»¶ä¼ è¾“ä½¿ç”¨gzip</h3><p>å¤§é‡appä¾èµ–äºè¿œç«¯èµ„æºå’Œç¬¬ä¸‰æ–¹APIï¼Œä½ å¯èƒ½ä¼šå¼€å‘ä¸€ä¸ªéœ€è¦ä»è¿œç«¯ä¸‹è½½XML, JSON, HTMLæˆ–è€…å…¶å®ƒæ ¼å¼çš„appã€‚</p>
<p>é—®é¢˜æ˜¯æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç§»åŠ¨è®¾å¤‡ï¼Œå› æ­¤ä½ å°±ä¸èƒ½æŒ‡æœ›ç½‘ç»œçŠ¶å†µæœ‰å¤šå¥½ã€‚ä¸€ä¸ªç”¨æˆ·ç°åœ¨è¿˜åœ¨edgeç½‘ç»œï¼Œä¸‹ä¸€åˆ†é’Ÿå¯èƒ½å°±åˆ‡æ¢åˆ°äº†3Gã€‚ä¸è®ºä»€ä¹ˆåœºæ™¯ï¼Œä½ è‚¯å®šä¸æƒ³è®©ä½ çš„ç”¨æˆ·ç­‰å¤ªé•¿æ—¶é—´ã€‚</p>
<p>å‡å°æ–‡æ¡£çš„ä¸€ä¸ªæ–¹å¼å°±æ˜¯åœ¨æœåŠ¡ç«¯å’Œä½ çš„appä¸­æ‰“å¼€gzipã€‚è¿™å¯¹äºæ–‡å­—è¿™ç§èƒ½æœ‰æ›´é«˜å‹ç¼©ç‡çš„æ•°æ®æ¥è¯´ä¼šæœ‰æ›´æ˜¾è‘—çš„æ•ˆç”¨ã€‚</p>
<p>å½“ç„¶ï¼Œç°åœ¨è‹¹æœå·²ç»è‡ªåŠ¨æ”¯æŒäº†ï¼Œä½ åªéœ€è¦å‘Šè¯‰ä½ ä»¬æœåŠ¡ç«¯çš„åŒå­¦ï¼Œä¼ è¾“å¤§æ–‡ä»¶çš„æ—¶å€™è®°å¾—ç”¨gzipå°±å®Œäº†ã€‚</p>
<h3 id="2-6-Viewçš„é‡ç”¨å’Œæ‡’åŠ è½½"><a href="#2-6-Viewçš„é‡ç”¨å’Œæ‡’åŠ è½½" class="headerlink" title="2.6 Viewçš„é‡ç”¨å’Œæ‡’åŠ è½½"></a>2.6 Viewçš„é‡ç”¨å’Œæ‡’åŠ è½½</h3><p>æ›´å¤šçš„viewæ„å‘³ç€æ›´å¤šçš„æ¸²æŸ“ï¼Œä¹Ÿå°±æ˜¯æ›´å¤šçš„CPUå’Œå†…å­˜æ¶ˆè€—ï¼Œå¯¹äºé‚£ç§åµŒå¥—äº†å¾ˆå¤šviewåœ¨UIScrollViewé‡Œè¾¹çš„appæ›´æ˜¯å¦‚æ­¤ã€‚</p>
<p>é‡ç”¨å°±æ˜¯æ¨¡ä»¿UITableViewå’ŒUICollectionViewçš„æ“ä½œ: ä¸è¦ä¸€æ¬¡åˆ›å»ºæ‰€æœ‰çš„subviewï¼Œè€Œæ˜¯å½“éœ€è¦æ—¶æ‰åˆ›å»ºï¼Œå½“å®ƒä»¬å®Œæˆäº†ä½¿å‘½ï¼ŒæŠŠä»–ä»¬æ”¾è¿›ä¸€ä¸ªå¯é‡ç”¨çš„é˜Ÿåˆ—ä¸­ã€‚<br>å½“éœ€è¦ä½¿ç”¨Viewçš„æ—¶å€™ï¼Œå»å¯é‡ç”¨é˜Ÿåˆ—é‡Œé¢æ‰¾ä¸€æ‰¾æœ‰æ²¡æœ‰å¯ä»¥è¢«å¤ç”¨çš„Viewã€‚<br>è¿™é‡Œæˆ‘çš„ä¸€ä»½æ¡†æ¶ä¸­æ›¾ç»ä½¿ç”¨è¿‡ç±»ä¼¼çš„æ–¹æ³•å»åˆ›å»ºä¸€ä¸ªå›¾ç‰‡æµè§ˆå™¨ï¼Œå¤§å®¶å¯ä»¥ç¨åšå‚è€ƒã€‚Viewçš„é‡ç”¨</p>
<p>æ‡’åŠ è½½å°±æ˜¯åœ¨ç¨‹åºå¯åŠ¨æ—¶å¹¶ä¸è¿›è¡ŒåŠ è½½ï¼Œåªæœ‰å½“ç”¨åˆ°è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œæ‰è¿›è¡ŒåŠ è½½ã€‚<br>è¿™ä¸ªä¸ä»…åœ¨å±æ€§ä¸­å¯ä»¥è¿›è¡Œè¿™æ ·çš„ä½¿ç”¨ï¼Œåœ¨Viewä¸Šé¢ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä¸è¿‡å®ç°ç¨æœ‰ä¸åŒã€‚<br>æ‡’åŠ è½½ä¼šæ¶ˆè€—æ›´å°‘å†…å­˜ï¼Œä½†æ˜¯åœ¨Viewçš„æ˜¾ç¤ºä¸Šä¼šç¨æœ‰æ»åã€‚</p>
<h3 id="2-7-Cache"><a href="#2-7-Cache" class="headerlink" title="2.7 Cache"></a>2.7 Cache</h3><p>ä¸€ä¸ªæå¥½çš„åŸåˆ™å°±æ˜¯ï¼Œç¼“å­˜æ‰€éœ€è¦çš„ï¼Œä¹Ÿå°±æ˜¯é‚£äº›ä¸å¤§å¯èƒ½æ”¹å˜ä½†æ˜¯éœ€è¦ç»å¸¸è¯»å–çš„ä¸œè¥¿ã€‚</p>
<p>æˆ‘ä»¬èƒ½ç¼“å­˜äº›ä»€ä¹ˆå‘¢ï¼Ÿä¸€äº›é€‰é¡¹æ˜¯ï¼Œè¿œç«¯æœåŠ¡å™¨çš„å“åº”ï¼Œå›¾ç‰‡ï¼Œç”šè‡³è®¡ç®—ç»“æœï¼Œæ¯”å¦‚UITableViewçš„è¡Œé«˜ã€‚</p>
<p>NSURLConnectioné»˜è®¤ä¼šç¼“å­˜èµ„æºåœ¨å†…å­˜æˆ–è€…å­˜å‚¨ä¸­æ ¹æ®å®ƒæ‰€åŠ è½½çš„HTTP Headersã€‚ä½ ç”šè‡³å¯ä»¥æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªNSURLRequestç„¶åä½¿å®ƒåªåŠ è½½ç¼“å­˜çš„å€¼ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¯ç”¨çš„ä»£ç æ®µï¼Œä½ å¯ä»¥å¯ä»¥ç”¨å®ƒå»ä¸ºä¸€ä¸ªåŸºæœ¬ä¸ä¼šæ”¹å˜çš„å›¾ç‰‡åˆ›å»ºä¸€ä¸ªNSURLRequestå¹¶ç¼“å­˜å®ƒï¼š</p>
<ul>
<li>(NSMutableURLRequest <em>)imageRequestWithURL:(NSURL </em>)url { NSMutableURLRequest <em>request = [NSMutableURLRequest requestWithURL:url];  request.cachePolicy = NSURLRequestReturnCacheDataElseLoad; // this will make sure the request always returns the cached image request.HTTPShouldHandleCookies = NO; request.HTTPShouldUsePipelining = YES; [request addValue:@â€image/</em>â€œ forHTTPHeaderField:@â€Acceptâ€];  return request; }</li>
</ul>
<p>æ³¨æ„ä½ å¯ä»¥é€šè¿‡ NSURLConnection è·å–ä¸€ä¸ªURL requestï¼Œ AFNetworkingä¹Ÿä¸€æ ·çš„ã€‚è¿™æ ·ä½ å°±ä¸å¿…ä¸ºé‡‡ç”¨è¿™æ¡tipè€Œæ”¹å˜æ‰€æœ‰çš„networkingä»£ç äº†ã€‚</p>
<p>å¦‚æœä½ éœ€è¦ç¼“å­˜å…¶å®ƒä¸æ˜¯HTTP Requestçš„ä¸œè¥¿ï¼Œä½ å¯ä»¥ç”¨NSCacheã€‚</p>
<h3 id="2-8-è®°å¾—å¤„ç†å†…å­˜è­¦å‘Š"><a href="#2-8-è®°å¾—å¤„ç†å†…å­˜è­¦å‘Š" class="headerlink" title="2.8 è®°å¾—å¤„ç†å†…å­˜è­¦å‘Š"></a>2.8 è®°å¾—å¤„ç†å†…å­˜è­¦å‘Š</h3><p>ä¸€æ—¦ç³»ç»Ÿå†…å­˜è¿‡ä½ï¼ŒiOSä¼šé€šçŸ¥æ‰€æœ‰è¿è¡Œä¸­appã€‚åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æ˜¯è¿™æ ·è®°è¿°:</p>
<p>å¦‚æœä½ çš„appæ”¶åˆ°äº†å†…å­˜è­¦å‘Šï¼Œå®ƒå°±éœ€è¦å°½å¯èƒ½é‡Šæ”¾æ›´å¤šçš„å†…å­˜ã€‚æœ€ä½³æ–¹å¼æ˜¯ç§»é™¤å¯¹ç¼“å­˜ï¼Œå›¾ç‰‡objectå’Œå…¶ä»–ä¸€äº›å¯ä»¥é‡åˆ›å»ºçš„objectsçš„strong references.</p>
<p>å¹¸è¿çš„æ˜¯ï¼ŒUIKitæä¾›äº†å‡ ç§æ”¶é›†ä½å†…å­˜è­¦å‘Šçš„æ–¹æ³•:</p>
<p>åœ¨app delegateä¸­ä½¿ç”¨applicationDidReceiveMemoryWarning: çš„æ–¹æ³• åœ¨ä½ çš„è‡ªå®šä¹‰UIViewControllerçš„å­ç±»(subclass)ä¸­è¦†ç›–didReceiveMemoryWarning æ³¨å†Œå¹¶æ¥æ”¶ UIApplicationDidReceiveMemoryWarningNotification çš„é€šçŸ¥</p>
<p>ä¸€æ—¦æ”¶åˆ°è¿™ç±»é€šçŸ¥ï¼Œä½ å°±éœ€è¦é‡Šæ”¾ä»»ä½•ä¸å¿…è¦çš„å†…å­˜ä½¿ç”¨ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒUIViewControllerçš„é»˜è®¤è¡Œä¸ºæ˜¯ç§»é™¤ä¸€äº›ä¸å¯è§çš„viewï¼Œ å®ƒçš„ä¸€äº›å­ç±»åˆ™å¯ä»¥è¡¥å……è¿™ä¸ªæ–¹æ³•ï¼Œåˆ æ‰ä¸€äº›é¢å¤–çš„æ•°æ®ç»“æ„ã€‚ä¸€ä¸ªæœ‰å›¾ç‰‡ç¼“å­˜çš„appå¯ä»¥ç§»é™¤ä¸åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„å›¾ç‰‡ã€‚</p>
<p>è¿™æ ·å¯¹å†…å­˜è­¦æŠ¥çš„å¤„ç†æ˜¯å¾ˆå¿…è¦çš„ï¼Œè‹¥ä¸é‡è§†ï¼Œä½ çš„appå°±å¯èƒ½è¢«ç³»ç»Ÿæ€æ‰ã€‚</p>
<p>ç„¶è€Œï¼Œå½“ä½ ä¸€å®šè¦ç¡®è®¤ä½ æ‰€é€‰æ‹©çš„objectæ˜¯å¯ä»¥è¢«é‡ç°åˆ›å»ºçš„æ¥é‡Šæ”¾å†…å­˜ã€‚ä¸€å®šè¦åœ¨å¼€å‘ä¸­ç”¨æ¨¡æ‹Ÿå™¨ä¸­çš„å†…å­˜æé†’æ¨¡æ‹Ÿå»æµ‹è¯•ä¸€ä¸‹ã€‚</p>
<h3 id="2-9-é‡ç”¨å¤§çš„å¼€é”€å¯¹è±¡"><a href="#2-9-é‡ç”¨å¤§çš„å¼€é”€å¯¹è±¡" class="headerlink" title="2.9 é‡ç”¨å¤§çš„å¼€é”€å¯¹è±¡"></a>2.9 é‡ç”¨å¤§çš„å¼€é”€å¯¹è±¡</h3><p>è¿™é‡Œçš„å¤§å¼€é”€æ˜¯æŒ‡ä¸€äº›åˆå§‹åŒ–å¾ˆæ…¢çš„objectsï¼Œå¦‚ï¼šNSDateFormatterå’ŒNSCalendarã€‚ä½†æ˜¯ï¼Œä½ åˆä¸å¯é¿å…åœ°éœ€è¦ä½¿ç”¨å®ƒä»¬ï¼Œæ¯”å¦‚ä»JSONæˆ–è€…XMLä¸­è§£ææ•°æ®ã€‚</p>
<p>æƒ³è¦é¿å…ä½¿ç”¨è¿™ä¸ªå¯¹è±¡çš„ç“¶é¢ˆä½ å°±éœ€è¦é‡ç”¨ä»–ä»¬ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ å±æ€§åˆ°ä½ çš„classé‡Œæˆ–è€…åˆ›å»ºé™æ€å˜é‡æ¥å®ç°ã€‚</p>
<p>æ³¨æ„å¦‚æœä½ è¦é€‰æ‹©ç¬¬äºŒç§æ–¹æ³•ï¼Œå¯¹è±¡ä¼šåœ¨ä½ çš„appè¿è¡Œæ—¶ä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­ï¼Œå’Œå•ä¾‹(singleton)å¾ˆç›¸ä¼¼ã€‚</p>
<p>ä¸‹é¢çš„ä»£ç è¯´æ˜äº†ä½¿ç”¨ä¸€ä¸ªå±æ€§æ¥å»¶è¿ŸåŠ è½½ä¸€ä¸ªdate formatter. ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶å®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œä»¥åçš„è°ƒç”¨åˆ™å°†è¿”å›å·²ç»åˆ›å»ºçš„å®ä¾‹ï¼š</p>
<p>// in your .h or inside a class extension @property (nonatomic, strong) NSDateFormatter <em>formatter;  // inside the implementation (.m) // When you need, just use self.formatter - (NSDateFormatter </em>)formatter { if (! _formatter) { _formatter = [[NSDateFormatter alloc] init]; _formatter.dateFormat = @â€EEE MMM dd HH:mm:ss Z yyyyâ€; // twitter date format } return _formatter; }</p>
<p>è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…¶å®è®¾ç½®ä¸€ä¸ªNSDateFormatterçš„é€Ÿåº¦å·®ä¸å¤šæ˜¯å’Œåˆ›å»ºæ–°çš„ä¸€æ ·æ…¢çš„ï¼æ‰€ä»¥å¦‚æœä½ çš„appéœ€è¦ç»å¸¸è¿›è¡Œæ—¥æœŸæ ¼å¼å¤„ç†çš„è¯ï¼Œä½ ä¼šä»è¿™ä¸ªæ–¹æ³•ä¸­å¾—åˆ°ä¸å°çš„æ€§èƒ½æå‡ã€‚</p>
<h3 id="2-10-é¿å…åå¤çš„å¤„ç†æ•°æ®"><a href="#2-10-é¿å…åå¤çš„å¤„ç†æ•°æ®" class="headerlink" title="2.10 é¿å…åå¤çš„å¤„ç†æ•°æ®"></a>2.10 é¿å…åå¤çš„å¤„ç†æ•°æ®</h3><p>è®¸å¤šåº”ç”¨éœ€è¦ä»æœåŠ¡å™¨åŠ è½½åŠŸèƒ½æ‰€éœ€çš„å¸¸ä¸ºJSONæˆ–è€…XMLæ ¼å¼çš„æ•°æ®ã€‚åœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ä½¿ç”¨ç›¸åŒçš„æ•°æ®ç»“æ„å¾ˆé‡è¦ã€‚åœ¨å†…å­˜ä¸­æ“ä½œæ•°æ®ä½¿å®ƒä»¬æ»¡è¶³ä½ çš„æ•°æ®ç»“æ„æ˜¯å¼€é”€å¾ˆå¤§çš„ã€‚</p>
<p>æ¯”å¦‚ä½ éœ€è¦æ•°æ®æ¥å±•ç¤ºä¸€ä¸ªtable view,æœ€å¥½ç›´æ¥ä»æœåŠ¡å™¨å–arrayç»“æ„çš„æ•°æ®ä»¥é¿å…é¢å¤–çš„ä¸­é—´æ•°æ®ç»“æ„æ”¹å˜ã€‚</p>
<p>ç±»ä¼¼çš„ï¼Œå¦‚æœéœ€è¦ä»ç‰¹å®škeyä¸­å–æ•°æ®ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨é”®å€¼å¯¹çš„dictionaryã€‚</p>
<h3 id="2-11-æ­£ç¡®è®¾å®šèƒŒæ™¯å›¾ç‰‡"><a href="#2-11-æ­£ç¡®è®¾å®šèƒŒæ™¯å›¾ç‰‡" class="headerlink" title="2.11 æ­£ç¡®è®¾å®šèƒŒæ™¯å›¾ç‰‡"></a>2.11 æ­£ç¡®è®¾å®šèƒŒæ™¯å›¾ç‰‡</h3><p>åœ¨Viewé‡Œæ”¾èƒŒæ™¯å›¾ç‰‡å°±åƒå¾ˆå¤šå…¶å®ƒiOSç¼–ç¨‹ä¸€æ ·æœ‰å¾ˆå¤šæ–¹æ³•:</p>
<p>ä½¿ç”¨UIColorçš„ colorWithPatternImageæ¥è®¾ç½®èƒŒæ™¯è‰²ï¼› åœ¨viewä¸­æ·»åŠ ä¸€ä¸ªUIImageViewä½œä¸ºä¸€ä¸ªå­Viewã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨å…¨ç”»å¹…çš„èƒŒæ™¯å›¾ï¼Œä½ å°±å¿…é¡»ä½¿ç”¨UIImageViewå› ä¸ºUIColorçš„colorWithPatternImageæ˜¯ç”¨æ¥åˆ›å»ºå°çš„é‡å¤çš„å›¾ç‰‡ä½œä¸ºèƒŒæ™¯çš„ã€‚è¿™ç§æƒ…å½¢ä¸‹ä½¿ç”¨UIImageViewå¯ä»¥èŠ‚çº¦ä¸å°‘çš„å†…å­˜ï¼š</p>
<p>// You could also achieve the same result in Interface Builder UIImageView *backgroundView = [ [UIImageView alloc] initWithImage:[UIImage imageNamed:@â€backgroundâ€]]; [self.view addSubview:backgroundView];</p>
<p>å¦‚æœä½ ç”¨å°å›¾å¹³é“ºæ¥åˆ›å»ºèƒŒæ™¯ï¼Œä½ å°±éœ€è¦ç”¨UIColorçš„colorWithPatternImageæ¥åšäº†ï¼Œå®ƒä¼šæ›´å¿«åœ°æ¸²æŸ“ä¹Ÿä¸ä¼šèŠ±è´¹å¾ˆå¤šå†…å­˜ï¼š</p>
<p>self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@â€backgroundâ€]];</p>
<h3 id="2-12-è¯•è¯•è‹¹æœæœ€æ–°çš„WKWebViewæ¥å¤„ç†web"><a href="#2-12-è¯•è¯•è‹¹æœæœ€æ–°çš„WKWebViewæ¥å¤„ç†web" class="headerlink" title="2.12 è¯•è¯•è‹¹æœæœ€æ–°çš„WKWebViewæ¥å¤„ç†web"></a>2.12 è¯•è¯•è‹¹æœæœ€æ–°çš„WKWebViewæ¥å¤„ç†web</h3><p>UIWebViewå¾ˆæœ‰ç”¨ï¼Œç”¨å®ƒæ¥å±•ç¤ºç½‘é¡µå†…å®¹æˆ–è€…åˆ›å»ºUIKitå¾ˆéš¾åšåˆ°çš„åŠ¨ç”»æ•ˆæœæ˜¯å¾ˆç®€å•çš„ä¸€ä»¶äº‹ã€‚</p>
<p>ä½†æ˜¯ä½ å¯èƒ½æœ‰æ³¨æ„åˆ°UIWebViewå¹¶ä¸åƒé©±åŠ¨Safariçš„é‚£ä¹ˆå¿«ã€‚è¿™æ˜¯ç”±äºä»¥JIT compilation ä¸ºç‰¹è‰²çš„Webkitçš„Nitro Engineçš„é™åˆ¶ã€‚</p>
<p>æ‰€ä»¥æƒ³è¦æ›´é«˜çš„æ€§èƒ½ä½ å°±è¦è°ƒæ•´ä¸‹ä½ çš„HTMLäº†ã€‚ç¬¬ä¸€ä»¶è¦åšçš„äº‹å°±æ˜¯å°½å¯èƒ½ç§»é™¤ä¸å¿…è¦çš„javascriptï¼Œé¿å…ä½¿ç”¨è¿‡å¤§çš„æ¡†æ¶ã€‚èƒ½åªç”¨åŸç”Ÿjså°±æ›´å¥½äº†ã€‚</p>
<p>å¦å¤–ï¼Œå°½å¯èƒ½å¼‚æ­¥åŠ è½½ä¾‹å¦‚ç”¨æˆ·è¡Œä¸ºç»Ÿè®¡scriptè¿™ç§ä¸å½±å“é¡µé¢è¡¨è¾¾çš„javascriptã€‚</p>
<p>æœ€åï¼Œæ°¸è¿œè¦æ³¨æ„ä½ ä½¿ç”¨çš„å›¾ç‰‡ï¼Œä¿è¯å›¾ç‰‡çš„ç¬¦åˆä½ ä½¿ç”¨çš„å¤§å°ã€‚ä½¿ç”¨Sprite sheetæé«˜åŠ è½½é€Ÿåº¦å’ŒèŠ‚çº¦å†…å­˜ã€‚</p>
<p>å½“ç„¶ï¼Œä¸Šé¢æ˜¯é’ˆå¯¹ä½ åœ¨ä½¿ç”¨UIWebViewçš„æƒ…å†µä¸‹ï¼Œéœ€è¦å°½é‡å‡å°‘ä½¿ç”¨webçš„ç‰¹æ€§ï¼Œè€Œè‹¹æœæœ€è¿‘åˆšæ¨å‡ºçš„Safariçš„åº•å±‚æ¡†æ¶WKWebViewä¹Ÿè®¸èƒ½å¸®æˆ‘ä»¬è§„é¿æ‰å¾ˆå¤šè¿™æ ·çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<h3 id="2-13-ä¼˜åŒ–ä½ çš„TableView"><a href="#2-13-ä¼˜åŒ–ä½ çš„TableView" class="headerlink" title="2.13 ä¼˜åŒ–ä½ çš„TableView"></a>2.13 ä¼˜åŒ–ä½ çš„TableView</h3><p>Table viewéœ€è¦æœ‰å¾ˆå¥½çš„æ»šåŠ¨æ€§èƒ½ï¼Œä¸ç„¶ç”¨æˆ·ä¼šåœ¨æ»šåŠ¨è¿‡ç¨‹ä¸­å‘ç°åŠ¨ç”»çš„ç‘•ç–µã€‚</p>
<p>ä¸ºäº†ä¿è¯table viewå¹³æ»‘æ»šåŠ¨ï¼Œç¡®ä¿ä½ é‡‡å–äº†ä»¥ä¸‹çš„æªæ–½:</p>
<p>æ­£ç¡®ä½¿ç”¨reuseIdentifieræ¥é‡ç”¨cells å°½é‡ä½¿æ‰€æœ‰çš„view opaqueï¼ŒåŒ…æ‹¬cellè‡ªèº« é¿å…æ¸å˜ï¼Œå›¾ç‰‡ç¼©æ”¾ï¼Œåå°é€‰äºº ç¼“å­˜è¡Œé«˜ å¦‚æœcellå†…ç°å®çš„å†…å®¹æ¥è‡ªwebï¼Œä½¿ç”¨å¼‚æ­¥åŠ è½½ï¼Œç¼“å­˜è¯·æ±‚ç»“æœ ä½¿ç”¨shadowPathæ¥ç”»é˜´å½± å‡å°‘subviewsçš„æ•°é‡ å°½é‡ä¸é€‚ç”¨cellForRowAtIndexPath:ï¼Œå¦‚æœä½ éœ€è¦ç”¨åˆ°å®ƒï¼Œåªç”¨ä¸€æ¬¡ç„¶åç¼“å­˜ç»“æœ ä½¿ç”¨æ­£ç¡®çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨æ•°æ® ä½¿ç”¨rowHeight, sectionFooterHeight å’Œ sectionHeaderHeightæ¥è®¾å®šå›ºå®šçš„é«˜ï¼Œä¸è¦è¯·æ±‚delegate</p>
<h3 id="2-14-é€‰æ‹©æ­£ç¡®çš„æ•°æ®å­˜å‚¨æ–¹å¼"><a href="#2-14-é€‰æ‹©æ­£ç¡®çš„æ•°æ®å­˜å‚¨æ–¹å¼" class="headerlink" title="2.14 é€‰æ‹©æ­£ç¡®çš„æ•°æ®å­˜å‚¨æ–¹å¼"></a>2.14 é€‰æ‹©æ­£ç¡®çš„æ•°æ®å­˜å‚¨æ–¹å¼</h3><p>å½“å­˜å‚¨å¤§å—æ•°æ®æ—¶ä½ ä¼šæ€ä¹ˆåšï¼Ÿ</p>
<p>ä½ æœ‰å¾ˆå¤šé€‰æ‹©ï¼Œæ¯”å¦‚ï¼š</p>
<p>ä½¿ç”¨NSUerDefaults ä½¿ç”¨XML, JSON, æˆ–è€… plist ä½¿ç”¨NSCodingå­˜æ¡£ ä½¿ç”¨ç±»ä¼¼SQLiteçš„æœ¬åœ°SQLæ•°æ®åº“ ä½¿ç”¨ Core Data</p>
<p>NSUserDefaultsçš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿè™½ç„¶å®ƒå¾ˆniceä¹Ÿå¾ˆä¾¿æ·ï¼Œä½†æ˜¯å®ƒåªé€‚ç”¨äºå°æ•°æ®ï¼Œæ¯”å¦‚ä¸€äº›ç®€å•çš„å¸ƒå°”å‹çš„è®¾ç½®é€‰é¡¹ï¼Œå†å¤§ç‚¹ä½ å°±è¦è€ƒè™‘å…¶å®ƒæ–¹å¼äº†</p>
<p>XMLè¿™ç§ç»“æ„åŒ–æ¡£æ¡ˆå‘¢ï¼Ÿæ€»ä½“æ¥è¯´ï¼Œä½ éœ€è¦è¯»å–æ•´ä¸ªæ–‡ä»¶åˆ°å†…å­˜é‡Œå»è§£æï¼Œè¿™æ ·æ˜¯å¾ˆä¸ç»æµçš„ã€‚ä½¿ç”¨SAXåˆæ˜¯ä¸€ä¸ªå¾ˆéº»çƒ¦çš„äº‹æƒ…ã€‚</p>
<p>NSCodingï¼Ÿä¸å¹¸çš„æ˜¯ï¼Œå®ƒä¹Ÿéœ€è¦è¯»å†™æ–‡ä»¶ï¼Œæ‰€ä»¥ä¹Ÿæœ‰ä»¥ä¸Šé—®é¢˜ã€‚</p>
<p>åœ¨è¿™ç§åº”ç”¨åœºæ™¯ä¸‹ï¼Œä½¿ç”¨SQLite æˆ–è€… Core Dataæ¯”è¾ƒå¥½ã€‚ä½¿ç”¨è¿™äº›æŠ€æœ¯ä½ ç”¨ç‰¹å®šçš„æŸ¥è¯¢è¯­å¥å°±èƒ½åªåŠ è½½ä½ éœ€è¦çš„å¯¹è±¡ã€‚</p>
<p>åœ¨æ€§èƒ½å±‚é¢æ¥è®²ï¼ŒSQLiteå’ŒCore Dataæ˜¯å¾ˆç›¸ä¼¼çš„ã€‚ä»–ä»¬çš„ä¸åŒåœ¨äºå…·ä½“ä½¿ç”¨æ–¹æ³•ã€‚Core Dataä»£è¡¨ä¸€ä¸ªå¯¹è±¡çš„graph modelï¼Œä½†SQLiteå°±æ˜¯ä¸€ä¸ªDBMSã€‚Appleåœ¨ä¸€èˆ¬æƒ…å†µä¸‹å»ºè®®ä½¿ç”¨Core Dataï¼Œä½†æ˜¯å¦‚æœä½ æœ‰ç†ç”±ä¸ä½¿ç”¨å®ƒï¼Œé‚£ä¹ˆå°±å»ä½¿ç”¨æ›´åŠ åº•å±‚çš„SQLiteå§ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨SQLiteï¼Œä½ å¯ä»¥ç”¨FMDB(<a href="https://github.com/ccgus/fmdb)è¿™ä¸ªåº“æ¥ç®€åŒ–SQLiteçš„æ“ä½œï¼Œè¿™æ ·ä½ å°±ä¸ç”¨èŠ±å¾ˆå¤šç»å†äº†è§£SQLiteçš„C" target="_blank" rel="external">https://github.com/ccgus/fmdb)è¿™ä¸ªåº“æ¥ç®€åŒ–SQLiteçš„æ“ä½œï¼Œè¿™æ ·ä½ å°±ä¸ç”¨èŠ±å¾ˆå¤šç»å†äº†è§£SQLiteçš„C</a> APIäº†ã€‚</p>
<h3 id="2-15-æŠŠXibæ¢æˆStoryboardå§"><a href="#2-15-æŠŠXibæ¢æˆStoryboardå§" class="headerlink" title="2.15 æŠŠXibæ¢æˆStoryboardå§"></a>2.15 æŠŠXibæ¢æˆStoryboardå§</h3><p>å½“ä½ åŠ è½½ä¸€ä¸ªXIBçš„æ—¶å€™æ‰€æœ‰å†…å®¹éƒ½è¢«æ”¾åœ¨äº†å†…å­˜é‡Œï¼ŒåŒ…æ‹¬ä»»ä½•å›¾ç‰‡ã€‚å¦‚æœæœ‰ä¸€ä¸ªä¸ä¼šå³åˆ»ç”¨åˆ°çš„viewï¼Œä½ è¿™å°±æ˜¯åœ¨æµªè´¹å®è´µçš„å†…å­˜èµ„æºäº†ã€‚</p>
<p>Storyboardså°±æ˜¯å¦ä¸€ç äº‹å„¿äº†ï¼Œstoryboardä»…åœ¨éœ€è¦æ—¶å®ä¾‹åŒ–ä¸€ä¸ªview controller.</p>
<p>å½“åŠ è½½XIBæ—¶ï¼Œæ‰€æœ‰å›¾ç‰‡éƒ½è¢«ç¼“å­˜ï¼Œå¦‚æœä½ åœ¨åšOS Xå¼€å‘çš„è¯ï¼Œå£°éŸ³æ–‡ä»¶ä¹Ÿæ˜¯ã€‚Appleåœ¨ç›¸å…³æ–‡æ¡£ä¸­çš„è®°è¿°æ˜¯ï¼š</p>
<p>å½“ä½ åŠ è½½ä¸€ä¸ªå¼•ç”¨äº†å›¾ç‰‡æˆ–è€…å£°éŸ³èµ„æºçš„nibæ—¶ï¼ŒnibåŠ è½½ä»£ç ä¼šæŠŠå›¾ç‰‡å’Œå£°éŸ³æ–‡ä»¶å†™è¿›å†…å­˜ã€‚åœ¨OS Xä¸­ï¼Œå›¾ç‰‡å’Œå£°éŸ³èµ„æºè¢«ç¼“å­˜åœ¨named cacheä¸­ä»¥ä¾¿å°†æ¥ç”¨åˆ°æ—¶è·å–ã€‚åœ¨iOSä¸­ï¼Œä»…å›¾ç‰‡èµ„æºä¼šè¢«å­˜è¿›named cachesã€‚å–å†³äºä½ æ‰€åœ¨çš„å¹³å°ï¼Œä½¿ç”¨NSImage æˆ–UIImage çš„<code>imageNamed:</code>æ–¹æ³•æ¥è·å–å›¾ç‰‡èµ„æºã€‚</p>
<p>å¾ˆæ˜æ˜¾ï¼ŒåŒæ ·çš„äº‹æƒ…ä¹Ÿå‘ç”Ÿåœ¨storyboardsä¸­ï¼Œä½†æˆ‘å¹¶æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æ”¯æŒè¿™ä¸ªç»“è®ºçš„æ–‡æ¡£ã€‚</p>
<p>å¦å¤–ï¼Œå¿«é€Ÿæ‰“å¼€appæ˜¯å¾ˆé‡è¦çš„ï¼Œç‰¹åˆ«æ˜¯ç”¨æˆ·ç¬¬ä¸€æ¬¡æ‰“å¼€å®ƒæ—¶ï¼Œå¯¹appæ¥è®²ï¼Œç¬¬ä¸€å°è±¡å¤ªå¤ªå¤ªé‡è¦äº†ã€‚</p>
<p>ä½ èƒ½åšçš„å°±æ˜¯ä½¿å®ƒå°½å¯èƒ½åšæ›´å¤šçš„å¼‚æ­¥ä»»åŠ¡ï¼Œæ¯”å¦‚åŠ è½½è¿œç«¯æˆ–è€…æ•°æ®åº“æ•°æ®ï¼Œè§£ææ•°æ®ã€‚</p>
<p>è¿˜æ˜¯é‚£å¥è¯ï¼Œé¿å…è¿‡äºåºå¤§çš„XIBï¼Œå› ä¸ºä»–ä»¬æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸ŠåŠ è½½çš„ã€‚æ‰€ä»¥å°½é‡ä½¿ç”¨æ²¡æœ‰è¿™ä¸ªé—®é¢˜çš„Storyboardså§ï¼</p>
<p>æ³¨æ„ï¼Œç”¨Xcode debugæ—¶watchdogå¹¶ä¸è¿è¡Œï¼Œä¸€å®šè¦æŠŠè®¾å¤‡ä»Xcodeæ–­å¼€æ¥æµ‹è¯•å¯åŠ¨é€Ÿåº¦</p>
<h3 id="2-16-å­¦ä¼šæ‰‹åŠ¨åˆ›å»ºAutorelease-Pool"><a href="#2-16-å­¦ä¼šæ‰‹åŠ¨åˆ›å»ºAutorelease-Pool" class="headerlink" title="2.16 å­¦ä¼šæ‰‹åŠ¨åˆ›å»ºAutorelease Pool"></a>2.16 å­¦ä¼šæ‰‹åŠ¨åˆ›å»ºAutorelease Pool</h3><p>NSAutoreleasePoolè´Ÿè´£é‡Šæ”¾blockä¸­çš„autoreleased objectsã€‚ä¸€èˆ¬æƒ…å†µä¸‹å®ƒä¼šè‡ªåŠ¨è¢«UIKitè°ƒç”¨ã€‚ä½†æ˜¯æœ‰äº›çŠ¶å†µä¸‹ä½ ä¹Ÿéœ€è¦æ‰‹åŠ¨å»åˆ›å»ºå®ƒã€‚</p>
<p>å‡å¦‚ä½ åˆ›å»ºå¾ˆå¤šä¸´æ—¶å¯¹è±¡ï¼Œä½ ä¼šå‘ç°å†…å­˜ä¸€ç›´åœ¨å‡å°‘ç›´åˆ°è¿™äº›å¯¹è±¡è¢«releaseçš„æ—¶å€™ã€‚è¿™æ˜¯å› ä¸ºåªæœ‰å½“UIKitç”¨å…‰äº†autorelease poolçš„æ—¶å€™memoryæ‰ä¼šè¢«é‡Šæ”¾ã€‚</p>
<p>å¥½æ¶ˆæ¯æ˜¯ä½ å¯ä»¥åœ¨ä½ è‡ªå·±çš„@autoreleasepoolé‡Œåˆ›å»ºä¸´æ—¶çš„å¯¹è±¡æ¥é¿å…è¿™ä¸ªè¡Œä¸ºï¼š</p>
<p>NSArray <em>urls = [@â€url1â€,@â€url2â€]; for (NSURL </em>url in urls) { @autoreleasepool { NSError <em>error; NSString </em>fileContents = [NSString stringWithContentsOfURL: url encoding: NSUTF8StringEncoding error: &amp;error]; /<em> Process the string, creating and autoreleasing more objects. </em>/ } }</p>
<p>è¿™æ®µä»£ç åœ¨æ¯æ¬¡éå†åé‡Šæ”¾æ‰€æœ‰autoreleaseå¯¹è±¡</p>
<h3 id="2-17UIImageåˆå§‹åŒ–"><a href="#2-17UIImageåˆå§‹åŒ–" class="headerlink" title="2.17UIImageåˆå§‹åŒ–"></a>2.17UIImageåˆå§‹åŒ–</h3><p>Aï¼šimagedNamedåˆå§‹åŒ–</p>
<p>Bï¼šimageWithContentsOfFileåˆå§‹åŒ–</p>
<p>äºŒè€…ä¸åŒä¹‹å¤„åœ¨äºï¼ŒimageNamedé»˜è®¤åŠ è½½å›¾ç‰‡æˆåŠŸåä¼šå†…å­˜ä¸­ç¼“å­˜å›¾ç‰‡ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨ä¸€ä¸ªæŒ‡å®šçš„åå­—åœ¨ç³»ç»Ÿç¼“å­˜ä¸­æŸ¥æ‰¾å¹¶è¿”å›ä¸€ä¸ªå›¾ç‰‡å¯¹è±¡ï¼Œå¦‚æœç¼“å­˜ä¸­æ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„å›¾ç‰‡å¯¹è±¡ï¼Œåˆ™ä»æŒ‡å®šåœ°æ–¹åŠ è½½å›¾ç‰‡ç„¶åç¼“å­˜å¯¹è±¡ï¼Œå¹¶è¿”å›è¿™ä¸ªå›¾ç‰‡å¯¹è±¡</p>
<p>è€ŒimageWithContentsOfFileåˆ™ä»…åªåŠ è½½å›¾ç‰‡ï¼Œä¸ç¼“å­˜</p>
<p>å¤§é‡ä½¿ç”¨imageNamedæ–¹å¼ä¼šåœ¨ä¸éœ€è¦ç¼“å­˜çš„åœ°æ–¹é¢å¤–å¢åŠ å¼€é”€CPUçš„æ—¶é—´æ¥åšè¿™ä»¶äº‹ï¼Œå½“åº”ç”¨ç¨‹åºéœ€è¦åŠ è½½ä¸€å¼ æ¯”è¾ƒå¤§çš„å›¾ç‰‡å¹¶ä¸”ä½¿ç”¨ä¸€æ¬¡æ€§ï¼Œé‚£ä¹ˆå…¶å®æ˜¯æ²¡æœ‰å¿…è¦å»ç¼“å­˜è¿™ä¸ªå›¾ç‰‡çš„ï¼Œç”¨imageWithContentsOfFileæ˜¯æœ€ä¸ºç»æµçš„æ–¹å¼ï¼Œè¿™æ ·ä¸ä¼šå› ä¸ºUIImageå…ƒç´ è¾ƒå¤šæƒ…å†µä¸‹ï¼ŒCPUä¼šè¢«é€ä¸ªåˆ†æ•£åœ¨ä¸å¿…è¦ç¼“å­˜ä¸Šæµªè´¹è¿‡å¤šæ—¶é—´</p>
<p>ä½¿ç”¨åœºæ™¯éœ€è¦ç¼–ç¨‹æ—¶ï¼Œåº”è¯¥æ ¹æ®å®é™…åº”ç”¨åœºæ™¯åŠ ä»¥åŒºåˆ†ï¼ŒUIimageè™½å°ï¼Œä½†ä½¿ç”¨å…ƒç´ è¾ƒå¤šé—®é¢˜ä¼šæœ‰æ‰€å‡¸æ˜¾</p>
<h3 id="2-18åˆ—è¡¨æ»šåŠ¨çš„æ—¶å€™ä¸è¦å¯¹imageviewèµ‹å€¼"><a href="#2-18åˆ—è¡¨æ»šåŠ¨çš„æ—¶å€™ä¸è¦å¯¹imageviewèµ‹å€¼" class="headerlink" title="2.18åˆ—è¡¨æ»šåŠ¨çš„æ—¶å€™ä¸è¦å¯¹imageviewèµ‹å€¼"></a>2.18åˆ—è¡¨æ»šåŠ¨çš„æ—¶å€™ä¸è¦å¯¹imageviewèµ‹å€¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// åªåœ¨NSDefaultRunLoopModeæ¨¡å¼ä¸‹æ˜¾ç¤ºå›¾ç‰‡</div><div class="line">    [self.imageView performSelector:@selector(setImage:) withObject:[UIImage imageNamed:@&quot;placeholder&quot;] afterDelay:3.0 inModes:@[NSDefaultRunLoopMode]];</div></pre></td></tr></table></figure>
<p>æ¯”å¦‚ä¿®æ”¹sdwebimageä¸­çš„æ–¹æ³•ï¼Œå¦‚æœè®¾ç½®imageviewä¸ºæ»šåŠ¨åˆ—è¡¨æ¨¡å¼ï¼Œåˆ™åŠ å…¥è¯¥æ–¹æ³•ï¼Œå½“åˆ—è¡¨åœæ­¢æ»šåŠ¨æ¨¡å¼çš„æ—¶å€™æ‰åŠ è½½å›¾ç‰‡</p>
<h3 id="ä¸€äº›ç¬¬ä¸‰æ–¹çš„ä½¿ç”¨"><a href="#ä¸€äº›ç¬¬ä¸‰æ–¹çš„ä½¿ç”¨" class="headerlink" title="ä¸€äº›ç¬¬ä¸‰æ–¹çš„ä½¿ç”¨"></a>ä¸€äº›ç¬¬ä¸‰æ–¹çš„ä½¿ç”¨</h3><p> å½“ç„¶æœ‰æ—¶å€™ä¹Ÿä¼šç”¨åˆ°ä¸€äº›ç¬¬ä¸‰æ–¹ï¼Œæ¯”å¦‚åœ¨ä½¿ç”¨UICollectionViewå’ŒUITableViewçš„æ—¶å€™ï¼ŒFacebookæœ‰ä¸€ä¸ªæ¡†æ¶å«AsyncDisplayKitï¼Œè¿™ä¸ªåº“å°±å¯ä»¥å¾ˆå¥½åœ°æå‡æ»šåŠ¨æ—¶æµç•…æ€§ä»¥åŠå›¾ç‰‡å¼‚æ­¥ä¸‹è½½åŠŸèƒ½ï¼ˆä¸æ”¯æŒsbå’ŒautoLayoutï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œçº¦æŸè®¾ç½®ï¼‰ï¼ŒAsyncDisplayKitç”¨ç›¸å…³nodeç±»ï¼Œæ›¿æ¢äº†UIViewå’Œå®ƒçš„å­ç±»,è€Œä¸”æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å®ƒå¯ä»¥å¼‚æ­¥è§£ç å›¾ç‰‡ï¼Œè°ƒæ•´å›¾ç‰‡å¤§å°ä»¥åŠå¯¹å›¾ç‰‡å’Œæ–‡æœ¬è¿›è¡Œæ¸²æŸ“ï¼ŒæŠŠè¿™äº›æ“ä½œéƒ½æ”¾åˆ°å­çº¿ç¨‹ï¼Œæ»‘åŠ¨çš„æ—¶å€™å°±æµç•…è®¸å¤šã€‚æˆ‘è®¤ä¸ºè¿™ä¸ªåº“æœ€æ–¹ä¾¿çš„å°±æ˜¯å®ç°å›¾ç‰‡å¼‚æ­¥è§£ç ã€‚UIImageæ˜¾ç¤ºä¹‹å‰å¿…é¡»è¦å…ˆè§£ç å®Œæˆï¼Œè€Œä¸”è§£ç è¿˜æ˜¯åŒæ­¥çš„ã€‚å°¤å…¶æ˜¯åœ¨UICollectionView/UITableView ä¸­ä½¿ç”¨ prototype cellæ˜¾ç¤ºå¤§å›¾ï¼ŒUIImageçš„åŒæ­¥è§£ç åœ¨æ»šåŠ¨çš„æ—¶å€™ä¼šæœ‰æ˜æ˜¾çš„å¡é¡¿ã€‚å¦å¤–ä¸€ä¸ªå¾ˆå¸å¼•äººçš„ç‚¹æ˜¯AsyncDisplayKitå¯ä»¥æŠŠviewå±‚æ¬¡ç»“æ„è½¬æˆlayerã€‚å› ä¸ºå¤æ‚çš„viewå±‚æ¬¡ç»“æ„å¼€é”€å¾ˆå¤§ï¼Œå¦‚æœä¸éœ€è¦viewç‰¹æœ‰çš„åŠŸèƒ½ï¼ˆä¾‹å¦‚ç‚¹å‡»äº‹ä»¶ï¼‰ï¼Œå°±å¯ä»¥ä½¿ç”¨AsyncDisplayKit çš„layer backingç‰¹æ€§ä»è€Œè·å¾—ä¸€äº›é¢å¤–çš„æå‡ã€‚å½“ç„¶è¿™ä¸ªåº“è¿˜å¤„äºå¼€å‘é˜¶æ®µï¼Œè¿˜æœ‰ä¸€äº›åœ°æ–¹åœ°æ–¹æœ‰å¾…å®Œå–„ï¼Œæ¯”å¦‚ä¸æ”¯æŒç¼“å­˜ï¼Œæˆ‘è¦ä½¿ç”¨è¿™ä¸ªåº“çš„æ—¶å€™ä¸€èˆ¬æ˜¯ç»“åˆAlamofireå’ŒAlamofireImageå®ç°å›¾ç‰‡çš„ç¼“å­˜</p>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[blockè¿›é˜¶4--blockçš„é€»è¾‘ç†è§£]]></title>
      <url>/2016/06/29/2016/%E8%BD%AC-block%E8%BF%9B%E9%98%B64-block%E7%9A%84%E9%80%BB%E8%BE%91%E7%90%86%E8%A7%A3/</url>
      <content type="html"><![CDATA[<p>å¯¹ä¸ºä»€ä¹ˆè¦åƒå‰è¾¹ä¸‰ç¯‡æ–‡ç« åˆ†æçš„é‚£æ ·å»å®ç°blockï¼Ÿ<br>blockæ˜¯ä¸€ç§ç±»ä¼¼äºé—­åŒ…çš„æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯å°†ä¸€æ®µä»£ç ä¿å­˜ï¼Œç„¶ååœ¨éœ€è¦çš„æ—¶å€™å†æ‰§è¡Œï¼Œè¿™æ ·å°±å¸¦æ¥äº†ä¸¤ä¸ªé—®é¢˜<br><a id="more"></a></p>
<ul>
<li>æˆ‘æ€ä¹ˆä¿è¯å½“æˆ‘éœ€è¦æ‰§è¡Œè¿™æ®µblockä»£ç çš„æ—¶å€™ï¼Œblockæœ¬èº«æ˜¯å­˜åœ¨çš„</li>
<li>å› ä¸ºä»£ç æ‰§è¡Œçš„å‚æ•°éœ€è¦ï¼Œæˆ‘å¦‚ä½•ä¿è¯å½“æˆ‘æ‰§è¡Œçš„æ—¶å€™å‚æ•°æ˜¯å¯ç”¨çš„</li>
</ul>
<p>æˆ‘ä»¬é€šè¿‡å‰è¾¹çš„å­¦ä¹ çŸ¥é“ï¼Œblockæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œè¦æ‰§è¡Œçš„ä»£ç ä¼šè¢«å°è£…ä¸ºä¸€æ®µå‡½æ•°ï¼Œç„¶åè¿™ä¸ªå‡½æ•°çš„æŒ‡é’ˆè¢«ç»“æ„ä½“å¼•ç”¨ï¼Œè€Œè¿™ä¸ªå‡½æ•°çš„ä¸€ä¸ªå‚æ•°å°±æ˜¯blockç»“æ„ä½“ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä»ç»“æ„ä½“ä¸­è·å–éœ€è¦çš„å‚æ•°<br><code>blockç»“æ„ä½“---&gt;æ–¹æ³•-----&gt;ä»blockç»“æ„ä½“è·å–å‚æ•°</code></p>
<h2 id="ä¿è¯blockæœ¬èº«å­˜åœ¨"><a href="#ä¿è¯blockæœ¬èº«å­˜åœ¨" class="headerlink" title="ä¿è¯blockæœ¬èº«å­˜åœ¨"></a>ä¿è¯blockæœ¬èº«å­˜åœ¨</h2><p>é¦–å…ˆå¦‚æœ</p>
<ul>
<li>blockå­—é¢é‡å†™åœ¨å…¨å±€åŒºä¸ºglobal block</li>
<li>blockå­—é¢é‡æ²¡æœ‰è·å–ä»»ä½•å¤–éƒ¨å˜é‡ï¼Œä¸ºglobal block<br>å…¶ä»–æƒ…å†µå…¨éƒ¨ä¸ºstatck blockï¼Œglobal blockå­˜åœ¨äºå…¨å±€åŒºï¼Œä¸ä¾èµ–ä¸Šä¸‹æ–‡ï¼Œå†…å­˜ç®¡ç†æ²¡æœ‰å•¥å¤§çš„å›°æ‰°ï¼Œæ ˆblockåœ¨å†…å­˜ä¸­çš„æ ˆåŒºï¼Œå˜é‡çš„ä½œç”¨åŸŸç»“æŸåï¼Œblockä¼šè¢«åºŸå¼ƒï¼ŒåŒæ—¶<strong>blockä¹Ÿä¼šè¢«åºŸå¼ƒï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ ˆblockæ‰¾åˆ°ä¸€ä¸ªæå‡ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ã€‚<br>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œblockæä¾›äº†copyåŠŸèƒ½ï¼Œå°†blockå’Œ</strong>blockå˜é‡ä»æ ˆæ‹·è´åˆ°å †ï¼Œæ­¤æ—¶è¿™ä¸ªblockä¹Ÿå°±å˜æˆäº†å †blockï¼Œè¿™æ ·åªè¦å¼•ç”¨çš„æŒ‡é’ˆå­˜åœ¨ï¼Œblockçš„ç”Ÿå­˜å°±ä¸æˆé—®é¢˜ã€‚<br>è‡³äºè¿™ä¸ªcopyçš„åŠŸèƒ½åº”è¯¥è¯´æ¯”è¾ƒéšæ™¦<h3 id="copyçš„è°ƒç”¨æ—¶æœº"><a href="#copyçš„è°ƒç”¨æ—¶æœº" class="headerlink" title="copyçš„è°ƒç”¨æ—¶æœº"></a>copyçš„è°ƒç”¨æ—¶æœº</h3>å› ä¸ºblockæ˜¯åŒ¿åçš„ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ä¸åˆ›å»ºä¸€ä¸ªblockå£°æ˜çš„è¯ï¼Œæˆ‘ä»¬ä¸èƒ½å¤Ÿè°ƒç”¨å’Œä½¿ç”¨è¿™ä¸ªblockï¼Œæ‰€ä»¥æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¯¹blockçš„ä½¿ç”¨æƒ…å†µåšå¦‚ä¸‹çš„å½’çº³ï¼š</li>
<li>ä½œä¸ºå˜é‡</li>
<li>ä½œä¸ºæ–¹æ³•å‚æ•°</li>
</ul>
<p>ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ€»éœ€è¦åšä¸€ä¸ªèµ‹å€¼çš„æ“ä½œï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨blockï¼Œæˆ‘ä»¬å¯ä»¥åƒä¸‹è¾¹è¿™æ ·æ‰“å°ä¸€ä¸ªæ•è·å±€éƒ¨å˜é‡çš„block<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NSLog(@&quot;%@&quot;, ^&#123;NSLog(@&quot;%d&quot;, c);&#125;);//ç»“æœæ˜¯è¿™æ˜¯ç»™stackblock</div></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥å¹¶ä¸æ˜¯æ•è·äº†å±€éƒ¨å˜é‡å°±æ˜¯å †blockçš„ï¼Œéœ€è¦åšä¸€ä¸ªèµ‹å€¼æ“ä½œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">void(^myBlock)() = ^&#123;NSLog(@&quot;%d&quot;, c);&#125;;</div><div class="line">    </div><div class="line">NSLog(@&quot;%@&quot;, myBlock);</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¾—åˆ°çš„å°±æ˜¯ä¸€ä¸ªmallocblockäº†ï¼Œè¿™æ˜¯å› ä¸ºè¿™ä¸ªå˜é‡å‰è¾¹æœ‰ä¸ªé»˜è®¤çš„å…³é”®å­—<code>__strong</code>ï¼Œè¿™ä¸ªæ—¶å€™ç¼–è¯‘å™¨ä¼šé»˜è®¤å¯¹blockåšcopyæ“ä½œçš„</p>
<p>ç¬¬äºŒç§æƒ…å†µï¼Œä½œä¸ºä¸€ä¸ªå‚æ•°è¢«ä¼ é€’çš„æ—¶å€™ï¼Œå¦‚æœæ˜¯æ ˆblockï¼Œé‚£ä¹ˆé»˜è®¤ä¹Ÿæ˜¯åšcopyæ“ä½œçš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (MyBlcok)getaBlock&#123;</div><div class="line">    int a = 0;</div><div class="line">    return ^()&#123;NSLog(@&quot;%d&quot;, a);&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æ‰“å°è¯¥blockå‘ç°æ˜¯mallocblock</p>
<h2 id="ä¿è¯å‚æ•°å¯ç”¨"><a href="#ä¿è¯å‚æ•°å¯ç”¨" class="headerlink" title="ä¿è¯å‚æ•°å¯ç”¨"></a>ä¿è¯å‚æ•°å¯ç”¨</h2><h3 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h3><p>æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå‚æ•°æ— éåšå–å€¼å’Œèµ‹å€¼ä¸¤ç§æ“ä½œï¼Œè€Œæˆ‘ä»¬èƒ½å¦æ‹¿åˆ°è¿™ä¸ªå˜é‡ä¸€ä¸ªå…³é”®ç‚¹åœ¨äºè¿™ä¸ªå˜é‡çš„ä½œç”¨åŸŸï¼Œæœ¬è´¨æ¥è®²blockæ˜¯ä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸï¼Œå…¨å±€å˜é‡ç©¿é€æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å±€éƒ¨å˜é‡å°±æ— æ³•è¢«ç›´æ¥ä½¿ç”¨ï¼Œæ‰€ä»¥å±€éƒ¨å˜é‡åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæ˜¯åœ¨blockç»“æ„ä½“å†…éƒ¨åˆé‡æ–°å®šä¹‰äº†å¦å¤–ä¸€ä¸ªå˜é‡ï¼Œç„¶åå°†å€¼èµ‹ç»™è¿™ä¸ªå˜é‡ï¼Œè¿™æ ·çš„ç»“æœå°±æ˜¯ï¼Œè¯¥å˜é‡é¦–å…ˆå¯ä»¥è¢«blockä½¿ç”¨äº†ï¼Œå…¶æ¬¡ç”Ÿå‘½å‘¨æœŸä¸blockä¸€è‡´äº†ï¼Œä¸ä¼šå­˜åœ¨è¢«è®¿é—®çš„æ—¶å€™é‡Šæ”¾è¿™æ ·çš„é—®é¢˜äº†ï¼Œè¿™ä¸ªblockå†…éƒ¨çš„åŒåå˜é‡ä¸å±€éƒ¨å˜é‡å…¶å®æ²¡æœ‰ä»»ä½•çš„å…³ç³»ã€‚ä¿®æ”¹è¯¥å˜é‡çš„å€¼å¹¶ä¸ä¼šæ”¹å˜å±€éƒ¨å˜é‡çš„å€¼ã€‚</p>
<h3 id="å±€éƒ¨å˜é‡"><a href="#å±€éƒ¨å˜é‡" class="headerlink" title="å±€éƒ¨å˜é‡"></a>å±€éƒ¨å˜é‡</h3><p>å½“æˆ‘ä»¬åœ¨å±€éƒ¨å˜é‡çš„å¤–è¾¹åŠ ä¸Šä¸€ä¸ªconstçš„æ—¶å€™ï¼Œè¿™ä¸ªå˜é‡çš„ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿäº†æ”¹å˜ï¼Œå¹¶ä¸”å†…å­˜ä¸Šç§»åŠ¨åˆ°äº†é™æ€å˜é‡åŒºï¼Œä½†æ˜¯ä½œç”¨åŸŸå¹¶æ²¡æœ‰å˜åŒ–ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¸èƒ½ç©¿é€blockåƒå…¨å±€å˜é‡ä¸€æ ·è¢«èµ‹å€¼ï¼Œå½“ç„¶æˆ‘ä»¬å‘ç°ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ˜¯å¯ä»¥æ”¹å˜å±€éƒ¨å˜é‡çš„å€¼å¾—ï¼Œå…¶å®è¿™ä¸ªæ—¶å€™ç³»ç»Ÿçš„åšæ³•æ˜¯ï¼Œå°†è¯¥å±€éƒ¨å˜é‡çš„æŒ‡é’ˆä¼ å…¥è¿›å»ï¼Œå› ä¸ºåŠ ä¸Šäº†consté¦–å…ˆèµ·ç ç”Ÿå‘½å‘¨æœŸä¸€è‡´äº†ï¼Œèƒ½å¤Ÿä¿è¯ä¸ä¼šè¢«é‡Šæ”¾äº†ï¼Œå°†æŒ‡é’ˆä¼ å…¥è¿›å»ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡é’ˆæ¥è®¿é—®è¯¥é™æ€å˜é‡çš„å†…å­˜åœ°å€è¿›è¡Œä¸€äº›ä¿®æ”¹çš„æ“ä½œ</p>
<h3 id="block"><a href="#block" class="headerlink" title="__block"></a>__block</h3><p>å½“ç„¶å¯¹äºä¿®æ”¹å±€éƒ¨å˜é‡é™¤äº†æå‡å…¶ç”Ÿå‘½å‘¨æœŸè¿˜æœ‰ä¸€ç§åŠæ³•å°±æ˜¯åŠ ä¸Š__blockå…³é”®å­—ï¼Œè¯¥å…³é”®å­—çš„ä½œç”¨æ˜¯ç”Ÿæˆäº†å¦å¤–ä¸€ä¸ªç»“æ„ä½“ï¼Œç„¶åèµ‹å€¼ç»™blockï¼Œè¿™æ ·ä¸€æ–¹é¢ä¿è¯äº†ç”Ÿå‘½å‘¨æœŸä¸€è‡´ï¼Œåˆå› ä¸ºæœ€åçš„æ‰§è¡Œå‡½æ•°ä»¥blockä¸ºå‚æ•°ï¼Œæ‰€ä»¥è®¿é—®è¯¥å˜é‡é—®é¢˜ä¸å¤§ï¼Œä¹Ÿè§£å†³äº†ä½œç”¨åŸŸçš„é—®é¢˜</p>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOSåŸºç¡€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[(è½¬)blockè¿›é˜¶3--blockå’Œå¯¹è±¡çš„å†…å­˜ç®¡ç†]]></title>
      <url>/2016/06/25/2016/%E8%BD%AC-block%E8%BF%9B%E9%98%B63-block%E5%92%8C%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</url>
      <content type="html"><![CDATA[<p>åŸæ–‡é“¾æ¥<a href="https://www.zybuluo.com/MicroCai/note/51116" target="_blank" rel="external">https://www.zybuluo.com/MicroCai/note/51116</a><br>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®²äº†å¾ˆå¤šå…³äº block å’ŒåŸºç¡€å˜é‡çš„å†…å­˜ç®¡ç†ï¼Œæ¥ç€æˆ‘ä»¬èŠèŠ block å’Œå¯¹è±¡çš„å†…å­˜ç®¡ç†ï¼Œå¦‚ block ç»å¸¸ä¼šç¢°åˆ°çš„å¾ªç¯å¼•ç”¨é—®é¢˜ç­‰ç­‰ã€‚</p>
<p>è·å–å¯¹è±¡<br><a id="more"></a><br>ç…§ä¾‹å…ˆæ¥æ®µä»£ç è½»æ¾ä¸‹ï¼Œç§ç§ block æ˜¯æ€ä¹ˆè·å–å¤–éƒ¨å¯¹è±¡çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">/********************** capturing objects **********************/</div><div class="line">typedef void (^blk_t)(id obj);</div><div class="line">blk_t blk;</div><div class="line">- (void)viewDidLoad</div><div class="line">&#123;</div><div class="line">    [self captureObject];</div><div class="line">    blk([[NSObject alloc] init]);</div><div class="line">    blk([[NSObject alloc] init]);</div><div class="line">    blk([[NSObject alloc] init]);</div><div class="line">&#125;</div><div class="line">- (void)captureObject</div><div class="line">&#123;</div><div class="line">    id array = [[NSMutableArray alloc] init];</div><div class="line">    blk = [^(id obj) &#123;</div><div class="line">             [array addObject:obj];</div><div class="line">             NSLog(@&quot;array count = %ld&quot;, [array count]);</div><div class="line">          &#125; copy];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç¿»è¯‘åçš„å…³é”®ä»£ç æ‘˜å½•å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">/* a struct for the Block and some functions */</div><div class="line">struct __main_block_impl_0</div><div class="line">&#123;</div><div class="line">    struct __block_impl impl;</div><div class="line">    struct __main_block_desc_0 *Desc;</div><div class="line">    id __strong array;</div><div class="line">    __main_block_impl_0(void *fp, struct __main_block_desc_0 *desc, id __strong _array, int flags=0) : array(_array)</div><div class="line">    &#123;</div><div class="line">        impl.isa = &amp;_NSConcreteStackBlock; </div><div class="line">        impl.Flags = flags;</div><div class="line">        impl.FuncPtr = fp;</div><div class="line">        Desc = desc;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">static void __main_block_func_0(struct __main_block_impl_0 *__cself, id obj)</div><div class="line">&#123;</div><div class="line">    id __strong array = __cself-&gt;array;</div><div class="line">    [array addObject:obj];</div><div class="line">    NSLog(@&quot;array count = %ld&quot;, [array count]);</div><div class="line">&#125;</div><div class="line">static void __main_block_copy_0(struct __main_block_impl_0 *dst, __main_block_impl_0 *src)</div><div class="line">&#123;</div><div class="line">    _Block_object_assign(&amp;dst-&gt;array, src-&gt;array, BLOCK_FIELD_IS_OBJECT);</div><div class="line">&#125;</div><div class="line">static void __main_block_dispose_0(struct __main_block_impl_0 *src)</div><div class="line">&#123;</div><div class="line">    _Block_object_dispose(src-&gt;array, BLOCK_FIELD_IS_OBJECT);</div><div class="line">&#125;</div><div class="line">struct static struct __main_block_desc_0</div><div class="line">&#123;</div><div class="line">    unsigned long reserved;</div><div class="line">    unsigned long Block_size;</div><div class="line">    void (*copy)(struct __main_block_impl_0*, struct __main_block_impl_0*);</div><div class="line">    void (*dispose)(struct __main_block_impl_0*);</div><div class="line">&#125; __main_block_desc_0_DATA = &#123;  0,</div><div class="line">                                sizeof(struct __main_block_impl_0),</div><div class="line">                                __main_block_copy_0,</div><div class="line">                                __main_block_dispose_0</div><div class="line">                             &#125;;</div><div class="line">/* Block literal and executing the Block */</div><div class="line">blk_t blk;</div><div class="line">&#123;</div><div class="line">    id __strong array = [[NSMutableArray alloc] init];</div><div class="line">    blk = &amp;__main_block_impl_0(__main_block_func_0, </div><div class="line">                               &amp;__main_block_desc_0_DATA, </div><div class="line">                               array, </div><div class="line">                               0x22000000);</div><div class="line">    blk = [blk copy];</div><div class="line">&#125;</div><div class="line">(*blk-&gt;impl.FuncPtr)(blk, [[NSObject alloc] init]);</div><div class="line">(*blk-&gt;impl.FuncPtr)(blk, [[NSObject alloc] init]);</div><div class="line">(*blk-&gt;impl.FuncPtr)(blk, [[NSObject alloc] init]);</div></pre></td></tr></table></figure>
<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œå½“å˜é‡å˜é‡ä½œç”¨åŸŸç»“æŸæ—¶ï¼Œarray è¢«åºŸå¼ƒï¼Œå¼ºå¼•ç”¨å¤±æ•ˆï¼ŒNSMutableArray ç±»çš„å®ä¾‹å¯¹è±¡ä¼šè¢«é‡Šæ”¾å¹¶åºŸå¼ƒã€‚åœ¨è¿™å±éš¾å…³å¤´ï¼Œblock åŠæ—¶è°ƒç”¨äº† copy æ–¹æ³•ï¼Œåœ¨ _Block_object_assign ä¸­ï¼Œå°† array èµ‹å€¼ç»™ block æˆå‘˜å˜é‡å¹¶æŒæœ‰ã€‚æ‰€ä»¥ä¸Šé¢ä»£ç å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œæ‰“å°å‡ºæ¥çš„ array count ä¾æ¬¡é€’å¢ã€‚</p>
<p>æ€»ç»“ä»£ç å¯æ­£å¸¸è¿è¡Œçš„åŸå› å…³é”®å°±åœ¨äº block é€šè¿‡è°ƒç”¨ copy æ–¹æ³•ï¼ŒæŒæœ‰äº† __strong ä¿®é¥°çš„å¤–éƒ¨å˜é‡ï¼Œä½¿å¾—å¤–éƒ¨å¯¹è±¡åœ¨è¶…å‡ºå…¶ä½œç”¨åŸŸåå¾—ä»¥ç»§ç»­å­˜æ´»ï¼Œä»£ç æ­£å¸¸æ‰§è¡Œã€‚</p>
<p>åœ¨ä»¥ä¸‹æƒ…å½¢ä¸­ï¼Œ block ä¼šä»æ ˆæ‹·è´åˆ°å †ï¼š</p>
<ul>
<li>å½“ block è°ƒç”¨ copy æ–¹æ³•æ—¶ï¼Œå¦‚æœ block åœ¨æ ˆä¸Šï¼Œä¼šè¢«æ‹·è´åˆ°å †ä¸Šï¼›</li>
<li>å½“ block ä½œä¸ºå‡½æ•°è¿”å›å€¼è¿”å›æ—¶ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨å°† block ä½œä¸º _Block_copy å‡½æ•°ï¼Œæ•ˆæœç­‰åŒäº block ç›´æ¥è°ƒç”¨ copy æ–¹æ³•ï¼›</li>
<li>å½“ block è¢«èµ‹å€¼ç»™ __strong id ç±»å‹çš„å¯¹è±¡æˆ– block çš„æˆå‘˜å˜é‡æ—¶ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨å°† block ä½œä¸º _Block_copy å‡½æ•°ï¼Œæ•ˆæœç­‰åŒäº block ç›´æ¥è°ƒç”¨ copy æ–¹æ³•ï¼›</li>
<li>å½“ block ä½œä¸ºå‚æ•°è¢«ä¼ å…¥æ–¹æ³•åå¸¦æœ‰ usingBlock çš„ Cocoa Framework æ–¹æ³•æˆ– GCD çš„ API æ—¶ã€‚è¿™äº›æ–¹æ³•ä¼šåœ¨å†…éƒ¨å¯¹ä¼ é€’è¿›æ¥çš„ block è°ƒç”¨ copy æˆ– _Block_copy è¿›è¡Œæ‹·è´;<br>å…¶å®åä¸‰ç§æƒ…å†µåœ¨ä¸Šç¯‡æ–‡ç« blockçš„è‡ªåŠ¨æ‹·è´å·²ç»åšè¿‡è¯´æ˜<br>é™¤æ­¤ä¹‹å¤–ï¼Œéƒ½éœ€è¦æ‰‹åŠ¨è°ƒç”¨ã€‚</li>
</ul>
<blockquote>
<p>å»¶ä¼¸é˜…è¯»ï¼šObjective-C ç»“æ„ä½“ä¸­çš„ __strong æˆå‘˜å˜é‡</p>
<p>æ³¨æ„åˆ° <strong>main_block_impl_0 ç»“æ„ä½“æœ‰ä»€ä¹ˆå¼‚å¸¸æ²¡ï¼Ÿåœ¨ C ç»“æ„ä½“ä¸­å‡ºç°äº† </strong>strong å…³é”®å­—ä¿®é¥°çš„å˜é‡ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œ Objective-C çš„ç¼–è¯‘å™¨å› ä¸ºæ— æ³•æ£€æµ‹ C ç»“æ„ä½“åˆå§‹åŒ–å’Œé‡Šæ”¾çš„æ—¶é—´ï¼Œä¸èƒ½è¿›è¡Œæœ‰æ•ˆçš„å†…å­˜ç®¡ç†ï¼Œæ‰€ä»¥ Objective-C çš„ C ç»“æ„ä½“æˆå‘˜æ˜¯ä¸èƒ½ç”¨ <strong>strongã€</strong>weak ç­‰ç­‰è¿™ç±»å…³é”®å­—ä¿®é¥°ã€‚ç„¶è€Œ runtime åº“æ˜¯å¯ä»¥åœ¨è¿è¡Œæ—¶æ£€æµ‹åˆ° block çš„å†…å­˜å˜åŒ–ï¼Œå¦‚ block ä½•æ—¶ä»æ ˆæ‹·è´åˆ°å †ï¼Œä½•æ—¶ä»å †ä¸Šé‡Šæ”¾ç­‰ç­‰ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°ä¸Šè¿°ç»“æ„ä½“æˆå‘˜å˜é‡ç”¨ __strong ä¿®é¥°çš„æƒ…å†µã€‚</p>
</blockquote>
<h2 id="block-å˜é‡å’Œå¯¹è±¡"><a href="#block-å˜é‡å’Œå¯¹è±¡" class="headerlink" title="__block å˜é‡å’Œå¯¹è±¡"></a>__block å˜é‡å’Œå¯¹è±¡</h2><p>__block è¯´æ˜ç¬¦å¯ä»¥ä¿®é¥°ä»»ä½•ç±»å‹çš„è‡ªåŠ¨å˜é‡ã€‚ä¸‹é¢è®©æˆ‘ä»¬å†çœ‹ä¸ªå°ä¾‹å­ï¼Œå•Šï¼Œæ„‰å¿«çš„ä»£ç æ—¶é—´åˆåˆ°å•¦ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/******* block ä¿®é¥°å¯¹è±¡ *******/</div><div class="line">__block id obj = [[NSObject alloc] init];</div></pre></td></tr></table></figure>
<p>ARC ä¸‹ï¼Œå¯¹è±¡æ‰€æœ‰æƒä¿®é¥°ç¬¦é»˜è®¤ä¸º __strongï¼Œå³</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">__block id __strong obj = [[NSObject alloc] init];</div><div class="line">/******* block ä¿®é¥°å¯¹è±¡è½¬æ¢åçš„ä»£ç  *******/</div><div class="line">/* struct for __block variable */</div><div class="line">struct __Block_byref_obj_0 </div><div class="line">&#123;</div><div class="line">    void *__isa;</div><div class="line">    __Block_byref_obj_0 *__forwarding;</div><div class="line">    int __flags;</div><div class="line">    int __size;</div><div class="line">    void (*__Block_byref_id_object_copy)(void*, void*);</div><div class="line">    void (*__Block_byref_id_object_dispose)(void*); </div><div class="line">    __strong id obj;</div><div class="line">&#125;;</div><div class="line">static void __Block_byref_id_object_copy_131(void *dst, void *src) </div><div class="line">&#123;</div><div class="line">    _Block_object_assign((char*)dst + 40, *(void * *) ((char*)src + 40), 131);</div><div class="line">&#125;</div><div class="line">static void __Block_byref_id_object_dispose_131(void *src) </div><div class="line">&#123;</div><div class="line">    _Block_object_dispose(*(void * *) ((char*)src + 40), 131);</div><div class="line">&#125;</div><div class="line">/* __block variable declaration */</div><div class="line">__Block_byref_obj_0 obj = &#123; 0,</div><div class="line">                            &amp;obj,</div><div class="line">                            0x2000000, </div><div class="line">                            sizeof(__Block_byref_obj_0), </div><div class="line">                            __Block_byref_id_object_copy_131, </div><div class="line">                            __Block_byref_id_object_dispose_131,</div><div class="line">                            [[NSObject alloc] init]</div><div class="line">                           &#125;;</div></pre></td></tr></table></figure>
<p><strong>block id </strong>strong obj çš„ä½œç”¨å’Œ id <strong>strong obj çš„ä½œç”¨ååˆ†ç±»ä¼¼ã€‚å½“ </strong>block id <strong>strong obj ä»æ ˆä¸Šæ‹·è´åˆ°å †ä¸Šæ—¶ï¼Œ_Block_object_assign è¢«è°ƒç”¨ï¼Œblock æŒæœ‰ objï¼›å½“ </strong>block id __strong obj ä»å †ä¸Šè¢«åºŸå¼ƒæ—¶ï¼Œ_Block_object_dispose è¢«è°ƒç”¨ç”¨ä»¥é‡Šæ”¾æ­¤å¯¹è±¡ï¼Œblock å¼•ç”¨æ¶ˆå¤±ã€‚</p>
<p>æ‰€ä»¥ï¼Œåªè¦æ˜¯å †ä¸Šçš„ <strong>strong ä¿®é¥°ç¬¦ä¿®é¥°çš„ </strong>block å¯¹è±¡ç±»å‹çš„å˜é‡ï¼Œå’Œ block å†…è·å–åˆ°çš„ __strong ä¿®é¥°ç¬¦ä¿®é¥°çš„å¯¹è±¡ç±»å‹çš„å˜é‡ï¼Œç¼–è¯‘å™¨éƒ½èƒ½å¯¹å®ƒä»¬çš„å†…å­˜è¿›è¡Œé€‚å½“çš„ç®¡ç†ã€‚</p>
<p>å¦‚æœä¸Šé¢çš„ <strong>strong æ¢æˆ </strong>weakï¼Œç»“æœä¼šæ€æ ·å‘¢ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">/********************** capturing __weak objects **********************/</div><div class="line">typedef void (^blk_t)(id obj);</div><div class="line">blk_t blk;</div><div class="line">- (void)viewDidLoad</div><div class="line">&#123;</div><div class="line">    [self captureObject];</div><div class="line">    blk([[NSObject alloc] init]);</div><div class="line">    blk([[NSObject alloc] init]);</div><div class="line">    blk([[NSObject alloc] init]);</div><div class="line">&#125;</div><div class="line">- (void)captureObject</div><div class="line">&#123;</div><div class="line">    id array = [[NSMutableArray alloc] init]; </div><div class="line">    id __weak array2 = array;</div><div class="line">    blk = [^(id obj) &#123;</div><div class="line">             [array2 addObject:obj];</div><div class="line">             NSLog(@&quot;array2 count = %ld&quot;, [array2 count]);</div><div class="line">          &#125; copy];</div><div class="line">&#125;</div><div class="line">ç»“æœæ˜¯ï¼š</div><div class="line"></div><div class="line">array2 count = 0</div><div class="line">array2 count = 0</div><div class="line">array2 count = 0</div></pre></td></tr></table></figure>
<p>åŸå› å¾ˆç®€å•ï¼Œarray2 æ˜¯å¼±å¼•ç”¨ï¼Œå½“å˜é‡ä½œç”¨åŸŸç»“æŸï¼Œarray æ‰€æŒ‡å‘çš„å¯¹è±¡å†…å­˜è¢«é‡Šæ”¾ï¼Œarray2 æŒ‡å‘ nilï¼Œå‘ nil å¯¹è±¡å‘é€ count æ¶ˆæ¯å°±è¿”å›ç»“æœ 0 äº†ã€‚</p>
<p>å¦‚æœ <strong>weak å†æ”¹æˆ </strong>unsafe_unretained å‘¢ï¼Ÿ__unsafe_unretained ä¿®é¥°çš„å¯¹è±¡å˜é‡æŒ‡é’ˆå°±ç›¸å½“äºä¸€ä¸ªæ™®é€šæŒ‡é’ˆã€‚ä½¿ç”¨è¿™ä¸ªä¿®é¥°ç¬¦æœ‰ç‚¹éœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œå½“æŒ‡é’ˆæ‰€æŒ‡å‘çš„å¯¹è±¡å†…å­˜è¢«é‡Šæ”¾æ—¶ï¼ŒæŒ‡é’ˆå˜é‡ä¸ä¼šè¢«ç½®ä¸º nilã€‚æ‰€ä»¥å½“ä½¿ç”¨è¿™ä¸ªä¿®é¥°ç¬¦æ—¶ï¼Œä¸€å®šè¦æ³¨æ„ä¸è¦é€šè¿‡æ‚¬æŒ‚æŒ‡é’ˆï¼ˆæŒ‡å‘è¢«åºŸå¼ƒå†…å­˜çš„æŒ‡é’ˆï¼‰æ¥è®¿é—®å·²ç»è¢«åºŸå¼ƒçš„å¯¹è±¡å†…å­˜ï¼Œå¦åˆ™ç¨‹åºå°±ä¼šå´©æºƒã€‚</p>
<p>å¦‚æœ <strong>unsafe_unretained å†æ”¹æˆ </strong>autoreleasing ä¼šæ€æ ·å‘¢ï¼Ÿä¼šæŠ¥é”™ï¼Œç¼–è¯‘å™¨å¹¶ä¸å…è®¸ä½ è¿™ä¹ˆå¹²ï¼å¦‚æœä½ è¿™ä¹ˆå†™</p>
<p><code>__block id __autoreleasing obj = [[NSObject alloc] init];</code><br>ç¼–è¯‘å™¨å°±ä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯ï¼Œæ„æ€å°±æ˜¯ <strong>block å’Œ </strong>autoreleasing ä¸èƒ½åŒæ—¶ä½¿ç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">error: __block variables cannot have __autoreleasing ownership __block id __autoreleasing obj = [[NSObject alloc] init];</div></pre></td></tr></table></figure>
<h2 id="å¾ªç¯å¼•ç”¨"><a href="#å¾ªç¯å¼•ç”¨" class="headerlink" title="å¾ªç¯å¼•ç”¨"></a>å¾ªç¯å¼•ç”¨</h2><p>åƒè¾›ä¸‡è‹¦ï¼Œé‡å¤´æˆç»ˆäºæ¥äº†ã€‚block å¦‚æœä½¿ç”¨ä¸å°å¿ƒï¼Œå°±å®¹æ˜“å‡ºç°å¾ªç¯å¼•ç”¨ï¼Œå¯¼è‡´å†…å­˜æ³„éœ²ã€‚åˆ°åº•å“ªé‡Œæ³„éœ²äº†å‘¢ï¼Ÿé€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œå„ä½ç«¥é‹åº”è¯¥æœ‰ä¸ªåº•äº†ï¼Œä¸‹é¢å°±è®©æˆ‘ä»¬ä¸€èµ·è¿›å…¥è¿™æ³„éœ²åœ°åŒºç§ç§ï¼Œå“ªå„¿å‡ºäº†é—®é¢˜ï¼</p>
<p>æ„‰å¿«çš„ä»£ç æ—¶é—´åˆ°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">// ARC enabled</div><div class="line">/************** MyObject Class **************/</div><div class="line">typedef void (^blk_t)(void);</div><div class="line">@interface MyObject : NSObject</div><div class="line">&#123;</div><div class="line">    blk_t blk_;</div><div class="line">&#125; </div><div class="line">@end</div><div class="line">@implementation MyObject</div><div class="line">- (id)init</div><div class="line">&#123;</div><div class="line">    self = [super init];</div><div class="line">    blk_ = ^&#123;NSLog(@&quot;self = %@&quot;, self);&#125;; </div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line">- (void)dealloc</div><div class="line">&#123;</div><div class="line">    NSLog(@&quot;dealloc&quot;);</div><div class="line">&#125; </div><div class="line">@end</div><div class="line">/************** main function **************/</div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    id myObject = [[MyObject alloc] init]; </div><div class="line">    NSLog(@&quot;%@&quot;, myObject);</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç”±äº self æ˜¯ __strong ä¿®é¥°ï¼Œåœ¨ ARC ä¸‹ï¼Œå½“ç¼–è¯‘å™¨è‡ªåŠ¨å°†ä»£ç ä¸­çš„ block ä»æ ˆæ‹·è´åˆ°å †æ—¶ï¼Œblock ä¼šå¼ºå¼•ç”¨å’ŒæŒæœ‰ selfï¼Œè€Œ self æ°å¥½ä¹Ÿå¼ºå¼•ç”¨å’ŒæŒæœ‰äº† blockï¼Œå°±é€ æˆäº†ä¼ è¯´ä¸­çš„å¾ªç¯å¼•ç”¨ã€‚</p>
<p><img src="http://i1.piimg.com/567571/e54d448697dabc19.png" alt=""></p>
<p>ç”±äºå¾ªç¯å¼•ç”¨çš„å­˜åœ¨ï¼Œé€ æˆåœ¨ main() å‡½æ•°ç»“æŸæ—¶ï¼Œå†…å­˜ä»ç„¶æ— æ³•é‡Šæ”¾ï¼Œå³å†…å­˜æ³„éœ²ã€‚ç¼–è¯‘å™¨ä¹Ÿä¼šç»™å‡ºè­¦å‘Šä¿¡æ¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">warning: capturing &apos;self&apos; strongly in this block is likely to lead to a retain cycle [-Warc-retain-cycles] </div><div class="line">blk_ = ^&#123;NSLog(@&quot;self = %@&quot;, self);&#125;;</div><div class="line"></div><div class="line">note: Block will be retained by an object strongly retained by the captured object </div><div class="line">blk_ = ^&#123;NSLog(@&quot;self = %@&quot;, self);&#125;;</div></pre></td></tr></table></figure></p>
<p>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œå¯ä»¥åœ¨å˜é‡å£°æ˜æ—¶ç”¨ <strong>weak ä¿®é¥°ç¬¦ä¿®é¥°å˜é‡ selfï¼Œè®© block ä¸å¼ºå¼•ç”¨ selfï¼Œä»è€Œç ´é™¤å¾ªç¯ã€‚iOS4 å’Œ Snow Leopard ç”±äºå¯¹ weak çš„æ”¯æŒä¸å¤Ÿå®Œå…¨ï¼Œå¯ä»¥ç”¨ </strong>unsafe_unretained ä»£æ›¿ã€‚<br>Æ’<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">- (id)init</div><div class="line">&#123;</div><div class="line">    self = [super init];</div><div class="line">    id __weak tmp = self;</div><div class="line">    blk_ = ^&#123;NSLog(@&quot;self = %@&quot;, tmp);&#125;; </div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line">``` </div><div class="line"></div><div class="line">![](http://i1.piimg.com/567571/b1057b9ff703d7cd.png)</div><div class="line"></div><div class="line">å†çœ‹ä¸€ä¸ªä¾‹å­</div></pre></td></tr></table></figure></p>
<p>@interface MyObject : NSObject<br>{<br>    blk<em>t blk</em>;<br>    id obj_;<br>}<br>@end<br>@implementation MyObject </p>
<ul>
<li>(id)init<br>{<br>  self = [super init];<br>  blk<em> = ^{ NSLog(@â€obj</em> = %@â€, obj_); };<br>  return self;<br>}<br>â€¦<br>â€¦<br>@end<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè™½ç„¶æ²¡æœ‰ç›´æ¥ä½¿ç”¨ selfï¼Œå´ä¹Ÿå­˜åœ¨å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚å› ä¸ºå¯¹äºç¼–è¯‘å™¨æ¥è¯´ï¼Œobj_ å°±ç›¸å½“äº self-&gt;obj_ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å°±ä¼šå˜æˆ</div><div class="line"></div><div class="line">`blk_ = ^&#123; NSLog(@&quot;obj_ = %@&quot;, self-&gt;obj_); &#125;;`</div><div class="line">æ‰€ä»¥è¿™ä¸ªä¾‹å­åªè¦ç”¨ __weakï¼Œåœ¨ init æ–¹æ³•é‡Œé¢åŠ ä¸€è¡Œå³å¯</div><div class="line"></div><div class="line">`id __weak obj = obj_;`</div><div class="line">ç ´è§£å¾ªç¯å¼•ç”¨è¿˜æœ‰ä¸€æ‹›ï¼Œä½¿ç”¨ __block ä¿®é¥°å¯¹è±¡ï¼Œåœ¨ block å†…å°†å¯¹è±¡ç½®ä¸º nil å³å¯ï¼Œå¦‚ä¸‹</div></pre></td></tr></table></figure>
</li>
</ul>
<p>typedef void (^blk_t)(void);<br>@interface MyObject : NSObject<br>{<br>    blk<em>t blk</em>;<br>}<br>@end<br>@implementation MyObject </p>
<ul>
<li>(id)init<br>{<br>  self = [super init];<br>  _<em>block id tmp = self;<br>  blk</em> = ^{ <pre><code>    NSLog(@&quot;self = %@&quot;, tmp);
    tmp = nil; 
};
</code></pre>  return self;<br>}</li>
<li>(void)execBlock<br>{<br>  blk_();<br>}</li>
<li>(void)dealloc<br>{<br>  NSLog(@â€deallocâ€);<br>}<br>@end<br>int main()<br>{<br>  id object = [[MyObject alloc] init];<br>  [object execBlock];<br>  return 0;<br>}<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">è¿™ä¸ªä¾‹å­æŒºæœ‰æ„æ€çš„ï¼Œå¦‚æœæ‰§è¡Œ execBlock æ–¹æ³•ï¼Œå°±æ²¡æœ‰å¾ªç¯å¼•ç”¨ï¼Œå¦‚æœä¸æ‰§è¡Œå°±æœ‰å¾ªç¯å¼•ç”¨ï¼ŒæŒºå€¼å¾—ç©å‘³çš„ã€‚ä¸€æ–¹é¢ï¼Œä½¿ç”¨ __block æŒºå±é™©çš„ï¼Œä¸‡ä¸€ä»£ç ä¸­ä¸æ‰§è¡Œ block ï¼Œå°±é€ æˆäº†å¾ªç¯å¼•ç”¨ï¼Œè€Œä¸”ç¼–è¯‘å™¨è¿˜æ²¡æ³•æ£€æŸ¥å‡ºæ¥ï¼›å¦ä¸€æ–¹é¢ï¼Œä½¿ç”¨ __block å¯ä»¥è®©æˆ‘ä»¬é€šè¿‡ __block å˜é‡å»æ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œè€Œä¸”æœ‰å¯èƒ½åœ¨ä¸€äº›éå¸¸è€æ—§çš„ MRC ä»£ç ä¸­ï¼Œç”±äºä¸æ”¯æŒ __weakï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•æ¥ä»£æ›¿ __unsafe_unretainedï¼Œä»è€Œé¿å…æ‚¬æŒ‚æŒ‡é’ˆçš„é—®é¢˜ã€‚</div><div class="line"></div><div class="line">è¿˜æœ‰ä¸ªå€¼å¾—ä¸€æçš„æ—¶ï¼Œåœ¨ MRC ä¸‹ï¼Œä½¿ç”¨ __block è¯´æ˜ç¬¦ä¹Ÿå¯ä»¥é¿å…å¾ªç¯å¼•ç”¨ã€‚å› ä¸ºå½“ block ä»æ ˆæ‹·è´åˆ°å †æ—¶ï¼Œ__block å¯¹è±¡ç±»å‹çš„å˜é‡ä¸ä¼šè¢« retainï¼Œæ²¡æœ‰ __block è¯´æ˜ç¬¦çš„å¯¹è±¡ç±»å‹çš„å˜é‡åˆ™ä¼šè¢« retianã€‚æ­£æ˜¯ç”±äº __block åœ¨ ARC å’Œ MRC ä¸‹çš„å·¨å¤§å·®å¼‚ï¼Œæˆ‘ä»¬åœ¨å†™ä»£ç æ—¶ä¸€å®šè¦åŒºåˆ†æ¸…æ¥šåˆ°åº•æ˜¯ ARC è¿˜æ˜¯ MRCã€‚</div><div class="line"></div><div class="line">&gt;å°½ç®¡ ARC å·²ç»å¦‚æ­¤æ™®åŠï¼Œæˆ‘ä»¬å¯èƒ½å·²ç»å¯ä»¥ä¸ç”¨å»ç®¡ MRC çš„ä¸œè¥¿ï¼Œä½†è¦æœ‰ç‚¹ä¸€å®šè¦æ˜ç™½ï¼ŒARC å’Œ MRC éƒ½æ˜¯åŸºäºå¼•ç”¨è®¡æ•°çš„å†…å­˜ç®¡ç†ï¼Œå…¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œåªä¸è¿‡ ARC åœ¨ç¼–è¯‘æœŸè‡ªåŠ¨åŒ–çš„åšäº†å†…å­˜å¼•ç”¨è®¡æ•°çš„ç®¡ç†ï¼Œä½¿å¾—ç³»ç»Ÿå¯ä»¥åœ¨é€‚å½“çš„æ—¶å€™ä¿ç•™å†…å­˜ï¼Œé€‚å½“çš„æ—¶å€™é‡Šæ”¾å†…å­˜ã€‚</div><div class="line">å¾ªç¯å¼•ç”¨åˆ°æ­¤ä¸ºæ­¢ï¼Œä¸œè¥¿å¹¶ä¸å¤šã€‚å¦‚æœæ˜ç™½äº†ä¹‹å‰çš„çŸ¥è¯†ç‚¹ï¼Œå°±ä¼šäº†è§£å¾ªç¯å¼•ç”¨ä¸è¿‡æ˜¯å‰é¢çŸ¥è¯†ç‚¹çš„è‡ªç„¶å»¶ä¼¸ç‚¹ç½¢äº†ã€‚</div><div class="line"></div><div class="line">## Copy å’Œ Release</div><div class="line"></div><div class="line">åœ¨ ARC ä¸‹ï¼Œæœ‰æ—¶éœ€è¦æ‰‹åŠ¨æ‹·è´å’Œé‡Šæ”¾ blockã€‚åœ¨ MRC ä¸‹æ›´æ˜¯å¦‚æ­¤ï¼Œå¯ä»¥ç›´æ¥ç”¨ copy å’Œ release æ¥æ‹·è´å’Œé‡Šæ”¾</div></pre></td></tr></table></figure>
</li>
</ul>
<p>void (^blk_on_heap)(void) = [blk_on_stack copy];<br>[blk_on_heap release];<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">æ‹·è´åˆ°å †åï¼Œå°±å¯ä»¥ ç”¨ retain æŒæœ‰ block</div></pre></td></tr></table></figure></p>
<p>[blk_on_heap retain];<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ç„¶è€Œå¦‚æœ block åœ¨æ ˆä¸Šï¼Œä½¿ç”¨ retain æ˜¯æ¯«æ— æ•ˆæœçš„ï¼Œå› æ­¤æ¨èä½¿ç”¨ copy æ–¹æ³•æ¥æŒæœ‰ blockã€‚</div><div class="line"></div><div class="line">block æ˜¯ C è¯­è¨€çš„æ‰©å±•ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ C ä¸­ä½¿ç”¨ block çš„è¯­æ³•ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ Block_copy å’Œ Block_release å‡½æ•°æ¥ä»£æ›¿ copy å’Œ release æ–¹æ³•</div></pre></td></tr></table></figure></p>
<p>void (^blk_on_heap)(void) = Block_copy(blk_on_stack);<br>Block_release(blk_on_heap);<br>```<br>Block_copy çš„ä½œç”¨ç›¸å½“äºä¹‹å‰çœ‹åˆ°è¿‡çš„ _Block_copy å‡½æ•°ï¼Œè€Œä¸” Objective-C runtime åº“åœ¨è¿è¡Œæ—¶æ‹·è´ block ç”¨çš„å°±æ˜¯è¿™ä¸ªå‡½æ•°ã€‚åŒç†ï¼Œé‡Šæ”¾ block æ—¶ï¼Œruntime è°ƒç”¨äº† Block_release å‡½æ•°ã€‚</p>
<p>æœ€åè¿™é‡Œæœ‰ä¸€ç¯‡æ€»ç»“ block çš„æ–‡ç« çš„å¾ˆä¸é”™ï¼Œæ¨èå¤§å®¶çœ‹çœ‹ï¼š<a href="http://tanqisen.github.io/blog/2013/04/19/gcd-block-cycle-retain/" target="_blank" rel="external">http://tanqisen.github.io/blog/2013/04/19/gcd-block-cycle-retain/</a></p>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOSåŸºç¡€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[(è½¬)blockè¿›é˜¶2--blockå’Œå˜é‡å†…å­˜ç®¡ç†]]></title>
      <url>/2016/06/25/2016/%E8%BD%AC-block%E8%BF%9B%E9%98%B62-block%E5%92%8C%E5%8F%98%E9%87%8F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</url>
      <content type="html"><![CDATA[<p>äº†è§£äº† blockçš„å®ç°ï¼Œæˆ‘ä»¬æ¥ç€æ¥èŠèŠ block å’Œå˜é‡çš„å†…å­˜ç®¡ç†ã€‚æœ¬æ–‡å°†ä»‹ç»å¯å†™å˜é‡ã€blockçš„å†…å­˜æ®µã€__blockå˜é‡çš„å†…å­˜æ®µç­‰å†…å®¹ï¼Œçœ‹å®Œæœ¬æ–‡ä¼šå¯¹ block å’Œå˜é‡çš„å†…å­˜ç®¡ç†æœ‰æ›´åŠ æ¸…æ™°çš„è®¤è¯†ã€‚<br><a id="more"></a><br>ä¸Šç¯‡æ–‡ç« ä¸¾äº†ä¸ªä¾‹å­ï¼Œåœ¨ block å†…è·å–äº†ä¸€ä¸ªå¤–éƒ¨çš„å±€éƒ¨å˜é‡ï¼Œå¯ä»¥è¯»å–ï¼Œä½†æ— æ³•è¿›è¡Œå†™å…¥çš„ä¿®æ”¹æ“ä½œã€‚åœ¨ C è¯­è¨€ä¸­æœ‰ä¸‰ç§ç±»å‹çš„å˜é‡ï¼Œå¯åœ¨ block å†…è¿›è¡Œè¯»å†™æ“ä½œ</p>
<blockquote>
<ul>
<li>å…¨å±€å˜é‡</li>
<li>å…¨å±€é™æ€å˜é‡</li>
<li>é™æ€å˜é‡</li>
</ul>
</blockquote>
<p>å…¨å±€å˜é‡ å’Œ å…¨å±€é™æ€å˜é‡ ç”±äºä½œç”¨åŸŸåœ¨å…¨å±€ï¼Œæ‰€ä»¥åœ¨ block å†…è®¿é—®å’Œè¯»å†™è¿™ä¸¤ç±»å˜é‡å’Œæ™®é€šå‡½æ•°æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œè€Œ é™æ€å˜é‡ ä½œç”¨åŸŸåœ¨ block ä¹‹å¤–ï¼Œæ˜¯æ€ä¹ˆå¯¹å®ƒè¿›è¡Œè¯»å†™å‘¢ï¼Ÿé€šè¿‡ clang å·¥å…·ï¼Œæˆ‘ä»¬å‘ç°åŸæ¥ é™æ€å˜é‡ æ˜¯é€šè¿‡æŒ‡é’ˆä¼ é€’ï¼Œå°†å˜é‡ä¼ é€’åˆ° block å†…ï¼Œæ‰€ä»¥å¯ä»¥ä¿®æ”¹å˜é‡å€¼ã€‚è€Œä¸Šç¯‡æ–‡ç« ä¸­çš„å¤–éƒ¨å˜é‡æ˜¯é€šè¿‡å€¼ä¼ é€’ï¼Œè‡ªç„¶æ²¡æ³•å¯¹è·å–åˆ°çš„å¤–éƒ¨å˜é‡è¿›è¡Œä¿®æ”¹ã€‚ç”±æ­¤ï¼Œå¯ä»¥ç»™æˆ‘ä»¬ä¸€ä¸ªå¯ç¤ºï¼Œå½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹å¤–éƒ¨å˜é‡æ—¶ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥åƒ é™æ€å˜é‡ è¿™æ ·é€šè¿‡æŒ‡é’ˆæ¥ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼å‘¢ï¼Ÿ</p>
<p>Apple æ—©å°±ä¸ºæˆ‘ä»¬å‡†å¤‡äº†è¿™ä¹ˆä¸€ä¸ªä¸œè¥¿ â€”â€” â€œ__blockâ€</p>
<h2 id="block-è¯´æ˜ç¬¦"><a href="#block-è¯´æ˜ç¬¦" class="headerlink" title="__block è¯´æ˜ç¬¦"></a>__block è¯´æ˜ç¬¦</h2><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œé‡å†™ä¸€å°æ®µä»£ç çœ‹çœ‹ __block çš„çœŸèº«<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/************* ä½¿ç”¨ __block çš„æºç  *************/</div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    __block int intValue = 0;</div><div class="line">    void (^blk)(void) = ^&#123;</div><div class="line">        intValue = 1;</div><div class="line">    &#125;;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line">/************* ä½¿ç”¨ clang ç¿»è¯‘åå¦‚ä¸‹ *************/</div><div class="line">struct __block_impl</div><div class="line">&#123;</div><div class="line">    void *isa;</div><div class="line">    int Flags;</div><div class="line">    int Reserved;</div><div class="line">    void *FuncPtr;</div><div class="line">&#125;;</div><div class="line">struct __Block_byref_intValue_0</div><div class="line">&#123;</div><div class="line">    void *__isa;</div><div class="line">    __Block_byref_intValue_0 *__forwarding;</div><div class="line">    int __flags;</div><div class="line">    int __size;</div><div class="line">    int intValue;</div><div class="line">&#125;;</div><div class="line">struct __main_block_impl_0</div><div class="line">&#123;</div><div class="line">    struct __block_impl impl;</div><div class="line">    struct __main_block_desc_0* Desc;</div><div class="line">    __Block_byref_intValue_0 *intValue; // by ref</div><div class="line">    __main_block_impl_0(void *fp, struct __main_block_desc_0 *desc, __Block_byref_intValue_0 *_intValue, int flags=0) : intValue(_intValue-&gt;__forwarding)</div><div class="line">    &#123;</div><div class="line">        impl.isa = &amp;_NSConcreteStackBlock;</div><div class="line">        impl.Flags = flags;</div><div class="line">        impl.FuncPtr = fp;</div><div class="line">        Desc = desc;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">static void __main_block_func_0(struct __main_block_impl_0 *__cself)</div><div class="line">&#123;</div><div class="line">    __Block_byref_intValue_0 *intValue = __cself-&gt;intValue; // bound by ref</div><div class="line">    (intValue-&gt;__forwarding-&gt;intValue) = 1;</div><div class="line">&#125;</div><div class="line">static void __main_block_copy_0(struct __main_block_impl_0 *dst, struct __main_block_impl_0 *src)</div><div class="line">&#123;</div><div class="line">    _Block_object_assign((void*)&amp;dst-&gt;intValue, (void*)src-&gt;intValue, 8/*BLOCK_FIELD_IS_BYREF*/);</div><div class="line">&#125;</div><div class="line">static void __main_block_dispose_0(struct __main_block_impl_0 *src)</div><div class="line">&#123;</div><div class="line">    _Block_object_dispose((void*)src-&gt;intValue, 8/*BLOCK_FIELD_IS_BYREF*/);</div><div class="line">&#125;</div><div class="line">static struct __main_block_desc_0</div><div class="line">&#123;</div><div class="line">    size_t reserved;</div><div class="line">    size_t Block_size;</div><div class="line">    void (*copy)(struct __main_block_impl_0*, struct __main_block_impl_0*);</div><div class="line">    void (*dispose)(struct __main_block_impl_0*);</div><div class="line">&#125; __main_block_desc_0_DATA = &#123;  0, </div><div class="line">                                sizeof(struct __main_block_impl_0), </div><div class="line">                                __main_block_copy_0, </div><div class="line">                                __main_block_dispose_0</div><div class="line">                             &#125;;</div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    __attribute__((__blocks__(byref))) __Block_byref_intValue_0 \</div><div class="line">    intValue = </div><div class="line">    &#123;</div><div class="line">        (void*)0,</div><div class="line">        (__Block_byref_intValue_0 *)&amp;intValue, </div><div class="line">        0, </div><div class="line">        sizeof(__Block_byref_intValue_0), </div><div class="line">        0</div><div class="line">    &#125;;</div><div class="line">    void (*blk)(void) = (void (*)()) &amp;__main_block_impl_0   \</div><div class="line">                (</div><div class="line">                    (void *)__main_block_func_0,            \</div><div class="line">                    &amp;__main_block_desc_0_DATA,              \</div><div class="line">                    (__Block_byref_intValue_0 *)&amp;intValue,  \</div><div class="line">                    570425344                               \</div><div class="line">                );</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨åŠ äº† __block ä¹‹åï¼Œä»£ç é‡å¢åŠ äº†ä¸å°‘ï¼Œä»”ç»†æŸ¥çœ‹ï¼Œå…¶å®åªæ˜¯æ¯”åŸæ¥å¤šäº†</p>
<blockquote>
<p>-<strong>Block_byref_intValue_0 ç»“æ„ä½“ï¼šç”¨äºå°è£… </strong>block ä¿®é¥°çš„å¤–éƒ¨å˜é‡ã€‚</p>
<ul>
<li>_Block_object_assign å‡½æ•°ï¼šå½“ block ä»æ ˆæ‹·è´åˆ°å †æ—¶ï¼Œè°ƒç”¨æ­¤å‡½æ•°ã€‚</li>
<li>_Block_object_dispose å‡½æ•°ï¼šå½“ block ä»å †å†…å­˜é‡Šæ”¾æ—¶ï¼Œè°ƒç”¨æ­¤å‡½æ•°ã€‚</li>
</ul>
</blockquote>
<p>OCæºç ä¸­çš„ <strong>block intValue ç¿»è¯‘åå˜æˆäº† </strong>Block_byref_intValue_0 ç»“æ„ä½“æŒ‡é’ˆå˜é‡ intValueï¼Œé€šè¿‡æŒ‡é’ˆä¼ é€’åˆ° block å†…ï¼Œè¿™ä¸å‰é¢è¯´çš„ é™æ€å˜é‡ çš„æŒ‡é’ˆä¼ é€’æ˜¯ä¸€è‡´çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ•´ä½“çš„æ‰§è¡Œæµç¨‹ä¸ä¸åŠ  <strong>block åŸºæœ¬ä¸€è‡´ï¼Œä¸å†èµ˜è¿°ã€‚ä½† </strong>Block_byref_intValue_0 è¿™ä¸ªç»“æ„ä½“éœ€ç‰¹åˆ«æ³¨æ„ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// å­˜å‚¨ __block å¤–éƒ¨å˜é‡çš„ç»“æ„ä½“</div><div class="line">struct __Block_byref_intValue_0</div><div class="line">&#123;</div><div class="line">    void *__isa; // å¯¹è±¡æŒ‡é’ˆ</div><div class="line">    __Block_byref_intValue_0 *__forwarding; // æŒ‡å‘è‡ªå·±çš„æŒ‡é’ˆ</div><div class="line">    int __flags; // æ ‡å¿—ä½å˜é‡</div><div class="line">    int __size; // ç»“æ„ä½“å¤§å°</div><div class="line">    int intValue; // å¤–éƒ¨å˜é‡</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p><img src="http://i4.piimg.com/567571/edba9eda9e760d13.png" alt=""><br>åœ¨å·²æœ‰ç»“æ„ä½“æŒ‡é’ˆæŒ‡å‘ <code>__Block_byref_intValue_0</code> æ—¶ï¼Œç»“æ„ä½“é‡Œé¢è¿˜å¤šäº†ä¸ª __forwarding æŒ‡å‘è‡ªå·±çš„æŒ‡é’ˆå˜é‡ï¼Œéš¾é“ä¸æ˜¾å¾—å¤šä½™å—ï¼Ÿä¸€ç‚¹ä¹Ÿä¸ï¼Œæœ¬æ–‡åé¢ä¼šé˜è¿°ã€‚</p>
<h2 id="block-çš„å†…å­˜ç®¡ç†"><a href="#block-çš„å†…å­˜ç®¡ç†" class="headerlink" title="block çš„å†…å­˜ç®¡ç†"></a>block çš„å†…å­˜ç®¡ç†</h2><p>åœ¨å‰æ–‡ä¸­ï¼Œå·²ç»æåˆ°äº† block çš„ä¸‰ç§ç±»å‹ <code>NSConcreteGlobalBlock</code>ã€<code>_NSConcreteStackBlock</code>ã€<code>_NSConcreteMallocBlock</code>ï¼Œè§åçŸ¥æ„ï¼Œå¯ä»¥çœ‹å‡ºä¸‰ç§ block åœ¨å†…å­˜ä¸­çš„åˆ†å¸ƒ<br><img src="http://i4.piimg.com/567571/ab4b00f9b39f146a.png" alt=""></p>
<h3 id="NSConcreteGlobalBlock"><a href="#NSConcreteGlobalBlock" class="headerlink" title="_NSConcreteGlobalBlock"></a>_NSConcreteGlobalBlock</h3><blockquote>
<ul>
<li>1ã€å½“ block å­—é¢é‡å†™åœ¨å…¨å±€ä½œç”¨åŸŸæ—¶ï¼Œå³ä¸º global blockï¼› </li>
<li>2ã€å½“ block å­—é¢é‡ä¸è·å–ä»»ä½•å¤–éƒ¨å˜é‡æ—¶ï¼Œå³ä¸º global blockï¼›</li>
</ul>
</blockquote>
<p>é™¤äº†ä¸Šè¿°æè¿°çš„ä¸¤ç§æƒ…å†µï¼Œå…¶ä»–å½¢å¼åˆ›å»ºçš„ block å‡ä¸º stack blockã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// ä¸‹é¢ block è™½ç„¶å®šä¹‰åœ¨ for å¾ªç¯å†…ï¼Œä½†ç¬¦åˆç¬¬äºŒç§æƒ…å†µï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ global block</div><div class="line">typedef int (^blk_t)(int);</div><div class="line">for (int rate = 0; rate &lt; 10; ++rate) </div><div class="line">&#123;</div><div class="line">    blk_t blk = ^(int count)&#123;return rate * count;&#125;; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>_NSConcreteGlobalBlock ç±»å‹çš„ block å¤„äºå†…å­˜çš„ ROData æ®µï¼Œæ­¤å¤„æ²¡æœ‰å±€éƒ¨å˜é‡çš„éªšæ‰°ï¼Œè¿è¡Œä¸ä¾èµ–ä¸Šä¸‹æ–‡ï¼Œå†…å­˜ç®¡ç†ä¹Ÿç®€å•çš„å¤šã€‚</p>
<h3 id="NSConcreteStackBlock"><a href="#NSConcreteStackBlock" class="headerlink" title="_NSConcreteStackBlock"></a>_NSConcreteStackBlock</h3><p>_NSConcreteStackBlock ç±»å‹çš„ block å¤„äºå†…å­˜çš„æ ˆåŒºã€‚global block ç”±äºå¤„åœ¨ data æ®µï¼Œå¯ä»¥é€šè¿‡æŒ‡é’ˆå®‰å…¨è®¿é—®ï¼Œä½† stack block å¤„åœ¨å†…å­˜æ ˆåŒºï¼Œå¦‚æœå…¶å˜é‡ä½œç”¨åŸŸç»“æŸï¼Œè¿™ä¸ª block å°±è¢«åºŸå¼ƒï¼Œblock ä¸Šçš„ __block å˜é‡ä¹ŸåŒæ ·ä¼šè¢«åºŸå¼ƒã€‚<br><img src="http://i4.piimg.com/567571/eb42780701d9dfdd.png" alt=""></p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œblock æä¾›äº† copy çš„åŠŸèƒ½ï¼Œå°† block å’Œ __block å˜é‡ä»æ ˆæ‹·è´åˆ°å †ï¼Œå°±æ˜¯ä¸‹é¢è¦è¯´çš„ _NSConcreteMallocBlockã€‚</p>
<h3 id="NSConcreteMallocBlock"><a href="#NSConcreteMallocBlock" class="headerlink" title="_NSConcreteMallocBlock"></a>_NSConcreteMallocBlock</h3><p>å½“ block ä»æ ˆæ‹·è´åˆ°å †åï¼Œå½“æ ˆä¸Šå˜é‡ä½œç”¨åŸŸç»“æŸæ—¶ï¼Œä»ç„¶å¯ä»¥ç»§ç»­ä½¿ç”¨ block<br><img src="http://i4.piimg.com/567571/a4cf5bfee64c0faf.png" alt=""><br>æ­¤æ—¶ï¼Œå †ä¸Šçš„ block ç±»å‹ä¸º _NSConcreteMallocBlockï¼Œæ‰€ä»¥ä¼šå°† _NSConcreteMallocBlock å†™å…¥ isa</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">impl.isa = &amp;_NSConcreteMallocBlock;</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ ç»†å¿ƒçš„è§‚å¯Ÿä¸Šé¢çš„è½¬æ¢åçš„ä»£ç ï¼Œä¼šå‘ç°è®¿é—®ç»“æ„ä½“ <strong>Block_byref_intValue_0 å†…éƒ¨çš„æˆå‘˜å˜é‡éƒ½æ˜¯é€šè¿‡è®¿é—® </strong>forwarding æŒ‡é’ˆå®Œæˆçš„ã€‚ä¸ºäº†ä¿è¯èƒ½æ­£ç¡®è®¿é—®æ ˆä¸Šçš„ <strong>block å˜é‡ï¼Œè¿›è¡Œ copy æ“ä½œæ—¶ï¼Œä¼šå°†æ ˆä¸Šçš„ </strong>forwarding æŒ‡é’ˆæŒ‡å‘äº†å †ä¸Šçš„ block ç»“æ„ä½“å®ä¾‹ã€‚</p>
<h2 id="block-çš„è‡ªåŠ¨æ‹·è´å’Œæ‰‹åŠ¨æ‹·è´"><a href="#block-çš„è‡ªåŠ¨æ‹·è´å’Œæ‰‹åŠ¨æ‹·è´" class="headerlink" title="block çš„è‡ªåŠ¨æ‹·è´å’Œæ‰‹åŠ¨æ‹·è´"></a>block çš„è‡ªåŠ¨æ‹·è´å’Œæ‰‹åŠ¨æ‹·è´</h2><p>åœ¨å¼€å¯ ARC æ—¶ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ç¼–è¯‘å™¨é€šå¸¸ä¼šå°†åˆ›å»ºåœ¨æ ˆä¸Šçš„ block è‡ªåŠ¨æ‹·è´åˆ°å †ä¸Šï¼Œåªæœ‰å½“</p>
<blockquote>
<p>block ä½œä¸ºæ–¹æ³•æˆ–å‡½æ•°çš„å‚æ•°ä¼ é€’æ—¶ï¼Œç¼–è¯‘å™¨ä¸ä¼šè‡ªåŠ¨è°ƒç”¨ copy æ–¹æ³•ï¼›</p>
</blockquote>
<p>ä½†æ–¹æ³•/å‡½æ•°åœ¨å†…éƒ¨å·²ç»å®ç°äº†ä¸€ä»½æ‹·è´äº† block å‚æ•°çš„ä»£ç ï¼Œæˆ–è€…å¦‚æœç¼–è¯‘å™¨è‡ªåŠ¨æ‹·è´ï¼Œé‚£ä¹ˆè°ƒç”¨è€…å°±ä¸éœ€å†æ‰‹åŠ¨æ‹·è´ï¼Œæ¯”å¦‚ï¼š</p>
<blockquote>
<ul>
<li>å½“ block ä½œä¸ºå‡½æ•°è¿”å›å€¼è¿”å›æ—¶ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨å°† block ä½œä¸º _Block_copy å‡½æ•°ï¼Œæ•ˆæœç­‰åŒäº block ç›´æ¥è°ƒç”¨ copy æ–¹æ³•ï¼›</li>
<li>å½“ block è¢«èµ‹å€¼ç»™ __strong id ç±»å‹çš„å¯¹è±¡æˆ– block çš„æˆå‘˜å˜é‡æ—¶ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨å°† block ä½œä¸º _Block_copy å‡½æ•°ï¼Œæ•ˆæœç­‰åŒäº block ç›´æ¥è°ƒç”¨ copy æ–¹æ³•ï¼›</li>
<li>å½“ block ä½œä¸ºå‚æ•°è¢«ä¼ å…¥æ–¹æ³•åå¸¦æœ‰ usingBlock çš„ Cocoa Framework æ–¹æ³•æˆ– GCD çš„ API æ—¶ã€‚è¿™äº›æ–¹æ³•ä¼šåœ¨å†…éƒ¨å¯¹ä¼ é€’è¿›æ¥çš„ block è°ƒç”¨ copy æˆ– _Block_copy è¿›è¡Œæ‹·è´;</li>
</ul>
</blockquote>
<p>è®©æˆ‘ä»¬çœ‹ä¸ª block è‡ªåŠ¨æ‹·è´çš„ä¾‹å­<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">/************ ARCä¸‹ç¼–è¯‘å™¨è‡ªåŠ¨æ‹·è´block ************/</div><div class="line">typedef int (^blk_t)(int);</div><div class="line">blk_t func(int rate)</div><div class="line">&#123;</div><div class="line">    return ^(int count)&#123;return rate * count;&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢çš„ block è·å–äº†å¤–éƒ¨å˜é‡ï¼Œæ‰€ä»¥æ˜¯åˆ›å»ºåœ¨æ ˆä¸Šï¼Œå½“ func å‡½æ•°è¿”å›ç»™è°ƒç”¨è€…æ—¶ï¼Œè„±ç¦»äº†å±€éƒ¨å˜é‡ rate çš„ä½œç”¨èŒƒå›´ï¼Œå¦‚æœè°ƒç”¨è€…ä½¿ç”¨è¿™ä¸ª block å°±ä¼šå‡ºé—®é¢˜ã€‚é‚£ ARC å¼€å¯çš„æƒ…å†µå‘¢ï¼Ÿè¿è¡Œè¿™ä¸ª block ä¸€åˆ‡æ­£å¸¸ã€‚å’Œæˆ‘ä»¬çš„é¢„æœŸç»“æœä¸ä¸€æ ·ï¼ŒARC åˆ°åº•ç»™ block æ–½äº†ä»€ä¹ˆé­”æ³•ï¼Ÿæˆ‘ä»¬å°†ä¸Šé¢çš„ä»£ç ç¿»è¯‘ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">blk_t func(int rate)</div><div class="line">&#123;</div><div class="line">    blk_t tmp = &amp;__func_block_impl_0(__func_block_func_0, &amp;__func_block_desc_0_DATA, rate);</div><div class="line">    tmp = objc_retainBlock(tmp);</div><div class="line">    return objc_autoreleaseReturnValue(tmp); </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è½¬æ¢åå‡ºç°ä¸¤ä¸ªæ–°å‡½æ•° objc_retainBlockã€objc_autoreleaseReturnValueã€‚å¦‚æœä½ çœ‹è¿‡runtime åº“ï¼ˆç‚¹æ­¤ä¸‹è½½ï¼‰ ï¼Œåœ¨ runtime/objc-arr.mm æ–‡ä»¶ä¸­å°±æœ‰è¿™ä¸¤ä¸ªå‡½æ•°çš„å®ç°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">/*********** objc_retainBlock() çš„å®ç° ***********/</div><div class="line">id objc_retainBlock(id x) </div><div class="line">&#123;</div><div class="line">#if ARR_LOGGING</div><div class="line">    objc_arr_log(&quot;objc_retain_block&quot;, x);</div><div class="line">    ++CompilerGenerated.blockCopies;</div><div class="line">#endif</div><div class="line">    return (id)_Block_copy(x);</div><div class="line">&#125;</div><div class="line">// Create a heap based copy of a Block or simply add a reference to an existing one.</div><div class="line">// This must be paired with Block_release to recover memory, even when running</div><div class="line">// under Objective-C Garbage Collection.</div><div class="line">BLOCK_EXPORT void *_Block_copy(const void *aBlock)</div><div class="line">    __OSX_AVAILABLE_STARTING(__MAC_10_6, __IPHONE_3_2);</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">    /*********** objc_autoreleaseReturnValue() çš„å®ç° ***********/</div><div class="line">id objc_autoreleaseReturnValue(id obj)</div><div class="line">&#123;</div><div class="line">#if SUPPORT_RETURN_AUTORELEASE</div><div class="line">    assert(_pthread_getspecific_direct(AUTORELEASE_POOL_RECLAIM_KEY) == NULL);</div><div class="line">    if (callerAcceptsFastAutorelease(__builtin_return_address(0))) &#123;</div><div class="line">        _pthread_setspecific_direct(AUTORELEASE_POOL_RECLAIM_KEY, obj);</div><div class="line">        return obj;</div><div class="line">    &#125;</div><div class="line">#endif</div><div class="line">    return objc_autorelease(obj);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é€šè¿‡ä¸Šé¢çš„ä»£ç å’Œæ³¨é‡Šï¼Œæ„æ€å°±å¾ˆæ˜æ˜¾äº†ï¼Œç”±äº block å­—é¢é‡æ˜¯åˆ›å»ºåœ¨æ ˆå†…å­˜ï¼Œé€šè¿‡ objc_retainBlock() å‡½æ•°æ‹·è´åˆ°å †å†…å­˜ï¼Œè®© tmp é‡æ–°æŒ‡å‘å †ä¸Šçš„ blockï¼Œç„¶åå°† tmp æ‰€æŒ‡çš„å †ä¸Šçš„ block ä½œä¸ºä¸€ä¸ª Objective-C å¯¹è±¡æ”¾å…¥ autoreleasepool é‡Œé¢ï¼Œä»è€Œä¿è¯äº†è¿”å›åçš„ block ä»ç„¶å¯ä»¥æ­£ç¡®æ‰§è¡Œã€‚</p>
<p>çœ‹å®Œäº† block çš„è‡ªåŠ¨æ‹·è´ï¼Œé‚£ä¹ˆçœ‹çœ‹åœ¨ ARC ä¸‹éœ€è¦æ‰‹åŠ¨æ‹·è´ block çš„ä¾‹å­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/************ ARCä¸‹ç¼–è¯‘å™¨æ‰‹åŠ¨æ‹·è´block ************/</div><div class="line">- (id)getBlockArray</div><div class="line">&#123;</div><div class="line">    int val = 10;</div><div class="line">    return [[NSArray alloc] initWithObjects: </div><div class="line">                            ^&#123;NSLog(@&quot;blk0:%d&quot;, val);&#125;, </div><div class="line">                            ^&#123;NSLog(@&quot;blk1:%d&quot;, val);&#125;, nil];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸€ä¸ªä¾‹å­å°±äº†ç„¶ï¼Œè¿”å›çš„æ•°ç»„é‡Œé¢çš„ block æ˜¯ä¸å¯ç”¨çš„ï¼Œéœ€è¦å†æ‰‹åŠ¨æ‹·è´ä¸€æ¬¡æ‰å¯ä»¥ï¼Œè¿™ä¸ªè¾ƒä¸ºç®€å•ï¼Œå°±ä¸ä½œè¿‡å¤šè§£é‡Šã€‚</p>
<p>å…³äº block çš„æ‹·è´æ“ä½œå¯ä»¥ç”¨ä¸€å¼ è¡¨æ€»ç»“ä¸‹</p>
<p><img src="http://i4.piimg.com/567571/82a9a9d7492f431e.png" alt=""></p>
<p>block æ‹·è´çš„è®²è§£å°±åˆ°æ­¤ä¸ºæ­¢ï¼Œæœ‰å…´è¶£å¯ä»¥äº†è§£ä¸‹ block çš„å¤šæ¬¡æ‹·è´ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">blockçš„å¤šæ¬¡æ‹·è´ï¼šä¸‹é¢çš„ä¾‹å­åœ¨ ARC ä¸‹å¹¶ä¸ä¼šäº§ç”Ÿå†…å­˜æ³„éœ²å“¦</div><div class="line"></div><div class="line">// block å¤šæ¬¡æ‹·è´æºç </div><div class="line">blk = [[[[blk copy] copy] copy] copy]; </div><div class="line">// ç¿»è¯‘åçš„ä»£ç </div><div class="line">&#123;</div><div class="line">    blk_t tmp = [blk copy];</div><div class="line">    blk = tmp; </div><div class="line">&#125;</div><div class="line">&#123;</div><div class="line">    blk_t tmp = [blk copy];</div><div class="line">    blk = tmp; </div><div class="line">&#125;</div><div class="line">&#123;</div><div class="line">    blk_t tmp = [blk copy];</div><div class="line">    blk = tmp; </div><div class="line">&#125;</div><div class="line">&#123;</div><div class="line">    blk_t tmp = [blk copy];</div><div class="line">    blk = tmp;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="block-å˜é‡çš„å†…å­˜ç®¡ç†"><a href="#block-å˜é‡çš„å†…å­˜ç®¡ç†" class="headerlink" title="__block å˜é‡çš„å†…å­˜ç®¡ç†"></a>__block å˜é‡çš„å†…å­˜ç®¡ç†</h2><p>ä¸Šé¢å•°å—¦ä¸€å †ï¼Œè¿™å°èŠ‚ä¸»è¦ç”¨å›¾è¯´è¯ï¼Œå¿…è¦æ—¶åŠ æ–‡å­—è¯´æ˜ã€‚</p>
<ul>
<li>å½“ block ä»æ ˆå†…å­˜è¢«æ‹·è´åˆ°å †å†…å­˜æ—¶ï¼Œ<strong>block å˜é‡çš„å˜åŒ–å¦‚ä¸‹å›¾ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå½“æ ˆä¸Šçš„ block è¢«æ‹·è´åˆ°å †ä¸Šï¼Œå †ä¸Šçš„ block å†æ¬¡è¢«æ‹·è´æ—¶ï¼Œå¯¹ </strong>block å˜é‡å·²ç»æ²¡æœ‰å½±å“äº†ã€‚</li>
</ul>
<p><img src="http://i4.piimg.com/567571/c6c5e220ca09511e.png" alt=""></p>
<ul>
<li><p>å½“å¤šä¸ª block è·å–åŒä¸€ä¸ª __block å˜é‡ï¼Œblock ä»æ ˆè¢«æ‹·è´åˆ°å †æ—¶<br><img src="http://i4.piimg.com/567571/5e7b1f767a1526f8.png" alt=""></p>
</li>
<li><p>å½“ block è¢«åºŸå¼ƒæ—¶ï¼Œ__block å˜é‡è¢«é‡Šæ”¾<br><img src="http://i4.piimg.com/567571/f6c64412dfaed0f4.png" alt=""></p>
</li>
<li><p>__forwarding </p>
</li>
</ul>
<p>å‰æ–‡å·²ç»è¯´è¿‡ï¼Œå½“ block ä»æ ˆè¢«æ‹·è´åˆ°å †æ—¶ï¼Œ<strong>forwarding æŒ‡é’ˆå˜é‡ä¹Ÿä¼šæŒ‡å‘å †åŒºçš„ç»“æ„ä½“ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿä¸ºä»€ä¹ˆè¦è®©åŸæœ¬æŒ‡å‘æ ˆåŒºçš„ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œå»æŒ‡å‘å †åŒºçš„ç»“æ„ä½“å‘¢ï¼Ÿçœ‹èµ·æ¥åŒªå¤·æ‰€æ€ï¼Œå®åˆ™åŸå› å¾ˆç®€å•ï¼Œè¦ä» </strong>forwarding äº§ç”Ÿçš„ç¼˜ç”±è¯´èµ·ã€‚æƒ³æƒ³èµ·åˆä¸ºä»€ä¹ˆè¦ç»™ block æ·»åŠ  copy çš„åŠŸèƒ½ï¼Œå°±æ˜¯å› ä¸º block è·å–äº†å±€éƒ¨å˜é‡ï¼Œå½“è¦åœ¨å…¶ä»–åœ°æ–¹ï¼ˆè¶…å‡ºå±€éƒ¨å˜é‡ä½œç”¨èŒƒå›´ï¼‰ä½¿ç”¨è¿™ä¸ª block çš„æ—¶å€™ï¼Œç”±äºè®¿é—®å±€éƒ¨å˜é‡å¼‚å¸¸ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±ç»™ block æ·»åŠ äº† copy åŠŸèƒ½ã€‚åœ¨å°† block æ‹·è´åˆ°å †ä¸Šçš„åŒæ—¶ï¼Œå°† <strong>forwarding æŒ‡é’ˆæŒ‡å‘å †ä¸Šç»“æ„ä½“ã€‚åé¢å¦‚æœè¦æƒ³ä½¿ç”¨ </strong>block å˜é‡ï¼Œåªè¦é€šè¿‡ __forwarding è®¿é—®å †ä¸Šå˜é‡ï¼Œå°±ä¸ä¼šå‡ºç°ç¨‹åºå´©æºƒäº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/*************** __forwarding çš„ä½œç”¨ ***************/</div><div class="line">//çŒœçŒœä¸‹é¢ä»£ç çš„æ‰“å°ç»“æœï¼Ÿ</div><div class="line">&#123;</div><div class="line">    __block int val = 0;</div><div class="line">    void (^blk)(void) = [^&#123;++val;&#125; copy];</div><div class="line">    ++val;</div><div class="line">    blk();</div><div class="line">    NSLog(@&quot;%d&quot;, val);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¸€å®šæœ‰å¾ˆå¤šäººä¼šçŒœ 1ï¼Œå…¶å®æ‰“å° 2ã€‚åŸå› å¾ˆç®€å•ï¼Œå½“æ ˆä¸Šçš„ block è¢«æ‹·è´åˆ°å †ä¸Šæ—¶ï¼Œæ ˆä¸Šçš„ <strong>forwarding ä¹Ÿä¼šæŒ‡å‘å †ä¸Šçš„ </strong>block å˜é‡çš„ç»“æ„ä½“ã€‚</p>
<p>ä¸Šé¢çš„ä»£ç ä¸­ ^{++val;} å’Œ ++val; éƒ½ä¼šè¢«è½¬æ¢æˆ ++(val.__forwarding-&gt;val);ï¼Œå †ä¸Šçš„ val è¢«åŠ äº†ä¸¤æ¬¡ï¼Œæœ€åæ‰“å°å †ä¸Šçš„ val ä¸º 2ã€‚</p>
<p><img src="http://i4.piimg.com/567571/ae21fcf6a92ab9ee.png" alt=""></p>
]]></content>
      
        
        <tags>
            
            <tag> iOSåŸºç¡€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[PythonåŸºç¡€çŸ¥è¯†-æ–‡ä»¶æ“ä½œ]]></title>
      <url>/2016/04/16/2017/Python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/</url>
      <content type="html"><![CDATA[<p>pythonä¸­å¯¹æ–‡ä»¶ã€æ–‡ä»¶å¤¹ï¼ˆæ–‡ä»¶æ“ä½œå‡½æ•°ï¼‰çš„æ“ä½œéœ€è¦æ¶‰åŠåˆ°osæ¨¡å—å’Œshutilæ¨¡å—ã€‚<br><a id="more"></a></p>
<ul>
<li>å¾—åˆ°å½“å‰å·¥ä½œç›®å½•ï¼Œå³å½“å‰Pythonè„šæœ¬å·¥ä½œçš„ç›®å½•è·¯å¾„: os.getcwd()</li>
<li>è¿”å›æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•å:os.listdir()</li>
<li>å‡½æ•°ç”¨æ¥åˆ é™¤ä¸€ä¸ªæ–‡ä»¶:os.remove()</li>
<li>åˆ é™¤å¤šä¸ªç›®å½•ï¼šos.removedirsï¼ˆrâ€œcï¼š\pythonâ€ï¼‰</li>
<li>æ£€éªŒç»™å‡ºçš„è·¯å¾„æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼šos.path.isfile()</li>
<li>æ£€éªŒç»™å‡ºçš„è·¯å¾„æ˜¯å¦æ˜¯ä¸€ä¸ªç›®å½•ï¼šos.path.isdir()</li>
<li>åˆ¤æ–­æ˜¯å¦æ˜¯ç»å¯¹è·¯å¾„ï¼šos.path.isabs()</li>
<li>æ£€éªŒç»™å‡ºçš„è·¯å¾„æ˜¯å¦çœŸåœ°å­˜:os.path.exists()</li>
<li><p>è¿”å›ä¸€ä¸ªè·¯å¾„çš„ç›®å½•åå’Œæ–‡ä»¶å:os.path.split()     </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">os.path.split(&apos;/home/swaroop/byte/code/poem.txt&apos;) ç»“æœï¼š(&apos;/home/swaroop/byte/code&apos;, &apos;poem.txt&apos;)</div></pre></td></tr></table></figure>
</li>
<li><p>åˆ†ç¦»æ‰©å±•åï¼šos.path.splitext()</p>
</li>
<li>è·å–è·¯å¾„åï¼šos.path.dirname()</li>
<li>è·å–æ–‡ä»¶åï¼šos.path.basename()</li>
<li>è¿è¡Œshellå‘½ä»¤: os.system()</li>
<li>è¯»å–å’Œè®¾ç½®ç¯å¢ƒå˜é‡:os.getenv() ä¸os.putenv()</li>
<li>ç»™å‡ºå½“å‰å¹³å°ä½¿ç”¨çš„è¡Œç»ˆæ­¢ç¬¦:os.linesep    Windowsä½¿ç”¨â€™\r\nâ€™ï¼ŒLinuxä½¿ç”¨â€™\nâ€™è€ŒMacä½¿ç”¨â€™\râ€™</li>
<li>æŒ‡ç¤ºä½ æ­£åœ¨ä½¿ç”¨çš„å¹³å°ï¼šos.name       å¯¹äºWindowsï¼Œå®ƒæ˜¯â€™ntâ€™ï¼Œè€Œå¯¹äºLinux/Unixç”¨æˆ·ï¼Œå®ƒæ˜¯â€™posixâ€™</li>
<li>é‡å‘½åï¼šos.renameï¼ˆoldï¼Œ newï¼‰</li>
<li>åˆ›å»ºå¤šçº§ç›®å½•ï¼šos.makedirsï¼ˆrâ€œcï¼š\python\testâ€ï¼‰</li>
<li>åˆ›å»ºå•ä¸ªç›®å½•ï¼šos.mkdirï¼ˆâ€œtestâ€ï¼‰</li>
<li>è·å–æ–‡ä»¶å±æ€§ï¼šos.statï¼ˆfileï¼‰</li>
<li>ä¿®æ”¹æ–‡ä»¶æƒé™ä¸æ—¶é—´æˆ³ï¼šos.chmodï¼ˆfileï¼‰</li>
<li>ç»ˆæ­¢å½“å‰è¿›ç¨‹ï¼šos.exitï¼ˆï¼‰</li>
<li>è·å–æ–‡ä»¶å¤§å°ï¼šos.path.getsizeï¼ˆfilenameï¼‰</li>
<li>os.mknod(â€œtest.txtâ€)        åˆ›å»ºç©ºæ–‡ä»¶</li>
<li><p>fp = open(â€œtest.txtâ€,w)     ç›´æ¥æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶</p>
<blockquote>
<p>å…³äºopen æ¨¡å¼:<br>w     ä»¥å†™æ–¹å¼æ‰“å¼€ï¼Œ<br>a     ä»¥è¿½åŠ æ¨¡å¼æ‰“å¼€ (ä» EOF å¼€å§‹, å¿…è¦æ—¶åˆ›å»ºæ–°æ–‡ä»¶)<br>r+     ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€<br>w+     ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w )<br>a+     ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ a )<br>rb     ä»¥äºŒè¿›åˆ¶è¯»æ¨¡å¼æ‰“å¼€<br>wb     ä»¥äºŒè¿›åˆ¶å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w )<br>ab     ä»¥äºŒè¿›åˆ¶è¿½åŠ æ¨¡å¼æ‰“å¼€ (å‚è§ a )<br>rb+    ä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ r+ )<br>wb+    ä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w+ )<br>ab+    ä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ a+ )</p>
</blockquote>
</li>
<li><p>fp.read([size])                     #sizeä¸ºè¯»å–çš„é•¿åº¦ï¼Œä»¥byteä¸ºå•ä½</p>
</li>
<li>fp.readline([size])                 #è¯»ä¸€è¡Œï¼Œå¦‚æœå®šä¹‰äº†sizeï¼Œæœ‰å¯èƒ½è¿”å›çš„åªæ˜¯ä¸€è¡Œçš„ä¸€éƒ¨åˆ†</li>
<li>fp.readlines([size])                #æŠŠæ–‡ä»¶æ¯ä¸€è¡Œä½œä¸ºä¸€ä¸ªlistçš„ä¸€ä¸ªæˆå‘˜ï¼Œå¹¶è¿”å›è¿™ä¸ªlistã€‚å…¶å®å®ƒçš„å†…éƒ¨æ˜¯é€šè¿‡å¾ªç¯è°ƒç”¨readline()æ¥å®ç°çš„ã€‚å¦‚æœæä¾›sizeå‚æ•°ï¼Œsizeæ˜¯è¡¨ç¤ºè¯»å–å†…å®¹çš„æ€»é•¿ï¼Œä¹Ÿå°±æ˜¯è¯´å¯èƒ½åªè¯»åˆ°æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ã€‚</li>
<li>fp.write(str)                      #æŠŠstrå†™åˆ°æ–‡ä»¶ä¸­ï¼Œwrite()å¹¶ä¸ä¼šåœ¨strååŠ ä¸Šä¸€ä¸ªæ¢è¡Œç¬¦</li>
<li>fp.writelines(seq)            #æŠŠseqçš„å†…å®¹å…¨éƒ¨å†™åˆ°æ–‡ä»¶ä¸­(å¤šè¡Œä¸€æ¬¡æ€§å†™å…¥)ã€‚è¿™ä¸ªå‡½æ•°ä¹Ÿåªæ˜¯å¿ å®åœ°å†™å…¥ï¼Œä¸ä¼šåœ¨æ¯è¡Œåé¢åŠ ä¸Šä»»ä½•ä¸œè¥¿ã€‚</li>
<li>fp.close()                        #å…³é—­æ–‡ä»¶ã€‚pythonä¼šåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸ç”¨åè‡ªåŠ¨å…³é—­æ–‡ä»¶ï¼Œä¸è¿‡è¿™ä¸€åŠŸèƒ½æ²¡æœ‰ä¿è¯ï¼Œæœ€å¥½è¿˜æ˜¯å…»æˆè‡ªå·±å…³é—­çš„ä¹ æƒ¯ã€‚  å¦‚æœä¸€ä¸ªæ–‡ä»¶åœ¨å…³é—­åè¿˜å¯¹å…¶è¿›è¡Œæ“ä½œä¼šäº§ç”ŸValueError</li>
<li>fp.flush()                                      #æŠŠç¼“å†²åŒºçš„å†…å®¹å†™å…¥ç¡¬ç›˜</li>
<li>fp.fileno()                                      #è¿”å›ä¸€ä¸ªé•¿æ•´å‹çš„â€æ–‡ä»¶æ ‡ç­¾â€œ</li>
<li>fp.isatty()                                      #æ–‡ä»¶æ˜¯å¦æ˜¯ä¸€ä¸ªç»ˆç«¯è®¾å¤‡æ–‡ä»¶ï¼ˆunixç³»ç»Ÿä¸­çš„ï¼‰</li>
<li>fp.tell()                                         #è¿”å›æ–‡ä»¶æ“ä½œæ ‡è®°çš„å½“å‰ä½ç½®ï¼Œä»¥æ–‡ä»¶çš„å¼€å¤´ä¸ºåŸç‚¹</li>
<li>fp.next()                                       #è¿”å›ä¸‹ä¸€è¡Œï¼Œå¹¶å°†æ–‡ä»¶æ“ä½œæ ‡è®°ä½ç§»åˆ°ä¸‹ä¸€è¡Œã€‚æŠŠä¸€ä¸ªfileç”¨äºfor â€¦ in fileè¿™æ ·çš„è¯­å¥æ—¶ï¼Œå°±æ˜¯è°ƒç”¨next()å‡½æ•°æ¥å®ç°éå†çš„ã€‚</li>
<li><p>fp.seek(offset[,whence])              #å°†æ–‡ä»¶æ‰“æ“ä½œæ ‡è®°ç§»åˆ°offsetçš„ä½ç½®ã€‚è¿™ä¸ªoffsetä¸€èˆ¬æ˜¯ç›¸å¯¹äºæ–‡ä»¶çš„å¼€å¤´æ¥è®¡ç®—çš„ï¼Œä¸€èˆ¬ä¸ºæ­£æ•°ã€‚ä½†å¦‚æœæä¾›äº†whenceå‚æ•°å°±ä¸ä¸€å®šäº†ï¼Œwhenceå¯ä»¥ä¸º0è¡¨ç¤ºä»å¤´å¼€å§‹è®¡ç®—ï¼Œ1è¡¨ç¤ºä»¥å½“å‰ä½ç½®ä¸ºåŸç‚¹è®¡ç®—ã€‚2è¡¨ç¤ºä»¥æ–‡ä»¶æœ«å°¾ä¸ºåŸç‚¹è¿›è¡Œè®¡ç®—ã€‚éœ€è¦æ³¨æ„ï¼Œå¦‚æœæ–‡ä»¶ä»¥aæˆ–a+çš„æ¨¡å¼æ‰“å¼€ï¼Œæ¯æ¬¡è¿›è¡Œå†™æ“ä½œæ—¶ï¼Œæ–‡ä»¶æ“ä½œæ ‡è®°ä¼šè‡ªåŠ¨è¿”å›åˆ°æ–‡ä»¶æœ«å°¾ã€‚</p>
</li>
<li><p>fp.truncate([size])                       #æŠŠæ–‡ä»¶è£æˆè§„å®šçš„å¤§å°ï¼Œé»˜è®¤çš„æ˜¯è£åˆ°å½“å‰æ–‡ä»¶æ“ä½œæ ‡è®°çš„ä½ç½®ã€‚å¦‚æœsizeæ¯”æ–‡ä»¶çš„å¤§å°è¿˜è¦å¤§ï¼Œä¾æ®ç³»ç»Ÿçš„ä¸åŒå¯èƒ½æ˜¯ä¸æ”¹å˜æ–‡ä»¶ï¼Œä¹Ÿå¯èƒ½æ˜¯ç”¨0æŠŠæ–‡ä»¶è¡¥åˆ°ç›¸åº”çš„å¤§å°ï¼Œä¹Ÿå¯èƒ½æ˜¯ä»¥ä¸€äº›éšæœºçš„å†…å®¹åŠ ä¸Šå»ã€‚</p>
</li>
<li><p>os.mkdir(â€œfileâ€)                   åˆ›å»ºç›®å½•<br>å¤åˆ¶æ–‡ä»¶ï¼š</p>
</li>
<li>shutil.copyfile(â€œoldfileâ€,â€newfileâ€)       oldfileå’Œnewfileéƒ½åªèƒ½æ˜¯æ–‡ä»¶</li>
<li>shutil.copy(â€œoldfileâ€,â€newfileâ€)            oldfileåªèƒ½æ˜¯æ–‡ä»¶å¤¹ï¼Œnewfileå¯ä»¥æ˜¯æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›®æ ‡ç›®å½•<br>å¤åˆ¶æ–‡ä»¶å¤¹ï¼š</li>
<li>shutil.copytree(â€œolddirâ€,â€newdirâ€)        olddirå’Œnewdiréƒ½åªèƒ½æ˜¯ç›®å½•ï¼Œä¸”newdirå¿…é¡»ä¸å­˜åœ¨<br>é‡å‘½åæ–‡ä»¶ï¼ˆç›®å½•ï¼‰</li>
<li>os.rename(â€œoldnameâ€,â€newnameâ€)       æ–‡ä»¶æˆ–ç›®å½•éƒ½æ˜¯ä½¿ç”¨è¿™æ¡å‘½ä»¤<br>ç§»åŠ¨æ–‡ä»¶ï¼ˆç›®å½•ï¼‰</li>
<li>shutil.move(â€œoldposâ€,â€newposâ€)<br>åˆ é™¤æ–‡ä»¶</li>
<li>os.remove(â€œfileâ€)<br>åˆ é™¤ç›®å½•</li>
<li>os.rmdir(â€œdirâ€)åªèƒ½åˆ é™¤ç©ºç›®å½•<br>shutil.rmtree(â€œdirâ€)    ç©ºç›®å½•ã€æœ‰å†…å®¹çš„ç›®å½•éƒ½å¯ä»¥åˆ <br>è½¬æ¢ç›®å½•</li>
<li>os.chdir(â€œpathâ€)   æ¢è·¯å¾„</li>
</ul>
]]></content>
      
        <categories>
            
            <category> Python </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[PythonåŸºç¡€çŸ¥è¯†-å­—å…¸]]></title>
      <url>/2016/04/10/2017/Python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E5%AD%97%E5%85%B8/</url>
      <content type="html"><![CDATA[<p>å­—å…¸è¿™ç§æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬åˆç§°ä¹‹ä¸ºæ˜ å°„(mapping)ï¼Œåœ¨javaä¸­ä¹Ÿæ˜¯è¿™ä¹ˆç§°å‘¼çš„ï¼Œä½†æ˜¯åœ¨pythonä¸­æˆ‘ä»¬ç§°ä¹‹ä¸ºå­—å…¸ï¼Œä¸OCä¸­çš„å«æ³•ä¸€è‡´ã€‚<br><a id="more"></a></p>
<h2 id="åˆ›å»ºå­—å…¸"><a href="#åˆ›å»ºå­—å…¸" class="headerlink" title="åˆ›å»ºå­—å…¸"></a>åˆ›å»ºå­—å…¸</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; dicts = &#123;&apos;name&apos;:&apos;han&apos;,&apos;tele&apos;:&apos;136&apos;&#125;//ç›´æ¥åˆ›å»º</div><div class="line"></div><div class="line">&gt;&gt;&gt; xiaohan = (&apos;xiaohan&apos;,42)//åˆ©ç”¨dictå‡½æ•°æ¥åˆ›å»º</div><div class="line">&gt;&gt;&gt; xiaoming = (&apos;xiaoming&apos;,45)</div><div class="line">&gt;&gt;&gt; items = [xiaohan,xiaoming]</div><div class="line">&gt;&gt;&gt; d = dict(items)</div><div class="line">&gt;&gt;&gt; d</div><div class="line">&#123;&apos;xiaohan&apos;: 42, &apos;xiaoming&apos;: 45&#125;</div><div class="line">&gt;&gt;&gt; </div><div class="line"></div><div class="line">&gt;&gt;&gt; d = dict(name=&apos;han&apos;,age=43)//æˆ–è€…dictå‡½æ•°è¿˜å¯ä»¥è¿™æ ·æ¥ç”¨</div><div class="line">&gt;&gt;&gt; d</div><div class="line">&#123;&apos;age&apos;: 43, &apos;name&apos;: &apos;han&apos;&#125;</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h2 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h2><ul>
<li>len(d)è¿”å›dä¸­é”®å€¼å¯¹çš„æ•°é‡</li>
<li>d[k]è¿”å›å…³è”åˆ°kä¸Šçš„å€¼</li>
<li>d[k]=vå°†å€¼vå…³è”åˆ°é”®ä¸ºkçš„é¡¹ä¸Š</li>
<li>del d[k]åˆ é™¤é”®ä¸ºkçš„é¡¹</li>
<li>k in dæ£€æŸ¥dä¸­æ˜¯å¦å«æœ‰é”®ä¸ºkçš„é¡¹</li>
<li>é”®ç±»å‹å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œæ¯”å¦‚å…ƒç»„ï¼Œæµ®ç‚¹æ•°æˆ–è€…å­—ç¬¦ä¸²</li>
<li>è‡ªåŠ¨æ·»åŠ ï¼ŒåŠæ—¶é”®èµ·å‡ºåœ¨å­—å…¸ä¸­å¹¶ä¸å­˜åœ¨ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ï¼Œè¿™æ ·å­—å…¸å°±ä¼šå»ºç«‹èµ·æ–°çš„é¡¹</li>
<li>æˆå‘˜èµ„æ ¼:ç”¨k in dæŸ¥æ‰¾çš„æ˜¯é”®è€Œä¸æ˜¯å€¼ï¼Œè€Œåœ¨åˆ—è¡¨ä¸­ï¼Œv in læ˜¯ç”¨å€¼åœ¨æŸ¥æ‰¾ï¼Œè€Œä¸æ˜¯ç´¢å¼•</li>
</ul>
<h2 id="å­—å…¸æ–¹æ³•"><a href="#å­—å…¸æ–¹æ³•" class="headerlink" title="å­—å…¸æ–¹æ³•"></a>å­—å…¸æ–¹æ³•</h2><h3 id="clear"><a href="#clear" class="headerlink" title="clear"></a>clear</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<p>### </p>
]]></content>
      
        <categories>
            
            <category> Python </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[PythonåŸºç¡€çŸ¥è¯†-åˆ—è¡¨/å…ƒç»„/å­—ç¬¦ä¸²]]></title>
      <url>/2016/04/09/2017/Python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E5%88%97%E8%A1%A8-%E5%85%83%E7%BB%84-%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      <content type="html"><![CDATA[<h2 id="åˆ—è¡¨å’Œå…ƒç»„"><a href="#åˆ—è¡¨å’Œå…ƒç»„" class="headerlink" title="åˆ—è¡¨å’Œå…ƒç»„"></a>åˆ—è¡¨å’Œå…ƒç»„</h2><p>åœ¨pythonä¸­æˆ‘ä»¬æœ‰ä¸¤ç§å¾ˆé‡è¦çš„æ•°æ®ç»“æ„ï¼Œåˆ†åˆ«ä¸ºåºåˆ—å’Œæ˜ å°„ï¼Œå¯¹åº”åˆ°OCä¸­å°±æ˜¯æ•°ç»„å’Œå­—å…¸ï¼Œåºåˆ—åˆåˆ†ä¸ºåˆ—è¡¨å’Œå…ƒç»„ï¼Œä»–ä»¬çš„åŒºåˆ«åœ¨äºï¼Œåˆ—è¡¨å¯ä¿®æ”¹ï¼Œå…ƒç»„ä¸èƒ½ï¼Œåˆ—è¡¨ç”¨æ–¹æ‹¬å·[]ï¼Œè€Œå…ƒç»„ç”¨å°æ‹¬å·ï¼ˆï¼‰<br><a id="more"></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">list = [&apos;hanshenghui&apos;,&apos;xiaoming&apos;]</div><div class="line">list1 = (&apos;hanshenghui&apos;,&apos;xiaoming&apos;)</div></pre></td></tr></table></figure></p>
<!--more-->
<h3 id="åºåˆ—é€šç”¨æ“ä½œ"><a href="#åºåˆ—é€šç”¨æ“ä½œ" class="headerlink" title="åºåˆ—é€šç”¨æ“ä½œ"></a>åºåˆ—é€šç”¨æ“ä½œ</h3><p>åˆ—è¡¨å’Œå…ƒç»„éƒ½èƒ½åšçš„æ“ä½œ</p>
<h4 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; greeting = &apos;hello&apos;</div><div class="line">&gt;&gt;&gt; greeting[1]</div><div class="line">&apos;e&apos;</div><div class="line">&gt;&gt;&gt; greeting[2]</div><div class="line">&apos;l&apos;</div><div class="line">&gt;&gt;&gt; </div><div class="line"></div><div class="line">&gt;&gt;&gt; greeting1 = (&apos;h&apos;,&apos;e&apos;,&apos;l&apos;)</div><div class="line">&gt;&gt;&gt; greeting1[0]</div><div class="line">&apos;h&apos;</div><div class="line">&gt;&gt;&gt; greeting1[1]</div><div class="line">&apos;e&apos;</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>å­—ç¬¦ä¸²å¯ä»¥ç†è§£ä¸ºç”±ä¸€ä¸ªä¸ªçš„å­—ç¬¦æ‹¼æˆçš„åˆ—è¡¨</p>
<h4 id="åˆ†ç‰‡"><a href="#åˆ†ç‰‡" class="headerlink" title="åˆ†ç‰‡"></a>åˆ†ç‰‡</h4><p>æˆ‘ä»¬ä¸ä½†å¯ä»¥ç”¨ä¸€ä¸ªç´¢å¼•æ¥è·å–æŸä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå¯ä»¥è·å–æŸä¸ªèŒƒå›´çš„å…ƒç´ ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; numbers = [1,2,3,4,5,6,7,8,9,0]</div><div class="line">&gt;&gt;&gt; numbers[0:2]</div><div class="line">[1, 2]</div></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå·¦è¾¹çš„è¾¹ç•ŒåŒ…å«åœ¨å…¶ä¸­ï¼Œè€Œå³è¾¹çš„è¾¹ç•Œæ˜¯ä¸åŒ…å«åœ¨å…¶ä¸­çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; numbers[-1:2]</div><div class="line">[]</div><div class="line">&gt;&gt;&gt; numbers[-1:-3]</div><div class="line">[]</div><div class="line">&gt;&gt;&gt; numbers[-3:-1]</div><div class="line">[8, 9]</div><div class="line">&gt;&gt;&gt; </div><div class="line">&gt;&gt;&gt; numbers[-3:]</div><div class="line">[8, 9, 0]</div></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬è¿˜å¯ä»¥ç”¨å€’åºæ¥å–å…ƒç´ ï¼Œä½†æ˜¯åˆ‡è®°ä¸€å®šè¦å·¦è¾¹å°ï¼Œå³è¾¹çš„å¤§ï¼Œåªæ ‡è®°ä¸€ä¸ªå°±ä¼šä»è¿™ä¸ªå¼€å§‹å–æ‰€æœ‰ï¼Œæˆ–è€…åˆ°è¿™ä¸ªä¸ºæ­¢</p>
<p>è¿˜å¯ä»¥ç»™ä¸€ä¸ªæ­¥é•¿<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; numbers[::3]</div><div class="line">[1, 4, 7, 0]</div></pre></td></tr></table></figure></p>
<h4 id="ç›¸åŠ "><a href="#ç›¸åŠ " class="headerlink" title="ç›¸åŠ "></a>ç›¸åŠ </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; item1 = [1,2,3]</div><div class="line">&gt;&gt;&gt; item2 = [4,5,6]</div><div class="line">&gt;&gt;&gt; item1 + item2</div><div class="line">[1, 2, 3, 4, 5, 6]</div><div class="line"></div><div class="line">&gt;&gt;&gt; string1 = &apos;hansheng&apos;</div><div class="line">&gt;&gt;&gt; string2 = &apos;hui&apos;</div><div class="line">&gt;&gt;&gt; string1 + string2</div><div class="line">&apos;hanshenghui&apos;</div><div class="line"></div><div class="line">&gt;&gt;&gt; string1 + item1</div><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</div><div class="line">TypeError: cannot concatenate &apos;str&apos; and &apos;list&apos; objects</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯åªæœ‰åŒç§ç±»å‹æ‰èƒ½ç›¸åŠ </p>
<h4 id="ä¹˜æ³•"><a href="#ä¹˜æ³•" class="headerlink" title="ä¹˜æ³•"></a>ä¹˜æ³•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; &apos;python&apos; * 5</div><div class="line">&apos;pythonpythonpythonpythonpython&apos;</div><div class="line">&gt;&gt;&gt; [10,11] * 3</div><div class="line">[10, 11, 10, 11, 10, 11]</div></pre></td></tr></table></figure>
<h4 id="æˆå‘˜èµ„æ ¼"><a href="#æˆå‘˜èµ„æ ¼" class="headerlink" title="æˆå‘˜èµ„æ ¼"></a>æˆå‘˜èµ„æ ¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; han = &apos;hanshenghui&apos;</div><div class="line">&gt;&gt;&gt; &apos;shenghui&apos; in han</div><div class="line">True</div><div class="line">&gt;&gt;&gt; &apos;wahha&apos; in han</div><div class="line">False</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="é•¿åº¦ï¼Œæœ€å¤§å€¼ï¼Œæœ€å°å€¼"><a href="#é•¿åº¦ï¼Œæœ€å¤§å€¼ï¼Œæœ€å°å€¼" class="headerlink" title="é•¿åº¦ï¼Œæœ€å¤§å€¼ï¼Œæœ€å°å€¼"></a>é•¿åº¦ï¼Œæœ€å¤§å€¼ï¼Œæœ€å°å€¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">han = &apos;hanshenghui&apos;</div><div class="line">item1 = [1,2,3]</div><div class="line"></div><div class="line">&gt;&gt;&gt; len(han)</div><div class="line">11</div><div class="line">&gt;&gt;&gt; max(han)</div><div class="line">&apos;u&apos;</div><div class="line">&gt;&gt;&gt; min(han)</div><div class="line">&apos;a&apos;</div><div class="line">&gt;&gt;&gt; len(item1)</div><div class="line">3</div><div class="line">&gt;&gt;&gt; max(item1)</div><div class="line">3</div><div class="line">&gt;&gt;&gt; min(item1)</div><div class="line">1</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h3 id="åˆ—è¡¨æ“ä½œ"><a href="#åˆ—è¡¨æ“ä½œ" class="headerlink" title="åˆ—è¡¨æ“ä½œ"></a>åˆ—è¡¨æ“ä½œ</h3><h4 id="listä¸join"><a href="#listä¸join" class="headerlink" title="listä¸join"></a>listä¸join</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name = list(&apos;hanshenghui&apos;)</div><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;, &apos;h&apos;, &apos;u&apos;, &apos;i&apos;]</div><div class="line">&gt;&gt;&gt; len(name)</div><div class="line">11</div><div class="line">&gt;&gt;&gt; &apos;&apos;.join(name)</div><div class="line">&apos;hanshenghui&apos;</div><div class="line">&gt;&gt;&gt; &apos;a&apos;.join(name)</div><div class="line">&apos;haaanasahaeanagahauai&apos;</div></pre></td></tr></table></figure>
<h4 id="èµ‹å€¼"><a href="#èµ‹å€¼" class="headerlink" title="èµ‹å€¼"></a>èµ‹å€¼</h4><p>æ›´æ”¹æŸä¸ªå…ƒç´ çš„å€¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name[0] = &apos;i&apos;</div><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;i&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;, &apos;h&apos;, &apos;u&apos;, &apos;i&apos;]</div></pre></td></tr></table></figure></p>
<h4 id="åˆ é™¤del"><a href="#åˆ é™¤del" class="headerlink" title="åˆ é™¤del"></a>åˆ é™¤del</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name = &apos;han&apos;</div><div class="line">&gt;&gt;&gt; name</div><div class="line">&apos;han&apos;</div><div class="line">&gt;&gt;&gt; name = list(name)</div><div class="line">&gt;&gt;&gt; del name[0]</div><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;a&apos;, &apos;n&apos;]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="åˆ†ç‰‡èµ‹å€¼"><a href="#åˆ†ç‰‡èµ‹å€¼" class="headerlink" title="åˆ†ç‰‡èµ‹å€¼"></a>åˆ†ç‰‡èµ‹å€¼</h4><p>è¿™æ˜¯å¼‚å¸¸å¼ºå¤§çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå¯ä»¥ç”¨æ¥æ’å…¥å…ƒç´ ï¼Œæ›´æ”¹å…ƒç´ ï¼Œç”šè‡³åˆ é™¤å…ƒç´ <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name = list(&apos;han&apos;)</div><div class="line">&gt;&gt;&gt; name[1:] = list(&apos;python&apos;)</div><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;h&apos;, &apos;p&apos;, &apos;y&apos;, &apos;t&apos;, &apos;h&apos;, &apos;o&apos;, &apos;n&apos;]</div><div class="line">&gt;&gt;&gt; name[2:]=[]</div><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;h&apos;, &apos;p&apos;]</div><div class="line">&gt;&gt;&gt; name[1:1] = list(&apos;wahha&apos;)</div><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;h&apos;, &apos;w&apos;, &apos;a&apos;, &apos;h&apos;, &apos;h&apos;, &apos;a&apos;, &apos;p&apos;]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure></p>
<h4 id="appendè¿½åŠ "><a href="#appendè¿½åŠ " class="headerlink" title="appendè¿½åŠ "></a>appendè¿½åŠ </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name = list(&apos;han&apos;)</div><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;]</div><div class="line">&gt;&gt;&gt; name.append(&apos;shenghui&apos;)</div><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;shenghui&apos;]</div><div class="line">&gt;&gt;&gt; &apos;&apos;.join(name)</div><div class="line">&apos;hanshenghui&apos;</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="countç»Ÿè®¡å‡ºç°çš„æ¬¡æ•°"><a href="#countç»Ÿè®¡å‡ºç°çš„æ¬¡æ•°" class="headerlink" title="countç»Ÿè®¡å‡ºç°çš„æ¬¡æ•°"></a>countç»Ÿè®¡å‡ºç°çš„æ¬¡æ•°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name = &apos;hanshenghui&apos;</div><div class="line">&gt;&gt;&gt; name.count(&apos;h&apos;)</div><div class="line">3</div><div class="line">&gt;&gt;&gt; name.count(&apos;n&apos;)</div><div class="line">2</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="extend"><a href="#extend" class="headerlink" title="extend"></a>extend</h4><p>ä¸€ä¸ªåˆ—è¡¨åè¿½åŠ ä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼ŒåŒåŠ æ³•ä½œç”¨ä¸€è‡´<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;]</div><div class="line">&gt;&gt;&gt; name1 = list(&apos;sheng&apos;)</div><div class="line">&gt;&gt;&gt; name1</div><div class="line">[&apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;]</div><div class="line">&gt;&gt;&gt; name.extend(name1)</div><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure></p>
<h4 id="index"><a href="#index" class="headerlink" title="index"></a>index</h4><p>æ‰¾å‡ºåˆ—è¡¨ä¸­æŸä¸ªé¡¹çš„ç¬¬ä¸€ä¸ªåŒ¹é…ç´¢å¼•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;]</div><div class="line">&gt;&gt;&gt; name.index(&apos;h&apos;)</div><div class="line">0</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure></p>
<h4 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;]</div><div class="line">&gt;&gt;&gt; name.insert(0,&apos;wahha&apos;)</div><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;wahha&apos;, &apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="pop"><a href="#pop" class="headerlink" title="pop"></a>pop</h4><p>ç§»é™¤æŸä¸ªå€¼å¹¶ä¸”å°†è¯¥å€¼è¿”å›ï¼Œéœ€è¦æä¾›ç´¢å¼•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;wahha&apos;, &apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;]</div><div class="line">&gt;&gt;&gt; name.pop()</div><div class="line">&apos;g&apos;</div><div class="line">&gt;&gt;&gt; name.pop()</div><div class="line">&apos;n&apos;</div><div class="line">&gt;&gt;&gt; name.pop(0)</div><div class="line">&apos;wahha&apos;</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure></p>
<h4 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h4><p>ç§»é™¤æŸä¸ªåŒ¹é…é¡¹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;]</div><div class="line">&gt;&gt;&gt; name.remove(&apos;s&apos;)</div><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;h&apos;, &apos;e&apos;]</div><div class="line">&gt;&gt;&gt; name.remove(&apos;s&apos;)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</div><div class="line">ValueError: list.remove(x): x not in list</div></pre></td></tr></table></figure></p>
<p>å¦‚æœè¯¥å€¼ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™</p>
<h4 id="reverse"><a href="#reverse" class="headerlink" title="reverse"></a>reverse</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;h&apos;, &apos;e&apos;]</div><div class="line">&gt;&gt;&gt; name.reverse()</div><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;e&apos;, &apos;h&apos;, &apos;n&apos;, &apos;a&apos;, &apos;h&apos;]</div></pre></td></tr></table></figure>
<h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><p>æ”¹å˜åŸæ¥çš„åˆ—è¡¨ï¼Œè¿”å›ä¸€ä¸ªç©ºå€¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;e&apos;, &apos;h&apos;, &apos;n&apos;, &apos;a&apos;, &apos;h&apos;]</div><div class="line">&gt;&gt;&gt; name.sort()</div><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;a&apos;, &apos;e&apos;, &apos;h&apos;, &apos;h&apos;, &apos;n&apos;]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure></p>
<p>éœ€è¦è¿”å›å€¼ï¼Œsorted<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name = list(&apos;hna&apos;)</div><div class="line">&gt;&gt;&gt; name1 = sorted(name)</div><div class="line">&gt;&gt;&gt; name1</div><div class="line">[&apos;a&apos;, &apos;h&apos;, &apos;n&apos;]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure></p>
<h4 id="é«˜çº§æ’åº"><a href="#é«˜çº§æ’åº" class="headerlink" title="é«˜çº§æ’åº"></a>é«˜çº§æ’åº</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name = list(&apos;hanshenghui&apos;)</div><div class="line">&gt;&gt;&gt; name.sort(reverse = True)</div><div class="line">&gt;&gt;&gt; name</div><div class="line">[&apos;u&apos;, &apos;s&apos;, &apos;n&apos;, &apos;n&apos;, &apos;i&apos;, &apos;h&apos;, &apos;h&apos;, &apos;h&apos;, &apos;g&apos;, &apos;e&apos;, &apos;a&apos;]</div><div class="line">&gt;&gt;&gt; </div><div class="line">&gt;&gt;&gt; </div><div class="line">&gt;&gt;&gt; </div><div class="line">&gt;&gt;&gt; returnList.sort(key=lambda k: (k.get(&apos;date&apos;, 0)), reverse=False)</div></pre></td></tr></table></figure>
<h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><h3 id="å­—ç¬¦ä¸²æ ¼å¼åŒ–"><a href="#å­—ç¬¦ä¸²æ ¼å¼åŒ–" class="headerlink" title="å­—ç¬¦ä¸²æ ¼å¼åŒ–"></a>å­—ç¬¦ä¸²æ ¼å¼åŒ–</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; python = &apos;%s is a %s&apos; </div><div class="line">&gt;&gt;&gt; value = (&apos;xiaohong&apos;,&apos;dog&apos;)</div><div class="line">&gt;&gt;&gt; print python % value</div><div class="line">xiaohong is a dog</div></pre></td></tr></table></figure>
<blockquote>
<p>ç¬¦å·è¯´æ˜:<code>s</code>ä»£è¡¨å­—ç¬¦ä¸²ï¼Œåè¾¹çš„å¯¹è±¡å°†ä»¥strè½¬è¯‘ï¼Œ<code>%</code>ä»£è¡¨å ä½ï¼Œåªæœ‰å…ƒç»„æ‰ä¼šè¢«åˆ†å¼€è§£é‡Šï¼Œå¦‚æœæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œé‚£ä¹ˆåªèƒ½è¢«è§£é‡Šä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ç‚¹è¦ç‰¹åˆ«æ³¨æ„ã€‚dä»£è¡¨æ•´å‹ï¼Œfä»£è¡¨æµ®ç‚¹æ•°</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; python = &apos;%10.1fha&apos;</div><div class="line">&gt;&gt;&gt; print python % 10</div><div class="line">      10.0ha</div></pre></td></tr></table></figure>
<p>få‰è¾¹çš„å°æ•°ç‚¹åçš„æ•°å­—ä»£è¡¨ï¼Œå°æ•°ç‚¹çš„ä¿ç•™ä½æ•°ï¼Œè€Œå‰è¾¹çš„10ä»£è¡¨å­—æ®µå®½ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; python = &apos;%010.1fha&apos;</div><div class="line">&gt;&gt;&gt; print python % 10</div><div class="line">00000010.0ha</div><div class="line"></div><div class="line">&gt;&gt;&gt; python = &apos;%+10.1fha&apos;</div><div class="line">&gt;&gt;&gt; print python % 10</div><div class="line">     +10.0ha</div><div class="line"></div><div class="line">&gt;&gt;&gt; print python % 10</div><div class="line">10.0      ha</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>åœ¨å­—æ®µå®½å’Œç²¾åº¦å‰è¾¹è¿˜å¯ä»¥æ”¾ç½®ä¸€ä¸ªæ ‡å¿—ï¼Œè¿™ä¸ªæ ‡å¿—å¯ä»¥æ˜¯é›¶ï¼ŒåŠ å·å’Œå‡å·æˆ–è€…ç©ºæ ¼ï¼Œç”¨æ³•è§ä¸Š</p>
<h3 id="å­—ç¬¦ä¸²æ–¹æ³•"><a href="#å­—ç¬¦ä¸²æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²æ–¹æ³•"></a>å­—ç¬¦ä¸²æ–¹æ³•</h3><h4 id="1ã€find"><a href="#1ã€find" class="headerlink" title="1ã€find"></a>1ã€find</h4><p>findæ–¹æ³•å¯ä»¥åœ¨ä¸€ä¸ªè¾ƒé•¿çš„å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾å­å­—ç¬¦ä¸²ã€‚å®ƒè¿”å›å­ä¸²æ‰€åœ¨ä½ç½®çš„æœ€å·¦ç«¯ç´¢å¼•ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™è¿”å›-1ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name = &apos;hanshenghui&apos;</div><div class="line">&gt;&gt;&gt; name.find(&apos;h&apos;)</div><div class="line">0</div><div class="line">&gt;&gt;&gt; name.find(&apos;h&apos;,2)</div><div class="line">4</div><div class="line">&gt;&gt;&gt; name.find(&apos;h&apos;,2,6)</div><div class="line">4</div><div class="line">&gt;&gt;&gt; name.find(&apos;h&apos;,2,5)</div><div class="line">4</div><div class="line">&gt;&gt;&gt; name.find(&apos;h&apos;,2,3)</div><div class="line">-1</div></pre></td></tr></table></figure></p>
<h4 id="2ã€join-amp-amp-split"><a href="#2ã€join-amp-amp-split" class="headerlink" title="2ã€join &amp;&amp; split"></a>2ã€join &amp;&amp; split</h4><p>joinæ–¹æ³•æ˜¯éå¸¸é‡è¦çš„å­—ç¬¦ä¸²æ–¹æ³•ï¼Œå®ƒæ˜¯splitæ–¹æ³•çš„é€†æ–¹æ³•ï¼Œç”¨æ¥åœ¨é˜Ÿåˆ—ä¸­æ·»åŠ å…ƒç´ ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; s = [&apos;1&apos;, &apos;2&apos;, &apos;3&apos;]</div><div class="line">&gt;&gt;&gt; &apos;+&apos;.join(s)</div><div class="line">&apos;1+2+3&apos;</div></pre></td></tr></table></figure></p>
<p>æ³¨æ„ï¼šéœ€è¦æ·»åŠ çš„é˜Ÿåˆ—å…ƒç´ éƒ½å¿…é¡»æ˜¯å­—ç¬¦ä¸²ã€‚</p>
<p>splitè¿™æ˜¯ä¸ªéå¸¸é‡è¦çš„å­—ç¬¦ä¸²æ–¹æ³•ï¼Œå®ƒæ˜¯joinçš„é€†æ–¹æ³•ï¼Œç”¨æ¥å°†å­—ç¬¦ä¸²åˆ†å‰²æˆåºåˆ—ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; &apos;1+2+3+4&apos;.split(&apos;+&apos;)</div><div class="line">[&apos;1&apos;, &apos;2&apos;, &apos;3&apos;, &apos;4&apos;]</div><div class="line">&gt;&gt;&gt; &apos;1 2 3 4&apos;.split()</div><div class="line">[&apos;1&apos;, &apos;2&apos;, &apos;3&apos;, &apos;4&apos;]</div></pre></td></tr></table></figure></p>
<h4 id="3-lower-amp-amp-upper"><a href="#3-lower-amp-amp-upper" class="headerlink" title="3.lower &amp;&amp; upper"></a>3.lower &amp;&amp; upper</h4><p>loweræ–¹æ³•è¿”å›å­—ç¬¦ä¸²çš„å°å†™å­—æ¯ç‰ˆã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name = &apos;A&apos;</div><div class="line">&gt;&gt;&gt; name.lower()</div><div class="line">&apos;a&apos;</div><div class="line">&gt;&gt;&gt; b = name.lower()</div><div class="line">&gt;&gt;&gt; b.upper()</div><div class="line">&apos;A&apos;</div><div class="line"></div><div class="line">S.lower() #å°å†™ </div><div class="line">S.upper() #å¤§å†™ </div><div class="line">S.swapcase() #å¤§å°å†™äº’æ¢ </div><div class="line">S.capitalize() #é¦–å­—æ¯å¤§å†™</div></pre></td></tr></table></figure></p>
<h4 id="4-strip"><a href="#4-strip" class="headerlink" title="4.strip"></a>4.strip</h4><p>stripæ–¹æ³•è¿”å›å»é™¤ä¸¤ä¾§ï¼ˆä¸åŒ…å«å†…éƒ¨ï¼‰ç©ºæ ¼çš„å­—ç¬¦ä¸²<br>å»ä¸¤è¾¹ç©ºæ ¼ï¼šstr.strip()<br>å»å·¦ç©ºæ ¼ï¼šstr.lstrip()<br>å»å³ç©ºæ ¼ï¼šstr.rstrip()<br>å»ä¸¤è¾¹å­—ç¬¦ä¸²ï¼šstr.strip(â€˜dâ€™)ï¼Œç›¸åº”çš„ä¹Ÿæœ‰lstripï¼Œrstrip</p>
<h4 id="5-replace-amp-amp-translate"><a href="#5-replace-amp-amp-translate" class="headerlink" title="5.replace &amp;&amp; translate"></a>5.replace &amp;&amp; translate</h4><p>translateæ–¹æ³•å’Œreplaceæ–¹æ³•ä¸€æ ·ï¼Œå¯ä»¥æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„æŸäº›éƒ¨åˆ†ï¼Œä½†æ˜¯å’Œå‰è€…ä¸åŒçš„æ˜¯ï¼Œtranslateæ–¹æ³•åªå¤„ç†å•ä¸ªå­—ç¬¦ã€‚å®ƒçš„ä¼˜åŠ¿åœ¨äºå¯ä»¥åŒæ—¶è¿›è¡Œå¤šä¸ªæ›¿æ¢ï¼Œæœ‰äº›æ—¶å€™æ¯”replaceæ•ˆç‡é«˜å¾—å¤šã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name = &apos;hanshenghui&apos;</div><div class="line">&gt;&gt;&gt; name.replace(&apos;h&apos;,&apos;z&apos;)</div><div class="line">&apos;zanszengzui&apos;</div></pre></td></tr></table></figure>
<p>åœ¨ä½¿ç”¨translateè½¬æ¢å‰ï¼Œéœ€è¦å…ˆå®Œæˆä¸€å¼ è½¬æ¢è¡¨ã€‚è½¬æ¢è¡¨ä¸­æ˜¯ä»¥æŸå­—ç¬¦æ›¿æ¢æŸå­—ç¬¦çš„å¯¹åº”å…³ç³»ã€‚å› ä¸ºè¿™ä¸ªè¡¨ï¼ˆäº‹å®ä¸Šæ˜¯å­—ç¬¦ä¸²ï¼‰æœ‰å¤šè¾¾256ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¸è¦è‡ªå·±å†™äº†ï¼Œç”¨stringæ¨¡å—é‡Œé¢çš„maketranså‡½æ•°å°±è¡Œäº†ã€‚</p>
<p>maketranså‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä¸¤ä¸ªç­‰é•¿çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦éƒ½ç”¨ç¬¬äºŒä¸ªå­—ç¬¦ä¸²ä¸­ç›¸åŒä½ç½®çš„å­—ç¬¦æ›¿æ¢ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; from string import maketrans</div><div class="line">&gt;&gt;&gt; table = maketrans(&apos;cs&apos;, &apos;kz&apos;)</div><div class="line">ã€€ã€€åˆ›å»ºè¿™ä¸ªè¡¨åï¼Œå¯ä»¥å°†å®ƒç”¨ä½œtranslateæ–¹æ³•çš„å‚æ•°ï¼Œè¿›è¡Œå­—ç¬¦ä¸²çš„è½¬æ¢ï¼š</div><div class="line"></div><div class="line">&gt;&gt;&gt; &apos;this is an incredible test&apos;.translate(table)</div><div class="line">&apos;thiz iz an inkredible tezt&apos;</div><div class="line">translateçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œè¿™ä¸ªå‚æ•°æ˜¯ç”¨æ¥æŒ‡å®šéœ€è¦åˆ é™¤çš„å­—ç¬¦ã€‚</div><div class="line"></div><div class="line">&gt;&gt;&gt; &apos;this is an incredible test&apos;.translate(table, &apos; &apos;)</div><div class="line">&apos;thizizaninkredibletezt&apos;</div></pre></td></tr></table></figure></p>
<h4 id="6-å­—ç¬¦ä¸²åˆ¤æ–­ç›¸å…³"><a href="#6-å­—ç¬¦ä¸²åˆ¤æ–­ç›¸å…³" class="headerlink" title="6.å­—ç¬¦ä¸²åˆ¤æ–­ç›¸å…³"></a>6.å­—ç¬¦ä¸²åˆ¤æ–­ç›¸å…³</h4><p>å­—ç¬¦ä¸²åˆ¤æ–­ç›¸å…³<br>æ˜¯å¦ä»¥startå¼€å¤´ï¼šstr.startswith(â€˜startâ€™)<br>æ˜¯å¦ä»¥endç»“å°¾ï¼šstr.endswith(â€˜endâ€™)<br>æ˜¯å¦å…¨ä¸ºå­—æ¯æˆ–æ•°å­—ï¼šstr.isalnum()<br>æ˜¯å¦å…¨å­—æ¯ï¼šstr.isalpha()<br>æ˜¯å¦å…¨æ•°å­—ï¼šstr.isdigit()<br>æ˜¯å¦å…¨å°å†™ï¼šstr.islower()<br>æ˜¯å¦å…¨å¤§å†™ï¼šstr.isupper()</p>
<h4 id="7-å­—ç¬¦ä¸²æ¯”è¾ƒ"><a href="#7-å­—ç¬¦ä¸²æ¯”è¾ƒ" class="headerlink" title="7.å­—ç¬¦ä¸²æ¯”è¾ƒ"></a>7.å­—ç¬¦ä¸²æ¯”è¾ƒ</h4><p>cmpæ–¹æ³•æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶æ ¹æ®ç»“æœè¿”å›ä¸€ä¸ªæ•´æ•°ã€‚cmp(x,y)å¦‚æœX&lt; Y,è¿”å›å€¼æ˜¯è´Ÿæ•° å¦‚æœX&gt;Y è¿”å›çš„å€¼ä¸ºæ­£æ•°ã€‚<br>sStr1 = â€˜strchâ€™<br>sStr2 = â€˜strchrâ€™<br>print cmp(sStr1,sStr2)##-1</p>
<h3 id="åˆ—è¡¨ï¼Œå…ƒç»„ï¼Œå­—ç¬¦ä¸²çš„è½¬æ¢listä¸tuple"><a href="#åˆ—è¡¨ï¼Œå…ƒç»„ï¼Œå­—ç¬¦ä¸²çš„è½¬æ¢listä¸tuple" class="headerlink" title="åˆ—è¡¨ï¼Œå…ƒç»„ï¼Œå­—ç¬¦ä¸²çš„è½¬æ¢listä¸tuple"></a>åˆ—è¡¨ï¼Œå…ƒç»„ï¼Œå­—ç¬¦ä¸²çš„è½¬æ¢listä¸tuple</h3><p>æ„ä¹‰åœ¨äºå…ƒç»„å¯ä»¥ä½œä¸ºä¸€ä¸ªå‚æ•°æ•´ä½“ä½¿ç”¨ï¼Œè€Œåˆ—è¡¨ä¸å¯ä»¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name = &apos;hanshenghui&apos;</div><div class="line">&gt;&gt;&gt; tuple(name)</div><div class="line">(&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;, &apos;h&apos;, &apos;u&apos;, &apos;i&apos;)</div><div class="line">&gt;&gt;&gt; list(name)</div><div class="line">[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;, &apos;h&apos;, &apos;u&apos;, &apos;i&apos;]</div><div class="line">&gt;&gt;&gt; tuple(list(name))</div><div class="line">(&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;, &apos;h&apos;, &apos;u&apos;, &apos;i&apos;)</div></pre></td></tr></table></figure></p>
]]></content>
      
        <categories>
            
            <category> Python </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[(è½¬)delegate/KVO/Notificationé€‰æ‹©]]></title>
      <url>/2016/03/18/2016/%E8%BD%AC-delegate-KVO-Notification%E9%80%89%E6%8B%A9/</url>
      <content type="html"><![CDATA[<p>å‰é¢åˆ†åˆ«è®²äº†delegateã€notificationå’ŒKVOçš„å®ç°åŸç†ï¼Œä»¥åŠå®é™…ä½¿ç”¨æ­¥éª¤ï¼Œæˆ‘ä»¬å¿ƒä¸­ä¸ç¦æœ‰ä¸ªç–‘é—®ï¼Œä»–ä»¬çš„åŠŸèƒ½æ¯”è¾ƒç±»ä¼¼ï¼Œé‚£ä¹ˆåœ¨å®é™…çš„ç¼–ç¨‹ä¸­ï¼Œå¦‚ä½•é€‰æ‹©è¿™äº›æ–¹å¼å‘¢ï¼Ÿ<br><a id="more"></a><br>åœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€ä¸ªåšå®¢ä¸Šè¯¦ç»†çš„åˆ†æäº†ä¸‰è€…ä¹‹é—´çš„åŒºåˆ«ä»¥åŠå„è‡ªçš„ä¼˜åŠ¿ï¼Œåšæ–‡åœ°å€ä¸º<a href="http://blog.shinetech.com/2011/06/14/delegation-notification-and-observation/" target="_blank" rel="external">http://blog.shinetech.com/2011/06/14/delegation-notification-and-observation/</a>ï¼Œå› ä¸ºåšæ–‡æ˜¯ç”¨è‹±æ–‡å†™çš„ï¼Œä¸‹é¢å°†å…¶ç¿»è¯‘æˆä¸­æ–‡ã€‚</p>
<p>åœ¨å¼€å‘iosåº”ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šç»å¸¸é‡åˆ°ä¸€ä¸ªå¸¸è§çš„é—®é¢˜ï¼šåœ¨ä¸è¿‡åˆ†è€¦åˆçš„å‰æä¸‹ï¼Œcontrollersé—´æ€ä¹ˆè¿›è¡Œé€šä¿¡ã€‚åœ¨IOSåº”ç”¨ä¸æ–­çš„å‡ºç°ä¸‰ç§æ¨¡å¼æ¥å®ç°è¿™ç§é€šä¿¡ï¼š</p>
<p>1.å§”æ‰˜delegationï¼›</p>
<p>2.é€šçŸ¥ä¸­å¿ƒNotification Centerï¼›</p>
<p>3.é”®å€¼è§‚å¯Ÿkey value observingï¼ŒKVO</p>
<p>å› æ­¤ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦è¿™äº›æ¨¡å¼ä»¥åŠä»€ä¹ˆæ—¶å€™ç”¨å®ƒä»¥åŠä»€ä¹ˆæ—¶å€™ä¸ç”¨å®ƒã€‚</p>
<p>ä¸‹é¢å®Œå…¨æ ¹æ®æˆ‘çš„å¼€å‘ç»éªŒæ¥è®¨è®ºè¿™ä¸‰ä¸­æ¨¡å¼ã€‚æˆ‘å°†è®¨è®ºä¸ºä»€ä¹ˆæˆ‘è§‰å¾—æŸç§æ¨¡å¼è¦å¥½äºå¦å¤–ä¸€ç§æ¨¡å¼ä»¥åŠä¸ºä»€ä¹ˆæˆ‘è§‰å¾—åœ¨ä¸€å®šçš„ç¯å¢ƒä¸‹æŸä¸­æ¨¡å¼æ¯”è¾ƒå¥½ã€‚æˆ‘ç»™å‡ºçš„è¿™äº›åŸå› å¹¶ä¸æ˜¯åœ£ç»ï¼Œè€Œä»…ä»…æ˜¯ä¸ªäººè§‚ç‚¹ã€‚å¦‚æœä½ æœ‰ä»€ä¹ˆä¸åŒçš„è§‚ç‚¹æˆ–è€…è¿˜å¯ä»¥è¿›è¡Œè¡¥å……çš„åœ°æ–¹ï¼Œå¯ä»¥è”ç³»æˆ‘ï¼Œä¸€èµ·è®¨è®ºã€‚</p>
<blockquote>
<p>ä¸Šé¢çš„ä¸‰ç§æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<p>ä¸‰ç§æ¨¡å¼éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ä¼ é€’äº‹ä»¶ç»™å¦å¤–ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”ä¸è¦ä»–ä»¬æœ‰è€¦åˆã€‚ä¸‰ç§æ¨¡å¼éƒ½æ˜¯å¯¹è±¡æ¥é€šçŸ¥æŸä¸ªäº‹ä»¶å‘ç”Ÿäº†çš„æ–¹æ³•ï¼Œæˆ–è€…æ›´å‡†ç¡®çš„è¯´ï¼Œæ˜¯å…è®¸å…¶ä»–çš„å¯¹è±¡æ”¶åˆ°è¿™ç§äº‹ä»¶çš„æ–¹æ³•ã€‚è¿™å¯¹äºä¸€ä¸ªå¯¹è±¡æ¥è¯´ï¼Œæ˜¯éå¸¸æ™®é€šè€Œä¸”å¿…é¡»åšçš„ä»»åŠ¡ï¼Œå› ä¸ºæ²¡æœ‰é€šä¿¡ï¼Œcontrollerså°†ä¸èƒ½æ•´åˆåˆ°æ•´ä¸ªåº”ç”¨ä¸­ã€‚controllerçš„å¦å¤–ä¸€ä¸ªç›®çš„æ˜¯å°½å¯èƒ½çš„è‡ªåŒ…å«ã€‚æˆ‘ä»¬å¸Œæœ›controllersä»¥è‡ªå·±çš„æ–¹å¼å­˜åœ¨ï¼Œåœ¨controllerså±‚é¢ä¸Šä¸èƒ½ä¸å…¶ä»–çš„controllersè¿›è¡Œè€¦åˆã€‚Controllersèƒ½å¤Ÿç©¿ä»¶å…¶ä»–çš„controllersè€Œä¸”ä»–ä»¬ä¹‹é—´å¯ä»¥è‡ªç”±é€šä¿¡ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›controlleråˆå›æ¥åˆ°åˆ›å»ºè‡ªå·±çš„controllerã€‚å¦‚æœæˆ‘ä»¬è€¦åˆäº†ä»–ä»¬ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†ä¸èƒ½å¤ç”¨ä»–ä»¬ï¼Œä»¥åŠå®Œå…¨å¤±å»å¯¹åº”ç”¨ä¸­ä¸€ä¸ªç‹¬ç«‹çš„ç»„ä»¶çš„æ§åˆ¶ã€‚</p>
<p>è¿™ä¸‰ç§æ¨¡å¼ç»™controllers(ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–çš„å¯¹è±¡ï¼‰æä¾›é€šä¿¡çš„æ–¹æ³•ã€‚ä¸‹é¢å°†æè¿°å¦‚ä½•åœ¨iosåº”ç”¨ä¸­ä½¿ç”¨è¿™äº›æ¨¡å¼ï¼ŒåŒæ ·éœ€è¦æ³¨æ„çš„ä»–ä»¬åœ¨å…¶ä»–çš„åœ°æ–¹ä¹Ÿä¼šç”¨åˆ°ï¼Œå¹¶ä¸”ç¡®å®æ˜¯å­˜åœ¨ã€‚</p>
<h2 id="delegation"><a href="#delegation" class="headerlink" title="delegation"></a>delegation</h2><p>å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡ç¼–å†™iosåº”ç”¨æ—¶ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°ä¸æ–­çš„åœ¨ä½¿ç”¨â€œdelegateâ€ï¼Œå¹¶ä¸”è´¯ç©¿äºæ•´ä¸ªSDKã€‚delegationæ¨¡å¼ä¸æ˜¯IOSç‰¹æœ‰çš„æ¨¡å¼ï¼Œè€Œæ˜¯ä¾èµ–ä¸ä½ è¿‡å»æ‹¥æœ‰çš„ç¼–ç¨‹èƒŒæ™¯ã€‚é’ˆå¯¹å®ƒçš„ä¼˜åŠ¿ä»¥åŠä¸ºä»€ä¹ˆç»å¸¸ä½¿ç”¨åˆ°ï¼Œè¿™ç§æ¨¡å¼å¯èƒ½ä¸æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚</p>
<p>delegationçš„åŸºæœ¬ç‰¹å¾æ˜¯ï¼Œä¸€ä¸ªcontrollerå®šä¹‰äº†ä¸€ä¸ªåè®®ï¼ˆå³ä¸€ç³»åˆ—çš„æ–¹æ³•å®šä¹‰ï¼‰ã€‚è¯¥åè®®æè¿°äº†ä¸€ä¸ªdelegateå¯¹è±¡ä¸ºäº†èƒ½å¤Ÿå“åº”ä¸€ä¸ªcontrollerçš„äº‹ä»¶è€Œå¿…é¡»åšçš„äº‹æƒ…ã€‚åè®®å°±æ˜¯delegatorè¯´ï¼Œâ€œå¦‚æœä½ æƒ³ä½œä¸ºæˆ‘çš„delegateï¼Œé‚£ä¹ˆä½ å°±å¿…é¡»å®ç°è¿™äº›æ–¹æ³•â€ã€‚å®ç°è¿™äº›æ–¹æ³•å°±æ˜¯å…è®¸controlleråœ¨å®ƒçš„delegateèƒ½å¤Ÿè°ƒç”¨è¿™äº›æ–¹æ³•ï¼Œè€Œå®ƒçš„delegateçŸ¥é“ä»€ä¹ˆæ—¶å€™è°ƒç”¨å“ªç§æ–¹æ³•ã€‚delegateå¯ä»¥æ˜¯ä»»ä½•ä¸€ç§å¯¹è±¡ç±»å‹ï¼Œå› æ­¤controllerä¸ä¼šä¸æŸç§å¯¹è±¡è¿›è¡Œè€¦åˆï¼Œä½†æ˜¯å½“è¯¥å¯¹è±¡å°è¯•å‘Šè¯‰å§”æ‰˜äº‹æƒ…æ—¶ï¼Œè¯¥å¯¹è±¡èƒ½ç¡®å®šdelegateå°†å“åº”ã€‚</p>
<h3 id="delegateçš„ä¼˜åŠ¿ï¼š"><a href="#delegateçš„ä¼˜åŠ¿ï¼š" class="headerlink" title="delegateçš„ä¼˜åŠ¿ï¼š"></a>delegateçš„ä¼˜åŠ¿ï¼š</h3><blockquote>
<p>1.éå¸¸ä¸¥æ ¼çš„è¯­æ³•ã€‚æ‰€æœ‰å°†å¬åˆ°çš„äº‹ä»¶å¿…é¡»æ˜¯åœ¨delegateåè®®ä¸­æœ‰æ¸…æ™°çš„å®šä¹‰ã€‚</p>
</blockquote>
<p>2.å¦‚æœdelegateä¸­çš„ä¸€ä¸ªæ–¹æ³•æ²¡æœ‰å®ç°é‚£ä¹ˆå°±ä¼šå‡ºç°ç¼–è¯‘è­¦å‘Š/é”™è¯¯</p>
<p>3.åè®®å¿…é¡»åœ¨controllerçš„ä½œç”¨åŸŸèŒƒå›´å†…å®šä¹‰</p>
<p>4.åœ¨ä¸€ä¸ªåº”ç”¨ä¸­çš„æ§åˆ¶æµç¨‹æ˜¯å¯è·Ÿè¸ªçš„å¹¶ä¸”æ˜¯å¯è¯†åˆ«çš„ï¼›</p>
<p>5.åœ¨ä¸€ä¸ªæ§åˆ¶å™¨ä¸­å¯ä»¥å®šä¹‰å®šä¹‰å¤šä¸ªä¸åŒçš„åè®®ï¼Œæ¯ä¸ªåè®®æœ‰ä¸åŒçš„delegates</p>
<p>6.æ²¡æœ‰ç¬¬ä¸‰æ–¹å¯¹è±¡è¦æ±‚ä¿æŒ/ç›‘è§†é€šä¿¡è¿‡ç¨‹ã€‚</p>
<p>7.èƒ½å¤Ÿæ¥æ”¶è°ƒç”¨çš„åè®®æ–¹æ³•çš„è¿”å›å€¼ã€‚è¿™æ„å‘³ç€delegateèƒ½å¤Ÿæä¾›åé¦ˆä¿¡æ¯ç»™controller</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>1.éœ€è¦å®šä¹‰å¾ˆå¤šä»£ç ï¼š1.åè®®å®šä¹‰ï¼›2.controllerçš„delegateå±æ€§ï¼›3.åœ¨delegateæœ¬èº«ä¸­å®ç°delegateæ–¹æ³•å®šä¹‰</p>
<p>2.åœ¨é‡Šæ”¾ä»£ç†å¯¹è±¡æ—¶ï¼Œéœ€è¦å°å¿ƒçš„å°†delegateæ”¹ä¸ºnilã€‚ä¸€æ—¦è®¾å®šå¤±è´¥ï¼Œé‚£ä¹ˆè°ƒç”¨é‡Šæ”¾å¯¹è±¡çš„æ–¹æ³•å°†ä¼šå‡ºç°å†…å­˜crash</p>
<p>3.åœ¨ä¸€ä¸ªcontrollerä¸­æœ‰å¤šä¸ªdelegateå¯¹è±¡ï¼Œå¹¶ä¸”delegateæ˜¯éµå®ˆåŒä¸€ä¸ªåè®®ï¼Œä½†è¿˜æ˜¯å¾ˆéš¾å‘Šè¯‰å¤šä¸ªå¯¹è±¡åŒä¸€ä¸ªäº‹ä»¶ï¼Œä¸è¿‡æœ‰å¯èƒ½ã€‚</p>
<h2 id="notification"><a href="#notification" class="headerlink" title="notification"></a>notification</h2><p>åœ¨IOSåº”ç”¨å¼€å‘ä¸­æœ‰ä¸€ä¸ªâ€Notification Centerâ€œçš„æ¦‚å¿µã€‚å®ƒæ˜¯ä¸€ä¸ªå•ä¾‹å¯¹è±¡ï¼Œå…è®¸å½“äº‹ä»¶å‘ç”Ÿæ—¶é€šçŸ¥ä¸€äº›å¯¹è±¡ã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨ä½ç¨‹åº¦è€¦åˆçš„æƒ…å†µä¸‹ï¼Œæ»¡è¶³æ§åˆ¶å™¨ä¸ä¸€ä¸ªä»»æ„çš„å¯¹è±¡è¿›è¡Œé€šä¿¡çš„ç›®çš„ã€‚è¿™ç§æ¨¡å¼çš„åŸºæœ¬ç‰¹å¾æ˜¯ä¸ºäº†è®©å…¶ä»–çš„å¯¹è±¡èƒ½å¤Ÿæ¥æ”¶åˆ°åœ¨è¯¥controllerä¸­å‘ç”ŸæŸç§äº‹ä»¶è€Œäº§ç”Ÿçš„æ¶ˆæ¯ï¼Œcontrollerç”¨ä¸€ä¸ªkeyï¼ˆé€šçŸ¥åç§°ï¼‰ã€‚è¿™æ ·å¯¹äºcontrolleræ¥è¯´æ˜¯åŒ¿åçš„ï¼Œå…¶ä»–çš„ä½¿ç”¨åŒæ ·çš„keyæ¥æ³¨å†Œäº†è¯¥é€šçŸ¥çš„å¯¹è±¡ï¼ˆå³è§‚å¯Ÿè€…ï¼‰èƒ½å¤Ÿå¯¹é€šçŸ¥çš„äº‹ä»¶ä½œå‡ºååº”ã€‚</p>
<p>ä¼˜åŠ¿ï¼š</p>
<blockquote>
<p>1.ä¸éœ€è¦ç¼–å†™å¤šå°‘ä»£ç ï¼Œå®ç°æ¯”è¾ƒç®€å•ï¼›</p>
</blockquote>
<p>2.å¯¹äºä¸€ä¸ªå‘å‡ºçš„é€šçŸ¥ï¼Œå¤šä¸ªå¯¹è±¡èƒ½å¤Ÿåšå‡ºååº”ï¼Œå³1å¯¹å¤šçš„æ–¹å¼å®ç°ç®€å•</p>
<p>3.controllerèƒ½å¤Ÿä¼ é€’contextå¯¹è±¡ï¼ˆdictionaryï¼‰ï¼Œcontextå¯¹è±¡æºå¸¦äº†å…³äºå‘é€é€šçŸ¥çš„è‡ªå®šä¹‰çš„ä¿¡æ¯</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>1.åœ¨ç¼–è¯‘æœŸä¸ä¼šæ£€æŸ¥é€šçŸ¥æ˜¯å¦èƒ½å¤Ÿè¢«è§‚å¯Ÿè€…æ­£ç¡®çš„å¤„ç†ï¼›</p>
<p>2.åœ¨é‡Šæ”¾æ³¨å†Œçš„å¯¹è±¡æ—¶ï¼Œéœ€è¦åœ¨é€šçŸ¥ä¸­å¿ƒå–æ¶ˆæ³¨å†Œï¼›</p>
<p>3.åœ¨è°ƒè¯•çš„æ—¶å€™åº”ç”¨çš„å·¥ä½œä»¥åŠæ§åˆ¶è¿‡ç¨‹éš¾è·Ÿè¸ªï¼›</p>
<p>4.éœ€è¦ç¬¬ä¸‰æ–¹å¯¹å–œçˆ±é‚£ä¸ªæ¥ç®¡ç†controllerä¸è§‚å¯Ÿè€…å¯¹è±¡ä¹‹é—´çš„è”ç³»ï¼›</p>
<p>5.controllerå’Œè§‚å¯Ÿè€…éœ€è¦æå‰çŸ¥é“é€šçŸ¥åç§°ã€UserInfo dictionary keysã€‚å¦‚æœè¿™äº›æ²¡æœ‰åœ¨å·¥ä½œåŒºé—´å®šä¹‰ï¼Œé‚£ä¹ˆä¼šå‡ºç°ä¸åŒæ­¥çš„æƒ…å†µï¼›</p>
<p>6.é€šçŸ¥å‘å‡ºåï¼Œcontrollerä¸èƒ½ä»è§‚å¯Ÿè€…è·å¾—ä»»ä½•çš„åé¦ˆä¿¡æ¯ã€‚</p>
<h2 id="KVO"><a href="#KVO" class="headerlink" title="KVO"></a>KVO</h2><p>KVOæ˜¯ä¸€ä¸ªå¯¹è±¡èƒ½å¤Ÿè§‚å¯Ÿå¦å¤–ä¸€ä¸ªå¯¹è±¡çš„å±æ€§çš„å€¼ï¼Œå¹¶ä¸”èƒ½å¤Ÿå‘ç°å€¼çš„å˜åŒ–ã€‚å‰é¢ä¸¤ç§æ¨¡å¼æ›´åŠ é€‚åˆä¸€ä¸ªcontrollerä¸ä»»ä½•å…¶ä»–çš„å¯¹è±¡è¿›è¡Œé€šä¿¡ï¼Œè€ŒKVOæ›´åŠ é€‚åˆä»»ä½•ç±»å‹çš„å¯¹è±¡ä¾¦å¬å¦å¤–ä¸€ä¸ªä»»æ„å¯¹è±¡çš„æ”¹å˜ï¼ˆè¿™é‡Œä¹Ÿå¯ä»¥æ˜¯controllerï¼Œä½†ä¸€èˆ¬ä¸æ˜¯controllerï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªå¯¹è±¡ä¸å¦å¤–ä¸€ä¸ªå¯¹è±¡ä¿æŒåŒæ­¥çš„ä¸€ç§æ–¹æ³•ï¼Œå³å½“å¦å¤–ä¸€ç§å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè§‚å¯Ÿå¯¹è±¡é©¬ä¸Šä½œå‡ºååº”ã€‚å®ƒåªèƒ½ç”¨æ¥å¯¹å±æ€§ä½œå‡ºååº”ï¼Œè€Œä¸ä¼šç”¨æ¥å¯¹æ–¹æ³•æˆ–è€…åŠ¨ä½œä½œå‡ºååº”ã€‚</p>
<p>ä¼˜ç‚¹ï¼š</p>
<blockquote>
<p>1.èƒ½å¤Ÿæä¾›ä¸€ç§ç®€å•çš„æ–¹æ³•å®ç°ä¸¤ä¸ªå¯¹è±¡é—´çš„åŒæ­¥ã€‚ä¾‹å¦‚ï¼šmodelå’Œviewä¹‹é—´åŒæ­¥ï¼›</p>
</blockquote>
<p>2.èƒ½å¤Ÿå¯¹éæˆ‘ä»¬åˆ›å»ºçš„å¯¹è±¡ï¼Œå³å†…éƒ¨å¯¹è±¡çš„çŠ¶æ€æ”¹å˜ä½œå‡ºå“åº”ï¼Œè€Œä¸”ä¸éœ€è¦æ”¹å˜å†…éƒ¨å¯¹è±¡ï¼ˆSKDå¯¹è±¡ï¼‰çš„å®ç°ï¼›</p>
<p>3.èƒ½å¤Ÿæä¾›è§‚å¯Ÿçš„å±æ€§çš„æœ€æ–°å€¼ä»¥åŠå…ˆå‰å€¼ï¼›</p>
<p>4.ç”¨key pathsæ¥è§‚å¯Ÿå±æ€§ï¼Œå› æ­¤ä¹Ÿå¯ä»¥è§‚å¯ŸåµŒå¥—å¯¹è±¡ï¼›</p>
<p>5.å®Œæˆäº†å¯¹è§‚å¯Ÿå¯¹è±¡çš„æŠ½è±¡ï¼Œå› ä¸ºä¸éœ€è¦é¢å¤–çš„ä»£ç æ¥å…è®¸è§‚å¯Ÿå€¼èƒ½å¤Ÿè¢«è§‚å¯Ÿ</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>1.æˆ‘ä»¬è§‚å¯Ÿçš„å±æ€§å¿…é¡»ä½¿ç”¨stringsæ¥å®šä¹‰ã€‚å› æ­¤åœ¨ç¼–è¯‘å™¨ä¸ä¼šå‡ºç°è­¦å‘Šä»¥åŠæ£€æŸ¥ï¼›</p>
<p>2.å¯¹å±æ€§é‡æ„å°†å¯¼è‡´æˆ‘ä»¬çš„è§‚å¯Ÿä»£ç ä¸å†å¯ç”¨ï¼›</p>
<p>3.å¤æ‚çš„â€œIFâ€è¯­å¥è¦æ±‚å¯¹è±¡æ­£åœ¨è§‚å¯Ÿå¤šä¸ªå€¼ã€‚è¿™æ˜¯å› ä¸ºæ‰€æœ‰çš„è§‚å¯Ÿä»£ç é€šè¿‡ä¸€ä¸ªæ–¹æ³•æ¥æŒ‡å‘ï¼›</p>
<p>4.å½“é‡Šæ”¾è§‚å¯Ÿè€…æ—¶ä¸éœ€è¦ç§»é™¤è§‚å¯Ÿè€…ã€‚</p>
<h2 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h2><p>ä»ä¸Šé¢çš„åˆ†æä¸­å¯ä»¥çœ‹å‡º3ä¸­è®¾è®¡æ¨¡å¼éƒ½æœ‰å„è‡ªçš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚å…¶å®ä»»ä½•ä¸€ç§äº‹ç‰©éƒ½æ˜¯è¿™æ ·ï¼Œé—®é¢˜æ˜¯å¦‚ä½•åœ¨æ­£ç¡®çš„æ—¶é—´æ­£ç¡®çš„ç¯å¢ƒä¸‹é€‰æ‹©æ­£ç¡®çš„äº‹ç‰©ã€‚ä¸‹é¢å°±è®²è®²å¦‚ä½•å‘æŒ¥ä»–ä»¬å„è‡ªçš„ä¼˜åŠ¿ï¼Œåœ¨å“ªç§æƒ…å†µä¸‹ä½¿ç”¨å“ªç§æ¨¡å¼ã€‚æ³¨æ„ä½¿ç”¨ä»»ä½•ä¸€ç§æ¨¡å¼éƒ½æ²¡æœ‰å¯¹å’Œé”™ï¼Œåªæœ‰æ›´é€‚åˆæˆ–è€…ä¸é€‚åˆã€‚æ¯ä¸€ç§æ¨¡å¼éƒ½ç»™å¯¹è±¡æä¾›ä¸€ç§æ–¹æ³•æ¥é€šçŸ¥ä¸€ä¸ªäº‹ä»¶ç»™å…¶ä»–å¯¹è±¡ï¼Œè€Œä¸”å‰è€…ä¸éœ€è¦çŸ¥é“ä¾¦å¬è€…ã€‚åœ¨è¿™ä¸‰ç§æ¨¡å¼ä¸­ï¼Œæˆ‘è®¤ä¸ºKVOæœ‰æœ€æ¸…æ™°çš„ä½¿ç”¨æ¡ˆä¾‹ï¼Œè€Œä¸”é’ˆå¯¹æŸä¸ªéœ€æ±‚æœ‰æ¸…æ™°çš„å®ç”¨æ€§ã€‚è€Œå¦å¤–ä¸¤ç§æ¨¡å¼æœ‰æ¯”è¾ƒç›¸ä¼¼çš„ç”¨å¤„ï¼Œå¹¶ä¸”ç»å¸¸ç”¨æ¥ç»™controlleré—´è¿›è¡Œé€šä¿¡ã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨ä»€ä¹ˆæƒ…å†µä½¿ç”¨å…¶ä¸­ä¹‹ä¸€å‘¢ï¼Ÿ</p>
<p>æ ¹æ®æˆ‘å¼€å‘iOSåº”ç”¨çš„ç»å†ï¼Œæˆ‘å‘ç°æœ‰äº›è¿‡åˆ†çš„ä½¿ç”¨é€šçŸ¥æ¨¡å¼ã€‚æˆ‘ä¸ªäººä¸æ˜¯å¾ˆå–œæ¬¢ä½¿ç”¨é€šçŸ¥ä¸­å¿ƒã€‚æˆ‘å‘ç°ç”¨é€šçŸ¥ä¸­å¿ƒå¾ˆéš¾æŠŠæ¡åº”ç”¨çš„æ‰§è¡Œæµç¨‹ã€‚UserInfo dictionariesçš„keysåˆ°å¤„ä¼ é€’å¯¼è‡´å¤±å»äº†åŒæ­¥ï¼Œè€Œä¸”åœ¨å…¬å…±ç©ºé—´éœ€è¦å®šä¹‰å¤ªå¤šçš„å¸¸é‡ã€‚å¯¹äºä¸€ä¸ªå·¥ä½œäºç°æœ‰çš„é¡¹ç›®çš„å¼€å‘è€…æ¥è¯´ï¼Œå¦‚æœè¿‡åˆ†çš„ä½¿ç”¨é€šçŸ¥ä¸­å¿ƒï¼Œé‚£ä¹ˆå¾ˆéš¾ç†è§£åº”ç”¨çš„æµç¨‹ã€‚</p>
<p>æˆ‘è§‰å¾—ä½¿ç”¨å‘½åè§„åˆ™å¥½çš„åè®®å’Œåè®®æ–¹æ³•å®šä¹‰å¯¹äºæ¸…æ™°çš„ç†è§£controllersé—´çš„é€šä¿¡æ˜¯å¾ˆå®¹æ˜“çš„ã€‚åŠªåŠ›çš„å®šä¹‰è¿™äº›åè®®æ–¹æ³•å°†å¢å¼ºä»£ç çš„å¯è¯»æ€§ï¼Œä»¥åŠæ›´å¥½çš„è·Ÿè¸ªä½ çš„appã€‚ä»£ç†åè®®å‘ç”Ÿæ”¹å˜ä»¥åŠå®ç°éƒ½å¯é€šè¿‡ç¼–è¯‘å™¨æ£€æŸ¥å‡ºæ¥ï¼Œå¦‚æœæ²¡æœ‰å°†ä¼šåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­è‡³å°‘ä¼šå‡ºç°crashï¼Œè€Œä¸ä»…ä»…æ˜¯è®©ä¸€äº›äº‹æƒ…å¼‚å¸¸å·¥ä½œã€‚ç”šè‡³åœ¨åŒä¸€äº‹ä»¶é€šçŸ¥å¤šæ§åˆ¶å™¨çš„åœºæ™¯ä¸­ï¼Œåªè¦ä½ çš„åº”ç”¨åœ¨controllerå±‚æ¬¡æœ‰ç€è‰¯å¥½çš„ç»“æ„ï¼Œæ¶ˆæ¯å°†åœ¨è¯¥å±‚æ¬¡ä¸Šä¼ é€’ã€‚è¯¥å±‚æ¬¡èƒ½å¤Ÿå‘åä¼ é€’ç›´è‡³è®©æ‰€æœ‰éœ€è¦çŸ¥é“äº‹ä»¶çš„controllerséƒ½çŸ¥é“ã€‚</p>
<p>å½“ç„¶ä¼šæœ‰delegationæ¨¡å¼ä¸é€‚åˆçš„ä¾‹å¤–æƒ…å†µå‡ºç°ï¼Œè€Œä¸”notificationå¯èƒ½æ›´åŠ æœ‰æ•ˆã€‚ä¾‹å¦‚ï¼šåº”ç”¨ä¸­æ‰€æœ‰çš„controlleréœ€è¦çŸ¥é“ä¸€ä¸ªäº‹ä»¶ã€‚ç„¶è€Œè¿™äº›ç±»å‹çš„åœºæ™¯å¾ˆå°‘å‡ºç°ã€‚å¦å¤–ä¸€ä¸ªä¾‹å­æ˜¯å½“ä½ å»ºç«‹äº†ä¸€ä¸ªæ¶æ„è€Œä¸”éœ€è¦é€šçŸ¥è¯¥äº‹ä»¶ç»™æ­£åœ¨è¿è¡Œä¸­åº”ç”¨ã€‚</p>
<p>æ ¹æ®ç»éªŒï¼Œå¦‚æœæ˜¯å±æ€§å±‚çš„äº‹ä»¶ï¼Œä¸ç®¡æ˜¯åœ¨ä¸éœ€è¦ç¼–ç¨‹çš„å¯¹è±¡è¿˜æ˜¯åœ¨ç´§ç´§ç»‘å®šä¸€ä¸ªviewå¯¹è±¡çš„modelå¯¹è±¡ï¼Œæˆ‘åªä½¿ç”¨è§‚å¯Ÿã€‚å¯¹äºå…¶ä»–çš„äº‹ä»¶ï¼Œæˆ‘éƒ½ä¼šä½¿ç”¨delegateæ¨¡å¼ã€‚å¦‚æœå› ä¸ºæŸç§åŸå› æˆ‘ä¸èƒ½ä½¿ç”¨delegateï¼Œé¦–å…ˆæˆ‘å°†ä¼°è®¡æˆ‘çš„appæ¶æ„æ˜¯å¦å‡ºç°äº†ä¸¥é‡çš„é”™è¯¯ã€‚å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œç„¶åæ‰ä½¿ç”¨notificationã€‚</p>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSæŠ€èƒ½æ€»ç»“]]></title>
      <url>/2016/02/19/2016/iOS%E6%8A%80%E8%83%BD%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<p>å‚è€ƒâ€“å”å·§ï¼ŒiOSæŠ€èƒ½å›¾è°±<br><a id="more"></a></p>
<h3 id="ç¼–ç¨‹è¯­è¨€"><a href="#ç¼–ç¨‹è¯­è¨€" class="headerlink" title="ç¼–ç¨‹è¯­è¨€"></a>ç¼–ç¨‹è¯­è¨€</h3><ul>
<li>Swift</li>
<li>Objective-C</li>
<li>C++/C</li>
<li>JavaScript</li>
<li>Python</li>
</ul>
<h3 id="æ“ä½œç³»ç»Ÿ"><a href="#æ“ä½œç³»ç»Ÿ" class="headerlink" title="æ“ä½œç³»ç»Ÿ"></a>æ“ä½œç³»ç»Ÿ</h3><ul>
<li>Mac OSX</li>
<li>iOS</li>
<li>watchOS</li>
<li>tvOS</li>
<li>Linux å¸¸ç”¨å‘½ä»¤</li>
</ul>
<h3 id="å¼€å‘åŸºç¡€"><a href="#å¼€å‘åŸºç¡€" class="headerlink" title="å¼€å‘åŸºç¡€"></a>å¼€å‘åŸºç¡€</h3><ul>
<li>UI æ§ä»¶</li>
<li>Storyboard &amp; Xib</li>
<li>Core Data &amp; Sqliteæ•°æ®æŒä¹…åŒ–CoreDataçš„å¤šçº¿ç¨‹ äº†è§£æ²¡?  CoreData çš„ä¸åŒç‰ˆæœ¬çš„æ•°æ®è¿ç§»æ€ä¹ˆåš?</li>
<li>Core Graphics</li>
<li>Animation</li>
<li>Block &amp; GCDï¼ŒGCD ,NSThread ,NSOperation èƒ½ä¸èƒ½æ»”æ»”ä¸ç»çš„è®²å‡ºæ¥</li>
<li>Test Case ç¼–å†™</li>
<li>Framework</li>
<li>Autolayout</li>
<li>WebController</li>
<li>æ‰‹åŠ¿è¯†åˆ«ï¼Œé‡åŠ›æ„Ÿåº”</li>
<li>æ¨é€</li>
<li>ç½‘ç»œåŠ å¯†</li>
<li>keyChain é’¥åŒ™ä¸²å­˜å‚¨</li>
</ul>
<h3 id="å¼€å‘è¿›é˜¶"><a href="#å¼€å‘è¿›é˜¶" class="headerlink" title="å¼€å‘è¿›é˜¶"></a>å¼€å‘è¿›é˜¶</h3><ul>
<li>å†…å­˜ç®¡ç†</li>
<li>Runtimeï¼Œåœ¨é¡¹ç›®ä¸­çš„åº”ç”¨</li>
<li>Runloopï¼Œåœ¨é¡¹ç›®ä¸­çš„åº”ç”¨</li>
<li>å¯¹è±¡æ¨¡å‹</li>
<li>Hybrid</li>
<li>æ²™ç›’æœºåˆ¶</li>
<li>AVFoundation</li>
<li>Core Text</li>
<li>appç˜¦èº«</li>
<li>æ’ä»¶åˆ¶ä½œ</li>
<li>æ‰“åŒ….aå’Œframwork</li>
<li>ä¼˜åŒ–<ul>
<li>ç”µé‡</li>
<li>æµé‡</li>
<li>æ€§èƒ½</li>
<li>ç½‘ç»œ</li>
</ul>
</li>
<li><p>é€†å‘ä¸å®‰å…¨</p>
<ul>
<li>class dump</li>
<li>IDA Pro</li>
<li>Hopper</li>
<li>iOS Class Guard</li>
</ul>
</li>
</ul>
<h3 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼</h3><ul>
<li>MVC</li>
<li>MVVM</li>
<li>é€šçŸ¥</li>
<li>ä»£ç†</li>
<li>KVO</li>
<li>å·¥å‚æ¨¡å¼</li>
<li>å‘½ä»¤æ¨¡å¼</li>
</ul>
<h3 id="å¼€å‘å·¥å…·"><a href="#å¼€å‘å·¥å…·" class="headerlink" title="å¼€å‘å·¥å…·"></a>å¼€å‘å·¥å…·</h3><ul>
<li><p>IDE</p>
<ul>
<li>Xcode</li>
<li>AppCode</li>
</ul>
</li>
<li><p>è°ƒè¯•å·¥å…·</p>
<ul>
<li>Charlesã€Wireshark</li>
<li>Reveal</li>
<li>Instruments</li>
</ul>
</li>
<li><p>æ’ä»¶</p>
<ul>
<li>Alcatraz</li>
<li>VVDocument</li>
<li>XVim</li>
<li>FuzzyAutocompletePlugin</li>
<li>KSImageNamed-Xcode</li>
</ul>
</li>
<li><p>è¾…åŠ©å·¥å…·</p>
<ul>
<li>xScope</li>
<li>ImageOptim</li>
<li>é©¬å…‹é³—</li>
<li>Dash</li>
<li>Deploymate</li>
<li>FauxPas</li>
<li>PaintCode</li>
</ul>
</li>
<li><p>å‘½ä»¤è¡Œå·¥å…·</p>
<ul>
<li>xcodebuildã€xcode-select</li>
<li>nomad</li>
<li>xctool</li>
<li>fastlane</li>
</ul>
</li>
<li><p>æŒç»­é›†æˆ</p>
<ul>
<li>Jenkins</li>
<li>Travis CI</li>
<li>Bot</li>
</ul>
</li>
</ul>
<h3 id="å¼€æºé¡¹ç›®"><a href="#å¼€æºé¡¹ç›®" class="headerlink" title="å¼€æºé¡¹ç›®"></a>å¼€æºé¡¹ç›®</h3><ul>
<li>AFNetworking &amp; Alamofire</li>
<li>Masonry</li>
<li>SDWebImage</li>
<li>SwiftyJSON</li>
<li>JSPatch</li>
<li>React Native</li>
</ul>
<h3 id="App-æ‰“åŒ…ä¸Šä¼ ä¸å®¡æ ¸"><a href="#App-æ‰“åŒ…ä¸Šä¼ ä¸å®¡æ ¸" class="headerlink" title="App æ‰“åŒ…ä¸Šä¼ ä¸å®¡æ ¸"></a>App æ‰“åŒ…ä¸Šä¼ ä¸å®¡æ ¸</h3><ul>
<li>Apple Developer ç½‘ç«™</li>
<li>iTunes Connect ç½‘ç«™</li>
<li>IAP</li>
<li>åŠ æ€¥å®¡æ ¸ç”³è¯·</li>
<li>æ‰“åŒ…è„šæœ¬</li>
</ul>
<h3 id="ç¬¬ä¸‰æ–¹æœåŠ¡"><a href="#ç¬¬ä¸‰æ–¹æœåŠ¡" class="headerlink" title="ç¬¬ä¸‰æ–¹æœåŠ¡"></a>ç¬¬ä¸‰æ–¹æœåŠ¡</h3><ul>
<li><p>å´©æºƒæ”¶é›†</p>
<ul>
<li>Bugly</li>
<li>Crashlytics</li>
<li>BugHD</li>
<li>Fabric</li>
</ul>
</li>
<li><p>æ•°æ®ç»Ÿè®¡</p>
<ul>
<li>Google Analytics</li>
<li>å‹ç›Ÿ</li>
<li>MTA</li>
<li>Flurry</li>
<li>App Annie</li>
</ul>
</li>
<li>åº”ç”¨åˆ†å‘<ul>
<li>TestFlight</li>
<li>è’²å…¬è‹±</li>
<li>FIR</li>
</ul>
</li>
</ul>
<h3 id="åŒ…ç®¡ç†"><a href="#åŒ…ç®¡ç†" class="headerlink" title="åŒ…ç®¡ç†"></a>åŒ…ç®¡ç†</h3><ul>
<li>CocoaPods</li>
<li>Carthage</li>
<li>Swift Package Manager</li>
</ul>
<h3 id="å‡½æ•°å¼ç¼–ç¨‹"><a href="#å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹"></a>å‡½æ•°å¼ç¼–ç¨‹</h3><ul>
<li>ReactiveCocoa</li>
<li>RxSwift</li>
</ul>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[(è½¬)é¡¹ç›®ä¼˜åŒ–--å®‰è£…åŒ…ä½“ç§¯æ§åˆ¶]]></title>
      <url>/2016/01/18/2016/%E8%BD%AC-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96-%E5%AE%89%E8%A3%85%E5%8C%85%E4%BD%93%E7%A7%AF%E6%8E%A7%E5%88%B6/</url>
      <content type="html"><![CDATA[<blockquote>
<p>iOSå¾®ä¿¡å®‰è£…åŒ…ç˜¦èº«<br><a id="more"></a></p>
<h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2></blockquote>
<p>å¾®ä¿¡ç»è¿‡å¤šæ¬¡ç‰ˆæœ¬è¿­ä»£ï¼Œäº§ç”Ÿä¸å°‘å†—ä½™ä»£ç å’Œæ— ç”¨èµ„æºã€‚ä¹‹å‰å¾®ä¿¡ä¹Ÿæ²¡æœ‰å¾ˆå¥½çš„æ‰‹æ®µçŸ¥é“å“ªä¸ªæ¨¡å—å¢é‡å¤šå°‘ã€‚å¦å¤–å»å¹´10æœˆå¾®ä¿¡å¼€å§‹åšARCæ”¯æŒï¼Œç›®çš„æ˜¯ä¸ºäº†å‡å°‘é‡æŒ‡é’ˆå¸¦æ¥çš„Crashï¼Œä½†ä»£ä»·æ˜¯å¯æ‰§è¡Œæ–‡ä»¶å¢å¤§20%å·¦å³ã€‚è€Œè‹¹æœè§„å®šä»Šå¹´6æœˆæäº¤ç»™Appstoreçš„åº”ç”¨å¿…é¡»æ”¯æŒ64ä½ï¼Œ32ä½å’Œ64ä½ä¸¤ä¸ªæ¶æ„çš„å­˜åœ¨ä½¿å¾—å¯æ‰§è¡Œæ–‡ä»¶å¢åŠ äº†ä¸€å€å¤šã€‚å®‰è£…åŒ…å¤§å°ä¼˜åŒ–è¿«åœ¨çœ‰ç«ã€‚</p>
<p>Appstoreå®‰è£…åŒ…æ˜¯ç”±èµ„æºå’Œå¯æ‰§è¡Œæ–‡ä»¶ä¸¤éƒ¨åˆ†ç»„æˆï¼Œå®‰è£…åŒ…ç˜¦èº«ä¹Ÿæ˜¯ä»è¿™ä¸¤éƒ¨åˆ†è¿›è¡Œã€‚</p>
<h2 id="èµ„æºç˜¦èº«"><a href="#èµ„æºç˜¦èº«" class="headerlink" title="èµ„æºç˜¦èº«"></a>èµ„æºç˜¦èº«</h2><p>èµ„æºç˜¦èº«ä¸»è¦æ˜¯å»æ‰æ— ç”¨èµ„æºå’Œå‹ç¼©èµ„æºï¼Œèµ„æºåŒ…æ‹¬å›¾ç‰‡ã€éŸ³è§†é¢‘æ–‡ä»¶ã€é…ç½®æ–‡ä»¶ä»¥åŠå¤šè¯­è¨€wordingã€‚æ— ç”¨èµ„æºæ˜¯æŒ‡èµ„æºåœ¨å·¥ç¨‹æ–‡ä»¶é‡Œï¼Œä½†æ²¡æœ‰è¢«ä»£ç å¼•ç”¨ã€‚æ£€æŸ¥æ–¹æ³•æ˜¯ï¼Œç”¨èµ„æºå…³é”®å­—ï¼ˆé€šå¸¸æ˜¯æ–‡ä»¶åï¼Œå›¾ç‰‡èµ„æºéœ€è¦å»æ‰@2x @3xï¼‰ï¼Œæœç´¢ä»£ç ï¼Œæœä¸åˆ°å°±æ˜¯æ²¡æœ‰è¢«å¼•ç”¨ã€‚å½“ç„¶ï¼Œæœ‰äº›èµ„æºåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æ˜¯æ‹¼æ¥è€Œæˆçš„ï¼ˆå¦‚loading_xxx.pngï¼‰ï¼Œéœ€è¦æ‰‹å·¥è¿‡æ»¤ã€‚</p>
<p>èµ„æºå‹ç¼©ä¸»è¦å¯¹pngè¿›è¡Œæ— æŸå‹ç¼©ï¼Œç”¨çš„æ˜¯ImageOptimå·¥å…·å’Œcompresså‘½ä»¤ï¼ˆéœ€è¦å®‰è£…XQuartz-2.7.5.dmæ’ä»¶ï¼‰ã€‚ä¸å»ºè®®å¯¹èµ„æºåšæœ‰æŸå‹ç¼©ï¼Œæœ‰æŸå‹ç¼©éœ€è¦è®¾è®¡ä¸€ä¸ªä¸ªæ£€æŸ¥ï¼Œé€šå¸¸å‹ç¼©åæ•ˆæœä¸å°½äººæ„ã€‚</p>
<h2 id="Xcodeâ€™s-Link-Map-File"><a href="#Xcodeâ€™s-Link-Map-File" class="headerlink" title="Xcodeâ€™s Link Map File"></a>Xcodeâ€™s Link Map File</h2><p>åœ¨è®²å¯æ‰§è¡Œæ–‡ä»¶ç˜¦èº«ä¹‹å‰å…ˆä»‹ç»Xcodeçš„LinkMapæ–‡ä»¶ã€‚LinkMapæ–‡ä»¶æ˜¯Xcodeäº§ç”Ÿå¯æ‰§è¡Œæ–‡ä»¶çš„åŒæ—¶ç”Ÿæˆçš„é“¾æ¥ä¿¡æ¯ï¼Œç”¨æ¥æè¿°å¯æ‰§è¡Œæ–‡ä»¶çš„æ„é€ æˆåˆ†ï¼ŒåŒ…æ‹¬ä»£ç æ®µï¼ˆ<strong>TEXTï¼‰å’Œæ•°æ®æ®µï¼ˆ</strong>DATAï¼‰çš„åˆ†å¸ƒæƒ…å†µã€‚åªè¦è®¾ç½®Project-&gt;Build Settings-&gt;Write Link Map Fileä¸ºYESï¼Œå¹¶è®¾ç½®Path to Link Map Fileï¼Œbuildå®Œåå°±å¯ä»¥åœ¨è®¾ç½®çš„è·¯å¾„çœ‹åˆ°LinkMapæ–‡ä»¶äº†ï¼š</p>
<p>æ¯ä¸ªLinkMapç”±3ä¸ªéƒ¨åˆ†ç»„æˆï¼Œä»¥å¾®ä¿¡ä¸ºä¾‹ï¼š</p>
<ol>
<li>Object files:</li>
</ol>
<p>[ 0] linker synthesized</p>
<p>[ 1] /xxxx/WCPayInfoItem.o</p>
<p>[ 2] /xxxx/GameCenterFriendRankCell.o</p>
<p>[ 3] /xxxx/WloginTlv_0x168.o</p>
<p>â€¦</p>
<p>ç¬¬ä¸€éƒ¨åˆ†åˆ—ä¸¾å¯æ‰§è¡Œæ–‡ä»¶é‡Œæ‰€æœ‰.objæ–‡ä»¶ï¼Œä»¥åŠæ¯ä¸ªæ–‡ä»¶çš„ç¼–å·ã€‚</p>
<ol>
<li>Sections:</li>
</ol>
<p>ç¬¬äºŒéƒ¨åˆ†æ˜¯å¯æ‰§è¡Œæ–‡ä»¶çš„æ®µè¡¨ï¼Œæè¿°å„ä¸ªæ®µåœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„åç§»ä½ç½®å’Œå¤§å°ã€‚ç¬¬ä¸€åˆ—æ˜¯æ®µçš„åç§»é‡ï¼Œç¬¬äºŒåˆ—æ˜¯æ®µå ç”¨å¤§å°ï¼ŒAddress(n)=Address(n-1)+Size(n-1)ï¼›ç¬¬ä¸‰åˆ—æ˜¯æ®µç±»å‹ï¼Œä»£ç æ®µå’Œæ•°æ®æ®µï¼›ç¬¬å››åˆ—æ˜¯æ®µåå­—ï¼Œå¦‚<strong>textæ˜¯å¯æ‰§è¡Œæœºå™¨ç ï¼Œ</strong>cstringæ˜¯å­—ç¬¦ä¸²å¸¸é‡ã€‚æœ‰å…³æ®µçš„æ¦‚å¿µå¯å‚è€ƒè‹¹æœå®˜æ–¹æ–‡æ¡£ã€ŠOS X ABI Mach-O File Format Referenceã€‹</p>
<ol>
<li>Symbols:</li>
</ol>
<h1 id="Address-Size-File-Name"><a href="#Address-Size-File-Name" class="headerlink" title="Address Size File Name"></a>Address Size File Name</h1><p>0x100005A50 0x00000074 [ 1] +[WCPayInfoItem initialize]</p>
<p>â€¦</p>
<p>0x10231C120 0x00000018 [ 1] literal string: I16@?0@â€WCPayInfoItemâ€8</p>
<p>â€¦</p>
<p>0x10252A41A 0x0000000E [ 1] literal string: WCPayInfoItem</p>
<p>â€¦</p>
<p>ç¬¬ä¸‰éƒ¨åˆ†è¯¦ç»†æè¿°æ¯ä¸ªobjæ–‡ä»¶åœ¨æ¯ä¸ªæ®µçš„åˆ†å¸ƒæƒ…å†µï¼ŒæŒ‰ç¬¬äºŒéƒ¨åˆ†Sectionsé¡ºåºå±•ç¤ºã€‚ä¾‹å¦‚åºå·1çš„WCPayInfoItem.oæ–‡ä»¶ï¼Œ+[WCPayInfoItem initialize]æ–¹æ³•åœ¨<strong>TEXT.</strong>textåœ°å€æ˜¯0x100005A50ï¼Œå ç”¨å¤§å°æ˜¯116å­—èŠ‚ã€‚æ ¹æ®åºå·ç´¯åŠ æ¯ä¸ªobjæ–‡ä»¶åœ¨æ¯ä¸ªæ®µçš„å ç”¨å¤§å°ï¼Œä»è€Œè®¡ç®—å‡ºæ¯ä¸ªobjæ–‡ä»¶åœ¨å¯æ‰§è¡Œæ–‡ä»¶çš„å ç”¨å¤§å°ï¼Œè¿›è€Œç®—å‡ºæ¯ä¸ªé™æ€åº“ã€æ¯ä¸ªåŠŸèƒ½æ¨¡å—ä»£ç å ç”¨å¤§å°ã€‚è¿™é‡Œè¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œç”±äº<strong>DATA.</strong>bbsæ˜¯ä»£è¡¨æœªåˆå§‹åŒ–çš„é™æ€å˜é‡ï¼ŒSizeè¡¨ç¤ºåº”ç”¨è¿è¡Œæ—¶å ç”¨çš„å †å¤§å°ï¼Œå¹¶ä¸å ç”¨å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰€ä»¥è®¡ç®—objå ç”¨å¤§å°æ—¶ï¼Œè¦æ’é™¤è¿™ä¸ªæ®µçš„Sizeã€‚</p>
<h2 id="å¯æ‰§è¡Œæ–‡ä»¶ç˜¦èº«"><a href="#å¯æ‰§è¡Œæ–‡ä»¶ç˜¦èº«" class="headerlink" title="å¯æ‰§è¡Œæ–‡ä»¶ç˜¦èº«"></a>å¯æ‰§è¡Œæ–‡ä»¶ç˜¦èº«</h2><p>å›åˆ°æˆ‘ä»¬çš„å¯æ‰§è¡Œæ–‡ä»¶ç˜¦èº«é—®é¢˜ï¼ŒLinkMapæ–‡ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¯»æ‰¾ä¼˜åŒ–ç‚¹ã€‚</p>
<h3 id="1-æŸ¥æ‰¾æ— ç”¨selector"><a href="#1-æŸ¥æ‰¾æ— ç”¨selector" class="headerlink" title="1. æŸ¥æ‰¾æ— ç”¨selector"></a>1. æŸ¥æ‰¾æ— ç”¨selector</h3><p>ä»¥å¾€C++åœ¨é“¾æ¥æ—¶ï¼Œæ²¡æœ‰è¢«ç”¨åˆ°çš„ç±»å’Œæ–¹æ³•æ˜¯ä¸ä¼šç¼–è¿›å¯æ‰§è¡Œæ–‡ä»¶é‡Œã€‚ä½†Objctive-Cä¸åŒï¼Œç”±äºå®ƒçš„åŠ¨æ€æ€§ï¼Œå®ƒå¯ä»¥é€šè¿‡ç±»åå’Œæ–¹æ³•åè·å–è¿™ä¸ªç±»å’Œæ–¹æ³•è¿›è¡Œè°ƒç”¨ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¼šæŠŠé¡¹ç›®é‡Œæ‰€æœ‰OCæºæ–‡ä»¶ç¼–è¿›å¯æ‰§è¡Œæ–‡ä»¶é‡Œï¼Œå“ªæ€•è¯¥ç±»å’Œæ–¹æ³•æ²¡æœ‰è¢«ä½¿ç”¨åˆ°ã€‚</p>
<p>ç»“åˆLinkMapæ–‡ä»¶çš„<strong>TEXT.</strong>textï¼Œé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼([+|-][.+\s(.+)])ï¼Œæˆ‘ä»¬å¯ä»¥æå–å½“å‰å¯æ‰§è¡Œæ–‡ä»¶é‡Œæ‰€æœ‰objcç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼ˆSelectorsAllï¼‰ã€‚å†ä½¿ç”¨otoolå‘½ä»¤otool -v -s <strong>DATA </strong>objc_selrefsé€†å‘<strong>DATA.</strong>objc_selrefsæ®µï¼Œæå–å¯æ‰§è¡Œæ–‡ä»¶é‡Œå¼•ç”¨åˆ°çš„æ–¹æ³•åï¼ˆUsedSelectorsAllï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å¤§è‡´åˆ†æå‡ºSelectorsAllé‡Œå“ªäº›æ–¹æ³•æ˜¯æ²¡æœ‰è¢«å¼•ç”¨çš„ï¼ˆSelectorsAll-UsedSelectorsAllï¼‰ã€‚æ³¨æ„ï¼Œç³»ç»ŸAPIçš„Protocolå¯èƒ½è¢«åˆ—å…¥æ— ç”¨æ–¹æ³•åå•é‡Œï¼Œå¦‚UITableViewDelegateçš„æ–¹æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹è¿™äº›Protocolé‡Œçš„æ–¹æ³•åŠ å…¥ç™½åå•è¿‡æ»¤å³å¯ã€‚</p>
<p>å¦å¤–ç¬¬ä¸‰æ–¹åº“çš„æ— ç”¨selectorä¹Ÿå¯ä»¥è¿™æ ·æ‰«å‡ºæ¥çš„ã€‚</p>
<h3 id="2-æŸ¥æ‰¾æ— ç”¨ocç±»"><a href="#2-æŸ¥æ‰¾æ— ç”¨ocç±»" class="headerlink" title="2. æŸ¥æ‰¾æ— ç”¨ocç±»"></a>2. æŸ¥æ‰¾æ— ç”¨ocç±»</h3><p>æŸ¥æ‰¾æ— ç”¨ocç±»æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ç±»ä¼¼äºæŸ¥æ‰¾æ— ç”¨èµ„æºï¼Œé€šè¿‡æœç´¢â€[ClassName alloc/newâ€ã€â€ClassName *â€ã€â€[ClassName class]â€ç­‰å…³é”®å­—åœ¨ä»£ç é‡Œæ˜¯å¦å‡ºç°ã€‚å¦ä¸€ç§æ˜¯é€šè¿‡otoolå‘½ä»¤é€†å‘<strong>DATA.</strong>objc_classlistæ®µå’Œ<strong>DATA.</strong>objc_classrefsæ®µæ¥è·å–å½“å‰æ‰€æœ‰ocç±»å’Œè¢«å¼•ç”¨çš„ocç±»ï¼Œä¸¤ä¸ªé›†åˆç›¸å‡å°±æ˜¯æ— ç”¨ocç±»ã€‚</p>
<h3 id="3-æ‰«æé‡å¤ä»£ç "><a href="#3-æ‰«æé‡å¤ä»£ç " class="headerlink" title="3. æ‰«æé‡å¤ä»£ç "></a>3. æ‰«æé‡å¤ä»£ç </h3><p>å¯ä»¥åˆ©ç”¨ç¬¬ä¸‰æ–¹å·¥å…·simianæ‰«æã€‚å—éæ”¯ä»˜copyä»£ç å°±æ˜¯è¿™æ ·è¢«å‘ç°çš„ã€‚ä½†é™¤æ­¤æˆæœä¹‹å¤–ï¼Œæ‰«æå‡ºæ¥çš„ç»“æœè¿‡å¤šï¼Œé‡æ„èµ·æ¥ä¹Ÿä¸æ–¹ä¾¿ï¼Œä¸å¦‚ç åŠŸèƒ½éœ€æ±‚æ•ˆæœå¥½ã€‚</p>
<h3 id="4-protobufç²¾ç®€æ”¹é€ "><a href="#4-protobufç²¾ç®€æ”¹é€ " class="headerlink" title="4. protobufç²¾ç®€æ”¹é€ "></a>4. protobufç²¾ç®€æ”¹é€ </h3><p>protobufæ˜¯Googleæ¨å‡ºçš„ä¸€ç§è½»é‡é«˜æ•ˆçš„ç»“æ„åŒ–æ•°æ®å­˜å‚¨æ ¼å¼ï¼Œåœ¨å¾®ä¿¡ç”¨äºç½‘ç»œåè®®å’Œæœ¬åœ°æ–‡ä»¶åºåˆ—åŒ–ã€‚ä½†googleé»˜è®¤å·¥å…·ç”Ÿæˆçš„ä»£ç æ¯”è¾ƒå†—ä½™ï¼Œåƒåºåˆ—åŒ–ã€ååºåˆ—åŒ–ã€è®¡ç®—åºåˆ—åŒ–å¤§å°ç­‰æ–¹æ³•éƒ½ç”Ÿæˆåœ¨å…·ä½“çš„pbç±»é‡Œï¼Œæ¯ä¸ªç±»çš„å®ç°å¤§åŒå°å¼‚ã€‚é€šè¿‡ä»£ç åˆ†æä»¥åŠç»“åˆprotobufåŸç†ï¼Œè¦æƒ³æŠŠè¿™äº›æ–¹æ³•æŠ½è±¡åˆ°åŸºç±»ï¼Œæ´¾ç”Ÿç±»æä¾›æ¯ä¸ªå­—æ®µç›¸å…³ä¿¡æ¯å°±å¤Ÿäº†ï¼š</p>
<ul>
<li><p>field number</p>
</li>
<li><p>field label, optional, required or repeated</p>
</li>
<li><p>wire type, double, float, int, etc</p>
</li>
<li><p>æ˜¯å¦packed</p>
</li>
<li><p>repeatedçš„æ•°æ®ç±»å‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">typedef struct &#123;</div><div class="line">    Byte _fieldNumber;</div><div class="line">    Byte _fieldLabel;</div><div class="line">    Byte _fieldType;</div><div class="line">    BOOL _isPacked;</div><div class="line">    int _enumInitValue;</div><div class="line">    union &#123;</div><div class="line">        __unsafe_unretained NSString* _messageClassName;</div><div class="line">        __unsafe_unretained Class _messageClass; // ClassNameå¯¹åº”çš„Class</div><div class="line">        IsEnumValidFunc _isEnumValidFunc; // æ£€æµ‹æšä¸¾å€¼æ˜¯å¦åˆæ³•å‡½æ•°æŒ‡é’ˆ</div><div class="line">    &#125;;</div><div class="line">&#125; PBFieldInfo;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>å¦å¤–é€šè¿‡æ— ç”¨selectoråˆ—è¡¨ï¼Œå‘ç°ä¸å°‘pbç±»å±æ€§çš„getteræˆ–setteræ²¡æœ‰è¢«ä½¿ç”¨ã€‚åŸå…ˆçš„pbç±»å±æ€§æ˜¯ç”¨@synthesizeä¿®é¥°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆgetterå’Œsetterã€‚å¦‚æœä¸æƒ³ç¼–è¯‘å™¨ç”Ÿæˆï¼Œåˆ™è¦ç”¨@dynamicã€‚ç”šè‡³æˆ‘ä»¬å¯ä»¥æŠŠpbç±»çš„æˆå‘˜å˜é‡å»æ‰ã€‚åšæ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>åŸºç±»å¢åŠ idç±»å‹æ•°ç»„ivarValuesï¼ˆå‚è€ƒäº†objc_classç»“æ„ä½“ivarsåšæ³•ï¼‰ï¼Œç”¨äºå­˜æ”¾å¯¹è±¡çš„å±æ€§å€¼ã€‚å¯¹è±¡å±æ€§å€¼ç»Ÿä¸€ç”¨ocå¯¹è±¡è¡¨ç¤ºï¼Œå¦‚æœç±»å‹æ˜¯åŸºç¡€ç±»å‹ï¼ˆprimitiveï¼Œå¦‚intã€floatç­‰ï¼‰ï¼Œåˆ™ç”¨NSValueå­˜</p>
</li>
<li><p>é‡è½½methodSignatureForSelector:æ–¹æ³•ï¼Œè¿”å›å±æ€§getterã€setterçš„æ–¹æ³•ç­¾å</p>
</li>
<li><p>é‡è½½forwardInvocation:æ–¹æ³•ï¼Œåˆ†æinvocation.selectorç±»å‹ã€‚å¦‚æœæ˜¯getterï¼Œä»ivarValuesè·å–å±æ€§å€¼å¹¶è®¾ç½®ä¸ºinvocationçš„returnValueï¼›å¦‚æœæ˜¯setterï¼Œä»invocationç¬¬äºŒä¸ªargumentè·å–å±æ€§å€¼ï¼Œå¹¶å­˜æ”¾åˆ°ivarValuesé‡Œ</p>
</li>
<li><p>é‡è½½setValue:forUndefinedKey:ã€valueForUndefinedKey:ï¼Œé˜²æ­¢é€šè¿‡KVOè®¿é—®å±æ€§Crash</p>
</li>
<li><p>åšä¸‹æ€§èƒ½ä¼˜åŒ–ï¼Œå¦‚pbç±»åœ¨initializeåšä¸€æ¬¡åˆå§‹åŒ–ï¼Œç¼“å­˜å±æ€§åçš„hashå€¼ï¼Œå±æ€§çš„getterã€setteræ–¹æ³•çš„objcTypeç­‰ï¼›å±æ€§å€¼ä¸ç”¨std::mapï¼ˆå±æ€§å-&gt;å±æ€§å€¼ï¼‰ï¼Œè€Œæ˜¯æ”¹ç”¨æ•°ç»„ï¼›MRCä»£æ›¿ARCï¼ˆæœ‰äº›æ—¶å€™ARCè‡ªåŠ¨æ·»åŠ çš„retain/releaseæŒºå½±å“æ€§èƒ½çš„ï¼‰ï¼›ç­‰ç­‰</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">class PBClassInfo &#123;</div><div class="line">public:</div><div class="line">    PBClassInfo(Class cls, PBFieldInfo* fieldInfo);</div><div class="line">    ~PBClassInfo();</div><div class="line">public:</div><div class="line">    unsigned int _numberOfProperty;</div><div class="line">    std::string* _propertyNames;</div><div class="line">    size_t* _propertyNameHashes;</div><div class="line">    std::string* _getterObjCTypes;</div><div class="line">    std::string* _setterObjCTypes;</div><div class="line">    PBFieldInfo* _fieldInfos;</div><div class="line">&#125;;</div><div class="line">@interface WXPBGeneratedMessage () &#123;</div><div class="line">    uint32_t _has_bits_[3]; // æœ€å¤š96ä¸ªå±æ€§ï¼Œè¡¨ç¤ºå±æ€§æ˜¯å¦æœ‰èµ‹å€¼</div><div class="line">    int32_t _serializedSize;</div><div class="line">    PBClassInfo* _classInfo;</div><div class="line">    id* _ivarValues;</div><div class="line">&#125;</div><div class="line">- (NSMethodSignature*) methodSignatureForSelector:(SEL) aSelector;</div><div class="line">- (void) forwardInvocation:(NSInvocation*) anInvocation;</div><div class="line">- (void) setValue:(id) value forUndefinedKey:(NSString*) key;</div><div class="line">- valueForUndefinedKey:(NSString*) key;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>æŠŠå†—ä½™ä»£ç å»æ‰åï¼Œæ•´ä¸ªç±»æ¸…çˆ½å¤šäº†ã€‚åƒGameResourceReqåªæœ‰3ä¸ªå±æ€§çš„protoç»“æ„ä½“ï¼Œç±»æ–¹æ³•ä»£ç è¡Œæ•°ç”±ä»¥å‰çš„127è¡Œå˜æˆç°åœ¨çš„8è¡Œã€‚protobufç²¾ç®€æ”¹é€ ä¸­ï¼Œç²¾ç®€ç±»æ–¹æ³•å‡å°‘äº†å¯æ‰§è¡Œæ–‡ä»¶8.8Mï¼Œå»æ‰ç±»æˆå‘˜å˜é‡å’Œç±»å±æ€§æ”¹ç”¨@dynamicå‡å°‘äº†2.5Mã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">message GameResourceReq &#123;</div><div class="line">    required BaseRequest BaseRequest = 1;</div><div class="line">    required int32 PropsCount = 2;</div><div class="line">    repeated uint32 PropsIdList = 3[packed=true];</div><div class="line">&#125;</div><div class="line">// è€å®ç°</div><div class="line">@implementation GameResourceReq</div><div class="line">@synthesize hasBaseRequest;</div><div class="line">@synthesize baseRequest;</div><div class="line">@synthesize hasPropsCount;</div><div class="line">@synthesize propsCount;</div><div class="line">@synthesize mutablePropsIdListList;</div><div class="line">@dynamic propsIdList;</div><div class="line">- (id) init &#123;...&#125;</div><div class="line">- (void) SetBaseRequest:(BaseRequest*) value &#123;...&#125;</div><div class="line">- (void) SetPropsCount:(int32_t) value &#123;...&#125;</div><div class="line">- (NSArray*) propsIdListList &#123;...&#125;</div><div class="line">- (NSMutableArray*)propsIdList &#123;...&#125;</div><div class="line">- (void)setPropsIdList:(NSMutableArray*) values &#123;...&#125;</div><div class="line">- (BOOL) isInitialized &#123;...&#125;</div><div class="line">- (void) writeToCodedOutputStream:(PBCodedOutputStream*) output &#123;...&#125;</div><div class="line">- (int32_t) serializedSize &#123;...&#125;</div><div class="line">+ (GameResourceReq*) parseFromData:(NSData*) data &#123;...&#125;</div><div class="line">- (GameResourceReq*) mergeFromCodedInputStream:(PBCodedInputStream*) input &#123;...&#125;</div><div class="line">- (void) addPropsIdList:(uint32_t) value &#123;...&#125;</div><div class="line">- (void) addPropsIdListFromArray:(NSArray*) values &#123;...&#125;</div><div class="line">@end</div><div class="line">// æ–°å®ç°</div><div class="line">@implementation GameResourceReq</div><div class="line">PB_PROPERTY_TYPE baseRequest;</div><div class="line">PB_PROPERTY_TYPE opType;</div><div class="line">PB_PROPERTY_TYPE brandUserName;</div><div class="line">+ (void) initialize &#123;</div><div class="line">  static PBFieldInfo _fieldInfoArray[] = &#123;</div><div class="line">    &#123;1, FieldLabelRequired, FieldTypeMessage, NO, 0, ._messageClassName = STRING_FROM(BaseRequest)&#125;,</div><div class="line">    &#123;2, FieldLabelRequired, FieldTypeInt32, NO, 0, 0&#125;,</div><div class="line">    &#123;3, FieldLabelRepeated, FieldTypeUint32, NO, 0, 0&#125;,</div><div class="line">  &#125;;</div><div class="line">  initializePBClassInfo(self, _fieldInfoArray);</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<ol>
<li>ç¼–è¯‘é€‰é¡¹ä¼˜åŒ–</li>
</ol>
<ul>
<li><p>Strip Link Productè®¾æˆYESï¼ŒWeChatWatchå¯æ‰§è¡Œæ–‡ä»¶å‡å°‘0.3M</p>
</li>
<li><p>Make Strings Read-Onlyè®¾ä¸ºYESï¼Œä¹Ÿè®¸æ˜¯å› ä¸ºå¾®ä¿¡å·¥ç¨‹ä»ä½ç‰ˆæœ¬Xcodeå‡çº§è¿‡æ¥ï¼Œè¿™ä¸ªç¼–è¯‘é€‰é¡¹ä¹‹å‰ä¸€ç›´ä¸ºNOï¼Œè®¾ä¸ºYESåå¯æ‰§è¡Œæ–‡ä»¶å‡å°‘äº†3M</p>
</li>
<li><p>å»æ‰å¼‚å¸¸æ”¯æŒï¼ŒEnable C++ Exceptionså’ŒEnable Objective-C Exceptionsè®¾ä¸ºNOï¼Œå¹¶ä¸”Other C Flagsæ·»åŠ -fno-exceptionsï¼Œå¯æ‰§è¡Œæ–‡ä»¶å‡å°‘äº†27Mï¼Œå…¶ä¸­<strong>gcc_except_tabæ®µå‡å°‘äº†17.3Mï¼Œ</strong>textå‡å°‘äº†9.7Mï¼Œæ•ˆæœç‰¹åˆ«æ˜æ˜¾ã€‚å¯ä»¥å¯¹æŸäº›æ–‡ä»¶å•ç‹¬æ”¯æŒå¼‚å¸¸ï¼Œç¼–è¯‘é€‰é¡¹åŠ ä¸Š-fexceptionså³å¯ã€‚ä½†æœ‰ä¸ªé—®é¢˜ï¼Œå‡å¦‚ABCä¸‰ä¸ªæ–‡ä»¶ï¼ŒACæ–‡ä»¶æ”¯æŒäº†å¼‚å¸¸ï¼ŒBä¸æ”¯æŒï¼Œå¦‚æœCæŠ›äº†å¼‚å¸¸ï¼Œåœ¨æ¨¡æ‹Ÿå™¨ä¸‹Aè¿˜æ˜¯èƒ½æ•è·å¼‚å¸¸ä¸è‡³äºCrashï¼Œä½†çœŸæœºä¸‹æ•è·ä¸äº†ï¼ˆæœ‰çŸ¥é“åŸå› å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€ï¼šï¼‰ã€‚å»æ‰å¼‚å¸¸åï¼ŒAppstoreåç»­å‡ ä¸ªç‰ˆæœ¬Crashç‡æ²¡æœ‰æ˜æ˜¾ä¸Šå‡ã€‚ä¸ªäººè®¤ä¸ºå…³é”®è·¯å¾„æ”¯æŒå¼‚å¸¸å¤„ç†å°±å¥½ï¼Œåƒå¯åŠ¨æ—¶NSCoderè¯»å–settingé…ç½®æ–‡ä»¶å¾—è¦æ”¯æŒæ•è·å¼‚å¸¸ï¼Œç­‰ç­‰</p>
</li>
</ul>
<ol>
<li>å…¶ä»–å¯æ¢ç´¢é€”å¾„</li>
</ol>
<ul>
<li><p>iOS8 Embed-Frameworkï¼šæå–WeChatWatchã€ShareExtentionå’Œå¾®ä¿¡ä¸»å·¥ç¨‹çš„å…¬å…±ä»£ç ï¼Œå¯æ‰§è¡Œæ–‡ä»¶å¯ä»¥å‡å°‘5M+ï¼Œä¸è¿‡è¿™ç‰¹æ€§éœ€è¦æœ€ä½ç‰ˆæœ¬iOS8æ‰èƒ½ç”¨ï¼ŒiOS7è®¾å¤‡å¯åŠ¨ä¼šcrash</p>
</li>
<li><p>iOS9 App Thinningï¼šä¸¥æ ¼æ¥è¯´App Thinningä¸ä¼šè®©å®‰è£…åŒ…å˜å°ï¼Œä½†ç”¨æˆ·å®‰è£…åº”ç”¨æ—¶ï¼Œè‹¹æœä¼šæ ¹æ®ç”¨æˆ·çš„æœºå‹è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„èµ„æºå’Œå¯¹åº”CPUæ¶æ„çš„äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·æœ¬åœ°å¯æ‰§è¡Œæ–‡ä»¶ä¸ä¼šåŒæ—¶å­˜åœ¨armv7å’Œarm64ï¼‰ï¼Œå®‰è£…åç©ºé—´å ç”¨æ›´å°</p>
</li>
</ul>
<ol>
<li>å»ºç«‹ç›‘æ§</li>
</ol>
<p>é€šè¿‡å¯¹LinkMapæ–‡ä»¶çš„åˆ†æï¼Œå¯ä»¥å¾—çŸ¥æ¯ä¸ªæ¨¡å—å¯æ‰§è¡Œæ–‡ä»¶å ç”¨å¤§å°ã€‚å†å¯¹æ¯”ä¸¤ä¸ªç‰ˆæœ¬ï¼Œå°±çŸ¥é“ä¸šåŠ¡æ¨¡å—çš„å¢é‡å¤§å°ã€‚å‚è€ƒå¦‚ä¸‹ï¼š</p>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[çƒ­ä¿®å¤æŠ€æœ¯åœ¨ç§»åŠ¨ç«¯çš„åº”ç”¨]]></title>
      <url>/2016/01/12/2016/%E7%83%AD%E4%BF%AE%E5%A4%8D%E6%8A%80%E6%9C%AF%E5%9C%A8%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%9A%84%E5%BA%94%E7%94%A8/</url>
      <content type="html"><![CDATA[<h3 id="çƒ­ä¿®å¤æŠ€æœ¯æ¦‚è¿°"><a href="#çƒ­ä¿®å¤æŠ€æœ¯æ¦‚è¿°" class="headerlink" title="çƒ­ä¿®å¤æŠ€æœ¯æ¦‚è¿°"></a>çƒ­ä¿®å¤æŠ€æœ¯æ¦‚è¿°</h3><p>ç§»åŠ¨åº”ç”¨çš„éƒ¨ç½²æ–¹å¼ï¼Œå³å‘å¸ƒ-&gt;ä¸‹è½½-&gt;å®‰è£…-&gt;è¿è¡Œï¼Œå†³å®šäº†ä»–ä¸å…·å¤‡Webçš„é«˜çµæ´»æ€§ï¼Œå°¤å…¶æ–°ç‰ˆæœ¬ä¸Šçº¿åå‘ç°æœ‰ä¸ªä¸¥é‡çš„bugï¼Œå¯èƒ½ä¼šå¯¼è‡´crashç‡æ¿€å¢ï¼Œå¯èƒ½ä¼šä½¿ç½‘ç»œè¯·æ±‚æ— æ³•å‘å‡ºï¼Œè¿™æ—¶èƒ½åšçš„åªæ˜¯èµ¶ç´§ä¿®å¤bugç„¶åæäº¤ç­‰å¾…æ¼«é•¿çš„AppStoreå®¡æ ¸ï¼Œå†ç›¼æœ›ç”¨æˆ·å¿«ç‚¹å‡çº§ï¼Œä»˜å‡ºå·¨å¤§çš„äººåŠ›å’Œæ—¶é—´æˆæœ¬ï¼Œæ‰èƒ½å®Œæˆæ­¤æ¬¡bugçš„ä¿®å¤ã€‚<br><a id="more"></a><br>çƒ­ä¿®å¤æŠ€æœ¯(HotfixPatch)ï¼Œæ˜¯ä¸€ç§åŸºäºåŸç”Ÿåº”ç”¨å¼€å‘çš„çµæ´»æ€§è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥åœ¨ä¸æ”¹å˜å¼€å‘äººå‘˜æŠ€èƒ½è¦æ±‚å’Œå·²æœ‰çš„å¼€å‘æ–¹å¼çš„å‰æä¸‹ï¼Œç»™äºåº”ç”¨åœ¨å‘å¸ƒåæ”¹å˜ç¨‹åºè¡Œä¸ºçš„èƒ½åŠ›ã€‚<br>çƒ­è¡¥ä¸çš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä¸ä¼šä½¿è®¾å¤‡å½“å‰æ­£åœ¨è¿è¡Œçš„ä¸šåŠ¡ä¸­æ–­ï¼Œå³åœ¨ä¸é‡å¯è®¾å¤‡çš„æƒ…å†µä¸‹å¯ä»¥å¯¹è®¾å¤‡å½“å‰è½¯ä»¶ç‰ˆæœ¬çš„ç¼ºé™·è¿›è¡Œä¿®å¤ã€‚ä¸€èˆ¬ç”¨äºæŸä¸ªå‡½æ•°å¯¼è‡´çš„bugï¼Œå¦‚æœæ˜¯æŸä¸ªç±»å¯¼è‡´çš„bugï¼Œæˆ–è€…å¢å‡ä¸šåŠ¡æ¨¡å—ï¼Œä¸å»ºè®®ä½¿ç”¨çƒ­ä¿®å¤ï¼Œè€Œä½¿ç”¨Reactive Nativeã€‚</p>
<h4 id="å¸‚åœºä¸­çš„çƒ­ä¿®å¤æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”"><a href="#å¸‚åœºä¸­çš„çƒ­ä¿®å¤æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”" class="headerlink" title="å¸‚åœºä¸­çš„çƒ­ä¿®å¤æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”"></a>å¸‚åœºä¸­çš„çƒ­ä¿®å¤æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”</h4><ul>
<li>WaxPatch(é˜¿é‡Œåœ¨ç»´æŠ¤)</li>
<li>JSPatch(ä¸ªäººé¡¹ç›®)</li>
</ul>
<p>ä¸¤è€…ç›¸æ¯”ï¼ŒJSPatchçš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>1.JSè¯­è¨€: JSæ¯”Luaåœ¨åº”ç”¨å¼€å‘é¢†åŸŸæœ‰æ›´å¹¿æ³›çš„åº”ç”¨ï¼Œç›®å‰å‰ç«¯å¼€å‘å’Œç»ˆç«¯å¼€å‘æœ‰èåˆçš„è¶‹åŠ¿ï¼Œä½œä¸ºæ‰©å±•çš„è„šæœ¬è¯­è¨€ï¼ŒJSæ˜¯ä¸äºŒä¹‹é€‰ã€‚</li>
<li>2.ç¬¦åˆAppleè§„åˆ™: JSPatchæ›´ç¬¦åˆAppleçš„è§„åˆ™ã€‚iOS Developer Program License Agreementé‡Œ3.3.2æåˆ°ä¸å¯åŠ¨æ€ä¸‹å‘å¯æ‰§è¡Œä»£ç ï¼Œä½†é€šè¿‡è‹¹æœJavaScriptCore.frameworkæˆ–WebKitæ‰§è¡Œçš„ä»£ç é™¤å¤–ï¼ŒJSæ­£æ˜¯é€šè¿‡JavaScriptCore.frameworkæ‰§è¡Œçš„ã€‚</li>
<li>3.å°å·§: ä½¿ç”¨ç³»ç»Ÿå†…ç½®çš„JavaScriptCore.frameworkï¼Œæ— éœ€å†…åµŒè„šæœ¬å¼•æ“ï¼Œä½“ç§¯å°å·§ã€‚</li>
<li>4.æ”¯æŒblock: waxåœ¨å‡ å¹´å‰å°±åœæ­¢äº†å¼€å‘å’Œç»´æŠ¤ï¼Œä¸æ”¯æŒObjective-Cé‡Œblockè·ŸLuaç¨‹åºçš„äº’ä¼ ï¼Œè™½ç„¶ä¸€äº›ç¬¬ä¸‰æ–¹å·²ç»å®ç°blockï¼Œä½†ä½¿ç”¨æ—¶å‚æ•°ä¸Šä¹Ÿæœ‰æ¯”è¾ƒå¤šçš„é™åˆ¶ã€‚</li>
</ul>
<p>JSPatchçš„åŠ£åŠ¿ï¼š</p>
<ul>
<li>ç›¸å¯¹äºWaxPatchï¼ŒJSPatchåŠ£åŠ¿åœ¨äºä¸æ”¯æŒiOS6ï¼Œå› ä¸ºéœ€è¦å¼•å…¥JavaScriptCore.frameworkã€‚å¦å¤–ç›®å‰å†…å­˜çš„ä½¿ç”¨ä¸Šä¼šé«˜äºwaxï¼ŒæŒç»­æ”¹è¿›ä¸­ã€‚</li>
</ul>
<h4 id="é—®é¢˜ä¸é£é™©"><a href="#é—®é¢˜ä¸é£é™©" class="headerlink" title="é—®é¢˜ä¸é£é™©"></a>é—®é¢˜ä¸é£é™©</h4><p>JSPatchè®©è„šæœ¬è¯­è¨€è·å¾—è°ƒç”¨æ‰€æœ‰åŸç”ŸOCæ–¹æ³•çš„èƒ½åŠ›ï¼Œä¸åƒwebå‰ç«¯æŠŠèƒ½åŠ›å±€é™åœ¨æµè§ˆå™¨ï¼Œä½¿ç”¨ä¸Šä¼šæœ‰ä¸€äº›å®‰å…¨é£é™©ï¼š<br>1.è‹¥åœ¨ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­ä¸‹å‘æ˜æ–‡JSï¼Œå¯èƒ½ä¼šè¢«ä¸­é—´äººç¯¡æ”¹JSè„šæœ¬ï¼Œæ‰§è¡Œä»»æ„æ–¹æ³•ï¼Œç›—å–APPé‡Œçš„ç›¸å…³ä¿¡æ¯ã€‚å¯ä»¥å¯¹ä¼ è¾“è¿‡ç¨‹è¿›è¡ŒåŠ å¯†ï¼Œæˆ–ç”¨ç›´æ¥ä½¿ç”¨httpsè§£å†³ã€‚<br>2.è‹¥ä¸‹è½½å®Œåçš„JSä¿å­˜åœ¨æœ¬åœ°æ²¡æœ‰åŠ å¯†ï¼Œåœ¨æœªè¶Šç‹±çš„æœºå™¨ä¸Šç”¨æˆ·ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ›¿æ¢æˆ–ç¯¡æ”¹è„šæœ¬ã€‚è¿™ç‚¹å±å®³æ²¡æœ‰ç¬¬ä¸€ç‚¹å¤§ï¼Œå› ä¸ºæ“ä½œè€…æ˜¯æ‰‹æœºæ‹¥æœ‰è€…ï¼Œä¸å­˜åœ¨APPå†…ç›¸å…³ä¿¡æ¯è¢«ç›—ç”¨çš„é£é™©ã€‚è‹¥è¦é¿å…ç”¨æˆ·ä¿®æ”¹ä»£ç å½±å“APPè¿è¡Œï¼Œå¯ä»¥é€‰æ‹©ç®€å•çš„åŠ å¯†å­˜å‚¨ã€‚<br>3.ç”±äºä¸»è¦çš„åº”ç”¨æ–¹å¼æ˜¯å¯¹å‡½æ•°çš„æ›¿æ¢ï¼Œæ‰€ä»¥å¦‚æœæŸä¸ªå‡½æ•°åŒ…å«å‡ åƒè¡Œçš„ä»£ç ï¼Œä¿®å¤çš„æ—¶å€™å·¥ä½œé‡ä¼šç›¸å¯¹è¾ƒå¤§</p>
<h3 id="JSPatch"><a href="#JSPatch" class="headerlink" title="JSPatch"></a>JSPatch</h3><h4 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h4><ul>
<li>ä½œè€…bang(è…¾è®¯)<a href="http://blog.cnbang.net" target="_blank" rel="external">ä¸ªäººåšå®¢</a>ï¼Œ<a href="https://github.com/bang590/JSPatch" target="_blank" rel="external">github</a></li>
<li>é¡¹ç›®åˆ›å»ºäº2015-5</li>
<li><a href="http://jspatch.com" target="_blank" rel="external">JSPatchæ¥å…¥å¹³å°</a></li>
<li>æ·˜å®ï¼Œç¾å›¢ç­‰éƒ½æœ‰ä½¿ç”¨ï¼ŒSDKåå°æ¥å…¥ç»Ÿè®¡æ•°æ®è¶…è¿‡1200ä¸ªåº”ç”¨</li>
<li>JSPatchäº¤æµç¾¤(207283178)</li>
</ul>
<h4 id="éœ€è¦çš„åŸºç¡€çŸ¥è¯†"><a href="#éœ€è¦çš„åŸºç¡€çŸ¥è¯†" class="headerlink" title="éœ€è¦çš„åŸºç¡€çŸ¥è¯†"></a>éœ€è¦çš„åŸºç¡€çŸ¥è¯†</h4><p>-<code>JavaScriptCoreçš„ä½¿ç”¨</code><br>-<code>runtime</code></p>
<h4 id="JSPatchåŸç†"><a href="#JSPatchåŸç†" class="headerlink" title="JSPatchåŸç†"></a>JSPatchåŸç†</h4><ul>
<li>è¿è¡Œæ—¶ä¿®å¤ä¸ç”¨ç­‰å¾…Appé‡æ–°å¯åŠ¨ï¼ŒiOS åˆ©ç”¨è¿è¡Œæ—¶ç‰¹æ€§ä¿®æ”¹å‡½æ•°çš„IMPï¼Œä»è€Œè¾¾åˆ°ä¿®å¤ç›®çš„ã€‚</li>
<li>æ‰€è°“çš„è„šæœ¬æ‰§è¡Œå…¶å®åªæ˜¯å¢åŠ äº†å†…å­˜ä¸­çš„ç±»ä»¥åŠæ–°å¢çš„IMPï¼Œä»¥åŠå¯¹OCä¸­çš„IMPçš„ç»„åˆã€‚</li>
<li>jspatchè„šæœ¬åªæ˜¯ä¸€å¥—è§„åˆ™ï¼Œjspatchå†…éƒ¨å¯¹å…¶è¿›è¡Œäº†å­—ç¬¦ä¸²æˆªå–çš„è½¬æ¢ï¼Œä¸ºç±»åï¼Œæ–¹æ³•åï¼Œä»¥åŠå‚æ•°ï¼Œç„¶ååˆ©ç”¨è¿è¡Œæ—¶çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚</li>
<li>evaluateScriptæ–¹æ³•åªæ˜¯è®©è„šæœ¬å»è°ƒç”¨jsæ–¹æ³•åŸŸä¸­çš„æ–¹æ³•ï¼Œç„¶åiOSä¼šå»è°ƒç”¨å¯¹åº”IMPï¼Œæ‰€ä»¥JSPatchæ–‡ä»¶çš„ä½œç”¨æ˜¯å¢åŠ jsæ–¹æ³•åŸŸä¸­çš„æ–¹æ³•ã€‚</li>
<li>èƒ½åšåˆ°é€šè¿‡JSè°ƒç”¨å’Œæ”¹å†™OCæ–¹æ³•æœ€æ ¹æœ¬çš„åŸå› æ˜¯ Objective-C æ˜¯åŠ¨æ€è¯­è¨€ï¼ŒOCä¸Šæ‰€æœ‰æ–¹æ³•çš„è°ƒç”¨/ç±»çš„ç”Ÿæˆéƒ½é€šè¿‡ Objective-C Runtime åœ¨è¿è¡Œæ—¶è¿›è¡Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»å/æ–¹æ³•ååå°„å¾—åˆ°ç›¸åº”çš„ç±»å’Œæ–¹æ³•ï¼Œå…·ä½“æ¥è¯´èƒ½åšçš„æœ‰ï¼š<ul>
<li>é€šè¿‡ç±»åå’Œæ–¹æ³•åå¾—åˆ°å…·ä½“çš„ç±»ä»¥åŠæ–¹æ³•</li>
<li>æ›¿æ¢æŸä¸ªç±»çš„æ–¹æ³•çš„å®ç°</li>
<li>æ³¨å†Œä¸€ä¸ªæ–°çš„ç±»å¹¶ä¸”ä¸ºè¯¥ç±»æ·»åŠ æ–¹æ³•å®ç°</li>
</ul>
</li>
</ul>
<h4 id="JSPatchå…·ä½“å®ç°"><a href="#JSPatchå…·ä½“å®ç°" class="headerlink" title="JSPatchå…·ä½“å®ç°"></a>JSPatchå…·ä½“å®ç°</h4><blockquote>
<ul>
<li>æœ€å¤–å±‚éœ€è¦çš„æ˜¯jsçš„è°ƒç”¨èƒ½åŠ›ï¼Œæ‰€ä»¥éœ€è¦å®šä¹‰jså‡½æ•°ï¼Œæä¾›è„šæœ¬è°ƒç”¨çš„æ¥å£</li>
<li>åˆå› ä¸ºæˆ‘ä»¬éœ€è¦ç”¨åˆ°è¿è¡Œæ—¶çš„å‡½æ•°ï¼Œæ‰€ä»¥éœ€è¦åˆ©ç”¨jsæ¥è°ƒç”¨OCä¸­çš„æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”Ÿæˆä¸€ç³»åˆ—çš„IMP</li>
</ul>
</blockquote>
<ul>
<li>require</li>
<li>JSæ¥å£(.alloc().init())/(NSInvocation)<a href="http://mobile.9sssd.com/ios/art/915" target="_blank" rel="external">invocationå¯¹æ¶ˆæ¯çš„ç›´æ¥è°ƒç”¨</a></li>
<li>æ¶ˆæ¯ä¼ é€’(JSContext)</li>
<li><code>å¯¹è±¡æŒæœ‰/è½¬æ¢</code></li>
<li>ç±»å‹è½¬æ¢</li>
<li><code>æ–¹æ³•æ›¿æ¢</code></li>
<li><code>æ–°å¢æ–¹æ³•</code></li>
<li>property</li>
</ul>
<p><code>å‚è€ƒ</code>:<a href="http://blog.cnbang.net/tech/2808/" target="_blank" rel="external">bang-JSPatchåŸç†è¯¦è§£</a></p>
<h4 id="JSPatchä½¿ç”¨æµç¨‹"><a href="#JSPatchä½¿ç”¨æµç¨‹" class="headerlink" title="JSPatchä½¿ç”¨æµç¨‹"></a>JSPatchä½¿ç”¨æµç¨‹</h4><ul>
<li>å¼€å‘çƒ­ä¿®å¤è„šæœ¬</li>
<li>å‹ç¼©ä¸ºzip(èŠ‚çœç©ºé—´)</li>
<li>ä¸Šä¼ è„šæœ¬åˆ°æœåŠ¡å™¨</li>
<li>appæ¯æ¬¡å¯åŠ¨åˆ¤æ–­æœ¬åœ°è„šæœ¬æ˜¯å¦è¶…è¿‡ä¸€å¤©ï¼Œå¦‚æœè¶…è¿‡ä¸€å¤©å‘æœåŠ¡å™¨è¯·æ±‚æ–°çš„ï¼Œå¦åˆ™æ£€æŸ¥è¯¥è„šæœ¬æ˜¯å¦åˆæ³•å¦‚æœä¸åˆæ³•å°±åˆ é™¤</li>
<li>è·å–åˆ°è„šæœ¬æ–‡ä»¶åï¼Œè°ƒç”¨JSPatchå¼•æ“ï¼Œæ‰§è¡Œè„šæœ¬æ–‡ä»¶è¿›è¡Œä¿®å¤</li>
</ul>
<blockquote>
<p>è¡¥å……:ç»ˆç«¯è·å–è„šæœ¬æ–‡ä»¶æ˜¯éœ€è¦ä¸€ä¸ªç­–ç•¥çš„ï¼Œæœ€ç®€å•çš„å°±æ˜¯ï¼Œç»ˆç«¯æ ¹æ®ç‰ˆæœ¬å·ï¼Œè·å–ä¸è¯¥ç‰ˆæœ¬å·æœ‰å…³çš„è„šæœ¬æ–‡ä»¶ï¼š<br>å¦‚ï¼šæœ¬æ¬¡ç»ˆç«¯å‘å¸ƒçš„ç‰ˆæœ¬æ˜¯ï¼š1.0.3ï¼Œé‚£åœ¨ä¸Šä¼ è„šæœ¬æ–‡ä»¶æ—¶ï¼Œå°±å¯ä»¥å°†è„šæœ¬æ–‡ä»¶çš„åç§°å®šä¹‰ä¸ºï¼špatch1_0_3.js<br>è¿™æ ·ç»ˆç«¯å°±å¯ä»¥æ ¹æ®ç‰ˆæœ¬å·ï¼ŒåŠ¨æ€ç»„ç»‡è„šæœ¬çš„ä¸‹è½½åœ°å€ï¼Œè€Œä¸”ä¸€ä¸ªç‰ˆæœ¬å¯¹åº”ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œç®€å•æ˜äº†ï½ï½</p>
</blockquote>
<p><img src="/12/2016/çƒ­ä¿®å¤æŠ€æœ¯åœ¨ç§»åŠ¨ç«¯çš„åº”ç”¨/./20151127111300698.jpeg" alt="Alt text"></p>
<p><img src="/12/2016/çƒ­ä¿®å¤æŠ€æœ¯åœ¨ç§»åŠ¨ç«¯çš„åº”ç”¨/../images/Snip20160714_1.png" alt="Alt text"></p>
<h4 id="JSPatchçš„å¼•å…¥"><a href="#JSPatchçš„å¼•å…¥" class="headerlink" title="JSPatchçš„å¼•å…¥"></a>JSPatchçš„å¼•å…¥</h4><ul>
<li>å¼•å…¥SDK<ul>
<li>åŸç‰ˆSDK</li>
<li>é…·ç‹—SDK</li>
<li>è‡ªå®šä¹‰ï¼šæºæ–‡ä»¶+ç‰ˆæœ¬ç®¡ç†è§„åˆ™</li>
</ul>
</li>
<li>é¡¹ç›®å¯åŠ¨å‡½æ•°ä¸­æ·»åŠ JSPatchå¼•æ“å¯åŠ¨å‘½ä»¤</li>
<li>è„šæœ¬åˆ†å‘å¹³å°æ¥å…¥<ul>
<li>å®˜æ–¹å¹³å°(<a href="http://jspatch.com/Docs/price" target="_blank" rel="external">http://jspatch.com/Docs/price</a>)</li>
<li>é…·ç‹—åå°ï¼šç§˜é’¥ç”Ÿæˆï¼Œurlä¼ å…¥</li>
</ul>
</li>
</ul>
<h4 id="JSPatchä¸­çš„jsè¯­æ³•"><a href="#JSPatchä¸­çš„jsè¯­æ³•" class="headerlink" title="JSPatchä¸­çš„jsè¯­æ³•"></a>JSPatchä¸­çš„jsè¯­æ³•</h4><p><a href="https://github.com/bang590/JSPatch/wiki/JSPatch-%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95#%E5%B8%B8%E9%87%8F%E6%9E%9A%E4%B8%BE" target="_blank" rel="external">1.https://github.com/bang590/JSPatch/wiki/JSPatch-åŸºç¡€ç”¨æ³•#å¸¸é‡æšä¸¾</a></p>
<p><a href="http://bang590.github.io/JSPatchConvertor/" target="_blank" rel="external">2.è¯­æ³•è½¬è¯‘å·¥å…·</a></p>
<p>3.ä¸€äº›è¸©è¿‡çš„å‘<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">tmpLitterImg.length  ä¸èƒ½å†™æˆ   tmpLitterImg.length()</div><div class="line">infoModel.kugouId()  ä¸èƒ½å†™æˆ  infoModel.kugouId</div><div class="line">self.headerView().sd__setImageWithURL//å•ä¸‹åˆ’çº¿è¦ç”¨åŒä¸‹åˆ’çº¿</div><div class="line">self.locationIconView().right()//left/rightåè¦åŠ ()</div><div class="line">UIScreen.mainScreen().bounds().width//CGrectè¿™ç§ç»“æ„å–å€¼ä¸ç”¨åŠ ()</div><div class="line">//å®è¦ç›´æ¥ç”¨å…·ä½“çš„å€¼</div><div class="line">//æšä¸¾è¦ç”¨å…·ä½“çš„æ•°å­—</div><div class="line">//intç±»å‹è½¬stringç±»å‹è¦ç”¨ä¸‹é¢çš„æ–¹æ³•</div><div class="line">self.viewerNumLbl().setText(&apos;&apos; + info.viewerNum());</div></pre></td></tr></table></figure></p>
<h4 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h4><ul>
<li>swiftå› ä¸ºæ²¡æœ‰OCçš„åŠ¨æ€æ€§ï¼Œæ‰€ä»¥æš‚æ—¶æ²¡æœ‰æˆç†Ÿçš„åªæ˜¯é’ˆå¯¹swiftçš„çƒ­ä¿®å¤æŠ€æœ¯æ–¹æ¡ˆ</li>
<li>å½“å‘å¸ƒäº†æ–°ç‰ˆï¼ŒåŸæ¥ä¸‹å‘çš„è„šæœ¬æ€ä¹ˆåŠï¼Ÿ<ul>
<li>æ ¹æ®ç‰ˆæœ¬å·è¿›è¡Œjsæ–‡ä»¶çš„è¯»å–ï¼Œæ–°ç‰ˆæœ¬æƒ…å†µä¸‹æ—§ç‰ˆæœ¬æ–‡ä»¶ä¸ä¼šå†è¢«æ‰§è¡Œ</li>
</ul>
</li>
<li>å…³äºå®æ—¶æ¨é€çš„å®ç°ï¼Ÿ<ul>
<li>ç°åœ¨çš„æŠ€æœ¯æ–¹æ¡ˆæ˜¯ä½¿ç”¨é•¿è¿æ¥è¿›è¡Œæ¨é€ï¼Œå•å°æœåŠ¡å™¨æš‚æ—¶èƒ½å¤Ÿèƒ½å¤Ÿæ”¯æ’‘200ä¸‡çš„é“¾æ¥é‡</li>
</ul>
</li>
<li>æœåŠ¡å™¨éœ€è¦åšçš„<ul>
<li>ä¸Šä¼ åŠŸèƒ½</li>
<li>MD5å”¯ä¸€æ€§éªŒè¯</li>
<li>CDNç¼“å­˜ï¼ŒåŠ é€Ÿ(å¾…å®š)</li>
<li>å¯¹æ–‡ä»¶è¿›è¡ŒRSAåŠ å¯†åŒæ—¶ç”ŸæˆMD5ç­¾å</li>
<li>httpæ¥å£1<ul>
<li>å‚æ•°ï¼šappversion</li>
<li>è¿”å›<ul>
<li>patchId</li>
<li>appversion</li>
<li>fileHash</li>
<li>downloadUrl</li>
</ul>
</li>
</ul>
</li>
<li>httpæ¥å£2è¿”å›åŠ å¯†åçš„æ–‡ä»¶</li>
</ul>
</li>
</ul>
<hr>
<pre><code>- åœ¨æœ€å¼€å§‹å¢åŠ å‚æ•°ï¼Œé…ç½®æ˜¯å¦åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œä¸»è¦è§£å†³å‡å¦‚é¦–é¡µå´©æºƒï¼Œå¯ä»¥å µå¡ã€‚
- å”¤é†’çš„æ—¶å€™è¿›è¡Œä¸‹è½½ï¼Œ24å°æ—¶æ‰§è¡Œä¸€æ¬¡
</code></pre><h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><ul>
<li>javascriptCoreçš„ä½¿ç”¨</li>
<li>JSPatchDemo</li>
<li>åœ¨ç¹æ˜Ÿä¸­çš„ä½¿ç”¨</li>
</ul>
<hr>
<ul>
<li>å¯åŠ¨å´©æºƒä¸¤æ¬¡åˆ¤æ–­</li>
<li>æœ¬åœ°å›æ»š<ul>
<li>jsæ–‡ä»¶çš„ç‰ˆæœ¬å·ï¼Œå¦‚æœè¿™ä¸ªç‰ˆæœ¬å·æœ¬åœ°å·²ç»æœ‰äº†ï¼Œé‚£å°±ä¸å†ä¸‹å‘äº†</li>
<li>æœ¬åœ°ä¿å­˜çš„ä¸Šä¸€æ¬¡çš„è¿™ä¸ªæ–‡ä»¶æ˜¯åŠ å¯†å‘¢è¿˜æ˜¯æ˜æ–‡å‘¢ï¼Ÿ</li>
</ul>
</li>
<li>MD5ä¸¤æ¬¡åŠ å¯†</li>
</ul>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[categoryå†…éƒ¨å®ç°åŸç†]]></title>
      <url>/2015/12/15/2015/category%E5%86%85%E9%83%A8%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/</url>
      <content type="html"><![CDATA[<p>è§è¿‡çš„æ¯”è¾ƒå¥½çš„ä¸€ç¯‡è®²è¿°categoryå®ç°çš„åšå®¢ï¼Œåœ¨æ­¤åšä¸ªè®°å½•<br><a id="more"></a></p>
<p>è½¬è½½è‡ªï¼š<a href="http://tech.meituan.com/DiveIntoCategory.html" target="_blank" rel="external">http://tech.meituan.com/DiveIntoCategory.html</a></p>
<p>æ— è®ºä¸€ä¸ªç±»è®¾è®¡çš„å¤šä¹ˆå®Œç¾ï¼Œåœ¨æœªæ¥çš„éœ€æ±‚æ¼”è¿›ä¸­ï¼Œéƒ½æœ‰å¯èƒ½ä¼šç¢°åˆ°ä¸€äº›æ— æ³•é¢„æµ‹çš„æƒ…å†µã€‚é‚£æ€ä¹ˆæ‰©å±•å·²æœ‰çš„ç±»å‘¢ï¼Ÿä¸€èˆ¬è€Œè¨€ï¼Œç»§æ‰¿å’Œç»„åˆæ˜¯ä¸é”™çš„é€‰æ‹©ã€‚ä½†æ˜¯åœ¨Objective-C 2.0ä¸­ï¼Œåˆæä¾›äº†categoryè¿™ä¸ªè¯­è¨€ç‰¹æ€§ï¼Œå¯ä»¥åŠ¨æ€åœ°ä¸ºå·²æœ‰ç±»æ·»åŠ æ–°è¡Œä¸ºã€‚å¦‚ä»Šcategoryå·²ç»éå¸ƒäºObjective-Cä»£ç çš„å„ä¸ªè§’è½ï¼Œä»Appleå®˜æ–¹çš„frameworkåˆ°å„ä¸ªå¼€æºæ¡†æ¶ï¼Œä»åŠŸèƒ½ç¹å¤çš„å¤§å‹APPåˆ°ç®€å•çš„åº”ç”¨ï¼Œcatagoryæ— å¤„ä¸åœ¨ã€‚æœ¬æ–‡å¯¹categoryåšäº†æ¯”è¾ƒå…¨é¢çš„æ•´ç†ï¼Œå¸Œæœ›å¯¹è¯»è€…æœ‰æ‰€è£¨ç›Šã€‚</p>
<p>ç®€ä»‹</p>
<p>æœ¬æ–‡ä½œè€…æ¥è‡ªç¾å›¢é…’åº—æ—…æ¸¸äº‹ä¸šç¾¤iOSç ”å‘ç»„ã€‚æˆ‘ä»¬è‡´åŠ›äºåˆ›é€ ä»·å€¼ã€æå‡æ•ˆç‡ã€è¿½æ±‚å“è¶Šã€‚æ¬¢è¿å¤§å®¶åŠ å…¥æˆ‘ä»¬ï¼ˆç®€å†è¯·å‘é€åˆ°é‚®ç®±majia03@meituan.comï¼‰ã€‚<br>æœ¬æ–‡ç³»å­¦ä¹ Objective-Cçš„runtimeæºç æ—¶æ•´ç†æ‰€æˆï¼Œä¸»è¦å‰–æäº†categoryåœ¨runtimeå±‚çš„å®ç°åŸç†ä»¥åŠå’Œcategoryç›¸å…³çš„æ–¹æ–¹é¢é¢ï¼Œå†…å®¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>åˆå…¥å®åœ°-categoryç®€ä»‹</li>
<li>è¿ç±»æ¯”äº‹-categoryå’Œextension</li>
<li>æŒ‘ç¯ç»†è§ˆ-categoryçœŸé¢ç›®</li>
<li>è¿½æœ¬æº¯æº-categoryå¦‚ä½•åŠ è½½</li>
<li>æ—ææœ«å¶-categoryå’Œ+loadæ–¹æ³•</li>
<li>è§¦ç±»æ—é€š-categoryå’Œæ–¹æ³•è¦†ç›–</li>
<li>æ›´ä¸Šä¸€å±‚-categoryå’Œå…³è”å¯¹è±¡</li>
</ul>
<h2 id="1ã€åˆå…¥å®åœ°-categoryç®€ä»‹"><a href="#1ã€åˆå…¥å®åœ°-categoryç®€ä»‹" class="headerlink" title="1ã€åˆå…¥å®åœ°-categoryç®€ä»‹"></a>1ã€åˆå…¥å®åœ°-categoryç®€ä»‹</h2><p>categoryæ˜¯Objective-C 2.0ä¹‹åæ·»åŠ çš„è¯­è¨€ç‰¹æ€§ï¼Œcategoryçš„ä¸»è¦ä½œç”¨æ˜¯ä¸ºå·²ç»å­˜åœ¨çš„ç±»æ·»åŠ æ–¹æ³•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œappleè¿˜æ¨èäº†categoryçš„å¦å¤–ä¸¤ä¸ªä½¿ç”¨åœºæ™¯1</p>
<ul>
<li>å¯ä»¥æŠŠç±»çš„å®ç°åˆ†å¼€åœ¨å‡ ä¸ªä¸åŒçš„æ–‡ä»¶é‡Œé¢ã€‚è¿™æ ·åšæœ‰å‡ ä¸ªæ˜¾è€Œæ˜“è§çš„å¥½å¤„ï¼Œa)å¯ä»¥å‡å°‘å•ä¸ªæ–‡ä»¶çš„ä½“ç§¯ b)å¯ä»¥æŠŠä¸åŒçš„åŠŸèƒ½ç»„ç»‡åˆ°ä¸åŒçš„categoryé‡Œ c)å¯ä»¥ç”±å¤šä¸ªå¼€å‘è€…å…±åŒå®Œæˆä¸€ä¸ªç±» d)å¯ä»¥æŒ‰éœ€åŠ è½½æƒ³è¦çš„category ç­‰ç­‰ã€‚</li>
<li>å£°æ˜ç§æœ‰æ–¹æ³•</li>
</ul>
<p>ä¸è¿‡é™¤äº†appleæ¨èçš„ä½¿ç”¨åœºæ™¯ï¼Œå¹¿å¤§å¼€å‘è€…è„‘æ´å¤§å¼€ï¼Œè¿˜è¡ç”Ÿå‡ºäº†categoryçš„å…¶ä»–å‡ ä¸ªä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>æ¨¡æ‹Ÿå¤šç»§æ‰¿</li>
<li>æŠŠframeworkçš„ç§æœ‰æ–¹æ³•å…¬å¼€</li>
</ul>
<p>Objective-Cçš„è¿™ä¸ªè¯­è¨€ç‰¹æ€§å¯¹äºçº¯åŠ¨æ€è¯­è¨€æ¥è¯´å¯èƒ½ä¸ç®—ä»€ä¹ˆï¼Œæ¯”å¦‚javascriptï¼Œä½ å¯ä»¥éšæ—¶ä¸ºä¸€ä¸ªâ€œç±»â€æˆ–è€…å¯¹è±¡æ·»åŠ ä»»æ„æ–¹æ³•å’Œå®ä¾‹å˜é‡ã€‚ä½†æ˜¯å¯¹äºä¸æ˜¯é‚£ä¹ˆâ€œåŠ¨æ€â€çš„è¯­è¨€è€Œè¨€ï¼Œè¿™ç¡®å®æ˜¯ä¸€ä¸ªäº†ä¸èµ·çš„ç‰¹æ€§ã€‚</p>
<h2 id="2ã€è¿ç±»æ¯”äº‹-categoryå’Œextension"><a href="#2ã€è¿ç±»æ¯”äº‹-categoryå’Œextension" class="headerlink" title="2ã€è¿ç±»æ¯”äº‹-categoryå’Œextension"></a>2ã€è¿ç±»æ¯”äº‹-categoryå’Œextension</h2><p>extensionçœ‹èµ·æ¥å¾ˆåƒä¸€ä¸ªåŒ¿åçš„categoryï¼Œä½†æ˜¯extensionå’Œæœ‰åå­—çš„categoryå‡ ä¹å®Œå…¨æ˜¯ä¸¤ä¸ªä¸œè¥¿ã€‚ extensionåœ¨ç¼–è¯‘æœŸå†³è®®ï¼Œå®ƒå°±æ˜¯ç±»çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨ç¼–è¯‘æœŸå’Œå¤´æ–‡ä»¶é‡Œçš„@interfaceä»¥åŠå®ç°æ–‡ä»¶é‡Œçš„@implementä¸€èµ·å½¢æˆä¸€ä¸ªå®Œæ•´çš„ç±»ï¼Œå®ƒä¼´éšç±»çš„äº§ç”Ÿè€Œäº§ç”Ÿï¼Œäº¦éšä¹‹ä¸€èµ·æ¶ˆäº¡ã€‚extensionä¸€èˆ¬ç”¨æ¥éšè—ç±»çš„ç§æœ‰ä¿¡æ¯ï¼Œä½ å¿…é¡»æœ‰ä¸€ä¸ªç±»çš„æºç æ‰èƒ½ä¸ºä¸€ä¸ªç±»æ·»åŠ extensionï¼Œæ‰€ä»¥ä½ æ— æ³•ä¸ºç³»ç»Ÿçš„ç±»æ¯”å¦‚NSStringæ·»åŠ extensionã€‚ï¼ˆè¯¦è§2ï¼‰</p>
<p>ä½†æ˜¯categoryåˆ™å®Œå…¨ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯åœ¨è¿è¡ŒæœŸå†³è®®çš„ã€‚<br>å°±categoryå’Œextensionçš„åŒºåˆ«æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å¯¼å‡ºä¸€ä¸ªæ˜æ˜¾çš„äº‹å®ï¼Œextensionå¯ä»¥æ·»åŠ å®ä¾‹å˜é‡ï¼Œè€Œcategoryæ˜¯æ— æ³•æ·»åŠ å®ä¾‹å˜é‡çš„ï¼ˆå› ä¸ºåœ¨è¿è¡ŒæœŸï¼Œå¯¹è±¡çš„å†…å­˜å¸ƒå±€å·²ç»ç¡®å®šï¼Œå¦‚æœæ·»åŠ å®ä¾‹å˜é‡å°±ä¼šç ´åç±»çš„å†…éƒ¨å¸ƒå±€ï¼Œè¿™å¯¹ç¼–è¯‘å‹è¯­è¨€æ¥è¯´æ˜¯ç¾éš¾æ€§çš„ï¼‰ã€‚</p>
<h2 id="3ã€æŒ‘ç¯ç»†è§ˆ-categoryçœŸé¢ç›®"><a href="#3ã€æŒ‘ç¯ç»†è§ˆ-categoryçœŸé¢ç›®" class="headerlink" title="3ã€æŒ‘ç¯ç»†è§ˆ-categoryçœŸé¢ç›®"></a>3ã€æŒ‘ç¯ç»†è§ˆ-categoryçœŸé¢ç›®</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œæ‰€æœ‰çš„OCç±»å’Œå¯¹è±¡ï¼Œåœ¨runtimeå±‚éƒ½æ˜¯ç”¨structè¡¨ç¤ºçš„ï¼Œcategoryä¹Ÿä¸ä¾‹å¤–ï¼Œåœ¨runtimeå±‚ï¼Œcategoryç”¨ç»“æ„ä½“category_tï¼ˆåœ¨objc-runtime-new.hä¸­å¯ä»¥æ‰¾åˆ°æ­¤å®šä¹‰ï¼‰ï¼Œå®ƒåŒ…å«äº†<br>1)ã€ç±»çš„åå­—ï¼ˆnameï¼‰<br>2)ã€ç±»ï¼ˆclsï¼‰<br>3)ã€categoryä¸­æ‰€æœ‰ç»™ç±»æ·»åŠ çš„å®ä¾‹æ–¹æ³•çš„åˆ—è¡¨ï¼ˆinstanceMethodsï¼‰<br>4)ã€categoryä¸­æ‰€æœ‰æ·»åŠ çš„ç±»æ–¹æ³•çš„åˆ—è¡¨ï¼ˆclassMethodsï¼‰<br>5)ã€categoryå®ç°çš„æ‰€æœ‰åè®®çš„åˆ—è¡¨ï¼ˆprotocolsï¼‰<br>6)ã€categoryä¸­æ·»åŠ çš„æ‰€æœ‰å±æ€§ï¼ˆinstancePropertiesï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">typedef struct category_t &#123;</div><div class="line">    const char *name;</div><div class="line">    classref_t cls;</div><div class="line">    struct method_list_t *instanceMethods;</div><div class="line">    struct method_list_t *classMethods;</div><div class="line">    struct protocol_list_t *protocols;</div><div class="line">    struct property_list_t *instanceProperties;</div><div class="line">&#125; category_t;</div></pre></td></tr></table></figure>
<p>ä»categoryçš„å®šä¹‰ä¹Ÿå¯ä»¥çœ‹å‡ºcategoryçš„å¯ä¸ºï¼ˆå¯ä»¥æ·»åŠ å®ä¾‹æ–¹æ³•ï¼Œç±»æ–¹æ³•ï¼Œç”šè‡³å¯ä»¥å®ç°åè®®ï¼Œæ·»åŠ å±æ€§ï¼‰å’Œä¸å¯ä¸ºï¼ˆæ— æ³•æ·»åŠ å®ä¾‹å˜é‡ï¼‰ã€‚<br>okï¼Œæˆ‘ä»¬å…ˆå»å†™ä¸€ä¸ªcategoryçœ‹ä¸€ä¸‹categoryåˆ°åº•ä¸ºä½•ç‰©ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">MyClass.hï¼š</div><div class="line"></div><div class="line"></div><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line"></div><div class="line">@interface MyClass : NSObject</div><div class="line"></div><div class="line">- (void)printName;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">@interface MyClass(MyAddition)</div><div class="line"></div><div class="line">@property(nonatomic, copy) NSString *name;</div><div class="line"></div><div class="line">- (void)printName;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">MyClass.mï¼š</div><div class="line"></div><div class="line"></div><div class="line">#import &quot;MyClass.h&quot;</div><div class="line"></div><div class="line">@implementation MyClass</div><div class="line"></div><div class="line">- (void)printName</div><div class="line">&#123;</div><div class="line">    NSLog(@&quot;%@&quot;,@&quot;MyClass&quot;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">@implementation MyClass(MyAddition)</div><div class="line"></div><div class="line">- (void)printName</div><div class="line">&#123;</div><div class="line">    NSLog(@&quot;%@&quot;,@&quot;MyAddition&quot;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬ä½¿ç”¨clangçš„å‘½ä»¤å»çœ‹çœ‹categoryåˆ°åº•ä¼šå˜æˆä»€ä¹ˆï¼š</p>
<p>clang -rewrite-objc MyClass.m</p>
<p>å¥½å§ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª3Må¤§å°ï¼Œ10wå¤šè¡Œçš„.cppæ–‡ä»¶ï¼ˆè¿™ç»å¯¹æ˜¯Appleå€¼å¾—åæ§½çš„ä¸€ç‚¹ï¼‰ï¼Œæˆ‘ä»¬å¿½ç•¥æ‰æ‰€æœ‰å’Œæˆ‘ä»¬æ— å…³çš„ä¸œè¥¿ï¼Œåœ¨æ–‡ä»¶çš„æœ€åï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†å¦‚ä¸‹ä»£ç ç‰‡æ®µï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">static struct /*_method_list_t*/ &#123;</div><div class="line">unsigned int entsize;  // sizeof(struct _objc_method)</div><div class="line">unsigned int method_count;</div><div class="line">struct _objc_method method_list[1];</div><div class="line">&#125; _OBJC_$_CATEGORY_INSTANCE_METHODS_MyClass_$_MyAddition __attribute__ ((used, section (&quot;__DATA,__objc_const&quot;))) = &#123;</div><div class="line">sizeof(_objc_method),</div><div class="line">1,</div><div class="line">&#123;&#123;(struct objc_selector *)&quot;printName&quot;, &quot;v16@0:8&quot;, (void *)_I_MyClass_MyAddition_printName&#125;&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">static struct /*_prop_list_t*/ &#123;</div><div class="line">unsigned int entsize;  // sizeof(struct _prop_t)</div><div class="line">unsigned int count_of_properties;</div><div class="line">struct _prop_t prop_list[1];</div><div class="line">&#125; _OBJC_$_PROP_LIST_MyClass_$_MyAddition __attribute__ ((used, section (&quot;__DATA,__objc_const&quot;))) = &#123;</div><div class="line">sizeof(_prop_t),</div><div class="line">1,</div><div class="line">&#123;&#123;&quot;name&quot;,&quot;T@\&quot;NSString\&quot;,C,N&quot;&#125;&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">extern &quot;C&quot; __declspec(dllexport) struct _class_t OBJC_CLASS_$_MyClass;</div><div class="line"></div><div class="line">static struct _category_t _OBJC_$_CATEGORY_MyClass_$_MyAddition __attribute__ ((used, section (&quot;__DATA,__objc_const&quot;))) =</div><div class="line">&#123;</div><div class="line">&quot;MyClass&quot;,</div><div class="line">0, // &amp;OBJC_CLASS_$_MyClass,</div><div class="line">(const struct _method_list_t *)&amp;_OBJC_$_CATEGORY_INSTANCE_METHODS_MyClass_$_MyAddition,</div><div class="line">0,</div><div class="line">0,</div><div class="line">(const struct _prop_list_t *)&amp;_OBJC_$_PROP_LIST_MyClass_$_MyAddition,</div><div class="line">&#125;;</div><div class="line">static void OBJC_CATEGORY_SETUP_$_MyClass_$_MyAddition(void ) &#123;</div><div class="line">_OBJC_$_CATEGORY_MyClass_$_MyAddition.cls = &amp;OBJC_CLASS_$_MyClass;</div><div class="line">&#125;</div><div class="line">#pragma section(&quot;.objc_inithooks$B&quot;, long, read, write)</div><div class="line">__declspec(allocate(&quot;.objc_inithooks$B&quot;)) static void *OBJC_CATEGORY_SETUP[] = &#123;</div><div class="line">(void *)&amp;OBJC_CATEGORY_SETUP_$_MyClass_$_MyAddition,</div><div class="line">&#125;;</div><div class="line">static struct _class_t *L_OBJC_LABEL_CLASS_$ [1] __attribute__((used, section (&quot;__DATA, __objc_classlist,regular,no_dead_strip&quot;)))= &#123;</div><div class="line">&amp;OBJC_CLASS_$_MyClass,</div><div class="line">&#125;;</div><div class="line">static struct _class_t *_OBJC_LABEL_NONLAZY_CLASS_$[] = &#123;</div><div class="line">&amp;OBJC_CLASS_$_MyClass,</div><div class="line">&#125;;</div><div class="line">static struct _category_t *L_OBJC_LABEL_CATEGORY_$ [1] __attribute__((used, section (&quot;__DATA, __objc_catlist,regular,no_dead_strip&quot;)))= &#123;</div><div class="line">&amp;_OBJC_$_CATEGORY_MyClass_$_MyAddition,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<br>1)ã€é¦–å…ˆç¼–è¯‘å™¨ç”Ÿæˆäº†å®ä¾‹æ–¹æ³•åˆ—è¡¨OBJC$CATEGORY_INSTANCE_METHODS_MyClass$MyAdditionå’Œå±æ€§åˆ—è¡¨_OBJC$PROP_LIST_MyClass$MyAdditionï¼Œä¸¤è€…çš„å‘½åéƒ½éµå¾ªäº†å…¬å…±å‰ç¼€+ç±»å+categoryåå­—çš„å‘½åæ–¹å¼ï¼Œè€Œä¸”å®ä¾‹æ–¹æ³•åˆ—è¡¨é‡Œé¢å¡«å……çš„æ­£æ˜¯æˆ‘ä»¬åœ¨MyAdditionè¿™ä¸ªcategoryé‡Œé¢å†™çš„æ–¹æ³•printNameï¼Œè€Œå±æ€§åˆ—è¡¨é‡Œé¢å¡«å……çš„ä¹Ÿæ­£æ˜¯æˆ‘ä»¬åœ¨MyAdditioné‡Œæ·»åŠ çš„nameå±æ€§ã€‚è¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„åˆ°çš„äº‹å®å°±æ˜¯categoryçš„åå­—ç”¨æ¥ç»™å„ç§åˆ—è¡¨ä»¥åŠåé¢çš„categoryç»“æ„ä½“æœ¬èº«å‘½åï¼Œè€Œä¸”æœ‰staticæ¥ä¿®é¥°ï¼Œæ‰€ä»¥åœ¨åŒä¸€ä¸ªç¼–è¯‘å•å…ƒé‡Œæˆ‘ä»¬çš„categoryåä¸èƒ½é‡å¤ï¼Œå¦åˆ™ä¼šå‡ºç°ç¼–è¯‘é”™è¯¯ã€‚<br>2)ã€å…¶æ¬¡ï¼Œç¼–è¯‘å™¨ç”Ÿæˆäº†categoryæœ¬èº«_OBJC$CATEGORY_MyClass$MyAdditionï¼Œå¹¶ç”¨å‰é¢ç”Ÿæˆçš„åˆ—è¡¨æ¥åˆå§‹åŒ–categoryæœ¬èº«ã€‚<br>3)ã€æœ€åï¼Œç¼–è¯‘å™¨åœ¨DATAæ®µä¸‹çš„objc_catlist sectioné‡Œä¿å­˜äº†ä¸€ä¸ªå¤§å°ä¸º1çš„category_tçš„æ•°ç»„L_OBJC_LABEL<em>CATEGORY$ï¼ˆå½“ç„¶ï¼Œå¦‚æœæœ‰å¤šä¸ªcategoryï¼Œä¼šç”Ÿæˆå¯¹åº”é•¿åº¦çš„æ•°ç»„^</em>^ï¼‰ï¼Œç”¨äºè¿è¡ŒæœŸcategoryçš„åŠ è½½ã€‚<br>åˆ°è¿™é‡Œï¼Œç¼–è¯‘å™¨çš„å·¥ä½œå°±æ¥è¿‘å°¾å£°äº†ï¼Œå¯¹äºcategoryåœ¨è¿è¡ŒæœŸæ€ä¹ˆåŠ è½½ï¼Œæˆ‘ä»¬ä¸‹èŠ‚æ­æ™“ã€‚</p>
<p>4ã€è¿½æœ¬æº¯æº-categoryå¦‚ä½•åŠ è½½</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼ŒObjective-Cçš„è¿è¡Œæ˜¯ä¾èµ–OCçš„runtimeçš„ï¼Œè€ŒOCçš„runtimeå’Œå…¶ä»–ç³»ç»Ÿåº“ä¸€æ ·ï¼Œæ˜¯OS Xå’ŒiOSé€šè¿‡dyldåŠ¨æ€åŠ è½½çš„ã€‚<br>æƒ³äº†è§£æ›´å¤šdyldåœ°åŒå­¦å¯ä»¥ç§»æ­¥è¿™é‡Œï¼ˆ3ï¼‰ã€‚</p>
<p>å¯¹äºOCè¿è¡Œæ—¶ï¼Œå…¥å£æ–¹æ³•å¦‚ä¸‹ï¼ˆåœ¨objc-os.mmæ–‡ä»¶ä¸­ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">void _objc_init(void)</div><div class="line">&#123;</div><div class="line">    static bool initialized = false;</div><div class="line">    if (initialized) return;</div><div class="line">    initialized = true;</div><div class="line"></div><div class="line">    // fixme defer initialization until an objc-using image is found?</div><div class="line">    environ_init();</div><div class="line">    tls_init();</div><div class="line">    lock_init();</div><div class="line">    exception_init();</div><div class="line"></div><div class="line">    // Register for unmap first, in case some +load unmaps something</div><div class="line">    _dyld_register_func_for_remove_image(&amp;unmap_image);</div><div class="line">    dyld_register_image_state_change_handler(dyld_image_state_bound,</div><div class="line">                                            1/*batch*/, &amp;map_images);</div><div class="line">    dyld_register_image_state_change_handler(dyld_image_state_dependents_initialized, 0/*not batch*/, &amp;load_images);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>categoryè¢«é™„åŠ åˆ°ç±»ä¸Šé¢æ˜¯åœ¨map_imagesçš„æ—¶å€™å‘ç”Ÿçš„ï¼Œåœ¨new-ABIçš„æ ‡å‡†ä¸‹ï¼Œ_objc_inité‡Œé¢çš„è°ƒç”¨çš„map_imagesæœ€ç»ˆä¼šè°ƒç”¨objc-runtime-new.mmé‡Œé¢çš„_read_imagesæ–¹æ³•ï¼Œè€Œåœ¨_read_imagesæ–¹æ³•çš„ç»“å°¾ï¼Œæœ‰ä»¥ä¸‹çš„ä»£ç ç‰‡æ®µï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">// Discover categories.</div><div class="line">    for (EACH_HEADER) &#123;</div><div class="line">        category_t **catlist =</div><div class="line">            _getObjc2CategoryList(hi, &amp;count);</div><div class="line">        for (i = 0; i &lt; count; i++) &#123;</div><div class="line">            category_t *cat = catlist[i];</div><div class="line">            class_t *cls = remapClass(cat-&gt;cls);</div><div class="line"></div><div class="line">            if (!cls) &#123;</div><div class="line">                // Category&apos;s target class is missing (probably weak-linked).</div><div class="line">                // Disavow any knowledge of this category.</div><div class="line">                catlist[i] = NULL;</div><div class="line">                if (PrintConnecting) &#123;</div><div class="line">                    _objc_inform(&quot;CLASS: IGNORING category \?\?\?(%s) %p with &quot;</div><div class="line">                                &quot;missing weak-linked target class&quot;,</div><div class="line">                                cat-&gt;name, cat);</div><div class="line">                &#125;</div><div class="line">                continue;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            // Process this category.</div><div class="line">            // First, register the category with its target class.</div><div class="line">            // Then, rebuild the class&apos;s method lists (etc) if</div><div class="line">            // the class is realized.</div><div class="line">            BOOL classExists = NO;</div><div class="line">            if (cat-&gt;instanceMethods ||  cat-&gt;protocols</div><div class="line">                ||  cat-&gt;instanceProperties)</div><div class="line">            &#123;</div><div class="line">                addUnattachedCategoryForClass(cat, cls, hi);</div><div class="line">                if (isRealized(cls)) &#123;</div><div class="line">                    remethodizeClass(cls);</div><div class="line">                    classExists = YES;</div><div class="line">                &#125;</div><div class="line">                if (PrintConnecting) &#123;</div><div class="line">                    _objc_inform(&quot;CLASS: found category -%s(%s) %s&quot;,</div><div class="line">                                getName(cls), cat-&gt;name,</div><div class="line">                                classExists ? &quot;on existing class&quot; : &quot;&quot;);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            if (cat-&gt;classMethods  ||  cat-&gt;protocols</div><div class="line">                /* ||  cat-&gt;classProperties */)</div><div class="line">            &#123;</div><div class="line">                addUnattachedCategoryForClass(cat, cls-&gt;isa, hi);</div><div class="line">                if (isRealized(cls-&gt;isa)) &#123;</div><div class="line">                    remethodizeClass(cls-&gt;isa);</div><div class="line">                &#125;</div><div class="line">                if (PrintConnecting) &#123;</div><div class="line">                    _objc_inform(&quot;CLASS: found category +%s(%s)&quot;,</div><div class="line">                                getName(cls), cat-&gt;name);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ‹¿åˆ°çš„catlistå°±æ˜¯ä¸ŠèŠ‚ä¸­è®²åˆ°çš„ç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬å‡†å¤‡çš„category_tæ•°ç»„ï¼Œå…³äºæ˜¯å¦‚ä½•åŠ è½½catlistæœ¬èº«çš„ï¼Œæˆ‘ä»¬æš‚ä¸”ä¸è¡¨ï¼Œè¿™å’Œcategoryæœ¬èº«çš„å…³ç³»ä¹Ÿä¸å¤§ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»ç ”ç©¶ä»¥ä¸‹Appleçš„äºŒè¿›åˆ¶æ ¼å¼å’Œloadæœºåˆ¶ã€‚<br>ç•¥å»PrintConnectingè¿™ä¸ªç”¨äºlogçš„ä¸œè¥¿ï¼Œè¿™æ®µä»£ç å¾ˆå®¹æ˜“ç†è§£ï¼š<br>1)ã€æŠŠcategoryçš„å®ä¾‹æ–¹æ³•ã€åè®®ä»¥åŠå±æ€§æ·»åŠ åˆ°ç±»ä¸Š<br>2)ã€æŠŠcategoryçš„ç±»æ–¹æ³•å’Œåè®®æ·»åŠ åˆ°ç±»çš„metaclassä¸Š</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä»£ç ä¸­æœ‰ä¸€å°æ®µæ³¨é‡Š / || cat-&gt;classProperties /ï¼Œçœ‹æ¥è‹¹æœæœ‰è¿‡ç»™ç±»æ·»åŠ å±æ€§çš„è®¡åˆ’å•Šã€‚<br>okï¼Œæˆ‘ä»¬æ¥ç€å¾€é‡Œçœ‹ï¼Œcategoryçš„å„ç§åˆ—è¡¨æ˜¯æ€ä¹ˆæœ€ç»ˆæ·»åŠ åˆ°ç±»ä¸Šçš„ï¼Œå°±æ‹¿å®ä¾‹æ–¹æ³•åˆ—è¡¨æ¥è¯´å§ï¼š<br>åœ¨ä¸Šè¿°çš„ä»£ç ç‰‡æ®µé‡Œï¼ŒaddUnattachedCategoryForClassåªæ˜¯æŠŠç±»å’Œcategoryåšä¸€ä¸ªå…³è”æ˜ å°„ï¼Œè€ŒremethodizeClassæ‰æ˜¯çœŸæ­£å»å¤„ç†æ·»åŠ äº‹å®œçš„åŠŸè‡£ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">static void remethodizeClass(class_t *cls)</div><div class="line">&#123;</div><div class="line">    category_list *cats;</div><div class="line">    BOOL isMeta;</div><div class="line"></div><div class="line">    rwlock_assert_writing(&amp;runtimeLock);</div><div class="line"></div><div class="line">    isMeta = isMetaClass(cls);</div><div class="line"></div><div class="line">    // Re-methodizing: check for more categories</div><div class="line">    if ((cats = unattachedCategoriesForClass(cls))) &#123;</div><div class="line">        chained_property_list *newproperties;</div><div class="line">        const protocol_list_t **newprotos;</div><div class="line"></div><div class="line">        if (PrintConnecting) &#123;</div><div class="line">            _objc_inform(&quot;CLASS: attaching categories to class &apos;%s&apos; %s&quot;,</div><div class="line">                        getName(cls), isMeta ? &quot;(meta)&quot; : &quot;&quot;);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        // Update methods, properties, protocols</div><div class="line"></div><div class="line">        BOOL vtableAffected = NO;</div><div class="line">        attachCategoryMethods(cls, cats, &amp;vtableAffected);</div><div class="line"></div><div class="line">        newproperties = buildPropertyList(NULL, cats, isMeta);</div><div class="line">        if (newproperties) &#123;</div><div class="line">            newproperties-&gt;next = cls-&gt;data()-&gt;properties;</div><div class="line">            cls-&gt;data()-&gt;properties = newproperties;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        newprotos = buildProtocolList(cats, NULL, cls-&gt;data()-&gt;protocols);</div><div class="line">        if (cls-&gt;data()-&gt;protocols  &amp;&amp;  cls-&gt;data()-&gt;protocols != newprotos) &#123;</div><div class="line">            _free_internal(cls-&gt;data()-&gt;protocols);</div><div class="line">        &#125;</div><div class="line">        cls-&gt;data()-&gt;protocols = newprotos;</div><div class="line"></div><div class="line">        _free_internal(cats);</div><div class="line"></div><div class="line">        // Update method caches and vtables</div><div class="line">        flushCaches(cls);</div><div class="line">        if (vtableAffected) flushVtables(cls);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è€Œå¯¹äºæ·»åŠ ç±»çš„å®ä¾‹æ–¹æ³•è€Œè¨€ï¼Œåˆä¼šå»è°ƒç”¨attachCategoryMethodsè¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å»çœ‹ä¸‹attachCategoryMethodsï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">static void</div><div class="line">attachCategoryMethods(class_t *cls, category_list *cats,</div><div class="line">                      BOOL *inoutVtablesAffected)</div><div class="line">&#123;</div><div class="line">    if (!cats) return;</div><div class="line">    if (PrintReplacedMethods) printReplacements(cls, cats);</div><div class="line"></div><div class="line">    BOOL isMeta = isMetaClass(cls);</div><div class="line">    method_list_t **mlists = (method_list_t **)</div><div class="line">        _malloc_internal(cats-&gt;count * sizeof(*mlists));</div><div class="line"></div><div class="line">    // Count backwards through cats to get newest categories first</div><div class="line">    int mcount = 0;</div><div class="line">    int i = cats-&gt;count;</div><div class="line">    BOOL fromBundle = NO;</div><div class="line">    while (i--) &#123;</div><div class="line">        method_list_t *mlist = cat_method_list(cats-&gt;list[i].cat, isMeta);</div><div class="line">        if (mlist) &#123;</div><div class="line">            mlists[mcount++] = mlist;</div><div class="line">            fromBundle |= cats-&gt;list[i].fromBundle;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    attachMethodLists(cls, mlists, mcount, NO, fromBundle, inoutVtablesAffected);</div><div class="line"></div><div class="line">    _free_internal(mlists);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>attachCategoryMethodsåšçš„å·¥ä½œç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œå®ƒåªæ˜¯æŠŠæ‰€æœ‰categoryçš„å®ä¾‹æ–¹æ³•åˆ—è¡¨æ‹¼æˆäº†ä¸€ä¸ªå¤§çš„å®ä¾‹æ–¹æ³•åˆ—è¡¨ï¼Œç„¶åè½¬äº¤ç»™äº†attachMethodListsæ–¹æ³•ï¼ˆæˆ‘å‘èª“ï¼Œè¿™æ˜¯æœ¬èŠ‚æˆ‘ä»¬çœ‹çš„æœ€åä¸€æ®µä»£ç äº†^_^ï¼‰ï¼Œè¿™ä¸ªæ–¹æ³•æœ‰ç‚¹é•¿ï¼Œæˆ‘ä»¬åªçœ‹ä¸€å°æ®µï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">for (uint32_t m = 0;</div><div class="line">            (scanForCustomRR || scanForCustomAWZ)  &amp;&amp;  m &lt; mlist-&gt;count;</div><div class="line">            m++)</div><div class="line">        &#123;</div><div class="line">            SEL sel = method_list_nth(mlist, m)-&gt;name;</div><div class="line">            if (scanForCustomRR  &amp;&amp;  isRRSelector(sel)) &#123;</div><div class="line">                cls-&gt;setHasCustomRR();</div><div class="line">                scanForCustomRR = false;</div><div class="line">            &#125; else if (scanForCustomAWZ  &amp;&amp;  isAWZSelector(sel)) &#123;</div><div class="line">                cls-&gt;setHasCustomAWZ();</div><div class="line">                scanForCustomAWZ = false;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        // Fill method list array</div><div class="line">        newLists[newCount++] = mlist;</div><div class="line">    .</div><div class="line">    .</div><div class="line">    .</div><div class="line"></div><div class="line">    // Copy old methods to the method list array</div><div class="line">    for (i = 0; i &lt; oldCount; i++) &#123;</div><div class="line">        newLists[newCount++] = oldLists[i];</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æœ‰ä¸¤ç‚¹ï¼š<br>1)ã€categoryçš„æ–¹æ³•æ²¡æœ‰â€œå®Œå…¨æ›¿æ¢æ‰â€åŸæ¥ç±»å·²ç»æœ‰çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœcategoryå’ŒåŸæ¥ç±»éƒ½æœ‰methodAï¼Œé‚£ä¹ˆcategoryé™„åŠ å®Œæˆä¹‹åï¼Œç±»çš„æ–¹æ³•åˆ—è¡¨é‡Œä¼šæœ‰ä¸¤ä¸ªmethodA<br>2)ã€categoryçš„æ–¹æ³•è¢«æ”¾åˆ°äº†æ–°æ–¹æ³•åˆ—è¡¨çš„å‰é¢ï¼Œè€ŒåŸæ¥ç±»çš„æ–¹æ³•è¢«æ”¾åˆ°äº†æ–°æ–¹æ³•åˆ—è¡¨çš„åé¢ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„categoryçš„æ–¹æ³•ä¼šâ€œè¦†ç›–â€æ‰åŸæ¥ç±»çš„åŒåæ–¹æ³•ï¼Œè¿™æ˜¯å› ä¸ºè¿è¡Œæ—¶åœ¨æŸ¥æ‰¾æ–¹æ³•çš„æ—¶å€™æ˜¯é¡ºç€æ–¹æ³•åˆ—è¡¨çš„é¡ºåºæŸ¥æ‰¾çš„ï¼Œå®ƒåªè¦ä¸€æ‰¾åˆ°å¯¹åº”åå­—çš„æ–¹æ³•ï¼Œå°±ä¼šç½¢ä¼‘^_^ï¼Œæ®Šä¸çŸ¥åé¢å¯èƒ½è¿˜æœ‰ä¸€æ ·åå­—çš„æ–¹æ³•ã€‚</p>
<h2 id="5ã€æ—ææœ«å¶-categoryå’Œ-loadæ–¹æ³•"><a href="#5ã€æ—ææœ«å¶-categoryå’Œ-loadæ–¹æ³•" class="headerlink" title="5ã€æ—ææœ«å¶-categoryå’Œ+loadæ–¹æ³•"></a>5ã€æ—ææœ«å¶-categoryå’Œ+loadæ–¹æ³•</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ç±»å’Œcategoryä¸­éƒ½å¯ä»¥æœ‰+loadæ–¹æ³•ï¼Œé‚£ä¹ˆæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š<br>1)ã€åœ¨ç±»çš„+loadæ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨categoryä¸­å£°æ˜çš„æ–¹æ³•ä¹ˆï¼Ÿ<br>2)ã€è¿™ä¹ˆäº›ä¸ª+loadæ–¹æ³•ï¼Œè°ƒç”¨é¡ºåºæ˜¯å’‹æ ·çš„å‘¢ï¼Ÿ<br>é‰´äºä¸Šè¿°å‡ èŠ‚æˆ‘ä»¬çœ‹çš„ä»£ç å¤ªå¤šäº†ï¼Œå¯¹äºè¿™ä¸¤ä¸ªé—®é¢˜æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ç‚¹ç›´è§‚çš„ï¼š</p>
<p>æˆ‘ä»¬çš„ä»£ç é‡Œæœ‰MyClasså’ŒMyClassçš„ä¸¤ä¸ªcategory ï¼ˆCategory1å’ŒCategory2ï¼‰ï¼ŒMyClasså’Œä¸¤ä¸ªcategoryéƒ½æ·»åŠ äº†+loadæ–¹æ³•ï¼Œå¹¶ä¸”Category1å’ŒCategory2éƒ½å†™äº†MyClassçš„printNameæ–¹æ³•ã€‚<br>åœ¨Xcodeä¸­ç‚¹å‡»Edit Schemeï¼Œæ·»åŠ å¦‚ä¸‹ä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼ˆå¯ä»¥åœ¨æ‰§è¡Œloadæ–¹æ³•ä»¥åŠåŠ è½½categoryçš„æ—¶å€™æ‰“å°logä¿¡æ¯ï¼Œæ›´å¤šçš„ç¯å¢ƒå˜é‡é€‰é¡¹å¯å‚è§objc-private.hï¼‰:</p>
<p>è¿è¡Œé¡¹ç›®ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æ§åˆ¶å°æ‰“å°å¾ˆå¤šä¸œè¥¿å‡ºæ¥ï¼Œæˆ‘ä»¬åªæ‰¾åˆ°æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ï¼Œé¡ºåºå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">objc[1187]: REPLACED: -[MyClass printName] by category Category1</div><div class="line">objc[1187]: REPLACED: -[MyClass printName] by category Category2</div><div class="line">.</div><div class="line">.</div><div class="line">.</div><div class="line">objc[1187]: LOAD: class &apos;MyClass&apos; scheduled for +load</div><div class="line">objc[1187]: LOAD: category &apos;MyClass(Category1)&apos; scheduled for +load</div><div class="line">objc[1187]: LOAD: category &apos;MyClass(Category2)&apos; scheduled for +load</div><div class="line">objc[1187]: LOAD: +[MyClass load]</div><div class="line">.</div><div class="line">.</div><div class="line">.</div><div class="line">objc[1187]: LOAD: +[MyClass(Category1) load]</div><div class="line">.</div><div class="line">.</div><div class="line">.</div><div class="line">objc[1187]: LOAD: +[MyClass(Category2) load]</div></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥ï¼Œå¯¹äºä¸Šé¢ä¸¤ä¸ªé—®é¢˜ï¼Œç­”æ¡ˆæ˜¯å¾ˆæ˜æ˜¾çš„ï¼š<br>1)ã€å¯ä»¥è°ƒç”¨ï¼Œå› ä¸ºé™„åŠ categoryåˆ°ç±»çš„å·¥ä½œä¼šå…ˆäº+loadæ–¹æ³•çš„æ‰§è¡Œ<br>2)ã€+loadçš„æ‰§è¡Œé¡ºåºæ˜¯å…ˆç±»ï¼Œåcategoryï¼Œè€Œcategoryçš„+loadæ‰§è¡Œé¡ºåºæ˜¯æ ¹æ®ç¼–è¯‘é¡ºåºå†³å®šçš„ã€‚<br>ç›®å‰çš„ç¼–è¯‘é¡ºåºæ˜¯è¿™æ ·çš„ï¼š</p>
<p>æˆ‘ä»¬è°ƒæ•´ä¸€ä¸ªCategory1å’ŒCategory2çš„ç¼–è¯‘é¡ºåºï¼Œrunã€‚okï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ§åˆ¶å°çš„è¾“å‡ºé¡ºåºå˜äº†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">objc[1187]: REPLACED: -[MyClass printName] by category Category2</div><div class="line">objc[1187]: REPLACED: -[MyClass printName] by category Category1</div><div class="line">.</div><div class="line">.</div><div class="line">.</div><div class="line">objc[1187]: LOAD: class &apos;MyClass&apos; scheduled for +load</div><div class="line">objc[1187]: LOAD: category &apos;MyClass(Category2)&apos; scheduled for +load</div><div class="line">objc[1187]: LOAD: category &apos;MyClass(Category1)&apos; scheduled for +load</div><div class="line">objc[1187]: LOAD: +[MyClass load]</div><div class="line">.</div><div class="line">.</div><div class="line">.</div><div class="line">objc[1187]: LOAD: +[MyClass(Category2) load]</div><div class="line">.</div><div class="line">.</div><div class="line">.</div><div class="line">objc[1187]: LOAD: +[MyClass(Category1) load]</div></pre></td></tr></table></figure></p>
<p>è™½ç„¶å¯¹äº+loadçš„æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·ï¼Œä½†æ˜¯å¯¹äºâ€œè¦†ç›–â€æ‰çš„æ–¹æ³•ï¼Œåˆ™ä¼šå…ˆæ‰¾åˆ°æœ€åä¸€ä¸ªç¼–è¯‘çš„categoryé‡Œçš„å¯¹åº”æ–¹æ³•ã€‚<br>è¿™ä¸€èŠ‚æˆ‘ä»¬åªæ˜¯ç”¨å¾ˆç›´è§‚çš„æ–¹å¼å¾—åˆ°äº†é—®é¢˜çš„ç­”æ¡ˆï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç»§ç»­å»ç ”ç©¶ä¸€ä¸‹OCçš„è¿è¡Œæ—¶ä»£ç ã€‚</p>
<h3 id="6ã€è§¦ç±»æ—é€š-categoryå’Œæ–¹æ³•è¦†ç›–"><a href="#6ã€è§¦ç±»æ—é€š-categoryå’Œæ–¹æ³•è¦†ç›–" class="headerlink" title="6ã€è§¦ç±»æ—é€š-categoryå’Œæ–¹æ³•è¦†ç›–"></a>6ã€è§¦ç±»æ—é€š-categoryå’Œæ–¹æ³•è¦†ç›–</h3><p>é‰´äºä¸Šé¢å‡ èŠ‚æˆ‘ä»¬å·²ç»æŠŠåŸç†éƒ½è®²äº†ï¼Œè¿™ä¸€èŠ‚åªæœ‰ä¸€ä¸ªé—®é¢˜:<br>æ€ä¹ˆè°ƒç”¨åˆ°åŸæ¥ç±»ä¸­è¢«categoryè¦†ç›–æ‰çš„æ–¹æ³•ï¼Ÿ<br>å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“categoryå…¶å®å¹¶ä¸æ˜¯å®Œå…¨æ›¿æ¢æ‰åŸæ¥ç±»çš„åŒåæ–¹æ³•ï¼Œåªæ˜¯categoryåœ¨æ–¹æ³•åˆ—è¡¨çš„å‰é¢è€Œå·²ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦é¡ºç€æ–¹æ³•åˆ—è¡¨æ‰¾åˆ°æœ€åä¸€ä¸ªå¯¹åº”åå­—çš„æ–¹æ³•ï¼Œå°±å¯ä»¥è°ƒç”¨åŸæ¥ç±»çš„æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">Class currentClass = [MyClass class];</div><div class="line">MyClass *my = [[MyClass alloc] init];</div><div class="line"></div><div class="line">if (currentClass) &#123;</div><div class="line">    unsigned int methodCount;</div><div class="line">    Method *methodList = class_copyMethodList(currentClass, &amp;methodCount);</div><div class="line">    IMP lastImp = NULL;</div><div class="line">    SEL lastSel = NULL;</div><div class="line">    for (NSInteger i = 0; i &lt; methodCount; i++) &#123;</div><div class="line">        Method method = methodList[i];</div><div class="line">        NSString *methodName = [NSString stringWithCString:sel_getName(method_getName(method))</div><div class="line">                                        encoding:NSUTF8StringEncoding];</div><div class="line">        if ([@&quot;printName&quot; isEqualToString:methodName]) &#123;</div><div class="line">            lastImp = method_getImplementation(method);</div><div class="line">            lastSel = method_getName(method);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    typedef void (*fn)(id,SEL);</div><div class="line"></div><div class="line">    if (lastImp != NULL) &#123;</div><div class="line">        fn f = (fn)lastImp;</div><div class="line">        f(my,lastSel);</div><div class="line">    &#125;</div><div class="line">    free(methodList);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="7ã€æ›´ä¸Šä¸€å±‚-categoryå’Œå…³è”å¯¹è±¡"><a href="#7ã€æ›´ä¸Šä¸€å±‚-categoryå’Œå…³è”å¯¹è±¡" class="headerlink" title="7ã€æ›´ä¸Šä¸€å±‚-categoryå’Œå…³è”å¯¹è±¡"></a>7ã€æ›´ä¸Šä¸€å±‚-categoryå’Œå…³è”å¯¹è±¡</h2><p>å¦‚ä¸Šæ‰€è§ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨categoryé‡Œé¢æ˜¯æ— æ³•ä¸ºcategoryæ·»åŠ å®ä¾‹å˜é‡çš„ã€‚ä½†æ˜¯æˆ‘ä»¬å¾ˆå¤šæ—¶å€™éœ€è¦åœ¨categoryä¸­æ·»åŠ å’Œå¯¹è±¡å…³è”çš„å€¼ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥æ±‚åŠ©å…³è”å¯¹è±¡æ¥å®ç°ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">MyClass+Category1.h:</div><div class="line"></div><div class="line"></div><div class="line">#import &quot;MyClass.h&quot;</div><div class="line"></div><div class="line">@interface MyClass (Category1)</div><div class="line"></div><div class="line">@property(nonatomic,copy) NSString *name;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">MyClass+Category1.m:</div><div class="line"></div><div class="line"></div><div class="line">#import &quot;MyClass+Category1.h&quot;</div><div class="line">#import &lt;objc/runtime.h&gt;</div><div class="line"></div><div class="line">@implementation MyClass (Category1)</div><div class="line"></div><div class="line">+ (void)load</div><div class="line">&#123;</div><div class="line">    NSLog(@&quot;%@&quot;,@&quot;load in Category1&quot;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)setName:(NSString *)name</div><div class="line">&#123;</div><div class="line">    objc_setAssociatedObject(self,</div><div class="line">                            &quot;name&quot;,</div><div class="line">                            name,</div><div class="line">                            OBJC_ASSOCIATION_COPY);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (NSString*)name</div><div class="line">&#123;</div><div class="line">    NSString *nameObject = objc_getAssociatedObject(self, &quot;name&quot;);</div><div class="line">    return nameObject;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure></p>
<p>ä½†æ˜¯å…³è”å¯¹è±¡åˆæ˜¯å­˜åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿ å¦‚ä½•å­˜å‚¨ï¼Ÿ å¯¹è±¡é”€æ¯æ—¶å€™å¦‚ä½•å¤„ç†å…³è”å¯¹è±¡å‘¢ï¼Ÿ<br>æˆ‘ä»¬å»ç¿»ä¸€ä¸‹runtimeçš„æºç ï¼Œåœ¨objc-references.mmæ–‡ä»¶ä¸­æœ‰ä¸ªæ–¹æ³•_object_set_associative_referenceï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">void _object_set_associative_reference(id object, void *key, id value, uintptr_t policy) &#123;</div><div class="line">    // retain the new value (if any) outside the lock.</div><div class="line">    ObjcAssociation old_association(0, nil);</div><div class="line">    id new_value = value ? acquireValue(value, policy) : nil;</div><div class="line">    &#123;</div><div class="line">        AssociationsManager manager;</div><div class="line">        AssociationsHashMap &amp;associations(manager.associations());</div><div class="line">        disguised_ptr_t disguised_object = DISGUISE(object);</div><div class="line">        if (new_value) &#123;</div><div class="line">            // break any existing association.</div><div class="line">            AssociationsHashMap::iterator i = associations.find(disguised_object);</div><div class="line">            if (i != associations.end()) &#123;</div><div class="line">                // secondary table exists</div><div class="line">                ObjectAssociationMap *refs = i-&gt;second;</div><div class="line">                ObjectAssociationMap::iterator j = refs-&gt;find(key);</div><div class="line">                if (j != refs-&gt;end()) &#123;</div><div class="line">                    old_association = j-&gt;second;</div><div class="line">                    j-&gt;second = ObjcAssociation(policy, new_value);</div><div class="line">                &#125; else &#123;</div><div class="line">                    (*refs)[key] = ObjcAssociation(policy, new_value);</div><div class="line">                &#125;</div><div class="line">            &#125; else &#123;</div><div class="line">                // create the new association (first time).</div><div class="line">                ObjectAssociationMap *refs = new ObjectAssociationMap;</div><div class="line">                associations[disguised_object] = refs;</div><div class="line">                (*refs)[key] = ObjcAssociation(policy, new_value);</div><div class="line">                _class_setInstancesHaveAssociatedObjects(_object_getClass(object));</div><div class="line">            &#125;</div><div class="line">        &#125; else &#123;</div><div class="line">            // setting the association to nil breaks the association.</div><div class="line">            AssociationsHashMap::iterator i = associations.find(disguised_object);</div><div class="line">            if (i !=  associations.end()) &#123;</div><div class="line">                ObjectAssociationMap *refs = i-&gt;second;</div><div class="line">                ObjectAssociationMap::iterator j = refs-&gt;find(key);</div><div class="line">                if (j != refs-&gt;end()) &#123;</div><div class="line">                    old_association = j-&gt;second;</div><div class="line">                    refs-&gt;erase(j);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    // release the old value (outside of the lock).</div><div class="line">    if (old_association.hasValue()) ReleaseValue()(old_association);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„å…³è”å¯¹è±¡éƒ½ç”±AssociationsManagerç®¡ç†ï¼Œè€ŒAssociationsManagerå®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">class AssociationsManager &#123;</div><div class="line">    static OSSpinLock _lock;</div><div class="line">    static AssociationsHashMap *_map;              // associative references:  object pointer -&gt; PtrPtrHashMap.</div><div class="line">public:</div><div class="line">    AssociationsManager()  &#123; OSSpinLockLock(&amp;_lock); &#125;</div><div class="line">    ~AssociationsManager()  &#123; OSSpinLockUnlock(&amp;_lock); &#125;</div><div class="line"></div><div class="line">    AssociationsHashMap &amp;associations() &#123;</div><div class="line">        if (_map == NULL)</div><div class="line">            _map = new AssociationsHashMap();</div><div class="line">        return *_map;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>AssociationsManageré‡Œé¢æ˜¯ç”±ä¸€ä¸ªé™æ€AssociationsHashMapæ¥å­˜å‚¨æ‰€æœ‰çš„å…³è”å¯¹è±¡çš„ã€‚è¿™ç›¸å½“äºæŠŠæ‰€æœ‰å¯¹è±¡çš„å…³è”å¯¹è±¡éƒ½å­˜åœ¨ä¸€ä¸ªå…¨å±€mapé‡Œé¢ã€‚è€Œmapçš„çš„keyæ˜¯è¿™ä¸ªå¯¹è±¡çš„æŒ‡é’ˆåœ°å€ï¼ˆä»»æ„ä¸¤ä¸ªä¸åŒå¯¹è±¡çš„æŒ‡é’ˆåœ°å€ä¸€å®šæ˜¯ä¸åŒçš„ï¼‰ï¼Œè€Œè¿™ä¸ªmapçš„valueåˆæ˜¯å¦å¤–ä¸€ä¸ªAssociationsHashMapï¼Œé‡Œé¢ä¿å­˜äº†å…³è”å¯¹è±¡çš„kvå¯¹ã€‚<br>è€Œåœ¨å¯¹è±¡çš„é”€æ¯é€»è¾‘é‡Œé¢ï¼Œè§objc-runtime-new.mm:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">void *objc_destructInstance(id obj)</div><div class="line">&#123;</div><div class="line">    if (obj) &#123;</div><div class="line">        Class isa_gen = _object_getClass(obj);</div><div class="line">        class_t *isa = newcls(isa_gen);</div><div class="line"></div><div class="line">        // Read all of the flags at once for performance.</div><div class="line">        bool cxx = hasCxxStructors(isa);</div><div class="line">        bool assoc = !UseGC &amp;&amp; _class_instancesHaveAssociatedObjects(isa_gen);</div><div class="line"></div><div class="line">        // This order is important.</div><div class="line">        if (cxx) object_cxxDestruct(obj);</div><div class="line">        if (assoc) _object_remove_assocations(obj);</div><div class="line"></div><div class="line">        if (!UseGC) objc_clear_deallocating(obj);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return obj;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å—¯ï¼Œruntimeçš„é”€æ¯å¯¹è±¡å‡½æ•°objc_destructInstanceé‡Œé¢ä¼šåˆ¤æ–­è¿™ä¸ªå¯¹è±¡æœ‰æ²¡æœ‰å…³è”å¯¹è±¡ï¼Œå¦‚æœæœ‰ï¼Œä¼šè°ƒç”¨_object_remove_assocationsåšå…³è”å¯¹è±¡çš„æ¸…ç†å·¥ä½œã€‚</p>
<p>åè®°</p>
<p>æ­£å¦‚ä¾¯æ·å…ˆç”Ÿæ‰€è®²-â€œæºç é¢å‰ï¼Œäº†æ— ç§˜å¯†â€ï¼ŒAppleçš„Cocoa Touchæ¡†æ¶è™½ç„¶å¹¶ä¸å¼€æºï¼Œä½†æ˜¯Objective-Cçš„runtimeå’ŒCore Foundationå´æ˜¯å®Œå…¨å¼€æ”¾æºç çš„(åœ¨<a href="http://www.opensource.apple.com/tarballs/å¯ä»¥ä¸‹è½½åˆ°å…¨éƒ¨çš„å¼€æºä»£ç )ã€‚" target="_blank" rel="external">http://www.opensource.apple.com/tarballs/å¯ä»¥ä¸‹è½½åˆ°å…¨éƒ¨çš„å¼€æºä»£ç )ã€‚</a><br>æœ¬ç³»åˆ—runtimeæºç å­¦ä¹ å°†ä¼šæŒç»­æ›´æ–°ï¼Œæ„çŠ¹æœªå°½çš„åŒå­¦å¯ä»¥è‡ªè¡Œåˆ°ä¸Šè¿°ç½‘ç«™ä¸‹è½½æºç å­¦ä¹ ã€‚è¡Œç¬”ç®€é™‹ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæœ›æŒ‡æ­£ã€‚</p>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSçŸ¥è¯†åœ°å›¾]]></title>
      <url>/2015/09/25/2015/iOS%E7%9F%A5%E8%AF%86%E5%9C%B0%E5%9B%BE/</url>
      <content type="html"><![CDATA[<p>ä¸»è¦ç½—åˆ—iOSå¼€å‘ä¸­æ¶‰åŠåˆ°çš„åŸºç¡€çŸ¥è¯†ç‚¹ä»¥åŠæ¶æ„å’ŒåŸºç¡€çš„ä¸€äº›æ–¹é¢</p>
<ul>
<li>åŸºç¡€</li>
<li>éœ€æ±‚</li>
<li>è´¨é‡</li>
<li>æ•ˆç‡</li>
</ul>
<a id="more"></a>
<h3 id="01-UIè§†å›¾-åŸºç¡€"><a href="#01-UIè§†å›¾-åŸºç¡€" class="headerlink" title="01 UIè§†å›¾(åŸºç¡€)"></a>01 UIè§†å›¾(åŸºç¡€)</h3><ul>
<li><a href="https://www.jianshu.com/p/2e074db792ba" target="_blank" rel="external">äº‹ä»¶ä¼ é€’æœºåˆ¶</a> </li>
<li><a href="http://hanson647.com/2017/08/26/iOSä¸­çš„è§†å›¾æ¸²æŸ“/" target="_blank" rel="external">UIç»˜åˆ¶åŸç†</a></li>
<li><a href="http://hanson647.com/2015/07/01/æ±‡æ€»/" target="_blank" rel="external">UIç»˜åˆ¶åŸç†2</a></li>
<li>å¼‚æ­¥ç»˜åˆ¶åŸç†</li>
<li>æµå¼é¡µé¢çš„æ€§èƒ½ä¼˜åŒ–</li>
<li>ç¦»å±æ¸²æŸ“</li>
<li>UIImageViewçš„å®Œæˆç»˜åˆ¶è¿‡ç¨‹</li>
<li>UILabelå®Œæ•´ç»˜åˆ¶è¿‡ç¨‹</li>
</ul>
<h4 id="äº‹ä»¶ä¼ é€’"><a href="#äº‹ä»¶ä¼ é€’" class="headerlink" title="äº‹ä»¶ä¼ é€’"></a>äº‹ä»¶ä¼ é€’</h4><p>1.å¦‚ä½•æ›´æ”¹å“åº”å¯¹è±¡</p>
<p>2.æœ€é‡è¦çš„ä¸¤ä¸ªå‡½æ•°</p>
<p>3.ä¼ é€’é“¾å’Œå“åº”é“¾</p>
<p>4.ä¸€ä¸ªäº‹ä»¶å¤šæ¬¡å“åº”</p>
<h4 id="UIç»˜åˆ¶åŸç†"><a href="#UIç»˜åˆ¶åŸç†" class="headerlink" title="UIç»˜åˆ¶åŸç†"></a>UIç»˜åˆ¶åŸç†</h4><ul>
<li>å¡é¡¿çš„æœ¬è´¨</li>
<li>ç»˜åˆ¶çš„æ—¶å€™cpuå’Œgpuæ€ä¹ˆåˆ†å·¥</li>
<li>ç»˜åˆ¶ä¼˜åŒ–ç‚¹</li>
</ul>
<h3 id="02-OCè¯­è¨€-åŸºç¡€"><a href="#02-OCè¯­è¨€-åŸºç¡€" class="headerlink" title="02 OCè¯­è¨€(åŸºç¡€)"></a>02 OCè¯­è¨€(åŸºç¡€)</h3><ul>
<li><a href="https://zhangbuhuai.com/understanding-kvo/" target="_blank" rel="external">KVOï¼Œobserver</a></li>
<li><a href="http://www.cocoachina.com/ios/20180411/22975.html" target="_blank" rel="external">KVCï¼Œset value for key</a></li>
<li><a href="https://www.jianshu.com/p/c9a5fe906457" target="_blank" rel="external">kvc vs kvo</a></li>
<li><a href="http://hanson647.com/2015/12/15/2015/categoryå†…éƒ¨å®ç°åŸç†/" target="_blank" rel="external">åˆ†ç±»</a></li>
<li><a href="">åˆ†ç±»ä¸æ‹“å±•åŒºåˆ«</a></li>
<li><a href="http://hanson647.com/2016/03/18/2016/è½¬-delegate-KVO-Notificationé€‰æ‹©/" target="_blank" rel="external">kvo/delegate/notificationé€‰æ‹©</a></li>
<li>å…³è”å¯¹è±¡</li>
<li><a href="https://blog.csdn.net/lzhgxiaoxiong/article/details/47954687" target="_blank" rel="external">copy/strong/weak</a></li>
<li>property</li>
<li>é€šçŸ¥(åŒæ­¥æ‰§è¡Œè¿˜æ˜¯å¼‚æ­¥ï¼Ÿ)</li>
</ul>
<h3 id="03-Runtime-åŸºç¡€"><a href="#03-Runtime-åŸºç¡€" class="headerlink" title="03 Runtime(åŸºç¡€)"></a>03 Runtime(åŸºç¡€)</h3><p><a href="http://hanson647.com/2015/08/10/2015/runtimeæ¦‚è¿°/" target="_blank" rel="external">runtimeæ¦‚è¿°</a></p>
<ul>
<li>å¯¹è±¡ã€ç±»å¯¹è±¡ã€å…ƒç±»å¯¹è±¡</li>
<li>æ¶ˆæ¯ä¼ é€’æœºåˆ¶</li>
<li>æ¶ˆæ¯è½¬å‘æµç¨‹</li>
<li>Method-Swizzling</li>
<li>å¯¹è±¡ã€ç±»å¯¹è±¡ã€åŸç±»å¯¹è±¡çš„ç†è§£ã€æ¶ˆæ¯ä¼ é€’æœºåˆ¶ã€æ¶ˆæ¯è½¬å‘æµç¨‹ã€Method-Swizzlingã€ISA-swizzlingã€åŠ¨æ€æ–¹æ³•è§£æã€åŠ¨æ€æ·»åŠ æ–¹æ³•</li>
<li>ä¸€ä¸ªç¨‹åºå¯åŠ¨ä¹‹åï¼Œç±»å¯¹è±¡å’Œæ–¹æ³•æ˜¯å¦‚ä½•å­˜åœ¨çš„ï¼Ÿ</li>
</ul>
<h3 id="04-å†…å­˜-åŸºç¡€"><a href="#04-å†…å­˜-åŸºç¡€" class="headerlink" title="04 å†…å­˜(åŸºç¡€)"></a>04 å†…å­˜(åŸºç¡€)</h3><ul>
<li>å¼•ç”¨è®¡æ•°è¡¨</li>
<li>å¼±å¼•ç”¨è¡¨</li>
<li>ARCã€MRC</li>
<li>å¾ªç¯å¼•ç”¨</li>
<li>å†…å­˜ç®¡ç†</li>
<li>ä¸ºä»€ä¹ˆç”¨copyï¼Œå“ªäº›æƒ…å†µä¸‹ç”¨copyï¼Œä¸ºä»€ä¹ˆç”¨copy?</li>
<li>NSTimerçš„å¼•ç”¨é‡Šæ”¾(runloopå¼•ç”¨timerï¼Œtimerå¼•ç”¨selfï¼Œå¯¼è‡´ä¸èƒ½é‡Šæ”¾)</li>
</ul>
<h3 id="05-Block-åŸºç¡€"><a href="#05-Block-åŸºç¡€" class="headerlink" title="05 Block(åŸºç¡€)"></a>05 Block(åŸºç¡€)</h3><ul>
<li>Blockæœ¬è´¨</li>
<li>æˆªè·å˜é‡ç‰¹æ€§</li>
<li>å†…å­˜ç®¡ç†</li>
<li>å¾ªç¯å¼•ç”¨</li>
</ul>
<h3 id="06-å¤šçº¿ç¨‹-åŸºç¡€"><a href="#06-å¤šçº¿ç¨‹-åŸºç¡€" class="headerlink" title="06 å¤šçº¿ç¨‹(åŸºç¡€)"></a>06 å¤šçº¿ç¨‹(åŸºç¡€)</h3><ul>
<li>GCDã€nsoperation</li>
<li>èµ„æºå…±äº«</li>
<li>çº¿ç¨‹åŒæ­¥</li>
<li>SpinLockç­‰</li>
<li>atomicå’Œçº¿ç¨‹å®‰å…¨</li>
<li>ä½ æ€æ ·å®ç°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿè¿™äº›çº¿ç¨‹å®‰å…¨çš„åŠæ³•å’Œatomicæœ‰ä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿatomicçš„å®ç°æœºåˆ¶æ˜¯æ€æ ·</li>
</ul>
<h3 id="07-RunLoop-åŸºç¡€"><a href="#07-RunLoop-åŸºç¡€" class="headerlink" title="07 RunLoop(åŸºç¡€)"></a>07 RunLoop(åŸºç¡€)</h3><ul>
<li>äº‹ä»¶å¾ªç¯</li>
<li>ç”¨æˆ·æ€</li>
<li>æ ¸å¿ƒæ€</li>
<li>å¸¸é©»çº¿ç¨‹</li>
</ul>
<h3 id="08-ç½‘ç»œ-åŸºç¡€"><a href="#08-ç½‘ç»œ-åŸºç¡€" class="headerlink" title="08 ç½‘ç»œ(åŸºç¡€)"></a>08 ç½‘ç»œ(åŸºç¡€)</h3><ul>
<li>HTTPS</li>
<li>å¯¹ç§°åŠ å¯†ç®—æ³•</li>
<li>éå¯¹ç§°åŠ å¯†</li>
<li>DNSè§£æ</li>
<li>HTTPã€TCP</li>
<li>ASI</li>
<li>AFN</li>
<li>æœ‰å¬è¿‡HTTPDNSå—ï¼Ÿ</li>
<li>æœ‰å“ªäº›æ–¹æ³•èƒ½åŠ å¿«ç½‘ç»œè¿æ¥é€Ÿåº¦</li>
<li>å¦‚ä½•ç»´æŒé•¿é“¾æ¥</li>
<li>å¦‚ä½•å‘é€å¿ƒè·³åŒ…</li>
<li>ç”¨æˆ·äº§ç”Ÿä¸€ä¸ªä¸‹æ‹‰åˆ·æ–°åŠ¨ä½œï¼Œè¯·è¯¦ç»†æè¿°ç½‘ç»œå¦‚ä½•ä¼ è¾“</li>
<li>ç®€è¿°tcpè¿æ¥æ—¶çš„æ¡æ‰‹è¿‡ç¨‹ï¼Œä¸è¦ç¬¬ä¸‰æ¬¡æ¡æ‰‹è¡Œä¸è¡Œï¼Ÿ</li>
</ul>
<h3 id="09-è®¾è®¡æ¨¡å¼-åŸºç¡€"><a href="#09-è®¾è®¡æ¨¡å¼-åŸºç¡€" class="headerlink" title="09 è®¾è®¡æ¨¡å¼(åŸºç¡€)"></a>09 è®¾è®¡æ¨¡å¼(åŸºç¡€)</h3><ul>
<li>æ¡¥æ¥ã€é€‚é…å™¨ã€å‘½ä»¤</li>
<li>è´£ä»»é“¾ã€å•ä¾‹</li>
<li>å…­å¤§è®¾è®¡åŸåˆ™</li>
</ul>
<h3 id="10-æ¶æ„-æ¡†æ¶-æ•ˆç‡"><a href="#10-æ¶æ„-æ¡†æ¶-æ•ˆç‡" class="headerlink" title="10 æ¶æ„/æ¡†æ¶(æ•ˆç‡)"></a>10 æ¶æ„/æ¡†æ¶(æ•ˆç‡)</h3><ul>
<li>MVVMã€æ—¶é•¿ç»Ÿè®¡æ¡†æ¶</li>
<li>å›¾ç‰‡ç¼“å­˜æ¡†æ¶</li>
<li>PVé‡çº§10äº¿çº§ä¸šåŠ¡æ¶æ„</li>
<li>CocoaPods</li>
</ul>
<h3 id="ç¼–è¯‘åŸç†"><a href="#ç¼–è¯‘åŸç†" class="headerlink" title="ç¼–è¯‘åŸç†"></a>ç¼–è¯‘åŸç†</h3><ul>
<li>å®</li>
<li>ç¼–è¯‘è¿‡ç¨‹</li>
<li>clang</li>
</ul>
<h3 id="ä¼˜åŒ–ç†è®ºä¸å®è·µ-è´¨é‡"><a href="#ä¼˜åŒ–ç†è®ºä¸å®è·µ-è´¨é‡" class="headerlink" title="ä¼˜åŒ–ç†è®ºä¸å®è·µ(è´¨é‡)"></a>ä¼˜åŒ–ç†è®ºä¸å®è·µ(è´¨é‡)</h3><p><a href="https://blog.ibireme.com/2015/11/12/smooth_user_interfaces_for_ios/" target="_blank" rel="external">YYKitç»ˆæä¼˜åŒ–</a></p>
<ul>
<li>å¯åŠ¨æ—¶é•¿ä¼˜åŒ–</li>
<li>å¡é¡¿ä¼˜åŒ–</li>
<li>cpuå ç”¨</li>
<li>å†…å­˜å ç”¨</li>
<li>UIä¸»çº¿ç¨‹</li>
<li>ç”µé‡</li>
<li>å›¾ç‰‡</li>
<li>ç˜¦èº«</li>
</ul>
<h3 id="æ•ˆç‡æå‡-æ•ˆç‡"><a href="#æ•ˆç‡æå‡-æ•ˆç‡" class="headerlink" title="æ•ˆç‡æå‡(æ•ˆç‡)"></a>æ•ˆç‡æå‡(æ•ˆç‡)</h3><ul>
<li>ä»£ç å—</li>
<li>åŠŸèƒ½æ¨¡ç‰ˆ</li>
<li>è‡ªåŠ¨ä»£ç </li>
<li>jsonè½¬model</li>
<li>è·¨å¹³å°</li>
</ul>
<h3 id="ç ”å‘è´¨é‡ç®¡ç†-è´¨é‡"><a href="#ç ”å‘è´¨é‡ç®¡ç†-è´¨é‡" class="headerlink" title="ç ”å‘è´¨é‡ç®¡ç†(è´¨é‡)"></a>ç ”å‘è´¨é‡ç®¡ç†(è´¨é‡)</h3><ul>
<li>codereview</li>
<li>clangäºŒæ¬¡å¼€å‘(ç¼–è¯‘å™¨è­¦å‘Š)</li>
<li>oclint</li>
<li>infer</li>
<li>git commit(å¢é‡æ£€æµ‹)</li>
<li>å†—ä½™ä»£ç </li>
<li>é‡å¤ä»£ç </li>
<li>é‡å¤å›¾ç‰‡æ£€æµ‹</li>
<li>ipaåŒ…å¤§å°å’Œæ¨¡å—å¤§å°æ£€æµ‹</li>
</ul>
<h3 id="ç›‘æ§ç†è®ºå’Œå®è·µ-è´¨é‡"><a href="#ç›‘æ§ç†è®ºå’Œå®è·µ-è´¨é‡" class="headerlink" title="ç›‘æ§ç†è®ºå’Œå®è·µ(è´¨é‡)"></a>ç›‘æ§ç†è®ºå’Œå®è·µ(è´¨é‡)</h3><ul>
<li>crash</li>
<li>ç½‘ç»œ</li>
<li>æµé‡</li>
<li>æ€§èƒ½</li>
<li>è¡Œä¸º</li>
<li>æˆªå›¾è¡Œä¸ºåº”ç”¨</li>
</ul>
<h3 id="çƒ­ä¿®å¤ç†è®ºä¸å®è·µ"><a href="#çƒ­ä¿®å¤ç†è®ºä¸å®è·µ" class="headerlink" title="çƒ­ä¿®å¤ç†è®ºä¸å®è·µ"></a>çƒ­ä¿®å¤ç†è®ºä¸å®è·µ</h3><ul>
<li>JSPatch</li>
<li>Luaï¼Ÿ</li>
</ul>
<h3 id="å‘åŒ…ä¸ç°åº¦-æ•ˆç‡"><a href="#å‘åŒ…ä¸ç°åº¦-æ•ˆç‡" class="headerlink" title="å‘åŒ…ä¸ç°åº¦(æ•ˆç‡)"></a>å‘åŒ…ä¸ç°åº¦(æ•ˆç‡)</h3><ul>
<li>testflightç°åº¦çš„åº”ç”¨</li>
<li>CIçš„ä¼˜åŒ–(è‡ªåŠ¨å‘åŒ…)</li>
</ul>
<h3 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h3><ul>
<li>å­—ç¬¦ä¸²åè½¬</li>
<li>å¥å­åè½¬</li>
<li><a href="http://developer.51cto.com/art/201403/430986.htm" target="_blank" rel="external">å¿«é€Ÿæ’åº</a></li>
<li>å•é“¾è¡¨åè½¬</li>
<li>æœ‰åºæ•°ç»„å½’å¹¶</li>
<li>æ— åºæ•°ç»„æ‰¾ä¸­ä½æ•°(å¿«æ’)</li>
</ul>
<h3 id="12-ç¬¬ä¸‰æ–¹"><a href="#12-ç¬¬ä¸‰æ–¹" class="headerlink" title="12 ç¬¬ä¸‰æ–¹"></a>12 ç¬¬ä¸‰æ–¹</h3><ul>
<li>AFNetworking </li>
<li>ReactCocoaå“åº”å¼ç¼–ç¨‹åº“</li>
</ul>
]]></content>
      
        
    </entry>
    
    <entry>
      <title><![CDATA[runtimeæ¦‚è¿°]]></title>
      <url>/2015/08/10/2015/runtime%E6%A6%82%E8%BF%B0/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<h2 id="runtimeæ¦‚è¿°"><a href="#runtimeæ¦‚è¿°" class="headerlink" title="runtimeæ¦‚è¿°"></a>runtimeæ¦‚è¿°</h2><blockquote>
<p><strong>ä»€ä¹ˆæ˜¯runtime?</strong><br>runtimeç›´è¯‘å°±æ˜¯è¿è¡Œæ—¶é—´,run(è·‘,è¿è¡Œ) time(æ—¶é—´),ç½‘ä¸Šå¤§å®¶éƒ½å«å®ƒè¿è¡Œæ—¶,å®ƒæ˜¯ä¸€å¥—æ¯”è¾ƒåº•å±‚çš„çº¯Cè¯­è¨€API,å±äºä¸€ä¸ªCè¯­è¨€åº“,åŒ…å«äº†å¾ˆå¤šåº•å±‚çš„Cè¯­è¨€API,å®ƒæ˜¯OCçš„å¹•åå·¥ä½œè€…,æˆ‘ä»¬å¹³æ—¶å†™çš„OCä»£ç ,åœ¨è¿è¡Œè¿‡ç¨‹æ—¶,éƒ½ä¼šè½¬ä¸ºruntimeçš„Cè¯­è¨€ä»£ç </p>
<h3 id="ç±»ä¸å¯¹è±¡"><a href="#ç±»ä¸å¯¹è±¡" class="headerlink" title="ç±»ä¸å¯¹è±¡"></a>ç±»ä¸å¯¹è±¡</h3><p>####Object<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">interface NSObject &lt;NSObject&gt; &#123;</div><div class="line">    Class isa  OBJC_ISA_AVAILABILITY;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="objc-method"><a href="#objc-method" class="headerlink" title="objc_method"></a>objc_method</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">typedef struct objc_ method &#123;</div><div class="line">    SEL method_name;</div><div class="line">    char *method_types;</div><div class="line">    IMP method_imp;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="objc-class"><a href="#objc-class" class="headerlink" title="objc_class"></a>objc_class</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">struct objc_class &#123;</div><div class="line">    Class isa;</div><div class="line"></div><div class="line">#if !__OBJC2__</div><div class="line">    Class super_class;                                        </div><div class="line">    const char *name;</div><div class="line">    long version;                          //ç±»çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œé»˜è®¤ä¸º0</div><div class="line">    long info;                             //ç±»ä¿¡æ¯ï¼Œä¾›è¿è¡ŒæœŸä½¿ç”¨çš„ä¸€äº›ä½æ ‡è¯†</div><div class="line">    long instance_size;                    //è¯¥ç±»çš„å®ä¾‹å˜é‡å¤§å°</div><div class="line">    struct objc_ivar_list *ivars;          //æˆå‘˜åˆ—è¡¨</div><div class="line">    struct objc_method_list **methodLists; //æ–¹æ³•åˆ—è¡¨</div><div class="line">    struct objc_cache *cache;              //æ–¹æ³•ç¼“å­˜</div><div class="line">    struct objc_protocol_list *protocols;  //åè®®é“¾è¡¨</div><div class="line">#endif</div><div class="line"></div><div class="line">&#125; OBJC2_UNAVAILABLE;</div></pre></td></tr></table></figure>
<h4 id="Method-amp-SEL-amp-IMP"><a href="#Method-amp-SEL-amp-IMP" class="headerlink" title="Method &amp; SEL &amp; IMP"></a>Method &amp; SEL &amp; IMP</h4><blockquote>
<ul>
<li>Method:<code>(typedef struct objc_method *Method)</code>åœ¨ç±»å®šä¹‰ä¸­è¡¨ç¤ºæ–¹æ³•çš„ç±»å‹ï¼Œç›¸å½“äºSELå’ŒIMPçš„æ˜ å°„</li>
<li>SEL(selector):<code>typedef struct objc_selector *SEL</code>æ–¹æ³•é€‰æ‹©å™¨ï¼Œç”¨äºåœ¨è¿è¡Œæ—¶ä¸­è¡¨ç¤ºä¸€ä¸ªæ–¹æ³•çš„åç§°ã€‚ä¸€ä¸ªæ–¹æ³•é€‰æ‹©å™¨æ˜¯ä¸€ä¸ªCå­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯åœ¨Objective-Cè¿è¡Œæ—¶è¢«æ³¨å†Œçš„ã€‚é€‰æ‹©å™¨ç”±ç¼–è¯‘å™¨ç”Ÿæˆï¼Œå¹¶ä¸”åœ¨ç±»è¢«åŠ è½½æ—¶ç”±è¿è¡Œæ—¶è‡ªåŠ¨åšæ˜ å°„æ“ä½œã€‚</li>
<li>IMP(implement):<code>typedef id (*IMP)(id, SEL, â€¦)</code>æ–¹æ³•çš„å®ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼ŒæŒ‡å‘æ–¹æ³•å®ç°å‡½æ•°çš„å¼€å§‹ä½ç½®ã€‚è¿™ä¸ªå‡½æ•°ä½¿ç”¨ä¸ºå½“å‰CPUæ¶æ„å®ç°çš„æ ‡å‡†Cè°ƒç”¨è§„èŒƒã€‚æ¯ä¸€ä¸ªå‚æ•°æ˜¯æŒ‡å‘å¯¹è±¡è‡ªèº«çš„æŒ‡é’ˆ(self)ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–¹æ³•é€‰æ‹©å™¨ã€‚ç„¶åæ˜¯æ–¹æ³•çš„å®é™…å‚æ•°ã€‚</li>
</ul>
</blockquote>
<hr>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼ŒSELæ˜¯ç”±æ–¹æ³•çš„åå­—ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²æ¥ç”Ÿæˆçš„(åŒ…å«å‚æ•°)ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸åŒçš„ç±»ä¸­çš„æ–¹æ³•ï¼Œåªè¦åå­—å’Œå‚æ•°ç›¸åŒï¼Œé‚£ä¹ˆå®ƒçš„SELä¹Ÿæ˜¯ç›¸åŒçš„ï¼ŒSELæœ¬è´¨æ˜¯ä¸€ä¸ªIntç±»å‹çš„ä¸€ä¸ªåœ°å€(ç”¨%pæ¥è¡¨ç¤º)ï¼Œåœ°å€ä¸­å­˜æ”¾ç€æ–¹æ³•çš„åå­—æ‰€æœ‰çš„SELå­˜å‚¨åœ¨ä¸€ä¸ªNSSetä¸­ï¼Œæ‰€ä»¥SELæ˜¯å”¯ä¸€çš„ï¼Œä»¥hashå®ç°æœç´¢å®šä½ï¼Œæ•ˆç‡é«˜äºNSArrayï¼Œåœ¨æ–¹æ³•çš„è°ƒç”¨çš„æ—¶å€™ï¼Œæ˜¯é€šè¿‡æ•°å­—çš„æŸ¥æ‰¾è€Œéå­—ç¬¦ä¸²çš„æŸ¥æ‰¾æ¥è¿›è¡Œæ–¹æ³•å®šä½çš„ï¼Œå½“æˆ‘å®šä¹‰ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œæœ‰å£°æ˜æˆ–è€…å®ç°ï¼Œéƒ½ä¼šæœ‰å¯¹åº”çš„SELä»¥åŠMethodå¯¹è±¡å­˜åœ¨ï¼Œä½†æ˜¯æ²¡æœ‰å®ç°æ˜¯IMPåˆ™ä¸ºç©ºï¼Œ<code>SEL selector = NSSelectorFromString(@&quot;run&quot;);</code>è¿™ä¸ªä»£ç æ°¸è¿œæ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯<code>IMP ipmSel = [FXViewController methodForSelector:selector];</code>å¦‚æœè¿™ä¸ªç±»æ²¡æœ‰è¿™ä¸ªå®ç°ï¼Œé‚£ä¹ˆæ˜¯ä¼šè¿”å›<code>(libobjc.A.dylib_objc_msgForward)</code>ã€‚<br>æ‰€ä»¥ç†è®ºä¸Šæ¥è®²iOSä¸å­˜åœ¨ç§æœ‰æ–¹æ³•ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œæ—¶æ¥è°ƒç”¨ä»»ä½•å­˜åœ¨çš„methodï¼Œåªä¸è¿‡è¿™ä¸ªæ–¹æ³•æ²¡æœ‰åœ¨.hæ–‡ä»¶è¿›è¡Œå£°æ˜çš„è¯ï¼Œåœ¨ç¼–è¯‘å±‚é¢ä¼šè¿›è¡Œä¸€äº›ç¦æ­¢è€Œå·²ï¼Œè¿™æ ·ä¹Ÿä¿éšœäº†è¿è¡Œçš„å®‰å…¨ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">SEL selector = NSSelectorFromString(@&quot;run&quot;);</div><div class="line">Class class = NSClassFromString(@&quot;FXViewController&quot;);</div><div class="line">if ([class respondsToSelector:selector]) &#123;</div><div class="line">    [class performSelector:selector withObject:nil];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<p>å½“æˆ‘ä»¬åœ¨ç±»ä¸­è¿›è¡Œæ–¹æ³•çš„å£°æ˜æˆ–è€…å®ç°çš„æ—¶å€™ï¼Œåº•å±‚ä¼šé»˜è®¤æ ¹æ®æ–¹æ³•åï¼Œæ¥æ³¨å†Œè¿™ä¸ªæ–¹æ³•ï¼Œç”Ÿæˆå¯¹åº”çš„SELå’ŒMethodï¼ŒSELä¼šç”±ä¸€ä¸ªNSSetæ¥åšä¸€ä¸ªç»Ÿä¸€çš„ç»´æŠ¤ï¼Œå¦å¤–Methodå¯¹è±¡ä¼šä¿å­˜åœ¨å¯¹åº”çš„ç±»çš„methodlistä¸­ï¼Œå½“æˆ‘ä»¬åœ¨æ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šå¿«é€Ÿçš„é€šè¿‡æ³¨å†Œæ–¹æ³•æ¥æ‹¿åˆ°SELï¼Œç„¶ååˆ°å¯¹åº”çš„ç±»çš„å®ç°ä¸­å»æ ¹æ®SELæŸ¥æ‰¾Methodï¼Œå¦‚æœMethodå­˜åœ¨åˆ™ç›´æ¥è·³è½¬åˆ°IMPå»è°ƒç”¨å…¶æŒ‡å‘çš„å‡½æ•°ã€‚å¦‚æœä¸€ä¸ªæ–¹æ³•åªæœ‰å£°æ˜æ²¡æœ‰å®ç°ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»ä¸­æ˜¯ä¸ä¼šæœ‰Methodå¯¹è±¡å­˜åœ¨çš„ï¼Œå¯ä»¥ç”¨<code>class_copyMethodList</code>è¿›è¡ŒéªŒè¯</p>
<p>è¿™å¼ å›¾åœ¨åŠ è½½ç±»çš„æ—¶å€™åˆ›å»ºï¼Œå½“å‘ç°æœ‰æ–¹æ³•å£°æ˜ï¼Œæˆ–è€…æ–¹æ³•å®ç°ï¼Œæˆ–è€…æ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œå°±ä¼šæŠŠå¯¹åº”çš„å­—ç¬¦ä¸²è¿›è¡Œä¸€ä¸ªæ³¨å†Œï¼Œå½¢æˆä¸Šè¾¹é‚£æ ·çš„ä¸€å¼ è¡¨ï¼Œè¿™å¼ è¡¨ä¸­çš„SELæ˜¯ç»è¿‡è¿ç®—å¾—åˆ°çš„ï¼Œè€Œä¸æ˜¯æŸ¥æ‰¾ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">SEL sel = NSSelectorFromString(@&quot;thename123&quot;);</div><div class="line">NSLog(@&quot;%d&quot;, sel);</div><div class="line">    </div><div class="line">NSLog(@&quot;%@&quot;, NSStringFromSelector(sel));</div><div class="line">    </div><div class="line">SEL sel1 = NSSelectorFromString(@&quot;thename123&quot;);</div><div class="line">NSLog(@&quot;%d&quot;, sel1);</div></pre></td></tr></table></figure>
<p>ç»“æœ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">xiancheng[69979:33043952] 41424</div><div class="line">xiancheng[69979:33043952] thename123</div><div class="line">xiancheng[69979:33043952] 41424</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªhashçš„è¿‡ç¨‹ï¼Œæ˜¯ç»è¿‡è¿ç®—å¾—åˆ°çš„ï¼Œè€Œä¸æ˜¯æŸ¥æ‰¾ã€‚ï¼Œä»ä¸€ä¸ªå­—ç¬¦ä¸²å¾—åˆ°ä¸€ä¸ªæ•°å­—ï¼Œç„¶åä»æ•°å­—å¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™æ ·å°±æ›´èƒ½ä¿è¯æ•ˆç‡äº†</p>
<h4 id="è¿è¡Œæ—¶æ–¹æ³•æ€»ç»“"><a href="#è¿è¡Œæ—¶æ–¹æ³•æ€»ç»“" class="headerlink" title="è¿è¡Œæ—¶æ–¹æ³•æ€»ç»“"></a>è¿è¡Œæ—¶æ–¹æ³•æ€»ç»“</h4><p><code>é€šè¿‡åå­—è·å–SELï¼Œé€šè¿‡SELå’ŒClassè·å–IMP</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// æ·»åŠ æ–¹æ³•</div><div class="line">BOOL class_addMethod ( Class cls, SEL name, IMP imp, const char *types );</div><div class="line">// è·å–å®ä¾‹æ–¹æ³•</div><div class="line">Method class_getInstanceMethod ( Class cls, SEL name );</div><div class="line">// è·å–ç±»æ–¹æ³•</div><div class="line">Method class_getClassMethod ( Class cls, SEL name );</div><div class="line">// è·å–æ‰€æœ‰å®ä¾‹æ–¹æ³•çš„æ•°ç»„ï¼Œä¸èƒ½è·å–ç±»æ–¹æ³•</div><div class="line">Method * class_copyMethodList ( Class cls, unsigned int *outCount );</div><div class="line">// æ›¿ä»£æ–¹æ³•çš„å®ç°ï¼Œå¦‚æœIMPä¸å­˜åœ¨åˆ™é»˜è®¤è°ƒç”¨class_addMethodæ–¹æ³•</div><div class="line">IMP class_replaceMethod ( Class cls, SEL name, IMP imp, const char *types );</div><div class="line">// è¿”å›æ–¹æ³•çš„å…·ä½“å®ç°</div><div class="line">IMP class_getMethodImplementation ( Class cls, SEL name );</div><div class="line">IMP class_getMethodImplementation_stret ( Class cls, SEL name );</div><div class="line">// ç±»å®ä¾‹æ˜¯å¦å“åº”æŒ‡å®šçš„selector</div><div class="line">BOOL class_respondsToSelector ( Class cls, SEL sel );</div></pre></td></tr></table></figure></p>
<h4 id="è·å–åˆ—è¡¨"><a href="#è·å–åˆ—è¡¨" class="headerlink" title="è·å–åˆ—è¡¨"></a>è·å–åˆ—è¡¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">unsigned int count;</div><div class="line">   //è·å–å±æ€§åˆ—è¡¨</div><div class="line">   objc_property_t *propertyList = class_copyPropertyList([self class], &amp;count);</div><div class="line">   for (unsigned int i=0; i&lt;count; i++) &#123;</div><div class="line">       const char *propertyName = property_getName(propertyList[i]);</div><div class="line">       NSLog(@&quot;property----&gt;%@&quot;, [NSString stringWithUTF8String:propertyName]);</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   //è·å–æ–¹æ³•åˆ—è¡¨</div><div class="line">   Method *methodList = class_copyMethodList([self class], &amp;count);</div><div class="line">   for (unsigned int i; i&lt;count; i++) &#123;</div><div class="line">       Method method = methodList[i];</div><div class="line">       NSLog(@&quot;method----&gt;%@&quot;, NSStringFromSelector(method_getName(method)));</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   //è·å–æˆå‘˜å˜é‡åˆ—è¡¨</div><div class="line">   Ivar *ivarList = class_copyIvarList([self class], &amp;count);</div><div class="line">   for (unsigned int i; i&lt;count; i++) &#123;</div><div class="line">       Ivar myIvar = ivarList[i];</div><div class="line">       const char *ivarName = ivar_getName(myIvar);</div><div class="line">       NSLog(@&quot;Ivar----&gt;%@&quot;, [NSString stringWithUTF8String:ivarName]);</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   //è·å–åè®®åˆ—è¡¨</div><div class="line">   __unsafe_unretained Protocol **protocolList = class_copyProtocolList([self class], &amp;count);</div><div class="line">   for (unsigned int i; i&lt;count; i++) &#123;</div><div class="line">       Protocol *myProtocal = protocolList[i];</div><div class="line">       const char *protocolName = protocol_getName(myProtocal);</div><div class="line">       NSLog(@&quot;protocol----&gt;%@&quot;, [NSString stringWithUTF8String:protocolName]);</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<h4 id="isaæŒ‡é’ˆ"><a href="#isaæŒ‡é’ˆ" class="headerlink" title="isaæŒ‡é’ˆ"></a>isaæŒ‡é’ˆ</h4><p><img src="/10/2015/runtimeæ¦‚è¿°/../../../images/20160425212717306.png" alt=""></p>
<h3 id="æ–¹æ³•çš„æ‰§è¡Œ"><a href="#æ–¹æ³•çš„æ‰§è¡Œ" class="headerlink" title="æ–¹æ³•çš„æ‰§è¡Œ"></a>æ–¹æ³•çš„æ‰§è¡Œ</h3><ul>
<li>è°ƒç”¨ç±»çš„allocæ–¹æ³•ï¼Œåˆ†é…å†…å­˜ï¼Œåˆå§‹åŒ–æˆå‘˜å˜é‡ï¼Œå…¶ä¸­isaæŒ‡é’ˆä¹Ÿä¼šè¢«åˆå§‹åŒ–ï¼Œè®©è¿™ä¸ªå¯¹è±¡æœ‰è®¿é—®å…¶ç±»çš„èƒ½åŠ›ï¼›</li>
<li>å½“æˆ‘ä»¬è°ƒç”¨æŸä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šå¯¹è¿™ä¸ªæ–¹æ³•è°ƒç”¨è¿›è¡Œè½¬æ¢</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//1.åˆ©ç”¨msgSendå‡½æ•°</div><div class="line">	[someone method];</div><div class="line">	[someone performSelector:@selector(method)];</div><div class="line">	----&gt;objc_msgSend(someone, @selector(method));</div><div class="line">//2.åˆ©ç”¨è½¬å‘å‡½æ•°</div><div class="line">	NSinvocation *invocation = [NSInvocation invocationWithMethodSignature:methodSignature];</div><div class="line">[invocation invoke];</div></pre></td></tr></table></figure>
<blockquote>
<p><code>objc_msgSend</code>çš„ä½œç”¨:</p>
<ul>
<li>å®ƒé¦–å…ˆæ‰¾åˆ° SEL å¯¹åº”çš„æ–¹æ³•å®ç° IMPã€‚å› ä¸ºä¸åŒçš„ç±»å¯¹åŒä¸€æ–¹æ³•å¯èƒ½ä¼šæœ‰ä¸åŒçš„å®ç°ï¼Œæ‰€ä»¥æ‰¾åˆ°çš„æ–¹æ³•å®ç°ä¾èµ–äºæ¶ˆæ¯æ¥æ”¶è€…çš„ç±»å‹</li>
<li>ç„¶åå°†æ¶ˆæ¯æ¥æ”¶è€…å¯¹è±¡(æŒ‡å‘æ¶ˆæ¯æ¥æ”¶è€…å¯¹è±¡çš„æŒ‡é’ˆ)ä»¥åŠæ–¹æ³•ä¸­æŒ‡å®šçš„å‚æ•°ä¼ é€’ç»™æ–¹æ³•å®ç° IMPã€‚</li>
<li>æœ€åï¼Œå°†æ–¹æ³•å®ç°çš„è¿”å›å€¼ä½œä¸ºè¯¥å‡½æ•°çš„è¿”å›å€¼è¿”å›ã€‚</li>
</ul>
</blockquote>
<h4 id="æ³¨æ„ï¼š"><a href="#æ³¨æ„ï¼š" class="headerlink" title="æ³¨æ„ï¼š"></a>æ³¨æ„ï¼š</h4><p>å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œé¦–å…ˆæ ¹æ®ç±»çš„infoæ¥åˆ†é…å†…å­˜ï¼Œç„¶ååˆå§‹åŒ–æˆå‘˜å˜é‡ï¼Œå…¶ä¸­isaæŒ‡é’ˆä¹Ÿä¼šè¢«åˆå§‹åŒ–ï¼Œè®©è¿™ä¸ªå¯¹è±¡æœ‰è®¿é—®å…¶ç±»çš„èƒ½åŠ›ï¼Œå½“æ¶ˆæ¯å‘é€ç»™ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œobjc_msgSendé€šè¿‡å¯¹è±¡çš„isaæŒ‡é’ˆè·å–åˆ°ç±»çš„ç»“æ„ä½“ï¼Œç„¶ååœ¨æ–¹æ³•åˆ†å‘è¡¨é‡Œé¢æŸ¥æ‰¾æ–¹æ³•çš„selectorã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°selectorï¼Œåˆ™é€šè¿‡objc_msgSendç»“æ„ä½“ä¸­çš„æŒ‡å‘çˆ¶ç±»çš„æŒ‡é’ˆæ‰¾åˆ°å…¶çˆ¶ç±»ï¼Œå¹¶åœ¨çˆ¶ç±»çš„åˆ†å‘è¡¨é‡Œé¢æŸ¥æ‰¾æ–¹æ³•çš„selectorã€‚ä¾æ­¤ï¼Œä¼šä¸€ç›´æ²¿ç€ç±»çš„ç»§æ‰¿ä½“ç³»åˆ°è¾¾NSObjectç±»ã€‚ä¸€æ—¦å®šä½åˆ°selectorï¼Œå‡½æ•°ä¼šå°±è·å–åˆ°äº†å®ç°çš„å…¥å£ç‚¹ï¼Œå¹¶ä¼ å…¥ç›¸åº”çš„å‚æ•°æ¥æ‰§è¡Œæ–¹æ³•çš„å…·ä½“å®ç°ã€‚å¦‚æœæœ€åæ²¡æœ‰å®šä½åˆ°selectorï¼Œåˆ™ä¼šèµ°æ¶ˆæ¯è½¬å‘æµç¨‹ã€‚<br>åŠ¨æ€ç»‘å®šä¸ºæˆ‘ä»¬å†™ä»£ç æä¾›äº†æ–¹ä¾¿ï¼Œå´å¸¦æ¥äº†æ€§èƒ½çš„æŸè€—ï¼Œå› ä¸ºå‡½æ•°çš„è°ƒç”¨é€šè¿‡åœ°å€å¯ä»¥ç›´æ¥ç¡®å®šï¼Œè€Œæ–¹æ³•éœ€è¦é€šè¿‡å‡½æ•°çš„æŸ¥æ‰¾ï¼Œä½†æ˜¯æ–¹æ³•çš„ç¼“å­˜ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 id="æ¶ˆæ¯è½¬å‘æœºåˆ¶"><a href="#æ¶ˆæ¯è½¬å‘æœºåˆ¶" class="headerlink" title="æ¶ˆæ¯è½¬å‘æœºåˆ¶"></a>æ¶ˆæ¯è½¬å‘æœºåˆ¶</h3><p>æ¶ˆæ¯è½¬å‘ç”¨åˆ°çš„æ–¹æ³•(æ¶ˆæ¯æ‹¦æˆªç”¨åˆ°çš„æ–¹æ³•)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">+ (BOOL)resolveClassMethod:(SEL)sel;</div><div class="line">+ (BOOL)resolveInstanceMethod:(SEL)sel;</div><div class="line">//åä¸¤ä¸ªæ–¹æ³•éœ€è¦è½¬å‘åˆ°å…¶ä»–çš„ç±»å¤„ç†</div><div class="line">- (id)forwardingTargetForSelector:(SEL)aSelector;</div><div class="line">- (void)forwardInvocation:(NSInvocation *)anInvocation;</div></pre></td></tr></table></figure>
<p><img src="/10/2015/runtimeæ¦‚è¿°/../../../images/QQ20141113.png" alt=""></p>
<p>æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æœ‰ä¸¤ç§å½¢å¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[object message];</div><div class="line"></div><div class="line">[object performSelector:@selector(method) withObject:nil];</div></pre></td></tr></table></figure></p>
<p>ç¬¬ä¸€ç§æˆ‘ä»¬å¯ä»¥ç¡®å®šå¯¹è±¡æ˜¯å¦èƒ½å¤Ÿå¤„ç†è¯¥æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰å£°æ˜ç¼–è¯‘å™¨ä¼šç›´æ¥æŠ¥é”™ï¼Œä¸è¿‡ä¹Ÿå­˜åœ¨æ²¡æœ‰æ–¹æ³•å®ç°çš„é£é™©ï¼Œç¬¬äºŒç§æ–¹å¼å°±ä¼šç›´æ¥ç¼–è¯‘é€šè¿‡ï¼Œè¿è¡Œå´©æºƒã€‚<br>è§„é¿çš„æ–¹æ³•æœ‰ä¸¤ç§</p>
<ul>
<li><p>ç¬¬ä¸€å°±æ˜¯åœ¨è°ƒç”¨æ–¹æ³•ä¹‹å‰åˆ¤æ–­æ˜¯å¦è¯¥æ–¹æ³•å®ç°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if ([self respondsToSelector:@selector(method)]) &#123;</div><div class="line">    [self performSelector:@selector(method)];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼šé€šè¿‡è¿™ä¸€æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥å‘Šè¯‰å¯¹è±¡å¦‚ä½•å¤„ç†æœªçŸ¥çš„æ¶ˆæ¯ã€‚</p>
<blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹è±¡æ¥æ”¶åˆ°æœªçŸ¥çš„æ¶ˆæ¯ï¼Œä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼Œé€šè¿‡æ§åˆ¶å°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»¥ä¸‹å¼‚å¸¸ä¿¡æ¯ï¼š</p>
</blockquote>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-[SUTRuntimeMethod method]: unrecognized selector sent to instance 0x100111940</div><div class="line"></div><div class="line">*** Terminating app due to uncaught exception &apos;NSInvalidArgumentException&apos;, reason: &apos;-[SUTRuntimeMethod method]: unrecognized selector sent to instance 0x100111940&apos;</div></pre></td></tr></table></figure>
<blockquote>
<p>è¿™æ®µå¼‚å¸¸ä¿¡æ¯å®é™…ä¸Šæ˜¯ç”±NSObjectçš„â€doesNotRecognizeSelectorâ€æ–¹æ³•æŠ›å‡ºçš„ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–ä¸€äº›æªæ–½ï¼Œè®©æˆ‘ä»¬çš„ç¨‹åºæ‰§è¡Œç‰¹å®šçš„é€»è¾‘ï¼Œè€Œé¿å…ç¨‹åºçš„å´©æºƒã€‚<br>æ¶ˆæ¯è½¬å‘æœºåˆ¶åŸºæœ¬ä¸Šåˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>åŠ¨æ€æ–¹æ³•è§£æ</li>
<li>å¤‡ç”¨æ¥æ”¶è€…</li>
<li>å®Œæ•´è½¬å‘</li>
</ul>
</blockquote>
<h4 id="åŠ¨æ€æ–¹æ³•è§£æ"><a href="#åŠ¨æ€æ–¹æ³•è§£æ" class="headerlink" title="åŠ¨æ€æ–¹æ³•è§£æ"></a>åŠ¨æ€æ–¹æ³•è§£æ</h4><p>å¯¹è±¡åœ¨æ¥æ”¶åˆ°æœªçŸ¥çš„æ¶ˆæ¯æ—¶ï¼Œé¦–å…ˆä¼šè°ƒç”¨æ‰€å±ç±»çš„ç±»æ–¹æ³•+resolveInstanceMethod:(å®ä¾‹æ–¹æ³•)æˆ–è€…+resolveClassMethod:(ç±»æ–¹æ³•)ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æœ‰æœºä¼šä¸ºè¯¥æœªçŸ¥æ¶ˆæ¯æ–°å¢ä¸€ä¸ªâ€å¤„ç†æ–¹æ³•â€â€œã€‚ä¸è¿‡ä½¿ç”¨è¯¥æ–¹æ³•çš„å‰ææ˜¯æˆ‘ä»¬å·²ç»å®ç°äº†è¯¥â€å¤„ç†æ–¹æ³•â€ï¼Œåªéœ€è¦åœ¨è¿è¡Œæ—¶é€šè¿‡class_addMethodå‡½æ•°åŠ¨æ€æ·»åŠ åˆ°ç±»é‡Œé¢å°±å¯ä»¥äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">void functionForMethod1(id self, SEL _cmd) &#123;</div><div class="line"></div><div class="line">   NSLog(@&quot;%@, %p&quot;, self, _cmd);</div><div class="line"></div><div class="line">&#125;</div><div class="line">+ (BOOL)resolveInstanceMethod:(SEL)sel &#123;</div><div class="line">    NSString *selectorString = NSStringFromSelector(sel);</div><div class="line">    if ([selectorString isEqualToString:@&quot;method1&quot;]) &#123;</div><div class="line">        class_addMethod(self.class, @selector(method1), (IMP)functionForMethod1, &quot;@:&quot;);</div><div class="line">    &#125;</div><div class="line">    return [super resolveInstanceMethod:sel];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸è¿‡è¿™ç§æ–¹æ¡ˆæ›´å¤šçš„æ˜¯ä¸ºäº†å®ç°@dynamicå±æ€§ã€‚</p>
<h4 id="å¤‡ç”¨æ¥æ”¶è€…"><a href="#å¤‡ç”¨æ¥æ”¶è€…" class="headerlink" title="å¤‡ç”¨æ¥æ”¶è€…"></a>å¤‡ç”¨æ¥æ”¶è€…</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (id)forwardingTargetForSelector:(SEL)aSelector</div></pre></td></tr></table></figure>
<p>å¦‚æœä¸€ä¸ªå¯¹è±¡å®ç°äº†è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶è¿”å›ä¸€ä¸ªénilçš„ç»“æœï¼Œåˆ™è¿™ä¸ªå¯¹è±¡ä¼šä½œä¸ºæ¶ˆæ¯çš„æ–°æ¥æ”¶è€…ï¼Œä¸”æ¶ˆæ¯ä¼šè¢«åˆ†å‘åˆ°è¿™ä¸ªå¯¹è±¡ã€‚å½“ç„¶è¿™ä¸ªå¯¹è±¡ä¸èƒ½æ˜¯selfè‡ªèº«ï¼Œå¦åˆ™å°±æ˜¯å‡ºç°æ— é™å¾ªç¯ã€‚å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šç›¸åº”çš„å¯¹è±¡æ¥å¤„ç†aSelectorï¼Œåˆ™åº”è¯¥è°ƒç”¨çˆ¶ç±»çš„å®ç°æ¥è¿”å›ç»“æœã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">interface SUTRuntimeMethodHelper : NSObject</div><div class="line">- (void)method2;</div><div class="line">end</div><div class="line">implementation SUTRuntimeMethodHelper</div><div class="line">- (void)method2 &#123;</div><div class="line">    NSLog(@&quot;%@, %p&quot;, self, _cmd);</div><div class="line">&#125;</div><div class="line">@(02-Foundation)end</div><div class="line">#pragma mark -</div><div class="line">@interface SUTRuntimeMethod () &#123;</div><div class="line">    SUTRuntimeMethodHelper *_helper;</div><div class="line">&#125;</div><div class="line">@end</div><div class="line">@implementation SUTRuntimeMethod</div><div class="line">+ (instancetype)object &#123;</div><div class="line">    return [[self alloc] init];</div><div class="line">&#125;</div><div class="line">- (instancetype)init &#123;</div><div class="line">    self = [super init];</div><div class="line">    if (self != nil) &#123;</div><div class="line">        _helper = [[SUTRuntimeMethodHelper alloc] init];</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line">- (void)test &#123;</div><div class="line">    [self performSelector:@selector(method2)];</div><div class="line">&#125;</div><div class="line">- (id)forwardingTargetForSelector:(SEL)aSelector &#123;</div><div class="line">    NSLog(@&quot;forwardingTargetForSelector&quot;);</div><div class="line">    NSString *selectorString = NSStringFromSelector(aSelector);</div><div class="line">    // å°†æ¶ˆæ¯è½¬å‘ç»™_helperæ¥å¤„ç†</div><div class="line">    if ([selectorString isEqualToString:@&quot;method2&quot;]) &#123;</div><div class="line">        return _helper;</div><div class="line">    &#125;</div><div class="line">    return [super forwardingTargetForSelector:aSelector];</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<h4 id="å®Œæ•´è½¬å‘"><a href="#å®Œæ•´è½¬å‘" class="headerlink" title="å®Œæ•´è½¬å‘"></a>å®Œæ•´è½¬å‘</h4><p>å¦‚æœåœ¨ä¸Šä¸€æ­¥è¿˜ä¸èƒ½å¤„ç†æœªçŸ¥æ¶ˆæ¯ï¼Œåˆ™å”¯ä¸€èƒ½åšçš„å°±æ˜¯å¯ç”¨å®Œæ•´çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶äº†ã€‚æ­¤æ—¶ä¼šè°ƒç”¨ä»¥ä¸‹æ–¹æ³•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (void)forwardInvocation:(NSInvocation *)anInvocation</div></pre></td></tr></table></figure></p>
<blockquote>
<p>å¯¹è±¡ä¼šåˆ›å»ºä¸€ä¸ªè¡¨ç¤ºæ¶ˆæ¯çš„NSInvocationå¯¹è±¡ï¼ŒæŠŠä¸å°šæœªå¤„ç†çš„æ¶ˆæ¯æœ‰å…³çš„å…¨éƒ¨ç»†èŠ‚éƒ½å°è£…åœ¨anInvocationä¸­ï¼ŒåŒ…æ‹¬selectorï¼Œç›®æ ‡(target)å’Œå‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥åœ¨forwardInvocationæ–¹æ³•ä¸­é€‰æ‹©å°†æ¶ˆæ¯è½¬å‘ç»™å…¶å®ƒå¯¹è±¡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector &#123;</div><div class="line">    NSMethodSignature *signature = [super methodSignatureForSelector:aSelector];</div><div class="line">    if (!signature) &#123;</div><div class="line">        if ([SUTRuntimeMethodHelper instancesRespondToSelector:aSelector]) &#123;</div><div class="line">            signature = [SUTRuntimeMethodHelper instanceMethodSignatureForSelector:aSelector];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return signature;</div><div class="line">&#125;</div><div class="line">- (void)forwardInvocation:(NSInvocation *)anInvocation &#123;</div><div class="line">    if ([SUTRuntimeMethodHelper instancesRespondToSelector:anInvocation.selector]) &#123;</div><div class="line">        [anInvocation invokeWithTarget:_helper];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>NSObjectçš„forwardInvocation:æ–¹æ³•å®ç°åªæ˜¯ç®€å•è°ƒç”¨äº†doesNotRecognizeSelector:æ–¹æ³•ï¼Œå®ƒä¸ä¼šè½¬å‘ä»»ä½•æ¶ˆæ¯ã€‚è¿™æ ·ï¼Œå¦‚æœä¸åœ¨ä»¥ä¸Šæ‰€è¿°çš„ä¸‰ä¸ªæ­¥éª¤ä¸­å¤„ç†æœªçŸ¥æ¶ˆæ¯ï¼Œåˆ™ä¼šå¼•å‘ä¸€ä¸ªå¼‚å¸¸ã€‚</p>
</blockquote>
<h3 id="åŠ¨æ€æ–¹æ³•æ·»åŠ "><a href="#åŠ¨æ€æ–¹æ³•æ·»åŠ " class="headerlink" title="åŠ¨æ€æ–¹æ³•æ·»åŠ "></a>åŠ¨æ€æ–¹æ³•æ·»åŠ </h3><p>é¦–å…ˆè°ƒç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„æ–¹æ³•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//éšå¼è°ƒç”¨æ–¹æ³•</div><div class="line">[target performSelector:@selector(resolveAdd:) withObject:@&quot;test&quot;];</div></pre></td></tr></table></figure></p>
<p>ç„¶åï¼Œåœ¨targetå¯¹è±¡å†…éƒ¨é‡å†™æ‹¦æˆªè°ƒç”¨çš„æ–¹æ³•ï¼ŒåŠ¨æ€æ·»åŠ æ–¹æ³•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">void runAddMethod(id self, SEL _cmd, NSString *string)&#123;</div><div class="line">    NSLog(@&quot;add C IMP &quot;, string);</div><div class="line">&#125;</div><div class="line">+ (BOOL)resolveInstanceMethod:(SEL)sel&#123;</div><div class="line"></div><div class="line">    //ç»™æœ¬ç±»åŠ¨æ€æ·»åŠ ä¸€ä¸ªæ–¹æ³•</div><div class="line">    if ([NSStringFromSelector(sel) isEqualToString:@&quot;resolveAdd:&quot;]) &#123;</div><div class="line">        class_addMethod(self, sel, (IMP)runAddMethod, &quot;v@:*&quot;);</div><div class="line">    &#125;</div><div class="line">    return YES;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>å…¶ä¸­class_addMethodçš„å››ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>Class cls ç»™å“ªä¸ªç±»æ·»åŠ æ–¹æ³•ï¼Œæœ¬ä¾‹ä¸­æ˜¯self</li>
<li>SEL name æ·»åŠ çš„æ–¹æ³•ï¼Œæœ¬ä¾‹ä¸­æ˜¯é‡å†™çš„æ‹¦æˆªè°ƒç”¨ä¼ è¿›æ¥çš„selectorã€‚</li>
<li>IMP imp æ–¹æ³•çš„å®ç°ï¼ŒCæ–¹æ³•çš„æ–¹æ³•å®ç°å¯ä»¥ç›´æ¥è·å¾—ã€‚å¦‚æœæ˜¯OCæ–¹æ³•ï¼Œå¯ä»¥ç”¨- + (IMP)instanceMethodForSelector:(SEL)aSelector;è·å¾—æ–¹æ³•çš„å®ç°ã€‚</li>
<li>â€œv@:*â€æ–¹æ³•çš„ç­¾åï¼Œä»£è¡¨æœ‰ä¸€ä¸ªå‚æ•°çš„æ–¹æ³•</li>
</ul>
</blockquote>
<p>###Method Swizzling<br>ä¸ºäº†swizzleä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ†å‘è¡¨ä¸­å°†ä¸€ä¸ªæ–¹æ³•çš„ç°æœ‰çš„é€‰æ‹©å™¨æ˜ å°„åˆ°ä¸åŒçš„å®ç°ï¼Œè€Œå°†è¯¥é€‰æ‹©å™¨å¯¹åº”çš„åŸå§‹å®ç°å…³è”åˆ°ä¸€ä¸ªæ–°çš„é€‰æ‹©å™¨ä¸­ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">#import &lt;objc/runtime.h&gt;</div><div class="line">@implementation UIViewController (Tracking)</div><div class="line">+ (void)load &#123;</div><div class="line">        static dispatch_once_t onceToken;</div><div class="line">    dispatch_once(&amp;onceToken, ^&#123;</div><div class="line">        Class class = [self class];         </div><div class="line">        // When swizzling a class method, use the following:</div><div class="line">                    // Class class = object_getClass((id)self);</div><div class="line">        SEL originalSelector = @selector(viewWillAppear:);</div><div class="line">                    SEL swizzledSelector = @selector(xxx_viewWillAppear:);</div><div class="line">        Method originalMethod = class_getInstanceMethod(class, originalSelector);</div><div class="line">                    Method swizzledMethod = class_getInstanceMethod(class, swizzledSelector);</div><div class="line">        BOOL didAddMethod =</div><div class="line">                        class_addMethod(class,</div><div class="line">                originalSelector,</div><div class="line">                method_getImplementation(swizzledMethod),</div><div class="line">                method_getTypeEncoding(swizzledMethod));</div><div class="line">        if (didAddMethod) &#123;</div><div class="line">                        class_replaceMethod(class,</div><div class="line">                swizzledSelector,</div><div class="line">                method_getImplementation(originalMethod),</div><div class="line">                method_getTypeEncoding(originalMethod));</div><div class="line">        &#125; else &#123;</div><div class="line">            method_exchangeImplementations(originalMethod, swizzledMethod);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">#pragma mark - Method Swizzling</div><div class="line">- (void)xxx_viewWillAppear:(BOOL)animated &#123;</div><div class="line">        [self xxx_viewWillAppear:animated];</div><div class="line">    NSLog(@&quot;viewWillAppear: %@&quot;, self);</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure></p>
<h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><ul>
<li><p>Swizzlingåº”è¯¥æ€»æ˜¯åœ¨+loadä¸­æ‰§è¡Œ</p>
<blockquote>
<p>åœ¨Objective-Cä¸­ï¼Œè¿è¡Œæ—¶ä¼šè‡ªåŠ¨è°ƒç”¨æ¯ä¸ªç±»çš„ä¸¤ä¸ªæ–¹æ³•ã€‚+loadä¼šåœ¨ç±»åˆå§‹åŠ è½½æ—¶è°ƒç”¨ï¼Œ+initializeä¼šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ç±»çš„ç±»æ–¹æ³•æˆ–å®ä¾‹æ–¹æ³•ä¹‹å‰è¢«è°ƒç”¨ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯å¯é€‰çš„ï¼Œä¸”åªæœ‰åœ¨å®ç°äº†å®ƒä»¬æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚ç”±äºmethod swizzlingä¼šå½±å“åˆ°ç±»çš„å…¨å±€çŠ¶æ€ï¼Œå› æ­¤è¦å°½é‡é¿å…åœ¨å¹¶å‘å¤„ç†ä¸­å‡ºç°ç«äº‰çš„æƒ…å†µã€‚+loadèƒ½ä¿è¯åœ¨ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹ä¸­è¢«åŠ è½½ï¼Œå¹¶ä¿è¯è¿™ç§æ”¹å˜åº”ç”¨çº§åˆ«çš„è¡Œä¸ºçš„ä¸€è‡´æ€§ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ+initializeåœ¨å…¶æ‰§è¡Œæ—¶ä¸æä¾›è¿™ç§ä¿è¯â€”äº‹å®ä¸Šï¼Œå¦‚æœåœ¨åº”ç”¨ä¸­æ²¡ä¸ºç»™è¿™ä¸ªç±»å‘é€æ¶ˆæ¯ï¼Œåˆ™å®ƒå¯èƒ½æ°¸è¿œä¸ä¼šè¢«è°ƒç”¨ã€‚</p>
</blockquote>
</li>
<li><p>Swizzlingåº”è¯¥æ€»æ˜¯åœ¨dispatch_onceä¸­æ‰§è¡Œ</p>
<blockquote>
<p>ä¸ä¸Šé¢ç›¸åŒï¼Œå› ä¸ºswizzlingä¼šæ”¹å˜å…¨å±€çŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨è¿è¡Œæ—¶é‡‡å–ä¸€äº›é¢„é˜²æªæ–½ã€‚åŸå­æ€§å°±æ˜¯è¿™æ ·ä¸€ç§æªæ–½ï¼Œå®ƒç¡®ä¿ä»£ç åªè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œä¸ç®¡æœ‰å¤šå°‘ä¸ªçº¿ç¨‹ã€‚GCDçš„dispatch_onceå¯ä»¥ç¡®ä¿è¿™ç§è¡Œä¸ºï¼Œæˆ‘ä»¬åº”è¯¥å°†å…¶ä½œä¸ºmethod swizzlingçš„æœ€ä½³å®è·µ</p>
</blockquote>
</li>
<li><p>å°å¿ƒæ— é™å¾ªç¯</p>
<blockquote>
<p>å’‹çœ‹ä¸Šå»æ˜¯ä¼šå¯¼è‡´æ— é™å¾ªç¯çš„ã€‚ä½†ä»¤äººæƒŠå¥‡çš„æ˜¯ï¼Œå¹¶æ²¡æœ‰å‡ºç°è¿™ç§æƒ…å†µã€‚åœ¨swizzlingçš„è¿‡ç¨‹ä¸­ï¼Œæ–¹æ³•ä¸­çš„[self xxx_viewWillAppear:animated]å·²ç»è¢«é‡æ–°æŒ‡å®šåˆ°UIViewControllerç±»çš„-viewWillAppear:ä¸­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ä¼šäº§ç”Ÿæ— é™å¾ªç¯ã€‚ä¸è¿‡å¦‚æœæˆ‘ä»¬è°ƒç”¨çš„æ˜¯[self viewWillAppear:animated]ï¼Œåˆ™ä¼šäº§ç”Ÿæ— é™å¾ªç¯ï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•çš„å®ç°åœ¨è¿è¡Œæ—¶å·²ç»è¢«é‡æ–°æŒ‡å®šä¸ºxxx_viewWillAppear:äº†ã€‚</p>
</blockquote>
</li>
</ul>
<h3 id="å¯¹è±¡å…³è”"><a href="#å¯¹è±¡å…³è”" class="headerlink" title="å¯¹è±¡å…³è”"></a>å¯¹è±¡å…³è”</h3><p>ç°åœ¨ä½ å‡†å¤‡ç”¨ä¸€ä¸ªç³»ç»Ÿçš„ç±»ï¼Œä½†æ˜¯ç³»ç»Ÿçš„ç±»å¹¶ä¸èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œä½ éœ€è¦é¢å¤–æ·»åŠ ä¸€ä¸ªå±æ€§ã€‚<br>è¿™ç§æƒ…å†µçš„ä¸€èˆ¬è§£å†³åŠæ³•å°±æ˜¯ç»§æ‰¿ã€‚<br>ä½†æ˜¯ï¼Œåªå¢åŠ ä¸€ä¸ªå±æ€§ï¼Œå°±å»ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œæ€»æ˜¯è§‰å¾—å¤ªéº»çƒ¦ç±»ã€‚<br>è¿™ä¸ªæ—¶å€™ï¼Œruntimeçš„å…³è”å±æ€§å°±å‘æŒ¥å®ƒçš„ä½œç”¨äº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//é¦–å…ˆå®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œç”¨å®ƒçš„åœ°å€ä½œä¸ºå…³è”å¯¹è±¡çš„key</div><div class="line">static char associatedObjectKey;</div><div class="line">//è®¾ç½®å…³è”å¯¹è±¡</div><div class="line">objc_setAssociatedObject(target, &amp;associatedObjectKey, @&quot;æ·»åŠ çš„å­—ç¬¦ä¸²å±æ€§&quot;, OBJC_ASSOCIATION_RETAIN_NONATOMIC); //è·å–å…³è”å¯¹è±¡</div><div class="line">NSString *string = objc_getAssociatedObject(target, &amp;associatedObjectKey);</div><div class="line">NSLog(@&quot;AssociatedObject = %@&quot;, string);</div></pre></td></tr></table></figure></p>
<blockquote>
<p>objc_setAssociatedObjectçš„å››ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>id objectç»™è°è®¾ç½®å…³è”å¯¹è±¡ã€‚</li>
<li>const void *keyå…³è”å¯¹è±¡å”¯ä¸€çš„keyï¼Œè·å–æ—¶ä¼šç”¨åˆ°ã€‚</li>
<li>id valueå…³è”å¯¹è±¡ã€‚</li>
<li>objc_AssociationPolicyå…³è”ç­–ç•¥ï¼Œæœ‰ä»¥ä¸‹å‡ ç§ç­–ç•¥ï¼š<br>enum {<br>  OBJC_ASSOCIATION_ASSIGN = 0,<br>  OBJC_ASSOCIATION_RETAIN_NONATOMIC = 1,<br>  OBJC_ASSOCIATION_COPY_NONATOMIC = 3,<br>  OBJC_ASSOCIATION_RETAIN = 01401,<br>  OBJC_ASSOCIATION_COPY = 01403<br>};<br>å¦‚æœä½ ç†Ÿæ‚‰OCï¼Œçœ‹åå­—åº”è¯¥çŸ¥é“è¿™å‡ ç§ç­–ç•¥çš„æ„æ€äº†å§ã€‚</li>
</ul>
</blockquote>
<p><code>objc_getAssociatedObject</code>çš„ä¸¤ä¸ªå‚æ•°ã€‚</p>
<ul>
<li>id objectè·å–è°çš„å…³è”å¯¹è±¡ã€‚</li>
<li>const void *keyæ ¹æ®è¿™ä¸ªå”¯ä¸€çš„keyè·å–å…³è”å¯¹è±¡ã€‚<br>å…¶å®ï¼Œä½ è¿˜å¯ä»¥æŠŠæ·»åŠ å’Œè·å–å…³è”å¯¹è±¡çš„æ–¹æ³•å†™åœ¨ä½ éœ€è¦ç”¨åˆ°è¿™ä¸ªåŠŸèƒ½çš„ç±»çš„ç±»åˆ«ä¸­ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//æ·»åŠ å…³è”å¯¹è±¡</div><div class="line">- (void)addAssociatedObject:(id)object&#123;</div><div class="line">    objc_setAssociatedObject(self, @selector(getAssociatedObject), object, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</div><div class="line">&#125;</div><div class="line">//è·å–å…³è”å¯¹è±¡</div><div class="line">- (id)getAssociatedObject&#123;</div><div class="line">    return objc_getAssociatedObject(self, _cmd);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>æ³¨æ„ï¼šè¿™é‡Œé¢æˆ‘ä»¬æŠŠgetAssociatedObjectæ–¹æ³•çš„åœ°å€ä½œä¸ºå”¯ä¸€çš„keyï¼Œ_cmdä»£è¡¨å½“å‰è°ƒç”¨æ–¹æ³•çš„åœ°å€ã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul>
<li>æ–¹æ³•è°ƒç”¨çš„æœ¬è´¨å°±æ˜¯é€šè¿‡instance/class+SELæ¥æ‰¾åˆ°IMPï¼Œæœ€ç»ˆè°ƒç”¨IMPçš„å‡½æ•°æ¥æ‰§è¡Œè°ƒç”¨çš„</li>
<li>æ–¹æ³•è°ƒç”¨å¯ä»¥ä½¿ç”¨invokeçš„æ–¹æ³•</li>
<li>å¢åŠ æ–¹æ³•çš„æ˜¯åœ¨æŸä¸ªç±»ä¸­å¢åŠ Methodï¼Œä¹Ÿå°±æ˜¯å¢åŠ SLEå’ŒIMP</li>
<li>æ›¿æ¢æ–¹æ³•çš„æ˜¯æ›´æ”¹SLEä¸IMPçš„æ˜ å°„å…³ç³»</li>
</ul>
<hr>
<p>å‚è€ƒï¼š<br><a href="http://southpeak.github.io/blog/2014/10/25/objective-c-runtime-yun-xing-shi-zhi-lei-yu-dui-xiang/" target="_blank" rel="external">å—å³°å­-runtime</a></p>
<p><a href="http://www.jianshu.com/p/927c8384855a" target="_blank" rel="external">iOS-runtimeç†è§£-ç®€ä¹¦</a></p>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Runloopæ¦‚è¿°]]></title>
      <url>/2015/07/21/2015/Runloop%E6%A6%82%E8%BF%B0/</url>
      <content type="html"><![CDATA[<p>å‚è€ƒ<a href="https://blog.ibireme.com/2015/05/18/runloop/" target="_blank" rel="external">ibiremeâ€™s Block</a></p>
<h2 id="1-åŸºæœ¬æ¦‚å¿µ"><a href="#1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1.åŸºæœ¬æ¦‚å¿µ"></a>1.åŸºæœ¬æ¦‚å¿µ</h2><h3 id="ä¸ºä»€ä¹ˆéœ€è¦runloop"><a href="#ä¸ºä»€ä¹ˆéœ€è¦runloop" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦runloop"></a>ä¸ºä»€ä¹ˆéœ€è¦runloop</h3><ul>
<li>ä½¿ç¨‹åºä¸€ç›´æ´»ç€</li>
<li>å†³å®šç¨‹åºä½•æ—¶åº”è¯¥å¤„ç†å“ªäº›event</li>
<li>è°ƒç”¨è§£è€¦(message queue)</li>
<li>èŠ‚çœCPUæ—¶é—´</li>
<li>å¼€å¯ä¸»çº¿ç¨‹è¦æ¶ˆè€—1Må†…å­˜ï¼Œå¼€å¯ä¸€ä¸ªåå°çº¿ç¨‹éœ€è¦æ¶ˆè€—512kå†…å­˜ï¼Œæˆ‘ä»¬åº”å½“åœ¨çº¿ç¨‹æ²¡æœ‰ä»»åŠ¡çš„æ—¶å€™ä¼‘çœ ï¼Œæ¥é‡Šæ”¾æ‰€å ç”¨çš„èµ„æº</li>
</ul>
<h3 id="ä¸runloopç›¸å…³çš„ç±»"><a href="#ä¸runloopç›¸å…³çš„ç±»" class="headerlink" title="ä¸runloopç›¸å…³çš„ç±»"></a>ä¸runloopç›¸å…³çš„ç±»</h3><ul>
<li>NSTimer</li>
<li>UIEvent</li>
<li>Autorelease</li>
<li>NSObjecâ€“&gt;NSDelayedPerforming</li>
<li>NSObjecâ€“&gt;NSThreadPerformAddition</li>
<li>CADisplayLink</li>
<li>CATransition</li>
<li>CAAnimation</li>
<li>dispatch_get_main_queue()</li>
<li>NSURLConnection</li>
</ul>
<h3 id="runloopä¸çº¿ç¨‹"><a href="#runloopä¸çº¿ç¨‹" class="headerlink" title="runloopä¸çº¿ç¨‹"></a>runloopä¸çº¿ç¨‹</h3><ul>
<li>æ¯æ¡çº¿ç¨‹éƒ½æœ‰å”¯ä¸€çš„ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„RunLoopå¯¹è±¡</li>
<li>ä¸»çº¿ç¨‹çš„RunLoopå·²ç»è‡ªåŠ¨åˆ›å»ºå¥½äº†ï¼Œå­çº¿ç¨‹çš„RunLoopéœ€è¦ä¸»åŠ¨åˆ›å»º</li>
<li>RunLoopåœ¨ç¬¬ä¸€æ¬¡<code>è·å–æ—¶åˆ›å»º</code>ï¼Œåœ¨çº¿ç¨‹ç»“æŸæ—¶é”€æ¯</li>
<li>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯æ²¡æœ‰å¿…è¦å»å¯ç”¨çº¿ç¨‹çš„RunLoopçš„ï¼Œé™¤éä½ åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸­éœ€è¦é•¿ä¹…çš„æ£€æµ‹æŸä¸ªäº‹ä»¶ï¼Œæ¯”å¦‚è¯´ä¸»çº¿ç¨‹ã€‚</li>
<li>çº¿ç¨‹å’ŒRunLoopä¹‹é—´æ˜¯ä»¥é”®å€¼å¯¹çš„å½¢å¼ä¸€ä¸€å¯¹åº”çš„ï¼Œå…¶ä¸­keyæ˜¯threadï¼Œvalueæ˜¯runLoop(è¿™ç‚¹å¯ä»¥ä»è‹¹æœå…¬å¼€çš„æºç ä¸­çœ‹å‡ºæ¥)ï¼Œå…¶å®RunLoopæ˜¯ç®¡ç†çº¿ç¨‹çš„ä¸€ç§æœºåˆ¶ï¼Œè¿™ç§æœºåˆ¶ä¸ä»…åœ¨IOSä¸Šæœ‰ï¼Œåœ¨Node.jsä¸­çš„EventLoopï¼ŒAndroidä¸­çš„Looperï¼Œéƒ½æœ‰ç±»ä¼¼çš„æ¨¡å¼</li>
</ul>
<h3 id="è·å–runloop"><a href="#è·å–runloop" class="headerlink" title="è·å–runloop"></a>è·å–runloop</h3><blockquote>
<p>Foundation<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[NSRunLoop currentRunLoop]; // è·å¾—å½“å‰çº¿ç¨‹çš„RunLoopå¯¹è±¡</div><div class="line">[NSRunLoop mainRunLoop]; // è·å¾—ä¸»çº¿ç¨‹çš„RunLoopå¯¹è±¡</div></pre></td></tr></table></figure></p>
<p>Core Foundation<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CFRunLoopGetCurrent(); // è·å¾—å½“å‰çº¿ç¨‹çš„RunLoopå¯¹è±¡</div><div class="line">CFRunLoopGetMain(); // è·å¾—ä¸»çº¿ç¨‹çš„RunLoopå¯¹è±¡</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="runloopåŸºæœ¬ç»“æ„"><a href="#runloopåŸºæœ¬ç»“æ„" class="headerlink" title="runloopåŸºæœ¬ç»“æ„"></a>runloopåŸºæœ¬ç»“æ„</h3><p><code>NSRunLoopç»§æ‰¿è‡ªNSObject</code><br><img src="/21/2015/Runloopæ¦‚è¿°/../../images/785453-df12d5e99be8ae05.jpeg" alt=""></p>
<ul>
<li>runloopä¸Threadä¸€ä¸€å¯¹åº”ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯ä¸€ä¸ªthreadåªèƒ½æœ‰ä¸€runloopï¼Œæˆ‘ä»¬å¯ä»¥ç»™runloopåµŒå¥—runloop</li>
</ul>
<h4 id="CFRunLoopMode"><a href="#CFRunLoopMode" class="headerlink" title="CFRunLoopMode"></a>CFRunLoopMode</h4><ul>
<li>CFRunLoopModeRefä»£è¡¨RunLoopçš„è¿è¡Œæ¨¡å¼<ul>
<li>ä¸€ä¸ª RunLoop åŒ…å«è‹¥å¹²ä¸ª Modeï¼Œæ¯ä¸ªModeåˆåŒ…å«è‹¥å¹²ä¸ªSource/Timer/Observer</li>
<li>æ¯æ¬¡RunLoopå¯åŠ¨æ—¶ï¼Œåªèƒ½æŒ‡å®šå…¶ä¸­ä¸€ä¸ª Modeï¼Œè¿™ä¸ªModeè¢«ç§°ä½œ CurrentMode</li>
<li>å¦‚æœéœ€è¦åˆ‡æ¢Modeï¼Œåªèƒ½é€€å‡ºLoopï¼Œå†é‡æ–°æŒ‡å®šä¸€ä¸ªModeè¿›å…¥</li>
<li>è¿™æ ·åšä¸»è¦æ˜¯ä¸ºäº†åˆ†éš”å¼€ä¸åŒç»„çš„Source/Timer/Observerï¼Œè®©å…¶äº’ä¸å½±å“</li>
</ul>
</li>
</ul>
<blockquote>
<p>ç³»ç»Ÿé»˜è®¤æ³¨å†Œäº†5ä¸ªMode:(å‰ä¸¤ä¸ªè·Ÿæœ€åä¸€ä¸ªå¸¸ç”¨)</p>
</blockquote>
<ul>
<li>kCFRunLoopDefaultModeï¼šAppçš„é»˜è®¤Modeï¼Œé€šå¸¸ä¸»çº¿ç¨‹æ˜¯åœ¨è¿™ä¸ªModeä¸‹è¿è¡Œ</li>
<li>UITrackingRunLoopModeï¼šç•Œé¢è·Ÿè¸ª Modeï¼Œç”¨äº ScrollView è¿½è¸ªè§¦æ‘¸æ»‘åŠ¨ï¼Œä¿è¯ç•Œé¢æ»‘åŠ¨æ—¶ä¸å—å…¶ä»– Mode å½±å“</li>
<li>UIInitializationRunLoopMode: åœ¨åˆšå¯åŠ¨ App æ—¶ç¬¬è¿›å…¥çš„ç¬¬ä¸€ä¸ª Modeï¼Œå¯åŠ¨å®Œæˆåå°±ä¸å†ä½¿ç”¨</li>
<li>GSEventReceiveRunLoopMode: æ¥å—ç³»ç»Ÿäº‹ä»¶çš„å†…éƒ¨ Modeï¼Œé€šå¸¸ç”¨ä¸åˆ°</li>
<li>kCFRunLoopCommonModes: è¿™æ˜¯ä¸€ä¸ªå ä½ç”¨çš„Modeï¼Œä¸æ˜¯ä¸€ç§çœŸæ­£çš„Mod</li>
</ul>
<h4 id="CFRunLoopSource"><a href="#CFRunLoopSource" class="headerlink" title="CFRunLoopSource"></a>CFRunLoopSource</h4><ul>
<li>CFRunLoopSourceRefæ˜¯äº‹ä»¶æºï¼ˆè¾“å…¥æºï¼‰</li>
<li>æŒ‰ç…§å®˜æ–¹æ–‡æ¡£çš„åˆ†ç±»<ul>
<li>Port-Based Sources (åŸºäºç«¯å£,è·Ÿå…¶ä»–çº¿ç¨‹äº¤äº’,é€šè¿‡å†…æ ¸å‘å¸ƒçš„æ¶ˆæ¯)</li>
<li>Custom Input Sources (è‡ªå®šä¹‰)</li>
<li>Cocoa Perform Selector Sources (performSelectorâ€¦æ–¹æ³•)</li>
</ul>
</li>
<li>æŒ‰ç…§å‡½æ•°è°ƒç”¨æ ˆçš„åˆ†ç±»<ul>
<li>Source0ï¼šéåŸºäºPortçš„</li>
<li>Source1ï¼šåŸºäºPortçš„</li>
</ul>
</li>
</ul>
<p>Source0: eventäº‹ä»¶ï¼Œåªå«æœ‰å›è°ƒï¼Œéœ€è¦å…ˆè°ƒç”¨CFRunLoopSourceSignal(source)ï¼Œå°†è¿™ä¸ª Source æ ‡è®°ä¸ºå¾…å¤„ç†ï¼Œç„¶åæ‰‹åŠ¨è°ƒç”¨ CFRunLoopWakeUp(runloop) æ¥å”¤é†’ RunLoopã€‚<br>Source1: åŒ…å«äº†ä¸€ä¸ª mach_port å’Œä¸€ä¸ªå›è°ƒï¼Œè¢«ç”¨äºé€šè¿‡å†…æ ¸å’Œå…¶ä»–çº¿ç¨‹ç›¸äº’å‘é€æ¶ˆæ¯,èƒ½ä¸»åŠ¨å”¤é†’ RunLoop çš„çº¿ç¨‹ã€‚</p>
<h4 id="CFRunLoopTimer"><a href="#CFRunLoopTimer" class="headerlink" title="CFRunLoopTimer"></a>CFRunLoopTimer</h4><p>æœ¬è´¨å°±æ˜¯ä¸€ä¸ªtimer<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">+ (NSTimer *)timerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(nullable id)userInfo repeats:(BOOL)yesOrNo;</div><div class="line">+ (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(nullable id)userInfo repeats:(BOOL)yesOrNo;</div><div class="line">- (void)performSelector:(SEL)aSelector withObject:(nullable id)anArgument afterDelay:(NSTimeInterval)delay;//è¯¥æ–¹æ³•å®šä¹‰åœ¨RunLoopä¸­ï¼Œä¸è¿‡æ˜¯NSObjectçš„åˆ†ç±»ï¼›</div><div class="line">+ (CADisplayLink *)displayLinkWithTarget:(id)target selector:(SEL)sel;//è¿™ä¸ªç±»æ–¹æ³•å®šä¹‰åœ¨DisPlayLinkä¸­</div><div class="line">- (void)addToRunLoop:(NSRunLoop *)runloop forMode:(NSString *)mode;//è¿™ä¹Ÿæ˜¯DisPlayLinkä¸­çš„æ–¹æ³•</div></pre></td></tr></table></figure></p>
<ul>
<li>CFRunLoopTimerRefæ˜¯åŸºäºæ—¶é—´çš„è§¦å‘å™¨</li>
<li>åŸºæœ¬ä¸Šè¯´çš„å°±æ˜¯NSTimer(CADisplayLinkä¹Ÿæ˜¯åŠ åˆ°RunLoop),å®ƒå—RunLoopçš„Modeå½±å“</li>
<li>GCDçš„å®šæ—¶å™¨ä¸å—RunLoopçš„Modeå½±å“<h4 id="CFRunLoopObserver"><a href="#CFRunLoopObserver" class="headerlink" title="CFRunLoopObserver"></a>CFRunLoopObserver</h4></li>
<li>CFRunLoopObserverRefæ˜¯è§‚å¯Ÿè€…ï¼Œèƒ½å¤Ÿç›‘å¬RunLoopçš„çŠ¶æ€æ”¹å˜</li>
<li>å¯ä»¥ç›‘å¬çš„æ—¶é—´ç‚¹æœ‰ä»¥ä¸‹å‡ ä¸ª</li>
</ul>
<p><img src="http://img8.a.pcs.baidu.com/rest/2.0/pcs/thumbnail?method=generate&amp;path=%2Fimages%2FSnip20160721_13.png&amp;app_id=246327&amp;width=1600&amp;height=1600" alt=""></p>
<h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><ul>
<li>CADisplayLink</li>
<li>NSTimer</li>
<li>ImageViewæ˜¾ç¤º</li>
<li>PerformSelector</li>
<li>å¸¸é©»çº¿ç¨‹</li>
<li>è‡ªåŠ¨é‡Šæ”¾æ± </li>
<li>NSURLConnectionçš„æ‰§è¡Œè¿‡ç¨‹</li>
<li>AFNetWorkingä¸­æ˜¯å¦‚ä½•ä½¿ç”¨RunLoopçš„?</li>
</ul>
<h3 id="æ·±å…¥ç†è§£Perform-Selector"><a href="#æ·±å…¥ç†è§£Perform-Selector" class="headerlink" title="æ·±å…¥ç†è§£Perform Selector"></a>æ·±å…¥ç†è§£Perform Selector</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">- (void)tryPerformSelectorOnMianThread&#123;</div><div class="line"></div><div class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line">        [self performSelector:@selector(perform1) withObject:nil];</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)mainThreadMethod&#123;</div><div class="line"></div><div class="line">NSLog(@&quot;execute %s&quot;,__func__);</div><div class="line"></div><div class="line">// print: execute -[ViewController mainThreadMethod]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (void)tryPerformSelectorOnBackGroundThread&#123;</div><div class="line"></div><div class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line"></div><div class="line">[self performSelector:@selector(backGroundThread) onThread:[NSThread currentThread] withObject:nil waitUntilDone:NO];</div><div class="line"></div><div class="line">&#125;);</div><div class="line">&#125;</div><div class="line">- (void)backGroundThread&#123;</div><div class="line"></div><div class="line">NSLog(@&quot;%u&quot;,[NSThread isMainThread]);</div><div class="line"></div><div class="line">NSLog(@&quot;execute %s&quot;,__FUNCTION__);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·æˆ‘ä»¬åœ¨ViewDidLoadä¸­è°ƒç”¨tryPerformSelectorOnMianThread,å°±ä¼šç«‹å³æ‰§è¡Œï¼Œå¹¶ä¸”è¾“å‡º:print: execute -[ViewController mainThreadMethod];<br>ä¸Šè¾¹çš„performselectoråœ¨å­çº¿ç¨‹ä¸­ä¾ç„¶å¯ä»¥æ‰§è¡Œï¼Œå› ä¸ºå®ƒä¸ä¾èµ–äºtimerï¼Œä¸éœ€è¦å¯åŠ¨runloopï¼Œä½†æ˜¯ä¸‹è¾¹çš„åšæ³•å°±ä¸è¡Œã€‚</p>
<p>å’Œä¸Šé¢çš„ä¾‹å­ä¸€æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨GCD,è®©è¿™ä¸ªæ–¹æ³•åœ¨åå°çº¿ç¨‹ä¸­æ‰§è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (void)tryPerformSelectorOnBackGroundThread&#123;</div><div class="line"></div><div class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line"></div><div class="line">[self performSelector:@selector(backGroundThread) onThread:[NSThread currentThread] withObject:nil waitUntilDone:NO];</div><div class="line"></div><div class="line">&#125;);</div><div class="line">&#125;</div><div class="line">- (void)backGroundThread&#123;</div><div class="line"></div><div class="line">NSLog(@&quot;%u&quot;,[NSThread isMainThread]);</div><div class="line"></div><div class="line">NSLog(@&quot;execute %s&quot;,__FUNCTION__);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åŒæ ·çš„ï¼Œæˆ‘ä»¬è°ƒç”¨tryPerformSelectorOnBackGroundThreadè¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œä¸‹é¢çš„backGroundThreadä¸ä¼šè¢«è°ƒç”¨ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ<br>è¿™æ˜¯å› ä¸ºï¼Œåœ¨è°ƒç”¨performSelector:onThread: withObject: waitUntilDoneçš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šç»™æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªTimerçš„sourceï¼ŒåŠ åˆ°å¯¹åº”çš„RunLoopä¸Šå»ï¼Œç„¶è€Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ²¡æœ‰RunLoop,å¦‚æœæˆ‘ä»¬åŠ ä¸ŠRunLoop:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (void)tryPerformSelectorOnBackGroundThread&#123;</div><div class="line"></div><div class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line"></div><div class="line">[self performSelector:@selector(backGroundThread) onThread:[NSThread currentThread] withObject:nil waitUntilDone:NO];</div><div class="line"></div><div class="line">NSRunLoop *runLoop = [NSRunLoop currentRunLoop];</div><div class="line">[runLoop run];</div><div class="line"></div><div class="line">&#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¿™æ—¶å°±ä¼šå‘ç°æˆ‘ä»¬çš„æ–¹æ³•æ­£å¸¸è¢«è°ƒç”¨äº†ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ä¸­çš„perfom selectorå´èƒ½å¤Ÿæ­£å¸¸è°ƒç”¨å‘¢ï¼Ÿé€šè¿‡ä¸Šé¢çš„ä¾‹å­ç›¸ä¿¡ä½ å·²ç»çŒœåˆ°äº†ï¼Œä¸»çº¿ç¨‹çš„RunLoopæ˜¯ä¸€ç›´å­˜åœ¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„æ—¶å€™ï¼Œæ— éœ€å†æ·»åŠ RunLoopã€‚<br>å°ç»“:å½“perform selectoråœ¨åå°çº¿ç¨‹ä¸­æ‰§è¡Œçš„æ—¶å€™ï¼Œè¿™ä¸ªçº¿ç¨‹å¿…é¡»æœ‰ä¸€ä¸ªå¼€å¯çš„runLoop</p>
<h4 id="Perform-Selector-after"><a href="#Perform-Selector-after" class="headerlink" title="Perform Selector after"></a>Perform Selector after</h4><p>å½“æŸä¸ªäº‹ä»¶è§¦å‘äº†æŸæ®µä»£ç æ‰§è¡Œçš„æ—¶å€™ï¼Œæ˜¯è¦åœ¨ä¸€ä¸ªrunloopä¸­æ‰§è¡Œå®Œæ¯•çš„ï¼Œå¦‚æœè¿™ä¸ªçº¿ç¨‹æœ‰runloopçš„è¯ï¼Œè¿™æ ·å¦‚æœåœ¨ä¸€ä¸ªä¸»çº¿ç¨‹æœ‰ä¸€å¤§æ®µä»£ç è¦æ‰§è¡Œï¼Œé‚£ä¹ˆå°±ä¼šé˜»ç¢è¿™ä¸ªçº¿ç¨‹ï¼Œæˆ–è€…æ›´å‡†ç¡®æ¥è®²æ˜¯è®©è¿™ä¸ªrunloopä¸èƒ½å»å¤„ç†ç”¨æˆ·äº‹ä»¶å’Œåˆ·æ–°å±å¹•ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ<br>ç­”æ¡ˆå°±æ˜¯è¿™ä¸ªæ–¹æ³•<br><code>- (void)performSelector:(SEL)aSelector withObject:(nullable id)anArgument afterDelay:(NSTimeInterval)delay</code>æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªå¤§æ®µçš„æ–¹æ³•æ‰§è¡Œåˆ‡åˆ†æˆå‡ ä»½ï¼Œç„¶åç”¨è¯¥æ–¹æ³•è¿æ¥ï¼Œæ¯æ¬¡æ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œå°±ä¼šè¿›å…¥åˆ°ä¸‹ä¸€ä¸ªrunloopæ‰ä¼šæ‰§è¡Œï¼Œè€Œæ¯ä¸ªrunloopçš„æ‰§è¡Œï¼Œç”¨æˆ·äº‹ä»¶çš„å¤„ç†å’Œå±å¹•åˆ·æ–°æ˜¯åœ¨ä»£ç æ‰§è¡Œå‰è¾¹çš„ï¼Œæ‰€ä»¥è¿™æ ·å°±æœ‰æœºä¼šä¸­æ–­ä»£ç çš„æ‰§è¡Œï¼Œå°±åƒæ˜¯ä¸‹è¾¹è¿™æ ·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line">@property (nonatomic, strong) UIButton *btn1;</div><div class="line">@property (nonatomic, strong) UIButton *btn2;</div><div class="line">@property (nonatomic, assign) BOOL next;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">int b = 0;</div><div class="line"></div><div class="line">@implementation ViewController</div><div class="line"></div><div class="line">- (UIButton *)btn1 &#123;</div><div class="line">    if (!_btn1) &#123;</div><div class="line">        _btn1 = [UIButton buttonWithType:UIButtonTypeCustom];</div><div class="line">        [_btn1 setTitle:@&quot;ç‚¹æˆ‘1&quot; forState:UIControlStateNormal];</div><div class="line">        [_btn1 sizeToFit];</div><div class="line">        [_btn1 addTarget:self action:@selector(click1) forControlEvents:UIControlEventTouchUpInside];</div><div class="line">        [_btn1 setTitleColor:[UIColor redColor] forState:UIControlStateNormal];</div><div class="line">    &#125;</div><div class="line">    return _btn1;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (UIButton *)btn2 &#123;</div><div class="line">    if (!_btn2) &#123;</div><div class="line">        _btn2 = [UIButton buttonWithType:UIButtonTypeCustom];</div><div class="line">        [_btn2 setTitle:@&quot;ç‚¹æˆ‘2&quot; forState:UIControlStateNormal];</div><div class="line">        [_btn2 sizeToFit];</div><div class="line">        [_btn2 addTarget:self action:@selector(click2) forControlEvents:UIControlEventTouchUpInside];</div><div class="line">        [_btn2 setTitleColor:[UIColor redColor] forState:UIControlStateNormal];</div><div class="line">    &#125;</div><div class="line">    return _btn2;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    </div><div class="line">    [self.view addSubview:self.btn1];</div><div class="line">    [self.view addSubview:self.btn2];</div><div class="line">    </div><div class="line">    self.btn1.frame = CGRectMake(10, 30, 50, 20);</div><div class="line">    self.btn2.frame = CGRectMake(100, 30, 50, 20);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)click1 &#123;</div><div class="line">    </div><div class="line">    for (int i = 0; i &lt; 3000; i++) &#123;</div><div class="line">        NSLog(@&quot;%d&quot;, i);</div><div class="line">    &#125;</div><div class="line">[self performSelector:@selector(perform1) withObject:nil afterDelay:0.005];</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)perform1 &#123;</div><div class="line">    for (int i = 3000; i &lt; 6000; i++) &#123;</div><div class="line">        NSLog(@&quot;%d&quot;, i);</div><div class="line">    &#125;</div><div class="line">    [self performSelector:@selector(perform4) withObject:nil afterDelay:0.005];</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)perform4 &#123;</div><div class="line">    if (!_next) return;</div><div class="line">    for (int i = 6000; i &lt; 9000; i++) &#123;</div><div class="line">        NSLog(@&quot;%d&quot;, i);</div><div class="line">    &#125;</div><div class="line">    [self performSelector:@selector(perform5) withObject:nil afterDelay:0.005];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)perform5 &#123;</div><div class="line">    if (!_next) return;</div><div class="line">    for (int i = 600; i &lt; 900; i++) &#123;</div><div class="line">        NSLog(@&quot;%d&quot;, i);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)click2 &#123;</div><div class="line">    _next = NO;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å®éªŒè¯æ˜ï¼Œåªæœ‰afteræ–¹æ³•æœ‰è¿™æ ·çš„é­”åŠ›ã€‚</p>
<blockquote>
<p>æ€»ç»“:å½“æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªtimeräº‹ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™è¿™ä¸ªäº‹ä»¶å°±ä¼šè¢«æ”¾åˆ°ä¸‹ä¸€ä¸ªrunloopä¸­æ‰§è¡Œï¼Œå¦‚æœè¿™ä¸ªçº¿ç¨‹ä¸­æ ¹æœ¬å°±æ²¡æœ‰èµ·runloopï¼Œé‚£ä¹ˆä¹Ÿå°±ä¸å­˜åœ¨ä¸‹ä¸€ä¸ªrunloopï¼Œè¿™ä¸ªäº‹ä»¶ä¹Ÿå°±æ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œäº†ã€‚</p>
</blockquote>
<h3 id="CADisplayLink"><a href="#CADisplayLink" class="headerlink" title="CADisplayLink"></a>CADisplayLink</h3><p>ç”¨æ³•å’Œtimerä¸€æ ·ï¼Œæ”¾åœ¨å­çº¿ç¨‹çš„è¯è®°å¾—è‡ªå·±åˆ›å»ºrunloop<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line">           // Track FPS using display link</div><div class="line">           _displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(displayLinkTick)];</div><div class="line">   //        [_displayLink setPaused:YES];</div><div class="line">           [_displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];</div><div class="line">           [[NSRunLoop currentRunLoop] run];</div><div class="line">       &#125;);</div></pre></td></tr></table></figure></p>
<h3 id="Timer"><a href="#Timer" class="headerlink" title="Timer"></a>Timer</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">@interface ViewController ()</div><div class="line">@property (nonatomic, strong) UIScrollView *scrollView;</div><div class="line">@property (nonatomic, assign) NSInteger count;</div><div class="line">@end</div><div class="line"></div><div class="line">@implementation ViewController</div><div class="line"></div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    </div><div class="line">    [self.view addSubview:self.scrollView];</div><div class="line"> </div><div class="line">    NSTimer *timer = [NSTimer timerWithTimeInterval:2 target:self selector:@selector(printfString) userInfo:nil repeats:YES];</div><div class="line">    [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];</div><div class="line">    [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];// æ ‡è®°ä¸ºcommon modesçš„æ¨¡å¼ï¼šUITrackingRunLoopModeå’ŒNSDefaultRunLoopModeå…¼å®¹,timerå°±éƒ½å¯ä»¥è·‘äº†</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (UIScrollView *)scrollView &#123;</div><div class="line">    if (!_scrollView) &#123;</div><div class="line">        _scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 100, kScreenW, 200)];</div><div class="line">        _scrollView.backgroundColor = [UIColor redColor];</div><div class="line">        _scrollView.contentSize = CGSizeMake(kScreenW * 2, 0);</div><div class="line">    &#125;</div><div class="line">    return _scrollView;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)printfString &#123;</div><div class="line">    self.count ++;</div><div class="line">    NSLog(@&quot;%ld&quot;, self.count);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ—¶å€™ä»£ç æŒ‰ç…§æˆ‘ä»¬é¢„å®šçš„ç»“æœè¿è¡Œï¼Œå¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸ªTiemræ”¾åˆ°åå°çº¿ç¨‹ä¸­å‘¢?<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line"></div><div class="line">    NSTimer *myTimer = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(timerAction) userInfo:nil repeats:YES];</div><div class="line"></div><div class="line">    [myTimer fire];</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¼šå‘ç°ï¼Œè¿™ä¸ªtimeråªæ‰§è¡Œäº†ä¸€æ¬¡ï¼Œå°±åœæ­¢äº†ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿé€šè¿‡ä¸Šé¢çš„è®²è§£ï¼Œæƒ³å¿…ä½ å·²ç»çŸ¥é“äº†ï¼ŒNSTimer,åªæœ‰æ³¨å†Œåˆ°RunLoopä¹‹åæ‰ä¼šç”Ÿæ•ˆï¼Œè¿™ä¸ªæ³¨å†Œæ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨ç»™æˆ‘ä»¬å®Œæˆçš„,æ—¢ç„¶éœ€è¦æ³¨å†Œåˆ°RunLoop,é‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦æœ‰ä¸€ä¸ªRunLoop,æˆ‘ä»¬åœ¨åå°çº¿ç¨‹ä¸­åŠ å…¥å¦‚ä¸‹çš„ä»£ç :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">NSRunLoop *runLoop = [NSRunLoop currentRunLoop];</div><div class="line">    [runLoop run];</div></pre></td></tr></table></figure></p>
<p>è¿™æ ·æˆ‘ä»¬å°±ä¼šå‘ç°ç¨‹åºæ­£å¸¸è¿è¡Œäº†ã€‚åœ¨Timeræ³¨å†Œåˆ°RunLoopä¹‹åï¼ŒRunLoopä¼šä¸ºå…¶é‡å¤çš„æ—¶é—´ç‚¹æ³¨å†Œå¥½äº‹ä»¶ï¼Œæ¯”å¦‚1ï¼š10ï¼Œ1ï¼š20ï¼Œ1ï¼š30è¿™å‡ ä¸ªæ—¶é—´ç‚¹ã€‚æœ‰æ—¶å€™æˆ‘ä»¬ä¼šåœ¨è¿™ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œä¸€ä¸ªè€—æ—¶æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™RunLoopä¸ºäº†èŠ‚çœèµ„æºï¼Œå¹¶ä¸ä¼šåœ¨éå¸¸å‡†ç¡®çš„æ—¶é—´ç‚¹å›è°ƒè¿™ä¸ªTimerï¼Œè¿™å°±é€ æˆäº†è¯¯å·®(Timeræœ‰ä¸ªå†—ä½™åº¦å±æ€§å«åštolerance,å®ƒæ ‡æ˜äº†å½“å‰ç‚¹åˆ°åï¼Œå®¹è®¸æœ‰å¤šå°‘æœ€å¤§è¯¯å·®)ï¼Œå¯ä»¥åœ¨æ‰§è¡Œä¸€æ®µå¾ªç¯ä¹‹åè°ƒç”¨ä¸€ä¸ªè€—æ—¶æ“ä½œï¼Œå¾ˆå®¹æ˜“çœ‹åˆ°timerä¼šæœ‰å¾ˆå¤§çš„è¯¯å·®ï¼Œè¿™è¯´æ˜åœ¨çº¿ç¨‹å¾ˆé—²çš„æ—¶å€™ä½¿ç”¨NSTiemræ˜¯æ¯”è¾ƒå‚²ä½ å‡†ç¡®çš„ï¼Œå½“çº¿ç¨‹å¾ˆå¿™ç¢Œæ—¶å€™ä¼šæœ‰è¾ƒå¤§çš„è¯¯å·®ã€‚ç³»ç»Ÿè¿˜æœ‰ä¸€ä¸ªCADisplayLink,ä¹Ÿå¯ä»¥å®ç°å®šæ—¶æ•ˆæœï¼Œå®ƒæ˜¯ä¸€ä¸ªå’Œå±å¹•çš„åˆ·æ–°ç‡ä¸€æ ·çš„å®šæ—¶å™¨ã€‚å¦‚æœåœ¨ä¸¤æ¬¡å±å¹•åˆ·æ–°ä¹‹é—´æ‰§è¡Œä¸€ä¸ªè€—æ—¶çš„ä»»åŠ¡ï¼Œé‚£å…¶ä¸­å°±ä¼šæœ‰ä¸€ä¸ªå¸§è¢«è·³è¿‡å»ï¼Œé€ æˆç•Œé¢å¡é¡¿ã€‚å¦å¤–GCDä¹Ÿå¯ä»¥å®ç°å®šæ—¶å™¨çš„æ•ˆæœï¼Œç”±äºå…¶å’ŒRunLoopæ²¡æœ‰å…³è”ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä½¿ç”¨å®ƒä¼šæ›´åŠ çš„å‡†ç¡®ï¼Œè¿™åœ¨æœ€åä¼šç»™äºˆè¯´æ˜ã€‚</p>
<h3 id="ImageView"><a href="#ImageView" class="headerlink" title="ImageView"></a>ImageView</h3><p>éœ€æ±‚:å½“ç”¨æˆ·åœ¨æ‹–æ‹½æ—¶(UIäº¤äº’æ—¶)ä¸æ˜¾ç¤ºå›¾ç‰‡,æ‹–æ‹½å®Œæˆæ—¶æ˜¾ç¤ºå›¾ç‰‡</p>
<p>æ–¹æ³•1 ç›‘å¬UIScrollerViewæ»šåŠ¨ (é€šè¿‡UIScrollViewDelegateç›‘å¬,æ­¤å¤„ä¸å†ä¸¾ä¾‹)</p>
<p>æ–¹æ³•2 RunLoop è®¾ç½®è¿è¡Œæ¨¡å¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// åªåœ¨NSDefaultRunLoopModeæ¨¡å¼ä¸‹æ˜¾ç¤ºå›¾ç‰‡</div><div class="line">    [self.imageView performSelector:@selector(setImage:) withObject:[UIImage imageNamed:@&quot;placeholder&quot;] afterDelay:3.0 inModes:@[NSDefaultRunLoopMode]];</div></pre></td></tr></table></figure>
<p>æ¯”å¦‚ä¿®æ”¹sdwebimageä¸­çš„æ–¹æ³•ï¼Œå¦‚æœè®¾ç½®imageviewä¸ºæ»šåŠ¨åˆ—è¡¨æ¨¡å¼ï¼Œåˆ™åŠ å…¥è¯¥æ–¹æ³•ï¼Œå½“åˆ—è¡¨åœæ­¢æ»šåŠ¨æ¨¡å¼çš„æ—¶å€™æ‰åŠ è½½å›¾ç‰‡</p>
<h3 id="ä¸€ç›´æ´»ç€çš„åå°çº¿ç¨‹"><a href="#ä¸€ç›´æ´»ç€çš„åå°çº¿ç¨‹" class="headerlink" title="ä¸€ç›´æ´»ç€çš„åå°çº¿ç¨‹"></a>ä¸€ç›´æ´»ç€çš„åå°çº¿ç¨‹</h3><p>ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œæ¯ç‚¹å‡»ä¸€ä¸‹å±å¹•ï¼Œè®©å­çº¿ç¨‹åšä¸€ä¸ªä»»åŠ¡,ç„¶åå¤§å®¶ä¸€èˆ¬ä¼šæƒ³åˆ°è¿™æ ·çš„æ–¹å¼:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">@interface ViewController ()</div><div class="line"></div><div class="line">@property(nonatomic,strong) NSThread *myThread;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">@implementation ViewController</div><div class="line"></div><div class="line">- (void)alwaysLiveBackGoundThread&#123;</div><div class="line"></div><div class="line">NSThread *thread = [[NSThread alloc]initWithTarget:self selector:@selector(myThreadRun) object:@&quot;etund&quot;];</div><div class="line">self.myThread = thread;</div><div class="line">[self.myThread start];</div><div class="line"></div><div class="line">&#125;</div><div class="line">- (void)myThreadRun&#123;</div><div class="line"></div><div class="line">NSLog(@&quot;my thread run&quot;);</div><div class="line"></div><div class="line">&#125;</div><div class="line">- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123;</div><div class="line"></div><div class="line">    NSLog(@&quot;%@&quot;,self.myThread);</div><div class="line">    [self performSelector:@selector(doBackGroundThreadWork) onThread:self.myThread withObject:nil waitUntilDone:NO];</div><div class="line">&#125;</div><div class="line">- (void)doBackGroundThreadWork&#123;</div><div class="line"></div><div class="line">    NSLog(@&quot;do some work %s&quot;,__FUNCTION__);</div><div class="line"></div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ä¸€ä¸ªå¼ºå¼•ç”¨æ¥è·å–äº†åå¤©çº¿ç¨‹ä¸­çš„thread,ç„¶ååœ¨ç‚¹å‡»å±å¹•çš„æ—¶å€™ï¼Œåœ¨è¿™ä¸ªçº¿ç¨‹ä¸Šæ‰§è¡ŒdoBackGroundThreadWorkè¿™ä¸ªæ–¹æ³•ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨touchesBeginæ–¹æ³•ä¸­ï¼Œself.myThreadæ˜¯å­˜åœ¨çš„ï¼Œä½†æ˜¯è¿™æ˜¯ä¸ºæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿™å°±è¦ä»çº¿ç¨‹çš„äº”å¤§çŠ¶æ€æ¥è¯´æ˜äº†:æ–°å»ºçŠ¶æ€ã€å°±ç»ªçŠ¶æ€ã€è¿è¡ŒçŠ¶æ€ã€é˜»å¡çŠ¶æ€ã€æ­»äº¡çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™å°½ç®¡å†…å­˜ä¸­è¿˜æœ‰çº¿ç¨‹ï¼Œä½†æ˜¯è¿™ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œå®Œä»»åŠ¡ä¹‹åå·²ç»æ­»äº¡äº†ï¼Œç»è¿‡ä¸Šé¢çš„è®ºè¿°ï¼Œæˆ‘ä»¬åº”è¯¥æ€æ ·å¤„ç†å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç»™è¿™ä¸ªçº¿ç¨‹çš„RunLoopæ·»åŠ ä¸€ä¸ªsourceï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°±ä¼šæ£€æµ‹è¿™ä¸ªsourceç­‰å¾…æ‰§è¡Œï¼Œè€Œä¸è‡³äºæ­»äº¡(æœ‰å·¥ä½œçš„å¼ºçƒˆæ„¿æœ›è€Œä¸æ­»äº¡):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">- (void)myThreadRun&#123;</div><div class="line"></div><div class="line">[[NSRunLoop currentRunLoop] addPort:[[NSPort alloc] init] forMode:NSDefaultRunLoopMode];</div><div class="line">[[NSRunLoop currentRunLoop] run]</div><div class="line"></div><div class="line">  NSLog(@&quot;my thread run&quot;);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ—¶å€™å†æ¬¡ç‚¹å‡»å±å¹•ï¼Œæˆ‘ä»¬å°±ä¼šå‘ç°ï¼Œåå°çº¿ç¨‹ä¸­æ‰§è¡Œçš„ä»»åŠ¡å¯ä»¥æ­£å¸¸è¿›è¡Œäº†ã€‚<br>å°ç»“:æ­£å¸¸æƒ…å†µä¸‹ï¼Œåå°çº¿ç¨‹æ‰§è¡Œå®Œä»»åŠ¡ä¹‹åå°±å¤„äºæ­»äº¡çŠ¶æ€ï¼Œæˆ‘ä»¬è¦é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿå¯ä»¥åˆ©ç”¨RunLoopï¼Œå¹¶ä¸”ç»™å®ƒä¸€ä¸ªSourceè¿™æ ·æ¥ä¿è¯çº¿ç¨‹ä¾æ—§è¿˜åœ¨</p>
<h3 id="NSURLConnectionçš„æ‰§è¡Œè¿‡ç¨‹"><a href="#NSURLConnectionçš„æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="NSURLConnectionçš„æ‰§è¡Œè¿‡ç¨‹"></a>NSURLConnectionçš„æ‰§è¡Œè¿‡ç¨‹</h3><p>åœ¨ä½¿ç”¨NSURLConnectionæ—¶ï¼Œæˆ‘ä»¬ä¼šä¼ å…¥ä¸€ä¸ªDelegate,å½“æˆ‘ä»¬è°ƒç”¨äº†[connection start]ä¹‹åï¼Œè¿™ä¸ªDelegateä¼šä¸åœçš„æ”¶åˆ°äº‹ä»¶çš„å›è°ƒã€‚å®é™…ä¸Šï¼Œstartè¿™ä¸ªå‡½æ•°çš„å†…éƒ¨ä¼šè·å–CurrentRunloopï¼Œç„¶ååœ¨å…¶ä¸­çš„DefaultModeä¸­æ·»åŠ 4ä¸ªsourceã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒCFMultiplexerSourceæ˜¯è´Ÿè´£å„ç§Delegateå›è°ƒçš„ï¼ŒCFHTTPCookieStorageæ˜¯å¤„ç†å„ç§Cookieçš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º:<br><img src="/21/2015/Runloopæ¦‚è¿°/006.png" alt=""><br>ä»ä¸­å¯ä»¥çœ‹å‡ºï¼Œå½“å¼€å§‹ç½‘ç»œä¼ è¾“æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°NSURLConnectionåˆ›å»ºäº†ä¸¤ä¸ªæ–°çš„çº¿ç¨‹:com.apple.NSURLConnectionLoaderå’Œcom.apple.CFSocket.privateã€‚å…¶ä¸­CFSocketæ˜¯å¤„ç†åº•å±‚socketé“¾æ¥çš„ã€‚NSURLConnectionLoaderè¿™ä¸ªçº¿ç¨‹å†…éƒ¨ä¼šä½¿ç”¨RunLoopæ¥æ¥æ”¶åº•å±‚socketçš„äº‹ä»¶ï¼Œå¹¶é€šè¿‡ä¹‹å‰æ·»åŠ çš„sourceï¼Œæ¥é€šçŸ¥(å”¤é†’)ä¸Šå±‚çš„Delegateã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç†è§£æˆ‘ä»¬å¹³æ—¶å°è£…ç½‘ç»œè¯·æ±‚æ—¶å€™å¸¸è§çš„ä¸‹é¢é€»è¾‘äº†:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">while (!_isEndRequest)</div><div class="line">&#123;</div><div class="line">    NSLog(@&quot;entered run loop&quot;);</div><div class="line">    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];</div><div class="line">&#125;</div><div class="line"></div><div class="line">NSLog(@&quot;main finishedï¼Œtask be removed&quot;);</div><div class="line"></div><div class="line">- (void)connectionDidFinishLoading:(NSURLConnection *)connection</div><div class="line">&#123;</div><div class="line"></div><div class="line">  _isEndRequest = YES;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥è§£å†³ä¸‹é¢è¿™äº›ç–‘é—®äº†:<br></p>
<ul>
<li>ä¸ºä»€ä¹ˆè¿™ä¸ªWhileå¾ªç¯ä¸åœçš„æ‰§è¡Œï¼Œè¿˜éœ€è¦ä½¿ç”¨ä¸€ä¸ªRunLoop? ç¨‹åºæ‰§è¡Œä¸€ä¸ªwhileå¾ªç¯æ˜¯ä¸ä¼šè€—è´¹å¾ˆå¤§æ€§èƒ½çš„ï¼Œæˆ‘ä»¬è¿™é‡Œçš„ç›®çš„æ˜¯æƒ³è®©å­çº¿ç¨‹åœ¨æœ‰ä»»åŠ¡çš„æ—¶å€™å¤„ç†ä»»åŠ¡ï¼Œæ²¡æœ‰ä»»åŠ¡çš„æ—¶å€™ä¼‘çœ ï¼Œæ¥èŠ‚çº¦CPUçš„å¼€æ”¯ã€‚</li>
<li>å¦‚æœæ²¡æœ‰ä¸ºRunLoopæ·»åŠ item,é‚£ä¹ˆå®ƒå°±ä¼šç«‹å³é€€å‡ºï¼Œè¿™é‡Œçš„itemå‘¢? å…¶å®ç³»ç»Ÿå·²ç»ç»™æˆ‘ä»¬é»˜è®¤æ·»åŠ äº†4ä¸ªsourceäº†ã€‚</li>
<li>æ—¢ç„¶[[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];è®©çº¿ç¨‹åœ¨è¿™é‡Œåœä¸‹æ¥ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿™ä¸ªå¾ªç¯ä¼šæŒç»­çš„æ‰§è¡Œå‘¢ï¼Ÿå› ä¸ºè¿™ä¸ªä¸€ç›´åœ¨å¤„ç†ä»»åŠ¡ï¼Œå¹¶ä¸”æ¥å—ç³»ç»Ÿå¯¹è¿™ä¸ªDelegateçš„å›è°ƒï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå›è°ƒå”¤é†’äº†è¿™ä¸ªçº¿ç¨‹ï¼Œè®©å®ƒåœ¨è¿™é‡Œå¾ªç¯ã€‚</li>
</ul>
<h3 id="AFNetWorkingä¸­æ˜¯å¦‚ä½•ä½¿ç”¨RunLoopçš„"><a href="#AFNetWorkingä¸­æ˜¯å¦‚ä½•ä½¿ç”¨RunLoopçš„" class="headerlink" title="AFNetWorkingä¸­æ˜¯å¦‚ä½•ä½¿ç”¨RunLoopçš„?"></a>AFNetWorkingä¸­æ˜¯å¦‚ä½•ä½¿ç”¨RunLoopçš„?</h3><p>åœ¨AFNä¸­AFURLConnectionOperationæ˜¯åŸºäºNSURLConnectionæ„å»ºçš„ï¼Œå…¶å¸Œæœ›èƒ½å¤Ÿåœ¨åå°çº¿ç¨‹æ¥æ¥æ”¶Delegateçš„å›è°ƒã€‚<br>ä¸ºæ­¤AFNåˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹,ç„¶ååœ¨é‡Œé¢å¼€å¯äº†ä¸€ä¸ªRunLoopï¼Œç„¶åæ·»åŠ item</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">+ (void)networkRequestThreadEntryPoint:(id)__unused object &#123;</div><div class="line">@autoreleasepool &#123;</div><div class="line">    [[NSThread currentThread] setName:@&quot;AFNetworking&quot;];</div><div class="line">    NSRunLoop *runLoop = [NSRunLoop currentRunLoop];</div><div class="line">    [runLoop addPort:[NSMachPort port] forMode:NSDefaultRunLoopMode];</div><div class="line">    [runLoop run];</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (NSThread *)networkRequestThread &#123;</div><div class="line">    static NSThread *_networkRequestThread = nil;</div><div class="line">    static dispatch_once_t oncePredicate;</div><div class="line">    dispatch_once(&amp;oncePredicate, ^&#123;</div><div class="line">        _networkRequestThread = [[NSThread alloc] initWithTarget:self selector:@selector(networkRequestThreadEntryPoint:) object:nil];</div><div class="line">        [_networkRequestThread start];</div><div class="line">    &#125;);</div><div class="line">    return _networkRequestThread;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œè¿™ä¸ªNSMachPortçš„ä½œç”¨å’Œä¸Šæ–‡ä¸­çš„ä¸€æ ·ï¼Œå°±æ˜¯è®©çº¿ç¨‹ä¸è‡³äºåœ¨å¾ˆå¿«æ­»äº¡ï¼Œç„¶åRunLoopä¸è‡³äºé€€å‡º(å¦‚æœè¦ä½¿ç”¨è¿™ä¸ªMachPortçš„è¯ï¼Œè°ƒç”¨è€…éœ€è¦æŒæœ‰è¿™ä¸ªNSMachPortï¼Œç„¶ååœ¨å¤–éƒ¨çº¿ç¨‹é€šè¿‡è¿™ä¸ªportå‘é€ä¿¡æ¯åˆ°è¿™ä¸ªloopå†…éƒ¨,å®ƒè¿™é‡Œæ²¡æœ‰è¿™ä¹ˆåš)ã€‚ç„¶åå’Œä¸Šé¢çš„åšæ³•ç›¸ä¼¼ï¼Œåœ¨éœ€è¦åå°æ‰§è¡Œè¿™ä¸ªä»»åŠ¡çš„æ—¶å€™ï¼Œä¼šé€šè¿‡è°ƒç”¨:[NSObject performSelector:onThread:..]æ¥å°†è¿™ä¸ªä»»åŠ¡æ‰”ç»™åå°çº¿ç¨‹çš„RunLoopä¸­æ¥æ‰§è¡Œã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">- (void)start &#123;</div><div class="line">[self.lock lock];</div><div class="line">if ([self isCancelled]) &#123;</div><div class="line">    [self performSelector:@selector(cancelConnection) onThread:[[self class] networkRequestThread] withObject:nil waitUntilDone:NO modes:[self.runLoopModes allObjects]];</div><div class="line">&#125; else if ([self isReady]) &#123;</div><div class="line">    self.state = AFOperationExecutingState;</div><div class="line">    [self performSelector:@selector(operationDidStart) onThread:[[self class] networkRequestThread] withObject:nil waitUntilDone:NO modes:[self.runLoopModes allObjects]];</div><div class="line">&#125;</div><div class="line">[self.lock unlock];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="GCDå®šæ—¶å™¨çš„å®ç°"><a href="#GCDå®šæ—¶å™¨çš„å®ç°" class="headerlink" title="GCDå®šæ—¶å™¨çš„å®ç°"></a>GCDå®šæ—¶å™¨çš„å®ç°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">- (void)gcdTimer&#123;</div><div class="line"></div><div class="line">// get the queue</div><div class="line">dispatch_queue_t queue = dispatch_get_global_queue(0, 0);</div><div class="line"></div><div class="line">// creat timer</div><div class="line">self.timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);</div><div class="line">// config the timer (starting timeï¼Œinterval)</div><div class="line">// set begining time</div><div class="line">dispatch_time_t start = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1.0 * NSEC_PER_SEC));</div><div class="line">// set the interval</div><div class="line">uint64_t interver = (uint64_t)(1.0 * NSEC_PER_SEC);</div><div class="line"></div><div class="line">dispatch_source_set_timer(self.timer, start, interver, 0.0);</div><div class="line"></div><div class="line">dispatch_source_set_event_handler(self.timer, ^&#123;</div><div class="line"></div><div class="line">    // the tarsk needed to be processed async</div><div class="line">    dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;</div><div class="line"></div><div class="line">        for (int i = 0; i &lt; 100000; i++) &#123;</div><div class="line">            NSLog(@&quot;gcdTimer&quot;);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;);</div><div class="line">dispatch_resume(self.timer);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è°ˆè°ˆä½ å¯¹Run-Loopçš„ç†è§£"><a href="#è°ˆè°ˆä½ å¯¹Run-Loopçš„ç†è§£" class="headerlink" title="è°ˆè°ˆä½ å¯¹Run Loopçš„ç†è§£"></a>è°ˆè°ˆä½ å¯¹Run Loopçš„ç†è§£</h3><ul>
<li>RunLoopæ˜¯å¤šçº¿ç¨‹çš„ä¸€ä¸ªå¾ˆé‡è¦çš„æœºåˆ¶ï¼Œå°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œå®Œä»»åŠ¡åå°±ä¼šé€€å‡ºçº¿ç¨‹ã€‚ä¸»çº¿ç¨‹ä¼šé€šè¿‡do-whileæ­»å¾ªç¯è®©ç¨‹åºæŒç»­ç­‰å¾…ä¸‹ä¸€ä¸ªä»»åŠ¡ä¸é€€å‡ºã€‚é€šè¿‡mach_msg()è®©runloopæ²¡äº‹æ—¶è¿›å…¥trapçŠ¶æ€ï¼ŒèŠ‚çœCPUèµ„æºã€‚éä¸»çº¿ç¨‹é€šå¸¸æ¥è¯´å°±æ˜¯ä¸ºäº†æ‰§è¡ŒæŸä¸ªä»»åŠ¡è€Œåˆ›å»ºçš„ï¼Œæ‰§è¡Œå®Œå°±ä¼šå½’è¿˜èµ„æºï¼Œå› æ­¤é»˜è®¤ä¸å¼€å¯RunLoop</li>
<li>å®è´¨ä¸Šï¼Œå¯¹äºå­çº¿ç¨‹çš„runloopæ˜¯é»˜è®¤ä¸å­˜åœ¨çš„ï¼Œå› ä¸ºè‹¹æœé‡‡ç”¨äº†æ‡’åŠ è½½çš„æ–¹å¼ï¼Œå¦‚æœæ²¡æœ‰æ‰‹åŠ¨è°ƒç”¨[NSRunLoop currentRunLoop]çš„è¯ï¼Œå°±ä¸ä¼šå»æŸ¥è¯¢å½“å‰çº¿ç¨‹çš„RunLoopï¼Œä¹Ÿä¸ä¼šåˆ›å»ºã€åŠ è½½</li>
<li><p>å½“ç„¶å¦‚æœå­çº¿ç¨‹å¤„ç†å®ŒæŸä¸ªä»»åŠ¡åä¸é€€å‡ºï¼Œéœ€è¦ç»§ç»­ç­‰å¾…æ¥å—äº‹ä»¶ï¼Œéœ€è¦å¯åŠ¨çš„æ—¶å€™ä¹Ÿå¯ä»¥æ‰‹åŠ¨å¯åŠ¨ï¼Œæ¯”å¦‚è¯´æ·»åŠ å®šæ—¶å™¨çš„æ—¶å€™å°±è¦æ‰‹åŠ¨å¼€å§‹RunLoop<br>å¦‚ä½•å¤„ç†äº‹ä»¶</p>
</li>
<li><p>ç•Œé¢åˆ·æ–°ï¼š å½“UIæ”¹å˜ï¼ˆ Frameå˜åŒ–ã€ UIView/CALayer çš„ç»§æ‰¿ç»“æ„å˜åŒ–ç­‰ï¼‰æ—¶ï¼Œæˆ–æ‰‹åŠ¨è°ƒç”¨äº† UIView/CALayer çš„ setNeedsLayout/setNeedsDisplayæ–¹æ³•åï¼Œè¿™ä¸ª UIView/CALayer å°±è¢«æ ‡è®°ä¸ºå¾…å¤„ç†ã€‚ è‹¹æœæ³¨å†Œäº†ä¸€ä¸ªç”¨æ¥ç›‘å¬BeforeWaitingå’ŒExitçš„Observerï¼Œåœ¨å®ƒçš„å›è°ƒå‡½æ•°é‡Œä¼šéå†æ‰€æœ‰å¾…å¤„ç†çš„ UIView/CAlayer ä»¥æ‰§è¡Œå®é™…çš„ç»˜åˆ¶å’Œè°ƒæ•´ï¼Œå¹¶æ›´æ–° UI ç•Œé¢ã€‚</p>
</li>
<li><p>æ‰‹åŠ¿è¯†åˆ«ï¼š å¦‚æœä¸Šä¸€æ­¥çš„ _UIApplicationHandleEventQueue() è¯†åˆ«åˆ°æ˜¯ä¸€ä¸ªguestureæ‰‹åŠ¿ï¼Œä¼šè°ƒç”¨Cancelæ–¹æ³•å°†å½“å‰çš„touchesBegin/Move/End ç³»åˆ—å›è°ƒæ‰“æ–­ã€‚éšåç³»ç»Ÿå°†å¯¹åº”çš„ UIGestureRecognizer æ ‡è®°ä¸ºå¾…å¤„ç†ã€‚ è‹¹æœæ³¨å†Œäº†ä¸€ä¸ª Observer ç›‘æµ‹ BeforeWaiting (Loopå³å°†è¿›å…¥ä¼‘çœ ) äº‹ä»¶ï¼Œå…¶å›è°ƒå‡½æ•°ä¸º _UIGestureRecognizerUpdateObserver()ï¼Œå…¶å†…éƒ¨ä¼šè·å–æ‰€æœ‰åˆšè¢«æ ‡è®°ä¸ºå¾…å¤„ç†çš„ GestureRecognizerï¼Œå¹¶æ‰§è¡ŒGestureRecognizerçš„å›è°ƒã€‚ å½“æœ‰ UIGestureRecognizer çš„å˜åŒ–(åˆ›å»º/é”€æ¯/çŠ¶æ€æ”¹å˜)æ—¶ï¼Œè¿™ä¸ªå›è°ƒéƒ½ä¼šè¿›è¡Œç›¸åº”å¤„ç†ã€‚</p>
</li>
<li><p>ç½‘ç»œè¯·æ±‚ï¼šæœ€åº•å±‚æ˜¯CFSocketå±‚ï¼Œç„¶åæ˜¯CFNetworkå°†å…¶å°è£…ï¼Œç„¶åæ˜¯NSURLConnectionå¯¹CFNetworkè¿›è¡Œé¢å‘å¯¹è±¡çš„å°è£…ï¼ŒNSURLConnectionæ˜¯iOS7ä¸­æ–°å¢çš„æ¥å£ã€‚å½“ç½‘ç»œå¼€å§‹ä¼ è¾“æ—¶ï¼ŒNSURLConnectionåˆ›å»ºäº†ä¸¤ä¸ªæ–°çº¿ç¨‹ï¼šcom.apple.NSURLConnectionLoaderå’Œcom.apple.CFSocket.privateã€‚å…¶ä¸­CFSocketçº¿ç¨‹æ˜¯å¤„ç†åº•å±‚socketè¿æ¥çš„ã€‚NSURLConnectionLoaderè¿™ä¸ªçº¿ç¨‹å†…éƒ¨ä¼šä½¿ç”¨RunLoopæ¥æ¥å—åº•å±‚socketçš„äº‹ä»¶ï¼Œå¹¶æ·»åŠ åˆ°ä¸Šå±‚çš„Delegate</p>
</li>
</ul>
<p>åº”ç”¨</p>
<ul>
<li><p>æ»‘åŠ¨ä¸å›¾ç‰‡åˆ·æ–°ï¼šå½“tableViewçš„cellä¸Šæœ‰éœ€è¦ä»ç½‘ç»œè·å–çš„å›¾ç‰‡çš„æ—¶å€™ï¼Œæ»šåŠ¨tableViewï¼Œå¼‚æ­¥çº¿ç¨‹å›å»åŠ è½½å›¾ç‰‡ï¼ŒåŠ è½½å®Œæˆåä¸»çº¿ç¨‹ä¼šè®¾ç½®cellçš„å›¾ç‰‡ï¼Œä½†æ˜¯ä¼šé€ æˆå¡é¡¿ã€‚å¯ä»¥è®¾ç½®å›¾ç‰‡çš„ä»»åŠ¡åœ¨CFRunloopDefaultModeä¸‹è¿›è¡Œï¼Œå½“æ»šåŠ¨tableViewçš„æ—¶å€™ï¼ŒRunloopåˆ‡æ¢åˆ°UITrackingRunLoopModeï¼Œä¸å»è®¾ç½®å›¾ç‰‡ï¼Œè€Œæ˜¯è€Œæ˜¯å½“åœæ­¢çš„æ—¶å€™ï¼Œå†å»è®¾ç½®å›¾ç‰‡ã€‚ï¼ˆåœ¨viewDidLoadä¸­è°ƒç”¨self.imageView performSelector@selector(setImage) withObject:â€¦afterDelay:â€¦inModes@[NSDefayltRunLoopMode]ï¼‰</p>
</li>
<li><p>å¸¸é©»å­çº¿ç¨‹ï¼Œä¿æŒå­çº¿ç¨‹ä¸€ç›´å¤„ç†äº‹ä»¶ ä¸ºäº†ä¿è¯çº¿ç¨‹é•¿æœŸè¿è½¬ï¼Œå¯ä»¥åœ¨å­çº¿ç¨‹ä¸­åŠ å…¥RunLoopï¼Œå¹¶ä¸”ç»™Runloopè®¾ç½®itemï¼Œé˜²æ­¢Runloopè‡ªåŠ¨é€€å‡º</p>
</li>
</ul>
<h3 id="RunLoopå¤„ç†çš„å‡ ç§äº‹ä»¶"><a href="#RunLoopå¤„ç†çš„å‡ ç§äº‹ä»¶" class="headerlink" title="RunLoopå¤„ç†çš„å‡ ç§äº‹ä»¶"></a>RunLoopå¤„ç†çš„å‡ ç§äº‹ä»¶</h3><blockquote>
<p>static void <strong>CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION</strong>();<br>static void <strong>CFRUNLOOP_IS_CALLING_OUT_TO_A_BLOCK</strong>();<br>static void <strong>CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE</strong>();<br>static void <strong>CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION</strong>();<br>static void <strong>CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION</strong>();<br>static void <strong>CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION</strong>();</p>
</blockquote>
<p>ä»–å¯¹è¿™å…­ç±»äº‹ä»¶æœ‰å¦‚ä¸‹è§£é‡Š</p>
<p>1.Observeräº‹ä»¶ï¼Œrunloopä¸­çŠ¶æ€å˜åŒ–æ—¶è¿›è¡Œé€šçŸ¥ã€‚ï¼ˆå¾®ä¿¡å¡é¡¿ç›‘æ§å°±æ˜¯åˆ©ç”¨è¿™ä¸ªäº‹ä»¶é€šçŸ¥æ¥è®°å½•ä¸‹æœ€è¿‘ä¸€æ¬¡main runloopæ´»åŠ¨æ—¶é—´ï¼Œåœ¨å¦ä¸€ä¸ªcheckçº¿ç¨‹ä¸­ç”¨å®šæ—¶å™¨æ£€æµ‹å½“å‰æ—¶é—´è·ç¦»æœ€åä¸€æ¬¡æ´»åŠ¨æ—¶é—´è¿‡ä¹…æ¥åˆ¤æ–­åœ¨ä¸»çº¿ç¨‹ä¸­çš„å¤„ç†é€»è¾‘è€—æ—¶å’Œå¡ä¸»çº¿ç¨‹ï¼‰ã€‚è¿™é‡Œè¿˜éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼ŒCAAnimationæ˜¯ç”±RunloopObserverè§¦å‘å›è°ƒæ¥é‡ç»˜ï¼Œã€‚</p>
<p>2.Blockäº‹ä»¶ï¼Œéå»¶è¿Ÿçš„NSObject PerformSelectorç«‹å³è°ƒç”¨ï¼Œdispatch_afterç«‹å³è°ƒç”¨ï¼Œblockå›è°ƒã€‚</p>
<p>3.Main_Dispatch_Queueäº‹ä»¶ï¼šGCDä¸­dispatchåˆ°main queueçš„blockä¼šè¢«dispatchåˆ°main loopæ‰§è¡Œï¼Œå¦‚æœä¸»çº¿ç¨‹æ˜¯ç¡çœ çš„ï¼Œè¿™ä¸ªè¡Œä¸ºæ˜¯ä¼šå”¤é†’ä¸»çº¿ç¨‹çš„ã€‚</p>
<p>4.Timeräº‹ä»¶ï¼šå»¶è¿Ÿçš„NSObject PerformSelectorï¼Œå»¶è¿Ÿçš„dispatch_afterï¼Œtimeräº‹ä»¶ã€‚CADisplayLinkä¹Ÿæ˜¯è¿™é‡Œè§¦å‘ï¼ŒåŒæ—¶è¿™ä¸ªè¡Œä¸ºä¹Ÿæ˜¯ä¼šå”¤é†’çº¿ç¨‹çš„ã€‚å¦‚æœæŸä¸ªtimeråˆ°äº†å›è°ƒæ—¶æœºï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™runloopåœ¨å¿™ç€ï¼Œé‚£ä¹ˆè¿™ä¸ªtimerå°±ä¼šè¢«è·³è¿‡å»ï¼Œè€Œä¸æ˜¯å»¶æ—¶æ‰§è¡Œï¼Œç­‰åˆ°ä¸‹ä¸€æ¬¡timerè§¦å‘æ‰ä¼šè¢«æ‰§è¡Œã€‚</p>
<p>5.Source0äº‹ä»¶ï¼šå¤„ç†å¦‚UIEventï¼ŒCFSocketè¿™ç±»äº‹ä»¶ã€‚éœ€è¦æ‰‹åŠ¨è§¦å‘ã€‚è§¦æ‘¸äº‹ä»¶å…¶å®æ˜¯Source1æ¥æ”¶ç³»ç»Ÿäº‹ä»¶ååœ¨å›è°ƒ <code>__IOHIDEventSystemClientQueueCallback()</code> å†…è§¦å‘çš„ Source0ï¼ŒSource0 å†è§¦å‘çš„ <code>_UIApplicationHandleEventQueue()</code>ã€‚source0ä¸€å®šæ˜¯è¦å”¤é†’runloopåŠæ—¶å“åº”å¹¶æ‰§è¡Œçš„ï¼Œå¦‚æœrunloopæ­¤æ—¶åœ¨ä¼‘çœ ç­‰å¾…ç³»ç»Ÿçš„ mach_msgäº‹ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šé€šè¿‡source1æ¥å”¤é†’runloopæ‰§è¡Œã€‚<br>[self performSelector:@selector(perform1) withObject:nil];æ˜¯èµ°source0çš„ã€‚</p>
<p>6.Source1äº‹ä»¶ï¼šå¤„ç†ç³»ç»Ÿå†…æ ¸çš„mach_msgäº‹ä»¶ã€‚</p>
<p>éªŒè¯æ–¹æ³•æ˜¯ï¼Œæ‰“æ–­ç‚¹ï¼Œlldbä¸Šè¾¹çš„è°ƒç”¨æ ˆ</p>
<p>æ·±åˆ»ç†è§£ä¸€ä¸‹å°±æ˜¯ï¼Œç‚¹å‡»äº‹ä»¶ç­‰ï¼Œå’ŒUIç»˜åˆ¶ï¼Œéƒ½åªæ˜¯å…ˆæ ‡è®°ï¼Œç„¶åç­‰åˆ°çº¿ç¨‹ç¡çœ å‰å†æ ¹æ®æ ‡è®°ï¼Œç»Ÿä¸€å¤„ç†ã€‚è€Œåšä¸€ä¸ªå€¼è®¡ç®—ä¹‹ç±»çš„ï¼Œç›´æ¥å°±æ˜¯source0ç›´æ¥è¿›è¡Œæ“ä½œäº†ã€‚</p>
<p>å¦‚ä½•æ¶‰åŠåˆ°åˆ‡æ¢çº¿ç¨‹ï¼Œä¸€èˆ¬æ˜¯è§¦å‘ä¸€ä¸ªsource1ï¼Œä¸éœ€è¦åˆ‡æ¢çº¿ç¨‹çš„performæ˜¯ä¸€ä¸ªsource0äº‹ä»¶ã€‚</p>
<h3 id="å‡ ä¸ªé—®é¢˜"><a href="#å‡ ä¸ªé—®é¢˜" class="headerlink" title="å‡ ä¸ªé—®é¢˜"></a>å‡ ä¸ªé—®é¢˜</h3><h4 id="runloopè¢«å”¤é†’æœ‰å‡ ç§æƒ…å†µï¼Ÿ"><a href="#runloopè¢«å”¤é†’æœ‰å‡ ç§æƒ…å†µï¼Ÿ" class="headerlink" title="runloopè¢«å”¤é†’æœ‰å‡ ç§æƒ…å†µï¼Ÿ"></a>runloopè¢«å”¤é†’æœ‰å‡ ç§æƒ…å†µï¼Ÿ</h4><ul>
<li>åŸºäºportçš„sourceäº‹ä»¶ï¼Œæ¯”å¦‚è§¦æ‘¸è¿™ç§source1</li>
<li>timeråˆ°æ—¶é—´äº†</li>
<li>runloopè‡ªèº«ç¡çœ æ—¶é—´åˆ°äº†ï¼ŒiOSç°åœ¨æµ‹è¯•æ˜¯1åˆ†é’Ÿï¼Œè¿™æ˜¯è‡ªèº«çš„ä¸€ä¸ªä¿æ´»æœºåˆ¶ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹é•¿æœŸä¼‘çœ ï¼Œé‚£ä¹ˆunixå°±ä¼šæŠŠå®ƒæ€æ­»</li>
<li>è¢«å…¶ä»–ä»€ä¹ˆè°ƒç”¨è€…æ‰‹åŠ¨å”¤é†’ï¼Œæ¯”å¦‚å…¶ä»–çº¿ç¨‹è¦æ±‚å›åˆ°è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œä¸ªå•¥æ–¹æ³•</li>
</ul>
<h4 id="åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œä¸€ä¸ªå¤§è®¡ç®—çš„æ–¹æ³•ï¼Œå¦‚ä½•ä¿è¯æœ€ä½é™åº¦å½±å“UI"><a href="#åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œä¸€ä¸ªå¤§è®¡ç®—çš„æ–¹æ³•ï¼Œå¦‚ä½•ä¿è¯æœ€ä½é™åº¦å½±å“UI" class="headerlink" title="åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œä¸€ä¸ªå¤§è®¡ç®—çš„æ–¹æ³•ï¼Œå¦‚ä½•ä¿è¯æœ€ä½é™åº¦å½±å“UI"></a>åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œä¸€ä¸ªå¤§è®¡ç®—çš„æ–¹æ³•ï¼Œå¦‚ä½•ä¿è¯æœ€ä½é™åº¦å½±å“UI</h4><p>å°†è¿™ä¸ªä»»åŠ¡è¿›è¡Œæ‹†åˆ†ï¼Œé€šè¿‡perform afterè¿›è¡Œæ‹¼æ¥ï¼Œè¿™æ ·è¿™ä¸ªä»»åŠ¡ä¼šè¢«åˆ†æˆå‡ ä¸ªrunloopå»æ‰§è¡Œï¼Œè¿™æ ·æœ‰æœºä¼šè¿›å…¥åˆ°çº¿ç¨‹ä¼‘çœ ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šæœºä¼šæäº¤UIçš„ä¸€äº›å˜åŒ–äº†</p>
<blockquote>
<p>å…·ä½“é—®é¢˜ï¼Œè¦æ±‚æ‰“å°1-10000ï¼Œç„¶åç‚¹å‡»ä¸€ä¸ªæŒ‰é’®å¯ä»¥æš‚åœï¼Œæ€ä¹ˆåšï¼Ÿ</p>
</blockquote>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å¦‚æœæˆ‘ä»¬æƒ³è¦æ‰“æ–­ä¸€ä¸ªæ–¹æ³•çš„æ‰§è¡Œï¼Œä¸€ä¸ªåŠæ³•å°±æ˜¯ç”¨<code>[self performSelector:@selector(perform4) withObject:nil afterDelay:0.005];</code>æ¥è¿æ¥æ–¹æ³•çš„æ‰§è¡Œï¼Œè¿™é‡Œå»¶è¿Ÿæ—¶é—´è®¾ç½®ä¸º0æœ‰æ—¶æ˜¯æ— æ•ˆçš„ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä¸€ä¸ªå¾ˆå°çš„æ—¶é—´ï¼Œ</p>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[(è½¬)è§†éŸ³é¢‘ç¼–è§£ç æŠ€æœ¯é›¶åŸºç¡€å­¦ä¹ æ–¹æ³•]]></title>
      <url>/2015/07/17/2015/%E8%BD%AC-%E8%A7%86%E9%9F%B3%E9%A2%91%E7%BC%96%E8%A7%A3%E7%A0%81%E6%8A%80%E6%9C%AF%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>åŸæ–‡åœ°å€<a href="http://blog.csdn.net/leixiaohua1020/article/details/18893769" target="_blank" rel="external">http://blog.csdn.net/leixiaohua1020/article/details/18893769</a><br><a id="more"></a></p>
<h2 id="è§†é¢‘æ’­æ”¾å™¨åŸç†"><a href="#è§†é¢‘æ’­æ”¾å™¨åŸç†" class="headerlink" title="è§†é¢‘æ’­æ”¾å™¨åŸç†"></a>è§†é¢‘æ’­æ”¾å™¨åŸç†</h2><p>è§†éŸ³é¢‘æŠ€æœ¯ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ç‚¹ï¼šå°è£…æŠ€æœ¯ï¼Œè§†é¢‘å‹ç¼©ç¼–ç æŠ€æœ¯ä»¥åŠéŸ³é¢‘å‹ç¼©ç¼–ç æŠ€æœ¯ã€‚å¦‚æœè€ƒè™‘åˆ°ç½‘ç»œä¼ è¾“çš„è¯ï¼Œè¿˜åŒ…æ‹¬æµåª’ä½“åè®®æŠ€æœ¯ã€‚<br>è§†é¢‘æ’­æ”¾å™¨çš„æºä»£ç è¯¦ç»†è§£æï¼ˆMedia Player Classic - HCï¼ŒMplayerï¼ŒFFplayï¼ŒXBMCï¼‰å¯ä»¥å‚è€ƒç³»åˆ—æ–‡ç« ï¼š<br>Media Player Classicï¼šMedia Player Classic - HCæºä»£ç åˆ†æ 1ï¼šæ•´ä½“ç»“æ„[ç³»åˆ—æ–‡ç« ]<br>Mplayerï¼šMPlayeræºä»£ç åˆ†æ<br>FFplayï¼š FFplayæºä»£ç åˆ†æï¼šæ•´ä½“æµç¨‹å›¾<br>XBMCï¼š XBMCæºä»£ç åˆ†æ 1ï¼šæ•´ä½“ç»“æ„ä»¥åŠç¼–è¯‘æ–¹æ³•[ç³»åˆ—æ–‡ç« ]<br>åœ¨è¿™é‡Œä¸ç»†è¯´äº†ï¼Œä»…ç®€è¦è¯´æ˜ä¸€ä¸‹è§†é¢‘æ’­æ”¾å™¨çš„åŸç†ã€‚<br>è§†é¢‘æ’­æ”¾å™¨æ’­æ”¾ä¸€ä¸ªäº’è”ç½‘ä¸Šçš„è§†é¢‘æ–‡ä»¶ï¼Œéœ€è¦ç»è¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼šè§£åè®®ï¼Œè§£å°è£…ï¼Œè§£ç è§†éŸ³é¢‘ï¼Œè§†éŸ³é¢‘åŒæ­¥ã€‚å¦‚æœæ’­æ”¾æœ¬åœ°æ–‡ä»¶åˆ™ä¸éœ€è¦è§£åè®®ï¼Œä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼šè§£å°è£…ï¼Œè§£ç è§†éŸ³é¢‘ï¼Œè§†éŸ³é¢‘åŒæ­¥ã€‚ä»–ä»¬çš„è¿‡ç¨‹å¦‚å›¾æ‰€ç¤ºã€‚<br><img src="http://7xrn7f.com1.z0.glb.clouddn.com/16-7-17/69435586.jpg" alt=""></p>
<p>è§£åè®®çš„ä½œç”¨ï¼Œå°±æ˜¯å°†æµåª’ä½“åè®®çš„æ•°æ®ï¼Œè§£æä¸ºæ ‡å‡†çš„ç›¸åº”çš„å°è£…æ ¼å¼æ•°æ®ã€‚è§†éŸ³é¢‘åœ¨ç½‘ç»œä¸Šä¼ æ’­çš„æ—¶å€™ï¼Œå¸¸å¸¸é‡‡ç”¨å„ç§æµåª’ä½“åè®®ï¼Œä¾‹å¦‚HTTPï¼ŒRTMPï¼Œæˆ–æ˜¯MMSç­‰ç­‰ã€‚è¿™äº›åè®®åœ¨ä¼ è¾“è§†éŸ³é¢‘æ•°æ®çš„åŒæ—¶ï¼Œä¹Ÿä¼šä¼ è¾“ä¸€äº›ä¿¡ä»¤æ•°æ®ã€‚è¿™äº›ä¿¡ä»¤æ•°æ®åŒ…æ‹¬å¯¹æ’­æ”¾çš„æ§åˆ¶ï¼ˆæ’­æ”¾ï¼Œæš‚åœï¼Œåœæ­¢ï¼‰ï¼Œæˆ–è€…å¯¹ç½‘ç»œçŠ¶æ€çš„æè¿°ç­‰ã€‚è§£åè®®çš„è¿‡ç¨‹ä¸­ä¼šå»é™¤æ‰ä¿¡ä»¤æ•°æ®è€Œåªä¿ç•™è§†éŸ³é¢‘æ•°æ®ã€‚ä¾‹å¦‚ï¼Œé‡‡ç”¨RTMPåè®®ä¼ è¾“çš„æ•°æ®ï¼Œç»è¿‡è§£åè®®æ“ä½œåï¼Œè¾“å‡ºFLVæ ¼å¼çš„æ•°æ®ã€‚<br>è§£å°è£…çš„ä½œç”¨ï¼Œå°±æ˜¯å°†è¾“å…¥çš„å°è£…æ ¼å¼çš„æ•°æ®ï¼Œåˆ†ç¦»æˆä¸ºéŸ³é¢‘æµå‹ç¼©ç¼–ç æ•°æ®å’Œè§†é¢‘æµå‹ç¼©ç¼–ç æ•°æ®ã€‚å°è£…æ ¼å¼ç§ç±»å¾ˆå¤šï¼Œä¾‹å¦‚MP4ï¼ŒMKVï¼ŒRMVBï¼ŒTSï¼ŒFLVï¼ŒAVIç­‰ç­‰ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å°†å·²ç»å‹ç¼©ç¼–ç çš„è§†é¢‘æ•°æ®å’ŒéŸ³é¢‘æ•°æ®æŒ‰ç…§ä¸€å®šçš„æ ¼å¼æ”¾åˆ°ä¸€èµ·ã€‚ä¾‹å¦‚ï¼ŒFLVæ ¼å¼çš„æ•°æ®ï¼Œç»è¿‡è§£å°è£…æ“ä½œåï¼Œè¾“å‡ºH.264ç¼–ç çš„è§†é¢‘ç æµå’ŒAACç¼–ç çš„éŸ³é¢‘ç æµã€‚<br>è§£ç çš„ä½œç”¨ï¼Œå°±æ˜¯å°†è§†é¢‘/éŸ³é¢‘å‹ç¼©ç¼–ç æ•°æ®ï¼Œè§£ç æˆä¸ºéå‹ç¼©çš„è§†é¢‘/éŸ³é¢‘åŸå§‹æ•°æ®ã€‚éŸ³é¢‘çš„å‹ç¼©ç¼–ç æ ‡å‡†åŒ…å«AACï¼ŒMP3ï¼ŒAC-3ç­‰ç­‰ï¼Œè§†é¢‘çš„å‹ç¼©ç¼–ç æ ‡å‡†åˆ™åŒ…å«H.264ï¼ŒMPEG2ï¼ŒVC-1ç­‰ç­‰ã€‚è§£ç æ˜¯æ•´ä¸ªç³»ç»Ÿä¸­æœ€é‡è¦ä¹Ÿæ˜¯æœ€å¤æ‚çš„ä¸€ä¸ªç¯èŠ‚ã€‚é€šè¿‡è§£ç ï¼Œå‹ç¼©ç¼–ç çš„è§†é¢‘æ•°æ®è¾“å‡ºæˆä¸ºéå‹ç¼©çš„é¢œè‰²æ•°æ®ï¼Œä¾‹å¦‚YUV420Pï¼ŒRGBç­‰ç­‰ï¼›å‹ç¼©ç¼–ç çš„éŸ³é¢‘æ•°æ®è¾“å‡ºæˆä¸ºéå‹ç¼©çš„éŸ³é¢‘æŠ½æ ·æ•°æ®ï¼Œä¾‹å¦‚PCMæ•°æ®ã€‚<br>è§†éŸ³é¢‘åŒæ­¥çš„ä½œç”¨ï¼Œå°±æ˜¯æ ¹æ®è§£å°è£…æ¨¡å—å¤„ç†è¿‡ç¨‹ä¸­è·å–åˆ°çš„å‚æ•°ä¿¡æ¯ï¼ŒåŒæ­¥è§£ç å‡ºæ¥çš„è§†é¢‘å’ŒéŸ³é¢‘æ•°æ®ï¼Œå¹¶å°†è§†é¢‘éŸ³é¢‘æ•°æ®é€è‡³ç³»ç»Ÿçš„æ˜¾å¡å’Œå£°å¡æ’­æ”¾å‡ºæ¥ã€‚<br>æ¥ä¸‹æ¥çš„å‡ èŠ‚æˆ‘ä»¬å°†ä¼šåˆ—å‡ºä¸»è¦çš„æµåª’ä½“åè®®ï¼Œå°è£…æ ¼å¼ï¼Œä»¥åŠè§†éŸ³é¢‘ç¼–ç æ ‡å‡†ã€‚æ›´è¯¦ç»†çš„æ¯”è¾ƒå¯ä»¥å‚è€ƒï¼š<br>è§†é¢‘å‚æ•°ï¼ˆæµåª’ä½“ç³»ç»Ÿï¼Œå°è£…æ ¼å¼ï¼Œè§†é¢‘ç¼–ç ï¼ŒéŸ³é¢‘ç¼–ç ï¼Œæ’­æ”¾å™¨ï¼‰å¯¹æ¯”<br>æœ‰å…³æœ¬æ–‡ä¸­æ¶‰åŠåˆ°çš„åè®®æ•°æ®ã€å°è£…æ ¼å¼æ•°æ®ã€è§†é¢‘ç¼–ç æ•°æ®ã€éŸ³é¢‘ç¼–ç æ•°æ®ã€è§†é¢‘åƒç´ æ•°æ®ã€éŸ³é¢‘é‡‡æ ·æ•°</p>
<h2 id="æµåª’ä½“åè®®"><a href="#æµåª’ä½“åè®®" class="headerlink" title="æµåª’ä½“åè®®"></a>æµåª’ä½“åè®®</h2><p>æµåª’ä½“åè®®æ˜¯æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´é€šä¿¡éµå¾ªçš„è§„å®šã€‚å½“å‰ç½‘ç»œä¸Šä¸»è¦çš„æµåª’ä½“åè®®å¦‚è¡¨æ‰€ç¤ºã€‚<br>ä¸»è¦æµåª’ä½“åè®®ä¸€è§ˆ<br><img src="http://7xrn7f.com1.z0.glb.clouddn.com/16-7-17/52205431.jpg" alt=""><br>RTSP+RTPç»å¸¸ç”¨äºIPTVé¢†åŸŸã€‚å› ä¸ºå…¶é‡‡ç”¨UDPä¼ è¾“è§†éŸ³é¢‘ï¼Œæ”¯æŒç»„æ’­ï¼Œæ•ˆç‡è¾ƒé«˜ã€‚ä½†å…¶ç¼ºç‚¹æ˜¯ç½‘ç»œä¸å¥½çš„æƒ…å†µä¸‹å¯èƒ½ä¼šä¸¢åŒ…ï¼Œå½±å“è§†é¢‘è§‚çœ‹è´¨é‡ã€‚å› è€Œå›´ç»•IPTVçš„è§†é¢‘è´¨é‡çš„ç ”ç©¶è¿˜æ˜¯æŒºå¤šçš„ã€‚<br>RTSPè§„èŒƒå¯å‚è€ƒï¼šRTSPåè®®å­¦ä¹ ç¬”è®°<br>RTSP+RTPç³»ç»Ÿä¸­è¡¡é‡æœåŠ¡è´¨é‡å¯å‚è€ƒï¼šç½‘ç»œè§†é¢‘ä¼ è¾“çš„æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰<br>ä¸Šæµ·IPTVç æµåˆ†æç»“æœå¯å‚è€ƒï¼šIPTVè§†é¢‘ç æµåˆ†æ<br>å› ä¸ºäº’è”ç½‘ç½‘ç»œç¯å¢ƒçš„ä¸ç¨³å®šæ€§ï¼ŒRTSP+RTPè¾ƒå°‘ç”¨äºäº’è”ç½‘è§†éŸ³é¢‘ä¼ è¾“ã€‚äº’è”ç½‘è§†é¢‘æœåŠ¡é€šå¸¸é‡‡ç”¨TCPä½œä¸ºå…¶æµåª’ä½“çš„ä¼ è¾“å±‚åè®®ï¼Œå› è€ŒåƒRTMPï¼ŒMMSï¼ŒHTTPè¿™ç±»çš„åè®®å¹¿æ³›ç”¨äºäº’è”ç½‘è§†éŸ³é¢‘æœåŠ¡ä¹‹ä¸­ã€‚è¿™ç±»åè®®ä¸ä¼šå‘ç”Ÿä¸¢åŒ…ï¼Œå› è€Œä¿è¯äº†è§†é¢‘çš„è´¨é‡ï¼Œä½†æ˜¯ä¼ è¾“çš„æ•ˆç‡ä¼šç›¸å¯¹ä½ä¸€äº›ã€‚<br>æ­¤å¤–RTMFPæ˜¯ä¸€ç§æ¯”è¾ƒæ–°çš„æµåª’ä½“åè®®ï¼Œç‰¹ç‚¹æ˜¯æ”¯æŒP2Pã€‚<br>RTMPæˆ‘åšçš„ç ”ç©¶ç›¸å¯¹å¤šä¸€äº›ï¼šæ¯”å¦‚RTMPè§„èŒƒç®€å•åˆ†æï¼Œæˆ–è€…RTMPæµåª’ä½“æ’­æ”¾è¿‡ç¨‹<br>ç›¸å…³å·¥å…·çš„æºä»£ç åˆ†æï¼šRTMPdumpæºä»£ç åˆ†æ 1ï¼š main()å‡½æ•°[ç³»åˆ—æ–‡ç« ]<br>RTMPåè®®å­¦ä¹ ï¼šRTMPæµåª’ä½“æŠ€æœ¯é›¶åŸºç¡€å­¦ä¹ æ–¹æ³•</p>
<h2 id="å°è£…æ ¼å¼"><a href="#å°è£…æ ¼å¼" class="headerlink" title="å°è£…æ ¼å¼"></a>å°è£…æ ¼å¼</h2><p>å°è£…æ ¼å¼çš„ä¸»è¦ä½œç”¨æ˜¯æŠŠè§†é¢‘ç æµå’ŒéŸ³é¢‘ç æµæŒ‰ç…§ä¸€å®šçš„æ ¼å¼å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚ç°å¦‚ä»Šæµè¡Œçš„å°è£…æ ¼å¼å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š<br><img src="http://7xrn7f.com1.z0.glb.clouddn.com/16-7-17/78134537.jpg" alt=""><br>ç”±è¡¨å¯è§ï¼Œé™¤äº†AVIä¹‹å¤–ï¼Œå…¶ä»–å°è£…æ ¼å¼éƒ½æ”¯æŒæµåª’ä½“ï¼Œå³å¯ä»¥â€œè¾¹ä¸‹è¾¹æ’­â€ã€‚æœ‰äº›æ ¼å¼æ›´â€œä¸‡èƒ½â€ä¸€äº›ï¼Œæ”¯æŒçš„è§†éŸ³é¢‘ç¼–ç æ ‡å‡†å¤šä¸€äº›ï¼Œæ¯”å¦‚MKVã€‚è€Œæœ‰äº›æ ¼å¼åˆ™æ”¯æŒçš„ç›¸å¯¹æ¯”è¾ƒå°‘ï¼Œæ¯”å¦‚è¯´RMVBã€‚<br>è¿™äº›å°è£…æ ¼å¼éƒ½æœ‰ç›¸å…³çš„æ–‡æ¡£ï¼Œåœ¨è¿™é‡Œå°±ä¸ä¸€ä¸€ä¾‹ä¸¾äº†ã€‚<br>æˆ‘è‡ªå·±ä¹Ÿåšè¿‡è¾…åŠ©å­¦ä¹ çš„å°é¡¹ç›®ï¼š<br>TSå°è£…æ ¼å¼åˆ†æå™¨<br>FLVå°è£…æ ¼å¼åˆ†æå™¨</p>
<h2 id="è§†é¢‘ç¼–ç "><a href="#è§†é¢‘ç¼–ç " class="headerlink" title="è§†é¢‘ç¼–ç "></a>è§†é¢‘ç¼–ç </h2><p>è§†é¢‘ç¼–ç çš„ä¸»è¦ä½œç”¨æ˜¯å°†è§†é¢‘åƒç´ æ•°æ®ï¼ˆRGBï¼ŒYUVç­‰ï¼‰å‹ç¼©æˆä¸ºè§†é¢‘ç æµï¼Œä»è€Œé™ä½è§†é¢‘çš„æ•°æ®é‡ã€‚å¦‚æœè§†é¢‘ä¸ç»è¿‡å‹ç¼©ç¼–ç çš„è¯ï¼Œä½“ç§¯é€šå¸¸æ˜¯éå¸¸å¤§çš„ï¼Œä¸€éƒ¨ç”µå½±å¯èƒ½å°±è¦ä¸Šç™¾Gçš„ç©ºé—´ã€‚è§†é¢‘ç¼–ç æ˜¯è§†éŸ³é¢‘æŠ€æœ¯ä¸­æœ€é‡è¦çš„æŠ€æœ¯ä¹‹ä¸€ã€‚è§†é¢‘ç æµçš„æ•°æ®é‡å äº†è§†éŸ³é¢‘æ€»æ•°æ®é‡çš„ç»å¤§éƒ¨åˆ†ã€‚é«˜æ•ˆç‡çš„è§†é¢‘ç¼–ç åœ¨åŒç­‰çš„ç ç‡ä¸‹ï¼Œå¯ä»¥è·å¾—æ›´é«˜çš„è§†é¢‘è´¨é‡ã€‚<br>è§†é¢‘ç¼–ç çš„ç®€å•åŸç†å¯ä»¥å‚è€ƒï¼šè§†é¢‘å‹ç¼©ç¼–ç å’ŒéŸ³é¢‘å‹ç¼©ç¼–ç çš„åŸºæœ¬åŸç†<br>æ³¨ï¼šè§†é¢‘ç¼–ç æŠ€æœ¯åœ¨æ•´ä¸ªè§†éŸ³é¢‘æŠ€æœ¯ä¸­åº”è¯¥æ˜¯æœ€å¤æ‚çš„æŠ€æœ¯ã€‚å¦‚æœæ²¡æœ‰åŸºç¡€çš„è¯ï¼Œå¯ä»¥å…ˆä¹°ä¸€äº›ä¹¦çœ‹ä¸€ä¸‹åŸç†ï¼Œæ¯”å¦‚è¯´ã€Šç°ä»£ç”µè§†åŸç†ã€‹ã€Šæ•°å­—ç”µè§†å¹¿æ’­åŸç†ä¸åº”ç”¨ã€‹ï¼ˆæœ¬ç§‘çš„è¯¾æœ¬ï¼‰ä¸­çš„éƒ¨åˆ†ç« èŠ‚ã€‚</p>
<p>ç”±è¡¨å¯è§ï¼Œæœ‰ä¸¤ç§è§†é¢‘ç¼–ç æ–¹æ¡ˆæ˜¯æœ€æ–°æ¨å‡ºçš„ï¼šVP9å’ŒHEVCã€‚ç›®å‰è¿™ä¸¤ç§æ–¹æ¡ˆéƒ½å¤„äºç ”å‘é˜¶æ®µï¼Œè¿˜æ²¡æœ‰åˆ°è¾¾å®ç”¨çš„ç¨‹åº¦ã€‚å½“å‰ä½¿ç”¨æœ€å¤šçš„è§†é¢‘ç¼–ç æ–¹æ¡ˆå°±æ˜¯H.264ã€‚<br><img src="http://7xrn7f.com1.z0.glb.clouddn.com/16-7-17/66098092.jpg" alt=""></p>
<h3 id="4-1-ä¸»æµç¼–ç æ ‡å‡†"><a href="#4-1-ä¸»æµç¼–ç æ ‡å‡†" class="headerlink" title="4.1 ä¸»æµç¼–ç æ ‡å‡†"></a>4.1 ä¸»æµç¼–ç æ ‡å‡†</h3><p>H.264ä»…ä»…æ˜¯ä¸€ä¸ªç¼–ç æ ‡å‡†ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„ç¼–ç å™¨ï¼ŒH.264åªæ˜¯ç»™ç¼–ç å™¨çš„å®ç°æä¾›å‚ç…§ç”¨çš„ã€‚<br>åŸºäºH.264æ ‡å‡†çš„ç¼–ç å™¨è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œç©¶ç«Ÿå­°ä¼˜å­°åŠ£ï¼Ÿå¯å‚è€ƒï¼šMSUå‡ºå“çš„ H.264ç¼–ç å™¨æ¯”è¾ƒï¼ˆ2011.5ï¼‰<br>åœ¨å­¦ä¹ è§†é¢‘ç¼–ç çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šç”¨åˆ°å„ç§ç¼–ç å™¨ï¼ˆå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªexeæ–‡ä»¶ï¼‰ï¼Œä»–ä»¬å¸¸ç”¨çš„ç¼–ç å‘½ä»¤å¯ä»¥å‚è€ƒï¼šå„ç§è§†é¢‘ç¼–ç å™¨çš„å‘½ä»¤è¡Œæ ¼å¼<br>å­¦ä¹ H.264æœ€æ ‡å‡†çš„æºä»£ç ï¼Œå°±æ˜¯å…¶å®˜æ–¹æ ‡å‡†JMäº†ã€‚ä½†æ˜¯è¦æ³¨æ„ï¼ŒJMé€Ÿåº¦éå¸¸çš„æ…¢ï¼Œæ˜¯æ— æ³•ç”¨äºå®é™…çš„ï¼šH.264å‚è€ƒè½¯ä»¶JM12.2RCä»£ç è¯¦ç»†æµç¨‹<br>å®é™…ä¸­ä½¿ç”¨æœ€å¤šçš„å°±æ˜¯x264äº†ï¼Œæ€§èƒ½å¼ºæ‚ï¼ˆè¶…è¿‡äº†å¾ˆå¤šå•†ä¸šç¼–ç å™¨ï¼‰ï¼Œè€Œä¸”å¼€æºã€‚å…¶åŸºæœ¬æ•™ç¨‹ç½‘ä¸Šæå¤šï¼Œä¸å†èµ˜è¿°ã€‚ç¼–ç æ—¶å€™å¯å‚è€ƒï¼šx264ç¼–ç æŒ‡å—â€”â€”ç ç‡æ§åˆ¶ã€‚ç¼–ç åç»Ÿè®¡å€¼çš„å«ä¹‰ï¼šX264è¾“å‡ºçš„ç»Ÿè®¡å€¼çš„å«ä¹‰ï¼ˆX264 Stats Outputï¼‰<br>Googleæ¨å‡ºçš„VP8å±äºå’ŒH.264åŒä¸€æ—¶ä»£çš„æ ‡å‡†ã€‚æ€»ä½“è€Œè¨€ï¼ŒVP8æ¯”H.264è¦ç¨å¾®å·®ä¸€ç‚¹ã€‚æœ‰ä¸€ç¯‡å†™çš„å¾ˆå¥½çš„VP8çš„ä»‹ç»æ–‡ç« ï¼šæ·±å…¥äº†è§£ VP8ã€‚é™¤äº†åœ¨æŠ€æœ¯é¢†åŸŸï¼ŒVP8å’ŒH.264åœ¨ä¸“åˆ©ç­‰æ–¹é¢ä¹Ÿæ˜¯æ‰“çš„ä¸å¯å¼€äº¤ï¼Œå¯å‚è€ƒæ–‡ç« ï¼šWebM(VP8) vs H.264<br>æ­¤å¤–ï¼Œæˆ‘å›½è¿˜æ¨å‡ºäº†è‡ªå·±çš„å›½äº§æ ‡å‡†AVSï¼Œæ€§èƒ½ä¹Ÿä¸é”™ï¼Œä½†ç›®å‰æ¯”H.264è¿˜æ˜¯è¦ç¨å¾®é€Šè‰²ä¸€ç‚¹ã€‚ä¸è¿‡æ„Ÿè§‰æˆ‘å›½åœ¨è§†é¢‘ç¼–è§£ç é¢†åŸŸè¿˜ç®—æ¯”è¾ƒå…ˆè¿›çš„ï¼Œå¯å‚è€ƒï¼šè§†é¢‘ç¼–ç å›½å®¶æ ‡å‡†AVSä¸H.264çš„æ¯”è¾ƒï¼ˆèŠ‚é€‰ï¼‰<br>è¿‘æœŸåˆæ¨å‡ºäº†AVSæ–°ä¸€ä»£çš„ç‰ˆæœ¬AVS+ï¼Œå…·ä½“çš„æ€§èƒ½æµ‹è¯•è¿˜æ²¡çœ‹è¿‡ã€‚ä¸è¿‡æ®è¯´AVS+å¾—åˆ°äº†å›½å®¶æ”¿ç­–ä¸Šéå¸¸å¼ºåŠ›çš„æ”¯æŒã€‚</p>
<h3 id="4-2-ä¸‹ä¸€ä»£ç¼–ç æ ‡å‡†"><a href="#4-2-ä¸‹ä¸€ä»£ç¼–ç æ ‡å‡†" class="headerlink" title="4.2 ä¸‹ä¸€ä»£ç¼–ç æ ‡å‡†"></a>4.2 ä¸‹ä¸€ä»£ç¼–ç æ ‡å‡†</h3><p>ä¸‹ä¸€ä»£çš„ç¼–è§£ç æ ‡å‡†å°±è¦æ•°HEVCå’ŒVP9äº†ã€‚VP9æ˜¯Googleç»§VP8ä¹‹åæ¨å‡ºçš„æ–°ä¸€ä»£æ ‡å‡†ã€‚VP9å’ŒHEVCç›¸æ¯”ï¼Œè¦ç¨å¾®é€Šè‰²ä¸€äº›ã€‚å®ƒä»¬çš„å¯¹æ¯”å¯å‚è€ƒï¼šï¼ˆ1ï¼‰HEVCä¸VP9ç¼–ç æ•ˆç‡å¯¹æ¯” ï¼ˆ2ï¼‰HEVCï¼ŒVP9ï¼Œx264æ€§èƒ½å¯¹æ¯”<br>HEVCåœ¨æœªæ¥æ‹¥æœ‰å¾ˆå¤šå¤§çš„ä¼˜åŠ¿ï¼Œå¯å‚è€ƒï¼šHEVCå°†ä¼šå–ä»£H.264çš„åŸå› <br>å­¦ä¹ HEVCæœ€æ ‡å‡†çš„æºä»£ç ï¼Œå°±æ˜¯å…¶å®˜æ–¹æ ‡å‡†HMäº†ã€‚å…¶é€Ÿåº¦æ¯”H.264çš„å®˜æ–¹æ ‡å‡†ä»£ç åˆæ…¢äº†ä¸€å¤§æˆªï¼Œä½¿ç”¨å¯å‚è€ƒï¼šHEVCå­¦ä¹ â€”â€” HMçš„ä½¿ç”¨<br>æœªæ¥å®é™…ä½¿ç”¨çš„HEVCå¼€æºç¼–ç å™¨å¾ˆæœ‰å¯èƒ½æ˜¯x265ï¼Œç›®å‰è¯¥é¡¹ç›®è¿˜å¤„äºå‘å±•é˜¶æ®µï¼Œå¯å‚è€ƒï¼šx265(HEVCç¼–ç å™¨ï¼ŒåŸºäºx264)ä»‹ç»ã€‚x265çš„ä½¿ç”¨å¯ä»¥å‚è€ƒï¼šHEVCï¼ˆH.265ï¼‰æ ‡å‡†çš„ç¼–ç å™¨ï¼ˆx265ï¼ŒDivX265ï¼‰è¯•ç”¨<br>ä¸»æµä»¥åŠä¸‹ä¸€ä»£ç¼–ç æ ‡å‡†ä¹‹é—´çš„æ¯”è¾ƒå¯ä»¥å‚è€ƒæ–‡ç« ï¼šè§†é¢‘ç¼–ç æ–¹æ¡ˆä¹‹é—´çš„æ¯”è¾ƒï¼ˆHEVCï¼ŒH.264ï¼ŒMPEG2ç­‰ï¼‰<br>æ­¤å¤–ï¼Œåœ¨ç ç‡ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œå‡ ç§ç¼–ç æ ‡å‡†çš„æ¯”è¾ƒå¯å‚è€ƒï¼šé™åˆ¶ç ç‡çš„è§†é¢‘ç¼–ç æ ‡å‡†æ¯”è¾ƒï¼ˆåŒ…æ‹¬MPEG-2ï¼ŒH.263ï¼Œ MPEG-4ï¼Œä»¥åŠ H.264ï¼‰<br>ç»“æœå¤§è‡´æ˜¯è¿™æ ·çš„ï¼š<br>HEVC &gt; VP9 &gt; H.264&gt; VP8 &gt; MPEG4 &gt; H.263 &gt; MPEG2ã€‚<br>æˆªäº†ä¸€äº›å›¾ï¼Œå¯ä»¥æ¯”è¾ƒç›´è§‚çš„äº†è§£å„ç§ç¼–ç æ ‡å‡†ï¼š<br>HEVCç æµç®€æï¼šHEVCç æµç®€å•åˆ†æ<br>H.264ç æµç®€æï¼šH.264ç®€å•ç æµåˆ†æ<br>MPEG2ç æµç®€æï¼šMPEG2ç®€å•ç æµåˆ†æ<br>ä»¥ä¸Šç®€æä½¿ç”¨çš„å·¥å…·ï¼šè§†é¢‘ç æµåˆ†æå·¥å…·<br>æˆ‘è‡ªå·±åšçš„å°å·¥å…·ï¼š  H.264ç æµåˆ†æå™¨</p>
<h2 id="éŸ³é¢‘ç¼–ç "><a href="#éŸ³é¢‘ç¼–ç " class="headerlink" title="éŸ³é¢‘ç¼–ç "></a>éŸ³é¢‘ç¼–ç </h2><p>éŸ³é¢‘ç¼–ç çš„ä¸»è¦ä½œç”¨æ˜¯å°†éŸ³é¢‘é‡‡æ ·æ•°æ®ï¼ˆPCMç­‰ï¼‰å‹ç¼©æˆä¸ºéŸ³é¢‘ç æµï¼Œä»è€Œé™ä½éŸ³é¢‘çš„æ•°æ®é‡ã€‚éŸ³é¢‘ç¼–ç ä¹Ÿæ˜¯äº’è”ç½‘è§†éŸ³é¢‘æŠ€æœ¯ä¸­ä¸€ä¸ªé‡è¦çš„æŠ€æœ¯ã€‚ä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹éŸ³é¢‘çš„æ•°æ®é‡è¦è¿œå°äºè§†é¢‘çš„æ•°æ®é‡ï¼Œå› è€Œå³ä½¿ä½¿ç”¨ç¨å¾®è½åçš„éŸ³é¢‘ç¼–ç æ ‡å‡†ï¼Œè€Œå¯¼è‡´éŸ³é¢‘æ•°æ®é‡æœ‰æ‰€å¢åŠ ï¼Œä¹Ÿä¸ä¼šå¯¹è§†éŸ³é¢‘çš„æ€»æ•°æ®é‡äº§ç”Ÿå¤ªå¤§çš„å½±å“ã€‚é«˜æ•ˆç‡çš„éŸ³é¢‘ç¼–ç åœ¨åŒç­‰çš„ç ç‡ä¸‹ï¼Œå¯ä»¥è·å¾—æ›´é«˜çš„éŸ³è´¨ã€‚<br>éŸ³é¢‘ç¼–ç çš„ç®€å•åŸç†å¯ä»¥å‚è€ƒï¼šè§†é¢‘å‹ç¼©ç¼–ç å’ŒéŸ³é¢‘å‹ç¼©ç¼–ç çš„åŸºæœ¬åŸç†</p>
<p>ç”±è¡¨å¯è§ï¼Œè¿‘å¹´æ¥å¹¶æœªæ¨å‡ºå…¨æ–°çš„éŸ³é¢‘ç¼–ç æ–¹æ¡ˆï¼Œå¯è§éŸ³é¢‘ç¼–ç æŠ€æœ¯å·²ç»åŸºæœ¬å¯ä»¥æ»¡è¶³äººä»¬çš„éœ€è¦ã€‚éŸ³é¢‘ç¼–ç æŠ€æœ¯è¿‘æœŸç»å¤§éƒ¨åˆ†çš„æ”¹åŠ¨éƒ½æ˜¯åœ¨MP3çš„ç»§ä»»è€…â€”â€”AACçš„åŸºç¡€ä¸Šå®Œæˆçš„ã€‚<br>è¿™äº›ç¼–ç æ ‡å‡†ä¹‹é—´çš„æ¯”è¾ƒå¯ä»¥å‚è€ƒæ–‡ç« ï¼šéŸ³é¢‘ç¼–ç æ–¹æ¡ˆä¹‹é—´éŸ³è´¨æ¯”è¾ƒï¼ˆAACï¼ŒMP3ï¼ŒWMAç­‰ï¼‰<br>ç»“æœå¤§è‡´æ˜¯è¿™æ ·çš„ï¼š<br>AAC+ &gt; MP3PRO &gt; AAC&gt; RealAudio &gt; WMA &gt; MP3<br>AACæ ¼å¼çš„ä»‹ç»ï¼šAACæ ¼å¼ç®€ä»‹<br>AACå‡ ç§ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„å¯¹æ¯”ï¼šAACè§„æ ¼ï¼ˆLCï¼ŒHEï¼ŒHEv2ï¼‰åŠæ€§èƒ½å¯¹æ¯”<br>AACä¸“åˆ©æ–¹é¢çš„ä»‹ç»ï¼šAACä¸“åˆ©ä»‹ç»<br>æ­¤å¤–æœæ¯”æ•°å­—çš„ç¼–ç æ ‡å‡†ä¹Ÿæ¯”è¾ƒæµè¡Œï¼Œä½†æ˜¯è²Œä¼¼æ¯”æœ€æ–°çš„AACç¨ä¸ºé€Šè‰²ï¼šAC-3æŠ€æœ¯ç»¼è¿°<br>æˆ‘è‡ªå·±åšçš„å°å·¥å…·ï¼š AACæ ¼å¼åˆ†æå™¨<br><img src="http://7xrn7f.com1.z0.glb.clouddn.com/16-7-17/72839052.jpg" alt=""></p>
<h2 id="ç°æœ‰ç½‘ç»œè§†éŸ³é¢‘å¹³å°å¯¹æ¯”"><a href="#ç°æœ‰ç½‘ç»œè§†éŸ³é¢‘å¹³å°å¯¹æ¯”" class="headerlink" title="ç°æœ‰ç½‘ç»œè§†éŸ³é¢‘å¹³å°å¯¹æ¯”"></a>ç°æœ‰ç½‘ç»œè§†éŸ³é¢‘å¹³å°å¯¹æ¯”</h2><p>ç°æœ‰çš„ç½‘ç»œè§†éŸ³é¢‘æœåŠ¡ä¸»è¦åŒ…æ‹¬ä¸¤ç§æ–¹å¼ï¼šç‚¹æ’­å’Œç›´æ’­ã€‚ç‚¹æ’­æ„å³æ ¹æ®ç”¨æˆ·çš„éœ€è¦æ’­æ”¾ç›¸åº”çš„è§†é¢‘èŠ‚ç›®ï¼Œè¿™æ˜¯äº’è”ç½‘è§†éŸ³é¢‘æœåŠ¡æœ€ä¸»è¦çš„æ–¹å¼ã€‚ç»å¤§éƒ¨åˆ†è§†é¢‘ç½‘ç«™éƒ½æä¾›äº†ç‚¹æ’­æœåŠ¡ã€‚ç›´æ’­æ„å³äº’è”ç½‘è§†éŸ³é¢‘å¹³å°ç›´æ¥å°†è§†é¢‘å†…å®¹å®æ—¶å‘é€ç»™ç”¨æˆ·ï¼Œç›®å‰è¿˜å¤„äºå‘å±•é˜¶æ®µã€‚ç›´æ’­åœ¨ç½‘ç»œç”µè§†å°ï¼Œç¤¾äº¤è§†é¢‘ç½‘ç«™è¾ƒä¸ºå¸¸è§ã€‚</p>
<h3 id="ç›´æ’­å¹³å°å‚æ•°å¯¹æ¯”"><a href="#ç›´æ’­å¹³å°å‚æ•°å¯¹æ¯”" class="headerlink" title="ç›´æ’­å¹³å°å‚æ•°å¯¹æ¯”"></a>ç›´æ’­å¹³å°å‚æ•°å¯¹æ¯”</h3><p>ä¸»æµäº’è”ç½‘è§†éŸ³é¢‘å¹³å°ç›´æ’­æœåŠ¡çš„å‚æ•°å¯¹æ¯”å¦‚è¡¨æ‰€ç¤ºï¼š<br>ç°æœ‰ç½‘ç»œè§†éŸ³é¢‘å¹³å°å‚æ•°å¯¹æ¯”</p>
<p>å¯ä»¥çœ‹å‡ºï¼Œç›´æ’­æœåŠ¡æ™®éé‡‡ç”¨äº†RTMPä½œä¸ºæµåª’ä½“åè®®ï¼ŒFLVä½œä¸ºå°è£…æ ¼å¼ï¼ŒH.264ä½œä¸ºè§†é¢‘ç¼–ç æ ¼å¼ï¼ŒAACä½œä¸ºéŸ³é¢‘ç¼–ç æ ¼å¼ã€‚é‡‡ç”¨RTMPä½œä¸ºç›´æ’­åè®®çš„å¥½å¤„åœ¨äºå…¶è¢«Flashæ’­æ”¾å™¨æ”¯æŒã€‚è€ŒFlashæ’­æ”¾å™¨å¦‚ä»Šå·²ç»å®‰è£…åœ¨å…¨çƒ99%çš„ç”µè„‘ä¸Šï¼Œå¹¶ä¸”ä¸æµè§ˆå™¨ç»“åˆçš„å¾ˆå¥½ã€‚å› æ­¤è¿™ç§æµåª’ä½“ç›´æ’­å¹³å°å¯ä»¥å®ç°â€œæ— æ’ä»¶ç›´æ’­â€ï¼Œæå¤§çš„ç®€åŒ–äº†å®¢æˆ·ç«¯çš„æ“ä½œã€‚å°è£…æ ¼å¼ï¼Œè§†é¢‘ç¼–ç ï¼ŒéŸ³é¢‘ç¼–ç æ–¹é¢ï¼Œæ— ä¸€ä¾‹å¤–çš„ä½¿ç”¨äº†FLV + H.264 + AACçš„ç»„åˆã€‚FLVæ˜¯RTMPä½¿ç”¨çš„å°è£…æ ¼å¼ï¼ŒH.264æ˜¯å½“ä»Šå®é™…åº”ç”¨ä¸­ç¼–ç æ•ˆç‡æœ€é«˜çš„è§†é¢‘ç¼–ç æ ‡å‡†ï¼ŒAACåˆ™æ˜¯å½“ä»Šå®é™…åº”ç”¨ä¸­ç¼–ç æ•ˆç‡æœ€é«˜çš„éŸ³é¢‘ç¼–ç æ ‡å‡†ã€‚è§†é¢‘æ’­æ”¾å™¨æ–¹é¢ï¼Œéƒ½ä½¿ç”¨äº†Flashæ’­æ”¾å™¨ã€‚</p>
<h3 id="ç‚¹æ’­å¹³å°å‚æ•°å¯¹æ¯”"><a href="#ç‚¹æ’­å¹³å°å‚æ•°å¯¹æ¯”" class="headerlink" title="ç‚¹æ’­å¹³å°å‚æ•°å¯¹æ¯”"></a>ç‚¹æ’­å¹³å°å‚æ•°å¯¹æ¯”</h3><p>ä¸»æµç½‘ç»œè§†éŸ³é¢‘å¹³å°ç‚¹æ’­æœåŠ¡çš„å‚æ•°å¯¹æ¯”å¦‚è¡¨æ‰€ç¤ºï¼š<br>ç°æœ‰äº’è”ç½‘è§†éŸ³é¢‘å¹³å°å‚æ•°å¯¹æ¯”</p>
<p>å¯ä»¥çœ‹å‡ºï¼Œç‚¹æ’­æœåŠ¡æ™®éé‡‡ç”¨äº†HTTPä½œä¸ºæµåª’ä½“åè®®ï¼ŒH.264ä½œä¸ºè§†é¢‘ç¼–ç æ ¼å¼ï¼ŒAACä½œä¸ºéŸ³é¢‘ç¼–ç æ ¼å¼ã€‚é‡‡ç”¨HTTPä½œä¸ºç‚¹æ’­åè®®æœ‰ä»¥ä¸‹ä¸¤ç‚¹ä¼˜åŠ¿ï¼šä¸€æ–¹é¢ï¼ŒHTTPæ˜¯åŸºäºTCPåè®®çš„åº”ç”¨å±‚åè®®ï¼Œåª’ä½“ä¼ è¾“è¿‡ç¨‹ä¸­ä¸ä¼šå‡ºç°ä¸¢åŒ…ç­‰ç°è±¡ï¼Œä»è€Œä¿è¯äº†è§†é¢‘çš„è´¨é‡ï¼›å¦ä¸€æ–¹é¢ï¼ŒHTTPè¢«ç»å¤§éƒ¨åˆ†çš„WebæœåŠ¡å™¨æ”¯æŒï¼Œå› è€Œæµåª’ä½“æœåŠ¡æœºæ„ä¸å¿…æŠ•èµ„è´­ä¹°é¢å¤–çš„æµåª’ä½“æœåŠ¡å™¨ï¼Œä»è€ŒèŠ‚çº¦äº†å¼€æ”¯ã€‚ç‚¹æ’­æœåŠ¡é‡‡ç”¨çš„å°è£…æ ¼å¼æœ‰å¤šç§ï¼šMP4ï¼ŒFLVï¼ŒF4Vç­‰ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä¸æ˜¯å¾ˆå¤§ã€‚è§†é¢‘ç¼–ç æ ‡å‡†å’ŒéŸ³é¢‘ç¼–ç æ ‡å‡†æ˜¯H.264å’ŒAACã€‚è¿™ä¸¤ç§æ ‡å‡†åˆ†åˆ«æ˜¯å½“ä»Šå®é™…åº”ç”¨ä¸­ç¼–ç æ•ˆç‡æœ€é«˜çš„è§†é¢‘æ ‡å‡†å’ŒéŸ³é¢‘æ ‡å‡†ã€‚è§†é¢‘æ’­æ”¾å™¨æ–¹é¢ï¼Œæ— ä¸€ä¾‹å¤–çš„éƒ½ä½¿ç”¨äº†Flashæ’­æ”¾å™¨ã€‚</p>
]]></content>
      
        <categories>
            
            <category> åŸºç¡€ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æµåª’ä½“ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[(è½¬)éŸ³è§†é¢‘åŸºç¡€æ¦‚å¿µæ±‡æ€»]]></title>
      <url>/2015/07/17/2015/%E8%BD%AC-%E9%9F%B3%E8%A7%86%E9%A2%91%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5%E6%B1%87%E6%80%BB/</url>
      <content type="html"><![CDATA[<h2 id="ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºæœ¬æ¦‚å¿µè®²è§£"><a href="#ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºæœ¬æ¦‚å¿µè®²è§£" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºæœ¬æ¦‚å¿µè®²è§£"></a>ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºæœ¬æ¦‚å¿µè®²è§£</h2><ul>
<li>åª’ä½“ï¼šæ˜¯è¡¨ç¤ºï¼Œä¼ è¾“ï¼Œå­˜å‚¨ä¿¡æ¯çš„è½½ä½“ï¼Œå¸¸äººä»¬è§åˆ°çš„æ–‡å­—ã€å£°éŸ³ã€å›¾åƒã€å›¾å½¢ç­‰éƒ½æ˜¯è¡¨ç¤ºä¿¡æ¯çš„åª’ä½“ã€‚<a id="more"></a></li>
<li><p>å¤šåª’ä½“ï¼š æ˜¯å£°éŸ³ã€åŠ¨ç”»ã€æ–‡å­—ã€å›¾åƒå’Œå½•åƒç­‰å„ç§åª’ä½“çš„ç»„åˆï¼Œä»¥å›¾æ–‡å¹¶èŒ‚ï¼Œç”ŸåŠ¨æ´»æ³¼çš„åŠ¨æ€å½¢å¼è¡¨ç°å‡ºæ¥ï¼Œç»™äººä»¥å¾ˆå¼ºçš„è§†è§‰å†²å‡»åŠ›ï¼Œç•™ä¸‹æ·±åˆ»å°è±¡</p>
</li>
<li><p>å¤šåª’ä½“æŠ€æœ¯ï¼šæ˜¯å°†æ–‡å­—ã€å£°éŸ³ã€å›¾å½¢ã€é™æ€å›¾åƒã€åŠ¨æ€å›¾åƒä¸è®¡ç®—é›†æˆåœ¨ä¸€èµ·çš„æŠ€æœ¯ã€‚å®ƒè¦è§£å†³çš„é—®é¢˜æ˜¯è®¡ç®—æœºè¿›ä¸€æ­¥å¸®åŠ©äººç±»æŒ‰æœ€è‡ªç„¶çš„å’Œæœ€ä¹ æƒ¯çš„æ–¹å¼æ¥å—å’Œå¤„ç†ä¿¡æ¯ã€‚</p>
</li>
<li><p>æµåª’ä½“ ï¼šæµåª’ä½“æ˜¯æŒ‡é‡‡ç”¨æµå¼ä¼ è¾“çš„æ–¹å¼åœ¨Internetæ’­æ”¾çš„è¿ç»­æ—¶åŸºåª’ä½“æ ¼å¼ï¼Œå®é™…æŒ‡çš„æ˜¯ä¸€ç§æ–°çš„åª’ä½“ä¼ é€æ–¹å¼ï¼Œè€Œä¸æ˜¯ä¸€ç§æ–°çš„åª’ä½“æ ¼å¼ï¼ˆåœ¨ç½‘ç»œä¸Šä¼ è¾“éŸ³/è§†é¢‘ç­‰å¤šåª’ä½“ä¿¡æ¯ç°åœ¨ä¸»è¦æœ‰ä¸‹è½½å’Œæµå¼ä¼ è¾“ä¸¤ç§æ–¹å¼ï¼‰æµå¼ä¼ è¾“åˆ†ä¸¤ç§æ–¹æ³•ï¼šå®æ—¶æµå¼ä¼ è¾“æ–¹å¼(Realtime streaming)å’Œé¡ºåºæµå¼ä¼ è¾“æ–¹å¼(progressive streaming)ã€‚</p>
</li>
<li><p>å¤šåª’ä½“æ–‡ä»¶ï¼šæ˜¯æ—¢åŒ…æ‹¬è§†é¢‘åˆåŒ…æ‹¬éŸ³é¢‘ï¼Œç”šè‡³è¿˜å¸¦æœ‰è„šæœ¬çš„ä¸€ä¸ªé›†åˆï¼Œä¹Ÿå¯ä»¥å«å®¹å™¨ï¼›</p>
</li>
<li><p>åª’ä½“ç¼–ç ï¼šæ˜¯æ–‡ä»¶å½“ä¸­çš„è§†é¢‘å’ŒéŸ³é¢‘æ‰€é‡‡ç”¨çš„å‹ç¼©ç®—æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªaviçš„æ–‡ä»¶ï¼Œå½“ä¸­çš„è§†é¢‘ç¼–ç æœ‰å¯èƒ½æ˜¯Aï¼Œä¹Ÿå¯èƒ½æ˜¯Bï¼Œè€Œå…¶éŸ³é¢‘ç¼–ç æœ‰å¯èƒ½æ˜¯1ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯2ã€‚  è½¬ç  ï¼šæŒ‡å°†ä¸€æ®µå¤šåª’ä½“åŒ…æ‹¬éŸ³é¢‘ã€è§†é¢‘æˆ–è€…å…¶ä»–çš„å†…å®¹ä»ä¸€ç§ç¼–ç æ ¼å¼è½¬æ¢æˆä¸ºå¦å¤–ä¸€ç§ç¼–ç æ ¼å¼</p>
</li>
<li><p>è§†é¢‘ï¼šè¿ç»­çš„å›¾è±¡å˜åŒ–æ¯ç§’è¶…è¿‡24å¸§ï¼ˆFrameï¼‰ç”»é¢ä»¥ä¸Šæ—¶ï¼Œæ ¹æ®è§†è§‰æš‚ç•™åŸç†ï¼Œäººçœ¼æ— æ³•è¾¨åˆ«å•å¹…çš„é™æ€ç”»é¢ï¼Œçœ‹ä¸Šå»æ˜¯å¹³æ»‘è¿ç»­çš„è§†è§‰æ•ˆæœï¼Œè¿™æ ·è¿ç»­çš„ç”»é¢å«åšè§†é¢‘</p>
</li>
<li><p>éŸ³é¢‘ ï¼šäººç±»èƒ½å¬åˆ°çš„å£°éŸ³éƒ½æˆä¸ºéŸ³é¢‘ï¼Œä½†æ˜¯ä¸€èˆ¬æˆ‘ä»¬æ‰€è¯´åˆ°çš„éŸ³é¢‘æ—¶å­˜å‚¨åœ¨è®¡ç®—æœºé‡Œçš„å£°éŸ³</p>
</li>
</ul>
<h2 id="ç¬¬äºŒéƒ¨åˆ†ï¼šè§†é¢‘æ–‡ä»¶æ ¼å¼"><a href="#ç¬¬äºŒéƒ¨åˆ†ï¼šè§†é¢‘æ–‡ä»¶æ ¼å¼" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†ï¼šè§†é¢‘æ–‡ä»¶æ ¼å¼"></a>ç¬¬äºŒéƒ¨åˆ†ï¼šè§†é¢‘æ–‡ä»¶æ ¼å¼</h2><ul>
<li><p>ç ç‡ï¼šç ç‡å°±æ˜¯æ•°æ®ä¼ è¾“æ—¶å•ä½æ—¶é—´ä¼ é€çš„æ•°æ®ä½æ•°,ä¸€èˆ¬æˆ‘ä»¬ç”¨çš„å•ä½æ˜¯kbpså³åƒä½æ¯ç§’ã€‚ é€šä¿—ä¸€ç‚¹çš„ç†è§£å°±æ˜¯å–æ ·ç‡ï¼Œå•ä½æ—¶é—´å†…å–æ ·ç‡è¶Šå¤§ï¼Œç²¾åº¦å°±è¶Šé«˜ï¼Œå¤„ç†å‡ºæ¥çš„æ–‡ä»¶å°±è¶Šæ¥è¿‘åŸå§‹æ–‡ä»¶ï¼Œä½†æ˜¯æ–‡ä»¶ä½“ç§¯ä¸å–æ ·ç‡æ˜¯æˆæ­£æ¯”çš„ï¼Œæ‰€ä»¥å‡ ä¹æ‰€æœ‰çš„ç¼–ç æ ¼å¼é‡è§†çš„éƒ½æ˜¯å¦‚ä½•ç”¨æœ€ä½çš„ç ç‡è¾¾åˆ°æœ€å°‘çš„å¤±çœŸã€‚ä½†æ˜¯å› ä¸ºç¼–ç ç®—æ³•ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¹Ÿä¸èƒ½ç”¨ç ç‡æ¥ç»Ÿä¸€è¡¡é‡éŸ³è´¨æˆ–è€…ç”»è´¨.</p>
</li>
<li><p>å¸§ï¼šå¸§å°±æ˜¯ä¸€æ®µæ•°æ®çš„ç»„åˆï¼Œå®ƒæ˜¯æ•°æ®ä¼ è¾“çš„åŸºæœ¬å•ä½ã€‚å°±æ˜¯å½±åƒåŠ¨ç”»ä¸­æœ€å°å•ä½çš„å•å¹…å½±åƒç”»é¢ï¼Œç›¸å½“äºç”µå½±èƒ¶ç‰‡ä¸Šçš„æ¯ä¸€æ ¼é•œå¤´ã€‚ä¸€å¸§å°±æ˜¯ä¸€å‰¯é™æ­¢çš„ç”»é¢ï¼Œè¿ç»­çš„å¸§å°±å½¢æˆåŠ¨ç”»ï¼Œå¦‚ç”µè§†å›¾åƒç­‰ã€‚</p>
</li>
</ul>
<ul>
<li>å¸§ç‡ï¼šå¸§ç‡å³æ¯ç§’æ˜¾ç¤ºå¸§æ•°ï¼Œå¸§ç‡è¡¨ç¤ºå›¾å½¢å¤„ç†å™¨å¤„ç†åœºæ—¶æ¯ç§’é’Ÿèƒ½å¤Ÿæ›´æ–°çš„æ¬¡æ•°ã€‚é«˜çš„å¸§ç‡å¯ä»¥å¾—åˆ°æ›´æµç•…ã€æ›´é€¼çœŸçš„åŠ¨ç”»ã€‚ä¸€èˆ¬æ¥è¯´30fpså°±æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä½†æ˜¯å°†æ€§èƒ½æå‡è‡³60fpsåˆ™å¯ä»¥æ˜æ˜¾æå‡äº¤äº’æ„Ÿå’Œé€¼çœŸæ„Ÿï¼Œä½†æ˜¯ä¸€èˆ¬æ¥è¯´è¶…è¿‡75fpsä¸€èˆ¬å°±ä¸å®¹æ˜“å¯Ÿè§‰åˆ°æœ‰æ˜æ˜¾çš„æµç•…åº¦æå‡äº†ã€‚å¦‚æœå¸§ç‡è¶…è¿‡å±å¹•åˆ·æ–°ç‡åªä¼šæµªè´¹å›¾å½¢å¤„ç†çš„èƒ½åŠ›ï¼Œå› ä¸ºç›‘è§†å™¨ä¸èƒ½ä»¥è¿™ä¹ˆå¿«çš„é€Ÿåº¦æ›´æ–°ï¼Œè¿™æ ·è¶…è¿‡æ–°ç‡çš„å¸§ç‡å°±æµªè´¹æ‰äº†ã€‚<br>å…³é”®å¸§ï¼šç›¸å½“äºäºŒç»´åŠ¨ç”»ä¸­çš„åŸç”»ï¼ŒæŒ‡è§’è‰²æˆ–è€…ç‰©ä½“è¿åŠ¨æˆ–å˜åŒ–ä¸­çš„å…³é”®åŠ¨ä½œæ‰€å¤„çš„é‚£ä¸€å¸§ï¼Œå®ƒåŒ…å«äº†å›¾åƒçš„æ‰€æœ‰ä¿¡æ¯ï¼Œåæ¥å¸§ä»…åŒ…å«äº†æ”¹å˜äº†çš„ä¿¡æ¯ã€‚å¦‚æœä½ æ²¡æœ‰è¶³å¤Ÿçš„å…³é”®å¸§ï¼Œä½ çš„å½±ç‰‡å“è´¨å¯èƒ½æ¯”è¾ƒå·®ï¼Œå› ä¸ºæ‰€æœ‰çš„å¸§ä»åˆ«çš„å¸§å¤„äº§ç”Ÿã€‚å¯¹äºä¸€èˆ¬çš„ç”¨é€”ï¼Œä¸€ä¸ªæ¯”è¾ƒå¥½çš„åŸåˆ™æ˜¯æ¯5ç§’è®¾ä¸€ä¸ªå…³é”®é”®ã€‚ä½†å¦‚æœæ—¶é‚£ç§å®æ—¶ä¼ è¾“çš„æµæ–‡ä»¶ï¼Œé‚£ä¹ˆè¦è€ƒè™‘ä¼ è¾“ç½‘ç»œçš„å¯é åº¦ï¼Œæ‰€ä»¥è¦1åˆ°2ç§’å¢åŠ ä¸€ä¸ªå…³é”®å¸§ã€‚ç›®å‰æˆ‘ä»¬ç»å¸¸è§çš„è§†é¢‘æ ¼å¼æ— éå°±æ˜¯ä¸¤å¤§ç±»ï¼š<br>1ã€å½±åƒæ ¼å¼ï¼ˆVideoï¼‰<br>2ã€æµåª’ä½“æ ¼å¼ï¼ˆStream Videoï¼‰</li>
</ul>
<p>åœ¨å½±åƒæ ¼å¼ä¸­è¿˜å¯ä»¥æ ¹æ®å‡ºå¤„åˆ’åˆ†ä¸ºä¸‰å¤§ç§ï¼š<br>1ã€AVIæ ¼å¼ï¼šè¿™æ˜¯ç”±å¾®è½¯ï¼ˆMicrosoftï¼‰æå‡ºï¼Œå…·æœ‰â€œæ‚ ä¹…å†å²â€çš„ä¸€ç§è§†é¢‘æ ¼å¼<br>2ã€MOVæ ¼å¼ï¼šè¿™æ˜¯ç”±è‹¹æœï¼ˆAppleï¼‰å…¬å¸æå‡ºçš„ä¸€ç§è§†é¢‘æ ¼å¼<br>3ã€MPEG/MPG/DATï¼šè¿™æ˜¯ç”±å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ISO(International Standards Organization)ä¸IEC(International Electronic Committee)è”åˆå¼€å‘çš„ä¸€ç§ç¼–ç è§†é¢‘æ ¼å¼ã€‚MPEGæ˜¯è¿åŠ¨å›¾åƒå‹ç¼©ç®—æ³•çš„å›½é™…æ ‡å‡†ï¼Œç°å·²è¢«å‡ ä¹æ‰€æœ‰çš„è®¡ç®—æœºå¹³å°å…±åŒæ”¯æŒã€‚</p>
<p>åœ¨æµåª’ä½“æ ¼å¼ä¸­åŒæ ·è¿˜å¯ä»¥åˆ’åˆ†ä¸ºä¸‰ç§ï¼š<br>1ã€RMæ ¼å¼ï¼šè¿™æ˜¯ç”±Real Networkså…¬å¸å¼€å‘çš„ä¸€ç§æ–°å‹æµå¼è§†é¢‘æ–‡ä»¶æ ¼å¼ã€‚<br>2ã€MOV/QTæ ¼å¼ï¼šMOVä¹Ÿå¯ä»¥ä½œä¸ºä¸€ç§æµæ–‡ä»¶æ ¼å¼ã€‚QuickTimeèƒ½å¤Ÿé€šè¿‡Internetæä¾›å®æ—¶çš„æ•°å­—åŒ–ä¿¡æ¯æµã€å·¥ä½œæµä¸æ–‡ä»¶å›æ”¾åŠŸèƒ½ï¼Œä¸ºäº†é€‚åº”è¿™ä¸€ç½‘ç»œå¤šåª’ä½“åº”ç”¨ï¼ŒQuickTimeä¸ºå¤šç§æµè¡Œçš„æµè§ˆå™¨è½¯ä»¶æä¾›äº†ç›¸åº”çš„QuickTime Vieweræ’ä»¶ï¼ˆPlugï¼inï¼‰ï¼Œèƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¸­å®ç°å¤šåª’ä½“æ•°æ®çš„å®æ—¶å›æ”¾ã€‚<br>3ã€ASFæ ¼å¼ï¼šè¿™æ˜¯ç”±å¾®è½¯å…¬å¸å¼€å‘çš„æµåª’ä½“æ ¼å¼ï¼Œæ˜¯ä¸€ä¸ªåœ¨Internetä¸Šå®æ—¶ä¼ æ’­å¤šåª’ä½“çš„æŠ€æœ¯æ ‡å‡†ã€‚<br>4ã€FLV</p>
<h2 id="å…·ä½“è§†é¢‘æ–‡ä»¶æ ¼å¼è¯¦è§£ï¼š"><a href="#å…·ä½“è§†é¢‘æ–‡ä»¶æ ¼å¼è¯¦è§£ï¼š" class="headerlink" title="å…·ä½“è§†é¢‘æ–‡ä»¶æ ¼å¼è¯¦è§£ï¼š"></a>å…·ä½“è§†é¢‘æ–‡ä»¶æ ¼å¼è¯¦è§£ï¼š</h2><ul>
<li><p>*. MPEG/.MPG/.DAT<br>MPEGä¹Ÿæ˜¯Motion Picture Experts Groupçš„ç¼©å†™ã€‚è¿™ç±»æ ¼å¼åŒ…æ‹¬äº†MPEG-1, MPEG-2å’Œ MPEG-4åœ¨å†…çš„å¤šç§è§†é¢‘æ ¼å¼ã€‚MPEG-1ç›¸ä¿¡æ˜¯å¤§å®¶æ¥è§¦å¾—æœ€å¤šçš„äº†ï¼Œå› ä¸ºç›®å‰å…¶æ­£åœ¨è¢«å¹¿æ³›åœ°åº”ç”¨åœ¨VCDçš„åˆ¶ä½œå’Œä¸€äº›è§†é¢‘ç‰‡æ®µä¸‹è½½çš„ç½‘ç»œåº”ç”¨ä¸Šé¢ï¼Œå¤§éƒ¨åˆ†çš„VCDéƒ½æ˜¯ç”¨ MPEG1æ ¼å¼å‹ç¼©çš„( åˆ»å½•è½¯ä»¶è‡ªåŠ¨å°†MPEG1è½¬ä¸º.DATæ ¼å¼)ï¼Œä½¿ç”¨ MPEG-1çš„å‹ç¼©ç®—æ³•ï¼Œå¯ä»¥æŠŠä¸€éƒ¨ 120 åˆ†é’Ÿé•¿çš„ç”µå½±å‹ç¼©åˆ°1.2 GB å·¦å³å¤§å°ã€‚MPEG-2åˆ™æ˜¯åº”ç”¨åœ¨DVD çš„åˆ¶ä½œï¼ŒåŒæ—¶åœ¨ä¸€äº›HDTVï¼ˆé«˜æ¸…æ™°ç”µè§†å¹¿æ’­ï¼‰å’Œä¸€äº›é«˜è¦æ±‚è§†é¢‘ç¼–è¾‘ã€å¤„ç†ä¸Šé¢ä¹Ÿæœ‰ç›¸å½“å¤šçš„åº”ç”¨ã€‚ä½¿ç”¨MPEG-2çš„å‹ç¼©ç®—æ³•å‹ç¼©ä¸€éƒ¨ 120 åˆ†é’Ÿé•¿çš„ç”µå½±å¯ä»¥å‹ç¼©åˆ° 5-8 GBçš„å¤§å°ï¼ˆMPEG2çš„å›¾åƒè´¨é‡MPEG-1ä¸å…¶æ— æ³•æ¯”æ‹Ÿçš„ï¼‰ã€‚</p>
</li>
<li><p>*.AVI<br>ã€€å®ƒçš„è‹±æ–‡å…¨ç§°ä¸ºAudio Video Interleavedï¼Œå³éŸ³é¢‘è§†é¢‘äº¤é”™æ ¼å¼ã€‚æ˜¯å°†è¯­éŸ³å’Œå½±åƒåŒæ­¥ç»„åˆåœ¨ä¸€èµ·çš„æ–‡ä»¶æ ¼å¼ã€‚å®ƒå¯¹è§†é¢‘æ–‡ä»¶é‡‡ç”¨äº†ä¸€ç§æœ‰æŸå‹ç¼©æ–¹å¼ï¼Œä½†å‹ç¼©æ¯”è¾ƒé«˜ï¼Œå› æ­¤å°½ç®¡é¢é¢è´¨é‡ä¸æ˜¯å¤ªå¥½ï¼Œä½†å…¶åº”ç”¨èŒƒå›´ä»ç„¶éå¸¸å¹¿æ³›ã€‚AVIæ”¯æŒ256è‰²å’ŒRLEå‹ç¼©ã€‚AVIä¿¡æ¯ä¸»è¦åº”ç”¨åœ¨å¤šåª’ä½“å…‰ç›˜ä¸Šï¼Œç”¨æ¥ä¿å­˜ç”µè§†ã€ç”µå½±ç­‰å„ç§å½±åƒä¿¡æ¯ã€‚å®ƒäº1992å¹´è¢«Microsoftå…¬å¸æ¨å‡ºï¼ŒéšWindows3.1ä¸€èµ·è¢«äººä»¬æ‰€è®¤è¯†å’Œç†ŸçŸ¥ã€‚æ‰€è°“â€œéŸ³é¢‘è§†é¢‘äº¤é”™â€ï¼Œå°±æ˜¯å¯ä»¥å°†è§†é¢‘å’ŒéŸ³é¢‘äº¤ç»‡åœ¨ä¸€èµ·è¿›è¡ŒåŒæ­¥æ’­æ”¾ã€‚è¿™ç§è§†é¢‘æ ¼å¼çš„ä¼˜ç‚¹æ˜¯å›¾åƒè´¨é‡å¥½ï¼Œå¯ä»¥è·¨å¤šä¸ªå¹³å°ä½¿ç”¨ï¼Œå…¶ç¼ºç‚¹æ˜¯ä½“ç§¯è¿‡äºåºå¤§ï¼Œè€Œä¸”æ›´åŠ ç³Ÿç³•çš„æ˜¯å‹ç¼©æ ‡å‡†ä¸ç»Ÿä¸€ï¼Œæœ€æ™®éçš„ç°è±¡å°±æ˜¯é«˜ç‰ˆæœ¬Windowsåª’ä½“æ’­æ”¾å™¨æ’­æ”¾ä¸äº†é‡‡ç”¨æ—©æœŸç¼–ç ç¼–è¾‘çš„AVIæ ¼å¼è§†é¢‘ï¼Œè€Œä½ç‰ˆæœ¬Windowsåª’ä½“æ’­æ”¾å™¨åˆæ’­æ”¾ä¸äº†é‡‡ç”¨æœ€æ–°ç¼–ç ç¼–è¾‘çš„AVIæ ¼å¼è§†é¢‘ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿›è¡Œä¸€äº›AVIæ ¼å¼çš„è§†é¢‘æ’­æ”¾æ—¶å¸¸ä¼šå‡ºç°ç”±äºè§†é¢‘ç¼–ç é—®é¢˜è€Œé€ æˆçš„è§†é¢‘ä¸èƒ½æ’­æ”¾æˆ–å³ä½¿èƒ½å¤Ÿæ’­æ”¾ï¼Œä½†å­˜åœ¨ä¸èƒ½è°ƒèŠ‚æ’­æ”¾è¿›åº¦å’Œæ’­æ”¾æ—¶åªæœ‰å£°éŸ³æ²¡æœ‰å›¾åƒç­‰ä¸€äº›è«åå…¶å¦™çš„é—®é¢˜ï¼Œå¦‚æœç”¨æˆ·åœ¨è¿›è¡ŒAVIæ ¼å¼çš„è§†é¢‘æ’­æ”¾æ—¶é‡åˆ°äº†è¿™äº›é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä¸‹è½½ç›¸åº”çš„è§£ç å™¨æ¥è§£å†³ã€‚æ˜¯ç›®å‰è§†é¢‘æ–‡ä»¶çš„ä¸»æµã€‚ è¿™ç§æ ¼å¼çš„æ–‡ä»¶éšå¤„å¯è§ï¼Œæ¯”å¦‚ä¸€äº›æ¸¸æˆã€æ•™è‚²è½¯ä»¶çš„ç‰‡å¤´ï¼Œå¤šåª’ä½“å…‰ç›˜ä¸­ï¼Œéƒ½ä¼šæœ‰ä¸å°‘çš„ AVI ã€‚ç°åœ¨ï¼Œåœ¨WINDOWS 95æˆ–98é‡Œéƒ½èƒ½ç›´æ¥æ’­æ”¾AVIï¼ŒåŒä¸€ç§æ ¼å¼çš„aviæ–‡ä»¶æœ‰å¯èƒ½é‡‡ç”¨ä¸åŒçš„ç¼–ç æ–¹å¼ï¼Œæœ€å¸¸è§çš„æœ‰Intel Indeoï¼ˆRï¼‰Video R3.2ï¼ˆåƒæ¸¸æˆè¿‡åœºåŠ¨ç”»ç­‰ï¼Œæ˜¯ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„ä¸€ç§aviç¼–ç æŠ€æœ¯ï¼‰ã€Microsoft video ç­‰ã€‚</p>
</li>
<li><p><em>.RA/RM/RAM
ã€€</em>.RMï¼ŒReal Networkså…¬å¸æ‰€åˆ¶å®šçš„éŸ³é¢‘/è§†é¢‘å‹ç¼©è§„èŒƒReal Mediaä¸­çš„ä¸€ç§ï¼ŒReal Playerèƒ½åšçš„å°±æ˜¯åˆ©ç”¨Internetèµ„æºå¯¹è¿™äº›ç¬¦åˆReal MediaæŠ€æœ¯è§„èŒƒçš„éŸ³é¢‘/è§†é¢‘è¿›è¡Œå®å†µè½¬æ’­ã€‚åœ¨Real Mediaè§„èŒƒä¸­ä¸»è¦åŒ…æ‹¬ä¸‰ç±»æ–‡ä»¶ï¼šRealAudioã€Real Videoå’ŒReal Flashï¼ˆReal Networkså…¬å¸ä¸Macromediaå…¬å¸åˆä½œæ¨å‡ºçš„æ–°ä¸€ä»£é«˜å‹ç¼©æ¯”åŠ¨ç”»æ ¼å¼ï¼‰ã€‚REAL VIDEOï¼ˆRAã€RAMï¼‰æ ¼å¼ç”±ä¸€å¼€å§‹å°±æ˜¯å®šä½å°±æ˜¯åœ¨è§†é¢‘æµåº”ç”¨æ–¹é¢çš„ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯è§†é¢‘æµæŠ€æœ¯çš„å§‹åˆ›è€…ã€‚å®ƒå¯ä»¥åœ¨ç”¨56K MODEM æ‹¨å·ä¸Šç½‘çš„æ¡ä»¶å®ç°ä¸é—´æ–­çš„è§†é¢‘æ’­æ”¾ï¼Œä»RealVideoçš„å®šä½æ¥çœ‹ï¼Œå°±æ˜¯ç‰ºç‰²ç”»é¢è´¨é‡æ¥æ¢å–å¯è¿ç»­è§‚çœ‹æ€§ã€‚å…¶å®RealVideoä¹Ÿå¯ä»¥å®ç°ä¸é”™çš„ç”»é¢è´¨é‡ï¼Œç”±äºRealVideoå¯ä»¥æ‹¥æœ‰éå¸¸é«˜çš„å‹ç¼©æ•ˆç‡ï¼Œå¾ˆå¤šäººæŠŠVCDç¼–ç æˆRealVideoæ ¼å¼çš„ï¼Œè¿™æ ·ä¸€æ¥ï¼Œä¸€å¼ å…‰ç›˜ä¸Šå¯ä»¥å­˜æ”¾å¥½å‡ éƒ¨ç”µå½±ã€‚REAL VIDEOå­˜åœ¨é¢œè‰²è¿˜åŸä¸å‡†ç¡®çš„é—®é¢˜ï¼ŒRealVideoå°±ä¸å¤ªé€‚åˆä¸“ä¸šçš„åœºåˆï¼Œä½†RealVideoå‡ºè‰²çš„å‹ç¼©æ•ˆç‡å’Œæ”¯æŒæµå¼æ’­æ”¾çš„ç‰¹å¾ï¼Œä½¿å¾—RealVideoåœ¨ç½‘ç»œå’Œå¨±ä¹åœºåˆå æœ‰ä¸é”™çš„å¸‚åœºä»½é¢ã€‚</p>
</li>
<li><p>*.MOV<br>MOVæ ¼å¼ï¼Œç¾å›½Appleå…¬å¸å¼€å‘çš„ä¸€ç§è§†é¢‘æ ¼å¼ï¼Œé»˜è®¤çš„æ’­æ”¾å™¨æ˜¯è‹¹æœçš„QuickTimePlayerã€‚å…·æœ‰è¾ƒé«˜çš„å‹ç¼©æ¯”ç‡å’Œè¾ƒå®Œç¾çš„è§†é¢‘æ¸…æ™°åº¦ç­‰ç‰¹ç‚¹ï¼Œä½†æ˜¯å…¶æœ€å¤§çš„ç‰¹ç‚¹è¿˜æ˜¯è·¨å¹³å°æ€§ï¼Œå³ä¸ä»…èƒ½æ”¯æŒMacOSï¼ŒåŒæ ·ä¹Ÿèƒ½æ”¯æŒWindowsç³»åˆ—,åœ¨æ‰€æœ‰è§†é¢‘æ ¼å¼å½“ä¸­ï¼Œä¹Ÿè®¸MOVæ ¼å¼æ˜¯æœ€ä¸çŸ¥åçš„ã€‚ä¹Ÿè®¸ä½ ä¼šå¬è¯´è¿‡QuickTimeï¼ŒMOVæ ¼å¼çš„æ–‡ä»¶æ­£æ˜¯ç”±å®ƒæ¥æ’­æ”¾çš„ã€‚åœ¨PCå‡ ä¹ä¸€ç»Ÿå¤©ä¸‹çš„ä»Šå¤©ï¼Œä»Appleç§»æ¤è¿‡æ¥çš„MOVæ ¼å¼è‡ªç„¶æ˜¯å—åˆ°æ’æŒ¤çš„ã€‚å®ƒå…·æœ‰è·¨å¹³å°ã€å­˜å‚¨ç©ºé—´è¦æ±‚å°çš„æŠ€æœ¯ç‰¹ç‚¹ï¼Œè€Œé‡‡ç”¨äº†æœ‰æŸå‹ç¼©æ–¹å¼çš„MOVæ ¼å¼æ–‡ä»¶ï¼Œç”»é¢æ•ˆæœè¾ƒAVIæ ¼å¼è¦ç¨å¾®å¥½ä¸€äº›ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå®ƒå…±æœ‰4ä¸ªç‰ˆæœ¬ï¼Œå…¶ä¸­ä»¥ 4.0 ç‰ˆæœ¬çš„å‹ç¼©ç‡æœ€å¥½ã€‚è¿™ç§ç¼–ç æ”¯æŒ16ä½å›¾åƒæ·±åº¦çš„å¸§å†…å‹ç¼©å’Œå¸§é—´å‹ç¼©ï¼Œå¸§ç‡æ¯ç§’10å¸§ä»¥ä¸Šã€‚ç°åœ¨è¿™ç§æ ¼å¼æœ‰äº›éç¼–è½¯ä»¶ä¹Ÿå¯ä»¥å¯¹å®ƒæ—¶è¡Œå¤„ç†ï¼Œå…¶ä¸­åŒ…æ‹¬ADOBEå…¬å¸çš„ä¸“ä¸šçº§å¤šåª’ä½“è§†é¢‘å¤„ç†è½¯ä»¶AFTEREFFECTå’ŒPREMIEREã€‚</p>
</li>
<li><p>*.ASF<br>ã€€ASF (Advanced Streaming formaté«˜çº§æµæ ¼å¼)ã€‚ASFæ˜¯MICROSOFT ä¸ºäº†å’Œç°åœ¨çš„ Real player ç«äº‰è€Œå‘å±•å‡ºæ¥çš„ä¸€ç§å¯ä»¥ç›´æ¥åœ¨ç½‘ä¸Šè§‚çœ‹è§†é¢‘èŠ‚ç›®çš„æ–‡ä»¶å‹ç¼©æ ¼å¼ã€‚ASFä½¿ç”¨äº†MPEG4çš„å‹ç¼©ç®—æ³•ï¼Œå‹ç¼©ç‡å’Œå›¾åƒçš„è´¨é‡éƒ½å¾ˆä¸é”™ã€‚å› ä¸ºASFæ˜¯ä»¥ä¸€ä¸ªå¯ä»¥åœ¨ç½‘ä¸Šå³æ—¶è§‚èµçš„è§†é¢‘â€œæµâ€æ ¼å¼å­˜åœ¨çš„ï¼Œæ‰€ä»¥å®ƒçš„å›¾åƒè´¨é‡æ¯”VCDå·®ä¸€ç‚¹ç‚¹å¹¶ä¸å‡ºå¥‡ï¼Œä½†æ¯”åŒæ˜¯è§†é¢‘â€œæµâ€æ ¼å¼çš„RAMæ ¼å¼è¦å¥½ã€‚ ASFæ”¯æŒä»»æ„çš„å‹ç¼©/è§£å‹ç¼©ç¼–ç æ–¹å¼ï¼Œå¹¶å¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ç§åº•å±‚ç½‘ç»œä¼ è¾“åè®®ï¼Œå…·æœ‰å¾ˆå¤§çš„çµæ´»æ€§ã€‚ASFæµæ–‡ä»¶çš„æ•°æ®é€Ÿç‡å¯ä»¥åœ¨28.8Kbpsåˆ°3Mbpsä¹‹é—´å˜åŒ–ã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±åº”ç”¨ç¯å¢ƒå’Œç½‘ç»œæ¡ä»¶é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„é€Ÿç‡ï¼Œå®ç°VODç‚¹æ’­å’Œç›´æ’­ã€‚</p>
</li>
<li><p>*.WMV<br>ã€€WMVæ˜¯å¾®è½¯æ¨å‡ºçš„ä¸€ç§æµåª’ä½“æ ¼å¼ï¼Œå®ƒæ˜¯ASFçš„å‡çº§å»¶ä¼¸ï¼Œåœ¨åŒç­‰è§†é¢‘è´¨é‡ä¸‹ï¼ŒWMVæ ¼å¼çš„ä½“ç§¯éå¸¸å°ï¼Œå› æ­¤å¾ˆé€‚åˆåœ¨ç½‘ä¸Šæ’­æ”¾å’Œä¼ è¾“ã€‚å¾®è½¯å¸Œæœ›ç”¨å…¶å–ä»£QuickTimeä¹‹ç±»çš„æŠ€æœ¯æ ‡å‡†ä»¥åŠWAVã€AVIä¹‹ç±»çš„æ–‡ä»¶æ‰©å±•åã€‚WMVçš„ä¸»è¦ä¼˜ç‚¹åœ¨äºï¼šå¯æ‰©å……çš„åª’ä½“ç±»å‹ã€æœ¬åœ°æˆ–ç½‘ç»œå›æ”¾ã€å¯ä¼¸ç¼©çš„åª’ä½“ç±»å‹ã€æµçš„ä¼˜å…ˆçº§åŒ–ã€å¤šè¯­è¨€æ”¯æŒã€æ‰©å±•æ€§ç­‰ã€‚</p>
</li>
<li><p>*. NAVI<br>ã€€å¦‚æœä½ å‘ç°åŸæ¥çš„æ’­æ”¾è½¯ä»¶çªç„¶æ‰“ä¸å¼€æ­¤ç±»æ ¼å¼çš„AVIæ–‡ä»¶ï¼Œé‚£ä½ å°±è¦è€ƒè™‘æ˜¯ä¸æ˜¯ç¢°åˆ°äº†n AVIã€‚n AVIæ˜¯New AVI çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªåä¸ºShadow Realmçš„åœ°ä¸‹ç»„ç»‡å‘å±•èµ·æ¥çš„ä¸€ç§æ–°è§†é¢‘æ ¼å¼ã€‚å®ƒæ˜¯ç”±Microsoft ASFå‹ç¼©ç®—æ³•çš„ä¿®æ”¹è€Œæ¥çš„ï¼ˆå¹¶ä¸æ˜¯æƒ³è±¡ä¸­çš„AVIï¼‰ï¼Œè§†é¢‘æ ¼å¼è¿½æ±‚çš„æ— éæ˜¯å‹ç¼©ç‡å’Œå›¾åƒè´¨é‡ï¼Œæ‰€ä»¥NAVIä¸ºäº†è¿½æ±‚è¿™ä¸ªç›®æ ‡ï¼Œæ”¹å–„äº†åŸå§‹çš„ASFæ ¼å¼çš„ä¸€äº›ä¸è¶³ï¼Œè®© NAVI å¯ä»¥æ‹¥æœ‰æ›´é«˜çš„å¸§ç‡ã€‚å¯ä»¥è¿™æ ·è¯´ï¼ŒNAVIæ˜¯ä¸€ç§å»æ‰è§†é¢‘æµç‰¹æ€§çš„æ”¹è‰¯å‹ASFæ ¼å¼ã€‚</p>
</li>
<li><p>*.FLV</p>
</li>
</ul>
<p>FLV æ˜¯ FLASH VIDEOçš„ç®€ç§°ï¼Œæ˜¯ç”±Macromediaå…¬å¸å¼€å‘çš„å±äºè‡ªå·±çš„æµå¼è§†é¢‘æ ¼å¼ã€‚FLVä¹Ÿå°±æ˜¯éšç€Flash MXçš„æ¨å‡ºå‘å±•è€Œæ¥çš„è§†é¢‘æ ¼å¼ï¼Œæ˜¯åœ¨sorensonå…¬å¸çš„å‹ç¼©ç®—æ³•çš„åŸºç¡€ä¸Šå¼€å‘å‡ºæ¥çš„ã€‚FLVæ ¼å¼ä¸ä»…å¯ä»¥è½»æ¾çš„å¯¼å…¥Flashä¸­ï¼Œé€Ÿåº¦æå¿«ï¼Œå¹¶ä¸”èƒ½å…¶åˆ°ä¿æŠ¤ç‰ˆæƒçš„ä½œç”¨ï¼Œå¹¶ä¸”å¯ä»¥ä¸é€šè¿‡æœ¬åœ°çš„å¾®è½¯æˆ–è€…REALæ’­æ”¾å™¨æ’­æ”¾è§†é¢‘ã€‚Flash MX 2004å¯¹å…¶æä¾›äº†å®Œç¾çš„æ”¯æŒï¼Œå®ƒçš„å‡ºç°æœ‰æ•ˆåœ°è§£å†³äº†è§†é¢‘æ–‡ä»¶å¯¼å…¥Flashåï¼Œä½¿å¯¼å‡ºçš„SWFæ–‡ä»¶ä½“ç§¯åºå¤§ï¼Œä¸èƒ½åœ¨ç½‘ç»œä¸Šå¾ˆå¥½çš„ä½¿ç”¨ç­‰ç¼ºç‚¹ã€‚ç”±äºå®ƒå½¢æˆçš„æ–‡ä»¶æå°ã€åŠ è½½é€Ÿåº¦æå¿«ï¼Œä½¿å¾—ç½‘ç»œè§‚çœ‹è§†é¢‘æ–‡ä»¶æˆä¸ºå¯èƒ½ï¼Œå®ƒçš„å‡ºç°æœ‰æ•ˆåœ°è§£å†³äº†è§†é¢‘æ–‡ä»¶å¯¼å…¥Flashåï¼Œä½¿å¯¼å‡ºçš„SWFæ–‡ä»¶ä½“ç§¯åºå¤§ï¼Œä¸èƒ½åœ¨ç½‘ç»œä¸Šå¾ˆå¥½çš„ä½¿ç”¨ç­‰ç¼ºç‚¹ã€‚</p>
<h2 id="è§†é¢‘æ–‡ä»¶è½¬æ¢ï¼š"><a href="#è§†é¢‘æ–‡ä»¶è½¬æ¢ï¼š" class="headerlink" title="è§†é¢‘æ–‡ä»¶è½¬æ¢ï¼š"></a>è§†é¢‘æ–‡ä»¶è½¬æ¢ï¼š</h2><p>æ¯”è¾ƒå¸¸è§çš„è§†é¢‘æ ¼å¼è½¬åŒ–æœ‰ï¼š </p>
<p>RMâ†’ASF</p>
<p>AVIâ†’RMVB</p>
<p>datâ€“&gt;divx</p>
<p>mpgâ€“&gt;divx</p>
<p>vcdâ€“&gt;rm</p>
<p>datâ€“&gt;rm</p>
<p>mpg,datã€aviã€movâ€“&gt;rm</p>
<p>*â€“&gt;FLV</p>
<p>æœ€è¿‘è§†é¢‘åšå®¢çš„å…´èµ·ï¼Œå¯¼è‡´äº†flvçš„å¿«é€Ÿå‘å±•</p>
<p>AVIâ†’MPEG(MPEGï¼1)<br>     ä¾‹å¦‚æœ‰çºªå¿µæ€§çš„å®¶åº­å½•å½±å¸¦ï¼Œå¯ä»¥äº‹å…ˆè½¬æ¢æˆAVIæ ¼å¼ï¼Œå†ç”¨è½¯ä»¶å°†å®ƒè½¬æ¢æˆMPEGï¼1æ ¼å¼ï¼Œç„¶åç”¨åˆ»å½•å™¨å°†MPEGï¼1æ ¼å¼æ–‡ä»¶åˆ»å½•å…‰ç›˜ç‰‡ï¼Œå¾—åˆ°çš„å°±æ˜¯æ™®é€šçš„VCDå…‰ç›˜äº†ï¼Œå¯ä»¥æ‹¿åˆ°ä»»ä½•VCDæ’­æ”¾å™¨ä¸Šæ’­æ”¾ã€‚ </p>
<p>MPEG(MPEGï¼1)â†’AVI<br>       ä»MPEGåˆ°AVIæ–‡ä»¶ä¹‹é—´çš„è½¬æ¢ï¼Œä¸ºç£ç›˜èŠ‚çœç©ºé—´ã€‚</p>
<p>MPEG(MPEGï¼1)â†’ASF<br>       å°†vcdæ–‡ä»¶è½¬ç åå®ç°VODç‚¹æ’­å’Œç›´æ’­ã€‚</p>
<p>ASFâ†’MPEG(MPEGï¼1)<br>      ç”±äºASFè§†é¢‘æ ¼å¼çš„å…ˆå¤©é™åˆ¶ï¼Œä¸€èˆ¬æ¥è¯´å®ƒçš„å›¾åƒè´¨é‡å¾€å¾€æ¯”ä¸ä¸ŠMPEGï¼1ï¼Œæ‰€ä»¥è½¬æ¢ä¹‹å‰ï¼Œè¯·ä¸‰æ€è€Œåè¡Œã€‚</p>
<p>DVD(MPEGï¼2)â†’VCD (MPEGï¼1)<br>       ç”±äºDVDé©±åŠ¨å™¨å°šæœªæ™®åŠä»¥åŠDVDå…‰ç›˜æˆæœ¬æ˜‚è´µç­‰å®¢è§‚åŸå› ï¼ŒDVDå½±ç‰‡ä¸€ç›´æœªèƒ½åƒVCDä¸€æ ·æµè¡Œã€‚ä½†æˆ‘ä»¬å¯ä»¥å°†å–œçˆ±çš„DVDå½±ç‰‡è½¬æ¢æˆMPEGï¼1æ ¼å¼çš„è§†é¢‘æ–‡ä»¶ï¼Œç•™åœ¨ç¡¬ç›˜ä¸Šè§‚çœ‹æˆ–æ˜¯åˆ»æˆVCDå…‰ç›˜ã€‚</p>
<p>dat/mpg-&gt;mp3</p>
<p>CDâ€“&gt;wav,mp3,wma</p>
<p>rmâ€“&gt;mp3</p>
<p>mp3â€“&gt;wma</p>
<p>ä»¥ä¸Šåˆ—ä¸¾çš„è§†é¢‘æ ¼å¼è½¬åŒ–éƒ½æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œå½“ç„¶äº†ï¼Œè¯´åˆ°åº•ï¼Œæ˜¯æœ‰è¿™æ–¹é¢çš„å®é™…åº”ç”¨éœ€æ±‚æ‰ä¼šå‡ºç°è¿™æ–¹é¢çš„è§†é¢‘è½¬åŒ–éœ€è¦ã€‚<br>æ¯”å¦‚è¯´ï¼Œè¦æŠŠä¸€éƒ¨VCDï¼ˆä¹Ÿå°±æ˜¯MPEG1ç¼–ç çš„è§†é¢‘æ–‡ä»¶ï¼‰åˆ¶ä½œæˆå¯ä»¥åœ¨çº¿è§‚çœ‹çš„å½±ç‰‡ï¼Œæœ€å¤§çš„ç“¶é¢ˆå°±åœ¨äºæ–‡ä»¶å°ºå¯¸çš„æ”¹å˜ï¼Œå¹¶ä¸”è¦èƒ½å¤Ÿé€‚åº”ç½‘ç»œçš„ç‰¹ç‚¹ï¼Œè¿™æ ·åŸå§‹çš„æ ¼å¼å°±ä¸èƒ½æ»¡è¶³éœ€  è¦ï¼Œå¿…é¡»è¦è½¬åŒ–æˆäº’è”ç½‘è§†é¢‘æ’­æ”¾è§„èŒƒçš„æµåª’ä½“æ ¼å¼æ‰å¯ä»¥ï¼Œæ¯”å¦‚è¯´æ˜¯RMæˆ–è€…ASFï¼Œè¿™å°±æ˜¯éœ€è¦ï¼Œæ‰€ä»¥é’ˆå¯¹å½±åƒæ ¼å¼è½¬åŒ–ä¸ºæµåª’ä½“æ ¼å¼çš„è½¯ä»¶ä¹Ÿå°±åº”ç”¨è€Œç”Ÿäº†ï¼Œè¿˜æœ‰ç°åœ¨éå¸¸æµè¡Œçš„MPEG4è§†é¢‘å‹ç¼©æŠ€æœ¯ï¼Œå®ƒèƒ½å¤ŸæŠŠä¸€å¼ DVDå‹ç¼©åˆ°ä¸€å¼ CDä¸Šå»ï¼Œå¹¶ä¸”è§†é¢‘æ•ˆæœä¹Ÿä¸ä¼šæœ‰å¤ªå¤§çš„å˜åŒ–ï¼Œè‡³å°‘åœ¨æˆ‘ä»¬æ™®é€šç”¨æˆ·çœ‹æ¥ä¹Ÿæ˜¯éå¸¸ä¸é”™çš„ï¼Œè€Œæ–‡ä»¶ä½“ç§¯åˆ™å¤§å¤§å‡å°äº†ï¼Œè¿™å°±è¦æ±‚æœ‰èƒ½å¤ŸæŠŠDVDè½¬åŒ–æˆMPEG4æ–‡ä»¶çš„è½¯ä»¶å‡ºç°ï¼Œä½†æ˜¯å¦‚æœæœ‰äººæƒ³è¦æŠŠRMè½¬åŒ–æˆMPEG1ï¼ˆVCDï¼‰ï¼Œå°±æ²¡æœ‰å¤ªå¤§çš„å®é™…æ„ä¹‰äº†ï¼Œå› ä¸ºè¿™æ ·å¹¶ä¸èƒ½ç»™è§†é¢‘æ•ˆæœå¸¦æ¥å¤ªå¤§çš„æå‡ï¼Œåè€Œæ–‡ä»¶å°ºå¯¸å¤§äº†è®¸å¤šï¼Œæ‰€ä»¥æˆ‘ä»¬å¾ˆå°‘èƒ½å¤Ÿçœ‹åˆ°è¿™æ ·çš„è½¬åŒ–è½¯ä»¶ï¼Œå…¶ä»–çš„ä¹Ÿç±»ä¼¼ï¼Œæ‰€ä»¥ï¼Œåœ¨è§†é¢‘è½¬åŒ–é¢†åŸŸï¼Œå¯ä»¥å‚ç…§ä»¥ä¸‹ä¸¤ä¸ªåŸåˆ™ï¼š<br>1 æœ‰æ˜ç¡®çš„åº”ç”¨æ–¹å‘ï¼šå°±æ˜¯è¯´ä¸€ç§è§†é¢‘æ ¼å¼è½¬åŒ–æˆå¦ä¸€ç§è§†é¢‘æ ¼å¼ï¼Œå¿…é¡»è¦æœ‰æ˜ç¡®çš„åº”ç”¨æ–¹å‘ï¼Œå³ç›®æ ‡æ ¼å¼èƒ½å¤Ÿæœ‰å¾ˆå¹¿æ³›çš„åº”ç”¨ä»·å€¼ï¼Œè€Œä¸æ˜¯è¯´ä¸ºäº†è½¬åŒ–è€Œè½¬åŒ–ï¼Œæ¯”å¦‚ä¸Šæ–‡æ‰€è¯´çš„VCD-&gt;RMï¼Œå®ƒçš„åº”ç”¨æ–¹å‘å°±æ˜¯ç½‘ç»œæ’­æ”¾ï¼Œå› ä¸ºç°åœ¨åœ¨çº¿ç”µå½±æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å¸‚åœºå’Œç½‘ç»œçš„åº”ç”¨æ–¹å‘ã€‚<br>2 èƒ½å¤Ÿæå‡æ’­æ”¾ä»·å€¼ï¼š å°±æ˜¯è¯´ä¸€ç§è§†é¢‘æ ¼å¼è½¬åŒ–æˆå¦ä¸€ç§è§†é¢‘æ ¼å¼é™¤äº†æœ‰æ˜ç¡®çš„åº”ç”¨æ–¹å‘å¤–ï¼Œè¿˜è¦è€ƒè™‘è½¬åŒ–æ˜¯ä¸æ˜¯æœ‰ä»·å€¼ï¼Œå¦‚æœè¯´è½¬åŒ–åçš„æ–‡ä»¶æ’­æ”¾æ•ˆæœæ²¡æœ‰æ˜æ˜¾æå‡ï¼Œä½†æ˜¯æ–‡ä»¶å°ºå¯¸å´å¤§äº†ä¸€å€ï¼Œæˆ‘æƒ³è¿™æ ·äºæœ¬çš„ä¹°å–æ˜¯æ²¡æœ‰äººä¼šå»åšçš„ï¼ŒRMè½¬åŒ–æˆVCDå°±æ²¡æœ‰å®é™…çš„æ„ä¹‰ï¼ŒåŸå› å¦‚å‰æ–‡æ‰€è¿°ï¼Œè€ŒDVDè½¬åŒ–æˆMPEG4ä»·å€¼å°±å¾ˆå¤§ï¼Œä¸è¯´è½¬åŒ–åçš„æ’­æ”¾æ•ˆæœï¼Œå•è¯´æˆæœ¬å°±é™ä½äº†ä¸å°‘ã€‚</p>
<h2 id="éŸ³è§†é¢‘å‹ç¼©ç¼–ç æ ‡å‡†ï¼š"><a href="#éŸ³è§†é¢‘å‹ç¼©ç¼–ç æ ‡å‡†ï¼š" class="headerlink" title="éŸ³è§†é¢‘å‹ç¼©ç¼–ç æ ‡å‡†ï¼š"></a>éŸ³è§†é¢‘å‹ç¼©ç¼–ç æ ‡å‡†ï¼š</h2><p>å¤šåª’ä½“ç¼–è¾‘ç æ–¹å¼å°±æ˜¯æŒ‡é€šè¿‡ç‰¹å®šçš„å‹ç¼©æŠ€æœ¯ï¼Œå°†æŸä¸ªè§†é¢‘æ ¼å¼çš„æ–‡ä»¶è½¬æ¢æˆå¦ä¸€ç§è§†é¢‘æ ¼å¼æ–‡ä»¶çš„æ–¹å¼ï¼Œç°åœ¨ä¸»è¦çš„ç¼–ç æ–¹å¼æœ‰ï¼š</p>
<ol>
<li>MPEGç³»åˆ—ï¼š è§†é¢‘ç¼–ç æ–¹é¢ä¸»è¦æ˜¯Mpeg1ã€Mpeg2ã€Mpeg4ã€Mpeg4 AVCï¼›<br>éŸ³é¢‘ç¼–ç æ–¹é¢ä¸»è¦æ˜¯MPEG Audio Layer 1/2ã€MPEG Audio Layer 3ã€MPEG-2 AACã€MPEG-4 AACç­‰ç­‰ã€‚ æ³¨æ„ï¼šDVDéŸ³é¢‘æ²¡æœ‰é‡‡ç”¨Mpegçš„</li>
<li><p>H.26Xç³»åˆ—ï¼šåŒ…æ‹¬H261ã€H262ã€H263ã€H263+ã€H263++ã€H264</p>
</li>
<li><p>å¾®è½¯windows mediaç³»åˆ—ï¼šè§†é¢‘ç¼–ç æœ‰Mpeg-4 v1/v2/v3ã€Windows Media Video 7/8/9/10ï¼›éŸ³é¢‘ç¼–ç æœ‰Windows Media audeo v1/v2/7/8/9</p>
</li>
<li><p>Real Mediaç³»åˆ—ï¼š è§†é¢‘ç¼–ç æœ‰RealVideo G2ã€RealVideo 8/9/10ï¼›éŸ³é¢‘ç¼–ç æœ‰RealAudio cook/siproã€RealAudio AAC/AACPlusç­‰</p>
</li>
<li><p>QuickTimeç³»åˆ—ï¼š è§†é¢‘ç¼–ç æœ‰Sorenson Video 3ã€Apple MPEG-4ã€Apple H.264ï¼›éŸ³é¢‘ç¼–ç æœ‰QDesign Music 2ã€Apple MPEG-4 AAC</p>
</li>
<li><p>å…¶å®ƒï¼Œå¦‚ï¼šOggã€On2-vpxã€flash vidioï¼Œä»¥åŠM-JPEGè§†é¢‘å‹ç¼©æ–¹å¼</p>
</li>
</ol>
<h2 id="å„è§†é¢‘ç¼–ç çš„åº”ç”¨åœºåˆç®€è¦ï¼š"><a href="#å„è§†é¢‘ç¼–ç çš„åº”ç”¨åœºåˆç®€è¦ï¼š" class="headerlink" title="å„è§†é¢‘ç¼–ç çš„åº”ç”¨åœºåˆç®€è¦ï¼š"></a>å„è§†é¢‘ç¼–ç çš„åº”ç”¨åœºåˆç®€è¦ï¼š</h2><p><a href="http://blog.csdn.net/luchy/archive/2007/03/27/1542478.aspx" target="_blank" rel="external">http://blog.csdn.net/luchy/archive/2007/03/27/1542478.aspx</a>è¿™é‡Œè®²çš„æŒºè¯¦ç»†çš„</p>
<ul>
<li><ol>
<li>Mpeg1è¾ƒæ—©çš„è§†é¢‘ç¼–ç ï¼Œè´¨é‡æ¯”è¾ƒå·®ï¼Œä¸»è¦ç”¨äº CD-ROM å­˜å‚¨è§†é¢‘ï¼Œå›½å†…æœ€ä¸ºå¤§å®¶ç†Ÿæ‚‰çš„å°±æ˜¯ VCDï¼ˆVideo CDï¼‰ï¼Œä»–çš„è§†é¢‘ç¼–ç å°±æ˜¯é‡‡ç”¨ MPEG-1ï¼›</li>
</ol>
</li>
<li><ol>
<li>åœ¨ MPEG-1 çš„åŸºç¡€ä¸Šå¼€å‘çš„ä¸€ç§è§†é¢‘ç¼–ç ï¼Œå®ƒçš„è´¨é‡è¿œè¿œå¥½äº MPEG-1ï¼Œæ‰€ä»¥è¢«è¿ç”¨åœ¨äº† DVD-Video ä¸Šé¢ï¼ŒMPEG-2 æ˜¯ DVD-Video å”¯ä¸€æŒ‡å®šçš„è§†é¢‘ç¼–ç ã€‚MPEG-2 ä¸å…‰è¿ç”¨äº DVD-Video ï¼Œç°åœ¨å¤§éƒ¨åˆ† HDTVï¼ˆé«˜æ¸…ç”µè§†ï¼‰ä¹Ÿé‡‡ç”¨ MPEG-2 ç¼–ç ï¼Œåˆ†è¾¨ç‡è¾¾åˆ°äº† 1920x1080ã€‚</li>
</ol>
</li>
<li><ol>
<li>MPEG-3æ˜¯MPEGç»„ç»‡åˆ¶å®šçš„è§†é¢‘å’ŒéŸ³é¢‘å‹ç¼©æ ‡å‡†ã€‚æœ¬æ¥çš„ç›®æ ‡æ˜¯ä¸ºHDTVæä¾›20-40Mbpsè§†é¢‘å‹ç¼©æŠ€æœ¯ã€‚åœ¨æ ‡å‡†åˆ¶å®šçš„è¿‡ç¨‹ä¸­ï¼Œå§”å‘˜ä¼šå¾ˆå¿«å‘ç°MPEG-2å¯ä»¥å–å¾—ç±»ä¼¼çš„æ•ˆæœã€‚éšåï¼ŒMPEG-3é¡¹ç›®åœæ­¢äº†ã€‚</li>
</ol>
</li>
<li><ol>
<li>MPEG-4æ˜¯ä¸ºäº†é€‚åº”ç½‘ç»œçš„éœ€æ±‚ï¼Œé‡‡ç”¨ä¸€ç³»åˆ—æ–°æŠ€æœ¯ï¼Œä»¥æœ€å°‘çš„æ•°æ®è·å¾—æœ€ä½³çš„å›¾åƒè´¨é‡ä¸ºç›®æ ‡çš„æ–°ä¸€ä»£ç¼–ç æ–¹å¼ã€‚ä¸»è¦åº”ç”¨åœ¨æ•°å­—ç”µè§†ã€åŠ¨æ€å›¾åƒã€äº’è”ç½‘ã€å®æ—¶å¤šåª’ä½“ç›‘æ§ã€ç§»åŠ¨å¤šåª’ä½“é€šä¿¡ã€Internetï¼intranetä¸Šçš„è§†é¢‘æµä¸å¯è§†æ¸¸æˆã€DVDä¸Šçš„äº¤äº’å¤šåª’ä½“åº”ç”¨ç­‰æ–¹é¢ã€‚Divxï¼Œxvidï¼Œms mpeg4éƒ½æ˜¯é‡‡ç”¨mpeg-4è§†é¢‘ç¼–ç çš„ã€‚å¯¹äºæ™®é€šç”¨æˆ·æ¥è¯´ï¼ŒMPEG-4åœ¨ç›®å‰æ¥è¯´æœ€æœ‰å¸å¼•åŠ›çš„åœ°æ–¹è¿˜åœ¨äºå®ƒèƒ½åœ¨æ™®é€šCD-ROMä¸ŠåŸºæœ¬å®ç°DVDçš„è´¨é‡ï¼›ç”¨MPEG-4å‹ç¼©ç®—æ³•çš„ASF(Advanced Streaming formatï¼Œé«˜çº§æ ¼å¼æµ)å¯ä»¥å°†120åˆ†é’Ÿçš„ç”µå½±å‹ç¼©ä¸º300MBå·¦å³çš„è§†é¢‘æµï¼›é‡‡ç”¨MPEG-4å‹ç¼©ç®—æ³•çš„DIVXè§†é¢‘ç¼–ç æŠ€æœ¯å¯ä»¥å°†120åˆ†é’Ÿçš„ç”µå½±å‹ç¼©600MBå·¦å³</li>
</ol>
</li>
<li><ol>
<li>Mpeg4 AVCå’Œ MPEG-4 æ˜¯ä¸¤ç§ä¸åŒçš„ç¼–ç ï¼Œä¸»è¦æ˜¯åœ¨æä½ç ç‡ä¸‹ MPEG-4 è¡¨ç°å¹¶ä¸å¥½ï¼Œè€Œ AVC æ›´åŠ é€‚åˆä½å¸¦å®½ä¼ è¾“ã€‚åœ¨é«˜ç ç‡ä¸Šï¼ŒAVC çš„è¡¨ç°ä¹Ÿè¦å¥½è¿‡ MPEG-4ï¼Œæ‰€ä»¥ç°åœ¨å¤§æœ‰å–ä»£ MPEG-4 çš„è¶‹åŠ¿ã€‚ä¸‹ä¸€ä»£ HD DVD å’Œ Blue Ray Disc å·²ç»æ­£å¼æ¥çº³ AVC ä¸ºè§†é¢‘ç¼–ç æ–¹æ¡ˆä¹‹ä¸€ï¼Œç›¸ä¿¡ AVC çš„å‘å±•å‰é€”ä¼šéå¸¸å¥½ã€‚AVC/H.264ææœ‰å¯èƒ½æˆä¸ºä¸‹ä¸€ä»£è§†é¢‘æ ¼å¼ï¼Œï¼ˆavsï¼Œä¸­å›½æ ‡å‡†ï¼‰</li>
</ol>
</li>
<li><ol>
<li>H.261æ˜¯ITU-Tä¸ºåœ¨ç»¼åˆä¸šåŠ¡æ•°å­—ç½‘(ISDN)ä¸Šå¼€å±•åŒå‘å£°åƒä¸šåŠ¡(å¯è§†ç”µè¯ã€è§†é¢‘ä¼šè®®)è€Œåˆ¶å®šçš„ï¼Œå®ƒæ˜¯æœ€æ—©çš„è¿åŠ¨å›¾åƒå‹ç¼©æ ‡å‡†ï¼Œå®ƒè¯¦ç»†åˆ¶å®šäº†è§†é¢‘ç¼–ç çš„å„ä¸ªéƒ¨åˆ†ï¼ŒåŒ…æ‹¬è¿åŠ¨è¡¥å¿çš„å¸§é—´é¢„æµ‹ã€DCTå˜æ¢ã€é‡åŒ–ã€ç†µç¼–ç ï¼Œä»¥åŠä¸å›ºå®šé€Ÿç‡çš„ä¿¡é“ç›¸é€‚é…çš„é€Ÿç‡æ§åˆ¶ç­‰éƒ¨åˆ†ã€‚</li>
</ol>
</li>
<li><ol>
<li>H.262æ˜¯ç”±ITU-Tçš„VCEGç»„ç»‡å’ŒISO/IECçš„MPEGç»„ç»‡è”åˆåˆ¶å®šçš„ï¼Œæ‰€ä»¥åˆ¶å®šå®Œæˆååˆ†åˆ«æˆä¸ºäº†ä¸¤ä¸ªç»„ç»‡çš„æ ‡å‡†ï¼Œæ­£å¼åç§°æ˜¯â€ITU-Tå»ºè®®H.262â€å’Œâ€ISO/IEC 13818-2â€ã€‚è¿™ä¸¤ä¸ªæ ‡å‡†åœ¨æ‰€æœ‰çš„æ–‡å­—å™è¿°ä¸Šéƒ½æ˜¯ç›¸åŒçš„ã€‚</li>
</ol>
</li>
<li><ol>
<li>H.263æ˜¯ITU-Tä¸ºä½äº64kb/sçš„çª„å¸¦é€šä¿¡ä¿¡é“åˆ¶å®šçš„è§†é¢‘ç¼–ç æ ‡å‡†ï¼Œå®ƒæ˜¯åœ¨H.261åŸºç¡€ä¸Šå‘å±•èµ·æ¥çš„</li>
</ol>
</li>
<li><ol>
<li>H263+æ˜¯H.263 çš„ç¬¬äºŒä¸ªç‰ˆæœ¬ï¼ŒåŠ å…¥äº†è®¸å¤šæ–°æŠ€æœ¯æ¥æ‰©å±• H.263 çš„åº”ç”¨èŒƒå›´ã€‚</li>
</ol>
</li>
<li><p>10.H.263++æ˜¯åœ¨ H.263+ ä¸Šå¢åŠ äº†å‡ ä¸ªé€‰é¡¹ï¼Œæ¥å¢å¼ºç æµåœ¨æ¶åŠ£ä¿¡é“ä¸Šçš„æŠ—è¯¯ç æ€§èƒ½ï¼ŒåŒæ—¶æé«˜å¢å¼ºç¼–ç æ•ˆç‡ã€‚</p>
</li>
<li><p>11.H.264ä¹Ÿå°±æ˜¯å‰é¢æåˆ°çš„ MPEG-4 AVCã€‚H.264æ˜¯ç”±ISO/IECä¸ITU-Tç»„æˆçš„è”åˆè§†é¢‘ç»„(JVT)åˆ¶å®šçš„æ–°ä¸€ä»£è§†é¢‘å‹ç¼©ç¼–ç æ ‡å‡†ã€‚åœ¨ISO/IECä¸­è¯¥æ ‡å‡†å‘½åä¸ºAVC (Advanced Video Coding)ï¼Œä½œä¸ºMPEG-4æ ‡å‡†çš„ç¬¬10ä¸ªé€‰é¡¹ï¼›åœ¨ITU-Tä¸­æ­£å¼å‘½åä¸ºH.264æ ‡å‡†ã€‚</p>
</li>
<li><p>12.Microsoft MPEG-4 v1/v2/v3ï¼Œæœ€æ—©çš„ ASF é‡‡ç”¨çš„è§†é¢‘ç¼–ç ï¼ŒåŸºäº MPEG-4 æŠ€æœ¯å¼€å‘ï¼ŒDivX3.11 å°±æ˜¯åŸºäº Microsoft MPEG-4 v3 ç ´è§£å‡ºæ¥çš„ï¼Œåæ¥æ‰è¿›è¡Œäº†é‡å†™ã€‚</p>
</li>
<li><p>13.Windows Media Video 7ï¼ŒMicrosoft æ­£å¼å¼€å‘çš„ç¬¬ä¸€ä¸ª Windows Media Videoï¼Œå¼€å§‹è„±ç¦»äº† MPEG-4ï¼Œå’Œ MPEG-4 ä¸å…¼å®¹ï¼Œä»è¿™ä¸€ç‚¹ä¸Šå¯è§å¾®è½¯çš„é‡å¿ƒã€‚å¯æƒœè¿™ä¸ªç‰ˆæœ¬å‹ç¼©æ•ˆæœéå¸¸çƒ‚ï¼Œæ‰“ç ´äº†å¾®è½¯ä¸€é£å†²å¤©çš„ç¾æ¢¦ï¼Œä¸è¿‡å®ƒåœ¨å‹ç¼©é€Ÿåº¦ä¸Šéå¸¸å¿«ï¼Œç°åœ¨ç½‘ç»œä¸Šæœ‰å¾ˆå¤šé‡‡ç”¨è¿™ç§æ ¼å¼å‹ç¼©çš„ WMVã€‚</p>
</li>
<li><p>14.Windows Media Video 8ï¼Œåœ¨ WMV7 åŸºç¡€ä¸Šæ”¹è¿›çš„ç‰ˆæœ¬ï¼Œè´¨é‡ä¸Šé¢è¿›ä¸äº†ä¸å°‘</p>
</li>
<li><p>15.Windows Media Video 9ï¼Œå¾®è½¯çš„é‡å¤´æˆï¼Œä¸å…‰æ˜¯è¿™ä¸€ä¸ªç¼–ç ï¼ŒV9 ç³»åˆ—æ›´æ˜¯ä¸€ä¸ªå¹³å°ï¼Œè®©å¾®è½¯æœ‰è¶³å¤Ÿçš„èƒ½åŠ›æŒ‘æˆ˜ MPEGï¼ŒITU ç­‰æ ‡å‡†åŒ–ç»„ç»‡ã€‚è™½ç„¶è¿™ä¸ªç‰ˆæœ¬å¹¶æ²¡æœ‰å¾®è½¯å¹å¾—é‚£ä¹ˆå‰å®³ï¼Œç‰¹åˆ«æ˜¯ä½ç ç‡ä¸‹æ¯”è¾ƒå·®ï¼Œä¸è¿‡è·Ÿä»¥å‰ç‰ˆæœ¬ç›¸æ¯”è¿›æ­¥è¿˜æ˜¯éå¸¸å¤šçš„ã€‚ç‰¹åˆ«æ˜¯ WMV HD çš„åº”ç”¨ï¼Œè®©å¾®è½¯ä¹Ÿè·»èº«è§†é¢‘æ ‡å‡†é¢†åŸŸã€‚</p>
</li>
<li><p>16.RealVideo G2ï¼Œæ—©æœŸçš„ RealVideo ç¼–ç ï¼Œè´¨é‡æ¯”è¾ƒç³Ÿç³•ï¼Œä¸è¿‡é‚£æ—¶åœ¨ç½‘ç»œä¸Šç®—æ˜¯å¾ˆå…ˆè¿›äº†ï¼Œæ¯•ç«Ÿå½“æ—¶èƒ½ç”¨ç½‘ç»œçœ‹è§†é¢‘çš„äººä¸å¤šã€‚</p>
</li>
<li><p>17.RealVideo 8ï¼Œéšç€ RealPlayer 8 æ¨å‡ºçš„è§†é¢‘æ ¼å¼ï¼Œæ˜¯ç°åœ¨ä¸»æµçš„ç½‘ç»œè§†é¢‘ç¼–ç ä¹‹ä¸€ã€‚ç¼–ç é€Ÿåº¦è¾ƒæ…¢ï¼Œè´¨é‡ä¹Ÿåªèƒ½ç®—ä¸€èˆ¬ã€‚</p>
</li>
<li><p>18.RealVideo 9ï¼ŒRealNetworks å¼€å‘çš„æ–°ä¸€ä»£ç¼–ç ï¼Œè´¨é‡è¿›æ­¥äº†å¾ˆå¤šï¼Œç‰¹åˆ«æ˜¯åœ¨åº•ç ç‡ä¸‹ï¼Œè€Œä¸”ç¼–ç é€Ÿåº¦å¾ˆå¿«ï¼Œåšåˆ°äº†é€Ÿä¸è´¨çš„å¾ˆå¥½ç»Ÿä¸€ã€‚</p>
</li>
<li><p>19.RealVideo 10ï¼Œåœ¨ RealVideo 9 åŸºç¡€ä¸ŠåŠ å…¥äº†ä¸€äº›å‚æ•°ï¼Œå¦‚ EHQ ç­‰ï¼Œæ›´åŠ ç²¾ç¡®æ§åˆ¶ç ç‡ï¼Œå’Œ RealVideo 9 å…¼å®¹ã€‚</p>
</li>
<li><p>20.Sorenson Video 3ï¼ŒSorenson Media å…¬å¸éš QuickTime 5 å‘å¸ƒçš„ç¼–ç å™¨ï¼Œè´¨é‡å¾ˆä¸é”™ï¼Œå·²ç»æˆä¸º QuickTime çš„æ ‡å‡†è§†é¢‘ç¼–ç ï¼Œç½‘ç»œä¸Šå¤§éƒ¨åˆ†ç”µå½±é¢„å‘Šç‰‡éƒ½é‡‡ç”¨è¿™ç§ç¼–ç ã€‚</p>
</li>
<li><p>21.Apple MPEG-4ï¼ŒApple å…¬å¸è‡ªå·±å¼€å‘çš„ MPEG-4 ç¼–ç å™¨ï¼Œéš QuickTime 6 å‘å¸ƒï¼Œè´¨é‡å¾ˆå·®ã€‚</p>
</li>
<li><p>22.Apple H.264ï¼ŒApple å…¬å¸è‡ªå·±å¼€å‘çš„ H.264 ç¼–ç å™¨ï¼Œéš QuickTime 7 å‘å¸ƒï¼Œæ”¯æŒ HDTVã€‚</p>
</li>
<li><p>23.Ogg æ˜¯ Xiph.org åŸºé‡‘ä¼šå‘èµ·çš„ä¸€ä¸ªå¼€æ”¾æºä»£ç é¡¹ç›®ï¼ŒåŒ…æ‹¬è§†é¢‘éŸ³é¢‘ï¼ŒæœåŠ¡å™¨ï¼Œä¼ è¾“ç³»ç»Ÿï¼Œå®¢æˆ·ç«¯ï¼Œç¡¬ä»¶æ”¯æŒç­‰ï¼Œæœ€ä¸ºå¤§å®¶ç†Ÿæ‚‰çš„å°±æ˜¯éŸ³é¢‘ Ogg Vorbisï¼Œå®ƒè¢«è®¤ä¸ºæ˜¯è¿„ä»Šä¸ºæ­¢ 128kbps ç ç‡ä¸Šæœ€å¥½çš„ç¼–ç å™¨ã€‚</p>
</li>
<li><p>24.On2 VPXç³»åˆ—ï¼ŒOn2 å…¬å¸å¼€å‘äº†ä¸€ç³»åˆ—ä¼˜ç§€çš„è§†é¢‘ç¼–ç ï¼Œç°åœ¨åº”ç”¨å¾—æœ€å¤šçš„ææ€•æ˜¯ Nullsoft Video çš„è§†é¢‘ï¼Œå®ƒä»¬å°±é‡‡ç”¨äº† VP3ï¼ŒVP5ï¼ŒVP6 è§†é¢‘ç¼–ç ã€‚</p>
</li>
<li><p>25.Flash Videoï¼ŒMacromedia å…¬å¸æ¨å‡ºçš„å¤šåª’ä½“æ ¼å¼ï¼Œä¸»è¦ç”¨äºåœ¨ Flash ä¸­å‹ç¼©è§†é¢‘ã€‚è§†é¢‘é‡‡ç”¨ Sorenson å…¬å¸çš„ Spark ç¼–ç å™¨ï¼ŒéŸ³é¢‘é‡‡ç”¨ MP3ï¼Œè´¨é‡æ¯”è¾ƒå·®ã€‚ä¼ é—»ä¸‹ä¸€ä»£ Flash Video å‡†å¤‡ä½¿ç”¨ On2 VP6 ï¼Œé‚£å°†è®©è§†é¢‘è´¨é‡å¾—åˆ°ä¸€ä¸ªé‡çš„æå‡ã€‚</p>
</li>
<li><p>26.M-JPEGï¼ˆMotion-JoinPhotographicExpertsGroupï¼‰æŠ€æœ¯å³è¿åŠ¨é™æ­¢å›¾åƒï¼ˆæˆ–é€å¸§ï¼‰å‹ç¼©æŠ€æœ¯ï¼Œå¹¿æ³›åº”ç”¨äºéçº¿æ€§ç¼–è¾‘é¢†åŸŸå¯ç²¾ç¡®åˆ°å¸§ç¼–è¾‘å’Œå¤šå±‚å›¾åƒå¤„ç†ï¼ŒæŠŠè¿åŠ¨çš„è§†é¢‘åºåˆ—ä½œä¸ºè¿ç»­çš„é™æ­¢å›¾åƒæ¥å¤„ç†ï¼Œè¿™ç§å‹ç¼©æ–¹å¼å•ç‹¬å®Œæ•´åœ°å‹ç¼©æ¯ä¸€å¸§ï¼Œåœ¨ç¼–è¾‘è¿‡ç¨‹ä¸­å¯éšæœºå­˜å‚¨æ¯ä¸€å¸§ï¼Œå¯è¿›è¡Œç²¾ç¡®åˆ°å¸§çš„ç¼–è¾‘ï¼Œæ­¤å¤–M-JPEGçš„å‹ç¼©å’Œè§£å‹ç¼©æ˜¯å¯¹ç§°çš„ï¼Œå¯ç”±ç›¸åŒçš„ç¡¬ä»¶å’Œè½¯ä»¶å®ç°ã€‚</p>
</li>
</ul>
<h2 id="å„éŸ³é¢‘ç¼–ç çš„åº”ç”¨åœºåˆç®€è¦ï¼š"><a href="#å„éŸ³é¢‘ç¼–ç çš„åº”ç”¨åœºåˆç®€è¦ï¼š" class="headerlink" title="å„éŸ³é¢‘ç¼–ç çš„åº”ç”¨åœºåˆç®€è¦ï¼š"></a>å„éŸ³é¢‘ç¼–ç çš„åº”ç”¨åœºåˆç®€è¦ï¼š</h2><ol>
<li><p>MPEG Audio Layer 1å…¸å‹æ•°æ®å‹ç¼©ç‡æ˜¯1ï¼š4ï¼Œå³æ¯ä¸ªç«‹ä½“å£°ä¿¡å·ä¸º384 kbps</p>
</li>
<li><p>MPEG Audio Layer 2å…¸å‹æ•°æ®å‹ç¼©ç‡æ˜¯1ï¼š4â€”1ï¼š8ï¼Œå³æ¯ä¸ªç«‹ä½“å£°ä¿¡å·ä¸º256åˆ°192 kbpsã€‚MPEG Audio Layer1/2ä¸»è¦ç”¨äºvcdï¼Œsvcdçš„éŸ³é¢‘ç¼–ç </p>
</li>
<li><p>MPEG Audio Layer 3ï¼Œä¹Ÿå°±æ˜¯å¤§åé¼é¼çš„mp3ï¼Œå·²ç»æˆä¸ºç½‘ç»œéŸ³é¢‘çš„ä¸»æµæ ¼å¼ï¼Œèƒ½åœ¨128kbpsçš„ç ç‡ä¸‹æ¥è¿‘cdéŸ³è´¨ã€‚å…¸å‹æ•°æ®å‹ç¼©ç‡æ˜¯1ï¼š10â€”1ï¼š12ï¼Œå³æ¯ä¸ªç«‹ä½“å£°ä¿¡å·ä¸º128åˆ°112 kbps</p>
</li>
<li><p>MPEG-2 AACï¼ˆAdvanced Audio Codingï¼‰æ˜¯åœ¨1997å¹´ç”±ä»¥Bosiã€Brandenburgã€Johnstonç­‰ä¸ºé¦–çš„éŸ³é¢‘ç¼–ç ç ”ç©¶æå‡ºçš„ï¼Œå®ƒæ€»ç»“äº†MPEG-1ã€MPEG-2å’ŒAC-3ç­‰çš„é•¿å¤„ï¼Œåœ¨MPEG ç³»ç»Ÿä¸Šè¿›ä¸€æ­¥æ”¹è¿›äº†å¾ˆå¤šæ–°çš„åŠŸèƒ½ï¼Œå¤§å¤§å¢å¼ºäº†ç¼–ç çš„çµæ´»åº¦ï¼Œåœ¨ä¿è¯éŸ³è´¨çš„åŒæ—¶æ›´å¤§é™åº¦åœ°å‹ç¼©äº†ç ç‡ã€‚å®ƒå’Œä¼ ç»Ÿçš„mpeg audioä¸å…¼å®¹ï¼Œåœ¨ç†è®ºä¸Šè´¨é‡è¦é«˜äºmp3ï¼Œå¹¶ä¸”æ”¯æŒå¤šå£°é“ï¼Œåœ¨96kbpsçš„ç ç‡èŒƒå›´å†…èƒ½æ¥è¿‘cdéŸ³è´¨ï¼Œæ¯”mp3æ›´åŠ é€‚åˆä½ç ç‡ä¼ è¾“ï¼›åŒæ—¶ï¼ŒMPEG-2 AACå·²ç»æˆä¸ºMPEG-4æ ‡å‡†ä¸­é«˜è´¨é‡éŸ³é¢‘ç¼–ç çš„æ ¸å¿ƒï¼Œæ˜¯ä¸‹ä¸€ä»£éŸ³é¢‘å‹ç¼©æ ‡å‡†ã€‚</p>
</li>
<li><p>MPEG-4 AACï¼šæ˜¯MPEG-4æ ‡å‡†éŸ³é¢‘ç¼–ç æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œappleå…¬å¸è‡ªå·±å¼€å‘æœ‰è¿™ç§ AAC ç¼–ç å™¨ï¼Œè´¨é‡éå¸¸å¥½ï¼Œæ˜¯æœ€ä¼˜ç§€çš„ AAC ç¼–ç å™¨ä¹‹ä¸€ï¼Œéš QuickTime 6 å‘å¸ƒ</p>
</li>
<li><p>æœæ¯”æ•°å­—AC-3æŠ€æœ¯ä¹Ÿå°±æ˜¯5.1å£°é“æŠ€æœ¯</p>
</li>
<li><p>Windows Media Audio v1/v2ï¼Œå¾®è½¯æœ€æ—©çš„éŸ³é¢‘ç¼–ç æŠ€æœ¯ï¼Œç”¨äº ASF ä¸­ï¼Œåæ¥è¢«ç ´è§£ä¹Ÿç”¨åœ¨ DivX Audio ä¸­ï¼Œè´¨é‡æ¯”è¾ƒå·®ã€‚</p>
</li>
<li><p>Windows Media Audio 7/8/9ï¼Œéšç€å„ç§ä¸åŒçš„ WMV è€Œæ¨å‡ºçš„ç›¸åº”çš„éŸ³é¢‘ç¼–ç ï¼Œè´¨é‡èŠ‚èŠ‚æå‡ï¼Œä¸è¿‡è¿˜æ²¡æœ‰è¾¾åˆ° 64kbps CDéŸ³è´¨çš„ç¥åŒ–</p>
</li>
<li><p>Windows Media Audio 9 Professionalï¼ŒWMA9 ä¸­å‡ºç°çš„æ–°ç¼–ç ï¼Œä¸»è¦ç”¨äºå¤šå£°é“ç¼–ç å’Œé«˜é‡‡æ ·ç‡éŸ³é¢‘çš„ç¼–ç ï¼Œè´¨é‡ä¸é”™ã€‚</p>
</li>
<li><p>RealAudio Cookï¼Œæ—©æœŸçš„éŸ³é¢‘ç¼–ç ï¼Œä½†æ˜¯åœ¨ç°åœ¨çœ‹æ¥ï¼Œä»ç„¶è´¨é‡ä¸é”™ï¼Œå¯æƒœæœ€é«˜ç ç‡ 96kbpsã€‚åº”ç”¨åˆ°äº†ä¸¤ä»£éŸ³é¢‘ç¼–ç ä¸­ï¼šRealAudio G2ã€RealAudio 8ã€‚</p>
</li>
<li><p>RealAudio Siproï¼Œé‡‡ç”¨äº† Sipro è¯­éŸ³ç¼–ç æŠ€æœ¯ï¼Œä¸»è¦é’ˆå¯¹è¯­éŸ³ç¼–ç ï¼Œåº”ç”¨åœ¨æ›´æ—©æœŸçš„ RealAudio 4.0ã€RealAudio 5.0 ä¸­ã€‚</p>
</li>
<li><p>RealAudio AACï¼ŒAAC éŸ³é¢‘ç¼–ç ï¼Œç”¨äº RealAudio 10 ä¸­ã€‚</p>
</li>
<li><p>RealAudio aacPlusï¼ŒaacPlus éŸ³é¢‘ç¼–ç ï¼Œç”¨äº RealAudio 10 ä¸­ï¼Œä¸è¿‡å¹¶æ²¡æœ‰éš RealProducer å‘è¡Œï¼Œéœ€è¦å•ç‹¬è´­ä¹°ã€‚</p>
</li>
<li><p>QDesign Music 2ï¼ŒQDesign Music çš„ç¬¬äºŒä¸ªç‰ˆæœ¬ï¼Œä¹Ÿæ˜¯æœ€åä¸€ä¸ªç‰ˆæœ¬ï¼Œåœ¨æ—¶ä¸‹è¿™äº›å…ˆè¿›çš„éŸ³é¢‘ç¼–ç é¢å‰ï¼Œå®ƒå·²ç»æ²¡æœ‰ç”Ÿå‘½åŠ›äº†ï¼Œä¸»è¦åº”ç”¨äºç½‘ä¸Šçš„ç”µå½±é¢„å‘Šç‰‡ã€‚</p>
</li>
<li><p>Apple MPEG-4 AACï¼ŒApple å…¬å¸è‡ªå·±å¼€å‘çš„ AAC ç¼–ç å™¨ï¼Œè´¨é‡éå¸¸å¥½ï¼Œæ˜¯æœ€ä¼˜ç§€çš„ AAC ç¼–ç å™¨ä¹‹ä¸€ï¼Œéš QuickTime 6 å‘å¸ƒã€‚</p>
</li>
</ol>
<h2 id="å››ç§ä¸»æµçš„è§†é¢‘å‹ç¼©ç¼–ç æ ‡å‡†ï¼š"><a href="#å››ç§ä¸»æµçš„è§†é¢‘å‹ç¼©ç¼–ç æ ‡å‡†ï¼š" class="headerlink" title="å››ç§ä¸»æµçš„è§†é¢‘å‹ç¼©ç¼–ç æ ‡å‡†ï¼š"></a>å››ç§ä¸»æµçš„è§†é¢‘å‹ç¼©ç¼–ç æ ‡å‡†ï¼š</h2><p>1ã€Windows Media Video 9</p>
<p>ã€€ã€€ç›¸æ¯”èµ·å…¶ä»–ä¸‰ç§å›¾åƒå‹ç¼©æŠ€æœ¯ï¼ŒWMVå¯èƒ½æ˜¯ä½¿ç”¨ç‡æœ€é«˜çš„è§†é¢‘ç¼–ç æ ¼å¼ã€‚åŸå› ååˆ†ç®€å•ï¼Œå¦‚æœæƒ³ä½¿è‡ªå·±çš„å½±ç‰‡ç›´æ¥ç»™ç½‘ä¸Šå…¶ä»–ç”¨æˆ·è§‚çœ‹åˆ°çš„è¯ï¼Œåˆ©ç”¨å¾®è½¯è‡ªèº«çš„è§†é¢‘ç¼–ç æ ‡å‡†æ˜¯æœ€ç®€å•çš„åšæ³•ã€‚å› ä¸ºåªè¦ç”¨æˆ·çš„ç”µè„‘ä¸­æœ‰Windows Media Player(åª’ä½“æ’­æ”¾å™¨)ï¼Œå°±èƒ½å¤Ÿæ’­æ”¾WMVå½±ç‰‡ï¼Œè€Œä¸”ä¸ç”¨é¢å¤–å®‰è£…Codecï¼ˆç¼–ç ï¼‰ï¼Œæ‰€ä»¥å…¼å®¹æ€§æ–¹é¢å®Œå…¨ä¸ç”¨æ‹…å¿ƒã€‚å€ŸåŠ©Windows Media 9.0 Seriesçš„æ–°æŠ€æœ¯ï¼ŒWindows Media Video 9.0æ¯”æ—§çš„8.0ç‰ˆæœ‰å¤šè¾¾15-50%çš„å‹ç¼©ç‡æé«˜ã€‚è€Œä¸”ä¸MPEG-4ç”»è´¨ç›¸æ¯”æ—¶ï¼Œå…¶å®¹é‡å¤§å°åªéœ€ä¸€åŠå³å¯è¾¾åˆ°ã€‚åŠ ä¸Šé…åˆWindows Media Service 9.0æœåŠ¡å™¨ï¼Œåœ¨Streaming mediaï¼ˆæµåª’ä½“ï¼‰æ–¹é¢ä¹Ÿæœ‰æ›´ä½³çš„è¡¨ç°ã€‚ã€€ã€€</p>
<p>å®˜æ–¹ç½‘ç«™ï¼š<a href="http://www.microsoft.com" target="_blank" rel="external">http://www.microsoft.com</a></p>
<p>2ã€Real Video 9</p>
<p>ç©ç”µè„‘æ—¶é—´é•¿çš„æœ‹å‹éƒ½çŸ¥é“ï¼ŒReal Videoæ˜¯å¤šå¹´å‰å¸‚åœºä¸Šæœ€æ™®åŠçš„éŸ³ä¹ã€å›¾åƒæ ¼å¼ã€‚ä¸è¿‡éšç€MP3ã€WMVåŠWMVç­‰çš„å…´èµ·ï¼Œå·²ç»ä½¿Real Mediaæ ¼å¼çš„æ™®åŠç‡å¤§ä¸å¦‚å‰ã€‚ä½†ç°åœ¨å…¨ä¸–ç•Œä»ç„¶æœ‰è®¸å¤šçš„ç”µè„‘ç©å®¶æ˜¯Real Videoçš„æ”¯æŒè€…ï¼Œç½‘ä¸Šä¾›ä¸‹è½½çš„å½±ç‰‡å¾ˆå¤šä¹Ÿæ˜¯RMæˆ–RMVBæ ¼å¼ã€‚ã€€RealNetworkæ–°æ¨å‡ºäº†ä¸€å¥—åä¸ºHelix Producerçš„å·¥å…·ï¼ˆä¹Ÿå°±æ˜¯Real Producer 9ï¼‰ï¼Œå…¶ä¸­çš„RealVideo 9åœ¨å›¾åƒå‹ç¼©ç¼–ç æŠ€æœ¯æ–¹é¢ä½œå‡ºé‡å¤§ä¼˜åŒ–ï¼Œæ— è®ºåœ¨ä¸‹è½½æˆ–Streamingæ—¶éƒ½å£°ç§°æ¯”Windows Media 9å‡ºè‰²ï¼Œèƒ½å¤Ÿä»¥ä¸€åŠçš„æ¯”ç‰¹é€Ÿç‡ï¼ˆbitrateï¼‰è¾¾åˆ°MPEG-4çº§å›¾åƒï¼Œåœ¨çº¦500 Kbpsæ—¶è¾¾åˆ°æ¥è¿‘DVDçš„ç”»è´¨è¡¨ç°ã€‚åŒæ ·åœ°ï¼Œé…åˆæœåŠ¡å™¨å¯è·å¾—æ›´å‡ºè‰²çš„æ•ˆæœã€‚</p>
<p>å®˜æ–¹ç½‘å€ï¼š<a href="http://www.realnetworks.com" target="_blank" rel="external">http://www.realnetworks.com</a></p>
<p>3ã€DivX</p>
<p>ã€€ã€€å†å²ä»‹ç»ï¼š</p>
<p>ISOå…¬å¸ƒäº†â€œè¶…ä½æ¯”ç‰¹ç‡æ´»åŠ¨å›¾åƒå’Œè¯­éŸ³å‹ç¼©æ ‡å‡† â€ï¼Œæ’åºMPEGï¼4,1998å¹´10æœˆæ‰¹å‡†ç¬¬ä¸€ç‰ˆï¼Œ1994å¹´4æœˆåˆå…¬å¸ƒäº†ç¬¬äºŒç‰ˆåŠå…¶æ ¡éªŒæ¨¡å‹ï¼ˆVMï¼‰ï¼ŒMPEGï¼4æ­£å¼ç¼–å·æ˜¯ISO/IECå›½é™…æ ‡å‡†14496ï¼Œå®ƒæ˜¯ä¸€ç§æ–°å‹çš„å¤šåª’ä½“æ ‡å‡†ï¼Œå®ƒä¸å‰æ ‡å‡†ä¸€ä¸ªé‡è¦åŒºåˆ«å°±åœ¨äºï¼Œæ˜¯ä¸€ä¸ªåŸºäºå¯¹è±¡çš„è§†ç¼–ç å‹ç¼©æ ‡å‡†ï¼Œæ‰€å®šä¹‰çš„ç ç‡æ§åˆ¶çš„ç›®æ ‡å°±æ˜¯è·å¾—åœ¨ç»™å®šç ç‡ä¸‹çš„æœ€ä¼˜è´¨é‡ï¼Œå®ƒä¸ºäº’è”ç½‘ä¸Šä¼ è¾“é«˜è´¨é‡çš„å¤šåª’ä½“è§†é¢‘æä¾›äº†å¾ˆå¥½çš„æŠ€æœ¯å¹³å°ã€‚</p>
<p>1998å¹´å¾®è½¯å¼€å‘äº†ç¬¬ä¸€ä¸ªåœ¨PCä¸Šä½¿ç”¨çš„MPEGï¼4ç¼–ç å™¨ï¼Œå®ƒåŒ…æ‹¬MS MPEG4V1ã€MS MPEG4V2ã€MS MPEG4V3çš„ç³»åˆ—ç¼–ç å†…ç ï¼Œå…¶ä¸­V1å’ŒV2ç”¨æ¥åˆ¶ä½œAVIæ–‡ä»¶ï¼Œä¸€ç›´åˆ°ç°åœ¨å®ƒéƒ½æ˜¯ä½œä¸ºWindowsçš„é»˜è®¤ç»„ä»¶ï¼Œä¸è¿‡V1å’ŒV2çš„ç¼–ç è´¨é‡ä¸æ˜¯å¾ˆå¥½ï¼Œä¸€ç›´åˆ°MSã€€MPEG4V3æ‰å¼€å§‹æœ‰å¥½è½¬ï¼Œç”»è´¨æœ‰äº†æ˜¾è‘—çš„è¿›æ­¥ï¼Œä½†æ˜¯ä¸çŸ¥å¾®è½¯å‡ºäºä»€ä¹ˆç›®çš„ï¼Œå´å°†è¿™ä¸ªMSã€€MPEGV3çš„è§†é¢‘ç¼–ç å†…æ ¸å°é—­ï¼Œä»…ä»…ä½¿å…¶åº”ç”¨äºWindows Mediaæµåª’ä½“æŠ€æœ¯ä¸Šï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„ASFæµåª’ä½“æ–‡ä»¶ä¸­ã€‚ASFæ–‡ä»¶è™½ç„¶æœ‰ä¸€äº›ä¼˜åŠ¿ï¼Œä½†æ˜¯ç”±äºè¿‡åˆ†çš„å°é—­ä¸èƒ½è¢«ç¼–è¾‘ï¼Œæœ«å¾—åˆ°å¹¿æ³›åº”ç”¨ï¼Œè¿™ä¾¿æƒ¹æ€’äº†é‚£äº›ä¸ªä¸æ€•å¤©ä¸æ€•åœ°çš„è§†é¢‘é»‘å®¢å’Œè‡´åŠ›äºé’»ç ”è§†é¢‘ç¼–ç çš„é«˜æ‰‹ï¼Œåæ¥ï¼Œè¿™äº›å°ç»„ä¸ä»…ç ´è§£äº†å¾®è½¯çš„è§†é¢‘ç¼–ç ï¼Œè€Œä¸”ç»è¿‡ä»–ä»¬çš„ä¿®æ”¹ï¼Œä¸€ç§æ–°çš„è§†é¢‘ç¼–ç è¯ç”Ÿäº†ï¼šé‚£å°±æ˜¯å¹¿ä¸ºæµä¼ çš„MPEGç¼–ç å™¨ï¼DivX3.11ã€‚</p>
<p>DivXé‡‡ç”¨äº†MSçš„MPEGV3ï¼Œæ”¹è‰¯åå¹¶åŠ å…¥è‡ªå·±åŠŸèƒ½ç§°ä¹‹ä¸ºDivX3.11ï¼Œä¹Ÿæ˜¯ç›®å‰äº’è”ç½‘ä¸Šæ™®é€šé‡‡ç”¨çš„MPEGï¼4ç¼–ç å™¨ä¹‹ä¸€ã€‚å¾ˆå¿«ï¼ŒDivXè¢«ä¼ å¾—çº¢å¾—å‘ç´«ï¼Œå‡ ä¹æˆäº†ä¸šç•Œçš„æ ‡å‡†ï¼Œä½†æ˜¯ï¼ŒåŒæ ·å¾ˆå¿«åœ°å‡ºç°äº†ï¼ŒDivXçš„åŸºç¡€æŠ€æœ¯æ˜¯éæ³•ç›—ç”¨å¾®è½¯çš„ï¼Œå¾®è½¯å£°ç§°å°†å¯¹æ‰€æœ‰æ¨åŠ¨DivXå‘å±•çš„äººã€ä¼ä¸šè¿›è¡Œè¿½ç©¶ï¼Œå¯æ˜¯DivXæŠ€æœ¯çš„åˆ›é€ è€…ä¹‹ä¸€ç½—è¾¾ï¼ˆRotaï¼‰æ­£å…¨é¢ç”³è¯·å°†DivXåˆæ³•åŒ–ï¼Œè¿™æ˜¯åŸºäºDivXè™½ç„¶æ˜¯ä»Windowçš„å‘æ˜å‡ºæ¥çš„ï¼Œä½†å´æ²¡æœ‰ç”¨è¿‡ä»»ä½•å¾®è½¯çš„æŠ€æœ¯ï¼Œæ›´ç»„å»ºæ–°å…¬å¸DivXNetworkså…¨åŠ›æ¨å¹¿DivXï¼Œçœ‹æ¥DivXï¼ˆä¿—ç§°å‹ç¼©ç”µå½±ï¼‰è“¬å‹ƒå‘å±•çš„å¤§æ½®æ˜¯åŠ¿ä¸å¯æŒ¡äº†ã€‚</p>
<p>çœ‹æ¥ä»»ä½•å¸å¼•çœ¼çƒçš„æ•…äº‹åœ¨å…³é”®æ—¶åˆ»éƒ½ä¼šå‘ç”Ÿè½¬æŠ˜ï¼ŒDivXçš„å‘å±•ç«Ÿä¹Ÿä¸èƒ½è„±ç¦»è¿™ä¸€ä¿—å¥—ï¼Œå°±åœ¨DivXé¡ºåˆ©å‘å±•æ—¶æœŸï¼ŒDivXçš„æŠ€æœ¯é€æ¸æˆç†Ÿï¼Œå•†æœºæ— é™çš„æ—¶å€™ï¼Œä¸€å°å¥½æˆä¸Šæ¼”äº†ï¼ŒDivXNetworksæˆç«‹åˆè¡·å°±æ˜¯æ‘†è„±å¾®è½¯çš„æŠ€æœ¯å°é—­ï¼Œå› è€Œå‘èµ·ä¸€ä¸ªå®Œå…¨å¼€æ”¾æºç çš„é¡¹ç›®ï¼Œåä¸º â€œ Projet Mayo â€ï¼Œç›®æ ‡æ˜¯å¼€å‘ä¸€å¥—å…¨æ–°çš„ã€å¼€æ”¾æºç çš„MPEG4ç¼–ç è½¯ä»¶ï¼Œç”±äºå®ƒå®Œå…¨ç¬¦åˆISOã€€MPEGæ ‡å‡†ï¼Œåˆæ˜¯å®Œå…¨å¼€æ”¾æºä»£ç ï¼ŒOpenDivXCODECå¸å¼•äº†å¾ˆå¤šè½¯ä»¶ï¼Œè§†é¢‘é«˜æ‰‹å‚ä¸ï¼Œå¾ˆå¿«ä¾¿å¼€å‘å‡ºå…·æœ‰æ›´é«˜æ€§èƒ½çš„ç¼–ç å™¨Encore2ç­‰ç­‰ï¼Œå°±åœ¨DivXæœ€è¾‰ç…Œçš„æ—¶æœŸï¼ŒDXNå…¬å¸çªç„¶å°é—­äº†DivXçš„æºä»£ç ï¼Œå¹¶åœ¨Encore2çš„åŸºç¡€ä¸Šå‘å¸ƒäº†è‡ªæœ‰äº§å“DivX4ï¼ŒåŸæ¥DXNæ—©å°±ç»™è‡ªå·±ç•™äº†åé—¨ï¼ŒDivXé‡‡å–çš„æ˜¯LGPLåè®®ï¼Œè€Œä¸æ˜¯GPLåè®®ï¼Œè™½è¯´å®ƒä»¬éƒ½æ˜¯å…¬å…±è®¸å¯è¯åè®®ï¼Œä¿éšœè‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹è½¯ä»¶æˆ–æºç çš„æƒåˆ©ï¼Œä½†LGPLå…è®¸ç§æœ‰ï¼ŒDXNå°±æ˜¯åˆ©ç”¨è¿™ä¸€åè®®åˆå…¶ä¸å¤‡çš„è€å‡ºäº†å¤§åˆ€ã€‚</p>
<p>æ¥ç€ï¼Œå¾ˆå¤šè¢«DXNå…¬å¸ç‹ ç‹ æ¶®äº†ä¸€å›çš„è½¯ä»¶ã€è§†é¢‘å›¢ä½“å¦èµ·é—¨æˆ·ï¼Œé€æ¸é‡æ–°èšæ‹¢å¼€å‘åŠ›é‡ï¼Œé«˜ä¸¾å¤ä»‡å¤§æ——ï¼Œåœ¨OpenDivXç‰ˆæœ¬åŸºç¡€ä¸Šï¼Œå†æ¬¡å¼€å‘å‡ºä¸€ç§æ–°çš„MPEGï¼4ç¼–ç â€“XviDï¼Œåå­—çš„é¡ºåºå’ŒDviXåˆšå¥½ç›¸åï¼Œä»…ä»…ä»åå­—å°±å¯ä»¥çœ‹å‡ºXvidå……æ»¡äº†å¤ä»‡çš„åŠ›é‡ã€‚</p>
<p>DivXæ˜¯è¿‘ä¸€ä¸¤å¹´æ¥ç§°éœ¸ç½‘ç»œè§†é¢‘çš„å›¾åƒå‹ç¼©ç¼–ç æ ‡å‡†ã€‚èµ·åˆå®ƒæ˜¯ä»¥å¾®è½¯MPEG 4è§†é¢‘ç¼–ç æ ‡å‡†ä¸ºåŸºç¡€ä¿®æ”¹å’Œå¼€å‘çš„ï¼Œå¹¶ä»¥å…è´¹æ–¹å¼å‘å¸ƒã€‚å…¶ç‰¹ç‚¹æ˜¯å…·æœ‰ååˆ†ä¸é”™çš„å‹ç¼©æ¯”ç‡ï¼Œå¯ä»¥å°†ä¸€æ•´å¥—DVDè´¨é‡çš„å½±ç‰‡å‹ç¼©å­˜æ”¾åˆ°ä¸€å¼ CD-Rå…‰ç›˜ä¸­ã€‚ç°åœ¨çš„DivXåˆ†ä¸ºæ™®é€šç‰ˆå’ŒProç‰ˆï¼Œå…¶ä¸­åè€…è¿˜æœ‰æ”¶è´¹ç‰ˆå’ŒAdwareï¼ˆå¹¿å‘Šï¼‰ç‰ˆä¸¤ç§ï¼Œè‡ªå¸¦DivX Playerç¨‹åºè¿›è¡Œæ’­æ”¾ã€‚ç”¨æˆ·å¦‚æœå®‰è£…äº†å…è´¹çš„DivX Codecåï¼Œä¹Ÿå¯ç”¨Windows Media playerè§‚çœ‹DivXå½±ç‰‡ã€‚</p>
<p>å®˜æ–¹ç½‘ç«™ï¼š<a href="http://www.divx.com" target="_blank" rel="external">http://www.divx.com</a></p>
<p>4ã€Koepiâ€™s XviD Codec</p>
<p>ç›¸æ¯”èµ·å‰ä¸‰ç§è§†é¢‘ç¼–ç æ ‡å‡†æ¥è¯´ï¼ŒXvidæ¨å‡ºå¸‚åœºçš„æ—¶é—´æœ€è¿Ÿã€‚ä»å…¶åå­—å°±çŸ¥é“è¿™ç§æ ‡å‡†æ˜¯é’ˆå¯¹DivXè€Œæ¥çš„ã€‚åŸæ¥ï¼ŒDivXç”±å…è´¹è½¬ä¸ºæ”¶è´¹ç¼–ç åï¼Œä½¿éƒ¨ä»½åŸæœ‰å¼€å‘äººå‘˜ä¸æ»¡ï¼Œç»§è€Œç¦»å¼€å¹¶ç»„æˆä¸€ä¸ªæ–°çš„å¼€å‘å°ç»„ï¼Œè®¾è®¡å…è´¹ä¸”å¼€æ”¾æºä»£ç çš„XviD Codecã€‚å½“å‰ï¼ŒKoepiå’ŒNicçš„XviDéƒ½æ˜¯æ¯”è¾ƒæ´»è·ƒå’Œæœ€å¤šäººä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œè™½ç„¶ä¸¤è€…åœ¨ç¼–è¯‘ä¸Šæœ‰æ‰€ä¸åŒï¼Œä½†å®é™…åšå‡ºçš„æ•ˆæœç›¸å·®æ— å‡ ã€‚Xivdä¸DivXä¸€æ ·ï¼Œåœ¨ç¼–è¯‘åéƒ½æ˜¯ä¸€ä¸ª.AVIæ–‡ä»¶ï¼Œæ’­æ”¾æ—¶åªè¦å®‰è£…Xvid codecå°±èƒ½ç”¨Windowsåª’ä½“æ’­æ”¾å™¨ä¸­æ’­æ”¾ã€‚</p>
<p>å®˜æ–¹ç½‘ç«™ï¼š<a href="http://roeder.goe.net/~koepi" target="_blank" rel="external">http://roeder.goe.net/~koepi</a></p>
<h2 id="è§†é¢‘å‹ç¼©åŸºæœ¬æ¦‚å¿µï¼š"><a href="#è§†é¢‘å‹ç¼©åŸºæœ¬æ¦‚å¿µï¼š" class="headerlink" title="è§†é¢‘å‹ç¼©åŸºæœ¬æ¦‚å¿µï¼š"></a>è§†é¢‘å‹ç¼©åŸºæœ¬æ¦‚å¿µï¼š</h2><p>ä¸€ã€æœ‰æŸå’Œæ— æŸå‹ç¼©ï¼šåœ¨è§†é¢‘å‹ç¼©ä¸­æœ‰æŸï¼ˆLossyï¼‰å’Œæ— æŸï¼ˆLosslessï¼‰çš„æ¦‚å¿µä¸é™æ€å›¾åƒä¸­åŸºæœ¬ç±»ä¼¼ã€‚æ— æŸå‹ç¼©ä¹Ÿå³å‹ç¼©å‰å’Œè§£å‹ç¼©åçš„æ•°æ®å®Œå…¨ä¸€è‡´ã€‚å¤šæ•°çš„æ— æŸå‹ç¼©éƒ½é‡‡ç”¨RLEè¡Œç¨‹ç¼–ç ç®—æ³•ã€‚æœ‰æŸå‹ç¼©æ„å‘³ç€è§£å‹ç¼©åçš„æ•°æ®ä¸å‹ç¼©å‰çš„æ•°æ®ä¸ä¸€è‡´ã€‚åœ¨å‹ç¼©çš„è¿‡ç¨‹ä¸­è¦ä¸¢å¤±ä¸€äº›äººçœ¼å’Œäººè€³æ‰€ä¸æ•æ„Ÿçš„å›¾åƒæˆ–éŸ³é¢‘ä¿¡æ¯ï¼Œè€Œä¸”ä¸¢å¤±çš„ä¿¡æ¯ä¸å¯æ¢å¤ã€‚å‡ ä¹æ‰€æœ‰é«˜å‹ç¼©çš„ç®—æ³•éƒ½é‡‡ç”¨æœ‰æŸå‹ç¼©ï¼Œè¿™æ ·æ‰èƒ½è¾¾åˆ°ä½æ•°æ®ç‡çš„ç›®æ ‡ã€‚ä¸¢å¤±çš„æ•°æ®ç‡ä¸å‹ç¼©æ¯”æœ‰å…³ï¼Œå‹ç¼©æ¯”è¶Šå°ï¼Œä¸¢å¤±çš„æ•°æ®è¶Šå¤šï¼Œè§£å‹ç¼©åçš„æ•ˆæœä¸€èˆ¬è¶Šå·®ã€‚æ­¤å¤–ï¼ŒæŸäº›æœ‰æŸå‹ç¼©ç®—æ³•é‡‡ç”¨å¤šæ¬¡é‡å¤å‹ç¼©çš„æ–¹å¼ï¼Œè¿™æ ·è¿˜ä¼šå¼•èµ·é¢å¤–çš„æ•°æ®ä¸¢å¤±ã€‚</p>
<p>äºŒã€å¸§å†…å’Œå¸§é—´å‹ç¼©ï¼šå¸§å†…ï¼ˆIntraframeï¼‰å‹ç¼©ä¹Ÿç§°ä¸ºç©ºé—´å‹ç¼©ï¼ˆSpatial compressionï¼‰ã€‚å½“å‹ç¼©ä¸€å¸§å›¾åƒæ—¶ï¼Œä»…è€ƒè™‘æœ¬å¸§çš„æ•°æ®è€Œä¸è€ƒè™‘ç›¸é‚»å¸§ä¹‹é—´çš„å†—ä½™ä¿¡æ¯ï¼Œè¿™å®é™…ä¸Šä¸é™æ€å›¾åƒå‹ç¼©ç±»ä¼¼ã€‚å¸§å†…ä¸€èˆ¬é‡‡ç”¨æœ‰æŸå‹ç¼©ç®—æ³•ï¼Œç”±äºå¸§å†…å‹ç¼©æ—¶å„ä¸ªå¸§ä¹‹é—´æ²¡æœ‰ç›¸äº’å…³ç³»ï¼Œæ‰€ä»¥å‹ç¼©åçš„è§†é¢‘æ•°æ®ä»å¯ä»¥ä»¥å¸§ä¸ºå•ä½è¿›è¡Œç¼–è¾‘ã€‚å¸§å†…å‹ç¼©ä¸€èˆ¬è¾¾ä¸åˆ°å¾ˆé«˜çš„å‹ç¼©ã€‚<br>    é‡‡ç”¨å¸§é—´ï¼ˆInterframeï¼‰å‹ç¼©æ˜¯åŸºäºè®¸å¤šè§†é¢‘æˆ–åŠ¨ç”»çš„è¿ç»­å‰åä¸¤å¸§å…·æœ‰å¾ˆå¤§çš„ç›¸å…³æ€§ï¼Œæˆ–è€…è¯´å‰åä¸¤å¸§ä¿¡æ¯å˜åŒ–å¾ˆå°çš„ç‰¹ç‚¹ã€‚ä¹Ÿå³è¿ç»­çš„è§†é¢‘å…¶ç›¸é‚»å¸§ä¹‹é—´å…·æœ‰å†—ä½™ä¿¡æ¯ï¼Œæ ¹æ®è¿™ä¸€ç‰¹æ€§ï¼Œå‹ç¼©ç›¸é‚»å¸§ä¹‹é—´çš„å†—ä½™é‡å°±å¯ä»¥è¿›ä¸€æ­¥æé«˜å‹ç¼©é‡ï¼Œå‡å°å‹ç¼©æ¯”ã€‚å¸§é—´å‹ç¼©ä¹Ÿç§°ä¸ºæ—¶é—´å‹ç¼©ï¼ˆTemporal compressionï¼‰ï¼Œå®ƒé€šè¿‡æ¯”è¾ƒæ—¶é—´è½´ä¸Šä¸åŒå¸§ä¹‹é—´çš„æ•°æ®è¿›è¡Œå‹ç¼©ã€‚å¸§é—´å‹ç¼©ä¸€èˆ¬æ˜¯æ— æŸçš„ã€‚å¸§å·®å€¼ï¼ˆFrame differencingï¼‰ç®—æ³•æ˜¯ä¸€ç§å…¸å‹çš„æ—¶é—´å‹ç¼©æ³•ï¼Œå®ƒé€šè¿‡æ¯”è¾ƒæœ¬å¸§ä¸ç›¸é‚»å¸§ä¹‹é—´çš„å·®å¼‚ï¼Œä»…è®°å½•æœ¬å¸§ä¸å…¶ç›¸é‚»å¸§çš„å·®å€¼ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘æ•°æ®é‡ã€‚</p>
<p>ä¸‰ã€å¯¹ç§°å’Œä¸å¯¹ç§°ç¼–ç ï¼šå¯¹ç§°æ€§ï¼ˆsymmetricï¼‰æ˜¯å‹ç¼©ç¼–ç çš„ä¸€ä¸ªå…³é”®ç‰¹å¾ã€‚å¯¹ç§°æ„å‘³ç€å‹ç¼©å’Œè§£å‹ç¼©å ç”¨ç›¸åŒçš„è®¡ç®—å¤„ç†èƒ½åŠ›å’Œæ—¶é—´ï¼Œå¯¹ç§°ç®—æ³•é€‚åˆäºå®æ—¶å‹ç¼©å’Œä¼ é€è§†é¢‘ï¼Œå¦‚è§†é¢‘ä¼šè®®åº”ç”¨å°±ä»¥é‡‡ç”¨å¯¹ç§°çš„å‹ç¼©ç¼–ç ç®—æ³•ä¸ºå¥½ã€‚è€Œåœ¨ç”µå­å‡ºç‰ˆå’Œå…¶å®ƒå¤šåª’ä½“åº”ç”¨ä¸­ï¼Œä¸€èˆ¬æ˜¯æŠŠè§†é¢‘é¢„å…ˆå‹ç¼©å¤„ç†å¥½ï¼Œå°”åå†æ’­æ”¾ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨ä¸å¯¹ç§°ï¼ˆasymmetricï¼‰ç¼–ç ã€‚ä¸å¯¹ç§°æˆ–éå¯¹ç§°æ„å‘³ç€å‹ç¼©æ—¶éœ€è¦èŠ±è´¹å¤§é‡çš„å¤„ç†èƒ½åŠ›å’Œæ—¶é—´ï¼Œè€Œè§£å‹ç¼©æ—¶åˆ™èƒ½è¾ƒå¥½åœ°å®æ—¶å›æ”¾ï¼Œä¹Ÿå³ä»¥ä¸åŒçš„é€Ÿåº¦è¿›è¡Œå‹ç¼©å’Œè§£å‹ç¼©ã€‚ä¸€èˆ¬åœ°è¯´ï¼Œå‹ç¼©ä¸€æ®µè§†é¢‘çš„æ—¶é—´æ¯”å›æ”¾ï¼ˆè§£å‹ç¼©ï¼‰è¯¥è§†é¢‘çš„æ—¶é—´è¦å¤šå¾—å¤šã€‚ä¾‹å¦‚ï¼Œå‹ç¼©ä¸€æ®µä¸‰åˆ†é’Ÿçš„è§†é¢‘ç‰‡æ–­å¯èƒ½éœ€è¦10å¤šåˆ†é’Ÿçš„æ—¶é—´ï¼Œè€Œè¯¥ç‰‡æ–­å®æ—¶å›æ”¾æ—¶é—´åªæœ‰ä¸‰åˆ†é’Ÿã€‚</p>
<p>ç¬¬ä¸‰éƒ¨åˆ†ï¼šéŸ³é¢‘æ–‡ä»¶æ ¼å¼</p>
<h2 id="ä¸€äº›éŸ³è§†é¢‘çš„å‚æ•°å«ä¹‰"><a href="#ä¸€äº›éŸ³è§†é¢‘çš„å‚æ•°å«ä¹‰" class="headerlink" title="ä¸€äº›éŸ³è§†é¢‘çš„å‚æ•°å«ä¹‰:"></a>ä¸€äº›éŸ³è§†é¢‘çš„å‚æ•°å«ä¹‰:</h2><p>å£°é“ï¼šç›®å‰äººä»¬æ‰€ä½¿ç”¨çš„å„ç§å£°åœºæŠ€æœ¯è§„èŒƒéå¸¸å¤šï¼Œä½†æœ€å¸¸è§çš„å‡ ä¹éƒ½æ¥è‡ªä¸‰å®¶å…¬å¸ï¼Œä»–ä»¬æ˜¯Dolbyï¼ˆæœæ¯”ï¼‰ã€HTXå’ŒDTSã€‚å£°å¡æ‰€æ”¯æŒçš„å£°é“æ•°æ˜¯è¡¡é‡å£°å¡æ¡£æ¬¡çš„é‡è¦æŒ‡æ ‡ä¹‹ä¸€ï¼Œä»å•å£°é“åˆ°æœ€æ–°çš„ç¯ç»•ç«‹ä½“å£°ï¼Œä¸‹é¢ä¸€ä¸€è¯¦ç»†ä»‹ç»ï¼š1.å•å£°é“ï¼šå•å£°é“æ˜¯æ¯”è¾ƒåŸå§‹çš„å£°éŸ³å¤åˆ¶å½¢å¼ï¼Œæ—©æœŸçš„å£°å¡é‡‡ç”¨çš„æ¯”è¾ƒæ™®éã€‚å½“é€šè¿‡ä¸¤ä¸ªæ‰¬å£°å™¨å›æ”¾å•å£°é“ä¿¡æ¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ˜æ˜¾æ„Ÿè§‰åˆ°å£°éŸ³æ˜¯ä»ä¸¤ä¸ªéŸ³ç®±ä¸­é—´ä¼ é€’åˆ°æˆ‘ä»¬è€³æœµé‡Œçš„ã€‚è¿™ç§ç¼ºä¹ä½ç½®æ„Ÿçš„å½•åˆ¶æ–¹å¼ç”¨ç°åœ¨çš„çœ¼å…‰çœ‹è‡ªç„¶æ˜¯å¾ˆè½åçš„ï¼Œä½†åœ¨å£°å¡åˆšåˆšèµ·æ­¥æ—¶ï¼Œå·²ç»æ˜¯éå¸¸å…ˆè¿›çš„æŠ€æœ¯äº†ã€‚2.ç«‹ä½“å£°ï¼šå•å£°é“ç¼ºä¹å¯¹å£°éŸ³çš„ä½ç½®å®šä½ï¼Œè€Œç«‹ä½“å£°æŠ€æœ¯åˆ™å½»åº•æ”¹å˜äº†è¿™ä¸€çŠ¶å†µã€‚å£°éŸ³åœ¨å½•åˆ¶è¿‡ç¨‹ä¸­è¢«åˆ†é…åˆ°ä¸¤ä¸ªç‹¬ç«‹çš„å£°é“ï¼Œä»è€Œè¾¾åˆ°äº†å¾ˆå¥½çš„å£°éŸ³å®šä½æ•ˆæœã€‚è¿™ç§æŠ€æœ¯åœ¨éŸ³ä¹æ¬£èµä¸­æ˜¾å¾—å°¤ä¸ºæœ‰ç”¨ï¼Œå¬ä¼—å¯ä»¥æ¸…æ™°åœ°åˆ†è¾¨å‡ºå„ç§ä¹å™¨æ¥è‡ªçš„æ–¹å‘ï¼Œä»è€Œä½¿éŸ³ä¹æ›´å¯Œæƒ³è±¡åŠ›ï¼Œæ›´åŠ æ¥è¿‘äºä¸´åœºæ„Ÿå—ã€‚ç«‹ä½“å£°æŠ€æœ¯å¹¿æ³›è¿ç”¨äºè‡ªSound Blaster Proä»¥åçš„å¤§é‡å£°å¡ï¼Œæˆä¸ºäº†å½±å“æ·±è¿œçš„ä¸€ä¸ªéŸ³é¢‘æ ‡å‡†ã€‚æ—¶è‡³ä»Šæ—¥ï¼Œç«‹ä½“å£°ä¾ç„¶æ˜¯è®¸å¤šäº§å“éµå¾ªçš„æŠ€æœ¯æ ‡å‡†ã€‚3.å‡†ç«‹ä½“å£°ï¼šå‡†ç«‹ä½“å£°å£°å¡çš„åŸºæœ¬æ¦‚å¿µå°±æ˜¯ï¼šåœ¨å½•åˆ¶å£°éŸ³çš„æ—¶å€™é‡‡ç”¨å•å£°é“ï¼Œè€Œæ”¾éŸ³æœ‰æ—¶æ˜¯ç«‹ä½“å£°ï¼Œæœ‰æ—¶æ˜¯å•å£°é“ã€‚é‡‡ç”¨è¿™ç§æŠ€æœ¯çš„å£°å¡ä¹Ÿæ›¾åœ¨å¸‚é¢ä¸Šæµè¡Œè¿‡ä¸€æ®µæ—¶é—´ï¼Œä½†ç°åœ¨å·²ç»é”€å£°åŒ¿è¿¹äº†ã€‚4.å››å£°é“ç¯ç»•ï¼šäººä»¬çš„æ¬²æœ›æ˜¯æ— æ­¢å¢ƒçš„ï¼Œç«‹ä½“å£°è™½ç„¶æ»¡è¶³äº†äººä»¬å¯¹å·¦å³å£°é“ä½ç½®æ„Ÿä½“éªŒçš„è¦æ±‚ï¼Œä½†æ˜¯éšç€æŠ€æœ¯çš„è¿›ä¸€æ­¥å‘å±•ï¼Œå¤§å®¶é€æ¸å‘ç°åŒå£°é“å·²ç»è¶Šæ¥è¶Šä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚ç”±äºPCIå£°å¡çš„å‡ºç°å¸¦æ¥äº†è®¸å¤šæ–°çš„æŠ€æœ¯ï¼Œå…¶ä¸­å‘å±•æœ€ä¸ºç¥é€Ÿçš„å½“æ•°ä¸‰ç»´éŸ³æ•ˆã€‚ä¸‰ç»´éŸ³æ•ˆçš„ä¸»æ—¨æ˜¯ä¸ºäººä»¬å¸¦æ¥ä¸€ä¸ªè™šæ‹Ÿçš„å£°éŸ³ç¯å¢ƒï¼Œé€šè¿‡ç‰¹æ®Šçš„HRTFæŠ€æœ¯è¥é€ ä¸€ä¸ªè¶‹äºçœŸå®çš„å£°åœºï¼Œä»è€Œè·å¾—æ›´å¥½çš„æ¸¸æˆå¬è§‰æ•ˆæœå’Œå£°åœºå®šä½ã€‚è€Œè¦è¾¾åˆ°å¥½çš„æ•ˆæœï¼Œä»…ä»…ä¾é ä¸¤ä¸ªéŸ³ç®±æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œæ‰€ä»¥ç«‹ä½“å£°æŠ€æœ¯åœ¨ä¸‰ç»´éŸ³æ•ˆé¢å‰å°±æ˜¾å¾—æ‰è¥Ÿè§è‚˜äº†ï¼Œä½†å››å£°é“ç¯ç»•éŸ³é¢‘æŠ€æœ¯åˆ™å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸€é—®é¢˜ã€‚å››å£°é“ç¯ç»•è§„å®šäº†4ä¸ªå‘éŸ³ç‚¹ï¼šå‰å·¦ã€å‰å³ï¼Œåå·¦ã€åå³ï¼Œå¬ä¼—åˆ™è¢«åŒ…å›´åœ¨è¿™ä¸­é—´ã€‚åŒæ—¶è¿˜å»ºè®®å¢åŠ ä¸€ä¸ªä½éŸ³éŸ³ç®±ï¼Œä»¥åŠ å¼ºå¯¹ä½é¢‘ä¿¡å·çš„å›æ”¾å¤„ç†(è¿™ä¹Ÿå°±æ˜¯å¦‚ä»Š4.1å£°é“éŸ³ç®±ç³»ç»Ÿå¹¿æ³›æµè¡Œçš„åŸå› )ã€‚å°±æ•´ä½“æ•ˆæœè€Œè¨€ï¼Œå››å£°é“ç³»ç»Ÿå¯ä»¥ä¸ºå¬ä¼—å¸¦æ¥æ¥è‡ªå¤šä¸ªä¸åŒæ–¹å‘çš„å£°éŸ³ç¯ç»•ï¼Œå¯ä»¥è·å¾—èº«ä¸´å„ç§ä¸åŒç¯å¢ƒçš„å¬è§‰æ„Ÿå—ï¼Œç»™ç”¨æˆ·ä»¥å…¨æ–°çš„ä½“éªŒã€‚å¦‚ä»Šå››å£°é“æŠ€æœ¯å·²ç»å¹¿æ³›èå…¥äºå„ç±»ä¸­é«˜æ¡£å£°å¡çš„è®¾è®¡ä¸­ï¼Œæˆä¸ºæœªæ¥å‘å±•çš„ä¸»æµè¶‹åŠ¿ã€‚5.5.1å£°é“5.1å£°é“å·²å¹¿æ³›è¿ç”¨äºå„ç±»ä¼ ç»Ÿå½±é™¢å’Œå®¶åº­å½±é™¢ä¸­ï¼Œä¸€äº›æ¯”è¾ƒçŸ¥åçš„å£°éŸ³å½•åˆ¶å‹ç¼©æ ¼å¼ï¼Œè­¬å¦‚æœæ¯”AC-3ï¼ˆDolby Digitalï¼‰ã€DTSç­‰éƒ½æ˜¯ä»¥5.1å£°éŸ³ç³»ç»Ÿä¸ºæŠ€æœ¯è“æœ¬çš„ã€‚å…¶å®5.1å£°éŸ³ç³»ç»Ÿæ¥æºäº4.1ç¯ç»•ï¼Œä¸åŒä¹‹å¤„åœ¨äºå®ƒå¢åŠ äº†ä¸€ä¸ªä¸­ç½®å•å…ƒã€‚è¿™ä¸ªä¸­ç½®å•å…ƒè´Ÿè´£ä¼ é€ä½äº80Hzçš„å£°éŸ³ä¿¡å·ï¼Œåœ¨æ¬£èµå½±ç‰‡æ—¶æœ‰åˆ©äºåŠ å¼ºäººå£°ï¼ŒæŠŠå¯¹è¯é›†ä¸­åœ¨æ•´ä¸ªå£°åœºçš„ä¸­éƒ¨ï¼Œä»¥å¢åŠ æ•´ä½“æ•ˆæœã€‚ç›¸ä¿¡æ¯ä¸€ä¸ªçœŸæ­£ä½“éªŒè¿‡Dolby AC-3éŸ³æ•ˆçš„æœ‹å‹éƒ½ä¼šä¸º5.1å£°é“æ‰€æŠ˜æœã€‚åƒä¸‡ä¸è¦ä»¥ä¸º5.1å·²ç»æ˜¯ç¯ç»•ç«‹ä½“å£°çš„é¡¶å³°äº†ï¼Œæ›´å¼ºå¤§çš„7.1ç³»ç»Ÿå·²ç»å‡ºç°äº†ã€‚å®ƒåœ¨5.1çš„åŸºç¡€ä¸Šåˆå¢åŠ äº†ä¸­å·¦å’Œä¸­å³ä¸¤ä¸ªå‘éŸ³ç‚¹ï¼Œä»¥æ±‚è¾¾åˆ°æ›´åŠ å®Œç¾çš„å¢ƒç•Œã€‚ç”±äºæˆæœ¬æ¯”è¾ƒé«˜ï¼Œæ²¡æœ‰å¹¿æ³›æ™®åŠã€‚</p>
<p>ä¸€.WMA<br>ã€€ã€€WMAçš„å…¨ç§°æ˜¯Windows Media Audioï¼Œæ˜¯å¾®è½¯åŠ›æ¨çš„ä¸€ç§éŸ³é¢‘æ ¼å¼ã€‚WMAæ ¼å¼æ˜¯ä»¥å‡å°‘æ•°æ®æµé‡ä½†ä¿æŒéŸ³è´¨çš„æ–¹æ³•æ¥è¾¾åˆ°æ›´é«˜çš„å‹ç¼©ç‡ç›®çš„ï¼Œå…¶å‹ç¼©ç‡ä¸€èˆ¬å¯ä»¥è¾¾åˆ°1:18ï¼Œç”Ÿæˆçš„æ–‡ä»¶å¤§å°åªæœ‰ç›¸åº”MP3æ–‡ä»¶çš„ä¸€åŠã€‚æ­¤å¤–ï¼ŒWMAè¿˜å¯ä»¥é€šè¿‡DRMï¼ˆDigital Rights Managementï¼‰æ–¹æ¡ˆåŠ å…¥é˜²æ­¢æ‹·è´ï¼Œæˆ–è€…åŠ å…¥é™åˆ¶æ’­æ”¾æ—¶é—´å’Œæ’­æ”¾æ¬¡æ•°ï¼Œç”šè‡³æ˜¯æ’­æ”¾æœºå™¨çš„é™åˆ¶ï¼Œå¯æœ‰åŠ›åœ°é˜²æ­¢ç›—ç‰ˆã€‚</p>
<p>ä¼˜ç‚¹<br>WMA 7ä¹‹åçš„WMAæ”¯æŒè¯ä¹¦åŠ å¯†ï¼Œæœªç»è®¸å¯ï¼ˆå³æœªè·å¾—è®¸å¯è¯ä¹¦ï¼‰ï¼Œå³ä½¿æ˜¯éæ³•æ‹·è´åˆ°æœ¬åœ°ï¼Œä¹Ÿæ˜¯æ— æ³•æ”¶å¬çš„ã€‚åŒæ—¶ï¼Œå¾®è½¯å…¬å¸å¼€å§‹æ—¶å®£ç§°çš„ï¼šåŒæ–‡ä»¶æ¯”MP3ä½“ç§¯å°ä¸€å€è€ŒéŸ³è´¨ä¸å˜ï¼Œä¹Ÿå¾—åˆ°äº†å…‘ç°ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ªè¯´æ³•ï¼Œä»…ä»…é€‚ç”¨äºä½æ¯”ç‰¹ç‡çš„æƒ…å†µï¼Œå¦å¤–ï¼Œå¾®è½¯å…¬å¸åœ¨WMA 9å¤§å¹…æ”¹è¿›äº†å…¶å¼•æ“ï¼Œå®é™…ä¸Šå‡ ä¹å¯ä»¥åœ¨åŒæ–‡ä»¶åŒéŸ³è´¨ä¸‹æ¯”ç›¸åŒçš„MP3ä½“ç§¯å°‘1/3å·¦å³ã€‚<br>ç¼ºç‚¹<br>åœ¨é«˜æ¯”ç‡çš„æ¸²æŸ“èƒ½åŠ›ä½ä¸‹ï¼ŒåŒéŸ³æºçš„ä¸€ä¸ª320KBPSçš„MP3ä¸æ¯”è¾ƒ192KBPSçš„WMAç›¸æ¯”ï¼ŒéŸ³è´¨å’Œæ¸²æŸ“åŠ›å¾ˆå®¹æ˜“åˆ†åˆ«å‡ºæ˜¯å‰è€…è¾ƒä¼˜ã€‚</p>
<p>ã€€ã€€äºŒ.VQF<br>ã€€ã€€VQFå³TwinVQï¼ˆTransformï¼domain Weighted Interleave Vector Quantizationï¼‰ï¼Œæ˜¯ç”±NTTï¼ˆNippon Telegraph and Telephoneï¼‰ä¸Yamahaå…±åŒå¼€å‘çš„ä¸€ç§éŸ³é¢‘å‹ç¼©æŠ€æœ¯ã€‚VQFçš„éŸ³é¢‘å‹ç¼©ç‡æ¯”æ ‡å‡†çš„MPEGéŸ³é¢‘å‹ç¼©ç‡é«˜å‡ºè¿‘ä¸€å€ï¼Œå¯ä»¥è¾¾åˆ°18:1å·¦å³ç”šè‡³æ›´é«˜ã€‚ä¹Ÿå°±æ˜¯è¯´æŠŠä¸€é¦–4åˆ†é’Ÿçš„æ­Œæ›²ï¼ˆWAVæ–‡ä»¶ï¼‰å‹æˆMP3ï¼Œå¤§çº¦éœ€è¦4MBå·¦å³çš„ç¡¬ç›˜ç©ºé—´ï¼Œè€ŒåŒä¸€é¦–æ­Œæ›²ï¼Œå¦‚æœä½¿ç”¨VQFéŸ³é¢‘å‹ç¼©æŠ€æœ¯çš„è¯ï¼Œé‚£åªéœ€è¦2MBå·¦å³çš„ç¡¬ç›˜ç©ºé—´ã€‚å› æ­¤ï¼Œåœ¨éŸ³é¢‘å‹ç¼©ç‡æ–¹é¢ï¼ŒMP3å’ŒRAéƒ½ä¸æ˜¯VQFçš„å¯¹æ‰‹ã€‚</p>
<p>ä½†æ˜¯VQFä¸æ”¯æŒâ€æµâ€ï¼Œè¿™å¯èƒ½ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç°åœ¨å®ƒå®Œå…¨è¢«WMAå‹ä¸‹å»çš„ä¸€ä¸ªä¸»è¦åŸå› .</p>
<p>ã€€ã€€ä¸‰.MP3<br>MP3çš„å…¨ç§°æ˜¯Moving Picture Experts Group Audio Layer IIIã€‚ç®€å•çš„è¯´ï¼ŒMP3å°±æ˜¯ä¸€ç§éŸ³é¢‘å‹ç¼©æŠ€æœ¯ï¼Œç”±äºè¿™ç§å‹ç¼©æ–¹å¼çš„å…¨ç§°å«MPEG Audio Layer3ï¼Œæ‰€ä»¥äººä»¬æŠŠå®ƒç®€ç§°ä¸ºMP3ã€‚MP3æ˜¯åˆ©ç”¨MPEG Audio Layer 3çš„æŠ€æœ¯ï¼Œå°†éŸ³ä¹ä»¥1:10ç”šè‡³1:12 çš„å‹ç¼©ç‡ï¼Œå‹ç¼©æˆå®¹é‡è¾ƒå°çš„fileï¼Œæ¢å¥è¯è¯´ï¼Œèƒ½å¤Ÿåœ¨éŸ³è´¨ä¸¢å¤±å¾ˆå°çš„æƒ…å†µä¸‹æŠŠæ–‡ä»¶å‹ç¼©åˆ°æ›´å°çš„ç¨‹åº¦ã€‚è€Œä¸”è¿˜éå¸¸å¥½çš„ä¿æŒäº†åŸæ¥çš„éŸ³è´¨ã€‚æ­£æ˜¯å› ä¸ºMP3ä½“ç§¯å°ï¼ŒéŸ³è´¨é«˜çš„ç‰¹ç‚¹ä½¿å¾—MP3æ ¼å¼å‡ ä¹æˆä¸ºç½‘ä¸ŠéŸ³ä¹çš„ä»£åè¯ã€‚æ¯åˆ†é’ŸéŸ³ä¹çš„MP3æ ¼å¼åªæœ‰1MBå·¦å³å¤§å°ï¼Œè¿™æ ·æ¯é¦–æ­Œçš„å¤§å°åªæœ‰3-4å…†å­—èŠ‚ã€‚ä½¿ç”¨MP3æ’­æ”¾å™¨å¯¹MP3æ–‡ä»¶è¿›è¡Œå®æ—¶çš„è§£å‹ç¼©(è§£ç )ï¼Œè¿™æ ·ï¼Œé«˜å“è´¨çš„MP3éŸ³ä¹å°±æ’­æ”¾å‡ºæ¥äº†ã€‚ã€€ã€€</p>
<p>MP3æœ€å—äº‰è®®çš„å°±æ˜¯éŸ³è´¨é—®é¢˜(å°¤å…¶æ˜¯éšç€WMAçš„æ™®åŠ)ï¼Œå…¶é«˜é¢‘æŸå¤±å¾ˆå¤§ï¼Œå¾ˆå¤šMP3ç¼–ç å™¨ç²—ç³™çš„ç¼–ç ç®—æ³•ä¸ä½†å¯¼è‡´é«˜é¢‘ä¸¢å¤±ï¼Œè¿˜ä¸¢å¤±äº†è®¸å¤šç»†èŠ‚ï¼Œç±»ä¼¼å‰ä»–æ“¦å¼¦çš„æ„Ÿè§‰åœ¨MP3ä¸­æ˜¯æ‰¾ä¸åˆ°çš„.åœ¨å¯¹MP3å¿«è¦å¤±æœ›æ—¶ï¼Œå¶å‘ç°äº†Lame,å®ƒæ”¯æŒæ ¹æ®äººè€³é®è”½æ•ˆåº”åŸç†æ¥åˆ†ææ³¢å½¢ï¼Œé…åˆVBRæŠ€æœ¯ï¼Œå¯ä»¥è®©éŸ³è´¨è¾¾åˆ°ä»¤äººåƒæƒŠçš„åœ°æ­¥;å…¶ç‹¬åˆ›çš„å¿ƒç†éŸ³å“æ¨¡å‹æŠ€æœ¯ä¿è¯äº†CDéŸ³é¢‘è¿˜åŸçš„çœŸå®æ€§ï¼Œé…åˆVBR(åŠ¨æ€æ¯”ç‰¹ç‡)å’ŒABR(å¹³å‡æ¯”ç‰¹ç‡)å‚æ•°ï¼Œç¼–ç å‡ºæ¥çš„MP3éŸ³è‰²çº¯åšã€ç©ºé—´å®½å¹¿ã€ä½éŸ³æ¸…æ™°ã€ç»†èŠ‚è¡¨ç°è‰¯å¥½,éŸ³è´¨å‡ ä¹å¯ä»¥åª²ç¾CDéŸ³é¢‘ï¼Œä½†æ–‡ä»¶ä½“ç§¯å´éå¸¸å°.å¾ˆå¤šç½‘å‹åœ¨ä½¿ç”¨LAMEåçš„åæ˜ å°±æ˜¯ï¼šç«‹åˆ»åˆ é™¤ç¡¬ç›˜ä¸Šæ‰€æœ‰çš„MP3å’Œå…¶ä»–ç¼–ç å™¨ï¼Œå…¨éƒ¨ç”¨Lameé‡æ–°æ¥è¿‡ã€‚Lameæä¾›EXEå’ŒDLLï¼Œå…¶ä¸­DLLæ˜¯ä½œä¸ºæ ‡å‡†çš„åŠ¨æ€è¿è¡Œåº“ä¾›å…¶ä»–ç¨‹åºè°ƒç”¨.EXEæ˜¯Command Lineç¨‹åºï¼Œè±¡DOSç¨‹åºä¸€æ ·å·¥ä½œï¼Œä¸¤è€…å½¼æ­¤ç‹¬ç«‹ï¼Œäº’ä¸å…³è”ã€‚ä½†å¤§å®¶å¾ˆå¿«èƒ½å‘ç°ä¸¤è€…ç¼–ç çš„è´¨é‡æ˜¯ä¸ä¸€æ ·çš„,é‚£æ˜¯ç”±äºdllå¯æ§æ€§å·®ï¼Œä¸å…·å¤‡ä¸°å¯Œè°ƒèŠ‚å‚æ•°çš„EXEç‰ˆç›¸æ¯”ï¼Œå…¶å‹ç¼©å‡ºæ¥çš„MP3æ•ˆæœç¨é€Šä¸€ç­¹ã€‚ä½†EXEæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œæ“ä½œå¾ˆéº»çƒ¦ï¼Œå¹¸äºæœ‰äº†WinLAMEræˆ–lameGUIxpè¿™äº›Shellã€‚åªè¦å­¦ä¼šä½¿ç”¨è¿™äº›Shell(æ˜¯å‚»ç“œå‹çš„,ä¸€çœ‹å³ä¼š)ï¼Œå°±å¯ä»¥ç”¨LAMEå‹ç¼©å‡ºæœ€æœ€ç²¾å½©çš„MP3äº†ã€‚å†è¯´è¯´APS,åœ¨LAMEå‡ºç°ä»¥å‰ï¼ŒAPSå°±æ˜¯æœ€å¥½çš„MP3ç¼–ç å™¨ï¼Œå®ƒä½¿ç”¨çš„Fraunhofer IISç¼–ç ç®—æ³•ï¼Œè¿™æ¯”LAMEä½¿ç”¨çš„ç¼–ç ç®—æ³•è¦å…ˆè¿›ï¼Œåœ¨192k Bitrate(CBR)ä¸‹ï¼Œç”šè‡³æ¯”LAMEç¼–ç çš„æ›²å­è¦ä¼˜ç§€ï¼Œç»†èŠ‚æ˜æ˜¾è¦ä¸°å¯Œä¸€äº›ï¼Œä½†APSæœ¬èº«ä¸æ”¯æŒVBRï¼Œå½“Bitrateå¾€ä¸Šæé«˜æ—¶ï¼ŒéŸ³è´¨å°±è¦æ¯”LAMEç¼–ç çš„è¦å·®äº†ï¼Œå¤§éƒ¨åˆ†æœ‹å‹çš„MP3çš„ä¸€èˆ¬éƒ½æ˜¯128-192K Bitrateçš„ï¼Œå› æ­¤APSä»æ—§æœ‰æ¨èçš„ä»·å€¼ã€‚ç‰¹åˆ«æ˜¯æœ‰å¾ˆå¤šMP3éšèº«å¬ä¸æ”¯æŒVBRå’Œ256K Bitrateä»¥ä¸Šçš„MP3ï¼ŒLAMEå°±ä¸ä¸€å®šåˆé€‚è¿™äº›æœ‹å‹äº†ï¼ŒAPSå°±æˆäº†ä¸é”™çš„é€‰æ‹©ï¼Œç”±å®ƒç¼–ç çš„æ›²å­ï¼Œç»å¯¹ä¸ä¼šè¾±æ²¡ä½ æ˜‚è´µçš„PLAYER.</p>
<p>ã€€ã€€å››.MP3PRO<br>ã€€ã€€MP3PROå®Œå…¨æ˜¯åŸºäºä¼ ç»ŸMP3ç¼–ç æŠ€æœ¯çš„ä¸€ç§æ”¹è‰¯ï¼Œæœ¬èº«æœ€å¤§çš„æŠ€æœ¯äº®ç‚¹å°±åœ¨äºSBR(Spectral Band Replicationé¢‘æ®µå¤åˆ¶),è¿™æ˜¯ä¸€ç§æ–°çš„éŸ³é¢‘ç¼–ç å¢å¼ºç®—æ³•.å®ƒæä¾›äº†æ”¹å–„ä½ä½ç‡æƒ…å†µä¸‹éŸ³é¢‘å’Œè¯­éŸ³ç¼–ç çš„æ€§èƒ½çš„å¯èƒ½.è¿™ç§æ–¹æ³•å¯åœ¨æŒ‡å®šçš„ä½ç‡ä¸‹å¢åŠ éŸ³é¢‘çš„å¸¦å®½æˆ–æ”¹å–„ç¼–ç æ•ˆç‡,SBRæœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯åœ¨ä½æ•°æ®é€Ÿç‡ä¸‹å®ç°éå¸¸é«˜æ•ˆçš„ç¼–ç .å¦‚æœåœ¨é«˜æ•°æ®é€Ÿç‡çš„æƒ…å†µä¸‹ï¼ŒSBRå°†å¦‚åŒè™šè®¾.å½“åˆ¶ä½œMP3PROæ–‡ä»¶æ—¶ï¼Œç¼–ç å™¨å°†éŸ³é¢‘åˆ†ä¸ºä¸¤éƒ¨åˆ†ã€‚ä¸€éƒ¨åˆ†æ˜¯å°†éŸ³é¢‘æ•°æ®ä¸­çš„ä½é¢‘æ®µéƒ¨åˆ†åˆ†ç¦»å‡ºæ¥ï¼Œé€šè¿‡ä¼ ç»Ÿçš„MP3æŠ€æœ¯è€Œç¼–ç å¾—å‡ºçš„æ­£å¸¸çš„MP3éŸ³é¢‘æµï¼Œæ­¤ä¸¾å¯ä»¤åˆ°MP3ç¼–ç å™¨å¯ä»¥ä¸“æ³¨äºä½é¢‘æ®µä¿¡å·ä»è€Œè·å¾—æ›´å¥½çš„å‹ç¼©è´¨é‡ï¼Œè€Œä¸”åŸæ¥çš„MP3æ’­æ”¾å™¨ä¹Ÿå¯æ’­æ”¾MP3PROæ–‡ä»¶ã€‚å¦ä¸€éƒ¨åˆ†åˆ™æ˜¯å°†åˆ†ç¦»å‡ºæ¥çš„é«˜é¢‘æ®µä¿¡å·è¿›è¡Œç¼–ç å¹¶åµŒå…¥åˆ°MP3æµä¸­ï¼Œä¼ ç»Ÿçš„MP3æ’­æ”¾å™¨ä¼šå°†å…¶å¿½ç•¥æ‰ï¼Œè€Œæ–°çš„MP3PROæ’­æ”¾å™¨åˆ™å¯ä»ä¸­è¿˜åŸå‡ºé«˜é¢‘ä¿¡å·ï¼Œå¹¶å°†ä¸¤è€…è¿›è¡Œç»„åˆï¼Œå¾—åˆ°é«˜è´¨é‡çš„å…¨å¸¦å®½çš„å£°éŸ³.å®˜æ–¹å®£ç§°é€šè¿‡è¿™æ ·çš„æŠ€æœ¯ï¼Œä½¿å¾—MP3PROèƒ½åœ¨64kbpsçš„ç¼–ç ç‡ä¾¿å¯æä¾›ä¸128kbpsçš„mp3ç›¸åŒçš„è´¨é‡ã€‚ä½æ¯”ç‰¹ç‡ä¸‹MP3PROçš„æ€§èƒ½å¾ˆæ˜æ˜¾åœ°æ¯”MP3è¦é«˜,ä½†æ˜¯å®ƒä¸WMAè°èƒœè°è´Ÿå°±å¾ˆéš¾è¯´äº†,æ ¹æ®ä¸€äº›å‘çƒ§å‹çš„è¯„æµ‹, MP3PROä¼¼ä¹ç•¥èƒœä¸€äº›.é«˜æ¯”ç‰¹ç‡ä¸‹å¾ˆå°‘æœ‰äººç”¨åˆ°MP3PRO.</p>
<p>äº”.OGG<br>ã€€ã€€OGGæ ¼å¼çš„å…¨ç§°åº”è¯¥æ˜¯OGG Vobisã€‚å®ƒæ˜¯ä¸€ç§æ–°çš„éŸ³é¢‘å‹ç¼©æ ¼å¼ï¼Œç±»ä¼¼äºMP3ç­‰ç°æœ‰çš„éŸ³ä¹æ ¼å¼ã€‚ä½†æœ‰ä¸€ç‚¹ä¸åŒçš„æ˜¯ï¼Œå®ƒæ˜¯å®Œå…¨å…è´¹ã€å¼€æ”¾å’Œæ²¡æœ‰ä¸“åˆ©é™åˆ¶çš„ã€‚OGG Vobisæœ‰ä¸€ä¸ªå¾ˆå‡ºä¼—çš„ç‰¹ç‚¹ï¼Œå°±æ˜¯æ”¯æŒå¤šå£°é“ï¼Œéšç€å®ƒçš„æµè¡Œï¼Œä»¥åç”¨éšèº«å¬æ¥å¬DTSç¼–ç çš„å¤šå£°é“ä½œå“å°†ä¸ä¼šæ˜¯æ¢¦æƒ³ã€‚OGG Vobisåœ¨å‹ç¼©æŠ€æœ¯ä¸Šæ¯”MP3å¥½ï¼Œè€Œä¸”å®ƒçš„å¤šå£°é“ï¼Œå…è´¹ï¼Œå¼€æºè¿™äº›ç‰¹ç‚¹ï¼Œä½¿å®ƒå¾ˆæœ‰å¯èƒ½æˆä¸ºä¸€ä¸ªæµè¡Œçš„è¶‹åŠ¿ï¼Œè¿™ä¹Ÿæ­£æ˜¯ä¸€äº›MP3æ’­æ”¾å™¨å¯¹å…¶æ”¯æŒçš„åŸå› </p>
<p>åœ¨é«˜éŸ³è´¨è¦æ±‚ä¸‹,æœ‰æŸéŸ³é¢‘ç¼–ç ä¸–ç•Œä¸­æ˜¯ä¸‰è¶³é¡¹ç«‹ï¼Œåˆ†åˆ«ä¸ºMP3ã€MPCã€OGGã€‚ã€€</p>
<p>Ogg Vorbisä¸­çš„ä¸»è¦ç®—æ³•è¿˜æ˜¯åˆ©ç”¨MDCTï¼ˆä¿®é¥°ç¦»æ•£ä½™å¼¦å˜æ¢Modified Discrete Cosine Transform ï¼‰è€Œä¸æ˜¯ç”¨ç°åœ¨æ¯”è¾ƒæ—¶å…´çš„å°æ³¢ï¼ˆwaveletï¼‰æŠ€æœ¯ã€‚Oggçš„å¤šé€šé“ç¼–ç æŠ€æœ¯ï¼Œç»Ÿç§°ä¸ºç«‹ä½“å£°é€šé“è€¦åˆStereo Channel Couplingã€‚è€Œè¯¥æŠ€æœ¯å®é™…åˆæ˜¯ç”±ä¸¤ç§ä¸åŒçš„æŠ€æœ¯ç»„æˆçš„ï¼šchannel interleaving å’Œ square polar mappingï¼Œè€Œè¿™ä¹Ÿæ˜¯Oggèƒ½æˆä¸ºå…è´¹åˆ¶å¼çš„ä¸€ä¸ªå¿…è¦æ¡ä»¶ï¼Œä»¥å¾€çš„â€œè”åˆç«‹ä½“å£°Joint Stereoâ€çš„ç¼–ç æ¨¡å¼æ˜¯æœ‰ä¸“åˆ©é™åˆ¶çš„ã€‚æ®å®˜æ–¹å£°ç§°ï¼Œä¸å…¶ä»–ä¼šé€ æˆç«‹ä½“ç©ºé—´æ„Ÿå‡å¼±çš„ç¼–ç æ¨¡å‹ç›¸æ¯”ï¼Œè¿™ä¸¤ç§æŠ€æœ¯éƒ½å¯ä»¥åœ¨ä¿æŒç¼–ç å™¨çš„çµæ´»æ€§çš„åŒæ—¶è€Œä¸æŸå®³æœ¬æ¥çš„ç«‹ä½“å£°ç©ºé—´å½±åƒâ€•â€•ç›¸ä¿¡é…åˆiRiverçš„3déŸ³æ•ˆä¼šæœ‰æ›´å¥½çš„è¡¨ç°åŠ›ï¼Œè€Œä¸”å®ç°çš„å¤æ‚ç¨‹åº¦æ¯”è”åˆç«‹ä½“å£°æ–¹å¼è¦ä½ã€‚<br>ã€€ã€€OGG Vorbisè¿™ç§ç¼–ç ä¹Ÿè¿œæ¯”90å¹´ä»£å¼€å‘æˆåŠŸçš„MP3å…ˆè¿›ï¼Œå®ƒå¯ä»¥åœ¨ç›¸å¯¹è¾ƒä½çš„æ•°æ®é€Ÿç‡ä¸‹å®ç°æ¯”MP3æ›´å¥½çš„éŸ³è´¨ï¼â€•â€•æˆ‘è®¤ä¸ºOggå¾ˆè±¡MDçš„atracæ ¼å¼ï¼Œç‰¹åˆ«è±¡æ–°çš„lp2ç¼–ç ï¼Œå®ƒèƒ½åœ¨ä½åˆ«ç‰¹ç‡ä¸‹æœ‰ç€å¾ˆè¦çš„éŸ³è´¨ã€‚æ­¤å¤–ï¼Œåœ¨ç¼–ç ä¸Šï¼ŒOgg Vorbisæ˜¯ä½¿ç”¨äº†VBRï¼ˆå¯å˜æ¯”ç‰¹ç‡ï¼‰å’ŒABRï¼ˆå¹³å‡æ¯”ç‰¹ç‡ï¼‰æ–¹å¼è¿›è¡Œç¼–ç ï¼Œæ‰€ä»¥ç†è®ºä¸Šï¼ŒOgg Vorbiså¸¦æ¥çš„éŸ³ä¹å¯ä»¥æ¯”é‡‡ç”¨CBRæ–‡ä»¶æœ‰æ›´å¥½çš„å£°éŸ³è¡¨ç°ï¼Œå½“ç„¶å‰ææ˜¯ä¸¤è€…ä½¿ç”¨åŒæ ·æ¯”ç‰¹ç‡(Bit Rate)çš„å‹ç¼©æ¨¡å¼â€•â€•è¿™é‡Œå¯ä»¥çŸ¥é“ã€‚Ogg Vorbisçš„æ¯”ç‰¹ç‡ç¼©æ”¾åŠŸèƒ½å¯ä»¥åœ¨ä¸ç”¨é‡æ–°ç¼–ç çš„æƒ…å†µä¸‹è°ƒèŠ‚æ–‡ä»¶çš„ç›¸å…³å‹ç¼©ç‡ï¼Œä¸æ­¤åŒæ—¶ï¼ŒOggæ–‡ä»¶çš„å•ä½ç¼–è¾‘èƒ½åŠ›å’Œè¶…è¶Šå·¦å³å£°é“çš„éŸ³é¢‘æµæŠ€æœ¯å¯ä»¥å¸¦æ¥æ›´ä¸ºå¥‡å¦™çš„éŸ³ä¹äº«å—ã€‚Vorbisè¿˜å…·æœ‰æ¯”ç‰¹ç‡ç¼©æ”¾åŠŸèƒ½ï¼Œå¯ä»¥ä¸ç”¨é‡æ–°ç¼–ç ä¾¿å¯è°ƒèŠ‚æ–‡ä»¶çš„æ¯”ç‰¹ç‡ã€‚<br>ã€€ã€€Vorbisæ–‡ä»¶å¯ä»¥è¢«åˆ†æˆå°å—å¹¶ä»¥æ ·æœ¬ç²’åº¦ï¼ˆgranularityï¼Œä¸“ä¸šæœ¯è¯­ï¼ŒæŒ‡æ•°æ®å¯ä»¥è¢«åˆ†å‰²çš„æœ€å°å°ºå¯¸ï¼‰è¿›è¡Œç¼–è¾‘ï¼›Vorbisæ”¯æŒå¤šé€šé“ï¼ˆå¤§äº2ï¼‰éŸ³é¢‘æµå¹¶ä½¿ç”¨äº†ç‹¬åˆ›æ€§çš„å¤„ç†æŠ€æœ¯ï¼›è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿè¿™æ„å‘³ç€Ogg Vorbisåœ¨SACDã€DTSCDã€DVD AUDIOæŠ“è½¨è½¯ä»¶ï¼ˆç›®å‰è¿™ç§è½¯ä»¶è¿˜æ²¡æœ‰ï¼‰çš„æ”¯æŒä¸‹ï¼Œå¯ä»¥å¯¹æ‰€æœ‰çš„å£°é“è¿›è¡Œç¼–ç ï¼Œè€Œä¸æ˜¯MP3åªèƒ½ç¼–ç 2ä¸ªå£°é“ã€‚å¤šå£°é“éŸ³ä¹çš„å…´èµ·ï¼Œç»™éŸ³ä¹æ¬£èµå¸¦æ¥äº†é©å‘½æ€§çš„å˜åŒ–ï¼Œå°¤å…¶åœ¨æ¬£èµäº¤å“æ—¶ï¼Œä¼šå¸¦æ¥æ›´å¤šä¸´åœºæ„Ÿã€‚è¿™åœºé©å‘½æ€§çš„å˜åŒ–æ˜¯MP3æ— æ³•é€‚åº”çš„ã€‚åœ¨ä»¥åçš„æ’­æ”¾æŠ€æœ¯ä¸æ–­æé«˜ä»¥åï¼Œè€Œä¸”äººä»¬å¯¹éŸ³è´¨è¦æ±‚ä¸æ–­æé«˜ï¼ŒOggçš„ä¼˜åŠ¿å°†æ›´åŠ æ˜æ˜¾ã€‚<br>ã€€ã€€å…­. MPC<br>ã€€ã€€MusePaCkæ˜¯ç”±å¾·å›½äººAndree Buschmannå¼€å‘çš„ä¸€ç§å®Œå…¨å…è´¹çš„é«˜å“è´¨éŸ³é¢‘æ ¼å¼ã€‚åœ¨å…¶é—®ä¸–ä¹‹å‰ï¼ŒLame MP3æ˜¯å…¬è®¤éŸ³è´¨æœ€å¥½çš„æœ‰æŸå‹ç¼©æ–¹æ¡ˆï¼Œè¿½æ±‚éŸ³è´¨çš„äººå¯¹å®ƒè¶‹ä¹‹è‹¥é¹œã€‚ä½†ç°åœ¨è¿™ä¸ªæ¡‚å† æ— ç–‘è¯¥è®©ç»™MPCäº†ï¼Œåœ¨ä¸­é«˜ç ç‡ä¸‹ï¼ŒMPCå¯ä»¥åšåˆ°æ¯”MP3æ›´å¥½éŸ³è´¨ã€‚åœ¨é«˜ç ç‡ä¸‹ï¼ŒMPCçš„é«˜é¢‘è¦æ¯”MP3ç»†è…»ä¸å°‘ï¼Œå¯ä»¥åœ¨èŠ‚çœå¤§é‡ç©ºé—´çš„å‰æä¸‹è·å¾—æœ€ä½³éŸ³è´¨çš„éŸ³ä¹æ¬£èµï¼Œæ˜¯ç›®å‰æœ€é€‚åˆç”¨äºéŸ³ä¹æ¬£èµçš„æœ‰æŸç¼–ç ã€‚</p>
<p>MPCçš„ç¼–ç æ–¹æ¡ˆæ˜¯åœ¨MP2çš„åŸºç¡€ä¸Šæ”¹è¿›è€Œæ¥ã€‚å®ƒåŒæ ·é‡‡ç”¨å­å¸¦ç¼–ç æŠ€æœ¯ï¼Œä½†ç›¸æ¯”MP2ï¼Œå®ƒæ‰€é‡‡ç”¨çš„å¿ƒç†å£°å­¦æ¨¡å‹è¦ä¼˜ç§€å¾—å¤šï¼Œå¹¶åŠ å…¥äº†åƒANSï¼ˆAdaptive Noise Shapingï¼‰ã€CVD(ClearVoiceDetection)ç­‰æŠ€æœ¯ï¼Œç”šè‡³æ”¹å˜äº†å‹ç¼©æ—¶æ‰€ç”¨çš„Huffmanï¼ˆå“ˆå¤«æ›¼ï¼‰ç¼–ç ï¼Œä»¥å¾—åˆ°æ›´å¤§çš„å‹ç¼©ç‡ã€‚å¦å¤–ï¼ŒMPCé‡‡ç”¨çš„æ˜¯å¯å˜ç ç‡è¿›è¡Œç¼–ç ã€‚æ¯«æ— ç–‘é—®ï¼Œå¯å˜ç ç‡çš„ç¼–ç æ•ˆç‡è¦é«˜äºå›ºå®šç ç‡ï¼Œå› ä¸ºå‰è€…å¯ä»¥åˆç†åœ°åˆ†é…æ•°æ®é‡ï¼Œåœ¨ä¿¡å·å¤æ‚ï¼ˆå¾®å¼±ï¼‰æ—¶æé«˜ï¼ˆé™ä½ï¼‰æ¯”ç‰¹ç‡ï¼Œåœ¨å¾—åˆ°æ»¡æ„çš„æ•ˆæœåˆèƒ½ç¡®ä¿ä¸é”™çš„å‹ç¼©ç‡ã€‚ä¸ºäº†ä¿è¯é«˜éŸ³è´¨ï¼ŒMPCçš„ç¬é—´æœ€å¤§ç ç‡ç”šè‡³é«˜è¾¾1.32Mbpsï¼Œè¿™å·²ç»å¿«æ¥è¿‘CDçš„1.41Mbpsäº†</p>
<p>è¾ƒé«˜æ¯”ç‰¹ç‡ä¸‹(250kbpså·¦å³),MPCè¡¨ç°éå¸¸çš„å‡ºä¼—,ç”šè‡³è¶…è¿‡äº†MP3ï¼Œå¾ˆéš¾åˆ†è¾¨å®ƒå’ŒåŸå§‹ä¿¡å·æœ‰å¤šå°‘åŒºåˆ«ï¼Œæ— è®ºä»é¢‘ç‡ä¿ç•™è¿˜æ˜¯ç»†èŠ‚ä¿ç•™ï¼Œä»¥åŠä¿¡å·å¼ºåº¦å¤±çœŸæ¥è¯´ï¼ŒMPCå¤ªä¼˜ç§€äº†.ä½†MPCå¹¶éä¸‡èƒ½çš„ï¼Œå®ƒæ— æ³•ç¼–ç 48khzé‡‡æ ·ç‡çš„æ›²å­ï¼Œæ‰€å¹¸çš„æ˜¯ï¼Œè¿™æ ·çš„æ›²å­æ¥æºå¾ˆå°‘.å¯æƒœè¿™ç§æ ¼å¼å¹¶æ²¡æœ‰åƒMP3æˆ–WMAé‚£æ ·æµè¡Œ.</p>
<p>ã€€ã€€ä¸ƒ.ATRAC<br>ã€€ã€€ATRACï¼ˆAdaptive TRansform Acoustic Codingè‡ªé€‚åº”å£°å­¦è½¬æ¢ç¼–ç æŠ€æœ¯ï¼‰ï¼šæ˜¯Sonyçš„åŸåˆ›éŸ³ä¹å‹ç¼©æŠ€æœ¯ï¼Œä¸»è¦ç”¨äºMD Walkmançš„å½•éŸ³åŠæ’­æ”¾æ–¹é¢ã€‚æ˜¯ä¸€é¡¹åŸºäºå¬è§‰å¿ƒç†å­¦é¢†åŸŸçš„ç ”ç©¶å’Œä¸æŸä¼¤å¯é—»å£°è´¨é‡çš„æ•°ç éŸ³é¢‘è¯‘ç å‹ç¼©æŠ€æœ¯ï¼Œå¯¹éŸ³ä¹èµ„è®¯æœ‰æ•ˆçš„è¿›è¡Œå‹ç¼©ï¼Œå‹ç¼©çš„æ¯”ç‡ä¸ºåŸæ¥çš„äº”åˆ†ä¹‹ä¸€ï¼Œå› ä¸ºMDä½¿ç”¨äº†ATRACå‹ç¼©æŠ€æœ¯ï¼Œè¿™æ ·çš„å‹ç¼©å¤§å¤§èŠ‚çœäº†è®¸å¤šç©ºé—´ï¼Œæ‰€ä»¥ CDçš„ç¢Ÿç‰‡è¦120mmå¤§å°ï¼Œè€ŒMDåªéœ€64mmå°±å¯ä»¥å½•ä¸‹74åˆ†é’Ÿçš„éŸ³ä¹ã€‚</p>
<p>ATRACå‹ç¼©æŠ€æœ¯ä¸»è¦æ˜¯åˆ©ç”¨äº†äººè€³çš„è”½é®æ•ˆåº”ï¼Œåœ¨å¿ƒç†å£°å­¦åŸç†ä¸Šï¼Œåœ¨è¿›è¡ŒéŸ³é¢‘å½•å…¥çš„åŒæ—¶ï¼Œæœ‰è®¸å¤šå¤–éƒ¨çš„é¢‘æ®µåŒæ—¶ä¹Ÿä¼šè¢«å½•å…¥ï¼Œå½“äººè€³åŒæ—¶å¬åˆ°ä¸¤ä¸ªä¸åŒé¢‘ç‡ã€ä¸åŒéŸ³é‡çš„å£°éŸ³æ—¶ï¼ŒéŸ³é‡è¾ƒå°çš„ä½é¢‘åŠéŸ³é‡è¾ƒå°çš„é«˜é¢‘è¿åŒä¸ä¸ºäººè€³æ‰€å¯Ÿè§‰çš„é¢‘æ®µä¿¡å·éƒ½ä¼šè¢«è‡ªåŠ¨å‡å¼±æˆ–å¿½ç•¥ä¸äºˆè®°å½•ï¼Œå› æ­¤åˆå¯ä»¥ç§°ä¸ºé€‚åº”æ€§å˜æ¢å£°ç æŠ€æœ¯ï¼Œç”±äºè¿‘å¹´ä¾†ç¼–ç å‹ç¼©æŠ€æœ¯ï¼ˆATRACçš„ç‰ˆæœ¬ï¼‰è¶Šä¾†è¶Šæˆç†Ÿï¼Œæ‰€ä»¥ç»è¿‡ç¼–ç è§£ç è¿‡ç¨‹åçš„å£°éŸ³ä»ç›´é€¼CDï¼Œå¤§å®¶å°±ä¸å¿…æ‹…å¿ƒéŸ³è´¨å·®å•¦ã€‚</p>
<p>ATRACå°†16æ¯”ç‰¹44.1KHzçš„æ•°å­—ä¿¡å·ä»¥é¢‘ç‡å“åº”è½´åˆ†æˆ52ä¸ªåŒºæ®µï¼ˆåœ¨ä½é¢‘æ—¶åˆ†å‰²è¾ƒç»†è€Œåœ¨é«˜é¢‘æ—¶åˆ†å‰²è¾ƒç²—ï¼‰ï¼Œæ ¹æ®å£°éŸ³å¿ƒç†å­¦çš„åŸç†ï¼Œå°†å£°éŸ³ä¿¡å·ä¸­äººè€³å¬ä¸åˆ°å’Œå¯¹äººçš„å¬åŠ›å½±å“ä¸å¤§çš„ä¿¡æ¯ç»™å‰”é™¤å‡ºå»è€Œè¾¾åˆ°ç¼©å°å£°éŸ³æ–‡ä»¶çš„ç›®çš„ã€‚åˆ©ç”¨è¿™ç§åŸç†ï¼ŒATRACå¯ä»¥å°†å½•éŸ³çš„èµ„æ–™é‡å‹ç¼©ä¸ºåŸæ¥çš„äº”åˆ†ä¹‹ä¸€ï¼ˆå³å‹ç¼©æ¯”ä¸º1ï¼š5ï¼‰ã€‚</p>
<p>.</p>
<p>ã€€ã€€å…«. APEã€€<br>ã€€ã€€  APEçš„æœ¬è´¨ï¼Œå…¶å®å®ƒæ˜¯ä¸€ç§æ— æŸå‹ç¼©éŸ³é¢‘æ ¼å¼ã€‚åºå¤§çš„WAVéŸ³é¢‘æ–‡ä»¶å¯ä»¥é€šè¿‡Monkeyâ€™â€™s Audioè¿™ä¸ªè½¯ä»¶è¿›è¡Œâ€œç˜¦èº«â€å‹ç¼©ä¸ºAPEã€‚å¾ˆæ—¶å€™å®ƒè¢«ç”¨åšç½‘ç»œéŸ³é¢‘æ–‡ä»¶ä¼ è¾“ï¼Œå› ä¸ºè¢«å‹ç¼©åçš„APEæ–‡ä»¶å®¹é‡è¦æ¯”WAVæºæ–‡ä»¶å°ä¸€åŠå¤šï¼Œå¯ä»¥èŠ‚çº¦ä¼ è¾“æ‰€ç”¨çš„æ—¶é—´ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œé€šè¿‡Monkeyâ€™â€™s Audioè§£å‹ç¼©è¿˜åŸä»¥åå¾—åˆ°çš„WAVæ–‡ä»¶å¯ä»¥åšåˆ°ä¸å‹ç¼©å‰çš„æºæ–‡ä»¶å®Œå…¨ä¸€è‡´ã€‚æ‰€ä»¥APEè¢«èª‰ä¸ºâ€œæ— æŸéŸ³é¢‘å‹ç¼©æ ¼å¼â€ï¼ŒMonkeyâ€™â€™s Audioè¢«èª‰ä¸ºâ€œæ— æŸéŸ³é¢‘å‹ç¼©è½¯ä»¶â€ã€‚ä¸é‡‡ç”¨WinZipæˆ–è€…WinRARè¿™ç±»ä¸“ä¸šæ•°æ®å‹ç¼©è½¯ä»¶æ¥å‹ç¼©éŸ³é¢‘æ–‡ä»¶ä¸åŒï¼Œå‹ç¼©ä¹‹åçš„APEéŸ³é¢‘æ–‡ä»¶æ˜¯å¯ä»¥ç›´æ¥è¢«æ’­æ”¾çš„ã€‚ Monkeyâ€™â€™s Audioä¼šå‘Winampä¸­å®‰è£…ä¸€ä¸ªâ€œin_APE.dllâ€æ’ä»¶ï¼Œä»è€Œä½¿Winampä¹Ÿå…·å¤‡æ’­æ”¾APEæ–‡ä»¶çš„èƒ½åŠ›ã€‚ </p>
<p>å’Œä¸Šé¢ä»‹ç»çš„å‡ æ¬¾ç¼–ç ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªç¼–ç æä¾›äº†æœ€å¥½çš„éŸ³è´¨ä¿è¯(æ— æŸå‹ç¼©)ï¼è¿˜æä¾›äº†Winampçš„æ’ä»¶æ”¯æŒ,å¯ä»¥ç›´æ¥ç”¨Winampæ¥æ’­æ”¾.æ‰€è°“æ— æŸå°±æ˜¯æŒ‡å‹ç¼©åçš„æ ¼å¼å’Œæºæ–‡ä»¶åœ¨éŸ³è´¨ä¸Šå¹¶æ— å·®å¼‚ï¼Œè€ŒMp3ã€WMAç­‰çš„ç¼–ç æ–¹æ¡ˆæ˜¯åŸºäºæœ‰æŸçš„ï¼Œåœ¨æŸå¤±éƒ¨åˆ†éŸ³è´¨çš„å‰æä¸‹èŠ‚çº¦å­˜è´®ç©ºé—´ï¼Œæ‰€ä»¥è¯´éŸ³è´¨å†å¥½çš„Mp3ã€WMAä¹Ÿåªèƒ½æ˜¯æ— é™æ¥è¿‘æºæ–‡ä»¶çš„éŸ³è´¨ã€‚APEéå¸¸é€‚åˆæ¥ç¼–ç è®²ç©¶ç»†èŠ‚çš„ç‹¬å¥æ›²ç›®å’Œå¤§åŠ¨æ€çš„äº¤å“æ›²ã€‚å‘å„ä½éŸ³ä¹è¿·ä»¬(ä¸æ˜¯æ­Œè¿·)ä½œæœ€å¼ºçƒˆçš„æ¨èï¼å®ƒçš„å‹ç¼©æ¯”çº¦ä¸º2:1.</p>
<p>ã€€ã€€ä¹. WAV<br>ã€€ã€€WAVæ˜¯å½•éŸ³æ—¶ç”¨çš„æ ‡å‡†çš„windowsæ–‡ä»¶æ ¼å¼ï¼Œæ–‡ä»¶çš„æ‰©å±•åä¸ºâ€œ.wavâ€ï¼ŒWAVEæ–‡ä»¶ä½œä¸ºæœ€ç»å…¸çš„Windowså¤šåª’ä½“éŸ³é¢‘æ ¼å¼ï¼Œåº”ç”¨éå¸¸å¹¿æ³›ã€‚å£°é“æœ‰å•å£°é“å’Œç«‹ä½“å£°ä¹‹åˆ†ï¼Œé‡‡æ ·é¢‘ç‡ä¸€èˆ¬æœ‰11kHzã€22kHzå’Œ44kHzä¸‰ç§ã€‚</p>
<p>WAVEæ–‡ä»¶æ‰€å å®¹é‡=ï¼ˆé‡‡æ ·é¢‘ç‡Ã—é‡‡æ ·ä½æ•°Ã—å£°é“ï¼‰Ã—æ—¶é—´/8ï¼ˆ1å­—èŠ‚=8bitï¼‰ã€‚</p>
<p>ã€€ã€€WAVæ–‡ä»¶ä¸MIDIMP3è¿™ç±»å¤šåª’ä½“å£°éŸ³æ–‡ä»¶æ¯”è¾ƒèµ·æ¥ï¼Œæ‰€å çš„ç¡¬ç›˜ç©ºé—´è¦å¤§å¾—å¤šï¼Œä½†WAVæ–‡ä»¶çš„å›æ”¾æ•ˆæœæ˜¯æœ€å¥½çš„ï¼ŒWAVæ–‡ä»¶ç›´æ¥åæ˜ äº†ä¸€ä¸ªå£°éŸ³åœ¨æ¯ä¸ªæ—¶åˆ»çš„å¤§å°å€¼ï¼Œ1åˆ†é’Ÿ44khzé‡‡æ ·ç‡çš„WAVæ–‡ä»¶å°±ä¼šå ç”¨10Mç¡¬ç›˜ç©ºé—´ï¼</p>
<p>å®ƒé€šå¸¸ä½œä¸ºåˆ¶ä½œé«˜è´¨é‡éŸ³ä¹çš„ä¸­é—´ä½“<br>ã€€ã€€å.RM<br>ã€€ã€€Real Networkså…¬å¸æ‰€åˆ¶å®šçš„éŸ³é¢‘è§†é¢‘å‹ç¼©è§„èŒƒç§°ä¸ºReal Mediaï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨RealPlayeræˆ–RealOne Playerå¯¹ç¬¦åˆRealMediaæŠ€æœ¯è§„èŒƒçš„ç½‘ç»œéŸ³é¢‘/è§†é¢‘èµ„æºè¿›è¡Œå®å†µè½¬æ’­å¹¶ä¸”RealMediaå¯ä»¥æ ¹æ®ä¸åŒçš„ç½‘ç»œä¼ è¾“é€Ÿç‡åˆ¶å®šå‡ºä¸åŒçš„å‹ç¼©æ¯”ç‡ï¼Œä»è€Œå®ç°åœ¨ä½é€Ÿç‡çš„ç½‘ç»œä¸Šè¿›è¡Œå½±åƒæ•°æ®å®æ—¶ä¼ é€å’Œæ’­æ”¾ã€‚è¿™ç§æ ¼å¼çš„å¦ä¸€ä¸ªç‰¹ç‚¹æ˜¯ç”¨æˆ·ä½¿ç”¨RealPlayeræˆ–RealOne Playeræ’­æ”¾å™¨å¯ä»¥åœ¨ä¸ä¸‹è½½éŸ³é¢‘/è§†é¢‘å†…å®¹çš„æ¡ä»¶ä¸‹å®ç°åœ¨çº¿æ’­æ”¾ã€‚å¦å¤–ï¼ŒRMä½œä¸ºç›®å‰ä¸»æµç½‘ç»œè§†é¢‘æ ¼å¼ï¼Œå®ƒè¿˜å¯ä»¥é€šè¿‡å…¶Real ServeræœåŠ¡å™¨å°†å…¶å®ƒæ ¼å¼çš„è§†é¢‘è½¬æ¢æˆRMè§†é¢‘å¹¶ç”±Real ServeræœåŠ¡å™¨è´Ÿè´£å¯¹å¤–å‘å¸ƒå’Œæ’­æ”¾ã€‚RMå’ŒASFæ ¼å¼å¯ä»¥è¯´å„æœ‰åƒç§‹ï¼Œé€šå¸¸RMè§†é¢‘æ›´æŸ”å’Œä¸€äº›ï¼Œè€ŒASFè§†é¢‘åˆ™ç›¸å¯¹æ¸…æ™°ä¸€äº›ã€‚<br>  RMæ ¼å¼ä¸€å¼€å§‹å°±å®šä½åœ¨è§†é¢‘æµåº”ç”¨æ–¹é¢ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯è§†é¢‘æµæŠ€æœ¯çš„å§‹åˆ›è€…ã€‚å®ƒå¯ä»¥åœ¨ç”¨56 K Modemæ‹¨å·ä¸Šç½‘çš„æ¡ä»¶ä¸‹å®ç°ä¸é—´æ–­çš„è§†é¢‘æ’­æ”¾ï¼Œå½“ç„¶ï¼Œå…¶å›¾åƒè´¨é‡å’ŒMPEG2ï¼ŒDIVXç­‰ç›¸æ¯”æœ‰ä¸€å®šå·®è·ï¼Œæ¯•ç«Ÿè¦å®ç°åœ¨ç½‘ä¸Šä¼ è¾“ä¸é—´æ–­çš„è§†é¢‘æ˜¯éœ€è¦å¾ˆå¤§å¸¦å®½çš„ã€‚</p>
<p>RMå·²ç»æ˜¯æ˜¨æ—¥é»„èŠ±ï¼Œæ²¡æœ‰ä»»ä½•æ–°æ„ï¼Œä½Bitrateæ¯”ä¸è¿‡WMAï¼Œé«˜Bitrateæ¯”ä¸è¿‡MP3ï¼Œè™½ç„¶æ–°çš„RMå¯¼å…¥äº†ATRAC3ç®—æ³•ï¼Œä½†é¢“åŠ¿å·²å®šï¼Œå¾ˆéš¾ä¸œå±±å†èµ·äº†ã€‚</p>
]]></content>
      
        <categories>
            
            <category> åŸºç¡€ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æµåª’ä½“ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[OCè¯­è¨€åŸºç¡€/runtime]]></title>
      <url>/2015/07/17/2015/OC%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80:runtime/</url>
      <content type="html"><![CDATA[<h3 id="OCè¯­è¨€åŸºç¡€"><a href="#OCè¯­è¨€åŸºç¡€" class="headerlink" title="OCè¯­è¨€åŸºç¡€"></a>OCè¯­è¨€åŸºç¡€</h3><h4 id="å…³äºSELçš„ç†è§£"><a href="#å…³äºSELçš„ç†è§£" class="headerlink" title="å…³äºSELçš„ç†è§£"></a>å…³äºSELçš„ç†è§£</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">NSLog(@&quot;%d&quot;, @selector(testView));</div><div class="line">NSLog(@&quot;%d&quot;, @selector(testView1));</div><div class="line">    </div><div class="line">NSLog(@&quot;%d&quot;, NSSelectorFromString(@&quot;testView&quot;));</div><div class="line">    </div><div class="line">NSLog(@&quot;%p&quot;,@&quot;testView&quot;);</div></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">2018-07-10 17:28:37.378285+0800 Ceshi[18642:3374809] 165034347</div><div class="line">2018-07-10 17:28:37.378342+0800 Ceshi[18642:3374809] 165034410</div><div class="line">2018-07-10 17:28:37.378411+0800 Ceshi[18642:3374809] 165034347</div><div class="line">2018-07-10 17:28:37.378494+0800 Ceshi[18642:3374809] 0x109d65128</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæ˜¯ä¸€ä¸ªæ•°å­—åˆ°å­—ç¬¦ä¸²çš„æ˜ å°„å…³ç³»ï¼Œä½†ä¹Ÿä¸æ˜¯ç®€å•çš„åœ°å€çš„æ˜ å°„</p>
<h4 id="selfä¸super"><a href="#selfä¸super" class="headerlink" title="selfä¸super"></a>selfä¸super</h4><p><a href="https://blog.csdn.net/shihuboke/article/details/78967824" target="_blank" rel="external">self/super</a></p>
<p>objc_msgSend(id,sel)</p>
<p>objc_msgSendSuper(struct,sel)</p>
<h4 id="åˆ†ç±»åšå“ªäº›äº‹"><a href="#åˆ†ç±»åšå“ªäº›äº‹" class="headerlink" title="åˆ†ç±»åšå“ªäº›äº‹"></a>åˆ†ç±»åšå“ªäº›äº‹</h4><ul>
<li>å£°æ˜ç§æœ‰æ–¹æ³•</li>
<li>åˆ†è§£åºå¤§çš„ç±»æ–‡ä»¶</li>
<li>æŠŠframeworkç§æœ‰æ–¹æ³•å…¬å¼€</li>
</ul>
<h4 id="åˆ†ç±»ç‰¹ç‚¹"><a href="#åˆ†ç±»ç‰¹ç‚¹" class="headerlink" title="åˆ†ç±»ç‰¹ç‚¹"></a>åˆ†ç±»ç‰¹ç‚¹</h4><ul>
<li>è¿è¡Œæ—¶å†³è®®(ç¼–è¯‘æ—¶ï¼Œåˆ†ç±»å’Œå®¿ä¸»æ²¡æœ‰ä¸€æ¯›é’±å…³ç³»)</li>
<li>å¯ä»¥ä¸ºç³»ç»Ÿæ·»åŠ åˆ†ç±»</li>
</ul>
<p>æœ€åç¼–è¯‘çš„åˆ†ç±»çš„æ–¹æ³•ï¼Œæœ€å…ˆè¢«æœç´¢åˆ°ï¼ŒåŒæ—¶åœ¨å®¿ä¸»ä¹‹å‰ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ€ä¹ˆæ›¿æ¢å®¿ä¸»çš„æ–¹æ³•çš„åŸç†</p>
<p>æœ€ç»ˆåˆ†ç±»ä¸­çš„æ–¹æ³•æ˜¯æ‹¼æ¥åˆ°å®¿ä¸»ç±»ä¸­å¾—ä»¥è¢«è°ƒç”¨çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆåˆ†ç±»æ˜¯è¿è¡Œæ—¶å†³è®®ï¼Œè¿™ä¸ªæ—¶å€™æ³¨æ„ï¼Œåœ¨ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­æˆ‘ä»¬æ˜¯æ­£å‘éå†çš„ï¼Œä½†æ˜¯æ‹¼æ¥çš„æ—¶å€™æ˜¯åå‘éå†æ‹¼æ¥çš„ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆåˆ†ç±»å¯ä»¥è¦†ç›–å®¿ä¸»æ–¹æ³•å‘¢ï¼Œæ˜¯å› ä¸ºåœ¨è¿›è¡Œæ‹¼æ¥çš„æ—¶å€™ä¼šè®²å®¿ä¸»æ–¹æ³•æŒªåˆ°åˆ†ç±»æ–¹æ³•çš„åè¾¹ã€‚</p>
<p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-0112.00.34.png" alt=""></p>
<p>æ³¨æ„:<br>åˆ†ç±»ä¸­å¯ä»¥ç›´æ¥è®¿é—®ä¸»ç±»ä¸­çš„å±æ€§ã€‚</p>
<p>ä½†æ˜¯å¦‚æœåˆ†ç±»ä¸­è¦å•ç‹¬å®šä¹‰å±æ€§é‚£ä¹ˆåªèƒ½ä¾èµ–runtimeï¼Œå…¶å®ä¸»è¦æ˜¯æˆå‘˜å˜é‡çš„æ·»åŠ ã€‚</p>
<p>ä½†æ˜¯åˆ†ç±»ä¸­å¯ä»¥ç›´æ¥æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œä¸è¿‡å®ƒåªæ˜¯ä¸€ä¸ªå£°æ˜ï¼Œå‡å¦‚æˆ‘æŠŠä¸»ç±»çš„å±æ€§å£°æ˜åœ¨.mä¸­ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘å°±å¯ä»¥åœ¨åˆ†ç±»ä¸­å†å®šä¹‰ä¸€æ¬¡ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥ç”¨ï¼Œè¿™é‡Œè¦æ³¨æ„çš„æ˜¯å¦‚æœæˆ‘ä»¬å£°æ˜ä¸€ä¸ªæ‰©å±•æ˜¯ä¸èƒ½è¢«åˆ†ç±»æ‰€ä½¿ç”¨çš„ã€‚</p>
<h4 id="åˆ†ç±»ä¸­éƒ½èƒ½æ·»åŠ ä»€ä¹ˆå†…å®¹"><a href="#åˆ†ç±»ä¸­éƒ½èƒ½æ·»åŠ ä»€ä¹ˆå†…å®¹" class="headerlink" title="åˆ†ç±»ä¸­éƒ½èƒ½æ·»åŠ ä»€ä¹ˆå†…å®¹"></a>åˆ†ç±»ä¸­éƒ½èƒ½æ·»åŠ ä»€ä¹ˆå†…å®¹</h4><ul>
<li>å®ä¾‹æ–¹æ³•</li>
<li>ç±»æ–¹æ³•</li>
<li>åè®®</li>
<li>å±æ€§(å®šä¹‰äº†ä¸€ä¸ªå±æ€§ï¼Œåªå£°æ˜setå’Œgetæ–¹æ³•ï¼Œå¹¶æ²¡æœ‰æ·»åŠ å®ä¾‹å˜é‡ï¼Œå˜é‡éœ€è¦é€šè¿‡å…³è”å¯¹è±¡)</li>
</ul>
<h4 id="åˆ†ç±»æ•°æ®ç»“æ„"><a href="#åˆ†ç±»æ•°æ®ç»“æ„" class="headerlink" title="åˆ†ç±»æ•°æ®ç»“æ„"></a>åˆ†ç±»æ•°æ®ç»“æ„</h4><p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-01 10.34.59.png" alt=""></p>
<h4 id="å…³è”å¯¹è±¡"><a href="#å…³è”å¯¹è±¡" class="headerlink" title="å…³è”å¯¹è±¡"></a>å…³è”å¯¹è±¡</h4><p>å…³è”å¯¹è±¡æ˜¯å¦è¢«æ·»åŠ åˆ°äº†å®¿ä¸»ç±»ï¼Ÿ</p>
<p>å…³è”å¯¹è±¡æœ¬è´¨</p>
<p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-0112.07.40.png" alt=""></p>
<p>ç­–ç•¥:retainæˆ–è€…copy</p>
<p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-01 12.12.50.png" alt=""></p>
<h4 id="ç”¨æ‰©å±•æ¥åšä»€ä¹ˆ"><a href="#ç”¨æ‰©å±•æ¥åšä»€ä¹ˆ" class="headerlink" title="ç”¨æ‰©å±•æ¥åšä»€ä¹ˆ"></a>ç”¨æ‰©å±•æ¥åšä»€ä¹ˆ</h4><ul>
<li>å£°æ˜ç§æœ‰å±æ€§</li>
<li>å£°æ˜ç§æœ‰æ–¹æ³•</li>
<li>å£°æ˜ç§æœ‰å˜é‡</li>
<li>å£°æ˜ç§æœ‰å±æ€§</li>
</ul>
<h4 id="æ‰©å±•å’Œåˆ†ç±»çš„åŒºåˆ«"><a href="#æ‰©å±•å’Œåˆ†ç±»çš„åŒºåˆ«" class="headerlink" title="æ‰©å±•å’Œåˆ†ç±»çš„åŒºåˆ«"></a>æ‰©å±•å’Œåˆ†ç±»çš„åŒºåˆ«</h4><ul>
<li>è¿™ä¸ªæ˜¯ç¼–è¯‘çš„æ—¶å€™å†³è®®</li>
<li>ä¸èƒ½ä¸ºç³»ç»Ÿç±»æ·»åŠ æ‰©å±•</li>
<li>åªæ˜¯ä»¥å£°æ˜çš„å½¢å¼å­˜åœ¨</li>
</ul>
<h4 id="ä»£ç†"><a href="#ä»£ç†" class="headerlink" title="ä»£ç†"></a>ä»£ç†</h4><ul>
<li>ä»£ç†æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼</li>
<li>ä¸é€šçŸ¥çš„åŒºåˆ«æ˜¯ä»£ç†ä¸€å¯¹ä¸€ï¼Œé€šçŸ¥ä¸€å¯¹å¤š</li>
<li>å§”æ‰˜æ–¹ä»¥weakå£°æ˜ï¼Œé˜²æ­¢å¾ªç¯å¼•ç”¨ï¼Œä»£ç†æ–¹ç”¨strongå£°æ˜</li>
</ul>
<h4 id="é€šçŸ¥"><a href="#é€šçŸ¥" class="headerlink" title="é€šçŸ¥"></a>é€šçŸ¥</h4><ul>
<li>ç”¨è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼å®ç°çš„</li>
<li>ä¸€å¯¹å¤š</li>
</ul>
<p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-0112.27.51.png" alt=""></p>
<p>observerä¸­åŒ…å«è§‚å¯Ÿè€…å¯¹è±¡ï¼Œå’Œå›è°ƒçš„æ–¹æ³•</p>
<h4 id="KVO"><a href="#KVO" class="headerlink" title="KVO"></a>KVO</h4><p>key-value-observing</p>
<p>è§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°</p>
<p>ä½¿ç”¨isaæ··å†™æŠ€æœ¯æ¥å®ç°kvo</p>
<p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-01 7.07.35.png" alt=""></p>
<p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-01 7.12.03.png" alt=""></p>
<p>é€šè¿‡kvcè®¾ç½®valueï¼Œkvoèƒ½å¦ç”Ÿæ•ˆï¼Ÿå¯ä»¥ï¼Œå› ä¸ºè°ƒç”¨äº†setteræ–¹æ³•<br>é‚£ä¹ˆé€šè¿‡æˆå‘˜å˜é‡ç›´æ¥èµ‹å€¼èƒ½å¦ç”Ÿæ•ˆï¼Ÿä¸èƒ½ï¼Œæ²¡æœ‰è°ƒç”¨setteræ–¹æ³•</p>
<p>æ‰‹åŠ¨kvoæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>kvoèƒ½å¦ä½¿ç”¨æˆå‘˜å˜é‡ä½œä¸ºkï¼Ÿå¯ä»¥çš„ï¼Œåœ¨åº•å±‚ä¼šä¸ºå…¶åˆ›å»ºsetteræ–¹æ³•ï¼Œåœ¨å…¶ä»–åœ°æ–¹è°ƒç”¨æˆ–è€…è¿›è¡Œkvcçš„æ—¶å€™å°±ä¼šè°ƒç”¨</p>
<p><a href="https://www.cnblogs.com/wengzilin/p/4346775.html" target="_blank" rel="external">kvoä½¿ç”¨ä¸­çš„å‘</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">-(void)printInfo</div><div class="line">&#123;</div><div class="line">    NSLog(@&quot;isa:%@, supper class:%@&quot;, NSStringFromClass(object_getClass(self)),</div><div class="line">          class_getSuperclass(object_getClass(self)));</div></pre></td></tr></table></figure>
<p>å½“keyPathæ˜¯æˆå‘˜å˜é‡çš„æ—¶å€™ï¼Œç¡®å®ä¼šè°ƒç”¨æˆåŠŸï¼Œä½†æ˜¯å…·ä½“çš„æ–¹å¼å´å¹¶ä¸æ˜¯é‡å†™setæ–¹æ³•ï¼Œå…·ä½“æ˜¯å•¥æœ‰å¾…æ¢ç©¶ã€‚</p>
<p><code>willChangeValueForKey:</code></p>
<h4 id="KVC"><a href="#KVC" class="headerlink" title="KVC"></a>KVC</h4><p>key-value-coding</p>
<p>æ˜¯å¦ç ´åé¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³ï¼Ÿæ˜¯çš„</p>
<p>valueForKey:</p>
<p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-01 7.22.32.png" alt=""></p>
<p>æœ‰æ²¡æœ‰getæ–¹æ³•ï¼Œæœ‰çš„è¯ç›´æ¥è¿”å›ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œé‚£ä¹ˆå»çœ‹çœ‹æœ‰æ²¡æœ‰ç›¸åŒæˆ–è€…ç›¸ä¼¼çš„å˜é‡å­˜åœ¨ï¼Ÿè¿™é‡Œæœ‰ä¸€ä¸ªæ–¹æ³•å¯ä»¥ç¦æ­¢è¿™ä¸ªæµç¨‹ã€‚</p>
<p>Accessor Method:</p>
<ul>
<li>getKey</li>
<li>key</li>
<li>isKey</li>
</ul>
<p>Instance Var:</p>
<ul>
<li>_key</li>
<li>_isKey</li>
<li>key</li>
<li>isKey</li>
</ul>
<p>setvalueForKeyä¸€æ ·çš„æµç¨‹å’Œé“ç†</p>
<p><a href="https://www.cnblogs.com/panda1024/p/6014399.html" target="_blank" rel="external">kvcé›†åˆè¿ç®—ç¬¦</a></p>
<h5 id="KVCé›†åˆè¿ç®—ç¬¦å·å¦‚ä½•ä½¿ç”¨"><a href="#KVCé›†åˆè¿ç®—ç¬¦å·å¦‚ä½•ä½¿ç”¨" class="headerlink" title="KVCé›†åˆè¿ç®—ç¬¦å·å¦‚ä½•ä½¿ç”¨"></a>KVCé›†åˆè¿ç®—ç¬¦å·å¦‚ä½•ä½¿ç”¨</h5><ul>
<li>å¿…é¡»ç”¨åœ¨é›†åˆå¯¹è±¡ä¸Šæ´»ç€æ™®é€šå¯¹è±¡çš„é›†åˆå±æ€§ä¸Š</li>
<li>é¸¡è›‹é›†åˆè¿ç®—ç¬¦å·æœ‰@avg,@count,@max,@min,@sum</li>
<li>æ ¼å¼@â€@sum.ageâ€æˆ–è€…@â€é›†åˆå±æ€§.@max.ageâ€</li>
</ul>
<h4 id="å±æ€§å…³é”®å­—"><a href="#å±æ€§å…³é”®å­—" class="headerlink" title="å±æ€§å…³é”®å­—"></a>å±æ€§å…³é”®å­—</h4><p>è¯»å†™ readonly,readwrite</p>
<p>åŸå­æ€§ atomic,nonatomic</p>
<p>å¼•ç”¨è®¡æ•°</p>
<ul>
<li>retain/strong</li>
<li>assign/unsafe_unretained</li>
<li>weak</li>
<li>copy</li>
</ul>
<p>assign/weakåŒºåˆ«</p>
<ul>
<li>assignå¯ä»¥ä¿®é¥°intï¼Œboolï¼Œä¹Ÿå¯ä»¥ä¿®é¥°å¯¹è±¡ï¼Œweakåªèƒ½ä¿®é¥°å¯¹è±¡</li>
<li>assignä¿®é¥°çš„å¯¹è±¡è¢«é‡Šæ”¾åï¼Œä¼šå¯¼è‡´æ‚¬å‚æŒ‡é’ˆï¼ŒweakæŒ‡é’ˆä¼šè¢«ç½®ä¸ºnil</li>
<li>éƒ½ä¸æ”¹å˜å¼•ç”¨è®¡æ•°</li>
</ul>
<p><code>@property (copy) NSMutableArray *arr;</code>è¿™æ ·å£°æ˜æœ‰å•¥é—®é¢˜ï¼Ÿç»è¿‡copyä¿®é¥°éƒ½æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªæ·±æ‹·è´ï¼Œåªæœ‰copyä¿®é¥°ä¸å¯å˜å¯¹è±¡æ‰æ˜¯æµ…æ‹·è´</p>
<p>æµ…æ‹·è´å¢åŠ å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œå› ä¸ºå¤šäº†ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ï¼Œæ·±æ‹·è´æ˜¯äº§ç”Ÿäº†ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œä¸ä¼šå½±å“å¼•ç”¨è®¡æ•°ã€‚</p>
<p>æ·±æ‹·è´vsæµ…æ‹·è´åŒºåˆ«:</p>
<blockquote>
<p>æ˜¯å¦å¼€è¾Ÿæ–°åœ°å€ï¼Œæ˜¯å¦å½±å“å¼•ç”¨è®¡æ•°</p>
</blockquote>
<h4 id="atomicå®ç°"><a href="#atomicå®ç°" class="headerlink" title="atomicå®ç°"></a>atomicå®ç°</h4><p>åœ¨ objc4-723 çš„ Objective-C runtime å®ç°ä¸­ï¼Œproperty çš„ atomic æ˜¯é‡‡ç”¨ spinlock_t ä¹Ÿå°±æ˜¯ä¿—ç§°çš„è‡ªæ—‹é”å®ç°çš„ã€‚å…·ä½“ä»£ç å¯ä»¥çœ‹ objc_accessors.mmï¼Œ// getter</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">id objc_getProperty(id self, SEL _cmd, ptrdiff_t offset, BOOL atomic) &#123;</div><div class="line">    // ...</div><div class="line">    if (!atomic) return *slot;</div><div class="line"></div><div class="line">    // Atomic retain release world</div><div class="line">    spinlock_t&amp; slotlock = PropertyLocks[slot];</div><div class="line">    slotlock.lock();</div><div class="line">    id value = objc_retain(*slot);</div><div class="line">    slotlock.unlock();</div><div class="line">    // ...</div><div class="line">&#125;</div><div class="line"></div><div class="line">// setter</div><div class="line">static inline void reallySetProperty(id self, SEL _cmd, id newValue, ptrdiff_t offset, bool atomic, bool copy, bool mutableCopy)</div><div class="line">&#123;</div><div class="line">    // ...</div><div class="line">    if (!atomic) &#123;</div><div class="line">        oldValue = *slot;</div><div class="line">        *slot = newValue;</div><div class="line">    &#125; else &#123;</div><div class="line">        spinlock_t&amp; slotlock = PropertyLocks[slot];</div><div class="line">        slotlock.lock();</div><div class="line">        oldValue = *slot;</div><div class="line">        *slot = newValue;        </div><div class="line">        slotlock.unlock();</div><div class="line">    &#125;</div><div class="line">    // ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h4><p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-01 7.46.27.png" alt=""></p>
<h3 id="NSCopyingåè®®å®ç°"><a href="#NSCopyingåè®®å®ç°" class="headerlink" title="NSCopyingåè®®å®ç°"></a>NSCopyingåè®®å®ç°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">#import &quot;KaoBei.h&quot;</div><div class="line"></div><div class="line">@implementation KaoBei</div><div class="line"></div><div class="line">- (id)init &#123;</div><div class="line">    self = [super init];</div><div class="line">    if (self) &#123;</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line">- (id)copyWithZone:(NSZone *)zone &#123;</div><div class="line">    KaoBei *instance = [[KaoBei alloc] init];</div><div class="line">    if (instance) &#123;</div><div class="line">        instance.chanPInName = self.chanPInName;</div><div class="line">        instance.icon = [self.icon copyWithZone:zone];</div><div class="line">        instance.isParent = [self.isParent copyWithZone:zone];</div><div class="line">        instance.theSelected = [self.theSelected copyWithZone:zone];</div><div class="line">        instance.ids = [self.ids copyWithZone:zone];</div><div class="line">        instance.name = [self.name copyWithZone:zone];</div><div class="line">        instance.imageUrlStr = [self.imageUrlStr copyWithZone:zone];</div><div class="line">    &#125;</div><div class="line">    return instance;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (id)mutableCopyWithZone:(NSZone *)zone &#123;</div><div class="line">    KaoBei *instance = [[KaoBei alloc] init];</div><div class="line">    if (instance) &#123;</div><div class="line">        instance.chanPInName = self.chanPInName;</div><div class="line">        instance.icon = [self.icon copyWithZone:zone];</div><div class="line">        instance.isParent = [self.isParent copyWithZone:zone];</div><div class="line">        instance.theSelected = [self.theSelected copyWithZone:zone];</div><div class="line">        instance.ids = [self.ids copyWithZone:zone];</div><div class="line">        instance.name = [self.name copyWithZone:zone];</div><div class="line">        instance.imageUrlStr = [self.imageUrlStr copyWithZone:zone];</div><div class="line">    &#125;</div><div class="line">    return instance;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="instancetypeå’Œidçš„å¼‚åŒ"><a href="#instancetypeå’Œidçš„å¼‚åŒ" class="headerlink" title="instancetypeå’Œidçš„å¼‚åŒ"></a>instancetypeå’Œidçš„å¼‚åŒ</h4><h5 id="1ã€ç›¸åŒç‚¹"><a href="#1ã€ç›¸åŒç‚¹" class="headerlink" title="1ã€ç›¸åŒç‚¹"></a>1ã€ç›¸åŒç‚¹</h5><p>éƒ½å¯ä»¥ä½œä¸ºæ–¹æ³•çš„è¿”å›ç±»å‹</p>
<h5 id="2ã€ä¸åŒç‚¹"><a href="#2ã€ä¸åŒç‚¹" class="headerlink" title="2ã€ä¸åŒç‚¹"></a>2ã€ä¸åŒç‚¹</h5><p>â‘ instancetypeå¯ä»¥è¿”å›å’Œæ–¹æ³•æ‰€åœ¨ç±»ç›¸åŒç±»å‹çš„å¯¹è±¡ï¼Œidåªèƒ½è¿”å›æœªçŸ¥ç±»å‹çš„å¯¹è±¡ï¼›</p>
<p>â‘¡instancetypeåªèƒ½ä½œä¸ºè¿”å›å€¼ï¼Œä¸èƒ½åƒidé‚£æ ·ä½œä¸ºå‚æ•°ï¼Œæ¯”å¦‚ä¸‹é¢çš„å†™æ³•ï¼š</p>
<p>[objc] view plaincopyåœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">//err,expected a type  </div><div class="line">- (void)setValue:(instancetype)value  </div><div class="line">&#123;  </div><div class="line">    //do something  </div><div class="line">&#125;  </div><div class="line">å°±æ˜¯é”™çš„ï¼Œåº”è¯¥å†™æˆï¼š</div><div class="line">[objc] view plaincopyåœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡</div><div class="line"></div><div class="line">- (void)setValue:(id)value  </div><div class="line">&#123;  </div><div class="line">    //do something  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="runtime-é‡ç‚¹"><a href="#runtime-é‡ç‚¹" class="headerlink" title="runtime(é‡ç‚¹)"></a>runtime(é‡ç‚¹)</h3><p>å…ˆäº†è§£è¿™å››ç§ç»“æ„:</p>
<ul>
<li>objc_object</li>
<li>objc_class</li>
<li>isaæŒ‡é’ˆ</li>
<li>method_t</li>
</ul>
<h4 id="objc-object"><a href="#objc-object" class="headerlink" title="objc_object"></a>objc_object</h4><p>id == objc_object</p>
<p>åŒ…æ‹¬</p>
<p>isa_t isaç›¸å…³æ“ä½œ</p>
<p>å¼±å¼•ç”¨ç›¸å…³</p>
<p>å…³è”å¯¹è±¡ç›¸å…³</p>
<p>å†…å­˜ç®¡ç†ç›¸å…³</p>
<h4 id="objc-class"><a href="#objc-class" class="headerlink" title="objc_class"></a>objc_class</h4><p>Class == objc_class ç»§æ‰¿è‡ªobjc_objct</p>
<p>åŒ…æ‹¬</p>
<p>Class superClass</p>
<p>cache_t cache   æ–¹æ³•ç¼“å­˜</p>
<p>class_data_bits_t bits å˜é‡ï¼Œå±æ€§å’Œæ–¹æ³•éƒ½åœ¨è¿™</p>
<h5 id="å…³äºClass"><a href="#å…³äºClass" class="headerlink" title="å…³äºClass"></a>å…³äºClass</h5><p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-02 10.43.54.png" alt=""><br>è¯´æ˜:å½“æˆ‘ä»¬è°ƒç”¨å®ä¾‹æ–¹æ³•ï¼Œå®é™…æ˜¯é€šè¿‡isaå»Classå¯¹è±¡ä¸­æŸ¥æ‰¾çš„ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ç±»æ–¹æ³•ï¼Œå®é™…æ˜¯é€šè¿‡ç±»å¯¹è±¡çš„isaå»å…ƒç±»ä¸­æŸ¥æ‰¾çš„ã€‚</p>
<h5 id="å…³äºcache-t"><a href="#å…³äºcache-t" class="headerlink" title="å…³äºcache_t"></a>å…³äºcache_t</h5><p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-02 11.13.08.png" alt=""></p>
<p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-02 11.15.07.png" alt=""><br>è¯´æ˜cache_tæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åé‡Œè¾¹æ¯ä¸ªå…ƒç´ é‡Œéƒ½æœ‰ä¸€ä¸ªkeyï¼Œä¹Ÿå³æ˜¯SELï¼Œè¿˜æœ‰ä¸€ä¸ªIMPï¼Œå½“æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªSELçš„æ—¶å€™ï¼Œé€šè¿‡hashç®—æ³•è·å–è¿™ä¸ªå¯¹è±¡çš„ç´¢å¼•ï¼Œç„¶åå¿«é€Ÿçš„è·å–åˆ°è¿™ä¸ªbucket_tï¼Œç„¶åè·å–IMPè¿›è¡Œè°ƒç”¨</p>
<h5 id="å…³äºclass-data-bits-t"><a href="#å…³äºclass-data-bits-t" class="headerlink" title="å…³äºclass_data_bits_t"></a>å…³äºclass_data_bits_t</h5><p>è¿™ä¸ªæ˜¯å¯¹class_rw_tçš„å°è£…</p>
<p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-02 11.21.25.png" alt=""></p>
<p>methodsé‡Œè¾¹æ¯ä¸€ä¸ªå…ƒç´ åˆæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åæ¯ä¸ªæ•°ç»„ä»£è¡¨çš„æ˜¯ä¸€ä¸ªåˆ†ç±»ä¸­çš„æ·»åŠ çš„æ‰€æœ‰çš„æ–¹æ³•ï¼Œæœ€ç»ˆéƒ½ä¼šè¢«æ±‡æ€»åˆ°è¿™é‡Œï¼Œè¿›è¡Œæ–¹æ³•æŸ¥æ‰¾çš„æ—¶å€™å°±æ˜¯åœ¨è¿™é‡Œè¿›è¡Œçš„æŸ¥æ‰¾ï¼Œéå†methodsï¼Œä»å‰åˆ°åï¼Œç°åœ¨ç¬¬ä¸€ä¸ªæ•°ç»„é‡ŒæŸ¥æ‰¾ï¼Œå†åˆ°ç¬¬äºŒä¸ªæ•°ç»„é‡ŒæŸ¥æ‰¾ï¼Œä»¥æ­¤ç±»æ¨</p>
<p>åˆ†ç±»ä¸­æ·»åŠ çš„ä¸œè¥¿éƒ½åœ¨ä¸Šè¾¹è¿™ä¸ªç»“æ„ä¸­ï¼Œclass_rw_tï¼Œå®¿ä½“æœ¬èº«çš„å†…å®¹åœ¨ä¸‹è¾¹è¿™ä¸ªç»“æ„å½“ä¸­</p>
<p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/ 2018-07-02 11.26.53.png" alt=""></p>
<h5 id="method-t"><a href="#method-t" class="headerlink" title="method_t"></a>method_t</h5><p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-02 11.40.12.png" alt=""><br><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/ 2018-07-02 11.36.39.png" alt=""></p>
<p>ä¸€ä¸ªå‡½æ•°åªæœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œå¤šä¸ªå‚æ•°ï¼Œè¿™é‡Œæ˜¯ç±»å‹çš„è¡¨ç¤º</p>
<h5 id="æ€»ä½“ç»“æ„å›¾"><a href="#æ€»ä½“ç»“æ„å›¾" class="headerlink" title="æ€»ä½“ç»“æ„å›¾"></a>æ€»ä½“ç»“æ„å›¾</h5><p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/ 2018-07-02 11.32.44.png" alt=""></p>
<h5 id="åŠ¨æ€æ·»åŠ æ–¹æ³•å’Œåˆ†ç±»æœ‰å•¥å…³ç³»ï¼Ÿ"><a href="#åŠ¨æ€æ·»åŠ æ–¹æ³•å’Œåˆ†ç±»æœ‰å•¥å…³ç³»ï¼Ÿ" class="headerlink" title="åŠ¨æ€æ·»åŠ æ–¹æ³•å’Œåˆ†ç±»æœ‰å•¥å…³ç³»ï¼Ÿ"></a>åŠ¨æ€æ·»åŠ æ–¹æ³•å’Œåˆ†ç±»æœ‰å•¥å…³ç³»ï¼Ÿ</h5><p>ä»–ä»¬èµ°çš„æ˜¯åŒä¸€å¥—é€»è¾‘ï¼Œéƒ½æ˜¯å°†æ–¹æ³•åŠ åœ¨äº†å¯å˜æ•°ç»„é‚£é‡Œï¼Œæˆ‘ä»¬æœ¬èº«çš„ç±»é‡Œè¾¹çš„å†…å®¹æ˜¯ä¸å¯å˜çš„ï¼Œå…·ä½“é€»è¾‘å¦‚ä¸‹å›¾</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">static IMP </div><div class="line">addMethod(Class cls, SEL name, IMP imp, const char *types, bool replace)</div><div class="line">&#123;</div><div class="line">    IMP result = nil;</div><div class="line"></div><div class="line">    runtimeLock.assertWriting();</div><div class="line"></div><div class="line">    assert(types);</div><div class="line">    assert(cls-&gt;isRealized());</div><div class="line"></div><div class="line">    method_t *m;</div><div class="line">    if ((m = getMethodNoSuper_nolock(cls, name))) &#123;</div><div class="line">        // already exists</div><div class="line">        if (!replace) &#123;</div><div class="line">            result = m-&gt;imp;</div><div class="line">        &#125; else &#123;</div><div class="line">            result = _method_setImplementation(cls, m, imp);</div><div class="line">        &#125;</div><div class="line">    &#125; else &#123;</div><div class="line">        // fixme optimize</div><div class="line">        method_list_t *newlist;</div><div class="line">        newlist = (method_list_t *)calloc(sizeof(*newlist), 1);</div><div class="line">        newlist-&gt;entsizeAndFlags = </div><div class="line">            (uint32_t)sizeof(method_t) | fixed_up_method_list;</div><div class="line">        newlist-&gt;count = 1;</div><div class="line">        newlist-&gt;first.name = name;</div><div class="line">        newlist-&gt;first.types = strdup(types);</div><div class="line">        if (!ignoreSelector(name)) &#123;</div><div class="line">            newlist-&gt;first.imp = imp;</div><div class="line">        &#125; else &#123;</div><div class="line">            newlist-&gt;first.imp = (IMP)&amp;_objc_ignored_method;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        prepareMethodLists(cls, &amp;newlist, 1, NO, NO);</div><div class="line">        cls-&gt;data()-&gt;methods.attachLists(&amp;newlist, 1);//è¿™æ˜¯æœ€æ ¸å¿ƒçš„ä¸€å¥ï¼Œå°†newlistç»™äº†dataçš„methodsï¼Œè¿™æ˜¯é‚£ä¸ªå­˜æ”¾åˆ†ç±»æ–¹æ³•çš„äºŒç»´æ•°ç»„</div><div class="line">        flushCaches(cls);</div><div class="line"></div><div class="line">        result = nil;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return result;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ŒaddIvarsæ˜¯å’‹å®ç°çš„ï¼Œå› ä¸ºå¯å˜çš„å¯¹è±¡ä¸­æ²¡æœ‰ivarsï¼Œè¿™é‡Œè¦ä½“ç°è‹¹æœçš„å˜é€šäº†ï¼Œç›´æ¥å°†ä¸å¯å˜çš„å˜æˆå¯å˜çš„..</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line">BOOL </div><div class="line">class_addIvar(Class cls, const char *name, size_t size, </div><div class="line">              uint8_t alignment, const char *type)</div><div class="line">&#123;</div><div class="line">    if (!cls) return NO;</div><div class="line"></div><div class="line">    if (!type) type = &quot;&quot;;</div><div class="line">    if (name  &amp;&amp;  0 == strcmp(name, &quot;&quot;)) name = nil;</div><div class="line"></div><div class="line">    rwlock_writer_t lock(runtimeLock);</div><div class="line"></div><div class="line">    assert(cls-&gt;isRealized());</div><div class="line"></div><div class="line">    // No class variables</div><div class="line">    if (cls-&gt;isMetaClass()) &#123;</div><div class="line">        return NO;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // Can only add ivars to in-construction classes.</div><div class="line">    if (!(cls-&gt;data()-&gt;flags &amp; RW_CONSTRUCTING)) &#123;</div><div class="line">        return NO;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // Check for existing ivar with this name, unless it&apos;s anonymous.</div><div class="line">    // Check for too-big ivar.</div><div class="line">    // fixme check for superclass ivar too?</div><div class="line">    if ((name  &amp;&amp;  getIvar(cls, name))  ||  size &gt; UINT32_MAX) &#123;</div><div class="line">        return NO;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    class_ro_t *ro_w = make_ro_writeable(cls-&gt;data());//æˆ‘æƒ³æŠŠroå˜æˆå¯å˜å†è¯´...</div><div class="line"></div><div class="line">    // fixme allocate less memory here</div><div class="line">    </div><div class="line">    ivar_list_t *oldlist, *newlist;</div><div class="line">    if ((oldlist = (ivar_list_t *)cls-&gt;data()-&gt;ro-&gt;ivars)) &#123;</div><div class="line">        size_t oldsize = oldlist-&gt;byteSize();</div><div class="line">        newlist = (ivar_list_t *)calloc(oldsize + oldlist-&gt;entsize(), 1);</div><div class="line">        memcpy(newlist, oldlist, oldsize);</div><div class="line">        free(oldlist);</div><div class="line">    &#125; else &#123;</div><div class="line">        newlist = (ivar_list_t *)calloc(sizeof(ivar_list_t), 1);</div><div class="line">        newlist-&gt;entsizeAndFlags = (uint32_t)sizeof(ivar_t);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    uint32_t offset = cls-&gt;unalignedInstanceSize();</div><div class="line">    uint32_t alignMask = (1&lt;&lt;alignment)-1;</div><div class="line">    offset = (offset + alignMask) &amp; ~alignMask;</div><div class="line"></div><div class="line">    ivar_t&amp; ivar = newlist-&gt;get(newlist-&gt;count++);</div><div class="line">#if __x86_64__</div><div class="line">    // Deliberately over-allocate the ivar offset variable. </div><div class="line">    // Use calloc() to clear all 64 bits. See the note in struct ivar_t.</div><div class="line">    ivar.offset = (int32_t *)(int64_t *)calloc(sizeof(int64_t), 1);</div><div class="line">#else</div><div class="line">    ivar.offset = (int32_t *)malloc(sizeof(int32_t));</div><div class="line">#endif</div><div class="line">    *ivar.offset = offset;</div><div class="line">    ivar.name = name ? strdup(name) : nil;</div><div class="line">    ivar.type = strdup(type);</div><div class="line">    ivar.alignment_raw = alignment;</div><div class="line">    ivar.size = (uint32_t)size;</div><div class="line"></div><div class="line">    ro_w-&gt;ivars = newlist;</div><div class="line">    cls-&gt;setInstanceSize((uint32_t)(offset + size));</div><div class="line"></div><div class="line">    // Ivar layout updated in registerClass.</div><div class="line"></div><div class="line">    return YES;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="å¯¹è±¡ï¼Œç±»å¯¹è±¡ï¼Œå…ƒç±»å¯¹è±¡"><a href="#å¯¹è±¡ï¼Œç±»å¯¹è±¡ï¼Œå…ƒç±»å¯¹è±¡" class="headerlink" title="å¯¹è±¡ï¼Œç±»å¯¹è±¡ï¼Œå…ƒç±»å¯¹è±¡"></a>å¯¹è±¡ï¼Œç±»å¯¹è±¡ï¼Œå…ƒç±»å¯¹è±¡</h4><p>æ–¹æ³•è°ƒç”¨çš„æ—¶å€™çš„æŸ¥æ‰¾è·¯å¾„å›¾</p>
<p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/ 2018-07-02 11.47.06.png" alt=""></p>
<p>æ ¹å…ƒç±»å¯¹è±¡çš„superclassæŒ‡å‘äº†NSObjectï¼Œé‚£ä¹ˆå°±æ„å‘³ç€ä¸€ä¸ªè°ƒç”¨ä¸€ä¸ªç±»æ–¹æ³•ï¼Œå¦‚æœNSObjectä¸­æœ‰åŒåçš„å®ä¾‹æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ä¼šæ‰§è¡Œè¿™ä¸ªå®ä¾‹æ–¹æ³•ï¼Œè€Œä¸ä¼šå‘ç”Ÿå´©æºƒ</p>
<h4 id="å®é™…ä¾‹å­"><a href="#å®é™…ä¾‹å­" class="headerlink" title="å®é™…ä¾‹å­"></a>å®é™…ä¾‹å­</h4><p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-02 12.03.52.png" alt=""></p>
<p>è¿™ä¸ªé¢˜ç›®çš„ç»“æœä¸¤ä¸ªéƒ½æ‰“å°ï¼ŒPhoneï¼Œè¿™é‡Œè¦ç†è§£è°ƒç”¨superçš„æ„æ€æ˜¯è¯´ï¼Œè·³è¿‡selfè¿™ä¸ªç±»ï¼Œç›´æ¥ä»superè¿™ä¸ªç±»å¯¹è±¡æ¥æŸ¥æ‰¾ï¼Œä½†æ˜¯æ¶ˆæ¯çš„æ¥å—è€…ä»ç„¶æ˜¯selfï¼Œæ‰€ä»¥è¿™é‡Œéƒ½æ‰“å°Phone</p>
<h4 id="æŸ¥æ‰¾è¿‡ç¨‹"><a href="#æŸ¥æ‰¾è¿‡ç¨‹" class="headerlink" title="æŸ¥æ‰¾è¿‡ç¨‹"></a>æŸ¥æ‰¾è¿‡ç¨‹</h4><ul>
<li>ç¼“å­˜æŸ¥æ‰¾</li>
<li>å½“å‰ç±»æŸ¥æ‰¾</li>
</ul>
<p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-0212.39.22.png" alt=""><br>å…³é”®ç‚¹åœ¨äºé€šè¿‡hashæŸ¥æ‰¾ï¼Œæ‰¾åˆ°å¯¹åº”çš„bucket_t</p>
<p>å½“å‰ç±»æŸ¥æ‰¾</p>
<p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-0212.41.50.png" alt=""></p>
<p>çˆ¶ç±»é€çº§æŸ¥æ‰¾<br><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-0212.43.03.png" alt=""></p>
<p>æ€»æµç¨‹</p>
<p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/2018-07-0212.43.41.png" alt=""></p>
<h4 id="æ¶ˆæ¯è½¬å‘æµç¨‹"><a href="#æ¶ˆæ¯è½¬å‘æµç¨‹" class="headerlink" title="æ¶ˆæ¯è½¬å‘æµç¨‹"></a>æ¶ˆæ¯è½¬å‘æµç¨‹</h4><p><img src="/17/2015/OCè¯­è¨€åŸºç¡€:runtime/../../../images/ 2018-07-02 2.11.14.png" alt=""></p>
<p>ä¸€ä¸ªåº”ç”¨å°±æ˜¯ç”¨æ¥å®ç°å¤šé‡ä»£ç†<br><a href="http://www.cocoachina.com/ios/20151208/14595.html" target="_blank" rel="external">å¤šé‡ä»£ç†</a></p>
<p>NSPointerArrayé˜²æ­¢å¾ªç¯å¼•ç”¨</p>
<p>å†ä¸€ä¸ªåº”ç”¨å°±æ˜¯å®ç°@dynamicçš„å±æ€§</p>
<h4 id="æ–¹æ³•äº¤æ¢"><a href="#æ–¹æ³•äº¤æ¢" class="headerlink" title="æ–¹æ³•äº¤æ¢"></a>æ–¹æ³•äº¤æ¢</h4><h4 id="åŠ¨æ€æ·»åŠ æ–¹æ³•"><a href="#åŠ¨æ€æ·»åŠ æ–¹æ³•" class="headerlink" title="åŠ¨æ€æ·»åŠ æ–¹æ³•"></a>åŠ¨æ€æ·»åŠ æ–¹æ³•</h4><p>performSeletor:</p>
<h4 id="åŠ¨æ€æ–¹æ³•è§£æ"><a href="#åŠ¨æ€æ–¹æ³•è§£æ" class="headerlink" title="åŠ¨æ€æ–¹æ³•è§£æ"></a>åŠ¨æ€æ–¹æ³•è§£æ</h4><p>@dynamic</p>
<ul>
<li>åŠ¨æ€è¿è¡Œæ—¶è¯­è¨€å°†å‡½æ•°å†³è®®æ¨è¿Ÿåˆ°è¿è¡Œæ—¶</li>
<li>ç¼–è¯‘è¯­è¨€ç¼–è¯‘æ—¶å†³è®®ï¼Œæ— æ³•ä¿®æ”¹</li>
</ul>
<p>[obj foo]å’Œobj_msgSend()å‡½æ•°å…³ç³»ï¼Ÿ<br>runtimeå›¾å’Œé€šè¿‡Selectoræ‰¾åˆ°å¯¹åº”çš„IMPåœ°å€çš„ï¼Ÿ</p>
<h4 id="èƒ½å¦å‘ç¼–è¯‘åçš„ç±»ä¸­æ·»åŠ å®ä¾‹å˜é‡ï¼Ÿä¸èƒ½ï¼Œä¸ºå•¥ï¼Ÿ"><a href="#èƒ½å¦å‘ç¼–è¯‘åçš„ç±»ä¸­æ·»åŠ å®ä¾‹å˜é‡ï¼Ÿä¸èƒ½ï¼Œä¸ºå•¥ï¼Ÿ" class="headerlink" title="èƒ½å¦å‘ç¼–è¯‘åçš„ç±»ä¸­æ·»åŠ å®ä¾‹å˜é‡ï¼Ÿä¸èƒ½ï¼Œä¸ºå•¥ï¼Ÿ"></a>èƒ½å¦å‘ç¼–è¯‘åçš„ç±»ä¸­æ·»åŠ å®ä¾‹å˜é‡ï¼Ÿä¸èƒ½ï¼Œä¸ºå•¥ï¼Ÿ</h4><blockquote>
<p>ç­”ï¼šä»runtimeå®ç°åŸç†æ¥è¯´ï¼Œæœ¬æ¥æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯è‹¹æœåšäº†ç¦æ­¢ï¼Œå°±åƒä¸‹è¾¹è¿™æ ·é€šè¿‡flagå»æ ‡è®°è¿™ä¸ªç±»æ˜¯å·²ç»å»ºè®¾å®Œæˆäº†ï¼Œè¿˜æ˜¯æ­£åœ¨å»ºè®¾ä¸­ï¼Œç¼–è¯‘å®Œæˆçš„å°±æ˜¯å»ºè®¾å®Œæˆçš„ï¼ŒåŠ¨æ€æ·»åŠ çš„å°±æ˜¯æ­£åœ¨å»ºè®¾ä¸­</p>
</blockquote>
<p>class_addIvarå®ç°</p>
<pre><code>// Can only add ivars to in-construction classes.
    if (!(cls-&gt;data()-&gt;flags &amp; RW_CONSTRUCTING)) {
        return NO;
    }
</code></pre><h4 id="è°ˆè°ˆloadå’Œinitializeçš„åŒºåˆ«"><a href="#è°ˆè°ˆloadå’Œinitializeçš„åŒºåˆ«" class="headerlink" title="è°ˆè°ˆloadå’Œinitializeçš„åŒºåˆ«"></a>è°ˆè°ˆloadå’Œinitializeçš„åŒºåˆ«</h4><ul>
<li>ç¨‹åºè¿è¡Œåç«‹å³æ‰§è¡Œvsç±»çš„æ–¹æ³•ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨æ‰§è¡Œ</li>
<li>ä¸ä¼šæ²¿ç”¨çˆ¶ç±»æ–¹æ³•vsä¼šæ²¿ç”¨çˆ¶ç±»æ–¹æ³•</li>
<li>åˆ†ç±»ä¸­å¦‚æœæœ‰å®šä¹‰ï¼Œå…¨éƒ¨æ‰§è¡Œä½†åäºç±»ä¸­çš„ï¼Œä¹Ÿå°±æ˜¯å…ˆæ‰§è¡Œç±»æœ¬èº«ä¸­çš„vsè¦†ç›–ç±»ä¸­çš„æ–¹æ³•ï¼Œåªæ‰§è¡Œä¸€ä¸ª</li>
</ul>
<h3 id="appå¯åŠ¨æµç¨‹"><a href="#appå¯åŠ¨æµç¨‹" class="headerlink" title="appå¯åŠ¨æµç¨‹"></a>appå¯åŠ¨æµç¨‹</h3><p><a href="https://techblog.toutiao.com/2017/01/17/iosspeed/" target="_blank" rel="external">å¤´æ¡å¯åŠ¨ä¼˜åŒ–</a></p>
<p>å¯ä»¥ç®€å•åˆ†ä¸ºmainä¹‹å‰å–mainä¹‹å</p>
<h4 id="mainä¹‹å‰"><a href="#mainä¹‹å‰" class="headerlink" title="mainä¹‹å‰"></a>mainä¹‹å‰</h4><ul>
<li>load dylibs image è¯»å–åº“é•œåƒæ–‡ä»¶ï¼Œå‡å°‘ç³»ç»Ÿä¾èµ–ï¼Œåˆå¹¶è‡ªå·±çš„</li>
<li>Rebase image  </li>
<li>Bind image  å‡å°‘Objcç±»æ•°é‡ï¼Œ å‡å°‘selectoræ•°é‡ï¼Œå‡å°‘c++è™šå‡½æ•°</li>
<li>Objc setup  ç±»ï¼Œåˆ†ç±»ï¼ŒSELæ³¨å†Œ</li>
<li>initializers</li>
</ul>
<h4 id="mainä¹‹å"><a href="#mainä¹‹å" class="headerlink" title="mainä¹‹å"></a>mainä¹‹å</h4><p>main()è°ƒç”¨ä¹‹åçš„åŠ è½½æ—¶é—´</p>
<p>åœ¨main()è¢«è°ƒç”¨ä¹‹åï¼ŒAppçš„ä¸»è¦å·¥ä½œå°±æ˜¯åˆå§‹åŒ–å¿…è¦çš„æœåŠ¡ï¼Œæ˜¾ç¤ºé¦–é¡µå†…å®¹ç­‰ã€‚è€Œæˆ‘ä»¬çš„ä¼˜åŒ–ä¹Ÿæ˜¯å›´ç»•å¦‚ä½•èƒ½å¤Ÿå¿«é€Ÿå±•ç°é¦–é¡µæ¥å¼€å±•ã€‚ Appé€šå¸¸åœ¨AppDelegateç±»ä¸­çš„<code>- (BOOL)Application:(UIApplication *)Application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions</code>æ–¹æ³•ä¸­åˆ›å»ºé¦–é¡µéœ€è¦å±•ç¤ºçš„viewï¼Œç„¶ååœ¨å½“å‰runloopçš„æœ«å°¾ï¼Œä¸»åŠ¨è°ƒç”¨CA::Transaction::commitå®Œæˆè§†å›¾çš„æ¸²æŸ“ã€‚<br>è€Œè§†å›¾çš„æ¸²æŸ“ä¸»è¦æ¶‰åŠä¸‰ä¸ªé˜¶æ®µï¼š</p>
<p>å‡†å¤‡é˜¶æ®µ è¿™é‡Œä¸»è¦æ˜¯å›¾ç‰‡çš„è§£ç <br>å¸ƒå±€é˜¶æ®µ é¦–é¡µæ‰€æœ‰UIViewçš„- (void)layoutSubViews()è¿è¡Œ<br>ç»˜åˆ¶é˜¶æ®µ é¦–é¡µæ‰€æœ‰UIViewçš„- (void)drawRect:(CGRect)rectè¿è¡Œ<br>å†åŠ ä¸Šå¯åŠ¨ä¹‹åå¿…è¦æœåŠ¡çš„å¯åŠ¨ã€å¿…è¦æ•°æ®çš„åˆ›å»ºå’Œè¯»å–ï¼Œè¿™äº›å°±æ˜¯æˆ‘ä»¬å¯ä»¥å°è¯•ä¼˜åŒ–çš„åœ°æ–¹<br>å› æ­¤ï¼Œå¯¹äºmain()å‡½æ•°è°ƒç”¨ä¹‹å‰æˆ‘ä»¬å¯ä»¥ä¼˜åŒ–çš„ç‚¹æœ‰ï¼š</p>
<p>ä¸ä½¿ç”¨xibï¼Œç›´æ¥è§†ç”¨ä»£ç åŠ è½½é¦–é¡µè§†å›¾<br>NSUserDefaultså®é™…ä¸Šæ˜¯åœ¨Libraryæ–‡ä»¶å¤¹ä¸‹ä¼šç”Ÿäº§ä¸€ä¸ªplistæ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶å¤ªå¤§çš„è¯ä¸€æ¬¡èƒ½è¯»å–åˆ°å†…å­˜ä¸­å¯èƒ½å¾ˆè€—æ—¶ï¼Œè¿™ä¸ªå½±å“éœ€è¦è¯„ä¼°ï¼Œå¦‚æœè€—æ—¶å¾ˆå¤§çš„è¯éœ€è¦æ‹†åˆ†(éœ€è€ƒè™‘è€ç‰ˆæœ¬è¦†ç›–å®‰è£…å…¼å®¹é—®é¢˜)<br>æ¯æ¬¡ç”¨NSLogæ–¹å¼æ‰“å°ä¼šéšå¼çš„åˆ›å»ºä¸€ä¸ªCalendarï¼Œå› æ­¤éœ€è¦åˆ å‡å¯åŠ¨æ—¶å„ä¸šåŠ¡æ–¹æ‰“çš„logï¼Œæˆ–è€…ä»…ä»…é’ˆå¯¹å†…æµ‹ç‰ˆè¾“å‡ºlog<br>æ¢³ç†åº”ç”¨å¯åŠ¨æ—¶å‘é€çš„æ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼Œæ˜¯å¦å¯ä»¥ç»Ÿä¸€åœ¨å¼‚æ­¥çº¿ç¨‹è¯·æ±‚</p>
]]></content>
      
        
        <tags>
            
            <tag> iOSåŸºç¡€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[appç”Ÿå‘½å‘¨æœŸ]]></title>
      <url>/2015/07/12/2015/app%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
      <content type="html"><![CDATA[<p><img src="/12/2015/appç”Ÿå‘½å‘¨æœŸ/../../../images/1513666027385408.png" alt=""></p>
<p>å…·ä½“æ‰§è¡Œæµç¨‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;</div><div class="line">    NSLog(@&quot;--- %s ---&quot;,__func__);//__func__æ‰“å°æ–¹æ³•å</div><div class="line">    return YES;</div><div class="line">&#125;</div><div class="line">- (void)applicationWillResignActive:(UIApplication *)application &#123;</div><div class="line">     NSLog(@&quot;--- %s ---&quot;,__func__);</div><div class="line">&#125;</div><div class="line">- (void)applicationDidEnterBackground:(UIApplication *)application &#123;</div><div class="line">   NSLog(@&quot;--- %s ---&quot;,__func__);</div><div class="line">&#125;</div><div class="line">- (void)applicationWillEnterForeground:(UIApplication *)application &#123;</div><div class="line">   NSLog(@&quot;--- %s ---&quot;,__func__);</div><div class="line">&#125;</div><div class="line">- (void)applicationDidBecomeActive:(UIApplication *)application &#123;</div><div class="line">  NSLog(@&quot;--- %s ---&quot;,__func__);</div><div class="line">&#125;</div><div class="line">- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application &#123;</div><div class="line">     NSLog(@&quot;--- %s ---&quot;,__func__);</div><div class="line">&#125;</div><div class="line">- (void)applicationWillTerminate:(UIApplication *)application &#123;</div><div class="line">    NSLog(@&quot;--- %s ---&quot;,__func__);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å¯åŠ¨ç¨‹åº</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">-[AppDelegate application:didFinishLaunchingWithOptions:] </div><div class="line">-[AppDelegate applicationDidBecomeActive:]</div><div class="line">æŒ‰ä¸‹ Command + H + SHIFT</div><div class="line"></div><div class="line">-[AppDelegate applicationWillResignActive:]</div><div class="line">-[AppDelegate applicationDidEnterBackground:]</div><div class="line">é‡æ–°ç‚¹å‡» è¿›å…¥ç¨‹åº</div><div class="line"></div><div class="line">-[AppDelegate applicationWillEnterForeground:]</div><div class="line">-[AppDelegate applicationDidBecomeActive:]</div><div class="line">å†…å­˜è­¦å‘Š</div><div class="line"></div><div class="line">-[AppDelegate applicationDidReceiveMemoryWarning:]</div></pre></td></tr></table></figure>
<h4 id="UIViewController-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#UIViewController-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="UIViewController çš„ç”Ÿå‘½å‘¨æœŸ"></a>UIViewController çš„ç”Ÿå‘½å‘¨æœŸ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line">// éstoryBoard(xibæˆ–éxib)éƒ½èµ°è¿™ä¸ªæ–¹æ³•</div><div class="line">- (instancetype)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil &#123;</div><div class="line">    NSLog(@&quot;%s&quot;, __FUNCTION__);</div><div class="line">    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) &#123;</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line">// storyBoardèµ°è¿™ä¸ªæ–¹æ³•</div><div class="line">- (instancetype)initWithCoder:(NSCoder *)aDecoder &#123;</div><div class="line">     NSLog(@&quot;%s&quot;, __FUNCTION__);</div><div class="line">    if (self = [super initWithCoder:aDecoder]) &#123;</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line">// xib åŠ è½½ å®Œæˆ</div><div class="line">- (void)awakeFromNib &#123;</div><div class="line">    [super awakeFromNib];</div><div class="line">     NSLog(@&quot;%s&quot;, __FUNCTION__);</div><div class="line">&#125;</div><div class="line">// åŠ è½½è§†å›¾(é»˜è®¤ä»nib)</div><div class="line">- (void)loadView &#123;</div><div class="line">    NSLog(@&quot;%s&quot;, __FUNCTION__);</div><div class="line">    self.view = [[UIView alloc] initWithFrame:[UIScreen mainScreen].bounds];</div><div class="line">    self.view.backgroundColor = [UIColor redColor];</div><div class="line">&#125;</div><div class="line">// è§†å›¾æ§åˆ¶å™¨ä¸­çš„è§†å›¾åŠ è½½å®Œæˆï¼ŒviewControllerè‡ªå¸¦çš„viewåŠ è½½å®Œæˆ</div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    NSLog(@&quot;%s&quot;, __FUNCTION__);</div><div class="line">    [super viewDidLoad];</div><div class="line">&#125;</div><div class="line">// è§†å›¾å°†è¦å‡ºç°</div><div class="line">- (void)viewWillAppear:(BOOL)animated &#123;</div><div class="line">    NSLog(@&quot;%s&quot;, __FUNCTION__);</div><div class="line">    [super viewWillAppear:animated];</div><div class="line">&#125;</div><div class="line">// view å³å°†å¸ƒå±€å…¶ Subviews</div><div class="line">- (void)viewWillLayoutSubviews &#123;</div><div class="line">    NSLog(@&quot;%s&quot;, __FUNCTION__);</div><div class="line">    [super viewWillLayoutSubviews];</div><div class="line">&#125;</div><div class="line">// view å·²ç»å¸ƒå±€å…¶ Subviews</div><div class="line">- (void)viewDidLayoutSubviews &#123;</div><div class="line">    NSLog(@&quot;%s&quot;, __FUNCTION__);</div><div class="line">    [super viewDidLayoutSubviews];</div><div class="line">&#125;</div><div class="line">// è§†å›¾å·²ç»å‡ºç°</div><div class="line">- (void)viewDidAppear:(BOOL)animated &#123;</div><div class="line">    NSLog(@&quot;%s&quot;, __FUNCTION__);</div><div class="line">    [super viewDidAppear:animated];</div><div class="line">&#125;</div><div class="line">// è§†å›¾å°†è¦æ¶ˆå¤±</div><div class="line">- (void)viewWillDisappear:(BOOL)animated &#123;</div><div class="line">    NSLog(@&quot;%s&quot;, __FUNCTION__);</div><div class="line">    [super viewWillDisappear:animated];</div><div class="line">&#125;</div><div class="line">// è§†å›¾å·²ç»æ¶ˆå¤±</div><div class="line">- (void)viewDidDisappear:(BOOL)animated &#123;</div><div class="line">    NSLog(@&quot;%s&quot;, __FUNCTION__);</div><div class="line">    [super viewDidDisappear:animated];</div><div class="line">&#125;</div><div class="line">// å‡ºç°å†…å­˜è­¦å‘Š </div><div class="line">- (void)didReceiveMemoryWarning &#123;</div><div class="line">    NSLog(@&quot;%s&quot;, __FUNCTION__);</div><div class="line">    [super didReceiveMemoryWarning];</div><div class="line">&#125;</div><div class="line">// è§†å›¾è¢«é”€æ¯</div><div class="line">- (void)dealloc &#123;</div><div class="line">    NSLog(@&quot;%s&quot;, __FUNCTION__);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åˆ†æ</p>
<h4 id="initWithNibName-bundle"><a href="#initWithNibName-bundle" class="headerlink" title="initWithNibName:bundle:"></a>initWithNibName:bundle:</h4><p>åˆå§‹åŒ–UIViewControllerï¼Œæ‰§è¡Œå…³é”®æ•°æ®åˆå§‹åŒ–æ“ä½œï¼ŒéStoryBoardåˆ›å»ºUIViewControlleréƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>
<p>æ³¨æ„: ä¸è¦åœ¨è¿™é‡ŒåšViewç›¸å…³æ“ä½œï¼ŒViewåœ¨loadViewæ–¹æ³•ä¸­æ‰åˆå§‹åŒ–ã€‚</p>
<h4 id="initWithCoder"><a href="#initWithCoder" class="headerlink" title="initWithCoder:"></a>initWithCoder:</h4><p>å¦‚æœä½¿ç”¨StoryBoardè¿›è¡Œè§†å›¾ç®¡ç†ï¼Œç¨‹åºä¸ä¼šç›´æ¥åˆå§‹åŒ–ä¸€ä¸ªUIViewControllerï¼ŒStoryBoardä¼šè‡ªåŠ¨åˆå§‹åŒ–æˆ–åœ¨segueè¢«è§¦å‘æ—¶è‡ªåŠ¨åˆå§‹åŒ–ï¼Œå› æ­¤æ–¹æ³•initWithNibName:bundleä¸ä¼šè¢«è°ƒç”¨ï¼Œä½†æ˜¯initWithCoderä¼šè¢«è°ƒç”¨ã€‚</p>
<h4 id="awakeFromNib"><a href="#awakeFromNib" class="headerlink" title="awakeFromNib"></a>awakeFromNib</h4><p>å½“awakeFromNibæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œæ‰€æœ‰è§†å›¾çš„outletå’Œactionå·²ç»è¿æ¥ï¼Œä½†è¿˜æ²¡æœ‰è¢«ç¡®å®šï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥ç®—ä½œé€‚åˆè§†å›¾æ§åˆ¶å™¨çš„å®ä¾‹åŒ–é…åˆä¸€èµ·ä½¿ç”¨çš„ï¼Œå› ä¸ºæœ‰äº›éœ€è¦æ ¹æ®ç”¨æˆ·å–œå¥½æ¥è¿›è¡Œè®¾ç½®çš„å†…å®¹ï¼Œæ— æ³•å­˜åœ¨storyBoardæˆ–xibä¸­ï¼Œæ‰€ä»¥å¯ä»¥åœ¨awakeFromNibæ–¹æ³•ä¸­è¢«åŠ è½½è¿›æ¥ã€‚</p>
<h4 id="loadView"><a href="#loadView" class="headerlink" title="loadView"></a>loadView</h4><p>å½“æ‰§è¡Œåˆ°loadViewæ–¹æ³•æ—¶ï¼Œå¦‚æœè§†å›¾æ§åˆ¶å™¨æ˜¯é€šè¿‡nibåˆ›å»ºï¼Œé‚£ä¹ˆè§†å›¾æ§åˆ¶å™¨å·²ç»ä»nibæ–‡ä»¶ä¸­è¢«è§£æ¡£å¹¶åˆ›å»ºå¥½äº†ï¼Œæ¥ä¸‹æ¥ä»»åŠ¡å°±æ˜¯å¯¹viewè¿›è¡Œåˆå§‹åŒ–ã€‚</p>
<p>loadViewæ–¹æ³•åœ¨UIViewControllerå¯¹è±¡çš„viewè¢«è®¿é—®ä¸”ä¸ºç©ºçš„æ—¶å€™è°ƒç”¨ã€‚è¿™æ˜¯å®ƒä¸awakeFromNibæ–¹æ³•çš„ä¸€ä¸ªåŒºåˆ«ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬åœ¨å¤„ç†å†…å­˜è­¦å‘Šæ—¶é‡Šæ”¾viewå±æ€§ï¼šself.view = nilã€‚å› æ­¤loadViewæ–¹æ³•åœ¨è§†å›¾æ§åˆ¶å™¨çš„ç”Ÿå‘½å‘¨æœŸå†…å¯èƒ½è¢«è°ƒç”¨å¤šæ¬¡ã€‚</p>
<p>loadViewæ–¹æ³•ä¸åº”è¯¥ç›´æ¥è¢«è°ƒç”¨ï¼Œè€Œæ˜¯ç”±ç³»ç»Ÿè°ƒç”¨ï¼Œå®ƒä¼šåŠ è½½æˆ–åˆ›å»ºä¸€ä¸ªviewå¹¶æŠŠå®ƒèµ‹å€¼ç»™UIViewControllerçš„viewå±æ€§ã€‚</p>
<p>åœ¨åˆ›å»ºviewçš„è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆä¼šæ ¹æ®nibNameå»æ‰¾å¯¹åº”çš„nibæ–‡ä»¶ç„¶ååŠ è½½ã€‚å¦‚æœnibNameä¸ºç©ºæˆ–æ‰¾ä¸åˆ°å¯¹åº”çš„nibæ–‡ä»¶ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªç©ºè§†å›¾(è¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯çº¯ä»£ç )</p>
<p>æ³¨æ„:åœ¨é‡å†™loadViewæ–¹æ³•çš„æ—¶å€™ï¼Œä¸è¦è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ã€‚</p>
<h4 id="viewDidLoad"><a href="#viewDidLoad" class="headerlink" title="viewDidLoad"></a>viewDidLoad</h4><p>å½“loadViewå°†viewè½½å…¥å†…å­˜ä¸­ï¼Œä¼šè¿›ä¸€æ­¥è°ƒç”¨viewDidLoadæ–¹æ³•æ¥è¿›è¡Œè¿›ä¸€æ­¥è®¾ç½®ã€‚æ­¤æ—¶ï¼Œè§†å›¾å±‚æ¬¡å·²ç»æ”¾åˆ°å†…å­˜ä¸­ï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬å¯¹äºå„ç§åˆå§‹åŒ–æ•°æ®çš„è½½å…¥ï¼Œåˆå§‹è®¾å®šã€ä¿®æ”¹çº¦æŸã€ç§»é™¤è§†å›¾ç­‰å¾ˆå¤šæ“ä½œéƒ½å¯ä»¥è¿™ä¸ªæ–¹æ³•ä¸­å®ç°ã€‚</p>
<h4 id="viewWillAppear"><a href="#viewWillAppear" class="headerlink" title="viewWillAppear"></a>viewWillAppear</h4><p>ç³»ç»Ÿåœ¨è½½å…¥æ‰€æœ‰çš„æ•°æ®åï¼Œå°†ä¼šåœ¨å±å¹•ä¸Šæ˜¾ç¤ºè§†å›¾ï¼Œè¿™æ—¶ä¼šå…ˆè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šåœ¨è¿™ä¸ªæ–¹æ³•å¯¹å³å°†æ˜¾ç¤ºçš„è§†å›¾åšè¿›ä¸€æ­¥çš„è®¾ç½®ã€‚æ¯”å¦‚ï¼Œè®¾ç½®è®¾å¤‡ä¸åŒæ–¹å‘æ—¶è¯¥å¦‚ä½•æ˜¾ç¤ºï¼›è®¾ç½®çŠ¶æ€æ æ–¹å‘ã€è®¾ç½®è§†å›¾æ˜¾ç¤ºæ ·å¼ç­‰ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œå½“APPæœ‰å¤šä¸ªè§†å›¾æ—¶ï¼Œä¸Šä¸‹çº§è§†å›¾åˆ‡æ¢æ˜¯ä¹Ÿä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœåœ¨è°ƒå…¥è§†å›¾æ—¶ï¼Œéœ€è¦å¯¹æ•°æ®åšæ›´æ–°ï¼Œå°±åªèƒ½åœ¨è¿™ä¸ªæ–¹æ³•å†…å®ç°ã€‚</p>
<h4 id="viewWillLayoutSubviews"><a href="#viewWillLayoutSubviews" class="headerlink" title="viewWillLayoutSubviews"></a>viewWillLayoutSubviews</h4><p>viewå³å°†å¸ƒå±€å…¶Subviewsã€‚ æ¯”å¦‚viewçš„boundsæ”¹å˜äº†(ä¾‹å¦‚:çŠ¶æ€æ ä»ä¸æ˜¾ç¤ºåˆ°æ˜¾ç¤º,è§†å›¾æ–¹å‘å˜åŒ–)ï¼Œè¦è°ƒæ•´Subviewsçš„ä½ç½®ï¼Œåœ¨è°ƒæ•´ä¹‹å‰è¦åšçš„å·¥ä½œå¯ä»¥æ”¾åœ¨è¯¥æ–¹æ³•ä¸­å®ç°</p>
<h4 id="viewDidLayoutSubviews"><a href="#viewDidLayoutSubviews" class="headerlink" title="viewDidLayoutSubviews"></a>viewDidLayoutSubviews</h4><p>viewå·²ç»å¸ƒå±€å…¶Subviewsï¼Œè¿™é‡Œå¯ä»¥æ”¾ç½®è°ƒæ•´å®Œæˆä¹‹åéœ€è¦åšçš„å·¥ä½œã€‚</p>
<h4 id="viewDidAppear"><a href="#viewDidAppear" class="headerlink" title="viewDidAppear"></a>viewDidAppear</h4><p>åœ¨viewè¢«æ·»åŠ åˆ°è§†å›¾å±‚çº§ä¸­ä»¥åŠå¤šè§†å›¾ï¼Œä¸Šä¸‹çº§è§†å›¾åˆ‡æ¢æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™é‡Œå¯ä»¥å¯¹æ­£åœ¨æ˜¾ç¤ºçš„è§†å›¾åšè¿›ä¸€æ­¥çš„è®¾ç½®ã€‚</p>
<h4 id="viewWillDisappear"><a href="#viewWillDisappear" class="headerlink" title="viewWillDisappear"></a>viewWillDisappear</h4><p>åœ¨è§†å›¾åˆ‡æ¢æ—¶ï¼Œå½“å‰è§†å›¾åœ¨å³å°†è¢«ç§»é™¤ã€æˆ–è¢«è¦†ç›–æ˜¯ï¼Œä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰è°ƒç”¨removeFromSuperviewã€‚</p>
<h4 id="viewDidDisappear"><a href="#viewDidDisappear" class="headerlink" title="viewDidDisappear"></a>viewDidDisappear</h4><p>viewå·²ç»æ¶ˆå¤±æˆ–è¢«è¦†ç›–ï¼Œæ­¤æ—¶å·²ç»è°ƒç”¨removeFromSuperView;</p>
<h4 id="dealloc"><a href="#dealloc" class="headerlink" title="dealloc"></a>dealloc</h4><p>è§†å›¾è¢«é”€æ¯ï¼Œæ­¤æ¬¡éœ€è¦å¯¹ä½ åœ¨initå’ŒviewDidLoadä¸­åˆ›å»ºçš„å¯¹è±¡è¿›è¡Œé‡Šæ”¾ã€‚</p>
<h4 id="didReceiveMemoryWarning"><a href="#didReceiveMemoryWarning" class="headerlink" title="didReceiveMemoryWarning"></a>didReceiveMemoryWarning</h4><p>åœ¨å†…å­˜è¶³å¤Ÿçš„æƒ…å†µä¸‹ï¼Œappçš„è§†å›¾é€šå¸¸ä¼šä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä½†æ˜¯å¦‚æœå†…å­˜ä¸å¤Ÿï¼Œä¸€äº›æ²¡æœ‰æ­£åœ¨æ˜¾ç¤ºçš„viewControllerå°±ä¼šæ”¶åˆ°å†…å­˜ä¸è¶³çš„è­¦å‘Šï¼Œç„¶åå°±ä¼šé‡Šæ”¾è‡ªå·±æ‹¥æœ‰çš„è§†å›¾ï¼Œä»¥è¾¾åˆ°é‡Šæ”¾å†…å­˜çš„ç›®çš„ã€‚ä½†æ˜¯ç³»ç»Ÿåªä¼šé‡Šæ”¾å†…å­˜ï¼Œå¹¶ä¸ä¼šé‡Šæ”¾å¯¹è±¡çš„æ‰€æœ‰æƒï¼Œæ‰€ä»¥é€šå¸¸æˆ‘ä»¬éœ€è¦åœ¨è¿™é‡Œå°†ä¸éœ€è¦æ˜¾ç¤ºåœ¨å†…å­˜ä¸­ä¿ç•™çš„å¯¹è±¡é‡Šæ”¾å®ƒçš„æ‰€æœ‰æƒï¼Œå°†å…¶æŒ‡é’ˆç½®nilã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> iOSåŸºç¡€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[c/c++æŒ‡é’ˆé—®é¢˜æ±‡æ€»]]></title>
      <url>/2015/07/09/2015/c-c-%E6%8C%87%E9%92%88%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</url>
      <content type="html"><![CDATA[<h3 id="1"><a href="#1" class="headerlink" title="1"></a>1</h3><p>char <em> const p;<br>char const </em> p<br>const char *p</p>
<a id="more"></a>
<p>ä¸Šè¿°ä¸‰ä¸ªæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>char <em> const p; //å¸¸é‡æŒ‡é’ˆï¼Œpçš„å€¼ä¸å¯ä»¥ä¿®æ”¹<br>char const </em> pï¼›//æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆï¼ŒæŒ‡å‘çš„å¸¸é‡å€¼ä¸å¯ä»¥æ”¹<br>const char <em>pï¼› //å’Œchar const </em>p</p>
<h3 id="2"><a href="#2" class="headerlink" title="2"></a>2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">char str1[] = â€œabcâ€;</div><div class="line">char str2[] = â€œabcâ€;</div><div class="line"></div><div class="line">const char str3[] = â€œabcâ€;</div><div class="line">const char str4[] = â€œabcâ€;</div><div class="line"></div><div class="line">const char *str5 = â€œabcâ€;</div><div class="line">const char *str6 = â€œabcâ€;</div><div class="line"></div><div class="line">char *str7 = â€œabcâ€;</div><div class="line">char *str8 = â€œabcâ€;</div><div class="line"></div><div class="line">cout &lt;&lt; ( str1 == str2 ) &lt;&lt; endl;</div><div class="line">cout &lt;&lt; ( str3 == str4 ) &lt;&lt; endl;</div><div class="line">cout &lt;&lt; ( str5 == str6 ) &lt;&lt; endl;</div><div class="line"></div><div class="line">cout &lt;&lt; ( str7 == str8 ) &lt;&lt; endl;</div></pre></td></tr></table></figure>
<p>æ‰“å°ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">è§£ç­”ï¼šç»“æœæ˜¯ï¼š0 0 1 1</div><div class="line">str1,str2,str3,str4æ˜¯æ•°ç»„å˜é‡ï¼Œå®ƒä»¬æœ‰å„è‡ªçš„å†…å­˜ç©ºé—´ï¼›è€Œstr5,str6,str7,str8æ˜¯æŒ‡é’ˆï¼Œå®ƒä»¬æŒ‡å‘ç›¸åŒçš„å¸¸é‡åŒºåŸŸ</div></pre></td></tr></table></figure>
<p>###3</p>
<p>ä»¥ä¸‹ä»£ç ä¸­çš„ä¸¤ä¸ªsizeofç”¨æ³•æœ‰é—®é¢˜å—ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">void UpperCase( char str[] ) // å°† str ä¸­çš„å°å†™å­—æ¯è½¬æ¢æˆå¤§å†™å­—æ¯</div><div class="line">&#123;</div><div class="line">for( size_t i=0; i&lt;sizeof(str)/sizeof(str[0]); ++i )</div><div class="line">if( â€˜aâ€™&lt;=str[i] &amp;&amp; str[i]&lt;=â€™zâ€™ )</div><div class="line">str[i] -= (â€˜aâ€™-&apos;Aâ€™ );</div><div class="line">&#125;</div><div class="line"></div><div class="line">char str[] = â€œaBcDeâ€;</div><div class="line">cout &lt;&lt; â€œstrå­—ç¬¦é•¿åº¦ä¸º: â€ &lt;&lt; sizeof(str)/sizeof(str[0]) &lt;&lt; endl;</div><div class="line">UpperCase( str );</div><div class="line">cout &lt;&lt; str &lt;&lt; endl;</div></pre></td></tr></table></figure>
<p>ç­”ï¼šå‡½æ•°å†…çš„sizeofæœ‰é—®é¢˜ã€‚<br>æ ¹æ®è¯­æ³•ï¼Œsizeofå¦‚ç”¨äºæ•°ç»„ï¼Œåªèƒ½æµ‹å‡ºé™æ€æ•°ç»„çš„å¤§å°ï¼Œæ— æ³•æ£€æµ‹åŠ¨æ€åˆ†é…çš„æˆ–å¤–éƒ¨æ•°ç»„å¤§å°ã€‚<br>å‡½æ•°å¤–çš„stræ˜¯ä¸€ä¸ªé™æ€å®šä¹‰çš„æ•°ç»„ï¼Œå› æ­¤å…¶å¤§å°ä¸º6ï¼Œ<br>å‡½æ•°å†…çš„strå®é™…åªæ˜¯ä¸€ä¸ªæŒ‡å‘å­—ç¬¦ä¸²çš„æŒ‡é’ˆï¼Œæ²¡æœ‰ä»»ä½•é¢å¤–çš„ä¸æ•°ç»„ç›¸å…³çš„ä¿¡æ¯ï¼Œå› æ­¤sizeofä½œç”¨äºä¸Šåªå°†å…¶å½“æŒ‡é’ˆçœ‹ï¼Œä¸€ä¸ªæŒ‡é’ˆä¸º4ä¸ªå­—èŠ‚ï¼Œå› æ­¤è¿”å›4ã€‚</p>
<h3 id="4"><a href="#4" class="headerlink" title="4"></a>4</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">main()</div><div class="line">&#123;</div><div class="line">int a[5]=&#123;1,2,3,4,5&#125;;</div><div class="line">int *ptr=(int *)(&amp;a+1);</div><div class="line">printf(â€œ%d,%dâ€,*(a+1),*(ptr-1));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ç­”æ¡ˆï¼šè¾“å‡ºï¼š2,5</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">*(a+1ï¼‰å°±æ˜¯a[1]ï¼Œ*(ptr-1)å°±æ˜¯a[4],æ‰§è¡Œç»“æœæ˜¯2ï¼Œ5</div><div class="line">&amp;a+1ä¸æ˜¯é¦–åœ°å€+1ï¼Œç³»ç»Ÿä¼šè®¤ä¸ºåŠ ä¸€ä¸ªaæ•°ç»„çš„åç§»ï¼Œæ˜¯åç§»äº†ä¸€ä¸ªæ•°ç»„çš„å¤§å°ï¼ˆæœ¬ä¾‹æ˜¯5ä¸ªintï¼‰</div><div class="line">int *ptr=(int *)(&amp;a+1);</div><div class="line">åˆ™ptrå®é™…æ˜¯&amp;(a[5]),ä¹Ÿå°±æ˜¯a+5</div><div class="line"></div><div class="line">åŸå› å¦‚ä¸‹ï¼š</div><div class="line"></div><div class="line">&amp;aæ˜¯æ•°ç»„æŒ‡é’ˆï¼Œå…¶ç±»å‹ä¸º int (*)[5];</div><div class="line">è€ŒæŒ‡é’ˆåŠ 1è¦æ ¹æ®æŒ‡é’ˆç±»å‹åŠ ä¸Šä¸€å®šçš„å€¼ï¼Œä¸åŒç±»å‹çš„æŒ‡é’ˆ+1ä¹‹åå¢åŠ çš„å¤§å°ä¸åŒã€‚</div><div class="line">aæ˜¯é•¿åº¦ä¸º5çš„intæ•°ç»„æŒ‡é’ˆï¼Œæ‰€ä»¥è¦åŠ  5*sizeof(int)</div><div class="line">æ‰€ä»¥ptrå®é™…æ˜¯a[5]</div><div class="line">ä½†æ˜¯prtä¸(&amp;a+1)ç±»å‹æ˜¯ä¸ä¸€æ ·çš„(è¿™ç‚¹å¾ˆé‡è¦)</div><div class="line">æ‰€ä»¥prt-1åªä¼šå‡å»sizeof(int*)</div><div class="line"></div><div class="line">a,&amp;açš„åœ°å€æ˜¯ä¸€æ ·çš„ï¼Œä½†æ„æ€ä¸ä¸€æ ·</div><div class="line">aæ˜¯æ•°ç»„é¦–åœ°å€ï¼Œä¹Ÿå°±æ˜¯a[0]çš„åœ°å€ï¼Œ&amp;aæ˜¯å¯¹è±¡ï¼ˆæ•°ç»„ï¼‰é¦–åœ°å€ï¼Œ</div><div class="line">a+1æ˜¯æ•°ç»„ä¸‹ä¸€å…ƒç´ çš„åœ°å€ï¼Œå³a[1],&amp;a+1æ˜¯ä¸‹ä¸€ä¸ªå¯¹è±¡çš„åœ°å€ï¼Œå³a[5].</div></pre></td></tr></table></figure>
<h3 id="5"><a href="#5" class="headerlink" title="5"></a>5</h3><p>è¯·é—®ä»¥ä¸‹ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">int  main()</div><div class="line">&#123;</div><div class="line">char a;</div><div class="line">char *str=&amp;a;</div><div class="line">strcpy(str,â€helloâ€);</div><div class="line">printf(str);</div><div class="line">return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç­”æ¡ˆï¼šæ²¡æœ‰ä¸ºstråˆ†é…å†…å­˜ç©ºé—´ï¼Œå°†ä¼šå‘ç”Ÿå¼‚å¸¸ã€‚é—®é¢˜å‡ºåœ¨å°†ä¸€ä¸ªå­—ç¬¦ä¸²å¤åˆ¶è¿›ä¸€ä¸ªå­—ç¬¦å˜é‡æŒ‡é’ˆæ‰€æŒ‡åœ°å€ã€‚è™½ç„¶å¯ä»¥æ­£ç¡®è¾“å‡ºç»“æœï¼Œä½†å› ä¸ºè¶Šç•Œè¿›è¡Œå†…åœ¨è¯»å†™è€Œå¯¼è‡´ç¨‹åºå´©æºƒã€‚</p>
<h3 id="6"><a href="#6" class="headerlink" title="6"></a>6</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">char* s=â€AAAâ€;</div><div class="line">printf(â€œ%sâ€,s);</div><div class="line">s[0]=â€™B&apos;;</div><div class="line">printf(â€œ%sâ€,s);</div></pre></td></tr></table></figure>
<p>æœ‰ä»€ä¹ˆé”™ï¼Ÿ</p>
<p>ç­”æ¡ˆï¼š<br>â€œAAAâ€æ˜¯å­—ç¬¦ä¸²å¸¸é‡ã€‚sæ˜¯æŒ‡é’ˆï¼ŒæŒ‡å‘è¿™ä¸ªå­—ç¬¦ä¸²å¸¸é‡ï¼Œæ‰€ä»¥å£°æ˜sçš„æ—¶å€™å°±æœ‰é—®é¢˜ã€‚<br>cosnt char* s=â€AAAâ€;<br>ç„¶ååˆå› ä¸ºæ˜¯å¸¸é‡ï¼Œæ‰€ä»¥å¯¹æ˜¯s[0]çš„èµ‹å€¼æ“ä½œæ˜¯ä¸åˆæ³•çš„ã€‚</p>
<h3 id="7"><a href="#7" class="headerlink" title="7"></a>7</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">int (*s[10])(int) è¡¨ç¤ºçš„æ˜¯ä»€ä¹ˆï¼Ÿ</div><div class="line"></div><div class="line">ç­”æ¡ˆï¼šint (*s[10])(int) å‡½æ•°æŒ‡é’ˆæ•°ç»„ï¼Œæ¯ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªint func(int param)çš„å‡½æ•°ã€‚</div></pre></td></tr></table></figure>
<h3 id="8"><a href="#8" class="headerlink" title="8"></a>8</h3><p>æœ‰ä»¥ä¸‹è¡¨è¾¾å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">int a=248; b=4;</div><div class="line">int const c=21;</div><div class="line">const int *d=&amp;a;</div><div class="line">int *const e=&amp;b;</div><div class="line">int const *f const =&amp;a;</div></pre></td></tr></table></figure>
<p>è¯·é—®ä¸‹åˆ—è¡¨è¾¾å¼å“ªäº›ä¼šè¢«ç¼–è¯‘å™¨ç¦æ­¢ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ<br><em>c=32;d=&b;</em>d=43;e=34;e=&a;f=0x321f;</p>
<p>ç­”æ¡ˆï¼š<br><em>c è¿™æ˜¯ä¸ªä»€ä¹ˆä¸œä¸œï¼Œç¦æ­¢
</em>d è¯´äº†æ˜¯constï¼Œ ç¦æ­¢<br>e = &amp;a è¯´äº†æ˜¯const ç¦æ­¢<br>const *f const =&a; ç¦æ­¢<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<h3 id="9"><a href="#9" class="headerlink" title="9"></a>9</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">#include &lt;stdlib.h&gt;</div><div class="line"></div><div class="line">void getmemory(char *p)</div><div class="line">&#123; </div><div class="line">p=(char *) malloc(100);</div><div class="line">strcpy(p,â€hello worldâ€);</div><div class="line">&#125; </div><div class="line"></div><div class="line">int main( )</div><div class="line">&#123;</div><div class="line">char *str=NULL;</div><div class="line">getmemory(str);</div><div class="line">printf(â€œ%s/nâ€,str);</div><div class="line">free(str);</div><div class="line">return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åˆ†æä¸€ä¸‹è¿™æ®µä»£ç </p>
<p>ç­”æ¡ˆï¼šç¨‹åºå´©æºƒï¼Œgetmemoryä¸­çš„malloc ä¸èƒ½è¿”å›åŠ¨æ€å†…å­˜ï¼Œ freeï¼ˆï¼‰å¯¹stræ“ä½œå¾ˆå±é™©</p>
<p>åšä¸»ï¼šgetmemoryä¸­pæ˜¯å½¢å‚ï¼Œæ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼Œgetmemory(str)è°ƒç”¨åï¼Œä¼ å…¥çš„æ˜¯æŒ‡é’ˆå˜é‡ä¿å­˜çš„å¯¹è±¡åœ°å€ï¼Œp=(char <em>) malloc(100)å®é™…ä¸Šæ˜¯æŠŠç”³è¯·çš„åŠ¨æ€å†…å­˜ç©ºé—´çš„é¦–åœ°å€ä»˜ç»™pæŒ‡å‘çš„åœ°å€ï¼ˆå³stræŒ‡å‘çš„åœ°å€nullï¼‰ï¼Œè¿™ä¸ªæ˜¯é”™è¯¯çš„ã€‚åº”è¯¥ä¿®æ”¹æˆæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆvoid getmemory(char **p)ï¼Œè¿™æ ·mallocè¿”å›çš„åœ°å€ä»˜ç»™</em>pï¼ˆå³strå˜é‡æœ¬èº«ï¼‰ã€‚</p>
<h3 id="10"><a href="#10" class="headerlink" title="10"></a>10</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">char szstr[10];</div><div class="line">strcpy(szstr,â€0123456789â€³);</div></pre></td></tr></table></figure>
<p>äº§ç”Ÿä»€ä¹ˆç»“æœï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>ç­”æ¡ˆï¼šé•¿åº¦ä¸ä¸€æ ·ï¼Œä¼šé€ æˆéæ³•çš„OSï¼Œå­—ç¬¦ä¸²æœ€åä¸€ä¸ªæ˜¯â€™\0â€™æ‰€ä»¥ä¸Šè¾¹åº”è¯¥æ˜¯11</p>
<h3 id="11"><a href="#11" class="headerlink" title="11"></a>11</h3><p>è¦å¯¹ç»å¯¹åœ°å€0Ã—100000èµ‹å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨(unsigned int*)0Ã—100000 = 1234;<br>é‚£ä¹ˆè¦æ˜¯æƒ³è®©ç¨‹åºè·³è½¬åˆ°ç»å¯¹åœ°å€æ˜¯0Ã—100000å»æ‰§è¡Œï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿ</p>
<p>ç­”æ¡ˆï¼š<em>((void (</em>)( ))0Ã—100000 ) ( );<br>é¦–å…ˆè¦å°†0Ã—100000å¼ºåˆ¶è½¬æ¢æˆå‡½æ•°æŒ‡é’ˆ,å³:<br>(void (<em>)())0Ã—100000<br>ç„¶åå†è°ƒç”¨å®ƒ:
</em>((void (<em>)())0Ã—100000)();<br>ç”¨typedefå¯ä»¥çœ‹å¾—æ›´ç›´è§‚äº›:<br>typedef void(</em>)() voidFuncPtr;<br>*((voidFuncPtr)0Ã—100000)();<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<h3 id="12"><a href="#12" class="headerlink" title="12"></a>12</h3><p>åˆ†æä¸‹é¢çš„ç¨‹åºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">void GetMemory(char **p,int num)</div><div class="line">&#123;                          //pï¼ŒæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆï¼Œ*pï¼ŒpæŒ‡å‘çš„æŒ‡é’ˆ(å³str)ï¼Œ**pï¼Œæœ€ç»ˆçš„å¯¹è±¡ï¼ŒstræŒ‡å‘çš„å•å…ƒ</div><div class="line">*p=(char *)malloc(num);  //ç”³è¯·ç©ºé—´é¦–åœ°å€ä»˜ç»™ä¼ å…¥çš„è¢«pæŒ‡å‘çš„æŒ‡é’ˆï¼Œå³str</div><div class="line">&#125; </div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">char *str=NULL;</div><div class="line">GetMemory(&amp;str,100);   //ä¼ å…¥æŒ‡é’ˆå˜é‡æœ¬èº«çš„åœ°å€</div><div class="line">strcpy(str,â€helloâ€);</div><div class="line">free(str);</div><div class="line"></div><div class="line">if(str!=NULL)</div><div class="line">&#123;</div><div class="line">strcpy(str,â€worldâ€);</div><div class="line">&#125; </div><div class="line"></div><div class="line">printf(â€œ\n str is %sâ€,str); è½¯ä»¶å¼€å‘ç½‘ www.mscto.com</div><div class="line">getchar();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é—®è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ç­”æ¡ˆï¼šè¾“å‡ºstr is worldã€‚</p>
<p>free åªæ˜¯é‡Šæ”¾çš„stræŒ‡å‘çš„å†…å­˜ç©ºé—´,å®ƒæœ¬èº«çš„å€¼è¿˜æ˜¯å­˜åœ¨çš„.æ‰€ä»¥freeä¹‹åï¼Œæœ‰ä¸€ä¸ªå¥½çš„ä¹ æƒ¯å°±æ˜¯å°†str=NULL.<br>æ­¤æ—¶stræŒ‡å‘ç©ºé—´çš„å†…å­˜å·²è¢«å›æ”¶,å¦‚æœè¾“å‡ºè¯­å¥ä¹‹å‰è¿˜å­˜åœ¨åˆ†é…ç©ºé—´çš„æ“ä½œçš„è¯,è¿™æ®µå­˜å‚¨ç©ºé—´æ˜¯å¯èƒ½è¢«é‡æ–°åˆ†é…ç»™å…¶ä»–å˜é‡çš„,<br>å°½ç®¡è¿™æ®µç¨‹åºç¡®å®æ˜¯å­˜åœ¨å¤§å¤§çš„é—®é¢˜ï¼ˆä¸Šé¢å„ä½å·²ç»è¯´å¾—å¾ˆæ¸…æ¥šäº†ï¼‰ï¼Œä½†æ˜¯é€šå¸¸ä¼šæ‰“å°å‡ºworldæ¥ã€‚<br>è¿™æ˜¯å› ä¸ºï¼Œè¿›ç¨‹ä¸­çš„å†…å­˜ç®¡ç†ä¸€èˆ¬ä¸æ˜¯ç”±æ“ä½œç³»ç»Ÿå®Œæˆçš„ï¼Œè€Œæ˜¯ç”±åº“å‡½æ•°è‡ªå·±å®Œæˆçš„ã€‚</p>
<p>å½“ä½ mallocä¸€å—å†…å­˜çš„æ—¶å€™ï¼Œç®¡ç†åº“å‘æ“ä½œç³»ç»Ÿç”³è¯·ä¸€å—ç©ºé—´ï¼ˆå¯èƒ½ä¼šæ¯”ä½ ç”³è¯·çš„å¤§ä¸€äº›ï¼‰ï¼Œç„¶ååœ¨è¿™å—ç©ºé—´ä¸­è®°å½•ä¸€äº›ç®¡ç†ä¿¡æ¯ï¼ˆä¸€èˆ¬æ˜¯åœ¨ä½ ç”³è¯·çš„å†…å­˜ å‰é¢ä¸€ç‚¹ï¼‰ï¼Œå¹¶å°†å¯ç”¨å†…å­˜çš„åœ°å€è¿”å›ã€‚ä½†æ˜¯é‡Šæ”¾å†…å­˜çš„æ—¶å€™ï¼Œç®¡ç†åº“é€šå¸¸éƒ½ä¸ä¼šå°†å†…å­˜è¿˜ç»™æ“ä½œç³»ç»Ÿï¼Œå› æ­¤ä½ æ˜¯å¯ä»¥ç»§ç»­è®¿é—®è¿™å—åœ°å€çš„ã€‚</p>
<h3 id="13"><a href="#13" class="headerlink" title="13"></a>13</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">char a[10]ï¼›</div><div class="line">strlen(a)ä¸ºä»€ä¹ˆç­‰äº15ï¼Ÿ</div><div class="line"></div><div class="line">#include â€œstdio.hâ€</div><div class="line">#include â€œstring.hâ€</div><div class="line"></div><div class="line">void main()</div><div class="line">&#123;</div><div class="line">char aa[10];</div><div class="line">printf(â€œ%dâ€,strlen(aa));</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç­”æ¡ˆï¼šsizeof()å’Œåˆä¸åˆå§‹åŒ–ï¼Œæ²¡æœ‰å…³ç³»ï¼›<br>strlen()å’Œåˆå§‹åŒ–æœ‰å…³ã€‚</p>
<h3 id="14"><a href="#14" class="headerlink" title="14"></a>14</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">char (*str)[20];/*stræ˜¯ä¸€ä¸ªæ•°ç»„æŒ‡é’ˆï¼Œå³æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼*/</div><div class="line">char *str[20];/*stræ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œå…¶å…ƒç´ ä¸ºæŒ‡é’ˆå‹æ•°æ®ï¼*/</div></pre></td></tr></table></figure>
<h3 id="15"><a href="#15" class="headerlink" title="15"></a>15</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">#include&lt;iostream.h&gt;</div><div class="line">#include &lt;string.h&gt;</div><div class="line">#include &lt;malloc.h&gt;</div><div class="line">#include &lt;stdio.h&gt;</div><div class="line">#include &lt;stdlib.h&gt;</div><div class="line">#include &lt;memory.h&gt;</div><div class="line"></div><div class="line">typedef struct  AA</div><div class="line">&#123;</div><div class="line">int b1:5;</div><div class="line">int b2:2;</div><div class="line">&#125;AA;</div><div class="line"></div><div class="line">void main()</div><div class="line">&#123;</div><div class="line">AA aa;</div><div class="line">char cc[100];</div><div class="line">strcpy(cc,â€0123456789abcdefghijklmnopqrstuvwxyzâ€);</div><div class="line">memcpy(&amp;aa,cc,sizeof(AA));</div><div class="line">cout &lt;&lt; aa.b1 &lt;&lt;endl;</div><div class="line">cout &lt;&lt; aa.b2 &lt;&lt;endl;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœæ˜¯å¤šå°‘ï¼Ÿ</p>
<p>ç­”æ¡ˆï¼š-16å’Œï¼‘</p>
<p>é¦–å…ˆsizeof(AA)çš„å¤§å°ä¸º4,b1å’Œb2åˆ†åˆ«å 5bitå’Œ2bit.ç»è¿‡strcpyå’Œmemcpyå,aaçš„4ä¸ªå­—èŠ‚æ‰€å­˜æ”¾çš„å€¼æ˜¯: 0,1,2,3çš„ASCç ï¼Œå³00110000,00110001,00110010,00110011æ‰€ä»¥ï¼Œæœ€åä¸€æ­¥ï¼šæ˜¾ç¤ºçš„æ˜¯è¿™ï¼”ä¸ªå­—èŠ‚çš„å‰ï¼•ä½ï¼Œå’Œ ä¹‹åçš„ï¼’ä½åˆ†åˆ«ä¸ºï¼š10000,å’Œ01ï¼Œå› ä¸ºintæ˜¯æœ‰æ­£è´Ÿä¹‹åˆ†</p>
<h3 id="16"><a href="#16" class="headerlink" title="16"></a>16</h3><p>è¯•é¢˜ä¸‰ï¼š  ä»¥ä¸‹ä»£ç æœ‰å“ªäº›é”™è¯¯æˆ–ä¸è¶³ä¹‹å¤„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">void GetMemory( char **p, int num )</div><div class="line"></div><div class="line">&#123;</div><div class="line"></div><div class="line">ã€€*p = (char *) malloc( num );</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line">void Test( void )</div><div class="line"></div><div class="line">&#123;</div><div class="line"></div><div class="line">ã€€char *str = NULL;</div><div class="line"></div><div class="line">ã€€GetMemory( &amp;str, 100 );</div><div class="line"></div><div class="line">ã€€strcpy( str, &quot;hello&quot; );</div><div class="line"></div><div class="line">ã€€printf( str );</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è§£ç­”ï¼š</p>
<p>å­˜åœ¨2å¤„é—®é¢˜ï¼š</p>
<p>æœ¬é¢˜ä¸­çš„Testå‡½æ•°ä¸­æœªå¯¹mallocçš„å†…å­˜è¿›è¡Œé‡Šæ”¾ã€‚</p>
<p>æœ¬é¢˜ä¸­çš„GetMemoryé¿å…äº†è¯•é¢˜ä¸€çš„é—®é¢˜ï¼Œä¼ å…¥GetMemoryçš„å‚æ•°ä¸ºå­—ç¬¦ä¸²æŒ‡é’ˆçš„æŒ‡é’ˆï¼Œä½†æ˜¯åœ¨GetMemoryä¸­æ‰§è¡Œç”³è¯·å†…å­˜åŠèµ‹å€¼è¯­å¥</p>
<p><em>p = (char </em>) malloc( num );</p>
<p>åæœªåˆ¤æ–­å†…å­˜æ˜¯å¦ç”³è¯·æˆåŠŸï¼Œåº”åŠ ä¸Šï¼š</p>
<p>if ( *p == NULL )</p>
<p>{</p>
<p>ã€€â€¦//è¿›è¡Œç”³è¯·å†…å­˜å¤±è´¥å¤„ç†</p>
<p>}</p>
<h3 id="17"><a href="#17" class="headerlink" title="17"></a>17</h3><p>è¯•é¢˜å››ï¼šæ‰¾å‡ºä¸‹é¢ä»£ç çš„ä¸è¶³æˆ–é”™è¯¯ä¹‹å¤„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">void Test( void )</div><div class="line"></div><div class="line">&#123;</div><div class="line"></div><div class="line">ã€€char *str = (char *) malloc( 100 );</div><div class="line"></div><div class="line">ã€€strcpy( str, &quot;hello&quot; );</div><div class="line"></div><div class="line">ã€€free( str );</div><div class="line"></div><div class="line">ã€€... //çœç•¥çš„å…¶å®ƒè¯­å¥</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è§£ç­”ï¼š</p>
<p>å­˜åœ¨2å¤„é—®é¢˜ï¼š</p>
<p>è¯•é¢˜å››å­˜åœ¨ä¸è¯•é¢˜ä¸‰åŒæ ·çš„é—®é¢˜ï¼Œåœ¨æ‰§è¡Œchar <em>str = (char </em>) malloc(100);</p>
<p>åæœªè¿›è¡Œå†…å­˜æ˜¯å¦ç”³è¯·æˆåŠŸçš„åˆ¤æ–­ï¼›</p>
<p>å¦å¤–ï¼Œåœ¨free(str)åæœªç½®strä¸ºç©ºï¼Œå¯¼è‡´å¯èƒ½å˜æˆä¸€ä¸ªâ€œé‡â€æŒ‡é’ˆï¼Œåº”åŠ ä¸Šï¼š</p>
<p>str = NULL;</p>
<p>18     åˆ¤æ–­è¾“å‡ºæ˜¯ä¹±ç   è¿˜æ˜¯å­—ç¬¦æˆ–æ˜¯å­—ç¬¦ä¸²  è¿˜æ˜¯è¡¨ç¤ºåœ°å€å€¼ ï¼Ÿ å¦‚æœæ˜¯åœ°å€å€¼å°±ç”¨0xF1247000ä»£è¡¨</p>
<p>.charç±»å‹æŒ‡é’ˆçš„è¾“å‡º</p>
<p>  æ ‡å‡†åº“coutè¾“å‡ºæ—¶ï¼Œæ— æ³•åˆ¤æ–­æŒ‡é’ˆçš„ç±»å‹ï¼Œå¦‚ä¸‹é¢ç¨‹åºæ‰€ç¤ºï¼š<br>char ch = â€˜aâ€™;<br>int num = 1;<br>char <em>pch = &ch;<br>int </em>pnum = &num;<br>std::cout&lt;&lt;pch&lt;&lt;std::endl; //è¾“å‡ºï¼šä¹±ç <br>std::cout&lt;&lt;(void<em>)pch&lt;&lt;std::endl;   //è¾“å‡ºï¼š0xF1247000<br>std::cout&lt;&lt;pnum&lt;&lt;std::endl;//è¾“å‡ºï¼š0xF1247004<br>std::cout&lt;&lt;(void</em>)pnum&lt;&lt;std::endl;   //è¾“å‡ºï¼š0xF12470004</p>
<p>char <em>pch2=â€Helloâ€;<br>std::cout&lt;&lt;pch2&lt;&lt;std::endl;//è¾“å‡ºï¼šHello<br>std::cout&lt;&lt;(void</em>)pch2&lt;&lt;std::endl;//è¾“å‡ºï¼š16è¿›åˆ¶åœ°å€</p>
<p>  å¯¹äºå­—ç¬¦å‹æŒ‡é’ˆï¼Œè¦ç”¨void*è¿›è¡Œç±»å‹è½¬æ¢åï¼Œæ‰èƒ½è¾“å‡ºå…¶åœ°å€ï¼Œåœ°å€ä»¥16è¿›åˆ¶æ•°çš„æ ¼å¼æ˜¾ç¤º32ä½åœ°å€å€¼ã€‚è‹¥ä¸è¿›è¡Œè½¬æ¢ï¼Œcoutä¼šæŒ‰ç…§charç±»å‹è§£ææŒ‡é’ˆå†…å®¹ã€‚è‹¥æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œæ²¡æœ‰â€™\0â€™ç»“æŸç¬¦ï¼Œè¾“å‡ºä¹±ç ï¼›è‹¥æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™è¾“å‡ºå­—ç¬¦ä¸²å†…å®¹ã€‚<br>  é™¤äº†å­—ç¬¦æŒ‡é’ˆï¼Œå…¶ä»–æŒ‡é’ˆéƒ½å¯ä»¥ç›´æ¥ç”¨coutè¯­å¥æ¥è¾“å‡ºåœ°å€å€¼ã€‚æ— é¡»è¿›è¡ŒæŒ‡é’ˆç±»å‹è½¬æ¢ã€‚</p>
<p>19   æŒ‡é’ˆä¸å¼•ç”¨çš„åŒºåˆ«ï¼Ÿ</p>
<p>ç­”æ¡ˆï¼š</p>
<p>ï¼ˆ1ï¼‰éç©ºåŒºåˆ«ã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸èƒ½ä½¿ç”¨æŒ‡å‘ç©ºå€¼çš„å¼•ç”¨ã€‚å› æ­¤å¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªå˜é‡å¹¶è®©å®ƒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯è¯¥å˜é‡åœ¨æŸäº›æ—¶å€™ä¹Ÿå¯èƒ½ä¸æŒ‡å‘ä»»ä½•å¯¹è±¡ï¼Œè¿™æ—¶ä½ åº”è¯¥æŠŠå˜é‡å£°æ˜ä¸ºæŒ‡é’ˆï¼Œå› ä¸ºè¿™æ ·ä½ å¯ä»¥èµ‹ç©ºå€¼ç»™è¯¥å˜é‡ã€‚ç›¸åï¼Œå¦‚æœå˜é‡è‚¯å®šæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œä¾‹å¦‚ä½ çš„è®¾è®¡ä¸å…è®¸å˜é‡ä¸ºç©ºï¼Œè¿™æ—¶ä½ å°±å¯ä»¥æŠŠå˜é‡å£°æ˜ä¸ºå¼•ç”¨ã€‚ä¸å­˜åœ¨æŒ‡å‘ç©ºå€¼çš„å¼•ç”¨è¿™ä¸ªäº‹å®æ„å‘³ç€ä½¿ç”¨å¼•ç”¨çš„ä»£ç æ•ˆç‡æ¯”ä½¿ç”¨æŒ‡é’ˆè¦é«˜ã€‚</p>
<p>ï¼ˆ2ï¼‰åˆæ³•æ€§åŒºåˆ«ã€‚åœ¨ä½¿ç”¨å¼•ç”¨ä¹‹å‰ä¸éœ€è¦æµ‹è¯•å®ƒçš„åˆæ³•æ€§ã€‚ç›¸åï¼ŒæŒ‡é’ˆåˆ™åº”è¯¥æ€»æ˜¯è¢«æµ‹è¯•ï¼Œé˜²æ­¢å…¶ä¸ºç©ºã€‚</p>
<p>ï¼ˆ3ï¼‰å¯ä¿®æ”¹åŒºåˆ«ã€‚æŒ‡é’ˆä¸å¼•ç”¨çš„å¦ä¸€ä¸ªé‡è¦çš„åŒºåˆ«æ˜¯æŒ‡é’ˆå¯ä»¥è¢«é‡æ–°èµ‹å€¼ä»¥æŒ‡å‘å¦ä¸€ä¸ªä¸åŒå¯¹è±¡ã€‚ä½†æ˜¯å¼•ç”¨åˆ™æ€»æ˜¯æŒ‡å‘åœ¨åˆå§‹åŒ–æ—¶è¢«æŒ‡å®šçš„å¯¹è±¡ï¼Œä»¥åä¸èƒ½æ”¹å˜ï¼Œä½†æ˜¯æŒ‡å®šçš„å¯¹è±¡å…¶å†…å®¹å¯ä»¥æ”¹å˜ã€‚</p>
<p>æ€è·¯ï¼š   é‡åˆ°æ¬¡ç±»å‹çš„é¢˜ç›® ä¸€å®šè¦æƒ³æƒ³ä»–ä»¬çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆ æŠ“ä½ç‰¹ç‚¹è¿›è¡Œåˆ†æ        æƒ³æƒ³ä»–ä»¬çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆ   è¿›è¡Œæ¯”è¾ƒ</p>
<p>20ï¼š</p>
<p>ä¸‹é¢5ä¸ªå‡½æ•°å“ªä¸ªèƒ½æˆåŠŸè¿›è¡Œä¸¤ä¸ªæ•°çš„äº¤æ¢ï¼Ÿ</p>
<p>#include<iostream><br>using namespace std;</iostream></p>
<p>void swap1(int p,int q)<br>{<br>    int temp;<br>    temp=p;<br>    p=q;<br>    q=temp;<br>}</p>
<p>void swap2(int <em>p,int </em>q)<br>{<br>    int <em>temp;
    </em>temp=<em>p;
    </em>p=<em>q;
    </em>q=*temp;<br>}</p>
<p>void swap3(int <em>p,int </em>q)<br>{<br>    int *temp;<br>    temp=p;<br>    p=q;<br>    q=temp;<br>}</p>
<p>void swap4(int <em>p,int </em>q)<br>{<br>    int temp;<br>    temp=<em>p;
    </em>p=<em>q;
    </em>q=temp;<br>}</p>
<p>void swap5(int &amp;p,int &amp;q)<br>{<br>    int temp;<br>    temp=p;<br>    p=q;<br>    q=temp;<br>}</p>
<p>int main ()<br>{<br>    int a=1,b=2;<br>    //swap1(a,b);<br>    //swap2(&amp;a,&amp;b);<br>    //swap3(&amp;a,&amp;b);<br>    //swap4(&amp;a,&amp;b);<br>    //swap5(a,b);<br>    cout &lt;&lt; â€œa:â€&lt;&lt; a &lt;&lt;endl;<br>    cout &lt;&lt; â€œb:â€&lt;&lt; b &lt;&lt;endl;</p>
<pre><code>return 0;
</code></pre><p>}</p>
<p>è§£æï¼šè¿™é“é¢˜è€ƒå¯Ÿçš„æ˜¯å‚æ•°ä¼ é€’ã€å€¼ä¼ é€’ã€æŒ‡é’ˆä¼ é€’ï¼ˆåœ°å€ä¼ é€’ï¼‰å’Œå¼•ç”¨ä¼ é€’ã€‚</p>
<pre><code>swap1ä¼ é€’çš„æ˜¯å€¼çš„å‰¯æœ¬ï¼Œåœ¨å‡½æ•°ä¸­åªæ˜¯ä¿®æ”¹äº†å½¢å‚pã€qï¼ˆå®é™…æ˜¯aã€bçš„ä¸€ä¸ªæ‹·è´ï¼‰ï¼Œpã€qçš„å€¼ç¡®å®äº¤æ¢äº†ï¼Œä½†æ˜¯å®ƒä»¬æ˜¯å±€éƒ¨å˜é‡ï¼Œä¸ä¼šå½±å“åˆ°ä¸»å‡½æ•°aå’Œ b ã€‚å½“å‡½æ•°swap1ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼Œpã€qæ‰€åœ¨çš„æ ˆä¹Ÿå°±è¢«åˆ é™¤äº†ã€‚

swap2ä¼ é€’çš„æ˜¯ä¸€ä¸ªåœ°å€è¿›å»ï¼Œåœ¨å‡½æ•°ä½“å†…çš„å½¢å‚*pã€*qæ˜¯æŒ‡å‘å®é™…çš„å‚æ•°aã€båœ°å€çš„ä¸¤ä¸ªæŒ‡é’ˆã€‚

è¿™é‡Œè¦æ³¨æ„ï¼š

        int *temp;

        *temp=*p;

æ˜¯ä¸ç¬¦åˆé€»è¾‘çš„ï¼Œint *tempæ–°å»ºäº†ä¸€ä¸ªæŒ‡é’ˆï¼ˆä½†æ˜¯æ²¡åˆ†é…å†…å­˜ï¼‰ã€‚*temp=*pä¸æ˜¯æŒ‡å‘è€Œæ˜¯æ‹·è´ã€‚æŠŠ*pæ‰€æŒ‡å‘çš„å†…å­˜çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯a çš„å€¼ï¼‰æ‹·è´åˆ°*tempæ‰€æŒ‡å‘å†…å­˜é‡Œäº†ã€‚ä½†æ˜¯int *tempä¸æ˜¯ä¸åˆ†é…å†…å­˜å—ï¼Ÿçš„ç¡®ä¸åˆ†é…ï¼Œäºæ˜¯ç³»ç»Ÿåœ¨æ‹·è´æ—¶ä¸´æ—¶ç»™äº†ä¸€ä¸ªéšæœºåœ°å€ï¼Œè®©å®ƒå­˜å€¼ã€‚åˆ†é…çš„éšæœºåœ°å€æ˜¯ä¸ªâ€œæ„å¤–â€ï¼Œä¸”å‡½æ•°ç»“æŸåä¸å›æ”¶ï¼Œé€ æˆå†…å­˜æ³„æ¼ã€‚

swap3ä¼ é€’çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œåœ¨å‡½æ•°ä½“å†…çš„å‚æ•°*pã€*qæ˜¯æŒ‡å‘å®é™…å‚æ•°aã€båœ°å€çš„ä¸¤ä¸ªæŒ‡é’ˆã€‚

è¿™é‡Œè¦æ³¨æ„ï¼š

        int *temp;

        temp=p;

int *tempæ–°å»ºäº†ä¸€ä¸ªæŒ‡é’ˆï¼ˆä½†æ˜¯æ²¡åˆ†é…å†…å­˜ï¼‰ã€‚temp=pæ˜¯æŒ‡å‘è€Œä¸æ˜¯æ‹·è´ã€‚tempæŒ‡å‘äº†*pæ‰€æŒ‡å‘çš„åœ°å€ï¼ˆä¹Ÿå°±æ˜¯a ï¼‰ã€‚è€Œä»£ç ï¼š

        int *temp;

        q=temp;

ä½†æ˜¯å‡½æ•°swap3ä¸èƒ½å®ç°ä¸¤æ•°çš„äº¤æ¢ï¼Œè¿™æ˜¯å› ä¸ºå‡½æ•°ä½“å†…åªæ˜¯æŒ‡é’ˆçš„å˜åŒ–ï¼Œè€Œå¯¹åœ°å€ä¸­çš„å€¼å´æ²¡æœ‰å˜åŒ–ã€‚

swap4å¯ä»¥å®ç°ä¸¤æ•°çš„äº¤æ¢ï¼Œå› ä¸ºå®ƒä¿®æ”¹çš„æ˜¯æŒ‡é’ˆæ‰€æŒ‡å‘åœ°å€ä¸­çš„å€¼ã€‚

swap5å‡½æ•°ä¸swap4ç›¸ä¼¼ï¼Œæ˜¯ä¸€ä¸ªå¼•ç”¨ä¼ é€’ï¼Œä¿®æ”¹çš„ç»“æœç›´æ¥å½±å“å®å‚ã€‚
</code></pre><p>ç­”æ¡ˆï¼š</p>
<p>swap4 å‡½æ•°å’Œ swap5 å‡½æ•°ã€‚</p>
<p>21ã€è¿™ä¸ªå‡½æ•°æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿè¯¥å¦‚ä½•ä¿®æ”¹ï¼Ÿ</p>
<p>char *strA()<br>{<br>    charstr[] =â€hello worldâ€;<br>    returnstr;<br>}</p>
<p>è§£æï¼šè¿™ä¸ªstré‡Œå­˜åœ¨çš„åœ°å€æ˜¯å‡½æ•°strAæ ˆé‡Œâ€œhello worldâ€çš„é¦–åœ°å€ã€‚å‡½æ•°è°ƒç”¨å®Œæˆï¼Œæ ˆå¸§æ¢å¤è°ƒç”¨strAä¹‹å‰çš„çŠ¶æ€ï¼Œä¸´æ—¶ç©ºé—´è¢«é‡ç½®ï¼Œå †æ ˆâ€œå›ç¼©â€ï¼ŒstrAæ ˆå¸§ä¸å†å±äºåº”è¯¥è®¿é—®çš„èŒƒå›´ã€‚è¿™æ®µç¨‹åºå¯ä»¥æ­£ç¡®è¾“å‡ºç»“æœï¼Œä½†æ˜¯è¿™ç§è®¿é—®æ–¹æ³•è¿èƒŒäº†å‡½æ•°çš„æ ˆå¸§æœºåˆ¶ã€‚</p>
<pre><code>ä½†æ˜¯åªè¦å¦å¤–ä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„è¯ï¼Œä½ å°±ä¼šå‘ç°ï¼Œè¿™ç§æ–¹å¼çš„ä¸åˆç†åŠå±é™©æ€§ã€‚

å¦‚æœæƒ³è·å¾—æ­£ç¡®çš„å‡½æ•°ï¼Œæ”¹æˆä¸‹é¢è¿™æ ·å°±å¯ä»¥ï¼š
</code></pre><p>char <em>strA()<br>{<br>    char</em>str =â€hello worldâ€;<br>    returnstr;<br>}<br>      é¦–å…ˆè¦ææ¸…æ¥šchar *str å’Œ char str[] ï¼š</p>
<p>1<br>char str[] = â€œhello worldâ€;<br>æ˜¯åˆ†é…ä¸€ä¸ªå±€éƒ¨æ•°ç»„ã€‚å±€éƒ¨æ•°ç»„æ˜¯å±€éƒ¨å˜é‡ï¼Œå®ƒæ‰€å¯¹åº”çš„æ˜¯å†…å­˜ä¸­çš„æ ˆã€‚å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸç»“æŸåè¯¥å˜é‡ä¸å­˜åœ¨äº†ã€‚</p>
<p>1<br>char *str = â€œhello worldâ€;</p>
<p>æ˜¯æŒ‡å‘äº†å¸¸é‡åŒºçš„å­—ç¬¦ä¸²ï¼Œä½äºé™æ€å­˜å‚¨åŒºï¼Œå®ƒåœ¨ç¨‹åºç”Ÿå‘½æœŸå†…æ’å®šä¸å˜ï¼Œæ‰€ä»¥å­—ç¬¦ä¸²è¿˜åœ¨ã€‚æ— è®ºä»€ä¹ˆæ—¶å€™è°ƒç”¨ strAï¼Œå®ƒè¿”å›çš„å§‹ç»ˆæ˜¯åŒä¸€ä¸ªâ€œåªè¯»â€çš„å†…å­˜å—ã€‚</p>
<pre><code>å¦å¤–æƒ³è¦ä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥è¿™æ ·ï¼š
</code></pre><p>char *strA()<br>{<br>    staticcharstr[] =â€hello worldâ€;<br>    returnstr;<br>}<br>      é€šè¿‡staticå¼€è¾Ÿä¸€æ®µé™æ€å­˜è´®ç©ºé—´ã€‚</p>
<p>ç­”æ¡ˆï¼š</p>
<p>å› ä¸ºè¿™ä¸ªå‡½æ•°è¿”å›çš„æ˜¯å±€éƒ¨å˜é‡çš„åœ°å€ï¼Œå½“è°ƒç”¨è¿™ä¸ªå‡½æ•°åï¼Œè¿™ä¸ªå±€éƒ¨å˜é‡strå°±é‡Šæ”¾äº†ï¼Œæ‰€ä»¥è¿”å›çš„ç»“æœæ˜¯ä¸ç¡®å®šçš„ä¸”ä¸å®‰å…¨ï¼Œéšæ—¶éƒ½æœ‰è¢«æ”¶å›çš„å¯èƒ½ã€‚</p>
<p>22</p>
<p>int arr[] = {1,2,3,4,5,6,7,8};<br>int <em>p=arr;
</em>(p++)+=123;<br>printf(â€œ%d,%d\nâ€, <em>p,</em>(++p));<br>ç¬¬ä¸€è¡Œï¼Œå®šä¹‰æ•°ç»„arrï¼Œå…ƒç´ å…±å…«ä¸ª<br>ç¬¬äºŒè¡Œï¼Œå®šä¹‰æŒ‡é’ˆpæŒ‡å‘arræ•°ç»„<br>æ­¤æ—¶çš„<em>pè¿˜æ˜¯ç­‰äºarræ•°ç»„çš„ç¬¬0ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯1<br>ç¬¬ä¸‰è¡Œï¼Œp++é‡Œçš„++æ˜¯æœ€åæ‰è¿ç®—ï¼Œæ‰€ä»¥å…ˆæ‰§è¡Œ</em>p+=123ï¼Œä¹Ÿå°±æ˜¯arrçš„ç¬¬0ä¸ªå…ƒç´ è¢«èµ‹å€¼ä¸º123<br>æ­¤æ—¶arrå˜æˆ{123,2,3,4,5,6,7,8} ï¼Œç„¶åæ˜¯p++ï¼Œæ­¤æ—¶<em>på·²ç»æ˜¯ç­‰äºarrçš„ç¬¬1ä¸ªå…ƒç´ äº†ï¼Œä¹Ÿå°±æ˜¯2<br>ç¬¬å››è¡Œï¼Œåœ¨æ‰§è¡Œprintfæ—¶ï¼Œæ‹¬å·é‡Œçš„å‚æ•°æ˜¯ä»å³å¾€å·¦çš„é¡ºåºè¿›è¡Œè¯»å–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å…ˆæ‰§è¡Œ </em>(++p)ï¼Œä¹Ÿå°±æ˜¯på…ˆåŠ ä¸€å†æŒ‡é’ˆï¼ŒæŒ‡å‘çš„æ˜¯arrç¬¬2ä¸ªå…ƒç´ 3ï¼Œç„¶ååœ¨æ‰§è¡Œ*pï¼Œè¿˜æ˜¯3<br>æœ€åæ˜¾ç¤ºçš„å†…å®¹å°±æ˜¯<br>3,3</p>
]]></content>
      
        
    </entry>
    
    <entry>
      <title><![CDATA[ç®—æ³•é¢˜æ”¶é›†]]></title>
      <url>/2015/07/06/2015/%E7%AE%97%E6%B3%95%E9%A2%98%E6%94%B6%E9%9B%86/</url>
      <content type="html"><![CDATA[<p><a href="https://www.dooccn.com/cpp/" target="_blank" rel="external">åœ¨çº¿è¿è¡Œä»£ç </a><br><a id="more"></a><br><a href="https://xiaozhuanlan.com/topic/4985160237" target="_blank" rel="external">æµ‹è¯•</a></p>
<p><a href="https://wangmeng.gitbooks.io/ios-note/content/interview_6.html" target="_blank" rel="external">æµ‹è¯•1</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/33695619" target="_blank" rel="external">æµ‹è¯•2</a></p>
<p><a href="https://www.jianshu.com/p/8a54c26a9349" target="_blank" rel="external">æµ‹è¯•3</a></p>
<ul>
<li>å­—ç¬¦ä¸²åè½¬</li>
<li>é“¾è¡¨åè½¬</li>
<li>æœ‰åºæ•°ç»„åˆå¹¶</li>
<li>Hashç®—æ³•</li>
<li>æŸ¥æ‰¾ä¸¤ä¸ªå­è§†å›¾</li>
<li>ä¸­ä½æ•°</li>
</ul>
<h3 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h3><h4 id="å­—ç¬¦ä¸²åè½¬"><a href="#å­—ç¬¦ä¸²åè½¬" class="headerlink" title="å­—ç¬¦ä¸²åè½¬"></a>å­—ç¬¦ä¸²åè½¬</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">string reverseString(string s) &#123;//åè½¬å­—ç¬¦ä¸²</div><div class="line">    for (int i = 0;i &lt; (s.size() + 1) / 2;i++) &#123;</div><div class="line">        char temp = s[i];</div><div class="line">        s[i] = s[s.size()-i-1];</div><div class="line">        s[s.size()-i-1] = temp;</div><div class="line">    &#125;</div><div class="line">    return s;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="å­—ç¬¦ä¸²å”¯ä¸€å­—ç¬¦ï¼Œå‡è®¾åªæœ‰å°å†™å­—æ¯"><a href="#å­—ç¬¦ä¸²å”¯ä¸€å­—ç¬¦ï¼Œå‡è®¾åªæœ‰å°å†™å­—æ¯" class="headerlink" title="å­—ç¬¦ä¸²å”¯ä¸€å­—ç¬¦ï¼Œå‡è®¾åªæœ‰å°å†™å­—æ¯"></a>å­—ç¬¦ä¸²å”¯ä¸€å­—ç¬¦ï¼Œå‡è®¾åªæœ‰å°å†™å­—æ¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">int firstUniqChar(string s) &#123;//å­—ç¬¦ä¸²å”¯ä¸€å­—ç¬¦ï¼Œå‡è®¾åªæœ‰å°å†™å­—æ¯</div><div class="line">    int code[26] = &#123;0&#125;;</div><div class="line">    for (int i = 0;i &lt; s.size();i++) &#123;</div><div class="line">        char letter = s[i];</div><div class="line">        code[letter - &apos;a&apos;] ++;</div><div class="line">        // cout &lt;&lt; code[0] &lt;&lt; &quot;++++&quot; &lt;&lt;  code[letter - &apos;a&apos;] &lt;&lt; &quot;***&quot; &lt;&lt; letter - &apos;a&apos; &lt;&lt; letter &lt;&lt; endl;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    for (int i = 0;i &lt; s.size();i++) &#123;</div><div class="line">        char letter = s[i];</div><div class="line">        // cout &lt;&lt; code[letter - &apos;a&apos;] &lt;&lt; &quot;  code  &quot; &lt;&lt; letter &lt;&lt; endl;</div><div class="line">        if (code[letter - &apos;a&apos;] == 1) &#123;</div><div class="line">            return i;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return -1;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="å­—ç¬¦ä¸²å”¯ä¸€å­—ç¬¦ï¼Œå•¥å­—æ¯éƒ½æœ‰"><a href="#å­—ç¬¦ä¸²å”¯ä¸€å­—ç¬¦ï¼Œå•¥å­—æ¯éƒ½æœ‰" class="headerlink" title="å­—ç¬¦ä¸²å”¯ä¸€å­—ç¬¦ï¼Œå•¥å­—æ¯éƒ½æœ‰"></a>å­—ç¬¦ä¸²å”¯ä¸€å­—ç¬¦ï¼Œå•¥å­—æ¯éƒ½æœ‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">char findFirstChar(char* cha)</div><div class="line">&#123;</div><div class="line">    char result = &apos;\0&apos;;</div><div class="line">    // å®šä¹‰ä¸€ä¸ªæ•°ç»„ ç”¨æ¥å­˜å‚¨å„ä¸ªå­—æ¯å‡ºç°æ¬¡æ•°</div><div class="line">    int array[256];</div><div class="line">    // å¯¹æ•°ç»„è¿›è¡Œåˆå§‹åŒ–æ“ä½œ</div><div class="line">    for (int i=0; i&lt;256; i++) &#123;</div><div class="line">        array[i] =0;</div><div class="line">    &#125;</div><div class="line">    // å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆ æŒ‡å‘å½“å‰å­—ç¬¦ä¸²å¤´éƒ¨</div><div class="line">    char* p = cha;</div><div class="line">    // éå†æ¯ä¸ªå­—ç¬¦</div><div class="line">    while (*p != &apos;\0&apos;) &#123;</div><div class="line">        // åœ¨å­—æ¯å¯¹åº”å­˜å‚¨ä½ç½® è¿›è¡Œå‡ºç°æ¬¡æ•°+1æ“ä½œ</div><div class="line">        array[*(p++)]++;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    // å°†PæŒ‡é’ˆé‡æ–°æŒ‡å‘å­—ç¬¦ä¸²å¤´éƒ¨</div><div class="line">    p = cha;</div><div class="line">    // éå†æ¯ä¸ªå­—æ¯çš„å‡ºç°æ¬¡æ•°</div><div class="line">    while (*p != &apos;\0&apos;) &#123;</div><div class="line">        // é‡åˆ°ç¬¬ä¸€ä¸ªå‡ºç°æ¬¡æ•°ä¸º1çš„å­—ç¬¦ï¼Œæ‰“å°ç»“æœ</div><div class="line">        if (array[*p] == 1)</div><div class="line">        &#123;</div><div class="line">            result = *p;</div><div class="line">            break;</div><div class="line">        &#125;</div><div class="line">        // åä¹‹ç»§ç»­å‘åéå†</div><div class="line">        p++;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return result;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h3><h4 id="å¢åŠ èŠ‚ç‚¹"><a href="#å¢åŠ èŠ‚ç‚¹" class="headerlink" title="å¢åŠ èŠ‚ç‚¹"></a>å¢åŠ èŠ‚ç‚¹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">void insertNode(Node *p,int i) &#123; //å¢åŠ èŠ‚ç‚¹</div><div class="line">    Node *node = new Node;</div><div class="line">    p-&gt;next = node;</div><div class="line">    node-&gt;value = i;</div><div class="line">    node-&gt;next = p-&gt;next;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="åˆ é™¤èŠ‚ç‚¹"><a href="#åˆ é™¤èŠ‚ç‚¹" class="headerlink" title="åˆ é™¤èŠ‚ç‚¹"></a>åˆ é™¤èŠ‚ç‚¹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">void deleteNode(Node *p) &#123; //åˆ é™¤èŠ‚ç‚¹ï¼Œå› ä¸ºä¸çŸ¥é“ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥åªèƒ½ç”¨ä¸‹ä¸€ä¸ªèŠ‚ç‚¹è¦†ç›–è‡ªå·±</div><div class="line">    p-&gt;next = p-&gt;next-&gt;next;</div><div class="line">    p-&gt;value = p-&gt;next-&gt;value;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="å¯»æ‰¾ä¸­é—´èŠ‚ç‚¹"><a href="#å¯»æ‰¾ä¸­é—´èŠ‚ç‚¹" class="headerlink" title="å¯»æ‰¾ä¸­é—´èŠ‚ç‚¹"></a>å¯»æ‰¾ä¸­é—´èŠ‚ç‚¹</h4><p>ç”¨slowå’ŒfastæŒ‡é’ˆæ ‡è®°ï¼Œslowæ¯æ¬¡èµ°ä¸€æ­¥ï¼Œfastæ¯æ¬¡èµ°ä¸¤æ­¥ï¼Œå½“faståˆ°å°¾èŠ‚ç‚¹æ—¶ï¼Œslowå°±ç›¸å½“äºæ€»é•¿åº¦çš„ä¸€åŠï¼Œå³åœ¨ä¸­é—´èŠ‚ç‚¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Node* findMidNode(Node* head)&#123;//æ‰¾å‡ºä¸­é—´èŠ‚ç‚¹</div><div class="line">    Node* slow = head;</div><div class="line">    Node* fast = head;</div><div class="line">    while (fast-&gt;next != 0&amp;&amp;fast-&gt;next-&gt;next!=0) &#123;</div><div class="line">        slow = slow-&gt;next;</div><div class="line">        fast = fast-&gt;next-&gt;next;</div><div class="line">    &#125;</div><div class="line">    return slow;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æ‰¾å‡ºå€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹"><a href="#æ‰¾å‡ºå€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹" class="headerlink" title="æ‰¾å‡ºå€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹"></a>æ‰¾å‡ºå€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹</h4><p>//ç”¨slowå’ŒfastæŒ‡é’ˆæ ‡è®°,fastæŒ‡é’ˆäº‹å…ˆèµ°kæ­¥ï¼Œç„¶åslowå’ŒfaståŒæ—¶èµ°ï¼Œå½“faståˆ°è¾¾æœ«èŠ‚ç‚¹æ—¶ï¼Œslowåœ¨fastçš„å‰kä¸ªèŠ‚ç‚¹ï¼Œå³ä¸ºå€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">ListNode* FindKthFromTail(ListNode* pListHead,int k)</div><div class="line">&#123;</div><div class="line">    if (pListHead == NULL || k == 0) //é˜²æ­¢ç©ºçš„é“¾è¡¨  å’Œ kå€¼ ç­‰äº 0 çš„æƒ…å†µ</div><div class="line">    &#123;</div><div class="line">        return NULL;</div><div class="line">    &#125;</div><div class="line">    ListNode* pAhead = pListHead;</div><div class="line">    ListNode* pBehind = NULL;</div><div class="line">    </div><div class="line">    for (int i = 0; i &lt; k-1; i++)</div><div class="line">    &#123;</div><div class="line">        if (pAhead-&gt;next != NULL)</div><div class="line">        &#123;</div><div class="line">            pAhead = pAhead-&gt;next;</div><div class="line">        &#125;</div><div class="line">        else</div><div class="line">        &#123;</div><div class="line">            return NULL;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    pBehind = pListHead;</div><div class="line">    while(pAhead-&gt;next != NULL)</div><div class="line">    &#123;</div><div class="line">        </div><div class="line">        pAhead  = pAhead-&gt;next;</div><div class="line">        pBehind = pBehind-&gt;next;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return pBehind;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="é“¾è¡¨åè½¬"><a href="#é“¾è¡¨åè½¬" class="headerlink" title="é“¾è¡¨åè½¬"></a>é“¾è¡¨åè½¬</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">ListNode* reverseLinkedList3(ListNode* head)&#123;</div><div class="line">    if(NULL==head|| NULL==head-&gt;next) return head;    //å°‘äºä¸¤ä¸ªèŠ‚ç‚¹æ²¡æœ‰åè½¬çš„å¿…è¦ã€‚</div><div class="line">    ListNode* p;</div><div class="line">    ListNode* q;</div><div class="line">    ListNode* r;</div><div class="line">    </div><div class="line">    p = head;</div><div class="line">    q = head-&gt;next;</div><div class="line">    head-&gt;next = NULL; //æ—§çš„å¤´æŒ‡é’ˆæ˜¯æ–°çš„å°¾æŒ‡é’ˆï¼Œnextéœ€è¦æŒ‡å‘NULL</div><div class="line">    while(q)&#123;</div><div class="line">        r = q-&gt;next; //å…ˆä¿ç•™ä¸‹ä¸€ä¸ªstepè¦å¤„ç†çš„æŒ‡é’ˆ</div><div class="line">        q-&gt;next = p; //ç„¶åp qäº¤æ›¿å·¥ä½œè¿›è¡Œåå‘</div><div class="line">        p = q;</div><div class="line">        q = r;</div><div class="line">    &#125;</div><div class="line">    head=p; // æœ€åqå¿…ç„¶æŒ‡å‘NULLï¼Œæ‰€ä»¥è¿”å›äº†pä½œä¸ºæ–°çš„å¤´æŒ‡é’ˆ</div><div class="line">    return head;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æœ‰åºå•é“¾è¡¨åˆå¹¶"><a href="#æœ‰åºå•é“¾è¡¨åˆå¹¶" class="headerlink" title="æœ‰åºå•é“¾è¡¨åˆå¹¶"></a>æœ‰åºå•é“¾è¡¨åˆå¹¶</h4><h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><h4 id="æœ‰åºæ•°ç»„åˆå¹¶"><a href="#æœ‰åºæ•°ç»„åˆå¹¶" class="headerlink" title="æœ‰åºæ•°ç»„åˆå¹¶"></a>æœ‰åºæ•°ç»„åˆå¹¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">void mergeList(int a[], int aLen, int b[], int bLen, int result[])//æœ‰åºæ•°ç»„åˆå¹¶</div><div class="line">&#123;</div><div class="line">    int p = 0; // éå†æ•°ç»„açš„æŒ‡é’ˆ</div><div class="line">    int q = 0; // éå†æ•°ç»„bçš„æŒ‡é’ˆ</div><div class="line">    int i = 0; // è®°å½•å½“å‰å­˜å‚¨ä½ç½®</div><div class="line">    </div><div class="line">    // ä»»ä¸€æ•°ç»„æ²¡æœ‰åˆ°è¾¾è¾¹ç•Œåˆ™è¿›è¡Œéå†</div><div class="line">    while (p &lt; aLen &amp;&amp; q &lt; bLen) &#123;</div><div class="line">        // å¦‚æœaæ•°ç»„å¯¹åº”ä½ç½®çš„å€¼å°äºbæ•°ç»„å¯¹åº”ä½ç½®çš„å€¼</div><div class="line">        if (a[p] &lt;= b[q]) &#123;</div><div class="line">            // å­˜å‚¨aæ•°ç»„çš„å€¼</div><div class="line">            result[i] = a[p];</div><div class="line">            // ç§»åŠ¨aæ•°ç»„çš„éå†æŒ‡é’ˆ</div><div class="line">            p++;</div><div class="line">        &#125;</div><div class="line">        else&#123;</div><div class="line">            // å­˜å‚¨bæ•°ç»„çš„å€¼</div><div class="line">            result[i] = b[q];</div><div class="line">            // ç§»åŠ¨bæ•°ç»„çš„éå†æŒ‡é’ˆ</div><div class="line">            q++;</div><div class="line">        &#125;</div><div class="line">        // æŒ‡å‘åˆå¹¶ç»“æœçš„ä¸‹ä¸€ä¸ªå­˜å‚¨ä½ç½®</div><div class="line">        i++;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    // å¦‚æœaæ•°ç»„æœ‰å‰©ä½™</div><div class="line">    while (p &lt; aLen) &#123;</div><div class="line">        // å°†aæ•°ç»„å‰©ä½™éƒ¨åˆ†æ‹¼æ¥åˆ°åˆå¹¶ç»“æœçš„åé¢</div><div class="line">        result[i] = a[p++];</div><div class="line">        i++;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    // å¦‚æœbæ•°ç»„æœ‰å‰©ä½™</div><div class="line">    while (q &lt; bLen) &#123;</div><div class="line">        // å°†bæ•°ç»„å‰©ä½™éƒ¨åˆ†æ‹¼æ¥åˆ°åˆå¹¶ç»“æœçš„åé¢</div><div class="line">        result[i] = b[q++];</div><div class="line">        i++;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æ— åºæ•°ç»„ä¸­ä½æ•°"><a href="#æ— åºæ•°ç»„ä¸­ä½æ•°" class="headerlink" title="æ— åºæ•°ç»„ä¸­ä½æ•°"></a>æ— åºæ•°ç»„ä¸­ä½æ•°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">//æ±‚ä¸€ä¸ªæ— åºæ•°ç»„çš„ä¸­ä½æ•°</div><div class="line">int PartSort(int a[], int start, int end)</div><div class="line">&#123;</div><div class="line">    int low = start;</div><div class="line">    int high = end;</div><div class="line">    </div><div class="line">    //é€‰å–å…³é”®å­—</div><div class="line">    int key = a[end];</div><div class="line">    </div><div class="line">    while (low &lt; high)</div><div class="line">    &#123;</div><div class="line">        //å·¦è¾¹æ‰¾æ¯”keyå¤§çš„å€¼</div><div class="line">        while (low &lt; high &amp;&amp; a[low] &lt;= key)</div><div class="line">        &#123;</div><div class="line">            ++low;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        //å³è¾¹æ‰¾æ¯”keyå°çš„å€¼</div><div class="line">        while (low &lt; high &amp;&amp; a[high] &gt;= key)</div><div class="line">        &#123;</div><div class="line">            --high;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        if (low &lt; high)</div><div class="line">        &#123;</div><div class="line">            //æ‰¾åˆ°ä¹‹åäº¤æ¢å·¦å³çš„å€¼</div><div class="line">            int temp = a[low];</div><div class="line">            a[low] = a[high];</div><div class="line">            a[high] = temp;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    int temp = a[high];</div><div class="line">    a[high] = a[end];</div><div class="line">    a[end] = temp;</div><div class="line">    </div><div class="line">    return low;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int findMedian(int a[], int aLen)</div><div class="line">&#123;</div><div class="line">    int low = 0;</div><div class="line">    int high = aLen - 1;</div><div class="line">    </div><div class="line">    int mid = (aLen - 1) / 2;</div><div class="line">    int div = PartSort(a, low, high);</div><div class="line">    </div><div class="line">    while (div != mid)</div><div class="line">    &#123;</div><div class="line">        if (mid &lt; div)</div><div class="line">        &#123;</div><div class="line">            //å·¦åŠåŒºé—´æ‰¾</div><div class="line">            div = PartSort(a, low, div - 1);</div><div class="line">        &#125;</div><div class="line">        else</div><div class="line">        &#123;</div><div class="line">            //å³åŠåŒºé—´æ‰¾</div><div class="line">            div = PartSort(a, div + 1, high);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    //æ‰¾åˆ°äº†</div><div class="line">    return a[mid];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å¤§æ•°æ±‚å’Œ"><a href="#å¤§æ•°æ±‚å’Œ" class="headerlink" title="å¤§æ•°æ±‚å’Œ"></a>å¤§æ•°æ±‚å’Œ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">#include &lt;string.h&gt;</div><div class="line">#include &lt;stdlib.h&gt;</div><div class="line"> </div><div class="line">/************************************************************************/</div><div class="line">/* åŠŸèƒ½ï¼šå®ç°ä¸¤ä¸ªè¶…å¤§æ•°ç›¸åŠ </div><div class="line">/* å‚æ•°ï¼šsource1 -- è¢«åŠ æ•°ï¼Œå­—ç¬¦å‹æ•°ç»„,å¦‚12</div><div class="line">/*       source2 -- åŠ æ•°ï¼Œå­—ç¬¦å‹æ•°ç»„,</div><div class="line">/*       result  -- å­˜æ”¾å’Œï¼Œå­—ç¬¦å‹æ•°ç»„</div><div class="line">/************************************************************************/</div><div class="line">void Add(char *source1, char *source2, char *result)</div><div class="line">&#123;</div><div class="line">	int len1 = strlen(source1);</div><div class="line">	int len2 = strlen(source2);</div><div class="line">	int len = len1 &gt;= len2 ? len1 : len2;</div><div class="line">	int i = len1 - 1, j = len2 - 1, k = 0;</div><div class="line">	char *temp = (char *)malloc(sizeof(char) * (len + 2));</div><div class="line">	char x, y, z;</div><div class="line">	int carryBit = 0;</div><div class="line">    </div><div class="line">	while (i &gt;= 0 || j &gt;= 0)</div><div class="line">	&#123;</div><div class="line">		if (i &lt; 0) x = &apos;0&apos;; </div><div class="line">		else x = source1[i];</div><div class="line"> </div><div class="line">		if (j &lt; 0) y = &apos;0&apos;;</div><div class="line">		else y = source2[j];</div><div class="line"> </div><div class="line">		z = x + y - &apos;0&apos; - &apos;0&apos; + carryBit;</div><div class="line">        temp[k++] = z % 10 + &apos;0&apos;;</div><div class="line">		carryBit = z / 10;</div><div class="line"> </div><div class="line">		i--;</div><div class="line">		j--;</div><div class="line">	&#125;</div><div class="line"> </div><div class="line">	while (carryBit)</div><div class="line">	&#123;</div><div class="line">		temp[k++] = carryBit % 10 + &apos;0&apos;;</div><div class="line">		carryBit /= 10;</div><div class="line">	&#125;</div><div class="line"> </div><div class="line">	for (--k, i = 0; k &gt;= 0; k--, i++)</div><div class="line">	&#123;</div><div class="line">		result[i] = temp[k];</div><div class="line">	&#125;</div><div class="line">	result[i] = &apos;\0&apos;;</div><div class="line"> </div><div class="line">	free(temp);// é‡Šæ”¾å†…å­˜</div><div class="line">&#125;</div><div class="line"> </div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">	char source1[1000];</div><div class="line">	char source2[1000];</div><div class="line">	char result[1100];</div><div class="line"> </div><div class="line">	scanf(&quot;%s%s&quot;, source1, source2);</div><div class="line">	Add(source1, source2, result);</div><div class="line"> </div><div class="line">	printf(&quot;%s\n&quot;, result);</div><div class="line">	return 0;</div></pre></td></tr></table></figure>
<h3 id="TopKé—®é¢˜"><a href="#TopKé—®é¢˜" class="headerlink" title="TopKé—®é¢˜"></a>TopKé—®é¢˜</h3><p><a href="https://www.cnblogs.com/xudong-bupt/archive/2013/03/20/2971262.html" target="_blank" rel="external">TopKé—®é¢˜æœ€å°å †</a></p>
<p><a href="https://blog.csdn.net/ts173383201/article/details/7839482" target="_blank" rel="external">æ€è·¯</a></p>
<h3 id="ç½—åˆ—"><a href="#ç½—åˆ—" class="headerlink" title="ç½—åˆ—"></a>ç½—åˆ—</h3><p>åè½¬é“¾è¡¨</p>
<p>äºŒåˆ†æŸ¥æ‰¾æ³•</p>
<p>å†’æ³¡æ’åº</p>
<p>äºŒåˆ†æ³•</p>
<p>æ•°æ®ç»“æ„ï¼ˆé“¾è¡¨ã€äºŒå‰æ ‘ã€ç®—æ³•æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦ï¼‰</p>
<p>ä»€ä¹ˆæ˜¯äºŒå‰æœç´¢æ ‘ï¼Ÿæ—¶é—´å¤æ‚åº¦æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>é‡‡ç”¨äºŒå‰æ ‘é“¾è¡¨ä½œä¸ºå­˜å‚¨ç»“æ„ï¼Œæ¯ä¸ªå·¦èŠ‚ç‚¹å‡å°äºçˆ¶èŠ‚ç‚¹ï¼Œæ¯ä¸ªå³èŠ‚ç‚¹å‡å¤§äºçˆ¶èŠ‚ç‚¹</p>
<p>O(log2(n))</p>
<p>T9ç®—æ³•å¦‚ä½•å®ç°, å…¨æ‹¼ç®—æ³•</p>
<p>æœ€çŸ­è·¯å¾„ç®—æ³•</p>
<p>å¼ºè¿é€šé‡ç®—æ³•</p>
<p>å®ç°è¿è¿çœ‹ç®—æ³•</p>
<p>å¦‚ä½•å®ç°ä¸€ä¸ªæ•°ç»„æ¯ä¸ªå…ƒç´ ä¾æ¬¡å‘å³ç§»åŠ¨kä½ã€‚(åå¤´çš„å¾€å‰é¢è¡¥) æ¯”å¦‚: [1, 2, 3, 4, 5] æŒªä¸¤ä½å˜æˆ[4, 5, 1, 2, 3]</p>
<p>æ±‚ä¸¤ä¸ªæ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°</p>
<p>å¾®ä¿¡ç”¨æˆ·éƒ½æ˜¯åŒå‘çš„å¥½å‹ï¼Œaæ˜¯bçš„å¥½å‹ï¼Œé‚£ä¹ˆbä¸€å®šæ˜¯açš„ã€‚ç»™å®šä¸€ä¸ªç”¨æˆ·åˆ—è¡¨ï¼Œæœ‰äº›ç”¨æˆ·æ˜¯å¥½å‹ï¼Œæœ‰äº›ä¸æ˜¯ï¼Œè¯·åˆ¤æ–­ï¼Œè¿™äº›ç”¨æˆ·æ˜¯å¦å¯ä»¥åˆ’åˆ†ä¸ºä¸¤ç»„ï¼Œæ¯ç»„å†…çš„ç”¨ æˆ·ï¼Œäº’ç›¸éƒ½ä¸æ˜¯å¥½å‹ã€‚å¦‚æœèƒ½ï¼Œè¯·ç»™å‡ºè¿™ä¸ªåˆ’åˆ†</p>
<p>ç®—æ³•é¢˜ï¼šè¯´ é¢„çº¦ä¼šè®®å®¤ï¼Œä¼šæœ‰nä¸ªå›¢é˜Ÿé¢„çº¦å½“å¤©ä¼šè®®å®¤ï¼Œæ—¶é—´å„ä¸ç›¸åŒï¼Œæ±‚æœ€å°‘éœ€è¦å‡ ä¸ªä¼šè®®å®¤ã€‚æ¯”å¦‚ï¼š1é¢„çº¦çš„æ—¶é—´æ˜¯[9-11], 2é¢„çº¦çš„æ—¶é—´æ˜¯[10-12], 3é¢„çº¦çš„æ—¶é—´æ˜¯[12-14], æ­¤æ—¶ä¼šè®®æœ€å°ä¸ªæ•°æ˜¯2ä¸ª</p>
<p>1ã€å°±nçš„é˜¶ä¹˜ã€‚ï¼ˆè¿™é‡Œåªæ˜¯ç”¨äºå°æ•°ï¼Œå¤§æ•°ä¼šè¶Šç•Œï¼‰</p>
<p>æ€è·¯ï¼šè¿™é‡Œé¢ç”¨é€’å½’å®ç°</p>
<p>#include <stdio.h></stdio.h></p>
<p>int getNJ(int n) {<br>     || n==) {<br>        ;<br>    }<br>    );<br>}<br>int main() { </p>
<p>   printf());<br>    ;<br>}<br>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p>2ã€åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯ipã€‚</p>
<p>æ€è·¯ï¼šå…ˆå°†å­—ç¬¦ä¸²åˆ†å‰²åˆ°ä¸¤ä¸ªæ•°ç»„é‡Œé¢ï¼ˆä¸€ä¸ªæ•°å­—æ•°ç»„ï¼Œä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼‰ï¼Œç„¶ååˆ¤æ–­æ•°å­—æ•°ç»„å†…å®¹æ˜¯å¦æ»¡è¶³ipæ¡ä»¶ï¼Œå­—ç¬¦æ•°ç»„é‡Œé¢æ˜¯å¦æ˜¯â€.â€ã€‚è¿™é‡Œé¢ä¸»è¦ç”¨äº†sscanfå‡½æ•°ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<p>#include <stdio.h></stdio.h></p>
<p>int checkIP(const char *p) {<br>    ];<br>    ];<br>    ],&amp;c[],&amp;n[],&amp;c[],&amp;n[],&amp;c[],&amp;n[],&amp;c[])==) {<br>        int i;<br>        ;i&lt;;i++) {<br>            if(c[i]!=â€™.â€™) {<br>                ;<br>            }<br>        }<br>        ;i&lt;;i++) {<br>            ||n[i]&lt;) {<br>                ;<br>            }<br>        }<br>        ;</p>
<pre><code>}else {
    ;
}
</code></pre><p>}</p>
<p>int main() {<br>    const char <em>x[] =<br>    {<br>        â€œ132.168.1.1â€,<br>        â€œ10.0.0.1.â€,<br>        â€œ127.256.0.1â€,<br>        â€œiudfdsfdasfdafâ€,<br>        â€œ172.16,2.1â€<br>    };<br>    const char </em>m[] =<br>    {<br>        â€œä¸æ˜¯åˆæ³•çš„IPåœ°å€â€,<br>         â€œæ˜¯åˆæ³•çš„IPåœ°å€â€<br>    };<br>    ;<br>    ) {<br>        printf(â€œ%s %s\nâ€,x[i],m[checkIP(x[i])]);<br>        i++;<br>    }<br>    ;<br>    ;<br>}<br>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p>132.168.1.1 æ˜¯åˆæ³•çš„IPåœ°å€<br>10.0.0.1. ä¸æ˜¯åˆæ³•çš„IPåœ°å€<br>127.256.0.1 ä¸æ˜¯åˆæ³•çš„IPåœ°å€<br>iudfdsfdasfdaf ä¸æ˜¯åˆæ³•çš„IPåœ°å€<br>172.16,2.1 ä¸æ˜¯åˆæ³•çš„IPåœ°å€<br>3ã€äºŒåˆ†æŸ¥æ‰¾</p>
<p>æ€è·¯ï¼šäºŒåˆ†æŸ¥æ‰¾åˆç§°æŠ˜åŠæŸ¥æ‰¾ï¼Œå‰ææ˜¯å¾…æŸ¥æ‰¾è¡¨ä¸ºæœ‰åºè¡¨ã€‚å°†æŸ¥æ‰¾ç›®æ ‡ä¸æ•°ç»„ä¸­é—´çš„æ•°å¯¹æ¯”ï¼Œå¦‚æœå¤§äºä¸­é—´çš„æ•°å°±åœ¨ä¸­é—´æ•°å’Œæœ€å¤§æ•°ä¹‹é—´æŸ¥æ‰¾ï¼Œå¦‚æœå°äºä¸­é—´æ•°å°±åœ¨å°æ•°å’Œä¸­é—´æ•°ä¹‹é—´æŸ¥æ‰¾ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line"></div><div class="line">int bsearchMethod(int arr[],int low,int high,int target) &#123;</div><div class="line">    while (low&lt;high) &#123;</div><div class="line">        ;</div><div class="line">        if (arr[mid]&gt;target) &#123;</div><div class="line">            high = mid-;</div><div class="line">        &#125;else if(arr[mid]&lt;target)&#123;</div><div class="line">            low = mid+;</div><div class="line">        &#125;else &#123;</div><div class="line">            return mid;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    ;</div><div class="line">&#125;</div><div class="line">int main(void) &#123;</div><div class="line">    ,,,,,,,,,,&#125;;</div><div class="line">    printf(,,));</div><div class="line">    ;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœä¸ºï¼š</p>
<p>æŸ¥æ‰¾æ•°åœ¨æ•°ç»„ç¬¬5ä½<br>å…¶ä¸­-1ä¸ºæŸ¥æ‰¾å¤±è´¥</p>
<p>å†’æ³¡æ’åº</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">å†’æ³¡æ’åº   Î¸(n^2)</div><div class="line">void bubble_sort(int a[], int n)</div><div class="line">&#123;</div><div class="line">    int i, j, temp;</div><div class="line">    for (j = 0; j &lt; n - 1; j++)</div><div class="line">        for (i = 0; i &lt; n - 1 - j; i++) //å¤–å±‚å¾ªç¯æ¯å¾ªç¯ä¸€æ¬¡å°±èƒ½ç¡®å®šå‡ºä¸€ä¸ªæ³¡æ³¡ï¼ˆæœ€å¤§æˆ–è€…æœ€å°ï¼‰ï¼Œæ‰€ä»¥å†…å±‚å¾ªç¯ä¸ç”¨å†è®¡ç®—å·²ç»æ’å¥½çš„éƒ¨åˆ†</div><div class="line">        &#123;</div><div class="line">            if(a[i] &gt; a[i + 1])</div><div class="line">            &#123;</div><div class="line">                temp = a[i];</div><div class="line">                a[i] = a[i + 1];</div><div class="line">                a[i + 1] = temp;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¿«é€Ÿæ’åº  è°ƒç”¨æ–¹æ³•  quickSort(a,0,n);  Î¸(nlogn)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">void quickSort (int a[] , int low , int high)</div><div class="line">&#123;</div><div class="line">    if (high &lt; low + 2)</div><div class="line">        return;</div><div class="line">    int start = low;</div><div class="line">    int end = high;</div><div class="line">    int temp;</div><div class="line">    </div><div class="line">    while (start &lt; end)</div><div class="line">    &#123;</div><div class="line">        while ( ++start &lt; high &amp;&amp; a[start] &lt;= a[low]);//æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”a[low]æ•°å€¼å¤§çš„ä½å­start</div><div class="line"></div><div class="line">        while ( --end  &gt; low  &amp;&amp; a[end]  &gt;= a[low]);//æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”a[low]æ•°å€¼å°çš„ä½å­end</div><div class="line"></div><div class="line">        //è¿›è¡Œåˆ°æ­¤ï¼Œa[end] &lt; a[low] &lt; a[start],ä½†æ˜¯ç‰©ç†ä½ç½®ä¸Šè¿˜æ˜¯low &lt; start &lt; endï¼Œå› æ­¤æ¥ä¸‹æ¥äº¤æ¢a[start]å’Œa[end],äºæ˜¯[low,start]è¿™ä¸ªåŒºé—´é‡Œé¢å…¨éƒ¨æ¯”a[low]å°çš„ï¼Œ[end,hight]è¿™ä¸ªåŒºé—´é‡Œé¢å…¨éƒ¨éƒ½æ˜¯æ¯”a[low]å¤§çš„</div><div class="line">        </div><div class="line">        if (start &lt; end)</div><div class="line">        &#123;</div><div class="line">            temp = a[start];</div><div class="line">            a[start]=a[end];</div><div class="line">            a[end]=temp;</div><div class="line">        &#125;</div><div class="line">        //åœ¨GCCç¼–è¯‘å™¨ä¸‹ï¼Œè¯¥å†™æ³•æ— æ³•è¾¾åˆ°äº¤æ¢çš„ç›®çš„ï¼Œa[start] ^= a[end] ^= a[start] ^= a[end];ç¼–è¯‘å™¨çš„é—®é¢˜</div><div class="line">    &#125;</div><div class="line">    //è¿›è¡Œåˆ°æ­¤ï¼Œ[low,end]åŒºé—´é‡Œé¢çš„æ•°éƒ½æ¯”a[low]å°çš„,[end,higt]åŒºé—´é‡Œé¢éƒ½æ˜¯æ¯”a[low]å¤§çš„ï¼ŒæŠŠa[low]æ”¾åˆ°ä¸­é—´å³å¯</div><div class="line"></div><div class="line">    //åœ¨GCCç¼–è¯‘å™¨ä¸‹ï¼Œè¯¥å†™æ³•æ— æ³•è¾¾åˆ°äº¤æ¢çš„ç›®çš„ï¼Œa[low] ^= a[end] ^= a[low] ^= a[end];ç¼–è¯‘å™¨çš„é—®é¢˜</div><div class="line">    </div><div class="line">    temp = a[low];</div><div class="line">    a[low]=a[end];</div><div class="line">    a[end]=temp;</div><div class="line">    </div><div class="line">    //ç°åœ¨å°±åˆ†æˆäº†3æ®µäº†ï¼Œç”±æœ€åˆçš„a[low]æ¢çº½åˆ†å¼€çš„</div><div class="line">    quickSort(a, low, end);</div><div class="line">    quickSort(a, start, high);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>4ã€100å±‚æ¥¼2ä¸ªé¸¡è›‹é—®é¢˜ï¼Ÿ</p>
<blockquote>
<p>æ¢ä¸ªè§’åº¦ï¼ŒæŠŠé—®é¢˜è½¬åŒ–ä¸ºä¸¤ä¸ªé¸¡è›‹å°è¯•xæ¬¡ï¼Œèƒ½æµ‹å‡ºçš„æœ€é«˜ä¸´ç•Œå±‚æ˜¯å“ªå±‚ï¼Ÿä¸ºäº†ä¿è¯ç”¨xæ¬¡æµ‹å‡ºä¸´ç•Œå±‚ï¼Œç¬¬ä¸€ä¸ªé¸¡è›‹æœ€é«˜åªèƒ½æ‰”åœ¨xå±‚ï¼Œå¦‚æœæ²¡ç¢ä¸‹æ¬¡ä¸Šå‡x-1å±‚ï¼Œè¿˜æ²¡ç¢å†ä¸Šå‡x-2å±‚ï¼Œä¸€ç›´æ²¡ç¢çš„è¯æœ€åä¸Šå‡1å±‚ã€‚å³å°è¯•xæ¬¡ï¼Œæœ€å¤šæµ‹x+(x-1)+(x-2)+â€¦+1=(x+1)x/2ã€‚å†æ¥è€ƒè™‘åŸé¢˜ï¼Œä¸ºäº†æµ‹åˆ°100å±‚ï¼Œå°±è¦ä½¿(x+1)x/2&gt;=100ï¼Œå³x&gt;=14ã€‚è¿™å°±è¯æ˜äº†è¿™ç§æ–¹æ³•æ˜¯æœ€ä¼˜è§£ã€‚</p>
</blockquote>
<p>5ã€å­—ç¬¦ä¸²åè½¬è¾“å‡ºé—®é¢˜ï¼Ÿ</p>
<p>6ã€çº¢é»‘æ ‘ï¼Ÿ</p>
<p>7ã€æ²³å·¦è¾¹æœ‰ï¼šç‹¼ã€ç¾Šã€ç™½èœï¼Œä¸€ä¸ªäººè¿‡æ²³ï¼Œä¸€æ¬¡åªèƒ½å¸¦èµ°ä¸€ä»¶ä¸œè¥¿ï¼Œæ€ä¹ˆåšèƒ½å¤Ÿä¿è¯ä¸‰ç‰©éƒ½åˆ°æ²³å³è¾¹?è§„åˆ™ï¼ˆç‹¼åƒç¾Šã€ç¾Šåƒç™½èœï¼‰</p>
<p>ç­”ï¼šå…ˆæŠŠç¾Šå¸¦åˆ°å¯¹é¢ï¼Œç„¶åæŠŠç™½èœå¸¦åˆ°å¯¹é¢ï¼Œè¿™ä¸ªæ—¶å€™æŠŠç¾Šå¸¦èµ°ï¼ŒæŠŠç‹¼å¸¦å›å¯¹é¢ï¼Œå›å»å†æŠŠç¾Šå¸¦å›å¯¹é¢ã€‚</p>
<p>8ã€æœ‰ä¸€å¼ åœ†å½¢çš„æ¡Œå­,ä¸¤ä¸ªäººè½®æµå¾€æ¡Œå­ä¸Šæ”¾ç¡¬å¸,å‡è®¾ä¸¤äººæœ‰æ— é™å¤šçš„å¤§å°ç›¸åŒçš„ç¡¬å¸ä¸”ä¸è€ƒè™‘æ¡Œå­çš„å¤§å°,è§„å®šç¡¬å¸ä¹‹é—´ä¸å¯ä»¥é‡å ,ä½†å¯ä»¥ç›¸äº’ç¢°ç€è¾¹,è°æœ€åä¸€ä¸ªæ”¾ç¡¬å¸è°å°±èµ¢,é—®è°ä¼šèµ¢,ç¬¬ä¸€ç»™æ”¾ç¡¬å¸çš„äººè¿˜æ˜¯ç¬¬äºŒä¸ª?</p>
<p>ç­”ï¼šç¬¬ä¸€ä¸ªå‡ºçš„èµ¢ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªé¦–å…ˆçš„åšæ³•æ˜¯ï¼šæŠŠç¬¬ä¸€ä¸ªæ”¾åœ¨ä¸­å¿ƒï¼Œç„¶åå½“ç¬¬äºŒä¸ªäººå‡ºçš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªäººå°±å¯¹ç§°ç€æ”¾ç¡¬å¸ï¼Œç¬¬ä¸€ä¸ªäººå°±èµ¢äº†ã€‚</p>
<h4 id="ä¸ç”¨ä¸­é—´å˜é‡-ç”¨ä¸¤ç§æ–¹æ³•äº¤æ¢Aå’ŒBçš„å€¼"><a href="#ä¸ç”¨ä¸­é—´å˜é‡-ç”¨ä¸¤ç§æ–¹æ³•äº¤æ¢Aå’ŒBçš„å€¼" class="headerlink" title="ä¸ç”¨ä¸­é—´å˜é‡,ç”¨ä¸¤ç§æ–¹æ³•äº¤æ¢Aå’ŒBçš„å€¼"></a>ä¸ç”¨ä¸­é—´å˜é‡,ç”¨ä¸¤ç§æ–¹æ³•äº¤æ¢Aå’ŒBçš„å€¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">// 1.ä¸­é—´å˜é‡</div><div class="line"></div><div class="line">void swap(int a, int b) &#123;</div><div class="line"></div><div class="line">int temp = a;</div><div class="line"></div><div class="line">a = b;</div><div class="line"></div><div class="line">b = temp;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">// 2.åŠ æ³•</div><div class="line"></div><div class="line">void swap(int a, int b) &#123;</div><div class="line"></div><div class="line">a = a + b;</div><div class="line"></div><div class="line">b = a - b;</div><div class="line"></div><div class="line">a = a - b;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">// 3.å¼‚æˆ–ï¼ˆç›¸åŒä¸º0ï¼Œä¸åŒä¸º1. å¯ä»¥ç†è§£ä¸ºä¸è¿›ä½åŠ æ³•ï¼‰</div><div class="line"></div><div class="line">void swap(int a, int b) &#123;</div><div class="line"></div><div class="line">a = a ^ b;</div><div class="line"></div><div class="line">b = a ^ b;</div><div class="line"></div><div class="line">a = a ^ b;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æ±‚æœ€å¤§å…¬çº¦æ•°"><a href="#æ±‚æœ€å¤§å…¬çº¦æ•°" class="headerlink" title="æ±‚æœ€å¤§å…¬çº¦æ•°"></a>æ±‚æœ€å¤§å…¬çº¦æ•°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">/** 1.ç›´æ¥éå†æ³• */</div><div class="line"></div><div class="line">int maxCommonDivisor(int a, int b) &#123;</div><div class="line"></div><div class="line">int max = 0;</div><div class="line"></div><div class="line">for (int i = 1; i &lt;=b; i++) &#123;</div><div class="line"></div><div class="line">if (a % i == 0 &amp;&amp; b % i == 0) &#123;</div><div class="line"></div><div class="line">max = i;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">return max;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">/** 2.è¾—è½¬ç›¸é™¤æ³• */</div><div class="line"></div><div class="line">int maxCommonDivisor(int a, int b) &#123;</div><div class="line"></div><div class="line">int r;</div><div class="line"></div><div class="line">while(a % b &gt; 0) &#123;</div><div class="line"></div><div class="line">r = a % b;</div><div class="line"></div><div class="line">a = b;</div><div class="line"></div><div class="line">b = r;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">return b;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">// æ‰©å±•ï¼šæœ€å°å…¬å€æ•° = (a * b)/æœ€å¤§å…¬çº¦æ•°</div></pre></td></tr></table></figure>
<h3 id="ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œè¾¹æœ‰å„ç§å­—ç¬¦ï¼Œå¦‚ä½•æ‰¾åˆ°ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„é‚£ä¸ªï¼Ÿ"><a href="#ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œè¾¹æœ‰å„ç§å­—ç¬¦ï¼Œå¦‚ä½•æ‰¾åˆ°ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„é‚£ä¸ªï¼Ÿ" class="headerlink" title="ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œè¾¹æœ‰å„ç§å­—ç¬¦ï¼Œå¦‚ä½•æ‰¾åˆ°ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„é‚£ä¸ªï¼Ÿ"></a>ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œè¾¹æœ‰å„ç§å­—ç¬¦ï¼Œå¦‚ä½•æ‰¾åˆ°ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„é‚£ä¸ªï¼Ÿ</h3><p>æ€è·¯:</p>
<p>é¦–å…ˆåˆ©ç”¨acciç å¯¹å­—ç¬¦åšhashçš„ç´¢å¼•ï¼Œvalueå°±æ˜¯å‡ºç°çš„æ¬¡æ•°ï¼Œç„¶åç»´æŠ¤ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„è®°å½•å‡ºç°è¿‡çš„å­—æ¯ï¼Œå¦‚æœå·²ç»æ·»åŠ è¿‡å°±ä¸å†æ·»åŠ ï¼Œç„¶åè¿™ä¸ªè¿‡ç¨‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œç„¶åä¸‹ä¸€æ¬¡ä¸éå†å­—ç¬¦ä¸²ï¼Œç›´æ¥éå†è¿™ä¸ªæ–°æ•°ç»„ã€‚</p>
<h3 id="å¤§æ•°æ±‚å’Œçš„é—®é¢˜ï¼Œä½ å¦‚ä½•å»è°ƒåº¦ï¼Ÿ"><a href="#å¤§æ•°æ±‚å’Œçš„é—®é¢˜ï¼Œä½ å¦‚ä½•å»è°ƒåº¦ï¼Ÿ" class="headerlink" title="å¤§æ•°æ±‚å’Œçš„é—®é¢˜ï¼Œä½ å¦‚ä½•å»è°ƒåº¦ï¼Ÿ"></a>å¤§æ•°æ±‚å’Œçš„é—®é¢˜ï¼Œä½ å¦‚ä½•å»è°ƒåº¦ï¼Ÿ</h3><p>è€ƒè™‘çš„ç‚¹</p>
<ul>
<li>æœºå™¨çš„å†…å­˜å ç”¨</li>
<li>æœºå™¨çš„cpuæƒ…å†µ</li>
<li>ä»»åŠ¡è°ƒåº¦çš„ä¼˜å…ˆçº§</li>
</ul>
<p>ç„¶åç»¼åˆè€ƒè™‘å¾—å‡ºæ¥ä¸€ä¸ªå…¬å¼ï¼Œç”¨æ¥å¿«é€Ÿå¾—å‡ºæ¥å“ªä¸€ä¸ªèƒ½ç”¨ï¼Œå“ªä¸€ä¸ªä¸èƒ½ç”¨ï¼Œå†æ·±å…¥ä¸€äº›å¯èƒ½è¿˜è¦è€ƒè™‘å“ªäº›æœºå™¨è¦è½½å…¥å¤šå°‘è¿›è¡Œè®¡ç®—ï¼Œæ ¹æ®æœ€åçš„å€¼è¿›è¡Œè¿™æ ·çš„ä¸€ä¸ªåŒºåˆ†ã€‚</p>
<p>ç„¶åæ˜¯è¿™äº›æœºå™¨å¤„ç†å®Œä¹‹åï¼Œæ±‡æ€»çš„æ—¶å€™å†…å­˜çš„å ç”¨é—®é¢˜ï¼Œä¼šä¸ä¼šæœ‰å†…å­˜æº¢å‡ºï¼Œæœ‰æº¢å‡ºçš„è¯æ€ä¹ˆåŠï¼Ÿ</p>
<h3 id="RNè¿™ç§æ¡†æ¶å¦‚æœè®©ä½ è®¾è®¡ä½ è¦è€ƒè™‘å“ªäº›ç‚¹ï¼ŸRNçš„å®ç°åŸç†ï¼Ÿ"><a href="#RNè¿™ç§æ¡†æ¶å¦‚æœè®©ä½ è®¾è®¡ä½ è¦è€ƒè™‘å“ªäº›ç‚¹ï¼ŸRNçš„å®ç°åŸç†ï¼Ÿ" class="headerlink" title="RNè¿™ç§æ¡†æ¶å¦‚æœè®©ä½ è®¾è®¡ä½ è¦è€ƒè™‘å“ªäº›ç‚¹ï¼ŸRNçš„å®ç°åŸç†ï¼Ÿ"></a>RNè¿™ç§æ¡†æ¶å¦‚æœè®©ä½ è®¾è®¡ä½ è¦è€ƒè™‘å“ªäº›ç‚¹ï¼ŸRNçš„å®ç°åŸç†ï¼Ÿ</h3><h3 id="å¤šè¯»å¤šå†™çš„æƒ…å†µä¸‹ä½ å¦‚ä½•æé«˜æ•ˆç‡ï¼Ÿ"><a href="#å¤šè¯»å¤šå†™çš„æƒ…å†µä¸‹ä½ å¦‚ä½•æé«˜æ•ˆç‡ï¼Ÿ" class="headerlink" title="å¤šè¯»å¤šå†™çš„æƒ…å†µä¸‹ä½ å¦‚ä½•æé«˜æ•ˆç‡ï¼Ÿ"></a>å¤šè¯»å¤šå†™çš„æƒ…å†µä¸‹ä½ å¦‚ä½•æé«˜æ•ˆç‡ï¼Ÿ</h3><p>é‡è¦çš„æ˜¯å°†è¯»å’Œå†™è¿›è¡Œä¸€ä¸ªå¹¶å‘ï¼Œæ–¹æ³•å°±æ˜¯å°†å†™å…¥çš„æ–‡ä»¶è¿›è¡Œåˆ‡åˆ†ï¼Œç„¶åè¯»æä¾›ä¸€ä¸ªæ¥å£ç±»ï¼Œå†™ä¹Ÿæä¾›ä¸€ä¸ªæ¥å£ç±»ï¼Œå†™åªæ“ä½œæœ€åä¸€ä¸ªæ–‡ä»¶ï¼Œè¯»å¯ä»¥æ“ä½œå‰è¾¹çš„æ–‡ä»¶ï¼Œå½“é‡åˆ°æœ€åä¸€ä¸ªæ–‡ä»¶åœ¨è¿›è¡Œå†™çš„æ—¶å€™è¿›è¡Œä¸€ä¸ªç­‰å¾…ï¼Œå½“å†™ç»“æŸäº†ï¼Œå†è¿›è¡Œè¯»ã€‚è¿™æ ·å°±å¯ä»¥å®ç°å¤–ç•Œçœ‹æ¥çš„è¯»å†™å¹¶å‘ã€‚</p>
<h3 id="å¼‚æˆ–ç±»é¢˜"><a href="#å¼‚æˆ–ç±»é¢˜" class="headerlink" title="å¼‚æˆ–ç±»é¢˜"></a>å¼‚æˆ–ç±»é¢˜</h3><h4 id="ä¸€ä¸ªæ•´å‹æ•°ç»„é‡Œé™¤äº†ä¸€ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶å®ƒçš„æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚è¯·å†™ç¨‹åºæ‰¾å‡ºè¿™ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚è¦æ±‚æ—¶é—´å¤æ‚åº¦æ˜¯O-n-ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O-1"><a href="#ä¸€ä¸ªæ•´å‹æ•°ç»„é‡Œé™¤äº†ä¸€ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶å®ƒçš„æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚è¯·å†™ç¨‹åºæ‰¾å‡ºè¿™ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚è¦æ±‚æ—¶é—´å¤æ‚åº¦æ˜¯O-n-ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O-1" class="headerlink" title="ä¸€ä¸ªæ•´å‹æ•°ç»„é‡Œé™¤äº†ä¸€ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶å®ƒçš„æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚è¯·å†™ç¨‹åºæ‰¾å‡ºè¿™ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚è¦æ±‚æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(1)"></a>ä¸€ä¸ªæ•´å‹æ•°ç»„é‡Œé™¤äº†ä¸€ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶å®ƒçš„æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚è¯·å†™ç¨‹åºæ‰¾å‡ºè¿™ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚è¦æ±‚æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(1)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">void weiyuansuantest() &#123;</div><div class="line">//    int findUniq(int arr[],int length);</div><div class="line">    int arr[7] = &#123;2,3,7,2,3,5,5&#125;;</div><div class="line">    int length = sizeof(arr) / sizeof(int);</div><div class="line">    int out = findUniq(arr, length);</div><div class="line">    cout &lt;&lt; &quot;++++&quot; &lt;&lt; out &lt;&lt; &quot;----&quot; &lt;&lt; endl;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line">using namespace std;</div><div class="line"></div><div class="line">int findUniq(int arr[],int length) &#123;</div><div class="line">    </div><div class="line">    if (length &lt; 2) &#123;</div><div class="line">        return -1;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    int temp = 0;</div><div class="line">    </div><div class="line">    for (int i = 0;i &lt; length;i++) &#123;</div><div class="line">        int k = arr[i];</div><div class="line">        temp = temp ^ k;</div><div class="line">        cout &lt;&lt; &quot;---&quot; &lt;&lt; temp &lt;&lt; endl;</div><div class="line">    &#125;</div><div class="line">    return temp;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="ç°åœ¨é—®é¢˜å‡çº§äº†ï¼Œå˜æˆä¸¤ä¸ªå‡ºç°ä¸€æ¬¡çš„ï¼Œæ€ä¹ˆæ‰¾å‡ºæ¥ï¼Ÿ"><a href="#ç°åœ¨é—®é¢˜å‡çº§äº†ï¼Œå˜æˆä¸¤ä¸ªå‡ºç°ä¸€æ¬¡çš„ï¼Œæ€ä¹ˆæ‰¾å‡ºæ¥ï¼Ÿ" class="headerlink" title="ç°åœ¨é—®é¢˜å‡çº§äº†ï¼Œå˜æˆä¸¤ä¸ªå‡ºç°ä¸€æ¬¡çš„ï¼Œæ€ä¹ˆæ‰¾å‡ºæ¥ï¼Ÿ"></a>ç°åœ¨é—®é¢˜å‡çº§äº†ï¼Œå˜æˆä¸¤ä¸ªå‡ºç°ä¸€æ¬¡çš„ï¼Œæ€ä¹ˆæ‰¾å‡ºæ¥ï¼Ÿ</h4><p>æ•°ç»„é‡ŒåŒ…å«äº†ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ï¼Œé‚£ä¹ˆæ‰€æœ‰æ•°å­—ä¾æ¬¡å¼‚æˆ–çš„ç»“æœå°±æ˜¯è¿™ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—çš„å¼‚æˆ–ç»“æœã€‚æˆ‘ä»¬è¦æƒ³åŠæ³•åˆ©ç”¨è¿™ä¸ªå¼‚æˆ–ç»“æœï¼ŒæŠŠæ•°ç»„åˆ†ä¸ºä¸¤ä¸ªå­æ•°ç»„ï¼Œä¸€ä¸ªå­æ•°ç»„åŒ…å«ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ï¼Œå¦ä¸€ä¸ªæ•°ç»„åŒ…å«å¦ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚ç”±äºè¿™ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—è‚¯å®šä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå¼‚æˆ–ç»“æœè‚¯å®šä¸ä¸º0ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿™ä¸ªç»“æœæ•°å­—çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­è‡³å°‘å°±æœ‰ä¸€ä½ä¸º1ã€‚æˆ‘ä»¬åœ¨ç»“æœæ•°å­—ä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸º1çš„ä½çš„ä½ç½®ï¼Œè®°ä¸ºç¬¬Nä½ã€‚ç°åœ¨æˆ‘ä»¬ä»¥ç¬¬Nä½æ˜¯ä¸æ˜¯1ä¸ºæ ‡å‡†æŠŠåŸæ•°ç»„ä¸­çš„æ•°å­—åˆ†æˆä¸¤ä¸ªå­æ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå­æ•°ç»„ä¸­æ¯ä¸ªæ•°å­—çš„ç¬¬Nä½éƒ½ä¸º1ï¼Œè€Œç¬¬äºŒä¸ªå­æ•°ç»„çš„æ¯ä¸ªæ•°å­—çš„ç¬¬Nä½éƒ½ä¸º0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">//1.æ‰¾åˆ°å”¯ä¸€å€¼</div><div class="line">//2.åˆ©ç”¨å”¯ä¸€å€¼çš„ç¬¬ä¸€ä¸ª1ä½ç½®ï¼Œå°†æ•°å­—åˆ†æˆä¸¤æ‹¨</div><div class="line">//3.å¯¹ä¸¤ç»„åˆ†åˆ«æ±‚è§£</div><div class="line"></div><div class="line">void findTwoUniqe(int arr[],int length,int &amp;m1,int &amp;m2) &#123;</div><div class="line">    if (length &lt; 2) &#123;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    int temp = 0;</div><div class="line">    for (int i = 0; i &lt; length;i++) &#123;</div><div class="line">        int k = arr[i];</div><div class="line">        temp = temp ^ k;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    int indexN = findIndex1(temp);</div><div class="line">    </div><div class="line">    m1 = m2 = 0;</div><div class="line">    </div><div class="line">    for (int j = 0;j &lt; length;j++) &#123;</div><div class="line">        int p = arr[j];</div><div class="line">        </div><div class="line">        if (isBit1(p, indexN)) &#123;</div><div class="line">            m1 = m1 ^ p;</div><div class="line">        &#125;else &#123;</div><div class="line">            m2 = m2 ^ p;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">bool isBit1(int num,unsigned int index) &#123;</div><div class="line">    num = num &gt;&gt; index;</div><div class="line">    return (num &amp; 1);</div><div class="line">&#125;</div><div class="line"></div><div class="line">int findIndex1(int temp) &#123;</div><div class="line">    int index = 0;</div><div class="line">    while ((temp &amp; 1) != 1 &amp;&amp; index &lt; 32) &#123;</div><div class="line">        temp = temp &gt;&gt; 1;</div><div class="line">        index ++;</div><div class="line">    &#125;</div><div class="line">    return index;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="é¢˜ç›®ä¸ºï¼šç»™ä½ 1-1000ä¸ªè¿ç»­è‡ªç„¶æ•°ï¼Œç„¶åä»ä¸­éšæœºå»æ‰ä¸¤ä¸ªï¼Œå†æ‰“ä¹±é¡ºåºï¼Œè¦æ±‚åªéå†ä¸€æ¬¡ï¼Œæ±‚å‡ºè¢«å»æ‰çš„ä¸¤ä¸ªæ•°ã€‚"><a href="#é¢˜ç›®ä¸ºï¼šç»™ä½ 1-1000ä¸ªè¿ç»­è‡ªç„¶æ•°ï¼Œç„¶åä»ä¸­éšæœºå»æ‰ä¸¤ä¸ªï¼Œå†æ‰“ä¹±é¡ºåºï¼Œè¦æ±‚åªéå†ä¸€æ¬¡ï¼Œæ±‚å‡ºè¢«å»æ‰çš„ä¸¤ä¸ªæ•°ã€‚" class="headerlink" title="é¢˜ç›®ä¸ºï¼šç»™ä½ 1-1000ä¸ªè¿ç»­è‡ªç„¶æ•°ï¼Œç„¶åä»ä¸­éšæœºå»æ‰ä¸¤ä¸ªï¼Œå†æ‰“ä¹±é¡ºåºï¼Œè¦æ±‚åªéå†ä¸€æ¬¡ï¼Œæ±‚å‡ºè¢«å»æ‰çš„ä¸¤ä¸ªæ•°ã€‚"></a>é¢˜ç›®ä¸ºï¼šç»™ä½ 1-1000ä¸ªè¿ç»­è‡ªç„¶æ•°ï¼Œç„¶åä»ä¸­éšæœºå»æ‰ä¸¤ä¸ªï¼Œå†æ‰“ä¹±é¡ºåºï¼Œè¦æ±‚åªéå†ä¸€æ¬¡ï¼Œæ±‚å‡ºè¢«å»æ‰çš„ä¸¤ä¸ªæ•°ã€‚</h3><p>ï¼ˆåŸºæœ¬è·Ÿä¸Šé¢çš„é¢˜ä¸€æ ·ï¼‰</p>
<p>è§£æ³•1ï¼šä½¿ç”¨å¼‚æˆ–ã€‚</p>
<p>è¯´è¯´å¼‚æˆ–çš„ä¸¤ä¸ªç‰¹æ€§ï¼šé¡ºåºæ— å…³ / å¯¹ä¸€ä¸ªæ•°å¼‚æˆ–ä¸¤æ¬¡ç­‰äºæ²¡æœ‰å¼‚æˆ–ã€‚é¡ºåºæ— å…³å°±æ˜¯è¯´å¼‚æˆ–çš„å…ƒç´ å¯ä»¥éšæ„äº¤æ¢é¡ºåºï¼Œè€Œä¸ä¼šå½±å“ç»“æœã€‚å¼‚æˆ–ä¸¤æ¬¡å¯ä»¥ç†è§£ä¸º+xå’Œ-xã€‚</p>
<p>é¦–å…ˆï¼Œè¿™ä¸¤ä¸ªæ•°ç»„(æ‰“ä¹±å‰å’Œæ‰“ä¹±å)å„è‡ªå¼‚æˆ–ï¼Œä¹Ÿå°±æ˜¯1^2^â€¦^1000ï¼Œå¾—åˆ°ä¸¤ä¸ªå¼‚æˆ–å€¼ã€‚å†å¯¹è¿™ä¸¤ä¸ªå¼‚æˆ–å€¼è¿›è¡Œä¸€æ¬¡å¼‚æˆ–ï¼Œè¿™æ ·å°±å¾—åˆ°äº†x^yçš„æŒ‡(é‡å¤éƒ¨åˆ†äº’ç›¸æŠµæ¶ˆäº†)</p>
<h3 id="ç»™ä¸€ç»„æ•°å­—ï¼Œè¿™äº›æ•°å­—é‡Œé¢æ¯ä¸€ä¸ªéƒ½é‡å¤å‡ºç°äº†ä¸‰æ¬¡ï¼Œåªæœ‰ä¸€ä¸ªæ•°å­—åªå‡ºç°äº†ä¸€ä¸ªï¼Œè¦æ±‚åœ¨æ—¶é—´Oï¼ˆnï¼‰ç©ºé—´Oï¼ˆ1ï¼‰å†…è§£å‡ºæ¥"><a href="#ç»™ä¸€ç»„æ•°å­—ï¼Œè¿™äº›æ•°å­—é‡Œé¢æ¯ä¸€ä¸ªéƒ½é‡å¤å‡ºç°äº†ä¸‰æ¬¡ï¼Œåªæœ‰ä¸€ä¸ªæ•°å­—åªå‡ºç°äº†ä¸€ä¸ªï¼Œè¦æ±‚åœ¨æ—¶é—´Oï¼ˆnï¼‰ç©ºé—´Oï¼ˆ1ï¼‰å†…è§£å‡ºæ¥" class="headerlink" title="ç»™ä¸€ç»„æ•°å­—ï¼Œè¿™äº›æ•°å­—é‡Œé¢æ¯ä¸€ä¸ªéƒ½é‡å¤å‡ºç°äº†ä¸‰æ¬¡ï¼Œåªæœ‰ä¸€ä¸ªæ•°å­—åªå‡ºç°äº†ä¸€ä¸ªï¼Œè¦æ±‚åœ¨æ—¶é—´Oï¼ˆnï¼‰ç©ºé—´Oï¼ˆ1ï¼‰å†…è§£å‡ºæ¥"></a>ç»™ä¸€ç»„æ•°å­—ï¼Œè¿™äº›æ•°å­—é‡Œé¢æ¯ä¸€ä¸ªéƒ½é‡å¤å‡ºç°äº†ä¸‰æ¬¡ï¼Œåªæœ‰ä¸€ä¸ªæ•°å­—åªå‡ºç°äº†ä¸€ä¸ªï¼Œè¦æ±‚åœ¨æ—¶é—´Oï¼ˆnï¼‰ç©ºé—´Oï¼ˆ1ï¼‰å†…è§£å‡ºæ¥</h3>]]></content>
      
        
    </entry>
    
    <entry>
      <title><![CDATA[ç¬¬ä¸‰æ–¹åº“ç›¸å…³]]></title>
      <url>/2015/07/05/2015/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E7%9B%B8%E5%85%B3/</url>
      <content type="html"><![CDATA[<h3 id="AFNetworking"><a href="#AFNetworking" class="headerlink" title="AFNetworking"></a>AFNetworking</h3><p><img src="/05/2015/ç¬¬ä¸‰æ–¹åº“ç›¸å…³/../../../images/2018-07-052.27.05.png" alt=""></p>
<p><img src="/05/2015/ç¬¬ä¸‰æ–¹åº“ç›¸å…³/../../../images/2018-07-052.28.42.png" alt=""></p>
<p><img src="/05/2015/ç¬¬ä¸‰æ–¹åº“ç›¸å…³/../../../images/2018-07-052.29.42.png" alt=""></p>
<a id="more"></a>
<h3 id="SDWebImage"><a href="#SDWebImage" class="headerlink" title="SDWebImage"></a>SDWebImage</h3><p><img src="/05/2015/ç¬¬ä¸‰æ–¹åº“ç›¸å…³/../../../images/2018-07-052.34.09.png" alt=""></p>
<h3 id="ReactiveCocoa"><a href="#ReactiveCocoa" class="headerlink" title="ReactiveCocoa"></a>ReactiveCocoa</h3><ul>
<li>ä¿¡å·</li>
<li>è®¢é˜…</li>
</ul>
<p>RACSignalâ€“&gt;RACStream</p>
<h3 id="AsyncDisplayKit"><a href="#AsyncDisplayKit" class="headerlink" title="AsyncDisplayKit"></a>AsyncDisplayKit</h3><p>ASNodeçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥æ”¾åœ¨å­çº¿ç¨‹</p>
<p>é’ˆå¯¹ASNodeçš„ä¿®æ”¹å’Œæäº¤ï¼Œä¼šå¯¹å…¶è¿›è¡Œå°è£…å¹¶ä¸”æäº¤åˆ°ä¸€ä¸ªå…¨å±€å®¹å™¨ä¸­ï¼ŒASKDä¹Ÿåœ¨runloopä¸­æ³¨å†Œäº†ä¸€ä¸ªObserverï¼Œå½“Runloopè¿›å…¥ä¼‘çœ å‰ï¼ŒASDKæ‰§è¡Œè¯¥loopå†…æäº¤æ‰€æœ‰çš„ä»»åŠ¡ã€‚</p>
<p><img src="/05/2015/ç¬¬ä¸‰æ–¹åº“ç›¸å…³/../../../images/2018-07-052.38.30.png" alt=""></p>
<p><img src="/05/2015/ç¬¬ä¸‰æ–¹åº“ç›¸å…³/../../../images/2018-07-052.39.29.png" alt=""></p>
]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ¶æ„ä¸æ¡†æ¶]]></title>
      <url>/2015/07/05/2015/%E6%9E%B6%E6%9E%84%E4%B8%8E%E6%A1%86%E6%9E%B6/</url>
      <content type="html"><![CDATA[<h3 id="å›¾ç‰‡ç¼“å­˜"><a href="#å›¾ç‰‡ç¼“å­˜" class="headerlink" title="å›¾ç‰‡ç¼“å­˜"></a>å›¾ç‰‡ç¼“å­˜</h3><p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0511.21.13.png" alt=""></p>
<p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0511.22.17.png" alt=""><br><a id="more"></a></p>
<h4 id="å†…å­˜è®¾è®¡çš„é—®é¢˜ï¼Ÿ"><a href="#å†…å­˜è®¾è®¡çš„é—®é¢˜ï¼Ÿ" class="headerlink" title="å†…å­˜è®¾è®¡çš„é—®é¢˜ï¼Ÿ"></a>å†…å­˜è®¾è®¡çš„é—®é¢˜ï¼Ÿ</h4><ul>
<li>Size</li>
<li>æ·˜æ±°ç­–ç•¥</li>
</ul>
<p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0511.24.57.png" alt=""></p>
<h4 id="æ·˜æ±°ç­–ç•¥"><a href="#æ·˜æ±°ç­–ç•¥" class="headerlink" title="æ·˜æ±°ç­–ç•¥"></a>æ·˜æ±°ç­–ç•¥</h4><ul>
<li>é˜Ÿåˆ—å…ˆè¿›å…ˆå‡º</li>
<li>LRUç®—æ³•(æœ€è¿‘æœªä½¿ç”¨ï¼Œå¦‚30åˆ†é’Ÿ)</li>
</ul>
<p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0511.28.32.png" alt=""></p>
<h4 id="ç£ç›˜è®¾è®¡æ–¹æ¡ˆè€ƒè™‘"><a href="#ç£ç›˜è®¾è®¡æ–¹æ¡ˆè€ƒè™‘" class="headerlink" title="ç£ç›˜è®¾è®¡æ–¹æ¡ˆè€ƒè™‘"></a>ç£ç›˜è®¾è®¡æ–¹æ¡ˆè€ƒè™‘</h4><ul>
<li>å­˜å‚¨æ–¹å¼</li>
<li>å¤§å°é™åˆ¶(100M)</li>
<li>æ·˜æ±°ç­–ç•¥ï¼Œæ¯”å¦‚å­˜å‚¨äº‹ä»¶è¶…è¿‡7å¤©</li>
</ul>
<h4 id="ç½‘ç»œéƒ¨åˆ†çš„è®¾è®¡éœ€è¦è€ƒè™‘å“ªäº›ï¼Ÿ"><a href="#ç½‘ç»œéƒ¨åˆ†çš„è®¾è®¡éœ€è¦è€ƒè™‘å“ªäº›ï¼Ÿ" class="headerlink" title="ç½‘ç»œéƒ¨åˆ†çš„è®¾è®¡éœ€è¦è€ƒè™‘å“ªäº›ï¼Ÿ"></a>ç½‘ç»œéƒ¨åˆ†çš„è®¾è®¡éœ€è¦è€ƒè™‘å“ªäº›ï¼Ÿ</h4><ul>
<li>å›¾ç‰‡è¯·æ±‚æœ€å¤§å¹¶å‘</li>
<li>è¯·æ±‚è¶…æ—¶</li>
<li>ä¼˜å…ˆçº§</li>
</ul>
<h4 id="ä¸åŒæ ¼å¼çš„å›¾ç‰‡ï¼Œè§£ç é‡‡ç”¨ä»€ä¹ˆæ–¹å¼æ¥åšï¼Ÿ"><a href="#ä¸åŒæ ¼å¼çš„å›¾ç‰‡ï¼Œè§£ç é‡‡ç”¨ä»€ä¹ˆæ–¹å¼æ¥åšï¼Ÿ" class="headerlink" title="ä¸åŒæ ¼å¼çš„å›¾ç‰‡ï¼Œè§£ç é‡‡ç”¨ä»€ä¹ˆæ–¹å¼æ¥åšï¼Ÿ"></a>ä¸åŒæ ¼å¼çš„å›¾ç‰‡ï¼Œè§£ç é‡‡ç”¨ä»€ä¹ˆæ–¹å¼æ¥åšï¼Ÿ</h4><ul>
<li>åº”ç”¨ç­–ç•¥æ¨¡å¼å¯¹ä¸åŒå›¾ç‰‡æ ¼å¼è¿›è¡Œè§£ç </li>
</ul>
<h4 id="å“ªä¸ªé˜¶æ®µåšå›¾ç‰‡è§£ç ï¼Ÿ"><a href="#å“ªä¸ªé˜¶æ®µåšå›¾ç‰‡è§£ç ï¼Ÿ" class="headerlink" title="å“ªä¸ªé˜¶æ®µåšå›¾ç‰‡è§£ç ï¼Ÿ"></a>å“ªä¸ªé˜¶æ®µåšå›¾ç‰‡è§£ç ï¼Ÿ</h4><ul>
<li>ç£ç›˜è¯»å–å</li>
<li>ç½‘ç»œè¯·æ±‚è¿”å›å</li>
</ul>
<h4 id="çº¿ç¨‹å¤„ç†"><a href="#çº¿ç¨‹å¤„ç†" class="headerlink" title="çº¿ç¨‹å¤„ç†"></a>çº¿ç¨‹å¤„ç†</h4><p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0512.16.59.png" alt=""></p>
<h3 id="æ—¶é•¿ç»Ÿè®¡æ¡†æ¶"><a href="#æ—¶é•¿ç»Ÿè®¡æ¡†æ¶" class="headerlink" title="æ—¶é•¿ç»Ÿè®¡æ¡†æ¶"></a>æ—¶é•¿ç»Ÿè®¡æ¡†æ¶</h3><p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0512.29.29.png" alt=""><br><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0512.32.44.png" alt=""><br><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0512.33.42.png" alt=""><br><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0512.34.37.png" alt=""><br><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0512.35.39.png" alt=""></p>
<h3 id="å¤æ‚é¡µé¢è®¾è®¡"><a href="#å¤æ‚é¡µé¢è®¾è®¡" class="headerlink" title="å¤æ‚é¡µé¢è®¾è®¡"></a>å¤æ‚é¡µé¢è®¾è®¡</h3><p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0512.41.02.png" alt=""></p>
<p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0512.42.29.png" alt=""></p>
<p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0512.45.00.png" alt=""></p>
<p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0512.48.09.png" alt=""></p>
<p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0512.48.53.png" alt=""></p>
<p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0512.50.13.png" alt=""></p>
<p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-0512.50.23.png" alt=""></p>
<p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-052.04.54.png" alt=""></p>
<p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-052.05.31.png" alt=""></p>
<p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../images/2018-07-052.07.43.png" alt=""></p>
<p>MVVMçš„æ¶æ„æ€æƒ³</p>
<p>RNæ•°æ®æµæ€æƒ³</p>
<p>UIViewæ›´æ–°æœºåˆ¶</p>
<p>AsyncDisplayKitå…³äºé¢„æ’ç‰ˆçš„æ€æƒ³</p>
<h3 id="æ•´ä½“æ¶æ„"><a href="#æ•´ä½“æ¶æ„" class="headerlink" title="æ•´ä½“æ¶æ„"></a>æ•´ä½“æ¶æ„</h3><p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-052.21.55.png" alt=""></p>
<h4 id="å®¢æˆ·ç«¯è§£è€¦"><a href="#å®¢æˆ·ç«¯è§£è€¦" class="headerlink" title="å®¢æˆ·ç«¯è§£è€¦"></a>å®¢æˆ·ç«¯è§£è€¦</h4><ul>
<li>OpenURL</li>
<li>ä¾èµ–æ³¨å…¥</li>
</ul>
<p><img src="/05/2015/æ¶æ„ä¸æ¡†æ¶/../../../images/2018-07-052.22.57.png" alt=""></p>
]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[è®¾è®¡æ¨¡å¼ç›¸å…³]]></title>
      <url>/2015/07/05/2015/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9B%B8%E5%85%B3/</url>
      <content type="html"><![CDATA[<p><img src="/05/2015/è®¾è®¡æ¨¡å¼ç›¸å…³/../../../images/2018-07-059.39.25.png" alt=""></p>
<p>1.ä»£ç†æ¨¡å¼</p>
<p>2.è§‚å¯Ÿè€…æ¨¡å¼</p>
<p>3.MVCæ¨¡å¼</p>
<p>4.å•ä¾‹æ¨¡å¼</p>
<p>5.ç­–ç•¥æ¨¡å¼</p>
<p>6.å·¥å‚æ¨¡å¼</p>
<h3 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼</h3><p>è´£ä»»é“¾:å“åº”è€…é“¾æ¡<br><a id="more"></a><br><img src="/05/2015/è®¾è®¡æ¨¡å¼ç›¸å…³/../../../images/2018-07-059.24.05.png" alt=""></p>
<h3 id="è®¾è®¡åŸåˆ™"><a href="#è®¾è®¡åŸåˆ™" class="headerlink" title="è®¾è®¡åŸåˆ™"></a>è®¾è®¡åŸåˆ™</h3><h5 id="å•ä¸€èŒè´£"><a href="#å•ä¸€èŒè´£" class="headerlink" title="å•ä¸€èŒè´£:"></a>å•ä¸€èŒè´£:</h5><p>ä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä»¶äº‹ï¼Œæ¯”å¦‚UIViewè´Ÿè´£äº‹ä»¶ï¼ŒCALayeråªè´Ÿè´£æ˜¾ç¤º</p>
<h5 id="å¼€é—­åŸåˆ™"><a href="#å¼€é—­åŸåˆ™" class="headerlink" title="å¼€é—­åŸåˆ™:"></a>å¼€é—­åŸåˆ™:</h5><p>å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾</p>
<p>å¯¹å±æ€§çš„å®šä¹‰è¦å°å¿ƒï¼Œä»¥åæ‰©å±•è¦å°½é‡ä¸ä¿®æ”¹ç±»æœ¬èº«</p>
<h5 id="æ¥å£éš”ç¦»"><a href="#æ¥å£éš”ç¦»" class="headerlink" title="æ¥å£éš”ç¦»:"></a>æ¥å£éš”ç¦»:</h5><p>ä½¿ç”¨å¾ˆå¤šä¸“é—¨åè®®ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåºå¤§è‡ƒè‚¿çš„åè®®</p>
<p>åè®®ä¸­çš„æ–¹æ³•å°½é‡å°‘</p>
<p>æ¯”å¦‚tableviewçš„datasourceå’Œdelegateä¸¤ç§åè®®</p>
<h5 id="ä¾èµ–å€’ç½®åŸåˆ™"><a href="#ä¾èµ–å€’ç½®åŸåˆ™" class="headerlink" title="ä¾èµ–å€’ç½®åŸåˆ™:"></a>ä¾èµ–å€’ç½®åŸåˆ™:</h5><p>æŠ½è±¡ä¸åº”è¯¥ä¾èµ–å…·ä½“å®ç°ï¼Œå…·ä½“å®ç°å¯ä»¥ä¾èµ–æŠ½è±¡</p>
<p>æ‰€æœ‰ä¸Šå±‚åªä¾èµ–æ¥å£å®šä¹‰ï¼Œå…·ä½“é‡Œè¾¹çš„å®ç°æ˜¯ä¸å…³æ³¨çš„</p>
<h5 id="é‡Œæ°æ›¿æ¢"><a href="#é‡Œæ°æ›¿æ¢" class="headerlink" title="é‡Œæ°æ›¿æ¢:"></a>é‡Œæ°æ›¿æ¢:</h5><p>çˆ¶ç±»å¯ä»¥è¢«å­ç±»æ— ç¼æ›¿æ¢ï¼Œä¸”åŸæœ‰åŠŸèƒ½ä¸å—å½±å“</p>
<p>æ¯”å¦‚KVO</p>
<h5 id="è¿ªç±³ç‰¹æ³•åˆ™"><a href="#è¿ªç±³ç‰¹æ³•åˆ™" class="headerlink" title="è¿ªç±³ç‰¹æ³•åˆ™:"></a>è¿ªç±³ç‰¹æ³•åˆ™:</h5><p>ä¸€ä¸ªå¯¹è±¡åº”å½“å¯¹å…¶ä»–å¯¹è±¡å°½å¯èƒ½å°‘çš„äº†è§£</p>
<p>è¿™æ ·å°±å¯ä»¥åšåˆ°é«˜å†…èšï¼Œä½è€¦åˆ</p>
<h3 id="è´£ä»»é“¾"><a href="#è´£ä»»é“¾" class="headerlink" title="è´£ä»»é“¾"></a>è´£ä»»é“¾</h3><p>è°ƒæ•´nextResponderæŒ‡å‘</p>
<p><img src="/05/2015/è®¾è®¡æ¨¡å¼ç›¸å…³/../../../images/2018-07-059.png" alt=""></p>
<h3 id="æ¡¥æ¥æ¨¡å¼"><a href="#æ¡¥æ¥æ¨¡å¼" class="headerlink" title="æ¡¥æ¥æ¨¡å¼"></a>æ¡¥æ¥æ¨¡å¼</h3><p>è¿™ä¸ªæ˜¯ä¸€ä¸ªç‰¹åˆ«ç‰›é€¼çš„æ–¹æ³•ï¼Œä¸¾ä¸€ä¸ªå®é™…çš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚ç°åœ¨æœ‰3ç§å¸ƒå±€æ ·å¼çš„cellï¼Œç„¶åè¿˜æœ‰3ç§æ’ä»¶ï¼Œç°åœ¨ä½ è¦åœ¨ä¸€ä¸ªtableviewç§ä»»æ„ç»„åˆè¿™å‡ ç§æƒ…å†µï¼Œå¦‚æœæ‰€æœ‰çš„cellç±»å‹éƒ½æš´éœ²ç»™tableviewï¼Œé‚£ä¹ˆè¿™ä¸ªé€»è¾‘å°†å¾ˆå¤æ‚ï¼Œé‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>è§£å†³åŠæ³•æ˜¯å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»å«åšAï¼Œä»£è¡¨cellï¼Œå†å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»Bï¼Œä»£è¡¨æ’ä»¶ï¼Œæ ¹æ®ç½‘ç»œæ•°æ®å†³å®šå®é™…åˆå§‹åŒ–Açš„æ—¶å€™åˆå§‹åŒ–å…·ä½“å“ªä¸ªå­ç±»ï¼Œä½†æ˜¯åœ¨tableviewå†™ä»£ç çš„æ—¶å€™åªéœ€è¦é¢å¯¹Aå°±å¥½äº†ï¼Œå°†å¤§å¤§å°†å°‘æ§åˆ¶å™¨å¯¹cellçš„å„ç§ç±»å‹çš„ä¾èµ–ã€‚</p>
<p><img src="/05/2015/è®¾è®¡æ¨¡å¼ç›¸å…³/../../../images/2018-07-059.51.11.png" alt=""></p>
<h3 id="é€‚é…å™¨"><a href="#é€‚é…å™¨" class="headerlink" title="é€‚é…å™¨"></a>é€‚é…å™¨</h3><p>ä¸€ä¸ªç°æœ‰ç±»éœ€è¦é€‚åº”å˜åŒ–çš„é—®é¢˜ï¼Ÿ</p>
<ul>
<li>å¯¹è±¡é€‚é…å™¨</li>
<li>ç±»é€‚é…å™¨</li>
</ul>
<p>è§£å†³åŠæ³•æ˜¯åˆ›å»ºä¸€ä¸ªæ–°ç±»ï¼Œå¯¹åŸæ¥çš„ç±»è¿›è¡Œä¸€ä¸ªåŒ…è£…ï¼Œç„¶åæ—§å¯¹è±¡åšä¸ºä¸€ä¸ªæˆå‘˜å˜é‡ï¼ŒæŠŠä½ çš„æ–°é€»è¾‘å¢åŠ åˆ°ä¹‹å‰çš„æ–¹æ³•è°ƒç”¨ä¹‹å‰æˆ–è€…ä¹‹åã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">@implementation CoolTarget</div><div class="line"></div><div class="line">- (void)request</div><div class="line">&#123;</div><div class="line">    // é¢å¤–å¤„ç†</div><div class="line">    </div><div class="line">    [self.target operation];</div><div class="line">    </div><div class="line">    // é¢å¤–å¤„ç†</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<h3 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">#import &quot;Mooc.h&quot;</div><div class="line"></div><div class="line">@implementation Mooc</div><div class="line"></div><div class="line">+ (id)sharedInstance</div><div class="line">&#123;</div><div class="line">    // é™æ€å±€éƒ¨å˜é‡</div><div class="line">    static Mooc *instance = nil;</div><div class="line">    </div><div class="line">    // é€šè¿‡dispatch_onceæ–¹å¼ ç¡®ä¿instanceåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹åªè¢«åˆ›å»ºä¸€æ¬¡</div><div class="line">    static dispatch_once_t onceToken;</div><div class="line">    dispatch_once(&amp;onceToken, ^&#123;</div><div class="line">        // åˆ›å»ºå®ä¾‹</div><div class="line">        instance = [[super allocWithZone:NULL] init];</div><div class="line">    &#125;);</div><div class="line">    return instance;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// é‡å†™æ–¹æ³•ã€å¿…ä¸å¯å°‘ã€‘</div><div class="line">+ (id)allocWithZone:(struct _NSZone *)zone&#123;</div><div class="line">    return [self sharedInstance];</div><div class="line">&#125;</div><div class="line"></div><div class="line">// é‡å†™æ–¹æ³•ã€å¿…ä¸å¯å°‘ã€‘</div><div class="line">- (id)copyWithZone:(nullable NSZone *)zone&#123;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>æ³¨æ„ä¸‰ä¸ªç‚¹:</p>
<ul>
<li>é‡å†™allocWithZone</li>
<li>é‡å†™copyWithZone</li>
<li>è¦è°ƒç”¨super allocWithZoneï¼Œä¸ç”¨selfé˜²æ­¢å¾ªç¯è°ƒç”¨</li>
</ul>
<h3 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h3><p>è¡Œä¸ºå‚æ•°åŒ–</p>
<p>ä½œç”¨ï¼Œé™ä½ä»£ç é‡åˆåº¦</p>
<p>å®é™…ä½¿ç”¨åœºæ™¯ï¼Œè½¬å‘ï¼Œè¯„è®ºï¼Œèµç­‰ï¼Œå¦‚æœæ²¡æœ‰å‘½ä»¤æ¨¡å¼ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸ªé¡µé¢è¿›è¡Œç›¸å…³å¤„ç†ï¼Œå¦‚æœè¿›è¡Œäº†è¡Œä¸ºå‚æ•°åŒ–ï¼Œé‚£ä¹ˆå°±èƒ½çœä¸‹å¾ˆå¤šä¸œè¥¿ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ä¸¤ä¸ªæ¨¡å—ï¼Œä¸€ä¸ªæ˜¯å‘½ä»¤ç®¡ç†è€…ï¼Œä¸€ä¸ªæ˜¯å‘½ä»¤çš„è™šæ‹Ÿç±»ï¼Œæœ€åæ˜¯å¾ˆå¤šå‘½ä»¤çš„å…·ä½“å­ç±»ã€‚</p>
<p>å½“æˆ‘ä»¬éœ€è¦æ‰§è¡Œä¸€ä¸ªå‘½ä»¤çš„æ—¶å€™å°±ç›´æ¥è°ƒç”¨è¿™ä¸ªç®¡ç†è€…ï¼Œç„¶åæ‰§è¡Œè¿™ä¸ªå‘½ä»¤å°±å¥½äº†ã€‚</p>
]]></content>
      
        
    </entry>
    
    <entry>
      <title><![CDATA[ç½‘ç»œç›¸å…³]]></title>
      <url>/2015/07/04/2015/%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%85%B3/</url>
      <content type="html"><![CDATA[<h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.10.24.png" alt=""><br><a id="more"></a><br>è¯·æ±‚è¡Œ</p>
<p>é¦–éƒ¨å­—æ®µåŒº</p>
<p>å®ä½“ä¸»ä½“ï¼Œgetæ²¡æœ‰ï¼Œpostæœ‰</p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.10.42.png" alt=""><br>å“åº”è¡Œ</p>
<p>é¦–éƒ¨å­—æ®µåŒº</p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.11.18.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.12.38.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.13.08.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.14.53.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.16.57.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.22.50.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.24.05.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.25.13.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.26.06.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-04.27.38.png" alt=""></p>
<p>httpsçš„å»ºç«‹æµç¨‹<br><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.33.19.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.34.25.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.35.52.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.36.53.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.37.39.png" alt=""></p>
<p><a href="https://blog.csdn.net/u013401853/article/details/52781072" target="_blank" rel="external">httpså»ºç«‹è¿æ¥è¯¦ç»†</a></p>
<p>é ç­¾åçŸ¥é“è°æ˜¯è°ï¼Œæ‰€ä»¥ï¼Œç­¾åä¸€å®šæ˜¯ç§é’¥ã€‚</p>
<h4 id="å…³äºåŠ å¯†ç®—æ³•"><a href="#å…³äºåŠ å¯†ç®—æ³•" class="headerlink" title="å…³äºåŠ å¯†ç®—æ³•"></a>å…³äºåŠ å¯†ç®—æ³•</h4><p>éå¯¹ç§°</p>
<ul>
<li>RSA</li>
</ul>
<p>å¯¹ç§°</p>
<ul>
<li>DES</li>
</ul>
<h3 id="TCP-UDP"><a href="#TCP-UDP" class="headerlink" title="TCP/UDP"></a>TCP/UDP</h3><blockquote>
<p>ä¸httpçš„å…³ç³»ï¼ŒTPC/IPåè®®æ˜¯ä¼ è¾“å±‚åè®®ï¼Œä¸»è¦è§£å†³æ•°æ®å¦‚ä½•åœ¨ç½‘ç»œä¸­ä¼ è¾“ï¼Œè€ŒHTTPæ˜¯åº”ç”¨å±‚åè®®ï¼Œä¸»è¦è§£å†³å¦‚ä½•åŒ…è£…æ•°æ®ï¼ŒæŠŠIPæƒ³åƒæˆä¸€ç§é«˜é€Ÿå…¬è·¯ï¼Œå®ƒå…è®¸å…¶å®ƒåè®®åœ¨ä¸Šé¢è¡Œé©¶å¹¶æ‰¾åˆ°åˆ°å…¶å®ƒç”µè„‘çš„å‡ºå£ã€‚TCPå’ŒUDPæ˜¯é«˜é€Ÿå…¬è·¯ä¸Šçš„â€œå¡è½¦â€ï¼Œå®ƒä»¬æºå¸¦çš„è´§ç‰©å°±æ˜¯åƒHTTPï¼Œæ–‡ä»¶ä¼ è¾“åè®®FTPè¿™æ ·çš„åè®®ç­‰</p>
</blockquote>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-049.52.56.png" alt=""></p>
<h4 id="UDP"><a href="#UDP" class="headerlink" title="UDP ==================="></a>UDP ===================</h4><p>ç‰¹ç‚¹ä¸åŠŸèƒ½</p>
<p>ç‰¹ç‚¹:é¢å‘æŠ¥æ–‡ï¼Œæ—¢ä¸åˆå¹¶ä¹Ÿä¸æ‹†åˆ†</p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-0410.51.00.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-0410.51.50.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-0410.52.41.png" alt=""></p>
<p>å·®é”™æ£€æµ‹çš„æ€è·¯å’Œç­–ç•¥å¯ä»¥ç”¨åœ¨å¾®ä¿¡ç­‰IMåº”ç”¨ä¸Š<br><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-0410.55.39.png" alt=""></p>
<h4 id="TCP"><a href="#TCP" class="headerlink" title="TCP ======================"></a>TCP ======================</h4><h5 id="TCPä¸­çš„çŠ¶æ€ç "><a href="#TCPä¸­çš„çŠ¶æ€ç " class="headerlink" title="TCPä¸­çš„çŠ¶æ€ç "></a>TCPä¸­çš„çŠ¶æ€ç </h5><p>åœ¨TCPå±‚ï¼Œæœ‰ä¸ªFLAGSå­—æ®µï¼Œè¿™ä¸ªå­—æ®µæœ‰ä»¥ä¸‹å‡ ä¸ªæ ‡è¯†ï¼šSYN, FIN, ACK, PSH, RST, URG.</p>
<p>å…¶ä¸­ï¼Œå¯¹äºæˆ‘ä»¬æ—¥å¸¸çš„åˆ†ææœ‰ç”¨çš„å°±æ˜¯å‰é¢çš„äº”ä¸ªå­—æ®µã€‚</p>
<p>å®ƒä»¬çš„å«ä¹‰æ˜¯ï¼š</p>
<p>SYNè¡¨ç¤ºå»ºç«‹è¿æ¥ï¼Œ</p>
<p>FINè¡¨ç¤ºå…³é—­è¿æ¥ï¼Œ</p>
<p>ACKè¡¨ç¤ºå“åº”ï¼Œ</p>
<p>PSHè¡¨ç¤ºæœ‰ DATAæ•°æ®ä¼ è¾“ï¼Œ</p>
<p>RSTè¡¨ç¤ºè¿æ¥é‡ç½®</p>
<h5 id="TCPè¿æ¥å’Œæ–­å¼€"><a href="#TCPè¿æ¥å’Œæ–­å¼€" class="headerlink" title="TCPè¿æ¥å’Œæ–­å¼€"></a>TCPè¿æ¥å’Œæ–­å¼€</h5><p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-0410.56.57.png" alt=""></p>
<p>ä¸ºä»€ä¹ˆä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</p>
<p>å‡è®¾è¶…æ—¶ï¼Œä¼šè§¦å‘clientçš„è¶…æ—¶é‡ä¼ ï¼Œæ–°çš„synä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œè¿™ä¸ªæ—¶å€™æœåŠ¡ç«¯ä¼šå¯ä¸€ä¸ªè¿›ç¨‹æ¥å¤„ç†è¿™ä¸ªè¿æ¥ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™clientçš„æ—§çš„synåˆ°è¾¾äº†ï¼Œserverä¼šç»™clientä¸€ä¸ªç¡®è®¤ï¼Œä½†æ˜¯åœ¨clientçœ‹æ¥è¿™æ˜¯ä¸€ä¸ªè¯·æ±‚ï¼Œå°±ä¸ä¼šç»™ackå‘é€ackç¡®è®¤ï¼Œé‚£ä¹ˆserverå°±ä¸ä¼šå¯åŠ¨æ–°è¿›ç¨‹å¤„ç†è¿™ä¸ªï¼Œè¿™æ ·å°±èƒ½è§„é¿è¿æ¥å¼‚å¸¸çš„é—®é¢˜ã€‚</p>
<p>ä¸ºå•¥è¦å››æ¬¡æŒ¥æ‰‹ï¼Ÿ</p>
<p>å› ä¸ºå»ºç«‹çš„è¿æ¥æ˜¯åŒå‘é€šè®¯çš„ï¼Œå­¦åå«åšåŒå·¥ï¼Œå…ˆæ˜¯clientåˆ°serverçš„ä¼ è¾“å…³é—­ï¼Œè¿™ä¸ªæ—¶å€™serveråˆ°clientæ˜¯å¯ä»¥å‘é€æ•°æ®çš„ï¼Œåè¾¹åœ¨åˆé€‚çš„æ—¶é—´ï¼Œserverå†æ–­æ‰å®ƒçš„è¿æ¥</p>
<p>å¯é æ€§å¦‚ä½•ä¿è¯ï¼Ÿ</p>
<p>è¶…æ—¶é‡ä¼ ï¼Œä¸¢å¼ƒï¼Œå¿½ç•¥</p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-0411.03.18.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-0411.05.45.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-0411.06.57.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-0411.07.28.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-0411.08.19.png" alt=""></p>
<h4 id="é¢å‘å­—èŠ‚æµ"><a href="#é¢å‘å­—èŠ‚æµ" class="headerlink" title="é¢å‘å­—èŠ‚æµ"></a>é¢å‘å­—èŠ‚æµ</h4><p>ä¸ç®¡å‘é€æ–¹ç»™tcpå¤šå°‘æ•°æ®ï¼Œtcpä¼šæ ¹æ®å®é™…æƒ…å†µï¼Œè¿›è¡Œæ‹†åˆ†æˆ–è€…åˆå¹¶ï¼Œè¿›è¡Œä¼ è¾“ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå‘é€ç¼“å­˜å’Œæ¥æ”¶ç¼“å­˜çš„æ¦‚å¿µ</p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-042.28.17.png" alt=""></p>
<h4 id="æµé‡æ§åˆ¶"><a href="#æµé‡æ§åˆ¶" class="headerlink" title="æµé‡æ§åˆ¶"></a>æµé‡æ§åˆ¶</h4><p>åŸºäºæ»‘åŠ¨çª—å£åè®®ï¼Œè¿™ä¸ªåè®®ä¹Ÿå¯ä»¥ä¿éšœæŒ‰åºåˆ°è¾¾</p>
<p>æ¯ä¸ªæ•°æ®åŒ…å…ˆåŠ ä¸€ä¸ªtcpå¤´ï¼Œå†åŠ ä¸€ä¸ªipå¤´ã€‚</p>
<p>TCPå¹¶ä¸æ˜¯æ¯ä¸€ä¸ªæŠ¥æ–‡æ®µéƒ½ä¼šå›å¤ACKçš„ï¼Œå¯èƒ½ä¼šå¯¹ä¸¤ä¸ªæŠ¥æ–‡æ®µå‘é€ä¸€ä¸ªACKï¼Œä¹Ÿå¯èƒ½ä¼šå¯¹å¤šä¸ªæŠ¥æ–‡æ®µå‘é€1ä¸ªACKã€ç´¯è®¡ACKã€‘ï¼Œæ¯”å¦‚è¯´å‘é€æ–¹æœ‰1/2/3 3ä¸ªæŠ¥æ–‡æ®µï¼Œå…ˆå‘é€äº†2,3 ä¸¤ä¸ªæŠ¥æ–‡æ®µï¼Œä½†æ˜¯æ¥æ”¶æ–¹æœŸæœ›æ”¶åˆ°1æŠ¥æ–‡æ®µï¼Œè¿™ä¸ªæ—¶å€™2,3æŠ¥æ–‡æ®µå°±åªèƒ½æ”¾åœ¨ç¼“å­˜ä¸­ç­‰å¾…æŠ¥æ–‡1çš„ç©ºæ´è¢«å¡«ä¸Šï¼Œå¦‚æœæŠ¥æ–‡1ï¼Œä¸€ç›´ä¸æ¥ï¼ŒæŠ¥æ–‡2/3ä¹Ÿå°†è¢«ä¸¢å¼ƒï¼Œå¦‚æœæŠ¥æ–‡1æ¥äº†ï¼Œé‚£ä¹ˆä¼šå‘é€ä¸€ä¸ªACKå¯¹è¿™3ä¸ªæŠ¥æ–‡è¿›è¡Œä¸€æ¬¡ç¡®è®¤ã€‚</p>
<p>ä¸¾ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹æ»‘åŠ¨çª—å£çš„åŸç†ï¼š</p>
<ol>
<li><p>å‡è®¾32~45 è¿™äº›æ•°æ®ï¼Œæ˜¯ä¸Šå±‚Applicationå‘é€ç»™TCPçš„ï¼ŒTCPå°†å…¶åˆ†æˆå››ä¸ªSegmentæ¥å‘å¾€internet</p>
</li>
<li><p>seg1 32~34 seg3 35~36 seg3 37~41 seg4 42~45  è¿™å››ä¸ªç‰‡æ®µï¼Œä¾æ¬¡å‘é€å‡ºå»ï¼Œæ­¤æ—¶å‡è®¾æ¥æ”¶ç«¯ä¹‹æ¥æ”¶åˆ°äº†seg1 seg2 seg4</p>
</li>
<li><p>æ­¤æ—¶æ¥æ”¶ç«¯çš„è¡Œä¸ºæ˜¯å›å¤ä¸€ä¸ªACKåŒ…è¯´æ˜å·²ç»æ¥æ”¶åˆ°äº†32~36çš„æ•°æ®ï¼Œå¹¶å°†seg4è¿›è¡Œç¼“å­˜ï¼ˆä¿è¯é¡ºåºï¼Œäº§ç”Ÿä¸€ä¸ªä¿å­˜seg3 çš„holeï¼‰</p>
</li>
<li><p>å‘é€ç«¯æ”¶åˆ°ACKä¹‹åï¼Œå°±ä¼šå°†32~36çš„æ•°æ®åŒ…ä»å‘é€å¹¶æ²¡æœ‰ç¡®è®¤åˆ‡åˆ°å‘é€å·²ç»ç¡®è®¤ï¼Œæå‡ºçª—å£ï¼Œè¿™ä¸ªæ—¶å€™çª—å£å‘å³ç§»åŠ¨</p>
</li>
<li><p>å‡è®¾æ¥æ”¶ç«¯é€šå‘Šçš„Window Sizeä»ç„¶ä¸å˜ï¼Œæ­¤æ—¶çª—å£å³ç§»ï¼Œäº§ç”Ÿä¸€äº›æ–°çš„ç©ºä½ï¼Œè¿™äº›æ˜¯æ¥æ”¶ç«¯å…è®¸å‘é€çš„èŒƒç•´</p>
</li>
<li><p>å¯¹äºä¸¢å¤±çš„seg3ï¼Œå¦‚æœè¶…è¿‡ä¸€å®šæ—¶é—´ï¼ŒTCPå°±ä¼šé‡æ–°ä¼ é€ï¼ˆé‡ä¼ æœºåˆ¶ï¼‰ï¼Œé‡ä¼ æˆåŠŸä¼šseg3 seg4ä¸€å—è¢«ç¡®è®¤ï¼Œä¸æˆåŠŸï¼Œseg4ä¹Ÿå°†è¢«ä¸¢å¼ƒ</p>
</li>
</ol>
<p><a href="https://v.youku.com/v_show/id_XNDg1NDUyMDUy.html" target="_blank" rel="external">æ»‘åŠ¨çª—å£åŠ¨ç”»</a></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-045.23.09.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-045.34.00.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-045.35.19.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-045.34.34.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-045.38.43.png" alt=""></p>
<h3 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h3><p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.05.42.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.06.27.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.07.07.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.09.26.png" alt=""></p>
<p>DNSè½¬å‘æœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¯èƒ½è¿”å›ä¸€ä¸ªé”™è¯¯çš„ipå¯¼è‡´è·¨ç½‘è®¿é—®ï¼Œå°±æ˜¯å¯¼è‡´æ…¢</p>
<blockquote>
<p>å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥ä¸€ä¸ª URL åï¼Œæ˜¯åœ¨ä»€ä¹ˆæ—¶å€™ã€è°è¿›è¡Œçš„æŸ¥è¯¢ï¼Ÿ<br>æµè§ˆå™¨è·å¾—è¿™ä¸ªè¯·æ±‚åï¼Œç”©ç»™äº†æ“ä½œç³»ç»Ÿï¼Œæ“ä½œç³»ç»Ÿç”©ç»™äº†ç½‘å¡ï¼Œç½‘å¡ä½œä¸ºçœŸæ­£å¹²æ´»çš„äººæŠŠåŒ…æŒ‰ç…§é“¾è·¯å±‚åè®®é€äº†å‡ºå»ã€‚<br>DNS å‘ç”Ÿåœ¨ TCP/IP ä¹‹å‰ã€‚å‰é¢å·²ç»æè¿‡ï¼Œåˆ° TCP/IP åè®®æ ˆçš„æ—¶å€™å·²ç»æ˜¯æœ‰ IP åœ°å€äº†ã€‚<br>çœŸç›¸å°±æ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œçš„ DNS æŸ¥è¯¢ã€‚æ‰€ä»¥åœ¨æ“ä½œç³»ç»Ÿçš„ç½‘ç»œè®¾ç½®ä¸­ï¼Œå¯ä»¥è¿›è¡Œ DNS æœåŠ¡å™¨çš„é…ç½®ã€‚æ“ä½œç³»ç»Ÿä¹ŸåŒæ—¶ç®¡ç†äº† DNS çš„ç¼“å­˜ã€‚ã€ŠiOSç½‘ç»œè¯·æ±‚ä¼˜åŒ–ä¹‹DNSæ˜ å°„ã€‹ä¸­æåˆ°ï¼š</p>
<p>åƒ iOS ç³»ç»Ÿä¸€èˆ¬æ˜¯ 24 å°æ—¶ä¹‹åä¼šè¿‡æœŸï¼Œè¿˜æœ‰è¿›å…¥é£è¡Œæ¨¡å¼å†åˆ‡å›æ¥ï¼Œå¼€å…³æœºï¼Œé‡ç½®ç½‘ç»œè®¾ç½®ç­‰ä¹Ÿä¼šå¯¼è‡´ DNS cache çš„æ¸…é™¤ã€‚æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ç”¨æˆ·åœ¨ç¬¬äºŒå¤©æ‰“å¼€ä½ çš„ app éƒ½ä¼šç»å†ä¸€æ¬¡å®Œæ•´çš„ DNS è§£æè¯·æ±‚ã€‚</p>
</blockquote>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.10.07.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.14.36.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.24.53.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.25.41.png" alt=""></p>
<h3 id="Session-Cookie"><a href="#Session-Cookie" class="headerlink" title="Session/Cookie"></a>Session/Cookie</h3><p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.38.14.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.38.54.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.39.43.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.41.23.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.40.41.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.41.35.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.44.10.png" alt=""></p>
<p><img src="/04/2015/ç½‘ç»œç›¸å…³/../../../images/2018-07-046.42.47.png" alt=""></p>
]]></content>
      
        
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ·±å…¥ç†è§£block]]></title>
      <url>/2015/07/02/2015/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3block/</url>
      <content type="html"><![CDATA[<ul>
<li>blockä»‹ç»</li>
<li>æˆªè·å˜é‡</li>
<li>__block</li>
<li>å†…å­˜ç®¡ç†</li>
<li>å¾ªç¯å¼•ç”¨</li>
</ul>
<a id="more"></a>
<h3 id="ä»€ä¹ˆæ˜¯block"><a href="#ä»€ä¹ˆæ˜¯block" class="headerlink" title="ä»€ä¹ˆæ˜¯block"></a>ä»€ä¹ˆæ˜¯block</h3><p>æ˜¯å°†å‡½æ•°åŠå…¶æ‰§è¡Œä¸Šä¸‹æ–‡å°è£…èµ·æ¥çš„å¯¹è±¡ã€‚</p>
<p>æŸ¥çœ‹ç¼–è¯‘åçš„å†…å®¹<code>clang -rewrite-objc file.m</code><br>æŸ¥çœ‹å«æœ‰UIKit.hçš„</p>
<p><code>clang -x objective-c -rewrite-objc -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk xxxx</code></p>
<h3 id="ä»€ä¹ˆæ˜¯blockè°ƒç”¨"><a href="#ä»€ä¹ˆæ˜¯blockè°ƒç”¨" class="headerlink" title="ä»€ä¹ˆæ˜¯blockè°ƒç”¨"></a>ä»€ä¹ˆæ˜¯blockè°ƒç”¨</h3><p>blockè°ƒç”¨å°±æ˜¯å‡½æ•°è°ƒç”¨</p>
<h3 id="æˆªè·å˜é‡"><a href="#æˆªè·å˜é‡" class="headerlink" title="æˆªè·å˜é‡"></a>æˆªè·å˜é‡</h3><ul>
<li>å±€éƒ¨å˜é‡<ul>
<li>åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæˆªè·å…¶å€¼</li>
<li>å¯¹è±¡ï¼Œè¿åŒæ‰€æœ‰æƒä¿®é¥°ç¬¦ä¸€èµ·æˆªè·ï¼Œ__weakå°±æ˜¯å¼±å¼•ç”¨ï¼Œæ²¡æœ‰ä¿®é¥°ç¬¦å°±æ˜¯é»˜è®¤strongï¼Œå°±æ˜¯å¼ºå¼•ç”¨</li>
</ul>
</li>
<li>é™æ€å±€éƒ¨å˜é‡(static)ï¼Œä»¥æŒ‡é’ˆå½¢å¼è¿›è¡Œæˆªè·</li>
<li>å…¨å±€å˜é‡ï¼Œä¸æˆªè·</li>
<li>é™æ€å…¨å±€å˜é‡ï¼Œä¸æˆªè·</li>
</ul>
<p>æ€»ç»“</p>
<blockquote>
<p>åªæœ‰åŸºæœ¬æ•°æ®ç±»å‹æ‰ä¼šç›´æ¥ä½¿ç”¨å€¼ï¼Œå¦‚æœç”¨__blockä¿®é¥°ä¹Ÿå°±æ˜¯æŒ‡é’ˆäº†ï¼Œå…¶ä»–æƒ…å†µéƒ½æ˜¯æŒ‡é’ˆ</p>
</blockquote>
<h3 id="blockä»€ä¹ˆæ—¶å€™ä½¿ç”¨"><a href="#blockä»€ä¹ˆæ—¶å€™ä½¿ç”¨" class="headerlink" title="__blockä»€ä¹ˆæ—¶å€™ä½¿ç”¨"></a>__blockä»€ä¹ˆæ—¶å€™ä½¿ç”¨</h3><p><strong>block æ”¹å˜å­˜å‚¨æ–¹å¼ï¼Œ_blockä¿®é¥°è‡ªåŠ¨å˜é‡åï¼Œ_blockçš„å˜é‡ä¹Ÿè¢«è½¬åŒ–æˆäº†ä¸€ä¸ªç»“æ„ä½“:</strong>Block_byref_i_0,è¿™ä¸ªç»“æ„ä½“æœ‰5ä¸ªæˆå‘˜å˜é‡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">struct __Block_byref_i_0 &#123;</div><div class="line">  void *__isa;   æŒ‡é’ˆ</div><div class="line">__Block_byref_i_0 *__forwarding; æŒ‡å‘è‡ªèº«ç±»å‹çš„__forwardingæŒ‡é’ˆ</div><div class="line"> int __flags; æ ‡è®°flag</div><div class="line"> int __size;å¤§å°</div><div class="line"> int i; å˜é‡å€¼</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹è¢«æˆªè·å˜é‡è¿›è¡Œèµ‹å€¼æ“ä½œéœ€è¦æ·»åŠ __blockä¿®é¥°ç¬¦ï¼Œæ³¨æ„èµ‹å€¼ä¸ç­‰äºæ“ä½œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">__block NSMutableArray *arr = nil;</div><div class="line">void(^Block)(void) = ^&#123;</div><div class="line">    arr = [NSMutableArray array];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ç§æ²¡æœ‰__blockç›´æ¥ä¼šæŠ¥é”™</p>
<h3 id="blockçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#blockçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="__blockçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>__blockçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>__blockä¿®é¥°åçš„intç±»å‹ä¼šå˜æˆç»“æ„ä½“ï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">__block int muti = 6;</div><div class="line">    int(^newBlock)(int) = ^int(int num) &#123;</div><div class="line">        return muti * num;</div><div class="line">    &#125;;</div><div class="line">    </div><div class="line">    muti = 4;</div><div class="line">    </div><div class="line">    newBlock(2);</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªç»“æœæ˜¯8</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">int muti = 6;</div><div class="line">int(^newBlock)(int) = ^int(int num) &#123;</div><div class="line">    return muti * num;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">muti = 4;</div><div class="line"></div><div class="line">newBlock(2);</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªç»“æœæ˜¯12</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">static int muti = 6;</div><div class="line">int(^newBlock)(int) = ^int(int num) &#123;</div><div class="line">    return muti * num;</div><div class="line">&#125;;</div><div class="line">    </div><div class="line">muti = 4;</div><div class="line">    </div><div class="line">newBlock(2);</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªç»“æœä¹Ÿæ˜¯8</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">NSMutableString *mutable_string = [NSMutableString stringWithString:@&quot;aaa&quot;];</div><div class="line">    void(^mutable_append)(void)=^&#123;</div><div class="line">        [mutable_string appendString:@&quot;ccc&quot;];</div><div class="line">    &#125;;</div><div class="line">    [mutable_string appendString:@&quot;bbb&quot;];</div><div class="line">    mutable_append();</div><div class="line">    NSLog(@&quot;\\n %@&quot;,mutable_string);  //ç»“æœï¼šaaabbbccc</div><div class="line">    // æ²¡æœ‰__blockï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰æ¶‰åŠåˆ°ç›´æ¥æŒ‡é’ˆçš„ä¿®æ”¹ï¼Œåªæ˜¯æ“ä½œè€Œå·²ï¼Œå› æ­¤aaabbbccc</div><div class="line"></div><div class="line">    NSString *string = @&quot;aaa&quot;;</div><div class="line">    NSString*(^append)(void)=^&#123;</div><div class="line">        return [string stringByAppendingString:@&quot;ccc&quot;];</div><div class="line">    &#125;;</div><div class="line">    string = @&quot;bbb&quot;;</div><div class="line">    NSLog(@&quot;\\n %@&quot;,append());  //ç»“æœï¼šaaaccc</div><div class="line">    // æ²¡æœ‰__blockï¼Œcopyå€¼ï¼Œæˆªè·ä¹‹åå’Œå¤–éƒ¨éƒ½æŒ‡å‘@&quot;aaa&quot;ï¼Œä½†æ˜¯å¤–éƒ¨stringä¿®æ”¹äº†æŒ‡å‘ä¸º@&quot;bbb&quot;,å†…éƒ¨æŒ‡é’ˆè¿˜æ˜¯æŒ‡å‘@&quot;aaa&quot;ï¼Œæ‰€ä»¥aaaccc</div><div class="line"></div><div class="line">    __block NSString *block_string = @&quot;aaa&quot;;</div><div class="line">    NSString*(^block_append)(void)=^&#123;</div><div class="line">        return [block_string stringByAppendingString:@&quot;ccc&quot;];</div><div class="line">    &#125;;</div><div class="line">    block_string = @&quot;bbb&quot;;</div><div class="line">    NSLog(@&quot;\\n %@&quot;,block_append()); //ç»“æœ: bbbccc</div><div class="line">    // æœ‰__blockï¼Œè‡ªåŠ¨è½¬æ¢æˆæ–°çš„ç»“æ„ä½“ï¼Œstringå˜æˆå…¶å†…éƒ¨å±æ€§ï¼Œblockæˆªè·çš„æ˜¯æ–°ç»“æ„ä½“çš„åœ°å€ï¼Œå¤–éƒ¨block_stringé‡æ–°èµ‹å€¼ï¼Œä¹Ÿä¸æ˜¯ç®€å•çš„èµ‹å€¼ï¼Œå†…éƒ¨è½¬æ¢æˆ`a.__forwarding.a`çš„ä»£ç ï¼Œå¯ä»¥ç†è§£ä¸ºé€šè¿‡æ–°çš„ç»“æ„ä½“æ”¹å˜æŒ‡é’ˆæ‰€æŒ‡å‘çš„å€¼ï¼Œé€šè¿‡__blockæ‰€å½¢æˆçš„æ–°ç»“æ„ä½“ä½œä¸ºè½½ä½“ï¼Œä¹‹åæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æ“ä½œåŒä¸€ä¸ªå¯¹è±¡ï¼Œç†è§£ä¸ºæŒ‡é’ˆæ“ä½œï¼Œå› æ­¤ï¼Œå½¢æˆä¸€è‡´ï¼Œæ‰“å°bbbccc</div><div class="line"></div><div class="line">    __block NSString *name = [NSString stringWithFormat:@&quot;%@&quot;,@&quot;mikejing&quot;];</div><div class="line"></div><div class="line">    NSString *(^addaa)(void) = ^&#123;</div><div class="line">        return [name stringByAppendingString:@&quot;cjj&quot;];</div><div class="line">    &#125;;</div><div class="line">    name = @&quot;MKJ&quot;;</div><div class="line">    NSLog(@&quot;\\n %@&quot;,addaa()); // \n MKJcj</div><div class="line">    // åŒä¸Š</div><div class="line"></div><div class="line">    char *ch = &quot;b =\n&quot;;</div><div class="line">    void (^block)(void) = ^&#123;</div><div class="line">        printf(&quot;%s&quot;,ch); // b =</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    ch = &quot;value had changed.b =\n&quot;;</div><div class="line">    block();</div><div class="line">    // æ— æ³•ä¿®æ”¹ï¼Œä¸Šé¢å·²ç»ä»‹ç»</div></pre></td></tr></table></figure>
<p>ä¸‹è¾¹è¿™æ®µä»£ç å¦‚ä½•ä½¿å…¶æ‰“å°20ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">int i = 10;</div><div class="line">    </div><div class="line">void (^block)() = ^ &#123;</div><div class="line">    NSLog(@&quot;%d&quot;, i);</div><div class="line">&#125;;</div><div class="line">    </div><div class="line">i = 20;</div><div class="line">    </div><div class="line">block();</div></pre></td></tr></table></figure>
<p>__blockæˆ–è€…static</p>
<p>è¿™æ®µä»£ç æ‰“å°ä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">int i = 10;</div><div class="line">    </div><div class="line">void (^block)() = ^ &#123;</div><div class="line">    i = 30;</div><div class="line">    NSLog(@&quot;%d&quot;, i);</div><div class="line">&#125;;</div><div class="line">    </div><div class="line">i = 20;</div><div class="line">    </div><div class="line">block();</div></pre></td></tr></table></figure>
<p>å•¥éƒ½æ‰“å°ä¸äº†ï¼Œç›´æ¥æŠ¥é”™äº†</p>
<p>ä½†æ˜¯æ”¹æˆä¸‹è¾¹è¿™æ ·å°±æ²¡æœ‰é—®é¢˜ï¼Œæˆ–è€…ç”¨static</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">__block int i = 10;</div><div class="line">    </div><div class="line">    void (^block)() = ^ &#123;</div><div class="line">        i = 30;</div><div class="line">        NSLog(@&quot;+++++%d&quot;, i);</div><div class="line">    &#125;;</div><div class="line">    </div><div class="line">    i = 20;</div><div class="line">    </div><div class="line">    block();</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç æœ‰æ²¡æœ‰é—®é¢˜ï¼Ÿç­”æ¡ˆæ˜¯æ²¡æœ‰ï¼Œè¿™é‡Œæ˜¯ä¿®æ”¹çš„å†…å­˜ä¸­çš„å†…å®¹ï¼Œå¹¶æ²¡æœ‰ä¿®æ”¹å†…å­˜åœ°å€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">- (void)blockDemo3</div><div class="line">&#123;</div><div class="line">    NSMutableString *strM= [NSMutableString stringWithString:@&quot;hello&quot;];</div><div class="line"></div><div class="line">    void (^block)() = ^ &#123;</div><div class="line">        [strM appendString:@&quot;hehe&quot;];</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    block();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·å†™æœ‰æ²¡æœ‰é—®é¢˜ï¼Ÿè¿™æ ·å†™ç›´æ¥å°±æŠ¥é”™äº†ï¼Œæ²¡æœ‰__blockä¿®é¥°ä¸å…è®¸ä¿®æ”¹æŒ‡é’ˆåœ°å€ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> NSMutableString *strM= [NSMutableString stringWithString:@&quot;hello&quot;];</div><div class="line">    </div><div class="line">void (^block)() = ^ &#123;</div><div class="line">    strM = @&quot;hehe&quot;;</div><div class="line">&#125;;</div><div class="line">    </div><div class="line">block();</div></pre></td></tr></table></figure></p>
<h3 id="blockå†…å­˜ç®¡ç†"><a href="#blockå†…å­˜ç®¡ç†" class="headerlink" title="blockå†…å­˜ç®¡ç†"></a>blockå†…å­˜ç®¡ç†</h3><p><img src="/02/2015/æ·±å…¥ç†è§£block/../../../images/2018-07-029.26.24.png" alt=""></p>
<p>&gt;</p>
<blockquote>
<ul>
<li>å¦‚æœblockå®ç°ä¸­æ²¡æœ‰è®¿é—®ä»»ä½•â€å¤–éƒ¨â€å˜é‡(åŒ…æ‹¬å±€éƒ¨å’Œå…¨å±€), è¯¥blockä¸ºGlobalBlock</li>
<li>å¦‚æœblockå®ç°ä¸­è®¿é—®äº†ä»»ä½•â€å¤–éƒ¨â€å˜é‡(åŒ…æ‹¬å±€éƒ¨å’Œå…¨å±€), è¯¥blockä¸ºStackBlock</li>
<li>å¯¹StackBlockè¿›è¡Œæ‹·è´(copy/Block_copy), è¯¥blockä¸ºMallocBlock</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">__block NSMutableString *strM= [NSMutableString stringWithString:@&quot;hello&quot;];</div><div class="line">    </div><div class="line">void (^block)() = ^&#123;</div><div class="line">    strM = @&quot;hehe&quot;;</div><div class="line">&#125;;</div><div class="line">    </div><div class="line">block();</div><div class="line">    </div><div class="line">NSLog(@&quot;%@&quot;,^&#123;&#125;);</div><div class="line">NSLog(@&quot;%@&quot;, ^&#123;strM = @&quot;123&quot;;&#125;);</div><div class="line">NSLog(@&quot;%@&quot;,block);</div></pre></td></tr></table></figure>
<p>2018-07-03 10:02:20.760734+0800 xiancheng[77686:36486980] <__nsglobalblock__: 0x104050138=""><br>2018-07-03 10:02:20.763747+0800 xiancheng[77686:36486980] <__nsstackblock__: 0x7fff5bbb0b88=""><br>2018-07-03 10:02:20.764553+0800 xiancheng[77686:36486980] <__nsmallocblock__: 0x608000058e70=""></__nsmallocblock__:></__nsstackblock__:></__nsglobalblock__:></p>
<p><img src="/02/2015/æ·±å…¥ç†è§£block/../../../images/2018-07-029.26.30.png" alt=""></p>
<p><img src="/02/2015/æ·±å…¥ç†è§£block/../../../images/2018-07-029.26.47.png" alt=""></p>
<p><img src="/02/2015/æ·±å…¥ç†è§£block/../../../images/2018-07-029.26.58.png" alt=""><br>è¿™ä¸ªæ˜¯ä¼šæœ‰å†…å­˜æ³„æ¼çš„ï¼Œæ ˆä¸Šçš„ä¼šé‡Šæ”¾ï¼Œä½†æ˜¯å †ä¸Šçš„ä¸ä¼š</p>
<p><img src="/02/2015/æ·±å…¥ç†è§£block/../../../images/2018-07-029.27.17.png" alt=""></p>
<p><img src="/02/2015/æ·±å…¥ç†è§£block/../../../images/2018-07-029.27.28.png" alt=""></p>
<h3 id="å¾ªç¯å¼•ç”¨"><a href="#å¾ªç¯å¼•ç”¨" class="headerlink" title="å¾ªç¯å¼•ç”¨"></a>å¾ªç¯å¼•ç”¨</h3><h4 id="weakSelf-StrongSelf-çš„ä½¿ç”¨"><a href="#weakSelf-StrongSelf-çš„ä½¿ç”¨" class="headerlink" title="weakSelf StrongSelf çš„ä½¿ç”¨"></a>weakSelf StrongSelf çš„ä½¿ç”¨</h4><p>è§£å†³å¾ªç¯åº”ç”¨çš„é—®é¢˜ä¸€å®šè¦åˆ†ææ¸…æ¥šå“ªé‡Œå‡ºç°äº†å¾ªç¯å¼•ç”¨ï¼Œåªéœ€è¦æŠŠå…¶ä¸­ä¸€ç¯åŠ ä¸ŠweakSelfè¿™ç±»ä¼¼çš„å®ï¼Œå°±å¯ä»¥è§£å†³å¾ªç¯å¼•ç”¨ã€‚_weakçš„å®ç°åŸç†ï¼Œåœ¨åŸå¯¹è±¡é‡Šæ”¾ä¹‹åï¼Œ_weakå¯¹è±¡å°±ä¼šå˜æˆnullï¼Œé˜²æ­¢é‡æŒ‡é’ˆã€‚æ‰€ä»¥å°±è¾“å‡ºäº†nulläº†ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆæ‰èƒ½åœ¨weakSelfä¹‹åï¼Œblocké‡Œé¢è¿˜èƒ½ç»§ç»­ä½¿ç”¨weakSelfä¹‹åçš„å¯¹è±¡å‘¢ï¼Ÿ</p>
<p>ç©¶å…¶æ ¹æœ¬åŸå› å°±æ˜¯weakSelfä¹‹åï¼Œæ— æ³•æ§åˆ¶ä»€ä¹ˆæ—¶å€™ä¼šè¢«é‡Šæ”¾ï¼Œä¸ºäº†ä¿è¯åœ¨blockå†…ä¸ä¼šè¢«é‡Šæ”¾ï¼Œéœ€è¦æ·»åŠ _strongã€‚</p>
<p>åœ¨blocké‡Œé¢ä½¿ç”¨çš„_strongä¿®é¥°çš„weakSelfæ˜¯ä¸ºäº†åœ¨å‡½æ•°ç”Ÿå‘½å‘¨æœŸä¸­é˜²æ­¢selfæå‰é‡Šæ”¾ã€‚strongSelfæ˜¯ä¸€ä¸ªè‡ªåŠ¨å˜é‡å½“blockæ‰§è¡Œå®Œæ¯•å°±ä¼šé‡Šæ”¾è‡ªåŠ¨å˜é‡strongSelfä¸ä¼šå¯¹selfè¿›è¡Œä¸€ç›´è¿›è¡Œå¼ºå¼•ç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> __weak typeof(student) weakSelf = student;</div><div class="line"></div><div class="line">student.study = ^&#123;</div><div class="line">    __strong typeof(student) strongSelf = weakSelf;</div><div class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">        NSLog(@&quot;my name is = %@&quot;,strongSelf.name);</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œçœ‹ä¸Šå»æœ€ç»ˆä¹Ÿæ˜¯é€šè¿‡__storngæ¥æŠ¢å¼•ç”¨selfçš„ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸ä¼šå¼•èµ·å¾ªç¯å¼•ç”¨å‘¢ï¼Ÿå…¶å®è¿™é‡Œä¹Ÿæ˜¯ä¼šé€ æˆå¾ªç¯å¼•ç”¨ï¼Œè€Œä¸”å¿…é¡»æ˜¯ä¸€ä¸ªå¾ªç¯å¼•ç”¨æ‰å¯ä»¥ï¼Œä½†æ˜¯è¿™ä¸ªå¾ªç¯å¼•ç”¨ä¸æ˜¯æ°¸ä¹…çš„ï¼Œæ˜¯åœ¨ä¸€ä¸ªæ—¶é—´æ®µå†…ï¼Œè¿™ä¸ªæ—¶é—´æ®µå°±æ˜¯åœ¨blockæ‰§è¡Œçš„æ—¶å€™ã€‚</p>
<blockquote>
<p>è¦æœ‰ä¸€ä¸ªæ¦‚å¿µï¼Œblockå†…çš„ä»£ç åªæœ‰åœ¨æ‰§è¡Œçš„æ—¶å€™æ‰ä¼šç”Ÿæ•ˆï¼Œä½†æ˜¯å˜é‡æ•è·å´æ˜¯åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šç”Ÿæ•ˆï¼Œæ‰€ä»¥æˆ‘ä»¬æ•è·äº†ä¸€ä¸ªweakselfï¼Œä½†æ˜¯åœ¨è¿è¡Œçš„æ—¶å€™å¯¹è¿™ä¸ªselfåšäº†ä¸€æ¬¡retainï¼Œè¿™å°±æ„å‘³ç€åœ¨blockè¿è¡Œçš„æ—¶å€™selfç»å¯¹ä¸ä¼šé‡Šæ”¾ï¼Œä½†æ˜¯blockä¸€æ—¦æ‰§è¡Œå®Œæ¯•ï¼Œé‡Œè¾¹çš„å˜é‡å°±ä¼šè¢«é‡Šæ”¾ï¼Œè¿™ä¸ªæ—¶å€™selfå°±è·Ÿæˆ‘æ²¡æœ‰å…³ç³»äº†ï¼Œè¯¥é‡Šæ”¾å°±é‡Šæ”¾ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ç›´æ¥å¼•ç”¨selfï¼Œé‚£ä¹ˆè¿™ä¸ªæ˜¯æ°¸ä¹…çš„ï¼Œä¸ç®¡ä½ blockæ˜¯å¦æ‰§è¡Œï¼Œè¿™ä¸ªå¼•ç”¨éƒ½æ˜¯æ°¸ä¹…å­˜åœ¨çš„</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[UIView animateWithDuration:0.2 animations:^&#123;</div><div class="line">    self.alpha = 1;</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæƒ…å†µç›´æ¥ä½¿ç”¨selfæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºå¼•ç”¨blockçš„æ˜¯animationå†…çš„æŸä¸ªå¯¹è±¡ï¼Œå½“åŠ¨ç”»æ‰§è¡Œç»“æŸä¹‹åblockå°±ä¼šè¢«é‡Šæ”¾ï¼Œselfä¹Ÿä¼šè¢«é‡Šæ”¾ã€‚    </p>
<h4 id="å¦‚æœåªä½¿ç”¨æˆå‘˜å˜é‡å‘¢ï¼Ÿ"><a href="#å¦‚æœåªä½¿ç”¨æˆå‘˜å˜é‡å‘¢ï¼Ÿ" class="headerlink" title="å¦‚æœåªä½¿ç”¨æˆå‘˜å˜é‡å‘¢ï¼Ÿ"></a>å¦‚æœåªä½¿ç”¨æˆå‘˜å˜é‡å‘¢ï¼Ÿ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">_block = ^NSString *(NSString *num) &#123;</div><div class="line">        return [NSString stringWithFormat:@&quot;%@&quot;, _arr[0]];</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">static NSString * __ViewController__viewDidLoad_block_func_0(struct __ViewController__viewDidLoad_block_impl_0 *__cself, NSString *num) &#123;</div><div class="line">  ViewController *self = __cself-&gt;self; // bound by copy</div><div class="line"></div><div class="line">        return ((NSString *(*)(id, SEL, NSString *, ...))(void *)objc_msgSend)((id)objc_getClass(&quot;NSString&quot;), sel_registerName(&quot;stringWithFormat:&quot;), (NSString *)&amp;__NSConstantStringImpl__var_folders_h6_b8d2vwjj7hz3kdq9kpxts5j00000gq_T_ViewController_ed107b_mi_1, </div><div class="line">        ((id (*)(id, SEL, NSUInteger))(void *)objc_msgSend)((id)(*(NSMutableArray **)((char *)self + OBJC_IVAR_$_ViewController$_arr)), sel_registerName(&quot;objectAtIndexedSubscript:&quot;), (NSUInteger)0));</div><div class="line"></div><div class="line">&#125;</div><div class="line">//è¿™ç§æƒ…å†µæ˜¯æ•è·selfçš„</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> _block = ^NSString *(NSString *num) &#123;</div><div class="line">        return [NSString stringWithFormat:@&quot;%@&quot;, self.arr[0]];</div><div class="line">    &#125;;</div><div class="line">   </div><div class="line">    static NSString * __ViewController__viewDidLoad_block_func_0(struct __ViewController__viewDidLoad_block_impl_0 *__cself, NSString *num) &#123;</div><div class="line">  ViewController *self = __cself-&gt;self; // bound by copy</div><div class="line"></div><div class="line">        return ((NSString *(*)(id, SEL, NSString *, ...))(void *)objc_msgSend)((id)objc_getClass(&quot;NSString&quot;), sel_registerName(&quot;stringWithFormat:&quot;), (NSString *)&amp;__NSConstantStringImpl__var_folders_h6_b8d2vwjj7hz3kdq9kpxts5j00000gq_T_ViewController_5b51e6_mi_1, </div><div class="line">        ((id (*)(id, SEL, NSUInteger))(void *)objc_msgSend)((id)((NSMutableArray *(*)(id, SEL))(void *)objc_msgSend)((id)self, sel_registerName(&quot;arr&quot;)), sel_registerName(&quot;objectAtIndexedSubscript:&quot;), (NSUInteger)0));</div><div class="line">&#125;</div><div class="line">//è¿™ç§æƒ…å†µæ›´æ˜¯æ•è·self</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">_block = ^NSString *(NSString *num) &#123;</div><div class="line">        return @&quot;afdasf&quot;;</div><div class="line">    &#125;;</div><div class="line">    static NSString * __ViewController__viewDidLoad_block_func_0(struct __ViewController__viewDidLoad_block_impl_0 *__cself, NSString *num) &#123;</div><div class="line"></div><div class="line">        return (NSString *)&amp;__NSConstantStringImpl__var_folders_h6_b8d2vwjj7hz3kdq9kpxts5j00000gq_T_ViewController_599c3a_mi_1;</div><div class="line">    &#125;</div><div class="line">//å•¥éƒ½ä¸æ•è·</div><div class="line"></div><div class="line">_arr = [NSMutableArray arrayWithObject:@&quot;123&quot;];</div><div class="line">    </div><div class="line">    </div><div class="line">    __unsafe_unretained NSArray * weakArr = _arr;</div><div class="line">    _block = ^NSString *(NSString *num) &#123;</div><div class="line">        return [NSString stringWithFormat:@&quot;%@&quot;, weakArr[0]];</div><div class="line">    &#125;;</div><div class="line">    </div><div class="line"></div><div class="line">static NSString * __ViewController__viewDidLoad_block_func_0(struct __ViewController__viewDidLoad_block_impl_0 *__cself, NSString *num) &#123;</div><div class="line">  NSArray *weakArr = __cself-&gt;weakArr; // bound by copy</div><div class="line"></div><div class="line">        return ((NSString *(*)(id, SEL, NSString *, ...))(void *)objc_msgSend)((id)objc_getClass(&quot;NSString&quot;), sel_registerName(&quot;stringWithFormat:&quot;), (NSString *)&amp;__NSConstantStringImpl__var_folders_h6_b8d2vwjj7hz3kdq9kpxts5j00000gq_T_ViewController_cba29f_mi_1, ((id (*)(id, SEL, NSUInteger))(void *)objc_msgSend)((id)weakArr, sel_registerName(&quot;objectAtIndexedSubscript:&quot;), (NSUInteger)0));</div><div class="line">    &#125;    </div><div class="line">//åªæ˜¯æ•è·weakå˜é‡</div></pre></td></tr></table></figure>
<p>è¯´æ˜ä¸€ä¸‹_arrå®é™…ä¸Šæ˜¯self-&gt;_arrï¼Œä¹Ÿæ˜¯éœ€è¦ä¾èµ–selfæ‰èƒ½è®¿é—®çš„ï¼Œå³ä½¿åœ¨å†…éƒ¨ï¼Œå±æ€§å’Œæˆå‘˜å˜é‡çš„è®¿é—®éƒ½æ˜¯éœ€è¦ä¾èµ–å¯¹è±¡ã€‚å†ä»runtimeè§’åº¦çœ‹ä¸€ä¸‹ï¼Œå½“æˆ‘è°ƒç”¨ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œç»è¿‡msg_sendå‡½æ•°è½¬å‘ï¼Œè¿™é‡Œçš„å‚æ•°åªæœ‰selfï¼Œå’ŒSELä»¥åŠå‚æ•°ï¼Œæ²¡æœ‰selfçš„æˆå‘˜å˜é‡ï¼Œæ‰€ä»¥åªèƒ½ä¾é selfå»è·å–ï¼Œè¿™æ ·çš„è¯æ— è®ºå¦‚ä½•éƒ½è¦ç©¿å…¥selfæ‰è¡Œã€‚</p>
<h4 id="blockåœ¨MRCå’ŒARCä¸‹çš„åŒºåˆ«"><a href="#blockåœ¨MRCå’ŒARCä¸‹çš„åŒºåˆ«" class="headerlink" title="__blockåœ¨MRCå’ŒARCä¸‹çš„åŒºåˆ«"></a>__blockåœ¨MRCå’ŒARCä¸‹çš„åŒºåˆ«</h4><p>ä½¿ç”¨å¼±å¼•ç”¨æ‰“æ–­blocké‡Œé¢çš„retain cycle<br>MRCä¸­<strong> _block æ˜¯ä¸ä¼šå¼•èµ·retainï¼›ä½†åœ¨ARCä¸­ _block åˆ™ä¼šå¼•èµ·retainã€‚ARCä¸­åº”è¯¥ä½¿ç”¨ _weak </strong>æˆ–__unsafe_unretainedå¼±å¼•ç”¨</p>
<p>ä¸‹è¾¹è¿™ç§å†™æ³•ä½¿blockæŒæœ‰äº†blockSelfè¿™ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¼ºå¼•ç”¨åœ¨ï¼Œè§£å†³çš„åŠæ³•æ˜¯ç ´ç¯ï¼Œä½¿ç”¨å®Œä¹‹åé‡Šæ”¾blockSelfï¼Œè¿™ä¸ªæ–¹æ¡ˆçš„å¼Šç«¯æ˜¯ï¼Œå¦‚æœè¿™ä¸ªblockä¸è°ƒç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªç¯å°±ä¸€ç›´å­˜åœ¨ã€‚</p>
<p>æˆ‘ä»¬ç»å¸¸ä¼šå¬è¯´å¦‚ä½•è§£å†³blockçš„å¾ªç¯å¼•ç”¨ï¼Ÿä¸€èˆ¬éƒ½ä¼šè¯´ç”¨<strong>weakå’Œ</strong>blockï¼Œé‚£ä¹ˆ<strong>blockå®ç°è§£é™¤å¾ªç¯å¼•ç”¨çš„æœ¬è´¨å°±æ˜¯ä¸‹è¾¹è¿™æ®µä»£ç ï¼Œä½¿ç”¨å®Œäº†ä¹‹åå¯ä»¥å°†è¿™ä¸ªå¼•ç”¨è®¾ç½®ä¸ºnilï¼Œå…¶ä»–çš„åšæ³•å°±ä¸å¯ä»¥ï¼Œå› ä¸ºä¸ç”¨</strong>blockä¿®é¥°æ ¹æœ¬å°±ä¸èƒ½æ›´æ”¹æŒ‡é’ˆæŒ‡å‘ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">__block typeof(self) blockSelf = self;</div><div class="line">    </div><div class="line">_block = ^NSString *(NSString *num) &#123;</div><div class="line">    NSLog(@&quot;%@&quot;, blockSelf.arr[0]);</div><div class="line">//    blockSelf = nil;</div><div class="line">    return @&quot;123&quot;;</div><div class="line">&#125;;</div><div class="line">    </div><div class="line">=========================================</div><div class="line"></div><div class="line">static NSString * __ViewController__viewDidLoad_block_func_0(struct __ViewController__viewDidLoad_block_impl_0 *__cself, NSString *num) &#123;</div><div class="line">__Block_byref_blockSelf_0 *blockSelf = __cself-&gt;blockSelf; // bound by ref</div><div class="line"></div><div class="line">    NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_h6_b8d2vwjj7hz3kdq9kpxts5j00000gq_T_ViewController_614b65_mi_0, ((id (*)(id, SEL, NSUInteger))(void *)objc_msgSend)((id)((NSMutableArray *(*)(id, SEL))(void *)objc_msgSend)((id)(blockSelf-&gt;__forwarding-&gt;blockSelf), sel_registerName(&quot;arr&quot;)), sel_registerName(&quot;objectAtIndexedSubscript:&quot;), (NSUInteger)0));</div><div class="line">    return (NSString *)&amp;__NSConstantStringImpl__var_folders_h6_b8d2vwjj7hz3kdq9kpxts5j00000gq_T_ViewController_614b65_mi_1;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/02/2015/æ·±å…¥ç†è§£block/../../../images/2018-07-033.03.09.png" alt=""></p>
<h3 id="blockå’Œä»£ç†å¦‚ä½•é€‰æ‹©ä½¿ç”¨"><a href="#blockå’Œä»£ç†å¦‚ä½•é€‰æ‹©ä½¿ç”¨" class="headerlink" title="blockå’Œä»£ç†å¦‚ä½•é€‰æ‹©ä½¿ç”¨"></a>blockå’Œä»£ç†å¦‚ä½•é€‰æ‹©ä½¿ç”¨</h3><p>delegateæ›´è½»é‡ï¼Œä½†æ˜¯å†™èµ·æ¥éº»çƒ¦ï¼Œblockç”¨èµ·æ¥å†™èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯è¿è¡Œèµ·æ¥æ¶ˆè€—å¤§ã€‚</p>
<p>ä¼˜å…ˆä½¿ç”¨blockã€‚<br>å¦‚æœå›è°ƒçš„çŠ¶æ€å¾ˆå¤šï¼Œå¤šäºä¸‰ä¸ªä½¿ç”¨ä»£ç†ã€‚<br>å¦‚æœå›è°ƒçš„å¾ˆé¢‘ç¹ï¼Œæ¬¡æ•°å¾ˆå¤šï¼ŒåƒUITableviewï¼Œæ¯æ¬¡åˆå§‹åŒ–ã€æ»‘åŠ¨ã€ç‚¹å‡»éƒ½ä¼šå›è°ƒï¼Œä½¿ç”¨ä»£ç†ã€‚<br>åˆæˆ–è€…è¯´ï¼Œ delegate çš„å›è°ƒæ›´å¤šçš„é¢å‘è¿‡ç¨‹ï¼Œè€Œ block åˆ™æ˜¯é¢å‘ç»“æœçš„ã€‚å¦‚æœä½ éœ€è¦å¾—åˆ°ä¸€æ¡å¤šæ­¥è¿›ç¨‹çš„é€šçŸ¥ï¼Œä½ åº”è¯¥ä½¿ç”¨ delegationï¼Œå¦‚æœä½ éœ€è¦ä¸€ä¸ªæœ€ç»ˆçš„ç»“æœä½ åº”è¯¥ä½¿ç”¨delegate</p>
]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[runloopç›¸å…³]]></title>
      <url>/2015/07/02/2015/runloop%E7%9B%B8%E5%85%B3/</url>
      <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯runloop"><a href="#ä»€ä¹ˆæ˜¯runloop" class="headerlink" title="ä»€ä¹ˆæ˜¯runloop"></a>ä»€ä¹ˆæ˜¯runloop</h3><p>æ˜¯é€šè¿‡å†…éƒ¨ç»´æŠ¤äº‹ä»¶å¾ªç¯æ¥å¯¹äº‹ä»¶/æ¶ˆæ¯è¿›è¡Œç®¡ç†çš„ä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p>æ²¡æœ‰æ¶ˆæ¯å¤„ç†çš„æ—¶å€™ï¼Œæ˜¯ç”¨æˆ·æ€åˆ°å†…æ ¸æ€ï¼Œæœ‰æ¶ˆæ¯éœ€è¦å¤„ç†çš„æ—¶å€™ï¼Œæ˜¯å†…æ ¸æ€åˆ°ç”¨æˆ·æ€ã€‚</p>
<p>çŠ¶æ€çš„åˆ‡æ¢æ‰æ˜¯å…³é”®ã€‚</p>
<h3 id="æ•°æ®ç»“æ„è§£æ"><a href="#æ•°æ®ç»“æ„è§£æ" class="headerlink" title="æ•°æ®ç»“æ„è§£æ"></a>æ•°æ®ç»“æ„è§£æ</h3><p><img src="/02/2015/runloopç›¸å…³/../../../images/2018-07-035.51.14.png" alt=""></p>
<p>è¯´æ˜ï¼š</p>
<p>ä¸pthreadæ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»</p>
<p>modelsæ˜¯ä¸€ä¸ªé›†åˆNSMutableSet<cfrunloopmode*></cfrunloopmode*></p>
<p>commonModesä¹Ÿæ˜¯ä¸€ä¸ªé›†åˆï¼ŒNSMutableSet<nsstring*></nsstring*></p>
<p><img src="/02/2015/runloopç›¸å…³/../../../images/2018-07-036.05.38.png" alt=""></p>
<p>è¯´æ˜ï¼š</p>
<p>source0å’Œsource1æ˜¯NSMutableSetç±»å‹ï¼Œæ— åº</p>
<p>observerså’Œtimersæ˜¯NSMutableArrayç±»å‹ï¼Œæœ‰åº</p>
<h4 id="runloopMode"><a href="#runloopMode" class="headerlink" title="runloopMode"></a>runloopMode</h4><p>å½“è¿è¡Œåœ¨mode1çš„æƒ…å†µä¸‹ï¼Œæ— æ³•æ¥å—mode2ç§çš„ä¸€äº›äº‹ä»¶ï¼Œæ¯”å¦‚åœ¨æ»‘åŠ¨çš„æ—¶å€™æ— æ³•æ¥å—æ­£å¸¸çŠ¶æ€çš„äº‹ä»¶ã€‚</p>
<h4 id="CommonMode"><a href="#CommonMode" class="headerlink" title="CommonMode"></a>CommonMode</h4><p>ä¸æ˜¯ä¸€ç§å®é™…å­˜åœ¨çš„modeï¼Œå®ƒæ˜¯åŒæ­¥source/timer/observeråˆ°å¤šä¸ªmodeçš„ä¸€ç§æŠ€æœ¯æ–¹æ¡ˆ</p>
<h3 id="ä»ç‚¹å‡»appå›¾æ ‡å¼€å§‹å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ"><a href="#ä»ç‚¹å‡»appå›¾æ ‡å¼€å§‹å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä»ç‚¹å‡»appå›¾æ ‡å¼€å§‹å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ"></a>ä»ç‚¹å‡»appå›¾æ ‡å¼€å§‹å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h3><h3 id="å¸¸é©»çº¿ç¨‹"><a href="#å¸¸é©»çº¿ç¨‹" class="headerlink" title="å¸¸é©»çº¿ç¨‹"></a>å¸¸é©»çº¿ç¨‹</h3><p><img src="/02/2015/runloopç›¸å…³/../../../../../images/2018-07-039.31.30.png" alt=""></p>
]]></content>
      
        
        <tags>
            
            <tag> iOSåŸºç¡€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å¤šçº¿ç¨‹æŠ€æœ¯]]></title>
      <url>/2015/07/01/2015/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%8A%80%E6%9C%AF/</url>
      <content type="html"><![CDATA[<h2 id="å¤šçº¿ç¨‹ç›¸å…³æ¦‚å¿µç†è§£"><a href="#å¤šçº¿ç¨‹ç›¸å…³æ¦‚å¿µç†è§£" class="headerlink" title="å¤šçº¿ç¨‹ç›¸å…³æ¦‚å¿µç†è§£"></a>å¤šçº¿ç¨‹ç›¸å…³æ¦‚å¿µç†è§£</h2><h4 id="å¹¶å‘ä¸å¹¶è¡Œ"><a href="#å¹¶å‘ä¸å¹¶è¡Œ" class="headerlink" title="å¹¶å‘ä¸å¹¶è¡Œ"></a>å¹¶å‘ä¸å¹¶è¡Œ</h4><p>å¹¶è¡Œå¯ä»¥åœ¨è®¡ç®—æœºçš„å¤šä¸ªæŠ½è±¡å±‚æ¬¡ä¸Šè¿ç”¨ï¼Œè¿™é‡Œä»…è®¨è®ºä»»åŠ¡çº§å¹¶è¡Œï¼ˆç¨‹åºè®¾è®¡å±‚é¢ï¼‰ï¼Œä¸è®¨è®ºæŒ‡ä»¤çº§å¹¶è¡Œç­‰ã€‚</p>
<p>å¹¶å‘æŒ‡èƒ½å¤Ÿè®©å¤šä¸ªä»»åŠ¡åœ¨é€»è¾‘ä¸ŠåŒæ—¶æ‰§è¡Œçš„ç¨‹åºè®¾è®¡ï¼Œè€Œå¹¶è¡Œåˆ™æ˜¯æŒ‡åœ¨ç‰©ç†ä¸ŠçœŸæ­£çš„åŒæ—¶æ‰§è¡Œã€‚å¹¶è¡Œæ˜¯å¹¶å‘çš„å­é›†ï¼Œå±äºå¹¶å‘çš„ä¸€ç§å®ç°æ–¹å¼ã€‚é€šè¿‡æ—¶é—´ç‰‡è½®è½¬å®ç°çš„å¤šä»»åŠ¡åŒæ—¶æ‰§è¡Œæ˜¯é€šè¿‡è°ƒåº¦ç®—æ³•å®ç°é€»è¾‘ä¸Šçš„åŒæ­¥æ‰§è¡Œï¼Œå±äºå¹¶å‘ï¼Œä»–ä»¬ä¸æ˜¯çœŸæ­£ç‰©ç†ä¸Šçš„åŒæ—¶æ‰§è¡Œï¼Œä¸å±äºå¹¶è¡Œã€‚å½“é€šè¿‡å¤šæ ¸ CPU å®ç°å¹¶å‘æ—¶ï¼Œå¤šä»»åŠ¡æ˜¯çœŸæ­£ç‰©ç†ä¸Šçš„åŒæ—¶æ‰§è¡Œï¼Œæ‰å±äºå¹¶è¡Œã€‚</p>
<a id="more"></a>
<h4 id="çº¿ç¨‹çš„çŠ¶æ€"><a href="#çº¿ç¨‹çš„çŠ¶æ€" class="headerlink" title="çº¿ç¨‹çš„çŠ¶æ€"></a>çº¿ç¨‹çš„çŠ¶æ€</h4><p><img src="/01/2015/å¤šçº¿ç¨‹æŠ€æœ¯/../../../images/1499394752139363.png" alt=""></p>
<p>ä¸‹é¢åˆ†åˆ«é˜è¿°çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸä¸­çš„æ¯ä¸€æ­¥</p>
<ul>
<li><p>æ–°å»ºï¼šå®ä¾‹åŒ–çº¿ç¨‹å¯¹è±¡</p>
</li>
<li><p>å°±ç»ªï¼šå‘çº¿ç¨‹å¯¹è±¡å‘é€startæ¶ˆæ¯ï¼Œçº¿ç¨‹å¯¹è±¡è¢«åŠ å…¥å¯è°ƒåº¦çº¿ç¨‹æ± ç­‰å¾…CPUè°ƒåº¦ã€‚</p>
</li>
<li><p>è¿è¡Œï¼šCPU è´Ÿè´£è°ƒåº¦å¯è°ƒåº¦çº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„æ‰§è¡Œã€‚çº¿ç¨‹æ‰§è¡Œå®Œæˆä¹‹å‰ï¼ŒçŠ¶æ€å¯èƒ½ä¼šåœ¨å°±ç»ªå’Œè¿è¡Œä¹‹é—´æ¥å›åˆ‡æ¢ã€‚å°±ç»ªå’Œè¿è¡Œä¹‹é—´çš„çŠ¶æ€å˜åŒ–ç”±CPUè´Ÿè´£ï¼Œç¨‹åºå‘˜ä¸èƒ½å¹²é¢„ã€‚</p>
</li>
<li><p>é˜»å¡ï¼šå½“æ»¡è¶³æŸä¸ªé¢„å®šæ¡ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¼‘çœ æˆ–é”ï¼Œé˜»å¡çº¿ç¨‹æ‰§è¡Œã€‚sleepForTimeIntervalï¼ˆä¼‘çœ æŒ‡å®šæ—¶é•¿ï¼‰ï¼ŒsleepUntilDateï¼ˆä¼‘çœ åˆ°æŒ‡å®šæ—¥æœŸï¼‰ï¼Œ@synchronized(self)ï¼šï¼ˆäº’æ–¥é”ï¼‰ã€‚</p>
</li>
<li><p>æ­»äº¡ï¼šæ­£å¸¸æ­»äº¡ï¼Œçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚éæ­£å¸¸æ­»äº¡ï¼Œå½“æ»¡è¶³æŸä¸ªæ¡ä»¶åï¼Œåœ¨çº¿ç¨‹å†…éƒ¨ä¸­æ­¢æ‰§è¡Œ/åœ¨ä¸»çº¿ç¨‹ä¸­æ­¢çº¿ç¨‹å¯¹è±¡</p>
</li>
<li><p>è¿˜æœ‰çº¿ç¨‹çš„exitå’Œcancel</p>
<ul>
<li><p>[NSThread exit]ï¼šä¸€æ—¦å¼ºè¡Œç»ˆæ­¢çº¿ç¨‹ï¼Œåç»­çš„æ‰€æœ‰ä»£ç éƒ½ä¸ä¼šè¢«æ‰§è¡Œã€‚</p>
</li>
<li><p>[thread cancel]å–æ¶ˆï¼šå¹¶ä¸ä¼šç›´æ¥å–æ¶ˆçº¿ç¨‹ï¼Œåªæ˜¯ç»™çº¿ç¨‹å¯¹è±¡æ·»åŠ  isCancelled æ ‡è®°ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 id="çº¿ç¨‹ä¸é˜Ÿåˆ—çš„å…³ç³»"><a href="#çº¿ç¨‹ä¸é˜Ÿåˆ—çš„å…³ç³»" class="headerlink" title="çº¿ç¨‹ä¸é˜Ÿåˆ—çš„å…³ç³»"></a>çº¿ç¨‹ä¸é˜Ÿåˆ—çš„å…³ç³»</h4><p>æˆ‘ä»¬å¯ä»¥æŠŠé˜Ÿåˆ—ç†è§£æˆç”Ÿäº§è€…ï¼Œè€Œçº¿ç¨‹æ˜¯æ¶ˆè´¹è€…ã€‚</p>
<p>æˆ‘ä»¬æ˜¯ç†è§£runloopæ¥å¹²æ´»çš„é€»è¾‘ï¼Œä½†æ˜¯å…¶å®æœ¬è´¨æ¥è®²çœŸæ­£å¹²æ´»çš„æ˜¯çº¿ç¨‹ï¼Œåªä¸è¿‡æ²¡æœ‰runloopå°±å¹²å®Œæ´»ï¼Œæ²¡æœ‰æ–°æ´»äº†å°±è¢«ç³»ç»Ÿé‡Šæ”¾æ‰äº†ï¼Œå½“ç„¶å¦‚æœåœ¨çº¿ç¨‹æ± é‡Œè¾¹çš„çº¿ç¨‹å¤„ç†å®Œä¸€ä¸ªå·¥ä½œä¹‹åï¼Œæœ‰æ–°çš„å·¥ä½œéœ€è¦å¤„ç†ï¼Œé‚£ä¹ˆå®ƒç»§ç»­å¤„ç†ï¼Œä¸ä¼šè¢«é‡Šæ”¾æ‰çš„ã€‚</p>
<h4 id="ä¸²è¡Œé˜Ÿåˆ—ä¸å¹¶å‘é˜Ÿåˆ—"><a href="#ä¸²è¡Œé˜Ÿåˆ—ä¸å¹¶å‘é˜Ÿåˆ—" class="headerlink" title="ä¸²è¡Œé˜Ÿåˆ—ä¸å¹¶å‘é˜Ÿåˆ—"></a>ä¸²è¡Œé˜Ÿåˆ—ä¸å¹¶å‘é˜Ÿåˆ—</h4><p>ä¸²è¡Œé˜Ÿåˆ—çš„ä»»åŠ¡æ˜¯ä¸€ä¸ªä¸€ä¸ªæ’ç€é˜Ÿæ‰§è¡Œçš„ï¼Œå‰ä¸€ä¸ªæ‰§è¡Œå®Œä¹‹åå†æ‰§è¡Œä¸‹ä¸€ä¸ªï¼Œä½†æ˜¯å¹¶å‘é˜Ÿåˆ—ä¹Ÿæ˜¯éœ€è¦æ’ç€é˜Ÿæ‰§è¡Œçš„ï¼Œä½†æ˜¯ä¸éœ€è¦ç­‰ç€ä¸Šä¸€ä¸ªæ‰§è¡Œå®Œï¼Œä¸‹ä¸€ä¸ªå°±å¯ä»¥æ¥ç€æ‰§è¡Œã€‚</p>
<p>é‚£è¿™ä¸ªæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿæ ¹æ®ä¸Šè¾¹è¯´çº¿ç¨‹æ‰æ˜¯çœŸæ­£å¹²æ´»çš„è§’è‰²ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±æœ‰äº†ç­”æ¡ˆï¼Œä¸²è¡Œé˜Ÿåˆ—ç»‘å®šäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸ä¸€å®šæ˜¯ä¸»çº¿ç¨‹ï¼Œå¹¶å‘é˜Ÿåˆ—æœ‰å¼€æ–°çº¿ç¨‹çš„èƒ½åŠ›ï¼Œå¦‚æœå‘ç°çº¿ç¨‹æ± é‡Œè¾¹æ²¡æœ‰å¯ç”¨çš„çº¿ç¨‹ï¼Œä½†æ˜¯æˆ‘åˆæœ‰ä¸€ä¸ªä»»åŠ¡ï¼Œé‚£æˆ‘ç›´æ¥å¼€ä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥å¤„ç†ã€‚</p>
<p>è¿™æ ·çœ‹çš„è¯ï¼Œå¹¶å‘é˜Ÿåˆ—ä¹Ÿæ˜¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œè€Œä¸æ˜¯å¾ˆå¤šä¸ªé˜Ÿåˆ—ï¼Œè¿™ä¸ªç‚¹å®¹æ˜“ç†è§£é”™è¯¯ã€‚</p>
<h4 id="å¤šçº¿ç¨‹çš„å®‰å…¨é—®é¢˜"><a href="#å¤šçº¿ç¨‹çš„å®‰å…¨é—®é¢˜" class="headerlink" title="å¤šçº¿ç¨‹çš„å®‰å…¨é—®é¢˜"></a>å¤šçº¿ç¨‹çš„å®‰å…¨é—®é¢˜</h4><p>å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€å—èµ„æºè¿›è¡Œè¯»å†™ï¼Œå¦‚æœä¸åŠ æ§åˆ¶éšæ„è®¿é—®å®¹æ˜“äº§ç”Ÿæ•°æ®é”™ä¹±ä»è€Œå¼•å‘æ•°æ®å®‰å…¨é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå°±æœ‰äº†åŠ é”çš„æ¦‚å¿µã€‚åŠ é”çš„åŸç†å°±æ˜¯å½“æœ‰ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨è®¿é—®èµ„æºè¿›è¡Œå†™çš„æ—¶å€™ï¼Œä¸å…è®¸å…¶ä»–çº¿ç¨‹å†è®¿é—®è¯¥èµ„æºï¼Œåªæœ‰å½“è¯¥çº¿ç¨‹è®¿é—®ç»“æŸåï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½æŒ‰é¡ºåºè¿›è¡Œè®¿é—®ã€‚å¯¹äºè¯»å–æ•°æ®ï¼Œæœ‰äº›ç¨‹åºè®¾è®¡æ˜¯å…è®¸å¤šçº¿ç¨‹åŒæ—¶è¯»çš„ï¼Œæœ‰äº›ä¸å…è®¸ã€‚UIKitä¸­å‡ ä¹æ‰€æœ‰æ§ä»¶éƒ½ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸Šæ›´æ–°UIã€‚</p>
<p>è§£å†³å¤šçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼š</p>
<p>ï¼ˆ1ï¼‰äº’æ–¥é”</p>
<p>// æ³¨æ„ï¼šé”å®š1ä»½ä»£ç åªç”¨1æŠŠé”ï¼Œç”¨å¤šæŠŠé”æ˜¯æ— æ•ˆçš„<br>@synchronized(é”å¯¹è±¡) { // éœ€è¦é”å®šçš„ä»£ç   }<br>ä½¿ç”¨äº’æ–¥é”ï¼Œåœ¨åŒä¸€ä¸ªæ—¶é—´ï¼Œåªå…è®¸ä¸€æ¡çº¿ç¨‹æ‰§è¡Œé”ä¸­çš„ä»£ç ã€‚å› ä¸ºäº’æ–¥é”çš„ä»£ä»·éå¸¸æ˜‚è´µï¼Œæ‰€ä»¥é”å®šçš„ä»£ç èŒƒå›´åº”è¯¥å°½å¯èƒ½å°ï¼Œåªè¦é”ä½èµ„æºè¯»å†™éƒ¨åˆ†çš„ä»£ç å³å¯ã€‚ä½¿ç”¨äº’æ–¥é”ä¹Ÿä¼šå½±å“å¹¶å‘çš„ç›®çš„ã€‚</p>
<p>ï¼ˆ2ï¼‰ä½¿ç”¨NSLockå¯¹è±¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">_lock = [[NSLock alloc] init];</div><div class="line">- (void)synchronizedMethod &#123;</div><div class="line">	[_lock lock];</div><div class="line">	//safe</div><div class="line">	[_lock unlock];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ï¼ˆ3ï¼‰atomicåŠ é”</p>
<p>OCåœ¨å®šä¹‰å±æ€§æ—¶æœ‰nonatomicå’Œatomicä¸¤ç§é€‰æ‹©ã€‚</p>
<p>atomicï¼šåŸå­å±æ€§ï¼Œä¸ºsetteræ–¹æ³•åŠ é”ï¼ˆé»˜è®¤å°±æ˜¯atomicï¼‰ã€‚</p>
<p>nonatomicï¼šéåŸå­å±æ€§ï¼Œä¸ä¼šä¸ºsetteræ–¹æ³•åŠ é”ã€‚</p>
<p>atomicåŠ é”åŸç†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@property (assign, atomic) int age;</div><div class="line"></div><div class="line">- (void)setAge:(int)age</div><div class="line">&#123; </div><div class="line"></div><div class="line">    @synchronized(self) &#123; </div><div class="line">       _age = age;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>atomicï¼šçº¿ç¨‹å®‰å…¨ï¼Œéœ€è¦æ¶ˆè€—å¤§é‡çš„èµ„æº</p>
<p>nonatomicï¼šéçº¿ç¨‹å®‰å…¨ï¼Œé€‚åˆå†…å­˜å°çš„ç§»åŠ¨è®¾å¤‡</p>
<p>iOSå¼€å‘çš„å»ºè®®:</p>
<p>ï¼ˆ1ï¼‰æ‰€æœ‰å±æ€§éƒ½å£°æ˜ä¸ºnonatomic</p>
<p>ï¼ˆ2ï¼‰å°½é‡é¿å…å¤šçº¿ç¨‹æŠ¢å¤ºåŒä¸€å—èµ„æº</p>
<p>ï¼ˆ3ï¼‰å°½é‡å°†åŠ é”ã€èµ„æºæŠ¢å¤ºçš„ä¸šåŠ¡é€»è¾‘äº¤ç»™æœåŠ¡å™¨ç«¯å¤„ç†ï¼Œå‡å°ç§»åŠ¨å®¢æˆ·ç«¯çš„å‹åŠ›    </p>
<h2 id="å¤šçº¿ç¨‹å®ç°æ‰‹æ®µ"><a href="#å¤šçº¿ç¨‹å®ç°æ‰‹æ®µ" class="headerlink" title="å¤šçº¿ç¨‹å®ç°æ‰‹æ®µ"></a>å¤šçº¿ç¨‹å®ç°æ‰‹æ®µ</h2><p><img src="/01/2015/å¤šçº¿ç¨‹æŠ€æœ¯/../../../images/1499394732413995.png" alt=""></p>
<h3 id="NSThread"><a href="#NSThread" class="headerlink" title="NSThread"></a>NSThread</h3><h4 id="åˆ›å»º"><a href="#åˆ›å»º" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h4><p>NSThreadæœ‰ä¸‰ç§åˆ›å»ºæ–¹å¼ï¼š</p>
<ul>
<li><p>initæ–¹å¼</p>
</li>
<li><p>detachNewThreadSelectoråˆ›å»ºå¥½ä¹‹åè‡ªåŠ¨å¯åŠ¨</p>
</li>
<li><p>performSelectorInBackgroundåˆ›å»ºå¥½ä¹‹åä¹Ÿæ˜¯ç›´æ¥å¯åŠ¨</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">/** æ–¹æ³•ä¸€ï¼Œéœ€è¦start */</div><div class="line">NSThread *thread1 = [[NSThread alloc] initWithTarget:self selector:@selector(doSomething1:) object:@&quot;NSThread1&quot;];</div><div class="line">// çº¿ç¨‹åŠ å…¥çº¿ç¨‹æ± ç­‰å¾…CPUè°ƒåº¦ï¼Œæ—¶é—´å¾ˆå¿«ï¼Œå‡ ä¹æ˜¯ç«‹åˆ»æ‰§è¡Œ</div><div class="line">[thread1 start];</div><div class="line"> </div><div class="line">/** æ–¹æ³•äºŒï¼Œåˆ›å»ºå¥½ä¹‹åè‡ªåŠ¨å¯åŠ¨ */</div><div class="line">[NSThread detachNewThreadSelector:@selector(doSomething2:) toTarget:self withObject:@&quot;NSThread2&quot;];</div><div class="line"> </div><div class="line">/** æ–¹æ³•ä¸‰ï¼Œéšå¼åˆ›å»ºï¼Œç›´æ¥å¯åŠ¨ */</div><div class="line">[self performSelectorInBackground:@selector(doSomething3:) withObject:@&quot;NSThread3&quot;];</div><div class="line"> </div><div class="line">- (void)doSomething1:(NSObject *)object &#123;</div><div class="line">    // ä¼ é€’è¿‡æ¥çš„å‚æ•°</div><div class="line">    NSLog(@&quot;%@&quot;,object);</div><div class="line">    NSLog(@&quot;doSomething1ï¼š%@&quot;,[NSThread currentThread]);</div><div class="line">&#125;</div><div class="line"> </div><div class="line">- (void)doSomething2:(NSObject *)object &#123;</div><div class="line">    NSLog(@&quot;%@&quot;,object);</div><div class="line">    NSLog(@&quot;doSomething2ï¼š%@&quot;,[NSThread currentThread]);</div><div class="line">&#125;</div><div class="line"> </div><div class="line">- (void)doSomething3:(NSObject *)object &#123;</div><div class="line">    NSLog(@&quot;%@&quot;,object);</div><div class="line">    NSLog(@&quot;doSomething3ï¼š%@&quot;,[NSThread currentThread]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="NSThreadçš„ç±»æ–¹æ³•"><a href="#NSThreadçš„ç±»æ–¹æ³•" class="headerlink" title="NSThreadçš„ç±»æ–¹æ³•"></a>NSThreadçš„ç±»æ–¹æ³•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">è¿”å›å½“å‰çº¿ç¨‹</div><div class="line"></div><div class="line">// å½“å‰çº¿ç¨‹</div><div class="line">[NSThread currentThread];</div><div class="line">NSLog(@&quot;%@&quot;,[NSThread currentThread]);</div><div class="line"> </div><div class="line">// å¦‚æœnumber=1ï¼Œåˆ™è¡¨ç¤ºåœ¨ä¸»çº¿ç¨‹ï¼Œå¦åˆ™æ˜¯å­çº¿ç¨‹</div><div class="line">æ‰“å°ç»“æœï¼š&#123;number = 1, name = main&#125;</div><div class="line"></div><div class="line">é˜»å¡ä¼‘çœ </div><div class="line">//ä¼‘çœ å¤šä¹…</div><div class="line">[NSThread sleepForTimeInterval:2];</div><div class="line">//ä¼‘çœ åˆ°æŒ‡å®šæ—¶é—´</div><div class="line">[NSThread sleepUntilDate:[NSDate date]];</div><div class="line">ç±»æ–¹æ³•è¡¥å……</div><div class="line"></div><div class="line">//é€€å‡ºçº¿ç¨‹</div><div class="line">[NSThread exit];</div><div class="line">//åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦ä¸ºä¸»çº¿ç¨‹</div><div class="line">[NSThread isMainThread];</div><div class="line">//åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦æ˜¯å¤šçº¿ç¨‹</div><div class="line">[NSThread isMultiThreaded];</div><div class="line">//ä¸»çº¿ç¨‹çš„å¯¹è±¡</div><div class="line">NSThread *mainThread = [NSThread mainThread];</div></pre></td></tr></table></figure>
<h4 id="NSThreadçš„ä¸€äº›å±æ€§"><a href="#NSThreadçš„ä¸€äº›å±æ€§" class="headerlink" title="NSThreadçš„ä¸€äº›å±æ€§"></a>NSThreadçš„ä¸€äº›å±æ€§</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//çº¿ç¨‹æ˜¯å¦åœ¨æ‰§è¡Œ</div><div class="line">thread.isExecuting;</div><div class="line">//çº¿ç¨‹æ˜¯å¦è¢«å–æ¶ˆ</div><div class="line">thread.isCancelled;</div><div class="line">//çº¿ç¨‹æ˜¯å¦å®Œæˆ</div><div class="line">thread.isFinished;</div><div class="line">//æ˜¯å¦æ˜¯ä¸»çº¿ç¨‹</div><div class="line">thread.isMainThread;</div><div class="line">//çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œå–å€¼èŒƒå›´0.0åˆ°1.0ï¼Œé»˜è®¤ä¼˜å…ˆçº§0.5ï¼Œ1.0è¡¨ç¤ºæœ€é«˜ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§é«˜ï¼ŒCPUè°ƒåº¦çš„é¢‘ç‡é«˜</div><div class="line">thread.threadPriority;</div></pre></td></tr></table></figure>
<h4 id="NSThreadä½¿ç”¨åœºæ™¯"><a href="#NSThreadä½¿ç”¨åœºæ™¯" class="headerlink" title="NSThreadä½¿ç”¨åœºæ™¯"></a>NSThreadä½¿ç”¨åœºæ™¯</h4><p>å¸¸é©»çº¿ç¨‹çš„å®ç°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">1.è®¾ç½®æˆå…¨å±€çš„ï¼Œå¦‚æœæ˜¯çº¿ç¨‹å¯¹è±¡æ˜¯å±€éƒ¨çš„å°±ä¼šæ­»æ‰</div><div class="line">@property (nonatomic,strong) NSThread *thread;</div><div class="line">2.åˆå§‹åŒ–çº¿ç¨‹å¹¶å¯åŠ¨</div><div class="line"></div><div class="line">self.thread = [[NSThread alloc]initWithTarget:self selector:@selector(run) object:nil];</div><div class="line">[self.thread start];</div><div class="line"></div><div class="line"></div><div class="line">3.å¯åŠ¨RunLoopï¼Œå­çº¿ç¨‹çš„RunLoopé»˜è®¤æ˜¯åœæ­¢çš„</div><div class="line"></div><div class="line">- (void)run&#123;</div><div class="line">    //åªè¦å¾€RunLoopä¸­æ·»åŠ äº†  timerã€sourceæˆ–è€…observerå°±ä¼šç»§ç»­æ‰§è¡Œï¼Œä¸€ä¸ªRun Loopé€šå¸¸å¿…é¡»åŒ…å«ä¸€ä¸ªè¾“å…¥æºæˆ–è€…å®šæ—¶å™¨æ¥ç›‘å¬äº‹ä»¶ï¼Œå¦‚æœä¸€ä¸ªéƒ½æ²¡æœ‰ï¼ŒRun Loopå¯åŠ¨åç«‹å³é€€å‡ºã€‚</div><div class="line">    </div><div class="line">    @autoreleasepool &#123;</div><div class="line">    </div><div class="line">    //1ã€æ·»åŠ ä¸€ä¸ªinput source</div><div class="line">        [[NSRunLoop currentRunLoop] addPort:[NSPort port] forMode:NSDefaultRunLoopMode];</div><div class="line">    [[NSRunLoop currentRunLoop] run];</div><div class="line">    //2ã€æ·»åŠ ä¸€ä¸ªå®šæ—¶å™¨</div><div class="line">    NSTimer *timer = [NSTimer timerWithTimeInterval:2.0 target:self selector:@selector(test) userInfo:nil repeats:YES];</div><div class="line">    [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];</div><div class="line">    [[NSRunLoop currentRunLoop] run];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">è¿™æ ·threadè¿™ä¸ªçº¿ç¨‹å°±ä¼šä¸€ç›´å­˜åœ¨ï¼Œå½“éœ€è¦ä½¿ç”¨æ­¤çº¿ç¨‹åœ¨å¤„ç†ä¸€äº›äº‹æƒ…çš„æ—¶å€™å°±è¿™ä¹ˆè°ƒç”¨</div><div class="line"></div><div class="line">4.åˆ©ç”¨å¸¸é©»çº¿ç¨‹å¤„ç†äº‹æƒ…</div><div class="line"></div><div class="line">[self performSelector:@selector(action) onThread:self.thread withObject:nil waitUntilDone:NO ];</div></pre></td></tr></table></figure>
<p>çœ‹ä¸€ä¸‹è¿™ä¸ªä»£ç çš„é—®é¢˜:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;</div><div class="line">        NSTimer * timer = [NSTimer timerWithTimeInterval:1.f repeats:YES block:^(NSTimer * _Nonnull timer) &#123;</div><div class="line">            static int count = 0;</div><div class="line">            [NSThread sleepForTimeInterval:1];</div><div class="line">            //ä¼‘æ¯ä¸€ç§’é’Ÿï¼Œæ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</div><div class="line">            NSLog(@&quot;%s - %d&quot;,__func__,count++);</div><div class="line">        &#125;];</div><div class="line">        [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<p>æ ¹æœ¬å•¥éƒ½ä¸ä¼šå‘ç”Ÿï¼Œå› ä¸ºè¿™ä¸ªå­çº¿ç¨‹çš„runloopéœ€è¦è°ƒç”¨runæ–¹æ³•æ‰å¯ä»¥ã€‚</p>
<p><code>[[NSRunLoop currentRunLoop] run];</code>//å­çº¿ç¨‹éœ€è¦æ‰‹åŠ¨å¼€å¯Runloop</p>
<h4 id="threadå¯åŠ¨æµç¨‹"><a href="#threadå¯åŠ¨æµç¨‹" class="headerlink" title="threadå¯åŠ¨æµç¨‹"></a>threadå¯åŠ¨æµç¨‹</h4><p><img src="/01/2015/å¤šçº¿ç¨‹æŠ€æœ¯/../images/2018-07-034.50.21.png" alt=""></p>
<p>é•¿é©»å­çº¿ç¨‹æ˜¯åœ¨selectorä¸­è¿›è¡Œï¼Œå¦‚ä¸Š</p>
<h5 id="é‚£ä¹ˆè¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜äº†ï¼ŒNSThreadå¯åŠ¨çš„æ—¶å€™æ˜¯å¦éœ€è¦æ‰‹åŠ¨åˆ›å»ºé‡Šæ”¾æ± ï¼Ÿ"><a href="#é‚£ä¹ˆè¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜äº†ï¼ŒNSThreadå¯åŠ¨çš„æ—¶å€™æ˜¯å¦éœ€è¦æ‰‹åŠ¨åˆ›å»ºé‡Šæ”¾æ± ï¼Ÿ" class="headerlink" title="é‚£ä¹ˆè¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜äº†ï¼ŒNSThreadå¯åŠ¨çš„æ—¶å€™æ˜¯å¦éœ€è¦æ‰‹åŠ¨åˆ›å»ºé‡Šæ”¾æ± ï¼Ÿ"></a>é‚£ä¹ˆè¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜äº†ï¼ŒNSThreadå¯åŠ¨çš„æ—¶å€™æ˜¯å¦éœ€è¦æ‰‹åŠ¨åˆ›å»ºé‡Šæ”¾æ± ï¼Ÿ</h5><p>ç­”æ¡ˆæ˜¯ä¸éœ€è¦ï¼ŒéªŒè¯ï¼Œå½“pthread_exité€€å‡ºæ—¶ï¼Œè§¦å‘äº†_pthread_tsd_cleanupï¼Œè§¦å‘AutoreleasePoolPageçš„tls_dealloc(void*)ï¼Œç„¶åå›æ”¶autoreleaseå¯¹è±¡ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—å‡ºæ¥ä¸€ä¸ªç»“è®ºï¼Œçº¿ç¨‹åˆ›å»ºçš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨é‡Šæ”¾æ± ï¼Œå½“çº¿ç¨‹é€€å‡ºçš„æ—¶å€™æ¸…ç©ºè¿™ä¸ªæ± å­ï¼Œé‡Šæ”¾å†…å­˜ã€‚</p>
<h3 id="GCDçš„ç†è§£ä¸ä½¿ç”¨"><a href="#GCDçš„ç†è§£ä¸ä½¿ç”¨" class="headerlink" title="GCDçš„ç†è§£ä¸ä½¿ç”¨"></a>GCDçš„ç†è§£ä¸ä½¿ç”¨</h3><p>GCDæ˜¯å¯¹pthreadçš„å°è£…ï¼Œç›®çš„åœ¨äºæ›¿ä»£NSThreadçš„ï¼Œæœ‰ç‚¹åœ¨äºè‡ªåŠ¨ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ(åˆ›å»ºï¼Œè°ƒåº¦ï¼Œé”€æ¯)ï¼Œæˆ‘ä»¬åªéœ€è¦å‘Šè¯‰GCDæƒ³è¦æ‰§è¡Œä»€ä¹ˆä»»åŠ¡ï¼Œä¸éœ€è¦å†™ä»»ä½•çº¿ç¨‹ç®¡ç†ä»£ç ã€‚</p>
<h4 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h4><ol>
<li><p>å¹¶å‘æ‰§è¡Œçš„æœ¬è´¨æ˜¯å¤šçº¿ç¨‹ï¼Œä¸æ˜¯å¤šé˜Ÿåˆ—ï¼Œä¸€ä¸ªå¹¶å‘é˜Ÿåˆ—æå®š</p>
</li>
<li><p>å¼€ä¸å¼€çº¿ç¨‹ï¼Œå–å†³äºæ‰§è¡Œä»»åŠ¡çš„é˜Ÿåˆ—ï¼Œå¦‚æœä¸²è¡Œé˜Ÿåˆ—ï¼Œæœ‰çº¿ç¨‹å¯¹åº”è¯¥é˜Ÿåˆ—å°±ä¸å¼€äº†ï¼Œå¹¶å‘é˜Ÿåˆ—å¦‚æœåœ¨çº¿ç¨‹æ± å–ä¸åˆ°é˜Ÿåˆ—å°±ä¼šæ–°å¼€çº¿ç¨‹ã€‚</p>
</li>
<li><p>å¼€å‡ æ¡çº¿ç¨‹ï¼Œè¿™ä¸ªå¦‚æœæ˜¯ä¸²è¡Œé˜Ÿåˆ—æœ‰ä¸€ä¸ªçº¿ç¨‹å°±è¡Œäº†ï¼Œå¦‚æœæ˜¯å¹¶å‘é˜Ÿåˆ—ï¼Œå°±è¦çœ‹å…·ä½“æƒ…å†µäº†ï¼Œè¿™ä¸ªæ˜¯ç”±ç³»ç»Ÿæ¥å†³å®šçš„ã€‚</p>
</li>
<li><p>ä¸»é˜Ÿåˆ—ï¼š  ä¸“é—¨ç”¨æ¥åœ¨ä¸»çº¿ç¨‹ä¸Šè°ƒåº¦ä»»åŠ¡çš„â€é˜Ÿåˆ—â€ï¼Œä¸»é˜Ÿåˆ—ä¸èƒ½åœ¨å…¶ä»–çº¿ç¨‹ä¸­è°ƒåº¦ä»»åŠ¡ï¼</p>
</li>
<li><p>å¦‚æœä¸»çº¿ç¨‹ä¸Šå½“å‰æ­£åœ¨æœ‰æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¸»é˜Ÿåˆ—æš‚æ—¶ä¸ä¼šè°ƒåº¦ä»»åŠ¡çš„æ‰§è¡Œï¼ä¸»é˜Ÿåˆ—åŒæ­¥ä»»åŠ¡ï¼Œä¼šé€ æˆæ­»é”ã€‚åŸå› æ˜¯å¾ªç¯ç­‰å¾…</p>
</li>
<li><p>åŒæ­¥ä»»åŠ¡å¯ä»¥é˜Ÿåˆ—è°ƒåº¦å¤šä¸ªå¼‚æ­¥ä»»åŠ¡å‰ï¼ŒæŒ‡å®šä¸€ä¸ªåŒæ­¥ä»»åŠ¡ï¼Œè®©æ‰€æœ‰çš„å¼‚æ­¥ä»»åŠ¡ï¼Œç­‰å¾…åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œè¿™æ˜¯ä¾èµ–å…³ç³»ã€‚</p>
</li>
<li><p>å…¨å±€é˜Ÿåˆ—ï¼šå¹¶å‘ï¼Œèƒ½å¤Ÿè°ƒåº¦å¤šä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼Œä½†æ˜¯ç›¸å¯¹è´¹ç”µã€‚ ä¸²è¡Œé˜Ÿåˆ—æ•ˆç‡è¾ƒä½ï¼Œçœç”µçœæµé‡ï¼Œæˆ–è€…æ˜¯ä»»åŠ¡ä¹‹é—´éœ€è¦ä¾èµ–ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸²è¡Œé˜Ÿåˆ—ã€‚</p>
</li>
<li><p>ä¹Ÿå¯ä»¥é€šè¿‡åˆ¤æ–­å½“å‰ç”¨æˆ·çš„ç½‘ç»œç¯å¢ƒæ¥å†³å®šå¼€çš„çº¿ç¨‹æ•°ã€‚WIFIä¸‹6æ¡ï¼Œ3G/4Gä¸‹2ï½3æ¡ã€‚</p>
</li>
</ol>
<h4 id="é˜Ÿåˆ—çš„é€‰æ‹©"><a href="#é˜Ÿåˆ—çš„é€‰æ‹©" class="headerlink" title="é˜Ÿåˆ—çš„é€‰æ‹©"></a>é˜Ÿåˆ—çš„é€‰æ‹©</h4><p>é€‰æ‹©é˜Ÿåˆ—å½“ç„¶æ˜¯è¦å…ˆäº†è§£é˜Ÿåˆ—çš„ç‰¹ç‚¹ï¼š<br>ä¸²è¡Œé˜Ÿåˆ—ï¼šå¯¹æ‰§è¡Œæ•ˆç‡è¦æ±‚ä¸é«˜ï¼Œå¯¹æ‰§è¡Œé¡ºåºè¦æ±‚é«˜ï¼Œæ€§èƒ½æ¶ˆè€—å°<br>å¹¶å‘é˜Ÿåˆ—ï¼šå¯¹æ‰§è¡Œæ•ˆç‡è¦æ±‚é«˜ï¼Œå¯¹æ‰§è¡Œé¡ºåºè¦æ±‚ä¸é«˜ï¼Œæ€§èƒ½æ¶ˆè€—å¤§</p>
<h4 id="é˜Ÿåˆ—çš„åˆ›å»ºæ–¹æ³•"><a href="#é˜Ÿåˆ—çš„åˆ›å»ºæ–¹æ³•" class="headerlink" title="é˜Ÿåˆ—çš„åˆ›å»ºæ–¹æ³•"></a>é˜Ÿåˆ—çš„åˆ›å»ºæ–¹æ³•</h4><p>ä½¿ç”¨<code>dispatch_queue_create</code>æ¥åˆ›å»ºé˜Ÿåˆ—å¯¹è±¡ï¼Œä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºé˜Ÿåˆ—çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¯ä¸ºç©ºã€‚ç¬¬äºŒä¸ªå‚æ•°ç”¨æ¥è¡¨ç¤ºä¸²è¡Œé˜Ÿåˆ—<code>ï¼ˆDISPATCH_QUEUE_SERIAï¼‰</code>æˆ–å¹¶å‘é˜Ÿåˆ—<code>ï¼ˆDISPATCH_QUEUE_CONCURRENTï¼‰</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// ä¸²è¡Œé˜Ÿåˆ—</div><div class="line">dispatch_queue_t queue = dispatch_queue_create(&quot;test&quot;, DISPATCH_QUEUE_SERIAL);</div><div class="line">// ä¸²è¡Œé˜Ÿåˆ—</div><div class="line">dispatch_queue_t myQueueS = dispatch_queue_create(&quot;com.kugou.gcd.myQueue&quot;, NULL);</div><div class="line">// å¹¶å‘é˜Ÿåˆ—</div><div class="line">dispatch_queue_t queue1 = dispatch_queue_create(&quot;test&quot;, DISPATCH_QUEUE_CONCURRENT);</div></pre></td></tr></table></figure>
<blockquote>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºåå­—ï¼Œä¸€å®šè¦è®¾ç½®è¿™ä¸ªå‚æ•°ï¼Œå› ä¸ºå‘ç”Ÿå´©æºƒçš„æ—¶å€™ï¼Œè¿™ä¸ªå°†æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æŒ‡å¼•ï¼Œè¿™ä¸ªåå­—ä¼šå‡ºç°åœ¨å´©æºƒä¿¡æ¯ä¸­ï¼Œç¬¬äºŒä¸ªå‚æ•°å¦‚æœè¦åˆ›å»ºserial queueå°±è®¾ç½®ä¸ºNULLï¼Œä»£è¡¨ç©ºçš„cæŒ‡é’ˆï¼Œå¦‚æœæ˜¯å¦å¤–ä¸€ç§å°±è®¾ç½®ä¸ºDISPATCH_QUEUE_CONCURRENT</p>
</blockquote>
<p>å¦å¤–è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶æˆ‘ä»¬å·²ç»æ­¥å…¥äº†ARCæ—¶ä»£ï¼Œä½†æ˜¯Dispatch Queueå¿…é¡»ç”±å¼€å‘äººå‘˜æ¥é‡Šæ”¾ï¼Œæ¥ç€ä¸Šç­çš„ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">dispatch_async(myQueueS, ^&#123;NSLog(@&quot;123&quot;)&#125;);</div><div class="line">dispatch_release(myQueueS);</div></pre></td></tr></table></figure>
<p>åœ¨è°ƒç”¨asyncä¹‹åç«‹åˆ»é‡Šæ”¾queueï¼Œè¿™æ ·å¹¶ä¸ä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºæ­¤æ—¶blockå·²ç»å¯¹é½æœ‰ä¸€ä¸ªå¼•ç”¨äº†ã€‚å½“blockç»“æŸä¹‹åå°±ä¼šé‡Šæ”¾è¿™ä¸ªqueueã€‚<br>å‡¡æ˜¯ç”±createåˆ›å»ºçš„å¯¹è±¡éƒ½è¦è®°å¾—æ‰‹åŠ¨é‡Šæ”¾ã€‚</p>
<h5 id="GCDçš„é˜Ÿåˆ—è¿˜æœ‰å¦å¤–ä¸¤ç§ï¼š"><a href="#GCDçš„é˜Ÿåˆ—è¿˜æœ‰å¦å¤–ä¸¤ç§ï¼š" class="headerlink" title="GCDçš„é˜Ÿåˆ—è¿˜æœ‰å¦å¤–ä¸¤ç§ï¼š"></a>GCDçš„é˜Ÿåˆ—è¿˜æœ‰å¦å¤–ä¸¤ç§ï¼š</h5><p>ä¸»é˜Ÿåˆ—ï¼šä¸»é˜Ÿåˆ—è´Ÿè´£åœ¨ä¸»çº¿ç¨‹ä¸Šè°ƒåº¦ä»»åŠ¡ï¼Œå¦‚æœåœ¨ä¸»çº¿ç¨‹ä¸Šå·²ç»æœ‰ä»»åŠ¡æ­£åœ¨æ‰§è¡Œï¼Œä¸»é˜Ÿåˆ—ä¼šç­‰åˆ°ä¸»çº¿ç¨‹ç©ºé—²åå†è°ƒåº¦ä»»åŠ¡ã€‚é€šå¸¸æ˜¯è¿”å›ä¸»çº¿ç¨‹æ›´æ–°UIçš„æ—¶å€™ä½¿ç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">dispatch_get_main_queue()</div><div class="line"></div><div class="line">  dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;</div><div class="line">      // è€—æ—¶æ“ä½œæ”¾åœ¨è¿™é‡Œ</div><div class="line">3</div><div class="line">      dispatch_async(dispatch_get_main_queue(), ^&#123;</div><div class="line">          // å›åˆ°ä¸»çº¿ç¨‹è¿›è¡ŒUIæ“ä½œ</div><div class="line">3</div><div class="line">      &#125;);</div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<p>å…¨å±€å¹¶å‘é˜Ÿåˆ—ï¼šå…¨å±€å¹¶å‘é˜Ÿåˆ—æ˜¯å°±æ˜¯ä¸€ä¸ªå¹¶å‘é˜Ÿåˆ—ï¼Œæ˜¯ä¸ºäº†è®©æˆ‘ä»¬æ›´æ–¹ä¾¿çš„ä½¿ç”¨å¤šçº¿ç¨‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">dispatch_get_global_queue(0, 0)</div><div class="line"></div><div class="line">//å…¨å±€å¹¶å‘é˜Ÿåˆ—</div><div class="line">dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</div><div class="line">//å…¨å±€å¹¶å‘é˜Ÿåˆ—çš„ä¼˜å…ˆçº§</div><div class="line">#define DISPATCH_QUEUE_PRIORITY_HIGH 2 // é«˜ä¼˜å…ˆçº§</div><div class="line">#define DISPATCH_QUEUE_PRIORITY_DEFAULT 0 // é»˜è®¤ï¼ˆä¸­ï¼‰ä¼˜å…ˆçº§</div><div class="line">#define DISPATCH_QUEUE_PRIORITY_LOW (-2) // ä½ä¼˜å…ˆçº§</div><div class="line">#define DISPATCH_QUEUE_PRIORITY_BACKGROUND INT16_MIN // åå°ä¼˜å…ˆçº§</div><div class="line">//iOS8å¼€å§‹ä½¿ç”¨æœåŠ¡è´¨é‡ï¼Œç°åœ¨è·å–å…¨å±€å¹¶å‘é˜Ÿåˆ—æ—¶ï¼Œå¯ä»¥ç›´æ¥ä¼ 0</div><div class="line">dispatch_get_global_queue(0, 0);</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é€šè¿‡<code>dispatch_get_global_queue</code>æ¥è·å–ä¸€ä¸ªqueueï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä½ è·å–ä¸€ä¸ªä»€ä¹ˆæ ·çš„queueå‘¢ï¼Ÿä¸€ä¸ªæœ‰å‡ ä¸ªå…¨å±€çš„queueå‘¢ï¼Ÿä»ä¸‹è¾¹çš„å‚æ•°æ¥çœ‹ï¼Œä¸€å…±æœ‰å››ç§ï¼Œå…·ä½“æ¥è®²æœ‰å››ä¸ªï¼Œæ¯ç§ä¸€ä¸ªã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#define DISPATCH_QUEUE_PRIORITY_HIGH 2</div><div class="line">#define DISPATCH_QUEUE_PRIORITY_DEFAULT 0</div><div class="line">#define DISPATCH_QUEUE_PRIORITY_LOW (-2)</div><div class="line">#define DISPATCH_QUEUE_PRIORITY_BACKGROUND INT16_MIN</div></pre></td></tr></table></figure>
<p>åœ¨å¹¶è¡Œçš„é˜Ÿåˆ—ä¹Ÿå°±æ˜¯<code>dispatch_get_global_queue</code>ï¼Œä¸€å…±4ä¸ªå¯ç”¨ï¼Œå½“<code>dispatch_sync</code>è°ƒç”¨ä¸€æ¬¡ï¼Œä¼šå ç”¨é˜»å¡ä¸€ä¸ªï¼Œç›´åˆ°ç”¨å®Œï¼Œ<code>dispatch_get_global_queue</code>åªèƒ½æ·»åŠ çš„æ—¶å€™å®‰æ’ä¼˜å…ˆçº§ï¼Œä¸èƒ½å»æ“ä½œé‡Œé¢çš„è°ƒåº¦</p>
<h4 id="ä»»åŠ¡æäº¤æ–¹å¼dispatch-sync-async"><a href="#ä»»åŠ¡æäº¤æ–¹å¼dispatch-sync-async" class="headerlink" title="ä»»åŠ¡æäº¤æ–¹å¼dispatch_sync/async"></a>ä»»åŠ¡æäº¤æ–¹å¼<code>dispatch_sync/async</code></h4><p>æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸¤ä¸ªå‡½æ•°åˆ°åº•è¯¥æ€ä¹ˆç†è§£ã€‚</p>
<p>disptach_asyncæ˜¯å¼‚æ­¥æ‰”ä¸€ä¸ªblockåˆ°queueä¸­ï¼Œå³æ‰”å®Œæˆ‘å°±ä¸ç®¡äº†ï¼Œç»§ç»­æ‰§è¡Œæˆ‘çš„ä¸‹ä¸€è¡Œä»£ç ã€‚å®é™…ä¸Šå½“ä¸‹ä¸€è¡Œä»£ç æ‰§è¡Œæ—¶ï¼Œè¿™ä¸ªblockè¿˜æœªæ‰§è¡Œï¼Œåªæ˜¯å…¥äº†é˜Ÿåˆ—queueï¼Œqueueä¼šæ’é˜Ÿæ¥æ‰§è¡Œè¿™ä¸ªblockã€‚</p>
<p>è€Œdisptach_syncåˆ™æ˜¯åŒæ­¥æ‰”ä¸€ä¸ªblockåˆ°queueä¸­ï¼Œå³æ‰”äº†æˆ‘å°±ç­‰ç€ï¼Œç­‰åˆ°queueæ’é˜ŸæŠŠè¿™ä¸ªblockæ‰§è¡Œå®Œäº†ä¹‹åï¼Œæ‰ç»§ç»­æ‰§è¡Œä¸‹ä¸€è¡Œä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">dispatch_sync(seriqueue, ^&#123;</div><div class="line">	[self test];</div><div class="line">&#125;);</div><div class="line">    </div><div class="line">dispatch_async(seriqueue, ^&#123;</div><div class="line">	[self test];</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h5 id="dispatch-syncä½¿ç”¨åœºæ™¯"><a href="#dispatch-syncä½¿ç”¨åœºæ™¯" class="headerlink" title="dispatch_syncä½¿ç”¨åœºæ™¯"></a>dispatch_syncä½¿ç”¨åœºæ™¯</h5><p>ä¸»è¦ç”¨äºä»£ç ä¸Šä¸‹æ–‡å¯¹æ—¶åºæœ‰å¼ºè¦æ±‚çš„åœºæ™¯ã€‚ç®€å•ç‚¹è¯´ï¼Œå°±æ˜¯ä¸‹ä¸€è¡Œä»£ç çš„æ‰§è¡Œï¼Œä¾èµ–äºä¸Šä¸€è¡Œä»£ç çš„ç»“æœã€‚</p>
<p>ä¾‹å¦‚è¯´ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å­çº¿ç¨‹ä¸­è¯»å–ä¸€ä¸ªimageå¯¹è±¡ï¼Œä½¿ç”¨æ¥å£[UIImage imageNamed:]ï¼Œä½†imageNamed:å®é™…ä¸Šåœ¨iOS9ä»¥åæ‰æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒiOS9ä¹‹å‰éƒ½éœ€è¦åœ¨ä¸»çº¿ç¨‹è·å–ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä»å­çº¿ç¨‹åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹è·å–imageï¼Œç„¶åå†åˆ‡å›å­çº¿ç¨‹æ‹¿åˆ°è¿™ä¸ªimageã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">__block UIImage *image;</div><div class="line">if (![NSThread isMainThread]) &#123;</div><div class="line">    dispatch_sync(dispatch_get_main_queue(), ^&#123;</div><div class="line">        image = [UIImage imageNamed:@&quot;ceshi&quot;];</div><div class="line">    &#125;);</div><div class="line">    attachment.image = image;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œè¦è¯´æ˜ä¸€ç‚¹ï¼Œåˆ‡æ¢åˆ°ä¸»çº¿ç¨‹ï¼Œä½¿ç”¨syncå’Œasyncå…¶å®éƒ½å¯ä»¥ï¼ŒåŒºåˆ«åœ¨äºæ˜¯å¦ä¼šå µå¡ï¼Œåœ¨è¿™ä¸ªåœºæ™¯é‡Œï¼Œå­çº¿ç¨‹éœ€è¦ç­‰å¾…ä¸»çº¿ç¨‹è¿™ä¸ªä»»åŠ¡å®Œæˆï¼Œæ‰€ä»¥é€‰æ‹©ç”¨syncï¼Œä½†æ˜¯å¦‚æœæ˜¯å›åˆ°ä¸»çº¿ç¨‹åˆ·æ–°ä¸€ä¸ªUIï¼Œä¸‹è¾¹çš„ä»»åŠ¡ä¸ä¾èµ–ä¸Šè¾¹çš„ä»»åŠ¡ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä¼šé€‰æ‹©asyncã€‚</p>
<p>å†æ¯”å¦‚ï¼Œå¹¶å‘é˜Ÿåˆ—ä¸­ï¼Œåˆ©ç”¨åŒæ­¥ä»»åŠ¡ï¼Œèƒ½å¤Ÿåšåˆ°ä»»åŠ¡ä¾èµ–å…³ç³»ï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡ï¼ˆç™»å½•ï¼‰æ˜¯åŒæ­¥ä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡ä¸æ‰§è¡Œå®Œï¼Œé˜Ÿåˆ—å°±ä¸ä¼šè°ƒåº¦åé¢çš„ä»»åŠ¡ï¼ˆæ”¯ä»˜ã€ä¸‹è½½ï¼‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t q = dispatch_queue_create(&quot;test&quot;, DISPATCH_QUEUE_CONCURRENT);</div><div class="line"></div><div class="line">//1.ç”¨æˆ·ç™»å½• å¼€å¯äº†åŒæ­¥ä»»åŠ¡ï¼Œç›¸å½“äºç”¨äº†ä¸€æŠŠé”ï¼Œæ‰€æœ‰çš„ä¸»çº¿ç¨‹éƒ½æ‰§è¡Œå®Œåï¼Œæ‰ä¼šæ‰§è¡Œé˜Ÿåˆ—é‡Œçš„å­çº¿ç¨‹ä»»åŠ¡</div><div class="line"></div><div class="line">dispatch_sync(q, ^&#123;</div><div class="line"></div><div class="line">Â  Â  NSLog(@&quot;ç”¨æˆ·ç™»å½•ï¼š%@&quot;, [NSThread currentThread]);</div><div class="line"></div><div class="line">&#125;);</div><div class="line"></div><div class="line">//2.ç”¨æˆ·æ”¯ä»˜</div><div class="line"></div><div class="line">dispatch_async(q, ^&#123;</div><div class="line"></div><div class="line">Â  Â  NSLog(@&quot;ç”¨æˆ·æ”¯ä»˜ï¼š%@&quot;, [NSThread currentThread]);</div><div class="line"></div><div class="line">&#125;);</div><div class="line"></div><div class="line">//3.ç”¨æˆ·ä¸‹è½½</div><div class="line"></div><div class="line">dispatch_async(q, ^&#123;</div><div class="line"></div><div class="line">Â  Â  NSLog(@&quot;ç”¨æˆ·ä¸‹è½½ï¼š%@&quot;, [NSThread currentThread]);</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="æ …æ çš„ä½¿ç”¨dispatch-barrier-async"><a href="#æ …æ çš„ä½¿ç”¨dispatch-barrier-async" class="headerlink" title="æ …æ çš„ä½¿ç”¨dispatch_barrier_async"></a>æ …æ çš„ä½¿ç”¨<code>dispatch_barrier_async</code></h4><p>å½“ä»»åŠ¡éœ€è¦å¼‚æ­¥è¿›è¡Œï¼Œä½†æ˜¯è¿™äº›ä»»åŠ¡éœ€è¦åˆ†æˆä¸¤ç»„æ¥æ‰§è¡Œï¼Œç¬¬ä¸€ç»„å®Œæˆä¹‹åæ‰èƒ½è¿›è¡Œç¬¬äºŒç»„çš„æ“ä½œã€‚è¿™æ—¶å€™å°±ç”¨äº†åˆ°GCDçš„æ …æ æ–¹æ³•dispatch_barrier_asyncã€‚</p>
<p><a href="https://blog.csdn.net/u013046795/article/details/47057585" target="_blank" rel="external">syncä¸asyncåŒºåˆ«</a></p>
<blockquote>
<p>dispatch_barrier_syncå’Œdispatch_barrier_asyncçš„å…±åŒç‚¹ï¼š<br>1ã€éƒ½ä¼šç­‰å¾…åœ¨å®ƒå‰é¢æ’å…¥é˜Ÿåˆ—çš„ä»»åŠ¡ï¼ˆ1ã€2ã€3ï¼‰å…ˆæ‰§è¡Œå®Œ<br>2ã€éƒ½ä¼šç­‰å¾…ä»–ä»¬è‡ªå·±çš„ä»»åŠ¡ï¼ˆ0ï¼‰æ‰§è¡Œå®Œå†æ‰§è¡Œåé¢çš„ä»»åŠ¡ï¼ˆ4ã€5ã€6ï¼‰</p>
<p>dispatch_barrier_syncå’Œdispatch_barrier_asyncçš„ä¸å…±åŒç‚¹ï¼š<br>åœ¨å°†ä»»åŠ¡æ’å…¥åˆ°queueçš„æ—¶å€™ï¼Œdispatch_barrier_syncéœ€è¦ç­‰å¾…è‡ªå·±çš„ä»»åŠ¡ï¼ˆ0ï¼‰ç»“æŸä¹‹åæ‰ä¼šç»§ç»­ç¨‹åºï¼Œç„¶åæ’å…¥è¢«å†™åœ¨å®ƒåé¢çš„ä»»åŠ¡ï¼ˆ4ã€5ã€6ï¼‰ï¼Œç„¶åæ‰§è¡Œåé¢çš„ä»»åŠ¡<br>è€Œdispatch_barrier_asyncå°†è‡ªå·±çš„ä»»åŠ¡ï¼ˆ0ï¼‰æ’å…¥åˆ°queueä¹‹åï¼Œä¸ä¼šç­‰å¾…è‡ªå·±çš„ä»»åŠ¡ç»“æŸï¼Œå®ƒä¼šç»§ç»­æŠŠåé¢çš„ä»»åŠ¡ï¼ˆ4ã€5ã€6ï¼‰æ’å…¥åˆ°queue</p>
<p>æ‰€ä»¥ï¼Œdispatch_barrier_asyncçš„ä¸ç­‰å¾…ï¼ˆå¼‚æ­¥ï¼‰ç‰¹æ€§ä½“ç°åœ¨å°†ä»»åŠ¡æ’å…¥é˜Ÿåˆ—çš„è¿‡ç¨‹ï¼Œå®ƒçš„ç­‰å¾…ç‰¹æ€§ä½“ç°åœ¨ä»»åŠ¡çœŸæ­£æ‰§è¡Œçš„è¿‡ç¨‹ã€‚</p>
</blockquote>
<p>å¦‚æœç°åœ¨æˆ‘ä»¬æ˜¯10ä¸ªè¯»å–çš„æ“ä½œï¼Œç„¶åå¹¶å‘æ‰§è¡Œå¹¶æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœæœ‰ä¸€ä¸ªå†™å…¥çš„æ“ä½œæºæ‚åœ¨å…¶ä¸­ï¼Œè¿™ä¸ªæ—¶å€™å°±æœ‰ç‚¹é—®é¢˜äº†ï¼Œè¯»å†™åŒæ—¶è¿›è¡Œï¼Œå°±ä¼šå‡ºé—®é¢˜ã€‚</p>
<p>è¯¥å‡½æ•°ä¸Concurrent Dispatch QueueåŒæ—¶ä½¿ç”¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t queueC = dispatch_queue_create(&quot;com.kugou.gcd.myQueue&quot;, DISPATCH_QUEUE_CONCURRENT);</div><div class="line">dispatch_async(queue, blk0_reading);</div><div class="line">dispatch_async(queue, blk1_reading);</div><div class="line">dispatch_async(queue, blk2_reading);</div><div class="line">dispatch_barrier_async(queue, blk3_writing);</div><div class="line">dispatch_async(queue, blk4_reading);</div><div class="line">dispatch_async(queue, blk5_reading);</div><div class="line">dispatch_async(queue, blk6_reading);</div></pre></td></tr></table></figure></p>
<p>è¿™æ ·å†™ç³»ç»Ÿä¼šç­‰0ï¼Œ1ï¼Œ2å¹¶å‘æ‰§è¡Œå®Œï¼Œæ‰§è¡Œblk3ï¼Œç­‰blk3æ‰§è¡Œå®Œå†å¹¶å‘æ‰§è¡Œ4ï¼Œ5ï¼Œ6</p>
<p>å†æ¯”å¦‚å¤šè¯»å•å†™çš„å®ç°ã€‚</p>
<h4 id="é˜Ÿåˆ—ç»„-è°ƒåº¦ç»„dispatch-group-async"><a href="#é˜Ÿåˆ—ç»„-è°ƒåº¦ç»„dispatch-group-async" class="headerlink" title="é˜Ÿåˆ—ç»„/è°ƒåº¦ç»„dispatch_group_async"></a>é˜Ÿåˆ—ç»„/è°ƒåº¦ç»„<code>dispatch_group_async</code></h4><p>å¼‚æ­¥æ‰§è¡Œå‡ ä¸ªè€—æ—¶æ“ä½œï¼Œå½“è¿™å‡ ä¸ªæ“ä½œéƒ½å®Œæˆä¹‹åå†å›åˆ°ä¸»çº¿ç¨‹è¿›è¡Œæ“ä½œï¼Œå°±å¯ä»¥ç”¨åˆ°é˜Ÿåˆ—ç»„äº†ã€‚</p>
<p>é˜Ÿåˆ—ç»„æœ‰ä¸‹é¢å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li><p>æ‰€æœ‰çš„ä»»åŠ¡ä¼šå¹¶å‘çš„æ‰§è¡Œ(ä¸æŒ‰åº)ã€‚</p>
</li>
<li><p>æ‰€æœ‰çš„å¼‚æ­¥å‡½æ•°éƒ½æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œç„¶åå†çº³å…¥é˜Ÿåˆ—ç»„çš„ç›‘å¬èŒƒå›´ã€‚</p>
</li>
<li><p>ä½¿ç”¨dispatch_group_notifyå‡½æ•°ï¼Œæ¥ç›‘å¬ä¸Šé¢çš„ä»»åŠ¡æ˜¯å¦å®Œæˆï¼Œå¦‚æœå®Œæˆ, å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>
</li>
</ul>
<p>ä¸‹è½½å¾ˆå¤šå›¾ç‰‡ï¼Œå½“éƒ½ä¸‹è½½å®Œæˆä¹‹åå†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚</p>
<p>å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬éƒ½éœ€è¦åšç»“æŸæ“ä½œï¼Œè¿™ä¸ªæ“ä½œè‚¯å®šæ˜¯åœ¨æœ€åçš„ï¼Œå¦‚æœæ˜¯serial queueè‚¯å®šæ²¡æœ‰é—®é¢˜ï¼ŒæŠŠä»£ç æ”¾åœ¨æœ€åå°±å¥½äº†ï¼Œå¯æ˜¯concurrent queueæ€ä¹ˆåŠå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥è€ƒè™‘dispatch_grounpã€‚</p>
<h5 id="åœºæ™¯1"><a href="#åœºæ™¯1" class="headerlink" title="åœºæ™¯1:"></a>åœºæ™¯1:</h5><p>ç°åœ¨æœ‰4ä¸ªä»»åŠ¡ï¼Œä»»åŠ¡1ã€ä»»åŠ¡2ã€ä»»åŠ¡3ã€ä»»åŠ¡4. ä»»åŠ¡3å¿…é¡»åœ¨ä»»åŠ¡2ä¹‹åï¼Œä»»åŠ¡4å¿…é¡»åœ¨å‰3ä¸ªä»»åŠ¡éƒ½æ‰§è¡Œå®Œæˆåï¼Œæ‰èƒ½æ‰§è¡Œï¼Œå¹¶ä¸”éœ€è¦åœ¨ä¸»çº¿ç¨‹æ›´æ–°UIã€‚</p>
<p>æ€è·¯åˆ†æï¼š</p>
<p>ä»»åŠ¡3å¿…é¡»åœ¨ä»»åŠ¡2ä¹‹åï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªå¿…é¡»ä¸²è¡Œæ‰§è¡Œï¼ŒåŒæ—¶ï¼Œä»»åŠ¡2å’Œ3æ•´ä½“å¯ä»¥å’Œä»»åŠ¡1å¹¶è¡Œæ‰§è¡Œï¼Œæœ€åï¼Œä»»åŠ¡4åªèƒ½ç­‰å¾…å‰3ä¸ªä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œæ‰èƒ½æ‰§è¡Œã€‚è¿™é‡Œå°±å¯ä»¥ç”¨groupå¿«é€Ÿå®ç°åœºæ™¯éœ€æ±‚ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">-(void)disGroup&#123;</div><div class="line">    dispatch_queue_t globalQuene = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</div><div class="line">    dispatch_queue_t selfQuene = dispatch_queue_create(&quot;myQuene&quot;, 0);</div><div class="line">    dispatch_group_t group = dispatch_group_create();</div><div class="line">    dispatch_group_async(group, globalQuene, ^&#123;</div><div class="line">        NSLog(@&quot;run task 1&quot;);</div><div class="line">    &#125;);</div><div class="line">    dispatch_group_async(group, selfQuene, ^&#123;</div><div class="line">        NSLog(@&quot;run task 2&quot;);</div><div class="line">    &#125;);</div><div class="line">    dispatch_group_async(group, selfQuene, ^&#123;</div><div class="line">        NSLog(@&quot;run task 3&quot;);</div><div class="line">    &#125;);</div><div class="line">    dispatch_group_notify(group, dispatch_get_main_queue(), ^&#123;</div><div class="line">        NSLog(@&quot;run task 4&quot;);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="åœºæ™¯2-dispatch-group-enterçš„ä½¿ç”¨"><a href="#åœºæ™¯2-dispatch-group-enterçš„ä½¿ç”¨" class="headerlink" title="åœºæ™¯2:dispatch_group_enterçš„ä½¿ç”¨"></a>åœºæ™¯2:<code>dispatch_group_enter</code>çš„ä½¿ç”¨</h5><p>æŸç•Œé¢å­˜åœ¨å¤šä¸ªè¯·æ±‚ï¼Œå¸Œæœ›æ‰€æœ‰è¯·æ±‚å‡ç»“æŸæ‰è¿›è¡ŒæŸæ“ä½œï¼Œæ³¨æ„è¿™é‡Œçš„ä¸€ä¸ªä¸åŒç‚¹ï¼Œå¦‚æœåªæ˜¯å‡ ä¸ªblockæ‰§è¡Œå®Œæ¯•å°±å¯ä»¥æ‰§è¡Œä¸€ä¸ªç»Ÿä¸€çš„blockï¼Œé‚£ä¹ˆç”¨groupçš„notifyå°±å¯ä»¥äº†ï¼Œä½†æ˜¯è¿™é‡Œä¸ä½†è¦blockæ‰§è¡Œå®Œï¼Œè¿˜è¦ç›‘å¬blocké‡Œè¾¹çš„ä¸€ä¸ªå¼‚æ­¥çš„å›è°ƒæ˜¯ä¸æ˜¯å®Œæˆï¼Œè¿™æ ·ç›´æ¥ç”¨groupçš„notifyå°±ä¸å¥½ä½¿ç”¨ã€‚</p>
<p><a href="https://www.jianshu.com/p/657e994aeee2" target="_blank" rel="external">ä¸€ä¸ªé¡µé¢åŒæ—¶å¤šä¸ªè¯·æ±‚çš„å†™æ³•</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">dispatch_group_t group = dispatch_group_create();</div><div class="line">dispatch_group_enter(group);</div><div class="line">dispatch_group_async(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line">    //è¯·æ±‚1</div><div class="line">    [ç½‘ç»œè¯·æ±‚:&#123;</div><div class="line">    æˆåŠŸï¼šdispatch_group_leave(group);</div><div class="line">    å¤±è´¥ï¼šdispatch_group_leave(group);</div><div class="line">&#125;];</div><div class="line">&#125;);</div><div class="line">dispatch_group_enter(group);</div><div class="line">dispatch_group_async(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line">    //è¯·æ±‚2</div><div class="line">    [ç½‘ç»œè¯·æ±‚:&#123;</div><div class="line">    æˆåŠŸï¼šdispatch_group_leave;</div><div class="line">    å¤±è´¥ï¼šdispatch_group_leave;</div><div class="line">&#125;];</div><div class="line">&#125;);</div><div class="line">dispatch_group_enter(group);</div><div class="line">dispatch_group_async(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line">    //è¯·æ±‚3</div><div class="line">    [ç½‘ç»œè¯·æ±‚:&#123;</div><div class="line">    æˆåŠŸï¼šdispatch_group_leave(group);</div><div class="line">    å¤±è´¥ï¼šdispatch_group_leave(group);</div><div class="line">&#125;];</div><div class="line">    &#125;);</div><div class="line">dispatch_group_notify(group, dispatch_get_main_queue(), ^&#123;</div><div class="line">    //ç•Œé¢åˆ·æ–°</div><div class="line">    NSLog(@&quot;ä»»åŠ¡å‡å®Œæˆï¼Œåˆ·æ–°ç•Œé¢&quot;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>è¿™é‡Œè¦ç”¨ä¸€ä¸ªdispatch_group_enterï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸çŸ¥é“ç½‘ç»œä»€ä¹ˆæ—¶å€™å›æ¥ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªgroup_entreæ–¹æ³•ï¼Œé‚£ä¹ˆç½‘ç»œå‘é€å‡ºå»ï¼Œè¿™ä¸ªblockå°±æ‰§è¡Œç»“æŸäº†ï¼Œå°±å›å»åˆ·æ–°UIï¼Œä½†æ˜¯å®é™…æƒ…å†µæ˜¯ç½‘ç»œå¹¶æ²¡æœ‰è¿”å›ã€‚</p>
<p>æ€è€ƒä¸€ä¸ªé—®é¢˜å¦‚æœè¿™é‡Œ<code>dispatch_group_notify</code>ï¼Œæ¢æˆ<code>dispatch_group_wait(group, DISPATCH_TIME_FOREVER);</code>ä¼šæ˜¯ä»€ä¹ˆæ•ˆæœå‘¢ï¼Ÿ</p>
<p>ä¸åŒç‚¹åœ¨äºdispatch_group_waitä¼šé˜»å¡çº¿ç¨‹ï¼Œè€Œdispatch_group_notifyä¼šè®©çº¿ç¨‹ç»§ç»­å¾€ä¸‹èµ°ï¼Œç­‰groupå®Œæˆä¹‹åå†å›è°ƒæˆ‘çš„è¿™ä¸ªblockã€‚</p>
<h4 id="ä¸€æ¬¡æ€§æ‰§è¡Œ"><a href="#ä¸€æ¬¡æ€§æ‰§è¡Œ" class="headerlink" title="ä¸€æ¬¡æ€§æ‰§è¡Œ"></a>ä¸€æ¬¡æ€§æ‰§è¡Œ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// ä½¿ç”¨dispatch_onceå‡½æ•°èƒ½ä¿è¯æŸæ®µä»£ç åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åªè¢«æ‰§è¡Œ1æ¬¡</div><div class="line">static dispatch_once_t onceToken;</div><div class="line">dispatch_once(&amp;onceToken, ^&#123;</div><div class="line">    // åªæ‰§è¡Œ1æ¬¡çš„ä»£ç (è¿™é‡Œé¢é»˜è®¤æ˜¯çº¿ç¨‹å®‰å…¨çš„)</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="dispatch-set-target-queue"><a href="#dispatch-set-target-queue" class="headerlink" title="dispatch_set_target_queue"></a>dispatch_set_target_queue</h4><p>dispatch_queue_createå‡½æ•°ç”Ÿæˆçš„Dispatch Queueä¸ç®¡æ˜¯Serial Dispatch Queueè¿˜æ˜¯Concurrent Dispatch Queueï¼Œå¤šä½¿ç”¨ä¸é»˜è®¤ä¼˜å…ˆçº§Global Dispatch Queueç›¸åŒæ‰§è¡Œä¼˜å…ˆçº§çš„çº¿ç¨‹ï¼Œå˜æ›´æ‰§è¡Œä¼˜å…ˆçº§ä½¿ç”¨dispatch_set_target_queueå‡½æ•°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t mySerialQueue = dispatch_queue_create(&quot;com.kugou.mySerQueue&quot;, NULL);</div><div class="line">dispatch_queue_t myGlobalQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,0);</div><div class="line">dispatch_set_target_queue(mySerialQueue, myGlobalQueue);</div></pre></td></tr></table></figure></p>
<p>æŒ‡å®šç¬¬ä¸€ä¸ªå‚æ•°ä¸ç¬¬äºŒä¸ªå‚æ•°ä¼˜å…ˆçº§ç›¸åŒ</p>
<h4 id="dispatch-after"><a href="#dispatch-after" class="headerlink" title="dispatch_after"></a>dispatch_after</h4><p>ç”¨äºå»¶æ—¶æ‰§è¡Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">dispatch_time_t time = dispatch_time(DISPATCH_TIME_NOW,3ULL * NSEC_PER_SEC);</div><div class="line">dispatch_after(time, dispatch_get_main_queue(),^&#123;</div><div class="line"> NSLog(@&quot;123&quot;);</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>æ³¨æ„ï¼Œdispatch_afterå‡½æ•°å¹¶ä¸æ˜¯åœ¨æŒ‡å®šæ—¶é—´åæ‰§è¡Œï¼Œè€Œåªæ˜¯åœ¨æŒ‡å®šæ—¶é—´è¿½åŠ å¤„ç†åˆ°dispatch_queueï¼Œæ­¤æºç åœ¨3ç§’åç”¨dispatch_asyncå‡½æ•°è¿½åŠ blockåˆ°main dispatch queueç›¸åŒã€‚åœ¨ä¸¥æ ¼æ—¶é—´è¦æ±‚ä¸‹è¿™ä¸ªå‡½æ•°çš„ä½¿ç”¨ä¼šå‡ºé—®é¢˜ã€‚</p>
<h4 id="dispatch-apply"><a href="#dispatch-apply" class="headerlink" title="dispatch_apply"></a>dispatch_apply</h4><h4 id="dispatch-semaphore-t"><a href="#dispatch-semaphore-t" class="headerlink" title="dispatch_semaphore_t"></a><code>dispatch_semaphore_t</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dispatch_semaphore_t t = dispatch_semaphore_create(1); //åˆ›å»º</div><div class="line">dispatch_semaphore_wait(t, DISPATCH_TIME_FOREVER); //ç­‰å¾…å“ªä¸ªï¼Œæ°¸è¿œ</div><div class="line">dispatch_semaphore_signal(t);</div></pre></td></tr></table></figure>
<p><img src="/01/2015/å¤šçº¿ç¨‹æŠ€æœ¯/../../../images/2018-07-035.07.23.png" alt=""></p>
<p><img src="/01/2015/å¤šçº¿ç¨‹æŠ€æœ¯/../../../images/2018-07-035.08.09.png" alt=""></p>
<h5 id="ä¸ºçº¿ç¨‹åŠ é”"><a href="#ä¸ºçº¿ç¨‹åŠ é”" class="headerlink" title="ä¸ºçº¿ç¨‹åŠ é”"></a>ä¸ºçº¿ç¨‹åŠ é”</h5><p>ä¿¡å·é‡ï¼šå°±æ˜¯ä¸€ç§å¯ç”¨æ¥æ§åˆ¶è®¿é—®èµ„æºçš„æ•°é‡çš„æ ‡è¯†ï¼Œè®¾å®šäº†ä¸€ä¸ªä¿¡å·é‡ï¼Œåœ¨çº¿ç¨‹è®¿é—®ä¹‹å‰ï¼ŒåŠ ä¸Šä¿¡å·é‡çš„å¤„ç†ï¼Œåˆ™å¯å‘ŠçŸ¥ç³»ç»ŸæŒ‰ç…§æˆ‘ä»¬æŒ‡å®šçš„ä¿¡å·é‡æ•°é‡æ¥æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ã€‚</p>
<p>å…¶å®ï¼Œè¿™æœ‰ç‚¹ç±»ä¼¼é”æœºåˆ¶äº†ï¼Œåªä¸è¿‡ä¿¡å·é‡éƒ½æ˜¯ç³»ç»Ÿå¸®åŠ©æˆ‘ä»¬å¤„ç†äº†ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æ‰§è¡Œçº¿ç¨‹ä¹‹å‰ï¼Œè®¾å®šä¸€ä¸ªä¿¡å·é‡å€¼ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨æ—¶ï¼ŒåŠ ä¸Šä¿¡å·é‡å¤„ç†æ–¹æ³•å°±è¡Œäº†ã€‚</p>
<p>ç†è§£æˆåœè½¦ä½ï¼Œdispatch_semaphore_tä¸ªæ•°ï¼Œdispatch_semaphore_waitå‡å°‘ä¸€ä¸ªå¯ç”¨ï¼Œdispatch_semaphore_signalå¢åŠ ä¸€ä¸ªå¯ç”¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">-(void)dispatchSignal&#123;</div><div class="line">    //crateçš„valueè¡¨ç¤ºï¼Œæœ€å¤šå‡ ä¸ªèµ„æºå¯è®¿é—®</div><div class="line">    dispatch_semaphore_t semaphore = dispatch_semaphore_create(2);  //åŒæ—¶åªèƒ½æœ‰ä¸¤ä¸ªçº¿ç¨‹å»å¤„ç† </div><div class="line">    dispatch_queue_t quene = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</div><div class="line">     </div><div class="line">    //ä»»åŠ¡1</div><div class="line">    dispatch_async(quene, ^&#123;</div><div class="line">        dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);</div><div class="line">        NSLog(@&quot;run task 1&quot;);</div><div class="line">        sleep(1);</div><div class="line">        NSLog(@&quot;complete task 1&quot;);</div><div class="line">        dispatch_semaphore_signal(semaphore);       </div><div class="line">    &#125;);&lt;br&gt;</div><div class="line">    //ä»»åŠ¡2</div><div class="line">    dispatch_async(quene, ^&#123;</div><div class="line">        dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);</div><div class="line">        NSLog(@&quot;run task 2&quot;);</div><div class="line">        sleep(1);</div><div class="line">        NSLog(@&quot;complete task 2&quot;);</div><div class="line">        dispatch_semaphore_signal(semaphore);       </div><div class="line">    &#125;);&lt;br&gt;</div><div class="line">    //ä»»åŠ¡3</div><div class="line">    dispatch_async(quene, ^&#123;</div><div class="line">        dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);</div><div class="line">        NSLog(@&quot;run task 3&quot;);</div><div class="line">        sleep(1);</div><div class="line">        NSLog(@&quot;complete task 3&quot;);</div><div class="line">        dispatch_semaphore_signal(semaphore);       </div><div class="line">    &#125;);   </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="å¼‚æ­¥çº¿ç¨‹è¿›è¡ŒåŒæ­¥"><a href="#å¼‚æ­¥çº¿ç¨‹è¿›è¡ŒåŒæ­¥" class="headerlink" title="å¼‚æ­¥çº¿ç¨‹è¿›è¡ŒåŒæ­¥"></a>å¼‚æ­¥çº¿ç¨‹è¿›è¡ŒåŒæ­¥</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</div><div class="line">   dispatch_semaphore_t semaphore = dispatch_semaphore_create(0);</div><div class="line"></div><div class="line">   __block int j = 0;</div><div class="line">   dispatch_async(queue, ^&#123;</div><div class="line">        j = 100;</div><div class="line">        dispatch_semaphore_signal(semaphore);</div><div class="line">   &#125;);</div><div class="line"></div><div class="line">   dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);</div><div class="line">   NSLog(@&quot;finish j = %zd&quot;, j);</div><div class="line">```   </div><div class="line"></div><div class="line">ç»“æœè¾“å‡º j ï¼ 100ï¼› </div><div class="line"></div><div class="line">å¦‚æœæ³¨æ‰dispatch_semaphore_waitè¿™ä¸€è¡Œï¼Œåˆ™ j ï¼ 0ï¼› </div><div class="line">æ³¨é‡Šï¼š blockå—å¼‚æ­¥æ‰§è¡Œæ·»åŠ åˆ°äº†å…¨å±€å¹¶å‘é˜Ÿåˆ—é‡Œï¼Œæ‰€ä»¥ç¨‹åºåœ¨ä¸»çº¿ç¨‹ä¼šè·³è¿‡blockå—ï¼ˆåŒæ—¶å¼€è¾Ÿå­çº¿ç¨‹å¼‚æ­¥æ‰§è¡Œblockå—ï¼‰ï¼Œæ‰§è¡Œå—å¤–çš„ä»£ç dispatch_semaphore_waitï¼Œå› ä¸ºsemaphoreä¿¡å·é‡ä¸º0ï¼Œä¸”æ—¶é—´ä¸ºDISPATCH_TIME_FOREVERï¼Œæ‰€ä»¥ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰ï¼Œè¿›è€Œåªæ‰§è¡Œå­çº¿ç¨‹çš„blockå—ï¼Œç›´åˆ°æ‰§è¡Œå—å†…éƒ¨çš„dispatch_semaphore_signalä½¿å¾—ä¿¡å·é‡+1ã€‚æ­£åœ¨è¢«é˜»å¡çš„çº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰ä¼šæ¢å¤ç»§ç»­æ‰§è¡Œã€‚è¿™æ ·ä¿è¯äº†çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥ã€‚</div><div class="line"></div><div class="line">##### é€šè®¯å½•ç›¸å…³</div></pre></td></tr></table></figure>
<p>//è¿™ä¸ªå˜é‡ç”¨äºè®°å½•æˆæƒæ˜¯å¦æˆåŠŸï¼Œå³ç”¨æˆ·æ˜¯å¦å…è®¸æˆ‘ä»¬è®¿é—®é€šè®¯å½•<br>    int __block tip=0;</p>
<pre><code>//åˆ›å»ºé€šè®¯ç°¿çš„å¼•ç”¨
ABAddressBookRef addressBooks=ABAddressBookCreateWithOptions(NULL, NULL);
//åˆ›å»ºä¸€ä¸ªåˆå§‹ä¿¡å·é‡ä¸º0çš„ä¿¡å·
dispatch_semaphore_t sema=dispatch_semaphore_create(0);
//ç”³è¯·è®¿é—®æƒé™
ABAddressBookRequestAccessWithCompletion(addressBooks, ^(bool granted, CFErrorRef error)        {
  //grantedä¸ºYESæ˜¯è¡¨ç¤ºç”¨æˆ·å…è®¸ï¼Œå¦åˆ™ä¸ºä¸å…è®¸
  if (!granted) {
      tip=1;
  }
  //å‘é€ä¸€æ¬¡ä¿¡å·
  dispatch_semaphore_signal(sema);
});
//ç­‰å¾…ä¿¡å·è§¦å‘
dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
CFRelease(addressBooks);
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">##### ä½¿ç”¨ Dispatch Semaphore æ§åˆ¶å¹¶å‘çº¿ç¨‹æ•°é‡</div></pre></td></tr></table></figure>
<p> void dispatch_async_limit(dispatch_queue_t queue,NSUInteger limitSemaphoreCount, dispatch_block_t block) {<br>//æ§åˆ¶å¹¶å‘æ•°çš„ä¿¡å·é‡<br>    static dispatch_semaphore_t limitSemaphore;</p>
<pre><code>//ä¸“é—¨æ§åˆ¶å¹¶å‘ç­‰å¾…çš„çº¿ç¨‹
static dispatch_queue_t receiverQueue;

//ä½¿ç”¨ dispatch_onceè€Œé lazy æ¨¡å¼ï¼Œé˜²æ­¢å¯èƒ½çš„å¤šçº¿ç¨‹æŠ¢å é—®é¢˜
static dispatch_once_t onceToken;
dispatch_once(&amp;onceToken, ^{
    limitSemaphore = dispatch_semaphore_create(limitSemaphoreCount);
    receiverQueue = dispatch_queue_create(&quot;receiver&quot;, DISPATCH_QUEUE_SERIAL);
});

// å¦‚ä¸åŠ  receiverQueue æ”¾åœ¨ä¸»çº¿ç¨‹ä¼šé˜»å¡ä¸»çº¿ç¨‹
dispatch_async(receiverQueue, ^{
    //å¯ç”¨ä¿¡å·é‡åæ‰èƒ½ç»§ç»­ï¼Œå¦åˆ™ç­‰å¾…
    dispatch_semaphore_wait(limitSemaphore, DISPATCH_TIME_FOREVER);
    dispatch_async(queue, ^{
        !block ? : block();
        //åœ¨è¯¥å·¥ä½œçº¿ç¨‹æ‰§è¡Œå®Œæˆåé‡Šæ”¾ä¿¡å·é‡
        dispatch_semaphore_signal(limitSemaphore);
    });
});
</code></pre><p>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#### ä¿æŒå¼‚æ­¥çº¿ç¨‹åŒæ­¥çš„æ–¹æ¡ˆ</div><div class="line"></div><div class="line">- 1.dispatch_group </div><div class="line"></div><div class="line">- 2.dispatch_barrier </div><div class="line"></div><div class="line">- 3.dispatch_semaphore</div><div class="line"></div><div class="line"></div><div class="line">### NSOperation</div><div class="line"></div><div class="line">NSOperationæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå¯ä»¥ä½¿ç”¨ç³»ç»Ÿæä¾›çš„å­ç±»æˆ–è€…è‡ªå·±å®ç°å®ƒçš„å­ç±»ï¼Œæ¥å®Œæˆå¤šçº¿ç¨‹ã€‚æˆ‘ä»¬å¹³æ—¶æåˆ°çš„NSOperationå°±é»˜è®¤åŒ…å«äº†å®ƒçš„å­ç±»ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</div><div class="line"></div><div class="line">- æ˜¯OCè¯­è¨€ä¸­åŸºäºGCD(GCDè¯¦è§£)çš„é¢å‘å¯¹è±¡çš„å°è£…ï¼›</div><div class="line"></div><div class="line">- ä½¿ç”¨èµ·æ¥æ¯”GCDæ›´åŠ ç®€å•(é¢å‘å¯¹è±¡)ï¼›</div><div class="line"></div><div class="line">- æä¾›äº†ä¸€äº›ç”¨GCDä¸å¥½å®ç°çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å¯ä»¥å–æ¶ˆåœ¨ä»»åŠ¡å¤„ç†é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œæ·»åŠ ä»»åŠ¡é—´çš„ä¾èµ–å…³ç³»ç­‰ç­‰ï¼›</div><div class="line"></div><div class="line">- è‹¹æœæ¨èä½¿ç”¨,ä½¿ç”¨NSOperationä¸ç”¨å…³å¿ƒçº¿ç¨‹ä»¥åŠçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼›</div><div class="line"></div><div class="line">- å¯ä»¥æŒ‡å®šæ“ä½œä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæ˜¯å°†æ“ä½œæ·»åŠ åˆ°é˜Ÿåˆ—ã€‚</div><div class="line"></div><div class="line">- å¹¶å‘é˜Ÿåˆ—ï¼Œå¼‚æ­¥æ‰§è¡Œ(å¤šä¸ªçº¿ç¨‹ï¼Œæ— åºæ‰§è¡Œ)ã€‚</div><div class="line"></div><div class="line">#### ä¸GCDå¯¹æ¯”</div><div class="line"></div><div class="line">æä¾›äº†GCDä¸å¥½å®ç°çš„ï¼š</div><div class="line"></div><div class="line">1.æœ€å¤§å¹¶å‘æ•°</div><div class="line"></div><div class="line">2.æš‚åœå’Œç»§ç»­</div><div class="line"></div><div class="line">3.å–æ¶ˆæ‰€æœ‰ä»»åŠ¡</div><div class="line"></div><div class="line">4.ä¾èµ–å…³ç³»</div><div class="line"></div><div class="line">#### NSOperationå­ç±»</div><div class="line"></div><div class="line">NSOperationæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ç°NSOperationå­ç±»çš„æ–¹å¼æœ‰3ç§ï¼š</div><div class="line"></div><div class="line">- NSInvocationOperationï¼šè¾ƒå°‘ä½¿ç”¨ï¼›</div><div class="line">- NSBlockOperationï¼šæœ€å¸¸ä½¿ç”¨ï¼›</div><div class="line">- è‡ªå®šä¹‰å­ç±»ç»§æ‰¿NSOperationï¼Œå®ç°å†…éƒ¨ç›¸åº”çš„æ–¹æ³•ï¼šå¾ˆå°‘ä½¿ç”¨ã€‚</div><div class="line">æˆ‘ä»¬è¦åšçš„å°±æ˜¯å°†ä»¥ä¸Š3ç§æ“ä½œçš„ä»»æ„ä¸€ç§æ·»åŠ åˆ°NSOperationQueueæ¥ä½¿ç”¨ã€‚</div></pre></td></tr></table></figure></p>
<p>//NSOperationèƒ½åšå•¥</p>
<ul>
<li>æ·»åŠ ä»»åŠ¡ä¾èµ–</li>
<li>ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€æ§åˆ¶</li>
<li>æœ€å¤§ç¼–å‘é‡æ§åˆ¶</li>
</ul>
<p>// ä»»åŠ¡çŠ¶æ€æ§åˆ¶æœ‰å“ªäº›ï¼Ÿ</p>
<ul>
<li>isReady</li>
<li>isExecting</li>
<li>isFinished</li>
<li>isCancelled</li>
</ul>
<p>// æ€ä¹ˆæ§åˆ¶çŠ¶æ€</p>
<ul>
<li>å¦‚æœåªé‡å†™äº†mainï¼Œåº•å±‚æ§åˆ¶å˜æ›´ä»»åŠ¡æ‰§è¡Œå®ŒæˆçŠ¶æ€</li>
<li>å¦‚æœé‡å†™äº†startï¼Œéœ€è¦è‡ªè¡Œæ§åˆ¶çŠ¶æ€</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">##### NSInvocationOperation</div></pre></td></tr></table></figure>
<p>/// ç‚¹å‡»å±å¹•è°ƒç”¨ï¼Œåˆ›å»ºä¸€ä¸ªæ“ä½œå¹¶æ‰§è¡Œ</p>
<ul>
<li>(void)touchesBegan:(NSSet <em>)touches withEvent:(UIEvent </em>)event {<br>  NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(demo:) object:@â€è¿™æ˜¯ä¸€ä¸ªå‚æ•°â€];<br>  [operation start];<br>}<br>/// å°†å‚æ•°ä¸å½“å‰çº¿ç¨‹æ‰“å°</li>
<li>(void)demo:(NSString *)str {<br>  NSLog(@â€%@â€“%@â€,str,[NSThread currentThread]);<br>}</li>
</ul>
<p>/<strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong>æ‰§è¡Œç»“æœ<strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong>/<br>2015-09-17 15:11:54.030 NSOperationTest[2595:162235] è¿™æ˜¯ä¸€ä¸ªå‚æ•° <nsthread: 0x7fa759c173a0="">{number = 1, name = main}</nsthread:></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">é»˜è®¤æƒ…å†µä¸‹ï¼Œè°ƒç”¨äº†startæ–¹æ³•åå¹¶ä¸ä¼šå¼€ä¸€æ¡æ–°çº¿ç¨‹å»æ‰§è¡Œæ“ä½œï¼Œè€Œæ˜¯åœ¨å½“å‰çº¿ç¨‹åŒæ­¥æ‰§è¡Œæ“ä½œã€‚</div><div class="line"></div><div class="line">åªæœ‰å°†operationæ”¾åˆ°ä¸€ä¸ªNSOperationQueueä¸­ï¼Œæ‰ä¼šå¼‚æ­¥æ‰§è¡Œæ“ä½œã€‚</div></pre></td></tr></table></figure>
<p>/// ç‚¹å‡»å±å¹•è°ƒç”¨ï¼Œåˆ›å»ºä¸€ä¸ªæ“ä½œå¹¶æ‰§è¡Œ</p>
<ul>
<li>(void)touchesBegan:(NSSet <em>)touches withEvent:(UIEvent </em>)event {<br>  [self invocationTest];<br>}<br>/// å°†æ“ä½œæ·»åŠ åˆ°é˜Ÿåˆ—</li>
<li>(void)invocationTest {<br>  // åˆ›å»ºæ“ä½œé˜Ÿåˆ—<br>  NSOperationQueue <em>operationQueue = [[NSOperationQueue alloc] init];<br>  // åˆ›å»ºæ“ä½œï¼ˆæœ€åçš„objectå‚æ•°æ˜¯ä¼ é€’ç»™selectoræ–¹æ³•çš„å‚æ•°ï¼‰<br>  NSInvocationOperation </em>operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(demo:) object:@â€è¿™æ˜¯ä¸€ä¸ªå‚æ•°â€];<br>  // å°†æ“ä½œæ·»åŠ åˆ°æ“ä½œé˜Ÿåˆ—<br>  [operationQueue addOperation:operation];<br>}<br>/// å°†å‚æ•°ä¸å½“å‰çº¿ç¨‹æ‰“å°</li>
<li>(void)demo:(NSString *)str {<br>  NSLog(@â€%@â€“%@â€,str,[NSThread currentThread]);<br>}</li>
</ul>
<p>/<strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong>æ‰§è¡Œç»“æœ<strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong>/<br>2015-09-17 15:36:23.777 NSOperationTest[2943:182362] è¿™æ˜¯ä¸€ä¸ªå‚æ•°â€“<nsthread: 0x7ff68af15b00="">{number = 2, name = (null)}</nsthread:></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">##### NSBlockOperation</div><div class="line"></div><div class="line">æ‰§è¡Œä¸€ä¸ªæ“ä½œï¼ˆåŒæ­¥)</div></pre></td></tr></table></figure>
<p>NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^(){<br>    NSLog(@â€%@â€,[NSThread currentThread]);<br>}];<br>// å¼€å§‹æ‰§è¡Œä»»åŠ¡<br>[operation start];</p>
<p>/<strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong>æ‰§è¡Œç»“æœ<strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong>/<br>2015-09-17 15:47:58.791 NSOperationTest[3015:191317] <nsthread: 0x7fe6abd02b70="">{number = 1, name = main}</nsthread:></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">æ·»åŠ å¤šä¸ªæ“ä½œæ‰§è¡Œï¼ˆæ“ä½œå¼‚æ­¥ï¼Œæ•´ä½“è¿˜æ˜¯åŒæ­¥ï¼‰ï¼ŒNSBlockOperationåªæœ‰åœ¨å°è£…çš„æ“ä½œæ•°å¤§äº1æ—¶æ‰ä¼šå¼€å¯å­çº¿ç¨‹æ‰§è¡Œï¼Œå¦åˆ™é»˜è®¤æ‰§è¡Œåœ¨ä¸»çº¿ç¨‹ã€‚</div></pre></td></tr></table></figure>
<p>NSLog(@â€â€”â€”start oneâ€”â€”â€“â€);<br>// åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡<br>NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^(){<br>    sleep(1);<br>    NSLog(@â€1ï¼š%@â€,[NSThread currentThread]);<br>}];<br>// å†æ·»åŠ 3æ“ä½œ<br>[operation addExecutionBlock:^() {<br>    NSLog(@â€2ï¼š%@â€, [NSThread currentThread]);<br>}];<br>[operation addExecutionBlock:^() {<br>    NSLog(@â€3ï¼š%@â€, [NSThread currentThread]);<br>}];<br>[operation addExecutionBlock:^() {<br>    sleep(3);<br>    NSLog(@â€4ï¼š%@â€, [NSThread currentThread]);<br>}];<br>NSLog(@â€â€”â€”start twoâ€”â€”â€“â€);<br>// å¼€å§‹æ‰§è¡Œä»»åŠ¡<br>[operation start];<br>NSLog(@â€=========the end==========â€);</p>
<p>/<strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong>æ‰§è¡Œç»“æœ<strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong>/<br>2018-03-19 20:35:14.961863+0800 NSOperationTest[9329:21176421] â€”â€”start oneâ€”â€”â€“<br>2018-03-19 20:35:14.962419+0800 NSOperationTest[9329:21176421] â€”â€”start twoâ€”â€”â€“<br>2018-03-19 20:35:14.962771+0800 NSOperationTest[9329:21176565] 2ï¼š<nsthread: 0x6040004642c0="">{number = 4, name = (null)}<br>2018-03-19 20:35:14.962771+0800 NSOperationTest[9329:21176566] 3ï¼š<nsthread: 0x600000272140="">{number = 3, name = (null)}<br>2018-03-19 20:35:15.963071+0800 NSOperationTest[9329:21176421] 1ï¼š<nsthread: 0x6040000684c0="">{number = 1, name = main}<br>2018-03-19 20:35:17.964043+0800 NSOperationTest[9329:21176568] 4ï¼š<nsthread: 0x6040004646c0="">{number = 5, name = (null)}<br>2018-03-19 20:35:17.964471+0800 NSOperationTest[9329:21176421] =========the end==========</nsthread:></nsthread:></nsthread:></nsthread:></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">å½“æ·»åŠ å¤šä¸ªæ“ä½œæ—¶ï¼Œå¼€å¯æ–°çš„çº¿ç¨‹ï¼Œå¤šä¸ªæ“ä½œä¹‹é—´æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œä»¥åŠ å¿«æ•ˆç‡ã€‚æ•´ä½“æ˜¯è¿˜æ˜¯åŒæ­¥æ‰§è¡Œã€‚</div><div class="line"></div><div class="line"></div><div class="line">##### è‡ªå®šä¹‰NSOperation</div><div class="line"></div><div class="line">è‡ªå®šä¹‰NSOperationæœ€ä¸»è¦çš„å°±æ˜¯é‡è½½-(void)mainè¿™ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢æ·»åŠ éœ€è¦æ‰§è¡Œçš„æ“ä½œã€‚å½“æ‰§è¡Œè¿™ä¸ªæ“ä½œæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨-(void)mainè¿™ä¸ªæ–¹æ³•</div></pre></td></tr></table></figure>
<p>#import â€œCustomOpertaionTest.hâ€</p>
<p>@implementation CustomOpertaionTest</p>
<ul>
<li>(void)main {<br>  // æ–°å»ºä¸€ä¸ªè‡ªåŠ¨é‡Šæ”¾æ± ï¼Œé¿å…å†…å­˜æ³„éœ²<br>  @autoreleasepool {<pre><code>// æ‰§è¡Œçš„ä»£ç 
NSLog(@&quot;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•:%@&quot;,[NSThread currentThread]);
</code></pre>  }<br>}<br>@end</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">åœ¨ä¸»æ§åˆ¶å™¨ä¸­è°ƒç”¨ï¼Œä¸€å…±ä¸¤ç§ï¼šä¸€ç§åŒæ­¥ä¸€ç§å¼‚æ­¥</div></pre></td></tr></table></figure>
<p>/<strong><strong><strong><strong><em>**</em></strong></strong></strong></strong>1.ç›´æ¥æ‰§è¡Œï¼ŒåŒæ­¥<strong><strong><strong><em>*</em></strong></strong></strong>/<br>CustomOpertaionTest *operation = [[CustomOpertaionTest alloc] init];<br>// å¼€å§‹æ‰§è¡Œä»»åŠ¡<br>[operation start];</p>
<p>/<strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong>æ‰§è¡Œç»“æœ<strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong>/<br>2015-09-17 16:24:27.620 NSOperationTest[3368:222036] è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•:<nsthread: 0x7ff420d28000="">{number = 1, name = main}</nsthread:></p>
<p>/<em>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</em>/</p>
<p>/<strong><strong><strong><strong><em>**</em></strong></strong></strong></strong>2.æ·»åŠ åˆ°é˜Ÿåˆ—ï¼Œå¼‚æ­¥<strong><strong><strong><em>*</em></strong></strong></strong>/<br>NSOperationQueue <em>operationQueue = [[NSOperationQueue alloc] init];<br>CustomOpertaionTest </em>operation = [[CustomOpertaionTest alloc] init];<br>[operationQueue addOperation:operation];</p>
<p>/<strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong>æ‰§è¡Œç»“æœ<strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong>/<br>2015-09-17 16:27:13.594 NSOperationTest[3401:225178] è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•:<nsthread: 0x7ff2d0539d70="">{number = 2, name = (null)}</nsthread:></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">##### NSOperationQueue</div><div class="line"></div><div class="line">é€šè¿‡ä¸Šé¢çš„ä¸‰ç§æ–¹å¼ç”ŸæˆNSOperationè°ƒç”¨startå‡½æ•°ï¼Œå› ä¸ºéƒ½æ˜¯é»˜è®¤æ‰§è¡Œåœ¨ä¸»ä»»åŠ¡é˜Ÿåˆ—mainQueueä¸­ï¼Œæ‰€ä»¥æ‰ä¼šæ‰§è¡Œåœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œå¦‚æœé‡‡ç”¨ä¸‹é¢è¿™ç§æ–¹å¼éƒ½ä¼šæ‰§è¡Œåœ¨å¼‚æ­¥å­çº¿ç¨‹ä¸­ã€‚</div></pre></td></tr></table></figure>
<p>//åˆ›å»ºNSOperationQueue<br>NSOperationQueue * queue=[[NSOperationQueue alloc]init];<br>//è®¾ç½®NSOperationQueueæœ€å¤§å¹¶å‘ä»»åŠ¡æ•°<br>queue.maxConcurrentOperationCount=3;</p>
<p>NSInvocationOperation <em>operation1= [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(operationTask) object:nil];<br>NSInvocationOperation </em>operation2= [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(operationTask) object:nil];</p>
<p>NSBlockOperation *operation3=[NSBlockOperation blockOperationWithBlock:^{<br>    [NSThread sleepForTimeInterval:1];<br>     NSLog(@â€operationTask:%@ isMainThreadï¼š%@â€,[NSThread currentThread],[[NSThread currentThread] isMainThread]?@â€YESâ€:@â€NOâ€);<br>}];</p>
<p>[operation3 addExecutionBlock:^{<br>    [NSThread sleepForTimeInterval:1];<br>    NSLog(@â€operationTask:%@ isMainThreadï¼š%@â€,[NSThread currentThread],[[NSThread currentThread] isMainThread]?@â€YESâ€:@â€NOâ€);        }];</p>
<p>[queue addOperation:operation1];<br>[queue addOperation:operation2];<br>[queue addOperation:operation3];</p>
<p>for (int i =0; i<9; i++)="" {="" [queue="" addoperationwithblock:^{="" [nsthread="" sleepfortimeinterval:1];="" nslog(@"operationtask:%@="" ismainthreadï¼š%@",[nsthread="" currentthread],[[nsthread="" currentthread]="" ismainthread]?@"yes":@"no");="" }];="" }="" <figure="" class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">##### ä»»åŠ¡ä¾èµ–</div></pre></td></tr></table></9;></p>
<p>NSOperationQueue *queue = [[NSOperationQueue alloc] init];</p>
<p>NSBlockOperation *operation1 = [NSBlockOperation blockOperationWithBlock:^(){<br>    NSLog(@â€æ‰§è¡Œç¬¬1æ¬¡æ“ä½œï¼Œçº¿ç¨‹ï¼š%@â€, [NSThread currentThread]);<br>}];</p>
<p>NSBlockOperation *operation2 = [NSBlockOperation blockOperationWithBlock:^(){<br>    NSLog(@â€æ‰§è¡Œç¬¬2æ¬¡æ“ä½œï¼Œçº¿ç¨‹ï¼š%@â€, [NSThread currentThread]);<br>}];<br>// operation1ä¾èµ–äºoperation2<br>[operation1 addDependency:operation2];</p>
<p>[queue addOperation:operation1];<br>[queue addOperation:operation2];<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">è¿™ç§æƒ…å†µå…ˆæ‰§è¡Œ2åœ¨æ‰§è¡Œ1ï¼Œå¦åˆ™ä¼šæŒ‰ç…§é¡ºåºæ¥æ‰§è¡Œ</div><div class="line"></div><div class="line">##### è®¾ç½®é˜Ÿåˆ—çš„æœ€å¤§å¹¶å‘æ“ä½œæ•°é‡</div><div class="line"></div><div class="line"></div><div class="line">é˜Ÿåˆ—çš„æœ€å¤§å¹¶å‘æ“ä½œæ•°é‡ï¼Œæ„æ€æ˜¯é˜Ÿåˆ—ä¸­æœ€å¤šåŒæ—¶è¿è¡Œå‡ æ¡çº¿ç¨‹</div><div class="line"></div><div class="line">è™½ç„¶NSOperationQueueç±»è®¾è®¡ç”¨äºå¹¶å‘æ‰§è¡ŒOperations,ä½ ä¹Ÿå¯ä»¥å¼ºåˆ¶å•ä¸ªqueueä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªOperationã€‚setMaxConcurrentOperationCount:æ–¹æ³•å¯ä»¥é…ç½®queueçš„æœ€å¤§å¹¶å‘æ“ä½œæ•°é‡ã€‚è®¾ä¸º1å°±è¡¨ç¤ºqueueæ¯æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªæ“ä½œã€‚ä¸è¿‡operationæ‰§è¡Œçš„é¡ºåºä»ç„¶ä¾èµ–äºå…¶å®ƒå› ç´ ,æ¯”å¦‚operationæ˜¯å¦å‡†å¤‡å¥½å’Œoperationçš„ä¼˜å…ˆçº§ç­‰ã€‚å› æ­¤ä¸²è¡ŒåŒ–çš„operation queueå¹¶ä¸ç­‰åŒäºGCDä¸­çš„ä¸²è¡Œdispatch queue</div></pre></td></tr></table></figure></p>
<p>// æ¯æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªæ“ä½œ<br>queue.maxConcurrentOperationCount = 1;<br>// æˆ–è€…è¿™æ ·å†™<br>[queue setMaxConcurrentOperationCount:1];<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">##### NSOperationçš„å–æ¶ˆ</div><div class="line"></div><div class="line">åˆ†ä¸ºä¸¤ç§</div><div class="line"></div><div class="line">- åœ¨é˜Ÿåˆ—ä¸­æ²¡æœ‰æ‰§è¡Œçš„</div><div class="line">- åœ¨æ‰§è¡Œä¸­çš„</div><div class="line"></div><div class="line">æ— è®ºæ˜¯æŒ‚èµ·ï¼Œè¿˜æ˜¯å–æ¶ˆå…¨éƒ¨ï¼Œéƒ½æ— æ³•å–æ¶ˆæ­£åœ¨æ‰§è¡Œçš„æ“ä½œã€‚</div><div class="line"></div><div class="line">å¦‚æœä¸€å®šè¦å–æ¶ˆæ­£åœ¨æ‰§è¡Œçš„æ“ä½œï¼šéœ€è¦åœ¨mainæ–¹æ³•ä¸­å‘¨æœŸæ€§çš„æ£€æŸ¥cancelledçŠ¶æ€ã€‚</div></pre></td></tr></table></figure></p>
<p>/**<br> åœ¨åˆé€‚çš„æ—¶æœºæ£€æŸ¥cancelledçŠ¶æ€ï¼Œé€€å‡ºå½“å‰ä»»åŠ¡.<br> ä¸‰ä¸ªåˆ‡å…¥ç‚¹ï¼š</p>
<ol>
<li>å¼€å§‹æ‰§è¡Œä»»åŠ¡ä¹‹å‰</li>
<li>æ¯ä¸ªforå¾ªç¯ä¸­</li>
<li>é˜¶æ®µæ€§çš„ä»»åŠ¡ä¹‹é—´<br>*/<ul>
<li>(void)main<br>{<br>@autoreleasepool {<br>  if(self.isCancelled)<br>  {<pre><code>return;
</code></pre>  }<br>  //TODO:è·å–æ•°æ®<br>  if(self.isCancelled)<br>  {<pre><code>//é‡Šæ”¾èµ„æº
return;
</code></pre>  }<br>  //TODO:å¤„ç†æ•°æ®<br>  if(self.isCancelled)<br>  {<pre><code>//é‡Šæ”¾èµ„æº
return;
</code></pre>  }<br>  //TODO:é€šçŸ¥ä¸»çº¿ç¨‹å¤„ç†<br>}<br>}<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">å–æ¶ˆä½äºé˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œçš„æ“ä½œï¼šstartæ–¹æ³•çš„é»˜è®¤å®ç°ä¼šæ£€æŸ¥cancelledçŠ¶æ€ï¼Œå¦‚æœä¸ºYESï¼Œåˆ™ç«‹å³é€€å‡ºï¼Œä¸ä¼šè°ƒç”¨mainæ–¹æ³•ã€‚</div><div class="line"></div><div class="line">é€šå¸¸æ¥è¯´ï¼Œå½“æˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ª operation ç±»æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘åœ¨ä»¥ä¸‹å‡ ä¸ªå…³é”®ç‚¹æ£€æŸ¥ isCancelled æ–¹æ³•çš„è¿”å›å€¼ï¼š</div><div class="line"></div><div class="line">åœ¨çœŸæ­£å¼€å§‹æ‰§è¡Œä»»åŠ¡ä¹‹å‰ï¼›</div><div class="line">è‡³å°‘åœ¨æ¯æ¬¡å¾ªç¯ä¸­æ£€æŸ¥ä¸€æ¬¡ï¼Œè€Œå¦‚æœä¸€æ¬¡å¾ªç¯çš„æ—¶é—´æœ¬èº«å°±æ¯”è¾ƒé•¿çš„è¯ï¼Œåˆ™éœ€è¦æ£€æŸ¥å¾—æ›´åŠ é¢‘ç¹ï¼›</div><div class="line">åœ¨ä»»ä½•ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå®¹æ˜“ä¸­æ­¢ operation çš„åœ°æ–¹ã€‚</div><div class="line"></div><div class="line">##### å¦‚æœæƒ³åœ¨ä¸€ä¸ªNSOperationæ‰§è¡Œå®Œæ¯•ååšä¸€äº›äº‹æƒ…</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<p>operation.completionBlock = ^() {<br>    // æ‰€æœ‰æ“ä½œæ‰§è¡Œå®Œæˆåæ‰§è¡Œ<br>};<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">##### ç”¨NSOpertionå’ŒNSOpertionQueueå¤„ç†Aã€Bã€Cä¸‰ä¸ªçº¿ç¨‹ï¼Œè¦æ±‚æ‰§è¡Œå®ŒAã€Båæ‰èƒ½æ‰§è¡ŒCï¼Œæ€ä¹ˆåšï¼Ÿ</div></pre></td></tr></table></figure></p>
<p>//1. åˆ›å»ºé˜Ÿåˆ—<br>NSOperationQueue *queue = [[NSOpertionQueue alloc] init];</p>
<p>//2. åˆ›å»º3ä¸ªæ“ä½œ<br>NSOperation <em>a = [NSOperation blockOperationWithBlock:^{<br>NSLog(@â€operationâ€”â€œ);<br>}];<br>NSOperation </em>b = [NSOperation blockOperationWithBlock:^{<br>NSLog(@â€operationâ€”â€œ);<br>}];<br>NSOperation *c = [NSOperation blockOperationWithBlock:^{<br>NSLog(@â€operationâ€”â€œ);<br>}];</p>
<p>//3. æ·»åŠ ä¾èµ–<br>[c addDependency:a];<br>[c addDependency:b];</p>
<p>//4. æ‰§è¡Œæ“ä½œ<br>[queue addOperation:a];<br>[queue addOperation:b];<br>[queue addOperation:c];<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">## ä¸€äº›ç»å…¸çš„é¢˜ç›®</div><div class="line">åœ¨ä¸»çº¿ç¨‹ä¸­çš„æŸä¸ªå‡½æ•°é‡Œè°ƒç”¨äº†å¼‚æ­¥å‡½æ•°ï¼Œæ€ä¹ˆæ · block å½“å‰çº¿ç¨‹ , ä¸”è¿˜èƒ½å“åº”å½“å‰çº¿ç¨‹çš„ timer äº‹ä»¶ï¼Œ touch äº‹ä»¶ç­‰</div><div class="line"></div><div class="line">&gt;æ€è·¯ä¾¿æ˜¯ï¼šåˆ©ç”¨waitå‡½æ•°ï¼Œä¸æ–­åœ°æ£€æµ‹æ˜¯å¦å®Œæˆå¼‚æ­¥æ“ä½œï¼Œç„¶ååŒæ—¶å¼€å¯ä¸€ä¸ªç±»æ­»å¾ªç¯ï¼Œä¸è¿‡è¿™å‡½æ•°çš„äº’ç›¸è°ƒç”¨è¦ç”¨performafterä¸ºäº†ç»™äº‹ä»¶å’Œtimerè°ƒç”¨ç•™å‡ºæœºä¼šå’Œæ—¶é—´ã€‚</div></pre></td></tr></table></figure></p>
<p>@interface ViewController ()<br>{<br>    dispatch_group_t group;<br>}<br>@property (nonatomic, strong) RedView <em>redView;<br>@property (nonatomic, assign) NSInteger result;<br>@property (nonatomic, strong) UIButton </em>btn;<br>@property (nonatomic, strong) NSTimer *timer;<br>@end</p>
<p>@implementation ViewController</p>
<ul>
<li><p>(UIButton *)btn {<br>  if (!_btn) {</p>
<pre><code>_btn = [UIButton buttonWithType:UIButtonTypeCustom];
[_btn setTitle:@&quot;ç‚¹å‡»æˆ‘å•Š&quot; forState:UIControlStateNormal];
[_btn sizeToFit];
_btn.frame = CGRectMake(100, 100, _btn.bounds.size.width, _btn.bounds.size.height);
[_btn setTitleColor:[UIColor redColor] forState:UIControlStateNormal];
[_btn addTarget:self action:@selector(change) forControlEvents:UIControlEventTouchUpInside];
</code></pre><p>  }<br>  return _btn;<br>}</p>
</li>
<li><p>(void)viewDidLoad {<br>  [super viewDidLoad];</p>
<p>  [self.view addSubview:self.btn];</p>
<p>  self.timer = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(chang1) userInfo:nil repeats:YES];</p>
<p>  group = dispatch_group_create();<br>  dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0);<br>  dispatch_group_async(group, queue, ^{</p>
<pre><code>for (int i = 0; i &lt; 10000; i++) {
    NSLog(@&quot;%d&quot;, i);
}
</code></pre><p>  });</p>
<p>  [self wait];</p>
</li>
</ul>
<p>}</p>
<ul>
<li><p>(void)wait {</p>
<p>  self.result = dispatch_group_wait(group, 10 * NSEC_PER_SEC);<br>  if (self.result == 0) {</p>
<pre><code>NSLog(@&quot;ç»“æŸ&quot;);
</code></pre><p>  }else {</p>
<pre><code>NSLog(@&quot;rsout--%ld&quot;, self.result);
[self performSelector:@selector(wait1) withObject:nil afterDelay:0];
</code></pre><p>  }</p>
</li>
</ul>
<p>}</p>
<ul>
<li><p>(void)wait1 {</p>
<p>  self.result = dispatch_group_wait(group, 10 * NSEC_PER_SEC);<br>  if (self.result == 0) {</p>
<pre><code>NSLog(@&quot;ç»“æŸ&quot;);
</code></pre><p>  }else {</p>
<pre><code>NSLog(@&quot;rsout--%ld&quot;, self.result);
[self performSelector:@selector(wait) withObject:nil afterDelay:0];
</code></pre><p>  }</p>
</li>
</ul>
<p>}</p>
<ul>
<li><p>(void)next {<br>  NSLog(@â€1234567â€);<br>}</p>
</li>
<li><p>(void)change {<br>  self.view.backgroundColor = [UIColor redColor];<br>}</p>
</li>
<li><p>(void)chang1 {<br>  NSLog(@â€å“‡å“ˆå“ˆå“ˆå“ˆâ€);<br>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">#### æ­»é”çš„ä¾‹å­</div></pre></td></tr></table></figure>
</li>
<li><p>(void)viewDidLoad {<br>  [super viewDidLoad];</p>
<p>  dispatch_sync(dispatch_get_main_queue(), ^{</p>
<pre><code>[self dosomething];
</code></pre><p>  });<br>}</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">åŒæ­¥æäº¤åˆ°ä¸»é˜Ÿåˆ—çš„ä»»åŠ¡ï¼Œåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œé‚£ä¹ˆviewDidLoadè¿™ä¸ªæ–¹æ³•å’Œblockåœ¨åŒä¸€ä¸ªé˜Ÿåˆ—ï¼Œä»¥å‰ä¸€åï¼ŒviewDidLoadå®Œæˆè¯ç­‰åˆ°blockæ‰§è¡Œå®Œï¼Œä½†æ˜¯blockæ‰§è¡Œå®Œåœ¨é˜Ÿåˆ—ä¸­è¦ç­‰å¾…viewDidLoadå®Œæˆï¼Œè¿™ä¸ªæ—¶å€™å‡ºç°äº†æ­»é”</div><div class="line"></div><div class="line">![](../../../images/2018-07-033.31.23.png)</div><div class="line"></div><div class="line">é‚£ä¹ˆä¸‹è¾¹è¿™ç§å‘¢</div></pre></td></tr></table></figure>
<ul>
<li><p>(void)viewDidLoad {<br>  [super viewDidLoad];</p>
<p>  dispatch_queue_t serialQueue = dispatch_queue_create(â€œcom.kugou.gcd.myQueueâ€, NULL);</p>
<p>  dispatch_sync(serialQueue, ^{</p>
<pre><code>[self dosomething];
</code></pre><p>  });<br>}</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">è¿™ä¸ªä¼šæ‰§è¡Œæ­£å¸¸ï¼Œå› ä¸ºæˆ‘ä»¬æ–°å»ºäº†ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—ï¼Œè™½ç„¶syncä»ç„¶åœ¨ä¸»çº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼Œä½†æ˜¯åœ¨æ–°é˜Ÿåˆ—ä¸­ï¼Œblockå¹¶ä¸éœ€è¦ç­‰å¾…viewDidLoadå®Œæˆæ‰æ‰§è¡Œã€‚å¦‚æœviewDidLoadä¹Ÿæ”¾åœ¨äº†serialQueueï¼Œé‚£ä¹ˆä¹Ÿä¼šæ­»é”çš„ã€‚</div><div class="line"></div><div class="line">![](../../../images/2018-07-033.35.27.png)</div><div class="line"></div><div class="line">è¯·æ€è€ƒä¸‹è¾¹è¿™ä¸ªè¾“å…¥çš„ç»“æœæ˜¯å•¥æ ·çš„ï¼Ÿ</div></pre></td></tr></table></figure>
<p>dispatch_queue_t global = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);<br>    NSLog(@â€0â€);<br>    dispatch_sync(global, ^{<br>        NSLog(@â€1â€);<br>        dispatch_sync(global, ^{<br>            NSLog(@â€2â€);<br>            dispatch_sync(global, ^{<br>                NSLog(@â€3â€);</p>
<pre><code>        });
    });
    NSLog(@&quot;4&quot;);
});
NSLog(@&quot;5&quot;);
</code></pre><p>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ç»“æœæ˜¯1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œç†è§£çš„è¦ç‚¹åœ¨äºï¼Œsyncæ˜¯åœ¨å½“å‰çº¿ç¨‹ç›´æ¥å½“å‰çº¿ç¨‹æ‰§è¡Œï¼Œè™½ç„¶æ˜¯å…¨å±€é˜Ÿåˆ—ä¼šæœ‰å¤šä¸ªï¼Œå¯¹ä¸èµ·ä¸å¥½ä½¿ï¼Œçº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œå¹¶å‘ä¸å¦å–å†³äºçº¿ç¨‹ï¼Œæ‰€ä»¥è¿˜æ˜¯åœ¨å½“å‰çº¿ç¨‹è€è€å®å®æ’é˜Ÿå§ã€‚å¦‚æœè¿™é‡Œçš„globalqueueæ¢æˆä¸²è¡Œé˜Ÿåˆ—ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿæ­»é”ï¼ŒåŸå› å’Œæœ€ä¸Šè¾¹é‚£ä¸ªä¸€æ ·ã€‚</div><div class="line"></div><div class="line"></div><div class="line">è¿™å¥æ‰“å°çš„æ˜¯å•¥å†…å®¹ï¼Ÿ</div></pre></td></tr></table></figure>
<ul>
<li>(void)viewDidLoad {<br>  dispatch_async(dispatch_get_main_queue(), ^{<pre><code>NSLog(@&quot;%@&quot;,[NSThread currentThread]);
</code></pre>  });<br>}</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ç­”æ¡ˆæ˜¯mainï¼Œå› ä¸ºä¸»é˜Ÿåˆ—åªèƒ½åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚</div><div class="line"></div><div class="line"></div><div class="line">ä¸‹è¾¹è¿™ä¸ªè¾“å‡ºå•¥ï¼Ÿ</div></pre></td></tr></table></figure>
<p>dispatch_queue_t gloabl = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);<br>    dispatch_async(gloabl, ^{<br>        NSLog(@â€123â€);<br>        NSLog(@â€%@â€,[NSThread currentThread]);<br>        [self performSelector:@selector(dosomething) withObject:nil afterDelay:0];<br>    });<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>
<p>123</p>
<p><nsthread: 0x60400027a800="">{number = 3, name = (null)}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ä¸ºå•¥æ²¡æœ‰dosomethingï¼Ÿå› ä¸ºperformselectoréœ€è¦timeræ·»åŠ åˆ°runloopï¼Œä½†æ˜¯ç›´æ¥å¼€çº¿ç¨‹æ˜¯æ²¡æœ‰runloopçš„</div></pre></td></tr></table></figure></nsthread:></p>
<p>dispatch_queue_t queue = dispatch_queue_create(â€œcom.demo.serialQueueâ€, DISPATCH_QUEUE_SERIAL);<br>NSLog(@â€1â€); // ä»»åŠ¡1<br>dispatch_async(queue, ^{<br>    NSLog(@â€2â€); // ä»»åŠ¡2<br>    dispatch_sync(queue, ^{<br>        NSLog(@â€3â€); // ä»»åŠ¡3<br>    });<br>    NSLog(@â€4â€); // ä»»åŠ¡4<br>});<br>NSLog(@â€5â€); // ä»»åŠ¡5<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">è¿™ä¸ªè¾“å‡ºå•¥å‘¢ï¼Ÿ</div><div class="line"></div><div class="line">1,5,2(5ï¼Œ2é¡ºåºä¸ä¸€å®š)</div></pre></td></tr></table></figure></p>
<p>NSLog(@â€1â€); // ä»»åŠ¡1<br>dispatch_async(dispatch_get_global_queue(0, 0), ^{<br>    NSLog(@â€2â€); // ä»»åŠ¡2<br>    dispatch_sync(dispatch_get_main_queue(), ^{<br>        NSLog(@â€3â€); // ä»»åŠ¡3<br>    });<br>    NSLog(@â€4â€); // ä»»åŠ¡4<br>});<br>NSLog(@â€5â€); // ä»»åŠ¡5<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">è¿™ä¸ªè¾“å‡º1,5,2,3,4ï¼Œä¹‹æ‰€ä»¥ä¸å µå¡ï¼Œæ˜¯å› ä¸ºè¿™2åè¾¹çš„éƒ½æ‰§è¡Œåœ¨åˆ«çš„é˜Ÿåˆ—ä¸Šï¼Œç„¶åå›åˆ°ä¸»é˜Ÿåˆ—æ‰“å°ä¸€ä¸ª3ï¼Œç„¶åå†å›æ¥ï¼Œå•¥éƒ½ä¸è€½è¯¯</div></pre></td></tr></table></figure></p>
<p>dispatch_async(dispatch_get_global_queue(0, 0), ^{<br>    NSLog(@â€1â€); // ä»»åŠ¡1<br>    dispatch_sync(dispatch_get_main_queue(), ^{<br>        NSLog(@â€2â€); // ä»»åŠ¡2<br>    });<br>    NSLog(@â€3â€); // ä»»åŠ¡3<br>});<br>NSLog(@â€4â€); // ä»»åŠ¡4<br>while (1) {<br>}<br>NSLog(@â€5â€); // ä»»åŠ¡5<br>```</p>
<p>é‚£ä¹ˆè¿™ä¸ªå‘¢ï¼Ÿæ‰“å°4ï¼Œ1ï¼Œé¡ºåºä¸ä¸€å®š</p>
<h3 id="é”ç›¸å…³"><a href="#é”ç›¸å…³" class="headerlink" title="é”ç›¸å…³"></a>é”ç›¸å…³</h3><ul>
<li>@synchronizedï¼Œå•ä¾‹å¯¹è±¡çš„æ—¶å€™ä½¿ç”¨</li>
<li>atomicï¼Œèµ‹å€¼æ“ä½œåŸå­æ€§ï¼Œä½†ä¸ä¿è¯ä½¿ç”¨</li>
<li>OSSpinLockï¼Œè‡ªæ—‹é”ï¼Œå¾ªç¯ç­‰å¾…ï¼Œå¹¶ä¸é‡Šæ”¾å½“å‰èµ„æºï¼Œä¸€ç›´ç­‰åˆ°èƒ½å¤Ÿè·å–è¿™ä¸ªé”ï¼Œç”¨äºè½»é‡çº§æ•°æ®è®¿é—®</li>
<li>NSRecursiveLockï¼Œé€’å½’é”ï¼Œå¯ä»¥é‡å¤</li>
<li>NSLockï¼Œäº’æ–¥é”ï¼Œä¸èƒ½é‡å¤ï¼Œæ¯”å¦‚æˆ‘è·å–äº†é”ï¼Œæ²¡æœ‰è§£çš„æ—¶å€™åˆè·å–é”ï¼Œå°±ä¼šæ­»é”</li>
<li>dispatch_semaphore_tï¼Œä¿¡å·é‡</li>
</ul>
<p><img src="/01/2015/å¤šçº¿ç¨‹æŠ€æœ¯/../../../images/2018-07-034.59.21.png" alt=""></p>
<p><img src="/01/2015/å¤šçº¿ç¨‹æŠ€æœ¯/../../../images/2018-07-034.59.40.png" alt=""></p>
<h3 id="é¢˜ç›®æ€»ç»“"><a href="#é¢˜ç›®æ€»ç»“" class="headerlink" title="é¢˜ç›®æ€»ç»“:"></a>é¢˜ç›®æ€»ç»“:</h3><h4 id="å¤šè¯»å•å†™"><a href="#å¤šè¯»å•å†™" class="headerlink" title="å¤šè¯»å•å†™"></a>å¤šè¯»å•å†™</h4><h4 id="å‡ ç§å¤šçº¿ç¨‹æŠ€æœ¯ï¼Œæ€ä¹ˆé€‰æ‹©ï¼Ÿ"><a href="#å‡ ç§å¤šçº¿ç¨‹æŠ€æœ¯ï¼Œæ€ä¹ˆé€‰æ‹©ï¼Ÿ" class="headerlink" title="å‡ ç§å¤šçº¿ç¨‹æŠ€æœ¯ï¼Œæ€ä¹ˆé€‰æ‹©ï¼Ÿ"></a>å‡ ç§å¤šçº¿ç¨‹æŠ€æœ¯ï¼Œæ€ä¹ˆé€‰æ‹©ï¼Ÿ</h4><p>GCDç”¨æ¥å®ç°ç®€å•çš„çº¿ç¨‹åŒæ­¥ï¼Œå¤šè¯»å•å†™ï¼Œæ²¡æœ‰ä¾èµ–ï¼Œä¸éœ€è¦ç›‘å¬çŠ¶æ€</p>
<p>NSOperationï¼Œä»»åŠ¡ä¹‹é—´æœ‰ä¾èµ–æˆ–è€…è¦ç›‘å¬ä»»åŠ¡çš„æ‰§è¡Œæƒ…å†µï¼Œå¹¶ä¸”åŠ ä»¥æ§åˆ¶åˆ™ä½¿ç”¨NSOperationQueueï¼Œåœ¨AFNä¸­æœ‰ä½¿ç”¨</p>
<p>NSThreadç”¨æ¥å®ç°å¸¸é©»çº¿ç¨‹</p>
<h4 id="å¦‚ä½•ç»ˆæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹"><a href="#å¦‚ä½•ç»ˆæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹" class="headerlink" title="å¦‚ä½•ç»ˆæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹"></a>å¦‚ä½•ç»ˆæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹</h4><p>URLSessionæœ‰cancleçš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥å–æ¶ˆï¼Œè€Œæ‰§è¡Œè€—æ—¶æ“ä½œéœ€è¦æå‰é¢„ç½®flagï¼Œé€šè¿‡æ›´æ”¹flagè¿›è¡Œreturnã€‚</p>
<p>çº¿ç¨‹é—´å…±äº«èµ„æºï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¿›è¡Œflagä¿®æ”¹ã€‚</p>
<h4 id="æ¯”è¾ƒå¤æ‚çš„ä¾èµ–æƒ…å†µ"><a href="#æ¯”è¾ƒå¤æ‚çš„ä¾èµ–æƒ…å†µ" class="headerlink" title="æ¯”è¾ƒå¤æ‚çš„ä¾èµ–æƒ…å†µ"></a>æ¯”è¾ƒå¤æ‚çš„ä¾èµ–æƒ…å†µ</h4><ul>
<li>Aå¿…é¡»åœ¨Bï¼ŒCä¹‹å‰ï¼ŒBCéšæ„(å¹¶å‘é˜Ÿåˆ—+syncå‡½æ•°)</li>
<li>Cå¿…é¡»åœ¨ABä¹‹åï¼ŒABéšæ„(group_notify)</li>
<li>ABå¿…é¡»åœ¨DEä¹‹å‰ï¼ŒCåœ¨ä»–ä»¬ä¹‹é—´ï¼Œä»–ä»¬ä¹‹é—´éšæ„(group_barriry)</li>
</ul>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOSåŸºç¡€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[UIä¸Runtime]]></title>
      <url>/2015/07/01/2015/UI%E5%9F%BA%E7%A1%80/</url>
      <content type="html"><![CDATA[<h3 id="UIè§†å›¾ç›¸å…³"><a href="#UIè§†å›¾ç›¸å…³" class="headerlink" title="UIè§†å›¾ç›¸å…³"></a>UIè§†å›¾ç›¸å…³</h3><h4 id="UIViewControllerç”Ÿå‘½å‘¨æœŸ"><a href="#UIViewControllerç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="UIViewControllerç”Ÿå‘½å‘¨æœŸ"></a>UIViewControllerç”Ÿå‘½å‘¨æœŸ</h4><p>å½“ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨è¢«åˆ›å»ºï¼Œå¹¶åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„æ—¶å€™ã€‚ ä»£ç çš„æ‰§è¡Œé¡ºåº</p>
<p>1ã€ alloc                                   åˆ›å»ºå¯¹è±¡ï¼Œåˆ†é…ç©ºé—´</p>
<p>2ã€init (initWithNibName) åˆå§‹åŒ–å¯¹è±¡ï¼Œåˆå§‹åŒ–æ•°æ®</p>
<p>3ã€loadView                          ä»nibè½½å…¥è§†å›¾ ï¼Œé€šå¸¸è¿™ä¸€æ­¥ä¸éœ€è¦å»å¹²æ¶‰ã€‚é™¤éä½ æ²¡æœ‰ä½¿ç”¨xibæ–‡ä»¶åˆ›å»ºè§†å›¾</p>
<p>4ã€viewDidLoad                   è½½å…¥å®Œæˆï¼Œå¯ä»¥è¿›è¡Œè‡ªå®šä¹‰æ•°æ®ä»¥åŠåŠ¨æ€åˆ›å»ºå…¶ä»–æ§ä»¶</p>
<p>5ã€viewWillAppear              è§†å›¾å°†å‡ºç°åœ¨å±å¹•ä¹‹å‰ï¼Œé©¬ä¸Šè¿™ä¸ªè§†å›¾å°±ä¼šè¢«å±•ç°åœ¨å±å¹•ä¸Šäº†</p>
<p>6ã€viewDidAppear               è§†å›¾å·²åœ¨å±å¹•ä¸Šæ¸²æŸ“å®Œæˆ</p>
<p>å½“ä¸€ä¸ªè§†å›¾è¢«ç§»é™¤å±å¹•å¹¶ä¸”é”€æ¯çš„æ—¶å€™çš„æ‰§è¡Œé¡ºåºï¼Œè¿™ä¸ªé¡ºåºå·®ä¸å¤šå’Œä¸Šé¢çš„ç›¸å</p>
<p>1ã€viewWillDisappear            è§†å›¾å°†è¢«ä»å±å¹•ä¸Šç§»é™¤ä¹‹å‰æ‰§è¡Œ</p>
<p>2ã€viewDidDisappear             è§†å›¾å·²ç»è¢«ä»å±å¹•ä¸Šç§»é™¤ï¼Œç”¨æˆ·çœ‹ä¸åˆ°è¿™ä¸ªè§†å›¾äº†</p>
<p>3ã€dealloc                                 è§†å›¾è¢«é”€æ¯ï¼Œæ­¤å¤„éœ€è¦å¯¹ä½ åœ¨initå’Œ</p>
<p>viewDidLoadä¸­åˆ›å»ºçš„å¯¹è±¡è¿›è¡Œé‡Šæ”¾</p>
<a id="more"></a>
<h4 id="tableviewçš„cellé‡ç”¨æœºåˆ¶"><a href="#tableviewçš„cellé‡ç”¨æœºåˆ¶" class="headerlink" title="tableviewçš„cellé‡ç”¨æœºåˆ¶"></a>tableviewçš„cellé‡ç”¨æœºåˆ¶</h4><h4 id="tablevieçš„æ•°æ®æºåŒæ­¥"><a href="#tablevieçš„æ•°æ®æºåŒæ­¥" class="headerlink" title="tablevieçš„æ•°æ®æºåŒæ­¥"></a>tablevieçš„æ•°æ®æºåŒæ­¥</h4><p>ä¸¤ç§ä¸€ç§æ˜¯æ‹·è´æ•°æ®ï¼Œç„¶åå¹¶å‘æ‰§è¡Œï¼Œä¸€ç§æ˜¯åœ¨ä¸²è¡Œé˜Ÿåˆ—ä¸­å»æ‰§è¡Œ</p>
<p><img src="/01/2015/UIåŸºç¡€/../../../images/2018-07-01 9.47.40.png" alt=""></p>
<p><img src="/01/2015/UIåŸºç¡€/../../../images/2018-07-019.49.24.png" alt=""></p>
<h4 id="UIViewä¸CALayerçš„åŒºåˆ«"><a href="#UIViewä¸CALayerçš„åŒºåˆ«" class="headerlink" title="UIViewä¸CALayerçš„åŒºåˆ«"></a>UIViewä¸CALayerçš„åŒºåˆ«</h4><p>UIViewå‚ä¸å“åº”é“¾æ¡ï¼Œå¤„ç†äº‹ä»¶ï¼ŒCALayerè´Ÿè´£æ˜¾ç¤ºå†…å®¹<br>å•ä¸€èŒè´£åŸåˆ™</p>
<h4 id="äº‹ä»¶ä¼ é€’"><a href="#äº‹ä»¶ä¼ é€’" class="headerlink" title="äº‹ä»¶ä¼ é€’"></a>äº‹ä»¶ä¼ é€’</h4><p><img src="/01/2015/UIåŸºç¡€/../../../images/2018-07-01 9.57.57.png" alt=""></p>
<p><img src="/01/2015/UIåŸºç¡€/../../../images/2018-07-01 9.57.35.png" alt=""></p>
<p><img src="/01/2015/UIåŸºç¡€/../../../images/2018-07-01 10.01.52.png" alt=""></p>
<p>å¦‚ä½•å®ç°ä¸€ä¸ªæ­£æ–¹å½¢ï¼Œåªæœ‰ä¸­é—´åœ†å½¢å“åº”äº‹ä»¶å‘¢ï¼Ÿ<br>é‡å†™<code>- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event</code></p>
<p>é—®é¢˜ï¼Œå¦‚ä½•è®©ä¸€ä¸ªåœ¨çˆ¶è§†å›¾å¤–çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event &#123;</div><div class="line">    UIView *view = [super hitTest:point withEvent:event];</div><div class="line">    if (view == nil) &#123;</div><div class="line">        CGPoint yellowPoint = [self convertPoint:point toView:self.testBtn];</div><div class="line">        if ([self.testBtn pointInside:yellowPoint withEvent:event]) &#123;</div><div class="line">            view = self.testBtn;</div><div class="line">        &#125;</div><div class="line">//        self.testBtn.istarget = YES;</div><div class="line">    &#125;</div><div class="line">    return view;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¯´æ˜å½“ï¼Œç¬¬ä¸€ä¸ªviewè¿”å›nilçš„æ—¶å€™ï¼Œè¯´æ˜ç‚¹å‡»ä¸åœ¨è¿™ä¸ªviewä¸Šï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥åˆ¤æ–­ï¼Œç‚¹å‡»åœ¨ä¸åœ¨å­æ§ä»¶ï¼ŒtestBtnä¸Šï¼Œæ³¨æ„è¿™é‡Œè¦å…ˆè½¬åŒ–åæ ‡ç³»ï¼Œå¦‚æœåœ¨çš„è¯é‚£å°±ç›´æ¥è¿”å›è¿™ä¸ªtestBtn</p>
<p>å¦‚æœæ˜¯å­æ§ä»¶çš„å­æ§ä»¶æ€ä¹ˆåŠå‘¢ï¼Ÿæä¾›ä¸€ä¸ªæ³¨å†Œç±»ï¼Œå½“è¿”å›ä¸ºnilçš„æ—¶å€™å°±äº¤ç»™è¿™ä¸ªæ³¨å†Œçš„å¯¹è±¡æ¥å¤„ç†äº‹ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">#import &quot;backView.h&quot;</div><div class="line"></div><div class="line">@interface backView()</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">static __weak UIView *targetView;</div><div class="line"></div><div class="line">@implementation backView</div><div class="line"></div><div class="line">- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event &#123;</div><div class="line">    UIView *view = [super hitTest:point withEvent:event];</div><div class="line">    if (view == nil) &#123;</div><div class="line">        CGPoint yellowPoint = [self convertPoint:point toView:targetView];</div><div class="line">        if ([targetView pointInside:yellowPoint withEvent:event]) &#123;</div><div class="line">            view = targetView;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return view;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (void)registerTargetView:(UIView *)view &#123;</div><div class="line">    targetView = view;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<h5 id="æ¥ç€ä¸Šè¾¹çš„é—®é¢˜ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªä¸‹è¾¹è¿™æ ·çš„ç»“æ„ä½ æ€ä¹ˆå®ç°ï¼Ÿ"><a href="#æ¥ç€ä¸Šè¾¹çš„é—®é¢˜ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªä¸‹è¾¹è¿™æ ·çš„ç»“æ„ä½ æ€ä¹ˆå®ç°ï¼Ÿ" class="headerlink" title="æ¥ç€ä¸Šè¾¹çš„é—®é¢˜ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªä¸‹è¾¹è¿™æ ·çš„ç»“æ„ä½ æ€ä¹ˆå®ç°ï¼Ÿ"></a>æ¥ç€ä¸Šè¾¹çš„é—®é¢˜ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªä¸‹è¾¹è¿™æ ·çš„ç»“æ„ä½ æ€ä¹ˆå®ç°ï¼Ÿ</h5><p><img src="/01/2015/UIåŸºç¡€/../../../images/20160816150706493.png" alt=""></p>
<p>ä»ç„¶ç”¨ä¸Šè¾¹çš„ä»£ç æ€»ä½“ç»“æ„ä¸åŠ¨ï¼Œå‡ ç‚¹ç»†èŠ‚éœ€è¦æ³¨æ„:</p>
<ul>
<li>æ³¨å†Œçš„tagetViewå˜æˆtableview</li>
<li>è¿”å›çš„viewæ˜¯æœ€ç»ˆå¤„ç†äº‹ä»¶çš„viewï¼Œæ‰€ä»¥è¿™é‡Œè¿”å›çš„å¹¶ä¸æ˜¯targetviewï¼Œè€Œæ˜¯è¿”å›å…¶å­viewï¼Œé‚£ä¹ˆæ€ä¹ˆè¿”å›å‘¢ï¼Ÿç»§ç»­è°ƒç”¨hitTestæ–¹æ³•ï¼Œä½†æ˜¯è¿™é‡Œæ³¨æ„ä¼ å…¥çš„åº”è¯¥æ˜¯è½¬æ¢åçš„åæ ‡ï¼Œå¦åˆ™å­è¯•å›¾ä½¿ç”¨çš„æ˜¯åœ¨çˆ¶è¯•å›¾ä¸­çš„åæ ‡ï¼Œè¿™é‡Œè‚¯å®šå¯¹ä¸ä¸Š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">@interface backView()</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">static __weak UIView *targetView;</div><div class="line"></div><div class="line">@implementation backView</div><div class="line"></div><div class="line">- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event &#123;</div><div class="line">    UIView *view = [super hitTest:point withEvent:event];</div><div class="line">    if (view == nil) &#123;</div><div class="line">        CGPoint yellowPoint = [self convertPoint:point toView:targetView];</div><div class="line">        if ([targetView pointInside:yellowPoint withEvent:event]) &#123;</div><div class="line">            view = [targetView hitTest:yellowPoint withEvent:event];//å…³é”®åœ¨è¿™é‡Œéœ€è¦ä¼ å…¥è½¬æ¢ä¹‹åçš„åæ ‡</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return view;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (void)registerTargetView:(UIView *)view &#123;</div><div class="line">    targetView = view;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>å†æ³¨æ„ï¼Œ<code>-(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event</code>å’Œ<code>pointInside:(CGPoint)pointwithEvent:(UIEvent *)event</code>ä¸­çš„pointéƒ½æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„viewçš„åæ ‡ç³»å†…çš„åæ ‡ï¼Œæ‰€ä»¥ä¸€å®šè¦è®°å¾—æå‰è½¬æ¢ã€‚</p>
<p>ä½¿ç”¨çš„æ–¹æ³•å°±æ˜¯<code>[self convertPoint:point toView:targetView]</code>ï¼Œè¿™é‡Œä¹Ÿè¦æ³¨æ„ï¼Œè¿™ä¸ªpointè¦æ˜¯selfçš„åæ ‡ç³»å†…çš„ï¼Œç°åœ¨ç»™è½¬ç§»åˆ°tagetViewçš„åæ ‡ç³»å†…ã€‚</p>
<p><code>é—®é¢˜ï¼Ÿæ€ä¹ˆæ‰¾åˆ°ä¸€ä¸ªviewæ‰€ä»¥ä¾èµ–çš„ç¬¬ä¸€ä¸ªæ§åˆ¶å™¨ï¼Ÿ</code></p>
<p>ç­”æ¡ˆ:å“åº”è€…é“¾æ¡ï¼Œæœ€ç»ˆä¼šæ‰¾åˆ°UIApplicationè¿™ä¸ªç±»ã€‚</p>
<h4 id="cpu"><a href="#cpu" class="headerlink" title="cpu"></a>cpu</h4><p>cpuè´Ÿè´£ <code>å¸ƒå±€å’Œæ–‡æœ¬è®¡ç®—ï¼Œç»˜åˆ¶ï¼Œå›¾ç‰‡ç¼–è§£ç ï¼Œæäº¤ä½å›¾</code></p>
<h4 id="å¡é¡¿å’Œæ‰å¸§çš„æ ¹æœ¬åŸå› "><a href="#å¡é¡¿å’Œæ‰å¸§çš„æ ¹æœ¬åŸå› " class="headerlink" title="å¡é¡¿å’Œæ‰å¸§çš„æ ¹æœ¬åŸå› "></a>å¡é¡¿å’Œæ‰å¸§çš„æ ¹æœ¬åŸå› </h4><h4 id="æ»‘åŠ¨ä¼˜åŒ–"><a href="#æ»‘åŠ¨ä¼˜åŒ–" class="headerlink" title="æ»‘åŠ¨ä¼˜åŒ–"></a>æ»‘åŠ¨ä¼˜åŒ–</h4><p>CPU</p>
<ul>
<li>å¯¹è±¡çš„åˆ›å»ºï¼Œé”€æ¯ï¼Œè°ƒæ•´</li>
<li>é¢„æ’ç‰ˆ(å¸ƒå±€è®¡ç®—ï¼Œæ–‡æœ¬è®¡ç®—)</li>
<li>é¢„æ¸²æŸ“(æ–‡æœ¬å¼‚æ­¥ç»˜åˆ¶ï¼Œå›¾ç‰‡è§£ç )</li>
</ul>
<p>GPU</p>
<ul>
<li>ç¦»å±æ¸²æŸ“</li>
<li>è§†å›¾æ··åˆ(é€æ˜åº¦)</li>
</ul>
<h4 id="UIViewç»˜åˆ¶æµç¨‹"><a href="#UIViewç»˜åˆ¶æµç¨‹" class="headerlink" title="UIViewç»˜åˆ¶æµç¨‹"></a>UIViewç»˜åˆ¶æµç¨‹</h4><p><img src="/01/2015/UIåŸºç¡€/../../../images/2018-07-01 10.11.15.png" alt=""></p>
<p>ç³»ç»Ÿç»˜åˆ¶æµç¨‹å›¾</p>
<p><img src="/01/2015/UIåŸºç¡€/../../../images/2018-07-01 10.12.22.png" alt=""></p>
<p>å¼‚æ­¥ç»˜åˆ¶æµç¨‹</p>
<p><code>[layer.delegate displayLayer:]</code></p>
<ul>
<li>ä»£ç†è´Ÿè´£ç”Ÿæˆbitmap</li>
<li>è®¾ç½®bitmapä¸ºlayerçš„contentså±æ€§</li>
</ul>
<p><img src="/01/2015/UIåŸºç¡€/../../../images/2018-07-01 10.15.56.png" alt=""></p>
<p>ç°åœ¨é—®ä¸€ä¸ªé—®é¢˜ï¼Œå¼‚æ­¥ç»˜åˆ¶çš„æ—¶å€™ï¼Œæ˜¯åœ¨æœ¬æ¬¡runloopçš„æ—¶å€™æäº¤gpuçš„å—ï¼Ÿ</p>
<p>å¹¶ä¸æ˜¯ï¼Œæ˜¯åœ¨ä¸‹ä¸€æ¬¡ç»˜åˆ¶çš„æ—¶å€™ã€‚</p>
<h5 id="drawrectä¸ºä»€ä¹ˆä¼šå¯¼è‡´å†…å­˜æš´å¢"><a href="#drawrectä¸ºä»€ä¹ˆä¼šå¯¼è‡´å†…å­˜æš´å¢" class="headerlink" title="drawrectä¸ºä»€ä¹ˆä¼šå¯¼è‡´å†…å­˜æš´å¢"></a>drawrectä¸ºä»€ä¹ˆä¼šå¯¼è‡´å†…å­˜æš´å¢</h5><p><a href="https://blog.csdn.net/jijiji000111/article/details/50480405/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a></p>
<p><code>- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx;</code><br>è¿™ä¸ªæ–¹æ³•è°ƒç”¨ä¹‹å‰ï¼ŒCALayeråˆ›å»ºäº†ä¸€ä¸ªåˆé€‚å°ºå¯¸çš„ç©ºå¯„å®¿å›¾ï¼ˆå°ºå¯¸ç”±boundså’ŒcontentsScaleå†³å®šï¼‰å’Œä¸€ä¸ªCore Graphicsçš„ç»˜åˆ¶ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œä¸ºç»˜åˆ¶å¯„å®¿å›¾åšå‡†å¤‡ï¼Œå®ƒä½œä¸ºctxå‚æ•°ä¼ å…¥ã€‚åœ¨è¿™ä¸€æ­¥ç”Ÿæˆçš„ç©ºå¯„å®¿å›¾å†…å­˜æ˜¯ç›¸å½“å·¨å¤§çš„ï¼Œå®ƒå°±æ˜¯æœ¬æ¬¡å†…å­˜é—®é¢˜çš„å…³é”®ï¼Œä¸€æ—¦ä½ å®ç°äº†CALayerDelegateåè®®ä¸­çš„-drawLayer:inContext:æ–¹æ³•æˆ–è€…UIViewä¸­çš„-drawRect:æ–¹æ³•ï¼ˆå…¶å®å°±æ˜¯å‰è€…çš„åŒ…è£…æ–¹æ³•ï¼‰ï¼Œå›¾å±‚å°±åˆ›å»ºäº†ä¸€ä¸ªç»˜åˆ¶ä¸Šä¸‹æ–‡ï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡éœ€è¦çš„å†…å­˜å¯ä»è¿™ä¸ªå…¬å¼å¾—å‡ºï¼šå›¾å±‚å®½<em>å›¾å±‚é«˜</em>4 å­—èŠ‚ï¼Œå®½é«˜çš„å•ä½å‡ä¸ºåƒç´ ã€‚è€Œæˆ‘ä»¬çš„ç”»æ¿ç¨‹åºå› ä¸ºè¦æ”¯æŒåƒçŒ¿é¢˜åº“ä¸€æ ·ä¸¤æŒ‡æŒªåŠ¨çš„æ•ˆæœï¼Œæˆ‘ä»¬å¼€è¾Ÿçš„ç”»æ¿å¤§å°ä¸ºï¼š</p>
<p><code>_myDrawer = [[BHBMyDrawer alloc] initWithFrame:
     CGRectMake(0, 0, SCREEN_SIZE.width*5, SCREEN_SIZE.height*2)];</code><br>æˆ‘ä»¬çš„ç”»æ¿ç¨‹åºçš„ç”»æ¿è§†å›¾å®ƒåœ¨iPhone6s plusæœºå™¨ä¸Šçš„ä¸Šä¸‹æ–‡å†…å­˜é‡å°±æ˜¯ 1920<em>2</em>1080<em>5</em>4 å­—èŠ‚ï¼Œ ç›¸å½“äº79MBå†…å­˜ï¼Œå›¾å±‚æ¯æ¬¡é‡ç»˜çš„æ—¶å€™éƒ½éœ€è¦é‡æ–°æŠ¹æ‰å†…å­˜ç„¶åé‡æ–°åˆ†é…ã€‚å®ƒå°±æ˜¯æˆ‘ä»¬ç”»æ¿ç¨‹åºå†…å­˜æš´å¢çš„çœŸæ­£åŸå› </p>
<p>drawRectæ–¹æ³•ä¾èµ–Core Graphicsæ¡†æ¶æ¥è¿›è¡Œè‡ªå®šä¹‰çš„ç»˜åˆ¶ï¼Œä½†è¿™ç§æ–¹æ³•ä¸»è¦çš„ç¼ºç‚¹å°±æ˜¯å®ƒå¤„ç†touchäº‹ä»¶çš„æ–¹å¼ï¼šæ¯æ¬¡æŒ‰é’®è¢«ç‚¹å‡»åï¼Œéƒ½ä¼šç”¨setNeddsDisplayè¿›è¡Œå¼ºåˆ¶é‡ç»˜ï¼›è€Œä¸”ä¸æ­¢ä¸€æ¬¡ï¼Œæ¯æ¬¡å•ç‚¹äº‹ä»¶è§¦å‘ä¸¤æ¬¡æ‰§è¡Œã€‚è¿™æ ·çš„è¯ä»æ€§èƒ½çš„è§’åº¦æ¥è¯´ï¼Œå¯¹CPUå’Œå†…å­˜æ¥è¯´éƒ½æ˜¯æ¬ ä½³çš„ã€‚ç‰¹åˆ«æ˜¯å¦‚æœåœ¨æˆ‘ä»¬çš„ç•Œé¢ä¸Šæœ‰å¤šä¸ªè¿™æ ·çš„UIButtonå®ä¾‹</p>
<h4 id="ç¦»å±æ¸²æŸ“"><a href="#ç¦»å±æ¸²æŸ“" class="headerlink" title="ç¦»å±æ¸²æŸ“"></a>ç¦»å±æ¸²æŸ“</h4><p>è¿™ä¸ªæ¦‚å¿µèµ·æºäºGPUï¼Œå½“æŸäº›è§†å›¾çš„æŸäº›å±æ€§ä¸èƒ½åœ¨æœªåˆæˆä¹‹å‰ç”¨äºå±å¹•ç›´æ¥æ˜¾ç¤ºçš„æ—¶å€™å°±ä¼šåœ¨å½“å‰å±å¹•ç¼“å†²åŒºä¹‹å¤–å†å¼€è¾Ÿä¸€ä¸ªç¼“å†²åŒºè¿›è¡Œæ¸²æŸ“æ“ä½œã€‚</p>
<h5 id="ä½•æ—¶è§¦å‘ï¼Ÿ"><a href="#ä½•æ—¶è§¦å‘ï¼Ÿ" class="headerlink" title="ä½•æ—¶è§¦å‘ï¼Ÿ"></a>ä½•æ—¶è§¦å‘ï¼Ÿ</h5><ul>
<li>åœ†è§’å’Œmasktoboundä¸€èµ·è®¾ç½®</li>
<li>å›¾å±‚è’™ç‰ˆ</li>
<li>å…‰æ …åŒ–</li>
<li>é˜´å½±</li>
</ul>
<h5 id="ä¸ºä½•è¦é¿å…"><a href="#ä¸ºä½•è¦é¿å…" class="headerlink" title="ä¸ºä½•è¦é¿å…"></a>ä¸ºä½•è¦é¿å…</h5><p>UIå¡é¡¿å’Œæ‰å¸§</p>
<ul>
<li>åˆ›å»ºæ–°çš„ç¼“å†²åŒº</li>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢</li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> iOSåŸºç¡€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSä¸­çš„å†…å­˜ç®¡ç†]]></title>
      <url>/2015/06/30/2015/iOS%E4%B8%AD%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</url>
      <content type="html"><![CDATA[<ul>
<li>å†…å­˜å¸ƒå±€</li>
<li>å†…å­˜ç®¡ç†æ–¹æ¡ˆ</li>
<li>å†…å­˜å¸ƒå±€</li>
<li>MRC/ARC</li>
<li>å¼•ç”¨è®¡æ•°</li>
<li>å¼±å¼•ç”¨</li>
<li>è‡ªåŠ¨é‡Šæ”¾æ± </li>
<li>å¾ªç¯å¼•ç”¨</li>
</ul>
<h3 id="å†…å­˜å¸ƒå±€"><a href="#å†…å­˜å¸ƒå±€" class="headerlink" title="å†…å­˜å¸ƒå±€"></a>å†…å­˜å¸ƒå±€</h3><p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-06-305.51.54.png" alt=""></p>
<h5 id="æ ˆ-stack"><a href="#æ ˆ-stack" class="headerlink" title="æ ˆ(stack)"></a>æ ˆ(stack)</h5><p>æ–¹æ³•è°ƒç”¨éƒ½æ˜¯åœ¨æ ˆåŒºï¼Œæ ˆå‘ä¸‹å¢é•¿ï¼Œ</p>
<h5 id="å †-heap"><a href="#å †-heap" class="headerlink" title="å †(heap)"></a>å †(heap)</h5><p>allocçš„æ•°æ®éƒ½æ˜¯åœ¨å †åŒºé—´ï¼Œè¿˜æœ‰copyè¿‡çš„block</p>
<h5 id="ä»£ç æ®µ-text"><a href="#ä»£ç æ®µ-text" class="headerlink" title="ä»£ç æ®µ(text)"></a>ä»£ç æ®µ(text)</h5><h3 id="å†…å­˜ç®¡ç†æ–¹æ¡ˆ"><a href="#å†…å­˜ç®¡ç†æ–¹æ¡ˆ" class="headerlink" title="å†…å­˜ç®¡ç†æ–¹æ¡ˆ"></a>å†…å­˜ç®¡ç†æ–¹æ¡ˆ</h3><p><a href="https://blog.csdn.net/axllll/article/details/53926144" target="_blank" rel="external">strongå®ç°æ¢ç©¶</a></p>
<p><a href="https://blog.csdn.net/axllll/article/details/52661374" target="_blank" rel="external">weakå®ç°æ¢ç©¶</a></p>
<p>ä¸åŒåœºæ™¯ï¼Œä¸åŒæ–¹æ¡ˆ</p>
<ul>
<li>å°æ•°æ® TaggedPointer(NSNumber)</li>
<li>NONPOINTER_ISAï¼Œå‰©ä½™å¤šä½™çš„ä½æ•°ç”¨æ¥å­˜å‚¨ç‚¹åˆ«çš„ï¼Œè¿™ä¸ªå…¶å®å°±æ˜¯isa</li>
<li>æ•£åˆ—è¡¨ï¼ŒåŒ…æ‹¬å¼•ç”¨è®¡æ•°è¡¨å’Œå¼±å¼•ç”¨è¡¨(SideTables)</li>
</ul>
<p><a href="http://yulingtianxia.com/blog/2015/12/06/The-Principle-of-Refenrence-Counting/" target="_blank" rel="external">OCå¼•ç”¨è®¡æ•°åŸç†</a></p>
<p>TaggedPointer<br>åˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯å¦åœ¨ä½¿ç”¨ TaggedPointer æ˜¯çœ‹æ ‡å¿—ä½æ˜¯å¦ä¸º 1 ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#if SUPPORT_MSB_TAGGED_POINTERS</div><div class="line">#   define TAG_MASK (1ULL&lt;&lt;63)</div><div class="line">#else</div><div class="line">#   define TAG_MASK 1</div><div class="line"></div><div class="line">inline bool </div><div class="line">objc_object::isTaggedPointer() </div><div class="line">&#123;</div><div class="line">#if SUPPORT_TAGGED_POINTERS</div><div class="line">    return ((uintptr_t)this &amp; TAG_MASK);</div><div class="line">#else</div><div class="line">    return false;</div><div class="line">#endif</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>id å…¶å®å°±æ˜¯ objc_object <em> çš„ç®€å†™ï¼ˆtypedef struct objc_object </em>id;ï¼‰ï¼Œå®ƒçš„ isTaggedPointer() æ–¹æ³•ç»å¸¸ä¼šåœ¨æ“ä½œå¼•ç”¨è®¡æ•°æ—¶ç”¨åˆ°ï¼Œå› ä¸ºè¿™å†³å®šäº†å­˜å‚¨å¼•ç”¨è®¡æ•°çš„ç­–ç•¥</p>
<blockquote>
<p>æœ‰äº›å¯¹è±¡å¦‚æœæ”¯æŒä½¿ç”¨ TaggedPointerï¼Œè‹¹æœä¼šç›´æ¥å°†å…¶æŒ‡é’ˆå€¼ä½œä¸ºå¼•ç”¨è®¡æ•°è¿”å›ï¼›å¦‚æœå½“å‰è®¾å¤‡æ˜¯ 64 ä½ç¯å¢ƒå¹¶ä¸”ä½¿ç”¨ Objective-C 2.0ï¼Œé‚£ä¹ˆâ€œä¸€äº›â€å¯¹è±¡ä¼šä½¿ç”¨å…¶ isa æŒ‡é’ˆçš„ä¸€éƒ¨åˆ†ç©ºé—´æ¥å­˜å‚¨å®ƒçš„å¼•ç”¨è®¡æ•°ï¼›å¦åˆ™ Runtime ä¼šä½¿ç”¨ä¸€å¼ æ•£åˆ—è¡¨æ¥ç®¡ç†å¼•ç”¨è®¡æ•°</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">NSNumber *nu = [NSNumber numberWithInteger:3];</div><div class="line">    </div><div class="line">NSLog(@&quot;%@---%p---%@&quot;, nu,nu,[nu valueForKey:@&quot;retainCount&quot;]);</div><div class="line">    </div><div class="line">NSNumber *nu1 = [NSNumber numberWithInteger:1];</div><div class="line">    </div><div class="line">NSLog(@&quot;%@---%p---%@&quot;, nu1,nu1,[nu1 valueForKey:@&quot;retainCount&quot;]);</div><div class="line">    </div><div class="line">NSNumber *nu2 = [NSNumber numberWithInteger:2];</div><div class="line">    </div><div class="line">NSLog(@&quot;%@---%p---%@&quot;, nu2,nu2,[nu2 valueForKey:@&quot;retainCount&quot;]);</div><div class="line">    </div><div class="line"></div><div class="line">3---0xb000000000000033---9223372036854775807</div><div class="line">1---0xb000000000000013---9223372036854775807</div><div class="line">2---0xb000000000000023---9223372036854775807</div></pre></td></tr></table></figure>
<p>çœ‹ä¸Šè¾¹æ•°æ®3ï¼Œ1ï¼Œ2ç›´æ¥å­˜åœ¨äº†æŒ‡é’ˆé‡Œï¼Œåªè¦æŒ‡é’ˆå­˜åœ¨ï¼Œé‚£ä¹ˆæ•°æ®å°±å­˜åœ¨ï¼Œæ²¡æœ‰isaæŒ‡é’ˆï¼Œä¸å—retainCountç®¡ç†ã€‚</p>
<h4 id="TaggedPointerä¸å¼•ç”¨è®¡æ•°"><a href="#TaggedPointerä¸å¼•ç”¨è®¡æ•°" class="headerlink" title="TaggedPointerä¸å¼•ç”¨è®¡æ•°"></a>TaggedPointerä¸å¼•ç”¨è®¡æ•°</h4><p><a href="http://www.infoq.com/cn/articles/deep-understanding-of-tagged-pointer" target="_blank" rel="external">TaggedPointeråŸç†</a></p>
<h4 id="NONPOINTER-ISAä¸å¼•ç”¨è®¡æ•°ã€‚"><a href="#NONPOINTER-ISAä¸å¼•ç”¨è®¡æ•°ã€‚" class="headerlink" title="NONPOINTER-ISAä¸å¼•ç”¨è®¡æ•°ã€‚"></a>NONPOINTER-ISAä¸å¼•ç”¨è®¡æ•°ã€‚</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">struct objc_object &#123;</div><div class="line">private:</div><div class="line">    isa_t isa;</div><div class="line"></div><div class="line">public:</div><div class="line">xxxx</div><div class="line">xxxx</div><div class="line">xxxx</div></pre></td></tr></table></figure>
<p>å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªisa_tç±»å‹çš„å¯¹è±¡ï¼Œisaæ˜¯ä¸€ä¸ªè”åˆä½“ï¼Œå…¶ä¸­åŒ…å«äº†è¿™æ ·çš„ä¸€ç»„å®šä¹‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"># if __arm64__</div><div class="line">#   define ISA_MASK        0x0000000ffffffff8ULL</div><div class="line">#   define ISA_MAGIC_MASK  0x000003f000000001ULL</div><div class="line">#   define ISA_MAGIC_VALUE 0x000001a000000001ULL</div><div class="line">    struct &#123;</div><div class="line">        uintptr_t nonpointer        : 1;</div><div class="line">        uintptr_t has_assoc         : 1;</div><div class="line">        uintptr_t has_cxx_dtor      : 1;</div><div class="line">        uintptr_t shiftcls          : 33; // MACH_VM_MAX_ADDRESS 0x1000000000</div><div class="line">        uintptr_t magic             : 6;</div><div class="line">        uintptr_t weakly_referenced : 1;</div><div class="line">        uintptr_t deallocating      : 1;</div><div class="line">        uintptr_t has_sidetable_rc  : 1;</div><div class="line">        uintptr_t extra_rc          : 19;</div><div class="line">#       define RC_ONE   (1ULL&lt;&lt;45)</div><div class="line">#       define RC_HALF  (1ULL&lt;&lt;18)</div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“ä½¿ç”¨Tagged Pointeræ—¶å€™ï¼Œä»æŒ‡é’ˆçš„ç¬¬45ä½å¼€å§‹ï¼Œä¸€å…±19ä½ï¼Œå­˜å‚¨çš„éƒ½æ˜¯å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¿¡æ¯ï¼Œæ ‡å¿—ä¸ºextra_rcã€‚å½“å­˜å‚¨ç©ºé—´ä¸å¤Ÿæ—¶ï¼Œè‹¹æœä¼šä½¿ç”¨å¯¹è±¡çš„sidetableæ¥å­˜å‚¨å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¿¡æ¯</p>
<h4 id="æ•£åˆ—è¡¨"><a href="#æ•£åˆ—è¡¨" class="headerlink" title="æ•£åˆ—è¡¨"></a>æ•£åˆ—è¡¨</h4><p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-02 2.33.00.png" alt=""></p>
<p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-022.33.20.png" alt=""></p>
<p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-022.36.06.png" alt=""></p>
<p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-022.37.15.png" alt=""></p>
<p>å¦‚ä½•å®ç°å¿«é€Ÿåˆ†æµï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°SideTableçš„ä½ç½®çš„ï¼Ÿ<br><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-022.39.06.png" alt=""><br><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-02.png2.39.59.png" alt=""></p>
<h4 id="æ•£åˆ—å¼æ•°æ®ç»“æ„"><a href="#æ•£åˆ—å¼æ•°æ®ç»“æ„" class="headerlink" title="æ•£åˆ—å¼æ•°æ®ç»“æ„"></a>æ•£åˆ—å¼æ•°æ®ç»“æ„</h4><h5 id="è‡ªæ—‹é”"><a href="#è‡ªæ—‹é”" class="headerlink" title="è‡ªæ—‹é”"></a>è‡ªæ—‹é”</h5><p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-023.21.23.png" alt=""></p>
<h5 id="RedcountMap-å¼•ç”¨è®¡æ•°"><a href="#RedcountMap-å¼•ç”¨è®¡æ•°" class="headerlink" title="RedcountMap(å¼•ç”¨è®¡æ•°)"></a>RedcountMap(å¼•ç”¨è®¡æ•°)</h5><p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-023.17.12.png" alt=""></p>
<h5 id="å¼±å¼•ç”¨è¡¨"><a href="#å¼±å¼•ç”¨è¡¨" class="headerlink" title="å¼±å¼•ç”¨è¡¨"></a>å¼±å¼•ç”¨è¡¨</h5><p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-023.19.10.png" alt=""></p>
<h3 id="MRCå’ŒARC"><a href="#MRCå’ŒARC" class="headerlink" title="MRCå’ŒARC"></a>MRCå’ŒARC</h3><p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-023.25.46.png" alt=""></p>
<p>ä¹‹æ‰€ä»¥è¯´ARCéœ€è¦ç”¨åˆ°runtimeæ¯”å¦‚weakå…³é”®å­—çš„å®ç°</p>
<p>ç¦æ­¢è°ƒç”¨åªæ˜¯ç¦æ­¢æ˜¾ç¤ºè°ƒç”¨ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥ç”¨kvcæ¥è¿›è¡Œè°ƒç”¨ã€‚</p>
<p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-023.28.20.png" alt=""></p>
<p>è¿™é‡Œéœ€è¦çœ‹ä¸€ä¸‹refcntStorageï¼Œä»ä¸‹è¡¨ä¸­å¯ä»¥æ¨æµ‹ï¼Œè¿™ä¸ªå˜é‡size_tç±»å‹å­˜å‚¨äº†å¾ˆå¤šä¿¡æ¯ï¼Œä¸å•å•æ˜¯retainCounté‚£ä¹ˆç®€å•ï¼Œ0ä½åŠ¿å¼±å¼•ç”¨ä¿¡æ¯ï¼Œæ˜¯å¦æœ‰å¼±å¼•ç”¨ï¼Œ1ä½å­˜å‚¨äº†æ˜¯å¦è¦è¢«deallocï¼Œ2ä½æ‰æ˜¯çœŸæ­£çš„å¼•ç”¨è®¡æ•°ï¼Œå†çœ‹ä¸€ä¸ªç»†èŠ‚ï¼ŒMSB-wardæ˜¯ä»€ä¹ˆæ„æ€ï¼ŸLSBæ˜¯æœ€ä½æœ‰æ•ˆä½ï¼Œé‚£ä¹ˆè¿™ä¸ªMSBå°±æ˜¯æœ€é«˜æœ‰æ•ˆä½äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#define SIDE_TABLE_WEAKLY_REFERENCED (1UL&lt;&lt;0)</div><div class="line">#define SIDE_TABLE_DEALLOCATING      (1UL&lt;&lt;1)  // MSB-ward of weak bit</div><div class="line">#define SIDE_TABLE_RC_ONE            (1UL&lt;&lt;2)  // MSB-ward of deallocating bit</div><div class="line">#define SIDE_TABLE_RC_PINNED         (1UL&lt;&lt;(WORD_BITS-1))</div></pre></td></tr></table></figure>
<p>è¿™é‡Œåˆè¡ç”Ÿäº†ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆè¦åœ¨è¿™è¾¹è®°å½•weakå’Œdeallocå‘¢ï¼Ÿ<br>ç­”æ¡ˆæ˜¯æä¾›çŠ¶æ€æŸ¥è¯¢ï¼ŒæŸ¥è¯¢ä¸€ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯æœ‰weakå¼•ç”¨ï¼Œæˆ–è€…æ­£åœ¨deallocingï¼Œæ³¨æ„ï¼Œè¿™é‡Œä¸æ˜¯å·²ç»deallocäº†ï¼Œè€Œæ˜¯æ­£åœ¨é”€æ¯ï¼Œè¿™æ˜¯ä¸€ä¸ªè¿‡ç¨‹ï¼Œä¸€æ—¦è¿›å…¥åˆ°äº†è¿™ä¸ªè¿‡ç¨‹å°±ä¼šé€šè¿‡è¿™ä¸ªå‡½æ•°å»æ ‡è®°ï¼Œå»å‘Šè¯‰åˆ«äººæˆ‘è¦é”€æ¯äº†ï¼Œä¸è¦ä½¿ç”¨æˆ‘äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">objc_object::sidetable_isDeallocating()</div><div class="line">&#123;</div><div class="line">    SideTable&amp; table = SideTables()[this];</div><div class="line"></div><div class="line">    // NO SPINLOCK HERE</div><div class="line">    // _objc_rootIsDeallocating() is called exclusively by _objc_storeWeak(), </div><div class="line">    // which already acquired the lock on our behalf.</div><div class="line"></div><div class="line"></div><div class="line">    // fixme can&apos;t do this efficiently with os_lock_handoff_s</div><div class="line">    // if (table.slock == 0) &#123;</div><div class="line">    //     _objc_fatal(&quot;Do not call -_isDeallocating.&quot;);</div><div class="line">    // &#125;</div><div class="line"></div><div class="line">    RefcountMap::iterator it = table.refcnts.find(this);</div><div class="line">    return (it != table.refcnts.end()) &amp;&amp; (it-&gt;second &amp; SIDE_TABLE_DEALLOCATING);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-023.29.37.png" alt=""></p>
<p>æ‰€ä»¥è¯´æ˜deallocæ˜¯åœ¨releaseæ–¹æ³•ä¸­è°ƒç”¨çš„ã€‚</p>
<p>Objective-Cçš„å¼•ç”¨è®¡æ•°ç®¡ç†ä½¿ç”¨ä¸¤ç§æ–¹å¼ç›¸ç»“åˆï¼Œsidetableå’ŒisaæŒ‡é’ˆï¼ˆæŒ‡é’ˆå¹¶ä¸æ˜¯å¯¹è±¡çš„çœŸæ­£å†…å­˜åœ°å€ï¼Œè€Œæ˜¯æŸäº›ä½ç”¨æ¥è¿›è¡Œäº†ä¸€äº›æ ‡å¿—ä½çš„å­˜æ”¾ï¼‰ï¼›æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ä»¥sidetableè¿›è¡Œreleaseæ¥è®¨è®ºdeallocçš„è°ƒç”¨ï¼Œç›´æ¥ä¸Šä»£ç ï¼Œå¦‚ä¸‹sidetable_releaseï¼ˆä¸‹æ–‡æ‰€æœ‰éƒ½ä¼šç”¨sidetable_releaseæ¥è®¨è®ºï¼‰å‡½æ•°ä¼šåœ¨ç»™å¯¹è±¡å‘é€releaseæ¶ˆæ¯çš„æ—¶å€™è°ƒç”¨ï¼Œsidetable_releaseæ–¹æ³•é¦–å…ˆè·å–å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œå¯¹å¼•ç”¨è®¡æ•°ç›¸å…³æ ‡å¿—ä½åšæ“ä½œï¼Œè‹¥å¯¹è±¡å®ä¾‹å¯ä»¥è¢«é‡Šæ”¾ï¼Œå°†é€šè¿‡objc_msgSendå‘é€SEL_deallocæ¶ˆæ¯ï¼Œæ—¢è°ƒç”¨å¯¹è±¡çš„deallocæ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">uintptr_t</div><div class="line">objc_object::sidetable_release(bool performDealloc)</div><div class="line">&#123;</div><div class="line">#if SUPPORT_NONPOINTER_ISA</div><div class="line">    assert(!isa.nonpointer);</div><div class="line">#endif</div><div class="line">    SideTable&amp; table = SideTables()[this];</div><div class="line"></div><div class="line">    bool do_dealloc = false;</div><div class="line"></div><div class="line">    table.lock();</div><div class="line">    RefcountMap::iterator it = table.refcnts.find(this);</div><div class="line">    if (it == table.refcnts.end()) &#123;//å¦‚æœæ²¡æœ‰è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ä¿¡æ¯ï¼Œé‚£ä¹ˆç›´æ¥èµ°deallocé€»è¾‘ï¼Œå°†è¿™ä¸ªå¯¹è±¡çš„deallocæ ‡è®°ç½®ä¸º1</div><div class="line">        do_dealloc = true;</div><div class="line">        table.refcnts[this] = SIDE_TABLE_DEALLOCATING;</div><div class="line">    &#125; else if (it-&gt;second &lt; SIDE_TABLE_DEALLOCATING) &#123;//å¦‚æœsize_tä¿¡æ¯åœ¨deallocä¿¡æ¯æœ‰æ•ˆä½ä»¥ä¸‹ï¼Œé‚£ä¹ˆä¹Ÿç›´æ¥èµ°deallocé€»è¾‘</div><div class="line">        // SIDE_TABLE_WEAKLY_REFERENCED may be set. Don&apos;t change it.</div><div class="line">        do_dealloc = true;</div><div class="line">        it-&gt;second |= SIDE_TABLE_DEALLOCATING;</div><div class="line">    &#125; else if (! (it-&gt;second &amp; SIDE_TABLE_RC_PINNED)) &#123;//å¦‚æœæ˜¯æœ‰æ•ˆçš„é‚£ä¹ˆç›´æ¥å°†è®¡æ•°å‡å°‘4ï¼Œå› ä¸ºretainCountä¼šå³ç§»åŠ¨4ä½ï¼Œæ‰€ä»¥ååº”åˆ°retainCountå°±ä¼šæ˜¯1</div><div class="line">        it-&gt;second -= SIDE_TABLE_RC_ONE;</div><div class="line">    &#125;</div><div class="line">    table.unlock();</div><div class="line">    if (do_dealloc  &amp;&amp;  performDealloc) &#123;//å¦‚æœè¦é”€æ¯é‚£ä¹ˆç›´æ¥æ‰§è¡Œdealloc</div><div class="line">        ((void(*)(objc_object *, SEL))objc_msgSend)(this, SEL_dealloc);</div><div class="line">    &#125;</div><div class="line">    return do_dealloc;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-023.30.57.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">TestView *test1 = [[TestView alloc] init];</div><div class="line">self.test = test1;</div><div class="line">NSLog(@&quot;%@&quot;,[[[TestView alloc] init] valueForKey:@&quot;retainCount&quot;]);</div><div class="line">NSLog(@&quot;%@&quot;,[test1 valueForKey:@&quot;retainCount&quot;]);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">2018-07-07 17:37:03.997243+0800 gpu[57393:720434] 1</div><div class="line">2018-07-07 17:45:56.191210+0800 gpu[57878:728352] -[TestView dealloc]</div><div class="line">2018-07-07 17:37:03.997573+0800 gpu[57393:720434] 2</div></pre></td></tr></table></figure>
<p>è¿™é‡Œè¦è¯´çš„æ˜¯è°ƒç”¨allocä»¥åï¼Œå¹¶æ²¡æœ‰å¯¹å…¶retainï¼Œä½†æ˜¯å½“è°ƒç”¨retainCountçš„æ—¶å€™ä¼šå˜æˆ1çš„ï¼Œå› ä¸ºæœ€å¼€å§‹å¹¶æ²¡æœ‰è¿™ä¸ªå¯¹è±¡å¯¹åº”çš„tableï¼Œæ‰€ä»¥ä¸ä¼šåšåˆ°ifé€»è¾‘é‡Œè¾¹å»ï¼Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">objc_object::sidetable_retainCount()</div><div class="line">&#123;</div><div class="line">    SideTable&amp; table = SideTables()[this];</div><div class="line"></div><div class="line">    size_t refcnt_result = 1;</div><div class="line">    </div><div class="line">    table.lock();</div><div class="line">    RefcountMap::iterator it = table.refcnts.find(this);</div><div class="line">    if (it != table.refcnts.end()) &#123;</div><div class="line">        // this is valid for SIDE_TABLE_RC_PINNED too</div><div class="line">        refcnt_result += it-&gt;second &gt;&gt; SIDE_TABLE_RC_SHIFT;</div><div class="line">    &#125;</div><div class="line">    table.unlock();</div><div class="line">    return refcnt_result;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="deallocçš„å®ç°"><a href="#deallocçš„å®ç°" class="headerlink" title="deallocçš„å®ç°"></a>deallocçš„å®ç°</h5><p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-023.39.10.png" alt=""></p>
<p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-023.40.04.png" alt=""></p>
<p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-023.41.21.png" alt=""></p>
<p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-023.42.38.png" alt=""></p>
<h4 id="å¼±å¼•ç”¨ç›¸å…³"><a href="#å¼±å¼•ç”¨ç›¸å…³" class="headerlink" title="å¼±å¼•ç”¨ç›¸å…³"></a>å¼±å¼•ç”¨ç›¸å…³</h4><p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-024.png" alt=""><br>æºç å…¥å£<code>NSObject.mm/objc_initWeak</code></p>
<p><a href="https://blog.csdn.net/axllll/article/details/52661374" target="_blank" rel="external">weakå®ç°æ¢ç©¶</a></p>
<p>è¿™é‡Œæœ‰ä¸ªé—®é¢˜éœ€è¦æ€è€ƒï¼Œæ—¢ç„¶å‰è¾¹æåˆ°table_tä¸­çš„refcntStorageå¯ä»¥å­˜å‚¨å¼±å¼•ç”¨ç›¸å…³çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜éœ€è¦ä¸€ä¸ªweak_tableå‘¢ï¼Œå¹¶ä¸”å¼±å¼•ç”¨å¹¶ä¸å¢åŠ è®¡æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å­˜å‚¨è¿™äº›ä¿¡æ¯åˆæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ</p>
<p>å…¶å®è¿™æ˜¯ä¸ºäº†å®ç°åè¾¹weakå…³é”®å­—ä¿®é¥°çš„æŒ‡é’ˆï¼Œåœ¨å¯¹è±¡è¢«é‡Šæ”¾åæŒ‡é’ˆå˜ä¸ºnilçš„åŠŸèƒ½ï¼Œæ—¢ç„¶è¦å°†è¿™ä¸ªæŒ‡é’ˆè®¾ç½®ä¸ºnilï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦è®°å½•è¿™äº›æŒ‡å‘è¿™ä¸ªå¯¹è±¡çš„è¿™äº›weakæŒ‡é’ˆï¼Œå¯¹æ¯”çœ‹strongä¿®é¥°çš„æŒ‡é’ˆå°±ä¸éœ€è¦è®°å½•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">struct SideTable &#123;</div><div class="line">    spinlock_t slock;</div><div class="line">    RefcountMap refcnts;</div><div class="line">    weak_table_t weak_table;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p><code>weak_table_t</code>ä¸­æœ‰ä¸€ä¸ªweak_entriesè¿™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¿™é‡Œå­˜å‚¨çš„æ˜¯weak_entry_tç±»å‹çš„ç»“æ„ä½“ã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">struct weak_table_t &#123;</div><div class="line">    weak_entry_t *weak_entries;</div><div class="line">    size_t    num_entries;</div><div class="line">    uintptr_t mask;</div><div class="line">    uintptr_t max_hash_displacement;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<blockquote>
<p><code>weak_entry_t</code>ä¸­å‘¢å­˜å‚¨çš„æ˜¯ä¸€ä¸ªreferrersï¼Œè¿™ä¸ªåˆæ˜¯ä¸€ä¸ªweak_referrer_tçš„æ•°ç»„ï¼Œè¿™é‡Œè¾¹çš„æˆå‘˜æ˜¯weak_referrer_tï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®ƒçš„å®è´¨ç±»å‹æ˜¯ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€å­˜å‚¨çš„æ˜¯weakæŒ‡é’ˆçš„åœ°å€ï¼Œçœ‹æ¸…æ¥šè¿™ä¸æ˜¯å¯¹è±¡çš„åœ°å€ï¼Œæ˜¯æŒ‡é’ˆçš„åœ°å€ï¼Œä¸ºäº†æ–¹ä¾¿åè¾¹å°†è¿™ä¸ªæŒ‡é’ˆè®¾ç½®ä¸ºnil</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">struct weak_entry_t &#123;</div><div class="line">    DisguisedPtr&lt;objc_object&gt; referent;</div><div class="line">    union &#123;</div><div class="line">        struct &#123;</div><div class="line">            weak_referrer_t *referrers;</div><div class="line">            uintptr_t        out_of_line : 1;</div><div class="line">            uintptr_t        num_refs : PTR_MINUS_1;</div><div class="line">            uintptr_t        mask;</div><div class="line">            uintptr_t        max_hash_displacement;</div><div class="line">        &#125;;</div><div class="line">        struct &#123;</div><div class="line">            // out_of_line=0 is LSB of one of these (don&apos;t care which)</div><div class="line">            weak_referrer_t  inline_referrers[WEAK_INLINE_COUNT];</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/// The address of a __weak object reference</div><div class="line">typedef objc_object ** weak_referrer_t;</div></pre></td></tr></table></figure>
<h5 id="weak-clear-no-lockçš„å®ç°"><a href="#weak-clear-no-lockçš„å®ç°" class="headerlink" title="weak_clear_no_lockçš„å®ç°"></a><code>weak_clear_no_lock</code>çš„å®ç°</h5><p>è¿™ä¸ªå®ç°ä¹Ÿå°è¯äº†æˆ‘ä»¬ä¹‹å‰çš„åˆ¤æ–­ï¼Œè¿™é‡Œå°±æ˜¯é€šè¿‡ä¸€ä¸ªå¯¹è±¡çš„åœ°å€<code>referent_id</code>æ¥å¯»æ‰¾è¿™ä¸ªå¯¹è±¡å­˜å‚¨äºå“ªä¸ª<code>weak_table_t</code>æ‰¾åˆ°ä¹‹åä»ä¸­æ‰¾åˆ°è¿™ä¸ªå¯¹è±¡çš„å­˜å‚¨å®ä½“ï¼Œweak_entry_tï¼Œè¿™é‡Œå­˜å‚¨çš„å°±æ˜¯è¿™ä¸ªå¯¹è±¡çš„weakæŒ‡é’ˆäº†ï¼Œåè¾¹æˆ‘ä»¬çœ‹åˆ°å¾ªç¯éå†*referrer = nil;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">weak_clear_no_lock(weak_table_t *weak_table, id referent_id) </div><div class="line">&#123;</div><div class="line">    objc_object *referent = (objc_object *)referent_id;</div><div class="line"></div><div class="line">    weak_entry_t *entry = weak_entry_for_referent(weak_table, referent);</div><div class="line">    if (entry == nil) &#123;</div><div class="line">        /// XXX shouldn&apos;t happen, but does with mismatched CF/objc</div><div class="line">        //printf(&quot;XXX no entry for clear deallocating %p\n&quot;, referent);</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // zero out references</div><div class="line">    weak_referrer_t *referrers;</div><div class="line">    size_t count;</div><div class="line">    </div><div class="line">    if (entry-&gt;out_of_line) &#123;</div><div class="line">        referrers = entry-&gt;referrers;</div><div class="line">        count = TABLE_SIZE(entry);</div><div class="line">    &#125; </div><div class="line">    else &#123;</div><div class="line">        referrers = entry-&gt;inline_referrers;</div><div class="line">        count = WEAK_INLINE_COUNT;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    for (size_t i = 0; i &lt; count; ++i) &#123;</div><div class="line">        objc_object **referrer = referrers[i];</div><div class="line">        if (referrer) &#123;</div><div class="line">            if (*referrer == referent) &#123;</div><div class="line">                *referrer = nil;</div><div class="line">            &#125;</div><div class="line">            else if (*referrer) &#123;</div><div class="line">                _objc_inform(&quot;__weak variable at %p holds %p instead of %p. &quot;</div><div class="line">                             &quot;This is probably incorrect use of &quot;</div><div class="line">                             &quot;objc_storeWeak() and objc_loadWeak(). &quot;</div><div class="line">                             &quot;Break on objc_weak_error to debug.\n&quot;, </div><div class="line">                             referrer, (void*)*referrer, (void*)referent);</div><div class="line">                objc_weak_error();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    weak_entry_remove(weak_table, entry);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è‡ªåŠ¨é‡Šæ”¾æ± "><a href="#è‡ªåŠ¨é‡Šæ”¾æ± " class="headerlink" title="è‡ªåŠ¨é‡Šæ”¾æ± "></a>è‡ªåŠ¨é‡Šæ”¾æ± </h3><p>AutoreleasePool åŸç†ï¼Ÿ<br>ä¸ºä½•å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Ÿ</p>
<p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-024.42.22.png" alt=""></p>
<h4 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h4><p><code>objc_autoreleasePoolPush</code>è°ƒç”¨<code>AutoreleasePoolPage::push</code>ï¼Œä¸€æ¬¡popç›¸å½“äºæ‰¹é‡çš„pop</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">class AutoreleasePoolPage </div><div class="line">&#123;</div><div class="line">	id *next; //æŒ‡å‘ä¸‹ä¸€ä¸ªå¯æ·»åŠ èŠ‚ç‚¹</div><div class="line">	pthread_t const thread;</div><div class="line">	AutoreleasePoolPage * const parent;</div><div class="line">	AutoreleasePoolPage *child;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-024.44.52.png" alt=""></p>
<p>æ ˆç»“æ„å¤ä¹ </p>
<p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-024.46.29.png" alt=""></p>
<p>åŒå‘é“¾è¡¨ç»“æ„å¤ä¹ </p>
<p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-024.46.16.png" alt=""></p>
<p>Pushçš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆ<br><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-024.53.19.png" alt=""><br>åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨é‡Šæ”¾æ± å°±ä¼šåˆ›å»ºä¸€ä¸ªå“¨å…µï¼Œç„¶åè¿”å›è¿™ä¸ªå“¨å…µçš„ä½ç½®ï¼Œç„¶ånextå‘ä¸Šç§»åŠ¨ï¼Œç„¶ååœ¨æ± å­ä¸­é—´åˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šè¢«è‡ªåŠ¨æ·»åŠ åˆ°è¿™ä¸ªæ± å­ä¸­ï¼Œnextä¸æ–­ç§»åŠ¨ï¼Œå½“æ‰§è¡Œpopçš„æ—¶å€™ï¼Œä¸­é—´çš„å†…å®¹éƒ½ä¼šæ¥æ”¶åˆ°releaseæ¶ˆæ¯è¢«é‡Šæ”¾ï¼ŒnextæŒ‡é’ˆä¼šç§»åŠ¨åˆ°å“¨å…µçš„ä½ç½®ã€‚</p>
<p><code>[obj autorelease]çš„è°ƒç”¨é€»è¾‘</code></p>
<p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-024.53.40.png" alt=""><br>è¿™é‡Œä¸€ä¸ªé€»è¾‘æœ‰ä¸€ç‚¹è¦æ³¨æ„å°±æ˜¯å¦‚æœè¿™ä¸ªæ ˆå·²ç»æ»¡äº†ï¼Œå†æ·»åŠ èŠ‚ç‚¹åœ¨é“¾è¡¨ä¸Šï¼Œç„¶åå¢åŠ æ ˆèŠ‚ç‚¹ã€‚</p>
<h3 id="å¾ªç¯å¼•ç”¨"><a href="#å¾ªç¯å¼•ç”¨" class="headerlink" title="å¾ªç¯å¼•ç”¨"></a>å¾ªç¯å¼•ç”¨</h3><ul>
<li>è‡ªå¾ªç¯å¼•ç”¨</li>
<li>ç›¸äº’å¾ªç¯å¼•ç”¨</li>
<li>å¤šå¾ªç¯å¼•ç”¨</li>
</ul>
<p>å¸¸è€ƒ<br>&gt;</p>
<blockquote>
<ul>
<li>ä»£ç†</li>
<li>Block</li>
<li>NSTimer</li>
<li>å¤§ç¯</li>
</ul>
</blockquote>
<p>è§£å†³æ€è·¯:</p>
<ul>
<li>é¿å…äº§ç”Ÿ</li>
<li>åœ¨ä½•æ—¶æ—¶æœºæ‰‹åŠ¨æ–­ç¯</li>
</ul>
<p>å…·ä½“çš„æ–¹æ¡ˆ:</p>
<ul>
<li>__weakï¼Œä¸å¢åŠ è®¡æ•°</li>
<li>__block</li>
<li>__unsafe_unretainedï¼Œä¸ä¼šå¢åŠ è®¡æ•°ï¼Œä½†æ˜¯ä¼šäº§ç”Ÿæ‚¬å‚æŒ‡é’ˆ</li>
</ul>
<h5 id="blockæ³¨æ„"><a href="#blockæ³¨æ„" class="headerlink" title="__blockæ³¨æ„"></a>__blockæ³¨æ„</h5><ul>
<li>MRCä¸‹ï¼Œ__blockä¿®é¥°å¯¹è±¡ä¸ä¼šå¢åŠ å¼•ç”¨è®¡æ•°</li>
<li>ARCä¸‹ï¼Œ__blockä¿®é¥°çš„å¯¹è±¡ä¼šè¢«å¼ºå¼•ç”¨ï¼Œæ— æ³•é¿å…å¾ªç¯å¼•ç”¨ï¼Œéœ€è¦æ‰‹åŠ¨ç ´è§£ç¯</li>
</ul>
<h4 id="NSTimerçš„å¾ªç¯å¼•ç”¨"><a href="#NSTimerçš„å¾ªç¯å¼•ç”¨" class="headerlink" title="NSTimerçš„å¾ªç¯å¼•ç”¨"></a>NSTimerçš„å¾ªç¯å¼•ç”¨</h4><p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-025.29.27.png" alt=""></p>
<p>å³ä½¿å¯¹è±¡ä¸å¼•ç”¨Timerï¼Œä¹Ÿæ²¡ç”¨ï¼Œå› ä¸ºRunloopä¼šå¼•ç”¨Timerï¼ŒTimerçš„tagetæ˜¯å¯¹è±¡ï¼Œä¾ç„¶ä¼šå¢åŠ å¯¹å…¶çš„å¼•ç”¨ï¼Œå½“ç„¶å¦‚æœtimeråªæ‰§è¡Œä¸€æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥æ–­æ‰runloopçš„å¼•ç”¨ï¼Œä½†æ˜¯å¦‚æœæ˜¯å¤šæ¬¡çš„timerå’‹åŠå‘¢ï¼Ÿ</p>
<p>è§£å†³æ–¹æ¡ˆï¼š<br>å¢åŠ ä¸­é—´å¯¹è±¡</p>
<p><img src="/30/2015/iOSä¸­çš„å†…å­˜ç®¡ç†/../../../images/2018-07-025.33.14.png" alt=""></p>
<h3 id="åœ¨å†…å­˜ç®¡ç†ä¸Šèƒ½å¤Ÿä¼˜åŒ–çš„ç‚¹"><a href="#åœ¨å†…å­˜ç®¡ç†ä¸Šèƒ½å¤Ÿä¼˜åŒ–çš„ç‚¹" class="headerlink" title="åœ¨å†…å­˜ç®¡ç†ä¸Šèƒ½å¤Ÿä¼˜åŒ–çš„ç‚¹"></a>åœ¨å†…å­˜ç®¡ç†ä¸Šèƒ½å¤Ÿä¼˜åŒ–çš„ç‚¹</h3><h4 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h4><p>   1.ç”¨ARCå»ç®¡ç†å†…å­˜ï¼ˆUse ARC to Manage Memoryï¼‰</p>
<p>   2.é€‚å½“çš„åœ°æ–¹ä½¿ç”¨reuseIdentifierï¼ˆUse a reuseIdentifier Where Appropriateï¼‰</p>
<p>   3.å°½å¯èƒ½è®¾ç½®è§†å›¾ä¸ºä¸é€æ˜ï¼ˆSet View as Opaque When Possibleï¼‰</p>
<p>   4.é¿å…è‡ƒè‚¿çš„XIBsæ–‡ä»¶ï¼ˆAvoid Fat XiBsï¼‰</p>
<p>   5.ä¸è¦é˜»å¡ä¸»è¿›ç¨‹ï¼ˆDonâ€™t Block the Main Threadï¼‰</p>
<p>   6.è°ƒæ•´å›¾åƒè§†å›¾ä¸­çš„å›¾åƒå°ºå¯¸ï¼ˆSize Images to Image Viewsï¼‰</p>
<p>   7.é€‰æ‹©æ­£ç¡®é›†åˆï¼ˆChoose the Correct Collectionï¼‰</p>
<p>   8.å¯ç”¨Gzipå‹ç¼©ï¼ˆEnable GZIP Compressionï¼‰</p>
<h4 id="ä¸­çº§"><a href="#ä¸­çº§" class="headerlink" title="ä¸­çº§"></a>ä¸­çº§</h4><p>   9.é‡ç”¨å’Œå»¶è¿ŸåŠ è½½è§†å›¾ï¼ˆReuse and Lazy Load Viewsï¼‰</p>
<p>   10.ç¼“å­˜ï¼Œç¼“å­˜ï¼Œç¼“å­˜ï¼ˆCache,Cache,Cacheï¼‰</p>
<p>   11.è€ƒè™‘ç»˜å›¾ï¼ˆConsider Drawingï¼‰</p>
<p>   12.å¤„ç†å†…å­˜è­¦å‘Šï¼ˆHandle Memory Warningsï¼‰</p>
<p>   13.é‡ç”¨å¤§å¼€é”€å¯¹è±¡ï¼ˆReuse Expensive Objectsï¼‰</p>
<p>   14.ä½¿ç”¨ç²¾çµè¡¨ï¼ˆUse Sprite Sheets ï¼‰</p>
<p>   15.é¿å…é‡å¤å¤„ç†æ•°æ®ï¼ˆAvoid Re-Processing Dataï¼‰</p>
<p>   16.é€‰æ‹©æ­£ç¡®çš„æ•°æ®æ ¼å¼ï¼ˆChoose the Right Data Formatï¼‰</p>
<p>   17.é€‚å½“çš„è®¾ç½®èƒŒæ™¯å›¾ç‰‡ï¼ˆSet  Background Images Appropriatelyï¼‰</p>
<p>   18.å‡å°‘ä½ çš„ç½‘ç»œå ç”¨ï¼ˆReduce Your Web Footprintï¼‰  </p>
<p>   19.è®¾ç½®é˜´å½±è·¯å¾„ï¼ˆSet the Shadow Path ï¼‰</p>
<p>   20.ä½ çš„è¡¨æ ¼è§†å›¾Optimize Your Table Viewsï¼‰</p>
<p>   21.é€‰æ‹©æ­£ç¡®çš„æ•°æ®å­˜å‚¨æ–¹å¼ï¼ˆChoose Correct Data Storage Optionï¼‰</p>
<h4 id="é«˜çº§"><a href="#é«˜çº§" class="headerlink" title="é«˜çº§"></a>é«˜çº§</h4><p>   22.åŠ é€Ÿå¯åŠ¨æ—¶é—´ï¼ˆSpeed up Launch Time ï¼‰</p>
<p>   23.ä½¿ç”¨è‡ªåŠ¨é‡Šæ”¾æ± ï¼ˆUse AutoRelease Poolï¼‰</p>
<p>   24.ç¼“å­˜å›¾åƒï¼ˆCache Images-Or not ï¼‰</p>
<p>   25.å°½å¯èƒ½é¿å…æ—¥æœŸæ ¼å¼åŒ–å™¨ï¼ˆAvoid Date Formatters Where Possibleï¼‰</p>
<h3 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h3><h4 id="å›¾ç‰‡æ®‹ç•™"><a href="#å›¾ç‰‡æ®‹ç•™" class="headerlink" title="å›¾ç‰‡æ®‹ç•™"></a>å›¾ç‰‡æ®‹ç•™</h4><p>instrumentè°ƒè¯•åï¼Œå‘ç°æ²¡è¢«é‡Šæ”¾çš„å…¨æ˜¯imageIOï¼Œå·®ä¸å¤šå°±çŸ¥é“äº†ï¼ŒæŠŠè¯»å›¾çš„æ–¹å¼ï¼Œä»[UIImage imageNamed:@â€â€],æ”¹æˆimageWithContentsOfFileï¼Œå°±å¯ä»¥äº†ã€‚<br>2.png</p>
<p>é—®é¢˜åŸå› ï¼š</p>
<ul>
<li>imageNamedè¯»å–å›¾ç‰‡çš„æ–¹æ³•ï¼Œä¼šç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥è¾ƒå¤§çš„å›¾ç‰‡ï¼Œè¿˜æ˜¯ç”¨imageWithContentsOfFileï¼Œæ¯”å¦‚è¯´å¼•å¯¼é¡µèƒŒæ™¯(å›¾ç‰‡å…¨å±, æœ‰æ—¶å€™è¿è¡ŒAPPä¼šæ˜¾ç¤º, æœ‰æ—¶å€™æ ¹æœ¬å°±ç”¨ä¸åˆ°).</li>
<li>TIPs1ï¼š.xcassetsé‡Œçš„å›¾ç‰‡æ— æ³•ç”¨imageWithContentsOfFileè¯»å–ï¼›</li>
<li>TIPs2ï¼šimageWithContentsOfFileè¯»å–å›¾ç‰‡éœ€è¦åŠ æ–‡ä»¶åç¼€åå¦‚pngï¼Œjpgç­‰ï¼›</li>
</ul>
<h4 id="æ‡’åŠ è½½"><a href="#æ‡’åŠ è½½" class="headerlink" title="æ‡’åŠ è½½"></a>æ‡’åŠ è½½</h4><p>æ›´å¤šçš„viewæ„å‘³ç€æ›´å¤šçš„æ¸²æŸ“ï¼Œä¹Ÿå°±æ˜¯æ›´å¤šçš„CPUå’Œå†…å­˜æ¶ˆè€—ï¼Œå¯¹äºé‚£ç§åµŒå¥—äº†å¾ˆå¤šviewåœ¨UIScrollViewé‡Œè¾¹çš„appæ›´æ˜¯å¦‚æ­¤ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°çš„æŠ€å·§å°±æ˜¯æ¨¡ä»¿<code>UITableView</code>å’Œ<code>UICollectionView</code>çš„æ“ä½œ:ä¸è¦ä¸€æ¬¡åˆ›å»ºæ‰€æœ‰çš„subviewï¼Œè€Œæ˜¯å½“éœ€è¦æ—¶æ‰åˆ›å»ºï¼Œå½“å®ƒä»¬å®Œæˆäº†ä½¿å‘½ï¼ŒæŠŠä»–ä»¬æ”¾è¿›ä¸€ä¸ªå¯é‡ç”¨çš„é˜Ÿåˆ—ä¸­ã€‚</p>
<p>è¿™æ ·çš„è¯ä½ å°±åªéœ€è¦åœ¨æ»šåŠ¨å‘ç”Ÿæ—¶åˆ›å»ºä½ çš„viewsï¼Œé¿å…äº†ä¸åˆ’ç®—çš„å†…å­˜åˆ†é…ã€‚</p>
<p>åˆ›å»ºviewsçš„èƒ½æ•ˆé—®é¢˜ä¹Ÿé€‚ç”¨äºä½ appçš„å…¶å®ƒæ–¹é¢ã€‚æƒ³è±¡ä¸€ä¸‹ä¸€ä¸ªç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®çš„æ—¶å€™éœ€è¦å‘ˆç°ä¸€ä¸ªviewçš„åœºæ™¯ã€‚æœ‰ä¸¤ç§å®ç°æ–¹æ³•ï¼š</p>
<ol>
<li><p>åˆ›å»ºå¹¶éšè—è¿™ä¸ªviewå½“è¿™ä¸ªscreenåŠ è½½çš„æ—¶å€™ï¼Œå½“éœ€è¦æ—¶æ˜¾ç¤ºå®ƒï¼›</p>
</li>
<li><p>å½“éœ€è¦æ—¶æ‰åˆ›å»ºå¹¶å±•ç¤ºã€‚</p>
</li>
</ol>
<p>æ¯ä¸ªæ–¹æ¡ˆéƒ½æœ‰å…¶ä¼˜ç¼ºç‚¹ã€‚ç”¨ç¬¬ä¸€ç§æ–¹æ¡ˆçš„è¯å› ä¸ºä½ éœ€è¦ä¸€å¼€å§‹å°±åˆ›å»ºä¸€ä¸ªviewå¹¶ä¿æŒå®ƒç›´åˆ°ä¸å†ä½¿ç”¨ï¼Œè¿™å°±ä¼šæ›´åŠ æ¶ˆè€—å†…å­˜ã€‚ç„¶è€Œè¿™ä¹Ÿä¼šä½¿ä½ çš„appæ“ä½œæ›´æ•æ„Ÿå› ä¸ºå½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™å®ƒåªéœ€è¦æ”¹å˜ä¸€ä¸‹è¿™ä¸ªviewçš„å¯è§æ€§ã€‚</p>
<p>ç¬¬äºŒç§æ–¹æ¡ˆåˆ™ç›¸å-æ¶ˆè€—æ›´å°‘å†…å­˜ï¼Œä½†æ˜¯ä¼šåœ¨ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™æ¯”ç¬¬ä¸€ç§ç¨æ˜¾å¡é¡¿ã€‚</p>
<h3 id="æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡"><a href="#æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡" class="headerlink" title="æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡"></a>æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡</h3><p>å¯¹NSObjectçš„å®ä¾‹è¿›è¡Œæ¯”è¾ƒï¼Œæœ‰2ç§ä¸åŒçš„æ–¹å¼ï¼š</p>
<ol>
<li>è¿ç®—ç¬¦ ==ã€‚</li>
<li>æ–¹æ³• <code>- (BOOL)isEqual:(id)anotherInstance</code></li>
</ol>
<p>å®ƒä»¬çš„åŒºåˆ«åœ¨äºï¼š<br>æ–¹å¼ä¸€ï¼Œæ˜¯ä¾æ®å®ä¾‹çš„å†…å­˜åœ°å€æ¥è¿›è¡Œæ¯”è¾ƒçš„ã€‚å¦‚æœå®ä¾‹çš„å†…å­˜åœ°å€ç›¸ç­‰ï¼Œè¯´æ˜å®ä¾‹ä»¬æ˜¯æŒ‡å‘åŒä¸€ç‰‡å†…å­˜åŒºé—´ï¼Œåˆ™è‚¯å®šæ˜¯ç›¸åŒçš„ã€‚<br>æ–¹å¼äºŒï¼Œåˆ™æ¯”è¾ƒçš„æ˜¯å®ä¾‹çš„å¯è¯»å±æ€§<code>hash</code>ã€‚å¦‚æœä¸¤å®ä¾‹çš„<code>hash</code>å±æ€§å€¼ç›¸ç­‰ï¼Œåˆ™è®¤ä¸ºè¿™ä¸¤ä¸ªå®ä¾‹æ˜¯ç›¸ç­‰çš„ï¼Œ<code>- (BOOL)isEqual:</code>è¿”å›çœŸã€‚  </p>
<h3 id="autoreleasepoolä½¿ç”¨åœºæ™¯"><a href="#autoreleasepoolä½¿ç”¨åœºæ™¯" class="headerlink" title="autoreleasepoolä½¿ç”¨åœºæ™¯"></a>autoreleasepoolä½¿ç”¨åœºæ™¯</h3><p>æˆ‘ä»¬è¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åå–å…¶ä¸­æŸäº›å†…å®¹ï¼Œå¹¶ä¸”å¾ªç¯æ¥åšï¼Œå°±ä¼šå¯¼è‡´æ–‡ä»¶æ•°æ®åœ¨å†…å­˜ä¸­å †ç§¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">NSArray *urls = &lt;# An array of file URLs #&gt;;</div><div class="line"></div><div class="line">for(NSURL *url in urls) &#123;</div><div class="line"></div><div class="line">@autoreleasepool &#123;</div><div class="line"></div><div class="line">NSError *error;</div><div class="line"></div><div class="line">NSString *fileContents = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:&amp;error];</div><div class="line"></div><div class="line">/* Process the string, creating and autoreleasing more objects. */</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å†…å­˜ä¼˜åŒ–å¤§çš„æ€è·¯"><a href="#å†…å­˜ä¼˜åŒ–å¤§çš„æ€è·¯" class="headerlink" title="å†…å­˜ä¼˜åŒ–å¤§çš„æ€è·¯"></a>å†…å­˜ä¼˜åŒ–å¤§çš„æ€è·¯</h3><p>æ­£ç¡®çš„</p>
<ul>
<li>åˆ›å»ºï¼Œæ‡’åŠ è½½</li>
<li>é”€æ¯ï¼Œautoreleasepool</li>
<li>ç¼“å­˜ï¼Œé«˜é¢‘ç‡ï¼Œå°å›¾ï¼Œé«˜åº¦ç­‰ï¼Œå…¶ä»–ä¸è¯¥ç¼“å­˜çš„ä¸ç¼“å­˜æ¯”å¦‚å¤§å›¾</li>
<li>å¤ç”¨ï¼Œå¤§å¯¹è±¡</li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSä¸­çš„è§†å›¾æ¸²æŸ“æµç¨‹ iOS Rendering Process]]></title>
      <url>/2015/06/26/2015/iOS%E4%B8%AD%E7%9A%84%E8%A7%86%E5%9B%BE%E6%B8%B2%E6%9F%93/</url>
      <content type="html"><![CDATA[<p>ä»è½¯ä»¶å±‚é¢ä¸Šï¼ŒiOSå€ŸåŠ©<code>Core Graohics</code>ï¼Œ<code>Core Animation</code>ï¼Œ<code>Core Image</code>å®Œæˆå›¾å½¢çš„å¤„ç†ï¼Œå®ƒä»¬åˆéƒ½æ˜¯å€ŸåŠ©OpenGL ESæ¥å®Œæˆåº•å±‚çš„å·¥ä½œï¼Œå¦‚ä¸‹å›¾</p>
<p><img src="/26/2015/iOSä¸­çš„è§†å›¾æ¸²æŸ“/../../../images/arch01.png" alt="Text"></p>
<p><img src="/26/2015/iOSä¸­çš„è§†å›¾æ¸²æŸ“/../../../images/QcQlN7B.png" alt="Text"></p>
<p><img src="/26/2015/iOSä¸­çš„è§†å›¾æ¸²æŸ“/../../../images/offscreen06.png" alt="Text"></p>
<p><img src="/26/2015/iOSä¸­çš„è§†å›¾æ¸²æŸ“/../../../images/arch03.png" alt="Text"></p>
<p>è®¡ç®—æœºç³»ç»Ÿä¸­ CPUã€GPUã€æ˜¾ç¤ºå™¨æ˜¯ä»¥ä¸Šé¢è¿™ç§æ–¹å¼ååŒå·¥ä½œçš„ã€‚CPU è®¡ç®—å¥½æ˜¾ç¤ºå†…å®¹æäº¤åˆ° GPUï¼ŒGPU æ¸²æŸ“å®Œæˆåå°†æ¸²æŸ“ç»“æœæ”¾å…¥å¸§ç¼“å†²åŒºï¼Œéšåè§†é¢‘æ§åˆ¶å™¨ä¼šæŒ‰ç…§ VSync ä¿¡å·é€è¡Œè¯»å–å¸§ç¼“å†²åŒºçš„æ•°æ®ï¼Œç»è¿‡å¯èƒ½çš„æ•°æ¨¡è½¬æ¢ä¼ é€’ç»™æ˜¾ç¤ºå™¨æ˜¾ç¤ºã€‚</p>
<p>åœ¨æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œå¸§ç¼“å†²åŒºåªæœ‰ä¸€ä¸ªï¼Œè¿™æ—¶å¸§ç¼“å†²åŒºçš„è¯»å–å’Œåˆ·æ–°éƒ½éƒ½ä¼šæœ‰æ¯”è¾ƒå¤§çš„æ•ˆç‡é—®é¢˜ã€‚ä¸ºäº†è§£å†³æ•ˆç‡é—®é¢˜ï¼Œæ˜¾ç¤ºç³»ç»Ÿé€šå¸¸ä¼šå¼•å…¥ä¸¤ä¸ªç¼“å†²åŒºï¼Œå³åŒç¼“å†²æœºåˆ¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒGPU ä¼šé¢„å…ˆæ¸²æŸ“å¥½ä¸€å¸§æ”¾å…¥ä¸€ä¸ªç¼“å†²åŒºå†…ï¼Œè®©è§†é¢‘æ§åˆ¶å™¨è¯»å–ï¼Œå½“ä¸‹ä¸€å¸§æ¸²æŸ“å¥½åï¼ŒGPU ä¼šç›´æ¥æŠŠè§†é¢‘æ§åˆ¶å™¨çš„æŒ‡é’ˆæŒ‡å‘ç¬¬äºŒä¸ªç¼“å†²å™¨ã€‚å¦‚æ­¤ä¸€æ¥æ•ˆç‡ä¼šæœ‰å¾ˆå¤§çš„æå‡ã€‚</p>
<p>åœ¨ iOSä¸Šï¼ŒåŠ¨ç”»å’Œè§†å›¾çš„æ¸²æŸ“å…¶å®æ˜¯åœ¨å¦å¤–ä¸€ä¸ªè¿›ç¨‹åšçš„ï¼ˆä¸‹é¢æˆ‘ä»¬å«è¿™ä¸ªè¿›ç¨‹ render serverï¼‰ï¼Œåœ¨ iOS 5 ä»¥å‰è¿™ä¸ªè¿›ç¨‹å« SpringBoardï¼Œåœ¨ iOS 6 ä¹‹åå« BackBoardã€‚</p>
<blockquote>
<p>å¯¹Core Animationçš„ç†è§£ï¼Œä¸èƒ½è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªåŠ¨ç”»æ¡†æ¶ï¼Œå…¶å®ä¹‹å‰å®ƒå«åšLayer Kit</p>
</blockquote>
<p>CoreAnimationçš„æ¸²æŸ“æµç¨‹å¯ä»¥ç”¨ä¸‹å›¾æ¥æ¦‚æ‹¬:</p>
<p><img src="/26/2015/iOSä¸­çš„è§†å›¾æ¸²æŸ“/../../../images/offscreen07.png" alt="Text"></p>
<h3 id="è§†å›¾æˆ–è€…åŠ¨ç”»æ¸²æŸ“çš„å‡ ä¸ªé˜¶æ®µ"><a href="#è§†å›¾æˆ–è€…åŠ¨ç”»æ¸²æŸ“çš„å‡ ä¸ªé˜¶æ®µ" class="headerlink" title="è§†å›¾æˆ–è€…åŠ¨ç”»æ¸²æŸ“çš„å‡ ä¸ªé˜¶æ®µ"></a>è§†å›¾æˆ–è€…åŠ¨ç”»æ¸²æŸ“çš„å‡ ä¸ªé˜¶æ®µ</h3><h4 id="åœ¨-APP-å†…éƒ¨çš„æœ‰4ä¸ªé˜¶æ®µ"><a href="#åœ¨-APP-å†…éƒ¨çš„æœ‰4ä¸ªé˜¶æ®µ" class="headerlink" title="åœ¨ APP å†…éƒ¨çš„æœ‰4ä¸ªé˜¶æ®µ"></a>åœ¨ APP å†…éƒ¨çš„æœ‰4ä¸ªé˜¶æ®µ</h4><ul>
<li><p>å¸ƒå±€ï¼šåœ¨è¿™ä¸ªé˜¶æ®µï¼Œç¨‹åºè®¾ç½® View/Layer çš„å±‚çº§ä¿¡æ¯ï¼Œè®¾ç½® layer çš„å±æ€§ï¼Œå¦‚ frameï¼Œbackground color ç­‰ç­‰ã€‚</p>
</li>
<li><p>åˆ›å»º backing imageï¼šåœ¨è¿™ä¸ªé˜¶æ®µç¨‹åºä¼šåˆ›å»º layer çš„ backing imageï¼Œæ— è®ºæ˜¯é€šè¿‡ setContents å°†ä¸€ä¸ª image ä¼ çµ¦ layerï¼Œè¿˜æ˜¯é€šè¿‡ drawRectï¼šæˆ– drawLayer:inContextï¼šæ¥ç”»å‡ºæ¥çš„ã€‚æ‰€ä»¥ drawRectï¼šç­‰å‡½æ•°æ˜¯åœ¨è¿™ä¸ªé˜¶æ®µè¢«è°ƒç”¨çš„ã€‚æ³¨æ„æœ€ç»ˆæ˜¾ç¤ºçš„å›¾åƒ</p>
</li>
<li><p>å‡†å¤‡ï¼šåœ¨è¿™ä¸ªé˜¶æ®µï¼ŒCore Animation æ¡†æ¶å‡†å¤‡è¦æ¸²æŸ“çš„ layer çš„å„ç§å±æ€§æ•°æ®ï¼Œä»¥åŠè¦åšçš„åŠ¨ç”»çš„å‚æ•°ï¼Œå‡†å¤‡ä¼ é€’çµ¦ render serverã€‚åŒæ—¶åœ¨è¿™ä¸ªé˜¶æ®µä¹Ÿä¼šè§£å‹è¦æ¸²æŸ“çš„ imageã€‚ï¼ˆé™¤äº†ç”¨ imageNamedï¼šæ–¹æ³•ä» bundle åŠ è½½çš„ image ä¼šç«‹åˆ»è§£å‹ä¹‹å¤–ï¼Œå…¶ä»–çš„æ¯”å¦‚ç›´æ¥ä»ç¡¬ç›˜è¯»å…¥ï¼Œæˆ–è€…ä»ç½‘ç»œä¸Šä¸‹è½½çš„ image ä¸ä¼šç«‹åˆ»è§£å‹ï¼Œåªæœ‰åœ¨çœŸæ­£è¦æ¸²æŸ“çš„æ—¶å€™æ‰ä¼šè§£å‹ï¼‰ã€‚</p>
</li>
<li><p>æäº¤ï¼šåœ¨è¿™ä¸ªé˜¶æ®µï¼ŒCore Animation æ‰“åŒ… layer çš„ä¿¡æ¯ä»¥åŠéœ€è¦åšçš„åŠ¨ç”»çš„å‚æ•°ï¼Œé€šè¿‡ IPCï¼ˆinter-Process Communicationï¼‰ä¼ é€’çµ¦ render serverã€‚</p>
</li>
</ul>
<h4 id="åœ¨-APP-å¤–éƒ¨çš„2ä¸ªé˜¶æ®µ"><a href="#åœ¨-APP-å¤–éƒ¨çš„2ä¸ªé˜¶æ®µ" class="headerlink" title="åœ¨ APP å¤–éƒ¨çš„2ä¸ªé˜¶æ®µ"></a>åœ¨ APP å¤–éƒ¨çš„2ä¸ªé˜¶æ®µ</h4><p>å½“è¿™äº›æ•°æ®åˆ°è¾¾ render server åï¼Œä¼šè¢«ååºåˆ—åŒ–æˆ render treeã€‚ç„¶å render server ä¼šåšä¸‹é¢çš„ä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li><p>æ ¹æ® layer çš„å„ç§å±æ€§ï¼ˆå¦‚æœæ˜¯åŠ¨ç”»çš„ï¼Œä¼šè®¡ç®—åŠ¨ç”» layer çš„å±æ€§çš„ä¸­é—´å€¼ï¼‰ï¼Œç”¨ OpenGL å‡†å¤‡æ¸²æŸ“ã€‚</p>
</li>
<li><p>æ¸²æŸ“è¿™äº›å¯è§†çš„ layer åˆ°å±å¹•ã€‚</p>
</li>
</ul>
<h3 id="å…·ä½“çš„UIViewç»˜åˆ¶æµç¨‹"><a href="#å…·ä½“çš„UIViewç»˜åˆ¶æµç¨‹" class="headerlink" title="å…·ä½“çš„UIViewç»˜åˆ¶æµç¨‹"></a>å…·ä½“çš„UIViewç»˜åˆ¶æµç¨‹</h3><p><img src="/26/2015/iOSä¸­çš„è§†å›¾æ¸²æŸ“/../../../images/572639-02b179aa4d510a8a.png" alt="UIView"><br>ä¸‹é¢æˆ‘ä»¬æ¥å¯¹è¿™ä¸ªæµç¨‹è¿›è¡Œè¯´æ˜ï¼š</p>
<ul>
<li>å½“æˆ‘ä»¬è°ƒç”¨[UIView setNeedsDisplay]æ–¹æ³•æ—¶ï¼Œå¹¶æ²¡æœ‰æ‰§è¡Œç«‹å³æ‰§è¡Œç»˜åˆ¶å·¥ä½œã€‚</li>
<li>è€Œæ˜¯é©¬ä¸Šè°ƒç”¨[view.layer setNeedsDisplay]æ–¹æ³•ï¼Œç»™å½“å‰layeræ‰“ä¸Šè„æ ‡è®°ã€‚<br>åœ¨å½“å‰RunLoopå¿«è¦ç»“æŸçš„æ—¶å€™è°ƒç”¨layer çš„displayæ–¹æ³•ï¼Œæ¥è¿›å…¥åˆ°å½“å‰è§†å›¾çš„çœŸæ­£ç»˜åˆ¶å½“ä¸­ã€‚</li>
<li>åœ¨layerçš„displayæ–¹æ³•å†…éƒ¨ï¼Œç³»ç»Ÿä¼šåˆ¤æ–­layerçš„layer.delegateæ˜¯å¦å®ç°äº†displayLayer:æ–¹æ³•ï¼Œa.å¦‚æœæ²¡æœ‰å®ç°ï¼Œåˆ™æ‰§è¡Œç³»ç»Ÿçš„ç»˜åˆ¶æµç¨‹;b.å¦‚æœå®ç°äº†åˆ™ä¼šè¿›å…¥å¼‚æ­¥ç»˜åˆ¶çš„å…¥å£ã€‚</li>
<li>æœ€åæŠŠç»˜åˆ¶å®Œçš„backing storeï¼ˆå¯ä»¥ç†è§£ä¸ºä½å›¾ï¼‰æäº¤ç»™GPUã€‚</li>
</ul>
<p><img src="/26/2015/iOSä¸­çš„è§†å›¾æ¸²æŸ“/../../../images/572639-cf50391b5f8a5bfc.png" alt="UIView"></p>
<p>å¯¹æµç¨‹åŠ ä»¥è¯´æ˜ï¼š</p>
<ul>
<li>åœ¨layerå†…éƒ¨ä¼šåˆ›å»ºä¸€ä¸ªbacking storeï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºCGContextRefä¸Šä¸‹æ–‡ã€‚<br>åˆ¤æ–­layeræ˜¯å¦æœ‰delegate:</li>
<li>å¦‚æœæœ‰delegateï¼Œåˆ™ä¼šæ‰§è¡Œ[layer.delegate drawLayer:inContext]ï¼ˆè¿™ä¸ªæ–¹æ³•çš„æ‰§è¡Œæ˜¯åœ¨ç³»ç»Ÿå†…éƒ¨æ‰§è¡Œçš„ï¼‰ï¼Œç„¶ååœ¨è¿™ä¸ªæ–¹æ³•ä¸­ä¼šè°ƒç”¨viewçš„drawRect:æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é‡å†™viewçš„drawRect:æ–¹æ³•æ‰ä¼šè¢«è°ƒç”¨åˆ°ã€‚</li>
<li>å¦‚æœæ²¡æœ‰delegateï¼Œä¼šè°ƒç”¨layerçš„drawInContextæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥é‡å†™çš„layerçš„è¯¥æ–¹æ³•ï¼Œæ­¤åˆ»ä¼šè¢«è°ƒç”¨åˆ°ã€‚</li>
<li>æœ€åæŠŠç»˜åˆ¶å®Œçš„backing storeï¼ˆå¯ä»¥ç†è§£ä¸ºä½å›¾ï¼‰æäº¤ç»™GPUã€‚</li>
</ul>
<h3 id="ä¸runloopçš„å…³ç³»"><a href="#ä¸runloopçš„å…³ç³»" class="headerlink" title="ä¸runloopçš„å…³ç³»"></a>ä¸runloopçš„å…³ç³»</h3><p><img src="/26/2015/iOSä¸­çš„è§†å›¾æ¸²æŸ“/../../../images/offscreen.png" alt="UIView"></p>
<h3 id="Viewçš„ç»˜åˆ¶ä¸CPU"><a href="#Viewçš„ç»˜åˆ¶ä¸CPU" class="headerlink" title="Viewçš„ç»˜åˆ¶ä¸CPU"></a>Viewçš„ç»˜åˆ¶ä¸CPU</h3><p><img src="/26/2015/iOSä¸­çš„è§†å›¾æ¸²æŸ“/../../../images/process.png" alt="UIView"></p>
<h3 id="Viewçš„ç»˜åˆ¶ä¸GPU"><a href="#Viewçš„ç»˜åˆ¶ä¸GPU" class="headerlink" title="Viewçš„ç»˜åˆ¶ä¸GPU"></a>Viewçš„ç»˜åˆ¶ä¸GPU</h3><h4 id="GPUåŠŸèƒ½"><a href="#GPUåŠŸèƒ½" class="headerlink" title="GPUåŠŸèƒ½"></a>GPUåŠŸèƒ½</h4><p>GPUå¤„ç†çš„å•ä½æ˜¯Texture<br>åŸºæœ¬ä¸Šæˆ‘ä»¬æ§åˆ¶GPUéƒ½æ˜¯é€šè¿‡OpenGLæ¥å®Œæˆçš„ï¼Œä½†æ˜¯ä»bitmapåˆ°Textureä¹‹é—´éœ€è¦ä¸€åº§æ¡¥æ¢ï¼ŒCore Animationæ­£å¥½å……å½“äº†è¿™ä¸ªè§’è‰²ï¼š<br>Core Animationå¯¹OpenGLçš„apiæœ‰ä¸€å±‚å°è£…ï¼Œå½“æˆ‘ä»¬çš„è¦æ¸²æŸ“çš„layerå·²ç»æœ‰äº†bitmap contentçš„æ—¶å€™ï¼Œè¿™ä¸ªcontentä¸€èˆ¬æ¥è¯´æ˜¯ä¸€ä¸ªCGImageRefï¼ŒCoreAnimationä¼šåˆ›å»ºä¸€ä¸ªOpenGLçš„Textureå¹¶å°†CGImageRefï¼ˆbitmapï¼‰å’Œè¿™ä¸ªTextureç»‘å®šï¼Œé€šè¿‡TextureIDæ¥æ ‡è¯†ã€‚<br>è¿™ä¸ªå¯¹åº”å…³ç³»å»ºç«‹èµ·æ¥ä¹‹åï¼Œå‰©ä¸‹çš„ä»»åŠ¡å°±æ˜¯GPUå¦‚ä½•å°†Textureæ¸²æŸ“åˆ°å±å¹•ä¸Šäº†ã€‚</p>
<h4 id="GPUå·¥ä½œæ¨¡å¼ï¼š"><a href="#GPUå·¥ä½œæ¨¡å¼ï¼š" class="headerlink" title="GPUå·¥ä½œæ¨¡å¼ï¼š"></a>GPUå·¥ä½œæ¨¡å¼ï¼š</h4><p>æ•´ä¸ªè¿‡ç¨‹ä¹Ÿå°±æ˜¯ä¸€ä»¶äº‹ï¼šCPUå°†å‡†å¤‡å¥½çš„bitmapæ”¾åˆ°RAMé‡Œï¼ŒGPUå»æ¬è¿™å¿«å†…å­˜åˆ°VRAMä¸­å¤„ç†ã€‚<br>è€Œè¿™ä¸ªè¿‡ç¨‹GPUæ‰€èƒ½æ‰¿å—çš„æé™å¤§æ¦‚åœ¨16.7mså®Œæˆä¸€å¸§çš„å¤„ç†ï¼Œæ‰€ä»¥æœ€å¼€å§‹æåˆ°çš„60fpså…¶å®å°±æ˜¯GPUèƒ½å¤„ç†çš„æœ€é«˜é¢‘ç‡ã€‚</p>
<h4 id="GPUæ€§èƒ½ç“¶é¢ˆ"><a href="#GPUæ€§èƒ½ç“¶é¢ˆ" class="headerlink" title="GPUæ€§èƒ½ç“¶é¢ˆ"></a>GPUæ€§èƒ½ç“¶é¢ˆ</h4><p>å› æ­¤ï¼ŒGPUçš„æŒ‘æˆ˜æœ‰ä¸¤ä¸ªï¼š<br>â€¢ å°†æ•°æ®ä»RAMæ¬åˆ°VRAMä¸­<br>â€¢ å°†Textureæ¸²æŸ“åˆ°å±å¹•ä¸Š<br>è¿™ä¸¤ä¸ªä¸­ç“¶é¢ˆåŸºæœ¬åœ¨ç¬¬äºŒç‚¹ä¸Šã€‚æ¸²æŸ“TextureåŸºæœ¬è¦å¤„ç†è¿™ä¹ˆå‡ ä¸ªé—®é¢˜ï¼š</p>
<h5 id="Compositingï¼š"><a href="#Compositingï¼š" class="headerlink" title="Compositingï¼š"></a>Compositingï¼š</h5><p>Compositingæ˜¯æŒ‡å°†å¤šä¸ªçº¹ç†æ‹¼åˆ°ä¸€èµ·çš„è¿‡ç¨‹ï¼Œå¯¹åº”UIKitï¼Œæ˜¯æŒ‡å¤„ç†å¤šä¸ªviewåˆåˆ°ä¸€èµ·çš„æƒ…å†µï¼Œå¦‚</p>
<p>[self.view addsubview : subview]<br>1<br>å¦‚æœviewä¹‹é—´æ²¡æœ‰å åŠ ï¼Œé‚£ä¹ˆGPUåªéœ€è¦åšæ™®é€šæ¸²æŸ“å³å¯ã€‚ å¦‚æœå¤šä¸ªviewä¹‹é—´æœ‰å åŠ éƒ¨åˆ†ï¼ŒGPUéœ€è¦åšblendingã€‚<br>åŠ å…¥ä¸¤ä¸ªviewå¤§å°ç›¸åŒï¼Œä¸€ä¸ªå åŠ åœ¨å¦ä¸€ä¸ªä¸Šé¢ï¼Œé‚£ä¹ˆè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p>
<p>R = S+D*(1-Sa)</p>
<p>R: ä¸ºæœ€ç»ˆçš„åƒç´ å€¼<br>S: ä»£è¡¨ ä¸Šé¢çš„Textureï¼ˆTop Textureï¼‰<br>D: ä»£è¡¨ä¸‹é¢çš„Texture(lower Texture)<br>Saä»£è¡¨Textureçš„alphaå€¼ã€‚<br>å…¶ä¸­S,Déƒ½å·²ç»pre-multipliedå„è‡ªçš„alphaå€¼ã€‚<br>å‡å¦‚Top Textureï¼ˆä¸Šå±‚viewï¼‰çš„alphaå€¼ä¸º1ï¼Œå³ä¸é€æ˜ã€‚é‚£ä¹ˆå®ƒä¼šé®ä½ä¸‹å±‚çš„Textureã€‚å³,R = Sã€‚æ˜¯åˆç†çš„ã€‚ å‡å¦‚Top Textureï¼ˆä¸Šå±‚viewï¼‰çš„alphaå€¼ä¸º0.5ï¼ŒS ä¸º (1,0,0)ï¼Œä¹˜ä»¥alphaåä¸º(0.5,0,0ï¼‰ã€‚Dä¸º(0ï¼Œ0ï¼Œ1)ã€‚ å¾—åˆ°çš„Rä¸ºï¼ˆ0.5ï¼Œ0ï¼Œ0.5ï¼‰ã€‚<br>åŸºæœ¬ä¸Šæ¯ä¸ªåƒç´ ç‚¹éƒ½éœ€è¦è¿™ä¹ˆè®¡ç®—ä¸€æ¬¡ã€‚<br>å› æ­¤ï¼Œviewçš„å±‚çº§å¾ˆå¤æ‚ï¼Œæˆ–è€…viewéƒ½æ˜¯åŠé€æ˜çš„ï¼ˆalphaå€¼ä¸ä¸º1ï¼‰éƒ½ä¼šå¸¦æ¥GPUé¢å¤–çš„è®¡ç®—å·¥ä½œã€‚<br>åº”ç”¨åº”å½“å°½é‡å‡å°‘è§†å›¾æ•°é‡å’Œå±‚æ¬¡ï¼Œå¹¶åœ¨ä¸é€æ˜çš„è§†å›¾é‡Œæ ‡æ˜ opaque å±æ€§ä»¥é¿å…æ— ç”¨çš„ Alpha é€šé“åˆæˆã€‚</p>
<h5 id="Size"><a href="#Size" class="headerlink" title="Size"></a>Size</h5><p>è¿™ä¸ªé—®é¢˜ï¼Œä¸»è¦æ˜¯å¤„ç†imageå¸¦æ¥çš„ï¼Œå‡å¦‚å†…å­˜é‡Œæœ‰ä¸€å¼ 400x400çš„å›¾ç‰‡ï¼Œè¦æ”¾åˆ°100x100çš„imageviewé‡Œï¼Œå¦‚æœä¸åšä»»ä½•å¤„ç†ï¼Œç›´æ¥ä¸¢è¿›å»ï¼Œé—®é¢˜å°±å¤§äº†ï¼Œè¿™æ„å‘³ç€ï¼ŒGPUéœ€è¦å¯¹å¤§å›¾è¿›è¡Œç¼©æ”¾åˆ°å°çš„åŒºåŸŸæ˜¾ç¤ºï¼Œéœ€è¦åšåƒç´ ç‚¹çš„samplingï¼Œè¿™ç§smaplingçš„ä»£ä»·å¾ˆé«˜ï¼Œåˆéœ€è¦å…¼é¡¾pixel alignmentã€‚è®¡ç®—é‡ä¼šé£™å‡ã€‚</p>
<h5 id="shouldRasterize"><a href="#shouldRasterize" class="headerlink" title="shouldRasterize"></a>shouldRasterize</h5><p>å…¶ä¸­shouldRasterizeï¼ˆå…‰æ …åŒ–ï¼‰æ˜¯æ¯”è¾ƒç‰¹åˆ«çš„ä¸€ç§ï¼š<br>å…‰æ …åŒ–æ¦‚å¿µï¼šå°†å›¾è½¬åŒ–ä¸ºä¸€ä¸ªä¸ªæ …æ ¼ç»„æˆçš„å›¾è±¡ã€‚<br>å…‰æ …åŒ–ç‰¹ç‚¹ï¼šæ¯ä¸ªå…ƒç´ å¯¹åº”å¸§ç¼“å†²åŒºä¸­çš„ä¸€åƒç´ ã€‚</p>
<p>shouldRasterize = YESåœ¨å…¶ä»–å±æ€§è§¦å‘ç¦»å±æ¸²æŸ“çš„åŒæ—¶ï¼Œä¼šå°†å…‰æ …åŒ–åçš„å†…å®¹ç¼“å­˜èµ·æ¥ï¼Œå¦‚æœå¯¹åº”çš„layeråŠå…¶sublayersæ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œåœ¨ä¸‹ä¸€å¸§çš„æ—¶å€™å¯ä»¥ç›´æ¥å¤ç”¨ã€‚shouldRasterize = YESï¼Œè¿™å°†éšå¼çš„åˆ›å»ºä¸€ä¸ªä½å›¾ï¼Œå„ç§é˜´å½±é®ç½©ç­‰æ•ˆæœä¹Ÿä¼šä¿å­˜åˆ°ä½å›¾ä¸­å¹¶ç¼“å­˜èµ·æ¥ï¼Œä»è€Œå‡å°‘æ¸²æŸ“çš„é¢‘åº¦ï¼ˆä¸æ˜¯çŸ¢é‡å›¾ï¼‰ã€‚</p>
<p>ç›¸å½“äºå…‰æ …åŒ–æ˜¯æŠŠGPUçš„æ“ä½œè½¬åˆ°CPUä¸Šäº†ï¼Œç”Ÿæˆä½å›¾ç¼“å­˜ï¼Œç›´æ¥è¯»å–å¤ç”¨ã€‚</p>
<p>å½“ä½ ä½¿ç”¨å…‰æ …åŒ–æ—¶ï¼Œä½ å¯ä»¥å¼€å¯â€œColor Hits Green and Misses Redâ€æ¥æ£€æŸ¥è¯¥åœºæ™¯ä¸‹å…‰æ …åŒ–æ“ä½œæ˜¯å¦æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚ç»¿è‰²è¡¨ç¤ºç¼“å­˜è¢«å¤ç”¨ï¼Œçº¢è‰²è¡¨ç¤ºç¼“å­˜åœ¨è¢«é‡å¤åˆ›å»ºã€‚</p>
<p>å¦‚æœå…‰æ …åŒ–çš„å±‚å˜çº¢å¾—å¤ªé¢‘ç¹é‚£ä¹ˆå…‰æ …åŒ–å¯¹ä¼˜åŒ–å¯èƒ½æ²¡æœ‰å¤šå°‘ç”¨å¤„ã€‚ä½å›¾ç¼“å­˜ä»å†…å­˜ä¸­åˆ é™¤åˆé‡æ–°åˆ›å»ºå¾—å¤ªè¿‡é¢‘ç¹ï¼Œçº¢è‰²è¡¨æ˜ç¼“å­˜é‡å»ºå¾—å¤ªè¿Ÿã€‚å¯ä»¥é’ˆå¯¹æ€§çš„é€‰æ‹©æŸä¸ªè¾ƒå°è€Œè¾ƒæ·±çš„å±‚ç»“æ„è¿›è¡Œå…‰æ …åŒ–ï¼Œæ¥å°è¯•å‡å°‘æ¸²æŸ“æ—¶é—´ã€‚</p>
<p>æ³¨æ„ï¼š<br>å¯¹äºç»å¸¸å˜åŠ¨çš„å†…å®¹,è¿™ä¸ªæ—¶å€™ä¸è¦å¼€å¯,å¦åˆ™ä¼šé€ æˆæ€§èƒ½çš„æµªè´¹</p>
<p>ä¾‹å¦‚æˆ‘ä»¬æ—¥ç¨‹ç»å¸¸æ‰“äº¤é“çš„TableViewCell,å› ä¸ºTableViewCellçš„é‡ç»˜æ˜¯å¾ˆé¢‘ç¹çš„ï¼ˆå› ä¸ºCellçš„å¤ç”¨ï¼‰,å¦‚æœCellçš„å†…å®¹ä¸æ–­å˜åŒ–,åˆ™Celléœ€è¦ä¸æ–­é‡ç»˜,å¦‚æœæ­¤æ—¶è®¾ç½®äº†cell.layerå¯å…‰æ …åŒ–ã€‚åˆ™ä¼šé€ æˆå¤§é‡çš„ç¦»å±æ¸²æŸ“,é™ä½å›¾å½¢æ€§èƒ½ã€‚</p>
<h5 id="Offscreen-Rendering-And-Maskï¼ˆç¦»å±æ¸²æŸ“ï¼‰"><a href="#Offscreen-Rendering-And-Maskï¼ˆç¦»å±æ¸²æŸ“ï¼‰" class="headerlink" title="Offscreen Rendering And Maskï¼ˆç¦»å±æ¸²æŸ“ï¼‰"></a>Offscreen Rendering And Maskï¼ˆç¦»å±æ¸²æŸ“ï¼‰</h5><p>GPUå±å¹•æ¸²æŸ“æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p>
<p>On-Screen Rendering<br>æ„ä¸ºå½“å‰å±å¹•æ¸²æŸ“ï¼ŒæŒ‡çš„æ˜¯GPUçš„æ¸²æŸ“æ“ä½œæ˜¯åœ¨å½“å‰ç”¨äºæ˜¾ç¤ºçš„å±å¹•ç¼“å†²åŒºä¸­è¿›è¡Œã€‚</p>
<p>Off-Screen Rendering<br>æ„ä¸ºç¦»å±æ¸²æŸ“ï¼ŒæŒ‡çš„æ˜¯GPUåœ¨å½“å‰å±å¹•ç¼“å†²åŒºä»¥å¤–æ–°å¼€è¾Ÿä¸€ä¸ªç¼“å†²åŒºè¿›è¡Œæ¸²æŸ“æ“ä½œã€‚</p>
<p>ç›¸æ¯”äºå½“å‰å±å¹•æ¸²æŸ“ï¼Œç¦»å±æ¸²æŸ“çš„ä»£ä»·æ˜¯å¾ˆé«˜çš„ï¼Œä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li><p>åˆ›å»ºæ–°ç¼“å†²åŒº<br>è¦æƒ³è¿›è¡Œç¦»å±æ¸²æŸ“ï¼Œé¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²åŒºã€‚</p>
</li>
<li><p>ä¸Šä¸‹æ–‡åˆ‡æ¢<br>&gt;<br>ç¦»å±æ¸²æŸ“çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œéœ€è¦å¤šæ¬¡åˆ‡æ¢ä¸Šä¸‹æ–‡ç¯å¢ƒï¼šå…ˆæ˜¯ä»å½“å‰å±å¹•ï¼ˆOn-Screenï¼‰åˆ‡æ¢åˆ°ç¦»å±ï¼ˆOff-Screenï¼‰ï¼›ç­‰åˆ°ç¦»å±æ¸²æŸ“ç»“æŸä»¥åï¼Œå°†ç¦»å±ç¼“å†²åŒºçš„æ¸²æŸ“ç»“æœæ˜¾ç¤ºåˆ°å±å¹•ä¸Šæœ‰éœ€è¦å°†ä¸Šä¸‹æ–‡ç¯å¢ƒä»ç¦»å±åˆ‡æ¢åˆ°å½“å‰å±å¹•ã€‚è€Œä¸Šä¸‹æ–‡ç¯å¢ƒçš„åˆ‡æ¢æ˜¯è¦ä»˜å‡ºå¾ˆå¤§ä»£ä»·çš„ã€‚</p>
</li>
</ul>
<p>è®¾ç½®äº†ä»¥ä¸‹å±æ€§æ—¶ï¼Œéƒ½ä¼šè§¦å‘ç¦»å±ç»˜åˆ¶ï¼š</p>
<p>shouldRasterizeï¼ˆå…‰æ …åŒ–ï¼‰<br>masksï¼ˆé®ç½©ï¼‰<br>shadowsï¼ˆé˜´å½±ï¼‰<br>edge antialiasingï¼ˆæŠ—é”¯é½¿ï¼‰<br>group opacityï¼ˆä¸é€æ˜ï¼‰<br>å¤æ‚å½¢çŠ¶è®¾ç½®åœ†è§’ç­‰<br>æ¸å˜</p>
<h5 id="ä¸ºä»€ä¹ˆä¼šä½¿ç”¨ç¦»å±æ¸²æŸ“"><a href="#ä¸ºä»€ä¹ˆä¼šä½¿ç”¨ç¦»å±æ¸²æŸ“" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šä½¿ç”¨ç¦»å±æ¸²æŸ“"></a>ä¸ºä»€ä¹ˆä¼šä½¿ç”¨ç¦»å±æ¸²æŸ“</h5><p>å½“ä½¿ç”¨åœ†è§’ï¼Œé˜´å½±ï¼Œé®ç½©çš„æ—¶å€™ï¼Œå›¾å±‚å±æ€§çš„æ··åˆä½“è¢«æŒ‡å®šä¸ºåœ¨æœªé¢„åˆæˆä¹‹å‰ä¸èƒ½ç›´æ¥åœ¨å±å¹•ä¸­ç»˜åˆ¶ï¼Œæ‰€ä»¥å°±éœ€è¦å±å¹•å¤–æ¸²æŸ“è¢«å”¤èµ·ã€‚</p>
<p>å±å¹•å¤–æ¸²æŸ“å¹¶ä¸æ„å‘³ç€è½¯ä»¶ç»˜åˆ¶ï¼Œä½†æ˜¯å®ƒæ„å‘³ç€å›¾å±‚å¿…é¡»åœ¨è¢«æ˜¾ç¤ºä¹‹å‰åœ¨ä¸€ä¸ªå±å¹•å¤–ä¸Šä¸‹æ–‡ä¸­è¢«æ¸²æŸ“ï¼ˆä¸è®ºCPUè¿˜æ˜¯GPUï¼‰ã€‚</p>
<h5 id="æ¸²æŸ“ä¼˜åŒ–ç†è®º"><a href="#æ¸²æŸ“ä¼˜åŒ–ç†è®º" class="headerlink" title="æ¸²æŸ“ä¼˜åŒ–ç†è®º"></a>æ¸²æŸ“ä¼˜åŒ–ç†è®º</h5><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœshouldRasterizeè¢«è®¾ç½®æˆYESï¼Œåœ¨è§¦å‘ç¦»å±ç»˜åˆ¶çš„åŒæ—¶ï¼Œä¼šå°†å…‰æ …åŒ–åçš„å†…å®¹ç¼“å­˜èµ·æ¥ï¼Œå¦‚æœå¯¹åº”çš„layeråŠå…¶sublayersæ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œåœ¨ä¸‹ä¸€å¸§çš„æ—¶å€™å¯ä»¥ç›´æ¥å¤ç”¨ã€‚è¿™å°†åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæå‡æ¸²æŸ“æ€§èƒ½ã€‚ </p>
<p>è€Œå…¶å®ƒå±æ€§å¦‚æœæ˜¯å¼€å¯çš„ï¼Œå°±ä¸ä¼šæœ‰ç¼“å­˜ï¼Œç¦»å±ç»˜åˆ¶ä¼šåœ¨æ¯ä¸€å¸§éƒ½å‘ç”Ÿã€‚</p>
<p>åœ¨å¼€å‘æ—¶éœ€è¦æ ¹æ®å®é™…æƒ…å†µæ¥é€‰æ‹©æœ€ä¼˜çš„å®ç°æ–¹å¼ï¼Œå°½é‡ä½¿ç”¨On-Screen Renderingã€‚ç®€å•çš„Off-Screen Renderingå¯ä»¥è€ƒè™‘ä½¿ç”¨Core Graphicsè®©CPUæ¥æ¸²æŸ“ã€‚</p>
<h3 id="å¸¸è§çš„å‡ ä¸ªé—®é¢˜"><a href="#å¸¸è§çš„å‡ ä¸ªé—®é¢˜" class="headerlink" title="å¸¸è§çš„å‡ ä¸ªé—®é¢˜"></a>å¸¸è§çš„å‡ ä¸ªé—®é¢˜</h3><h4 id="å›¾åƒå¤šå±‚æ¬¡çš„åˆæˆâ€”ä¸ºä½•è®¾ç½®é€æ˜ä¼šå¢åŠ GPUå·¥ä½œé‡"><a href="#å›¾åƒå¤šå±‚æ¬¡çš„åˆæˆâ€”ä¸ºä½•è®¾ç½®é€æ˜ä¼šå¢åŠ GPUå·¥ä½œé‡" class="headerlink" title="å›¾åƒå¤šå±‚æ¬¡çš„åˆæˆâ€”ä¸ºä½•è®¾ç½®é€æ˜ä¼šå¢åŠ GPUå·¥ä½œé‡"></a>å›¾åƒå¤šå±‚æ¬¡çš„åˆæˆâ€”ä¸ºä½•è®¾ç½®é€æ˜ä¼šå¢åŠ GPUå·¥ä½œé‡</h4><p>æ‰€ä»¥å½“æºçº¹ç†æ˜¯å®Œå…¨ä¸é€æ˜çš„æ—¶å€™ï¼Œç›®æ ‡åƒç´ å°±ç­‰äºæºçº¹ç†ã€‚è¿™å¯ä»¥çœä¸‹ GPU å¾ˆå¤§çš„å·¥ä½œé‡ï¼Œå› ä¸ºå¯ä»¥ç›´æ¥ä½¿ç”¨æœ€ä¸Šè¾¹çš„çº¹ç†ï¼Œè€Œä¸éœ€è¦è®¡ç®—å¤šä¸ªçº¹ç†çš„èåˆï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ CALayer æœ‰ä¸€ä¸ªå«åš opaque çš„å±æ€§äº†ã€‚å¦‚æœè¿™ä¸ªå±æ€§ä¸º NOï¼ŒGPU å°†ä¸ä¼šåšä»»ä½•åˆæˆï¼Œè€Œæ˜¯ç®€å•ä»è¿™ä¸ªå±‚æ‹·è´ï¼Œä¸éœ€è¦è€ƒè™‘å®ƒä¸‹æ–¹çš„ä»»ä½•ä¸œè¥¿(å› ä¸ºéƒ½è¢«å®ƒé®æŒ¡ä½äº†)ã€‚</p>
<h4 id="å…³äºå¡é¡¿çš„ç®€å•åŸç†è§£é‡Š"><a href="#å…³äºå¡é¡¿çš„ç®€å•åŸç†è§£é‡Š" class="headerlink" title="å…³äºå¡é¡¿çš„ç®€å•åŸç†è§£é‡Š"></a>å…³äºå¡é¡¿çš„ç®€å•åŸç†è§£é‡Š</h4><p><img src="/26/2015/iOSä¸­çš„è§†å›¾æ¸²æŸ“/../../../images/screenshot.png" alt="Text"></p>
<p><img src="/26/2015/iOSä¸­çš„è§†å›¾æ¸²æŸ“/../../../images/offscreen022.png" alt="Text"></p>
<p>åœ¨ VSync ä¿¡å·åˆ°æ¥åï¼Œç³»ç»Ÿå›¾å½¢æœåŠ¡ä¼šé€šè¿‡ CADisplayLink ç­‰æœºåˆ¶é€šçŸ¥ Appï¼ŒApp ä¸»çº¿ç¨‹å¼€å§‹åœ¨ CPU ä¸­è®¡ç®—æ˜¾ç¤ºå†…å®¹ï¼Œæ¯”å¦‚è§†å›¾çš„åˆ›å»ºã€å¸ƒå±€è®¡ç®—ã€å›¾ç‰‡è§£ç ã€æ–‡æœ¬ç»˜åˆ¶ç­‰ã€‚éšå CPU ä¼šå°†è®¡ç®—å¥½çš„å†…å®¹æäº¤åˆ° GPU å»ï¼Œç”± GPU è¿›è¡Œå˜æ¢ã€åˆæˆã€æ¸²æŸ“ã€‚éšå GPU ä¼šæŠŠæ¸²æŸ“ç»“æœæäº¤åˆ°å¸§ç¼“å†²åŒºå»ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡ VSync ä¿¡å·åˆ°æ¥æ—¶æ˜¾ç¤ºåˆ°å±å¹•ä¸Šã€‚ç”±äºå‚ç›´åŒæ­¥çš„æœºåˆ¶ï¼Œå¦‚æœåœ¨ä¸€ä¸ª VSync æ—¶é—´å†…ï¼ŒCPU æˆ–è€… GPU æ²¡æœ‰å®Œæˆå†…å®¹æäº¤ï¼Œåˆ™é‚£ä¸€å¸§å°±ä¼šè¢«ä¸¢å¼ƒï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡æœºä¼šå†æ˜¾ç¤ºï¼Œè€Œè¿™æ—¶æ˜¾ç¤ºå±ä¼šä¿ç•™ä¹‹å‰çš„å†…å®¹ä¸å˜ã€‚è¿™å°±æ˜¯ç•Œé¢å¡é¡¿çš„åŸå› ã€‚æœ€ç›´æ¥çš„ç†è§£ï¼Œå½“æˆ‘ä»¬æ‹–åŠ¨å±å¹•çš„æ—¶å€™ï¼Œç”»é¢è·Ÿä¸ä¸Šæ‰‹æŒ‡çš„ç§»åŠ¨ï¼Œå› ä¸ºæ€»æ˜¯éœ€è¦æ˜¾ç¤ºä¸Šä¸€ä¸ªæˆ–è€…ä¸Šå‡ ä¸ªç”»é¢çš„å†…å®¹ã€‚</p>
<p>ä»ä¸Šé¢çš„å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒCPU å’Œ GPU ä¸è®ºå“ªä¸ªé˜»ç¢äº†æ˜¾ç¤ºæµç¨‹ï¼Œéƒ½ä¼šé€ æˆæ‰å¸§ç°è±¡ã€‚æ‰€ä»¥å¼€å‘æ—¶ï¼Œä¹Ÿéœ€è¦åˆ†åˆ«å¯¹ CPU å’Œ GPU å‹åŠ›è¿›è¡Œè¯„ä¼°å’Œä¼˜åŒ–ã€‚</p>
<blockquote>
<p>æ‰©å±•:</p>
<p>å…³äºç¼“å†²åŒºçš„ä¼˜åŒ–ç»å†äº†ä¸‰ä¸ªé˜¶æ®µï¼Œæœ€å¼€å§‹æ˜¯å•ç¼“å†²åŒºï¼ŒGPUç­‰å¾…å±å¹•è¯»å–å®Œæˆä¹‹åå†å†™å…¥ï¼Œæœ‰ä¸€ä¸ªæ•ˆç‡é—®é¢˜ï¼Œåæ¥å‘å±•ä¸ºåŒç¼“å†²åŒºï¼Œè¿™ä¸ªæ—¶å€™çš„é—®é¢˜åœ¨äºï¼Œç¼“å†²åŒºçš„åˆ‡æ¢æ˜¯ç”±GPUæ§åˆ¶çš„ï¼Œå½“GPUåœ¨ç¼“å†²åŒºå†™å…¥å®Œæˆä¹‹åå°±ä¼šåˆ‡æ¢æŒ‡é’ˆï¼Œè¿™ä¸ªæ—¶å€™çš„é—®é¢˜åœ¨äºå±å¹•æ˜¾ç¤ºäº†ä¸€åŠAç¼“å†²åŒºé—´çš„å†…å®¹ï¼Œç„¶åè¿˜æ˜¾ç¤ºäº†ä¸€åŠBç¼“å†²åŒºçš„å†…å®¹ï¼Œè§£å†³åŠæ³•æ˜¯åŠ äº†ä¸€ä¸ªå‚ç›´åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯è¯´GPUå†™ç¼“å­˜è¦ç­‰ç€å±å¹•çš„å‘½ä»¤ï¼Œå½“å±å¹•å¼€å§‹è¿™ä¸€æ¬¡è¯»å–çš„æ—¶å€™ï¼ŒCPUå’ŒGPUå¼€å§‹å·¥ä½œï¼Œæœ€ç»ˆå†™å…¥ç¼“å­˜ï¼Œå½“ä¸‹ä¸€æ¬¡å¼€å§‹è¯»å±å¹•çš„æ—¶å€™ä¼šå»æ£€æŸ¥Bç¼“å­˜åŒºæ˜¯ä¸æ˜¯æ›´æ–°å†™å…¥äº†ï¼Œå¦‚æœæ²¡æœ‰å†™å…¥å°±ä¸æ›´æ–°æŒ‡é’ˆï¼Œè¿™æ¬¡åˆ·æ–°ä»ç„¶è¯»å–Aï¼Œç„¶åGPUè¿™ä¸ªæ—¶å€™è¿˜åœ¨å†™å…¥ï¼Œå½“å†™å…¥æˆåŠŸäº†åªèƒ½ç­‰ç€ä¸‹æ¬¡æœ‰æœºä¼šæ˜¾ç¤ºåœ¨å±å¹•ä¸Šäº†ã€‚è¿™æ ·å°±å°†æŒ‡é’ˆæŒ‡å‘åˆ‡æ¢çš„è§¦å‘å™¨ç”±GPUå†™å…¥å®Œæˆåˆ‡æ¢ä¸ºï¼Œå±å¹•è¯»å–å®Œæˆå¹¶ä¸”å†™å…¥æˆåŠŸï¼Œå¼•å…¥çš„æ–°çš„é—®é¢˜æ˜¯æ‰å¸§ã€‚</p>
</blockquote>
<h4 id="drawRectå¯¼è‡´å†…å­˜æš´å¢çš„åŸç†"><a href="#drawRectå¯¼è‡´å†…å­˜æš´å¢çš„åŸç†" class="headerlink" title="drawRectå¯¼è‡´å†…å­˜æš´å¢çš„åŸç†"></a>drawRectå¯¼è‡´å†…å­˜æš´å¢çš„åŸç†</h4><p><a href="http://bihongbo.com/2016/01/03/memoryGhostdrawRect/" target="_blank" rel="external">drawRectæ¶é­”</a></p>
<p>è§†å›¾çš„æœ¬è´¨æ˜¯æ¥è‡ªäºCALayerçš„contentså±æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªCGImageçš„ç±»å‹ï¼Œcontentsä¹Ÿè¢«ç§°ä¸ºå¯„å®¿å›¾ï¼Œé™¤äº†ç»™å®ƒèµ‹å€¼CGImageä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥å¯¹å®ƒè¿›è¡Œç»˜åˆ¶ï¼Œç»˜åˆ¶çš„æ–¹æ³•æ­£æ˜¯è¿™æ¬¡é—®é¢˜çš„å…³é”®ï¼Œé€šè¿‡ç»§æ‰¿UIViewå¹¶å®ç°-drawRect:æ–¹æ³•å³å¯è‡ªå®šä¹‰ç»˜åˆ¶ã€‚-drawRect: æ–¹æ³•æ²¡æœ‰é»˜è®¤çš„å®ç°ï¼Œå› ä¸ºå¯¹UIViewæ¥è¯´ï¼Œå¯„å®¿å›¾å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼ŒUIViewä¸å…³å¿ƒç»˜åˆ¶çš„å†…å®¹ã€‚å¦‚æœUIViewæ£€æµ‹åˆ°-drawRect:æ–¹æ³•è¢«è°ƒç”¨äº†ï¼Œå®ƒå°±ä¼šä¸ºè§†å›¾åˆ†é…ä¸€ä¸ªå¯„å®¿å›¾ï¼Œè¿™ä¸ªå¯„å®¿å›¾çš„åƒç´ å°ºå¯¸ç­‰äºè§†å›¾å¤§å°ä¹˜ä»¥contentsScale(è¿™ä¸ªå±æ€§ä¸å±å¹•åˆ†è¾¨ç‡æœ‰å…³ï¼Œæˆ‘ä»¬çš„ç”»æ¿ç¨‹åºåœ¨ä¸åŒæ¨¡æ‹Ÿå™¨ä¸‹å‘ˆç°çš„å†…å­˜ç”¨é‡ä¸åŒä¹Ÿæ˜¯å› ä¸ºå®ƒ)çš„å€¼</p>
<h4 id="æˆ‘ä»¬ç»å¸¸åœ¨drawrectæ–¹æ³•é‡Œç»˜åˆ¶ä»£ç ï¼Œä½†è¯¥æ–¹æ³•æ˜¯è°è°ƒç”¨çš„-ä½•æ—¶è°ƒç”¨çš„ï¼Ÿ"><a href="#æˆ‘ä»¬ç»å¸¸åœ¨drawrectæ–¹æ³•é‡Œç»˜åˆ¶ä»£ç ï¼Œä½†è¯¥æ–¹æ³•æ˜¯è°è°ƒç”¨çš„-ä½•æ—¶è°ƒç”¨çš„ï¼Ÿ" class="headerlink" title="æˆ‘ä»¬ç»å¸¸åœ¨drawrectæ–¹æ³•é‡Œç»˜åˆ¶ä»£ç ï¼Œä½†è¯¥æ–¹æ³•æ˜¯è°è°ƒç”¨çš„ ä½•æ—¶è°ƒç”¨çš„ï¼Ÿ"></a>æˆ‘ä»¬ç»å¸¸åœ¨drawrectæ–¹æ³•é‡Œç»˜åˆ¶ä»£ç ï¼Œä½†è¯¥æ–¹æ³•æ˜¯è°è°ƒç”¨çš„ ä½•æ—¶è°ƒç”¨çš„ï¼Ÿ</h4><p>[self.view addSubview:view]<br>[CALayer drawInContext:]<br>[UIView(CALayerDelegate) drawLayer:inContext:]<br>[ZYYView drawRect:]</p>
<h4 id="drawrectæ–¹æ³•å†…ä¸ºä½•ç¬¬ä¸€è¡Œä»£ç æ€»è¦è·å–å›¾å½¢çš„ä¸Šä¸‹æ–‡"><a href="#drawrectæ–¹æ³•å†…ä¸ºä½•ç¬¬ä¸€è¡Œä»£ç æ€»è¦è·å–å›¾å½¢çš„ä¸Šä¸‹æ–‡" class="headerlink" title="drawrectæ–¹æ³•å†…ä¸ºä½•ç¬¬ä¸€è¡Œä»£ç æ€»è¦è·å–å›¾å½¢çš„ä¸Šä¸‹æ–‡"></a>drawrectæ–¹æ³•å†…ä¸ºä½•ç¬¬ä¸€è¡Œä»£ç æ€»è¦è·å–å›¾å½¢çš„ä¸Šä¸‹æ–‡</h4><p>æ¯ä¸€ä¸ªUIViewéƒ½æœ‰ä¸€ä¸ªlayerï¼Œæ¯ä¸€ä¸ªlayeréƒ½æœ‰ä¸ªcontentï¼Œè¿™ä¸ªcontentæŒ‡å‘çš„æ˜¯ä¸€å—ç¼“å­˜ï¼Œå«åšbacking store<br>å½“UIViewè¢«ç»˜åˆ¶æ—¶ï¼ˆä» CA::Transaction::commit:ä»¥åï¼‰ï¼ŒCPUæ‰§è¡ŒdrawRectï¼Œé€šè¿‡contextå°†æ•°æ®å†™å…¥backing store<br>å½“backing storeå†™å®Œåï¼Œé€šè¿‡render serveräº¤ç»™GPUå»æ¸²æŸ“ï¼Œå°†backing storeä¸­çš„bitmapæ•°æ®æ˜¾ç¤ºåœ¨å±å¹•ä¸Š<br>æ‰€ä»¥åœ¨ drawRect æ–¹æ³•ä¸­ è¦é¦–å…ˆè·å– context</p>
<h4 id="layerçš„ä»£ç†å¿…é¡»æ˜¯viewå—ï¼Œå¯ä»¥æ˜¯vcå—ï¼Ÿä¸ºä½•CALayerDelegate-ä¸èƒ½ä¸»åŠ¨éµå¾ªï¼Ÿ"><a href="#layerçš„ä»£ç†å¿…é¡»æ˜¯viewå—ï¼Œå¯ä»¥æ˜¯vcå—ï¼Ÿä¸ºä½•CALayerDelegate-ä¸èƒ½ä¸»åŠ¨éµå¾ªï¼Ÿ" class="headerlink" title="layerçš„ä»£ç†å¿…é¡»æ˜¯viewå—ï¼Œå¯ä»¥æ˜¯vcå—ï¼Ÿä¸ºä½•CALayerDelegate ä¸èƒ½ä¸»åŠ¨éµå¾ªï¼Ÿ"></a>layerçš„ä»£ç†å¿…é¡»æ˜¯viewå—ï¼Œå¯ä»¥æ˜¯vcå—ï¼Ÿä¸ºä½•CALayerDelegate ä¸èƒ½ä¸»åŠ¨éµå¾ªï¼Ÿ</h4><p><img src="/26/2015/iOSä¸­çš„è§†å›¾æ¸²æŸ“/../../../images/delegate.png" alt="Text"></p>
<p>ä¸èƒ½å†å°†æŸä¸ªUIViewè®¾ç½®ä¸ºCALayerçš„delegateï¼Œå› ä¸ºUIViewå¯¹è±¡å·²ç»æ˜¯å®ƒå†…éƒ¨æ ¹å±‚çš„delegateï¼Œå†æ¬¡è®¾ç½®ä¸ºå…¶ä»–å±‚çš„delegateå°±ä¼šå‡ºé—®é¢˜ã€‚UIViewControlleræ˜¯å¯ä»¥çš„ã€‚åœ¨è®¾ç½®ä»£ç†çš„æ—¶å€™ï¼Œå®ƒå¹¶ä¸è¦æ±‚æˆ‘ä»¬éµå®ˆåè®®ï¼Œè¯´æ˜è¿™ä¸ªæ–¹æ³•ä¸ºéæ­£å¼åè®®ï¼Œå°±ä¸éœ€è¦å†é¢å¤–çš„æ˜¾ç¤ºéµå®ˆåè®®äº†</p>
<h4 id="iOS-ä¸ºä»€ä¹ˆå¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­æ“ä½œUI"><a href="#iOS-ä¸ºä»€ä¹ˆå¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­æ“ä½œUI" class="headerlink" title="iOS ä¸ºä»€ä¹ˆå¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­æ“ä½œUI"></a>iOS ä¸ºä»€ä¹ˆå¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­æ“ä½œUI</h4><p>å› ä¸ºUIKitä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è¯•æƒ³ä¸‹é¢è¿™å‡ ç§æƒ…å†µï¼š</p>
<ul>
<li>ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¾ç½®åŒä¸€ä¸ªèƒŒæ™¯å›¾ç‰‡ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½å› ä¸ºå½“å‰å›¾ç‰‡è¢«é‡Šæ”¾äº†ä¸¤æ¬¡è€Œå¯¼è‡´åº”ç”¨å´©æºƒã€‚</li>
<li>ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¾ç½®åŒä¸€ä¸ªUIViewçš„èƒŒæ™¯é¢œè‰²ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½æ¸²æŸ“æ˜¾ç¤ºçš„æ˜¯é¢œè‰²Aï¼Œè€Œæ­¤æ—¶åœ¨UIViewé€»è¾‘æ ‘ä¸Šçš„èƒŒæ™¯é¢œè‰²å±æ€§ä¸ºBã€‚</li>
<li>ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œviewçš„æ ‘å½¢ç»“æ„ï¼šåœ¨çº¿ç¨‹Aä¸­forå¾ªç¯éå†å¹¶æ“ä½œå½“å‰Viewçš„æ‰€æœ‰subViewï¼Œç„¶åæ­¤æ—¶çº¿ç¨‹Bä¸­å°†æŸä¸ªsubViewç›´æ¥åˆ é™¤ï¼Œè¿™å°±å¯¼è‡´äº†é”™ä¹±è¿˜å¯èƒ½å¯¼è‡´åº”ç”¨å´©æºƒã€‚ </li>
</ul>
<p>iOS4ä¹‹åè‹¹æœå°†å¤§éƒ¨åˆ†ç»˜å›¾çš„æ–¹æ³•å’Œè¯¸å¦‚ UIColor å’Œ UIFont è¿™æ ·çš„ç±»æ”¹å†™ä¸ºäº†çº¿ç¨‹å®‰å…¨å¯ç”¨ï¼Œä½†æ˜¯ä»ç„¶å¼ºçƒˆå»ºè®®è®²UIæ“ä½œä¿è¯åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œã€‚</p>
<h4 id="å¦‚ä½•æ‰©å¤§buttonçš„æƒ¦è®°èŒƒå›´"><a href="#å¦‚ä½•æ‰©å¤§buttonçš„æƒ¦è®°èŒƒå›´" class="headerlink" title="å¦‚ä½•æ‰©å¤§buttonçš„æƒ¦è®°èŒƒå›´"></a>å¦‚ä½•æ‰©å¤§buttonçš„æƒ¦è®°èŒƒå›´</h4>]]></content>
      
        
        <tags>
            
            <tag> iOSåŸºç¡€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[OCä¸­çš„å„ç§å˜é‡]]></title>
      <url>/2015/06/10/2015/OC%E4%B8%AD%E7%9A%84%E5%90%84%E7%A7%8D%E5%8F%98%E9%87%8F/</url>
      <content type="html"><![CDATA[<p>é¦–å…ˆçœ‹ä¸€ä¸‹å‡ ä¸ªæ¦‚å¿µåˆ†ç±»ï¼š</p>
<ul>
<li>æˆå‘˜å˜é‡</li>
<li>å±æ€§</li>
<li>å±€éƒ¨å˜é‡</li>
<li>å…¨å±€å˜é‡</li>
<li>é™æ€å˜é‡ = å…¨å±€å˜é‡ + staticå£°æ˜çš„å±€éƒ¨å˜é‡<a id="more"></a>
</li>
</ul>
<blockquote>
<p>é¦–å…ˆå£°æ˜ï¼š</p>
<ul>
<li>å…¨å±€å˜é‡å’Œé™æ€å˜é‡éƒ½å­˜åœ¨äºå…¨å±€å†…å­˜åŒºï¼Œåœ¨appç”Ÿå‘½å‘¨æœŸå†…åªåˆå§‹åŒ–ä¸€æ¬¡</li>
<li>å±€éƒ¨å˜é‡å­˜åœ¨äºæ ˆå†…å­˜åŒº</li>
<li>è¿™é‡Œæ‰€è®¨è®ºçš„æ˜¯å˜é‡ï¼Œè€Œä¸æ˜¯å˜é‡çš„å€¼ï¼Œè¿™é‡Œä¸¤ä¸ªæ¦‚å¿µ<code>int a = 10</code>ï¼Œaæ˜¯å˜é‡ï¼Œè€Œ10æ˜¯å®ƒçš„å€¼ï¼Œè¿™æ˜¯ä¸¤ä¸ªæ¦‚å¿µ</li>
<li>åœ°ä½å†…å­˜æ˜¯å…¨å±€å˜é‡åŒºï¼Œé«˜ä½å†…å­˜æ˜¯å †æˆ–è€…æ ˆ<code>0x108eae338</code>9ä½ï¼Œ <code>0x7fff56d52ad4</code>12ä½</li>
</ul>
</blockquote>
<h2 id="æˆå‘˜å˜é‡var"><a href="#æˆå‘˜å˜é‡var" class="headerlink" title="æˆå‘˜å˜é‡var"></a>æˆå‘˜å˜é‡var</h2><blockquote>
<p>å®šä¹‰ï¼šå˜é‡å­˜æ´»å‘¨æœŸè·Ÿä½ å®šä¹‰çš„è¯¥ç±»å®ä½“å¯¹è±¡ä¸€æ ·ï¼›ä½œç”¨åŸŸæ˜¯æ•´ä¸ªå®ä½“å¯¹è±¡ï¼›å¯ä»¥åœ¨hæ–‡ä»¶ä¸­å£°æ˜æˆ–è€…åœ¨mæ–‡ä»¶ä¸­@implementationä¸Šé¢æ·»åŠ çš„</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">@interface CustomView1()</div><div class="line">&#123;</div><div class="line">	UIView *_backView1;</div><div class="line">&#125;</div><div class="line">@property (nonatomic, strong) UIView *backView;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>ä¸Šè¾¹çš„ä¸¤ç§å†™æ³•éƒ½æ˜¯å¯¹çš„ï¼Œéƒ½ä»£è¡¨æ˜¯ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡ï¼Œåªä¸è¿‡@propertyå…³é”®å­—åšçš„äº‹æƒ…æ¯”è¾ƒå¤šï¼Œä¸Šè¾¹ç±»åç§°+()å«åšextensionï¼Œç±»æ‰©å±•ï¼Œå¦‚æœæœ‰æ‹¬å·å†…åŠ ä¸Šåå­—å«åšcategoryï¼Œæ˜¯åˆ†ç±»ã€‚æˆå‘˜å˜é‡å£°æ˜å‘¨æœŸä¸ç±»çš„å¯¹è±¡ç›¸åŒã€‚<br>æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†ä¸€ä¸ªå¯¹è±¡èµ‹å€¼ç»™æˆå‘˜å˜é‡æ¥æå‡ä»–çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h2 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h2><p>@propertyå…³é”®å­—æ ‡è¯†çš„å˜é‡</p>
<h2 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h2><blockquote>
<p>å…¨å±€å˜é‡æŒ‡çš„æ˜¯å­˜åœ¨äºå…¨å±€å†…å­˜åŒºï¼Œè¿™ä¸ªappå£°æ˜å‘¨æœŸåªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œåœ¨æ‰€æœ‰çš„æ–‡ä»¶ä¸­ä¸å…è®¸é‡åï¼Œä¸‹é¢çš„æƒ…å†µå‡å±äºå…¨å±€å˜é‡<br>.mæ–‡ä»¶ä¸­<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">int a;</div><div class="line"></div><div class="line">@interface CustomView1()</div><div class="line"></div><div class="line">@end</div><div class="line">int b;</div><div class="line">@implementation CustomView1</div><div class="line">int c;</div><div class="line">CustomView *_backView;</div><div class="line"></div><div class="line">- (instancetype)initWithFrame:(CGRect)frame &#123;</div><div class="line">    if (self = [super initWithFrame:frame]) &#123;</div><div class="line">        [self initSubViews];</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure></p>
<p>è¯´æ˜ï¼šaï¼Œbï¼Œcå‡ä¸ºå…¨å±€å˜é‡</p>
</blockquote>
<p>.hæ–‡ä»¶ä¸­<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">int d;</div><div class="line">@interface CustomView1</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure></p>
<blockquote>
<p>è¯´æ˜ï¼šä¸»è¦ä¸æ˜¯åœ¨interfaceå…³é”®å­—ä¸endå…³é”®å­—ä¹‹é—´éƒ½æ˜¯å…¨å±€å˜é‡ï¼Œå¦‚æœå…¶ä»–æ–‡ä»¶ä¸­æœ‰è¿™ä¸ªåå­—çš„å˜é‡ï¼Œé‚£ä¹ˆç¼–è¯‘æ—¶ä¸èƒ½å¤Ÿé€šè¿‡çš„</p>
</blockquote>
<p>å…¨å±€å˜é‡å¯ä»¥æä¾›å…¨éƒ¨çš„å¤–ç•Œè®¿é—®ï¼Œæ— è®ºä½ å®šä¹‰åœ¨hæ–‡ä»¶æˆ–è€…æ˜¯mæ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”æ— éœ€å¼•å…¥å¤´æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å†é‡æ–°å†å®šä¹‰ä¸€ä¸‹è¿™ä¸ªå˜é‡ï¼Œå¦åˆ™ç¼–è¯‘å™¨æ˜¯ä¸ä¼šé€šè¿‡çš„ï¼Œä»–æ€ä¹ˆçŸ¥é“ä½ æœ‰è¿™ä¸ªå˜é‡å‘¢ï¼Œä½ è¯´æ˜¯å§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åƒä¸‹è¾¹è¿™æ ·æ¥ä½¿ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">#import &quot;ViewController.h&quot;</div><div class="line">#import &quot;CustomView1.h&quot;</div><div class="line"></div><div class="line">typedef void(^MyBlcok)();</div><div class="line">NSString * const waha = @&quot;lalala&quot;;</div><div class="line"></div><div class="line">@interface ViewController ()</div><div class="line"></div><div class="line">@property (nonatomic, copy) MyBlcok myBlock;</div><div class="line">@property (nonatomic, strong) UIView *backView;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line"></div><div class="line">#import &quot;AppDelegate.h&quot;</div><div class="line"></div><div class="line">@interface AppDelegate ()</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">@implementation AppDelegate</div><div class="line"></div><div class="line"></div><div class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;</div><div class="line">    // Override point for customization after application launch.</div><div class="line">    extern NSString *waha;</div><div class="line"></div><div class="line">    NSLog(@&quot;appdelegate***%@---%p&quot;, waha, &amp;waha);</div><div class="line">    return YES;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>æˆ‘ä»¬éœ€è¦å†é‡æ–°å®šä¹‰ä¸€ä¸‹è¿™ä¸ªå˜é‡ï¼Œå¦åˆ™ç¼–è¯‘å™¨æ˜¯é€šä¸è¿‡çš„ï¼Œä¸è¿‡è¦å°†è¿™å˜é‡å˜ä¸ºå…¨å±€æ‰å¯ä»¥ï¼Œå…¶å®ä¹Ÿå°±æ˜¯æ”¹å˜ä¸€ä¸‹å®ƒçš„å†…å­˜ä½ç½®ï¼Œå°†å…¶ä»æ ˆç§»åŠ¨åˆ°å…¨å±€å†…å­˜ä¸­å»</p>
</blockquote>
<h3 id="static-å…¨å±€å˜é‡"><a href="#static-å…¨å±€å˜é‡" class="headerlink" title="static + å…¨å±€å˜é‡"></a>static + å…¨å±€å˜é‡</h3><p>è¿™ç§æ–¹å¼çš„è¯è¿™ä¸ªå…¨å±€å˜é‡å°±ä¼šå˜æˆè¿™ä¸ªç±»æ‰€ç§æœ‰çš„ï¼Œå£°æ˜å‘¨æœŸä¸è¯¥ç±»ç›¸åŒï¼Œå…è®¸é‡å</p>
<h3 id="iOSä¸­ä½¿ç”¨å…¨å±€å˜é‡çš„æ–¹æ³•"><a href="#iOSä¸­ä½¿ç”¨å…¨å±€å˜é‡çš„æ–¹æ³•" class="headerlink" title="iOSä¸­ä½¿ç”¨å…¨å±€å˜é‡çš„æ–¹æ³•"></a>iOSä¸­ä½¿ç”¨å…¨å±€å˜é‡çš„æ–¹æ³•</h3><ul>
<li>é™æ€å˜é‡</li>
<li>å•ä¾‹</li>
<li>åœ¨æŸä¸ªç°æˆçš„å•ä¾‹ä¸­å¢åŠ å±æ€§ä¾‹å¦‚:appdelegate</li>
</ul>
<h2 id="å±€éƒ¨å˜é‡"><a href="#å±€éƒ¨å˜é‡" class="headerlink" title="å±€éƒ¨å˜é‡"></a>å±€éƒ¨å˜é‡</h2><p>é™¤äº†å…¨å±€å˜é‡å‰©ä¸‹çš„éƒ½æ˜¯å±€éƒ¨å˜é‡ï¼Œå†…å­˜æ˜¯åœ¨æ ˆä¸Šçš„ï¼Œå¦‚æœç”¨å…³é”®å­—staticæ¥ä¿®é¥°å±€éƒ¨å˜é‡é‚£ä¹ˆå®ƒå°±å˜æˆäº†ä¸€ä¸ªé™æ€å˜é‡ï¼Œå†…å­˜ä¹Ÿåˆ°äº†å…¨å±€å˜é‡åŒºï¼Œåªæ˜¯ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿäº†æ”¹å˜ï¼Œä½†æ˜¯ä½œç”¨åŸŸå¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚</p>
<ul>
<li>å¦‚æœç”¨externæ¥ä¿®é¥°å±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šç›´æ¥å†…å­˜åŒºå˜ä¸ºå…¨å±€åŒºï¼Œç”Ÿå‘½å‘¨æœŸå’Œappä¸€æ ·äº†ã€‚å¦‚æœåè¾¹å†æœ‰å…¶ä»–çš„åŒåå…¨å±€å˜é‡ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯åè¾¹ç”Ÿå‘½çš„é‚£ä¸ªä¸ä¼šç”Ÿæ•ˆçš„ï¼Œä¸è¿‡å€¼è¿˜æ˜¯å…è®¸æ”¹çš„ã€‚å¯ä»¥æ‰“å°æ¥éªŒè¯ä¸€ä¸‹ï¼Œæ— è®ºä½ åœ¨åè¾¹å£°æ˜å¤šå°‘ä¸ªè¯¥åŒåå˜é‡ï¼Œä»–ä»¬çš„åœ°å€æ€»æ˜¯ä¸€æ ·çš„ã€‚</li>
</ul>
<h2 id="å¸¸é‡ä¸constå…³é”®å­—"><a href="#å¸¸é‡ä¸constå…³é”®å­—" class="headerlink" title="å¸¸é‡ä¸constå…³é”®å­—"></a>å¸¸é‡ä¸constå…³é”®å­—</h2><p>é¡¾åæ€ä¹‰ï¼Œå¸¸é‡å°±æ˜¯ä¸èƒ½è¢«ä¿®æ”¹çš„å˜é‡ï¼Œè¯´åˆ°è¿™é‡Œæˆ‘å°±æœ‰ä¸€ä¸ªç–‘é—®ï¼Œè¿™ä¸ªè·Ÿå®æœ‰å•¥åŒºåˆ«ï¼Ÿ</p>
<ul>
<li>constç®€ä»‹ï¼šä¹‹å‰å¸¸ç”¨çš„å­—ç¬¦ä¸²å¸¸é‡ï¼Œä¸€èˆ¬æ˜¯æŠ½æˆå®ï¼Œä½†æ˜¯è‹¹æœä¸æ¨èæˆ‘ä»¬æŠ½æˆå®ï¼Œæ¨èæˆ‘ä»¬ä½¿ç”¨constå¸¸é‡ã€‚</li>
<li>ç¼–è¯‘æ—¶åˆ»:å®æ˜¯é¢„ç¼–è¯‘ï¼ˆç¼–è¯‘ä¹‹å‰å¤„ç†ï¼‰ï¼Œconstæ˜¯ç¼–è¯‘é˜¶æ®µã€‚</li>
<li>ç¼–è¯‘æ£€æŸ¥:å®ä¸åšæ£€æŸ¥ï¼Œä¸ä¼šæŠ¥ç¼–è¯‘é”™è¯¯ï¼Œåªæ˜¯æ›¿æ¢ï¼Œconstä¼šç¼–è¯‘æ£€æŸ¥ï¼Œä¼šæŠ¥ç¼–è¯‘é”™è¯¯ã€‚</li>
<li>å®çš„å¥½å¤„:å®èƒ½å®šä¹‰ä¸€äº›å‡½æ•°ï¼Œæ–¹æ³•ã€‚ constä¸èƒ½ã€‚</li>
<li>å®çš„åå¤„:ä½¿ç”¨å¤§é‡å®ï¼Œå®¹æ˜“é€ æˆç¼–è¯‘æ—¶é—´ä¹…ï¼Œæ¯æ¬¡éƒ½éœ€è¦é‡æ–°æ›¿æ¢ã€‚</li>
<li>æ³¨æ„:å¾ˆå¤šBlogéƒ½è¯´ä½¿ç”¨å®ï¼Œä¼šæ¶ˆè€—å¾ˆå¤šå†…å­˜ï¼Œæˆ‘è¿™éªŒè¯å¹¶ä¸ä¼šç”Ÿæˆå¾ˆå¤šå†…å­˜ï¼Œå®å®šä¹‰çš„æ˜¯å¸¸é‡ï¼Œå¸¸é‡éƒ½æ”¾åœ¨å¸¸é‡åŒºï¼Œåªä¼šç”Ÿæˆä¸€ä»½å†…å­˜</li>
</ul>
<p>æˆ‘ä»¬ç¡®å®å¯ä»¥é€‰æ‹©ä½¿ç”¨å®æ¥å®šä¹‰ä¸€ä¸ªå¸¸é‡ï¼Œç„¶åç»™å¾ˆå¤šåœ°æ–¹ä½¿ç”¨ï¼Œå½“æˆ‘éœ€è¦æ”¹å˜è¿™ä¸ªå˜é‡çš„æ—¶å€™ï¼Œæˆ‘åªè¦æ”¹å˜è¿™ä¸ªå®åè¾¹çš„å€¼å°±å¯ä»¥äº†ï¼Œä½¿ç”¨çš„åœºæ™¯æ¯”å¦‚ï¼š</p>
<ul>
<li>é¡¹ç›®ä¸­çš„url</li>
<li>é¡¹ç›®ä¸­çš„å±å¹•å°ºå¯¸</li>
<li>é¡¹ç›®ä¸­çš„æŸäº›ç‰¹å®šé¢œè‰²å’Œå°ºå¯¸</li>
</ul>
<p>æœ‰äº›åœ°æ–¹å®ä¼šä½“ç°å‡ºå®ƒçš„ä¼˜åŠ¿ï¼Œæ¯”å¦‚ä¸€äº›ä»£ç å—çš„æ›¿æ¢ï¼Œå…·ä½“æ¥è¯´ï¼Œæ¯”å¦‚å±å¹•çš„å°ºå¯¸çš„è·å–ï¼Œæ¯”å¦‚weakSelfçš„å®šä¹‰ï¼Œä½†æ˜¯ä½¿ç”¨å¸¸é‡çš„æƒ…å†µä½¿ç”¨å®æ˜¯æœ‰äº›é—®é¢˜çš„ï¼Œå°±æ˜¯å› ä¸ºå®æ˜¯æ²¡æœ‰ç±»å‹åˆ¤æ–­çš„ï¼Œé‚£ä¹ˆå¦‚æœæŸä¸ªCGFloatçš„å€¼ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å®ï¼Œé‚£ä¹ˆç¼–è¯‘é˜¶æ®µå°±ä¸ä¼šè­¦å‘Šä»»ä½•é”™è¯¯ï¼Œå“ªæ€•ä½ å®šä¹‰äº†ä¸€ä¸ªNSStringç±»å‹çš„å®ï¼Œç„¶åä½ åˆæŠŠå®ƒå½“åšäº†CGFloatæ¥ä½¿ç”¨ï¼Œæ‰€ä»¥å¯¹äºæŸäº›å€¼å¾—å®šä¹‰ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ç±»å‹å¸¸é‡ï¼Œè€Œä¸ç”¨å®æ¥å®šä¹‰ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>åŠ¨ç”»æ—¶é—´</li>
<li>æŒ‰é’®å°ºå¯¸</li>
<li>æ–‡å­—å°ºå¯¸</li>
<li>ç­‰ç­‰</li>
</ul>
<p>å…·ä½“æ¥è®²åˆå¯èƒ½åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š</p>
<ul>
<li>å…¨éƒ¨æ–‡ä»¶éƒ½ä½¿ç”¨</li>
<li>åªç»™è‡ªå·±ä½¿ç”¨</li>
</ul>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ç»™è‡ªå·±ä½¿ç”¨çš„å¸¸é‡çš„å®šä¹‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">#import &quot;key1.h&quot;</div><div class="line"></div><div class="line">static const NSTimeInterval kAnimationDuration = 0.2;</div><div class="line"></div><div class="line">@interface key1()</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">@implementation key1</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>è¦ç‚¹æœ‰ä¸¤ä¸ªï¼š</p>
<ul>
<li>è¦ç”¨staticå’ŒconståŒæ—¶æ¥å£°æ˜</li>
<li>å£°æ˜åœ¨å…³é”®å­—ä¹‹å¤–</li>
</ul>
<p>å£°æ˜åœ¨å…³é”®å­—ä¹‹å¤–é‚£ä¹ˆå°±æ˜¯å…¨å±€å˜é‡ï¼Œåˆå› ä¸ºæ˜¯ç»™è‡ªå·±ç”¨çš„ï¼Œæ‰€ä»¥è¦åŠ ä¸Šstaticåšé™åˆ¶ï¼Œè€Œconstæ˜¯ä¸ºäº†é˜²æ­¢è¿™ä¸ªå˜é‡åœ¨åè¾¹è¢«ä¿®æ”¹</p>
<p>å†æ¥çœ‹ä¸€ä¸‹å…¨å±€ä½¿ç”¨çš„å¸¸é‡ï¼Œæ­¤ç±»å¸¸é‡éœ€è¦æ”¾åœ¨<code>å…¨å±€ç¬¦å·è¡¨</code>,ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç»™å…¨å±€ä½¿ç”¨çš„å¸¸é‡æ˜¯å¦‚ä½•æ¥å®šä¹‰çš„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//In the header file</div><div class="line">extern NSString *const EOCStringConst;//è¿™æ ·çš„constçš„ä½ç½®æ„å‘³ç€è¿™ä¸ªæŒ‡é’ˆæ˜¯ä¸€ä¸ªå¸¸é‡</div><div class="line"></div><div class="line">//In the implementation file</div><div class="line">NSString *const EOCStringConstant = @&quot;VALUE&quot;;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>è¿™ç§å¸¸é‡ä¸€èˆ¬åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜ï¼Œç„¶ååœ¨å®ç°æ–‡ä»¶ä¸­å®šä¹‰ï¼Œæ³¨æ„constçš„ä½ç½®ï¼Œä¸å…è®¸æ›´æ”¹æŒ‡é’ˆçš„æŒ‡å‘ï¼Œå¦å¤–ç¼–è¯‘å™¨çœ‹åˆ°externå…³é”®å­—ï¼Œå°±æ˜ç™½åœ¨å…¨å±€ç¬¦å·è¡¨ä¸­å°†ä¼šæœ‰ä¸€ä¸ªåå­—å«EOCStringConstantçš„ç¬¦å·äº†ï¼Œ</p>
</blockquote>
<h2 id="staticå’Œextern"><a href="#staticå’Œextern" class="headerlink" title="staticå’Œextern"></a>staticå’Œextern</h2><blockquote>
<p>staticä½œç”¨ï¼š</p>
<ul>
<li>ä¿®é¥°å±€éƒ¨å˜é‡<ul>
<li>å»¶é•¿å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸ</li>
<li>å±€éƒ¨å˜é‡åªä¼šç”Ÿæˆä¸€ä»½å†…å­˜ï¼Œåˆå§‹åŒ–ä¸€æ¬¡</li>
<li>æ”¹å˜å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸ</li>
</ul>
</li>
<li>ä¿®é¥°å…¨å±€å˜é‡<ul>
<li>åªèƒ½åœ¨æœ¬æ–‡ä»¶è®¿é—®ï¼Œä¿®æ”¹å…¨å±€å˜é‡çš„ä½œç”¨åŸŸï¼Œç”Ÿå‘½å‘¨æœŸä¸å˜</li>
<li>é¿å…é‡å¤å®šä¹‰å…¨å±€å˜é‡</li>
</ul>
</li>
</ul>
<p>extern</p>
<ul>
<li>ä½œç”¨ï¼šè·å–å…¨å±€å˜é‡çš„å€¼ï¼Œä¸èƒ½ç”¨æ¥å®šä¹‰å˜é‡</li>
<li>å·¥ä½œåŸç†ï¼šç°åœ¨å½“å‰æ–‡ä»¶æŸ¥æ‰¾æœ‰æœ¨æœ‰å…¨å±€å˜é‡ï¼Œæ²¡æœ‰çš„è¯æ‰å»å…¶ä»–æ–‡ä»¶æŸ¥æ‰¾</li>
</ul>
</blockquote>
<h2 id="staticå’Œconst"><a href="#staticå’Œconst" class="headerlink" title="staticå’Œconst"></a>staticå’Œconst</h2><p>staticä¸constä½œç”¨:å£°æ˜ä¸€ä¸ªåªè¯»çš„é™æ€å˜é‡</p>
<h2 id="externä¸constè”åˆä½¿ç”¨"><a href="#externä¸constè”åˆä½¿ç”¨" class="headerlink" title="externä¸constè”åˆä½¿ç”¨"></a>externä¸constè”åˆä½¿ç”¨</h2><ul>
<li><p>å¼€å‘ä¸­ä½¿ç”¨åœºæ™¯:åœ¨å¤šä¸ªæ–‡ä»¶ä¸­ç»å¸¸ä½¿ç”¨çš„åŒä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡ï¼Œå¯ä»¥ä½¿ç”¨externä¸constç»„åˆã€‚</p>
<ul>
<li>åŸå› :staticä¸constç»„åˆï¼šåœ¨æ¯ä¸ªæ–‡ä»¶éƒ½éœ€è¦å®šä¹‰ä¸€ä»½é™æ€å…¨å±€å˜é‡ã€‚</li>
<li>externä¸constç»„åˆ:åªéœ€è¦å®šä¹‰ä¸€ä»½å…¨å±€å˜é‡ï¼Œå¤šä¸ªæ–‡ä»¶å…±äº«ã€‚</li>
</ul>
</li>
<li><p>å…¨å±€å¸¸é‡æ­£è§„å†™æ³•:å¼€å‘ä¸­ä¾¿äºç®¡ç†æ‰€æœ‰çš„å…¨å±€å˜é‡ï¼Œé€šå¸¸æä¸€ä¸ªGlobeConstæ–‡ä»¶ï¼Œé‡Œé¢ä¸“é—¨å®šä¹‰å…¨å±€å˜é‡ï¼Œç»Ÿä¸€ç®¡ç†ï¼Œè¦ä¸ç„¶é¡¹ç›®æ–‡ä»¶å¤šä¸å¥½æ‰¾ã€‚</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">GlobeConst.h</div><div class="line"></div><div class="line">/*******************************é¦–é¡µ****************************/</div><div class="line">extern NSString * const nameKey = @&quot;name&quot;;</div><div class="line">/*******************************é¦–é¡µ****************************/</div><div class="line"></div><div class="line">GlobeConst.m</div><div class="line"></div><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line">/*******************************é¦–é¡µ****************************/</div><div class="line">NSString * const nameKey = @&quot;name&quot;;</div><div class="line">/*******************************é¦–é¡µ****************************/</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç°åœ¨æ¥ç†è§£ä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼Œå…¶å®åº”è¯¥åè¿‡æ¥çœ‹ï¼Œé¦–å…ˆæˆ‘ä»¬åœ¨.mæ–‡ä»¶ä¸­å£°æ˜å¹¶ä¸”å¯¹nameKeyè¿›è¡Œäº†èµ‹å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨.hæ–‡ä»¶ä¸­æ‰å¯ä»¥é€šè¿‡externæ¥å–åˆ°nameKeyçš„å€¼ï¼Œå¹¶ä¸”ä½¿ç”¨ï¼Œå…¶å®æˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹è¿›è¡ŒnameKeyçš„å–å€¼ï¼Œæ¯”å¦‚å¦å¤–ä¸€ä¸ªä¸ç›¸å…³çš„.mæ–‡ä»¶ï¼Œåªä¸è¿‡è¿™æ ·åšä¼šæ¯”è¾ƒç¹çï¼Œéœ€è¦é‡æ–°å£°æ˜è¿™ä¸ªå˜é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»Ÿä¸€å°†è¿™äº›ä¸ªé™æ€å˜é‡ä»¥externçš„æ–¹å¼å£°æ˜å‡ºæ¥ï¼Œæ”¾åœ¨.hæ–‡ä»¶ä¸­ï¼Œè®©å…¶ä»–çš„æ–‡ä»¶è°ƒç”¨ï¼Œæ³¨æ„ï¼Œè¿™é‡Œæ˜¯ä¸èƒ½è¿›è¡Œèµ‹å€¼æ“ä½œçš„</p>
<blockquote>
<p>è¿™é‡Œåšä¸€ä¸ªè¾¨æï¼šå…¨å±€å˜é‡å¹¶ä¸æ˜¯å› ä¸ºä½ ç”¨externå…³é”®å­—ï¼Œå…¨å±€å˜é‡æ˜¯ç”±ä½ å˜é‡å£°æ˜çš„ä½ç½®æ‰€å†³å®šçš„ï¼Œè€Œexternå…¶å®æ˜¯ä¸€ä¸ªå–å€¼çš„æ“ä½œï¼ŒåŒæ—¶å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªå˜é‡æ— è®ºå£°æ˜åœ¨å“ªé‡Œï¼Œæˆ‘çŸ¥é“è¿™ä¸ªå…¨å±€å˜é‡æ˜¯å­˜åœ¨çš„ï¼Œæ”¾å¿ƒçš„ä½¿ç”¨å°±å¥½ï¼Œä½†æ˜¯å¦‚æœçœŸçš„è¿™ä¸ªå…¨å±€å˜é‡æ˜¯ä¸å­˜åœ¨çš„ï¼Œæ¯”å¦‚è¯´ä½ æŠŠå®ƒå£°æ˜å®šä¹‰åœ¨äº†æŸä¸ªå‡½æ•°å†…éƒ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™è‚¯å®šæŠ¥é”™äº†<br>å¦å¤–æˆ‘ä»¬ä½¿ç”¨<code>extern NSString *name = @&quot;åå­—&quot;</code>è¿™ç§å†™æ³•æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºexternæ˜¯å–å€¼æ“ä½œï¼Œè¿™æ ·å†™ç¼–è¯‘å™¨ä¹Ÿä¼šæŠ¥é”™çš„</p>
</blockquote>
<p>å…³äºexternå…³é”®å­—æ€»ç»“å¦‚ä¸‹ï¼š</p>
<ul>
<li><ol>
<li>Declaration can be done any number of times but definition only once.</li>
</ol>
</li>
<li><ol>
<li>â€œexternâ€ keyword is used to extend the visibility of variables/functions().</li>
</ol>
</li>
<li><ol>
<li>Since functions are visible through out the program by default. The use of extern is not needed in function declaration/definition. Its use is redundant.</li>
</ol>
</li>
<li><ol>
<li>When extern is used with a variable, itâ€™s only declared not defined.</li>
</ol>
</li>
<li><ol>
<li>As an exception, when an extern variable is declared with initialization, it is taken as definition of the variable as well.</li>
</ol>
</li>
</ul>
<h2 id="weak-ä¸-strong"><a href="#weak-ä¸-strong" class="headerlink" title="weak ä¸ strong"></a><strong>weak ä¸ </strong>strong</h2><p>å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå˜é‡çš„æ—¶å€™<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">UIView *view;</div><div class="line">view = [UIView alloc] init];</div></pre></td></tr></table></figure></p>
<p>å…¶å®è¿™ä¸ªviewå‰è¾¹é»˜è®¤æœ‰ä¸€ä¸ªå…³é”®å­—ï¼Œé‚£å°±æ˜¯__strongï¼Œè¿™æ˜¯å› ä¸ºè¿™ä¸ªå…³é”®å­—ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„=èµ‹å€¼çš„æ—¶å€™ï¼Œæ˜¯ä¸€ä¸ªå¼ºå¼•ç”¨ï¼Œæ‰€ä»¥allocåˆ›å»ºå‡ºæ¥çš„å¯¹è±¡æ˜¯ä¸ä¼šè¢«é‡Šæ”¾çš„ï¼Œåˆå› ä¸ºviewè¿™ä¸ªå˜é‡è¢«å®šä¹‰åœ¨æ ˆä¸Šï¼Œæ‰€ä»¥å½“ä»£ç æ‰§è¡Œåˆ°ä¸€ä¸ªå‡½æ•°ç»“æŸçš„æ—¶å€™ï¼Œè¿™ä¸ªviewå˜é‡ä¼šè¢«é‡Šæ”¾ï¼Œè¿™æ ·allocå‡ºæ¥çš„å¯¹è±¡å°±å¤±å»äº†å¼ºå¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å†…å­˜ä¹Ÿå°†è¢«ç³»ç»Ÿæ‰€å›æ”¶ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬æ¥ç†è§£ä¸€ä¸‹blockçš„èµ‹å€¼æ“ä½œï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå½“ä¸€ä¸ªblockè¢«åˆ›å»ºçš„æ—¶å€™ï¼Œå‡å¦‚æ²¡æœ‰æ•è·å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªblockæ˜¯å®šä¹‰åœ¨å…¨å±€çš„ï¼Œå¯¹å…¨å±€blockåšä¸€ä¸ªå¼ºå¼•ç”¨çš„èµ‹å€¼æ“ä½œæ˜¯ä¸ä¼šæ”¹å˜å®ƒçš„å­˜å‚¨ä½ç½®çš„ï¼Œå¦‚æœè¿™ä¸ªblockæ•è·äº†ä¸€ä¸ªæ ˆä¸Šçš„å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªblockå°±ä¼šè¢«ç§»åŠ¨åˆ°æ ˆä¸Šï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœæˆ‘ä»¬å¯¹è¿™ä¸ªblockåšäº†ä¸€ä¸ªå¼ºå¼•ç”¨çš„èµ‹å€¼æ“ä½œï¼Œè¿™ä¸ªblockå°±è¢«ç§»åŠ¨åˆ°äº†å †ä¸Šã€‚å†…å­˜ç®¡ç†ç­–ç•¥å°±å˜æˆäº†æ˜¯å¦æœ‰å¼ºæŒ‡é’ˆå¼•ç”¨</p>
<h2 id="ä½¿ç”¨å¸¸é‡æ›¿æ¢å®å®šä¹‰"><a href="#ä½¿ç”¨å¸¸é‡æ›¿æ¢å®å®šä¹‰" class="headerlink" title="ä½¿ç”¨å¸¸é‡æ›¿æ¢å®å®šä¹‰"></a>ä½¿ç”¨å¸¸é‡æ›¿æ¢å®å®šä¹‰</h2><p>ä½¿ç”¨å®å®šä¹‰è¿‡å¤šçš„è¯ï¼Œéšç€å·¥ç¨‹è¶Šæ¥è¶Šå¤§ï¼Œç¼–è¯‘é€Ÿåº¦ä¼šè¶Šæ¥è¶Šæ…¢ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">static CGFloat const kLogoImageWidth = 100; //logoå®½åº¦</div><div class="line">static CGFloat const kLogoImageHeight = 100; //logoå®½åº¦static CGFloat const kLogoImageY = 110;</div><div class="line">static CGFloat const kBtnHeight = 40;</div><div class="line">static CGFloat const kPadding = 30;</div><div class="line">static CGFloat const kWeixinTopPadding = 15;</div><div class="line">static CGFloat const kWeiboLoginBottom = 230;</div><div class="line">#define kScaleSpace(designSpace) ((designSpace)(SCREEN_HEIGHT/667.0)) //æ ¹æ®iphone6 çš„è®¾è®¡ç¨¿è®¡ç®—ç¼©æ”¾é«˜åº¦</div></pre></td></tr></table></figure></p>
<p>æ›¿æ¢å®Œæˆä¹‹åä»£ç çš„ç¼–è¯‘é€Ÿåº¦ç¡®å®ä¸Šå»äº†ï¼Œç°åœ¨ç¼–è¯‘å¿«äº†ã€‚å¸Œæœ›å¯¹æ­£åœ¨ä¸ºç¼–è¯‘é€Ÿåº¦æ…¢æ„Ÿåˆ°å›°æƒ‘çš„æ‚¨æœ‰æ‰€å¸®åŠ©</p>
<blockquote>
<p>è¡¥å……è¯´æ˜ï¼šä»¥ä¸Šçš„ç±»å‹å¸¸é‡æ›¿æ¢å®çš„æƒ…å†µï¼Œåªæ˜¯é€‚ç”¨äºå•ä¸ªæ–‡ä»¶çš„æƒ…å†µã€‚å¦‚æœæ˜¯å¤šä¸ªæ–‡ä»¶å…±äº«çš„å¸¸é‡ï¼Œè‹¹æœæ¨èçš„è¿™æ ·çš„æ–¹å¼ï¼š</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">UserInfoModelConstants.h</div><div class="line"></div><div class="line">extern NSString *const USER_AGE_KEY ;</div><div class="line">extern NSString *const USER_TELPHONE_KEY ;</div><div class="line">extern NSString *const USER_ADDRESS_KEY ;</div><div class="line">extern NSString *const USER_BRIEF_KEY ;</div><div class="line"></div><div class="line">UserInfoModelConstants.m</div><div class="line"></div><div class="line">NSString *const BKUSER_AGE_KEY = @&quot;XXXXX.userAge&quot;;</div><div class="line">NSString *const BKUSER_TELPHONE_KEY = @&quot;XXXXX.telphoneNO&quot;;</div><div class="line">NSString *const BKUSER_ADDRESS_KEY = @&quot;XXXXX.address&quot;;</div><div class="line">NSString *const BKUSER_BRIEF_KEY = @&quot;XXXXX.brief&quot;;</div></pre></td></tr></table></figure>
<p>åœ¨éœ€è¦ä½¿ç”¨å…±äº«å¸¸é‡çš„æ–‡ä»¶ä¸­å¼•å…¥UserInfoModelConstants.hå³å¯ã€‚</p>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Blockä½¿ç”¨æ€»ç»“]]></title>
      <url>/2015/05/02/2015/Block%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<p>blockç”¨æ¥ä¿å­˜ä¸€æ®µä»£ç ï¼Œåœ¨éœ€è¦çš„æ—¶å€™å›è°ƒï¼Œæ˜¯å¯¹é—­åŒ…çš„å®ç°<br><a id="more"></a></p>
<p>æ‰€ä»¥ï¼Œåˆ‡å‹¿å°†è¿‡ç¨‹ä»£ç å½“åšblockçš„å®é™…å®ç°ï¼Œåˆ‡è®°åˆ‡è®°ï¼ï¼ï¼</p>
<h2 id="blockçš„å£°æ˜"><a href="#blockçš„å£°æ˜" class="headerlink" title="blockçš„å£°æ˜"></a>blockçš„å£°æ˜</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">//å˜é‡</div><div class="line">void (^myBlock)();</div><div class="line">int (^myBlock1)(int, int);</div><div class="line"></div><div class="line">//å±æ€§1</div><div class="line">typydef void(^Myblock)();//è¿™æ ·Myblockå°±ä»£è¡¨ä¸€ä¸ªblockç±»å‹äº†</div><div class="line">@property (nonatomic, copy) Myblock myblock; </div><div class="line"></div><div class="line">//å±æ€§2</div><div class="line">@property (nonatomic, copy) void(^myBlock)(int);//è¿™æ ·ä»ç„¶æ˜¯ä¸€ä¸ªblockï¼Œè€Œä¸”åå­—å°±æ˜¯myBlock</div><div class="line"></div><div class="line">//å‚æ•°</div><div class="line">- (void) modifyUserInfoWithNickName:(NSString *) nickName</div><div class="line">                           userLogo:(NSString *) userLogo</div><div class="line">                                sex:(NSNumber *) sex</div><div class="line">                           location:(NSString *) location</div><div class="line">                            succeed:(void(^)())successBlock</div><div class="line">                               fail:(void(^)(NSError *error))errorBlock;</div><div class="line">                               //è¿™ä¸ªæ—¶å€™çš„æ ¼å¼å°±å˜æˆäº†(è¿”å›+(^)(å‚æ•°))åå­—</div><div class="line">                               </div><div class="line">ä¹Ÿå¯ä»¥è¿™æ ·</div><div class="line"></div><div class="line">typedef void(^FXSuccessBlock)(id result);</div><div class="line">typedef void(^FXFailBlock)(NSError *error);</div><div class="line"></div><div class="line">- (void)onlyGetLoginUserInfo:(FXSuccessBlock)successHandler</div><div class="line">                 failHandler:(FXFailBlock)failHandler;</div></pre></td></tr></table></figure>
<p>blockå£°æ˜çš„æ ¼å¼ï¼š<code>è¿”å›å€¼ + blockåå­— + å‚æ•°</code></p>
<h2 id="blockå®ç°"><a href="#blockå®ç°" class="headerlink" title="blockå®ç°"></a>blockå®ç°</h2><p>blockå®ç°çš„æ ¼å¼ï¼š<code>^(å‚æ•°){}</code></p>
<p>æ³¨æ„blockå®ç°æ˜¯è¦åŠ ä¸Šå˜é‡åå­—çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">self.loginBlock = ^(BOOL complete) &#123;</div><div class="line">  NSLog(@&quot;ç™»å½•æˆåŠŸ&quot;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>æˆ–è€…æœ‰ç§å·å·§çš„å†™æ³•ï¼Œå°±æ˜¯åˆ©ç”¨setæ–¹æ³•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[self setLoginSucBlock:^(BOOL complete) &#123;</div><div class="line">     NSLog(@&quot;ç™»å½•æˆåŠŸ&quot;);  </div><div class="line"> &#125;];</div></pre></td></tr></table></figure></p>
<h2 id="Blockå¯¹å¤–éƒ¨å˜é‡çš„ç®¡ç†"><a href="#Blockå¯¹å¤–éƒ¨å˜é‡çš„ç®¡ç†" class="headerlink" title="Blockå¯¹å¤–éƒ¨å˜é‡çš„ç®¡ç†"></a>Blockå¯¹å¤–éƒ¨å˜é‡çš„ç®¡ç†</h2><h3 id="åŸºæœ¬æ•°æ®ç±»å‹"><a href="#åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹"></a>åŸºæœ¬æ•°æ®ç±»å‹</h3><h4 id="1ã€å±€éƒ¨å˜é‡"><a href="#1ã€å±€éƒ¨å˜é‡" class="headerlink" title="1ã€å±€éƒ¨å˜é‡"></a>1ã€å±€éƒ¨å˜é‡</h4><p>å±€éƒ¨è‡ªåŠ¨å˜é‡ï¼Œåœ¨Blockä¸­åªè¯»ã€‚Blockå®šä¹‰æ—¶copyå˜é‡çš„å€¼ï¼Œåœ¨Blockä¸­ä½œä¸ºå¸¸é‡ä½¿ç”¨ï¼Œæ‰€ä»¥å³ä½¿å˜é‡çš„å€¼åœ¨Blockå¤–æ”¹å˜ï¼Œä¹Ÿä¸å½±å“ä»–åœ¨Blockä¸­çš„å€¼ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">int base = 100;</div><div class="line">long (^sum)(int, int) = ^ long (int a, int b) &#123;</div><div class="line">     return base + a + b;</div><div class="line">&#125;;</div><div class="line">base = 0;</div><div class="line">PRintf(&quot;%ld\n&quot;,sum(1,2));</div><div class="line">// è¿™é‡Œè¾“å‡ºæ˜¯103ï¼Œè€Œä¸æ˜¯3, å› ä¸ºå—å†…baseä¸ºæ‹·è´çš„å¸¸é‡ 100</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>//è¿›å…¥blockçš„æ˜¯å€¼ï¼Œè€Œä¸æ˜¯åœ°å€ï¼Œå› ä¸ºè¿™ä¸ªå˜é‡æ˜¯å®šä¹‰åœ¨æ ˆå†…å­˜ä¸­çš„ï¼Œéšæ—¶å¯èƒ½è¢«é‡Šæ”¾ï¼Œæ‰€ä»¥æˆ‘è¦å°†å®ƒçš„å€¼copyè¿›æ¥ï¼Œé˜²æ­¢æˆ‘ä½¿ç”¨çš„æ—¶å€™å–ä¸åˆ°</p>
<h4 id="2ã€STATICä¿®é¥°ç¬¦çš„å…¨å±€å˜é‡"><a href="#2ã€STATICä¿®é¥°ç¬¦çš„å…¨å±€å˜é‡" class="headerlink" title="2ã€STATICä¿®é¥°ç¬¦çš„å…¨å±€å˜é‡"></a>2ã€STATICä¿®é¥°ç¬¦çš„å…¨å±€å˜é‡</h4><p>å› ä¸ºå…¨å±€å˜é‡æˆ–é™æ€å˜é‡åœ¨å†…å­˜ä¸­çš„åœ°å€æ˜¯å›ºå®šçš„ï¼ŒBlockåœ¨è¯»å–è¯¥å˜é‡å€¼çš„æ—¶å€™æ˜¯ç›´æ¥ä»å…¶æ‰€åœ¨å†…å­˜è¯»å‡ºï¼Œè·å–åˆ°çš„æ˜¯æœ€æ–°å€¼ï¼Œè€Œä¸æ˜¯åœ¨å®šä¹‰æ—¶copyçš„å¸¸é‡ã€‚</p>
<p>åŠ å…¥ä¸€ä¸ªå˜é‡å®šä¹‰åœ¨å‡½æ•°ä¹‹å¤–ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡æ˜¯å…¨å±€å˜é‡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">static int a = 10;</div><div class="line">    </div><div class="line">int(^sum)(int) =^(int b) &#123;</div><div class="line">    return a + b;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">a = 0;</div><div class="line"></div><div class="line">NSLog(@&quot;----%d&quot;, sum(2));//2</div></pre></td></tr></table></figure>
<p>//è¿›å…¥blockçš„æ˜¯åœ°å€è€Œä¸æ˜¯å€¼ï¼Œå› ä¸ºstaticä¿®é¥°çš„å˜é‡åœ¨å†…å­˜ä¸­å­˜åœ¨äºé™æ€å˜é‡åŒºï¼Œæ˜¯ä¸ä¼šè¢«å›æ”¶æˆ–è€…é‡Šæ”¾çš„ï¼Œå³ä½¿é‡Šæ”¾äº†ï¼Œä¹Ÿä¼šåœ¨çˆ±diskä¸­æœ‰å¤‡ä»½ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™å†åˆ›å»ºç„¶åèµ‹å€¼ç»™æˆ‘å°±å¥½äº†ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒè¢«é”€æ¯ï¼Œæ‰€ä»¥ç”¨åœ°å€å°±å¥½äº†</p>
<h4 id="3-blockä¿®é¥°çš„å˜é‡"><a href="#3-blockä¿®é¥°çš„å˜é‡" class="headerlink" title="3.__blockä¿®é¥°çš„å˜é‡"></a>3.__blockä¿®é¥°çš„å˜é‡</h4><p>è¢«__blockä¿®é¥°çš„å˜é‡ç§°ä½œBlockå˜é‡ã€‚ åŸºæœ¬ç±»å‹çš„Blockå˜é‡ç­‰æ•ˆäºå…¨å±€å˜é‡ã€æˆ–é™æ€å˜é‡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> __block int a = 10;</div><div class="line">    </div><div class="line">int(^sum)(int) =^(int b) &#123;</div><div class="line">    return a + b;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">a = 0;</div><div class="line"></div><div class="line">NSLog(@&quot;----%d&quot;, sum(2));//2</div><div class="line">//è¿›å…¥blockçš„æ˜¯åœ°å€è€Œä¸æ˜¯å€¼ï¼Œè¿™ä¸ªé“ç†ä¸staticæ˜¯ä¸€è‡´çš„</div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šå¦‚æœæˆ‘ä»¬ç”¨NSStringæ¥éªŒè¯å¯¹è±¡çš„blockçš„å†…å­˜ç®¡ç†æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºï¼ŒæŸå‡ ç§æƒ…å†µä¸‹NSStringå¯¹è±¡æ˜¯å­˜æ”¾åœ¨å¸¸é‡åŒºçš„ï¼Œç›¸å½“äºintè¿™ç§å˜é‡</p>
<p><code>è¡¥å……ï¼š</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSString *name = @&quot;han&quot;;</div><div class="line">NSLog(&quot;%p&quot;, name);//æ‰“å°çš„æ˜¯@&quot;han&quot;çš„åœ°å€</div><div class="line">NSLog(&quot;%p&quot;, &amp;name);//æ‰“å°çš„æ˜¯nameè¿™ä¸ªæŒ‡é’ˆçš„åœ°å€</div></pre></td></tr></table></figure></p>
<h3 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h3><p>å¯¹è±¡ä¸€å®šæ˜¯å­˜åœ¨äºå †ä¸Šçš„ï¼Œæ‰€ä»¥å†³å®šè¦ä¸è¦æ‹·è´æŒ‡é’ˆçš„å…³é”®åœ¨äºå¼•ç”¨çš„æŒ‡é’ˆ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">@implementation ViewController</div><div class="line">UIView *view;</div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    </div><div class="line">    view = [[UIView alloc] init];</div><div class="line"></div><div class="line">    void(^stackBlock)() = ^() &#123;</div><div class="line">        NSLog(@&quot;&amp;&amp;&amp;&amp;&amp;%p&quot;, &amp;view);</div><div class="line">    &#125;;</div><div class="line">    </div><div class="line">    NSLog(@&quot;****%p&quot;, &amp;view);</div><div class="line">    </div><div class="line">    stackBlock();</div><div class="line">&#125;</div><div class="line">@end</div><div class="line">//2016-07-11 20:47:36.908 block[1906:517460] ****0x1000d1208</div><div class="line">//2016-07-11 20:47:36.909 block[1906:517460] &amp;&amp;&amp;&amp;&amp;0x1000d1208</div></pre></td></tr></table></figure></p>
<p>ç°åœ¨æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡æ¥å¼•ç”¨UIViewï¼Œæˆ‘ä»¬å‘ç°æŒ‡é’ˆç›´æ¥å°±æ˜¯åŸæ¥çš„åœ°å€ï¼Œå¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">@implementation ViewController</div><div class="line"></div><div class="line">void(^globalBlock)();</div><div class="line">int a;</div><div class="line">//UIView *view;</div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    </div><div class="line">     UIView *view = [[UIView alloc] init];</div><div class="line"></div><div class="line">    void(^stackBlock)() = ^() &#123;</div><div class="line">        NSLog(@&quot;&amp;&amp;&amp;&amp;&amp;%p&quot;, &amp;view);</div><div class="line">    &#125;;</div><div class="line">    </div><div class="line">    NSLog(@&quot;****%p&quot;, &amp;view);</div><div class="line">    </div><div class="line">    stackBlock();</div><div class="line">&#125;</div><div class="line"></div><div class="line">//2016-07-11 21:00:51.055 block[1916:519453] ****0x16fd69f28</div><div class="line">//2016-07-11 21:00:51.056 block[1916:519453] &amp;&amp;&amp;&amp;&amp;0x13563a480</div></pre></td></tr></table></figure>
<p>å¾ˆæ˜æ˜¾æ˜¯ä¸¤ä¸ªæŒ‡é’ˆ</p>
<p>é‚£å¦‚æœæ˜¯ä¸€ä¸ªæˆå‘˜å˜é‡ä¼šæ˜¯ä»€ä¹ˆæ•ˆæœå‘¢ï¼Ÿç»è¿‡éªŒè¯ä¹Ÿæ˜¯åŒä¸€ä¸ªæŒ‡é’ˆã€‚<br>ä¸€ä¸ªæŒ‡é’ˆå’Œä¸¤ä¸ªæŒ‡é’ˆæœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ï¼Œå¦‚æœæ˜¯ä¸¤ä¸ªæŒ‡é’ˆçš„è¯ï¼Œé‚£ä¹ˆå³ä½¿ä½ å¤–è¾¹çš„æŒ‡é’ˆé‡Šæ”¾æ‰ï¼Œè¿™ä¸ªå¯¹è±¡ä¹Ÿæ˜¯é‡Šæ”¾ä¸æ‰çš„ï¼Œå¦‚æœè¿™ä¸ªblockä¸é‡Šæ”¾çš„è¯ï¼Œæ‰€ä»¥å¦‚æœè¿™ä¸ªblockæ˜¯ä¸€ä¸ªå…¨å±€çš„blockè¿™ä¸ªå¯¹è±¡ä¹Ÿå°±æ²¡æœ‰é‡Šæ”¾çš„å¯èƒ½äº†ã€‚<br>è§£å†³çš„æ–¹æ¡ˆå°±æ˜¯ï¼Œä¼ å…¥ä¸€ä¸ªå¼±å¼•ç”¨çš„æŒ‡é’ˆï¼Œè¿™æ ·èµ·ç è¿™ä¸ªè¢«å¼•ç”¨çš„å¯¹è±¡æ˜¯ä¸ä¼šå› ä¸ºblockè€Œä¸èƒ½é‡Šæ”¾äº†ã€‚<br>ä»è¿™ä¸ªè§’åº¦æ¥ç†è§£ï¼Œä¸ºä»€ä¹ˆä¼šå­˜åœ¨å †ï¼Œæ ˆï¼Œå…¨å±€blockï¼Œå› ä¸ºå¦‚æœæˆ‘å¼•ç”¨äº†æŸä¸ªå˜é‡ï¼Œè€Œè¿™ä¸ªå˜é‡æ˜¯åœ¨æ ˆä¸Šçš„ï¼Œé‚£ä¹ˆä¸èƒ½å› ä¸ºè¢«blockå¼•ç”¨è€Œä¸é‡Šæ”¾è¿™ä¸ªå˜é‡ï¼Œæ‰€ä»¥è§£å†³æ–¹æ¡ˆå°±æ˜¯ç›´æ¥copyä¸€ä»½è¿™ä¸ªå˜é‡çš„å€¼è¿›æ¥blockç»“æ„ä½“ï¼Œç”¨ä¸€ä¸ªæŒ‡é’ˆå»å¼•ç”¨ï¼Œè€Œå¦‚æœå¼•ç”¨äº†ä¸€ä¸ªå…¨å±€çš„å˜é‡ï¼Œé‚£ä¹ˆå°±ä¸å­˜åœ¨é‡Šæ”¾ä¸æ‰çš„é—®é¢˜äº†ï¼Œé‚£ä¹ˆå°±ä¸ç”¨å†å¤åˆ¶ä¸€ä»½äº†ã€‚</p>
<blockquote>
<p>ä¸€ä¸ªblockå€¼åˆ›å»ºçš„æ—¶å€™æ˜¯åœ¨å…¨å±€åŒºçš„</p>
<ul>
<li>å¦‚æœè¿™ä¸ªæ—¶å€™ç»™æˆ‘å¼•ç”¨äº†ä¸€ä¸ªå…¨å±€çš„å˜é‡ï¼Œé‚£ä¹ˆæˆ‘ä»ç„¶åœ¨å…¨å±€</li>
<li>å¦‚æœè¿™ä¸ªæ—¶å€™ç»™æˆ‘å¼•ç”¨ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªblockå°±ä¼šè¢«ç§»åŠ¨åˆ°æ ˆä¸Šï¼Œè¿™é‡Œè¦æ³¨æ„çš„æ˜¯æˆå‘˜å˜é‡ä¸å±€éƒ¨å˜é‡åŒç­‰å¯¹å¾…ï¼Œå› ä¸ºå®ƒæ¯•ç«Ÿä¸åœ¨å…¨å±€å˜é‡åŒºï¼Œä½†æ˜¯æ•è·æˆå‘˜å˜é‡çš„æ—¶å€™ï¼Œå› ä¸ºè¿™ä¸ªå˜é‡æ˜¯ä¸ä¼šè¢«è½»æ˜“é‡Šæ”¾çš„ï¼Œæ‰€ä»¥ä¸ä¼šcopyè¿™ä¸ªæŒ‡é’ˆ</li>
<li>è¿™ä¸ªæ—¶å€™å¦‚æœä½ åœ¨ARCæƒ…å†µä¸‹å¯¹è¿™ä¸ªblockåšä¸€ä¸ªèµ‹å€¼æ“ä½œï¼Œå¦‚æœä¹‹å‰è¿™ä¸ªblockåœ¨æ ˆä¸Šï¼Œé‚£ä¹ˆä¸€ä¸ªstrongå¼•ç”¨æ“ä½œä¹‹åè¿™ä¸ªblockå°±è¢«ç§»åŠ¨åˆ°å †ä¸Šäº†</li>
</ul>
</blockquote>
<p>//todo<br>autoreleaseå…³é”®å­—èµ·ä½œç”¨åœ¨arcä¸‹ï¼Œéœ€è¦è¿™ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªautoreleaseå¯¹è±¡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒUIViewä¸æ˜¯è¿™æ ·çš„å¯¹è±¡ï¼Œå…¶ä»–çš„æ˜¯è¿™æ ·çš„å¯¹è±¡ï¼Œæ‰€ä»¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@autorelease &#123;</div><div class="line">  UIView *view = [UIView alloc] init];//å†…å­˜ä¼šä¸€ç›´å¢åŠ ï¼Œä¸ä¼šé‡Šæ”¾çš„ï¼Œä»¥ä¸ºUIViewä¸ä¼šè¢«é‡Šæ”¾ï¼Œå¦‚æœè¿™ä¸ªæ¢æˆUIImageæˆ–è€…å…¶ä»–çš„ï¼Œé‚£å°±æ²¡æœ‰é—®é¢˜</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSä¸­çš„å±å¹•æ—‹è½¬]]></title>
      <url>/2015/04/12/2015/iOS%E4%B8%AD%E7%9A%84%E5%B1%8F%E5%B9%95%E6%97%8B%E8%BD%AC/</url>
      <content type="html"><![CDATA[<h3 id="æ€»è¿°"><a href="#æ€»è¿°" class="headerlink" title="æ€»è¿°"></a>æ€»è¿°</h3><ul>
<li>æ—‹è½¬äº‹ä»¶åªä¼ é€’ç»™ä¸»window</li>
<li>å½“æˆ‘ä»¬ä½¿ç”¨webViewæ’­æ”¾è§†é¢‘çš„æ—¶å€™ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªUIViewControllerï¼Œç„¶ååˆ›å»ºä¸€ä¸ªwindowï¼Œè®©è¿™ä¸ªæ§åˆ¶å™¨æˆä¸ºè¿™ä¸ªwindowçš„æ ¹æ§åˆ¶å™¨ï¼Œç„¶åå†å°†è§†é¢‘æ˜¾ç¤ºçš„viewæ·»åŠ åˆ°è¿™ä¸ªUIViewControllerçš„æ§åˆ¶å™¨viewä¸Š<a id="more"></a></li>
<li>å±å¹•é€‰ä¸­çš„æœ¬è´¨æ˜¯å½“å‰ä¸»æ§åˆ¶å™¨çš„viewè·Ÿéšå±å¹•çš„æ—‹è½¬è€Œæ—‹è½¬ï¼Œå¹¶ä¸”è°ƒæ•´å¤§å°è‡³å½“å‰çš„å®½é«˜ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åšçš„å°±æ˜¯æ§åˆ¶å½“å‰æ§åˆ¶å™¨è¦ä¸è¦æ—‹è½¬</li>
<li>å†æœ¬è´¨ä¸€äº›å°±æ˜¯ï¼Œè¦å¯¹å½“å‰keywindonçš„æ ¹æ§åˆ¶å™¨è¿›è¡Œæ§åˆ¶ï¼‹å¯¹ä½ è¦æ—‹è½¬çš„ç•Œé¢è¿›è¡Œæ§åˆ¶</li>
</ul>
<h3 id="è¯¦è¿°"><a href="#è¯¦è¿°" class="headerlink" title="è¯¦è¿°"></a>è¯¦è¿°</h3><h4 id="ç¬¬ä¸€å±‚è®¾ç½®"><a href="#ç¬¬ä¸€å±‚è®¾ç½®" class="headerlink" title="ç¬¬ä¸€å±‚è®¾ç½®"></a>ç¬¬ä¸€å±‚è®¾ç½®</h4><p><img src="/12/2015/iOSä¸­çš„å±å¹•æ—‹è½¬/.../../../images/1444701872103.png" alt="Alt text"><br>åœ¨è¿™é‡Œé€‰æ‹©æ˜¯å¦æ”¯æŒæ¨ªç«–å±</p>
<h4 id="ç¬¬äºŒå±‚è®¾ç½®"><a href="#ç¬¬äºŒå±‚è®¾ç½®" class="headerlink" title="ç¬¬äºŒå±‚è®¾ç½®"></a>ç¬¬äºŒå±‚è®¾ç½®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- (UIInterfaceOrientationMask)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window &#123;  </div><div class="line">    return UIInterfaceOrientationMaskAll;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨Appdelegateä¸­è¿›è¡Œè®¾ç½®ï¼Œå®ç°è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™é‡Œè¿”å›ä½ è¦æ”¯æŒçš„æ–¹å‘ï¼Œè¿™ä¸ªè®¾ç½®ä¼šè¦†ç›–ä¸Šè¾¹åœ¨generalä¸­çš„è®¾ç½®</p>
<h4 id="ç¬¬ä¸‰å±‚è®¾ç½®"><a href="#ç¬¬ä¸‰å±‚è®¾ç½®" class="headerlink" title="ç¬¬ä¸‰å±‚è®¾ç½®"></a>ç¬¬ä¸‰å±‚è®¾ç½®</h4><p>åœ¨windowçš„<code>æ ¹æ§åˆ¶å™¨</code>ä¸­å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œæ¥åŠ ä»¥æ§åˆ¶ï¼Œæ˜¯å¦å…è®¸æ—‹è½¬ä»¥åŠæ”¯æŒçš„æ–¹å‘<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">//æ˜¯å¦å…è®¸æ—‹è½¬</div><div class="line">- (BOOL)shouldAutorotate &#123;</div><div class="line">    return YES;</div><div class="line">&#125;</div><div class="line">//æ—‹è½¬çš„æ—¶å€™æ”¯æŒçš„æ–¹å‘</div><div class="line">- (UIInterfaceOrientationMask)supportedInterfaceOrientations &#123;</div><div class="line">    </div><div class="line">    return UIInterfaceOrientationMaskAll;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="ç¬¬å››å±‚è®¾ç½®"><a href="#ç¬¬å››å±‚è®¾ç½®" class="headerlink" title="ç¬¬å››å±‚è®¾ç½®"></a>ç¬¬å››å±‚è®¾ç½®</h4><p>åœ¨ä½ è¦æ§åˆ¶æ˜¯å¦æ—‹è½¬çš„è¿™ä¸ªæ§åˆ¶é‡Œè¾¹å®ç°ä¸Šè¾¹çš„è¿™ä¸¤ä¸ªæ–¹æ³•</p>
<h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><blockquote>
<ul>
<li>å½“å±å¹•æ—‹è½¬ä¸€æ¬¡å°±ä¼šè°ƒç”¨ä¸€æ¬¡è¿™ä¸ªæ–¹æ³•ï¼Œæ¥è¯¢é—®æ”¯æŒçš„æ–¹å‘</li>
<li>è¿™é‡Œè¿”å›çš„windowæ˜¯Appdelegateè¿™ä¸ªå¯¹è±¡æŒæœ‰çš„windowï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿ä¸­é—´ä½ æ¢æ‰äº†keywindowè¿™é‡Œè¿”å›çš„ä»ç„¶åªæ˜¯æœ€å¼€å§‹åˆ›å»ºçš„é‚£ä¸ªwindowï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹ä½ æœ€ååˆ›å»ºçš„windowè¿™ä¸ªæ–¹æ³•å¹¶ä¸èƒ½å½±å“</li>
<li>ä¸€ä¸ªæ§åˆ¶å™¨åˆ°åº•æ˜¯å¦æ”¯æŒæ¨ªå±ï¼Œè‡ªå·±è¯´äº†æ˜¯ä¸ç®—çš„ï¼Œä¸»è¦çœ‹ä¸¤ä¸ªä¸œè¥¿<ul>
<li>AppDelegateä¸­çš„è¿™ä¸ªæ–¹æ³•è¿”å›æ”¯æŒçš„æ–¹å‘</li>
<li>windowçš„æ ¹æ§åˆ¶å™¨ä¸­æ˜¯å¦å…è®¸æ—‹è½¬ï¼Œä»¥åŠæ”¯æŒçš„æ–¹å‘</li>
<li><strong>å–äº¤é›†</strong></li>
</ul>
</li>
</ul>
</blockquote>
<p>ä¸Šè¾¹çš„çš„å››å±‚è®¾ç½®èµ·ä½œç”¨çš„æƒ…å†µï¼Œæˆ‘ä»¬è¦åˆ†ä¸‰ç§æƒ…å†µæ¥è¯´</p>
<blockquote>
<ul>
<li>è¦æ§åˆ¶çš„æ§åˆ¶å™¨é—´æ¥ä¾é™„æœ€å¼€å§‹åˆ›å»ºçš„window<ul>
<li>è¯¥æ§åˆ¶å™¨æ˜¯é€šè¿‡navigationcontrollerç®¡ç†çš„/ç›´æ¥æ·»åŠ childcontrollers</li>
<li>presentâ€¦</li>
</ul>
</li>
<li>è¦æ§åˆ¶çš„æ§åˆ¶å™¨ä¾é™„äºæ–°åˆ›å»ºçš„window</li>
</ul>
</blockquote>
<h5 id="åŸå§‹window"><a href="#åŸå§‹window" class="headerlink" title="åŸå§‹window"></a>åŸå§‹window</h5><blockquote>
<ul>
<li>å—åˆ°Appdelegateä¸­çš„æ–¹æ³•çš„å½±å“</li>
<li>å¦‚æœæ§åˆ¶å™¨æ˜¯modalå‡ºæ¥çš„ï¼Œé‚£ä¹ˆè¯¥æ§åˆ¶å™¨ä¸­å®ç°çš„è¿™ä¸¤ä¸ªæ–¹æ³•ä¼šç”Ÿæ•ˆï¼Œä½†æ˜¯ä¾ç„¶éµå¾ªäº¤é›†çš„åŸåˆ™</li>
<li>å¦‚æœè¿™ä¸ªæ§åˆ¶å™¨æ˜¯navigationControllerç®¡ç†æˆ–è€…ç›´æ¥æ·»åŠ childcontrollersï¼Œè¯¥æ§åˆ¶å™¨ä¸­çš„æ–¹æ³•æ˜¯æ²¡æœ‰ä½œç”¨çš„ï¼Œå®ƒåªå—åˆ°appdelegateå’Œwindowæ ¹æ§åˆ¶å™¨çš„å½±å“</li>
</ul>
</blockquote>
<h5 id="ä¾é™„äºæ–°åˆ›å»ºçš„window"><a href="#ä¾é™„äºæ–°åˆ›å»ºçš„window" class="headerlink" title="ä¾é™„äºæ–°åˆ›å»ºçš„window"></a>ä¾é™„äºæ–°åˆ›å»ºçš„window</h5><blockquote>
<ul>
<li>ä¸å—åˆ°APPdelegateæ–¹æ³•çš„å½±å“</li>
<li>å…¶å®ƒéƒ½ä¸€æ ·ï¼Œä½†æ˜¯åˆ†æçš„èµ·ç‚¹å°±å˜æˆäº†å½“å‰windowçš„æ ¹æ§åˆ¶å™¨<ul>
<li>æ¯”å¦‚ï¼ŒwebViewæ’­æ”¾è§†é¢‘çš„æ—¶å€™ï¼Œå®ƒä¼šæ–°åˆ›å»ºwindowï¼Œå¹¶ä¸”ä»¥UIViewControllerä¸ºæ ¹æ§åˆ¶å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥åœ¨è¿™ä¸ªæ§åˆ¶å™¨ä¸­æ·»åŠ æ§åˆ¶ä»£ç ï¼Œä½†æ˜¯è¿™ä¸ªæ˜¯ç³»ç»Ÿçš„ç±»ï¼Œæˆ‘ä»¬å°±åªèƒ½é åˆ†ç±»æ¥æ·»åŠ ä»£ç äº†</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><h4 id="æ•´ä½“æ˜¯æ”¯æŒæ¨ªå±ï¼Œä½†æ˜¯æŸä¸ªç•Œé¢ç¦æ­¢"><a href="#æ•´ä½“æ˜¯æ”¯æŒæ¨ªå±ï¼Œä½†æ˜¯æŸä¸ªç•Œé¢ç¦æ­¢" class="headerlink" title="æ•´ä½“æ˜¯æ”¯æŒæ¨ªå±ï¼Œä½†æ˜¯æŸä¸ªç•Œé¢ç¦æ­¢"></a>æ•´ä½“æ˜¯æ”¯æŒæ¨ªå±ï¼Œä½†æ˜¯æŸä¸ªç•Œé¢ç¦æ­¢</h4><p>æ ¹æ®ä¸Šè¾¹å™è¿°ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹æ–¹æ¡ˆï¼š</p>
<ul>
<li>é€šè¿‡presentâ€¦æ¥ç®¡ç†æ§åˆ¶å™¨</li>
</ul>
<blockquote>
<p>åœ¨è¿™ä¸ªæ§åˆ¶å™¨ä¸­æ·»åŠ æ§åˆ¶å™¨ä»£ç ï¼Œç¦æ­¢æ—‹è½¬æˆ–è€…åªæ”¯æŒç«–ç€<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">  @implementation HSViewController</div><div class="line"></div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">   [super viewDidLoad];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (BOOL)shouldAutorotate &#123;</div><div class="line">    return YES;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (UIInterfaceOrientationMask)supportedInterfaceOrientations &#123;</div><div class="line">    return UIInterfaceOrientationMaskPortrait;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li>ä¸é€šè¿‡presentæ¥ç®¡ç†ç•Œé¢<blockquote>
<p>é€šè¿‡åœ¨Appdelegateæˆ–è€…æ ¹æ§åˆ¶å™¨ä¸­åŠ åˆ¤æ–­ä»£ç ï¼Œå®ç°åœ¨ä¸åŒçš„å½“å‰æ§åˆ¶å™¨ï¼Œè¿”å›ä¸åŒçš„æ”¯æŒçš„æ–¹å‘</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> - (UIInterfaceOrientationMask)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window &#123;</div><div class="line">    </div><div class="line"></div><div class="line">   HSNavigationContronller *nav = (HSNavigationContronller *)[UIApplication sharedApplication].keyWindow.rootViewController;</div><div class="line">    </div><div class="line">    if ([nav.topViewController isKindOfClass:[HSViewController class]]) &#123;</div><div class="line">        return UIInterfaceOrientationMaskPortrait;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return UIInterfaceOrientationMaskAll;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<h4 id="æ•´ä½“æ˜¯æ”¯æŒç«–å±ï¼Œä½†æ˜¯æŸä¸ªç•Œé¢å¯ä»¥æ¨ªå±"><a href="#æ•´ä½“æ˜¯æ”¯æŒç«–å±ï¼Œä½†æ˜¯æŸä¸ªç•Œé¢å¯ä»¥æ¨ªå±" class="headerlink" title="æ•´ä½“æ˜¯æ”¯æŒç«–å±ï¼Œä½†æ˜¯æŸä¸ªç•Œé¢å¯ä»¥æ¨ªå±"></a>æ•´ä½“æ˜¯æ”¯æŒç«–å±ï¼Œä½†æ˜¯æŸä¸ªç•Œé¢å¯ä»¥æ¨ªå±</h4><p>è¿™ç§éœ€æ±‚ï¼Œåªèƒ½é€šè¿‡åŠ åˆ¤æ–­ä»£ç æ¥åšåˆ°</p>
<h4 id="æ§åˆ¶é€šè¿‡webViewåŠ è½½çš„è§†é¢‘å…¨å±æ—¶çš„æ¨ªç«–å±"><a href="#æ§åˆ¶é€šè¿‡webViewåŠ è½½çš„è§†é¢‘å…¨å±æ—¶çš„æ¨ªç«–å±" class="headerlink" title="æ§åˆ¶é€šè¿‡webViewåŠ è½½çš„è§†é¢‘å…¨å±æ—¶çš„æ¨ªç«–å±"></a>æ§åˆ¶é€šè¿‡webViewåŠ è½½çš„è§†é¢‘å…¨å±æ—¶çš„æ¨ªç«–å±</h4><p>webViewçš„è§†é¢‘åœ¨å…¨å±çš„æ—¶å€™ï¼Œä¼šæ–°åˆ›å»ºä¸€ä¸ªwindowï¼Œæ‰€ä»¥ä½ åœ¨Appdelegateæˆ–è€…å½“å‰æ ¹æ§åˆ¶å™¨ä¸‹çš„æ§åˆ¶ä»£ç ç»Ÿç»Ÿä¸ä¼šç”Ÿæ•ˆï¼Œå¹¶ä¸”ä»¥UIViewControllerä¸ºæ ¹æ§åˆ¶å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŠŠæ§åˆ¶ä»£ç åŠ åˆ°UIViewControllerçš„åˆ†ç±»ä¸­ï¼Œåˆå› ä¸ºå…¶å®ƒçš„æ§åˆ¶å™¨å…¨éƒ¨ç»§æ‰¿è‡ªè¿™ä¸ªæ§åˆ¶å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨è¿™ä¸ªé‡Œè¾¹åŠ åˆ¤æ–­<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">#import &quot;UIViewController+Extension.h&quot;</div><div class="line"></div><div class="line">@implementation UIViewController (Extension)</div><div class="line"></div><div class="line">#pragma mark - ä¸‹é¢çš„ä¸¤ä¸ªæ–¹æ³•ä¸»è¦ç”¨äºæ§åˆ¶webViewæ’­æ”¾è§†å±çš„æ—¶å€™ï¼Œè¯¥æ˜¯å¦æ˜¯å¦åº”è¯¥æ¨ªå±</div><div class="line">/**</div><div class="line"> * å¦‚æœå½“å‰keywindowçš„rootControllerç±»å‹ä¸ºUIViewControllerï¼Œå°±è¿”å›YESï¼Œå¦åˆ™è¿”å›NO</div><div class="line"> *</div><div class="line"> *  @return è¿”å›æ˜¯å¦</div><div class="line"> */</div><div class="line">- (BOOL)shouldAutorotate &#123;</div><div class="line">    //æ‹¿åˆ°å½“å‰ä¸»çª—å£çš„æ ¹æ§åˆ¶å™¨ç±»å‹åç§°</div><div class="line">    NSString *className = NSStringFromClass([[UIApplication sharedApplication].keyWindow.rootViewController class]);</div><div class="line">    //å¦‚æœæ˜¯UIViewControllerå°±è¿”å›YESï¼Œè®©è¿™ä¸ªæ§åˆ¶å™¨viewå¯ä»¥è·Ÿéšå±å¹•æ—‹è½¬</div><div class="line">    if ([className isEqualToString:@&quot;UIViewController&quot;]) &#123;</div><div class="line">        return YES;</div><div class="line">    &#125; else &#123;</div><div class="line">        return NO;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (UIInterfaceOrientationMask)supportedInterfaceOrientations &#123;</div><div class="line">    </div><div class="line">    return UIInterfaceOrientationMaskAll;</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure></p>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Gitä½¿ç”¨æ€»ç»“]]></title>
      <url>/2015/04/10/2015/Git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<h3 id="1-é…ç½®ï¼š"><a href="#1-é…ç½®ï¼š" class="headerlink" title="1.é…ç½®ï¼š"></a>1.é…ç½®ï¼š</h3><p><strong>1.è®¾ç½®ä½ çš„åå­—ä¸é‚®ç®±ï¼ˆå¯ä¸ git å¸å·æ— å…³ï¼‰ï¼š</strong></p>
<p><code>git config --global user.name &quot;Your Name&quot;</code><br><code>git config --global user.email your@email.com</code></p>
<p>ç¼“å­˜ä¸€æ®µæ—¶é—´çš„ git å¸å·å¯†ç ï¼ˆtimeout å•ä½ï¼šç§’ï¼‰ï¼š</p>
<p><code>git config --global credential.helper &quot;cache --timeout=3600&quot;</code></p>
<p><strong>2.å…‹éš†ã€ç­¾å‡ºä»“åº“ï¼š</strong><br><code>git clone &lt;url&gt;</code></p>
<p>æœåŠ¡å™¨ä¸€èˆ¬ä¼šç»™å‡ºä¸¤ç§è¿æ¥æ–¹å¼</p>
<ul>
<li>ä¸€ç§æ˜¯SSH:éœ€è¦SSHåŠ å¯†</li>
<li>ä¸€ç§æ˜¯HTTP:ç›´æ¥å¯ä»¥ç”¨</li>
</ul>
<a id="more"></a>
<p>ä»¥ä¸Šè¾¹çš„åœ°å€ä¸ºä¾‹ï¼š<br><code>git clone http://10.16.1.16/iOS/gitintro.git</code><br>è¿™æ ·å®ƒé»˜è®¤ä¼šå°†æ–‡ä»¶ä»¥gitintroä¸ºåï¼Œå»ºç«‹åœ¨å½“å‰æ–‡ä»¶è·¯å¾„ä¸‹<br>è‡ªå®šä¹‰ï¼š<br><code>git clone http://10.16.1.16/iOS/gitintro.git mygit</code><br>è¿™æ ·å†™å®ƒä¼šå°†æ–‡ä»¶å¤¹çš„åå­—ä»gitintroæ”¹ä¸ºmygit</p>
<p><strong>å¦å¤–ï¼š</strong>å¦‚æœè¯¥é¡¹ç›®ä½¿ç”¨äº†ï¼Œ<code>git submodule</code>å­æ¨¡å— æŠ€æœ¯ï¼Œé‚£ä¹ˆè¿˜éœ€è¦å¢åŠ å¦å¤–ä¸¤æ­¥æ“ä½œï¼š</p>
<ul>
<li><code>git submodule init</code></li>
<li><code>git submodule update</code></li>
</ul>
<p>æˆ–è€…ä¸€æ­¥åˆ°ä½<br><code>git clone --recursive http://10.16.1.16/iOS/gitintro.git mygit</code></p>
<p>3.è‡ªå»ºä»“åº“<br>åªè¦æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶åè¿›è¡Œgitåˆå§‹åŒ–å°±å¯ä»¥<br>åˆ©ç”¨å‘½ä»¤è¡Œå°†å½“å‰ç›®å½•åˆ‡æ¢åˆ°ä½ è¦åšä»“åº“çš„é‚£ä¸ªæ–‡ä»¶å¤¹ï¼Œ<br><code>cd xxx</code><br>ç„¶ååˆå§‹åŒ–ä»“åº“<br><code>git init</code></p>
<p><strong>3.æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨ï¼š</strong><br><code>git remote -v</code></p>
<p>è¿›é˜¶ï¼š<br>å…³è”è¿œç¨‹æœåŠ¡å™¨ï¼š<br><code>git reomte add &lt;origin&gt; &lt;git-repo-url&gt;</code></p>
<p>æŸ¥çœ‹é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ remoteã€åˆ†æ”¯å…³è”ã€æœ¬åœ°é…ç½®ç­‰ï¼š<br><code>cat .git/config</code></p>
<h3 id="2-æ·»åŠ ã€åˆ é™¤ã€æœ¬åœ°æäº¤"><a href="#2-æ·»åŠ ã€åˆ é™¤ã€æœ¬åœ°æäº¤" class="headerlink" title="2. æ·»åŠ ã€åˆ é™¤ã€æœ¬åœ°æäº¤"></a>2. æ·»åŠ ã€åˆ é™¤ã€æœ¬åœ°æäº¤</h3><p>æ·»åŠ æ–°æ–‡ä»¶ï¼Œç¡®è®¤æ–‡ä»¶ä¿®æ”¹ï¼š<br><code>git add &lt;file-path&gt;</code></p>
<p>å–æ¶ˆæ·»åŠ æ–°æ–‡ä»¶ï¼š<br><code>git reset &lt;file-path&gt;</code></p>
<p>ä» git åˆ é™¤æ–‡ä»¶ï¼ˆä¸å†åœ¨ repo é‡Œç®¡ç†äº†ï¼‰ï¼š<br><code>git rm &lt;file-path&gt;</code></p>
<p>æŸ¥çœ‹æœ¬åœ°æœªç¡®è®¤çš„ä¿®æ”¹ï¼ˆä»£ç ã€å†…å®¹å˜æ›´ï¼‰ï¼š<br><code>git diff</code></p>
<p>æŸ¥çœ‹æœ¬åœ°å·²ç¡®è®¤ï¼ˆä½†æœªæäº¤ï¼‰çš„ä¿®æ”¹ï¼š<br><code>git diff --cached</code></p>
<p>æŸ¥çœ‹æœ¬åœ°ä¿®æ”¹çš„æ–‡ä»¶çŠ¶æ€ï¼š<br><code>git status</code></p>
<p>æœ¬åœ°æäº¤ï¼ˆæäº¤ä¸Šè¿° add\rm ç¡®è®¤çš„ä¿®æ”¹ã€æ“ä½œï¼‰ï¼Œç”Ÿæˆä¸€ä¸ªç‰ˆæœ¬ï¼š<br><code>git commit -m &quot;short commit message&quot;</code></p>
<p>è¿½åŠ åˆ°ä¸Šä¸€æ¬¡æœ¬åœ°æäº¤ï¼š<br><code>git commit --amend</code></p>
<p>æŸ¥çœ‹æäº¤è®°å½•ï¼š<br><code>git log</code></p>
<p>ç®€åŒ–ç‰ˆ<br><code>git reflog</code></p>
<p>æŸ¥çœ‹æäº¤çš„è¯¦ç»†ä¿®æ”¹è®°å½•ï¼š<br><code>git log -p</code></p>
<p>æŸ¥çœ‹æäº¤ä¿®æ”¹çš„æ–‡ä»¶ä¿¡æ¯ï¼š<br><code>git log --stat</code></p>
<p>å…¶å®ƒï¼š<br>è®©å½“å‰ä¿®æ”¹ AFK ä¸€ä¸‹ï¼Œå¥½å¹²ç‚¹åˆ«çš„äº‹æƒ…ï¼š<code>git stash</code><br>äº‹æƒ…åšå®Œï¼ŒæŠŠ AFK å‰çš„ä¿®æ”¹æ‰¾å›æ¥ï¼š<code>git stash pop</code></p>
<h3 id="3-æ’¤æ¶ˆ"><a href="#3-æ’¤æ¶ˆ" class="headerlink" title="3. æ’¤æ¶ˆ"></a>3. æ’¤æ¶ˆ</h3><p>æ’¤é”€ä¸€ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ï¼š<br><code>git checkout -- &lt;file-path&gt;</code></p>
<p>æ’¤é”€å½“å‰ç›®å½•çš„æ‰€æœ‰ä¿®æ”¹ï¼š<br><code>git checkout -- .</code></p>
<p>åˆ é™¤æŸä¸ªæ–‡ä»¶<br><code>git rm xxxx</code></p>
<h3 id="4-ç‰ˆæœ¬å›é€€"><a href="#4-ç‰ˆæœ¬å›é€€" class="headerlink" title="4.ç‰ˆæœ¬å›é€€"></a>4.ç‰ˆæœ¬å›é€€</h3><p>å›é€€åˆ°ä»»æ„ç‰ˆæœ¬ï¼Œéœ€è¦æ‹¿åˆ°commit id<br><code>git reset --hard 3628164</code><br>å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬<br> <code>git reset --hard HEAD^</code><br> å›é€€åˆ°ä¸Š100ä¸ªç‰ˆæœ¬<br> <code>git reset --hard HEAD~100</code></p>
<p><strong>ä½†æ˜¯è¿™æ ·ç®€å•çš„æ“ä½œåªèƒ½æ˜¯æŠŠæœ¬åœ°çš„å·¥ä½œç©ºé—´çš„å†…å®¹è¿›è¡Œå›é€€ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘æƒ³è¦è®©è¿œç¨‹åº“ä¹Ÿå›é€€æ€ä¹ˆåŠå‘¢ï¼Ÿ</strong></p>
<p>å›æƒ³ä¸€ä¸‹åŸç†ï¼Œå½“ä½ å¯¹è¿™ä¸ªåˆ†æ”¯è¿›è¡Œpullçš„æ—¶å€™</p>
<ul>
<li>å®ƒä¼šå»ç‰ˆæœ¬åº“å»æ£€æŸ¥æœ‰æ²¡æœ‰å†²çª</li>
<li>å¦‚æœæ²¡æœ‰é‚£ä¹ˆå®ƒç›´æ¥ä¼šè¦†ç›–å·¥ä½œç©ºé—´</li>
<li>å¦‚æœæœ‰å†²çªå®ƒæ‰ä¼šæç¤ºä½ è§£å†³å†²çª</li>
</ul>
<p>é‚£ä¹ˆç°åœ¨ï¼Œå¦‚æœæˆ‘å·²ç»åˆ°äº†ç¬¬äº”ä¸ª commitï¼Œä½†æ˜¯æˆ‘æƒ³è¦å›åˆ°ç¬¬3ä¸ªcommitçš„çŠ¶æ€ï¼Œ<br><code>git reset --hard 87b6a3b</code><br>ä½ æƒ³è¦æŠŠè¿™ä¸ªçŠ¶æ€æ›´æ–°åˆ°è¿œç¨‹ï¼Œå…ˆè¦commitï¼Œä½ ä¼šå‘ç°ä½ commitæ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºä½ è¿™ä¸ªcommitå·²ç»å­˜åœ¨äº†ï¼Œä¸€æ‘¸ä¸€æ ·ï¼Œæ‰€ä»¥ä½ æ˜¯ä¸èƒ½commitçš„ï¼Œç°åœ¨è¦è‡ªå·±åˆ¶é€ ä¸€äº›ä¿®æ”¹ï¼Œç„¶åå†commitï¼Œå°±å¯ä»¥äº†ã€‚</p>
<p><strong>æ‰€ä»¥è¿œç¨‹ç‰ˆæœ¬å›é€€çš„æ ¹æœ¬æ˜¯åˆ¶é€ å†²çªï¼Œç„¶åæäº¤å†²çª</strong></p>
<p><strong>é‚£ä¹ˆå¦‚æœæ˜¯è¿™ä¸ªæ–‡ä»¶å·²ç»åˆ é™¤äº†é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æ€ä¹ˆåŠå‘¢ï¼Ÿ</strong><br>ç­”æ¡ˆæ˜¯ï¼š</p>
<ul>
<li>æœ¬åœ°è¿›è¡Œç‰ˆæœ¬å›é€€<code>git reset --hard 76824</code></li>
<li>æ‰“å¼€è¿™ä¸ªåˆæ¢å¤çš„æ–‡ä»¶ï¼Œç„¶åä¿®æ”¹ä¸€äº›ä¸œè¥¿</li>
<li>æ‰§è¡Œ <code>add commit</code></li>
<li>ç„¶åæ‰§è¡Œpullï¼Œæœ€æ–°çš„ä¿®æ”¹ä»è¿œç¨‹æ‹‰å›æ¥ï¼Œè¿™ä¸ªæ—¶å€™å®ƒä¼šæŠ¥å†²çª</li>
</ul>
<p>å®ƒè¯´ï¼Œè¿™ä¸ªå†²çªæ˜¯ä¿®æ”¹å’Œåˆ é™¤çš„å†²çªï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªç‰ˆæœ¬åº“ä¸­å®ƒå·²ç»è¢«åˆ é™¤äº†ï¼Œå¯æ˜¯åœ¨å¦å¤–ä¸€ä¸ªç‰ˆæœ¬åº“ä¸­å®ƒæ˜¯è¢«ä¿®æ”¹çš„ï¼Œç°åœ¨ä½ å°±è¦è§£å†³å†²çªï¼Œæ€ä¹ˆè§£å†³å‘¢ï¼ŸåŸæ¥çš„å†²çªæœ€å¤šæ˜¯è¿™ä¸ªæ–‡ä»¶ä¸­çš„ä»£ç ä¸ä¸€è‡´äº†ï¼Œè¿™ä¸ªæ—¶å€™æ‰¾ä½ æ‰“å¼€ä»£ç ï¼Œåˆ åˆ å‰ªå‰ªå°±å¥½äº†ï¼Œå¯æ˜¯ç°åœ¨æ–‡ä»¶ç›´æ¥æ²¡æœ‰äº†å’‹å¼„ï¼Ÿ<br>å†æ¬¡git pull<br>å®ƒè¯´ä½ å¯ä»¥ç”¨git add/rm xxxæ¥å†³å®šä½ æ˜¯ä¿ç•™å†²çªä¸­çš„å“ªä¸€æ–¹</p>
<h3 id="5-åˆ†æ”¯"><a href="#5-åˆ†æ”¯" class="headerlink" title="5. åˆ†æ”¯"></a>5. åˆ†æ”¯</h3><p>åˆ›å»ºåˆ†æ”¯ï¼ˆåŸºäºå½“å‰åˆ†æ”¯ï¼‰ï¼š<br><code>git branch &lt;new-branch&gt;</code></p>
<p>åŸºäºæŸä¸ªåˆ†æ”¯åˆ›å»ºåˆ†æ”¯ï¼š<br><code>git branch &lt;new-branch&gt; &lt;base-branch&gt;</code></p>
<p>æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯ï¼š<br><code>git branch</code></p>
<p>åˆ‡æ¢åˆ†æ”¯ï¼š<br><code>git checkout &lt;branch&gt;</code></p>
<p>åˆ›å»ºæ–°åˆ†æ”¯å¹¶ç«‹å³åˆ‡è¿‡å»ï¼š<br><code>git checkout -b &lt;new-branch&gt; [base-branch]</code></p>
<p>åˆå¹¶ä¸€ä¸ªåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼ˆåˆ é™¤è¯¥åˆ†æ”¯åä¸ä¿ç•™commitçºªå½•ï¼‰ï¼š<br><code>git merge &lt;other-branch&gt;</code></p>
<p>åˆå¹¶åˆ†æ”¯ä¸”åˆ é™¤è¯¥åˆ†æ”¯åä¿ç•™commitçºªå½•<br><code>git merge --no-ff -m&quot;xxx&quot; &lt;other-branch&gt;</code></p>
<p>å›æ»šä¸€ä¸ªåˆ†æ”¯çš„åˆå¹¶ï¼š<br><code>git revert -m (1|2) &lt;merge-commit&gt;</code><br>å‚è€ƒï¼š <a href="http://pms.kugou.com/zentao/doc-view-171.html" target="_blank" rel="external">http://pms.kugou.com/zentao/doc-view-171.html</a></p>
<p>rebase æŠŠåˆ†æ”¯çš„ commit åœ¨åŸºç¡€åˆ†æ”¯ä¸Šé‡æ”¾ï¼ˆä¸ merge çš„åŒºåˆ«å¾ˆé‡è¦ï¼Œè¯·åªåœ¨æœ¬åœ°åˆ†æ”¯ rebaseï¼ï¼ï¼ï¼‰ï¼š<br><code>git rebase &lt;base-branch&gt;</code></p>
<p>å®‰å…¨åˆ é™¤ï¼ˆå·²ç»åˆå¹¶è¿‡çš„ï¼‰æœ¬åœ°åˆ†æ”¯ï¼š<br><code>git branch -d &lt;branch&gt;</code></p>
<p>å¼ºè¡Œåˆ é™¤æœ¬åœ°åˆ†æ”¯ï¼ˆè¯·å…ˆ -dï¼Œå¦‚æœ -d å¤±è´¥ï¼Œæ£€æŸ¥æ— è¯¯åæ‰ -Dï¼‰ï¼š<br><code>git branch -D &lt;branch&gt;</code></p>
<h3 id="6-è·ŸæœåŠ¡å™¨åŒæ­¥ï¼š"><a href="#6-è·ŸæœåŠ¡å™¨åŒæ­¥ï¼š" class="headerlink" title="6. è·ŸæœåŠ¡å™¨åŒæ­¥ï¼š"></a>6. è·ŸæœåŠ¡å™¨åŒæ­¥ï¼š</h3><p>æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ï¼š<br><code>git branch -r</code></p>
<p>ç­¾å‡ºæœåŠ¡å™¨åˆ†æ”¯å·¥ä½œï¼ˆä¼šåˆ›å»ºæœ¬åœ°ä¸æœåŠ¡å™¨åˆ†æ”¯å…³è”ï¼‰ï¼š<br><code>git checkout &lt;remote-branch-name&gt;</code><br>æˆ–<br><code>git checkout -b &lt;local-branch-name&gt; origin/&lt;remote-branch-name&gt;</code></p>
<p>ï¼ˆå·²å­˜åœ¨çš„ï¼‰æœ¬åœ°åˆ†æ”¯å…³è”åˆ°æœåŠ¡å™¨åˆ†æ”¯ï¼š<br><code>git branch -u origin/&lt;remote-branch&gt; &lt;local-branch&gt;</code><br>æˆ–ï¼š<br><code>git branch --set-upstream-to=origin/&lt;remote-branch&gt; &lt;local-branch&gt;</code></p>
<p>è·å–æœåŠ¡å™¨ï¼ˆæ‰€æœ‰çš„ï¼‰æ›´æ–°ï¼Œå¹¶åˆå¹¶å½“å‰è¿œç¨‹åˆ†æ”¯çš„æ›´æ–°ï¼š<br><code>git pull</code></p>
<p>ä½¿ç”¨ rebase çš„æ–¹å¼ pullï¼Œå¯èƒ½ä¼šå°‘äº§ç”Ÿä¸€æ¡ merge è™š commitï¼š<br><code>git pull --rebase</code></p>
<p>è·å–æŸä¸ªè¿œç¨‹åˆ†æ”¯çš„æ›´æ–°ï¼ˆå¹¶ä¸”åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼ï¼ï¼‰ï¼š<br><code>git pull origin &lt;branch&gt;</code></p>
<p>ä»…æ‹‰å–æœåŠ¡å™¨æ›´æ–°ï¼Œä½†ä¸åˆå¹¶æˆ– rebaseï¼š<br><code>git fetch [origin [&lt;remote-branch-name&gt;]]</code></p>
<p>rebase å½“å‰åˆ†æ”¯å·²ç» fetch åˆ°æœ¬åœ°çš„æœåŠ¡å™¨æ›´æ–°ï¼š<br><code>git rebase</code></p>
<hr>
<p><strong>push</strong><br>pushæ–°å»ºçš„æœ¬åœ°åˆ†æ”¯å¹¶ä¸”å»ºç«‹è¿æ¥<br><code>git push --set-upstream origin &lt;local-branch&gt;</code><br><code>git push origin &lt;local-branch&gt;</code><br><code>git push -u origin &lt;local-branch&gt;</code></p>
<p>åˆ é™¤æœåŠ¡å™¨è¿œç¨‹åˆ†æ”¯ï¼š<br><code>git push origin :&lt;remote-branch&gt;</code><br>æˆ– git 1.7 ä»¥åï¼š<br><code>git push origin --delete &lt;remote-branch&gt;</code></p>
<p>pushè¯¥åˆ†æ”¯çš„å†…å®¹æ›´æ–°ï¼Œå‰ææ˜¯å·²ç»æœ‰é»˜è®¤çš„å¯¹åº”çš„åˆ†æ”¯ï¼Œå¦‚æœæ²¡æœ‰å°±ä¼šæŠ¥é”™<br><code>git push</code><br><img src="/10/2015/Gitä½¿ç”¨æ€»ç»“/./1443163940619.png" alt="Alt text"></p>
<p>ä½†æ˜¯è¿™ç§æ–¹å¼ä¸éœ€è¦æå‰å…³è”ï¼Œå› ä¸ºä½ å·²ç»æŒ‡æ˜äº†ï¼Œæˆ‘æ‰“ç®—æŠŠæˆ‘è¿™ä¸ªåˆ†æ”¯æ¨é€ç»™è°ï¼š<br><code>git push origin &lt;branch&gt;</code></p>
<p>æ¸…é™¤å·²è¢«åˆ é™¤è¿œç¨‹åˆ†æ”¯çš„æœ¬åœ°æ®‹ä½™ï¼š<br><code>git remote prune origin</code></p>
<h3 id="7-forkæºç ä¹‹åä¸æºç ä¿æŒåŒæ­¥"><a href="#7-forkæºç ä¹‹åä¸æºç ä¿æŒåŒæ­¥" class="headerlink" title="7.forkæºç ä¹‹åä¸æºç ä¿æŒåŒæ­¥"></a>7.forkæºç ä¹‹åä¸æºç ä¿æŒåŒæ­¥</h3><p>1.åˆ‡æ¢åˆ°è¦ä¿æŒåŒæ­¥çš„åˆ†æ”¯</p>
<p>2.æ·»åŠ ä¸€ä¸ªåˆ«åï¼ŒæŒ‡å‘ngqaé¡¹ç›®çš„ä½ç½®<br><code>git remote add ngqa https://github.com/howe/ngqa.git</code></p>
<p>3.pullä¸€ä¸‹å®ƒä¸‹è¾¹çš„æŸä¸ªåˆ†æ”¯ï¼Œä¸€å®šè¦ç¡®å®šä¸€ä¸‹è¿™ä¸ªåˆ†æ”¯æ˜¯ä¸æ˜¯æœ‰å†…å®¹<code>git pull ngqa master</code></p>
<p>4.ç„¶ååœ¨sourcetreeè§£å†³ä¸€ä¸‹å†²çªï¼Œä¸€èˆ¬æ˜¯ç‚¹ä¸€ä¸‹æœ€ä¸‹è¾¹çš„é‚£ä¸ªçº¢è‰²é€‰æ¡†</p>
<p>5.ç„¶å<code>git push</code></p>
<p>6.å¦‚æœå‡ºç°å¦‚ä¸‹é—®é¢˜</p>
<blockquote>
<p> â€œplease enter a commit message to explain why this merge is necessary,especially if it merges an updated upstream into a topic branch</p>
</blockquote>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<blockquote>
<p>1-press â€œiâ€<br>2-write your merge message<br>3-press â€œescâ€<br>4-write â€œ:wqâ€ then press enter</p>
</blockquote>
<h3 id="8-é…ç½®SSH"><a href="#8-é…ç½®SSH" class="headerlink" title="8.é…ç½®SSH"></a>8.é…ç½®SSH</h3><ul>
<li>æŸ¥çœ‹gitç”¨æˆ·å<br><code>git config user.name</code></li>
<li>æŸ¥çœ‹gité‚®ç®±<br><code>git config user.email</code></li>
<li>ä¿®æ”¹gitç”¨æˆ·åå’Œé‚®ç®±<br><code>git config --global user.name &quot;username&quot;</code><br><code>git config --global user.email &quot;email&quot;</code></li>
<li>æŸ¥çœ‹æ˜¯å¦å·²ç»æœ‰äº†sshå¯†é’¥ï¼š<br><code>cd ~/.ssh</code></li>
<li>ç”ŸæˆSSH<br><code>ssh-keygen -t rsa -C &quot;ä½ çš„é‚®ç®±&quot;</code></li>
<li>æŸ¥çœ‹SSH<br><code>cat ~/.ssh/id_rsa.pub</code><br>å°†ä¸‹é¢å‡ºç°çš„è¿™äº›ä¸ªä¸œè¥¿éƒ½æ‹·è´åˆ°ä½ çš„SSHé¢æ¿ä¸­</li>
</ul>
<h3 id="9-é—®é¢˜é›†é”¦"><a href="#9-é—®é¢˜é›†é”¦" class="headerlink" title="9.é—®é¢˜é›†é”¦"></a>9.é—®é¢˜é›†é”¦</h3><ul>
<li>å¦‚æœä½ æ˜æ˜å·²ç»æœ‰äº†æƒé™ä½†æ˜¯è¿˜æ˜¯ä¸èƒ½cloneä»£ç ï¼Œé‚£å¯èƒ½æ˜¯æœåŠ¡å™¨è®¾ç½®äº†DNSè§£æï¼Œä½ éœ€è¦æ›´æ”¹æœ¬æœºçš„DNSè§£æåœ°å€å’ŒæœåŠ¡å™¨ä¸€è‡´</li>
<li>å†²çªè§£å†³</li>
</ul>
]]></content>
      
        <categories>
            
            <category> åŸºç¡€ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> å·¥å…· </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[runtimeæºç ä¸‹è½½]]></title>
      <url>/2015/04/02/2015/iOS%E9%83%A8%E5%88%86%E6%BA%90%E7%A0%81%E4%B8%8B%E8%BD%BD/</url>
      <content type="html"><![CDATA[<h3 id="runtimeæºç "><a href="#runtimeæºç " class="headerlink" title="runtimeæºç "></a>runtimeæºç </h3><p>éœ€è¦äº†è§£runtimeçš„å®ç°åŸç†<br><code>https://opensource.apple.com/source/objc4/</code>æœ‰å„ä¸ªç‰ˆæœ¬ï¼Œä¸‹è½½çš„å‘½ä»¤</p>
<p>æ¯”å¦‚ä¸‹è½½680<br><code>wget -c -r -np -k -L -p https://opensource.apple.com/source/objc4/objc4-680/</code></p>
<h3 id="CoreFoundationæºç "><a href="#CoreFoundationæºç " class="headerlink" title="CoreFoundationæºç "></a>CoreFoundationæºç </h3><p><code>wget -c -r -np -k -L -p https://opensource.apple.com/source/CF/CF-855.17/</code></p>
<h3 id="gnustep"><a href="#gnustep" class="headerlink" title="gnustep"></a>gnustep</h3><h3 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h3><p><code>https://github.com/Microsoft/WinObjC</code></p>
<p><code>https://github.com/BigZaphod/Chameleon</code></p>
]]></content>
      
        
        <tags>
            
            <tag> iOSåŸºç¡€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Hexo é…ç½®/ä½¿ç”¨æ•™ç¨‹]]></title>
      <url>/2015/03/09/2015/Hexo-%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B/</url>
      <content type="html"><![CDATA[<h3 id="hexoå®‰è£…"><a href="#hexoå®‰è£…" class="headerlink" title="hexoå®‰è£…"></a>hexoå®‰è£…</h3><blockquote>
<p>å‰æå·²ç»å®‰è£…äº†node.jså’Œgit</p>
</blockquote>
<ul>
<li><code>npm install hexo --no-optional</code></li>
<li><code>hexo init myBlog</code>//åˆ›å»ºhexoçš„æ–‡ä»¶å¤¹</li>
<li><code>cd myBlog</code></li>
<li><code>npm install</code></li>
<li><p><code>hexo server</code>//æ‰“å¼€å¯¹åº”çš„é“¾æ¥å¯çœ‹åˆ°æ•ˆæœ </p>
<a id="more"></a> 
<h3 id="gité…ç½®"><a href="#gité…ç½®" class="headerlink" title="gité…ç½®"></a>gité…ç½®</h3></li>
<li><p>åˆ›å»ºgitä»“åº“<code>name/name.github.io</code></p>
</li>
<li>æ·»åŠ ä¿¡æ¯åˆ°é…ç½®æ–‡ä»¶<code>_config.yml</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># Deployment</div><div class="line">## Docs: https://hexo.io/docs/deployment.html</div><div class="line">deploy:</div><div class="line">  type: git</div><div class="line">  repository: git@github.com:xizhengmeng/xizhengmeng.github.io.git</div><div class="line">  branch: master</div></pre></td></tr></table></figure>
<ul>
<li>å®‰è£…æ’ä»¶<code>npm install hexo-deployer-git --save</code></li>
</ul>
<blockquote>
<p>å¦‚æœè¦è®¿é—®è¿™ä¸ªç½‘ç«™ç›´æ¥<code>xizhengmeng.github.io</code>å°±å¥½äº†</p>
</blockquote>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><ul>
<li>è¿›å…¥åšå®¢æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚æˆ‘è¯´çš„æ˜¯~/myBlog</li>
<li><code>hexo clean</code></li>
<li><code>hexo g</code>//ç”Ÿæˆ</li>
<li><code>hexo d</code>//æ¨é€åˆ°githubæœåŠ¡å™¨</li>
<li><code>hexo new &quot;fileName&quot;</code>åˆ›å»ºæ–°çš„æ–‡ä»¶ï¼Œåœ¨_postæ–‡ä»¶ä¸­</li>
<li><code>hexo new page fileName</code>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªindex.mdæ–‡ä»¶ï¼Œæ¯”å¦‚æ ‡ç­¾äº‘é¡µé¢ï¼Œæˆ–è€…åˆ†ç±»é¡µé¢</li>
</ul>
<h3 id="ç»‘å®šåŸŸå"><a href="#ç»‘å®šåŸŸå" class="headerlink" title="ç»‘å®šåŸŸå"></a>ç»‘å®šåŸŸå</h3><ul>
<li>ç”³è¯·åŸŸåï¼Œç›´æ¥æœç´¢<code>hexoå’Œgithubï¼ŒåŸŸåå’Œgithubç»‘å®šçš„é—®é¢˜</code></li>
<li>ç”ŸæˆCNAMEæ–‡ä»¶ï¼Œå¹¶æ·»åŠ åˆ°sourceæ–‡ä»¶å¤¹ä¸‹ï¼Œä¸poståŒçº§ç›®å½•</li>
<li>æ›´æ”¹é…ç½®æ–‡ä»¶â€“â€”â€”config.yml<code>url: www.hanson647.com</code></li>
</ul>
<h3 id="ä¸»é¢˜å®‰è£…"><a href="#ä¸»é¢˜å®‰è£…" class="headerlink" title="ä¸»é¢˜å®‰è£…"></a>ä¸»é¢˜å®‰è£…</h3><ul>
<li>è¿›å…¥Hexoæ–‡ä»¶çš„æ ¹ç›®å½•<code>cd Hexo</code></li>
<li>æ‹‰å–ä¸»é¢˜æ–‡ä»¶ï¼Œå¹¶åœ¨æœ¬åœ°åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶<code>git clone https://github.com/kathyqian/crisp-ghost-theme.git themes/gost</code></li>
<li><p>æ›´æ”¹é…ç½®æ–‡ä»¶çš„ä¸»é¢˜ä¸ºè¯¥ä¸»é¢˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">theme: yilia</div></pre></td></tr></table></figure>
</li>
<li><p>é‡æ–°éƒ¨ç½²</p>
</li>
</ul>
<blockquote>
<p>ä¸»é¢˜æ›´æ–°<code>git pull</code></p>
<p>ä½¿ç”¨äº†yeleeä¸»é¢˜ï¼Œä¸»é¢˜ä½¿ç”¨è¯´æ˜<code>http://moxfive.coding.me/yelee/</code></p>
</blockquote>
<h3 id="æœç´¢åŠŸèƒ½é…ç½®"><a href="#æœç´¢åŠŸèƒ½é…ç½®" class="headerlink" title="æœç´¢åŠŸèƒ½é…ç½®"></a>æœç´¢åŠŸèƒ½é…ç½®</h3><ul>
<li>å®‰è£…æ’ä»¶<code>npm install --save hexo-generator-search</code></li>
<li><p>è®¾ç½®ä¸»é¢˜é…ç½®æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">search: </div><div class="line">  on: true</div><div class="line">  onload: true</div></pre></td></tr></table></figure>
</li>
<li><p>è®¾ç½®hexoé…ç½®æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">search:</div><div class="line">  path: search.xml</div><div class="line">  field: post</div></pre></td></tr></table></figure>
</li>
<li><p>é‡æ–°ç”Ÿæˆ</p>
</li>
</ul>
<p>æœ€åä½ ä¼šåœ¨publickæ–‡ä»¶ä¸­çœ‹åˆ°ä¸€ä¸ªsearch.xmlæ–‡ä»¶ï¼Œæœ€åä½ ä¼šåœ¨ä½ çš„ç½‘ç«™ä¸­çœ‹åˆ°ä½ çš„æœç´¢æ¡†</p>
<h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><p>åœ¨å·¥ç¨‹çš„_configæ–‡ä»¶ä¸­ï¼Œè¦å°†urlå¯¹åº”çš„å­—æ®µè®¾ç½®ä¸º/ï¼Œå¦åˆ™ä½ ä¼šå‘ç°æœç´¢ä¼šè‡ªåŠ¨åŠ ä¸Šä¸€ä¸ªå‰ç½®çš„urlï¼Œè¿™æ ·å°±åˆé”™ä¹±äº†</p>
<h3 id="æ·»åŠ æ ‡ç­¾ä»¥åŠæ ‡ç­¾äº‘é¡µé¢"><a href="#æ·»åŠ æ ‡ç­¾ä»¥åŠæ ‡ç­¾äº‘é¡µé¢" class="headerlink" title="æ·»åŠ æ ‡ç­¾ä»¥åŠæ ‡ç­¾äº‘é¡µé¢"></a>æ·»åŠ æ ‡ç­¾ä»¥åŠæ ‡ç­¾äº‘é¡µé¢</h3><ul>
<li>åˆ›å»ºtagsé¡µé¢<code>hexo new page tags</code></li>
<li><p>ç›´æ¥åœ¨æ–‡ç« ä¸­çš„tagså…³é”®å­—åè¾¹æ·»åŠ å¯¹åº”çš„æ ‡ç­¾å°±å¥½</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">tags:</div><div class="line">- å·¥å…·</div></pre></td></tr></table></figure>
</li>
<li><p>ç¼–è¾‘åˆšæ‰åˆ›å»ºçš„tagsé¡µé¢ï¼Œå°†å…¶ç±»å‹æ›´æ”¹ä¸ºtags</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">title: tags</div><div class="line">date: </div><div class="line">type: &quot;tags&quot;</div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œå°†tagsæ·»åŠ åˆ°menuä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">menu:</div><div class="line">  home: /</div><div class="line">  archives: /archives</div><div class="line">  tags: /tags</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="åˆ›å»ºå…³äºé¡µé¢"><a href="#åˆ›å»ºå…³äºé¡µé¢" class="headerlink" title="åˆ›å»ºå…³äºé¡µé¢"></a>åˆ›å»ºå…³äºé¡µé¢</h3><p><code>hexo new page about</code></p>
<h3 id="å®¹æ˜“å‡ºç°çš„é—®é¢˜"><a href="#å®¹æ˜“å‡ºç°çš„é—®é¢˜" class="headerlink" title="å®¹æ˜“å‡ºç°çš„é—®é¢˜"></a>å®¹æ˜“å‡ºç°çš„é—®é¢˜</h3><h4 id="hexo-d"><a href="#hexo-d" class="headerlink" title="hexo d"></a>hexo d</h4><ul>
<li><code>Error: ssh_exchange_identification: read: Connection reset by peer</code><br>è¯´æ˜æ˜¯ç½‘å…³çš„é—®é¢˜ï¼Œæˆ‘æ˜¯è§£å†³äº†ä¸€ä¸‹ç½‘ç»œè§£å†³çš„ï¼Œä¸€å¼€å§‹è¿æ¥çš„æ˜¯äº¬ä¸œçš„guestç½‘ç»œï¼Œå‡ºç°è¯¥é—®é¢˜ï¼Œåˆ‡æ¢ä¸ºaccessè§£å†³</li>
</ul>
<h4 id="mdæ–‡ä»¶æ ¼å¼"><a href="#mdæ–‡ä»¶æ ¼å¼" class="headerlink" title="mdæ–‡ä»¶æ ¼å¼"></a>mdæ–‡ä»¶æ ¼å¼</h4><p>æ ‡é¢˜ä¸­#å·è¦ä¸åè¾¹çš„æ ‡é¢˜ç•™å‡ºé—´éš™ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªç©ºæ ¼ï¼Œå¦åˆ™hexoæ¸²æŸ“æ˜¯ä¸è®¤çš„</p>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul>
<li>nextä¸»é¢˜è®¾ç½®<a href="http://theme-next.iissnan.com" target="_blank" rel="external">http://theme-next.iissnan.com</a></li>
<li>hexoå®˜ç½‘<a href="https://hexo.io/zh-cn/" target="_blank" rel="external">https://hexo.io/zh-cn/</a></li>
</ul>
]]></content>
      
        <categories>
            
            <category> åŸºç¡€ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> å·¥å…· </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSä¸­çš„ç©ºå€¼]]></title>
      <url>/2015/02/15/2015/iOS%E4%B8%AD%E7%9A%84%E7%A9%BA%E5%80%BC/</url>
      <content type="html"><![CDATA[<p>nilå’ŒNULLå’ŒNilå’ŒNSNullçš„åŒºåˆ«<br><a id="more"></a></p>
<h2 id="nil"><a href="#nil" class="headerlink" title="nil"></a>nil</h2><ul>
<li>nil æ˜¯ ObjC å¯¹è±¡çš„å­—é¢ç©ºå€¼ï¼Œå¯¹åº” id ç±»å‹çš„å¯¹è±¡ï¼Œæˆ–è€…ä½¿ç”¨ @interface å£°æ˜çš„ ObjC å¯¹è±¡ã€‚</li>
<li>ä¾‹å¦‚ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">NSString *someString = nil;</div><div class="line">NSURL *someURL = nil;</div><div class="line">id someObject = nil;</div><div class="line"></div><div class="line"></div><div class="line">if (anotherObject == nil) // do something</div><div class="line">- å®šä¹‰ï¼š</div><div class="line">?</div><div class="line">// objc.h</div><div class="line">#ifndef nil</div><div class="line"># if __has_feature(cxx_nullptr)</div><div class="line">#  define nil nullptr</div><div class="line"># else</div><div class="line">#  define nil __DARWIN_NULL</div><div class="line"># endif</div><div class="line">#endif</div><div class="line"></div><div class="line"></div><div class="line">// __DARWIN_NULL in _types.h</div><div class="line"></div><div class="line"></div><div class="line">#define __DARWIN_NULL ((void *)0)</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Nil"><a href="#Nil" class="headerlink" title="Nil"></a>Nil</h2><ul>
<li>Nil æ˜¯ ObjC ç±»ç±»å‹çš„ä¹¦é¢ç©ºå€¼ï¼Œå¯¹åº” Class ç±»å‹å¯¹è±¡ã€‚</li>
<li>ä¾‹å¦‚ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Class someClass = Nil;</div><div class="line">Class anotherClass = [NSString class];</div></pre></td></tr></table></figure>
<ul>
<li>å®šä¹‰å£°æ˜å’Œ nil æ˜¯å·®ä¸å¤šçš„ï¼Œå€¼ç›¸åŒï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// objc.h</div><div class="line">#ifndef Nil</div><div class="line"># if __has_feature(cxx_nullptr)</div><div class="line">#  define Nil nullptr</div><div class="line"># else</div><div class="line">#  define Nil __DARWIN_NULL</div><div class="line"># endif</div><div class="line">#endif</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="NULL"><a href="#NULL" class="headerlink" title="NULL"></a>NULL</h2><ul>
<li>NULL æ˜¯ä»»æ„çš„ C æŒ‡é’ˆç©ºå€¼ã€‚</li>
<li>ä¾‹å¦‚ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">int *pointerToInt = NULL;</div><div class="line"></div><div class="line">- char *pointerToChar = NULL;</div><div class="line">- struct TreeNode *rootNode = NULL;</div><div class="line">- å®šä¹‰ï¼š</div><div class="line">?</div><div class="line">// in stddef.h</div><div class="line"></div><div class="line"></div><div class="line">#define NULL ((void*)0)</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="NSNull"><a href="#NSNull" class="headerlink" title="NSNull"></a>NSNull</h2><ul>
<li>NSNull æ˜¯ä¸€ä¸ªä»£è¡¨ç©ºå€¼çš„ç±»ï¼Œæ˜¯ä¸€ä¸ª ObjC å¯¹è±¡ã€‚å®é™…ä¸Šå®ƒåªæœ‰ä¸€ä¸ªå•ä¾‹æ–¹æ³•ï¼š+[NSNull null]ï¼Œä¸€èˆ¬ç”¨äºè¡¨ç¤ºé›†åˆä¸­å€¼ä¸ºç©ºçš„å¯¹è±¡ã€‚</li>
<li>æ³¨æ„ï¼Œè¿™é‡ŒNSNullæ˜¯ä¸€ä¸ªå•ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´åŒä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ é™¤è¿™ä¸ªç©ºå¯¹è±¡ï¼Œé‚£ä¹ˆåªè¦è°ƒç”¨ä¸€æ¬¡removeobjec:æ–¹æ³•å°±å¥½äº†ã€‚</li>
<li>ä¾‹å­è¯´æ˜ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// å› ä¸º nil è¢«ç”¨æ¥ç”¨ä¸ºé›†åˆç»“æŸçš„æ ‡å¿—ï¼Œæ‰€ä»¥ nil ä¸èƒ½å­˜å‚¨åœ¨ Foundation é›†åˆé‡Œã€‚</div><div class="line">NSArray *array = [NSArray arrayWithObjects:@&quot;one&quot;, @&quot;two&quot;, nil];</div><div class="line"></div><div class="line">-</div><div class="line"></div><div class="line">// é”™è¯¯çš„ä½¿ç”¨</div><div class="line">NSMutableDictionary *dict = [NSMutableDictionary dictionary];</div><div class="line">[dict setObject:nil forKey:@&quot;someKey&quot;];</div><div class="line">-</div><div class="line"></div><div class="line">// æ­£ç¡®çš„ä½¿ç”¨</div><div class="line">NSMutableDictionary *dict = [NSMutableDictionary dictionary];</div><div class="line">[dict setObject:[NSNull null] forKey:@&quot;someKey&quot;];</div></pre></td></tr></table></figure>
</li>
</ul>
<p>ï¼Œå¯¹äºåƒNSArrayè¿™æ ·çš„ç±»å‹ï¼Œnilæˆ–NULLä¸èƒ½åšä¸ºåŠ åˆ°å…¶ä¸­çš„Objectï¼Œå¦‚æœå®šä¹‰äº†ä¸€ä¸ªNSArrayï¼Œä¸ºå…¶åˆ†é…äº†å†…å­˜ï¼Œåˆæƒ³è®¾ç½®å…¶ä¸­çš„å†…å®¹ä¸ºç©ºï¼Œåˆ™å¯ä»¥ç”¨[NSNULL nullè¿”å›çš„å¯¹å¯¹è±¡æ¥åˆå§‹åŒ–NSArrayä¸­çš„å†…å®¹ï¼Œæˆ‘çš„æ„Ÿè§‰æœ‰ç‚¹åƒCè¯­è¨€ä¸­mallocä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œç„¶åç”¨memsetåˆå§‹åŒ–è¿™æ®µç©ºé—´é‡Œçš„å€¼ä¸º0ã€‚</p>
<p>ç”±äºæœåŠ¡å™¨çš„æ•°æ®åº“ä¸­æœ‰äº›å­—æ®µä¸ºç©ºï¼Œç„¶åä»¥Jsonå½¢å¼è¿”å›ç»™å®¢æˆ·ç«¯æ—¶å°±ä¼šå‡ºç°è¿™æ ·çš„æ•°æ®ï¼š<br>â€œsomevalueâ€:null ï¼Œé€šè¿‡JsonKit è¿™ä¸ªç¬¬ä¸‰æ–¹åº“è§£æå‡ºæ¥çš„æ•°æ®å°±æˆäº†<br>somevalue=â€â€; è¿™ä¸ªæ•°æ®ç±»å‹ä¸æ˜¯nil ä¹Ÿä¸æ˜¯ Stringã€‚ è§£ææˆå¯¹è±¡ä¹‹åï¼Œå¦‚æœç›´æ¥å‘è¿™ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯ï¼ˆegï¼šlengthï¼Œcount ç­‰ç­‰ï¼‰å°±ä¼šç›´æ¥å´©æºƒã€‚æç¤ºé”™è¯¯ä¸ºï¼š<br>-[NSNulllength]:unrecognizedselectorsenttoinstance0x388a4a70 ï¼Œè¿™ä¸ªå°±æ˜¯NSNullç±»å‹çš„å¯¹è±¡ï¼Œä»£è¡¨ç©ºå¯¹è±¡ã€‚</p>
<h2 id="NIL-æˆ–-NSNil"><a href="#NIL-æˆ–-NSNil" class="headerlink" title="NIL æˆ– NSNil"></a>NIL æˆ– NSNil</h2><p>ObjC ä¸å­˜åœ¨è¿™ä¸¤ä¸ªç¬¦å·ï¼</p>
<p>å°ç»“</p>
<p>è™½ç„¶ nil, Nil, NULL çš„å€¼ç›¸åŒï¼Œç†è§£å®ƒä»¬ä¹‹é—´çš„ä¹¦é¢æ„ä¹‰æ‰é‡è¦ï¼Œè®©ä»£ç æ›´åŠ æ˜ç¡®ï¼Œå¢åŠ å¯è¯»æ€§ã€‚</p>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSä¸­çš„å®šæ—¶å’Œå»¶æ—¶]]></title>
      <url>/2015/01/23/2015/iOS%E4%B8%AD%E7%9A%84%E5%AE%9A%E6%97%B6%E5%92%8C%E5%BB%B6%E6%97%B6/</url>
      <content type="html"><![CDATA[<p>æˆ‘ä»¬ä½¿ç”¨å»¶æ—¶å’Œå®šæ—¶å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<ul>
<li>NSTimer</li>
</ul>
<h2 id="NSTimer"><a href="#NSTimer" class="headerlink" title="NSTimer"></a>NSTimer</h2><h3 id="å¾ªç¯å¼•ç”¨"><a href="#å¾ªç¯å¼•ç”¨" class="headerlink" title="å¾ªç¯å¼•ç”¨"></a>å¾ªç¯å¼•ç”¨</h3><p>æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªnstimerçš„æ—¶å€™ï¼Œä½¿ç”¨ä¸€ä¸ªç±»æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªtimerï¼Œè¿”å›ä¸€ä¸ªtimeræŒ‡é’ˆï¼Œæœ‰æ—¶éœ€è¦æŠŠtiemråŠ åˆ°runloopï¼Œæœ‰æ—¶ç³»ç»Ÿè‡ªå·±æ¥å¸®ä½ åšï¼Œä½ ä¼šå‘ç°ï¼Œå³ä½¿æˆ‘å¹¶æ²¡æœ‰å»å¼ºå¼•ç”¨è¿™ä¸ªæŒ‡é’ˆï¼Œtimeråªè¦åœ¨runloopä¸­ï¼Œtimerå°±å¯ä»¥è‡ªç„¶çš„å›è°ƒï¼Œè¿™æ˜¯å› ä¸ºtimerè¢«runloopæ‰€å¼•ç”¨ï¼Œæˆ‘ä»¬ç”¨æ§åˆ¶å™¨å»å¼•ç”¨è¿™ä¸ªtimerï¼Œä¹Ÿåªæ˜¯å¢åŠ äº†ä¸€ä¸ªå¼•ç”¨è€Œå·²ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">+(id)scheduledTimerWithTimeInterval:(NSTimeInterval)inTimeInterval block:(void (^)())inBlock repeats:(BOOL)inRepeats</div><div class="line">&#123;</div><div class="line">    void (^block)() = [inBlock copy];</div><div class="line">    id ret = [self scheduledTimerWithTimeInterval:inTimeInterval target:self selector:@selector(jdExecuteSimpleBlock:) userInfo:block repeats:inRepeats];</div><div class="line">    [block release];</div><div class="line">    return ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+(id)timerWithTimeInterval:(NSTimeInterval)inTimeInterval block:(void (^)())inBlock repeats:(BOOL)inRepeats</div><div class="line">&#123;</div><div class="line">    void (^block)() = [inBlock copy];</div><div class="line">    id ret = [self timerWithTimeInterval:inTimeInterval target:self selector:@selector(jdExecuteSimpleBlock:) userInfo:block repeats:inRepeats];</div><div class="line">    [block release];</div><div class="line">    return ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+(void)jdExecuteSimpleBlock:(NSTimer *)inTimer;</div><div class="line">&#123;</div><div class="line">    if([inTimer userInfo])</div><div class="line">    &#123;</div><div class="line">        void (^block)() = (void (^)())[inTimer userInfo];</div><div class="line">        block();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¹Ÿæ˜¯Blockå®ç°çš„tiemrä¸ä¼šè¢«é‡Šæ”¾çš„åŸå› ã€‚</p>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æµåª’ä½“æŠ€æœ¯æ¦‚è¿°]]></title>
      <url>/2015/01/17/2015/%E6%B5%81%E5%AA%92%E4%BD%93%E6%8A%80%E6%9C%AF%E6%A6%82%E8%BF%B0/</url>
      <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯æµåª’ä½“æŠ€æœ¯"><a href="#ä»€ä¹ˆæ˜¯æµåª’ä½“æŠ€æœ¯" class="headerlink" title="ä»€ä¹ˆæ˜¯æµåª’ä½“æŠ€æœ¯"></a>ä»€ä¹ˆæ˜¯æµåª’ä½“æŠ€æœ¯</h2><p>éšç€ç°ä»£æŠ€æœ¯çš„å‘å±•ï¼Œç½‘ç»œå¸¦ç»™äººä»¬å½¢å¼å¤šæ ·çš„ä¿¡æ¯ï¼Œä»ç¬¬ä¸€å¼ å›¾ç‰‡å‡ºç°åœ¨ç½‘ç»œä¸Šåˆ°å¦‚ä»Šå„ç§å½¢å¼çš„ç½‘ç»œè§†é¢‘å’Œä¸‰ç»´åŠ¨ç”»ï¼Œç½‘ç»œè®©äººä»¬çš„è§†å¬è§‰å¾—åˆ°äº†å¾ˆå¤§çš„æ»¡è¶³ã€‚ç„¶è€Œåœ¨æµåª’ä½“æŠ€æœ¯å‡ºç°ä¹‹å‰ï¼Œäººä»¬å¿…é¡»è¦å…ˆä¸‹è½½è¿™äº›å¤šåª’ä½“å†…å®¹åˆ°æœ¬åœ°è®¡ç®—æœºï¼Œåœ¨æ¼«é•¿çš„ç­‰å¾…ä¹‹åï¼ˆå› ä¸ºå—é™äºå¸¦å®½ï¼Œä¸‹è½½é€šå¸¸è¦èŠ±ä¸Šè¾ƒé•¿çš„æ—¶é—´ï¼‰ï¼Œæ‰å¯ä»¥çœ‹åˆ°æˆ–å¬åˆ°åª’ä½“ä¼ è¾¾çš„ä¿¡æ¯ã€‚ä»¤äººæ¬£æ…°çš„æ˜¯ï¼Œåœ¨æµåª’ä½“æŠ€æœ¯å‡ºç°ä¹‹åï¼Œäººä»¬ä¾¿æ— éœ€å†ç­‰å¾…åª’ä½“å®Œå…¨ä¸‹è½½å®Œæˆäº†ã€‚<br><a id="more"></a><br>æµåª’ä½“å°±æ˜¯æŒ‡é‡‡ç”¨æµå¼ä¼ è¾“æŠ€æœ¯åœ¨ç½‘ç»œä¸Šè¿ç»­å®æ—¶æ’­æ”¾çš„åª’ä½“æ ¼å¼ï¼Œå¦‚éŸ³é¢‘ã€è§†é¢‘æˆ–å¤šåª’ä½“æ–‡ä»¶ã€‚æµåª’ä½“æŠ€æœ¯ä¹Ÿç§°æµå¼åª’ä½“æŠ€æœ¯.æ‰€è°“æµåª’ä½“æŠ€æœ¯å°±æ˜¯æŠŠè¿ç»­çš„å½±åƒå’Œå£°éŸ³ä¿¡æ¯ç»è¿‡å‹ç¼©å¤„ç†åæ”¾ä¸Šç½‘ç«™æœåŠ¡å™¨,ç”±è§†é¢‘æœåŠ¡å™¨å‘ç”¨æˆ·è®¡ç®—æœºé¡ºåºæˆ–å®æ—¶åœ°ä¼ é€å„ä¸ªå‹ç¼©åŒ…ï¼Œè®©ç”¨æˆ·ä¸€è¾¹ä¸‹è½½ä¸€è¾¹è§‚çœ‹ã€æ”¶å¬ï¼Œè€Œä¸è¦ç­‰æ•´ä¸ªå‹ç¼©æ–‡ä»¶ä¸‹è½½åˆ°è‡ªå·±çš„è®¡ç®—æœºä¸Šæ‰å¯ä»¥è§‚çœ‹çš„ç½‘ç»œä¼ è¾“æŠ€æœ¯ã€‚è¯¥æŠ€æœ¯å…ˆåœ¨ä½¿ç”¨è€…ç«¯çš„è®¡ç®—æœºä¸Šåˆ›å»ºä¸€ä¸ªç¼“å†²åŒºï¼Œåœ¨æ’­æ”¾å‰é¢„å…ˆä¸‹ä¸€æ®µæ•°æ®ä½œä¸ºç¼“å†²ï¼Œåœ¨ç½‘è·¯å®é™…è¿çº¿é€Ÿåº¦å°äºæ’­æ”¾æ‰€è€—çš„é€Ÿåº¦æ—¶ï¼Œæ’­æ”¾ç¨‹åºå°±ä¼šå–ç”¨ä¸€å°æ®µç¼“å†²åŒºå†…çš„æ•°æ®ï¼Œè¿™æ ·å¯ä»¥é¿å…æ’­æ”¾çš„ä¸­æ–­ï¼Œä¹Ÿä½¿å¾—æ’­æ”¾å“è´¨å¾—ä»¥ä¿è¯ã€‚</p>
<h2 id="æµåª’ä½“æŠ€æœ¯çš„åº”ç”¨åˆ†ç±»"><a href="#æµåª’ä½“æŠ€æœ¯çš„åº”ç”¨åˆ†ç±»" class="headerlink" title="æµåª’ä½“æŠ€æœ¯çš„åº”ç”¨åˆ†ç±»"></a>æµåª’ä½“æŠ€æœ¯çš„åº”ç”¨åˆ†ç±»</h2><p>æµåª’ä½“åº”ç”¨å½¢å¼å¯ä»¥ç®€å•åˆ†ä¸º3ç±»ï¼šç‚¹æ’­å‹åº”ç”¨ã€ç›´æ’­å‹åº”ç”¨å’Œä¼šè®®å‹åº”ç”¨ã€‚</p>
<ul>
<li>ï¼ˆ1ï¼‰ç‚¹æ’­å‹åº”ç”¨ã€‚ç‚¹æ’­å‹åº”ç”¨ä¸­ï¼Œä¸€èˆ¬ç‚¹æ’­å†…å®¹å­˜æ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼Œæ ¹æ®éœ€è¦è¿›è¡Œå‘å¸ƒã€‚åœ¨åŒä¸€æ—¶é—´å¯å¤šç‚¹ç‚¹æ’­ç›¸åŒæˆ–ä¸åŒçš„èŠ‚ç›®ï¼Œå³å¤šä¸ªç»ˆç«¯å¯åœ¨ä¸åŒçš„åœ°ç‚¹ã€ä¸åŒçš„æ—¶åˆ»ï¼Œå®æ—¶ã€äº¤äº’å¼åœ°ç‚¹æ’­åŒä¸€æµæ–‡ä»¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡é—¨æˆ·æŸ¥çœ‹å’Œé€‰æ‹©å†…å®¹è¿›è¡Œç‚¹æ’­ã€‚æ ¹æ®ç”¨æˆ·çš„éœ€è¦ï¼Œç‚¹æ’­è¿‡ç¨‹ä¸­è¿˜å¯ä»¥å®ç°æ’­æ”¾ã€åœæ­¢ã€æš‚åœã€å¿«è¿›ã€åé€€ç­‰åŠŸèƒ½ã€‚</li>
<li>ï¼ˆ2ï¼‰ç›´æ’­å‹åº”ç”¨ã€‚ç›´æ’­æœåŠ¡æ¨¡å¼ä¸‹ï¼Œç”¨æˆ·åªèƒ½è§‚çœ‹æ’­æ”¾çš„å†…å®¹ï¼Œæ— æ³•è¿›è¡Œæ§åˆ¶ã€‚</li>
<li>ï¼ˆ3ï¼‰ä¼šè®®å‹åº”ç”¨ã€‚ä¼šè®®å‹åº”ç”¨ç±»ä¼¼äºç›´æ’­å‹åº”ç”¨ï¼Œä½†æ˜¯ä¸¤è€…æœ‰ä¸åŒçš„è¦æ±‚ï¼Œå¦‚åŒå‘é€šä¿¡ç­‰ã€‚è¿™å¯¹ä¸€èˆ¬åŒæ–¹éƒ½è¦æœ‰åŒ…æ‹¬åª’ä½“é‡‡é›†çš„ç¡¬ä»¶å’Œè½¯ä»¶ï¼Œè¿˜æœ‰æµä¼ è¾“æŠ€æœ¯ã€‚ä¼šè®®å‹çš„åº”ç”¨æœ‰æ—¶å€™ä¸éœ€è¦å¾ˆé«˜çš„éŸ³/è§†é¢‘è´¨é‡ã€‚</li>
<li>ï¼ˆ4ï¼‰è§†é¢‘å¹¿æ’­ï¼Œæ˜¯ç‚¹æ’­çš„æ‰©å±•ï¼ŒæŠŠèŠ‚ç›®æºç»„ç»‡æˆé¢‘é“ï¼Œä»¥å¹¿æ’­çš„æ–¹å¼æä¾›ï¼Œç”¨æˆ·é€šè¿‡åŠ å…¥é¢‘é“æ”¶çœ‹é¢„å®šå¥½çš„èŠ‚ç›®</li>
<li>(5)è§†é¢‘ç›‘è§†</li>
<li>(6)éŸ³ä¹æ’­æ”¾/åœ¨çº¿ç”µå°</li>
<li>(7)ç”µè§†ä¸Šç½‘<h2 id="æµåª’ä½“æŠ€æœ¯åŸç†"><a href="#æµåª’ä½“æŠ€æœ¯åŸç†" class="headerlink" title="æµåª’ä½“æŠ€æœ¯åŸç†"></a>æµåª’ä½“æŠ€æœ¯åŸç†</h2>å¦‚æœå°†æ–‡ä»¶ä¼ è¾“çœ‹ä½œæ˜¯ä¸€æ¬¡æ¥æ°´çš„è¿‡ç¨‹ï¼Œè¿‡å»çš„ä¼ è¾“æ–¹å¼å°±åƒæ˜¯å¯¹ç”¨æˆ·åšäº†ä¸€ä¸ªè§„å®šï¼Œå¿…é¡»ç­‰åˆ°ä¸€æ¡¶æ°´æ¥æ»¡æ‰èƒ½ä½¿ç”¨å®ƒï¼Œè¿™ä¸ªç­‰å¾…çš„æ—¶é—´è‡ªç„¶è¦å—åˆ°æ°´æµé‡å¤§å°å’Œæ¡¶çš„å¤§å°çš„å½±å“ã€‚è€Œæµå¼ä¼ è¾“åˆ™æ˜¯ï¼Œæ‰“å¼€æ°´å¤´é¾™ï¼Œç­‰å¾…ä¸€å°ä¼šå„¿ï¼Œæ°´å°±ä¼šæºæºä¸æ–­åœ°æµå‡ºæ¥ï¼Œè€Œä¸”å¯ä»¥éšæ¥éšç”¨ï¼Œå› æ­¤ï¼Œä¸ç®¡æ°´æµé‡çš„å¤§å°ï¼Œä¹Ÿä¸ç®¡æ¡¶çš„å¤§å°ï¼Œç”¨æˆ·éƒ½å¯ä»¥éšæ—¶ç”¨ä¸Šæ°´ã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šçœ‹ï¼Œæµåª’ä½“è¿™ä¸ªè¯æ˜¯éå¸¸å½¢è±¡çš„ã€‚<br>æµå¼ä¼ è¾“æŠ€æœ¯åˆåˆ†ä¸¤ç§ï¼Œä¸€ç§æ˜¯é¡ºåºæµå¼ä¼ è¾“ï¼Œå¦ä¸€ç§æ˜¯å®æ—¶æµå¼ä¼ è¾“ã€‚<h3 id="é¡ºåºæµå¼ä¼ è¾“"><a href="#é¡ºåºæµå¼ä¼ è¾“" class="headerlink" title="é¡ºåºæµå¼ä¼ è¾“"></a>é¡ºåºæµå¼ä¼ è¾“</h3>é¡ºåºæµå¼ä¼ è¾“æ˜¯é¡ºåºä¸‹è½½ï¼Œåœ¨ä¸‹è½½æ–‡ä»¶çš„åŒæ—¶ç”¨æˆ·å¯ä»¥è§‚çœ‹ï¼Œä½†æ˜¯ï¼Œç”¨æˆ·çš„è§‚çœ‹ä¸æœåŠ¡å™¨ä¸Šçš„ä¼ è¾“å¹¶ä¸æ˜¯åŒæ­¥è¿›è¡Œçš„ï¼Œç”¨æˆ·æ˜¯åœ¨ä¸€æ®µå»¶æ—¶åæ‰èƒ½çœ‹åˆ°æœåŠ¡å™¨ä¸Šä¼ å‡ºæ¥çš„ä¿¡æ¯ï¼Œæˆ–è€…è¯´ç”¨æˆ·çœ‹åˆ°çš„æ€»æ˜¯æœåŠ¡å™¨åœ¨è‹¥å¹²æ—¶é—´ä»¥å‰ä¼ å‡ºæ¥çš„ä¿¡æ¯ã€‚åœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·åªèƒ½è§‚çœ‹å·²ä¸‹è½½çš„é‚£éƒ¨åˆ†ï¼Œè€Œä¸èƒ½è¦æ±‚è·³åˆ°è¿˜æœªä¸‹è½½çš„éƒ¨åˆ†ã€‚é¡ºåºæµå¼ä¼ è¾“æ¯”è¾ƒé€‚åˆé«˜è´¨é‡çš„çŸ­ç‰‡æ®µï¼Œå› ä¸ºå®ƒå¯ä»¥è¾ƒå¥½åœ°ä¿è¯èŠ‚ç›®æ’­æ”¾çš„æœ€ç»ˆè´¨é‡ã€‚å®ƒé€‚åˆäºåœ¨ç½‘ç«™ä¸Šå‘å¸ƒçš„ä¾›ç”¨æˆ·ç‚¹æ’­çš„éŸ³è§†é¢‘èŠ‚ç›®ã€‚<br>å¯¹é€šè¿‡è°ƒåˆ¶è§£è°ƒå™¨å‘å¸ƒçš„çŸ­ç‰‡æ®µï¼Œé¡ºåºæµå¼ä¼ è¾“å¾ˆå®ç”¨ï¼Œå®ƒå…è®¸ç”¨æ¯”è°ƒåˆ¶è§£è°ƒå™¨è·Ÿé«˜çš„æ•°æ®é€Ÿç‡åˆ›å»ºè§†é¢‘ç‰‡æ®µï¼Œå°½ç®¡æœ‰å»¶è¿Ÿæ¯•ç«Ÿå¯è®©ä½ å‘å¸ƒé«˜è´¨é‡çš„è§†é¢‘ç‰‡æ®µã€‚<br>é¡ºåºæµå¼æ–‡ä»¶æ˜¯æ”¾åœ¨æ ‡å‡†HTTPæˆ–FTPæœåŠ¡å™¨ä¸Šï¼Œæ˜“ç®¡ç†åŸºæœ¬ä¸Šä¸é˜²ç«å¢™æ— å…³ï¼Œé¡ºåºæµå¼ä¼ æ’­ä¸é€‚åˆé•¿ç‰‡æ®µå’Œæœ‰éšæœºè®¿é—®è¦æ±‚çš„è§†é¢‘ï¼Œå¦‚æ¼”è®²ï¼Œæ¼”è¯´ä¸æ¼”ç¤ºï¼Œå®ƒä¸æ”¯æŒç°åœºå¹¿æ’­ï¼Œä¸¥æ ¼æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ç§ç‚¹æ’­æŠ€æœ¯ã€‚</li>
</ul>
<h3 id="å®æ—¶æµå¼ä¼ è¾“"><a href="#å®æ—¶æµå¼ä¼ è¾“" class="headerlink" title="å®æ—¶æµå¼ä¼ è¾“"></a>å®æ—¶æµå¼ä¼ è¾“</h3><p>åœ¨å®æ—¶æµå¼ä¼ è¾“ä¸­ï¼ŒéŸ³è§†é¢‘ä¿¡æ¯å¯è¢«å®æ—¶è§‚çœ‹åˆ°ã€‚åœ¨è§‚çœ‹è¿‡ç¨‹ä¸­ç”¨æˆ·å¯å¿«è¿›æˆ–åé€€ä»¥è§‚çœ‹å‰é¢æˆ–åé¢çš„å†…å®¹ï¼Œä½†æ˜¯åœ¨è¿™ç§ä¼ è¾“æ–¹å¼ä¸­ï¼Œå¦‚æœç½‘ç»œä¼ è¾“çŠ¶å†µä¸ç†æƒ³ï¼Œåˆ™æ”¶åˆ°çš„ä¿¡å·æ•ˆæœæ¯”è¾ƒå·®ã€‚<br>å®æ—¶æµå¼ä¼ è¾“å¿…é¡»åŒ¹é…è¿æ¥å®½å¸¦ï¼Œæ„å‘³ç€ä»¥è°ƒåˆ¶è§£è°ƒå™¨é€Ÿåº¦è¿æ¥æ—¶å›¾åƒè´¨é‡è¾ƒå·®ï¼Œè€Œä¸”ç”±äºå‡ºé”™ä¸¢å¤±çš„ä¿¡æ¯è¢«å¿½ç•¥æ‰ï¼Œç½‘ç»œæ‹¥æŒ¤æˆ–è€…å‡ºç°é—®é¢˜æ—¶å€™ï¼Œè§†é¢‘è´¨é‡å¾ˆå·®ï¼Œå¦‚æ¬²ä¿è¯è§†é¢‘è´¨é‡ï¼Œé¡ºåºæµå¼ä¼ è¾“ä¹Ÿè®¸æ›´å¥½ï¼Œå®æ—¶æµå¼ä¼ è¾“éœ€è¦ç‰¹å®šçš„æœåŠ¡å™¨ï¼Œå¦‚QuickTime Streaming Server/Real Server/Windows Media Serverè¿™äº›æœåŠ¡å™¨å…è®¸ä½ å¯¹åª’ä½“å‘é€è¿›è¡Œæ›´å¤šçº§åˆ«çš„æ§åˆ¶ï¼Œå› ä¸ºè€Œç³»ç»Ÿè®¾ç½®ç®¡ç†æ¯”HTTPæœåŠ¡å™¨æ›´å¤æ‚ï¼Œå®æ—¶æµä¼ è¾“è¿˜éœ€è¦ç‰¹æ®Šçš„ç½‘ç»œåè®®ï¼Œæ¯”å¦‚RTSP(Real time sreming protocol)æˆ–MMS(Microsoft Media Server)è¿™äº›åè®®åœ¨æœ‰é˜²ç«å¢™çš„æ—¶å€™ä¼šå‡ºç°é—®é¢˜ï¼Œå¯¼è‡´ç”¨æˆ·ä¸èƒ½çœ‹åˆ°ä¸€äº›åœ°ç‚¹çš„å®æ—¶å†…å®¹ã€‚</p>
<h2 id="æµåª’ä½“ç³»ç»Ÿçš„ç»„æˆ"><a href="#æµåª’ä½“ç³»ç»Ÿçš„ç»„æˆ" class="headerlink" title="æµåª’ä½“ç³»ç»Ÿçš„ç»„æˆ"></a>æµåª’ä½“ç³»ç»Ÿçš„ç»„æˆ</h2><p>é€šå¸¸ï¼Œç»„æˆä¸€ä¸ªå®Œæ•´çš„æµåª’ä½“ç³»ç»ŸåŒ…æ‹¬ä»¥ä¸‹5ä¸ªéƒ¨åˆ†ï¼š</p>
<p>ã€€ã€€â‘ ä¸€ç§ç”¨äºåˆ›å»ºã€æ•æ‰å’Œç¼–è¾‘å¤šåª’ä½“æ•°æ®ï¼Œå½¢æˆæµåª’ä½“æ ¼å¼çš„ç¼–ç å·¥å…·;</p>
<p>ã€€ã€€â‘¡æµåª’ä½“æ•°æ®;</p>
<p>ã€€ã€€â‘¢ä¸€ä¸ªå­˜æ”¾å’Œæ§åˆ¶æµåª’ä½“æ•°æ®çš„æœåŠ¡å™¨;</p>
<p>ã€€ã€€â‘£è¦æœ‰é€‚åˆå¤šåª’ä½“ä¼ è¾“åè®®ç”šè‡³æ˜¯å®æ—¶ä¼ è¾“åè®®çš„ç½‘ç»œ;</p>
<p>ã€€ã€€â‘¤ä¾›å®¢æˆ·ç«¯æµè§ˆæµåª’ä½“æ–‡ä»¶çš„æ’­æ”¾å™¨ã€‚
ã€€ã€€</p>
<h2 id="æµåª’ä½“ä¼ è¾“çš„åŸºæœ¬åŸç†"><a href="#æµåª’ä½“ä¼ è¾“çš„åŸºæœ¬åŸç†" class="headerlink" title="æµåª’ä½“ä¼ è¾“çš„åŸºæœ¬åŸç†"></a>æµåª’ä½“ä¼ è¾“çš„åŸºæœ¬åŸç†</h2><p>æµåª’ä½“ä¼ è¾“çš„åŸºæœ¬åŸç†  æµåª’ä½“æœåŠ¡å™¨æ¶è®¾  æµåª’ä½“æŠ€æœ¯ä¹Ÿç§°ä¸ºæµå¼ä¼ è¾“æŠ€æœ¯ï¼Œæ˜¯æŒ‡åœ¨ç½‘ç»œä¸ŠæŒ‰æ—¶é—´å…ˆåæ¬¡åºä¼ è¾“å’Œæ’­æ”¾çš„è¿ç»­éŸ³ã€è§†é¢‘æ•°æ®æµã€‚éšç€ç½‘ç»œé€Ÿåº¦çš„æé«˜ï¼Œä»¥æµåª’ä½“æŠ€æœ¯ä¸ºæ ¸å¿ƒçš„è§†é¢‘ç‚¹æ’­ã€åœ¨çº¿ç”µè§†ã€è¿œç¨‹åŸ¹è®­ç­‰ä¸šåŠ¡å¼€å±•å¾—è¶Šæ¥è¶Šå¹¿æ³›ã€‚æœ¬ç« ä¸»è¦ä»‹ç»æµåª’ä½“æŠ€æœ¯çš„åŸºç¡€çŸ¥è¯†ã€æµåª’ä½“æœåŠ¡å™¨çš„å®‰è£…ã€è¿è¡Œã€é…ç½®å’Œä½¿ç”¨ç­‰å†…å®¹ã€‚  23.1  æµåª’ä½“æŠ€æœ¯åŸºç¡€  æµåª’ä½“æ˜¯æŒ‡åˆ©ç”¨æµå¼ä¼ è¾“æŠ€æœ¯ä¼ é€çš„éŸ³é¢‘ã€è§†é¢‘ç­‰è¿ç»­åª’ä½“æ•°æ®ï¼Œå®ƒçš„æ ¸å¿ƒæ˜¯ä¸²æµï¼ˆStreamingï¼‰æŠ€æœ¯å’Œæ•°æ®å‹ç¼©æŠ€æœ¯ï¼Œå…·æœ‰è¿ç»­æ€§ã€å®æ—¶æ€§ã€æ—¶åºæ€§3ä¸ªç‰¹ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨é¡ºåºæµå¼ä¼ è¾“å’Œå®æ—¶æµå¼ä¼ è¾“ä¸¤ç§ä¼ è¾“æ–¹å¼ã€‚æœ¬èŠ‚ä¸»è¦ä»‹ç»æœ‰å…³æµåª’ä½“çš„æŠ€æœ¯åŸºç¡€ã€‚  23.1.1  æµåª’ä½“ä¼ è¾“çš„åŸºæœ¬åŸç† å®ç°æµå¼ä¼ è¾“éœ€è¦ä½¿ç”¨ç¼“å­˜æœºåˆ¶ã€‚å› ä¸ºéŸ³é¢‘æˆ–è§†é¢‘æ•°æ®åœ¨ç½‘ç»œä¸­æ˜¯ä»¥åŒ…çš„å½¢å¼ä¼ è¾“çš„ï¼Œè€Œç½‘ç»œæ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œå„ä¸ªæ•°æ®åŒ…é€‰æ‹©çš„è·¯ç”±å¯èƒ½ä¸å°½ç›¸åŒï¼Œåˆ°è¾¾å®¢æˆ·ç«¯æ‰€éœ€çš„æ—¶é—´ä¹Ÿå°±ä¸ä¸€æ ·ï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°å…ˆå‘çš„æ•°æ®åŒ…å´ååˆ°ã€‚å› æ­¤ï¼Œå®¢æˆ·ç«¯å¦‚æœæŒ‰ç…§åŒ…åˆ°è¾¾çš„æ¬¡åºæ’­æ”¾æ•°æ®ï¼Œå¿…ç„¶ä¼šå¾—åˆ°ä¸æ­£ç¡®çš„ç»“æœã€‚ä½¿ç”¨ç¼“å­˜æœºåˆ¶å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°æ•°æ®åŒ…åå…ˆç¼“å­˜èµ·æ¥ï¼Œæ’­æ”¾å™¨å†ä»ç¼“å­˜ä¸­æŒ‰æ¬¡åºè¯»å–æ•°æ®ã€‚  ä½¿ç”¨ç¼“å­˜æœºåˆ¶è¿˜å¯ä»¥è§£å†³åœé¡¿é—®é¢˜ã€‚ç½‘ç»œç”±äºæŸç§åŸå› ç»å¸¸ä¼šæœ‰ä¸€äº›çªå‘æµé‡ï¼Œæ­¤æ—¶ä¼šé€ æˆæš‚æ—¶çš„æ‹¥å¡ï¼Œä½¿æµæ•°æ®ä¸èƒ½å®æ—¶åˆ°è¾¾å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯çš„æ’­æ”¾å°±ä¼šå‡ºç°åœé¡¿ã€‚å¦‚æœé‡‡ç”¨äº†ç¼“å­˜æœºåˆ¶ï¼Œæš‚æ—¶çš„ç½‘ç»œé˜»å¡å¹¶ä¸ä¼šå½±å“æ’­æ”¾æ•ˆæœï¼Œå› ä¸ºæ’­æ”¾å™¨å¯ä»¥è¯»å–ä»¥å‰ç¼“å­˜çš„æ•°æ®ã€‚ç­‰ç½‘ç»œæ­£å¸¸åï¼Œæ–°çš„æµæ•°æ®å°†ä¼šç»§ç»­æ·»åŠ åˆ°ç¼“å­˜ä¸­ã€‚  è™½ç„¶éŸ³é¢‘æˆ–è§†é¢‘ç­‰æµæ•°æ®å®¹é‡éå¸¸å¤§ï¼Œä½†æ’­æ”¾æµæ•°æ®æ—¶æ‰€éœ€çš„ç¼“å­˜å®¹é‡å¹¶ä¸éœ€è¦å¾ˆå¤§ï¼Œå› ä¸ºç¼“å­˜å¯ä»¥ä½¿ç”¨ç¯å½¢é“¾è¡¨ç»“æ„æ¥å­˜å‚¨æ•°æ®ï¼Œå·²ç»æ’­æ”¾çš„å†…å®¹å¯ä»¥é©¬ä¸Šä¸¢å¼ƒï¼Œç¼“å­˜å¯ä»¥è…¾å‡ºç©ºé—´ç”¨äºå­˜æ”¾åç»­å°šæœªæ’­æ”¾çš„å†…å®¹ã€‚  å½“ä¼ è¾“æµæ•°æ®æ—¶ï¼Œéœ€è¦ä½¿ç”¨åˆé€‚çš„ä¼ è¾“åè®®ã€‚TCPè™½ç„¶æ˜¯ä¸€ç§å¯é çš„ä¼ è¾“åè®®ï¼Œä½†ç”±äºéœ€è¦çš„å¼€é”€è¾ƒå¤šï¼Œå¹¶ä¸é€‚åˆä¼ è¾“å®æ—¶æ€§è¦æ±‚å¾ˆé«˜çš„æµæ•°æ®ã€‚å› æ­¤ï¼Œåœ¨å®é™…çš„æµå¼ä¼ è¾“æ–¹æ¡ˆä¸­ï¼ŒTCPåè®®ä¸€èˆ¬ç”¨æ¥ä¼ è¾“æ§åˆ¶ä¿¡æ¯ï¼Œè€Œå®æ—¶çš„éŸ³è§†é¢‘æ•°æ®åˆ™æ˜¯ç”¨æ•ˆç‡æ›´é«˜çš„RTP/UDPç­‰åè®®æ¥ä¼ è¾“ã€‚æµåª’ä½“ä¼ è¾“çš„åŸºæœ¬åŸç†å¦‚å›¾23-1æ‰€ç¤ºã€‚  åœ¨å›¾23-1ä¸­ï¼ŒWebæœåŠ¡å™¨åªæ˜¯ä¸ºç”¨æˆ·æä¾›äº†ä½¿ç”¨æµåª’ä½“çš„æ“ä½œç•Œé¢ã€‚å®¢æˆ·æœºä¸Šçš„ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­é€‰ä¸­æ’­æ”¾æŸä¸€æµåª’ä½“èµ„æºåï¼ŒWebæœåŠ¡å™¨æŠŠæœ‰å…³è¿™ä¸€èµ„æºçš„æµåª’ä½“æœåŠ¡å™¨åœ°å€ã€èµ„æºè·¯å¾„åŠç¼–ç ç±»å‹ç­‰ä¿¡æ¯æä¾›ç»™å®¢æˆ·ç«¯ï¼Œäºæ˜¯å®¢æˆ·ç«¯å°±å¯åŠ¨äº†æµåª’ä½“æ’­æ”¾å™¨ï¼Œä¸æµåª’ä½“æœåŠ¡å™¨è¿›è¡Œè¿æ¥ã€‚</p>
<p>å®¢æˆ·ç«¯çš„æµåª’ä½“æ’­æ”¾å™¨ä¸æµåª’ä½“æœåŠ¡å™¨ä¹‹é—´äº¤æ¢æ§åˆ¶ä¿¡æ¯æ—¶ä½¿ç”¨çš„æ˜¯RTSPåè®®ï¼Œå®ƒæ˜¯åŸºäºTCPåè®®çš„ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯554ç«¯å£ã€‚RTSPåè®®æä¾›äº†æœ‰å…³æµåª’ä½“æ’­æ”¾ã€å¿«è¿›ã€å¿«å€’ã€æš‚åœåŠå½•åˆ¶ç­‰æ“ä½œçš„å‘½ä»¤å’Œæ–¹æ³•ã€‚é€šè¿‡RTSPåè®®ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨æå‡ºäº†æ’­æ”¾æŸä¸€æµåª’ä½“èµ„æºçš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨å“åº”äº†è¿™ä¸ªè¯·æ±‚åï¼Œå°±å¯ä»¥æŠŠæµåª’ä½“æ•°æ®ä¼ è¾“ç»™å®¢æˆ·ç«¯äº†ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRTSPåè®®å¹¶ä¸å…·å¤‡ä¼ è¾“æµåª’ä½“æ•°æ®çš„åŠŸèƒ½ï¼Œæ‰¿æ‹…æµåª’ä½“æ•°æ®ä¼ è¾“ä»»åŠ¡çš„æ˜¯å¦ä¸€ç§åŸºäºUDPçš„RTPåè®®ï¼Œä½†åœ¨RTPåè®®ä¼ è¾“æµåª’ä½“æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼ŒRTSPè¿æ¥æ˜¯ä¸€ç›´å­˜åœ¨çš„ï¼Œå¹¶ä¸”æ§åˆ¶ç€æµåª’ä½“æ•°æ®çš„ä¼ è¾“ã€‚ä¸€æ—¦æµåª’ä½“æ•°æ®åˆ°è¾¾äº†å®¢æˆ·ç«¯ï¼Œæµåª’ä½“æ’­æ”¾å™¨å°±å¯ä»¥æ’­æ”¾è¾“å‡ºäº†ã€‚æµåª’ä½“çš„æ•°æ®å’Œæ§åˆ¶ä¿¡æ¯ä½¿ç”¨ä¸åŒçš„åè®®å’Œè¿æ¥æ—¶ï¼Œè¿˜å¯ä»¥å¸¦æ¥ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯æ’­æ”¾æµåª’ä½“çš„å®¢æˆ·æœºå’Œæ§åˆ¶æµåª’ä½“æ’­æ”¾çš„å®¢æˆ·æœºå¯ä»¥æ˜¯ä¸åŒçš„è®¡ç®—æœºã€‚</p>
<h3 id="å®æ—¶æµåª’ä½“åè®®RTSP"><a href="#å®æ—¶æµåª’ä½“åè®®RTSP" class="headerlink" title="å®æ—¶æµåª’ä½“åè®®RTSP"></a>å®æ—¶æµåª’ä½“åè®®RTSP</h3><p>RTSPï¼ˆReal Time Streaming Protocolï¼Œå®æ—¶æµåª’ä½“åè®®ï¼‰æ˜¯ç”±Real Networkå’ŒNetscapeå…±åŒæå‡ºçš„ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œå®ƒå®šä¹‰äº†å¦‚ä½•åœ¨IPç½‘ç»œä¸Šæœ‰æ•ˆåœ°ä¼ è¾“æµåª’ä½“æ•°æ®ã€‚RTSPæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œä½¿éŸ³é¢‘ã€è§†é¢‘ç­‰æ•°æ®å¯ä»¥æŒ‰ç…§éœ€è¦è¿›è¡Œå®æ—¶ä¼ è¾“ï¼Œå¹¶ä¸”å¯ä»¥å®æ–½è¯¸å¦‚æš‚åœã€å¿«è¿›ç­‰æ§åˆ¶ã€‚æºæ•°æ®å¯ä»¥æ˜¯å­˜å‚¨çš„æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ç°åœºæ•°æ®çš„åé¦ˆã€‚RTSPåè®®æœ¬èº«å¹¶ä¸ä¼ è¾“æ•°æ®ï¼Œæ•°æ®çš„ä¼ è¾“æ˜¯é€šè¿‡åŸºäºUDPåè®®çš„RTPåè®®æ¥å®Œæˆçš„ã€‚</p>
<p>RTSPåè®®ä¸HTTPåè®®æœ‰ç‚¹ç±»ä¼¼ï¼Œé€šä¿¡åŒæ–¹æ˜¯é€šè¿‡è¯·æ±‚æ¶ˆæ¯å’Œå›åº”æ¶ˆæ¯è¿›è¡Œäº¤äº’çš„ã€‚è¯·æ±‚æ¶ˆæ¯çš„æ ¼å¼å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;è¯·æ±‚æ–¹æ³•&gt;  &lt;URI&gt;  &lt;RTSPç‰ˆæœ¬&gt; </div><div class="line">[æ¶ˆæ¯å¤´]  </div><div class="line">CR/ LF  </div><div class="line">[æ¶ˆæ¯ä½“]</div></pre></td></tr></table></figure></p>
<p>å…¶ä¸­ï¼Œè¯·æ±‚æ–¹æ³•åŒ…æ‹¬PLAYã€DESCRIBEç­‰ï¼Œå¯ä»¥é€šè¿‡OPTIONæ–¹æ³•å¾—åˆ°å¯¹æ–¹æ‰€æ”¯æŒçš„å…¶ä»–æ–¹æ³•åç§°ã€‚URIæ˜¯å¯¹æ–¹çš„åœ°å€ï¼Œä¾‹å¦‚ï¼šrtsp://192.168.0.1ã€‚â€RTSPç‰ˆæœ¬â€ä¸€èˆ¬éƒ½æ˜¯RTSP/1.0ã€‚æ¯ä¸€è¡Œçš„æœ€åéƒ½æ˜¯å›è½¦æ¢è¡Œç¬¦CR/LFï¼Œæ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ä¹‹é—´è¦æœ‰ä¸€ä¸ªç©ºè¡Œã€‚å›åº”æ¶ˆæ¯æ ¼å¼å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;RTSPç‰ˆæœ¬&gt; &lt;çŠ¶æ€ç &gt; &lt;è§£é‡Š&gt; </div><div class="line">[æ¶ˆæ¯å¤´]  </div><div class="line">CR/LF  </div><div class="line">[æ¶ˆæ¯ä½“]</div></pre></td></tr></table></figure></p>
<p>å›åº”æ¶ˆæ¯çš„æ ¼å¼è§„å®šä¸è¯·æ±‚æ¶ˆæ¯ç±»ä¼¼ã€‚å…¶ä¸­çŠ¶æ€ç æ˜¯ä¸€ä¸ª3ä½æ•°ï¼Œåé¢è·Ÿéšç€è§£é‡Šæ–‡æœ¬ï¼Œä¾‹å¦‚ï¼Œ200è¡¨ç¤ºæˆåŠŸã€‚</p>
<p>HTTPåè®®æ˜¯å•å‘çš„ï¼Œå³åªèƒ½æ˜¯å®¢æˆ·ç«¯æå‡ºè¯·æ±‚ï¼ŒæœåŠ¡ç«¯ç»™äºˆå›åº”ï¼Œè€Œä½¿ç”¨RTSPæ—¶ï¼Œå®¢æˆ·æœºå’ŒæœåŠ¡å™¨éƒ½å¯ä»¥å‘å‡ºè¯·æ±‚ï¼ŒåŒæ–¹éƒ½å¯ä»¥å¯¹æ”¶åˆ°çš„è¯·æ±‚è¿›è¡Œåº”ç­”ï¼Œå³RTSPå¯ä»¥æ˜¯åŒå‘çš„ã€‚ä¸€ä¸ªå…¸å‹çš„RSTPäº¤äº’è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä¸­Cè¡¨ç¤ºRTSPå®¢æˆ·ç«¯ï¼ŒSè¡¨ç¤ºRTSPæœåŠ¡ç«¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">C-&gt;S:    OPTION request     //å®¢æˆ·ç«¯é€šè¿‡OPTIONæ–¹æ³•è¯¢é—®</div><div class="line">æœåŠ¡ç«¯æ”¯æŒå“ªäº›æ–¹æ³•  </div><div class="line">S-&gt;C:    OPTION response    //æœåŠ¡ç«¯è¿›è¡Œå›åº”ï¼Œæä¾›äº†æ‰€æ”¯æŒæ–¹æ³•çš„åç§°  </div><div class="line"> </div><div class="line">C-&gt;S:    DESCRIBE request   //å®¢æˆ·ç«¯é€šè¿‡DESCRIBEæ–¹æ³•æŸ¥è¯¢æœåŠ¡</div><div class="line">ç«¯åª’ä½“çš„åˆå§‹åŒ–æè¿°</div><div class="line">//ä¿¡æ¯  </div><div class="line">S-&gt;C:    DESCRIBE response  //æœåŠ¡ç«¯å›åº”åª’ä½“åˆå§‹åŒ–æè¿°ä¿¡æ¯ï¼Œ</div><div class="line">é‡‡ç”¨çš„æ˜¯sdpä¼šè¯æè¿°</div><div class="line">//æ ¼å¼  </div><div class="line"> </div><div class="line">C-&gt;S:    SETUP request      //å®¢æˆ·ç«¯é€šè¿‡SETUPæ–¹æ³•è®¾ç½®ä¼šè¯</div><div class="line">çš„å±æ€§ã€ä¼ è¾“æ¨¡å¼ç­‰å‚æ•°ï¼Œ</div><div class="line">//å¹¶è¯·æ±‚å»ºç«‹ä¼šè¯  </div><div class="line">S-&gt;C:    SETUP response         //æœåŠ¡ç«¯å“åº”å›è¯è¯·æ±‚ï¼Œä¸å®¢</div><div class="line">æˆ·ç«¯å»ºç«‹ä¼šè¯ï¼Œå¹¶è¿”å›ä¼šè¯æ ‡è¯†</div><div class="line">//ç¬¦åŠå…¶ä»–ç›¸å…³ä¿¡æ¯  </div><div class="line"> </div><div class="line">C-&gt;S:    PLAY request       //å®¢æˆ·ç«¯é€šè¿‡PLAYæ–¹æ³•è¯·æ±‚æ’­æ”¾æŸä¸€å¤šåª’ä½“èµ„æº  </div><div class="line">S-&gt;C:    PLAY response      //æœåŠ¡å™¨å›åº”è¯·æ±‚ï¼Œå¼€å§‹å‘é€æµæ•°æ®  </div><div class="line"> </div><div class="line">S-&gt;C:    â€¦                      //æ­¤æ—¶ï¼ŒRTSPé€šè¿‡å…¶ä»–åè®®å‘é€æµåª’ä½“æ•°æ®  </div><div class="line"> </div><div class="line">C-&gt;S:    TEARDOWN request   //å®¢æˆ·ç«¯é€šè¿‡TEARDOWNæ–¹æ³•è¯·æ±‚å…³é—­ä¼šè¯  </div><div class="line">S-&gt;C:    TEARDOWN response      //æœåŠ¡å™¨å›åº”è¯·æ±‚ï¼Œä¼šè¯å…³é—­ï¼Œäº¤äº’ç»“æŸ</div></pre></td></tr></table></figure></p>
<p>å®é™…åº”ç”¨ä¸­ï¼ŒRTCPçš„äº¤äº’è¿‡ç¨‹å¯èƒ½å’Œä»¥ä¸Šè¿‡ç¨‹ä¼šæœ‰åŒºåˆ«ï¼Œä½†åŸºæœ¬çš„æµç¨‹æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>è¯´æ˜ï¼šè¿˜æœ‰ä¸€ç§å¸¸è§çš„æµåª’ä½“åè®®æ˜¯ç”±Microsoftå…¬å¸å¼€å‘çš„MMSåè®®ï¼Œä½†Microsoftå…¬å¸æ²¡æœ‰å…¬å¼€è¯¥åè®®ã€‚</p>
<h2 id="æµåª’ä½“æ’­æ”¾æ–¹å¼"><a href="#æµåª’ä½“æ’­æ”¾æ–¹å¼" class="headerlink" title="æµåª’ä½“æ’­æ”¾æ–¹å¼"></a>æµåª’ä½“æ’­æ”¾æ–¹å¼</h2><p>æµåª’ä½“æœåŠ¡å™¨å¯ä»¥æä¾›å¤šç§æ’­æ”¾æ–¹å¼ï¼Œå®ƒå¯ä»¥æ ¹æ®ç”¨æˆ·çš„è¦æ±‚ï¼Œä¸ºæ¯ä¸ªç”¨æˆ·ç‹¬ç«‹åœ°ä¼ é€æµæ•°æ®ï¼Œå®ç°VODï¼ˆVideo On Demandï¼‰çš„åŠŸèƒ½ï¼›ä¹Ÿå¯ä»¥ä¸ºå¤šä¸ªç”¨æˆ·åŒæ—¶ä¼ é€æµæ•°æ®ï¼Œå®ç°åœ¨çº¿ç”µè§†æˆ–ç°åœºç›´æ’­çš„åŠŸèƒ½ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹è¿™äº›æ’­æ”¾æ–¹å¼çš„ç‰¹ç‚¹ã€‚</p>
<h3 id="å•æ’­æ–¹å¼"><a href="#å•æ’­æ–¹å¼" class="headerlink" title="å•æ’­æ–¹å¼"></a>å•æ’­æ–¹å¼</h3><p>å½“é‡‡ç”¨å•æ’­æ–¹å¼æ—¶ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯éƒ½ä¸æµåª’ä½“æœåŠ¡å™¨å»ºç«‹äº†ä¸€ä¸ªå•ç‹¬çš„æ•°æ®é€šé“ï¼Œä»æœåŠ¡å™¨å‘é€çš„æ¯ä¸ªæ•°æ®åŒ…éƒ½åªèƒ½ä¼ ç»™ä¸€å°å®¢æˆ·æœºã€‚å¯¹ç”¨æˆ·æ¥è¯´ï¼Œå•æ’­æ–¹å¼å¯ä»¥æ»¡è¶³è‡ªå·±çš„ä¸ªæ€§åŒ–è¦æ±‚ï¼Œå¯ä»¥æ ¹æ®éœ€è¦éšæ—¶ä½¿ç”¨åœæ­¢ã€æš‚åœã€å¿«è¿›ç­‰æ§åˆ¶åŠŸèƒ½ã€‚ä½†å¯¹æœåŠ¡å™¨è¿˜è¯´ï¼Œå•æ’­æ–¹å¼æ— ç–‘ä¼šå¸¦æ¥æ²‰é‡çš„è´Ÿæ‹…ï¼Œå› ä¸ºå®ƒå¿…é¡»ä¸ºæ¯ä¸ªç”¨æˆ·æä¾›å•ç‹¬çš„æŸ¥è¯¢ï¼Œå‘æ¯ä¸ªç”¨æˆ·å‘é€æ‰€ç”³è¯·çš„æ•°æ®åŒ…å¤åˆ¶ã€‚å½“ç”¨æˆ·æ•°å¾ˆå¤šæ—¶ï¼Œå¯¹ç½‘ç»œé€Ÿåº¦ã€æœåŠ¡å™¨æ€§èƒ½çš„è¦æ±‚éƒ½å¾ˆé«˜ã€‚å¦‚æœè¿™äº›æ€§èƒ½ä¸èƒ½æ»¡è¶³è¦æ±‚ï¼Œå°±ä¼šé€ æˆæ’­æ”¾åœé¡¿ï¼Œç”šè‡³åœæ­¢æ’­æ”¾ã€‚</p>
<h3 id="å¹¿æ’­æ–¹å¼"><a href="#å¹¿æ’­æ–¹å¼" class="headerlink" title="å¹¿æ’­æ–¹å¼"></a>å¹¿æ’­æ–¹å¼</h3><p>æ‰¿è½½æµæ•°æ®çš„ç½‘ç»œæŠ¥æ–‡è¿˜å¯ä»¥ä½¿ç”¨å¹¿æ’­æ–¹å¼å‘é€ç»™å­ç½‘ä¸Šæ‰€æœ‰çš„ç”¨æˆ·ï¼Œæ­¤æ—¶ï¼Œæ‰€æœ‰çš„ç”¨æˆ·åŒæ—¶æ¥å—ä¸€æ ·çš„æµæ•°æ®ï¼Œå› æ­¤ï¼ŒæœåŠ¡å™¨åªéœ€è¦å‘é€ä¸€ä»½æ•°æ®å¤åˆ¶å°±å¯ä»¥ä¸ºå­ç½‘ä¸Šæ‰€æœ‰çš„ç”¨æˆ·æœåŠ¡ï¼Œå¤§å¤§å‡è½»äº†æœåŠ¡å™¨çš„è´Ÿæ‹…ã€‚ä½†æ­¤æ—¶ï¼Œå®¢æˆ·æœºåªèƒ½è¢«åŠ¨åœ°æ¥å—æµæ•°æ®ï¼Œè€Œä¸èƒ½æ§åˆ¶æµã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·ä¸èƒ½æš‚åœã€å¿«è¿›æˆ–åé€€æ‰€æ’­æ”¾çš„å†…å®¹ï¼Œè€Œä¸”ï¼Œç”¨æˆ·ä¹Ÿä¸èƒ½å¯¹èŠ‚ç›®è¿›è¡Œé€‰æ‹©ã€‚</p>
<h3 id="ç»„æ’­æ–¹å¼"><a href="#ç»„æ’­æ–¹å¼" class="headerlink" title="ç»„æ’­æ–¹å¼"></a>ç»„æ’­æ–¹å¼</h3><p>å•æ’­æ–¹å¼è™½ç„¶ç”¨æˆ·æä¾›äº†æœ€å¤§çš„çµæ´»æ€§ï¼Œä½†ç½‘ç»œå’ŒæœåŠ¡å™¨çš„è´Ÿæ‹…å¾ˆé‡ã€‚å¹¿æ’­æ–¹å¼è™½ç„¶å¯ä»¥å‡è½»æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼Œä½†ç”¨æˆ·ä¸èƒ½é€‰æ‹©æ’­æ”¾å†…å®¹ï¼Œåªèƒ½è¢«åŠ¨åœ°æ¥å—æµæ•°æ®ã€‚ç»„æ’­å¸å–äº†ä¸Šè¿°ä¸¤ç§ä¼ è¾“æ–¹å¼çš„é•¿å¤„ï¼Œå¯ä»¥å°†æ•°æ®åŒ…å¤åˆ¶å‘é€ç»™éœ€è¦çš„å¤šä¸ªå®¢æˆ·ï¼Œè€Œä¸æ˜¯åƒå•æ’­æ–¹å¼é‚£æ ·å¤åˆ¶æ•°æ®åŒ…çš„å¤šä¸ªæ–‡ä»¶åˆ°ç½‘ç»œä¸Šï¼Œä¹Ÿä¸æ˜¯åƒå¹¿æ’­æ–¹å¼é‚£æ ·å°†æ•°æ®åŒ…å‘é€ç»™é‚£äº›ä¸éœ€è¦çš„å®¢æˆ·ï¼Œä¿è¯æ•°æ®åŒ…å ç”¨æœ€å°çš„ç½‘ç»œå¸¦å®½ã€‚å½“ç„¶ï¼Œç»„æ’­æ–¹å¼éœ€è¦åœ¨å…·æœ‰ç»„æ’­èƒ½åŠ›çš„ç½‘ç»œä¸Šä½¿ç”¨ã€‚</p>
<h2 id="æµåª’ä½“å…³é”®æŠ€æœ¯"><a href="#æµåª’ä½“å…³é”®æŠ€æœ¯" class="headerlink" title="æµåª’ä½“å…³é”®æŠ€æœ¯"></a>æµåª’ä½“å…³é”®æŠ€æœ¯</h2><p>æµåª’ä½“æœ‰ä¸‰ä¸ªå…³é”®æŠ€æœ¯:æ•°æ®å‹ç¼©/è§£å‹ç¼©æŠ€æœ¯ï¼Œæµåª’ä½“ç½‘ç»œä¼ è¾“å’Œåª’ä½“æ–‡ä»¶åœ¨æµå¼ä¼ è¾“ä¸­çš„ç‰ˆæƒä¿æŠ¤é—®é¢˜ï¼Œå…¶ä¸­æ•°æ®å‹ç¼©å’Œè§£å‹ç¼©æŠ€æœ¯ä¼˜åŠ¿é‡ä¸­ä¹‹é‡ï¼Œæ ¸å¿ƒæŠ€æœ¯ã€‚æ–¹å‘é€ç¡®è®¤å˜»å˜»ï¼Œå‘é€å‘æ”¶åˆ°ç¡®è®¤å˜»å˜»çŒ´æ‰ç»§ç»­</p>
<h3 id="æµåª’ä½“åˆ¶ä½œæŠ€æœ¯æ–¹é¢è§£å†³çš„é—®é¢˜"><a href="#æµåª’ä½“åˆ¶ä½œæŠ€æœ¯æ–¹é¢è§£å†³çš„é—®é¢˜" class="headerlink" title="æµåª’ä½“åˆ¶ä½œæŠ€æœ¯æ–¹é¢è§£å†³çš„é—®é¢˜"></a>æµåª’ä½“åˆ¶ä½œæŠ€æœ¯æ–¹é¢è§£å†³çš„é—®é¢˜</h3><p>åœ¨ç½‘ç»œä¸­è¿›è¡Œæµåª’ä½“ä¼ è¾“ï¼Œæ‰€ä¼ è¾“çš„æ–‡ä»¶å¿…é¡»åˆ¶ä½œæˆé€‚åˆæµåª’ä½“ä¼ è¾“çš„æµåª’ä½“æ ¼å¼æ–‡ä»¶ï¼Œç”±äºé€šå¸¸æ ¼å¼å­˜å‚¨çš„å¤šåª’ä½“æ–‡ä»¶å®¹é‡ååˆ†å¤§ï¼Œä¼ è¾“æ¯”è¾ƒå›°éš¾ï¼Œå¦å¤–æµåª’ä½“ä¹Ÿä¸èƒ½æŒ‰æµåª’ä½“ä¼ è¾“çš„åè®®è¿›è¡Œä¼ è¾“ï¼Œæ‰€ä»¥å¿…é¡»å¯¹é—®æ´¥è¿›è¡Œé¢„å¤„ç†ï¼Œå°†æ–‡ä»¶å‹ç¼©æˆæµåª’ä½“æ ¼å¼æ–‡ä»¶ï¼Œè¿™é‡Œè¦æ³¨æ„ä¸¤ç‚¹ï¼š1ï¼Œé€‰ç”¨åˆé€‚çš„ç®—æ³•åœ¨è´¨é‡ä¸ä½“ç§¯ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ï¼Œ2ï¼Œéœ€è¦å‘æ–‡ä»¶ä¸­æ·»åŠ æµå¼ä¿¡æ¯ã€‚</p>
<h3 id="æµåª’ä½“ä¼ è¾“æ–¹é¢éœ€è¦è§£å†³çš„é—®é¢˜"><a href="#æµåª’ä½“ä¼ è¾“æ–¹é¢éœ€è¦è§£å†³çš„é—®é¢˜" class="headerlink" title="æµåª’ä½“ä¼ è¾“æ–¹é¢éœ€è¦è§£å†³çš„é—®é¢˜"></a>æµåª’ä½“ä¼ è¾“æ–¹é¢éœ€è¦è§£å†³çš„é—®é¢˜</h3><p>æµåª’ä½“ä¼ è¾“éœ€è¦å’Œå®æ–½çš„ä¼ è¾“åè®®ï¼Œç›®å‰æ–‡ä»¶åˆä¸‰ä¹¦å¤§éƒ¨åˆ†æ˜¯å»ºç«‹åœ¨TCPåè®®ä¸Šçš„ï¼Œä¹Ÿæœ‰ä¸€äº›ä»¥ftpä¼ è¾“åè®®æ–¹å¼è¿›è¡Œä¼ è¾“ï¼Œä½†é‡‡ç”¨è¿™äº›ä¼ è¾“æ–¹æ³•éƒ½ä¸èƒ½å®ç°å®æ—¶çš„æ–¹å¼ä¼ è¾“ï¼Œéšç€æµåª’ä½“æŠ€æœ¯çš„æ·±å…¥ç ”ç©¶ï¼Œç›®å‰æˆç†Ÿçš„æµåª’ä½“ä¼ è¾“ä¸€èˆ¬éƒ½é‡‡ç”¨å»ºç«‹åœ¨UDPåè®®ä¸Šçš„RTP/RTSPå®æ—¶ä¼ è¾“åè®®ã€‚<br>ä¹‹æ‰€é€‰æ‹©UDPæ˜¯å› ä¸ºåœ¨ä¼ è¾“çš„å¯é æ€§ä¸ŠUDPæ¯”TCPæœ‰å¾ˆå¤§çš„æœ‰äº‹ï¼ŒTCPåè®®ä¸­åŒ…å«äº†ä¸“é—¨çš„æ•°æ®ä¼ é€æ ¡éªŒæœºåˆ¶ï¼Œå½“æ•°æ®æ¥å—æ–¹æ”¶åˆ°æ•°æ®åå°†è‡ªåŠ¨å‘å‘é€ç¡®è®¤ä¿¡æ¯ï¼Œå‘é€æ–¹åœ¨æ¥æ”¶åˆ°ç¡®è®¤ä¿¡æ¯åæ‰ç»§ç»­ä¼ é€æ•°æ®ï¼Œå¦åˆ™å°†ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ï¼Œè€ŒUDPåè®®åˆ™ä¸åŒï¼Œæœ¬èº«å¹¶ä¸åšä»»ä½•æ ¡éªŒï¼Œç”±æ­¤å¯ä»¥çœ‹å‡ºTCPåè®®æ³¨é‡ä¼ è¾“è´¨é‡ï¼Œè€ŒUDPæ³¨é‡ä¼ è¾“é€Ÿåº¦ï¼Œå› æ­¤å¯¹äºä¼ è¾“è´¨é‡è¦æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œè€Œå¯¹é€Ÿåº¦è¦æ±‚å¾ˆé«˜çš„è§†éŸ³é¢‘æµåª’ä½“æ–‡ä»¶æ¥è¯´ï¼Œé‡‡ç”¨UDPæ›´åŠ åˆé€‚ã€‚</p>
<h3 id="æµåª’ä½“çš„ä¼ è¯´è¿‡ç¨‹ä¸­éœ€è¦ç¼“å­˜çš„æ”¯æŒ"><a href="#æµåª’ä½“çš„ä¼ è¯´è¿‡ç¨‹ä¸­éœ€è¦ç¼“å­˜çš„æ”¯æŒ" class="headerlink" title="æµåª’ä½“çš„ä¼ è¯´è¿‡ç¨‹ä¸­éœ€è¦ç¼“å­˜çš„æ”¯æŒ"></a>æµåª’ä½“çš„ä¼ è¯´è¿‡ç¨‹ä¸­éœ€è¦ç¼“å­˜çš„æ”¯æŒ</h3><p>å› ä¸ºinternetæ˜¯ä»¥åŒ…ä¸ºå•ä½è¿›è¡Œå¼‚æ­¥ä¼ è¾“çš„ï¼Œæ‰€ä»¥å¤šåª’ä½“æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«åˆ†è§£ä¸ºè®¸å¤šçš„åŒ…ï¼Œç”±äºç½‘ç»œä¼ è¾“çš„ä¸ç¨³å®šæ€§ï¼Œå„ä¸ªåŒ…é€‰æ‹©çš„è·¯ç”±ä¸åŒï¼Œæ‰€ä»¥åˆ°è¾¾å®¢æˆ·ç«¯çš„æ—¶é—´æ¬¡åºå¯èƒ½å‘ç”Ÿæ”¹å˜ï¼Œç”šè‡³äº§ç”Ÿä¸¢åŒ…ç°è±¡ï¼Œä¸ºæ­¤ï¼Œå¿…é¡»é‡‡ç”¨æ­£ç¡®çš„ä¹¦åºï¼Œä»è€Œå¿…é¡»ä½¿ç”¨ç¼“å­˜æŠ€æœ¯æ¥çº æ­£ç”±äºæ•°æ®åˆ°è¾¾æ¬¡åºå‘ç”Ÿæ”¹å˜è€Œäº§ç”Ÿçš„æ··ä¹±çš„é—®é¢˜ï¼Œåˆ©ç”¨ç¼“å­˜å¯¹åˆ°è¾¾çš„æ•°æ®åŒ…è¿›è¡Œæ­£ç¡®çš„æ’åºï¼Œä»è€Œä½¿éŸ³é¢‘æ•°æ®èƒ½å¤Ÿè¿ç»­æ­£ç¡®çš„æ’­æ”¾ï¼Œç¼“å­˜ä¸­å­˜å‚¨çš„æ˜¯ä¸€æ®µæ—¶é—´å†…çš„æ•°æ®ï¼Œæ•°æ®åœ¨ç¼“å­˜ä¸­å­˜æ”¾çš„æ—¶é—´æ˜¯æš‚æ—¶çš„ï¼Œç¼“å­˜ä¸­çš„æ•°æ®ä¹Ÿæ˜¯åŠ¨æ€çš„ï¼Œä¸æ–­æ›´æ–°çš„ï¼Œæµåª’ä½“åœ¨æ’­æ”¾æ—¶ä¸æ–­çš„è¯»å–ç¼“å­˜ä¸­çš„æ•°æ®è¿›è¡Œæ’­æ”¾ï¼Œæ’­æ”¾å®Œåè¯¥æ•°æ®ç«‹åˆ»è¢«æ¸…æ¥šï¼Œæ–°çš„æ•°æ®å°†åŠ å…¥ç¼“å­˜ï¼Œå› æ­¤æ’­æ”¾æµåª’ä½“æ–‡ä»¶çš„æ—¶å€™å¹¶ä¸éœ€è¦å ç”¨å¤ªå¤§çš„ç¼“å­˜ç©ºé—´ã€‚</p>
<h2 id="æµåª’ä½“ä¼ è¾“çš„ç½‘ç»œåè®®"><a href="#æµåª’ä½“ä¼ è¾“çš„ç½‘ç»œåè®®" class="headerlink" title="æµåª’ä½“ä¼ è¾“çš„ç½‘ç»œåè®®"></a>æµåª’ä½“ä¼ è¾“çš„ç½‘ç»œåè®®</h2><p>TCPéœ€è¦è¾ƒå¤šçš„å¼€é”€ï¼Œæ‰€ä»¥ä¸å¤ªé€‚åˆä¼ è¾“å®æ—¶æ•°æ®ï¼Œæµå¼ä¼ è¾“ä¸€èˆ¬é‡‡ç”¨HTTP/TCP(RTCP)ä¼ è¾“æ§åˆ¶ä¿¡æ¯ï¼Œè€Œé‡‡ç”¨RTP/UDP(RTP)æ¥ä¼ è¾“å®æ—¶å£°éŸ³æ•°æ®ã€‚</p>
<h3 id="å®æ—¶ä¼ è¾“åè®®RTP"><a href="#å®æ—¶ä¼ è¾“åè®®RTP" class="headerlink" title="å®æ—¶ä¼ è¾“åè®®RTP"></a>å®æ—¶ä¼ è¾“åè®®RTP</h3><p>è¿™ç§åè®®åœ¨ä¸€å¯¹ä¸€æˆ–ä¸€å¯¹å¤šçš„ä¼ è¾“æƒ…å†µä¸‹å·¥ä½œï¼Œå…¶ç›®çš„æ˜¯æä¾›æ—¶é—´ä¿¡æ¯å’Œå®ç°æµåŒæ­¥ï¼ŒRTPé€šå¸¸ä½¿ç”¨UDPæ¥ä¼ é€æ•°æ®ï¼Œå½“å¼•ç”¨ç¨‹åºå¼€å§‹ä¸€ä¸ªRTPä¼šè¯æ—¶å°†ä½¿ç”¨ä¸¤ä¸ªç«¯å£ï¼Œä¸€ä¸ªç»™RTPï¼Œä¸€ä¸ªç»™RTCPï¼ŒRTPæœ¬èº«å¹¶ä¸èƒ½ä¸ºæŒ‰é¡ºåºä¼ é€æ•°æ®åŒ…æä¾›å¯é çš„ä¼ é€æœºåˆ¶ï¼Œä¹Ÿä¸æä¾›æµé‡æ§åˆ¶æˆ–æ‹¥å¡æ§åˆ¶ï¼Œå®ƒä¾é RTCPæä¾›è¿™äº›æœåŠ¡ï¼Œé€šå¸¸RTPç®—æ³•å¹¶ä¸ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ç½‘ç»œå±‚æ¥å®ç°ï¼Œè€Œæ˜¯ä½œä¸ºåº”ç”¨ç¨‹åºä»£ç çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h3 id="å®æ—¶ä¼ è¾“æ§åˆ¶åè®®RTCP"><a href="#å®æ—¶ä¼ è¾“æ§åˆ¶åè®®RTCP" class="headerlink" title="å®æ—¶ä¼ è¾“æ§åˆ¶åè®®RTCP"></a>å®æ—¶ä¼ è¾“æ§åˆ¶åè®®RTCP</h3><p>å®æ—¶ä¼ è¾“æ§åˆ¶åè®®RTCPå’ŒRTPä¸€èµ·æä¾›æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶æœåŠ¡ï¼Œåœ¨RTPä¼šè¯æœŸé—´å„å‚ä¸è€…å‘¨æœŸæ€§çš„ä¼ é€RTCPåŒ…ï¼ŒRTCPåŒ…ä¸­å«æœ‰ å·²å‘é€çš„æ•°æ®åŒ…çš„æ•°é‡ï¼Œä¸¢å¤±çš„æ•°æ®åŒ…æ•°é‡ç­‰ç»Ÿè®¡èµ„æ–™ï¼Œå› æ­¤æœåŠ¡å™¨å¯ä»¥åˆ©ç”¨è¿™äº›ä¿¡æ¯åŠ¨æ€çš„æ”¹å˜ä¼ è¾“é€Ÿç‡ï¼Œç”šè‡³æ”¹å˜æœ‰æ•ˆè½½è·ç±»å‹ã€‚<br>RTPå’ŒRTCPé…åˆä½¿ç”¨ï¼Œèƒ½ä»¥æœ‰æ•ˆçš„åé¦ˆå’Œæœ€å°çš„å¼€é”€ä½¿ä¼ è¾“æ•ˆç‡æœ€ä½³åŒ–ï¼Œå› è€Œç‰¹åˆ«é€‚åˆä¼ é€ç½‘ä¸Šçš„å®æ—¶æ•°æ®ã€‚</p>
<h3 id="å®æ—¶æµåè®®RTSP"><a href="#å®æ—¶æµåè®®RTSP" class="headerlink" title="å®æ—¶æµåè®®RTSP"></a>å®æ—¶æµåè®®RTSP</h3><p>å®æ—¶æµåè®®RTSPå®šä¹‰äº†ä¸€å¯¹å¤šåº”ç”¨ç¨‹åºå¦‚ä½•æœ‰æ•ˆåœ°é€šè¿‡IPç½‘ç»œä¼ é€å¤šåª’ä½“æ•°æ®ï¼ŒRTSPçš„ä½“ç³»ç»“æ„ä¸Šä½äºRTPå’ŒRTCPä¹‹ä¸Šï¼Œå®ƒä½¿ç”¨TCPæˆ–RTPå®Œæˆæ•°æ®ä¼ è¾“ï¼ŒHTTPä¸RTSPç›¸æ¯”ï¼ŒHTTPä¼ é€HTMLè¶…é“¾æ¥æ–‡æ¡£ï¼Œè€ŒRTSPä¼ é€çš„æ˜¯å¤šåª’ä½“æ•°æ®ï¼ŒHTTPè¯·æ±‚ç”±å®¢æˆ·æœºå‘å‡ºï¼ŒæœåŠ¡å™¨ä½œå‡ºç›¸åº”ï¼Œä½¿ç”¨RTSPæ—¶ï¼Œå®¢æˆ·æœºä¸æœåŠ¡å™¨éƒ½å¯ä»¥å‘å‡ºè¯·æ±‚ï¼Œå³RTSPå¯ä»¥æ˜¯åŒå‘çš„ï¼Œç‚¹å¯¹ç‚¹çš„é¢æ‰‹æœºå¯è§†é€šè¯ï¼Œå¿…é¡»åœ¨æ‰‹æœºç»ˆç«¯å®ç°RTSPã€‚</p>
<h2 id="æµåª’ä½“æ–‡ä»¶æ ¼å¼"><a href="#æµåª’ä½“æ–‡ä»¶æ ¼å¼" class="headerlink" title="æµåª’ä½“æ–‡ä»¶æ ¼å¼"></a>æµåª’ä½“æ–‡ä»¶æ ¼å¼</h2><p>å°†å¤šåª’ä½“ä¿¡æ¯è¿›è¡Œå‹ç¼©ç”Ÿæˆä¸€å®šæ ¼å¼çš„æ–‡ä»¶ï¼Œè¿™å°±æ˜¯åª’ä½“å‹ç¼©æ ¼å¼ï¼Œè€Œè¦å°†è¿™äº›å‹ç¼©çš„æ–‡ä»¶åœ¨IPç½‘ä¸Šè¿›è¡Œå®æ—¶ä¼ è¾“ï¼Œå°±éœ€è¦å°†è¿™äº›å‹ç¼©æ–‡ä»¶è¿›è¡Œå¿…è¦çš„å¤„ç†ï¼Œåˆ†å‰²æˆå¾ˆå¤šå°å—ï¼Œä»¥æ–¹ä¾¿ä¼ è¾“ï¼Œæ¯”å¦‚rmï¼Œrmvbï¼Œasfï¼Œè¿™å°±æ˜¯åª’ä½“æµæ ¼å¼ï¼Œè¦åœ¨ç½‘ä¸Šä¼ æ’­è¿˜éœ€è¦å°†ä¸€å®šçš„æ ¼å¼å‘Šè¯‰ç”¨æˆ·è¿™å°±æ˜¯åª’ä½“çš„å‘å¸ƒæ ¼å¼ã€‚</p>
<h3 id="æµå¼æ–‡ä»¶æ ¼å¼"><a href="#æµå¼æ–‡ä»¶æ ¼å¼" class="headerlink" title="æµå¼æ–‡ä»¶æ ¼å¼"></a>æµå¼æ–‡ä»¶æ ¼å¼</h3><p>ä¸ºäº†å‡å°ç”¨æˆ·çš„æ’­æ”¾æ¼”ç¤ºå’Œå­˜å‚¨ç©ºé—´ï¼Œå®ç°è¾¹ä¸‹è¾¹æ’­ï¼Œå¹¶ä¿è¯ä¸€å®šçš„æ’­æ”¾è´¨é‡ï¼Œå°±éœ€è¦å¯¹å‹ç¼©æ–‡ä»¶è¿›è¡Œç‰¹æ®Šçš„å¤„ç†ï¼Œæ·»åŠ ä¸€äº›é™„å±ä¿¡æ¯ï¼Œå¦‚è®¡æ—¶ï¼Œå‹ç¼©å’Œç‰ˆæƒä¿¡æ¯ï¼Œè¿™å°±æ˜¯æµå¼æ–‡ä»¶æ ¼å¼ï¼Œå¸¸è§çš„æœ‰å¦‚ä¸‹é›†ä¸­ï¼š</p>
<h4 id="flv"><a href="#flv" class="headerlink" title="flv"></a>flv</h4><p>Flash MX ä»¥å‰flashä¸­çš„è§†é¢‘æ–‡ä»¶å¯¼å…¥æ˜¯ä¸€å¸§ä¸€å¸§å˜æˆä½å›¾ï¼Œç»“æœå¯¼è‡´æ–‡ä»¶å·¨å¤§ï¼Œé™åˆ¶äº†å®ƒçš„å¼•ç”¨èŒƒå›´ï¼Œéšç€Flash MXçš„é€€å‡ºï¼Œmacromediaå…¬å¸å¼€å‘äº†å±äºè‡ªå·±æµå¼è§†é¢‘æ ¼å¼çš„FLVï¼Œè¿™ç§ä¸ªè¯•è¯•åœ¨sorensonå…¬å¸çš„å‹ç¼©ç®—æ³•çš„åŸºç¡€ä¸Šå¼€å‘å‡ºæ¥çš„ï¼Œsorensonå…¬å¸ä¹Ÿä¸ºMOVæ ¼å¼æä¾›è‹çŠ¯æ³•ã€‚<br>FLVæ ¼å¼ä¸ä»…å¯ä»¥è½»æ¾å¯¼å…¥flashä¸­ï¼Œå‡ ç™¾å¸§çš„å½±ç‰‡ä¸¤åˆ†é’Ÿå®Œæˆå¯¼å…¥ï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡rtmpåè®®ä»flashcomæœåŠ¡å™¨ä¸Šæµå¼æ’­å‡ºã€‚ </p>
<h3 id="æµåª’ä½“æ–‡ä»¶çš„å‹ç¼©æ ¼å¼"><a href="#æµåª’ä½“æ–‡ä»¶çš„å‹ç¼©æ ¼å¼" class="headerlink" title="æµåª’ä½“æ–‡ä»¶çš„å‹ç¼©æ ¼å¼"></a>æµåª’ä½“æ–‡ä»¶çš„å‹ç¼©æ ¼å¼</h3><p>æ•°æ®å‹ç¼©æŠ€æœ¯ä¹Ÿæ˜¯æµåª’ä½“æŠ€æœ¯çš„ä¸€é¡¹é‡è¦å†…å®¹ï¼Œç”±äºè§†é¢‘æ•°æ®çš„å®¹é‡å¾€å¾€éƒ½éå¸¸å¤§ï¼Œå¦‚æœä¸ç»è¿‡å‹ç¼©æˆ–å‹ç¼©å¾—ä¸å¤Ÿï¼Œåˆ™ä¸ä»…ä¼šå¢åŠ æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼Œæ›´é‡è¦çš„æ˜¯ä¼šå ç”¨å¤§é‡çš„ç½‘ç»œå¸¦å®½ï¼Œå½±å“æ’­æ”¾æ•ˆæœã€‚å› æ­¤å¦‚ä½•åœ¨ä¿è¯ä¸å½±å“è§‚çœ‹æ•ˆæœæˆ–å¯¹è§‚çœ‹æ•ˆæœå½±å“å¾ˆå°çš„å‰æä¸‹ï¼Œæœ€å¤§é™åº¦åœ°å¯¹æµæ•°æ®è¿›è¡Œå‹ç¼©ï¼Œæ˜¯æµåª’ä½“æŠ€æœ¯ç ”ç©¶çš„ä¸€é¡¹é‡è¦å†…å®¹ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹å‡ ç§ä¸»æµçš„éŸ³è§†é¢‘æ•°æ®å‹ç¼©æ ¼å¼ã€‚</p>
<h4 id="1ï¼AVIæ ¼å¼"><a href="#1ï¼AVIæ ¼å¼" class="headerlink" title="1ï¼AVIæ ¼å¼"></a>1ï¼AVIæ ¼å¼</h4><p>AVIï¼ˆAudio Video Interleaveï¼ŒéŸ³é¢‘è§†é¢‘äº¤é”™ï¼‰æ˜¯ç¬¦åˆRIFFæ–‡ä»¶è§„èŒƒçš„æ•°å­—éŸ³é¢‘ä¸è§†é¢‘æ–‡ä»¶æ ¼å¼ï¼Œç”±Microsoftå…¬å¸å¼€å‘ï¼Œç›®å‰å¾—åˆ°äº†å¹¿æ³›çš„æ”¯æŒã€‚AVIæ ¼å¼æ”¯æŒ256è‰²å’ŒRLEå‹ç¼©ï¼Œå¹¶å…è®¸è§†é¢‘å’ŒéŸ³é¢‘äº¤é”™åœ¨ä¸€èµ·åŒæ­¥æ’­æ”¾ã€‚ä½†AVIæ–‡ä»¶å¹¶æœªé™å®šå‹ç¼©ç®—æ³•ï¼Œåªæ˜¯æä¾›äº†ä½œä¸ºæ§åˆ¶ç•Œé¢çš„æ ‡å‡†ï¼Œç”¨ä¸åŒå‹ç¼©ç®—æ³•ç”Ÿæˆçš„AVIæ–‡ä»¶ï¼Œå¿…é¡»è¦ä½¿ç”¨ç›¸åŒçš„è§£å‹ç¼©ç®—æ³•æ‰èƒ½è§£å‹æ’­æ”¾ã€‚AVIæ–‡ä»¶ä¸»è¦åº”ç”¨åœ¨å¤šåª’ä½“å…‰ç›˜ä¸Šï¼Œç”¨æ¥ä¿å­˜ç”µå½±ã€ç”µè§†ç­‰å„ç§å½±åƒä¿¡æ¯ã€‚</p>
<h4 id="2ï¼MPEGæ ¼å¼"><a href="#2ï¼MPEGæ ¼å¼" class="headerlink" title="2ï¼MPEGæ ¼å¼"></a>2ï¼MPEGæ ¼å¼</h4><p>MPEGï¼ˆMoving Picture Experts Groupï¼ŒåŠ¨æ€å›¾åƒä¸“å®¶ç»„ï¼‰æ˜¯è¿åŠ¨å›¾åƒå‹ç¼©ç®—æ³•çš„å›½é™…æ ‡å‡†ï¼Œå·²è¢«å‡ ä¹æ‰€æœ‰çš„è®¡ç®—æœºå¹³å°å…±åŒæ”¯æŒï¼Œå®ƒé‡‡ç”¨æœ‰æŸå‹ç¼©ç®—æ³•å‡å°‘è¿åŠ¨å›¾åƒä¸­çš„å†—ä½™ä¿¡æ¯ï¼ŒåŒæ—¶ä¿è¯æ¯ç§’30å¸§çš„å›¾åƒåˆ·æ–°ç‡ã€‚MPEGæ ‡å‡†åŒ…æ‹¬è§†é¢‘å‹ç¼©ã€éŸ³é¢‘å‹ç¼©å’ŒéŸ³è§†é¢‘åŒæ­¥3ä¸ªéƒ¨åˆ†ï¼ŒMPEGéŸ³é¢‘æœ€å…¸å‹çš„åº”ç”¨å°±æ˜¯MP3éŸ³é¢‘æ–‡ä»¶ï¼Œå¹¿æ³›ä½¿ç”¨çš„æ¶ˆè´¹ç±»è§†é¢‘äº§å“å¦‚VCDã€DVDå…¶å‹ç¼©ç®—æ³•é‡‡ç”¨çš„ä¹Ÿæ˜¯MPEGæ ‡å‡†ã€‚</p>
<p>MPEGå‹ç¼©ç®—æ³•æ˜¯é’ˆå¯¹è¿åŠ¨å›¾åƒè€Œè®¾è®¡çš„ï¼Œå…¶åŸºæœ¬æ€è·¯æ˜¯æŠŠè§†é¢‘å›¾åƒæŒ‰æ—¶é—´åˆ†æ®µï¼Œç„¶åé‡‡é›†å¹¶ä¿å­˜æ¯ä¸€æ®µçš„ç¬¬ä¸€å¸§æ•°æ®ï¼Œå…¶ä½™å„å¸§åªå­˜å‚¨ç›¸å¯¹ç¬¬ä¸€å¸§å‘ç”Ÿå˜åŒ–çš„éƒ¨åˆ†ï¼Œä»è€Œè¾¾åˆ°äº†æ•°æ®å‹ç¼©çš„ç›®çš„ã€‚MPEGé‡‡ç”¨äº†ä¸¤ä¸ªåŸºæœ¬çš„å‹ç¼©æŠ€æœ¯ï¼šè¿åŠ¨è¡¥å¿æŠ€æœ¯ï¼ˆé¢„æµ‹ç¼–ç å’Œæ’è¡¥ç ï¼‰å®ç°äº†æ—¶é—´ä¸Šçš„å‹ç¼©ï¼Œå˜æ¢åŸŸï¼ˆç¦»æ•£ä½™å¼¦å˜æ¢DCTï¼‰æŠ€æœ¯å®ç°äº†ç©ºé—´ä¸Šçš„å‹ç¼©ã€‚MPEGåœ¨ä¿è¯å›¾åƒå’Œå£°éŸ³è´¨é‡çš„å‰æä¸‹ï¼Œå‹ç¼©æ•ˆç‡éå¸¸é«˜ï¼Œå¹³å‡å‹ç¼©æ¯”ä¸º50âˆ¶1ï¼Œæœ€é«˜å¯è¾¾200âˆ¶1ã€‚</p>
<h4 id="3ï¼RealVideoæ ¼å¼"><a href="#3ï¼RealVideoæ ¼å¼" class="headerlink" title="3ï¼RealVideoæ ¼å¼"></a>3ï¼RealVideoæ ¼å¼</h4><p>RealVideoæ ¼å¼æ˜¯ç”±Real Networkså…¬å¸å¼€å‘çš„ä¸€ç§æµå¼è§†é¢‘æ–‡ä»¶æ ¼å¼ï¼ŒåŒ…å«åœ¨Real MediaéŸ³é¢‘è§†é¢‘å‹ç¼©è§„èŒƒä¸­ï¼Œå…¶è®¾è®¡ç›®æ ‡æ˜¯åœ¨ä½é€Ÿç‡çš„å¹¿åŸŸç½‘ä¸Šå®æ—¶ä¼ è¾“è§†é¢‘å½±åƒã€‚RealVideoå¯ä»¥æ ¹æ®ç½‘ç»œçš„ä¼ è¾“é€Ÿåº¦æ¥å†³å®šè§†é¢‘æ•°æ®çš„å‹ç¼©æ¯”ç‡ï¼Œä»è€Œæé«˜é€‚åº”èƒ½åŠ›ï¼Œå……åˆ†åˆ©ç”¨å¸¦å®½ã€‚æœ¬ç« åé¢ä»‹ç»çš„Real Serverè½¯ä»¶å°±æ˜¯ç”±Real Networkså…¬å¸æä¾›çš„ï¼Œä½¿ç”¨çš„å°±æ˜¯Real Videoæ ¼å¼çš„è§†é¢‘æ–‡ä»¶ã€‚</p>
<p>RealVideoæ ¼å¼æ–‡ä»¶çš„æ‰©å±•åæœ‰3ç§ï¼ŒRAæ˜¯éŸ³é¢‘æ–‡ä»¶ã€RMå’ŒRMVBæ˜¯è§†é¢‘æ–‡ä»¶ã€‚RMVBæ ¼å¼æ–‡ä»¶å…·æœ‰å¯å˜æ¯”ç‰¹ç‡çš„ç‰¹æ€§ï¼Œå®ƒåœ¨å¤„ç†è¾ƒå¤æ‚çš„åŠ¨æ€å½±åƒæ—¶ä½¿ç”¨è¾ƒé«˜çš„é‡‡æ ·ç‡ï¼Œè€Œåœ¨å¤„ç†ä¸€èˆ¬é™æ­¢ç”»é¢æ—¶åˆ™çµæ´»åœ°è½¬æ¢è‡³è¾ƒä½çš„é‡‡æ ·ç‡ï¼Œä»è€Œåœ¨ä¸å¢åŠ æ–‡ä»¶å¤§å°çš„å‰æä¸‹æé«˜äº†å›¾åƒè´¨é‡ã€‚</p>
<h4 id="4ï¼QuickTimeæ ¼å¼"><a href="#4ï¼QuickTimeæ ¼å¼" class="headerlink" title="4ï¼QuickTimeæ ¼å¼"></a>4ï¼QuickTimeæ ¼å¼</h4><p>QuickTimeæ˜¯ç”±Appleå…¬å¸å¼€å‘çš„ä¸€ç§éŸ³è§†é¢‘æ•°æ®å‹ç¼©æ ¼å¼ï¼Œå¾—åˆ°äº†Mac OSã€Microsoft Windowsç­‰ä¸»æµæ“ä½œç³»ç»Ÿå¹³å°çš„æ”¯æŒã€‚QuickTimeæ–‡ä»¶æ ¼å¼æä¾›äº†150å¤šç§è§†é¢‘æ•ˆæœï¼Œæ”¯æŒ25ä½å½©è‰²ï¼Œæ”¯æŒRLEã€JPEGç­‰é¢†å…ˆçš„é›†æˆå‹ç¼©æŠ€æœ¯ã€‚æ­¤å¤–ï¼ŒQuickTimeè¿˜å¼ºåŒ–äº†å¯¹Internetåº”ç”¨çš„æ”¯æŒï¼Œå¹¶é‡‡ç”¨ä¸€ç§è™šæ‹Ÿç°å®æŠ€æœ¯ï¼Œä½¿ç”¨æˆ·å¯ä»¥é€šè¿‡é¼ æ ‡æˆ–é”®ç›˜çš„äº¤äº’å¼æ§åˆ¶ï¼Œè§‚å¯ŸæŸä¸€åœ°ç‚¹å‘¨å›´360åº¦çš„æ™¯åƒï¼Œæˆ–è€…ä»ç©ºé—´çš„ä»»ä½•è§’åº¦è§‚å¯ŸæŸä¸€ç‰©ä½“ã€‚QuickTimeä»¥å…¶é¢†å…ˆçš„å¤šåª’ä½“æŠ€æœ¯å’Œè·¨å¹³å°ç‰¹æ€§ã€è¾ƒå°çš„å­˜å‚¨ç©ºé—´è¦æ±‚ã€æŠ€æœ¯ç»†èŠ‚çš„ç‹¬ç«‹æ€§ä»¥åŠç³»ç»Ÿçš„é«˜åº¦å¼€æ”¾æ€§ï¼Œå¾—åˆ°ä¸šç•Œçš„å¹¿æ³›è®¤å¯ã€‚QuickTimeæ ¼å¼æ–‡ä»¶çš„æ‰©å±•æ˜¯MOVæˆ–QTã€‚</p>
<h4 id="5ï¼ASFå’ŒWMVæ ¼å¼"><a href="#5ï¼ASFå’ŒWMVæ ¼å¼" class="headerlink" title="5ï¼ASFå’ŒWMVæ ¼å¼"></a>5ï¼ASFå’ŒWMVæ ¼å¼</h4><p>ASFï¼ˆAdvanced Streaming Formatï¼Œé«˜çº§æµæ ¼å¼ï¼‰å’ŒWMVæ˜¯ç”±Microsoftå…¬å¸æ¨å‡ºçš„ä¸€ç§åœ¨Internetä¸Šå®æ—¶ä¼ æ’­å¤šåª’ä½“æ•°æ®çš„æŠ€æœ¯æ ‡å‡†ï¼Œæä¾›äº†æœ¬åœ°æˆ–ç½‘ç»œå›æ”¾ã€å¯æ‰©å……çš„åª’ä½“ç±»å‹ã€éƒ¨ä»¶ä¸‹è½½ä»¥åŠå¯æ‰©å±•æ€§ç­‰åŠŸèƒ½ã€‚ASFçš„åº”ç”¨å¹³å°æ˜¯Net ShowæœåŠ¡å™¨å’ŒNet Showæ’­æ”¾å™¨ã€‚</p>
<p>WMVä¹Ÿæ˜¯Microsoftå…¬å¸æ¨å‡ºçš„ä¸€ç§æµåª’ä½“æ ¼å¼ï¼Œå®ƒæ˜¯ä»¥ASFä¸ºåŸºç¡€ï¼Œå‡çº§æ‰©å±•åå¾—åˆ°çš„ã€‚åœ¨åŒç­‰è§†é¢‘è´¨é‡ä¸‹ï¼ŒWMVæ ¼å¼çš„ä½“ç§¯éå¸¸å°ï¼Œå› æ­¤å¾ˆé€‚åˆåœ¨ç½‘ä¸Šæ’­æ”¾å’Œä¼ è¾“ã€‚WMVæ–‡ä»¶ä¸€èˆ¬åŒæ—¶åŒ…å«è§†é¢‘å’ŒéŸ³é¢‘éƒ¨åˆ†ï¼Œè§†é¢‘éƒ¨åˆ†ä½¿ç”¨Windows Media Videoç¼–ç ï¼Œè€ŒéŸ³é¢‘éƒ¨åˆ†ä½¿ç”¨Windows Media Audioç¼–ç ã€‚éŸ³é¢‘æ–‡ä»¶å¯ä»¥ç‹¬ç«‹å­˜åœ¨ï¼Œå…¶æ‰©å±•åæ˜¯WMAã€‚</p>
]]></content>
      
        <categories>
            
            <category> åŸºç¡€ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æµåª’ä½“ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iOSè®¾è®¡æ¨¡å¼]]></title>
      <url>/2014/11/18/2014/iOS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<blockquote>
<p>è®¾è®¡æ¨¡å¼çš„åŠŸèƒ½æ˜¯åœ¨è½¯ä»¶è®¾è®¡å½“ä¸­æ˜¯è§£å†³ä¸€äº›é‡å¤çš„å…¬å…±é—®é¢˜ã€‚ä»–ä»¬æ˜¯ä¸€äº›æ¨¡æ¿æ¥å¸®åŠ©ä½ æ›´å®¹æ˜“çš„ä¹¦å†™ä»£ç å’Œå¤ç”¨ä½ çš„ä»£ç ã€‚ä»–ä»¬è¿˜å¯èƒ½å¸®åŠ©ä½ åˆ›å»ºä½è€¦åˆçš„ä»£ç ï¼Œä½ å¯ä»¥å¾ˆè½»æ¾çš„ä¿®æ”¹å’Œæ›¿æ¢å…¶ä¸­çš„ç»„ä»¶ã€‚<br><a id="more"></a></p>
<h2 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h2><p>ç°åœ¨å¯èƒ½æ›´æµè¡Œçš„æ˜¯MVVMï¼Œé¦–å…ˆï¼Œä½ è¦ä¿è¯åœ¨ä½ çš„é¡¹ç›®ä¸­ä»»ä½•ä¸€ä¸ªç±»éƒ½æœ‰ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œä¸€ä¸ªæ¨¡å‹ï¼Œä¸€ä¸ªè§†å›¾ï¼Œä¸€ä¸ªç±»ä¸­çš„å‡½æ•°ä¸èƒ½æœ‰ä¸¤ç§ä½œç”¨</p>
</blockquote>
<h2 id="Singleton-â€“-å•ä¾‹æ¨¡å¼"><a href="#Singleton-â€“-å•ä¾‹æ¨¡å¼" class="headerlink" title="Singleton â€“ å•ä¾‹æ¨¡å¼"></a>Singleton â€“ å•ä¾‹æ¨¡å¼</h2><p>å•ä¾‹è®¾è®¡æ¨¡å¼ç¡®åˆ‡çš„è¯´å°±æ˜¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œæœ‰ä¸€ä¸ªå…¨å±€çš„æ¥å£æ¥è®¿é—®è¿™ä¸ªå®ä¾‹ã€‚å½“ç¬¬ä¸€æ¬¡è½½å…¥çš„æ—¶å€™ï¼Œå®ƒé€šå¸¸ä½¿ç”¨å»¶æ—¶åŠ è½½çš„æ–¹æ³•åˆ›å»ºå•ä¸€å®ä¾‹ã€‚</p>
<p>åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹æ˜¯æœ‰æ„ä¹‰çš„ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæ²¡æœ‰å¿…è¦æœ‰å¤šä¸ªç™»å½•å®ä¾‹ï¼Œé™¤éä½ ä¸€æ¬¡æƒ³å†™å…¥å¤šä¸ªæ—¥å¿—æ–‡ä»¶ã€‚æˆ–è€…ï¼Œä¸€ä¸ªå…¨å±€çš„é…ç½®ç±»æ–‡ä»¶ï¼šå®ƒå¯ä»¥å¾ˆå®¹æ˜“çš„å¾ˆå®‰å…¨çš„æ‰§è¡Œä¸€ä¸ªå…¬å…±èµ„æºï¼Œè¿™æ ·çš„ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œè¦æ¯”åŒæ—¶ä¿®æ”¹å¤šä¸ªé…ç½®ç±»æ–‡ä»¶å¥½å¾ˆå¤šã€‚</p>
<p>æ¨èå†™æ³•ï¼Œæ‹¦æˆªallocå’Œcopyæ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">staticÂ  MySingletonÂ  *shareSingleton ï¼ nil;</div><div class="line"></div><div class="line">+( instancetype ) sharedSingletonÂ  &#123;</div><div class="line"></div><div class="line">Â  Â staticÂ  dispatch_onceÂ  onceToken;</div><div class="line"></div><div class="line">Â  Â dispatch_once ( &amp;onceToken, ^ &#123;</div><div class="line"></div><div class="line">Â  Â shareSingletonÂ  =Â  [[super allocWithZone:NULL] init] ;</div><div class="line"></div><div class="line">&#125; );</div><div class="line"></div><div class="line">Â  Â  returnÂ sharedSingleton;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">+(id) allocWithZone:(struct _NSZone *)zone &#123;</div><div class="line"></div><div class="line">Â  Â return [Singleton shareInstance] ;Â </div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">-(id) copyWithZone:(struct _NSZone *)zone &#123;</div><div class="line"></div><div class="line">Â  Â return [Singleton shareInstance] ;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Observer-â€“-è§‚å¯Ÿè€…æ¨¡å¼"><a href="#Observer-â€“-è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="Observer â€“ è§‚å¯Ÿè€…æ¨¡å¼"></a>Observer â€“ è§‚å¯Ÿè€…æ¨¡å¼</h2><p>åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œå½“çŠ¶æ€å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œä¸€ä¸ªå¯¹è±¡ä¼šé€šçŸ¥å¦ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ä¸éœ€è¦çŸ¥é“å¦ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿäº†ä»€ä¹ˆæ”¹å˜â”€å› æ­¤éå¸¸é¼“åŠ±è¿™ç§åˆ†ç¦»å¼çš„è®¾è®¡ã€‚è¿™ç§æ¨¡å¼ç»å¸¸ç”¨äºï¼Œå½“ä¸€ä¸ªå±æ€§å‘ç”Ÿæ”¹å˜æ—¶é€šçŸ¥è·Ÿå®ƒç›¸å…³çš„å¯¹è±¡ã€‚</p>
<p>å®ƒé€šå¸¸éœ€è¦ä¸€ä¸ªè§‚å¯Ÿè€…(observer)æ³¨å†Œè·Ÿè¸ªå¦å¤–ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€ã€‚å½“çŠ¶æ€å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„è§‚å¯Ÿå¯¹è±¡éƒ½ä¼šè¢«é€šçŸ¥æ”¹å˜ã€‚è‹¹æœçš„æ¨é€é€šçŸ¥æœåŠ¡å°±æ˜¯ä¸€ä¸ªè¿™æ ·çš„ä¾‹å­ã€‚</p>
<p>å¦‚æœä½ æƒ³è¦ä¸€ç›´ä½¿ç”¨ MVC æ¨¡å¼ï¼ˆä½ ç¡®å®éœ€è¦ï¼‰ï¼Œä½ å¦‚æœæƒ³åœ¨æ¨¡å‹å’Œè§†å›¾ä¹‹é—´ï¼Œä¸ç›´æ¥ç›¸äº’å¼•ç”¨çš„æƒ…å†µä¸‹è¿˜è¦æœ‰é€šä¿¡ã€‚è¿™æ—¶å€™å°±è¦ç”¨åˆ°è§‚å¯Ÿè€…æ¨¡å¼äº†ã€‚</p>
<p>Cocoa æœ‰ä¸¤ä¸ªå¸¸ç”¨çš„æ–¹æ³•æ¥æ‰§è¡Œè§‚å¯Ÿè€…æ¨¡å¼ï¼šNotifications å’Œ Key-Value Observing (KVO)ã€‚</p>
<h3 id="é€šçŸ¥-Notifications"><a href="#é€šçŸ¥-Notifications" class="headerlink" title="é€šçŸ¥ Notifications"></a>é€šçŸ¥ Notifications</h3><h4 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h4><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><ul>
<li>é€šçŸ¥æ˜¯åŒæ­¥æ“ä½œï¼Œæ‰€ä»¥å†é€šçŸ¥çš„è°ƒç”¨æ–¹æ³•ä¸­åšå¤ªå¤šçš„äº‹æƒ…æ˜¯è‚¯å®šä¼šæœ‰é—®é¢˜çš„ï¼Œæœ‰å¤ªå¤šçš„é€šçŸ¥ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„</li>
</ul>
<h3 id="KVO"><a href="#KVO" class="headerlink" title="KVO"></a>KVO</h3><h4 id="KVOå®ç°åŸç†"><a href="#KVOå®ç°åŸç†" class="headerlink" title="KVOå®ç°åŸç†"></a>KVOå®ç°åŸç†</h4><p><img src="http://7xrn7f.com1.z0.glb.clouddn.com/16-7-18/9770095.jpg" alt=""></p>
<ul>
<li>KVOæ˜¯åŸºäºruntimeæœºåˆ¶å®ç°çš„</li>
<li>å½“æŸä¸ªç±»çš„å±æ€§å¯¹è±¡ç¬¬ä¸€æ¬¡è¢«è§‚å¯Ÿæ—¶ï¼Œç³»ç»Ÿå°±ä¼šåœ¨è¿è¡ŒæœŸåŠ¨æ€åœ°åˆ›å»ºè¯¥ç±»çš„ä¸€ä¸ªæ´¾ç”Ÿç±»ï¼Œåœ¨è¿™ä¸ªæ´¾ç”Ÿç±»ä¸­é‡å†™åŸºç±»ä¸­ä»»ä½•è¢«è§‚å¯Ÿå±æ€§çš„setter æ–¹æ³•ã€‚æ´¾ç”Ÿç±»åœ¨è¢«é‡å†™çš„setteræ–¹æ³•å†…å®ç°çœŸæ­£çš„é€šçŸ¥æœºåˆ¶</li>
<li>å¦‚æœåŸç±»ä¸ºPersonï¼Œé‚£ä¹ˆç”Ÿæˆçš„æ´¾ç”Ÿç±»åä¸ºNSKVONotifying_Person</li>
<li>æ¯ä¸ªç±»å¯¹è±¡ä¸­éƒ½æœ‰ä¸€ä¸ªisaæŒ‡é’ˆæŒ‡å‘å½“å‰ç±»ï¼Œå½“ä¸€ä¸ªç±»å¯¹è±¡çš„ç¬¬ä¸€æ¬¡è¢«è§‚å¯Ÿï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šå·å·å°†isaæŒ‡é’ˆæŒ‡å‘åŠ¨æ€ç”Ÿæˆçš„æ´¾ç”Ÿç±»ï¼Œä»è€Œåœ¨ç»™è¢«ç›‘æ§å±æ€§èµ‹å€¼æ—¶æ‰§è¡Œçš„æ˜¯æ´¾ç”Ÿç±»çš„setteræ–¹æ³•</li>
<li>é”®å€¼è§‚å¯Ÿé€šçŸ¥ä¾èµ–äºNSObject çš„ä¸¤ä¸ªæ–¹æ³•: willChangeValueForKey: å’Œ didChangevlueForKey:ï¼›åœ¨ä¸€ä¸ªè¢«è§‚å¯Ÿå±æ€§å‘ç”Ÿæ”¹å˜ä¹‹å‰ï¼Œ willChangeValueForKey: ä¸€å®šä¼šè¢«è°ƒç”¨ï¼Œè¿™å°± ä¼šè®°å½•æ—§çš„å€¼ã€‚è€Œå½“æ”¹å˜å‘ç”Ÿåï¼ŒdidChangeValueForKey: ä¼šè¢«è°ƒç”¨ï¼Œç»§è€Œ observeValueForKey:ofObject:change:context: ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚</li>
<li>è¡¥å……ï¼šKVOçš„è¿™å¥—å®ç°æœºåˆ¶ä¸­è‹¹æœè¿˜å·å·é‡å†™äº†classæ–¹æ³•ï¼Œè®©æˆ‘ä»¬è¯¯è®¤ä¸ºè¿˜æ˜¯ä½¿ç”¨çš„å½“å‰ç±»ï¼Œä»è€Œè¾¾åˆ°éšè—ç”Ÿæˆçš„æ´¾ç”Ÿç±»</li>
<li>KVOå’Œé€šçŸ¥ä¸€æ ·ï¼Œéƒ½æ˜¯åŒæ­¥æ“ä½œï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„</li>
</ul>
<h4 id="æ‰‹åŠ¨è§¦å‘KVO"><a href="#æ‰‹åŠ¨è§¦å‘KVO" class="headerlink" title="æ‰‹åŠ¨è§¦å‘KVO"></a>æ‰‹åŠ¨è§¦å‘KVO</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">- (void)viewDidLoad</div><div class="line">&#123;</div><div class="line">    [super viewDidLoad];</div><div class="line"></div><div class="line">    // â€œæ‰‹åŠ¨è§¦å‘self.nowçš„KVOâ€ï¼Œå¿…å†™ã€‚</div><div class="line">    [self willChangeValueForKey:@&quot;now&quot;];</div><div class="line"></div><div class="line">    // â€œæ‰‹åŠ¨è§¦å‘self.nowçš„KVOâ€ï¼Œå¿…å†™ã€‚</div><div class="line">    [self didChangeValueForKey:@&quot;now&quot;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> iOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
