<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[iOSç¼–è¯‘åŽŸç†]]></title>
    <url>%2F2018%2F07%2F10%2FiOS%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%2F</url>
    <content type="text"><![CDATA[å…³äºŽæŒ‡ä»¤é›†æ¨¡æ‹Ÿå™¨è·‘åœ¨macä¸Šï¼Œæ‰€ä»¥éœ€è¦æ”¯æŒmacçš„å¤„ç†å™¨æž¶æž„ï¼Œè€ŒçœŸæœºä¸Šå°±ä¸éœ€è¦ã€‚ armv7ï½œarmv7sï½œarm64éƒ½æ˜¯ARMå¤„ç†å™¨çš„æŒ‡ä»¤é›† i386ï½œx86_64 æ˜¯Macå¤„ç†å™¨çš„æŒ‡ä»¤é›† è¿™äº›æŒ‡ä»¤é›†åœ¨é‚£äº›è®¾å¤‡ä¸­æœ‰ç”¨åˆ°å‘¢ï¼Ÿ arm64ï¼šiPhone6s | iphone6s plusï½œiPhone6ï½œ iPhone6 plusï½œiPhone5S | iPad Airï½œ iPad mini2(iPad mini with Retina Display) armv7sï¼šiPhone5ï½œiPhone5Cï½œiPad4(iPad with Retina Display) armv7ï¼šiPhone4ï½œiPhone4Sï½œiPadï½œiPad2ï½œiPad3(The New iPad)ï½œiPad miniï½œiPod Touch 3Gï½œiPod Touch4 i386æ˜¯é’ˆå¯¹intelé€šç”¨å¾®å¤„ç†å™¨32ä½å¤„ç†å™¨ x86_64æ˜¯é’ˆå¯¹x86æž¶æž„çš„64ä½å¤„ç†å™¨ æ¨¡æ‹Ÿå™¨32ä½å¤„ç†å™¨æµ‹è¯•éœ€è¦i386æž¶æž„ï¼Œ æ¨¡æ‹Ÿå™¨64ä½å¤„ç†å™¨æµ‹è¯•éœ€è¦x86_64æž¶æž„ï¼Œ çœŸæœº32ä½å¤„ç†å™¨éœ€è¦armv7,æˆ–è€…armv7sæž¶æž„ï¼Œ çœŸæœº64ä½å¤„ç†å™¨éœ€è¦arm64æž¶æž„ã€‚ C/C++ç¼–è¯‘è¿‡ç¨‹: 1ã€é¢„å¤„ç†é˜¶æ®µ ï¼š ä»Žhello.cå˜æˆhello.iæ–‡ä»¶ï¼Œé¢„å¤„ç†ä¸€èˆ¬å°±æ˜¯å°†includeæˆ–è€…defineä¹‹ç±»çš„ä¸œè¥¿ï¼Œæ’å…¥åˆ°ä»£ç ä¸­ï¼› 2ã€ç¼–è¯‘ ï¼š ä»Žhello.i å˜æˆhello.sæ–‡ä»¶ï¼Œè¿‡ç¨‹ï¼šæ£€æŸ¥è¯­æ³•ã€è§„èŒƒï¼Œåœ¨ç¡®å®šæ— è¯¯ä¹‹åŽï¼Œå°†ä»£ç ç¿»è¯‘æˆæ±‡ç¼–è¯­è¨€ã€‚ 3ã€æ±‡ç¼– ï¼š ä»Žhello.s å˜æˆhello.oæ–‡ä»¶ï¼Œè¿‡ç¨‹ï¼šå°†æ±‡ç¼–ä»£ç è½¬æ¢æˆäºŒè¿›åˆ¶æ–‡ä»¶ã€‚ 4ã€è¿žæŽ¥ ï¼š æ ¹æ®ç›®æ ‡æ–‡ä»¶ä»¥åŠåº“æ–‡ä»¶ï¼Œå®Œæˆé“¾æŽ¥ä¹‹åŽï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚ iOSç¼–è¯‘è¿‡ç¨‹]]></content>
  </entry>
  <entry>
    <title><![CDATA[NSDictionaryå®žçŽ°(è½¬)]]></title>
    <url>%2F2018%2F07%2F10%2FNSDictionary%E5%AE%9E%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡é“¾æŽ¥ NSDictionary å†…éƒ¨ç»“æž„ã€å®žçŽ°åŽŸç† ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰æ€è€ƒè¿‡NSDictionaryå’ŒNSArrayå†…éƒ¨æ˜¯æ€Žä¹ˆå®žçŽ°çš„ï¼Œé‚£ä¹ˆä»Šå¤©å°±æ·±æŒ–ä¸€ä¸‹NSDictionary&amp; NSArrayçš„ å†…éƒ¨ç»“æž„ã€‚ é¦–å…ˆå’±ä»¬äº†è§£ä¸€ä¸‹è¿™å‡ ä¸ªæ¦‚å¿µï¼šå“ˆå¸Œè¡¨ã€æ—¶é—´å¤æ‚åº¦ã€é“¾è¡¨çœ‹äº†ä¸Šé¢çš„æ–‡ç« ï¼Œä¼°è®¡å¤§å®¶éƒ½æ‡µé€¼äº†ã€‚ã€‚ã€‚å¥½å§ï¼Œæ­£æ–‡æ¥äº† NSDictionaryNSDictionaryï¼ˆå­—å…¸ï¼‰æ˜¯ä½¿ç”¨ å“ˆå¸Œè¡¨æ¥å®žçŽ°keyå’Œvalueä¹‹é—´çš„æ˜ å°„å’Œå­˜å‚¨çš„ï¼Œ hashå‡½æ•°è®¾è®¡çš„å¥½åå½±å“ç€æ•°æ®çš„æŸ¥æ‰¾è®¿é—®æ•ˆçŽ‡ã€‚æ•°æ®åœ¨hashè¡¨ä¸­åˆ†å¸ƒçš„è¶Šå‡åŒ€ï¼Œå…¶è®¿é—®æ•ˆçŽ‡è¶Šé«˜ã€‚è€Œåœ¨Objective-Cä¸­ï¼Œé€šå¸¸éƒ½æ˜¯åˆ©ç”¨NSString æ¥ä½œä¸ºé”®å€¼ï¼Œå…¶å†…éƒ¨ä½¿ç”¨çš„hashå‡½æ•°ä¹Ÿæ˜¯é€šè¿‡ä½¿ç”¨ NSStringå¯¹è±¡ä½œä¸ºé”®å€¼æ¥ä¿è¯æ•°æ®çš„å„ä¸ªèŠ‚ç‚¹åœ¨hashè¡¨ä¸­å‡åŒ€åˆ†å¸ƒã€‚ - (void)setObject:(id)anObject forKey:(id &lt;NSCopying&gt;)aKey;NSDictionaryä¸­çš„keyæ˜¯å”¯ä¸€çš„ï¼Œkeyå¯ä»¥æ˜¯éµå¾ªNSCopying åè®®å’Œé‡è½½- (NSUInteger)hash;ã€- (BOOL)isEqual:(id)object;æ–¹æ³•çš„ä»»ä½•å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨NSDictionaryå†…éƒ¨ï¼Œä¼šå¯¹ aKey å¯¹è±¡ copy ä¸€ä»½æ–°çš„ã€‚è€Œ anObject å¯¹è±¡åœ¨å…¶å†…éƒ¨æ˜¯ä½œä¸ºå¼ºå¼•ç”¨ï¼ˆretainæˆ–strong)ã€‚ hash æ–¹æ³•æ˜¯ç”¨æ¥è®¡ç®—è¯¥å¯¹è±¡çš„ hash å€¼ï¼Œæœ€ç»ˆçš„ hash å€¼å†³å®šäº†è¯¥å¯¹è±¡åœ¨ hash è¡¨ä¸­å­˜å‚¨çš„ä½ç½®ã€‚æ‰€ä»¥åŒæ ·ï¼Œå¦‚æžœæƒ³é‡å†™è¯¥æ–¹æ³•ï¼Œæˆ‘ä»¬å°½é‡è®¾è®¡ä¸€ä¸ªèƒ½è®©æ•°æ®åˆ†å¸ƒå‡åŒ€çš„ hash å‡½æ•°ã€‚ï¿½isEqual : æ–¹æ³•æ˜¯ä¸ºäº†é€šè¿‡ hash å€¼æ¥æ‰¾åˆ° å¯¹è±¡ åœ¨hash ï¿½è¡¨ä¸­çš„ä½ç½®ã€‚åœ¨è°ƒç”¨setObject: forKey: åŽï¼Œå†…éƒ¨ä¼šåŽ»è°ƒç”¨ ï¿½ key å¯¹è±¡çš„ hash æ–¹æ³•ç¡®å®š object åœ¨hashè¡¨å†…çš„å…¥å£ä½ç½®ï¼Œç„¶åŽä¼šè°ƒç”¨ isEqual : æ¥ç¡®å®šè¯¥å€¼æ˜¯å¦å·²ç»å­˜åœ¨äºŽ NSDictionaryä¸­ã€‚æ³¨ï¼šå…³äºŽhashï¼ŒisEqual :å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç«  iOSå¼€å‘ ä¹‹ ä¸è¦å‘Šè¯‰æˆ‘ä½ çœŸçš„æ‡‚isEqualä¸Žhash! å…¶å®žï¼ŒNSDictionaryä½¿ç”¨NSMapTableå®žçŽ°ã€‚NSMapTableåŒæ ·æ˜¯ä¸€ä¸ªkeyï¼valueçš„å®¹å™¨ï¼Œä¸‹é¢æ˜¯NSMapTableçš„éƒ¨åˆ†ä»£ç ï¼š 1234567@interface NSMapTable : NSObject &#123; NSMapTableKeyCallBacks *keyCallBacks; NSMapTableValueCallBacks *valueCallBacks; NSUInteger count; NSUInteger nBuckets; struct _NSMapNode **buckets;&#125; å¯ä»¥çœ‹å‡ºæ¥NSMapTableæ˜¯ä¸€ä¸ªå“ˆå¸Œï¼‹é“¾è¡¨çš„æ•°æ®ç»“æž„ï¼Œå› æ­¤åœ¨NSMapTableä¸­æ’å…¥æˆ–è€…åˆ é™¤ä¸€å¯¹å¯¹è±¡æ—¶ å¯»æ‰¾çš„æ—¶é—´æ˜¯Oï¼ˆ1ï¼‰ï¼‹Oï¼ˆmï¼‰ï¼Œmæœ€åæ—¶å¯èƒ½ä¸ºnã€‚ Oï¼ˆ1ï¼‰ï¼šä¸ºå¯¹keyè¿›è¡Œhashå¾—åˆ°bucketçš„ä½ç½® Oï¼ˆmï¼‰ï¼šéåŽ†è¯¥bucketåŽé¢å†²çªçš„valueï¼Œé€šè¿‡é“¾è¡¨è¿žæŽ¥èµ·æ¥ã€‚NSDictionaryä¸­çš„key ValueéåŽ†æ—¶æ˜¯æ— åºçš„ï¼Œè‡³å¦‚æŒ‰ç…§ä»€ä¹ˆæ ·çš„é¡ºåºï¼Œè·Ÿhashå‡½æ•°ç›¸å…³ã€‚NSMapTableä½¿ç”¨NSObjectçš„å“ˆå¸Œå‡½æ•°ã€‚ -(NSUInteger)hash { return (NSUInteger)self&gt;&gt;4;}ä¸Šè¿°æ˜¯NSObjectçš„å“ˆå¸Œå€¼çš„è®¡ç®—æ–¹å¼ï¼Œç®€å•é€šè¿‡ç§»ä½å®žçŽ°ã€‚å³ç§»4ä½ï¼Œå·¦è¾¹è¡¥0.å› ä¸ºå¯¹è±¡å¤§å¤šå­˜äºŽå †ä¸­ï¼Œåœ°å€ç›¸å·®4ä½åº”è¯¥å¾ˆæ­£å¸¸ã€‚ è¡¥å……ä¸€ä¸ªå°çŸ¥è¯†ï¼šiOS setValueå’ŒsetObjectçš„åŒºåˆ«ï¼š 12- (void)setObject:(ObjectType)anObject forKey:(KeyType &lt;NSCopying&gt;)aKey;- (void)setValue:(nullable ObjectType)value forKey:(NSString *)key; é¦–å…ˆï¼šsetObject: ForKey:æ˜¯NSMutableDictionaryç‰¹æœ‰çš„ï¼›setValue: ForKey:æ˜¯KVCçš„ä¸»è¦æ–¹æ³•ã€‚ åŒºåˆ«ï¼š&gt;(1) setValue: ForKey:çš„valueæ˜¯å¯ä»¥ä¸ºnilçš„ï¼ˆä½†æ˜¯å½“valueä¸ºnilçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨removeObjectï¼šforKeyæ–¹æ³•ï¼‰ï¼›setObject: ForKey:çš„valueåˆ™ä¸å¯ä»¥ä¸ºnilã€‚(2) setValue: ForKey:çš„keyå¿…é¡»æ˜¯ä¸ä¸ºnilçš„å­—ç¬¦ä¸²ç±»åž‹ï¼›setObject: ForKey:çš„keyå¯ä»¥æ˜¯ä¸ä¸ºnilçš„æ‰€æœ‰ç»§æ‰¿NSCopyingçš„ç±»åž‹ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[NSNotificationCenterå®žçŽ°]]></title>
    <url>%2F2018%2F07%2F10%2FNSNotification%E5%AE%9E%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[å¤šæ¬¡æ·»åŠ å¤šæ¬¡æ‰§è¡Œ iOS8ä¹‹åŽä¸éœ€è¦ç§»é™¤ï¼Œç§»é™¤æ–¹æ³•è‡ªåŠ¨æ·»åŠ  unsafe_unretainedä¿®é¥° åŽŸæ–‡é“¾æŽ¥ é€å½»ç†è§£ NSNotificationCenter é€šçŸ¥ï¼ˆå«å®žçŽ°ä»£ç ï¼‰ å†™åœ¨å‰é¢NSNotificationCenterè¿™ä¸ªä¸œè¥¿ä½œä¸ºiOSå·¥ç¨‹å¸ˆæƒ³å¿…éƒ½ä¸é™Œç”Ÿï¼Œä½†æ˜¯æœ‰äººå¯èƒ½è¿žå‚æ•°çš„æ„ä¹‰éƒ½æ²¡æžæ˜Žç™½ï¼Œå†™è¿™ç¯‡æ–‡ç« çš„ç›®çš„ä¸æ­¢æ˜¯ä¸ºäº†è®©ä¸ä¼šç”¨çš„äººä¼šç”¨ï¼Œæ›´æ˜¯ä¸ºäº†è®©ä¼šç”¨çš„äººç†è§£å¾—æ›´é€å½»ã€‚æœ¬ç¯‡æ–‡ç« ä¸»è¦æ˜¯æ¢³ç†NSNotificationCenterçš„ç‰¹æ€§å’Œå€¼å¾—æ³¨æ„çš„åœ°æ–¹ï¼Œå¹¶ä¸”åœ¨åŽé¢ç»“åˆå¯¹å…¶ç‰¹æ€§çš„åˆ†æžæ‰‹åŠ¨åˆ©ç”¨ä»£ç æ¥å®žçŽ°å®ƒã€‚ ä¸€ã€åˆ†æž1ã€ åŸºæœ¬ä½¿ç”¨æ–¹æ³•ç›´æŽ¥è¿›å…¥NSNotificationæ–‡ä»¶ã€‚@property (class, readonly, strong) NSNotificationCenter *defaultCenter;è¯¥å±žæ€§æ˜¯èŽ·å–NSNotificationCenterå”¯ä¸€å•ä¾‹ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ¶ˆæ¯åˆ†å‘ä¸­å¿ƒï¼Œé€šè¿‡ä½¿ç”¨è¿™ä¸ªå”¯ä¸€çš„å®žä¾‹æˆ‘ä»¬è¿›è¡Œæ·»åŠ é€šçŸ¥ã€å‘é€é€šçŸ¥ã€ç§»é™¤é€šçŸ¥ã€‚ #####(1) æ·»åŠ é€šçŸ¥ 1[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(respondsToNotification:) name:@&quot;test0&quot; object:_obj0]; _obj0æ˜¯åˆ›å»ºçš„ä¸€ä¸ªå®žä¾‹ï¼Œè¿™é‡Œæš‚æ—¶ä¸è®¨è®ºobjectå‚æ•°çš„ç”¨æ³•ã€‚Observerå³ä¸ºå“åº”è€…æ— éœ€å¤šè¯´ï¼›selectorå³ä¸ºä¸€ä¸ªå“åº”é€šçŸ¥çš„æ–¹æ³•ï¼Œéœ€è¦SELç±»åž‹ï¼›nameæ˜¯ä¸€ä¸ªæ ‡è¯†ï¼Œé€šçŸ¥ä¸­å¿ƒä¸»è¦æ˜¯é€šè¿‡å®ƒæ¥å®žçŽ°æ¶ˆæ¯çš„ç²¾ç¡®åˆ†å‘ï¼ˆå½“ç„¶objectä¹Ÿæœ‰å®šä½ä½œç”¨ï¼‰ã€‚ #####(2) å‘é€é€šçŸ¥ 12345//ä¾¿åˆ©æ–¹æ³•[[NSNotificationCenter defaultCenter] postNotificationName:@&quot;test0&quot; object:_obj0 userInfo:@&#123;@&quot;key&quot;:@&quot;_obj0&quot;&#125;];//ä½¿ç”¨NSNotificationNSNotification *notification = [[NSNotification alloc] initWithName:@&quot;test0&quot; object:_obj2 userInfo:@&#123;@&quot;key&quot;:@&quot;_obj2&quot;&#125;]; [[NSNotificationCenter defaultCenter] postNotification:notification]; å‘é€é€šçŸ¥å’Œæ·»åŠ é€šçŸ¥å¯¹åº”ï¼Œéœ€è¦nameã€objectå‚æ•°ï¼Œè¿™é‡Œå¤šäº†ä¸€ä¸ªuserInfoï¼Œè¯¥å‚æ•°å¯ä»¥æŠŠä½ éœ€è¦æºå¸¦çš„æ•°æ®å‘é€ç»™è¯¥é€šçŸ¥çš„å“åº”è€…ã€‚å…¶å®žæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ˜“çš„æƒ³åˆ°ï¼Œä¾¿åˆ©å‘é€é€šçŸ¥æ–¹æ³•ä¸è¿‡æ˜¯å¯¹äºŽä½¿ç”¨NSNotificationå‘é€é€šçŸ¥çš„ä¸€ä¸ªè¯­æ³•ç³–ï¼ŒNSNotificationæ‰æ˜¯æ¶ˆæ¯ä½“ã€‚ (3) ç§»é™¤é€šçŸ¥123456//ç§»é™¤è¯¥å“åº”è€…çš„å…¨éƒ¨é€šçŸ¥[[NSNotificationCenter defaultCenter] removeObserver:self];//ç§»é™¤è¯¥å“åº”è€… name==@&quot;test0&quot; çš„å…¨éƒ¨é€šçŸ¥[[NSNotificationCenter defaultCenter] removeObserver:self name:@&quot;test0&quot; object:nil];//ç§»é™¤è¯¥å“åº”è€… name==@&quot;test0&quot; ä¸” object==_obj0 çš„å…¨éƒ¨é€šçŸ¥[[NSNotificationCenter defaultCenter] removeObserver:self name:@&quot;test0&quot; object:_obj0]; ç§»é™¤é€šçŸ¥è¿™é‡Œæœ‰ç‚¹è®²ç©¶ï¼Œä»Žä¸Šè‡³ä¸‹è¶Šæ¥è¶Šâ€œç²¾å‡†â€ã€‚åœ¨åˆç†çš„ä½ç½®ç§»é™¤é€šçŸ¥æ˜¯è‡³å…³é‡è¦çš„ï¼š 1ã€è®©ä¸å¸Œæœ›ç»§ç»­æŽ¥å—é€šçŸ¥çš„å“åº”è€…å¤±åŽ»å¯¹è¯¥é€šçŸ¥çš„å“åº”ï¼› 2ã€é¿å…é‡å¤æ·»åŠ ç›¸åŒé€šçŸ¥ï¼ˆå“åº”è€…çš„å†…å­˜ä¸ºåŒä¸€å—çš„æ—¶å€™ï¼‰ï¼› 3ã€é€šçŸ¥ä¸­å¿ƒå¯¹å“åº”è€…observeræ˜¯ä½¿ç”¨unsafe_unretainedä¿®é¥°ï¼Œå½“å“åº”è€…é‡Šæ”¾ä¼šå‡ºçŽ°é‡ŽæŒ‡é’ˆï¼Œå‘é‡ŽæŒ‡é’ˆå‘é€æ¶ˆæ¯é€ æˆå´©æºƒï¼›åœ¨iOS n(æ›´æ–°çš„ç³»ç»Ÿç‰ˆæœ¬æœ‰å¾…è€ƒè¯)ä¹‹åŽï¼Œè‹¹æžœå¯¹å…¶åšäº†ä¼˜åŒ–ï¼Œä¼šåœ¨å“åº”è€…è°ƒç”¨deallocæ–¹æ³•çš„æ—¶å€™æ‰§è¡ŒremoveObserver:æ–¹æ³•ã€‚æ³¨æ„ï¼šåœ¨åŽæ–‡ä¼šè¯¦ç»†åˆ†æžè¯¥é—®é¢˜ã€‚ å½“ç„¶ï¼Œå¸¸è§„çš„ä¸šåŠ¡åœºæ™¯ä¸€èˆ¬æ˜¯åœ¨è¯¥å“åº”è€…é‡Šæ”¾çš„æ—¶å€™ç§»é™¤ã€‚ 123- (void)dealloc &#123; [[NSNotificationCenter defaultCenter] removeObserver:self];&#125; (4) å“åº”é€šçŸ¥12345- (void)respondsToNotification:(NSNotification *)noti &#123; id obj = noti.object; NSDictionary *dic = noti.userInfo; NSLog(@&quot;\n- self:%@ \n- obj:%@ \n- notificationInfo:%@&quot;, self, obj, dic);&#125; å“åº”é€šçŸ¥çš„æ—¶å€™ä¼šå°†NSNotificationæ¶ˆæ¯ä½“ä¼ é€’è¿‡æ¥ï¼Œå¦‚ä»£ç æ‰€ç¤ºã€‚ 2ã€object:(nullable id)anObjectå‚æ•°æ·»åŠ é€šçŸ¥æ—¶ï¼Œè‹¥æŒ‡å®šäº†objectå‚æ•°ï¼Œé‚£ä¹ˆè¯¥å“åº”è€…åªä¼šæŽ¥æ”¶å‘é€é€šçŸ¥æ—¶objectå‚æ•°æŒ‡å®šä¸ºåŒä¸€å®žä¾‹çš„é€šçŸ¥ã€‚å‘é€é€šçŸ¥æ—¶ï¼Œè‹¥æŒ‡å®šäº†objectå‚æ•°ï¼Œå¹¶ä¸ä¼šå½±å“æ·»åŠ é€šçŸ¥æ—¶æ²¡æœ‰æŒ‡å®šobjectå‚æ•°çš„å“åº”è€…æŽ¥æ”¶é€šçŸ¥ã€‚å¦‚æžœæ„Ÿè§‰æœ‰ç‚¹ç»•ï¼Œçœ‹å¦‚ä¸‹ä»£ç ä¾¿çŸ¥ã€‚ 1234//æ·»åŠ é€šçŸ¥ [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(respondsToNotification:) name:@&quot;test0&quot; object:nil];//å‘é€é€šçŸ¥ [[NSNotificationCenter defaultCenter] postNotificationName:@&quot;test0&quot; object:_obj0]; //ç”±äºŽæ·»åŠ é€šçŸ¥æ—¶ï¼Œobject==nilï¼Œæ‰€ä»¥è¯¥å“åº”è€…ä»ç„¶èƒ½æŽ¥æ”¶åˆ°è¯¥é€šçŸ¥ã€‚å¤åˆ¶ä»£ç  1234//æ·»åŠ é€šçŸ¥ [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(respondsToNotification:) name:@&quot;test0&quot; object: _obj0];//å‘é€é€šçŸ¥ [[NSNotificationCenter defaultCenter] postNotificationName:@&quot;test0&quot; object:nil]; //ç”±äºŽæ·»åŠ é€šçŸ¥æ—¶ï¼ŒæŒ‡å®šäº†object==_obj0ï¼Œè€Œå‘é€é€šçŸ¥æ—¶ï¼Œobject==nilï¼Œæ‰€ä»¥æ— æ³•æŽ¥æ”¶åˆ°é€šçŸ¥//ï¼ˆåªæœ‰å½“object==_obj0æ‰èƒ½æŽ¥æ”¶åˆ°é€šçŸ¥ï¼‰ã€‚å¤åˆ¶ä»£ç  3ã€é€šçŸ¥çº¿ç¨‹é—®é¢˜æˆ‘ä»¬è¿›å…¥å…¨å±€é˜Ÿåˆ—å‘é€è¿™ä¸ªé€šçŸ¥ 1234dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; NSLog(@&quot;å‘é€é€šçŸ¥ currentThread : %@&quot;, [NSThread currentThread]); [[NSNotificationCenter defaultCenter] postNotificationName:@&quot;test0&quot; object:nil];&#125;); åœ¨æŽ¥æ”¶é€šçŸ¥çš„åœ°æ–¹å°†çº¿ç¨‹æ‰“å°å‡ºæ¥ 12å‘é€é€šçŸ¥ currentThread : &lt;NSThread: 0x60400046aec0&gt;&#123;number = 3, name = (null)&#125;å“åº”é€šçŸ¥ currentThread : &lt;NSThread: 0x60400046aec0&gt;&#123;number = 3, name = (null)&#125; ç»“è®ºï¼šé€šçŸ¥å‘é€çº¿ç¨‹å’Œé€šçŸ¥æŽ¥æ”¶çº¿ç¨‹æ˜¯ä¸€è‡´çš„ã€‚ ç”±æ­¤çœ‹æ¥ï¼Œå¦‚æžœå½“æˆ‘ä»¬ä¸æ˜¯ç™¾åˆ†ä¹‹ç™¾ç¡®è®¤é€šçŸ¥çš„å‘é€é˜Ÿåˆ—æ˜¯åœ¨ä¸»é˜Ÿåˆ—ä¸­æ—¶ï¼Œæˆ‘ä»¬æœ€å¥½åŠ ä¸Šå¦‚ä¸‹ä»£ç ä»Žè€Œå¯¹æˆ‘ä»¬çš„UIè¿›è¡Œå¤„ç†ã€‚ 1234567if (strcmp(dispatch_queue_get_label(DISPATCH_CURRENT_QUEUE_LABEL), dispatch_queue_get_label(dispatch_get_main_queue())) == 0) &#123; //UIå¤„ç†&#125; else &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; //UIå¤„ç† &#125;);&#125; 4ã€æ˜¯å¦éœ€è¦ç§»é™¤é€šçŸ¥ï¼Ÿä»¥ä¸‹ä»£ç æ¨¡æ‹Ÿé‡å¤æ·»åŠ é€šçŸ¥çš„æƒ…å†µï¼Œæ‰€ä»¥å¦‚æžœå¯èƒ½ä¼šé‡å¤æ·»åŠ é€šçŸ¥ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥åšå¥½ç›¸åº”çš„å¤„ç†ã€‚ 123for (int i = 0; i &lt; 3; i++) &#123; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(respondsToNotification:) name:@&quot;test0&quot; object:nil];&#125; //è¯¥ä»£ç å¯¼è‡´çš„ç»“æžœæ˜¯ï¼Œå“åº”é€šçŸ¥å›žè°ƒä¼šèµ°ä¸‰æ¬¡ã€‚å¤åˆ¶ä»£ç å¯èƒ½æœ‰äººä¼šé—®ï¼Œä¸ºä»€ä¹ˆç³»ç»Ÿåº“æ²¡æœ‰åšä¸ªé‡å¤æ·»åŠ çš„åˆ¤æ–­ï¼Ÿå½“ç„¶ï¼Œè¿™å¯èƒ½æ˜¯ä¸ºäº†è®©æˆ‘ä»¬æ›´çµæ´»çš„è¿ç”¨ï¼Œä¹Ÿå¯èƒ½æ˜¯å¯¹æ—¶é—´å¤æ‚åº¦çš„ä¸€ç§å¦¥åå§ðŸ˜ã€‚ æœ‰è¿‡æ¯”è¾ƒé•¿å¼€å‘ç»éªŒçš„åŒå­¦åº”è¯¥éƒ½æœ‰è¿‡ï¼Œæ²¡æœ‰åŠæ—¶çš„ç§»é™¤é€šçŸ¥è€Œå¯¼è‡´æ„å¤–å´©æºƒçš„æƒ…å†µã€‚å‰é¢ä¹Ÿè¯´è¿‡ï¼Œé€šçŸ¥ä¸­å¿ƒå¯¹å“åº”è€…observeræ˜¯ä½¿ç”¨unsafe_unretainedä¿®é¥°ï¼Œå½“å“åº”è€…é‡Šæ”¾ä¼šå‡ºçŽ°é‡ŽæŒ‡é’ˆï¼Œå¦‚æžœå‘é‡ŽæŒ‡é’ˆå‘é€æ¶ˆæ¯é€ æˆå´©æºƒã€‚åœ¨iOS8ç³»ç»Ÿä¹‹åŽï¼ˆæ›´æ—©ç‰ˆæœ¬æ²¡æœ‰æµ‹è¯•ï¼‰ï¼Œ[NSNotificationCenter defaultCenter]ä¼šåœ¨å“åº”è€…observerè°ƒç”¨-deallocæ–¹æ³•çš„æ—¶å€™æ‰§è¡Œ-removeObserver:æ–¹æ³•ã€‚ åŠ¨æ‰‹åšä¸ªå°å®žéªŒï¼šæ–°å»ºä¸€ä¸ªNSNotificationCenterçš„åˆ†ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011@implementation NSNotificationCenter (YB)+ (void)load &#123; Method origin = class_getInstanceMethod([self class], @selector(removeObserver:)); Method current = class_getInstanceMethod([self class], @selector(_removeObserver:)); method_exchangeImplementations(origin, current);&#125;- (void)_removeObserver:(id)observer &#123; NSLog(@&quot;è°ƒç”¨ç§»é™¤é€šçŸ¥æ–¹æ³•: %@&quot;, observer);// [self _removeObserver:observer];&#125;@end ç„¶åŽæ–°å»ºä¸€ä¸ªç±»æ­£å¸¸çš„ä½¿ç”¨é€šçŸ¥ï¼Œä½†æ˜¯è¯·ä¸è¦æ‰‹åŠ¨åœ¨-deallocä¸­é‡Šæ”¾é€šçŸ¥ï¼ˆæˆ‘ä»¬è¦åšå®žéªŒï¼‰ã€‚ç„¶åŽæˆ‘ä»¬é‡Šæ”¾æŽ‰è¿™ä¸ªç±»ï¼ˆå¯ä»¥ä½¿ç”¨æŽ§åˆ¶å™¨presentã€dismissï¼‰ã€‚ è°ƒç”¨ç§»é™¤é€šçŸ¥æ–¹æ³•: å¤åˆ¶ä»£ç ç¥žå¥‡çš„çŽ°è±¡å‘ç”Ÿäº†ï¼Œé€šè¿‡æ¯”è¾ƒå†…å­˜åœ°å€ï¼Œ[NSNotificationCenter defaultCenter]ç¡®å®žæ˜¯è°ƒç”¨äº†removeObserver :æ–¹æ³•ç§»é™¤å¯¹åº”å“åº”è€…çš„é€šçŸ¥ç›‘å¬ã€‚ æ³¨æ„ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘å°†[self _removeObserver:observer];æ³¨é‡ŠæŽ‰äº†ï¼Œæ„å‘³ç€è¯¥æ–¹æ³•å·²ç»è¢«æˆ‘æˆªå–äº†ï¼Œæˆ‘ä»¬å†å‘è¯¥â€œç§»é™¤é€šçŸ¥æœªé‚â€çš„å“åº”è€…observerå‘é€é€šçŸ¥ï¼Œç›´æŽ¥å´©æºƒã€‚å½“åŽ»é™¤æ³¨é‡Šï¼Œæ­£å¸¸è¿è¡Œï¼Œæ— éœ€æ‰‹åŠ¨ç§»é™¤ã€‚ ç»“è®ºï¼šå¦‚æžœiOSæ”¯æŒç‰ˆæœ¬åœ¨iOS8ä»¥ä¸Šï¼Œå¤šæ•°æƒ…å†µç†è®ºä¸Šå¯ä»¥ä¸ç”¨ç§»é™¤é€šçŸ¥ï¼Œä½†æ˜¯ç”±äºŽåŽ†å²é—ç•™ã€å¼€å‘è€…ä¹ æƒ¯ç­‰å› ç´ ï¼Œçœ‹ä¸ªäººå–œå¥½äº† äºŒã€ä»£ç å®žçŽ°NSNotification ä»£ç å®žçŽ°åœ°å€å¿ƒè¡€æ¥æ½®ï¼Œçœ‹ç€NSNotification.hçš„APIå’Œæœ¬ç€å¯¹å…¶çš„ç†è§£ï¼Œå†³å®šç€æ‰‹å®žçŽ°ä¸€æ³¢ã€‚å…¶å®žä»”ç»†ä¸€æƒ³ï¼Œé€šçŸ¥çš„åŠŸèƒ½ç±»ä¼¼äºŽä¸€ä¸ªè·¯ç”±ï¼Œå®ƒçš„åŸºæœ¬å®žçŽ°æ€è·¯å¹¶ä¸å¤æ‚ã€‚æˆ‘ä»¬è¦åšçš„æ— éžæ˜¯â€œæ·»åŠ â€ã€â€œå‘é€â€ã€â€œç§»é™¤â€ä¸‰ä»¶äº‹ã€‚ä½†æ˜¯åœ¨å…·ä½“å®žçŽ°ä¸­ï¼Œè¿˜æ˜¯æœ‰äº›æ¯”è¾ƒéº»çƒ¦çš„åœ°æ–¹ï¼Œä¸‹é¢å…·ä½“å™è¿°ï¼ˆæœ€å¥½ä¸‹è½½demoä¾¿äºŽç†è§£ï¼‰ã€‚ 1ã€æ·»åŠ é€šçŸ¥é¦–å…ˆï¼Œåˆ›å»ºäº†ä¸€ä¸ªYBNotificationCenterç±»ï¼Œå±žæ€§å¦‚ä¸‹ï¼š 12@property (class, strong) YBNotificationCenter *defaultCenter;@property (strong) NSMutableDictionary *observersDic; defaultCenterç±»å±žæ€§ä¸ç”¨è¯´ï¼Œå®ƒæ˜¯å”¯ä¸€å•ä¾‹ï¼ˆå…·ä½“å®žçŽ°çœ‹ä»£ç ï¼‰ï¼›observersDicå³ä¸ºç”¨æ¥å­˜å‚¨æ·»åŠ é€šçŸ¥ç›¸å…³ä¿¡æ¯çš„å­—å…¸ã€‚ ç„¶åŽåˆ›å»ºäº†ä¸€ä¸ªYBObserverInfoModelç±»ï¼Œå±žæ€§å¦‚ä¸‹ï¼š 12345678@property (weak) id observer;@property (strong) id observer_strong;@property (strong) NSString *observerId;@property (assign) SEL selector;@property (weak) id object;@property (copy) NSString *name;@property (strong) NSOperationQueue *queue;@property (copy) void(^block)(YBNotification *noti); è¯¥ç±»å°±æ˜¯å“åº”è€…ä¿¡æ¯å­˜å‚¨æ¨¡åž‹ç±»ï¼Œä¹Ÿå°±æ˜¯ä¼šæ”¾åœ¨ä¸Šé¢observersDicå­—å…¸å†…çš„å…ƒç´ ã€‚å…ˆå›žå¿†ä¸€ä¸‹ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨- (void)addObserver:(id)observer selector:(SEL)aSelector name:(nullable NSString *)aName object:(nullable id)anObject;æˆ–- (id&lt;NSObject&gt;)addObserverForName:(nullable NSString *)name object:(nullable id)obj queue:(nullable NSOperationQueue *)queue usingBlock:(void (^)(YBNotification *note))block;æ–¹æ³•æ—¶ï¼Œè¿™äº›é…ç½®çš„å˜é‡æ˜¯ä¸æ˜¯åœ¨YBObserverInfoModeléƒ½æœ‰ä½“çŽ°å‘¢ï¼Ÿ æ˜¯çš„ï¼Œæ·»åŠ é€šçŸ¥çš„æ“ä½œä¸è¿‡å°±æ˜¯å°†æˆ‘ä»¬éœ€è¦é…ç½®çš„å˜é‡ç»Ÿç»Ÿå­˜å‚¨èµ·æ¥ï¼Œä½†æ˜¯æ³¨æ„å‡ ç‚¹ï¼šä¸€æ˜¯å¯¹observerå’Œobjectä¸èƒ½å¼ºæŒæœ‰ï¼Œå¦åˆ™å…¶æ— æ³•æ­£å¸¸é‡Šæ”¾ï¼›äºŒæ˜¯å¯¹nameå±žæ€§æœ€å¥½ä½¿ç”¨copyä¿®é¥°ï¼Œä¿è¯å…¶ä¸ä¼šå—å¤–éƒ¨å¹²æ‰°ï¼›ä¸‰æ˜¯observer_strongå±žæ€§æ˜¯åœ¨ä½¿ç”¨ä»£ç å—å›žè°ƒçš„é‚£ä¸ªæ·»åŠ é€šçŸ¥æ–¹æ³•æ—¶ï¼Œéœ€è¦ä½¿ç”¨åˆ°çš„å¼ºå¼•ç”¨å±žæ€§ï¼›å››æ˜¯observerIdå±žæ€§ä¼šæ¯”è¾ƒé™Œç”Ÿï¼Œå®ƒçš„ä½œç”¨å¤§å®¶å¯ä»¥å…ˆä¸ç®¡ï¼Œä¹‹åŽä¼šæœ‰ç”¨å¤„ã€‚ æ·»åŠ é€šçŸ¥æ ¸å¿ƒä»£ç  123456789101112131415- (void)addObserverInfo:(YBObserverInfoModel *)observerInfo &#123; //æ·»åŠ è¿›observersDic NSMutableDictionary *observersDic = YBNotificationCenter.defaultCenter.observersDic; @synchronized(observersDic) &#123; NSString *key = (observerInfo.name &amp;&amp; [observerInfo.name isKindOfClass:NSString.class]) ? observerInfo.name : key_observersDic_noContent; if ([observersDic objectForKey:key]) &#123; NSMutableArray *tempArr = [observersDic objectForKey:key]; [tempArr addObject:observerInfo]; &#125; else &#123; NSMutableArray *tempArr = [NSMutableArray array]; [tempArr addObject:observerInfo]; [observersDic setObject:tempArr forKey:key]; &#125; &#125;&#125; æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªé…ç½®å¥½çš„YBObserverInfoModelæ¨¡åž‹è¿›å…¥æ–¹æ³•ï¼Œæž„å»ºä¸€ä¸ªæ ‘å½¢ç»“æž„ï¼Œç”¨ä¼ å…¥çš„nameä½œä¸ºkeyï¼ˆå¦‚æžœnameä¸ºç©ºä½¿ç”¨key_observersDic_noContentå¸¸é‡ä»£æ›¿ï¼‰ï¼ŒæŠŠæ‰€æœ‰ä½¿ç”¨ç›¸åŒnameçš„é€šçŸ¥æ”¾è¿›åŒä¸€ä¸ªæ•°ç»„ä½œä¸ºvalueï¼Œå¹¶ä¸”æ·»åŠ äº†çº¿ç¨‹é”ä¿è¯observersDicæ•°æ®è¯»å†™å®‰å…¨ã€‚ è¿™ä¹ˆåšçš„ç†ç”±ï¼šåœ¨é€šçŸ¥çš„æ•´ä¸ªåŠŸèƒ½ä½“ç³»ä¸­ï¼Œâ€œæ·»åŠ â€ã€â€œå‘é€â€ã€â€œç§»é™¤â€å“ªä¸€æ­¥å¯¹æ•ˆçŽ‡çš„è¦æ±‚æœ€é«˜ï¼Ÿæ¯«æ— ç–‘é—®æ˜¯â€œå‘é€â€çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨- (void)postNotificationName:(NSString *)aName object:(nullable id)anObjectæ–¹æ³•å‘é€é€šçŸ¥ï¼ŒaNameå‚æ•°å°†æ˜¯æˆ‘ä»¬æ‰¾åˆ°å¯¹åº”é€šçŸ¥çš„ç¬¬ä¸€åŒ¹é…ç‚¹ã€‚å¦‚æžœæˆ‘ä»¬å°†å…¶å®ƒå‚æ•°ä½œä¸ºobserversDicçš„keyï¼Œæˆ‘ä»¬å‘é€é€šçŸ¥çš„æ—¶å€™ä¸å¾—ä¸éåŽ†æ•´ä¸ªobserversDicï¼›è€Œå¦‚ä¸Šä»£ç å®žçŽ°ï¼Œå‘é€é€šçŸ¥çš„æ—¶å€™ï¼Œç›´æŽ¥å°±èƒ½é€šè¿‡keyç›´æŽ¥æ‰¾åˆ°å¯¹åº”çš„é€šçŸ¥ä¿¡æ¯äº†ï¼Œæœ‰æ•ˆé™ä½Žäº†æ—¶é—´å¤æ‚åº¦ã€‚ ä½¿ç”¨ä»£ç å—å›žè°ƒé€šçŸ¥æ–¹æ³•çš„å®žçŽ° 12345678910111213141516- (id&lt;NSObject&gt;)addObserverForName:(NSString *)name object:(id)obj queue:(NSOperationQueue *)queue usingBlock:(void (^)(YBNotification * _Nonnull))block &#123; if (!block) &#123; return nil; &#125; YBObserverInfoModel *observerInfo = [YBObserverInfoModel new]; observerInfo.object = obj; observerInfo.name = name; observerInfo.queue = queue; observerInfo.block = block; NSObject *observer = [NSObject new]; observerInfo.observer_strong = observer; observerInfo.observerId = [NSString stringWithFormat:@&quot;%@&quot;, observer]; [self addObserverInfo:observerInfo]; return observer;&#125; è¿™é‡Œæœ‰ä¸ªåœ°æ–¹éœ€è¦æå‡ºæ¥è°ˆè°ˆï¼Œåœ¨ä½¿ç”¨ç³»ç»Ÿçš„è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œä¸€ç»å®žéªŒå°±èƒ½å‘çŽ°ï¼Œä¸ç®¡æˆ‘ä»¬å¼ºå¼•ç”¨æˆ–è€…å¼±å¼•ç”¨è¿™ä¸ªè¿”å›žå€¼idæ—¶ï¼Œéƒ½èƒ½åœ¨ä¸šåŠ¡ç±»deallocé‡Šæ”¾çš„æ—¶å€™æœ‰æ•ˆçš„ç§»é™¤è¯¥é€šçŸ¥ã€‚ ç”±äºŽä½¿ç”¨è¯¥æ–¹æ³•æ·»åŠ é€šçŸ¥çš„æ—¶å€™ä¸ä¼šä¼ å…¥observerå‚æ•°ï¼Œè¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªobserverï¼Œå¦‚æžœè¿™é‡Œä½¿ç”¨observerInfo.observer = observer;ï¼Œè€Œä¸šåŠ¡ç±»æ²¡æœ‰å¼ºå¼•ç”¨è¿™ä¸ªè¿”å›žå€¼observerï¼Œå®ƒå°†ä¼šè‡ªç„¶é‡Šæ”¾ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œåšäº†ä¸€ä¸ªç‰¹æ®Šå¤„ç†ï¼Œè®©observerInfoå®žä¾‹å¼ºæŒæœ‰observerã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¤–éƒ¨å¦‚æžœå¼ºå¼•ç”¨è¿”å›žçš„idç±»åž‹çš„observerï¼Œä¼šé€ æˆobserveræ— æ³•åŠæ—¶çš„é‡Šæ”¾ï¼Œä½†æ˜¯è¿™ç‚¹å†…å­˜æˆ‘è®¤ä¸ºè¿˜æ˜¯å¯ä»¥æŽ¥å—çš„ï¼Œå½“ç„¶ä¸šåŠ¡ç±»ä½¿ç”¨å¼±å¼•ç”¨è¯¥observeræ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚ 2ã€å‘é€é€šçŸ¥å’Œç³»ç»Ÿé€šçŸ¥ä¸€æ ·ï¼ŒåŒæ ·åˆ›å»ºäº†ä¸€ä¸ªç±»YBNotificationå‘é€é€šçŸ¥æ¶ˆæ¯ä½“ï¼Œå±žæ€§å°±æˆ‘ä»¬ç†Ÿæ‚‰çš„å‡ ä¸ªï¼š123456789101112131415161718192021222324252627282930313233343536@property (copy) NSString *name;@property (weak) id object;@property (copy) NSDictionary *userInfo;å¤åˆ¶ä»£ç ç„¶åŽå°†&lt;NSCopying, NSCoding&gt;ä¸¤ä¸ªåè®®å®žçŽ°ä¸€ä¸‹å°±å¥½äº†ï¼Œå…·ä½“çœ‹demoã€‚å‘é€é€šçŸ¥æ ¸å¿ƒä»£ç - (void)postNotification:(YBNotification *)notification &#123; if (!notification) &#123; return; &#125; NSMutableDictionary *observersDic = YBNotificationCenter.defaultCenter.observersDic; NSMutableArray *tempArr = [observersDic objectForKey:notification.name]; if (tempArr) &#123; [tempArr enumerateObjectsUsingBlock:^(YBObserverInfoModel *obj, NSUInteger idx, BOOL * _Nonnull stop) &#123; if (obj.block) &#123; if (obj.queue) &#123; NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^&#123; obj.block(notification); &#125;]; NSOperationQueue *queue = obj.queue; [queue addOperation:operation]; &#125; else &#123; obj.block(notification); &#125; &#125; else &#123; if (!obj.object || obj.object == notification.object) &#123;#pragma clang diagnostic push#pragma clang diagnostic ignored &quot;-Warc-performSelector-leaks&quot; obj.observer?[obj.observer performSelector:obj.selector withObject:notification]:nil;#pragma clang diagnostic pop &#125; &#125; &#125;]; &#125;&#125; å‘é€é€šçŸ¥ç›¸å¯¹ç®€å•ï¼Œåªéœ€è¦åˆ†æ¸…æ˜¯ä½¿ç”¨ä»£ç å—å›žè°ƒï¼Œè¿˜æ˜¯é€šè¿‡æ‰§è¡ŒSELå›žè°ƒã€‚åœ¨ä½¿ç”¨ä»£ç å—å›žè°ƒæ—¶ï¼Œå¦‚æžœä¼ å…¥äº†é˜Ÿåˆ—queueï¼Œå°±è®©è¯¥ä»£ç å—åœ¨è¯¥é˜Ÿåˆ—ä¸­æ‰§è¡Œï¼Œå¦åˆ™æ­£å¸¸æ‰§è¡Œã€‚!obj.object || obj.object == notification.objectifè¯­å¥ä¸­è¿™ä¸ªåˆ¤æ–­å€¼å¾—æ³¨æ„ã€‚ 3ã€ç§»é™¤é€šçŸ¥ç§»é™¤é€šçŸ¥æœ¬èº«ç®€å•ï¼Œæœ‰äº›éº»çƒ¦çš„æ˜¯è‡ªåŠ¨ç§»é™¤ã€‚å…ˆè´´ä¸Šç§»é™¤ä»£ç ï¼š 12345678910111213141516171819202122232425- (void)removeObserverId:(NSString *)observerId name:(NSString *)aName object:(id)anObject &#123; if (!observerId) &#123; return; &#125; NSMutableDictionary *observersDic = YBNotificationCenter.defaultCenter.observersDic; @synchronized(observersDic) &#123; if (aName &amp;&amp; [aName isKindOfClass:[NSString class]]) &#123; NSMutableArray *tempArr = [observersDic objectForKey:[aName mutableCopy]]; [self array_removeObserverId:observerId object:anObject array:tempArr]; &#125; else &#123; [observersDic enumerateKeysAndObjectsUsingBlock:^(NSString *key, NSMutableArray *obj, BOOL * _Nonnull stop) &#123; [self array_removeObserverId:observerId object:anObject array:obj]; &#125;]; &#125; &#125;&#125;- (void)array_removeObserverId:(NSString *)observerId object:(id)anObject array:(NSMutableArray *)array &#123; @autoreleasepool &#123; [array.copy enumerateObjectsUsingBlock:^(YBObserverInfoModel *obj, NSUInteger idx, BOOL * _Nonnull stop) &#123; if ([obj.observerId isEqualToString:observerId] &amp;&amp; (!anObject || anObject == obj.object)) &#123; [array removeObject:obj]; &#125; &#125;]; &#125;&#125; æ‰€æœ‰ç§»é™¤é€šçŸ¥çš„æ–¹æ³•ï¼Œæœ€ç»ˆè½è„šç‚¹éƒ½æ˜¯åœ¨è¿™é‡Œã€‚ä¸Šé¢æ–¹æ³•ä¸­ï¼Œå¦‚æžœaNameä¸æ˜¯åˆç†çš„ï¼Œå°±éœ€è¦éåŽ†observersDicç§»é™¤å¯¹åº”çš„é€šçŸ¥ï¼›å¦‚æžœaNameæ˜¯åˆç†çš„ï¼Œå°±ç›´æŽ¥æŸ¥æ‰¾å¯¹åº”çš„æ•°ç»„ç§»é™¤å†…å®¹ã€‚ä¸‹é¢æ–¹æ³•ä¸­ï¼Œç”±äºŽarray.copyé€ æˆäº†å±€éƒ¨å˜é‡ï¼Œè€Œä¸Šçº§å¯èƒ½æ˜¯ä¸€ä¸ªéåŽ†ï¼Œæ‰€ä»¥å¾—åŠ ä¸Šè‡ªåŠ¨é‡Šæ”¾æ± é¿å…å†…å­˜æ³„éœ²ã€‚ ä½¿ç”¨observerIdå±žæ€§ç§»é™¤é€šçŸ¥ï¼Œè€Œä¸ç”¨observerå“åº”è€…æ¥ç›´æŽ¥æ¯”è¾ƒç§»é™¤ï¼šè¿˜è®°å¾—æ·»åŠ é€šçŸ¥æ—¶YBObserverInfoModelç±»çš„@property (strong) NSString *observerId;å±žæ€§ä¹ˆï¼Ÿåœ¨æ·»åŠ é€šçŸ¥çš„æ—¶å€™ï¼Œæˆ‘å°†å“åº”è€…çš„åœ°å€ä¿¡æ¯ä½œä¸ºè¯¥å±žæ€§çš„å€¼ï¼ˆä¿è¯å…¶å”¯ä¸€æ€§ï¼‰ï¼š observerInfo.observerId = [NSString stringWithFormat:@â€%@â€, observer];å¤åˆ¶ä»£ç ç„¶åŽåœ¨ç§»é™¤çš„æ—¶å€™é€šè¿‡æ¯”è¾ƒè¿›è¡Œç›¸åº”çš„æ“ä½œã€‚ å®žçŽ°è‡ªåŠ¨ç§»é™¤é€šçŸ¥ï¼ˆè§£é‡Šä¸ºä½•ä½¿ç”¨observerIdç§»é™¤é€šçŸ¥è€Œä¸ç”¨observerï¼‰å®žçŽ°è‡ªåŠ¨ç§»é™¤é€šçŸ¥ï¼Œæ€è·¯æ˜¯åœ¨å“åº”è€…observerèµ°deallocçš„æ—¶å€™ç§»é™¤å¯¹åº”çš„é€šçŸ¥ï¼Œéš¾ç‚¹å°±æ˜¯åœ¨ARCä¸­æ˜¯ä¸å…è®¸å¯¹deallocåšç»§æ‰¿å’Œäº¤æ¢æ–¹æ³•ç­‰æ“ä½œçš„ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨äº†ä¸€ä¸ªç¼“å…µä¹‹è®¡â€”â€”åŠ¨æ€ç»™observeræ·»åŠ ä¸€ä¸ªå±žæ€§ï¼Œæˆ‘ä»¬ç›‘å¬è¿™ä¸ªå±žæ€§çš„deallocæ–¹æ³•ç§»é™¤å¯¹åº”çš„é€šçŸ¥ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526- (void)addObserverInfo:(YBObserverInfoModel *)observerInfo &#123; //ä¸ºobserverå…³è”ä¸€ä¸ªé‡Šæ”¾ç›‘å¬å™¨ id resultObserver = observerInfo.observer?observerInfo.observer:observerInfo.observer_strong; if (!resultObserver) &#123; return; &#125; YBObserverMonitor *monitor = [YBObserverMonitor new]; monitor.observerId = observerInfo.observerId; const char *keyOfmonitor = [[NSString stringWithFormat:@&quot;%@&quot;, monitor] UTF8String]; objc_setAssociatedObject(resultObserver, keyOfmonitor, monitor, OBJC_ASSOCIATION_RETAIN_NONATOMIC); //æ·»åŠ è¿›observersDic NSMutableDictionary *observersDic = YBNotificationCenter.defaultCenter.observersDic; @synchronized(observersDic) &#123; NSString *key = (observerInfo.name &amp;&amp; [observerInfo.name isKindOfClass:NSString.class]) ? observerInfo.name : key_observersDic_noContent; if ([observersDic objectForKey:key]) &#123; NSMutableArray *tempArr = [observersDic objectForKey:key]; [tempArr addObject:observerInfo]; &#125; else &#123; NSMutableArray *tempArr = [NSMutableArray array]; [tempArr addObject:observerInfo]; [observersDic setObject:tempArr forKey:key]; &#125; &#125;&#125; åªä¸è¿‡åœ¨æ·»åŠ é€šçŸ¥åˆ°observersDicä¹‹å‰ï¼Œæ·»åŠ ä¸€ä¸ªmonitorå®žä¾‹ï¼Œä½¿ç”¨objc_setAssociatedObjectåŠ¨æ€å…³è”æ–¹æ³•ç»™resultObserveræ·»åŠ ä¸€ä¸ªå¼ºå¼•ç”¨çš„å±žæ€§ï¼Œæ³¨æ„objc_setAssociatedObjectæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»ä¿è¯å…¶å”¯ä¸€æ€§ï¼Œå› ä¸ºåŒä¸€ä¸ªå“åº”è€…å¯èƒ½æ·»åŠ å¤šä¸ªé€šçŸ¥ã€‚ å¥½äº†ï¼ŒçŽ°åœ¨åŸºæœ¬å·¥ä½œéƒ½å®Œæˆäº†ï¼Œåªéœ€è¦åœ¨è¿™ä¸ªYBObserverMonitoræ–¹æ³•ä¸­åšç®€å•çš„ç§»é™¤é€»è¾‘å°±OKäº†ï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910//ç›‘å¬å“åº”è€…é‡Šæ”¾ç±»@interface YBObserverMonitor : NSObject@property (strong) NSString *observerId;@end@implementation YBObserverMonitor- (void)dealloc &#123; NSLog(@&quot;%@ dealloc&quot;, self); [YBNotificationCenter.defaultCenter removeObserverId:self.observerId];&#125;@end æœºæ™ºçš„ä½ å‘çŽ°äº†ä»€ä¹ˆäº†ä¹ˆï¼Ÿç±»é‡Šæ”¾çš„é¡ºåºæ˜¯å…ˆè‡ªå·±é‡Šæ”¾ç„¶åŽå…¶å±žæ€§é‡Šæ”¾ï¼Œä¹Ÿå°±æ˜¯è¯´ç†è®ºä¸Šåœ¨èµ°YBObserverMonitorçš„ deallocæ—¶ï¼Œobserverå“åº”è€…å¯¹è±¡å·²ç»é‡Šæ”¾äº†ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¸ç›´æŽ¥ä½¿ç”¨observerå“åº”è€…å¯¹è±¡å¯¹æ¯”åšé‡Šæ”¾æ“ä½œã€‚ å†™åœ¨åŽé¢å…³äºŽå®žçŽ°éƒ¨åˆ†ï¼Œè™½ç„¶æˆ‘åšäº†ä¸ªå¤§è‡´çš„æµ‹è¯•ï¼Œå¯èƒ½è¿˜æ˜¯ä¼šå­˜åœ¨ä¸€äº›æ½œåœ¨çš„é—®é¢˜ï¼Œå¸Œæœ›å„ä½å¤§ä½¬ä¸æƒœç¬”å¢¨ç‚¹æ‹¨ä¸€ç•ªðŸ˜ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[æž¶æž„ä¸Žæ¡†æž¶]]></title>
    <url>%2F2018%2F07%2F05%2F%E6%9E%B6%E6%9E%84%E4%B8%8E%E6%A1%86%E6%9E%B6%2F</url>
    <content type="text"><![CDATA[å›¾ç‰‡ç¼“å­˜ å†…å­˜è®¾è®¡çš„é—®é¢˜ï¼Ÿ Size æ·˜æ±°ç­–ç•¥ æ·˜æ±°ç­–ç•¥ é˜Ÿåˆ—å…ˆè¿›å…ˆå‡º LRUç®—æ³•(æœ€è¿‘æœªä½¿ç”¨ï¼Œå¦‚30åˆ†é’Ÿ) ç£ç›˜è®¾è®¡æ–¹æ¡ˆè€ƒè™‘ å­˜å‚¨æ–¹å¼ å¤§å°é™åˆ¶(100M) æ·˜æ±°ç­–ç•¥ï¼Œæ¯”å¦‚å­˜å‚¨äº‹ä»¶è¶…è¿‡7å¤© ç½‘ç»œéƒ¨åˆ†çš„è®¾è®¡éœ€è¦è€ƒè™‘å“ªäº›ï¼Ÿ å›¾ç‰‡è¯·æ±‚æœ€å¤§å¹¶å‘ è¯·æ±‚è¶…æ—¶ ä¼˜å…ˆçº§ ä¸åŒæ ¼å¼çš„å›¾ç‰‡ï¼Œè§£ç é‡‡ç”¨ä»€ä¹ˆæ–¹å¼æ¥åšï¼Ÿ åº”ç”¨ç­–ç•¥æ¨¡å¼å¯¹ä¸åŒå›¾ç‰‡æ ¼å¼è¿›è¡Œè§£ç  å“ªä¸ªé˜¶æ®µåšå›¾ç‰‡è§£ç ï¼Ÿ ç£ç›˜è¯»å–åŽ ç½‘ç»œè¯·æ±‚è¿”å›žåŽ çº¿ç¨‹å¤„ç† æ—¶é•¿ç»Ÿè®¡æ¡†æž¶ å¤æ‚é¡µé¢è®¾è®¡ MVVMçš„æž¶æž„æ€æƒ³ RNæ•°æ®æµæ€æƒ³ UIViewæ›´æ–°æœºåˆ¶ AsyncDisplayKitå…³äºŽé¢„æŽ’ç‰ˆçš„æ€æƒ³ æ•´ä½“æž¶æž„ å®¢æˆ·ç«¯è§£è€¦ OpenURL ä¾èµ–æ³¨å…¥]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[opencvä½¿ç”¨å…¥é—¨]]></title>
    <url>%2F2018%2F06%2F06%2F2018%2Fopencv%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[DCTä¿¡æ¯çš„èŽ·å–12345678910111213141516import cv2import numpy as npdef dct(m): # img = np.uint8(dst)*255.0 m = np.float32(m)/255.0 return cv2.dct(m)*255img = cv2.imread(&apos;new.jpeg&apos;,0)#cv2.IMREAD_COLORï¼Œæœ€åŽä¸€ä¸ªå‚æ•°ç•™ç©ºä»£è¡¨å½©è‰²ï¼Œå¦‚æžœç”¨0ä»£è¡¨ç°åº¦è½½å…¥cv2.namedWindow(&apos;image&apos;,cv2.WINDOW_NORMAL)cv2.imshow(&apos;image&apos;,img)#æ˜¾ç¤ºå›¾åƒï¼Œcv2.waitKey(0)#ç­‰å¾…é”®ç›˜è¾“å…¥ï¼Œä¸ºæ¯«ç§’çº§cv2.destroyAllWindows()#å¯ä»¥è½»æ˜“åˆ é™¤ä»»ä½•æˆ‘ä»¬å»ºç«‹çš„çª—å£ï¼Œæ‹¬å·å†…è¾“å…¥æƒ³åˆ é™¤çš„çª—å£å åˆ†é€šé“ï¼Œåˆå¹¶ï¼Œå­˜å‚¨å›¾ç‰‡12345678910111213141516171819202122232425262728293031323334import cv2 import numpy as np import matplotlib.pyplot as plt img = cv2.imread(&quot;new.jpeg&quot;) #å…¨è‰²å½©b, g, r = cv2.split(img)#é€šé“æ‹†åˆ†out = cv2.merge([b,g,r])img1 = cv2.imread(&apos;new.jpeg&apos;,0) #ä¸€ä¸ªé€šé“çš„è‰²å½©def dct(m): m = np.float32(m)/255.0 return cv2.dct(m)*255img_dct = dct(img1) #è¿›è¡Œç¦»æ•£ä½™å¼¦å˜æ¢ img_dct_log = np.log(abs(img_dct)) #è¿›è¡Œlogå¤„ç† img_recor2 = cv2.idct(img_dct) #è¿›è¡Œç¦»æ•£ä½™å¼¦åå˜æ¢ plt.subplot(121) plt.imshow(img, &apos;gray&apos;) plt.title(&apos;original image&apos;) plt.subplot(122) plt.imshow(out,&apos;gray&apos;) plt.title(&apos;IDCT2(cv2_idct)&apos;) cv2.imwrite(&quot;ouput.jpg&quot;,img) #å­˜å‚¨è¦æ³¨æ„ï¼Œåªèƒ½å­˜å‚¨ä¸ºjpgæ ¼å¼ï¼Œå› ä¸ºæˆ‘è§£å‡ºæ¥åŽæ²¡æœ‰è¿›è¡ŒåŽ‹ç¼©ï¼Œä¸çŸ¥é“åŽ‹ç¼©åŽä¸èƒ½ä¸èƒ½å­˜å‚¨ä¸ºjpegï¼Œè¿™é‡Œå¦‚æžœæ”¹ä¸ºjpegä¼šæŠ¥é”™ could not find a writer for the specified extension in function cv::imwrite_plt.show() è‡ªè¡Œåˆ†ç¦»123456789101112131415161718è‡ªè¡Œåˆ†ç¦»ä¸‰é€šé“å‡½æ•°å®šä¹‰äº†ä¸‰ä¸ªå‡½æ•°æ¥èŽ·å–ä¸‰ä¸ªé€šé“çš„å­çŸ©é˜µã€‚èŽ·å–çº¢è‰²é€šé“ï¼šdef get_red(img): redImg = img[:,:,2] return redImgèŽ·å–ç»¿è‰²é€šé“ï¼šdef get_green(img): greenImg = img[:,:,1] return greenImgèŽ·å–è“è‰²é€šé“def get_blue(img): blueImg = img[:,:,0] return blueImg opencvçš„DCTä½¿ç”¨123456789101112131415161718192021import cv2import numpy as npB = np.array([[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8]])#æœ€å°‘éœ€è¦8*8B = B.astype(&apos;float&apos;) #intè½¬floatprint Bprint type(B)print B.shapedctn = cv2.dct(B) #dctå˜æ¢print dctn.shapeprint dctnB1 = cv2.idct(dctn) #é€†dctå˜æ¢æˆåŽŸæ¥çš„æ•°æ®print B1 opencvåŠ è½½å›¾åƒ123456789101112131415161718import cv2import numpy as npimport matplotlib.pyplot as plt B=8 # blocksize (In Jpeg theimg1 = cv2.imread(&quot;new.jpeg&quot;)h,w=np.array(img1.shape[:2])/B * B #è¿›è¡Œåƒç´ ä¸ªæ•°çš„æ ¼å¼åŒ–ï¼Œå› ä¸ºè¿™æ ·å°±å¯ä»¥ä¿è¯æ˜¯8*8çš„ä¸ªæ•°é…æ¯”äº†print h,wimg1=img1[:h,:w] #è¿™ä¸€æ­¥åŽ»æŽ‰æ— ç”¨çš„æ•°æ®ï¼Œè€Œä¸æ˜¯åƒæˆ‘æƒ³çš„ï¼Œå¢žåŠ åƒç´ #Convert BGR to RGBimg2=np.zeros(img1.shape,np.uint8)img2[:,:,0]=img1[:,:,2]img2[:,:,1]=img1[:,:,1]img2[:,:,2]=img1[:,:,0]# plt.imshow(img1) #è¿™ä¸ªæ˜¾ç¤ºçš„æ—¶å€™æ˜¯BGRé¢œè‰²æœ‰ç‚¹å¥‡æ€ªplt.imshow(img2) å®Œæ•´ä¾‹å­12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364import cv2 import numpy as np import matplotlib.pyplot as plt img = cv2.imread(&quot;ori.jpg&quot;) #å…¨è‰²å½©b,g,r = cv2.split(img)imgYCC = cv2.cvtColor(img, cv2.COLOR_BGR2YCR_CB)y,cr,cb = cv2.split(imgYCC)QY=np.array([[16,11,10,16,24,40,51,61], [12,12,14,19,26,48,60,55], [14,13,16,24,40,57,69,56], [14,17,22,29,51,87,80,62], [18,22,37,56,68,109,103,77], [24,35,55,64,81,104,113,92], [49,64,78,87,103,121,120,101], [72,92,95,98,112,100,103,99]])def compile(y): print &apos;y&apos; print y b = y.astype(&apos;float&apos;)# b = y.astype(&apos;float&apos;) print type(b) print &apos;b&apos; print b bd = b[:8,:8] print bd.shape print &apos;bd&apos; print bd bdct = cv2.dct(bd) print &apos;bdct&apos; print bdct print &apos;8&apos; print bdct.astype(&apos;int16&apos;) # dct1 = np.uint8(bdct) dct1 = bdct.astype(&apos;int16&apos;) dct1 = dct1 / QY print &apos;dct1&apos; print dct1 return dct1dct1 = compile(y)dct1 = dct1 * QYimgf = dct1.astype(&apos;float&apos;)# print &apos;imgf&apos;,imgfiTrans = cv2.idct(imgf)# print &apos;iTrans&apos;,iTransy2 = iTrans.astype(&apos;int16&apos;)print &apos;y2&apos;,y2dct2 = compile(y2.astype(&apos;float&apos;))dst = cv2.cvtColor(img_YUV, cv2.COLOR_YUV2BGR)# dct2 = compile(y2) åŸºäºŽDCTå’ŒRBGæ–¹å·®çš„éšå†™ç®—æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396import cv2import numpy as npimport matplotlib.pyplot as pltfrom compiler.ast import flattenQC=np.array([[17,18,24,47,99,99,99,99], [18,21,26,66,99,99,99,99], [24,26,56,99,99,99,99,99], [47,66,99,99,99,99,99,99], [99,99,99,99,99,99,99,99], [99,99,99,99,99,99,99,99], [99,99,99,99,99,99,99,99], [99,99,99,99,99,99,99,99]])QY=np.array([[16,11,10,16,24,40,51,61], [12,12,14,19,26,48,60,55], [14,13,16,24,40,57,69,56], [14,17,22,29,51,87,80,62], [18,22,37,56,68,109,103,77], [24,35,55,64,81,104,113,92], [49,64,78,87,103,121,120,101], [72,92,95,98,112,100,103,99]])# QY=np.array([[8,1,1,1,1,1,1,1],# [1,1,1,1,1,1,1,55],# [1,1,1,1,1,1,69,56],# [1,1,1,1,1,87,80,62],# [1,1,1,1,68,109,103,77],# [1,1,1,64,81,104,113,92],# [1,1,78,87,103,121,120,101],# [1,92,95,98,112,100,103,99]])zag = [(7,7),(7,6),(6,7),(5,7),(6,6),(7,5),(7,4),(6,5), (5,6),(4,7),(3,7),(4,6),(5,5),(6,4),(7,3),(7,2), (6,3),(5,4),(4,5),(3,6),(2,7),(1,7),(2,6),(3,5), (4,4),(5,3),(6,2),(7,1),(7,0),(6,1),(5,2),(4,3), (3,4),(2,5),(1,6),(0,7),(0,6),(1,5),(2,4),(3,3), (4,2),(5,1),(6,0),(5,0),(4,1),(3,2),(2,3),(1,4), (0,5),(0,4),(1,3),(2,2),(3,1),(4,0),(3,0),(2,1), (1,2),(0,3),(0,2),(1,1),(2,0),(1,0),(0,1),(0,0)]singleO = &apos;0b&apos;output = &apos;&apos;printindex = []writeinfolist = []index = 0def convertcontenttobit(content): #æŠŠæ–‡å­—è½¬åŒ–ä¸ºäºŒè¿›åˆ¶è¿›è¡Œå†™å…¥ global writeinfolist strnew = content# bits = [] for item in list(strnew): bit = ord(item) #è½¬ä½ç½®ç¼–ç  bitstring = bin(bit) #ä½ç½®ç¼–ç è½¬äºŒè¿›åˆ¶ bitnew = bitstring[2:] bitnew = &apos;0&apos; * (8 - len(bitnew)) + bitnew bitnewlist = [] for bi in bitnew: bitnewlist.append(int(bi)) writeinfolist = writeinfolist + bitnewlist end = [1,1,1,1,1,1,1,1] writeinfolist = writeinfolist + end print writeinfolist def convertbittocontent(bit): #æŠŠäºŒè¿›åˆ¶è¯»å–ç„¶åŽè½¬åŒ–ä¸ºæ–‡å­— global singleO global output bits = str(bit) if len(singleO) == 9: singleO = singleO + bits if singleO.count(&apos;1&apos;) &gt; 6: print &apos;eeeeeend&apos;,singleO return False inten = int(singleO,2) output = output + chr(inten) print &apos;*********&apos;,singleO,chr(inten) singleO = &apos;0b&apos; else: singleO = singleO + bits return True def writeinfo(origin): global index global writeinfolist if index &gt;= len(writeinfolist) - 1: return origin data = writeinfolist[index] # data = 1 lower_bit=origin%2 # print index,len(writeinfolist),lower_bit,data,origin if lower_bit==data:# print index,len(writeinfolist),lower_bit,data,origin# print &apos;---------------&apos; index = index + 1 return origin elif origin&gt;0: if (lower_bit,data) == (0,1): origin = origin+1 elif (lower_bit,data) == (1,0): origin = origin-1 elif origin&lt;0: if (lower_bit,data) == (0,1): origin=origin-1 elif (lower_bit,data) == (1,0): origin=origin+1 # print index,len(writeinfolist),lower_bit,data,origin# print &apos;---------------&apos; index = index + 1 return origindef findcanwritedct(dct): global index global writeinfolist change = False # if index == len(writeinfolist) - 1:# return dct,change dcttemp = dct.copy() dcttemp[0,0] = 0 z = np.fabs(dcttemp) z = flatten(z.tolist()) lenz = len(z) zerocount = z.count(0) sumz = np.sum(z) total = sumz * 1.0 / (lenz - zerocount)# if total &gt; 1 and dct[0,0] &lt; 100: change = True dct[0,0] = writeinfo(dct[0,0])# for i in range(63):# target = dct[zag[i]]# if target not in [-1,0,1]:# dct[zag[i]] = writeinfo(target)# change = True# break return dct,changedef findwriteddct(dct): # dcttemp = dct.copy()# dcttemp[0,0] = 0 # z = np.fabs(dcttemp)# z = flatten(z.tolist())# lenz = len(z)# zerocount = z.count(0)# sumz = np.sum(z)# total = sumz * 1.0 / (lenz - zerocount)# if total &gt; 1 and dct[0,0] &lt; 100: change = True# dct[0,0] = writeinfo(dct[0,0]) return dct[0,0]# for i in range(63):# if dct[zag[i]] not in [-1,0,1]:# return dct[zag[i]]# break # return Nonedef converttodct(y): global QY b = y.astype(&apos;float&apos;) bdct = cv2.dct(b) dct1 = bdct.tolist() dct1 = np.around(dct1) #å››èˆäº”å…¥ dct1 = dct1 / QY dct1 = dct1.tolist() dct1 = np.around(dct1) #å†æ¬¡å››èˆäº”å…¥ dct1 = dct1.astype(&apos;int16&apos;) dct1,change = findcanwritedct(dct1) return dct1,changedef converttoycr(dct): global QY dct = dct * QY imgf = dct.astype(&apos;float&apos;) iTrans = cv2.idct(imgf) iTrans = iTrans.tolist() iTrans = np.around(iTrans) cr = iTrans.astype(&apos;int16&apos;) return crdef readinfofromyc(cr8): global QY global index global printindex global writeinfolist b = cr8.astype(&apos;float&apos;) aver = b.mean() if aver &gt; 200 or aver &lt; 60: return True bdct = cv2.dct(b) dct1 = bdct.tolist() dct1 = np.around(dct1) #å››èˆäº”å…¥ dct1 = dct1 / QY dct1 = dct1.tolist() dct1 = np.around(dct1) #å†æ¬¡å››èˆäº”å…¥ dct1 = dct1.astype(&apos;int16&apos;) var = b.var()# print var# print dct1# key = aver / 2# topline = aver * 1.4# m = b[np.where(b &lt; key)].shape[0]# n = b[np.where(b &gt; topline)].shape[0]# if var &gt; 5 or m &gt; 10 or n &gt; 5:# return True if var &gt; 1: return True # if dct1[0,0] % 2 == 1:# print &apos;aver&apos;,aver# print &apos;shape+++++++&apos;,m# print &apos;origin&apos;,b# print &apos;dct&apos;,dct1# print &apos;var&apos;,b.var() if (index - 1) in printindex: print &apos;new############start&apos;,writeinfolist[index - 1],index - 1 print dct1 print cr8 print &apos;new############end&apos; origin = findwriteddct(dct1) if (origin != None): return convertbittocontent(origin % 2)def addinfotoyc(yc8): global index global printindex global writeinfolist aver = yc8.mean() if aver &gt; 200 or aver &lt; 60: return yc8 var = yc8.var()# key = aver / 2# topline = aver * 1.4# m = yc8[np.where(yc8 &lt; key)].shape[0]# n = yc8[np.where(yc8 &gt; topline)].shape[0]# if var &gt; 3 or m &gt; 10 or n &gt; 5:# print yc8# print &apos;var&apos;,var# print &apos;m&apos;,m# print &apos;n&apos;,n# print &apos;topline&apos;,topline# print &apos;key&apos;,key# print &apos;aver&apos;,aver# return yc8 if var &gt; 1: return yc8 dct,change = converttodct(yc8) if change == False: return yc8 cr = converttoycr(dct) if cr.var() &gt; 1: index = index - 1# print &apos;origin&apos;# print yc8# print &apos;oldvar&apos;,var# print &apos;new&apos;# print cr# print &apos;newvar&apos;,cr.var()# print &apos;index&apos;,index return yc8 # print dct# print cr.var() if (index - 1) in printindex: print &apos;origin###########start&apos;,writeinfolist[index-1],index - 1 print dct print cr print &apos;origin###########end&apos; readinfofromyc(cr) cr[np.where(cr &gt; 254)] = 254 cr[np.where(cr &lt; 1)] = 0 return crdef convertimg(img): B = 8 imgYCC = cv2.cvtColor(img, cv2.COLOR_BGR2YCR_CB) h,w=np.array(imgYCC.shape[:2])/B * B #è¿›è¡Œåƒç´ ä¸ªæ•°çš„æ ¼å¼åŒ–ï¼Œå› ä¸ºè¿™æ ·å°±å¯ä»¥ä¿è¯æ˜¯8*8çš„ä¸ªæ•°é…æ¯”äº† imgYCC = imgYCC[:h,:w] #è¿™ä¸€æ­¥åŽ»æŽ‰æ— ç”¨çš„æ•°æ®ï¼Œè€Œä¸æ˜¯åƒæˆ‘æƒ³çš„ï¼Œå¢žåŠ åƒç´  y = imgYCC[:,:,0] cr = imgYCC[:,:,1] cb = imgYCC[:,:,2] return y,cr,cbdef scanpiex(cr): global index # crn = np.zeros(cr.shape) crn = cr.copy() (h,w) = cr.shape h = h/8 w = w/8 print h,w for i in range(0,h): for j in range(0,w): cr8 = cr[i*8:i*8+8,j*8:j*8+8] crn[i*8:i*8+8,j*8:j*8+8] = addinfotoyc(cr8) if index &gt;= len(writeinfolist) - 1: print &apos;stop&apos;,&apos;i=&apos;,i,&apos;j=&apos;,j,&apos;i*j=&apos;,i * j index = 0 return crn index = 0 return crndef readinfo(cr): global output (h,w) = cr.shape h = h/8 w = w/8 print h,w for i in range(0,h): for j in range(0,w): cr8 = cr[i*8:i*8+8,j*8:j*8+8] out = readinfofromyc(cr8)# print &apos;stop&apos;,&apos;i=&apos;,i,&apos;j=&apos;,j,&apos;i*j=&apos;,i * j if out == False or (i == (h - 1) and j == (w - 1)): print output breakdef test(): print &apos;write&apos;,writeinfolist img = cv2.imread(&quot;WechatIMG37.jpeg&quot;) #å…¨è‰²å½© y,cr,cb = convertimg(img) y = scanpiex(y) y = y.astype(&apos;uint8&apos;) print &apos;åˆ†å‰²çº¿åˆ†å‰²çº¿åˆ†å‰²çº¿&apos; img_YCbCr = cv2.merge([y,cr,cb]) imgnew = cv2.cvtColor(img_YCbCr, cv2.COLOR_YCR_CB2BGR)# cv2.imwrite(&quot;newpress.jpg&quot;,imgnew,[cv2.IMWRITE_JPEG_QUALITY, 50]) cv2.imwrite(&quot;newpress.jpg&quot;,imgnew) imgout = cv2.imread(&quot;newpress.jpg&quot;) #å…¨è‰²å½© y,cr,cb = convertimg(imgout) print &apos;read&apos; readinfo(y) def writecontent(): global writeinfolist global output convertcontenttobit(&apos;wangxiugang618wangxiugang618wangxiugang618wangxiugang618wangxiugang618&apos;) def readimage(imagename): imgout = cv2.imread(imagename) #å…¨è‰²å½© y,cr,cb = convertimg(imgout) print &apos;read&apos; readinfo(y)writecontent()test()# readimage(&apos;WechatIMG65.jpegâ€™)]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSåŒ…å¤§å°è®¡ç®—å¤‡å¿˜]]></title>
    <url>%2F2018%2F05%2F30%2F2018%2FiOS%E5%8C%85%E5%A4%A7%E5%B0%8F%E8%AE%A1%E7%AE%97%E5%A4%87%E5%BF%98%2F</url>
    <content type="text"><![CDATA[é¦–å…ˆéœ€è¦LinkMapæ–‡ä»¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359#!/usr/bin/env python#coding:utf-8import os,shutilimport urllib2import time, sys,copyfrom pymongo import MongoClientfrom biplist import *from prettytable import PrettyTablefrom numpy import *# 0æºç  1SDK# (projectname,sdkname,filename,size)projectNameList = []#è®°å½•å·¥ç¨‹åå­—åˆ—è¡¨def parItemText(text): global projectNameList fileNumberList = []#æ–‡ä»¶ç¼–å·åˆ—è¡¨ fileSizeDic = &#123;&#125;#æ–‡ä»¶å°ºå¯¸å­—å…¸ projectNameDic = &#123;&#125;#å·¥ç¨‹åå­—å­—å…¸ï¼Œè®°å½•å¤§å° fileItems = text.split(&apos;\n&apos;) count = 0 for singleItem in fileItems: # æœ€åŽæ˜¯æ‹¬å· # æœ€åŽæ˜¯.o # æœ€åŽæ˜¯ projectname = &apos;&apos; # æœ€å¤–å±‚nameï¼Œæ¯”å¦‚Library sdkname = &apos;&apos; # ç¼–è¯‘å®Œä¹‹åŽçš„åå­—.aæˆ–è€….framework filename = &apos;&apos; # .oçš„åå­— if len(singleItem) &gt; 0 and singleItem[0] == &apos;[&apos;: if singleItem[-1] == &apos;)&apos;: if &apos;Analyse-iphoneos&apos; in singleItem:#æºç  # print singleItem + &apos;æºç &apos; filenameitem = singleItem.split(&apos;/&apos;)[-1] count = count + 1 nameL = filenameitem.split(&apos;(&apos;)[0].replace(&apos;.a&apos;,&apos;&apos;) nameR = filenameitem.split(&apos;(&apos;)[1].replace(&apos;.o&apos;,&apos;&apos;).replace(&apos;)&apos;,&apos;&apos;) filename = nameR if &apos;lib&apos; in nameL: nameL = nameL.replace(&apos;lib&apos;,&apos;&apos;) sdkname = nameL else: projectname = nameL elif &apos;JRMobileAnalyse/&apos; in singleItem or &apos;../&apos; in singleItem:#SDK # print singleItem + &apos;SDKæ–‡ä»¶&apos; filenameitems = singleItem.split(&apos;/&apos;) filenameitem = filenameitems[-1] indexJR = -1 indexVe = -1 indexPods = -1 if &apos;JRLibrary&apos; in filenameitems: indexJR = filenameitems.index(&apos;JRLibrary&apos;) if &apos;Vendors&apos; in filenameitems: indexVe = filenameitems.index(&apos;Vendors&apos;) if &apos;Pods&apos; in filenameitems: indexVe = filenameitems.index(&apos;Pods&apos;) index = 0 if indexJR != -1: index = indexJR + 1 elif indexVe != -1: index = indexVe + 1 elif indexPods != -1: index = indexPods + 1 count = count + 1 nameL = filenameitem.split(&apos;(&apos;)[0].replace(&apos;.a&apos;,&apos;&apos;) nameR = filenameitem.split(&apos;(&apos;)[1].replace(&apos;.o&apos;,&apos;&apos;).replace(&apos;)&apos;,&apos;&apos;) filename = nameR projectname = filenameitems[index] sdkname = nameL else: # print singleItem + &apos;å…¶ä»–çš„&apos; filenameitem = singleItem.split(&apos;/&apos;)[-1] filename = filenameitem projectname = &apos;Apple&apos; sdkname = &apos;Apple&apos; count = count + 1 elif &apos;] /Applications&apos; in singleItem: # print singleItem + &apos;ç³»ç»Ÿæ–‡ä»¶&apos; filenameitem = singleItem.split(&apos;/&apos;)[-1] filename = filenameitem projectname = &apos;Apple&apos; sdkname = &apos;Apple&apos; count = count + 1 else: if singleItem[-1] == &apos;o&apos;: # print singleItem + &apos;ä¸»å·¥ç¨‹&apos; count = count + 1 projectname = &apos;JDMobile&apos; filename = singleItem.split(&apos;/&apos;)[-1].replace(&apos;.o&apos;,&apos;&apos;) # print &apos;-------&gt;&apos;,&apos;projectname,filename filenumber = singleItem.split(&apos;] &apos;)[0] + &apos;]&apos; if filenumber not in fileNumberList: fileNumberList.append(filenumber) # print filenumber,projectname,sdkname,filename fileSizeDic[filenumber] = [projectname,sdkname,filename,0] elif singleItem[:2] == &apos;0x&apos;: if chr(9) + &apos;[&apos; in singleItem: sizestring = singleItem.split(chr(9)+&apos;[&apos;)[0].split(chr(9))[1] size = int(sizestring,16) filenumber = &apos;[&apos; + singleItem.split(chr(9)+&apos;[&apos;)[1].split(&apos;]&apos;)[0] + &apos;]&apos; fileList = fileSizeDic.get(filenumber) if type(fileList) != type(None): fileSize = fileList[3] fileList[3] = fileSize + size else: print singleItem print filenumber for item in fileNumberList: fileList = fileSizeDic[item] projectname = fileList[0] sdkname = fileList[1] size = fileList[3] name = &apos;&apos; if len(projectname) == 0: name = sdkname else: name = projectname if name not in projectNameList: projectNameList.append(name) objec = projectNameDic.get(name) if type(objec) == type(None): projectNameDic[name] = (size,1) else: (projectSize,count) = objec projectNameDic[name] = (size + projectSize,count + 1) return projectNameDicdef saveDataToMongo(): global projectNameList mc = MongoClient(&quot;localhost&quot;,27017) db = mc.classsize baseinfo = db.baseinfo sourceFileList = [&apos;JDMobile&apos;,&apos;Pods&apos;,&apos;CommunityTools&apos;,&apos;JRAssemblyUITools&apos;,&apos;JRBankCardModule&apos;,&apos;JRHomeChannel&apos;,&apos;RecognitionTools&apos;,&apos;MobileTopUpModule&apos;,&apos;ReactNative&apos;,&apos;TradeOrderModule&apos;,&apos;JRTemPlateTools&apos;,&apos;FinancingModule&apos;,&apos;JRWebViewTools&apos;,&apos;CrowdfundModule&apos;,&apos;JRBrickTools&apos;,&apos;IousModule&apos;,&apos;JROperateModule&apos;,&apos;JRContainerModule&apos;,&apos;JDWallet&apos;] sdkFileList = [&apos;BankCard&apos;,&apos;LDBraceletSDK&apos;,&apos;TencentMapSDK&apos;,&apos;TencentMapSDK_2D&apos;,&apos;JDTDRisk&apos;,&apos;TSMKit&apos;,&apos;JRDnsAks&apos;,&apos;JRStat&apos;,&apos;JDMA_v13&apos;,&apos;JDPayJR&apos;,&apos;LiveSDK&apos;,&apos;Stock&apos;,&apos;React&apos;,&apos;SingularitySDK&apos;,&apos;UMSocial_Sdk&apos;,&apos;SouFang&apos;,&apos;MTASDK&apos;,&apos;JDKPL&apos;,&apos;FireEye&apos;,&apos;JDJROCRSDK&apos;,&apos;OCR&apos;,&apos;JDCNSDK&apos;,&apos;YITUSDK&apos;,&apos;BUGLY&apos;,&apos;Apple&apos;] podFileList = [] appversion = &apos;&apos; plistPath = os.popen(&apos;find /Users/jdjr/Documents/Build/JRMobileAnalyse -name JDMobile-Info.plist&apos;).read().split(&apos;\n&apos;)[0] if os.path.exists(plistPath): plist = readPlist(plistPath) appversion = plist[&apos;CFBundleShortVersionString&apos;] print appversion time1 = time.time() text1 = open(&apos;/Users/jdjr/Documents/Build/JRMobileAnalyse/Build/Products/JDMobile-LinkMap-normal-arm64.txt&apos;).read() text2 = open(&apos;/Users/jdjr/Documents/Build/JRMobileAnalyse/Build/Products/JDMobile-LinkMap-normal-armv7.txt&apos;).read() projectDic1 = parItemText(text1) projectDic2 = parItemText(text2) totalCount = 0 totalSize = 0 podsize = 0 podscount = 0 dataSoureList = [] dataSdkList = [] for item in projectNameList: obj1 = projectDic1.get(item) obj2 = projectDic2.get(item) if type(obj1) == type(None): print item,0 else: (size1,count1) = obj1 (size2,count2) = obj2 totalCount = totalCount + count2 totalSize = totalSize + size1 + size2 if item in sourceFileList: dataSoureList.append((item,&apos;%.2fM&apos; % ((size1 + size2) / 1024.0 / 1024.0),&apos;%.2fK&apos; % ((size1 + size2) / 1024.0),size1 + size2,count2)) elif item in sdkFileList: dataSdkList.append((item,&apos;%.2fM&apos; % ((size1 + size2) / 1024.0 / 1024.0),&apos;%.2fK&apos; % ((size1 + size2) / 1024.0),size1 + size2,count2)) else: podsize = podsize + size1 + size2 podscount = podscount + count2 podString = &apos;Pods &apos; + &apos;%.2fM&apos; % (podsize / 1024.0 / 1024.0) + &apos;------&gt;&apos; + &apos;%.2fK&apos; % (podsize / 1024.0) + &apos; æ–‡ä»¶ä¸ªæ•°%d&apos; % podscount dataSoureList.append((&apos;Pods&apos;,&apos;%.2fM&apos; % (podsize / 1024.0 / 1024.0),&apos;%.2fK&apos; % (podsize / 1024.0),podsize,podscount)) print &apos;æ€»æ–‡ä»¶ä¸ªæ•°%d&apos; % totalCount print &apos;æ€»æ–‡ä»¶ä½“ç§¯%.2fM&apos; % (totalSize / 1024.0 / 1024.0) dataSoureList = sorted(dataSoureList, key=lambda sortItem: sortItem[3],reverse=True) dataSdkList = sorted(dataSdkList, key=lambda sortItem: sortItem[3],reverse=True) lastinfoDict = &#123;&#125; lastinfoDict[&apos;sorcedata&apos;] = dataSoureList lastinfoDict[&apos;sdkdata&apos;] = dataSdkList bds = baseinfo.find(&#123;&apos;appversion&apos;:appversion&#125;) bdscount = 0 for item in bds: bdscount = bdscount + 1 if bdscount &gt; 0 and len(dataSoureList) &gt; 0 and len(dataSdkList) &gt; 0: baseinfo.remove(&#123;&apos;appversion&apos;:appversion&#125;) baseinfo.save(&#123;&apos;appversion&apos;:appversion,&apos;lastinfo&apos;:lastinfoDict&#125;)def buildProject(branchName): os.chdir(&apos;/Users/jdjr/Documents/Build/JRMobileAnalyse&apos;) os.system(&apos;git add .&apos;) os.system(&apos;git checkout -f&apos;) os.system(&apos;git checkout &apos; + branchName) os.system(&apos;git pull origin &apos; + branchName) os.system(&apos;!wq&apos;) os.system(&apos;xcodebuild -workspace JDFinance.xcworkspace -scheme JDMobile -configuration Analyse clean&apos;) os.system(&apos;xcodebuild -workspace JDFinance.xcworkspace -scheme JDMobile -configuration Analyse build&apos;) saveDataToMongo()def findHistoryData(): mc = MongoClient(&quot;localhost&quot;,27017) db = mc.classsize baseinfo = db.baseinfo bds = baseinfo.find(&#123;&#125;).sort([(&apos;appversion&apos;, 1)]) ItemDataList = []#å› ä¸ºæˆ‘ä»¬çš„bdsç”¨ä¸€æ¬¡ä¹‹åŽå°±ä¼šé‡Šæ”¾ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠå®ƒä¿å­˜èµ·æ¥ count = 0 lastItem = &apos;&apos; TotalSize = [] for item in bds: count = count + 1 lastItem = item#èŽ·å¾—æœ€åŽä¸€ä¸ªç‰ˆæœ¬çš„æ•°æ®ï¼Œæˆ‘ä»¬ç”¨è¿™ä¸ªä½œä¸ºæ ‡å‡†æŽ’åºçš„é¡ºåº sdkList = item[&apos;lastinfo&apos;][&apos;sdkdata&apos;] sorceList = item[&apos;lastinfo&apos;][&apos;sorcedata&apos;] total = 0 for obj in sdkList: total = total + obj[3] for obj in sorceList: total = total + obj[3] TotalSize.append(total) ItemDataList.append(item)#ä¿å­˜bds if count == 0: print &apos;æ²¡æœ‰æ•°æ®&apos; sys.exit(1) showdataList = [] titlesdk = [&apos;sdkæ–‡ä»¶åå­—*ç‰ˆæœ¬&apos;] titlesource = [&apos;æºç æ–‡ä»¶åå­—*ç‰ˆæœ¬&apos;] sourcetitleList = [&apos;JDMobile&apos;,&apos;CommunityTools&apos;,&apos;JRAssemblyUITools&apos;,&apos;JRBankCardModule&apos;,&apos;JRHomeChannel&apos;,&apos;Pods&apos;,&apos;RecognitionTools&apos;,&apos;MobileTopUpModule&apos;,&apos;ReactNative&apos;,&apos;TradeOrderModule&apos;,&apos;JRTemPlateTools&apos;,&apos;FinancingModule&apos;,&apos;JRWebViewTools&apos;,&apos;CrowdfundModule&apos;,&apos;JRBrickTools&apos;,&apos;IousModule&apos;,&apos;JROperateModule&apos;,&apos;JRContainerModule&apos;,&apos;JDWallet&apos;] sdktitleList = [&apos;BankCard&apos;,&apos;LDBraceletSDK&apos;,&apos;TencentMapSDK&apos;,&apos;TencentMapSDK_2D&apos;,&apos;JDTDRisk&apos;,&apos;TSMKit&apos;,&apos;JRDnsAks&apos;,&apos;JRStat&apos;,&apos;JDMA_v13&apos;,&apos;JDPayJR&apos;,&apos;LiveSDK&apos;,&apos;Stock&apos;,&apos;React&apos;,&apos;SingularitySDK&apos;,&apos;UMSocial_Sdk&apos;,&apos;SouFang&apos;,&apos;MTASDK&apos;,&apos;JDKPL&apos;,&apos;FireEye&apos;,&apos;JDJROCRSDK&apos;,&apos;OCR&apos;,&apos;JDCNSDK&apos;,&apos;YITUSDK&apos;,&apos;BUGLY&apos;,&apos;Apple&apos;] # sdktitleList = []#sdkçš„åå­—é¡ºåº # sourcetitleList = []#æºç æ–‡ä»¶çš„åå­—é¡ºåº sdkitemList = lastItem[&apos;lastinfo&apos;][&apos;sdkdata&apos;] sourceitemList = lastItem[&apos;lastinfo&apos;][&apos;sorcedata&apos;] # for titleItem in sdkitemList: # sdktitleList.append(titleItem[0]) # for titleItem in sourceitemList: # sourcetitleList.append(titleItem[0]) for item in ItemDataList: version = item[&apos;appversion&apos;] titlesdk.append(version) titlesource.append(version) x = PrettyTable(titlesdk) y = PrettyTable(titlesource) for title in sdktitleList: rowList = [title] for item in ItemDataList: sdkDataList = item[&apos;lastinfo&apos;][&apos;sdkdata&apos;] hasAdd = False for data in sdkDataList: if data[0] == title: dataString = data[1].encode(&quot;utf-8&quot;) + &apos; &apos; + data[2].encode(&quot;utf-8&quot;) + &apos; &apos; + &apos;%d&apos; % data[4] rowList.append(dataString) hasAdd = True if hasAdd == False: rowList.append(&apos;Nan&apos;) x.add_row(rowList) for title in sourcetitleList: rowList = [title] for item in ItemDataList: sourceDataList = item[&apos;lastinfo&apos;][&apos;sorcedata&apos;] hasAdd = False for data in sourceDataList: if data[0] == title: dataString = data[1].encode(&quot;utf-8&quot;) + &apos; &apos; + data[2].encode(&quot;utf-8&quot;) + &apos; &apos; + &apos;%d&apos; % data[4] rowList.append(dataString) hasAdd = True if hasAdd == False: rowList.append(&apos;Nan&apos;) y.add_row(rowList) print y print x print array(TotalSize)/1024.0/1024.0,&apos;M&apos;command = sys.argv[1]argv1 = &apos;&apos;argv2 = &apos;&apos;argv3 = &apos;&apos;argv4 = &apos;&apos;if (len(sys.argv) &gt;= 3): argv1 = sys.argv[2]if (len(sys.argv) &gt;= 4): argv2 = sys.argv[3]if command == &apos;--h&apos;: print &apos;jdjr analyse branchname åˆ†æžæŸä¸ªåˆ†æ”¯&apos; print &apos;jdjr history æŸ¥çœ‹åŽ†å²æ•°æ®&apos;elif command == &apos;analyse&apos;: if len(argv1) == 0: print &apos;è¯·è¾“å…¥åˆ†æ”¯åç§°&apos; else: buildProject(argv1) findHistoryData()elif command == &apos;history&apos;: findHistoryData()elif command == &apos;analyseCommon&apos;: saveDataToMongo()else: print &apos;jdjr analyse branchname åˆ†æžæŸä¸ªåˆ†æ”¯&apos; print &apos;jdjr history æŸ¥çœ‹åŽ†å²æ•°æ®&apos;# buildProject()# saveDataToMongo()]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç§»åŠ¨ç«¯å›¾ç‰‡éšå†™æœ¯çš„å®žçŽ°æ€è·¯]]></title>
    <url>%2F2018%2F04%2F17%2F%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%9B%BE%E7%89%87%E9%9A%90%E5%86%99%E6%9C%AF%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF%2F</url>
    <content type="text"><![CDATA[JPEGåŽ‹ç¼©ç®—æ³•ç†è§£å‚è€ƒ https://thecodeway.com/blog/?p=69 é¦–å…ˆè¿™æ˜¯ä¸€ç§æœ‰æŸçš„ä¿¡æ¯åŽ‹ç¼©æ–¹å¼ï¼ŒåŽ‹ç¼©çš„æ ¸å¿ƒåŽŸç†æ˜¯ï¼Œå°†ä¿¡æ¯åˆ†ä¸ºé‡è¦å’Œä¸é‡è¦ï¼Œç„¶åŽèˆå¼ƒæŽ‰ä¸é‡è¦çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†ä¼šé€šè¿‡ä¸¤éƒ¨ä¿¡æ¯åŒºåˆ†æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œç¬¬ä¸€ä¸ªæ˜¯RGBè½¬YCbCrï¼Œç¬¬äºŒä¸ªæ˜¯DCTè½¬åŒ–å’Œé‡åŒ–ï¼Œè¿™ä¸¤æ­¥æ¯ä¸€æ­¥éƒ½æ˜¯æœ‰ä¿¡æ¯æŸè€—ï¼Œéƒ½æ˜¯ä¸å¯é€†çš„ï¼Œè€Œå“ˆå¤«æ›¼ç¼–ç å’ŒåŽ‹ç¼©æ˜¯å¯é€†çš„ï¼Œè¦æ·±åˆ»çš„ç†è§£è¿™äº›ä¸ªç‚¹ã€‚ å›¾ç‰‡ä¼šä»¥ä¸åŒçš„æ•°æ®æ ¼å¼å­˜åœ¨äºŽä¸åŒçš„æ—¶åˆ»ï¼Œåœ¨å±å¹•ä¸­æ˜¾ç¤ºçš„æ—¶å€™è‚¯å®šæ˜¯RGBæ ¼å¼ï¼Œåœ¨å­˜å‚¨çš„æ—¶å€™å´ä¸æ˜¯ï¼Œæ˜¯ç»è¿‡ç¼–ç å’ŒåŽ‹ç¼©ä¹‹åŽçš„æ•°æ® ç¬¬ä¸€æ­¥ï¼Œæ¯ä¸€ä¸ªç‚¹éƒ½æ˜¯ç”±RBGä¸‰ä¸ªå€¼ç»„æˆï¼Œåœ¨ç§»åŠ¨ç«¯æ˜¯å››ä¸ªå€¼RGBAï¼Œæ¯ä¸ªå€¼åˆç”±8ä½æ¥å­˜å‚¨ï¼Œæ‰€ä»¥æ¯ä¸ªé¢œè‰²å†…å­˜ä¸­éœ€è¦32ä½æ¥å­˜å‚¨ï¼Œæˆ‘ä»¬åœ¨åŽ‹ç¼©å¤„ç†å›¾ç‰‡çš„æ—¶å€™å¹¶ä¸æ˜¯ä¸€ä¸ªç‚¹ä¸€ä¸ªç‚¹çš„å¤„ç†ï¼Œè¿™æ ·æ•ˆçŽ‡å¾ˆä½Žï¼Œæˆ‘ä»¬æ˜¯64ä¸ªç‚¹ä½œä¸ºä¸€ä¸ªå•å…ƒåŽ»å¤„ç†ï¼Œ8x8çš„çŸ©é˜µ é¢œè‰²ç©ºé—´è½¬æ¢RGB-&gt;YCbCr çœ‹ä¸€ä¸‹RGBå’ŒYCbCrç›¸äº’è½¬åŒ–çš„c++ä»£ç  1234567891011121314151617181920212223242526272829303132float computeY(float red,float green,float blue) &#123; float Y = 0.299 * red + 0.587 * green + 0.114 * blue; return float(roundfunc(Y));&#125;float computeCr(float red,float green,float blue) &#123; float Cr = 0.500 * red - 0.419 * green - 0.081 * blue; Cr = Cr + 128.0; return float(roundfunc(Cr));&#125;float computeCb(float red,float green,float blue) &#123; float Cb = 0.500 * blue - 0.169 * red - 0.331 * green; Cb = Cb + 128.0; return float(roundfunc(Cb));&#125;int16_t computeR(float Y,float Cb,float Cr) &#123; float R = 1.000 * Y + 0.000 * (Cb - 128) + 1.400 * (Cr - 128); R = int16_t(roundfunc(R)); return int16_t(roundfunc(R));&#125;int16_t computeG(float Y,float Cb,float Cr) &#123; float G = 1.000 * Y - 0.343 * (Cb - 128) - 0.711 * (Cr - 128); return int16_t(roundfunc(G));&#125;int16_t computeB(float Y,float Cb,float Cr) &#123; float B = 1.000 * Y + 1.765 * (Cb - 128) + 0.000 * (Cr - 128); return int16_t(roundfunc(B));&#125; pythonä»£ç  12BGRè½¬åŒ–imgYCC = cv2.cvtColor(img, cv2.COLOR_BGR2YCR_CB) DCTå˜æ¢ï¼Œè¿™é‡Œè½¬åŒ–çš„YCbCræ•°æ®ï¼Œä½†æ˜¯è‚¯å®šæ˜¯é€‰æ‹©ä¸€ä¸ªé€šé“ï¼Œä¸å¯èƒ½å…¨éƒ½è½¬æ¢ä¸€éï¼Œä¸è¿‡éƒ½è½¬åŒ–ä¹Ÿæ²¡å•¥é—®é¢˜ï¼Œè¿™æ ·æˆ‘ä»¬ä¿¡æ¯å®¹é‡ä¼šæ›´å¤§ DCTé‡åŒ–ï¼Œé‡åŒ–çš„ç†è§£æ˜¯æœ€å¤§é™åº¦çš„åŽ»å¤„ä¸é‡è¦çš„ä¿¡æ¯ï¼Œæ‰€ä»¥è¿™ä¸ªé‡åŒ–è¡¨æœ¬è´¨æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯æŽ¨èå®˜æ–¹çš„æ ‡å‡†é‡åŒ–è¡¨ å“ˆå¼—æ›¼ç¼–ç å’ŒåŽ‹ç¼© JPEGè½½å…¥ä¿¡æ¯æ–¹æ³•ç†è§£æ–¹æ³•æœ‰ä¸¤ç§ï¼Œç¬¬ä¸€ç§æ˜¯ç›´æŽ¥åœ¨RGBä¿¡æ¯ä¸­å­˜å…¥ä¿¡æ¯ï¼Œç¬¬äºŒç§æ˜¯åœ¨DCTä¿¡æ¯ä¸­åŠ å…¥ä¿¡æ¯ï¼Œä¸‹è¾¹æ¥åˆ†åˆ«åˆ†æžã€‚ åœ¨RGBä¸­ç›´æŽ¥éšè—ä¿¡æ¯è¿™ç§åšæ³•æ˜¯åŸºäºŽLBSï¼Œæ›´æ”¹ä¿¡æ¯çš„æœ€ä½Žæœ‰æ•ˆä½ï¼Œé¦–å…ˆä¸ä¼šæ›´æ”¹äººçœ¼å¯åˆ†åˆ«çš„å›¾ç‰‡è®¤çŸ¥ï¼Œå› ä¸ºé¢œè‰²æ”¹å˜æžå°ï¼Œä½†æ˜¯å¦‚æžœæ˜¯jpegæ–‡ä»¶ï¼Œå­˜å‚¨å†è¯»å–ä½ å†™å…¥çš„ä¿¡æ¯å°±ä¼šé”™ä¹±ï¼Œå°±æ˜¯å› ä¸ºè¿™æ˜¯ä¸€ç§æœ‰æŸåŽ‹ç¼©ï¼Œä½ æŠŠRedå€¼æ”¹æˆäº†220ï¼Œç­‰ä½ å­˜å‚¨æŸå¤±ä¹‹åŽï¼Œå†è¯»å–å¯èƒ½å°±å˜æˆäº†119ï¼Œæ€»ä¹‹å°±æ˜¯è¿™ä¸ªå€¼ä¸é è°±ã€‚ åŸºäºŽDCTçš„éšè—DCTçš„ä¿¡æ¯æ˜¯æ¯”è¾ƒç¨³å®šçš„ï¼Œä½†æ˜¯ä»ç„¶ä¼šæœ‰å˜åŒ–çš„æƒ…å†µï¼Œè¿™æ˜¯å› ä¸ºå›¾åƒå­˜åœ¨æžå€¼ï¼Œæ¯”å¦‚ä¸€ä¸ª255çš„è‰²å€¼ï¼Œä½ è—ä¿¡æ¯çš„æ—¶å€™å¢žåŠ äº†è¿™ä¸ªå€¼ï¼Œä½†æ˜¯è¿”å›žå›žæ¥ä¹‹åŽè®¡ç®—çš„å€¼æ˜¯256ï¼Œä½†æ˜¯è¿™ä¸ªå€¼æ˜¯æ— æ•ˆçš„ï¼Œé‚£ä¹ˆä½ æ€Žä¹ˆå¤„ç†å°±å¾ˆé‡è¦äº†ï¼Œä½ å¦‚æžœç›´æŽ¥å°†å…¶çº¦ä¸º255ï¼Œé‚£ä¹ˆä½ çš„æ•°æ®å°†ä¼šé”™ä¹±ï¼Œå¦‚æžœä½ ä¸é‡‡å–è¿™æ ·çš„ç‚¹ï¼Œé‚£ä¹ˆç›²æå–ä½ ä»ç„¶ä¼šé”™ä¹±ï¼Œå› ä¸ºå¦‚æžœä½ çš„åˆ¤æ–­æ ‡å‡†æ˜¯ï¼Œè¿™ä¸ªå€¼ä¸èƒ½æ˜¯255ï¼Œä½ å†™çš„æ—¶å€™ä¸æ˜¯ï¼Œæ›´æ”¹ä¹‹åŽè¯»çš„æ—¶å€™å¯èƒ½å°±æ˜¯äº†ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§ä¸ç¨³å®šçš„å¤„ç†æ–¹æ³•ã€‚ è§£å†³åŠžæ³•å°±æ˜¯å°†éšè—ä¿¡æ¯çš„å¤„ç†æ‰©å¼ æ”¹ä¸ºæ”¶ç¼©ï¼Œè¿™æ ·å³ä½¿é‡åˆ°æžå€¼æƒ…å†µï¼Œä»ç„¶ä¸ä¼šè¢«è£å‡ï¼Œå°±è¿™æ ·è½»æ¾ç»•è¿‡è¿™ä¸ªé—®é¢˜ï¼ŒåŒæ—¶é…åˆå››èˆäº”å…¥çš„è§„åˆ™æ›¿æ¢ä¸ºé€€ä¸€çš„æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬èƒ½å¤Ÿä¿è¯æ‰€æœ‰çš„æ•°æ®æ˜¯ç¼©å‡çš„ï¼Œè¿™æ ·è‚¯å®šä¸ä¼šè§¦ç¢°é‚£ä¸ªä¸´ç•Œäº†ï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬å¦‚æžœä¸è€ƒè™‘åæ£€æµ‹çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å¤§æ–¹çš„å°†ä¿¡æ¯å†™åœ¨DCæ•°æ®ä¸Šã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[Seabornæ•°æ®å±•ç¤ºå…¥é—¨]]></title>
    <url>%2F2018%2F03%2F21%2F2018%2FSeaborn%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[éƒ½æœ‰ä»€ä¹ˆç±»åž‹çš„å›¾ éƒ½èƒ½åšå“ªå‡ ç§åˆ†æž Seabornæœ‰äº”ä¸ªé¢„è®¾å¥½çš„ä¸»é¢˜ï¼šdarkgrid, whitegrid, dark, white,å’Œticks distplot() kdeplot()distplot()ä¸ºhiståŠ å¼ºç‰ˆï¼Œkdeplot()ä¸ºå¯†åº¦æ›²çº¿å›¾ ç®±åž‹å›¾ boxplot()è”åˆåˆ†å¸ƒjointplot()çƒ­ç‚¹å›¾heatmap()Histogramsç›´æ–¹å›¾Kernel density estimatonæ ¸å¯†åº¦ä¼°è®¡]]></content>
      <tags>
        <tag>python</tag>
        <tag>æ•°æ®æŒ–æŽ˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonçš„æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨]]></title>
    <url>%2F2018%2F03%2F20%2F2018%2Fpython%E7%9A%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œå¦‚æžœç›´æŽ¥ç»™å‡ºå­—ç¬¦ï¼Œå°±æ˜¯ç²¾ç¡®åŒ¹é…ã€‚ç”¨\då¯ä»¥åŒ¹é…ä¸€ä¸ªæ•°å­—ï¼Œ\wå¯ä»¥åŒ¹é…ä¸€ä¸ªå­—æ¯æˆ–æ•°å­—ï¼Œæ‰€ä»¥ï¼š â€˜00\dâ€™å¯ä»¥åŒ¹é…â€™007â€™ï¼Œä½†æ— æ³•åŒ¹é…â€™00Aâ€™ï¼› â€˜\d\d\dâ€™å¯ä»¥åŒ¹é…â€™010â€™ï¼› â€˜\w\w\dâ€™å¯ä»¥åŒ¹é…â€™py3â€™ï¼› .å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦ï¼Œæ‰€ä»¥ï¼šâ€™py.â€™å¯ä»¥åŒ¹é…â€™pycâ€™ã€â€™pyoâ€™ã€â€™py!â€™ç­‰ç­‰ã€‚ è¦åŒ¹é…å˜é•¿çš„å­—ç¬¦ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œç”¨*è¡¨ç¤ºä»»æ„ä¸ªå­—ç¬¦ï¼ˆåŒ…æ‹¬0ä¸ªï¼‰ï¼Œç”¨+è¡¨ç¤ºè‡³å°‘ä¸€ä¸ªå­—ç¬¦ï¼Œç”¨?è¡¨ç¤º0ä¸ªæˆ–1ä¸ªå­—ç¬¦ï¼Œç”¨{n}è¡¨ç¤ºnä¸ªå­—ç¬¦ï¼Œç”¨{n,m}è¡¨ç¤ºn-mä¸ªå­—ç¬¦ï¼š 123456789101112131415æ¥çœ‹ä¸€ä¸ªå¤æ‚çš„ä¾‹å­ï¼š\d&#123;3&#125;\s+\d&#123;3,8&#125;ã€‚æˆ‘ä»¬æ¥ä»Žå·¦åˆ°å³è§£è¯»ä¸€ä¸‹ï¼š\d&#123;3&#125;è¡¨ç¤ºåŒ¹é…3ä¸ªæ•°å­—ï¼Œä¾‹å¦‚&apos;010&apos;ï¼›\så¯ä»¥åŒ¹é…ä¸€ä¸ªç©ºæ ¼ï¼ˆä¹ŸåŒ…æ‹¬Tabç­‰ç©ºç™½ç¬¦ï¼‰ï¼Œæ‰€ä»¥\s+è¡¨ç¤ºè‡³å°‘æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œä¾‹å¦‚åŒ¹é…&apos; &apos;ï¼Œ&apos; &apos;ç­‰ï¼›\d&#123;3,8&#125;è¡¨ç¤º3-8ä¸ªæ•°å­—ï¼Œä¾‹å¦‚&apos;1234567&apos;ã€‚ç»¼åˆèµ·æ¥ï¼Œä¸Šé¢çš„æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥åŒ¹é…ä»¥ä»»æ„ä¸ªç©ºæ ¼éš”å¼€çš„å¸¦åŒºå·çš„ç”µè¯å·ç ã€‚å¦‚æžœè¦åŒ¹é…&apos;010-12345&apos;è¿™æ ·çš„å·ç å‘¢ï¼Ÿç”±äºŽ&apos;-&apos;æ˜¯ç‰¹æ®Šå­—ç¬¦ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œè¦ç”¨&apos;\&apos;è½¬ä¹‰ï¼Œæ‰€ä»¥ï¼Œä¸Šé¢çš„æ­£åˆ™æ˜¯\d&#123;3&#125;\-\d&#123;3,8&#125;ã€‚ä½†æ˜¯ï¼Œä»ç„¶æ— æ³•åŒ¹é…&apos;010 - 12345&apos;ï¼Œå› ä¸ºå¸¦æœ‰ç©ºæ ¼ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›´å¤æ‚çš„åŒ¹é…æ–¹å¼ã€‚ è¿›é˜¶è¦åšæ›´ç²¾ç¡®åœ°åŒ¹é…ï¼Œå¯ä»¥ç”¨[]è¡¨ç¤ºèŒƒå›´ï¼Œæ¯”å¦‚ï¼š [0-9a-zA-Z_]å¯ä»¥åŒ¹é…ä¸€ä¸ªæ•°å­—ã€å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ï¼› [0-9a-zA-Z_]+å¯ä»¥åŒ¹é…è‡³å°‘ç”±ä¸€ä¸ªæ•°å­—ã€å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚â€™a100â€™ï¼Œâ€™0_Zâ€™ï¼Œâ€™Py3000â€™ç­‰ç­‰ï¼› [a-zA-Z_][0-9a-zA-Z_]*å¯ä»¥åŒ¹é…ç”±å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å¤´ï¼ŒåŽæŽ¥ä»»æ„ä¸ªç”±ä¸€ä¸ªæ•°å­—ã€å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯Pythonåˆæ³•çš„å˜é‡ï¼› [a-zA-Z_][0-9a-zA-Z_]{0, 19}æ›´ç²¾ç¡®åœ°é™åˆ¶äº†å˜é‡çš„é•¿åº¦æ˜¯1-20ä¸ªå­—ç¬¦ï¼ˆå‰é¢1ä¸ªå­—ç¬¦+åŽé¢æœ€å¤š19ä¸ªå­—ç¬¦ï¼‰ã€‚ A|Bå¯ä»¥åŒ¹é…Aæˆ–Bï¼Œæ‰€ä»¥(P|p)ythonå¯ä»¥åŒ¹é…â€™Pythonâ€™æˆ–è€…â€™pythonâ€™ã€‚ ^è¡¨ç¤ºè¡Œçš„å¼€å¤´ï¼Œ^\dè¡¨ç¤ºå¿…é¡»ä»¥æ•°å­—å¼€å¤´ã€‚ $è¡¨ç¤ºè¡Œçš„ç»“æŸï¼Œ\d$è¡¨ç¤ºå¿…é¡»ä»¥æ•°å­—ç»“æŸã€‚ ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œpyä¹Ÿå¯ä»¥åŒ¹é…â€™pythonâ€™ï¼Œä½†æ˜¯åŠ ä¸Š^py$å°±å˜æˆäº†æ•´è¡ŒåŒ¹é…ï¼Œå°±åªèƒ½åŒ¹é…â€™pyâ€™äº†ã€‚ pythonä¸­çš„æ­£åˆ™123456789101112131415import redef handlere(rematchs, inputString): for match in rematchs: matchout = match.findall(inputString) for item in matchout: if type(item) == type((1, 2, 3)): inputString = inputString.replace(item[0], &apos;&apos;) else: inputString = inputString.replace(item, &apos;&apos;) return inputString matchs = [re.compile(u&apos;å‘¨[ä¸€äºŒä¸‰å››äº”å…­æ—¥]&apos;),re.compile(r&apos;(\d&#123;1,2&#125;\:\d&#123;1,2&#125;)&apos;), re.compile(r&apos;(\d&#123;4&#125;(\.|\-|\/)\d&#123;1,2&#125;(\.|\-|\/)\d&#123;1,2&#125;)&apos;)] comment = handlere(matchs, comment)]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[skleanrnæ–‡æœ¬åˆ†ç±»ä»£ç è®°å½•]]></title>
    <url>%2F2018%2F03%2F19%2F2018%2Fskleanrn%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[æ–‡æœ¬åˆ†ç±»æ¨¡åž‹ä»¥åŠä½¿ç”¨ä»£ç è®°å½• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500import os,re import sys,jiebaimport codecs,timeimport shutilimport numpy as npimport pandas as pdimport matplotlibimport scipy,json,pinyinfrom sklearn.externals import joblibfrom sklearn.svm import SVCimport matplotlib.pyplot as pltfrom sklearn.naive_bayes import MultinomialNB from sklearn.naive_bayes import GaussianNBfrom sklearn.linear_model import Perceptronfrom sklearn.model_selection import train_test_splitfrom sklearn import feature_extraction from sklearn.feature_extraction.text import TfidfTransformer from sklearn.feature_extraction.text import CountVectorizerfrom sklearn.feature_extraction.text import HashingVectorizer from pandas import DataFrame import enchantcheckeng = enchant.Dict(&quot;en_US&quot;) reload(sys) # Python2.5 åˆå§‹åŒ–åŽä¼šåˆ é™¤ sys.setdefaultencoding è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è½½å…¥ sys.setdefaultencoding(&apos;utf-8&apos;) jieba.load_userdict(&apos;customdict.txt&apos;)stopwords = open(&apos;stopwords.txt&apos;,&apos;r&apos;).read().split(&apos;\n&apos;)stopwordsadv = open(&apos;stopwordsadv.txt&apos;,&apos;r&apos;).read().split(&apos;\n&apos;)stopwords = open(&apos;teststopwords.txt&apos;,&apos;r&apos;).read().split(&apos;\n&apos;) + stopwords + stopwordsadvdef handleadvkeywords(inputString): if hasNumbers(inputString) == False: return inputString pinyinlist = [] for char in inputString: pin = pinyin.get(char, format=&apos;strip&apos;, delimiter=&quot;&quot;) pinyinlist.append(pin) setp = 2 indexwei = 100 indexxin = 200 indexjia = 300 indexhao = 400 indexxing = 500 indexkou = 600 if &apos;wei&apos; in pinyinlist: indexwei = pinyinlist.index(&apos;wei&apos;) if &apos;v&apos; in pinyinlist: indexwei = pinyinlist.index(&apos;v&apos;) if &apos;xin&apos; in pinyinlist: indexxin = pinyinlist.index(&apos;xin&apos;) if &apos;xing&apos; in pinyinlist: indexxin = pinyinlist.index(&apos;xing&apos;) if &apos;hao&apos; in pinyinlist: indexhao = pinyinlist.index(&apos;hao&apos;) if &apos;jia&apos; in pinyinlist: indexjia = pinyinlist.index(&apos;jia&apos;) if &apos;zhao&apos; in pinyinlist: indexjia = pinyinlist.index(&apos;zhao&apos;) if abs(indexxin - indexwei) &lt; setp: inputString = u&apos;å¾®ä¿¡&apos; + inputString if abs(indexhao - indexwei) &lt; setp: inputString = u&apos;å¾®å·&apos; + inputString if abs(indexwei - indexjia) &lt; setp: inputString = u&apos;åŠ å¾®&apos; + inputString # if indexwei - indexjia &lt;= 2:# inputString = &apos;åŠ å¾®&apos; + inputString if abs(indexxing - indexwei) &lt; setp: inputString = u&apos;å¾®ä¿¡&apos; + inputString if pinyinlist.count(&apos;kou&apos;) &gt;= 2: inputString = &apos;qq&apos; + inputString if abs(indexkou - indexjia) &lt; setp: inputString = u&apos;qq&apos; + inputString if &apos;åŠ å¾®å¾®&apos; in inputString: inputString = inputString.replace(&apos;åŠ å¾®å¾®&apos;,&apos;åŠ å¾®&apos;) return inputString def getwordcount(inputString): df = pd.read_excel(&apos;lowfrequency.xls&apos;) negkeydicstring = open(&apos;negkeydic.json&apos;,&apos;r&apos;).read() negkeydic = json.loads(negkeydicstring) count = 0 countdic = negkeydic.get(inputString) if type(countdic) != type(None): count = countdic[1] print df[df[&apos;name&apos;] == inputString],countdef cos_sim(vector_a, vector_b): &quot;&quot;&quot; è®¡ç®—ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦ :param vector_a: å‘é‡ a :param vector_b: å‘é‡ b :return: sim &quot;&quot;&quot; vector_a = np.mat(vector_a) vector_b = np.mat(vector_b) num = float(vector_a * vector_b.T) denom = np.linalg.norm(vector_a) * np.linalg.norm(vector_b) cos = num / denom sim = 0.5 + 0.5 * cos return simdef hasNumbers(inputString): return any(char.isdigit() for char in inputString) def replacenum(inputString): replaceDic = &#123;&apos;yi&apos;:&apos;1&apos;,&apos;yao&apos;:&apos;1&apos;,&apos;er&apos;:&apos;2&apos;,&apos;san&apos;:&apos;3&apos;,&apos;si&apos;:&apos;4&apos;,&apos;wu&apos;:&apos;5&apos;,&apos;liu&apos;:&apos;6&apos;,&apos;qi&apos;:&apos;7&apos;,&apos;ba&apos;:&apos;8&apos;,&apos;jiu&apos;:&apos;9&apos;,&apos;ling&apos;:&apos;0&apos;&#125;# .replace(u&apos;è…°&apos;,&apos;1&apos;).replace(u&apos;ä¸€&apos;,&apos;1&apos;).replace(u&apos;äºŒ&apos;,&apos;2&apos;).replace(u&apos;ä¸‰&apos;,&apos;3&apos;).replace(u&apos;æ–¯&apos;,&apos;4&apos;).replace(u&apos;å››&apos;,&apos;4&apos;).replace(u&apos;äº”&apos;,&apos;5&apos;).replace(u&apos;å…­&apos;,&apos;6&apos;).replace(u&apos;é½&apos;,&apos;7&apos;).replace(u&apos;ä¸ƒ&apos;,&apos;7&apos;).replace(u&apos;æ‰’&apos;,&apos;8&apos;).replace(u&apos;å…«&apos;,&apos;8&apos;).replace(u&apos;ä¹&apos;,&apos;9&apos;).replace(u&apos;é›¶&apos;,&apos;0&apos;) returnString = &apos;&apos; if len(inputString) &lt;= 2: for item in inputString: pin = pinyin.get(item, format=&apos;strip&apos;, delimiter=&quot;&quot;) output = replaceDic.get(pin) if type(output) == type(&apos;1&apos;): returnString = returnString + output if returnString == &apos;&apos; or len(returnString) &lt; len(inputString): returnString = inputString return returnString def handlenum(inputString): if inputString.count(&apos;0&apos;) &gt;= 2: inputString = inputString.replace(&apos;0&apos;,&apos;&apos;) if hasNumbers(inputString): s = re.findall(&quot;\d+&quot;,inputString) for item in s: if len(item) == 11: inputString = inputString.replace(item,&apos;äž„&apos;) #ç”µè¯ else: if len(inputString.replace(&apos;0&apos;,&apos;&apos;).replace(&apos;g&apos;,&apos;&apos;)) &gt;= 5 and inputString[-1] != &apos;0&apos;: if &apos;988511&apos; in inputString: inputString = &apos;äº¬ä¸œ&apos; else: if len(item) &gt;= 2: inputString = inputString.replace(item,&apos;è—¨&apos;) #qqå¾®ä¿¡ä¹‹ç±»çš„ else: inputString = inputString.replace(item,&apos;&apos;) outList = jieba.lcut(inputString) if &apos;&apos; in outList: outList.remove(&apos;&apos;) if &apos; &apos; in outList: outList.remove(&apos; &apos;) outListNew = [] for item in outList: if (&apos;äž„&apos; in item) or (&apos;è—¨&apos; in item) or (&apos;äº¬ä¸œ&apos; in item): outListNew.append(item) else: if hasNumbers(item) == False: if checkeng.check(item): outListNew.append(&apos;isenglish&apos;) else: outListNew.append(item) return outListNew if inputString.isalpha() == True and len(inputString) &gt; 5:#å¦‚æžœæ˜¯çº¯è‹±æ–‡ï¼Œå¹¶ä¸”è‹±æ–‡é•¿åº¦å¤§äºŽ5 if &apos;jd&apos; in inputString: inputString = &apos;äº¬ä¸œ&apos; else: if checkeng.check(inputString): inputString = &apos;isallenglish&apos; return [inputString]def translate(comment): testline = re.sub(u&quot;[\s+\.\!\/_,$%^*(+\&quot;\&apos;]+|[+â€”â€”ï¼ï¼Œï¼ã€‚ï¼Ÿã€~@#ï¿¥%â€¦â€¦&amp;*ï¼ˆï¼‰]+&quot;, &apos;&apos;, comment) testline = testline.replace(u&apos;[&apos;,&apos;&apos;).replace(u&apos;ä¸¨&apos;,&apos;&apos;).replace(chr(32),&apos;&apos;).replace(u&apos;ï¼&apos;, u&apos;&apos;).replace(u&apos;ï¼Œ&apos;, u&apos;&apos;).replace(u&apos;ã€‚&apos;, u&apos;&apos;).replace(u&apos;\n&apos;, u&apos;&apos;).replace(u&apos;\t&apos;, u&apos;&apos;).replace( u&apos;?&apos;, u&apos;&apos;).replace(u&apos;ã€&apos;,&apos;&apos;).replace(u&apos;o&apos;,&apos;&apos;).replace(u&apos;O&apos;,&apos;&apos;).replace(u&apos;ä¸¶&apos;,&apos;&apos;).replace(u&apos;â€˜&apos;,&apos;&apos;).replace(&apos;:&apos;,&apos;&apos;).replace(u&apos;ï¼š&apos;,&apos;&apos;).replace(&apos;(&apos;,&apos;&apos;).replace(&apos;)&apos;,&apos;&apos;).replace(&apos;&#123;&apos;,&apos;&apos;).replace(&apos;&#125;&apos;,&apos;&apos;).replace(u&apos;ï¼Ÿ&apos;, u&apos;&apos;).replace(u&apos;-&apos;,&apos;&apos;) if &apos;å±é™©æ€§&apos; in testline: testline = testline.replace(&apos;å±é™©æ€§&apos;,&apos;&apos;) if &apos;2018&apos; in testline: testline = testline.replace(&apos;2018&apos;,&apos;&apos;) if &apos;è¡Œä¸º&apos; in testline: testline = testline.replace(&apos;è¡Œä¸º&apos;,&apos;&apos;) if &apos;vivox&apos; in testline: testline = testline.replace(&apos;vivox&apos;,&apos;&apos;) if &apos;è¶Šæ¥è¶Šæ‰£&apos; in testline: testline = testline.replace(&apos;è¶Šæ¥è¶Šæ‰£&apos;,&apos;&apos;) if &apos;weixin&apos; in testline: testline = testline.replace(&apos;weixin&apos;, &apos;å¾®ä¿¡&apos;) if &apos;vxin&apos; in testline: testline = testline.replace(&apos;vxin&apos;,&apos;å¾®ä¿¡&apos;) if &apos;wxin&apos; in testline: testline = testline.replace(&apos;wxin&apos;,&apos;å¾®ä¿¡&apos;) testline = testline.lower() return testline def changeToWords(sentence): global stopwords out = translate(sentence) out = handleadvkeywords(out) jiebalistnew = [] jiebalist = jieba.lcut(out) forcut = &apos;&apos; for item in jiebalist: item = replacenum(item) forcut = forcut + item jiebalist = jieba.lcut(forcut) for item in jiebalist: if item not in stopwords: jiebalistnew = jiebalistnew + handlenum(item) if &apos;&apos; in jiebalistnew: jiebalistnew.remove(&apos;&apos;) if &apos; &apos; in jiebalistnew: jiebalistnew.remove(&apos; &apos;) string = &apos; &apos;.join(jiebalistnew) print string return stringdef getkeywords(corpus): #åº”è¯¥æ˜¯è®¡ç®—æ¯ä¸ªè¯ä¸ªæ•°é™¤ä»¥æˆ‘è¿™ä¸ªé˜µè¥çš„è¯æ€»æ•°ï¼Œå€’æ•°ï¼Œè¿™æ ·æ¥è¡¡é‡å çš„æ¯”é‡ï¼Œå¦‚æžœä¸¤è€…æ¯”é‡æŽ¥è¿‘ï¼Œé‚£ä¹ˆæ— æ„ä¹‰ corpus = map(changeToWords,corpus) vectorizer = CountVectorizer(token_pattern=u&apos;(?u)\w+&apos;) X = vectorizer.fit_transform(corpus) names = vectorizer.get_feature_names() count = X.toarray().sum(axis=0) dictn = &#123;&#125; values = vectorizer.vocabulary_.values() sum = np.array(values).sum() for i in range(len(names)): key = names[i] value = sum * 1.0 / count[i] valuenew = count[i] dictn[key] = (value,valuenew) return dictndef getcompare(cols1,cols2):#æ¯”è¾ƒä¸¤è¾¹çš„å æ¯”æƒ…å†µ coldic1 = getkeywords(cols1) coldic2 = getkeywords(cols2) negkeydicstring = json.dumps(coldic1) f = open(&apos;negkeydic.json&apos;,&apos;w&apos;) f.write(negkeydicstring) f.close() listn = sorted(coldic1.items(), key=lambda d: d[1][0], reverse=True) returnList = [] for item in listn: name = item[0] count = coldic1.get(name)[0] if name in coldic2.keys(): count1 = coldic2.get(name)[0] ratio = count * 1.0 / count1 if ratio &gt; 0.7 and ratio &lt; 1.5: returnList.append(name) countppos = coldic2.get(name)[1] countpneg = coldic1.get(name)[1] if countppos * 1.0 / countpneg &gt; 3: returnList.append(name) return returnList def trainmodel(): ######################################################################### # ç¬¬ä¸€æ­¥ è®¡ç®—TFIDF #æ–‡æ¡£é¢„æ–™ ç©ºæ ¼è¿žæŽ¥ corpus = [] global stopwords #è¯»å–é¢„æ–™ ä¸€è¡Œé¢„æ–™ä¸ºä¸€ä¸ªæ–‡æ¡£ neg = pd.read_excel(&apos;adver.xls&apos;) negcontents = neg[&apos;content&apos;].dropna() negcorpus = list(negcontents) negcorpus = map(changeToWords,negcorpus) #è¯»å–é¢„æ–™ ä¸€è¡Œé¢„æ–™ä¸ºä¸€ä¸ªæ–‡æ¡£ pos = pd.read_excel(&apos;notadver.xls&apos;) poscontents = pos[&apos;content&apos;].dropna() poscorpus = list(poscontents) poscorpus = map(changeToWords,poscorpus) stopwords = getcompare(negcorpus,poscorpus) + stopwords #åœæ­¢è¯ï¼Œä¸¤è¾¹æ¯”é‡å·®ä¸å¤šæˆ–è€…æ­£å¸¸çš„å¤šçš„è¯ tostop = CountVectorizer(stop_words=stopwords,token_pattern=u&apos;(?u)\w+&apos;) #ç¬¬ä¸€ä¸ªfit_transformæ˜¯è®¡ç®—tf-idf ç¬¬äºŒä¸ªfit_transformæ˜¯å°†æ–‡æœ¬è½¬ä¸ºè¯é¢‘çŸ©é˜µ tostopcount = tostop.fit_transform(poscorpus+negcorpus) words = tostop.get_feature_names() sumlist = list(tostopcount.toarray().sum(axis=0)) a1 = np.array([words,sumlist]) a1 = np.transpose(a1) dfnew = DataFrame(a1,columns=[&apos;name&apos;,&apos;count&apos;]) dfnew[&apos;count&apos;] = dfnew[&apos;count&apos;].astype(int) dfnew.to_excel(&apos;lowfrequency.xls&apos;) tostopwords = list(dfnew[dfnew[&apos;count&apos;] &lt; 7][&apos;name&apos;]) #åŽ»é™¤é¢‘æ¬¡å°äºŽ7çš„è¯ç»„ stopwords = stopwords + tostopwords if os.path.exists(&apos;teststopwords.txt&apos;): os.popen(&apos;rm -rf teststopwords.txt&apos;) f = open(&apos;teststopwords.txt&apos;,&apos;w&apos;) for item in stopwords: if item.isalpha() == False: f.write(item + &apos;\n&apos;) f.close() # #è¯¥ç±»ä¼šç»Ÿè®¡æ¯ä¸ªè¯è¯­çš„tf-idfæƒå€¼ transformer = TfidfTransformer() vectorizer = CountVectorizer(token_pattern=u&apos;(?u)\w+&apos;) count0 = vectorizer.fit_transform(poscorpus+negcorpus) tfidf = transformer.fit_transform(count0) #å°†tf-idfçŸ©é˜µæŠ½å–å‡ºæ¥ï¼Œå…ƒç´ w[i][j]è¡¨ç¤ºjè¯åœ¨iç±»æ–‡æœ¬ä¸­çš„tf-idfæƒé‡ weight = tfidf.toarray() x = weight y = np.concatenate((np.zeros(len(poscorpus)), np.ones(len(negcorpus)))) list0 = list(poscontents) + list(negcontents) list1 = list(poscorpus+negcorpus) list2 = list(weight) list3 = [] for item in list2: item = list(item) list3.append(&apos;/&apos;.join(&apos;%s&apos; % id for id in item)) a2 = np.array([list0,list1,list3,y]) a2 = np.transpose(a2) dftosave = DataFrame(a2,columns=[&apos;content&apos;,&apos;name&apos;,&apos;weight&apos;,&apos;isadver&apos;]) dftosave.to_csv(&apos;vecdict.csv&apos;) x_train, x_test, y_train, y_test = train_test_split(x, y, test_size=0.01) # æž„å»ºæ”¯æŒå‘é‡æœºåˆ†ç±»æ¨¡åž‹# model = SVC(kernel=&apos;rbf&apos;, verbose=True) # model = GaussianNB() modelnew = MultinomialNB()# model = Perceptron() # model.fit(x_train, y_train) modelnew.fit(x_train, y_train) # score = model.score(x_test, y_test) scorenew = modelnew.score(x_test, y_test)# print score print scorenew print &apos;donetest&apos; joblib.dump(modelnew, &apos;bayes.pkl&apos;) joblib.dump(transformer, &apos;transformer&apos;) joblib.dump(vectorizer, &apos;vectorizer&apos;) def testmodel(testString): isadver = False testList = [testString] negtestcorpus = map(changeToWords,testList) foruse = negtestcorpus[0].split(&apos; &apos;) nums = re.findall(r&apos;\d+&apos;, testString) numstring = &apos;&apos;.join(nums) count = len(numstring) forteststring = translate(testString) + &apos;&apos;.join(negtestcorpus) abList = [u&apos;å¾®å·&apos;,u&apos;QQ&apos;,u&apos;qq&apos;,u&apos;å¾®æˆ‘&apos;,u&apos;å¾®ä¿¡&apos;,u&apos;åŠ å¾®&apos;,u&apos;å«æ˜Ÿ&apos;,u&apos;*ä¿¡&apos;,u&apos;ç»´æ–°&apos;,u&apos;ä¼é¹…&apos;,u&apos;åŠ æ‰£&apos;] if count &gt;= 2: for item in abList: if item in forteststring: isadver = True if (&apos;http&apos; in testString and &apos;jd&apos; not in testString) or (&apos;www&apos; in testString and &apos;jd&apos; not in testString) or ((&apos;com&apos; in testString and &apos;jd&apos; not in testString)): isadver = True if isadver == True: return isadver model = joblib.load(&apos;bayes.pkl&apos;) vectorizer = joblib.load(&apos;vectorizer&apos;) transformer = joblib.load(&apos;transformer&apos;) counts_train = vectorizer.transform(negtestcorpus) testtfidf = transformer.transform(counts_train) result = model.predict(testtfidf.toarray()) if result[0] == 0.0: isadver = False if result[0] == 1.0: isadver = True return isadverdef tagalldata(): negtest = pd.read_excel(&apos;notadver.xls&apos;) print negtest.info() negtest = negtest.dropna() negtestcontents = negtest[&apos;content&apos;] df1 = map(testmodel,negtestcontents) negtest[&apos;isadnew&apos;] = df1 f = open(&apos;outputpos.txt&apos;,&apos;w&apos;) for item in negtest[negtest[&apos;isadnew&apos;] == True][&apos;content&apos;]: f.write(item + &apos;\n&apos;) f.close() print &apos;done&apos;def getsimiliar(testString): vecdic = pd.read_csv(&apos;vecdict.csv&apos;) namelist = list(vecdic[&apos;name&apos;]) weightlist = list(vecdic[&apos;weight&apos;]) contentlist = list(vecdic[&apos;content&apos;]) adverlist = list(vecdic[&apos;isadver&apos;]) weightlistnew = [] for item in weightlist: itemlist = item.split(&apos;/&apos;) outlist = [] for i in itemlist: outlist.append(float(i)) weightlistnew.append(outlist) testList = [testString] negtestcorpus = map(changeToWords,testList) model = joblib.load(&apos;bayes.pkl&apos;) transformer = joblib.load(&apos;transformer&apos;) vectorizer = joblib.load(&apos;vectorizer&apos;) names = vectorizer.get_feature_names() counts_train = vectorizer.transform(negtestcorpus) testtfidf = transformer.transform(counts_train) sentence = testtfidf.toarray()[0] for item in weightlist: itemlist = item.split(&apos;/&apos;) outlist = [] for i in itemlist: outlist.append(float(i)) similar = cos_sim(sentence,outlist) if similar &gt; 0.65: print contentlist[weightlist.index(item)],&apos;+++++++&apos;,namelist[weightlist.index(item)],&apos;------&apos;,adverlist[weightlist.index(item)] def testsentence(inputString): global contentlist time1 = time.time() print testmodel(inputString) print time.time() - time1 getsimiliar(inputString) print time.time() - time1 # print testmodel(u&apos;äº¬ä¸œï¼Œç™½ï¼Œæ¡å¥½å•Šï¼Œç™½ï¼Œæ¡ï¼Œå¯ï¼Œä»¥ï¼Œå”¤ï¼Œçº¿ï¼Œé‡‘ã€‚ç§’ï¼Œåˆ°æ‰‹ã€‚ æœ‰æ— ï¼Œé—ªï¼Œä»˜éƒ½ä¸€æ ·ï¼Œç§’ï¼Œåˆ°ã€‚è¿˜å¯ä»¥ä»»ï¼Œæ€§ï¼Œç¦ï¼ŒèŠ±ï¼ŒæŠŠã€‚ä»»ï¼Œæ€§ï¼Œå¸¦ã€‚å«ï¼Œæ˜Ÿï¼ˆq29206ï¼‰&apos;)# tagalldata()print &apos;******&apos;time1 = time.time()# trainmodel()# tagalldata()testsentence(u&apos;æˆ‘ä¸ç›¸ä¿¡weixinasdfasdf&apos;)# print getwordcount(u&apos;å¼€æˆ·&apos;)# changeToWords(u&apos;æƒ³èŽ·å¾—ç™½æ¡è”ç³»æˆ‘qw6727444&apos;)print time.time() - time1]]></content>
      <tags>
        <tag>python</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>sklearn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSé¢è¯•é¢˜æ€»ç»“]]></title>
    <url>%2F2018%2F03%2F17%2FiOS%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[è½¬ç‚¹é¢è¯•é¢˜ ä¸­å°åž‹å…¬å¸è°ˆä¸‹iOSå¼€å‘ä¸­çŸ¥é“çš„å“ªäº›é”? å“ªä¸ªæ€§èƒ½æœ€å·®?SDå’ŒAFNä½¿ç”¨çš„å“ªä¸ª? ä¸€èˆ¬å¼€å‘ä¸­ä½ æœ€å¸¸ç”¨å“ªä¸ª? å“ªä¸ªé”appleå­˜åœ¨é—®é¢˜åˆæ˜¯ä»€ä¹ˆé—®é¢˜? iOSä¸‹å¦‚ä½•å®žçŽ°æŒ‡å®šçº¿ç¨‹æ•°ç›®çš„çº¿ç¨‹æ± ? å¦‚ä½•ç”¨HTTPå®žçŽ°é•¿è¿žæŽ¥ï¼Ÿ httpçš„postå’Œgetå•¥åŒºåˆ« ä½¿ç”¨atomicä¸€å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ æ•°æ®åº“å»ºè¡¨çš„æ—¶å€™ç´¢å¼•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ ä»‹ç»ä¸‹iOSè®¾å¤‡èŽ·å–å”¯ä¸€è®¾å¤‡å·çš„åŽ†å²å˜è¿ å¦‚ä½•ä½¿ç”¨runtime hookä¸€ä¸ªclassçš„æŸä¸ªæ–¹æ³•ï¼Œåˆå¦‚ä½•hookæŸä¸ªinstanceçš„æ–¹æ³•ï¼Ÿ èŠä¸‹HTTPçš„POSTçš„bodyä½“ä½¿ç”¨form-urlencodedå’Œmultipart/form-dataçš„åŒºåˆ«ã€‚ é€šè¿‡[UIImage imageNamed:]ç”Ÿæˆçš„å¯¹è±¡ä»€ä¹ˆæ—¶å€™è¢«é‡Šæ”¾ï¼Ÿ applicationWillEnterForegroundå’ŒapplicationDidBecomeActiveéƒ½ä¼šåœ¨å“ªäº›åœºæ™¯ä¸‹è¢«è°ƒç”¨ï¼Ÿä¸¾ä¾‹è¶Šå¤šè¶Šå¥½ã€‚ å¦‚ä½•ç»ˆæ­¢æ­£åœ¨è¿è¡Œçš„å·¥ä½œçº¿ç¨‹ï¼Ÿ iOSä¸‹æ‰€æœ‰çš„æœ¬åœ°æŒä¹…åŒ–æ–¹æ¡ˆã€‚ weakä¿®é¥°çš„é‡Šæ”¾åˆ™è‡ªåŠ¨è¢«ç½®ä¸ºnilçš„å®žçŽ°åŽŸç† HTTPSçš„åŠ å¯†åŽŸç† ç½‘ç»œé€šè®¯ä¸­åŠ å¯†æ–¹å¼æœ‰å“ªäº›ï¼Œå„è‡ªçš„åŽŸç†? è°ˆä¸‹å¼€å‘ä¸­iOSç¼“å­˜çš„ç†è§£ ä½ è®¤ä¸ºå¼€å‘ä¸­é‚£äº›å¯¼è‡´crash? åˆ†æžä¸‹SDWebImage (q3:å†…éƒ¨åšDecoderçš„åŽŸå›  (å…¸åž‹çš„ç©ºé—´æ¢æ—¶é—´)) crashçš„æ”¶é›†å’Œå®šä½bugçš„æ–¹å¼è°ˆä¸‹ SELå’ŒMethodå’ŒIMPåˆ†åˆ«è¯´ä¸‹å†è°ˆä¸‹å¯¹IMPçš„ç†è§£? Autoreleaseçš„åŽŸç† ? ARCçš„å·¥ä½œåŽŸç† weakå¼±å¼•ç”¨çš„ä»£ç é€»è¾‘å®žçŽ°? å¤§æ–‡ä»¶ç¦»çº¿ä¸‹è½½æ€Žä¹ˆå¤„ç†?ä¼šé‡åˆ°å“ªäº›é—®é¢˜?åˆå¦‚ä½•è§£å†³ Socketå»ºç«‹ç½‘ç»œè¿žæŽ¥çš„æ­¥éª¤ ç”¨æˆ·éœ€è¦ä¸Šä¼ å’Œä¸‹è½½ä¸€ä¸ªé‡è¦çš„èµ„æ–™æ–‡ä»¶ï¼Œåº”è¯¥å¦‚ä½•åˆ¤æ–­ç”¨æˆ·æœ¬æ¬¡æ˜¯å¦ä¸Šä¼ æˆåŠŸå’Œä¸‹è½½æˆåŠŸäº†? ReactiveCocoa(RAC)å¦‚ä½•é˜²æ­¢UIButtonçŸ­æ—¶é—´å†…å¤šæ¬¡é‡å¤ç‚¹å‡»ï¼Œå¤§æ¦‚æ€è·¯? å€’è®¡æ—¶å¦‚ä½•å®žçŽ° ï¼Ÿ ç†Ÿæ‚‰ CocoaPods ä¹ˆï¼Ÿèƒ½å¤§æ¦‚è®²ä¸€ä¸‹å·¥ä½œåŽŸç†ä¹ˆï¼Ÿ ä½¿ç”¨SDWebImageå†…å­˜çˆ†æ¶¨çš„é—®é¢˜é‡åˆ°æ²¡,æ€Žä¹ˆè§£å†³ isaæŒ‡é’ˆçš„ä½œç”¨ æµ‹è¯•éƒ½æœ‰å“ªäº›æ–¹å¼?ä¼˜ç¼ºç‚¹å‘¢ é¡¹ç›®ä¸­ä½ æ˜¯æ€Žä¹ˆå¤„ç†ç½‘ç»œé€Ÿåº¦æ…¢ã€ä¸­æ–­æŠ–åŠ¨ç­‰ç½‘ç»œè¯·æ±‚ä¸­çš„é—®é¢˜? å¯¹æ•°ç»„ä¸­çš„å…ƒç´ åŽ»é‡å¤ (å››ç§) è¯·ç®€å•å†™å‡ºå¢žã€åˆ ã€æ”¹ã€æŸ¥çš„SQLè¯­å¥ ä¸Ž NSURLConnection ç›¸æ¯”ï¼ŒNSURLsession æ”¹è¿›å“ªäº›? ä½¿ç”¨drawRectæœ‰ä»€ä¹ˆå½±å“ï¼Ÿ ä»€ä¹ˆæ—¶å€™ä¼šæŠ¥unrecognized selectorçš„å¼‚å¸¸ï¼Ÿå¦‚ä½•é¿å…? ç•Œé¢å¤šä¸ªç½‘ç»œè¯·æ±‚,å¦‚ä½•å¤„ç†åˆ·æ–°çš„? å¦‚æžœtableViewç•Œé¢ç½‘ç»œè¯·æ±‚æœ‰ç¼“å­˜æ•°æ®é€»è¾‘? initæ–¹æ³•ç§æœ‰åŒ–? çº¿ç¨‹ä¸­æ ˆä¸Žå †æ˜¯å…¬æœ‰çš„è¿˜æ˜¯ç§æœ‰çš„ ? é¡¹ç›®ä¸­çš„å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½å¦‚ä½•å®žçŽ°ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨é˜Ÿåˆ—ä¸Šä¼ ï¼Œä¸ºä»€ä¹ˆä¸ç”¨å¼‚æ­¥ä¸Šä¼ ? åŽ»å“ªå„¿ç½‘ä¸€é¢è‡ªæˆ‘ä»‹ç» atomic å’Œ nonatomic çš„åŒºåˆ« æ‰‹å†™@property (nonatomic, strong, readonly) NSString *context çš„get æ–¹æ³•ã€‚å‰ææ˜¯çº¿ç¨‹å®‰å…¨ï¼Œlazy loadçš„æ–¹å¼ @property (atomic, strong) NSString *str; å¦‚æžœé‡å†™äº†strçš„setæ–¹æ³•ï¼Œé‚£atomicè¿˜æœ‰æ•ˆå—ï¼Ÿ å†™ä¸€ä¸ªmethod èƒ½æ»¡è¶³è¾“å…¥[6, 5, 4, 3, 2, 1]æ•°ç»„ è¾“å‡º [1, 2, 3, 4, 5, 6]æ•°ç»„ http socketçš„åŒºåˆ«ï¼Œhttpæ˜¯åœ¨ç½‘ç»œé‡Œé¢çš„é‚£ä¸€å±‚ã€‚è¿™é‡Œè€ƒçš„æ˜¯ç½‘ç»œä¼ è¾“çš„é‚£7å±‚ã€‚å¦‚ä½•çŸ¥é“æ¶ˆæ¯ä½“çš„æ•°æ®å·²ç»å‘é€å®Œæˆäº†ã€‚tcp udpçš„ç†è§£ã€‚ ä¸€ä¸ªæ–°çš„appçš„è®¾è®¡æ€è·¯ï¼Œä¸»è¦çœ‹æž¶æž„æ–¹é¢çš„æƒ³æ³• å¤šä¸ªç™»å½•æ–¹å¼ï¼Œæ¯”å¦‚qqï¼Œ å¾®ä¿¡ï¼Œå¾®åšï¼Œæ‰‹æœºå·ï¼Œé‚®ç®±ç­‰çš„ç™»å½•ï¼Œå¦‚æžœçœŸå¯¹å˜åŒ–è¿›è¡Œå°è£…ã€‚è¿™é‡Œè€ƒè™‘çš„æ›´å¤šçš„æ˜¯è®¾è®¡æ¨¡å¼ä¸Šçš„é—®é¢˜ã€‚ äº‹ä»¶å“åº”é“¾ï¼ˆæ¯”å¦‚ç‚¹å‡»äº‹ä»¶ï¼‰ GCDä¸­groupçš„ä¼˜ç‚¹ï¼ŒåŠä¸²è¡Œï¼Œå¹¶è¡Œé˜Ÿåˆ— frameworkæ—¶åŠ¨æ€é“¾æŽ¥åº“è¿˜æ˜¯é™æ€é“¾æŽ¥åº“ï¼Œå’Œ.açš„åŒºåˆ«æ˜¯ä»€ä¹ˆ å°†å¯¹è±¡åŠ å…¥å­—å…¸ï¼Œarrayæ—¶çš„å¼•ç”¨è®¡æ•°æ˜¯å¤šå°‘ weakçš„å®žçŽ°åŽŸç† strongçš„å®žçŽ°åŽŸç† å…³äºŽå¼•ç”¨è®¡æ•°çš„çŸ¥è¯†ç‚¹ æ‰‹å†™ä¸€ä¸ªsetæ–¹æ³• blockä¸­çš„å¼±å¼•ç”¨å¼ºå¼•ç”¨ï¼Œä»€ä¹ˆæƒ…å†µä¼šå¯¼è‡´å¾ªçŽ¯å¼•ç”¨ï¼Œä»€ä¹ˆæ—¶å€™éœ€è¦__strongä¿æŒå¼ºå¼•ç”¨ appçš„æ€§èƒ½ä¼˜åŒ–ï¼Œéƒ½æœ‰å“ªäº› å¯¹äºŽimageåŠ è½½çš„ä¼˜åŒ–æ–¹æ¡ˆæœ‰å“ªäº› Runloop, runtimeçš„ç†è§£ é˜¿é‡Œä¸€é¢ç¬¬ä¸€ç»„(p5)Androidçš„activity Categoryæ”¯æŒæ·»åŠ å±žæ€§ä¸Žæˆå‘˜å˜é‡å— æ˜¯å¦äº†è§£è®¾è®¡æ¨¡å¼, ç”¨è¿‡å“ªäº› iOS7ä¹‹åŽ, è“ç‰™çš„å›´æ åŠŸèƒ½ MVCæ˜¯å¦äº†è§£?ä»‹ç»ä¸‹ä½¿ç”¨æƒ…å†µã€‚ MVCé‡Œé¢, Viewæ€Žä¹ˆé€šçŸ¥åˆ°Model äº†è§£delegateå—?å¹¶ä»‹ç» è¯´è¯´Cellé‡ç”¨åŽŸç† å¼‚æ­¥ä¸‹è½½å¦‚ä½•å®žçŽ° åšè¿‡æœ€å¤§çš„é¡¹ç›®æ˜¯ä»€ä¹ˆ?ä¸»è¦éš¾ç‚¹åœ¨å“ªé‡Œ å¦‚æžœçŽ°åœ¨è¦å®žçŽ°ä¸€ä¸ªä¸‹è½½åŠŸèƒ½, ä½ è¦å¦‚ä½•è®¾è®¡ã€‚è¯´è¯´æ¯ä¸ªç±»å…·ä½“åšä»€ä¹ˆ å­¦è¿‡å“ªäº›è¯­è¨€ C++é‡Œé¢è™šå‡½æ•°ä½œç”¨ å¯¹o2oæœ‰ä»€ä¹ˆçœ‹æ³•(ä»–æ˜¯o2oéƒ¨é—¨çš„) æœ‰æ²¡æœ‰ä»€ä¹ˆæƒ³é—®çš„ ç¬¬äºŒç»„(p5)MVCå…·æœ‰ä»€ä¹ˆæ ·çš„ä¼˜åŠ¿ï¼Œå„ä¸ªæ¨¡å—ä¹‹é—´æ€Žä¹ˆé€šä¿¡ï¼Œæ¯”å¦‚ç‚¹å‡» Button åŽ æ€Žä¹ˆé€šçŸ¥ Modelï¼Ÿ ä¸¤ä¸ªæ— é™é•¿åº¦é“¾è¡¨ï¼ˆä¹Ÿå°±æ˜¯å¯èƒ½æœ‰çŽ¯ï¼‰ åˆ¤æ–­æœ‰æ²¡æœ‰äº¤ç‚¹ UITableViewçš„ç›¸å…³ä¼˜åŒ– KVOã€Notificationã€delegateå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œæ•ˆçŽ‡è¿˜æœ‰ä½¿ç”¨åœºæ™¯ å¦‚ä½•æ‰‹åŠ¨é€šçŸ¥KVO Objective-C ä¸­çš„copyæ–¹æ³• runtime ä¸­ï¼ŒSELå’ŒIMPçš„åŒºåˆ« autoreleasepoolçš„ä½¿ç”¨åœºæ™¯å’ŒåŽŸç† RunLoopçš„å®žçŽ°åŽŸç†å’Œæ•°æ®ç»“æž„ï¼Œä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ° blockä¸ºä»€ä¹ˆä¼šæœ‰å¾ªçŽ¯å¼•ç”¨ ä½¿ç”¨GCDå¦‚ä½•å®žçŽ°è¿™ä¸ªéœ€æ±‚ï¼šAã€Bã€C ä¸‰ä¸ªä»»åŠ¡å¹¶å‘ï¼Œå®ŒæˆåŽæ‰§è¡Œä»»åŠ¡ Dã€‚ NSOperationå’ŒGCDçš„åŒºåˆ« CoreDataçš„ä½¿ç”¨ï¼Œå¦‚ä½•å¤„ç†å¤šçº¿ç¨‹é—®é¢˜ å¦‚ä½•è®¾è®¡å›¾ç‰‡ç¼“å­˜ï¼Ÿ æœ‰æ²¡æœ‰è‡ªå·±è®¾è®¡è¿‡ç½‘ç»œæŽ§ä»¶ï¼Ÿ ç¬¬ä¸‰ç»„(p6)ä»‹ç»ä¸‹å†…å­˜çš„å‡ å¤§åŒºåŸŸï¼Ÿ ä½ æ˜¯å¦‚ä½•ç»„ä»¶åŒ–è§£è€¦çš„ï¼Ÿ runtimeå¦‚ä½•é€šè¿‡selectoræ‰¾åˆ°å¯¹åº”çš„IMPåœ°å€ runloopå†…éƒ¨å®žçŽ°é€»è¾‘ï¼Ÿ ä½ ç†è§£çš„å¤šçº¿ç¨‹ï¼Ÿ GCDæ‰§è¡ŒåŽŸç†ï¼Ÿ æ€Žä¹ˆé˜²æ­¢åˆ«äººåç¼–è¯‘ä½ çš„appï¼Ÿ YYAsyncLayerå¦‚ä½•å¼‚æ­¥ç»˜åˆ¶ï¼Ÿ ä¼˜åŒ–ä½ æ˜¯ä»Žå“ªå‡ æ–¹é¢ç€æ‰‹ï¼Ÿ é˜¿é‡ŒäºŒé¢ç¬¬ä¸€ç»„(p5)ä»€ä¹ˆæ—¶å€™æŽ¥è§¦iOS ä½ çš„è¿™äº›é¡¹ç›®æ˜¯å¤–åŒ…è¿˜æ˜¯è‡ªå·±å¼€å‘çš„ OCå…è®¸å¤šç»§æ‰¿å— è¦ç”¨ä»€ä¹ˆæ–¹å¼å®žçŽ°å¤šç»§æ‰¿ äº†è§£å†…å­˜ç®¡ç†å—, å§å”§å§å”§â€¦ äº†è§£è®¾è®¡æ¨¡å¼å— å…·ä½“è¯´è¯´MVC äº†è§£KVOå— å¦‚æžœè®©ä½ è®¾è®¡KVO, è¦æ€Žä¹ˆè®¾è®¡ çŽ°åœ¨ä½ æ˜¯å¦‚ä½•é€‚é…çš„ æ¯”è¾ƒä¸‹storyboardå’Œå…¨ä»£ç  å°è±¡æ¯”è¾ƒæ·±çš„é¡¹ç›®, éš¾ç‚¹åœ¨å“ª Cellé‡ç”¨æœºåˆ¶å…·ä½“æ€Žä¹ˆå®žçŽ° å¦‚æžœæœ‰1wå¼ å›¾ç‰‡è¦åœ¨å±å¹•æ»šåŠ¨æ˜¾ç¤º(æ¯å¼ å›¾ç‰‡æ»¡å±), è‡³å°‘è¦å‡ ä¸ªcell, å¦‚ä½•å®žçŽ°å¾ªçŽ¯æ»šåŠ¨ å¹³æ—¶æ˜¯æ€Žä¹ˆè¿›è¡Œæµ‹è¯•çš„, å†…å­˜æ–¹é¢æ€Žä¹ˆæµ‹è¯• å¹³æ—¶å¦‚ä½•å®žçŽ°ç½‘ç»œè¯·æ±‚, ä¸€èˆ¬è¿”å›žçš„æ•°æ®æ˜¯ä»€ä¹ˆæ ¼å¼, å¦‚ä½•è§£æž.. å¹³æ—¶è‡ªå·±æœ‰æ²¡æœ‰å°è£…è¿‡æ¯”è¾ƒå¤æ‚çš„æŽ§ä»¶ åœ¨ä»€ä¹ˆæƒ…å†µä½¿ç”¨Notification å¦‚ä½•å®žçŽ°ç±»ä¼¼ â€œFind My iPhoneâ€ è¿™æ ·åŠŸèƒ½ ç¬¬äºŒç»„(p5)æ€Žä¹ˆåˆ¤æ–­æŸä¸ª cell æ˜¯å¦æ˜¾ç¤ºåœ¨å±å¹•ä¸Š è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ« TCP ä¸Ž UDP åŒºåˆ« TCP æµé‡æŽ§åˆ¶ æ•°ç»„å’Œé“¾è¡¨çš„åŒºåˆ« UIView ç”Ÿå‘½å‘¨æœŸ å¦‚æžœé¡µé¢ A è·³è½¬åˆ° é¡µé¢ Bï¼ŒA çš„ viewDidDisappear æ–¹æ³•å’Œ B çš„ viewDidAppear æ–¹æ³•å“ªä¸ªå…ˆè°ƒç”¨ï¼Ÿ block å¾ªçŽ¯å¼•ç”¨é—®é¢˜ ARC çš„æœ¬è´¨ RunLoop çš„åŸºæœ¬æ¦‚å¿µï¼Œå®ƒæ˜¯æ€Žä¹ˆä¼‘çœ çš„ï¼Ÿ Autoreleasepool ä»€ä¹ˆæ—¶å€™é‡Šæ”¾ï¼Œåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨ï¼Ÿ å¦‚ä½•æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªä¸é‡å¤çš„å­—ç¬¦ å“ˆå¸Œè¡¨å¦‚ä½•å¤„ç†å†²çª ç¬¬ä¸‰ç»„(p6)åœ¨ä¸€ä¸ªappä¸­é—´æœ‰ä¸€ä¸ªbuttonï¼Œåœ¨ä½ æ‰‹è§¦æ‘¸å±å¹•ç‚¹å‡»åŽï¼Œåˆ°è¿™ä¸ªbuttonæ”¶åˆ°ç‚¹å‡»äº‹ä»¶ï¼Œä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆ ä»£ç æ–‡ä»¶ç¼–è¯‘ç”Ÿæˆè¿‡ç¨‹ï¼Œåšäº†å“ªäº›äº‹æƒ…ï¼› appå¯åŠ¨åšäº†å“ªäº›äº‹æƒ…ï¼› AFNåŽŸç† è¯´è¯´ä½ é¡¹ç›®ä¸­å¸¸ç”¨åˆ°çš„è°ƒè¯•æŠ€å·§ï¼Ÿ é˜¿é‡Œä¸‰é¢ç¬¬ä¸€ç»„(p5)dSYMä½ æ˜¯å¦‚ä½•åˆ†æžçš„ï¼Ÿ å¤šçº¿ç¨‹æœ‰å“ªå‡ ç§ï¼Ÿä½ æ›´å€¾å‘äºŽå“ªä¸€ç§ï¼Ÿ å•ä¾‹å¼Šç«¯ï¼Ÿ å¦‚ä½•æŠŠå¼‚æ­¥çº¿ç¨‹è½¬æ¢æˆåŒæ­¥ä»»åŠ¡è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Ÿ ä»‹ç»ä¸‹Appå¯åŠ¨çš„å®Œæˆè¿‡ç¨‹ï¼Ÿ æ¯”å¦‚Appå¯åŠ¨è¿‡æ…¢ï¼Œä½ å¯èƒ½æƒ³åˆ°çš„å› ç´ æœ‰å“ªäº›ï¼Ÿ 0x8badf00dè¡¨ç¤ºæ˜¯ä»€ä¹ˆï¼Ÿ æ€Žä¹ˆé˜²æ­¢åç¼–è¯‘ï¼Ÿ è¯´è¯´ä½ é‡åˆ°åˆ°çš„æŠ€æœ¯éš¾ç‚¹ï¼Ÿ è¯´è¯´ä½ äº†è§£çš„ç¬¬ä¸‰æ–¹åŽŸç†æˆ–åº•å±‚çŸ¥è¯†ï¼Ÿ èš‚èšé‡‘æœåœ¨KVOä¸­ï¼Œä»–æ˜¯æ€Žä¹ˆçŸ¥é“ç›‘å¬çš„å¯¹è±¡å‘ç”Ÿäº†å˜åŒ–ï¼Ÿ å­—å…¸çš„å·¥ä½œåŽŸç† ï¼Ÿæ€Ž100wä¸ªä¸­æ˜¯æ€Žä¹ˆå¿«é€ŸåŽ»å–valueï¼Ÿ ä¸€ä¸ªä¸Šçº¿çš„é¡¹ç›®ï¼ŒçŸ¥é“è¿™ä¸ªæ–¹æ³•å¯èƒ½ä¼šå‡ºé—®é¢˜ï¼Œåœ¨ä¸ç ´åæ”¹æ–¹æ³•å‰æä¸‹ï¼Œæ€Žä¹ˆæžï¼Ÿ Blockå’Œå‡½æ•°æŒ‡é’ˆçš„åŒºåˆ«ï¼Ÿ æ”¯ä»˜å®iOSå¤šçº¿ç¨‹æœ‰å“ªäº›ï¼Ÿä»–ä»¬ä¹‹é—´å„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä¼˜åŠ£æ€§ï¼Ÿ UIViewå’ŒNSObjectè¿™ä¸¤ä¸ªç±»ï¼Œæ‰€æœ‰é‡Œé¢çš„æ–¹æ³•å’ŒåŽŸç†éƒ½éœ€è¦äº†è§£ä¸€ä¸‹ã€‚ Runloopå’Œçº¿ç¨‹çš„å…³ç³»ï¼Ÿ Runloopçš„ä½œç”¨ï¼ŸRunloopModeçš„åŽŸç†ï¼Ÿ é¥¿äº†ä¹ˆé¢è¯•é¢˜automicä¸€å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„å— iOSä¸­çš„æ¶ˆæ¯ä¼ é€’æ˜¯æ€Žä¹ˆä¸€æ­¥ä¸€æ­¥å®žçŽ°çš„ categoryå’Œextensionæœ‰ä»€ä¹ˆåŒºåˆ« iOSä¸­çš„ç§æœ‰å±žæ€§å¦‚ä½•è®¾ç½® ä¸²è¡Œé˜Ÿåˆ—å’ŒåŒæ­¥é”ä¸¤è€…åœ¨ä¿æŠ¤çº¿ç¨‹å®‰å…¨ä¸Šçš„æ€§èƒ½å¯¹æ¯” å¹¶è¡Œé˜Ÿåˆ—æ˜¯åŒæ—¶æ‰§è¡Œçš„å— iOSä¸­æœ‰å“ªäº›é”ï¼Œä½ äº†è§£å¤šå°‘ iOSä¸­UIKitæ¡†æž¶çš„æž¶æž„ UIViewå’ŒCALayerä¹‹é—´çš„å…³ç³» UIViewã€CoreAnimationå’ŒCoreGraphicsçš„å…³ç³» åº”è¯¥çŸ¥é“SegmentFaultï¼Œè¿™ä¸ªåœ¨iOSä¸­æ˜¯ä»€ä¹ˆé”™è¯¯ï¼Œé‚£StackOverFlowå‘¢ GCDã€NSThreadã€NSOperationæ€§èƒ½ä¸Šæœ‰ä½•åŒºåˆ« ç½‘æ˜“ä¸€é¢ç¬¬ä¸€ç»„è‡ªæˆ‘ä»‹ç» å­¦ä¹ iOSåŠ¨æœº å¯¹iOSçš„çœ‹æ³• è°ˆé¡¹ç›® æ€Žä¹ˆçœ‹å¾…å®¡æ ¸è¢«æ‹’ æ€Žä¹ˆå®ŒæˆåŽæœŸæ£€æµ‹, ä¼˜åŒ– id ,NSObject, idåŒºåˆ« äº†è§£iOSå†…å­˜ç®¡ç†å— release å’Œ autorelease åŒºåˆ« autorelease å’Œ @autoreleaseåŒºåˆ« weakä»€ä¹ˆæ—¶å€™ç”¨ unsafe_unretained , weak, assign åŒºåˆ« __blockä»€ä¹ˆæ—¶å€™ç”¨ åœ¨blocké‡Œé¢, å¯¹æ•°ç»„æ‰§è¡Œæ·»åŠ æ“ä½œ, è¿™ä¸ªæ•°ç»„éœ€è¦å£°æ˜Žæˆ __blockå— åœ¨blocké‡Œé¢, å¯¹NSIntegerè¿›è¡Œä¿®æ”¹, è¿™ä¸ªNSIntegeræ˜¯å¦éœ€è¦å£°æ˜Žæˆ__blcok äº†è§£å¾ªçŽ¯å¼•ç”¨å— NSThread, NSOperation, GCDåŒºåˆ« å¦‚ä½•åœ¨å¼‚æ­¥ä¸‹è½½æ—¶å€™, å–æ¶ˆä¸‹è½½, ä¿è¯æµé‡ä¸æµªè´¹ äº†è§£runtimeå— runtimeä»€ä¹ˆæ—¶å€™ç”¨ é€šçŸ¥å’ŒKVOåŒºåˆ« æœ‰åºå’Œæ— åºsetå®žçŽ°åŽŸç†åŒºåˆ« æ·±åº¦éåŽ†å’Œå¹¿åº¦éåŽ†ä½¿ç”¨åœºæ™¯ ç®—æ³•é¢˜ * 2 å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ å“ªäº›è®¾è®¡æ¨¡å¼å±žäºŽè§‚å¯Ÿè€…æ¨¡å¼ æ€»ç»“ä¸‹åˆšæ‰é¢è¯•ä¸­å“ªäº›ä¸è¶³ è‡ªå·±æœ‰ä»€ä¹ˆä¼˜ç‚¹ æœ‰ä»€ä¹ˆæƒ³é—®çš„ ç¬¬äºŒç»„ä½ ä¸€èˆ¬å­¦ä¹ iOSæ˜¯å¦‚ä½•å­¦ä¹ çš„ï¼Ÿ appå†…å­˜ä½ æ˜¯å¦‚ä½•åˆ†æžçš„ï¼Ÿ ç”¨è¿‡ TableView å—ï¼Œå¹³æ—¶æ€Žä¹ˆè§£å†³ TableView æ»‘åŠ¨å¡é¡¿é—®é¢˜çš„ï¼Ÿ ç½‘ç»œæ¨¡åž‹äº†è§£ä¹ˆï¼Ÿæœ‰å“ªå‡ ç§ï¼Ÿè¯´è¯´ä½ çš„çœ‹æ³•ï¼Ÿ blockæœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ KVCæœºåˆ¶æ˜¯å¦‚ä½•é€šè¿‡keyæ‰¾åˆ°valueã€‚ è¯´è¯´ä½ æœ€ç†Ÿæ‚‰çš„ç¬¬ä¸‰æ–¹ï¼ŒçŸ¥æ™“å…¶åŽŸç†ä¹ˆï¼Ÿ ç½‘æ˜“äºŒé¢ç¬¬ä¸€ç»„å¦‚ä½•å®žçŽ°ä¸€ä¸ªæ•°ç»„æ¯ä¸ªå…ƒç´ ä¾æ¬¡å‘å³ç§»åŠ¨kä½ã€‚(åŽå¤´çš„å¾€å‰é¢è¡¥) æ¯”å¦‚: [1, 2, 3, 4, 5] æŒªä¸¤ä½å˜æˆ[4, 5, 1, 2, 3] å®žçŽ°è¿žè¿žçœ‹ç®—æ³• T9ç®—æ³•å¦‚ä½•å®žçŽ°, å…¨æ‹¼ç®—æ³•]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sklearnä¸­æ–‡æ–‡æœ¬åˆ†ç±»å®žæˆ˜]]></title>
    <url>%2F2018%2F03%2F12%2F2018%2Fsklearn%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E5%AE%9E%E6%88%98%2F</url>
    <content type="text"><![CDATA[è®­ç»ƒæ­¥éª¤ æ•°æ®é›†åˆ æ–‡æœ¬åˆ†è¯ åŽ»é™¤åœç”¨è¯ï¼Œä½Žé¢‘è¯ æŠ½å–ç‰¹å¾ è®¡ç®—ç‰¹å¾å‘é‡æƒå€¼ è®­ç»ƒåˆ†ç±»å™¨ ä½¿ç”¨æ¨¡åž‹æ­¥éª¤ æ–‡æœ¬åˆ†è¯ åŽ»é™¤åœç”¨è¯ï¼Œä½Žé¢‘è¯ è®¡ç®—ç‰¹å¾å‘é‡æƒå€¼ ä½¿ç”¨æ¨¡åž‹è¿›è¡Œåˆ†ç±» åŽ»é™¤åœç”¨è¯å’Œä½Žé¢‘è¯å› ä¸ºåœ¨è‡ªç„¶è¯­è¨€ä¸­æ¯ä¸ªè¯ä»£è¡¨ä¸€ä¸ªç‰¹å¾ï¼Œæ‰€ä»¥è‡ªç„¶è¯­è¨€æ³¨å®šäº†æ˜¯ä¸€ç§è¶…é«˜çº¬ç‰¹å¾çš„æœºå™¨å­¦ä¹ é—®é¢˜ï¼Œä½†æ˜¯åœ¨åˆ†ç±»é—®é¢˜ä¸­å¾ˆå¤šè¯æ˜¯ä¸å…·å¤‡åˆ†ç±»èƒ½åŠ›çš„ï¼Œæ¯”å¦‚ï¼Œå•Šï¼Œæˆ‘ç­‰ç­‰ï¼Œè¿™äº›æ˜¯è¦åŽ»é™¤çš„åœç”¨è¯ï¼Œè¿™äº›è¯è¯­åœ¨ä¸åŒåœºæ™¯ä¸‹å¯ä»¥æ˜¯é€šç”¨çš„ã€‚å¦å¤–å°±æ˜¯è¦åŽ»é™¤ä½Žé¢‘è¯ï¼Œå¦‚æžœæŸäº›è¯åœ¨åœ¨æ•´ä¸ªè®­ç»ƒæ•°æ®é›†ä¸­åªå‡ºçŽ°äº†ä¸€ä¸¤æ¬¡ï¼Œé‚£ä¹ˆè¿™æ ·çš„ç‰¹å¾å°†ä¼šå¯¼è‡´è¡¨ç¤ºå‘é‡å¤§é‡çš„0000å­˜åœ¨ï¼Œæ˜¯å¾’å¢žåŠ è®¡ç®—æˆæœ¬è€Œä¸ä¼šå¯¹ç²¾å‡†åˆ†ç±»æœ‰ä»€ä¹ˆè´¡çŒ®ï¼Œæ‰€ä»¥æœ€å¥½çš„åŠžæ³•å°±æ˜¯ç›´æŽ¥å¿½ç•¥è¿™äº›è¯ã€‚ å…·ä½“åœ¨sklearnä¸­æˆ‘ä»¬ç”¨åˆ°çš„æ˜¯from sklearn.feature_extraction.text import CountVectorizerè¿™ä¸ªç±» 1vectorizer = CountVectorizer(vocabulary=vocabularyDic,stop_words=[&apos;ä¸­å›½&apos;],token_pattern=u&apos;(?u)\w+&apos;,max_features=200) é‚£ä¹ˆæ˜¯ä¸æ˜¯ä½¿ç”¨stop_wordsè¿™ä¸ªå‚æ•°å‘¢ï¼Œè¿™ä¸ªè¦åŒºåˆ†ï¼Œå¦‚æžœæ˜¯è‹±æ–‡æ–‡æœ¬åˆ†ç±»æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ä¸­æ–‡ä¸è¡Œï¼Œè¿™å°±æ˜¯å‘å•Šï¼Œæ‰€ä»¥ä¸­æ–‡åŽ»é™¤åœç”¨è¯åªèƒ½é è‡ªå·±ã€‚ 1234567891011121314151617181920212223def translate(comment): testline = re.sub(u&quot;[\s+\.\!\/_,$%^*(+\&quot;\&apos;]+|[+â€”â€”ï¼ï¼Œï¼ã€‚ï¼Ÿã€~@#ï¿¥%â€¦â€¦&amp;*ï¼ˆï¼‰]+&quot;, &apos;&apos;, comment) testline = testline.replace(chr(32),&apos;&apos;).replace(u&apos;ï¼&apos;, u&apos;&apos;).replace(u&apos;ï¼Œ&apos;, u&apos;&apos;).replace(u&apos;ã€‚&apos;, u&apos;&apos;).replace(u&apos;\n&apos;, u&apos;&apos;).replace(u&apos;\t&apos;, u&apos;&apos;).replace( u&apos;?&apos;, u&apos;&apos;).replace(u&apos;ã€&apos;,&apos;&apos;).replace(u&apos;o&apos;,&apos;&apos;).replace(u&apos;O&apos;,&apos;&apos;).replace(u&apos;ä¸¶&apos;,&apos;&apos;).replace(u&apos;â€˜&apos;,&apos;&apos;).replace(&apos;:&apos;,&apos;&apos;).replace(u&apos;ï¼š&apos;,&apos;&apos;).replace(&apos;(&apos;,&apos;&apos;).replace(&apos;)&apos;,&apos;&apos;).replace(&apos;&#123;&apos;,&apos;&apos;).replace(&apos;&#125;&apos;,&apos;&apos;).replace(u&apos;ï¼Ÿ&apos;, u&apos;&apos;).replace(u&apos;-&apos;,&apos;&apos;).replace(u&apos;ä¸€&apos;,&apos;1&apos;).replace(u&apos;äºŒ&apos;,&apos;2&apos;).replace(u&apos;ä¸‰&apos;,&apos;3&apos;).replace(u&apos;å››&apos;,&apos;4&apos;).replace(u&apos;äº”&apos;,&apos;5&apos;).replace(u&apos;å…­&apos;,&apos;6&apos;).replace(u&apos;ä¸ƒ&apos;,&apos;7&apos;).replace(u&apos;å…«&apos;,&apos;8&apos;).replace(u&apos;ä¹&apos;,&apos;9&apos;).replace(u&apos;é›¶&apos;,&apos;0&apos;) testline = testline.lower() return testlinedef changeToWords(sentence): global stopwords out = translate(sentence) jiebalistnew = [] jiebalist = jieba.lcut(out) for item in jiebalist: if item not in stopwords:#åŽ»é™¤åœç”¨è¯ jiebalistnew = jiebalistnew + handlenum(item) if &apos;&apos; in jiebalistnew: jiebalistnew.remove(&apos;&apos;) if &apos; &apos; in jiebalistnew: jiebalistnew.remove(&apos; &apos;) string = &apos; &apos;.join(jiebalistnew)# return string,jiebalistnew return string ä»”ç»†çœ‹translateä¸»è¦ä½œç”¨å°±æ˜¯åŽ»é™¤ä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼ŒåŒæ—¶å¯¹å¤§å†™æ•°å­—è¿›è¡Œè½¬åŒ–ï¼Œè¿™ä¸ªä¸€ä¸ªå¹¿å‘Šè¯†åˆ«çš„é¢„å¤„ç†ï¼Œå› ä¸ºå¥½å¤šå¹¿å‘Šè¦ç•™ä¸‹æ¥å·ç ä»€ä¹ˆçš„ã€‚ æŠ½å–ç‰¹å¾æŠ½å–ç‰¹å¾å‘¢ï¼Œä¸»è¦æ˜¯å½¢æˆä¸€ä¸ªè¯å…¸ï¼Œç„¶åŽæŠŠæ¯å¥è¯å¯¹åº”åˆ°è¯å…¸é‡Œçš„è¯ï¼Œå­˜åœ¨å°±æ˜¯1ï¼Œä¸å­˜åœ¨å°±æ˜¯0ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æŠŠæ¯å¥è¯è½¬æ¢æˆ10100001è¿™ç§å‘é‡ã€‚ æˆ‘ä»¬åº”è¯¥è¾“å…¥ä»€ä¹ˆï¼Œè¾“å‡ºçš„åˆæ˜¯ä»€ä¹ˆ123456 #è¯¥ç±»ä¼šç»Ÿè®¡æ¯ä¸ªè¯è¯­çš„tf-idfæƒå€¼transformer = TfidfTransformer()vectorizer = CountVectorizer(token_pattern=u&apos;(?u)\w+&apos;)#ç¬¬ä¸€ä¸ªfit_transformæ˜¯è®¡ç®—tf-idf ç¬¬äºŒä¸ªfit_transformæ˜¯å°†æ–‡æœ¬è½¬ä¸ºè¯é¢‘çŸ©é˜µcount0 = vectorizer.fit_transform(inputList)tfidf = transformer.fit_transform(count0) çœ‹ä¸€ä¸‹ä¸Šè¾¹çš„ä»£ç ï¼Œæˆ‘ä»¬çš„è¾“å…¥æ˜¯inputListï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡æ˜Žæ˜¾å°±æ˜¯æˆ‘ä»¬çš„ä¸€ä¸ªä¸ªçš„å¥å­äº†ï¼Œè¿™æ˜¯listç±»åž‹ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå¥å­ï¼Œå¦‚æžœæ˜¯è‹±æ–‡æ–‡æœ¬ï¼Œè¿™æ ·ç›´æŽ¥è¾“å…¥å°±å¥½äº†ï¼Œä½†æ˜¯ä¸­æ–‡è¦è¿›è¡Œä¸€ä¸ªè½¬æ¢ï¼Œå‚ç…§è‹±æ–‡çš„æ ·å¼ï¼Œç”¨ç©ºæ ¼åˆ†éš”å¼€ï¼Œæ‰€ä»¥è¾“å…¥æ˜¯ä¸‹è¾¹è¿™æ ·çš„1inputList = [&apos;æˆ‘ çˆ± ä¸­å›½&apos;,&apos;æˆ‘ æ˜¯ ä¸­å›½äºº&apos;] è¾“å‡ºï¼š ç‰¹å¾æå–ï¼Œè¾“å‡ºçš„å½“ç„¶æ˜¯ç‰¹å¾äº† 123456789101112131415161718transformer = TfidfTransformer()vectorizer = CountVectorizer(token_pattern=u&apos;(?u)\w+&apos;)count0 = vectorizer.fit_transform(pos)tran = transformer.fit_transform(count0)print vectorizer.vocabulary_ #è¿™ä¸ªå­—å…¸é‡Œè¾¹å­˜å‚¨äº†æˆ‘ä»¬çš„å…³é”®å­—ï¼Œä»¥å…³é”®è¯ä¸ºkeyï¼Œç„¶åŽåŽè¾¹çš„valueæ˜¯å®ƒåœ¨å‘é‡å­—å…¸é‡Œè¾¹çš„ä½ç½®ç´¢å¼•names = vectorizer.get_feature_names() #è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬çš„å‘é‡è¯å…¸äº†print count0.toarray() #è¿™ä¸ªæ˜¯å°†ä¸ºæœ¬è½¬æ¢ä¸ºäº†å‘é‡ï¼Œæ¯”å¦‚[0,2,1,2]2å‘¢ä»£è¡¨å‡ºçŽ°äº†ä¸¤æ¬¡for item in names: print itemsumlist = list(count0.toarray().sum(axis=0))#è¿™é‡Œå‘¢æ˜¯å°†æ‰€æœ‰çš„è¯ä»¥åŠå‡ºçŽ°çš„æ¬¡æ•°è¿›è¡Œäº†åŠ å’Œï¼Œçœ‹çœ‹æ¯ä¸ªè¯ä¸€å…±å‡ºçŽ°äº†å¤šå°‘æ¬¡ï¼ŒåŽè¾¹ä¸¤è¡Œä»£ç éƒ½æ˜¯ä¸ºäº†è¿™ä¸ªäº‹a1 = np.array([names,sumlist])a1 = np.transpose(a1)df = DataFrame(a1,columns=[&apos;name&apos;,&apos;count&apos;]) tokenæå–è§„åˆ™è¿™ä¸ªè¯´çš„æ˜¯token_patternè¿™ä¸ªå‚æ•°ï¼Œå®ƒå†³å®šäº†æ¯ä¸ªå•ç‹¬çš„ç‰¹å¾æ˜¯å¦‚ä½•æå–çš„ï¼Œå¦‚æžœä½ ä¸èµ‹å€¼ï¼Œè¿™ä¸ªåˆå§‹å€¼æ˜¯&#39;(?u)\\b\\w\\w+\b&#39;æ„æ€æ˜¯ï¼Œæå–å­—ç¬¦åŠ ç©ºæ ¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨ç©ºæ ¼æ¥åŒºåˆ†ï¼Œä½†æ˜¯è¿™ä¸ªæœ‰ä¸ªå‘ï¼Œé»˜è®¤æ˜¯æå–ä¸¤ä¸ªä»¥ä¸Šçš„å­—ç¬¦ï¼Œè¿™å°±æ„å‘³ç€å¦‚æžœä½ çš„ä¸€äº›ç‰¹å¾åªæœ‰ä¸€ä¸ªå­—ç¬¦é‚£ä¹ˆè¿™ä¸ªç‰¹å¾å°±è¢«è‡ªåŠ¨å¿½ç•¥äº†ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»æœ‰äº†åœç”¨è¯åŽ»é™¤æœºåˆ¶ï¼Œæ‰€ä»¥è¿™é‡Œå°½é‡åšä¸ªä¿®æ”¹ï¼Œtoken_pattern=u&#39;(?u)\w+&#39;è¿™æ ·å†™å°±èƒ½å¤Ÿæå–ä¸€ä¸ªçš„ä¸­æ–‡äº†ï¼Œç½‘ä¸ŠåŸºæœ¬ä¸Šéƒ½åœ¨è¯´è‹±æ–‡å’‹æ•´ï¼Œéš¾é“å¤§å®¶åšçš„éƒ½æ˜¯è‹±æ–‡çš„æ–‡æœ¬åˆ†ç±»â€¦.ä¸­æ–‡çš„è¡¨ç¤ºå¿ƒç´¯â€¦ æœ€å¤§ç‰¹å¾æ•°1vectorizer = CountVectorizer(token_pattern=u&apos;(?u)\w+&apos;ï¼Œmax_features=200) è¿™ä¸ªå€¼å¯ä»¥å’ŒåŽ»é™¤ä½Žé¢‘è¯æ˜¯å¼‚æ›²åŒå·¥ï¼Œå¦‚æžœæˆ‘ä»¬ç»è¿‡åˆ†æžå‘çŽ°ç‰¹å¾è¯æœ‰1000ä¸ªï¼Œç„¶åŽä½Žé¢‘æ˜¯300ï¼Œè¿™æ ·ç›´æŽ¥è®¾ç½®è¿™ä¸ªå€¼æ˜¯700å°±å¥½äº†ï¼Œå®ƒä¼šè‡ªåŠ¨é€‰å–æœ€é«˜é¢‘çš„700ä¸ªè¯ä½œä¸ºç‰¹å¾ è®­ç»ƒæ¨¡åž‹ä»¥åŠä½¿ç”¨æ¨¡åž‹1234567891011121314151617181920212223242526272829303132333435363738394041pos = [u&apos;i&apos;,u&apos;ä¸­å›½/çˆ±ä½  ä¸­å›½&apos;,u&apos;ä¸­å›½)çˆ±è° asf i&apos;,u&apos;æˆ‘+çˆ±ä½ &apos;,u&apos;æˆ‘+çˆ±ä½ &apos;]# pos = [&apos;this is a dog&apos;,&apos;the dog is cute,oh lovely dog&apos;,&apos;my dauter is smiling&apos;]# pos = [&apos;i love you&apos;, &apos;i hate you&apos;, &apos;i&apos;]#è¯¥ç±»ä¼šç»Ÿè®¡æ¯ä¸ªè¯è¯­çš„tf-idfæƒå€¼transformer = TfidfTransformer()vectorizer = CountVectorizer(analyzer=&apos;word&apos;,token_pattern=u&apos;(?u)\w+&apos;)# u&apos;(?u)\\b\\w\\w+\\b&apos;# vectorizer = CountVectorizer()#ç¬¬ä¸€ä¸ªfit_transformæ˜¯è®¡ç®—tf-idf ç¬¬äºŒä¸ªfit_transformæ˜¯å°†æ–‡æœ¬è½¬ä¸ºè¯é¢‘çŸ©é˜µcount0 = vectorizer.fit_transform(pos)tran = transformer.fit_transform(count0)x = weighty = np.concatenate((np.zeros(len(poscorpus)), np.ones(len(negcorpus)))) x_train, x_test, y_train, y_test = train_test_split(x, y, test_size=0.3) modelnew = MultinomialNB()modelnew.fit(x_train, y_train)scorenew = modelnew.score(x_test, y_test)print scorenewprint &apos;donetest&apos;##å¿…é¡»è¦ä¿å­˜ä¸‰ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯è®­ç»ƒä¹‹åŽçš„æ¨¡åž‹ï¼Œç„¶åŽæ˜¯joblib.dump(modelnew, &apos;bayes.pkl&apos;)joblib.dump(transformer, &apos;transformer&apos;) # ä¿å­˜åˆ†ç±»å™¨joblib.dump(vectorizer, &apos;vectorizer&apos;) # ä¿å­˜åˆ†ç±»å™¨print vectorizer.vocabulary_print count0.toarray()## è¿™é‡Œç”¨äºŽæ–°æ•°æ®çš„é¢„æµ‹ï¼Œæˆ‘ä»¬éœ€è¦è®­ç»ƒå¥½çš„æ¨¡åž‹ï¼Œvecï¼Œtranè¿™ä¸‰ä¸ªä¸œè¥¿modelnew = joblib.load(&apos;bayes.pkl&apos;)transformer1 = joblib.load(&apos;transformer&apos;)vectorizer1 = joblib.load(&apos;vectorizer&apos;)CountVectorizer(vocabulary=vectorizer.vocabulary_,analyzer=&apos;word&apos;,token_pattern=u&apos;(?u)\w+&apos;) #æ³¨æ„è¿™ä¸ªä¼šåŽ»é™¤ç‰¹æ®Šå­—ç¬¦count1 = vectorizer1.transform([u&apos;ä¸­å›½/çˆ±ä½  ä¸­å›½&apos;])tran1 = transformer1.transform(count1) æ³¨æ„è®­ç»ƒç”¨fit_transformï¼Œè€Œä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬ç”¨çš„æ˜¯transform æ¨¡åž‹çš„æ”¹è¿›æ–¹æ³• ä¾‹å¦‚å¯ä»¥è°ƒèŠ‚å¦‚ä¸‹ä¸€äº›å‚æ•°ï¼Œè§‚å¯Ÿå®ƒä»¬å¯¹åžƒåœ¾é‚®ä»¶è¿‡æ»¤çš„å®žé™…æ•ˆæžœçš„å½±å“ï¼š è®­ç»ƒæ•°æ®çš„å¤§å° è¯å…¸çš„å¤§å° ä¸åŒçš„æœºå™¨å­¦ä¹ æ¨¡åž‹ï¼ŒåŒ…æ‹¬ GaussianNBï¼ŒBernoulliNBï¼ŒSVC ä¸åŒçš„ SVM æ¨¡åž‹å‚æ•° åˆ é™¤æ— å…³ç´§è¦çš„è¯æ¥æ”¹è¿›è¯å…¸ ï¼ˆä¾‹å¦‚æ‰‹åŠ¨åˆ é™¤ï¼‰ é‡‡ç”¨å…¶ä»–ç‰¹å¾æ¨¡åž‹ ï¼ˆå¯»æ‰¾ td-idfï¼‰]]></content>
      <tags>
        <tag>python</tag>
        <tag>sklearn</tag>
        <tag>æ–‡æœ¬åˆ†ç±»</tag>
        <tag>è‡ªç„¶è¯­è¨€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®ç§‘å­¦-pandas]]></title>
    <url>%2F2018%2F02%2F28%2F2018%2F%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6-pandas%2F</url>
    <content type="text"><![CDATA[Series1234567891011121314151617181920212223242526In [28]: s1 = Series([1, 2, 3, 4, 5])In [29]: s1Out[29]:0 11 22 33 44 5dtype: int64In [30]: s2 = Series([1, 2, 3, 4, 5], index=[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;])In [31]: s2Out[31]:a 1b 2c 3d 4e 5dtype: int64In [32]: s2.index.name = &apos;index&apos;In [33]: s2.indexOut[33]: Index([&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;], dtype=&apos;object&apos;, name=&apos;index&apos;) pandasåŸºæœ¬æ“ä½œ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283#æ–°å»ºæˆ–è€…è¯»å–æ•°æ®df1 = DataFrame(np.arange(9).reshape(3,3), colums=list(&apos;ABC&apos;), index = list(&apos;abc&apos;))df2 = pd.read_json(&quot;/Users/Hanxiaoyang/Titanic_data/Train.json&quot;) #è¯» df = pd.read_csv(&quot;/Users/Hanxiaoyang/Titanic_data/Train.csv&quot;) #è¯»import pandas as pd# JSON æ–‡ä»¶pd.read_json# HTML æ–‡ä»¶pd.read_html# æœ¬åœ°å‰ªåˆ‡æ¿pd.read_clipboard# MS Excel æ–‡ä»¶pd.read_excel# HDF5Format æ–‡ä»¶pd.read_hdf # Feather æ ¼å¼pd.read_feather#Msgpackpd.read_msgpack# Statapd.read_stata# SASpd.read_sas # Python Pickle æ ¼å¼pd.read_pickle# SQL æ•°æ®åº“pd.read_sql# Google Big Querypd.read_gbq## æ•°æ®æŸ¥çœ‹df.info()df.describe()df.head(10)df.info()df.describe()df.indexdf.columnslen(df[df[&apos;Age&apos;] == 10].index)age=10çš„æ˜¯å¤šå°‘è¡Œ# å–æ•°æ®df[0:3] #ç¬¬ä¸€è¡Œåˆ°ç¬¬ä¸‰è¡Œdf[&apos;Age&apos;][0:10] #pandas.core.series.Series Ageè¿™ä¸ªåˆ—çš„ç¬¬ä¸€è¡Œåˆ°ç¬¬åè¡Œ df.Age[0:10] #Ageè¿™ä¸€åˆ—çš„å‰åä¸ªdf[&apos;Age&apos;].mean() #å¹³å‡å€¼df[[&apos;Sex&apos;,&apos;Pclass&apos;,&apos;Age&apos;]] #æ˜¾ç¤ºå¤šä¸ªåˆ—df[df.columns[0:2]] #æ˜¾ç¤ºå¤šåˆ—df[df[&apos;Age&apos;]&gt;60][[&apos;Sex&apos;,&apos;Pclass&apos;,&apos;Age&apos;,&apos;Survived&apos;]] #å¤§äºŽ60å²çš„df[df[&apos;Age&apos;].isnull()][[&apos;Sex&apos;, &apos;Pclass&apos;, &apos;Age&apos;]]#ä¸ºç©ºçš„df[&apos;Gender&apos;] = 4 #å¢žåŠ ä¸€åˆ—df[&apos;Gender&apos;] = df[&apos;Sex&apos;].map( &#123;&apos;female&apos;: 0, &apos;male&apos;: 1&#125; ).astype(int) #å¯¹åº”çš„æŠŠsexçš„femaleå’Œmaleå˜æ¢ä¸º0ï¼Œ1æ˜ å°„åˆ°å¯¹åº”çš„è¡Œdf[&apos;FamilySize&apos;] = df[&apos;SibSp&apos;] + df[&apos;Parch&apos;] df[&apos;Age*Class&apos;] = df.FamilySize * df.Pclass #æž„é€ æ–°ç‰¹å¾df = df.drop([&apos;Name&apos;, &apos;Sex&apos;, &apos;Ticket&apos;, &apos;Cabin&apos;, &apos;Embarked&apos;], axis=1) #åˆ é™¤æ— ç”¨åˆ—df.loc[:,[&apos;Age&apos;,&apos;Pclass&apos;]] df.iloc[0:2,[0,2]] # å‰è¾¹æ˜¯è¡Œï¼ŒåŽè¾¹æ˜¯æ˜¯åˆ—ï¼Œlocå¿…é¡»ç”¨labelï¼Œilocå¯ä»¥ç”¨æ•°å­—æ³¨æ„è¿™é‡Œilocå’Œlocä»£è¡¨çš„æ˜¯è¡Œknown_age = age_df[age_df.Age.notnull()].as_matrix()unknown_age = age_df[age_df.Age.isnull()].as_matrix()import pylab as P df[&apos;Age&apos;].dropna().hist(bins=16, range=(0,80), alpha = .5) P.show() #ç”»ç›´æ–¹å›¾## ä¿®æ”¹åˆ—åç§°123456789101112131415161718192021é—®é¢˜ï¼šæœ‰ä¸€ä¸ªDataFrameï¼Œåˆ—åä¸ºï¼š[&apos;$a&apos;, &apos;$b&apos;, &apos;$c&apos;, &apos;$d&apos;, &apos;$e&apos;]çŽ°éœ€è¦æ”¹ä¸ºï¼š[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;]æœ‰ä½•åŠžæ³•ï¼Ÿimport pandas as pddf = pd.DataFrame(&#123;&apos;$a&apos;: [1], &apos;$b&apos;: [1], &apos;$c&apos;: [1], &apos;$d&apos;: [1], &apos;$e&apos;: [1]&#125;)è§£å†³ï¼šæ–¹å¼ä¸€ï¼šcolumnså±žæ€§# â‘ æš´åŠ›df.columns = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;]# â‘¡ä¿®æ”¹df.columns = df.columns.str.strip(&apos;$&apos;)# â‘¢ä¿®æ”¹df.columns = df.columns.map(lambda x:x[1:])æ–¹å¼äºŒï¼šrenameæ–¹æ³•ã€columnså‚æ•°# â‘£æš´åŠ›ï¼ˆå¥½å¤„ï¼šä¹Ÿå¯åªä¿®æ”¹ç‰¹å®šçš„åˆ—ï¼‰df.rename(columns=(&apos;$a&apos;: &apos;a&apos;, &apos;$b&apos;: &apos;b&apos;, &apos;$c&apos;: &apos;c&apos;, &apos;$d&apos;: &apos;d&apos;, &apos;$e&apos;: &apos;e&apos;&#125;, inplace=True) èµ‹å€¼æ›¿æ¢12data[&quot;D&quot;] = data[&apos;class&apos;] #å°†classçš„ç»™Ddata[&apos;D&apos;].replace([&apos;C1&apos;,&apos;C2&apos;], [0,1], inplace = True) #å°†classé‡Œè¾¹çš„C1å’ŒC2æ›¿æ¢ä¸º0ï¼Œ1 ç±»åž‹è½¬æ¢12345train_data = df.values #pandasè½¬numpyæ•°ç»„Age = df[&apos;Age&apos;]Age = np.array(Age)Age = Age.reshape(Age.size,1) #Seriseè½¬numpyæ•°ç»„ å›¾åƒå¤„ç†123456789101112data_train.Survived.value_counts().plot(kind=&apos;bar&apos;)# æŸ±çŠ¶å›¾plt.scatter(data_train.Survived, data_train.Age)# æ•£åˆ—data_train.Age[data_train.Pclass == 1].plot(kind=&apos;kde&apos;) data_train.Age[data_train.Pclass == 2].plot(kind=&apos;kde&apos;)data_train.Age[data_train.Pclass == 3].plot(kind=&apos;kde&apos;)# å¯†åº¦å›¾Survived_0 = data_train.Pclass[data_train.Survived == 0].value_counts()Survived_1 = data_train.Pclass[data_train.Survived == 1].value_counts()df=pd.DataFrame(&#123;u&apos;èŽ·æ•‘&apos;:Survived_1, u&apos;æœªèŽ·æ•‘&apos;:Survived_0&#125;)df.plot(kind=&apos;bar&apos;, stacked=True)#æŸ±çŠ¶å›¾ å°†dataformatçš„æ•°æ®å†™å…¥csv1df.to_csv(&apos;foo.csv&apos;) å°†æ•°æ®åº“çš„æ•°æ®å†™å…¥csv1234567891011121314151617181920import csv# æ–‡ä»¶å¤´ï¼Œä¸€èˆ¬å°±æ˜¯æ•°æ®åfileHeader = [&quot;name&quot;, &quot;score&quot;]# å‡è®¾æˆ‘ä»¬è¦å†™å…¥çš„æ˜¯ä»¥ä¸‹ä¸¤è¡Œæ•°æ®d1 = [&quot;Wang&quot;, &quot;100&quot;]d2 = [&quot;Li&quot;, &quot;80&quot;]# å†™å…¥æ•°æ®csvFile = open(&quot;instance.csv&quot;, &quot;w&quot;)writer = csv.writer(csvFile)# å†™å…¥çš„å†…å®¹éƒ½æ˜¯ä»¥åˆ—è¡¨çš„å½¢å¼ä¼ å…¥å‡½æ•°writer.writerow(fileHeader)writer.writerow(d1)writer.writerow(d1)csvFile.close() ç»Ÿè®¡ä¿¡æ¯12345678- `count` å…ƒç´ å€¼çš„æ•°é‡ï¼›- `mean` å¹³å‡å€¼ï¼›- `std` æ ‡å‡†å·®ï¼›- `min` æœ€å°å€¼ï¼›- `25%` ä¸‹å››åˆ†ä½æ•°ï¼›- `50%` ä¸­ä½æ•°ï¼›- `75%` ä¸Šå››åˆ†ä½æ•°ï¼›- `max` æœ€å¤§å€¼ï¼› åˆå¹¶è¿™äº›æ•°æ®é›†æœ‰ç›¸åŒçš„åˆ— 12pd.concat([df1, df2])pd.merge(df1, df2) æŸä¸ªuser_idçš„å­¦ä¹ æ—¶é—´æ€»å’Œ1234567891011121314151617181920In [471]: df[df[&apos;user_id&apos;] == 5348][&apos;minutes&apos;]Out[471]:0 92 45Name: minutes, dtype: int64In [472]: df[df[&apos;user_id&apos;] == 5348]Out[472]: course minutes user_id0 12 9 53482 23 45 5348In [475]: df[df[&apos;user_id&apos;] == 5348][&apos;minutes&apos;]Out[475]:0 92 45Name: minutes, dtype: int64In [476]: df[df[&apos;user_id&apos;] == 5348][&apos;minutes&apos;].sum()Out[476]: 54 ä½¿ç”¨groupby 1234567891011121314151617181920In [471]: df[df[&apos;user_id&apos;] == 5348][&apos;minutes&apos;]Out[471]:0 92 45Name: minutes, dtype: int64In [472]: df[df[&apos;user_id&apos;] == 5348]Out[472]: course minutes user_id0 12 9 53482 23 45 5348In [475]: df[df[&apos;user_id&apos;] == 5348][&apos;minutes&apos;]Out[475]:0 92 45Name: minutes, dtype: int64In [476]: df[df[&apos;user_id&apos;] == 5348][&apos;minutes&apos;].sum()Out[476]: 54 ç¼ºå¤±å€¼å¤„ç†æŸ¥æ‰¾ç¼ºå¤±å€¼æŸ¥æ‰¾ç¼ºå¤±å€¼ï¼Œæˆ‘ä»¬ä¾æ—§å¯ä»¥ä½¿ç”¨ Pandas è¿›è¡Œå¤„ç†ã€‚Pandas ä¸­ï¼Œç¼ºå¤±æ•°æ®ä¸€èˆ¬é‡‡ç”¨NaNæ ‡è®°NaN ä»£è¡¨ Not a Numberã€‚ç‰¹åˆ«åœ°ï¼Œåœ¨æ—¶é—´åºåˆ—é‡Œï¼Œæ—¶é—´æˆ³çš„ä¸¢å¤±é‡‡ç”¨ NaT æ ‡è®° Pandas ç”¨äºŽæ£€æµ‹ç¼ºå¤±å€¼ä¸»è¦ç”¨åˆ°ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ï¼šisnull() å’Œ notnull()ï¼Œæ•…åæ€æ„å°±æ˜¯ã€Œæ˜¯ç¼ºå¤±å€¼ã€å’Œã€Œä¸æ˜¯ç¼ºå¤±å€¼ã€ã€‚é»˜è®¤ä¼šè¿”å›žå¸ƒå°”å€¼ç”¨äºŽåˆ¤æ–­ 12print(df.head(10).isnull())print(df.head(10).notnull()) å…³äºŽç¼ºå¤±å€¼å¤„ç†ï¼Œä¸»è¦æœ‰ä¸¤ç§å¤„ç†æ‰‹æ®µï¼šåˆ é™¤ç¼ºå¤±å€¼æ‰€åœ¨çš„è¡Œæˆ–åˆ—æˆ–å¡«å……ç¼ºå¤±å€¼ å¤„ç†ç¼ºå¤±å€¼åˆ é™¤ç¼ºå¤±å€¼æ˜¯æœ€ç®€å•ç›´æŽ¥çš„åŠžæ³•ä¹‹ä¸€ã€‚å®ƒé€‚ç”¨äºŽä¸‰ç§æƒ…å†µï¼š ç¼ºå¤±å€¼å°‘ï¼Œå¯¹æ•°æ®é›†çš„å½±å“å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚è¿™å¥è¯çš„æ„æ€åº”è¯¥å¾ˆå¥½ç†è§£ã€‚æ¯”å¦‚ä¸€ä¸ªæ•°ä¸‡è¡Œçš„æ•°æ®é›†ï¼Œæ°å¥½æœ‰æŸå‡ è¡Œç¼ºå¤±äº†å‡ ä¸ªç‰¹å¾å€¼ã€‚ç¼ºå¤±çš„æ•°æ®è¡Œè¿œè¿œå°äºŽå…¨éƒ¨æ•°æ®çš„æ•°é‡ï¼Œä¸”åˆ é™¤è¿™å‡ è¡Œä¹‹åŽï¼Œå¯¹åŽŸæ•°æ®é›†çš„å½±å“å¯ä»¥å¿½ç•¥ã€‚è¿™æ—¶å€™ï¼Œç›´æŽ¥åˆ é™¤ç¼ºå¤±å€¼æ‰€åœ¨çš„è¡Œæ˜¯æœ€å¥½çš„ã€‚ ç¼ºå¤±æ•°æ®é‡å¤§ï¼Œå·²æ— æ³•æŒ½æ•‘ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªæ•°æ®é›†æœ‰1 ä¸‡è¡Œï¼Œå­˜åœ¨ 10 ä¸ªç‰¹å¾åˆ—ã€‚å…¶ä¸­æŸä¸€é¡¹ç‰¹å¾æ‰€åœ¨çš„åˆ—å­˜åœ¨ 9000 ä¸ªç©ºå€¼ã€‚è¿™ä¹Ÿå°±è¡¨æ˜Žè¯¥åˆ—å­˜åœ¨çš„æ„ä¹‰å·²ç»ä¸å¤§äº†ã€‚æ‰€ä»¥ä¹Ÿéœ€è¦åˆ é™¤æ•°æ®ã€‚ è¯¥ç¼ºå¤±å€¼æ— æ³•è¢«å¡«å……ã€‚è¿™ç§æƒ…å†µä¹Ÿå¾ˆå¸¸è§ã€‚å°±æ‹¿æˆ‘ä»¬ä¸Šé¢ä¸€ç›´åœ¨ç”¨çš„ test_file.csv æ•°æ®é›†è·ç¦»ã€‚è¯¥æ•°æ®é›†å®žé™…ä¸ºæ´›æ‰çŸ¶äººå£æ™®æŸ¥æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ•°æ®é›†ä¸­æœ‰ä¸€åˆ—ä¸º Zip Codeï¼Œä¹Ÿå°±æ˜¯é‚®ç¼–ã€‚é‚®ç¼–æ˜¯å®¢è§‚å­˜åœ¨çš„ï¼Œä¹Ÿæ˜¯ä¸èƒ½éšæ„æ›´æ”¹çš„ã€‚å¦‚æžœæŸå‡ é¡¹é‚®ç¼–ç¼ºå¤±ï¼Œä½ æ˜¯æ— æ³•éšæ„é€šè¿‡ä¸€äº›æ•°å€¼æ¥å¡«å……é‚®ç¼–ã€‚æ‰€ä»¥ï¼Œå¯¹åº”è¿™æ ·çš„æ•°æ®è¡Œå·²ç»æ²¡æœ‰æ„ä¹‰ï¼Œé€‰æ‹©ç›´æŽ¥åˆ é™¤å¾€å¾€æ˜¯æœ€å¥½çš„ã€‚åˆ é™¤ç¼ºå¤±å€¼æ‰€åœ¨çš„åˆ—æˆ–è¡Œéžå¸¸ç®€å•ï¼Œä½¿ç”¨Pandasæä¾›çš„ dropna() æ–¹æ³•ã€‚dropna() æ–¹æ³•å¯ä»¥å°†æœ‰ç¼ºå¤±å€¼çš„è¡Œæˆ–åˆ—å…¨éƒ¨ç§»é™¤ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ axis=0 å‚æ•°æŒ‡å®šè¡Œï¼Œæˆ– axis=1 å‚æ•°æŒ‡å®šåˆ— 123456import pandas as pddf = pd.read_csv(&quot;test_file_nan.csv&quot;)print(df.dropna(axis=0)) #è¿™ä¸ªä¼šåˆ é™¤å­˜åœ¨ç©ºå€¼çš„è¡Œprint(df.dropna(axis=1)) #è¿™ä¸ªä¼šåˆ é™¤å­˜åœ¨ç©ºå€¼çš„åˆ— å¡«å……ç¼ºå¤±å€¼é™¤äº†åˆ é™¤ç¼ºå¤±å€¼ï¼Œå¯¹ç¼ºå¤±å€¼å¤„ç†çš„å¦å¤–ä¸€ç§æ–¹æ³•å°±æ˜¯å¡«å……ç¼ºå¤±å€¼ã€‚å¦‚æžœä½ ç¬¬ä¸€æ¬¡æŽ¥è§¦ç¼ºå¤±å€¼å¤„ç†ï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºå¡«å……ç¼ºå¤±å€¼çš„å¤„ç†å¥½äºŽç›´æŽ¥åˆ é™¤ç¼ºå¤±å€¼ã€‚å…¶å®žå¹¶ä¸ä¸€å®šï¼ŒåŽŸå› åœ¨äºŽå¡«å……ç¼ºå¤±å€¼ä¼šç›´æŽ¥æ”¹å˜åŽŸæœ‰æ•°æ®é›†ï¼Œè¿™å¯èƒ½ä¼šå½±å“åŽç»­é¢„æµ‹åˆ†æžçš„ç»“æžœã€‚æ‰€ä»¥ï¼Œä½¿ç”¨å¡«å……ç¼ºå¤±å€¼æ—¶ä¸€å®šè¦æ›´åŠ è°¨æ…Žã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¡«å……ç¼ºå¤±å€¼æœ‰ä¸‰ç§æ–¹æ³•ã€‚ æ‰‹åŠ¨å¡«å……æ‰‹åŠ¨å¡«å……è™½ç„¶æ˜¯ç¬¨åŠžæ³•ï¼Œä½†å¾€å¾€æ˜¯æ•ˆæžœæœ€å¥½çš„æ–¹æ³•ã€‚æ‰‹åŠ¨å¡«å……éžå¸¸é€‚åˆäºŽä¸€ç§æƒ…å½¢ï¼Œé‚£å°±æ˜¯æ•°æ®å¯ä»¥è¢«äººä¸ºæœ‰æ•ˆç¡®å®šã€‚ä¸¾ä¸ªä¾‹å­ï¼šä¸Šé¢çš„æ´›æ‰çŸ¶äººå£æ™®æŸ¥æ•°æ®è¡¨ä¸­ï¼Œç¬¬ä¸€åˆ—ä¸ºé‚®ç¼–ï¼Œå®ƒç”¨äºŽæ ‡è®°ä¸åŒçš„åœ°åŒºã€‚å¦‚æžœé‚®ç¼–æœ‰å‡ é¡¹æ•°æ®ç¼ºå¤±ï¼Œé‚£ä¹ˆé€šè¿‡æ‰‹åŠ¨ç­›é€‰å†å¡«å……é‚®ç¼–å°±æ˜¯æœ€é€‚åˆçš„æ–¹æ³•ã€‚åŽŸå› åœ¨äºŽï¼Œé‚®ç¼–å’Œå…¶ä»–æ•°æ®ä¸ä¸€æ ·ï¼Œå¦‚æžœå®ƒä¸å­˜åœ¨æˆ–ä¸æ­£ç¡®ï¼Œå°±ç›´æŽ¥å¯¼è‡´è¿™è¡Œæ•°æ®æ— æ•ˆï¼Œç”šè‡³å½±å“åˆ°å…¶ä»–æ•°æ®ã€‚æ‰‹åŠ¨å¡«å……ï¼Œå……åˆ†å±•çŽ°äº†äººçš„çµæ´»æ€§ï¼Œä½†åŒæ ·æ˜¯ä¸€ä¸ªè´¹æ—¶è´¹åŠ›çš„åŠžæ³•ã€‚ ä¸´è¿‘å¡«å…… ä¸´è¿‘å¡«å……ï¼Œæ•…åæ€æ„å°±æ˜¯é‡‡ç”¨ä¸Žç¼ºå¤±å€¼ç›¸é‚»çš„æ•°æ®è¿›è¡Œå¡«å……ç¼ºå¤±å€¼çš„æ–¹æ³•ã€‚ä¸´è¿‘å¡«å……æ¯”è¾ƒé€‚åˆäºŽé›¶æ•£çš„ä¸ç¡®å®šæ•°æ®ã€‚é›¶æ•£ï¼ŒæŒ‡çš„æ˜¯ä¸ä¼šè¿žç»­ç¼ºå¤±æ•°åä¸ªæˆ–ä¸Šç™¾ä¸ªæ•°æ®å€¼ã€‚å¦‚æžœè¿žç»­ç¼ºå¤±çš„å€¼å¤ªå¤šï¼Œä½ ç”¨ä¸´è¿‘å¡«å……å°†å…¶å˜ä¸ºåŒä¸€æ•°æ®å€¼ï¼Œè¿™å¯¹æ•°æ®é›†æ•´ä½“çš„å½±å“å¯æƒ³è€ŒçŸ¥ã€‚ä¸ç¡®å®šæ•°æ®ï¼Œå°±æ˜¯é€šè¿‡è§†è§‰è§‚å¯Ÿï¼Œæ— æ³•å‘çŽ°ç›¸é‚»æ•°æ®ä¹‹é—´æœ‰ä»€ä¹ˆè”ç³»ï¼Œå‰åŽæ•°æ®æ—¶å¤§æ—¶å°ï¼Œæ— æ³•è¢«äººä¸ºç¡®å®šæˆ–æ‰¾å‡ºè§„å¾‹ã€‚ Pandas æä¾›äº†ç”¨äºŽä¸´è¿‘å¡«å……çš„fillna()æ–¹æ³•ã€‚è¯¥æ–¹æ³•çš„ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345import pandas as pddf = pd.read_csv(&quot;test_file_nan.csv&quot;)print(df.head(10).fillna(method=&apos;pad&apos;)) æˆ‘ä»¬å¯ä»¥å¯¹ç…§ç¼ºå¤±å€¼æ•°æ®ï¼Œçœ‹åˆ°å…¶è¢«å‰é¢çš„ä¸´è¿‘å€¼è¿›è¡Œäº†å¡«å……ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥æ›´æ¢ method=â€™bfillâ€™ å‚æ•°ï¼Œä½¿ç”¨åŽé¢çš„ä¸´è¿‘å€¼è¿›è¡Œå¡«å……ã€‚ 1print(df.head(10).fillna(method=&apos;bfill&apos;)) è¿™é‡Œå› ä¸ºæœ€åŽä¸€é¡¹ä¸ºç¼ºå¤±æ•°æ®ï¼Œæ‰€ä»¥æœ‰ä¸€éƒ¨åˆ†ç¼ºå¤±å€¼æ— æ³•è¢«æœ‰æ•ˆå¡«å……ã€‚ è¿™é‡Œä½ ä¹Ÿæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬çš„æ•°æ®å…¶å®žæœ‰ 200 å¤šè¡Œï¼Œç¬¬ä¸‰åˆ—çš„ 4-9 è¡Œåº”è¯¥èƒ½è¢«å¡«å……ï¼Œä½†ä¸ºä»€ä¹ˆè¿˜æ˜¯ NaN ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œfillna()æ–¹æ³•åœ¨å¡«å……æ—¶å¹¶ä¸ä¼šå½±å“åŽŸæœ‰æ•°æ®é›†ã€‚ é™¤äº†ä¸´è¿‘å¡«å……ï¼Œæœ‰äº‹æˆ‘ä»¬è¿˜ä¼šç”¨mean()è¿›è¡Œå¹³å‡å€¼å¡«å……ã€‚ 3. æ’å€¼å¡«å……æ’å€¼å¡«å……å°±æ˜¯é‡‡ç”¨æ•°å­¦çš„æ–¹æ³•å¯¹æ•°æ®è¿›è¡Œæ’å€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæœ‰ä¸€åˆ—æ•°æ®ä¸º [2011, 2012, 2013, ç¼ºå¤±å€¼, ç¼ºå¤±å€¼, 2016, 2017] ã€‚è¿™é‡Œï¼Œæ— è®ºä½ é‡‡ç”¨å‘å‰è¿˜æ˜¯å‘åŽå¡«å……ï¼Œå…¶å®žéƒ½ä¸æ˜¯æœ€å¥½çš„ã€‚ä½ å¯ä»¥å‘çŽ°æ•°æ®æ˜¯ä¸€ä¸ªç­‰å·®æ•°åˆ—ï¼Œç¼ºå¤±å€¼åº”è¯¥åˆ†åˆ«ä¸º[2014, 2015]ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸€ä¸ªçº¿æ€§æ’å€¼çš„è¿‡ç¨‹ã€‚ Pandas æä¾›äº†ç›¸å…³æ’å€¼æ–¹æ³•ï¼Œé€šè¿‡interpolate()æ–¹æ³•å®žçŽ°ã€‚é»˜è®¤ä¸ºå‚æ•°ä¸ºçº¿æ€§æ’å€¼ï¼Œå³ method=â€™linearâ€™ã€‚ä¸¾ä¾‹ï¼š 12345import pandas as pddf = pd.read_csv(&quot;test_file_nan.csv&quot;)print(df.interpolate().head(10)) æ³¨æ„çº¿æ€§æ’å€¼ç»“æžœä¸Žå‰é¢ä¸´è¿‘æ’å€¼ç»“æžœçš„åŒºåˆ«ï¼Œç¬¬ä¸€åˆ—æ˜Žæ˜¾è¦å¥½å¾ˆå¤šã€‚ å¡«å……ç¼ºå¤±å€¼é™¤äº†åˆ é™¤ç¼ºå¤±å€¼ï¼Œå¯¹ç¼ºå¤±å€¼å¤„ç†çš„å¦å¤–ä¸€ç§æ–¹æ³•å°±æ˜¯å¡«å……ç¼ºå¤±å€¼ã€‚å¦‚æžœä½ ç¬¬ä¸€æ¬¡æŽ¥è§¦ç¼ºå¤±å€¼å¤„ç†ï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºå¡«å……ç¼ºå¤±å€¼çš„å¤„ç†å¥½äºŽç›´æŽ¥åˆ é™¤ç¼ºå¤±å€¼ã€‚å…¶å®žå¹¶ä¸ä¸€å®šï¼ŒåŽŸå› åœ¨äºŽå¡«å……ç¼ºå¤±å€¼ä¼šç›´æŽ¥æ”¹å˜åŽŸæœ‰æ•°æ®é›†ï¼Œè¿™å¯èƒ½ä¼šå½±å“åŽç»­é¢„æµ‹åˆ†æžçš„ç»“æžœã€‚æ‰€ä»¥ï¼Œä½¿ç”¨å¡«å……ç¼ºå¤±å€¼æ—¶ä¸€å®šè¦æ›´åŠ è°¨æ…Žã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¡«å……ç¼ºå¤±å€¼æœ‰ä¸‰ç§æ–¹æ³•ã€‚ æ‰‹åŠ¨å¡«å……ã€‚æ‰‹åŠ¨å¡«å……è™½ç„¶æ˜¯ç¬¨åŠžæ³•ï¼Œä½†å¾€å¾€æ˜¯æ•ˆæžœæœ€å¥½çš„æ–¹æ³•ã€‚æ‰‹åŠ¨å¡«å……éžå¸¸é€‚åˆäºŽä¸€ç§æƒ…å½¢ï¼Œé‚£å°±æ˜¯æ•°æ®å¯ä»¥è¢«äººä¸ºæœ‰æ•ˆç¡®å®šã€‚ä¸¾ä¸ªä¾‹å­ï¼šä¸Šé¢çš„æ´›æ‰çŸ¶äººå£æ™®æŸ¥æ•°æ®è¡¨ä¸­ï¼Œç¬¬ä¸€åˆ—ä¸ºé‚®ç¼–ï¼Œå®ƒç”¨äºŽæ ‡è®°ä¸åŒçš„åœ°åŒºã€‚å¦‚æžœé‚®ç¼–æœ‰å‡ é¡¹æ•°æ®ç¼ºå¤±ï¼Œé‚£ä¹ˆé€šè¿‡æ‰‹åŠ¨ç­›é€‰å†å¡«å……é‚®ç¼–å°±æ˜¯æœ€é€‚åˆçš„æ–¹æ³•ã€‚åŽŸå› åœ¨äºŽï¼Œé‚®ç¼–å’Œå…¶ä»–æ•°æ®ä¸ä¸€æ ·ï¼Œå¦‚æžœå®ƒä¸å­˜åœ¨æˆ–ä¸æ­£ç¡®ï¼Œå°±ç›´æŽ¥å¯¼è‡´è¿™è¡Œæ•°æ®æ— æ•ˆï¼Œç”šè‡³å½±å“åˆ°å…¶ä»–æ•°æ®ã€‚æ‰‹åŠ¨å¡«å……ï¼Œå……åˆ†å±•çŽ°äº†äººçš„çµæ´»æ€§ï¼Œä½†åŒæ ·æ˜¯ä¸€ä¸ªè´¹æ—¶è´¹åŠ›çš„åŠžæ³•ã€‚ ä¸´è¿‘å¡«å……ã€‚ ä¸´è¿‘å¡«å……ï¼Œæ•…åæ€æ„å°±æ˜¯é‡‡ç”¨ä¸Žç¼ºå¤±å€¼ç›¸é‚»çš„æ•°æ®è¿›è¡Œå¡«å……ç¼ºå¤±å€¼çš„æ–¹æ³•ã€‚ä¸´è¿‘å¡«å……æ¯”è¾ƒé€‚åˆäºŽé›¶æ•£çš„ä¸ç¡®å®šæ•°æ®ã€‚é›¶æ•£ï¼ŒæŒ‡çš„æ˜¯ä¸ä¼šè¿žç»­ç¼ºå¤±æ•°åä¸ªæˆ–ä¸Šç™¾ä¸ªæ•°æ®å€¼ã€‚å¦‚æžœè¿žç»­ç¼ºå¤±çš„å€¼å¤ªå¤šï¼Œä½ ç”¨ä¸´è¿‘å¡«å……å°†å…¶å˜ä¸ºåŒä¸€æ•°æ®å€¼ï¼Œè¿™å¯¹æ•°æ®é›†æ•´ä½“çš„å½±å“å¯æƒ³è€ŒçŸ¥ã€‚ä¸ç¡®å®šæ•°æ®ï¼Œå°±æ˜¯é€šè¿‡è§†è§‰è§‚å¯Ÿï¼Œæ— æ³•å‘çŽ°ç›¸é‚»æ•°æ®ä¹‹é—´æœ‰ä»€ä¹ˆè”ç³»ï¼Œå‰åŽæ•°æ®æ—¶å¤§æ—¶å°ï¼Œæ— æ³•è¢«äººä¸ºç¡®å®šæˆ–æ‰¾å‡ºè§„å¾‹ã€‚ Pandas æä¾›äº†ç”¨äºŽä¸´è¿‘å¡«å……çš„fillna()æ–¹æ³•ã€‚è¯¥æ–¹æ³•çš„ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š import pandas as pd df = pd.read_csv(â€œtest_file_nan.csvâ€) print(df.head(10).fillna(method=â€™padâ€™))æˆ‘ä»¬å¯ä»¥å¯¹ç…§ç¼ºå¤±å€¼æ•°æ®ï¼Œçœ‹åˆ°å…¶è¢«å‰é¢çš„ä¸´è¿‘å€¼è¿›è¡Œäº†å¡«å……ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥æ›´æ¢ method=â€™bfillâ€™ å‚æ•°ï¼Œä½¿ç”¨åŽé¢çš„ä¸´è¿‘å€¼è¿›è¡Œå¡«å……ã€‚ print(df.head(10).fillna(method=â€™bfillâ€™))è¿™é‡Œå› ä¸ºæœ€åŽä¸€é¡¹ä¸ºç¼ºå¤±æ•°æ®ï¼Œæ‰€ä»¥æœ‰ä¸€éƒ¨åˆ†ç¼ºå¤±å€¼æ— æ³•è¢«æœ‰æ•ˆå¡«å……ã€‚ è¿™é‡Œä½ ä¹Ÿæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬çš„æ•°æ®å…¶å®žæœ‰ 200 å¤šè¡Œï¼Œç¬¬ä¸‰åˆ—çš„ 4-9 è¡Œåº”è¯¥èƒ½è¢«å¡«å……ï¼Œä½†ä¸ºä»€ä¹ˆè¿˜æ˜¯ NaN ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œfillna()æ–¹æ³•åœ¨å¡«å……æ—¶å¹¶ä¸ä¼šå½±å“åŽŸæœ‰æ•°æ®é›†ã€‚ é™¤äº†ä¸´è¿‘å¡«å……ï¼Œæœ‰äº‹æˆ‘ä»¬è¿˜ä¼šç”¨mean()è¿›è¡Œå¹³å‡å€¼å¡«å……ã€‚ æ’å€¼å¡«å……ã€‚æ’å€¼å¡«å……å°±æ˜¯é‡‡ç”¨æ•°å­¦çš„æ–¹æ³•å¯¹æ•°æ®è¿›è¡Œæ’å€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæœ‰ä¸€åˆ—æ•°æ®ä¸º [2011, 2012, 2013, ç¼ºå¤±å€¼, ç¼ºå¤±å€¼, 2016, 2017] ã€‚è¿™é‡Œï¼Œæ— è®ºä½ é‡‡ç”¨å‘å‰è¿˜æ˜¯å‘åŽå¡«å……ï¼Œå…¶å®žéƒ½ä¸æ˜¯æœ€å¥½çš„ã€‚ä½ å¯ä»¥å‘çŽ°æ•°æ®æ˜¯ä¸€ä¸ªç­‰å·®æ•°åˆ—ï¼Œç¼ºå¤±å€¼åº”è¯¥åˆ†åˆ«ä¸º[2014, 2015]ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸€ä¸ªçº¿æ€§æ’å€¼çš„è¿‡ç¨‹ã€‚ Pandas æä¾›äº†ç›¸å…³æ’å€¼æ–¹æ³•ï¼Œé€šè¿‡interpolate()æ–¹æ³•å®žçŽ°ã€‚é»˜è®¤ä¸ºå‚æ•°ä¸ºçº¿æ€§æ’å€¼ï¼Œå³ method=â€™linearâ€™ã€‚ä¸¾ä¾‹ï¼š 12345import pandas as pddf = pd.read_csv(&quot;test_file_nan.csv&quot;)print(df.interpolate().head(10)) æ³¨æ„çº¿æ€§æ’å€¼ç»“æžœä¸Žå‰é¢ä¸´è¿‘æ’å€¼ç»“æžœçš„åŒºåˆ«ï¼Œç¬¬ä¸€åˆ—æ˜Žæ˜¾è¦å¥½å¾ˆå¤šã€‚ ç‹¬çƒ­ç¼–ç åœ¨å¯¹æ•°æ®çš„é¢„å¤„ç†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°æœ‰ä¸€äº›ç‰¹å¾åˆ—ä¸­çš„æ ·æœ¬å¹¶ä¸æ˜¯è¿žç»­å­˜åœ¨çš„ï¼Œè€Œæ˜¯ä»¥åˆ†ç±»å½¢å¼å­˜åœ¨çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼ŒæŸä¸€è£…ç½®çš„çŠ¶æ€æœ‰ä¸‰ç§æƒ…å†µï¼Œåˆ†åˆ«ä¸ºï¼šæ­£å¸¸ã€æœºæ¢°æ•…éšœã€ç”µè·¯æ•…éšœã€‚å¦‚æžœæˆ‘ä»¬è¦å°†è¿™äº›æ•°æ®è¿ç”¨åˆ°åŽç»­çš„é¢„æµ‹åˆ†æžä¸­ï¼Œå°±éœ€è¦å¯¹æ–‡å­—çŠ¶æ€è¿›è¡Œè½¬æ¢ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯ä»¥ç”¨ 0 è¡¨ç¤ºæ­£å¸¸ï¼Œ1 ä»£è¡¨æœºæ¢°æ•…éšœï¼Œ2 ä»£è¡¨ç”µè·¯æ•…éšœã€‚ ä½†æ˜¯è¿™ç§æ˜ å°„æ–¹å¼ï¼Œå¾€å¾€ä¼šè®©å­¦ä¹ å™¨è®¤ä¸º 2 ä»£è¡¨ç”µè·¯æ•…éšœæ¯” 1 ä»£è¡¨æœºæ¢°æ•…éšœæ›´ã€Œå¤§ã€ï¼Œä»Žè€Œå½±å“æ¨¡åž‹åˆ†æžç»“æžœï¼Œè¿™è‚¯å®šæ˜¯ä¸è¡Œçš„ã€‚ æ‰€ä»¥ï¼Œå¯¹äºŽä»¥åˆ†ç±»å½¢å¼å­˜åœ¨çš„ç‰¹å¾å˜é‡ï¼Œæˆ‘ä»¬ä¼šé‡‡ç”¨ä¸€ç§å«ç‹¬çƒ­ç¼–ç ï¼ˆOne-Hot Encodingï¼‰çš„æ–¹å¼å°†å…¶è½¬æ¢æˆäºŒå…ƒç‰¹å¾ç¼–ç ï¼Œè¿›ä¸€æ­¥å¯¹ç‰¹å¾è¿›è¡Œäº†ç¨€ç–å¤„ç†ã€‚ç‹¬çƒ­ç¼–ç é‡‡ç”¨ä½çŠ¶æ€å¯„å­˜å™¨æ¥å¯¹ä¸ªçŠ¶æ€è¿›è¡Œç¼–ç ï¼Œæ¯ä¸ªçŠ¶æ€éƒ½ç”±ä»–ç‹¬ç«‹çš„å¯„å­˜å™¨ä½ï¼Œå¹¶ä¸”åœ¨ä»»æ„æ—¶å€™åªæœ‰ä¸€ä½æœ‰æ•ˆã€‚ä¸¾ä¾‹å¦‚ä¸‹ï¼š Pandas æä¾›äº†æ›´ç®€å•çš„æ–¹æ³•æ¥å¤„ç†ä»¥åˆ†ç±»å½¢å¼çš„å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ get_dummies() å°†ä»¥åˆ†ç±»å½¢å¼å­˜åœ¨çš„å˜é‡è½¬æ¢ä¸ºç‹¬çƒ­ç¼–ç ã€‚123import pandas as pddf = pd.read_csv(&quot;one_hot_demo.csv&quot;, header=0) åœ¨æ­¤æ¼”ç¤ºæ–‡ä»¶ä¸­ï¼Œstatus å…±æœ‰ none, electric, engineä¸‰ç±»æ•°å€¼ã€‚color æœ‰red å’Œ greenä¸¤ç±»ã€‚ 12oneHot = pd.get_dummies(df[[&apos;status&apos;, &apos;color&apos;]])oneHot.head(10) æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå­—ç¬¦ä¸²è¢«è¿›è¡Œäº†ç‹¬çƒ­ç¼–ç ï¼Œç‰¹å¾ä¹Ÿä»ŽåŽŸå…ˆçš„ 2 åˆ—æ‹“å……ä¸º 5 åˆ—ã€‚æ‰€ä»¥ï¼Œç‹¬çƒ­ç¼–ç çš„å¥½å¤„å¤šå¤š é‡å¤å€¼å¤„ç†æ•°æ®é›†ä¸­åŒ…å«å¤§é‡çš„é‡å¤æ•°æ®ä¹Ÿæ˜¯æ•°æ®é¢„å¤„ç†ä¼šç»å¸¸é¢ä¸´çš„çŠ¶å†µã€‚æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ Pandas æä¾›äº†å“ªäº›ç”¨äºŽå¤„ç†é‡å¤æ•°æ®çš„æ–¹æ³•ã€‚ pandas.DataFrame.duplicated() å¯ä»¥ç”¨æ¥æ ‡è¯†é‡å¤æ•°æ®ï¼Œæ•°æ®é›†ä¸­é‡å¤æ•°æ®è¡Œä¼šè¿”å›žå¸ƒå°”ç±»åž‹ Trueã€‚ä¸Šé¢çš„ç‹¬çƒ­ç¼–ç ç¤ºä¾‹æ•°æ®é›†ä¸­å­˜åœ¨å¤§é‡é‡å¤æ•°æ®ï¼Œæˆ‘ä»¬å°±æ‹¿å®ƒä¸¾ä¾‹ï¼š 123import pandas as pddf = pd.read_csv(&quot;one_hot_demo.csv&quot;, header=0) print(pd.DataFrame.duplicated(df).head(10))æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå‰ 10 è¡Œæ•°æ®ä¸­ï¼Œå°±æœ‰ 5 è¡Œä¸ºé‡å¤æ•°æ®ã€‚å½“ç„¶è¿™ä¸ªæ˜¯å®Œæ•´æ•°æ®é›†çš„æ¯”å¯¹ç»“æžœï¼Œè¿™é‡Œåªæ˜¯æ˜¾ç¤ºäº†å‰ 10 è¡Œã€‚ pandas.DataFrame.drop_duplicates()å¯ä»¥è¿”å›žä¸€ä¸ªåŽ»é‡åŽçš„æ•°æ®é›†ã€‚12345import pandas as pddf = pd.read_csv(&quot;one_hot_demo.csv&quot;, header=0)print(pd.DataFrame.drop_duplicates(df)) åŽ»é‡åŽçš„æ•°æ®é›†å¦‚ä¸‹ï¼Œä»…æœ‰ 6 è¡Œéžé‡å¤é¡¹ã€‚ å¼‚å¸¸å€¼æ£€æµ‹é™¤äº†ç¼ºå¤±å€¼ä¸Žé‡å¤å€¼ï¼Œåœ¨å¤„ç†æ•°å€¼åž‹æ•°æ®æ—¶ï¼Œæˆ‘ä»¬è¿˜å®¹æ˜“é‡åˆ°ä¸€ç§çŠ¶å†µï¼Œé‚£å°±æ˜¯å¼‚å¸¸å€¼ã€‚å¼‚å¸¸å€¼æ£€æµ‹æ˜¯å¤„ç†æ•°å€¼åž‹æ•°æ®è¿‡ç¨‹ä¸­å¿…é¡»é‡è§†çš„ä¸€é¡¹å·¥ä½œã€‚é‚£äº›åœ¨æ”¶é›†ã€å½•å…¥è¿‡ç¨‹ä¸­äº§ç”Ÿçš„å¼‚å¸¸æ•°æ®ï¼Œå¦‚æžœä¸åŠæ—¶å‰”é™¤ï¼Œå¾ˆå¯èƒ½å¯¹åŽç»­çš„é¢„æµ‹åˆ†æžå¸¦æ¥ä¸¥é‡ä¸è‰¯å½±å“ã€‚ åº”ç”¨æ•°å­¦å’Œç»Ÿè®¡å­¦é¢†åŸŸå¯¹å¼‚å¸¸å€¼æ£€æµ‹ç ”ç©¶æ¯”è¾ƒæ·±å…¥ï¼Œç›®å‰å­˜åœ¨çš„æ£€æµ‹æ–¹æ³•ä¹Ÿéžå¸¸å¤šã€‚å¤§è‡´æ¥è®²ï¼Œæœ‰ä»Žæ¦‚çŽ‡æ–¹æ³•å…¥æ‰‹çš„ä¸€å…ƒæ­£æ€åˆ†å¸ƒåŠå¤šå…ƒé«˜æ–¯æ–¹æ³•ï¼Œè¿˜æœ‰é€šè¿‡çŸ©é˜µåˆ†è§£å’Œç¥žç»ç½‘ç»œè¿›è¡Œå¼‚å¸¸å€¼æ£€æµ‹çš„ç›¸å…³æ–¹æ³•ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä»‹ç»ä¸€ç§ç®€å•ç›´è§‚çš„å¼‚å¸¸å€¼æ£€æµ‹æ–¹æ³•ï¼Œé‚£å°±æ˜¯é€šè¿‡ç®±å½¢å›¾ï¼ˆç®±çº¿å›¾ï¼‰æ¥è¯†åˆ«å¼‚å¸¸æ•°æ®ã€‚ç®±å½¢å›¾æ˜¯ç”¨æ¥è§‚æµ‹æ•°æ®é›†åˆ†å¸ƒçš„ä¸€ç§å›¾å½¢ç±»åž‹ã€‚ç®±å½¢å›¾ä¸­ï¼Œä»Žä¸Šåˆ°ä¸‹ä¾æ¬¡æœ‰ 6 ä¸ªæ•°æ®èŠ‚ç‚¹ï¼Œåˆ†åˆ«æ˜¯ä¸Šç•Œã€ä¸Šå››åˆ†ä½ã€å‡å€¼ã€ä¸­ä½æ•°ã€ä¸‹å››åˆ†ä½ã€ä¸‹ç•Œã€‚è€Œé‚£äº›è¶…è¿‡ä¸Šç•Œçš„å€¼å°±ä¼šè¢«æ ‡è®°ä¸ºç¦»ç¾¤ç‚¹ï¼Œä¹Ÿå°±æ˜¯å¼‚å¸¸æ•°æ®ã€‚ ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ä¸Šä¸€èŠ‚æåˆ°çš„æ´›æ‰çŸ¶äººå£æ•°æ®è¿›è¡Œç®±å½¢å›¾ç»˜åˆ¶ã€‚12345678910from matplotlib import pyplot as pltimport pandas as pddata = pd.read_csv(&quot;test_file.csv&quot;, header=0)Total_Population = data[&quot;Total Population&quot;]plt.boxplot(Total_Population)plt.show() æˆ‘ä»¬å¯ä»¥å°†ç¦»ç¾¤ç‚¹æ ‡è®°å¹¶å¯¼å‡ºï¼š 123456789101112from matplotlib import pyplot as pltimport pandas as pddata = pd.read_csv(&quot;test_file.csv&quot;, header=0)Total_Population = data[&quot;Total Population&quot;]P = plt.boxplot(Total_Population)outlier = P[&apos;fliers&apos;][0].get_ydata()print(outlier) å…¶å®žï¼ŒDataFrame å¸¦æœ‰ boxplot() æ–¹æ³•å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†æ‰€æœ‰åˆ—æ•°æ®çš„ç®±å½¢å›¾ç”»åœ¨ä¸€å¼ å›¾ä¸­å¯¹æ¯”ï¼š 1234567from matplotlib import pyplot as pltimport pandas as pddata = pd.read_csv(&quot;test_file.csv&quot;, header=0)data.boxplot()plt.show() å¼‚å¸¸å€¼åœ¨å‰é¢çš„å®žéªŒä¸­æˆ‘ä»¬å­¦ä¹ è¿‡å››åˆ†ä½æ•°ã€‚å››åˆ†ä½æ•°ï¼Œæ˜¯æŒ‡å°†ä¸€ç»„æ•°æ®å€¼æŒ‰å¤§å°æŽ’åºåŽåˆ†æˆå››ç­‰åˆ†ï¼Œæ¯ä¸€éƒ¨åˆ†åŒ…å« 1/4 çš„æ•°æ®ï¼Œè¿™ç§åˆ’åˆ†çš„åˆ†å‰²ç‚¹å°±æ˜¯å››åˆ†ä½æ•°ã€‚å…¶ä¸­ç¬¬1éƒ¨åˆ†å’Œç¬¬2éƒ¨åˆ†çš„åˆ†å‰²ç‚¹ç§°ä¸ºç¬¬1åˆ†ä½æ•° Q_1, ä¹Ÿè¢«ç§°ä¸ºç¬¬25ç™¾åˆ†ä½æ•°ï¼ˆä¸Šå››åˆ†ä½ï¼‰ï¼Œç¬¬3éƒ¨åˆ†å’Œç¬¬4éƒ¨åˆ†çš„åˆ†å‰²ç‚¹ç§°ä¸ºç¬¬3å››åˆ†ä½æ•° Q_3â€‹â€‹ ï¼Œä¹Ÿè¢«ç§°ä¸ºç¬¬75ç™¾åˆ†ä½æ•°ï¼ˆä¸‹å››åˆ†ä½ï¼‰ã€‚è€Œç¬¬äºŒéƒ¨åˆ†å’Œç¬¬ä¸‰éƒ¨åˆ†çš„åˆ†å‰²ç‚¹æ˜¯ç¬¬2å››åˆ†æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸­ä½æ•°ã€‚å…¶ä¸­å››åˆ†ä½è· IQRIQR æ˜¯æŒ‡ç¬¬ä¸‰å››åˆ†ä½æ•°å’Œç¬¬ä¸€åˆ†å››åˆ†ä½æ•°çš„å·®ï¼Œä¹Ÿå°±æ˜¯ IQR = Q_3 - Q_1 IQR=Q3âˆ’Q1ã€‚æ‰€æœ‰å°äºŽ Q_1 - 1.5IQR æˆ– å¤§äºŽ Q_3 + 1.5IQR Q3â€‹â€‹ +1.5IQR çš„æ•°æ®é¡¹è¢«ç§°ä¸ºå¼‚å¸¸å€¼ å¼‚å¸¸å€¼ç›‘æµ‹çš„ä»£ç  1234567891011121314151617181920import numpy as npdef find_outlier(data): outlier = [] a = np.array(data) # å®Œæˆå‰©ä½™ä»£ç  Q1 = np.percentile(a,25) Q3 = np.percentile(a,75) IQR = Q3 - Q1 condition = (a &lt; Q1 - 1.5*IQR) ca = np.extract(condition, a) b = np.extract(condition, a) conditionb = (a &gt; Q3 +1.5*IQR) c = np.extract(conditionb, a) outlier = np.concatenate((b,c)) return outlier Dx5Qup71pt]]></content>
      <tags>
        <tag>python</tag>
        <tag>æ•°æ®æŒ–æŽ˜</tag>
        <tag>pandas</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®ç§‘å­¦--ç»˜å›¾--matplotlib+Seaborn+Bokeh]]></title>
    <url>%2F2018%2F02%2F28%2F2018%2F%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6-matplotlib%2F</url>
    <content type="text"><![CDATA[matplotlib æ˜¯é¢å‘å¯¹è±¡çš„ç»˜å›¾å·¥å…·åŒ…ï¼Œç»˜åˆ¶çš„å›¾å½¢ä¸­æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ¯”å¦‚çº¿æ¡ï¼Œæ–‡å­—ï¼Œåˆ»åº¦ç­‰ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹è¿™äº›å¯¹è±¡çš„å±žæ€§ï¼Œä»Žè€Œæ”¹å˜ç»˜å›¾æ ·å¼ã€‚ matplotlib ä¸­ä¸»è¦çš„ç»˜å›¾å¯¹è±¡åˆ—è¡¨å¦‚ä¸‹ï¼š&gt; Figure å¯¹è±¡ï¼Œå¯ä»¥æƒ³è±¡ä¸ºä¸€å¼ ç”»å¸ƒï¼› Axes å¯¹è±¡ï¼Œå­—é¢ç†è§£ä¸ºåæ ‡è½´ï¼ˆå› ä¸ºæ¯ä¸€ä¸ª Axes éƒ½æœ‰ä¸€å¥— X Yè½´åæ ‡ç³»ï¼Œç»˜åˆ¶å›¾å½¢æ—¶åŸºäºŽæ­¤åæ ‡ç³»ç»˜åˆ¶ã€‚) ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯å­å›¾ï¼Œåœ¨ä¸€ä¸ª Figure å¯¹è±¡ä¸­å¯ä»¥åŒ…å«å¤šä¸ª Axes å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€å¼ ç”»å¸ƒå¯ä»¥åŒ…å«å¤šä¸ªå­å›¾ï¼›å¯ä»¥é€šè¿‡ plt.gcf() å’Œ plt.gca() åˆ†åˆ«èŽ·å–å½“å‰ç”¨äºŽç»˜å›¾çš„ Figure å’Œ Axes å¯¹è±¡ Line2D å¯¹è±¡ï¼Œä»£è¡¨çº¿æ¡ï¼› Text å¯¹è±¡ï¼Œä»£è¡¨äº†æ–‡å­—ï¼Œæ¯”å¦‚ä¸€å¼ å­å›¾éœ€è¦æ ‡é¢˜ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸€ä¸ª Text å¯¹è±¡ï¼› 1fig.add_subplot(2, 2, 4ï¼‰#æ„æ€æ˜¯ï¼Œæ·»åŠ ä¸€ä¸ªåæ ‡ä½“ç³»ï¼Œä¸¤è¡Œä¸¤åˆ—ï¼Œç„¶åŽæ·»åŠ åˆ°ç¬¬å››ä¸ªä½ç½®ä¸Š 123456789101112131415import numpy as npimport matplotlib.pyplot as pltfig1 = plt.figure()ax1 = fig1.add_subplot(2,2,1) #2è¡Œ2åˆ—ï¼Œæˆ‘æ˜¯ç¬¬1ä¸ªax1.plot(np.random.randn(150).cumsum(), &apos;k--&apos;) #ax2 = fig1.add_subplot(2,2,2) #2è¡Œ2åˆ—ï¼Œæˆ‘æ˜¯ç¬¬2ä¸ªax2.hist(np.random.randn(100), bins=20, color=&apos;k&apos;)ax3 = fig1.add_subplot(2,2,3) #2è¡Œ2åˆ—ï¼Œæˆ‘æ˜¯ç¬¬3ä¸ªax3.scatter(np.arange(30), np.arange(30) + 3 * np.random.randn(30)) #æ•£ç‚¹plt.show() å…¶ä»–çš„ä¸€äº›è®¾ç½® 12345678910111213141516171819202122232425262728import numpy as np import matplotlib.pyplot as plt fig = plt.figure() ax = fig.add_subplot(1,1,1) # è®¾ç½®æ ‡é¢˜ax.set_title(&quot;Axes Example&quot;)major_ticks = np.arange(0, 101, 20) minor_ticks = np.arange(0, 101, 5) # è®¾ç½®åˆ»åº¦ax.set_xticks(major_ticks) ax.set_xticks(minor_ticks, minor=True) ax.set_yticks(major_ticks) ax.set_yticks(minor_ticks, minor=True) # è®¾ç½® X, Y è½´ æ ‡ç­¾ax.set_xlabel(&quot;X axis&quot;)ax.set_ylabel(&quot;Y axis&quot;)# è®¾ç½®ç½‘æ ¼ ax.grid(which=&apos;minor&apos;, alpha=0.2) ax.grid(which=&apos;major&apos;, alpha=0.5)# æ·»åŠ æ–‡å­—ax.text(42.5, 50, &quot;shiyanlou&quot;) å¸¸ç”¨å›¾å½¢çº¿æ€§å›¾1234567891011import numpy as npimport matplotlib.pyplot as pltfig = plt.figure() ax = fig.add_subplot(1,1,1)x = np.random.randn(100)y = np.random.randn(100)ax.plot(x, y)fig.show() ç›´æ–¹å›¾1234data = np.random.normal(0, 20, 1000)bins = np.arange(-100, 100, 5)ax.hist(data, bins=bins)fig.show() ä¸Šé¢çš„ä»£ç é¦–å…ˆé€šè¿‡ np.random.normal æ–¹æ³•ï¼Œåœ¨ 0 åˆ° 20 çš„èŒƒå›´äº§ç”Ÿ 1000 ä¸ªç¬¦åˆæ­£æ€åˆ†å¸ƒçš„æ•°æ®å€¼ï¼Œç„¶åŽé€šè¿‡ np.arange(-100, 100, 5) åˆ›å»ºäº† X è½´çš„åŒºé—´åˆ»åº¦ æ•£ç‚¹å›¾æ•£ç‚¹å›¾ï¼Œå°†æ‰€æœ‰çš„æ•°æ®å€¼åœ¨å›¾å½¢ä¸­ç»˜åˆ¶æˆç‚¹ï¼Œè¿™æ ·æœ‰å¤šå°‘æ•°æ®å€¼åœ¨å›¾å½¢ä¸­å°±ä¼šæœ‰å¤šå°‘ä¸ªç‚¹ã€‚é€šè¿‡è¿™äº›æ•°æ®ç‚¹å¯ä»¥çœ‹å‡ºæ•°æ®å€¼çš„åˆ†å¸ƒæ¨¡å¼ï¼Œæ¯”å¦‚æ˜¯å¦æœ‰èšç±»æ¨¡å¼ï¼Œæˆ–è€…ç›¸å…³å…³ç³»æˆ–è€…å‘çŽ°ç¦»ç¾¤ç‚¹ã€‚åœ¨ matplotlib ä¸­å¯ä»¥é€šè¿‡ Axes.scatter ç»˜åˆ¶æ•£ç‚¹å›¾ï¼š 1234x = np.arange(1, 101)y = 20 + 3 * x + np.random.normal(0, 60, 100)ax.scatter(x, y)fig.show() ä¸ºäº†æ¨¡æ‹Ÿæ•£ç‚¹å›¾ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ np.arange(1, 101) åˆ›å»ºäº† 100 ä¸ªæ•°æ®å€¼ï¼ŒæŽ¥ç€åŸºäºŽæ­¤åˆ›å»ºäº† 100 ä¸ª Y è½´æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œä¸¤ç»„æ•°æ®å€¼ä¹‹é—´æœ‰ç›¸å…³å…³ç³»ï¼Œå› ä¸ºæ˜¯åŸºäºŽçº¿æ€§å…³ç³»ç„¶åŽåŠ ä¸Šéšæœºæ•°ç”Ÿæˆçš„ï¼Œç»˜åˆ¶çš„æ•£ç‚¹å›¾ä¹Ÿè¯æ˜Žäº†è¿™ç‚¹ï¼ˆå›¾å½¢å‘ä¸Šå€¾æ–œï¼‰ ç®±çº¿å›¾ç®±çº¿å›¾å¯ä»¥çœ‹å‡ºæ•°æ®çš„åˆ†æ•£ç¨‹åº¦ï¼Œå¼‚å¸¸å€¼ç­‰ä¿¡æ¯ï¼Œç®±çº¿å›¾æ ¹æ®ä¸€ç»„æ•°æ®çš„ä»¥ä¸‹ 5 ä¸ªç»Ÿè®¡å€¼è¿›è¡Œç»˜åˆ¶ï¼š æœ€å°å€¼ï¼›ç¬¬1å››åˆ†ä½æ•°ï¼›ä¸­ä½æ•°ï¼›ç¬¬3å››åˆ†ä½æ•°ï¼›æœ€å¤§å€¼ï¼›å…¶ä¸­å››åˆ†ä½æ•°ï¼Œæ˜¯æŒ‡å°†ä¸€ç»„æ•°æ®å€¼æŒ‰å¤§å°æŽ’åºåŽåˆ†æˆå››ç­‰åˆ†ï¼Œæ¯ä¸€éƒ¨åˆ†åŒ…å« 1/4 çš„æ•°æ®ï¼Œè¿™ç§åˆ’åˆ†çš„åˆ†å‰²ç‚¹å°±æ˜¯å››åˆ†ä½æ•°ã€‚å…¶ä¸­ç¬¬1éƒ¨åˆ†å’Œç¬¬2éƒ¨åˆ†çš„åˆ†å‰²ç‚¹ç§°ä¸ºç¬¬1åˆ†ä½æ•° Q_1Qâ€‹1â€‹â€‹ , ä¹Ÿè¢«ç§°ä¸ºç¬¬25ç™¾åˆ†ä½æ•°ï¼Œç¬¬3éƒ¨åˆ†å’Œç¬¬4éƒ¨åˆ†çš„åˆ†å‰²ç‚¹ç§°ä¸ºç¬¬3å››åˆ†ä½æ•° Q_3Qâ€‹3â€‹â€‹ ï¼Œä¹Ÿè¢«ç§°ä¸ºç¬¬75ç™¾åˆ†ä½æ•°ã€‚è€Œç¬¬äºŒéƒ¨åˆ†å’Œç¬¬ä¸‰éƒ¨åˆ†çš„åˆ†å‰²ç‚¹æ˜¯ç¬¬2å››åˆ†æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸­ä½æ•°ã€‚å…¶ä¸­å››åˆ†ä½è· IQRIQR æ˜¯æŒ‡ç¬¬ä¸‰å››åˆ†ä½æ•°å’Œç¬¬ä¸€åˆ†å››åˆ†ä½æ•°çš„å·®ï¼Œä¹Ÿå°±æ˜¯ IQR = Q_3 - Q_1 IQR=Qâ€‹3â€‹â€‹ âˆ’Qâ€‹1â€‹â€‹ ã€‚å››åˆ†ä½è·åæ˜ äº†ä¸­é—´ 50% æ•°æ®çš„ç¦»æ•£ç¨‹åº¦ï¼Œæ•°å€¼è¶Šå°ä»£è¡¨æ•°æ®è¶Šé›†ä¸­ï¼Œè¶Šå¤§ä»£è¡¨æ•°æ®è¶Šåˆ†æ•£ã€‚ åœ¨ matplotlib ä¸­å¯ä»¥ä½¿ç”¨ Axes.boxplot æ–¹æ³•ç»˜åˆ¶ç®±çº¿å›¾ï¼š 1234567891011# äº§ç”Ÿ 50 ä¸ªå°äºŽ 100 çš„éšæœºæ•°spread = np.random.rand(50) * 100# äº§ç”Ÿ 25 ä¸ªå€¼ä¸º 50 çš„æ•°æ®center = np.ones(25) * 50# å¼‚å¸¸å€¼outlier_high = np.random.rand(10) * 100 + 100outlier_low = np.random.rand(10) * -100data = np.concatenate((spread, center, outlier_high, outlier_low), 0)ax.boxplot(data)fig.show() ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç‰¹æ„åˆ›å»ºäº† data æ•°æ®ï¼Œå¯ä»¥æŽ¨æ–­å‡ºè¯¥æ•°æ®çš„ä¸­ä½æ•°æ˜¯ 50ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–å¼‚å¸¸å€¼ SeabornBokeh]]></content>
      <tags>
        <tag>python</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>æ•°æ®åˆ†æž</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[kaggleå…¥é—¨éšç¬”]]></title>
    <url>%2F2018%2F02%2F26%2F2018%2Fkaggle%E5%85%A5%E9%97%A8%E9%9A%8F%E7%AC%94%2F</url>
    <content type="text"><![CDATA[åˆçº§é—®é¢˜ åœ¨å“ªé‡Œç¼–ç  æ— æ‰€è°“ï¼Œä½†æ˜¯kaggleæä¾›äº†kernalï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨å…¶ç¡¬ä»¶èµ„æº åœ¨å“ªé‡Œæäº¤ï¼Œæäº¤çš„æ˜¯ä»€ä¹ˆ åœ¨é—®é¢˜é¡µé¢çš„submitï¼Œç„¶åŽæäº¤çš„æ˜¯æœ€åŽä½ é¢„æµ‹çš„ç»“æžœï¼Œè€Œä¸æ˜¯ä»£ç  ä¸€èˆ¬æµç¨‹ æ•°æ®é›†â€“&gt;è®¤è¯†æ•°æ®â€“&gt;æ•°æ®é¢„å¤„ç†â€“&gt;æž„å»ºç‰¹å¾å·¥ç¨‹â€“&gt;é€‰æ‹©ç®—æ³•â€“&gt;ç”Ÿæˆæ¨¡åž‹ å·¥å…·é›† sklearn æœºå™¨å­¦ä¹ ç®—æ³• pandas æ•°æ®å¤„ç† numpy æ•°æ®å¤„ç† matplotlib ä½œå›¾ Seaborn ä½œå›¾ matplotlibå¼‚å¸¸å€¼ç›‘æµ‹(Outlier detection)æ‰¾åˆ°å¼‚å¸¸å€¼ï¼Œç„¶åŽèˆå¼ƒè¿™äº›æ•°æ® ç¼ºå¤±å€¼å¤„ç†æŸäº›å€¼å¯èƒ½å’Œç¼ºå¤±å€¼å­˜åœ¨æ˜Žæ˜¾çš„ç›¸å…³æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº›å€¼æ¥æŽ¨æ–­ç¼ºå¤±çš„å€¼ ç‰¹å¾åˆ†æž(Feature analysis)ç®—æ³•æ¯”è¾ƒå¥½å¤šç®—æ³•éƒ½ç”Ÿæˆæ¨¡åž‹ï¼Œç„¶åŽæ¥æµ‹ä¸€ä¸‹è¿™ä¸ªå€¼æ˜¯å¤šå°‘ï¼Œæ¯”è¾ƒä¸€ä¸‹ç”¨å“ªä¸ª äº¤å‰éªŒè¯(cross validation)æ¨¡åž‹èžåˆ(Combining models)ç”¨åˆ°çš„æ–°å‡½æ•°collectionsæ¨¡å—Counter ç»Ÿè®¡å…³é”®å­—è®¡æ•°12In [3]: collections.Counter([&apos;a&apos;,&apos;b&apos;,&apos;b&apos;,&apos;c&apos;,&apos;c&apos;,&apos;c&apos;])Out[3]: Counter(&#123;&apos;c&apos;: 3, &apos;b&apos;: 2, &apos;a&apos;: 1&#125;) å¸¸ç”¨å•è¯gaussian distribution â€“ é«˜æ–¯åˆ†å¸ƒpeak corresponding â€“ å³°å€¼cross validation- äº¤å‰éªŒè¯]]></content>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>kaggle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[xcodeè¯ä¹¦ç›¸å…³]]></title>
    <url>%2F2018%2F02%2F24%2F2018%2Fxcode%E8%AF%81%E4%B9%A6%E7%9B%B8%E5%85%B3%2F</url>
    <content type="text"><![CDATA[1.å¦‚æžœä½ çš„profileæ–‡ä»¶å§‹ç»ˆæ‰¾ä¸åˆ°è¯ä¹¦ï¼Œä½†æ˜¯è¿™ä¸ªè¯ä¹¦æ˜Žæ˜Žåœ¨ä½ çš„è¯ä¹¦é‡Œè¾¹ï¼Œè¿™ä¸ªæ—¶å€™æŸ¥çœ‹å…¨éƒ¨è¯ä¹¦ï¼Œå¯èƒ½å­˜åœ¨é‡åçš„è¯ä¹¦2.è¯ä¹¦ä»Žç½‘ç«™ä¸Šä¸‹è½½æ˜¯ä¸å¥½ä½¿çš„ï¼Œå› ä¸ºæ²¡æœ‰ç§é’¥ï¼Œéœ€è¦è¯ä¹¦çš„åˆ›å»ºè€…åŽ»ç»™ä½ å¯¼å‡ºä¸€ä¸ªp12ï¼Œæˆ–è€…æ‹¥æœ‰p12è¯ä¹¦çš„äººç»™ä½ å¯¼å‡ºä¸€ä¸ªp12ï¼Œè®°å¾—è¦å¸¦ç€é‡Œè¾¹çš„é’¥åŒ™3.appidæ˜¯å†³å®šä½ çš„appæ˜¯å¦å”¯ä¸€çš„ä¸œè¥¿ï¼Œè¯ä¹¦æ˜¯å†³å®šçš„æ˜¯å“ªå°ç”µè„‘æœ‰ç­¾åçš„èƒ½åŠ›ï¼Œprofileæ–‡ä»¶åœ¨åˆ›å»ºçš„æ—¶å€™éœ€è¦ç»‘å®šidï¼Œè¯ä¹¦ï¼Œå’Œè®¾å¤‡idï¼Œå®ƒå†³å®šï¼Œè¿™ä¸ªç”µè„‘ä¸Šèƒ½å¤Ÿç­¾åå“ªä¸ªappï¼Œç„¶åŽç­¾åå‡ºæ¥çš„appå¯ä»¥ç»™è°å®‰è£…]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[c++é¢è¯•é¢˜æ±‡æ€»]]></title>
    <url>%2F2018%2F02%2F17%2Fc-%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B1%87%E6%80%BB%2F</url>
    <content type="text"><![CDATA[https://www.jianshu.com/p/cc1bdada166fhttps://www.jianshu.com/p/06d2f28d0747https://www.cnblogs.com/fangyukuan/archive/2010/09/18/1829871.htmlhttps://github.com/huihut/interview]]></content>
      <tags>
        <tag>c++</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[python/mongoå¸¸ç”¨è®°å½•]]></title>
    <url>%2F2018%2F02%2F05%2F2018%2Fpython%E8%BF%9B%E9%98%B6%E5%B8%B8%E7%94%A8%2F</url>
    <content type="text"><![CDATA[pythonå¸¸ç”¨ å¤šè¿›ç¨‹ æŽ’åº æ—¶é—´æ¨¡å— æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£dir(os) å•å…ƒæµ‹è¯• å¤šè¿›ç¨‹multiprocessingæ¨¡å—å°±æ˜¯è·¨å¹³å°ç‰ˆæœ¬çš„å¤šè¿›ç¨‹æ¨¡å—ã€‚multiprocessingæ¨¡å—æä¾›äº†ä¸€ä¸ªProcessç±»æ¥ä»£è¡¨ä¸€ä¸ªè¿›ç¨‹å¯¹è±¡ï¼Œä¸‹é¢çš„ä¾‹å­æ¼”ç¤ºäº†å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹å¹¶ç­‰å¾…å…¶ç»“æŸ 1234567891011121314import osfrom multiprocessing import Processdef runfunction(d): time.sleep(3) print &apos;%s &apos; % (os.getpid()) + &apos;is the subprocess&apos; if __name__ == &apos;__main__&apos;: print &apos;Parent is %s&apos; % os.getpid() p = Process(target=runfunction, args=(&apos;1&apos;,)) print &apos;Process will start.&apos; p.start() p.join()#è¿™æ ·å†™å…¶å®žæ˜¯åŒæ­¥æ‰§è¡Œçš„è‚¯å®š print &apos;Process end.&apos; å¤šä¸ªè¿›ç¨‹ï¼Œä½†æ˜¯å¼‚æ­¥æ‰§è¡Œ 1234567891011121314151617181920212223242526272829303132# !/usr/bin/env python # -*- coding:utf-8 -*- ## Copyright 2015 mimvp.com import multiprocessingimport timeimport os def func(name, processName): print &apos;Process[%s] hello %s&apos; % (processName, name) print &apos;sub pid: %d, ppid: %d&apos; % (os.getpid(), os.getppid()) time.sleep(0.1) def main(): print &apos;main pid: %d, ppid: %d&apos; % (os.getpid(), os.getppid()) processList = [] for i in xrange(4): pro = multiprocessing.Process(target=func, args=(i, &apos;Process-&apos; + str(i))) pro.start()# pro.join() # ä¸è¦åœ¨æ­¤å¤„é˜»å¡žå­è¿›ç¨‹ï¼Œå¦åˆ™å­è¿›ç¨‹éƒ½å°†æ˜¯çº¿æ€§é¡ºåºæ‰§è¡Œ processList.append(pro) for pro in processList: pro.join() # åœ¨æ­¤å¤„é˜»å¡žå­è¿›ç¨‹ï¼Œå¯å®žçŽ°å¼‚æ­¥æ‰§è¡Œæ•ˆæžœï¼Œç›´è‡³å­è¿›ç¨‹å…¨éƒ¨å®ŒæˆåŽå†ç»§ç»­æ‰§è¡Œçˆ¶è¿›ç¨‹ # æµ‹è¯•if __name__ == &apos;__main__&apos;: main() print(&apos;end.&apos;) åŒæ—¶åˆ›å»ºå¤šä¸ªè¿›ç¨‹ 12345678910111213141516171819from multiprocessing import Poolimport os, time, randomdef long_time_task(name): print &apos;Run task %s (%s)...&apos; % (name, os.getpid()) start = time.time() time.sleep(2) end = time.time() print &apos;Task %s runs %0.2f seconds.&apos; % (name, (end - start))if __name__==&apos;__main__&apos;: print &apos;Parent process %s.&apos; % os.getpid() p = Pool(10) for i in range(10): p.apply_async(long_time_task, args=(i,)) print &apos;Waiting for all subprocesses done...&apos; p.close() p.join() print &apos;All subprocesses done.&apos; æ ¹æ®å¤šä¸ªå‚æ•°ï¼Œåˆ›å»ºå¤šä¸ªè¿›ç¨‹ 123456789def sortwithnum(): pass dataList = [1,2,3,4,5] pool = Pool() #åˆ›å»ºæ‹¥æœ‰5ä¸ªè¿›ç¨‹æ•°é‡çš„è¿›ç¨‹æ± rl = pool.map(sortwithnum, dateList) pool.close()#å…³é—­è¿›ç¨‹æ± ï¼Œä¸å†æŽ¥å—æ–°çš„è¿›ç¨‹pool.join()#ä¸»è¿›ç¨‹é˜»å¡žç­‰å¾…å­è¿›ç¨‹çš„é€€å‡º è¿›ç¨‹é€šä¿¡ 1234567891011121314151617181920212223242526272829303132333435363738import multiprocessingimport timeimport os lock = multiprocessing.Lock() def func(name, processName, queue): p_info = &apos;Process[%s] hello %s&apos; % (processName, name) queue.put(p_info) print &apos;queue put: &apos;, p_info print &apos;sub pid: %d, ppid: %d&apos; % (os.getpid(), os.getppid()) time.sleep(0.5) def main(): print &apos;main pid: %d, ppid: %d&apos; % (os.getpid(), os.getppid()) qu = multiprocessing.Queue() processList = [] for i in xrange(4): pro = multiprocessing.Process(target=func, args=(i, &apos;Process-&apos; + str(i), qu)) pro.start() processList.append(pro) for pro in processList: pro.join() while not qu.empty(): p_info = qu.get(block=False) print &apos;queue get: &apos;, p_info if __name__ == &apos;__main__&apos;: main() print(&apos;end.&apos;) æŽ’åº1itemList.sort(key=lambda k : (k.get(&apos;datetime&apos;,0),(&apos;createtime&apos;,0)), reverse=False) æ—¶é—´æ¨¡å—1234now_time = datetime.datetime.now()now_time_string = now_time.strftime(&apos;%Y-%m-%d&apos;)yes_time = now_time + datetime.timedelta(days=daysl)yes_time_nyr = yes_time.strftime(&apos;%Y-%m-%d&apos;) ```]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSçº¿ç¨‹å®‰å…¨ä¸ŽåŽŸå­å±žæ€§]]></title>
    <url>%2F2018%2F01%2F29%2FiOS%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E4%B8%8E%E5%8E%9F%E5%AD%90%E5%B1%9E%E6%80%A7%2F</url>
    <content type="text"><![CDATA[Objective-C åœ¨å£°æ˜Žä¸€ä¸ªå±žæ€§çš„æ—¶å€™ï¼Œæƒ³å¿…å¤§å®¶éƒ½æ˜¯ä¸ç”¨ç»è¿‡å¤§è„‘æ€è€ƒå°±ä¼šå†™ @property (nonatomic, ... æˆ‘ä»¬éƒ½çŸ¥é“å±žæ€§å¯ä»¥æ˜¯ nonatomic ä¹Ÿå¯ä»¥ä½¿ atomic çš„ï¼Œä½†æ˜¯å¥½åƒå‡ ä¹Žæ‰€æœ‰å±žæ€§åœ¨å£°æ˜Žçš„æ—¶å€™ nonatomicï¼Œatomic çš„å±žæ€§å‡ ä¹Žæ²¡å‡ºçŽ°è¿‡ã€‚atomic ä¿®é¥°ç¬¦ä»¿ä½›å·²è¢«å¤§å®¶é—å¿˜ã€‚ å®žé™…ä¸Šï¼Œå¦‚æžœå£°æ˜Žå±žæ€§æ—¶æ—¢ä¸å†™ atomic ä¹Ÿä¸å†™ nonatomicï¼Œé‚£ä¹ˆè¿™ä¸ªå±žæ€§é»˜è®¤æ˜¯ atomic çš„ã€‚ atomic çš„ä½œç”¨å’Œå·¥ä½œåŽŸç†ä»Žå­—é¢ä¸Šæ¥çœ‹ nonatomic æ˜¯éžåŽŸå­çš„ï¼Œatomic æ˜¯åŽŸå­çš„ã€‚ atomic çš„ä½œç”¨ä¸ºï¼šatomic ä¿®é¥°çš„å±žæ€§çš„å†™æ“ä½œæ˜¯ä¸€ä¸ªåŽŸå­æ“ä½œã€‚ ä»€ä¹ˆæ˜¯åŽŸå­æ“ä½œï¼ŸåŽŸå­æ“ä½œå°±æ˜¯æŒ‡ä¸ä¼šè¢«çº¿ç¨‹è°ƒåº¦æœºåˆ¶æ‰“æ–­çš„æ“ä½œã€‚è¿™ä¸ªæ“ä½œæ˜¯ä¸€ä¸ªæ•´ä½“ï¼ŒCPU ä¸€æ—¦å¼€å§‹æ‰§è¡Œå®ƒï¼Œå°±ä¼šä¸€ç›´åˆ°æ‰§è¡Œç»“æŸï¼Œåœ¨è¿™æœŸé—´ CPU ä¸ä¼šè½¬è€ŒåŽ»æ‰§è¡Œå…¶å®ƒçº¿ç¨‹çš„æ“ä½œã€‚ ä¸¤ç§åŠ é”çš„æ–¹å¼12345- (void)setCount:(NSInteger)count &#123; @synchronized (self) &#123; _count = count; &#125;&#125; ä¸Šé¢ä»£ç å®žçŽ°äº†å’Œ atomic ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†æ˜¯åº•å±‚çš„å·¥ä½œæ–¹å¼è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚æˆ‘ä»¬å¸¸å¸¸ç”¨ @synchronized æ¥åŠ é”ï¼Œè¿™ç§é”æ˜¯äº’æ–¥é”ã€‚è€Œ atomic ä¿®é¥°çš„å±žæ€§è‡ªå¸¦äº†ä¸€æŠŠè‡ªæ—‹é”ã€‚ äº’æ–¥é” å½“æŸä¸ªèµ„æºè¢«å…ˆè¿›å…¥çš„çº¿ç¨‹ä¸Šäº†é”ä»¥åŽï¼Œå…¶å®ƒåŽé¢è¿›å…¥çš„çº¿ç¨‹ä¼šè¿›å…¥ä¼‘çœ çŠ¶æ€ã€‚å½“é”é‡Šæ”¾åŽï¼Œè¿›å…¥ä¼‘çœ çŠ¶æ€çš„çº¿ç¨‹å˜ä¸ºå”¤é†’çŠ¶æ€ã€‚ è‡ªæ—‹é” å½“æŸä¸ªèµ„æºè¢«å…ˆè¿›å…¥çš„çº¿ç¨‹ä¸Šäº†é”ä»¥åŽï¼Œå…¶å®ƒåŽè¿›å…¥çš„çº¿ç¨‹ä¼šå¼€å¯ä¸€ä¸ªå¾ªçŽ¯ï¼Œä¸æ–­æ£€æŸ¥é”æœ‰æ²¡æœ‰é‡Šæ”¾ï¼Œå½“é”é‡Šæ”¾åŽï¼Œé€€å‡ºå¾ªçŽ¯å¼€å§‹è®¿é—®èµ„æºï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­åŽè¿›å…¥çš„çº¿ç¨‹ä¸€ç›´ä¿æŒè¿è¡ŒçŠ¶æ€ã€‚ å¯¹æ¯” nonatomic å’Œ atomic nonatomic æ‰§è¡Œæ•ˆçŽ‡é«˜ï¼Œæ€§èƒ½å¥½ ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ atomic çº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯ä»…èƒ½ä¿è¯å†™æ“ä½œçš„çº¿ç¨‹å®‰å…¨ å¤§å¹…é™ä½Žæ‰§è¡Œæ•ˆçŽ‡ å…³äºŽçº¿ç¨‹å®‰å…¨é¦–å…ˆç†è§£æˆ‘ä»¬åªæœ‰ä¸€ä¸ªåœ°å€æ€»çº¿ï¼Œä¸€ä¸ªå†…å­˜ã€‚å³ä½¿æ˜¯åœ¨å¤šçº¿ç¨‹çš„çŽ¯å¢ƒä¸‹ï¼Œä¹Ÿä¸å¯èƒ½å­˜åœ¨ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€å—å†…å­˜åŒºåŸŸçš„åœºæ™¯ï¼Œå†…å­˜çš„è®¿é—®ä¸€å®šæ˜¯é€šè¿‡ä¸€ä¸ªåœ°å€æ€»çº¿ä¸²è¡ŒæŽ’é˜Ÿè®¿é—®çš„ï¼Œæ‰€ä»¥åœ¨ç»§ç»­åŽç»­ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦æ˜Žç¡®å‡ ä¸ªç»“è®ºï¼š ç»“è®ºä¸€ï¼šå†…å­˜çš„è®¿é—®æ—¶ä¸²è¡Œçš„ï¼Œå¹¶ä¸ä¼šå¯¼è‡´å†…å­˜æ•°æ®çš„é”™ä¹±æˆ–è€…åº”ç”¨çš„crashã€‚ ç»“è®ºäºŒï¼šå¦‚æžœè¯»å†™ï¼ˆload or storeï¼‰çš„å†…å­˜é•¿åº¦å°äºŽç­‰äºŽåœ°å€æ€»çº¿çš„é•¿åº¦ï¼Œé‚£ä¹ˆè¯»å†™çš„æ“ä½œæ˜¯åŽŸå­çš„ï¼Œä¸€æ¬¡å®Œæˆã€‚æ¯”å¦‚boolï¼Œintï¼Œlongåœ¨64ä½ç³»ç»Ÿä¸‹çš„å•æ¬¡è¯»å†™éƒ½æ˜¯åŽŸå­æ“ä½œã€‚ çº¿ç¨‹ä¸å®‰å…¨ä¸¾ä¾‹ é’ˆå¯¹intç±»åž‹ï¼Œå¯èƒ½å‡ºçŽ°ï¼Œæ•°å€¼è®¡ç®—ä¸å¯¹çš„æƒ…å†µ é’ˆå¯¹æŒ‡é’ˆé‚£å°±æ˜¯ï¼Œå¦‚æžœAçº¿ç¨‹èŽ·å–äº†æŒ‡é’ˆï¼Œä½†æ˜¯åœ¨Bçº¿ç¨‹å¯¹å¯¹è¿™ä¸ªæŒ‡é’ˆçš„å†…å­˜ç©ºé—´è¿›è¡Œäº†é‡Šæ”¾ï¼Œé‚£ä¹ˆåœ¨Açº¿ç¨‹å°±ä¼šé€ æˆå´©æºƒ 1234567891011121314151617181920@property (atomic, strong) NSString* stringA;//thread Afor (int i = 0; i &lt; 100000; i ++) &#123; if (i % 2 == 0) &#123; self.stringA = @&quot;a very long string&quot;; &#125; else &#123; self.stringA = @&quot;string&quot;; &#125; NSLog(@&quot;Thread A: %@\n&quot;, self.stringA);&#125;//thread Bfor (int i = 0; i &lt; 100000; i ++) &#123; if (self.stringA.length &gt;= 10) &#123; NSString* subStr = [self.stringA substringWithRange:NSMakeRange(0, 10)]; &#125; NSLog(@&quot;Thread B: %@\n&quot;, self.stringA);&#125; æ­£ç¡®åšæ³• 12345678910111213141516171819//thread A[_lock lock];for (int i = 0; i &lt; 100000; i ++) &#123; if (i % 2 == 0) &#123; self.stringA = @&quot;a very long string&quot;; &#125; else &#123; self.stringA = @&quot;string&quot;; &#125; NSLog(@&quot;Thread A: %@\n&quot;, self.stringA);&#125;[_lock unlock];//thread B[_lock lock];if (self.stringA.length &gt;= 10) &#123; NSString* subStr = [self.stringA substringWithRange:NSMakeRange(0, 10)];&#125;[_lock unlock]; è™½ç„¶stringAæ˜¯atomicçš„propertyï¼Œè€Œä¸”åœ¨å–substringçš„æ—¶å€™åšäº†lengthåˆ¤æ–­ï¼Œçº¿ç¨‹Bè¿˜æ˜¯å¾ˆå®¹æ˜“crashï¼Œå› ä¸ºåœ¨å‰ä¸€åˆ»è¯»lengthçš„æ—¶å€™self.stringA = @â€a very long stringâ€;ï¼Œä¸‹ä¸€åˆ»å–substringçš„æ—¶å€™çº¿ç¨‹Aå·²ç»å°†self.stringA = @â€stringâ€;ï¼Œç«‹å³å‡ºçŽ°out of boundsçš„Exceptionï¼Œcrashï¼Œå¤šçº¿ç¨‹ä¸å®‰å…¨ã€‚ 1234567891011121314151617181920@property (atomic, strong) NSArray* arr;//thread Afor (int i = 0; i &lt; 100000; i ++) &#123; if (i % 2 == 0) &#123; self.arr = @[@&quot;1&quot;, @&quot;2&quot;, @&quot;3&quot;]; &#125; else &#123; self.arr = @[@&quot;1&quot;]; &#125; NSLog(@&quot;Thread A: %@\n&quot;, self.arr);&#125;//thread Bfor (int i = 0; i &lt; 100000; i ++) &#123; if (self.arr.count &gt;= 2) &#123; NSString* str = [self.arr objectAtIndex:1]; &#125; NSLog(@&quot;Thread B: %@\n&quot;, self.arr);&#125; 12345678910111213141516171819//thread A[_lock lock];for (int i = 0; i &lt; 100000; i ++) &#123; if (i % 2 == 0) &#123; self.arr = @[@&quot;1&quot;, @&quot;2&quot;, @&quot;3&quot;]; &#125; else &#123; self.arr = @[@&quot;1&quot;]; &#125; NSLog(@&quot;Thread A: %@\n&quot;, self.arr);&#125;[_lock unlock]; //thread B[_lock lock];if (self.arr.count &gt;= 2) &#123; NSString* str = [self.arr objectAtIndex:1];&#125;[_lock unlock]; åŒç†ï¼Œå³ä½¿æˆ‘ä»¬åœ¨è®¿é—®objectAtIndexä¹‹å‰åšäº†countçš„åˆ¤æ–­ï¼Œçº¿ç¨‹Bä¾æ—§å¾ˆå®¹æ˜“crashï¼ŒåŽŸå› ä¹Ÿæ˜¯ç”±äºŽå‰åŽä¸¤è¡Œä»£ç ä¹‹é—´arræ‰€æŒ‡å‘çš„å†…å­˜åŒºåŸŸè¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº†ã€‚ æ‰€ä»¥ä½ çœ‹ï¼ŒçœŸæ­£éœ€è¦æ“å¿ƒçš„æ˜¯è¿™ä¸€ç±»å†…å­˜åŒºåŸŸçš„è®¿é—®ï¼Œå³ä½¿å£°æ˜Žä¸ºatomicä¹Ÿæ²¡æœ‰ç”¨ï¼Œæˆ‘ä»¬å¹³å¸¸Appå‡ºçŽ°èŽ«åå…¶å¦™éš¾ä»¥é‡çŽ°çš„å¤šçº¿ç¨‹crashå¤šæ˜¯å±žäºŽè¿™ä¸€ç±»ï¼Œä¸€æ—¦åœ¨å¤šçº¿ç¨‹çš„åœºæ™¯ä¸‹è®¿é—®è¿™ç±»å†…å­˜åŒºåŸŸçš„æ—¶å€™ï¼Œè¦æèµ·åäºŒåˆ†çš„å°å¿ƒã€‚å¦‚ä½•é¿å…è¿™ç±»crashåŽé¢ä¼šè°ˆåˆ°ã€‚ Propertyå¤šçº¿ç¨‹å®‰å…¨å°ç»“ï¼šç®€è€Œè¨€ä¹‹ï¼Œatomicçš„ä½œç”¨åªæ˜¯ç»™getterå’ŒsetteråŠ äº†ä¸ªé”ï¼Œatomicåªèƒ½ä¿è¯ä»£ç è¿›å…¥getteræˆ–è€…setterå‡½æ•°å†…éƒ¨æ—¶æ˜¯å®‰å…¨çš„ï¼Œä¸€æ—¦å‡ºäº†getterå’Œsetterï¼Œå¤šçº¿ç¨‹å®‰å…¨åªèƒ½é ç¨‹åºå‘˜è‡ªå·±ä¿éšœäº†ã€‚æ‰€ä»¥atomicå±žæ€§å’Œä½¿ç”¨propertyçš„å¤šçº¿ç¨‹å®‰å…¨å¹¶æ²¡ä»€ä¹ˆç›´æŽ¥çš„è”ç³»ã€‚å¦å¤–ï¼Œatomicç”±äºŽåŠ é”ä¹Ÿä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½æŸè€—ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ç¼–å†™iOSä»£ç çš„æ—¶å€™ï¼Œä¸€èˆ¬å£°æ˜Žpropertyä¸ºnonatomicï¼Œåœ¨éœ€è¦åšå¤šçº¿ç¨‹å®‰å…¨çš„åœºæ™¯ï¼Œè‡ªå·±åŽ»é¢å¤–åŠ é”åšåŒæ­¥ã€‚ å‚è€ƒMrPeak]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”¨æˆ·è¡Œä¸ºè·¯å¾„åˆ†æžæ€è·¯]]></title>
    <url>%2F2018%2F01%2F23%2F2018%2F%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E8%B7%AF%E5%BE%84%E5%88%86%E6%9E%90%E6%80%9D%E8%B7%AF%2F</url>
    <content type="text"><![CDATA[ç”¨æˆ·ç‰¹å¾åˆ†æž é¢„æµ‹æ¨¡åž‹ æ´»è·ƒåº¦å®šä¹‰ ç”¨æˆ·è·¯å¾„åˆ†æž äº¤å‰é”€å”® ç”¨æˆ·åˆ†å±‚ Predict Customer Behaviourcustomerâ€™s classification æ„å›¾è¯†åˆ«ç¡®å®šå“ªäº›è·¯å¾„å¯ä»¥ä¿ƒè¿›å¢žé•¿ï¼Œå®¢æˆ·å¿ è¯šåº¦å’Œæ»¡æ„åº¦ï¼Œå“ªäº›è·¯å¾„ä¼šå¢žåŠ ç”¨æˆ·çš„æŠ±æ€¨ å‘çŽ°ã€‚ æœºå™¨å­¦ä¹ æ­ç¤ºäº†å®¢æˆ·è·¨è¶Šæ¸ é“å’Œæ—¶é—´è·¨è¶Šçš„æœ€å…³é”®é€”å¾„ï¼Œå¹¶è¯†åˆ«å®¢æˆ·æ—…ç¨‹ä¸­çš„å…³é”®éšœç¢å’Œæœºä¼šï¼Œä»¥ä¾¿å°†æ³¨æ„åŠ›é›†ä¸­åœ¨é’ˆå¤´ä¸Šã€‚ç›®æ ‡ã€‚ ä½¿ç”¨äººå£ç»Ÿè®¡ç‰¹æ€§å’Œä¸Šä¸‹æ–‡å±žæ€§ï¼Œå¯ä»¥å¿«é€ŸæŸ¥æ˜Žç‰¹å®šå®¢æˆ·ç¾¤çš„è½¬æ¢å¯èƒ½æ€§æœ€é«˜ã€‚ä»Žäº‹ã€‚æ ¹æ®æ¯ä½å®¢æˆ·çš„ä¸ªäººè¡Œä¸ºï¼Œåœ¨æ­£ç¡®çš„æ—¶é—´ä¸ºåˆé€‚çš„å®¢æˆ·æä¾›ä¸ªæ€§åŒ–çš„ä½“éªŒï¼Œåˆ©ç”¨Pointillistå¹³å°çš„æ™ºæ…§ä»¥åŠä¸ŽæŠ€æœ¯æ ˆä¸­çŽ°æœ‰çš„è¥é”€å·¥å…·çš„é›†æˆã€‚ç›‘æŽ§ã€‚è¯„ä¼°è¥é”€æ´»åŠ¨å’Œç­–ç•¥å¯¹æ‚¨çš„KPIçš„å½±å“å¹¶å®žæ—¶ç›‘æŽ§å˜åŒ–ï¼Œä»¥ä¾¿æ‚¨çš„å›¢é˜Ÿèƒ½å¤Ÿè¿…é€Ÿå°†æ´žå¯ŸåŠ›è½¬åŒ–ä¸ºæŽ¨åŠ¨ç»“æžœçš„è¡ŒåŠ¨ åœ¨ä¸€æ®µæ—¶é—´å†…å¿«é€Ÿäº†è§£æ‰€æœ‰æŽ¥è§¦ç‚¹å’Œæ¸ é“ä¸­çš„å®¢æˆ·è¡Œä¸ºå‘çŽ°å’Œé¢„æµ‹é«˜å½±å“åŠ›çš„å®¢æˆ·æ—…ç¨‹æŽ¨åŠ¨ä¸ªæ€§åŒ–ï¼Œå¤šæ¸ é“çš„å®¢æˆ·ä½“éªŒ ç”¨æˆ·åˆ†å±‚ï¼Œåˆ†ç±»çš„ä¾æ® ç›®çš„æ˜¯ä»€ä¹ˆï¼Œæœ‰æ²¡æœ‰è¾¾åˆ°ä»–çš„ç›®çš„ ç”¨æˆ·åœ¨å¦‚ä½•ä½¿ç”¨æˆ‘ä»¬çš„äº§å“ï¼Œåœ¨æˆ‘ä»¬äº§å“é‡Œå¹²ä»€ä¹ˆ é€šè¿‡ä½¿ç”¨é…å¤‡å…ˆè¿›çš„æœºå™¨å­¦ä¹ ç®—æ³•çš„å®¢æˆ·æ—…ç¨‹åˆ†æžå¹³å°ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿå‘çŽ°æ—…ç¨‹ä¸­çš„é‡è¦äº‹ä»¶ï¼Œä¾‹å¦‚å®¢æˆ·ä»Žæ—…ç¨‹ä¸­çš„Aç‚¹åˆ°Bç‚¹æœ€å¸¸è§çš„è·¯å¾„ã€‚æ­¤å¤–ï¼Œå®ƒä½¿æ‚¨èƒ½å¤Ÿå®žæ—¶é¢„æµ‹å®¢æˆ·è¡Œä¸ºï¼Œå¹¶å†³å®šæœ€åˆé€‚çš„å‚ä¸Žæ–¹å¼ã€‚åœ¨ä¸Šé¢çš„å›¾è¡¨ä¸­ï¼Œæœºå™¨å­¦ä¹ ç®—æ³•ç”¨äºŽå¯¹æ•°ç™¾ä¸‡æ¬¡å®žé™…æ—…ç¨‹è¿›è¡Œåˆ†ç±»ï¼Œä»¥æ­ç¤ºå®¢æˆ·åœ¨åœ¨çº¿æŸ¥çœ‹äº§å“å’Œé€€å‡ºä¹‹é—´æ‰€é‡‡ç”¨çš„æœ€é‡è¦è·¯å¾„ã€‚ å®¢æˆ·æ—…ç¨‹åˆ†æžä½¿è¥é”€å’ŒCXå›¢é˜Ÿä¸ä»…èƒ½å¤Ÿå‘çŽ°å“ªäº›æ—…ç¨‹æœ€é‡è¦ï¼Œè€Œä¸”èƒ½å¤Ÿé€šè¿‡ä»–ä»¬çš„é¦–é€‰æ¸ é“å’Œç›¸å…³çš„ä¸ªæ€§åŒ–æ–¹å¼ï¼Œåœ¨æœ€ä½³æ—¶é—´è‡ªåŠ¨ä¸Žæ¯ä¸ªå®¢æˆ·è¿›è¡Œäº’åŠ¨ã€‚é€šè¿‡åœ¨æ—…é€”ä¸­çš„ä»»ä½•äº‹ä»¶ä¸­åµŒå…¥è§¦å‘å™¨ï¼Œæ‚¨å¯ä»¥åœ¨ç‰¹å®šäº‹ä»¶ä¸­æ¿€æ´»å‚ä¸Žï¼ˆä¾‹å¦‚ç”µå­é‚®ä»¶å‘é€ï¼‰åˆ°ç›®æ ‡å®¢æˆ·ç¾¤ - è½¬æ¢çš„å®¢æˆ·ï¼Œå‘å‰ç§»åŠ¨çš„å®¢æˆ·ï¼Œç”šè‡³åœ¨ç‰¹å®šçš„ç‚¹æ—…ç¨‹ã€‚ è¿™äº›å®žæ—¶å‚ä¸Žè§¦å‘å™¨æ¯”ä»¥å¾€çš„åŸºäºŽè§„åˆ™çš„ç¼–ç ç³»ç»Ÿæ›´å®¹æ˜“ç®¡ç†å’Œæ›´æœ‰æ•ˆã€‚ é«˜çº§å®¢æˆ·æ—…ç¨‹åˆ†æžå¹³å°ä¸Žå¸¸ç”¨çš„è¥é”€å·¥å…·é›†æˆåœ¨ä¸€èµ·ï¼Œå› æ­¤æ‚¨å¯ä»¥ä½¿ç”¨çŽ°æœ‰çš„è¥é”€æŠ€æœ¯å †æ ˆä¸Žæ‚¨çš„å®¢æˆ·è¿›è¡Œäº’åŠ¨ã€‚ç»“æžœæ˜¯è¥é”€å’ŒCXå¹¿å‘Šç³»åˆ—çš„æ€§èƒ½æé«˜äº†ä¸€ä¸ªæ–°çš„æ°´å¹³ï¼Œé€šè¿‡æ›´å¥½çš„ç²¾åº¦ï¼Œç›®æ ‡å’Œæ—¶é—´ã€‚ å†…å®¹æŠ¥å‘Šå¯å¸®åŠ©æ‚¨äº†è§£ç½‘ç«™çš„å“ªäº›éƒ¨åˆ†æ•ˆæžœç†æƒ³ã€å“ªäº›é¡µé¢æœ€å—æ¬¢è¿Žï¼Œå¹¶æ®æ­¤ä¸ºå®¢æˆ·è¥é€ æ›´ä½³çš„ä½“éªŒã€‚ å…·ä½“æ¥è¯´ï¼Œç›®æ ‡æ˜¯ï¼š é€šè¿‡äººç‰©è§’è‰²å½¢è±¡åŒ–å’Œæ˜ å°„ç«¯åˆ°ç«¯çš„å®¢æˆ·æ—…ç¨‹ä¼˜åŒ–æ­£ç¡®çš„æ—…ç¨‹å±žæ€§å¯ä»¥æé«˜æ”¶ç›Š30ï¼…ä»¥ä¸Šâ€¦å‘çŽ°æœ€ä½³å®žçŽ°ç›®æ ‡ç›®æ ‡çš„ç½‘ç»œï¼Œç§»åŠ¨å’Œå®žä½“æ¸ é“ï¼Œå†…å®¹å’Œä½“éªŒçš„æ­£ç¡®ç»„åˆä½¿è¥é”€äººå‘˜èƒ½å¤Ÿè¯†åˆ«ä¸ªäººå’Œå›¢ä½“çš„æ—…ç¨‹ç“¶é¢ˆåˆ©ç”¨å®žé™…è¡Œä¸ºæ•°æ®æ¥å¢žå¼ºå’Œä¸ªæ€§åŒ–æ¯ä¸ªå®¢æˆ·çš„ä½“éªŒ ç®€å•çš„ä¸ªæ€§åŒ–â€¦ç„¶åŽï¼Œæˆ‘ä»¬é€šè¿‡ç®€å•çš„â€œä¸ªæ€§åŒ–â€å®¢æˆ·ä½“éªŒï¼ŒåŸºäºŽæµ…æ•°æ®ï¼Œå¦‚è´­ä¹°åŽ†å²ï¼Œæ€§åˆ«ï¼Œå•èº«æˆ–ç»“å©šï¼Œä½åœ¨å“ªé‡Œç­‰ç­‰ã€‚åŠ¨æ€ä¸ªæ€§åŒ–â€¦çŽ°åœ¨ï¼Œæˆ‘ä»¬æ­£åœ¨è¿›å…¥ä¸€ä¸ªæ–°çš„é˜¶æ®µï¼Œé‡ç‚¹æ˜¯æœ€ä½³æ¶ˆæ¯+æœ€ä½³é€šé“+æœ€ä½³æ—¶æœº+æœ€ä½³è®¾å¤‡ã€‚è¿™ä¸»è¦æ˜¯ç”±é¢„æµ‹åˆ†æžï¼ˆä¾‹å¦‚Next Next Offerï¼‰ï¼Œæœºå™¨å­¦ä¹ ï¼Œå…´è¶£å›¾ï¼Œä½ç½®æ„ŸçŸ¥ä¸Šä¸‹æ–‡æ•æ„Ÿåº¦ä»¥åŠå¤§è§„æ¨¡ä¸ªæ€§åŒ–æ‰€é©±åŠ¨çš„ã€‚ æ›´å¤æ‚çš„å…¬å¸æ— ç¼åœ°åˆ›å»ºé—­çŽ¯ï¼ˆåˆ†æžå’Œå‚ä¸Žå’Œæœºå™¨å­¦ä¹ ï¼‰ã€‚å®ƒä»¬åˆ©ç”¨å®¢æˆ·èº«ä»½ï¼Œä½ç½®ï¼Œå½“å‰æ´»åŠ¨ï¼Œç‰©ç†çŠ¶å†µï¼ˆå¤©æ°”ï¼Œäº¤é€šç­‰ï¼‰ï¼Œè´­ä¹°åŽ†å²ï¼Œç§»åŠ¨æ¨¡å¼ï¼Œéšå«å’Œæ˜Žç¡®çš„æ„å›¾ä¿¡å·ä»¥åŠç¤¾äº¤å›¾å½¢ç­‰å®žæ—¶ä¿¡å·ã€‚ å‡ å®¶å…¬å¸æ­£åœ¨å°†é¢„æµ‹åˆ†æžçº³å…¥ç§»åŠ¨è¥é”€å¹³å°ã€‚é€šè¿‡æ ¹æ®åŽ†å²æ•°æ®åˆ†æžå¤šä¸ªå®žæ—¶æ•°æ®æµï¼Œç®—æ³•æ¨¡åž‹é¢„æµ‹æœªæ¥è¶‹åŠ¿ï¼Œç”¨æˆ·åå¥½å’Œè¡ŒåŠ¨ï¼Œè®©å“ç‰ŒçŸ¥é“å®¢æˆ·åœ¨åšä»€ä¹ˆä¹‹å‰è¦åšçš„äº‹æƒ…ï¼Œæ¯”å¦‚æ”¾å¼ƒè´­ç‰©è½¦ï¼Œæ…åŠ¨æˆ–åˆ†äº«ä»–ä»¬çš„ä½“éªŒï¼Ÿç›®æ ‡æ˜¯ä»‹å…¥æ­£ç¡®çš„ä¿¡æ¯æˆ–æè®®æ¥æ¿€åŠ±æˆ–æ”¹å˜ä»–ä»¬çš„è¡Œä¸ºã€‚ è¿™ç§åˆ†æžæ´žå¯ŸåŠ›ä½¿é›¶å”®å•†èƒ½å¤Ÿè½¬ç§»åº—å†…ç­–ç•¥å’Œè¿è¥ï¼Œä»¥åŒ¹é…è´­ç‰©è€…çš„å…´è¶£å’Œè¡Œä¸ºï¼Œä»Žè€Œæé«˜å®¢æˆ·çš„å¿ è¯šåº¦ å®¢æˆ·æµå¤±é€šè¿‡æ”¶å…¥æŸå¤±é™ä½Žç›ˆåˆ©èƒ½åŠ›å®¢æˆ·æµå¤±å¯¼è‡´æ›´å¤§çš„è¥é”€å’Œé‡æ–°è´­ç½®æˆæœ¬å‘çŽ°æœ‰å®¢æˆ·é”€å”®çš„å¯èƒ½æ€§è¿œé«˜äºŽæ–°çš„å‰æ™¯äº†è§£å®¢æˆ·æµå¤±çŽ‡æœ‰åŠ©äºŽè®¡ç®—å®¢æˆ·çš„ç”Ÿå‘½å‘¨æœŸä»·å€¼è¿™æ˜¯è¡¡é‡å…¬å¸å¥åº·çŠ¶å†µå’Œé•¿è¿œå‰æ™¯çš„ä¸€ä¸ªæŒ‡æ ‡å®¢æˆ·æµå¤±å†³å®šäº†å®¢æˆ·ä¿ç•™æ˜¯å¦åœ¨æ”¹å–„å®ƒæœ‰åŠ©äºŽç¡®å®šå“ªäº›å®¢æˆ·å’Œç»†åˆ†å¸‚åœºæœ€é€‚åˆæ‚¨çš„äº§å“ ä¸€ä¸ªå…¸åž‹çš„é¡¾å®¢ä»Šå¤©å¯èƒ½ä¼šé¦–å…ˆé€šè¿‡ç¤¾äº¤åª’ä½“å¹¿å‘Šæ‰¾åˆ°äº§å“ï¼Œåœ¨å…¬å¸ç½‘ç«™ä¸ŠæŸ¥çœ‹å¹¶åœ¨å®žä½“åº—è´­ä¹°ã€‚ä½†æ˜¯ï¼Œæ‚¨æ˜¯å¦æœ‰èƒ½åŠ›å°†è¿™ä¸ªå®¢æˆ·è§†ä¸ºä¸€ä¸ªäººè€Œä¸æ˜¯ä¸‰ä¸ªä¸åŒçš„è´­ç‰©è€…ï¼Ÿå¤§å¤šæ•°å…¬å¸ä»å°†æ¯ä¸ªè®¾å¤‡å’Œæ¯ä¸ªäº¤äº’ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„å®¢æˆ·ï¼Œå°†å®¢æˆ·æ—…ç¨‹åˆ†è§£æˆä¸åŒçš„ç¢Žç‰‡ã€‚ ç”¨æˆ·è·¯å¾„åˆ†æž ç”¨æˆ·å…¸åž‹ï¼Œé¢‘ç¹è·¯å¾„è¯†åˆ« ç”¨æˆ·è¡Œä¸ºç‰¹å¾è¯†åˆ« è¾“å‡º æ´»è·ƒåº¦å®šä¹‰ï¼Œç¬¦åˆè¯¥åˆ†å€¼çš„ç”¨æˆ·æ›´å®¹æ˜“è½¬åŒ–ä¸ºä»˜è´¹ç”¨æˆ·å•Šï¼Œæ–°çš„æ ‡å‡†æ›´å®¹æ˜“ååº”å’Œè¡¡é‡äº§å“çš„è¿è¥æ•ˆæžœå’Œæ•ˆçŽ‡ï¼Œæ¯”å¦‚ç›®æ ‡æ˜¯ä»˜è´¹ç”¨æˆ·ï¼Œé‚£ä¹ˆç¬¦åˆè¯¥æŒ‡æ ‡çš„ç”¨æˆ·åº”è¯¥è¶Šå¤§ç¨‹åº¦å±žäºŽä»˜è´¹ç”¨æˆ·ï¼Œé‚£ä¹ˆè¯´æ˜Žè¯¥æŒ‡æ ‡çš„è¶Šåˆç†(ä¸»æˆåˆ†æž+å†³ç­–å½’å› ) åŸºäºŽè¡Œä¸ºè·¯å¾„çš„ç”¨æˆ·æ ‡ç­¾ç³»ç»Ÿ(ç”¨æˆ·åˆ†å±‚/åˆ†ç±»)å¯ä»¥æä¾›ç»™åƒäººåƒé¢+è¿è¥ æ¯”å¦‚æµå¤±ï¼Œä»˜è´¹ï¼Œæ´»åŠ¨å“åº”ç­‰ç»´åº¦(ç»´åº¦æ¥æºå¢žé‡å¯ä»¥æ˜¯ç”¨æˆ·åé¦ˆ) å®žæ—¶é¢„æµ‹å®¢æˆ·è¡Œä¸ºï¼Œå¹¶å†³å®šæœ€åˆé€‚çš„å‚ä¸Žæ–¹å¼ é€šè¿‡åœ¨æ—…é€”ä¸­çš„ä»»ä½•äº‹ä»¶ä¸­åµŒå…¥è§¦å‘å™¨ï¼Œæ‚¨å¯ä»¥åœ¨ç‰¹å®šäº‹ä»¶ä¸­æ¿€æ´»å‚ä¸Žï¼ˆä¾‹å¦‚ç”µå­é‚®ä»¶å‘é€ï¼‰åˆ°ç›®æ ‡å®¢æˆ·ç¾¤ - è½¬æ¢çš„å®¢æˆ·ï¼Œå‘å‰ç§»åŠ¨çš„å®¢æˆ·ï¼Œç”šè‡³åœ¨ç‰¹å®šçš„ç‚¹æ—…ç¨‹ã€‚ è¿™äº›å®žæ—¶å‚ä¸Žè§¦å‘å™¨æ¯”ä»¥å¾€çš„åŸºäºŽè§„åˆ™çš„ç¼–ç ç³»ç»Ÿæ›´å®¹æ˜“ç®¡ç†å’Œæ›´æœ‰æ•ˆ å®žæ—¶çš„Journey Map(ç”¨æˆ·æ—…è¡Œåœ°å›¾) äº§å“ä½¿ç”¨æ¨¡å¼è®¾è®¡ä¸Žå®žé™…æƒ…å†µå¯¹æ¯”ï¼Œæå‰é¢„æƒ³ç”¨æˆ·å¯èƒ½çš„æ“ä½œæ¨¡å¼ï¼Œä¸Žå®žé™…çš„å¯¹æ¯”ï¼Œå¦‚æžœå‘çŽ°ä¸ä¸€è‡´å¯ä»¥æ·±å…¥åˆ†æžåŽŸå› è°ƒæ•´äº§å“ç­–ç•¥å’Œè¿è¥ç­–ç•¥ï¼Œä¸ºä»€ä¹ˆè¿™ç§è®¾è®¡æ˜¯æœ‰æ•ˆçš„ï¼Œè€Œé‚£ç§æ˜¯æ— æ•ˆçš„(å› ç´ æç‚¼) é¢‘ç¹è·¯å¾„å’Œå…¸åž‹è·¯å¾„æ­ç¤ºï¼Œæ­ç¤ºå®¢æˆ·åœ¨åœ¨çº¿æŸ¥çœ‹äº§å“å’Œé€€å‡ºä¹‹é—´æ‰€é‡‡ç”¨çš„æœ€é‡è¦è·¯å¾„:å®¢æˆ·åœ¨åšä»€ä¹ˆä¹‹å‰è¦åšçš„äº‹æƒ…ï¼Œæ¯”å¦‚æ”¾å¼ƒè´­ä¹°æˆ–åˆ†äº«ä»–ä»¬çš„ä½“éªŒï¼Ÿç›®æ ‡æ˜¯ä»‹å…¥æ­£ç¡®çš„ä¿¡æ¯æˆ–æè®®æ¥æ¿€åŠ±æˆ–æ”¹å˜ä»–ä»¬çš„è¡Œä¸ºï¼Œå…·ä½“æ¯”å¦‚è¯´ï¼Œé€šè¿‡èšç±»æŠ€æœ¯åˆ’åˆ†ä»˜è´¹å’Œéžä»˜è´¹ï¼Œå¯¹æ¯”ä¸¤è€…è·¯å¾„ä¼˜åŒ–é¡µé¢å¸ƒå±€ï¼Œé€šè¿‡å‘çŽ°ä»˜è´¹ç”¨æˆ·è·¯å¾„ä¸­çš„å¼‚å¸¸æ¨¡å¼æ¥å¯¹ä»˜è´¹çŽ¯å¢ƒè¿›è¡Œä¼˜åŒ– å‘çŽ°å†·åƒ»åŠŸèƒ½ç‚¹å’Œè·¯å¾„]]></content>
  </entry>
  <entry>
    <title><![CDATA[iOSç¼–è¯‘è¿‡ç¨‹è¯¦è§£]]></title>
    <url>%2F2018%2F01%2F22%2F2017%2FiOS%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[é€šè¿‡Xcodeè®¾ç½®å·¥ç¨‹ä¾èµ–ä¹‹åŽï¼ŒXcodeä¼šå…ˆç¼–è¯‘è¢«ä¾èµ–å·¥ç¨‹ï¼Œæœ€åŽç¼–è¯‘æœ‰ä¾èµ–å·¥ç¨‹ã€‚è¾¾åˆ°æŽ§åˆ¶ç¼–è¯‘é¡ºåºçš„ç›®çš„ã€‚ ä¸‹é¢æ˜¯ç¼–è¯‘è¿‡ç¨‹å®Œæ•´æ­¥éª¤ ç¼–è¯‘ä¿¡æ¯å†™å…¥è¾…åŠ©æ–‡ä»¶ï¼Œåˆ›å»ºæ–‡ä»¶æž¶æž„ .app æ–‡ä»¶ å¤„ç†æ–‡ä»¶æ‰“åŒ…ä¿¡æ¯ æ‰§è¡Œ CocoaPod ç¼–è¯‘å‰è„šæœ¬ï¼ŒcheckPods Manifest.lock ç¼–è¯‘.mæ–‡ä»¶ï¼Œä½¿ç”¨ CompileC å’Œ clang å‘½ä»¤ é“¾æŽ¥éœ€è¦çš„ Framework ç¼–è¯‘ xib æ‹·è´ xib ï¼Œèµ„æºæ–‡ä»¶ ç¼–è¯‘ ImageAssets å¤„ç† info.plist æ‰§è¡Œ CocoaPod è„šæœ¬ æ‹·è´æ ‡å‡†åº“ åˆ›å»º .app æ–‡ä»¶å’Œç­¾å åŸºç¡€æ¦‚å¿µåœ¨äº†è§£xcodeæž„å»ºåŽŸåˆ™ä¹‹å‰ï¼Œéœ€è¦ç†Ÿæ‚‰workspaceç›¸å…³çš„æ¦‚å¿µï¼Œå³workspace,projectå’Œtargetã€‚ targettargetæŒ‡å®šäº†æž„å»ºçš„product,åŒ…å«å°†workspaceæˆ–projectä¸­çš„ä¸€ç»„æ–‡ä»¶æž„å»ºæˆproductçš„æŒ‡ä»¤ã€‚å•ä¸ªtargetå®šä¹‰ä¸€ä¸ªproduct,å®ƒå°†è¾“å…¥ï¼ˆæºæ–‡ä»¶å’Œå¤„ç†è¿™äº›æºæ–‡ä»¶çš„æŒ‡ä»¤ï¼ˆåŒ…å«æ‰€è®¾å®šçš„æž„å»ºsettingså’Œphasesï¼‰ï¼‰ç»„ç»‡è¿›æž„å»ºç³»ç»Ÿä¸­ã€‚projectå’Œtargetæ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚ targetä¼šç»§æ‰¿projectçš„build settingsï¼Œä½†å¯ä»¥ä»¥targetä¸ºç²’åº¦è®¾ç½®build settings,ä¸”Xcodeä¸­å½“å‰ä¸€æ¬¡åªä¼šæœ‰ä¸€ä¸ªæœ‰æ•ˆtarget,æ­¤æœ‰æ•ˆtargetåœ¨xcode schemeä¸­æ ‡è¯†ã€‚ è‹¥target Aä¾èµ–target Bçš„è¾“å‡ºæ¥æž„å»ºï¼Œåˆ™Aä¾èµ–Bï¼Œå½“å®ƒä»¬å­˜åœ¨äºŽä¸€ä¸ªxcode workspaceä¸­çš„æ—¶å€™ï¼ŒXcodeä¼šå‘çŽ°æ­¤ä¾èµ–å…³ç³»å¹¶æŒ‰é¡ºåºæž„å»ºã€‚è¿™ç§ä¾èµ–ç§°ä¸ºéšæ€§ä¾èµ–ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨build settingsä¸­å£°æ˜Žæ˜¾æ€§ä¾èµ–ï¼Œä¹Ÿå¯å°†éšæ€§ä¾èµ–çš„ä¸¤ä¸ªtargetæ˜¾æ€§å£°æ˜Žä¸ºæ²¡æœ‰ä¾èµ–ã€‚æ¯”å¦‚å¯èƒ½åœ¨åŒä¸€ä¸ªworkspaceä¸­åŒæ—¶æž„å»ºä¸€ä¸ªåº“å¹¶æž„å»ºä¸€ä¸ªä¾èµ–è¿™ä¸ªåº“çš„åº”ç”¨ï¼Œåˆ™xcodeä¼šé€‰æ‹©å…ˆæž„å»ºåº“ã€‚ä½†å¦‚æžœåº”ç”¨æƒ³é“¾æŽ¥åº“çš„æŸä¸ªç‰¹å®šç‰ˆæœ¬ï¼Œåˆ™å¯ä»¥æ˜¾æ€§å£°æ˜Žè¿™ä¸ªä¾èµ–å…³ç³»ï¼Œæ­¤æ—¶éšæ€§ä¾èµ–å³è¢«è¦†ç›–äº†ã€‚ projectxcode projectæ˜¯å­˜å‚¨æž„å»ºä¸€ä¸ªæˆ–å¤šä¸ªè½¯ä»¶äº§å“æ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ï¼Œèµ„æºå’Œä¿¡æ¯çš„ä»“åº“ã€‚projectåŒ…å«æž„å»ºproductæ‰€éœ€çš„æ‰€æœ‰è¦ç´ å¹¶ç»´æŠ¤å®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªtargets(targetæŒ‡å®šäº†æž„å»ºproductçš„æ–¹å¼)ã€‚projectå®šä¹‰äº†æ‰€æœ‰targetçš„é»˜è®¤build settingsï¼Œå„targetå¯ä»¥é‡è½½ã€‚Xcode projectæ–‡ä»¶åŒ…å«å¦‚ä¸‹ä¿¡æ¯ï¼šæºæ–‡ä»¶çš„å¼•ç”¨ï¼šæºä»£ç ï¼ˆåŒ…æ‹¬å¤´æ–‡ä»¶å’Œå®žçŽ°æ–‡ä»¶ï¼‰ï¼Œlibraryå’Œframework(xcodeå†…éƒ¨æˆ–è€…å¤–éƒ¨),èµ„æºæ–‡ä»¶ï¼Œinterface builderæ–‡ä»¶æ–‡ä»¶ç»“æž„åˆ—è¡¨ä¸­ç»„ç»‡æºæ–‡ä»¶çš„Groupsprojectçº§åˆ«çš„buildé€‰é¡¹targetsdebugæˆ–æµ‹è¯•programçš„å¯æ‰§è¡ŒçŽ¯å¢ƒï¼šä»Žxcodeè¿è¡Œæˆ–è°ƒè¯•æ—¶å¯åŠ¨å“ªäº›å¯ä»¥æ‰§è¡Œæ–‡ä»¶ï¼Œä¼ ç»™å¯æ‰§è¡Œæ–‡ä»¶çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œç¨‹åºè¿è¡Œæ—¶è®¾ç½®çš„çŽ¯å¢ƒå˜é‡æ€»ä¹‹ï¼Œprojectå¯ä»¥å•ç‹¬å­˜åœ¨ä¹Ÿå¯ä»¥åŒ…å«åœ¨workspaceä¸­ï¼ŒåŒæ—¶å¯ä»¥åœ¨Schemeä¸­æŒ‡å®šå“ªä¸ªTargetã€buildé…ç½®ã€å“ªä¸ªå¯æ‰§è¡Œé…ç½®åœ¨æŸä¸ªæ—¶åˆ»æ˜¯æœ‰æ•ˆçš„ã€‚ build settingsä¸€ä¸ªbuild settingæ˜¯ä¸€ä¸ªæŒ‡ç¤ºäº§å“æŸä¸ªæ–¹é¢æž„å»ºæ–¹å¼çš„å˜é‡ï¼Œæ¯”å¦‚å†³å®šxcodeä¼ ç»™ç¼–è¯‘å™¨çš„å‚æ•°é€‰é¡¹æ˜¯æ€Žæ ·ã€‚å…¶æ˜¯ä¸€ä¸ªå¸¸é‡æˆ–è€…ä¸€ä¸ªå…¬å¼ä¾›ç»™xcodeåœ¨æž„å»ºçš„æ—¶å€™è®¡ç®—build settingã€‚ workspaceworkspace æ˜¯ç»„ç»‡projectså’Œå…¶ä»–ååŒå·¥ä½œçš„æ–‡æ¡£çš„ä¸€ä»½æ–‡æ¡£ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜ç»´æŠ¤projectå’Œtargetä¹‹é—´çš„æ˜¾æ€§åŠéšæ€§çš„ä¾èµ–å…³ç³»ã€‚é»˜è®¤workspaceä¸­çš„æ‰€æœ‰Xcode projectséƒ½åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹æž„å»ºï¼Œç§°ä¸ºworkspace build directoryï¼Œç”±äºŽæ‰€æœ‰projectçš„æ‰€æœ‰æ–‡ä»¶éƒ½åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œæ‰€ä»¥æ‰€æœ‰æ–‡ä»¶éƒ½å¯¹æ¯ä¸ªprojectå¯è§ã€‚æ¯”å¦‚ä¸¤ä¸ªprojectä½¿ç”¨åŒä¸€ä¸ªåº“ï¼Œåˆ™ä¸ç”¨å¤åˆ¶åˆ°å¦ä¸€ä¸ªprojectç›®å½•ä¸­ã€‚workspaceä¸­çš„æ¯ä¸ªprojectéƒ½æœ‰å…¶ç‹¬ç«‹id,åŒæ—¶projectå¯ä»¥å±žäºŽå¤šä¸ªworkspaceï¼Œå¯ä»¥å•ç‹¬æ‰“å¼€projectæˆ–è€…åœ¨å…¶ä»–workspaceä¸­æ‰“å¼€ï¼Œä¸”éƒ½ä¸ç”¨é‡æ–°é…ç½®projectæˆ–è€…workspaceã€‚å¯ä»¥ä½¿ç”¨workspaceé»˜è®¤çš„build ç›®å½•ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªã€‚å¦‚æžœprojectæŒ‡å®šäº†æž„å»ºç›®å½•ï¼Œè¿™ä¸ªç›®å½•ä¼šè¢«projectæž„å»ºæ—¶æ‰€åœ¨çš„workspaceçš„buildç›®å½•è¦†ç›–ã€‚ xcode schemexcodeschemeå®šä¹‰äº†ä¸€ç³»åˆ—æž„å»ºçš„targetsï¼Œæž„å»ºæ—¶çš„é…ç½®ï¼Œå’Œä¸€ç³»åˆ—æ‰§è¡Œçš„æµ‹è¯•ã€‚å¯ä»¥æœ‰å¾ˆå¤šscheme,ä½†åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„ã€‚é€‰æ‹©schemeæ—¶ï¼Œæ„å‘³ç€ä½ ä¹Ÿé€‰æ‹©äº†ä¸€ä¸ªè¿è¡Œç›®æ ‡ï¼ˆproductæž„å»ºçš„ç¡¬ä»¶å¹³å°)ã€‚å¯ä»¥æŒ‡å®šschemeæ˜¯å¦å­˜å‚¨åœ¨projectä¸­ï¼Œä»¥ä¾¿åŒ…å«æ­¤projectçš„æ‰€æœ‰workspaceéƒ½å¯ä»¥ä½¿ç”¨äº›scheme,å½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®šåªå­˜å‚¨åœ¨æŸä¸ªworkspaceä¸­ã€‚ ä¸€èˆ¬çš„æŸä¸ªåº”ç”¨å•ç‹¬æ–°å»ºä¸€ä¸ª project å°±å¯ä»¥äº†ï¼Œç„¶åŽæŠŠæ‰€æœ‰çš„ç¨‹åºæ–‡ä»¶éƒ½æ”¾åœ¨é‡Œé¢ï¼Œè¿™ä¸ªå¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†æ™®é€šçš„éœ€æ±‚ï¼Œä½†æ˜¯æœ‰æ—¶å€™ï¼Œé¡¹ç›®æœ‰å¯èƒ½è¦ä½¿ç”¨å…¶ä»–çš„é¡¹ç›®æ–‡ä»¶ï¼Œæˆ–è€…å¼•å…¥å…¶ä»–çš„é™æ€åº“æ–‡ä»¶ï¼Œè¿™ä¸ªæ—¶å€™ workspace å°±æ´¾ä¸Šç”¨åœºäº†ï¼Œworkspace å³å¯ä»¥å•ç‹¬ç®¡ç†å¤šä¸ªé¡¹ç›®ï¼Œåˆå¯ä»¥é€šè¿‡é…ç½®ï¼Œè®©å„ä¸ªé¡¹ç›®ç›¸äº’ä¾èµ–ï¼Œå¦‚æžœä¸ç”¨ workspaceï¼Œä»¥å‰çš„åšæ³•æ˜¯å¦‚æžœç”¨åˆ°å…¶ä»–é¡¹ç›®çš„æ–‡ä»¶ï¼Œè¦æ‰‹åŠ¨ copy æ–‡ä»¶åˆ°å½“å‰çš„é¡¹ç›®ï¼Œåœ¨ workspace é‡Œè¿™ä¸ªæ­¥éª¤ä¸éœ€è¦äº†ã€‚]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®ç§‘å­¦numpy]]></title>
    <url>%2F2018%2F01%2F02%2F2018%2F%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6numpy%2F</url>
    <content type="text"><![CDATA[æ•°ç»„çš„åˆ›å»º æœ‰å…³æ•°ç»„çš„å±žæ€§å’Œå‡½æ•° æ•°ç»„å…ƒç´ çš„èŽ·å–â€“æ™®é€šç´¢å¼•ã€åˆ‡ç‰‡ã€å¸ƒå°”ç´¢å¼•å’ŒèŠ±å¼ç´¢å¼• ç»Ÿè®¡å‡½æ•°ä¸Žçº¿æ€§ä»£æ•°è¿ç®— éšæœºæ•°çš„ç”Ÿæˆ çŸ©é˜µå¯¹è±¡ åˆ—è¡¨ï¼Œæ•°ç»„ï¼Œå…ƒç»„ æ•°ç»„çš„åˆ›å»ºnumpyä¸­ä½¿ç”¨array()å‡½æ•°åˆ›å»ºæ•°ç»„ï¼Œarrayçš„é¦–ä¸ªå‚æ•°ä¸€å®šæ˜¯ä¸€ä¸ªåºåˆ—ï¼Œå¯ä»¥æ˜¯å…ƒç»„ä¹Ÿå¯ä»¥æ˜¯åˆ—è¡¨ã€‚ arange()å‡½æ•°åˆ›å»ºä¸€ç»´æœ‰åºæ•°ç»„1234567891011&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; ls1 = range(10)&gt;&gt;&gt; list(ls1)[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]&gt;&gt;&gt; type(ls1)&lt;type &apos;list&apos;&gt;&gt;&gt;&gt; ls2 = np.arange(10)&gt;&gt;&gt; list(ls2)[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]&gt;&gt;&gt; type(ls2)&lt;type &apos;numpy.ndarray&apos;&gt; ä»Ž[2,20)é—´éš”ä¸º3çš„ç­‰å·®æ•°åˆ— 12a = np.arange(2,20,3)[ 2 5 8 11 14 17] array()å‡½æ•°å¦‚æžœä¸€ç»´æ•°ç»„ä¸æ˜¯ä¸€ä¸ªè§„å¾‹çš„æœ‰åºå…ƒç´ ï¼Œè€Œæ˜¯äººä¸ºçš„è¾“å…¥ï¼Œå°±éœ€è¦array()å‡½æ•°åˆ›å»ºäº†ã€‚ 12345&gt;&gt;&gt; arr1 = np.array((1,20,13,28,22))&gt;&gt;&gt; arr1array([ 1, 20, 13, 28, 22])&gt;&gt;&gt; type(arr1)&lt;type &apos;numpy.ndarray&apos;&gt; ä¸Šé¢æ˜¯ç”±å…ƒç»„åºåˆ—æž„æˆçš„ä¸€ç»´æ•°ç»„ã€‚ 12345&gt;&gt;&gt; arr2 = np.array([1,1,2,3,5,8,13,21])&gt;&gt;&gt; arr2array([ 1, 1, 2, 3, 5, 8, 13, 21])&gt;&gt;&gt; type(arr2)&lt;type &apos;numpy.ndarray&apos;&gt; ä¸Šé¢æ˜¯ç”±åˆ—è¡¨åºåˆ—æž„æˆçš„ä¸€ç»´æ•°ç»„ã€‚ äºŒç»´æ•°ç»„çš„åˆ›å»ºäºŒç»´æ•°ç»„çš„åˆ›å»ºï¼Œå…¶å®žåœ¨å°±æ˜¯åˆ—è¡¨å¥—åˆ—è¡¨æˆ–å…ƒç»„å¥—å…ƒç»„ã€‚ 1234567&gt;&gt;&gt; arr3 = np.array(((1,1,2,3),(5,8,13,21),(34,55,89,144)))&gt;&gt;&gt; arr3array([[ 1, 1, 2, 3], [ 5, 8, 13, 21], [ 34, 55, 89, 144]])``` ä¸Šé¢ä½¿ç”¨å…ƒç»„å¥—å…ƒç»„çš„æ–¹å¼ã€‚ arr4 = np.array([[1,2,3,4],[5,6,7,8],[9,10,11,12]])arr4array([[ 1, 2, 3, 4], [ 5, 6, 7, 8], [ 9, 10, 11, 12]])1234567ä¸Šé¢ä½¿ç”¨åˆ—è¡¨å¥—åˆ—è¡¨çš„æ–¹å¼ã€‚å¯¹äºŽé«˜ç»´æ•°ç»„åœ¨å°†æ¥çš„æ•°æ®åˆ†æžä¸­ç”¨çš„æ¯”è¾ƒå°‘ï¼Œè¿™é‡Œå…³äºŽé«˜ç»´æ•°ç»„çš„åˆ›å»ºå°±ä¸èµ˜è¿°äº†ã€‚#### ç‰¹æ®Šæ•°ç»„numpyä¸­ä¹Ÿæä¾›äº†å‡ ç§ç‰¹æ®Šçš„æ•°ç»„np.ones è¿”å›žä¸€ç»´å…ƒç´ å…¨ä¸º1çš„æ•°ç»„ np.ones(5)array([ 1., 1., 1., 1., 1.])1è¿”å›žå…ƒç´ å…¨ä¸º1çš„3Ã—4äºŒç»´æ•°ç»„ np.ones([3,4])array([[ 1., 1., 1., 1.], [ 1., 1., 1., 1.], [ 1., 1., 1., 1.]])1np.zeros è¿”å›žä¸€ç»´å…ƒç´ å…¨ä¸º0çš„æ•°ç»„ np.zeros(3)array([ 0., 0., 0.])1è¿”å›žå…ƒç´ å…¨ä¸º0çš„3Ã—4äºŒç»´æ•°ç»„ np.zeros([3,4])array([[ 0., 0., 0., 0.], [ 0., 0., 0., 0.], [ 0., 0., 0., 0.]])1np.empty è¿”å›žä¸€ç»´ç©ºæ•°ç»„ np.empty(3)array([ 0., 0., 0.])12è¿”å›ž3Ã—4äºŒç»´ç©ºæ•°ç»„ np.empty([3,4])array([[ 0., 0., 0., 0.], [ 0., 0., 0., 0.], [ 0., 0., 0., 0.]])1234567### æ•°ç»„çš„å±žæ€§arr3.shape è¡Œåˆ—arr3.dtype å…ƒç´ ç±»åž‹arr3.ndim çº¬åº¦arr3.size å…ƒç´ æ€»ä¸ªæ•° arr3array([[ 1, 1, 2, 3], [ 5, 8, 13, 21], [ 34, 55, 89, 144]])1shapeæ–¹æ³•è¿”å›žæ•°ç»„çš„è¡Œæ•°å’Œåˆ—æ•° arr3.shape(3L, 4L)1dtypeæ–¹æ³•è¿”å›žæ•°ç»„çš„æ•°æ®ç±»åž‹ arr3.dtypedtype(â€˜int32â€™)1é€šè¿‡ravelçš„æ–¹æ³•å°†æ•°ç»„æ‹‰ç›´ï¼ˆå¤šç»´æ•°ç»„é™ä¸ºä¸€ç»´æ•°ç»„ï¼‰ arr3.ravel()array([ 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144])1é€šè¿‡flattençš„æ–¹æ³•å°†æ•°ç»„æ‹‰ç›´ b = arr3.flatten()barray([ 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144])12ä¸¤è€…çš„åŒºåˆ«åœ¨äºŽravelæ–¹æ³•ç”Ÿæˆçš„æ˜¯åŽŸæ•°ç»„çš„è§†å›¾ï¼Œæ— éœ€å æœ‰å†…å­˜ç©ºé—´ï¼Œä½†è§†å›¾çš„æ”¹å˜ä¼šå½±å“åˆ°åŽŸæ•°ç»„çš„å˜åŒ–ã€‚è€Œflattenæ–¹æ³•è¿”å›žçš„æ˜¯çœŸå®žå€¼ï¼Œå…¶å€¼çš„æ”¹å˜å¹¶ä¸ä¼šå½±å“åŽŸæ•°ç»„çš„æ›´æ”¹ã€‚é€šè¿‡ä¸‹é¢çš„ä¾‹å­ä¹Ÿè®¸å°±èƒ½æ˜Žç™½äº†ï¼š b[:3] = 0barray([ 0, 0, 0, 3, 5, 8, 13, 21, 34, 55, 89, 144])arr3array([[ 1, 1, 2, 3], [ 5, 8, 13, 21], [ 34, 55, 89, 144]])1é€šè¿‡æ›´æ”¹bçš„å€¼ï¼ŒåŽŸæ•°ç»„æ²¡æœ‰å˜åŒ–ã€‚ a[:3] = 0aarray([ 0, 0, 0, 3, 5, 8, 13, 21, 34, 55, 89, 144])arr3array([[ 0, 0, 0, 3], [ 5, 8, 13, 21], [ 34, 55, 89, 144]])1açš„å€¼å˜åŒ–åŽï¼Œä¼šå¯¼è‡´åŽŸæ•°ç»„è·Ÿç€å˜åŒ–ã€‚ arr4array([[ 1, 2, 3, 4], [ 5, 6, 7, 8], [ 9, 10, 11, 12]])1ndim è¿”å›žæ•°ç»„çš„ç»´æ•° arr4.ndim21size è¿”å›žæ•°ç»„å…ƒç´ çš„ä¸ªæ•° arr4.size121T è¿”å›žæ•°ç»„çš„è½¬ç½®ç»“æžœ arr4.Tarray([[ 1, 5, 9], [ 2, 6, 10], [ 3, 7, 11], [ 4, 8, 12]])12345æ³¨ï¼š å¦‚æžœæ•°ç»„çš„æ•°æ®ç±»åž‹ä¸ºå¤æ•°çš„è¯ï¼Œrealæ–¹æ³•å¯ä»¥è¿”å›žå¤æ•°çš„å®žéƒ¨ï¼Œimagæ–¹æ³•è¿”å›žå¤æ•°çš„è™šéƒ¨### æ•°ç»„å‡½æ•°reshape()å‡½æ•°å’Œresize()å‡½æ•°å¯ä»¥é‡æ–°è®¾ç½®æ•°ç»„çš„è¡Œæ•°å’Œåˆ—æ•°ï¼š arr5 = np.array(np.arange(24))arr5array([ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16,17, 18, 19, 20, 21, 22, 23])a = arr5.reshape(4,6)aarray([[ 0, 1, 2, 3, 4, 5], [ 6, 7, 8, 9, 10, 11], [12, 13, 14, 15, 16, 17], [18, 19, 20, 21, 22, 23]])1é€šè¿‡reshapeå‡½æ•°å°†ä¸€ç»´æ•°ç»„è®¾ç½®ä¸ºäºŒç»´æ•°ç»„ï¼Œä¸”ä¸º4è¡Œ6åˆ—çš„æ•°ç»„ã€‚ a.resize(6,4)aarray([[ 0, 1, 2, 3], [ 4, 5, 6, 7], [ 8, 9, 10, 11], [12, 13, 14, 15], [16, 17, 18, 19], [20, 21, 22, 23]])123456é€šè¿‡resizeå‡½æ•°ä¼šç›´æŽ¥æ”¹å˜åŽŸæ•°ç»„çš„å½¢çŠ¶ã€‚### æ•°ç»„å…ƒç´ çš„èŽ·å–#### ä¸€ç»´æ•°ç»„å…ƒç´ é€šè¿‡ç´¢å¼•å’Œåˆ‡ç‰‡çš„æ–¹å¼èŽ·å–æ•°ç»„å…ƒç´ ï¼Œä¸€ç»´æ•°ç»„å…ƒç´ çš„èŽ·å–ä¸Žåˆ—è¡¨ã€å…ƒç»„çš„èŽ·å–æ–¹å¼ä¸€æ ·ï¼š arr7 = np.array(np.arange(10))arr7array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])1èŽ·å–ç¬¬4ä¸ªå…ƒç´  arr7[3]31èŽ·å–å‰3ä¸ªå…ƒç´  arr7[:3]array([0, 1, 2])1èŽ·å–ç¬¬4ä¸ªå…ƒç´ å³ä¹‹åŽçš„æ‰€æœ‰å…ƒç´  arr7[3:]array([3, 4, 5, 6, 7, 8, 9])1èŽ·å–æœ«å°¾çš„2ä¸ªå…ƒç´  arr7[-2:]array([8, 9])1ä»Žç¬¬1ä¸ªå…ƒç´ å¼€å§‹ï¼ŒèŽ·å–æ­¥é•¿ä¸º2çš„æ‰€æœ‰å…ƒç´  arr7[::2]array([0, 2, 4, 6, 8])12#### äºŒç»´æ•°ç»„å…ƒç´  arr8 = np.array(np.arange(12)).reshape(3,4)arr8array([[ 0, 1, 2, 3], [ 4, 5, 6, 7], [ 8, 9, 10, 11]])1è¿”å›žæ•°ç»„çš„ç¬¬2è¡Œ arr8[1]array([4, 5, 6, 7])1è¿”å›žæ•°ç»„çš„å‰2è¡Œ arr8[:2]array([[0, 1, 2, 3], [4, 5, 6, 7]])1è¿”å›žæŒ‡å®šçš„ç¬¬1è¡Œå’Œç¬¬3è¡Œ arr8[[0,2]]array([[ 0, 1, 2, 3], [ 8, 9, 10, 11]])1è¿”å›žæ•°ç»„çš„ç¬¬1åˆ— arr8[:,0]array([0, 4, 8])1è¿”å›žæ•°ç»„çš„åŽ2åˆ— arr8[:,2:]array([[ 2, 3], [ 6, 7], [10, 11]])1è¿”å›žæ•°ç»„çš„ç¬¬1åˆ—å’Œç¬¬3åˆ— arr8[:,[0,2]]array([[ 0, 2], [ 4, 6], [ 8, 10]])1è¿”å›žæ•°ç»„ä¸­ç¬¬2è¡Œç¬¬3åˆ—å¯¹åº”çš„å…ƒç´  arr8[1,2]61234#### å¸ƒå°”ç´¢å¼•å¸ƒå°”ç´¢å¼•ï¼Œå³ç´¢å¼•å€¼ä¸ºTrueå’ŒFalseï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å¸ƒå°”ç´¢å¼•å¿…é¡»è¾“æ•°ç»„å¯¹è±¡ã€‚ log = np.array([True,False,False,True,True,False])arr9 = np.array(np.arange(24)).reshape(6,4)arr9array([[ 0, 1, 2, 3], [ 4, 5, 6, 7], [ 8, 9, 10, 11], [12, 13, 14, 15], [16, 17, 18, 19], [20, 21, 22, 23]])1è¿”å›žæ‰€æœ‰ä¸ºTrueçš„å¯¹åº”è¡Œ arr9[log]array([[ 0, 1, 2, 3], [12, 13, 14, 15], [16, 17, 18, 19]])1é€šè¿‡è´Ÿå·ç­›é€‰å‡ºæ‰€æœ‰ä¸ºFalseçš„å¯¹åº”è¡Œ arr9[-log]array([[ 4, 5, 6, 7], [ 8, 9, 10, 11], [20, 21, 22, 23]]) 1ä¸¾ä¸€ä¸ªåœºæ™¯ï¼Œä¸€ç»´æ•°ç»„è¡¨ç¤ºåŒºåŸŸï¼ŒäºŒç»´æ•°ç»„è¡¨ç¤ºè§‚æµ‹å€¼ï¼Œå¦‚ä½•é€‰å–ç›®æ ‡åŒºåŸŸçš„è§‚æµ‹ï¼Ÿ area = np.array([â€˜Aâ€™,â€™Bâ€™,â€™Aâ€™,â€™Câ€™,â€™Aâ€™,â€™Bâ€™,â€™Dâ€™])areaarray([â€˜Aâ€™, â€˜Bâ€™, â€˜Aâ€™, â€˜Câ€™, â€˜Aâ€™, â€˜Bâ€™, â€˜Dâ€™], dtype=â€™|S1â€™)observes = np.array(np.arange(21)).reshape(7,3)observesarray([[ 0, 1, 2], [ 3, 4, 5], [ 6, 7, 8], [ 9, 10, 11], [12, 13, 14], [15, 16, 17], [18, 19, 20]])1è¿”å›žæ‰€æœ‰AåŒºåŸŸçš„è§‚æµ‹ã€‚ observes[area == â€˜Aâ€™]array([[ 0, 1, 2], [ 6, 7, 8], [12, 13, 14]])1è¿”å›žæ‰€æœ‰AåŒºåŸŸå’ŒDåŒºåŸŸçš„è§‚æµ‹ã€‚#æ¡ä»¶å€¼éœ€è¦åœ¨&amp;(and),|(or)ä¸¤ç«¯ç”¨åœ†æ‹¬å·æ‹¬èµ·æ¥ observes[(area == â€˜Aâ€™)|(area == â€˜Dâ€™)]array([[ 0, 1, 2], [ 6, 7, 8], [12, 13, 14], [18, 19, 20]])12å¸ƒå°”ç´¢å¼•ä¹Ÿå¯ä»¥ä¸Žæ™®é€šç´¢å¼•æˆ–åˆ‡ç‰‡æ··åˆä½¿ç”¨ï¼šè¿”å›žAåŒºåŸŸçš„æ‰€æœ‰è¡Œï¼Œä¸”åªèŽ·å–ç¬¬1åˆ—ä¸Žç¬¬3åˆ—æ•°æ®ã€‚ observes[area == â€˜Aâ€™][:,[0,2]]array([[ 0, 2], [ 6, 8], [12, 14]])123#### èŠ±å¼ç´¢å¼•èŠ±å¼ç´¢å¼•ï¼šå®žé™…ä¸Šå°±æ˜¯å°†æ•°ç»„ä½œä¸ºç´¢å¼•å°†åŽŸæ•°ç»„çš„å…ƒç´ æå–å‡ºæ¥ arr10 = np.arange(1,29).reshape(7,4)arr10array([[ 1, 2, 3, 4], [ 5, 6, 7, 8], [ 9, 10, 11, 12], [13, 14, 15, 16], [17, 18, 19, 20], [21, 22, 23, 24], [25, 26, 27, 28]])1æŒ‰ç…§æŒ‡å®šé¡ºåºè¿”å›žæŒ‡å®šè¡Œ arr10[[4,1,3,5]]array([[17, 18, 19, 20], [ 5, 6, 7, 8], [13, 14, 15, 16], [21, 22, 23, 24]])1è¿”å›žæŒ‡å®šçš„è¡Œä¸Žåˆ— arr10[[4,1,5]][:,[0,2,3]]array([[17, 19, 20], [ 5, 7, 8], [21, 23, 24]])arr10[[4,1,5],[0,2,3]]array([17, 7, 24])1234### æ•°ç»„è¿ç®—#### å››åˆ™ a = np.array([1,2])b= np.array([3,4])print a+b12#### æ ¹å·å’ŒæŒ‡æ•° import numpy as npa = np.array([1,2])print np.sqrt(a)print np.exp(a)print np.square(a)print np.power(a,5)print a 5 #å¯ä»¥ç”¨Powerä¹Ÿå¯ä»¥ç›´æŽ¥ ,å½“ç„¶è¿™ä¹ˆå†™æ¯”è¾ƒçˆ½Output:[ 1. 1.41421356][ 2.71828183 7.3890561 ][1 4][ 1 32][ 1 32] 12#### æ•°ç»„æœ€å¤§æœ€å°å€¼ import numpy as npa = np.arange(20).reshape(4,5)print aprint a.min()print a.max()print a.sum()print a.min(axis=0) #minimun element in each columnprint a.min(axis=1) #minimun element in each row12#### æ•°ç»„çš„å‡å€¼/ä¸­ä½æ•° import numpya =range(5) +[1000]print aprint numpy.mean(a),numpy.median(a)12345678### çŸ©é˜µå¯¹è±¡&gt;çŸ©é˜µå¯¹è±¡å’Œæ•°ç»„çš„ä¸»è¦æœ‰ä¸¤ç‚¹å·®åˆ«ï¼šçŸ©é˜µæ˜¯äºŒç»´çš„ï¼Œè€Œæ•°ç»„çš„å¯ä»¥æ˜¯ä»»æ„æ­£æ•´æ•°ç»´çŸ©é˜µçš„*æ“ä½œç¬¦è¿›è¡Œçš„æ˜¯çŸ©é˜µä¹˜æ³•ï¼Œä¹˜å·å·¦ä¾§çš„çŸ©é˜µåˆ—å’Œä¹˜å·å³ä¾§çš„çŸ©é˜µè¡Œè¦ç›¸ç­‰ï¼Œè€Œåœ¨æ•°ç»„ä¸­*æ“ä½œç¬¦è¿›è¡Œçš„æ˜¯æ¯ä¸€å…ƒç´ çš„å¯¹åº”ç›¸ä¹˜ï¼Œä¹˜å·ä¸¤ä¾§çš„æ•°ç»„æ¯ä¸€ç»´å¤§å°éœ€è¦ä¸€è‡´#### æ•°ç»„è½¬çŸ©é˜µ a = np.ones(4)np.asmatrix(a)np.mat(np.ones((2,4)))np.mat(np.random.rand(2,2))12#### é€†çŸ©é˜µ arr_mat_i = arr_mat.I12#### çŸ©é˜µä¹˜æ³• arr_mat * arr_mat_i12#### eyeå‡½æ•° np.eye(4) array([[ 1., 0., 0., 0.], [ 0., 1., 0., 0.], [ 0., 0., 1., 0.], [ 0., 0., 0., 1.]])12#### çŸ©é˜µæœ€å¤§å€¼ç´¢å¼• import numpy as np a = np.array([[1,4,6,9,10],[3,6,2,8,12]]) a = a.flatten()#å¤šç»´å˜1ç»´åº¦print type(a)print np.argmax(a) print aprint a.reshape(2,5)#å†å˜å›žæ¥12#### çŸ©é˜µè¡Œç›¸åŠ  X.toarray().sum(axis=0) #è¡ŒX.toarray().sum() #æ‰€æœ‰å…ƒç´  ```]]></content>
      <tags>
        <tag>python</tag>
        <tag>æ•°æ®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitåº“ä½¿ç”¨è¿›é˜¶]]></title>
    <url>%2F2017%2F12%2F20%2F2017%2Fgit%E5%BA%93%E4%BD%BF%E7%94%A8%E8%BF%9B%E9%98%B6%2F</url>
    <content type="text"><![CDATA[Gitåœ¨å­˜å‚¨æ•°æ®çš„æ—¶å€™ï¼Œå­˜å‚¨çš„éƒ½æ˜¯å®Œæ•´çš„å¯¹è±¡ï¼Œå¹¶ä¸æ˜¯å·®å¼‚ï¼Œå«åšæ¾æ•£å¯¹è±¡Loose Objectï¼Œæœ‰æ—¶å€™ä½ åªæ”¹å˜äº†ä¸€ç‚¹ï¼Œä½†æ˜¯åŒæ—¶ä¼šæ‹¥æœ‰è¿‘ä¹Žä¸¤å€å¤§å°çš„blobå¯¹è±¡ã€‚è¿™æ ·å­åšå²‚ä¸æ˜¯å¾ˆä¸èŠ‚çœç£ç›˜ï¼Ÿæ‰€ä»¥Gitä¼šåœ¨æ¯æ¬¡pushåˆ°è¿œç¨‹çš„æ—¶å€™è¿›è¡Œgarbage collectæ“ä½œï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±æ‰‹åŠ¨æ”¹è¿›è¡Œgcï¼Œå¦‚ï¼šgit gcCounting objects: 6, done.Delta compression using up to 4 threads.Compressing objects: 100% (3/3), done.Writing objects: 100% (6/6), done.Total 6 (delta 0), reused 0 (delta 0) ç„¶åŽæŸ¥çœ‹ä¸€ä¸‹.git/objectsä¸‹æœ‰å“ªäº›æ–‡ä»¶ï¼šfind .git/objects -type få‘çŽ°å¤šäº†ä¸€äº›packæ–‡ä»¶ï¼š.git/objects/info/packs.git/objects/pack/pack-abcde.idx.git/objects/pack/pack-abcde.packå½“ç„¶ä¹Ÿè¿˜æœ‰å¯èƒ½è¿˜æœ‰ä¸€äº›danglingçš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡æ˜¯æ²¡æœ‰è¢«å…¶å®ƒå¼•ç”¨çš„å¯¹è±¡ï¼Œgitä¸ä¼šå¯¹å…¶è¿›è¡Œpackã€‚.packæ–‡ä»¶å­˜å‚¨äº†æ‰€æœ‰åˆ é™¤çš„å¯¹è±¡ï¼Œ .idxæ–‡ä»¶æ˜¯ç´¢å¼•æ–‡ä»¶ï¼Œå­˜å‚¨ç›¸åº”çš„åç§»ä¿¡æ¯ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨verify-packå‘½ä»¤æ˜¾ç¤ºpackçš„ä¿¡æ¯ï¼šgit verify-pack -v .git/objects/pack/pack-abcde.idxa35a7ea3f7b55be91743c708d150b573116515ec commit 239 160 12fb1c75a143de21f30004dab829b39f99d225d292 commit 187 128 172ca2b7d42454d33b31cfc810592e8bd47f811decd tree 70 76 300fd5d73ef7deb282cbf47826c58448597f24453ba blob 18 28 37656166dc42a6a2f694e088694a2a2c90606e28f2d blob 16 23 4044e1ba2916b4b903d2e5a2209cdcca7129a891c2f tree 36 46 427non delta: 6 objectsobjects/pack/pack-83c7f603b25c063accec33ee8869a6afb1e9fd0a.pack: ok ç¬¬ä¸€åˆ—æ˜¾ç¤ºå¯¹è±¡çš„æŒ‡é’ˆï¼Œå³Hashå€¼ï¼Œç¬¬äºŒåˆ—å±•ç¤ºæ˜¯ä»€ä¹ˆç±»åž‹çš„å¯¹è±¡ï¼Œç¬¬ä¸‰åˆ—å±•ç¤ºå ç”¨äº†å¤šå°‘å­—èŠ‚ã€‚ 1/usr/bin/git filter-branch --force --index-filter &quot;/usr/bin/git rm --cached --ignore-unmatch JDMobile_2.0/Classes/Sections/BrickPlatForm/ViewController/BrickPFItemViewController.m&quot; --prune-empty --tag-name-filter cat -- --all gitæäº¤åŽ‹ç¼©git gc --prune=now åˆ é™¤taggit tag | xargs git tag -d ä¸€é”®ç˜¦èº«ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104#!/usr/bin/env python#coding:utf-8import os,sys,shutil,timedef checksize(): systemPath = os.environ[&apos;HOME&apos;] if os.path.exists(systemPath + &apos;/.gitthin&apos;): pass else: tagetPath = systemPath + &apos;/.gitthin&apos; os.system(&apos;mkdir &apos; + tagetPath) if os.path.exists(&apos;.git&apos;) == False: print &apos;do not have .git&apos; sys.exit(1) fileLogPath = systemPath + &apos;/.gitthin/file_log&apos; if os.path.exists(fileLogPath): os.system(&apos;rm -rf fileLogPath&apos;) os.system(&apos;git rev-list --objects --all &gt;&gt; &apos; + fileLogPath) # print &apos;createNew &apos; + fileLogPath packLogPath = systemPath + &apos;/.gitthin/pack_log&apos; if os.path.exists(packLogPath): print packLogPath + &apos; exits&apos; else: os.system(&apos;git verify-pack -v .git/objects/pack/*.idx &gt;&gt; &apos; + packLogPath) print &apos;createNew &apos; + packLogPath outputlist = os.popen(&apos;sort -k 3 -n %s | tail -10&apos; % packLogPath).read().split(&apos;\n&apos;) outputlist = list(reversed(outputlist)) for item in outputlist: if len(item) &gt; 0: items = item.split(&apos; &apos;) hashstring = items[0] filesize = items[4] filename = os.popen(&apos;grep %s %s&apos; % (hashstring, fileLogPath)).read() print filename.split(&apos;\n&apos;)[0],&apos; &apos;,filesizecommand = &apos;&apos;filename = &apos;&apos;if (len(sys.argv)) &gt; 1: command = sys.argv[1] else: print &apos;è¯·è¾“å…¥å‚æ•°&apos; sys.exit(1)if command == &apos;checksize&apos;: checksize()elif command == &apos;reset&apos;: systemPath = os.environ[&apos;HOME&apos;] thinpath = systemPath + &apos;/.gitthin&apos; if os.path.exists: os.system(&apos;rm -rf %s&apos; % thinpath)elif command == &apos;rewrite&apos;: if len(sys.argv) &gt; 2: filename = sys.argv[2] print &apos;\033[1;31m&apos; + &apos;è¯·ç¡®è®¤å½“å‰ä¸ºæœ€æ–°åˆ†æ”¯&apos; + &apos;\033[0m&apos; else: print &apos;è¯·è¾“å…¥æ–‡ä»¶å&apos; sys.exit(1) systemPath = os.environ[&apos;HOME&apos;] copyfilePath = systemPath + &apos;/.gitthin/&apos; + filename.split(&apos;/&apos;)[-1] copyfilePath = copyfilePath.replace(&apos;\n&apos;,&apos;&apos;) if os.path.exists(copyfilePath): os.system(&apos;rm -rf &apos; + copyfilePath) filenamePath = os.popen(&apos;find . -name &apos; + filename.split(&apos;/&apos;)[-1]).read().replace(&apos;\n&apos;,&apos;&apos;) copyString = &apos;cp -R %s %s&apos; % (filenamePath,copyfilePath) os.system(copyString) os.system(&apos;/usr/bin/git filter-branch --force --index-filter &quot;/usr/bin/git rm --cached --ignore-unmatch %s&quot; --prune-empty --tag-name-filter cat -- --all&apos; % filename) os.system(&apos;cp -R %s %s&apos; % (copyfilePath,filenamePath)) text = os.popen(&apos;git diff&apos;).read() print &apos;text&apos; + text if len(text) &gt; 0: os.system(&apos;git add .&apos;) os.system(&apos;git commit -m &quot;gitåº“ç˜¦èº«ï¼Œè¿˜åŽŸæ–‡ä»¶&quot;&apos;) elif command == &apos;--h&apos;: print &apos;\033[1;31m&apos; + &apos;thingit checksize&apos; + &apos;\033[0m&apos; print &apos;\033[1;34m&apos; + &apos;æ£€æŸ¥æŽ’åå‰åçš„å¤§æ–‡ä»¶&apos; + &apos;\033[0m&apos; print &apos;\033[1;31m&apos; + &apos;thingit rewrite filename&apos; + &apos;\033[0m&apos; print &apos;\033[1;34m&apos; + &apos;åˆ é™¤å¤§æ–‡ä»¶æäº¤&apos; + &apos;\033[0m&apos; print &apos;\033[1;31m&apos; + &apos;thingit reset&apos; + &apos;\033[0m&apos; print &apos;\033[1;34m&apos; + &apos;åˆå§‹åŒ–çŽ¯å¢ƒ&apos; + &apos;\033[0m&apos;]]></content>
      <tags>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mongoæ—¥å¸¸å‘½ä»¤è®°å½•]]></title>
    <url>%2F2017%2F12%2F18%2F2018%2Fpymongo%2F</url>
    <content type="text"><![CDATA[mongoå¸¸ç”¨mongoå‘½ä»¤è¡Œ12345mongo jrappcomment:jrappcomment@xxxxxx:27017/jrappcomment?authSource=jrappcomment //è¿žæŽ¥è¿œç¨‹æ•°æ®åº“mongoexport -h xxxxxx --port 27017 -d jrappcomment -u jrappcomment -p jrappcomment -c jrcommentcategory -o goods2.json //å¯¼å‡ºmongoimport -h xxxxxx --port 27017 -d jrappcomment -u jrappcomment -p jrappcomment -c cachecomment --file goods2.json//å¯¼å…¥ db.stats() show dbs show tables show collections db.collection.totalIndexSize() db.collection.totalSize() db.jrcomment.ensureIndex({id:1}) //mongoå»ºç«‹ç´¢å¼• pymongoè¿œç¨‹è¿žæŽ¥æ•°æ®åº“12dbs = comment.find(&#123;&#125;).sort([(&apos;datetime&apos;,1),(&apos;created_time&apos;,1)]).limit(10000)print type(list(dbs)) 12345678910111213141516171819202122232425import os, time, json ,sysfrom pymongo import MongoClientimport urllibusername = urllib.quote_plus(&apos;jrappcomment&apos;)password = urllib.quote_plus(&apos;jrappcomment&apos;)client = MongoClient(&apos;mongodb://%s:%s@xxxxxx:27017/jrappcomment?authSource=jrappcomment&apos; % (username, password))# client = MongoClient(&quot;mongodb://172.25.60.48:27017&quot;)# client.adb.authenticate(username, password, mechanism=&apos;SCRAM-SHA-1&apos;)# client = MongoClient(&apos;mongodb://jrappcomment:jrappcomment@172.25.60.48:27017/&apos;)db = client.jrappcommentcomment = db.Commentcomment.insert(&#123;&apos;name&apos;:&apos;ceshi&apos;&#125;)dbs = comment.find(&#123;&#125;)print dbsfor item in dbs: print &apos;ceshi&apos; print item pymongoå¸¸ç”¨å‘½ä»¤1comment.update(&#123;&apos;name&apos;:&apos;hanshenghui&apos;&#125;,&#123;&apos;$set&apos;:&#123;&apos;age&apos;:30&#125;&#125;) ä¸ç­‰äºŽ1&#123; x : &#123; $ne : 3 &#125; &#125;]]></content>
      <tags>
        <tag>mongo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[centos6é…ç½®]]></title>
    <url>%2F2017%2F12%2F15%2F2017%2Fcentos6%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[é¦–å…ˆéœ€è¦pythonçŽ¯å¢ƒä¸º2.7ä»¥ä¸Šç‰ˆæœ¬ éœ€è¦yumç‰ˆæœ¬ä¸º3.4.3åŠä»¥ä¸Šï¼Œå› ä¸ºè¿™æ ·æ‰èƒ½å®‰è£…httpdä¸º2.4ç‰ˆæœ¬åŠä»¥ä¸Š å®‰è£…Djangosudo pip install --upgrade django==1.11 å®‰è£…numpysudo pip install numpy å®‰è£…pymongsudo pip install pymongo lunix å®‰è£…apxsæ‰©å±•yum install httpd-develå®‰è£…mod-wsgiéœ€è¦ å®‰è£…mod_wsgisudo pip install mod_wsgiDjangoéœ€è¦ å®‰è£…mod_wsgisudo yum install mod_wsgiè¿™ä¸ªæ¨¡å—ä¼šå‡ºçŽ°åœ¨./usr/lib64/httpd/modules/mod_wsgi.soè¿™é‡Œ ä½¿ç”¨rz/szæ¥ä¸Šä¼ æˆ–è€…ä¸‹è½½æ–‡ä»¶yum install lrzsz æ‰‹åŠ¨å®‰è£…apacheä¸‹è½½æ–‡ä»¶ Apache HTTP Server æˆªæ­¢ç›®å‰ä¸ºæ­¢ï¼ŒApache HTTP Server ç›®å‰æœ€æ–°çš„ç‰ˆæœ¬æ˜¯ Apache httpd 2.4.6 Releasedï¼Œ ä¸‹è½½åœ°å€ï¼šhttp://httpd.apache.org/download.cgi#apache24 APR and APR-UtilåŒ… æˆªæ­¢ç›®å‰ä¸ºæ­¢ï¼ŒAPR and APR-Utilçš„æœ€æ–°ç‰ˆæœ¬å¦‚ä¸‹ï¼Œä¸‹è½½åœ°å€ï¼šhttp://apr.apache.org/download.cgi APR 1.4.8, released June 21, 2013APR-util 1.5.2, released April 4, 2013APR-iconv 1.2.1, released November 26, 2007 PCREåŒ… æˆªæ­¢ç›®å‰ä¸ºæ­¢ï¼ŒPCREæœ€æ–°çš„åŒ…ä¸º8.33ï¼Œä¸‹è½½åœ°å€å¦‚ä¸‹ https://sourceforge.net/projects/pcre/files/pcre/ å®‰è£…æ–¹æ³• 1ï¼šå®‰è£…åŒ…gccæˆ–gcc-c++yum install gcc-c++ 2:å®‰è£…develyum install expat-devel 3:å®‰è£…apr mkdir /usr/local/apr ./configure --prefix=/usr/local/apr make &amp;&amp; sudo make install 4:å®‰è£…apr-util mkdir /usr/local/apr-util ./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr/bin/apr-1-config make &amp;&amp; sudo make install 5:å®‰è£…pcre mkdir /usr/local/pcre ./configure --prefix=/usr/local/pcre --with-apr=/usr/local/apr/bin/apr-1-config make &amp;&amp; sudo make install 6:å®‰è£…apache ./configure --prefix=/usr/local/apache --with-pcre=/usr/local/pcre --with-apr=/usr/local/apr --with-apr-util=/usr/local/apr-util make &amp;&amp; sudo make install 6:å°†apachectlè½¯é“¾æŽ¥åˆ°/usr/sbin/apachectlè¿™ä¸ªè·¯å¾„ä¸‹ 7:httpdä¹Ÿè¦è½¯é“¾åˆ°/usr/sbin/ä¸‹ 8:å®‰è£…mod_wsgi https://github.com/GrahamDumpleton/mod_wsgi/releasesè¿™ä¸ªåœ°å€ä¸‹è½½ tar â€“zxvf mod_wsgi-3.4.tar.gz ./configure --with-apxs=/usr/local/apache/bin/apxs --with-python=/usr/bin/python make &amp;&amp; make install chmod 755 /usr/local/apache/modules/mod_wsgi.so apacheé…ç½® apacheè·¯å¾„/etc/httpd/conf é‡å¯ Apacheï¼š1service httpd restart pipé…ç½®123[global]trusted-host = 10.13.8.31index-url = http://10.13.8.31/simple/ é”™è¯¯error while loading shared libraries: libpython2.7.so.1.0: cannot open shared object file: No such file or directorysudo find . -name libpython2.7.so.1.0æ‰¾åˆ°è·¯å¾„ï¼Œç„¶åŽåŠ å…¥ä¸‹è¾¹çš„æ–‡ä»¶ vi /etc/ld.so.confåŠ å…¥æ–°è¡Œ1/export/python/lib è¿è¡Œsudo ldconfig]]></content>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[python-setçš„ç”¨æ³•]]></title>
    <url>%2F2017%2F11%2F22%2F2018%2Fpython-set%E7%9A%84%E7%94%A8%E6%B3%95%2F</url>
    <content type="text"><![CDATA[pythonçš„setå’Œå…¶ä»–è¯­è¨€ç±»ä¼¼, æ˜¯ä¸€ä¸ªæ— åºä¸é‡å¤å…ƒç´ é›†, åŸºæœ¬åŠŸèƒ½åŒ…æ‹¬å…³ç³»æµ‹è¯•å’Œæ¶ˆé™¤é‡å¤å…ƒç´ . é›†åˆå¯¹è±¡è¿˜æ”¯æŒunion(è”åˆ), intersection(äº¤), difference(å·®)å’Œsysmmetric difference(å¯¹ç§°å·®é›†)ç­‰æ•°å­¦è¿ç®—. sets æ”¯æŒ x in set, len(set),å’Œ for x in setã€‚ä½œä¸ºä¸€ä¸ªæ— åºçš„é›†åˆï¼Œsetsä¸è®°å½•å…ƒç´ ä½ç½®æˆ–è€…æ’å…¥ç‚¹ã€‚å› æ­¤ï¼Œsetsä¸æ”¯æŒ indexing, slicing, æˆ–å…¶å®ƒç±»åºåˆ—ï¼ˆsequence-likeï¼‰çš„æ“ä½œã€‚ ä¸‹é¢æ¥ç‚¹ç®€å•çš„å°ä¾‹å­è¯´æ˜ŽæŠŠã€‚1234x = set(&apos;spam&apos;) y = set([&apos;h&apos;,&apos;a&apos;,&apos;m&apos;]) x, y (set([&apos;a&apos;, &apos;p&apos;, &apos;s&apos;, &apos;m&apos;]), set([&apos;a&apos;, &apos;h&apos;, &apos;m&apos;])) å†æ¥äº›å°åº”ç”¨ã€‚ x &amp; y # äº¤é›† set([&apos;a&apos;, &apos;m&apos;]) x | y # å¹¶é›† set([&apos;a&apos;, &apos;p&apos;, &apos;s&apos;, &apos;h&apos;, &apos;m&apos;]) x - y # å·®é›† set([&apos;p&apos;, &apos;s&apos;]) è®°å¾—ä»¥å‰ä¸ªç½‘å‹æé—®æ€Žä¹ˆåŽ»é™¤æµ·é‡åˆ—è¡¨é‡Œé‡å¤å…ƒç´ ï¼Œç”¨hashæ¥è§£å†³ä¹Ÿè¡Œï¼Œåªä¸è¿‡æ„Ÿè§‰åœ¨æ€§èƒ½ä¸Šä¸æ˜¯å¾ˆé«˜ï¼Œç”¨setè§£å†³è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š a = [11,22,33,44,11,22] b = set(a) set([33, 11, 44, 22]) c = [i for i in b] c [33, 11, 44, 22] å¾ˆé…·æŠŠï¼Œå‡ è¡Œå°±å¯ä»¥æžå®šã€‚ 1.8 é›†åˆ é›†åˆç”¨äºŽåŒ…å«ä¸€ç»„æ— åºçš„å¯¹è±¡ã€‚è¦åˆ›å»ºé›†åˆï¼Œå¯ä½¿ç”¨set()å‡½æ•°å¹¶åƒä¸‹é¢è¿™æ ·æä¾›ä¸€ç³»åˆ—çš„é¡¹ï¼š s = set([3,5,9,10]) #åˆ›å»ºä¸€ä¸ªæ•°å€¼é›†åˆ t = set(â€œHelloâ€) #åˆ›å»ºä¸€ä¸ªå”¯ä¸€å­—ç¬¦çš„é›†åˆ ä¸Žåˆ—è¡¨å’Œå…ƒç»„ä¸åŒï¼Œé›†åˆæ˜¯æ— åºçš„ï¼Œä¹Ÿæ— æ³•é€šè¿‡æ•°å­—è¿›è¡Œç´¢å¼•ã€‚æ­¤å¤–ï¼Œé›†åˆä¸­çš„å…ƒç´ ä¸èƒ½é‡å¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœæ£€æŸ¥å‰é¢ä»£ç ä¸­té›†åˆçš„å€¼ï¼Œç»“æžœä¼šæ˜¯ï¼štset([â€˜Hâ€™, â€˜eâ€™, â€˜lâ€™, â€˜oâ€™]) æ³¨æ„åªå‡ºçŽ°äº†ä¸€ä¸ªâ€™lâ€™ã€‚ é›†åˆæ”¯æŒä¸€ç³»åˆ—æ ‡å‡†æ“ä½œï¼ŒåŒ…æ‹¬å¹¶é›†ã€äº¤é›†ã€å·®é›†å’Œå¯¹ç§°å·®é›†ï¼Œä¾‹å¦‚ï¼š a = t | s # t å’Œ sçš„å¹¶é›† b = t &amp; s # t å’Œ sçš„äº¤é›† c = t â€“ s # æ±‚å·®é›†ï¼ˆé¡¹åœ¨tä¸­ï¼Œä½†ä¸åœ¨sä¸­ï¼‰ d = t ^ s # å¯¹ç§°å·®é›†ï¼ˆé¡¹åœ¨tæˆ–sä¸­ï¼Œä½†ä¸ä¼šåŒæ—¶å‡ºçŽ°åœ¨äºŒè€…ä¸­ï¼‰ åŸºæœ¬æ“ä½œï¼š t.add(â€˜xâ€™) # æ·»åŠ ä¸€é¡¹ s.update([10,37,42]) # åœ¨sä¸­æ·»åŠ å¤šé¡¹ ä½¿ç”¨remove()å¯ä»¥åˆ é™¤ä¸€é¡¹ï¼š t.remove(â€˜Hâ€™) len(s)set çš„é•¿åº¦ x in sæµ‹è¯• x æ˜¯å¦æ˜¯ s çš„æˆå‘˜ x not in sæµ‹è¯• x æ˜¯å¦ä¸æ˜¯ s çš„æˆå‘˜ s.issubset(t)s &lt;= tæµ‹è¯•æ˜¯å¦ s ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½åœ¨ t ä¸­ s.issuperset(t)s &gt;= tæµ‹è¯•æ˜¯å¦ t ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½åœ¨ s ä¸­ s.union(t)s | tè¿”å›žä¸€ä¸ªæ–°çš„ set åŒ…å« s å’Œ t ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´  s.intersection(t)s &amp; tè¿”å›žä¸€ä¸ªæ–°çš„ set åŒ…å« s å’Œ t ä¸­çš„å…¬å…±å…ƒç´  s.difference(t)s - tè¿”å›žä¸€ä¸ªæ–°çš„ set åŒ…å« s ä¸­æœ‰ä½†æ˜¯ t ä¸­æ²¡æœ‰çš„å…ƒç´  s.symmetric_difference(t)s ^ tè¿”å›žä¸€ä¸ªæ–°çš„ set åŒ…å« s å’Œ t ä¸­ä¸é‡å¤çš„å…ƒç´  s.copy()è¿”å›ž set â€œsâ€çš„ä¸€ä¸ªæµ…å¤åˆ¶ è¯·æ³¨æ„ï¼šunion(), intersection(), difference() å’Œ symmetric_difference() çš„éžè¿ç®—ç¬¦ï¼ˆnon-operatorï¼Œå°±æ˜¯å½¢å¦‚ s.union()è¿™æ ·çš„ï¼‰ç‰ˆæœ¬å°†ä¼šæŽ¥å—ä»»ä½• iterable ä½œä¸ºå‚æ•°ã€‚ç›¸åï¼Œå®ƒä»¬çš„è¿ç®—ç¬¦ç‰ˆæœ¬ï¼ˆoperator based counterpartsï¼‰è¦æ±‚å‚æ•°å¿…é¡»æ˜¯ setsã€‚è¿™æ ·å¯ä»¥é¿å…æ½œåœ¨çš„é”™è¯¯ï¼Œå¦‚ï¼šä¸ºäº†æ›´å¯è¯»è€Œä½¿ç”¨ set(â€˜abcâ€™) &amp; â€˜cbsâ€™ æ¥æ›¿ä»£ set(â€˜abcâ€™).intersection(â€˜cbsâ€™)ã€‚ä»Ž 2.3.1 ç‰ˆæœ¬ä¸­åšçš„æ›´æ”¹ï¼šä»¥å‰æ‰€æœ‰å‚æ•°éƒ½å¿…é¡»æ˜¯ setsã€‚ å¦å¤–ï¼ŒSet å’Œ ImmutableSet ä¸¤è€…éƒ½æ”¯æŒ set ä¸Ž set ä¹‹é—´çš„æ¯”è¾ƒã€‚ä¸¤ä¸ª sets åœ¨ä¹Ÿåªæœ‰åœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯ç›¸ç­‰çš„ï¼šæ¯ä¸€ä¸ª set ä¸­çš„å…ƒç´ éƒ½æ˜¯å¦ä¸€ä¸ªä¸­çš„å…ƒç´ ï¼ˆäºŒè€…äº’ä¸ºsubsetï¼‰ã€‚ä¸€ä¸ª set æ¯”å¦ä¸€ä¸ª set å°ï¼Œåªæœ‰åœ¨ç¬¬ä¸€ä¸ª set æ˜¯ç¬¬äºŒä¸ª set çš„ subset æ—¶ï¼ˆæ˜¯ä¸€ä¸ª subsetï¼Œä½†æ˜¯å¹¶ä¸ç›¸ç­‰ï¼‰ã€‚ä¸€ä¸ª set æ¯”å¦ä¸€ä¸ª set æ‰“ï¼Œåªæœ‰åœ¨ç¬¬ä¸€ä¸ª set æ˜¯ç¬¬äºŒä¸ª set çš„ superset æ—¶ï¼ˆæ˜¯ä¸€ä¸ª supersetï¼Œä½†æ˜¯å¹¶ä¸ç›¸ç­‰ï¼‰ã€‚ å­ set å’Œç›¸ç­‰æ¯”è¾ƒå¹¶ä¸äº§ç”Ÿå®Œæ•´çš„æŽ’åºåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼šä»»æ„ä¸¤ä¸ª sets éƒ½ä¸ç›¸ç­‰ä¹Ÿä¸äº’ä¸ºå­ setï¼Œå› æ­¤ä»¥ä¸‹çš„è¿ç®—éƒ½ä¼šè¿”å›ž Falseï¼šabã€‚å› æ­¤ï¼Œsets ä¸æä¾› cmp æ–¹æ³•ã€‚ å› ä¸º sets åªå®šä¹‰äº†éƒ¨åˆ†æŽ’åºåŠŸèƒ½ï¼ˆsubset å…³ç³»ï¼‰ï¼Œlist.sort() æ–¹æ³•çš„è¾“å‡ºå¯¹äºŽ sets çš„åˆ—è¡¨æ²¡æœ‰å®šä¹‰ã€‚ è¿ç®—ç¬¦ è¿ç®—ç»“æžœ hash(s) è¿”å›ž s çš„ hash å€¼ ä¸‹é¢è¿™ä¸ªè¡¨åˆ—å‡ºäº†å¯¹äºŽ Set å¯ç”¨äºŒå¯¹äºŽ ImmutableSet ä¸å¯ç”¨çš„è¿ç®—ï¼š è¿ç®—ç¬¦ï¼ˆvoperatorï¼‰ç­‰ä»·äºŽè¿ç®—ç»“æžœ s.update(t)s |= tè¿”å›žå¢žåŠ äº† set â€œtâ€ä¸­å…ƒç´ åŽçš„ set â€œsâ€ s.intersection_update(t)s &amp;= tè¿”å›žåªä¿ç•™å«æœ‰ set â€œtâ€ä¸­å…ƒç´ çš„ set â€œsâ€ s.difference_update(t)s -= tè¿”å›žåˆ é™¤äº† set â€œtâ€ä¸­å«æœ‰çš„å…ƒç´ åŽçš„ set â€œsâ€ s.symmetric_difference_update(t)s ^= tè¿”å›žå«æœ‰ set â€œtâ€æˆ–è€… set â€œsâ€ä¸­æœ‰è€Œä¸æ˜¯ä¸¤è€…éƒ½æœ‰çš„å…ƒç´ çš„ set â€œsâ€ s.add(x) å‘ set â€œsâ€ä¸­å¢žåŠ å…ƒç´  x s.remove(x) ä»Ž set â€œsâ€ä¸­åˆ é™¤å…ƒç´  x, å¦‚æžœä¸å­˜åœ¨åˆ™å¼•å‘ KeyError s.discard(x) å¦‚æžœåœ¨ set â€œsâ€ä¸­å­˜åœ¨å…ƒç´  x, åˆ™åˆ é™¤ s.pop() åˆ é™¤å¹¶ä¸”è¿”å›ž set â€œsâ€ä¸­çš„ä¸€ä¸ªä¸ç¡®å®šçš„å…ƒç´ , å¦‚æžœä¸ºç©ºåˆ™å¼•å‘ KeyError s.clear() åˆ é™¤ set â€œsâ€ä¸­çš„æ‰€æœ‰å…ƒç´  è¯·æ³¨æ„ï¼šéžè¿ç®—ç¬¦ç‰ˆæœ¬çš„ update(), intersection_update(), difference_update()å’Œsymmetric_difference_update()å°†ä¼šæŽ¥å—ä»»æ„ iterable ä½œä¸ºå‚æ•°ã€‚ä»Ž 2.3.1 ç‰ˆæœ¬åšçš„æ›´æ”¹ï¼šä»¥å‰æ‰€æœ‰å‚æ•°éƒ½å¿…é¡»æ˜¯ setsã€‚ è¿˜è¯·æ³¨æ„ï¼šè¿™ä¸ªæ¨¡å—è¿˜åŒ…å«ä¸€ä¸ª union_update() æ–¹æ³•ï¼Œå®ƒæ˜¯ update() æ–¹æ³•çš„ä¸€ä¸ªåˆ«åã€‚åŒ…å«è¿™ä¸ªæ–¹æ³•æ˜¯ä¸ºäº†å‘åŽå…¼å®¹ã€‚ç¨‹åºå‘˜ä»¬åº”è¯¥å¤šä½¿ç”¨ update() æ–¹æ³•ï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•ä¹Ÿè¢«å†…ç½®çš„ set() å’Œ frozenset() ç±»åž‹æ”¯æŒã€‚]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mac-Vimä½¿ç”¨æ•™ç¨‹]]></title>
    <url>%2F2017%2F11%2F11%2F2018%2FMac-Vim%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[å„ç§å…‰æ ‡ç§»åŠ¨w è·³åˆ°ä¸‹ä¸€ä¸ªå­—é¦–ï¼ŒæŒ‰æ ‡ç‚¹æˆ–å•è¯åˆ†å‰²W è·³åˆ°ä¸‹ä¸€ä¸ªå­—é¦–ï¼Œé•¿è·³ï¼Œå¦‚end-of-lineè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå­—e è·³åˆ°ä¸‹ä¸€ä¸ªå­—å°¾E è·³åˆ°ä¸‹ä¸€ä¸ªå­—å°¾ï¼Œé•¿è·³b è·³åˆ°ä¸Šä¸€ä¸ªå­—B è·³åˆ°ä¸Šä¸€ä¸ªå­—ï¼Œé•¿è·³0 è·³è‡³è¡Œé¦–ï¼Œä¸ç®¡æœ‰æ— ç¼©è¿›ï¼Œå°±æ˜¯è·³åˆ°ç¬¬0ä¸ªå­—ç¬¦ n+ ç§»nè¡Œè¡Œé¦–n- ç§»nè¡Œè¡Œé¦–n$ ç§»nè¡Œ(1è¡¨ç¤ºæœ¬è¡Œ)è¡Œå°¾0 æ‰€è¡Œè¡Œé¦–$ æ‰€è¡Œè¡Œå°¾^ æ‰€è¡Œé¦–å­—æ¯h,j,k,l å·¦ç§»ç§»ç§»å³ç§»H å‰å±å¹•é¦–è¡Œè¡Œé¦–M å±å¹•æ˜¾ç¤ºæ–‡ä»¶é—´è¡Œè¡Œé¦–L å‰å±å¹•åº•è¡Œè¡Œé¦– å„ç§åˆ é™¤dG åˆ é™¤è‡³æ–‡ç« ç»“å°¾éƒ¨d1G åˆ é™¤è‡³æ–‡ç« å¼€å¤´éƒ¨2dd åˆ é™¤ä¸¤è¡Œdd åˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œdw åˆ é™¤ä¸€ä¸ªå­—(word)ä¸é€‚åˆä¸­æ–‡x åˆ é™¤å½“å‰å­—ç¬¦10x åˆ é™¤åä¸ªè¿žç»­å­—ç¬¦X åˆ é™¤å‰ä¸€ä¸ªå­—ç¬¦D åˆ é™¤åˆ°è¡Œæœ« å¤åˆ¶ç²˜è´´yy å¤åˆ¶ä¸€è¡Œï¼Œæ­¤å‘½ä»¤å‰å¯è·Ÿæ•°å­—ï¼Œæ ‡è¯†å¤åˆ¶å¤šè¡Œï¼Œå¦‚6yyï¼Œè¡¨ç¤ºä»Žå½“å‰è¡Œå¼€å§‹å¤åˆ¶6è¡Œyw å¤åˆ¶ä¸€ä¸ªå­—y$ å¤åˆ¶åˆ°è¡Œæœ«p ç²˜è´´ç²˜è´´æ¿çš„å†…å®¹åˆ°å½“å‰è¡Œçš„ä¸‹é¢P ç²˜è´´ç²˜è´´æ¿çš„å†…å®¹åˆ°å½“å‰è¡Œçš„ä¸Šé¢]p æœ‰ç¼©è¿›çš„ç²˜è´´ï¼Œvimä¼šè‡ªåŠ¨è°ƒèŠ‚ä»£ç çš„ç¼©è¿›â€œa å°†å†…å®¹æ”¾å…¥/å­˜å…¥aå¯„å­˜å™¨ï¼Œå¯ä»¥æ”¯æŒå¤šç²˜è´´æ¿é™„ï¼šæ¯”å¦‚å¸¸ç”¨çš„ä¸€ä¸ªå¯„å­˜å™¨å°±æ˜¯ç³»ç»Ÿå¯„å­˜å™¨ï¼Œåç§°ä¸º+ï¼Œæ‰€ä»¥ä»Žç³»ç»Ÿç²˜è´´æ¿ç²˜è´´åˆ°vimä¸­çš„å‘½ä»¤ä¸ºâ€+p,æ³¨æ„æ­¤å¤„çš„+ä¸è¡¨ç¤ºæ“ä½œç¬¦ï¼ŒäºŒåä¸€ä¸ªå¯„å­˜å™¨ã€‚ç§»åŠ¨å…‰æ ‡åœ¨vimä¸­ç§»åŠ¨å…‰æ ‡è·Ÿå…¶ä»–çš„ç¼–è¾‘å™¨ä¸­æœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œä¸è¿‡ä¸€æ—¦å­¦ä¼šäº†ï¼Œå°±ä¼šé£žé€Ÿçš„åœ¨æ–‡æœ¬ä¸­ç§»åŠ¨äº†ã€‚ å…‰æ ‡å¿«é€Ÿç§»åŠ¨ggå¿«é€Ÿç§»åŠ¨åˆ°å¤´éƒ¨Gå¿«é€Ÿç§»åŠ¨åˆ°å°¾éƒ¨10Gç§»åŠ¨åˆ°ç¬¬åè¡Œ æ˜¾ç¤ºè¡Œå·:set number æ°¸ä¹…æ˜¾ç¤ºè¡Œå·: $vi ~/.vimrcå¾€æ–‡ä»¶é‡Œé¢æ·»åŠ å†…å®¹ï¼š set number , ä¿å­˜é€€å‡ºã€‚ è¡Œå†…å…‰æ ‡è·³è½¬ wå½“å‰å•è¯å¼€å¤´ eå½“å‰å•è¯æœ«å°¾ bå‰ä¸€ä¸ªå•è¯å¼€å¤´ geå‰ä¸€ä¸ªå•è¯æœ«å°¾ o/^è¡Œå¼€å§‹ $è¡Œæœ«å°¾ f&lt;name&gt;å‘åŽæœç´¢å¹¶ä¸”è·³è½¬åˆ°è¯¥å­—æ¯ F&lt;name&gt;å‘å‰æœç´¢å¹¶ä¸”è·³è½¬åˆ°è¯¥å­—æ¯ æŸ¥æ‰¾/nameå¼€å§‹è¿›è¡ŒæŸ¥æ‰¾nameï¼Œç„¶åŽè¾“å…¥nç»§ç»­å‘ä¸‹æŸ¥æ‰¾ï¼Œè¾“å…¥Nç»§ç»­å‘ä¸ŠæŸ¥æ‰¾]]></content>
      <tags>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[linuxå…¥é—¨]]></title>
    <url>%2F2017%2F11%2F09%2F2018%2Flunix%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[æŸ¥çœ‹linuxç‰ˆæœ¬ lsb_release -a Ctrl+a ç§»åŠ¨åˆ°è¡ŒåˆCtrl+e ç§»åŠ¨åˆ°è¡Œæœ«Ctrl+k åˆ é™¤ä»Žå…‰æ ‡ä½ç½®åˆ°è¡Œæœ«Alts+backspace å‘å‰åˆ é™¤ä¸€ä¸ªå•è¯ls *.txtæ˜¾ç¤ºæ‰€æœ‰çš„.txtç»“å°¾çš„æ–‡ä»¶touch love{1..10}.txtåˆ›å»ºäº†åä¸ªæ–‡ä»¶touch today{name,hahm,ceshi}.txtåˆ›å»ºäº†ä¸‰ä¸ªæ–‡ä»¶ ç”¨æˆ·ç›¸å…³who -aæ‰“å°å…¨éƒ¨who -dæ‰“å°æ­»æŽ‰çš„è¿›ç¨‹who -mæˆ–è€…who am iå½“å‰ç™»å½•ç”¨æˆ·who -qæ‰“å°å½“å‰ç™»å½•ç”¨æˆ·æ•°ä»¥åŠç”¨æˆ·åwho -uæ‰“å°å½“å‰ç™»å½•ç”¨æˆ·ç™»å½•ä¿¡æ¯who -ræ‰“å°è¿è¡Œç­‰çº§ sudo adduser usernameæ·»åŠ ç”¨æˆ·su -l usernameåˆ‡æ¢ç”¨æˆ·exité€€å‡ºå½“å‰ç”¨æˆ·å›žåˆ°ä¸Šä¸€ä¸ªç”¨æˆ· æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·123cat /etc/passwd å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·çš„åˆ—è¡¨w å¯ä»¥æŸ¥çœ‹å½“å‰æ´»è·ƒçš„ç”¨æˆ·åˆ—è¡¨cat /etc/group æŸ¥çœ‹ç”¨æˆ·ç»„ ç”¨æˆ·ç»„groups hanæŸ¥çœ‹å½“å‰ç”¨æˆ·å±žäºŽå•¥ç»„1han : han //å‰è¾¹æ˜¯ç”¨æˆ·ï¼ŒåŽè¾¹æ˜¯ç»„ chgrp -R æ–°å»ºçš„ç”¨æˆ·ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåŒåçš„ç»„ï¼Œæ³¨æ„è¿™ä¸ªæ–°å»ºçš„ç”¨æˆ·ä¸åœ¨rootç”¨æˆ·ç»„ä¸‹è¾¹ï¼Œé‚£å°±æ„å‘³ç€å½“ä½ åˆ‡æ¢åˆ°hanè¿™ä¸ªç”¨æˆ·ä¸‹è¾¹çš„æ—¶å€™ï¼Œå…¶å®žä½ æ˜¯ä¸èƒ½ä½¿ç”¨sudoçš„ï¼Œé‚£æ€Žä¹ˆå°†hanæ·»åŠ åˆ°sudoä¸‹å‘¢ï¼Ÿsudo usermod -G root hanæ·»åŠ hanåˆ°ç”¨æˆ·ç»„ä¸‹è¾¹sudo deluser han --remove-homeåˆ é™¤ç”¨æˆ· æƒé™ls -l -rw-râ€“râ€“ 1 jrmacpro staff 0 11 9 09:12 love1.txtæ–‡ä»¶ç±»åž‹å’Œæƒé™ é“¾æŽ¥æ•° æ‰€æœ‰è€… æ‰€æœ‰è€…ç”¨æˆ·ç»„ æ–‡ä»¶å¤§å° æœ€åŽä¿®æ”¹æ—¥æœŸ æ–‡ä»¶å æˆ‘ä»¬æ¥çœ‹çœ‹ç”¨æˆ·æƒé™drwxr-xr-xdrwxræ‹¥æœ‰è€…æƒé™ç¬¬ä¸€ä¸ª-xrç”¨æˆ·ç»„æƒé™ç¬¬äºŒä¸ª-xå…¶ä»–ç”¨æˆ·æƒé™ rå…è®¸è¯»wå…è®¸å†™xå…è®¸æ‰§è¡Œ æ–‡ä»¶ç±»åž‹ï¼šlunixä¸­ä¸€åˆ‡çš†æ–‡ä»¶ æ–‡ä»¶æƒé™ï¼š cat filenameä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ¥è¯» å†™è¡¨ç¤ºä½ å¯ä»¥ç¼–è¾‘å’Œä¿®æ”¹ æ‰§è¡Œæƒé™é€šå¸¸æŒ‡å¯ä»¥è¿è¡ŒäºŒè¿›åˆ¶ç¨‹åºæ–‡æœ¬æˆ–è€…è„šæœ¬æ–‡ä»¶ï¼Œä¸€ä¸ªç›®å½•åŒæ—¶å…·æœ‰è¯»å’Œæ‰§è¡Œæƒé™ä½ æ‰å¯ä»¥æ‰“å¼€å¹¶ä¸”æŸ¥çœ‹å†…éƒ¨æ–‡ä»¶ï¼Œè€Œä¸€ä¸ªç›®å½•è¦æœ‰å†™æƒé™æ‰èƒ½åœ¨å…¶ä¸­åˆ›å»ºå…¶ä»–æ–‡ä»¶ ls -lhç›´è§‚æŸ¥çœ‹æ–‡ä»¶å¤§å° ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€… sudo chown hanshenghui filenameæ”¹å˜æ–‡ä»¶æ‰€æœ‰è€…sudo chgrp apache projectæ”¹å˜æ–‡ä»¶ç»„ ä¿®æ”¹æ–‡ä»¶æƒé™åˆ©ç”¨+å’Œ-chmod go-r filenameg/o/uåˆ†åˆ«ä»£è¡¨groupï¼Œothersï¼Œuserï¼Œä¸Šè¾¹é‚£å¥çš„æ„æ€æ˜¯è¯´çœŸå¯¹è¿™ä¸ªæ–‡ä»¶groupå’ŒotheråŽ»æŽ‰è¯»æƒé™ æŸ¥çœ‹è¿›ç¨‹å’Œæ€è¿›ç¨‹1ã€å…ˆæŸ¥çœ‹è¿›ç¨‹pid ps -ef | grep è¿›ç¨‹å 2ã€é€šè¿‡pidæŸ¥çœ‹å ç”¨ç«¯å£ netstat -nap | grep è¿›ç¨‹pid 123456789101112131415161718ä¾‹ï¼šé€šè¿‡nginxè¿›ç¨‹æŸ¥çœ‹å¯¹åº”çš„ç«¯å£å·æŸ¥çœ‹nginxè¿›ç¨‹pidï¼šå‘½ä»¤ï¼šps -ef | grep nginxç»“æžœï¼šroot 9836 1 0 Jul11 ? 00:00:00 nginx: master process /usr/local/nginx/sbin/nginxnobody 9841 9836 0 Jul11 ? 00:00:09 nginx: worker process é€šè¿‡nginxè¿›ç¨‹pidæŸ¥çœ‹å ç”¨ç«¯å£ï¼ˆè¿›ç¨‹pidä¸º9836ï¼‰å‘½ä»¤ï¼šnetstat -nap | grep 9836ç»“æžœï¼štcp 0 0 0.0.0.0:8081 0.0.0.0:* LISTEN 9836/nginx tcp 0 0 0.0.0.0:81 0.0.0.0:* LISTEN 9836/nginx tcp 0 0 0.0.0.0:8082 0.0.0.0:* LISTEN 9836/nginx tcp 0 0 0.0.0.0:8083 0.0.0.0:* LISTEN 9836/nginx å¤åˆ¶ä»£ç  3.æ€è¿›ç¨‹sudo kill -9 pid æ–‡ä»¶å’Œç›®å½• treeä½¿ç”¨è¿™ä¸ªå‘½ä»¤æŸ¥çœ‹ç›®å½•ç»“æž„ ls -aæŸ¥çœ‹éšè—æ–‡ä»¶ cd ~home cd ..ä¸Šä¸€çº§ pwdå½“å‰è·¯å¾„ cd ..ä¸Šä¸€å±‚ç›®å½• cp test /opt/testæŠŠtestå¤åˆ¶åˆ°optä¸‹è¾¹çš„test cp -r test /opt/testæŠŠtestè¿™ä¸ªæ–‡ä»¶å¤¹å¤åˆ¶åˆ°optä¸‹ï¼Œé€’å½’å¤åˆ¶ rm filename rm -f filenameå¿½ç•¥æƒé™ï¼Œå¼ºåˆ¶åˆ é™¤ rm -r directioné€’å½’åˆ é™¤ mv file1 file2æŠŠfile1ç§»åŠ¨åˆ°file2ï¼Œæˆ–è€…è¯´æ˜¯é‡å‘½å rename file1 file2å°†file1é‡å‘½åä¸ºfile2 æŸ¥çœ‹æ–‡ä»¶ catæ­£åº tacå€’åº nlå¸¦ç€ç¼–å· more/less headæŸ¥çœ‹å¤´åè¡Œ tailæŸ¥çœ‹æœ«å°¾å‡ è¡Œ tail -få¯ä»¥å®žçŽ°å®žæ—¶æŸ¥çœ‹æ—¥å¿— fileæŸ¥çœ‹æ–‡ä»¶ç±»åž‹ çŽ¯å¢ƒå˜é‡å’Œæ–‡ä»¶æŸ¥æ‰¾~.profileå¯¹å½“å‰ç”¨æˆ·ç”Ÿæ•ˆ/etc/profileæ‰€æœ‰ç”¨æˆ·ç”Ÿæ•ˆ çŽ¯å¢ƒå˜é‡PATHä»‹ç»å½“æˆ‘ä»¬åœ¨shellä¸­è¾“å…¥ä¸€ä¸ªå‘½ä»¤çš„æ—¶å€™ï¼Œå®ƒæ€Žä¹ˆçŸ¥é“åŽ»å“ªé‡Œå¯»æ‰¾è¯¥æ‰§è¡Œå“ªä¸ªå‘½ä»¤å‘¢ï¼Œè¿™äº›è·¯å¾„å°±å­˜åœ¨PATHä¸­ã€‚ echo $PATHæ¥æŸ¥çœ‹1/usr/local/opt/swig@3.04/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin æ·»åŠ è‡ªå®šä¹‰çš„PATHPATH=$PATH:/home/han/mybinæ³¨æ„è¿™é‡Œä¸€å®šè¦ç”¨ç»å¯¹è·¯å¾„ æ–‡ä»¶åŽ‹ç¼©zip123zip -r -9 -q -o shiyanlou.zip /home/shiyanlou -x ~/*.zipdu -h shiyanlou.zipfile shiyanlou.zip -ré€’å½’åŽ‹ç¼© -9/-1åŽ‹ç¼©çº§åˆ«-9åŽ‹ç¼©æœ€åŽ‰å®³ï¼Œ-1æœ€ä¸åŽ‰å®³ -qé™é»˜ï¼Œä¸è¾“å‡ºåˆ°å‘½ä»¤è¡Œ -oè¾“å‡ºæ–‡ä»¶åå­— duæŸ¥çœ‹æ–‡ä»¶å¤§å° unzipunzip -q ceshi.zip -d ceshinameè§£åŽ‹ç„¶åŽè§£åŽ‹åŽå«å•¥åå­— taråŽ‹ç¼© tar -cvf jpg.tar *.jpg //å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆtar.jpg tar -czf jpg.tar.gz *.jpg //å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆjpg.taråŽï¼Œå¹¶ä¸”å°†å…¶ç”¨gzipåŽ‹ç¼©ï¼Œç”Ÿæˆä¸€ä¸ªgzipåŽ‹ç¼©è¿‡çš„åŒ…ï¼Œå‘½åä¸ºjpg.tar.gz tar -cjf jpg.tar.bz2 *.jpg //å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆjpg.taråŽï¼Œå¹¶ä¸”å°†å…¶ç”¨bzip2åŽ‹ç¼©ï¼Œç”Ÿæˆä¸€ä¸ªbzip2åŽ‹ç¼©è¿‡çš„åŒ…ï¼Œå‘½åä¸ºjpg.tar.bz2 tar -cZf jpg.tar.Z *.jpg //å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆjpg.taråŽï¼Œå¹¶ä¸”å°†å…¶ç”¨compressåŽ‹ç¼©ï¼Œç”Ÿæˆä¸€ä¸ªumcompressåŽ‹ç¼©è¿‡çš„åŒ…ï¼Œå‘½åä¸ºjpg.tar.Z rar a jpg.rar *.jpg //raræ ¼å¼çš„åŽ‹ç¼©ï¼Œéœ€è¦å…ˆä¸‹è½½rar for linux zip jpg.zip *.jpg //zipæ ¼å¼çš„åŽ‹ç¼©ï¼Œéœ€è¦å…ˆä¸‹è½½zip for linux è§£åŽ‹ tar -xvf file.tar //è§£åŽ‹ taråŒ… tar -xzvf file.tar.gz //è§£åŽ‹tar.gz tar -xjvf file.tar.bz2 //è§£åŽ‹ tar.bz2 tar -xZvf file.tar.Z //è§£åŽ‹tar.Z unrar e file.rar //è§£åŽ‹rar unzip file.zip //è§£åŽ‹zip ç£ç›˜ç›¸å…³dfæŸ¥çœ‹ç£ç›˜å®¹é‡du æŸ¥çœ‹è¯¥ç›®å½•du -hæ›´ç®€å•çš„æ–¹å¼æ¥æŸ¥çœ‹ Linuxä»»åŠ¡è®¡åˆ’crontabcrontab -eç„¶åŽè¿›å…¥åˆ°äº†ä¸€ä¸ªæ–‡ä»¶åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æ·»åŠ ä»»åŠ¡1*/1 * * * * * python /Users/jrmacpro/Desktop/ceshi.py &gt;&gt; /Users/jrmacpro/Desktop/log.txt ä¸€å…±æœ‰äº”ä¸ª*åˆ†åˆ«ä»£è¡¨ï¼šåˆ†ï¼Œå°æ—¶ï¼Œå‡ å·ï¼Œæœˆä»½ï¼Œæ˜ŸæœŸå‡  &gt;åœ¨ä»¥ä¸Šå„ä¸ªå­—æ®µä¸­ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç‰¹æ®Šå­—ç¬¦ï¼š&gt; æ˜Ÿå·ï¼ˆ*ï¼‰ï¼šä»£è¡¨æ‰€æœ‰å¯èƒ½çš„å€¼ï¼Œä¾‹å¦‚monthå­—æ®µå¦‚æžœæ˜¯æ˜Ÿå·ï¼Œåˆ™è¡¨ç¤ºåœ¨æ»¡è¶³å…¶å®ƒå­—æ®µçš„åˆ¶çº¦æ¡ä»¶åŽæ¯æœˆéƒ½æ‰§è¡Œè¯¥å‘½ä»¤æ“ä½œã€‚ é€—å·ï¼ˆ,ï¼‰ï¼šå¯ä»¥ç”¨é€—å·éš”å¼€çš„å€¼æŒ‡å®šä¸€ä¸ªåˆ—è¡¨èŒƒå›´ï¼Œä¾‹å¦‚ï¼Œâ€œ1,2,5,7,8,9â€ ä¸­æ ï¼ˆ-ï¼‰ï¼šå¯ä»¥ç”¨æ•´æ•°ä¹‹é—´çš„ä¸­æ è¡¨ç¤ºä¸€ä¸ªæ•´æ•°èŒƒå›´ï¼Œä¾‹å¦‚â€œ2-6â€è¡¨ç¤ºâ€œ2,3,4,5,6â€ æ­£æ–œçº¿ï¼ˆ/ï¼‰ï¼šå¯ä»¥ç”¨æ­£æ–œçº¿æŒ‡å®šæ—¶é—´çš„é—´éš”é¢‘çŽ‡ï¼Œä¾‹å¦‚â€œ0-23/2â€è¡¨ç¤ºæ¯ä¸¤å°æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚åŒæ—¶æ­£æ–œçº¿å¯ä»¥å’Œæ˜Ÿå·ä¸€èµ·ä½¿ç”¨ï¼Œä¾‹å¦‚*/10ï¼Œå¦‚æžœç”¨åœ¨minuteå­—æ®µï¼Œè¡¨ç¤ºæ¯ååˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ã€‚ sudo cron -f &amp; å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼Œæˆ‘ä»¬çš„è®¾ç½®æ‰èƒ½ç”Ÿæ•ˆ ä½¿ç”¨å®žä¾‹ï¼š å®žä¾‹1ï¼šæ¯1åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡commandå‘½ä»¤ï¼š command å®žä¾‹2ï¼šæ¯å°æ—¶çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œå‘½ä»¤ï¼š3,15 * * * * command å®žä¾‹3ï¼šåœ¨ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œå‘½ä»¤ï¼š3,15 8-11 * * * command å®žä¾‹4ï¼šæ¯éš”ä¸¤å¤©çš„ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œå‘½ä»¤ï¼š3,15 8-11 */2 * * command å®žä¾‹5ï¼šæ¯ä¸ªæ˜ŸæœŸä¸€çš„ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œå‘½ä»¤ï¼š3,15 8-11 * * 1 command å®žä¾‹6ï¼šæ¯æ™šçš„21:30é‡å¯smbå‘½ä»¤ï¼š30 21 * * * /etc/init.d/smb restart å®žä¾‹7ï¼šæ¯æœˆ1ã€10ã€22æ—¥çš„4 : 45é‡å¯smbå‘½ä»¤ï¼š45 4 1,10,22 * * /etc/init.d/smb restart å®žä¾‹8ï¼šæ¯å‘¨å…­ã€å‘¨æ—¥çš„1 : 10é‡å¯smbå‘½ä»¤ï¼š10 1 * * 6,0 /etc/init.d/smb restart å®žä¾‹9ï¼šæ¯å¤©18 : 00è‡³23 : 00ä¹‹é—´æ¯éš”30åˆ†é’Ÿé‡å¯smbå‘½ä»¤ï¼š0,30 18-23 * * * /etc/init.d/smb restart å®žä¾‹10ï¼šæ¯æ˜ŸæœŸå…­çš„æ™šä¸Š11 : 00 pmé‡å¯smbå‘½ä»¤ï¼š0 23 * * 6 /etc/init.d/smb restart å®žä¾‹11ï¼šæ¯ä¸€å°æ—¶é‡å¯smbå‘½ä»¤ï¼š* */1 * * * /etc/init.d/smb restart å®žä¾‹12ï¼šæ™šä¸Š11ç‚¹åˆ°æ—©ä¸Š7ç‚¹ä¹‹é—´ï¼Œæ¯éš”ä¸€å°æ—¶é‡å¯smbå‘½ä»¤ï¼š* 23-7/1 * * * /etc/init.d/smb restart å®žä¾‹13ï¼šæ¯æœˆçš„4å·ä¸Žæ¯å‘¨ä¸€åˆ°å‘¨ä¸‰çš„11ç‚¹é‡å¯smbå‘½ä»¤ï¼š0 11 4 * mon-wed /etc/init.d/smb restart å®žä¾‹14ï¼šä¸€æœˆä¸€å·çš„4ç‚¹é‡å¯smbå‘½ä»¤ï¼š0 4 1 jan * /etc/init.d/smb restart å®žä¾‹15ï¼šæ¯å°æ—¶æ‰§è¡Œ/etc/cron.hourlyç›®å½•å†…çš„è„šæœ¬å‘½ä»¤ï¼š01 * * * * root run-parts /etc/cron.hourlyè¯´æ˜Žï¼šrun-partsè¿™ä¸ªå‚æ•°äº†ï¼Œå¦‚æžœåŽ»æŽ‰è¿™ä¸ªå‚æ•°çš„è¯ï¼ŒåŽé¢å°±å¯ä»¥å†™è¦è¿è¡Œçš„æŸä¸ªè„šæœ¬åï¼Œè€Œä¸æ˜¯ç›®å½•åäº† å®žä¾‹16ï¼šä»¥æ—¶é—´å‘½å01 * * * * touch $(date +%Y-%m-%d) crontabè®¾ç½®123456789101112131415161718191. ç¡®è®¤crontabæ˜¯å¦å®‰è£…ï¼šæ‰§è¡Œ crontab å‘½ä»¤å¦‚æžœæŠ¥ command not foundï¼Œå°±è¡¨æ˜Žæ²¡æœ‰å®‰è£…2. å®‰è£… crontabæ‰§è¡Œ yum install -y vixie-cron3. ç¡®è®¤æ˜¯å¦å®‰è£…æˆåŠŸ:æ‰§è¡Œ crontab -l4. çœ‹æ˜¯å¦è®¾ç½®äº†å¼€æœºè‡ªåŠ¨å¯åŠ¨chkconfig --list crond5. å¯åŠ¨crontabservice crond start çœ‹æ—¥å¿— /var/log/cron.logè¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥ï¼Œå¯ä»¥ç”¨tail -f /var/log/cron.logè§‚å¯Ÿ å‘½ä»¤æ‰§è¡Œé¡ºåºå’Œç®¡é“å¤šå‘½ä»¤ä¸€èµ·è¾“å…¥é€‰æ‹©æ€§æ‰§è¡Œwhich git &amp;&amp; echo &#39;YES&#39; || echo &#39;NO&#39;è¿™æ®µè¯çš„æ„æ€æ˜¯å¦‚æžœgitå­˜åœ¨å°±è¾“å‡ºYESï¼Œå¦åˆ™è¾“å‡ºNOecho $?æŸ¥çœ‹ç¨‹åºæ‰§è¡Œç»“æžœ ç®¡é“å°†å‰ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºåŽä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ï¼Œä»¥|ä½œä¸ºè¡¨ç¤ºç¬¦ã€‚ls -la /etc | lessè¿™ä¸ªæ—¶å€™å‰ä¸€ä¸ªå‘½ä»¤è¾“å‡ºäº†å¥½å¤šï¼Œæ— æ‰€è°“æˆ‘å¯ä»¥ç”¨lessæ¥ä¸€è¡Œä¸€è¡Œçš„çœ‹ grepåœ¨æ–‡æœ¬ä¸­æŸ¥æ‰¾åŒ¹é…å…³é”®å­— wcè®¡æ•°å·¥å…·wc -l filenameæ–‡ä»¶è¡Œæ•°wc -w filenameå•è¯æ•°wc -c filenameå­—èŠ‚æ•°wc -m filenameå­—ç¬¦æ•°wc -L filenameæœ€é•¿è¡Œå­—èŠ‚æ•° sortcat /etc/passwd | sort -rååº cutcut -f 1-3 text.txtcut -f -3 text.txtcut -f 3- text.txt æ–‡æœ¬å¤„ç†join file1 file2å°†è¡Œç›¸åŒçš„åˆå¹¶åœ¨ä¸€èµ·paste file1 file2ç›´æŽ¥åˆå¹¶ é‡å®šå‘echo &#39;hi&#39; &gt;&gt; text.txtecho &#39;hi&#39; | tee text.txtå¤šå‘é‡å®šå‘ ä¸‹è½½wget http://xxxx]]></content>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æœºå™¨å­¦ä¹ å­¦ä¹ è·¯å¾„]]></title>
    <url>%2F2017%2F11%2F07%2F2018%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84%2F</url>
    <content type="text"><![CDATA[æœºå™¨å­¦ä¹ è§£å†³çš„é—®é¢˜å¹¶éžæ‰€æœ‰çš„é—®é¢˜éƒ½é€‚åˆç”¨æœºå™¨å­¦ä¹ è§£å†³(å¾ˆå¤šé€»è¾‘æ¸…æ™°çš„é—®é¢˜ç”¨è§„åˆ™èƒ½å¾ˆé«˜æ•ˆå’Œå‡†ç¡®åœ°å¤„ç†)ï¼Œä¹Ÿæ²¡æœ‰ä¸€ä¸ªæœºå™¨å­¦ä¹ ç®—æ³•å¯ä»¥é€šç”¨äºŽæ‰€æœ‰é—®é¢˜ã€‚å’±ä»¬å…ˆæ¥äº†è§£äº†è§£ï¼Œæœºå™¨å­¦ä¹ ï¼Œåˆ°åº•å…³å¿ƒå’Œè§£å†³ä»€ä¹ˆæ ·çš„é—®é¢˜ã€‚ä»ŽåŠŸèƒ½çš„è§’åº¦åˆ†ç±»ï¼Œæœºå™¨å­¦ä¹ åœ¨ä¸€å®šé‡çº§çš„æ•°æ®ä¸Šï¼Œå¯ä»¥è§£å†³ä¸‹åˆ—é—®é¢˜ï¼š åˆ†ç±»é—®é¢˜ æ ¹æ®æ•°æ®æ ·æœ¬ä¸ŠæŠ½å–å‡ºçš„ç‰¹å¾ï¼Œåˆ¤å®šå…¶å±žäºŽæœ‰é™ä¸ªç±»åˆ«ä¸­çš„å“ªä¸€ä¸ªã€‚æ¯”å¦‚ï¼š - åžƒåœ¾é‚®ä»¶è¯†åˆ«(ç»“æžœç±»åˆ«ï¼š1ã€åžƒåœ¾é‚®ä»¶ 2ã€æ­£å¸¸é‚®ä»¶) - æ–‡æœ¬æƒ…æ„Ÿè¤’è´¬åˆ†æž(ç»“æžœç±»åˆ«ï¼š1ã€è¤’ 2ã€è´¬) - å›¾åƒå†…å®¹è¯†åˆ«è¯†åˆ«(ç»“æžœç±»åˆ«ï¼š1ã€å–µæ˜Ÿäºº 2ã€æ±ªæ˜Ÿäºº 3ã€äººç±» 4ã€è‰æ³¥é©¬ 5ã€éƒ½ä¸æ˜¯)ã€‚ å›žå½’é—®é¢˜ æ ¹æ®æ•°æ®æ ·æœ¬ä¸ŠæŠ½å–å‡ºçš„ç‰¹å¾ï¼Œé¢„æµ‹ä¸€ä¸ªè¿žç»­å€¼çš„ç»“æžœã€‚æ¯”å¦‚ï¼š - æ˜Ÿçˆ·ã€Šç¾Žäººé±¼ã€‹ç¥¨æˆ¿ - å¤§å¸éƒ½2ä¸ªæœˆåŽçš„æˆ¿ä»· - éš”å£ç†Šå­©å­ä¸€å¤©æ¥ä½ å®¶å‡ æ¬¡ï¼Œå® å¹¸ä½ å¤šå°‘çŽ©å…· èšç±»ç­‰é—®é¢˜ æ ¹æ®æ•°æ®æ ·æœ¬ä¸ŠæŠ½å–å‡ºçš„ç‰¹å¾ï¼Œè®©æ ·æœ¬æŠ±æŠ±å›¢(ç›¸è¿‘/ç›¸å…³çš„æ ·æœ¬åœ¨ä¸€å›¢å†…)ã€‚æ¯”å¦‚ï¼š - googleçš„æ–°é—»åˆ†ç±» - ç”¨æˆ·ç¾¤ä½“åˆ’åˆ† æˆ‘ä»¬å†æŠŠä¸Šè¿°å¸¸è§é—®é¢˜åˆ’åˆ°æœºå™¨å­¦ä¹ æœ€å…¸åž‹çš„2ä¸ªåˆ†ç±»ä¸Šã€‚ åˆ†ç±»ä¸Žå›žå½’é—®é¢˜éœ€è¦ç”¨å·²çŸ¥ç»“æžœçš„æ•°æ®åšè®­ç»ƒï¼Œå±žäºŽâ€œç›‘ç£å­¦ä¹ â€ èšç±»çš„é—®é¢˜ä¸éœ€è¦å·²çŸ¥æ ‡ç­¾ï¼Œå±žäºŽâ€œéžç›‘ç£å­¦ä¹ â€ã€‚ å¦‚æžœåœ¨ITè¡Œä¸š(å°¤å…¶æ˜¯äº’è”ç½‘)é‡Œæºœè¾¾ä¸€åœˆï¼Œä½ ä¼šå‘çŽ°æœºå™¨å­¦ä¹ åœ¨ä»¥ä¸‹çƒ­ç‚¹é—®é¢˜ä¸­æœ‰å¹¿æ³›åº”ç”¨ï¼š 1.è®¡ç®—æœºè§†è§‰ å…¸åž‹çš„åº”ç”¨åŒ…æ‹¬ï¼šäººè„¸è¯†åˆ«ã€è½¦ç‰Œè¯†åˆ«ã€æ‰«ææ–‡å­—è¯†åˆ«ã€å›¾ç‰‡å†…å®¹è¯†åˆ«ã€å›¾ç‰‡æœç´¢ç­‰ç­‰ã€‚ 2.è‡ªç„¶è¯­è¨€å¤„ç† å…¸åž‹çš„åº”ç”¨åŒ…æ‹¬ï¼šæœç´¢å¼•æ“Žæ™ºèƒ½åŒ¹é…ã€æ–‡æœ¬å†…å®¹ç†è§£ã€æ–‡æœ¬æƒ…ç»ªåˆ¤æ–­ï¼Œè¯­éŸ³è¯†åˆ«ã€è¾“å…¥æ³•ã€æœºå™¨ç¿»è¯‘ç­‰ç­‰ã€‚ 3.ç¤¾ä¼šç½‘ç»œåˆ†æž å…¸åž‹çš„åº”ç”¨åŒ…æ‹¬ï¼šç”¨æˆ·ç”»åƒã€ç½‘ç»œå…³è”åˆ†æžã€æ¬ºè¯ˆä½œå¼Šå‘çŽ°ã€çƒ­ç‚¹å‘çŽ°ç­‰ç­‰ã€‚ 4.æŽ¨è å…¸åž‹çš„åº”ç”¨åŒ…æ‹¬ï¼šè™¾ç±³éŸ³ä¹çš„â€œæ­Œæ›²æŽ¨èâ€ï¼ŒæŸå®çš„â€œçŒœä½ å–œæ¬¢â€ç­‰ç­‰ã€‚ åŸºç¡€çŸ¥è¯†é˜¶æ®µ1ï¼šå…¥é—¨çŸ¥è¯† LunixåŸºç¡€å…¥é—¨ Vimå…¥é—¨ é˜¶æ®µ2: æœºå™¨å­¦ä¹ ç†è®ºè¿™éƒ¨åˆ†ä¸»è¦æ˜¯è¦æŽŒæ¡ä¸€äº›å…¸åž‹çš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œå¦‚åˆ†ç±»ã€èšç±»ã€æŽ¨èã€æ¦‚çŽ‡å›¾ã€ç¥žç»ç½‘ç»œã€‚ï¼ˆå¯ä»¥åˆ†ä¸ºåˆçº§ã€ä¸­çº§å’Œé«˜çº§ä¸‰ä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µçš„ä¾§é‡ç‚¹ä¸åŒã€‚ï¼‰ åˆçº§é˜¶æ®µåˆçº§é˜¶æ®µæŽ¨èå¯ä»¥çœ‹ã€Šæœºå™¨å­¦ä¹ ç®—æ³•åŽŸç†ä¸Žç¼–ç¨‹å®žè·µ ã€‹å’Œã€Šæœºå™¨å­¦ä¹ å®žæˆ˜ã€‹è¿™ä¸¤æœ¬ä¹¦ã€‚ è¿™ä¸¤æœ¬ä¹¦æ›´åå‘äºŽç®—æ³•çš„åº”ç”¨æ–¹é¢ï¼Œå­¦ä¹ èµ·æ¥ç›¸å¯¹è½»æ¾ä¸€äº›ã€‚å¦‚æžœä¸€ä¸Šæ¥ç›´æŽ¥å°±å•ƒé‚£äº›çº¯ç®—æ³•ç†è®ºï¼Œä¼°è®¡å¾ˆå¤šäººæ˜¯åšæŒä¸ä¸‹åŽ»çš„ã€‚ å†è€…ï¼Œä¸€ä¸ªä¸œè¥¿ï¼Œå½“ä½ è¿˜ä¸çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆç”¨ï¼Œä»¥åŠæ€Žä¹ˆç”¨æ—¶ï¼Œè®©ä½ åŽ»ç¡¬ç€å¤´çš®å•ƒï¼Œä½ ä¸€å®šä¼šæ„Ÿè§‰å¾ˆéƒé—·ï¼Œå¹¶ä¸”æ ¹æœ¬ä¸å¯èƒ½èƒ½å¤Ÿæ·±å…¥ç†è§£é‚£äº›ç†è®ºã€‚ æ‰€ä»¥ï¼Œä¸ªäººå¼ºçƒˆå»ºè®®ä¸è¦ä¸€ä¸Šæ¥å°±è´ªå›¾é‚£äº›ç®—æ³•ç†è®ºçš„æŽ¨å¯¼ï¼Œå…ˆå¤§èƒ†çš„åŽ»äº†è§£å„ä¸ªç®—æ³•çš„åº”ç”¨åœºåˆå¹¶å°è¯•ç€åº”ç”¨ï¼Œè¿™å¯¹ä½ å…¥é—¨æœºå™¨å­¦ä¹ æ˜¯ä¸€ä¸ªéžå¸¸å¥½çš„é€‰æ‹©ã€‚ ä¸­çº§é˜¶æ®µä¸­çº§é˜¶æ®µå°±è¦å¼€å§‹å•ƒé‚£äº›ç®—æ³•èƒŒåŽçš„ç†è®ºäº†ï¼Œå‰é¢åº”ç”¨æ˜¯çŸ¥å…¶ç„¶ï¼ŒçŽ°åœ¨è¦å¼€å§‹çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚ è¿™ä¸ªé˜¶æ®µé‡ç‚¹æŽ¨èçœ‹æž—è½©ç”°çš„ã€Šæœºå™¨å­¦ä¹ åŸºçŸ³ã€‹å’Œã€Šæœºå™¨å­¦ä¹ æŠ€æ³•ã€‹è§†é¢‘ï¼Œæ€»å…±ä¸‰åäºŒè¯¾ï¼Œæ¯ä¸€è¯¾éƒ½ç›¸å½“ç²¾å½©ï¼Œç»†è‡´å­¦ä¸‹æ¥éœ€è¦ä¸‰ä¸ªæœˆï¼Œæˆ‘æŒ‡çš„æ˜¯ç»†è‡´çš„çœ‹ï¼Œæ¯ä¸€è¯¾éƒ½åº”è¯¥å†™ç¬”è®°ï¼Œæ¢³ç†è„‰ç»œï¼Œå¼ºçƒˆå»ºè®®åšç¬”è®°ã€‚ è¸è¸å®žå®žçœ‹å®Œï¼Œé¢è¯•ä¸­è®©ä½ æŽ¨ä¸ªsvmè®²è®²adboostï¼ŒgbdtåŽŸç†åŸºæœ¬å°±æ˜¯æ‰‹åˆ°æ“’æ¥ï¼Œå†è¾…ä»¥æŽèˆªçš„ã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹å’Œå‘¨å¿—åŽçš„ã€Šæœºå™¨å­¦ä¹ ã€‹ï¼ˆä¿—ç§°â€œè¥¿ç“œä¹¦â€ï¼‰æŸ¥æ¼è¡¥ç¼ºï¼ŒåŸºç¡€å°±ç®—æ¯”è¾ƒæ‰Žå®žäº†ã€‚ é«˜çº§é˜¶æ®µé«˜çº§é˜¶æ®µå°±æ˜¯è¦è‡ªå·±å¼€å§‹åŽ»çµæ´»è¿ç”¨å¹¶ç»„åˆå„ä¸ªç®—æ³•äº†ã€‚è¿™ä¸ªé˜¶æ®µå¯ä»¥åœ¨ç½‘ä¸Šæ‰¾ä¸€äº›æ¯”è¾ƒå…¸åž‹çš„é¡¹ç›®æ¥è¿›è¡Œå®žæˆ˜æ¼”ç»ƒã€‚ æŽ¨èå­¦ä¹ èµ„æºï¼šKaggleã€CCFã€Datacastleã€é˜¿é‡Œäº‘å¤©æ± ç­‰ã€‚ kaggleæ˜¯å›½å¤–ä¸€ä¸ªä¸“é—¨åšæ•°æ®æŒ–æŽ˜æ¯”èµ›çš„åœ°æ–¹ï¼Œé‡Œé¢å¾ˆå¤šæ¯”èµ›æ¯”è¾ƒé€‚åˆæ–°äººï¼Œè€Œä¸”é‡Œé¢çš„æ°›å›´ä¹Ÿæ¯”è¾ƒå¥½ï¼Œæ¯ä¸ªæ¯”èµ›éƒ½æœ‰å¯¹åº”çš„è®ºå›ï¼Œæ—¶ä¸æ—¶æœ‰äººä¼šå‘å¸ƒè‡ªå·±çš„ä»£ç ï¼Œå¤§å®¶é›†æ€å¹¿ç›Šä¸€èµ·è®¨è®ºï¼Œå¯ä»¥å­¦åˆ°å¾ˆå¤šã€‚ å¦‚æžœä½ è§‰å¾—ä¸Šé¢çš„å†…å®¹å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæˆ–è€…ä½ æƒ³è¦è¿›ä¸€æ­¥äº†è§£å’Œå­¦ä¹ æ•°æ®æŒ–æŽ˜å’Œæœºå™¨å­¦ä¹ ç­‰çŸ¥è¯†ï¼Œæ¬¢è¿Žå…³æ³¨æˆ‘ä»¬çš„å¾®ä¿¡å…¬ä¼—å·â€œDTæ–°çºªå…ƒâ€ã€‚ ã€å¦å¤–è¯´æ˜Žä¸€ä¸‹ï¼Œæˆ‘ä¸ªäººå¹³æ—¶æœ‰å¹¿æ³›é˜…è¯»å’Œæ‘˜å½•ç»å…¸çš„ä¹ æƒ¯ï¼Œä½†æœ‰æ—¶å¯èƒ½ç”±äºŽæ—¶é—´ä¹…è¿œä¸çŸ¥é“åŽŸæ–‡å‡ºå¤„äº†ï¼Œé€ æˆè‡ªå·±çš„æ–‡ç« ä¸­éƒ¨åˆ†å†…å®¹è·ŸæŸäº›ä½œè€…æœ‰é‡åˆå’Œç›¸ä¼¼çš„ï¼Œè¯·æ‚¨ç»™æˆ‘ç•™è¨€ï¼Œæˆ‘ä¼šåŠæ—¶åšå‡ºæ”¹æ­£ï¼Œè°¢è°¢ï¼ç›®å‰ç¡®è®¤çš„æ˜¯æ­¤ç¯‡æ–‡ç« ä¸­çš„æ•°æ®åˆ†æžéƒ¨åˆ†åº”è¯¥æ˜¯åœ¨@ç§¦è·¯ æŸç¯‡æ–‡ç« çš„åŸºç¡€ä¸Šæ›´æ”¹çš„ï¼Œåœ¨æ­¤ç‰¹åˆ«è¡¨ç¤ºè¯´æ˜Žä¸Žæ„Ÿè°¢ï¼ã€‘ é˜¶æ®µ3:åŸºç¡€é¡¹ç›® äººæœºå¯¹æˆ˜åˆä½“éªŒ:PythonåŸºäºŽPygameå®žçŽ°å››å­æ£‹æ¸¸æˆ Python å®žçŽ°è‹±æ–‡æ–°é—»æ‘˜è¦è‡ªåŠ¨æå– ä½¿ç”¨ Python å®žçŽ°æ·±åº¦ç¥žç»ç½‘ç»œ ä½¿ç”¨å·ç§¯ç¥žç»ç½‘ç»œè¿›è¡Œå›¾ç‰‡åˆ†ç±» åŸºäºŽå·ç§¯ç¥žç»ç½‘ç»œå®žçŽ°å›¾ç‰‡é£Žæ ¼çš„è¿ç§» é˜¶æ®µ4: è¿›é˜¶é¡¹ç›® Pythonåº”ç”¨é©¬å°”å¯å¤«é“¾ç®—æ³•å®žçŽ°éšæœºæ–‡æœ¬ç”Ÿæˆ ç¥žç»ç½‘ç»œå®žçŽ°äººè„¸è¯†åˆ«ä»»åŠ¡ åŸºäºŽæ— ç›‘ç£å­¦ä¹ çš„è‡ªç¼–ç å™¨å®žçŽ° NBAå¸¸è§„èµ›ç»“æžœé¢„æµ‹â€”â€”åˆ©ç”¨Pythonè¿›è¡Œæ¯”èµ›æ•°æ®åˆ†æž Python æ°”è±¡æ•°æ®åˆ†æž â€“ ã€ŠPython æ•°æ®åˆ†æžå®žæˆ˜ã€‹ Twitteræ•°æ®æƒ…æ„Ÿåˆ†æž ebayåœ¨çº¿æ‹å–æ•°æ®åˆ†æž å¤§æ•°æ®å¸¦ä½ æŒ–æŽ˜æ‰“è½¦çš„ç§˜ç± ä½¿ç”¨ Spark å’Œ D3.js åˆ†æžèˆªç­å¤§æ•°æ® åŸºæœ¬å·¥ä½œæµç¨‹ä»¥ä¸Šæˆ‘ä»¬åŸºæœ¬å…·å¤‡äº†æœºå™¨å­¦ä¹ çš„å¿…è¦æ¡ä»¶ï¼Œå‰©ä¸‹çš„å°±æ˜¯æ€Žä¹ˆè¿ç”¨å®ƒä»¬åŽ»åšä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®ã€‚å…¶å·¥ä½œæµç¨‹å¦‚ä¸‹: æŠ½è±¡æˆæ•°å­¦é—®é¢˜ æ˜Žç¡®é—®é¢˜æ˜¯è¿›è¡Œæœºå™¨å­¦ä¹ çš„ç¬¬ä¸€æ­¥ã€‚æœºå™¨å­¦ä¹ çš„è®­ç»ƒè¿‡ç¨‹é€šå¸¸éƒ½æ˜¯ä¸€ä»¶éžå¸¸è€—æ—¶çš„äº‹æƒ…ï¼Œèƒ¡ä¹±å°è¯•æ—¶é—´æˆæœ¬æ˜¯éžå¸¸é«˜çš„ã€‚è¿™é‡Œçš„æŠ½è±¡æˆæ•°å­¦é—®é¢˜ï¼ŒæŒ‡çš„æˆ‘ä»¬æ˜Žç¡®æˆ‘ä»¬å¯ä»¥èŽ·å¾—ä»€ä¹ˆæ ·çš„æ•°æ®ï¼Œç›®æ ‡æ˜¯ä¸€ä¸ªåˆ†ç±»è¿˜æ˜¯å›žå½’æˆ–è€…æ˜¯èšç±»çš„é—®é¢˜ï¼Œå¦‚æžœéƒ½ä¸æ˜¯çš„è¯ï¼Œå¦‚æžœåˆ’å½’ä¸ºå…¶ä¸­çš„æŸç±»é—®é¢˜ã€‚ èŽ·å–æ•°æ® æ•°æ®å†³å®šäº†æœºå™¨å­¦ä¹ ç»“æžœçš„ä¸Šé™ï¼Œè€Œç®—æ³•åªæ˜¯å°½å¯èƒ½é€¼è¿‘è¿™ä¸ªä¸Šé™ã€‚æ•°æ®è¦æœ‰ä»£è¡¨æ€§ï¼Œå¦åˆ™å¿…ç„¶ä¼šè¿‡æ‹Ÿåˆã€‚è€Œä¸”å¯¹äºŽåˆ†ç±»é—®é¢˜ï¼Œæ•°æ®åæ–œä¸èƒ½è¿‡äºŽä¸¥é‡ï¼Œä¸åŒç±»åˆ«çš„æ•°æ®æ•°é‡ä¸è¦æœ‰æ•°ä¸ªæ•°é‡çº§çš„å·®è·ã€‚è€Œä¸”è¿˜è¦å¯¹æ•°æ®çš„é‡çº§æœ‰ä¸€ä¸ªè¯„ä¼°ï¼Œå¤šå°‘ä¸ªæ ·æœ¬ï¼Œå¤šå°‘ä¸ªç‰¹å¾ï¼Œå¯ä»¥ä¼°ç®—å‡ºå…¶å¯¹å†…å­˜çš„æ¶ˆè€—ç¨‹åº¦ï¼Œåˆ¤æ–­è®­ç»ƒè¿‡ç¨‹ä¸­å†…å­˜æ˜¯å¦èƒ½å¤Ÿæ”¾å¾—ä¸‹ã€‚å¦‚æžœæ”¾ä¸ä¸‹å°±å¾—è€ƒè™‘æ”¹è¿›ç®—æ³•æˆ–è€…ä½¿ç”¨ä¸€äº›é™ç»´çš„æŠ€å·§äº†ã€‚å¦‚æžœæ•°æ®é‡å®žåœ¨å¤ªå¤§ï¼Œé‚£å°±è¦è€ƒè™‘åˆ†å¸ƒå¼äº†ã€‚ ç‰¹å¾é¢„å¤„ç†ä¸Žç‰¹å¾é€‰æ‹© è‰¯å¥½çš„æ•°æ®è¦èƒ½å¤Ÿæå–å‡ºè‰¯å¥½çš„ç‰¹å¾æ‰èƒ½çœŸæ­£å‘æŒ¥æ•ˆåŠ›ã€‚ç‰¹å¾é¢„å¤„ç†ã€æ•°æ®æ¸…æ´—æ˜¯å¾ˆå…³é”®çš„æ­¥éª¤ï¼Œå¾€å¾€èƒ½å¤Ÿä½¿å¾—ç®—æ³•çš„æ•ˆæžœå’Œæ€§èƒ½å¾—åˆ°æ˜¾è‘—æé«˜ã€‚å½’ä¸€åŒ–ã€ç¦»æ•£åŒ–ã€å› å­åŒ–ã€ç¼ºå¤±å€¼å¤„ç†ã€åŽ»é™¤å…±çº¿æ€§ç­‰ï¼Œæ•°æ®æŒ–æŽ˜è¿‡ç¨‹ä¸­å¾ˆå¤šæ—¶é—´å°±èŠ±åœ¨å®ƒä»¬ä¸Šé¢ã€‚è¿™äº›å·¥ä½œç®€å•å¯å¤åˆ¶ï¼Œæ”¶ç›Šç¨³å®šå¯é¢„æœŸï¼Œæ˜¯æœºå™¨å­¦ä¹ çš„åŸºç¡€å¿…å¤‡æ­¥éª¤ã€‚ç­›é€‰å‡ºæ˜¾è‘—ç‰¹å¾ã€æ‘’å¼ƒéžæ˜¾è‘—ç‰¹å¾ï¼Œéœ€è¦æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆåå¤ç†è§£ä¸šåŠ¡ã€‚è¿™å¯¹å¾ˆå¤šç»“æžœæœ‰å†³å®šæ€§çš„å½±å“ã€‚ç‰¹å¾é€‰æ‹©å¥½äº†ï¼Œéžå¸¸ç®€å•çš„ç®—æ³•ä¹Ÿèƒ½å¾—å‡ºè‰¯å¥½ã€ç¨³å®šçš„ç»“æžœã€‚è¿™éœ€è¦è¿ç”¨ç‰¹å¾æœ‰æ•ˆæ€§åˆ†æžçš„ç›¸å…³æŠ€æœ¯ï¼Œå¦‚ç›¸å…³ç³»æ•°ã€å¡æ–¹æ£€éªŒã€å¹³å‡äº’ä¿¡æ¯ã€æ¡ä»¶ç†µã€åŽéªŒæ¦‚çŽ‡ã€é€»è¾‘å›žå½’æƒé‡ç­‰æ–¹æ³•ã€‚ è®­ç»ƒæ¨¡åž‹ä¸Žè°ƒä¼˜ ç›´åˆ°è¿™ä¸€æ­¥æ‰ç”¨åˆ°æˆ‘ä»¬ä¸Šé¢è¯´çš„ç®—æ³•è¿›è¡Œè®­ç»ƒã€‚çŽ°åœ¨å¾ˆå¤šç®—æ³•éƒ½èƒ½å¤Ÿå°è£…æˆé»‘ç›’ä¾›äººä½¿ç”¨ã€‚ä½†æ˜¯çœŸæ­£è€ƒéªŒæ°´å¹³çš„æ˜¯è°ƒæ•´è¿™äº›ç®—æ³•çš„ï¼ˆè¶…ï¼‰å‚æ•°ï¼Œä½¿å¾—ç»“æžœå˜å¾—æ›´åŠ ä¼˜è‰¯ã€‚è¿™éœ€è¦æˆ‘ä»¬å¯¹ç®—æ³•çš„åŽŸç†æœ‰æ·±å…¥çš„ç†è§£ã€‚ç†è§£è¶Šæ·±å…¥ï¼Œå°±è¶Šèƒ½å‘çŽ°é—®é¢˜çš„ç—‡ç»“ï¼Œæå‡ºè‰¯å¥½çš„è°ƒä¼˜æ–¹æ¡ˆã€‚ æ¨¡åž‹è¯Šæ–­ å¦‚ä½•ç¡®å®šæ¨¡åž‹è°ƒä¼˜çš„æ–¹å‘ä¸Žæ€è·¯å‘¢ï¼Ÿè¿™å°±éœ€è¦å¯¹æ¨¡åž‹è¿›è¡Œè¯Šæ–­çš„æŠ€æœ¯ã€‚ è¿‡æ‹Ÿåˆã€æ¬ æ‹Ÿåˆ åˆ¤æ–­æ˜¯æ¨¡åž‹è¯Šæ–­ä¸­è‡³å…³é‡è¦çš„ä¸€æ­¥ã€‚å¸¸è§çš„æ–¹æ³•å¦‚äº¤å‰éªŒè¯ï¼Œç»˜åˆ¶å­¦ä¹ æ›²çº¿ç­‰ã€‚è¿‡æ‹Ÿåˆçš„åŸºæœ¬è°ƒä¼˜æ€è·¯æ˜¯å¢žåŠ æ•°æ®é‡ï¼Œé™ä½Žæ¨¡åž‹å¤æ‚åº¦ã€‚æ¬ æ‹Ÿåˆçš„åŸºæœ¬è°ƒä¼˜æ€è·¯æ˜¯æé«˜ç‰¹å¾æ•°é‡å’Œè´¨é‡ï¼Œå¢žåŠ æ¨¡åž‹å¤æ‚åº¦ã€‚è¯¯å·®åˆ†æž ä¹Ÿæ˜¯æœºå™¨å­¦ä¹ è‡³å…³é‡è¦çš„æ­¥éª¤ã€‚é€šè¿‡è§‚å¯Ÿè¯¯å·®æ ·æœ¬ï¼Œå…¨é¢åˆ†æžè¯¯å·®äº§ç”Ÿè¯¯å·®çš„åŽŸå› :æ˜¯å‚æ•°çš„é—®é¢˜è¿˜æ˜¯ç®—æ³•é€‰æ‹©çš„é—®é¢˜ï¼Œæ˜¯ç‰¹å¾çš„é—®é¢˜è¿˜æ˜¯æ•°æ®æœ¬èº«çš„é—®é¢˜â€¦â€¦è¯Šæ–­åŽçš„æ¨¡åž‹éœ€è¦è¿›è¡Œè°ƒä¼˜ï¼Œè°ƒä¼˜åŽçš„æ–°æ¨¡åž‹éœ€è¦é‡æ–°è¿›è¡Œè¯Šæ–­ï¼Œè¿™æ˜¯ä¸€ä¸ªåå¤è¿­ä»£ä¸æ–­é€¼è¿‘çš„è¿‡ç¨‹ï¼Œéœ€è¦ä¸æ–­åœ°å°è¯•ï¼Œ è¿›è€Œè¾¾åˆ°æœ€ä¼˜çŠ¶æ€ã€‚ æ¨¡åž‹èžåˆ ä¸€èˆ¬æ¥è¯´ï¼Œæ¨¡åž‹èžåˆåŽéƒ½èƒ½ä½¿å¾—æ•ˆæžœæœ‰ä¸€å®šæå‡ã€‚è€Œä¸”æ•ˆæžœå¾ˆå¥½ã€‚å·¥ç¨‹ä¸Šï¼Œä¸»è¦æå‡ç®—æ³•å‡†ç¡®åº¦çš„æ–¹æ³•æ˜¯åˆ†åˆ«åœ¨æ¨¡åž‹çš„å‰ç«¯ï¼ˆç‰¹å¾æ¸…æ´—å’Œé¢„å¤„ç†ï¼Œä¸åŒçš„é‡‡æ ·æ¨¡å¼ï¼‰ä¸ŽåŽç«¯ï¼ˆæ¨¡åž‹èžåˆï¼‰ä¸Šä¸‹åŠŸå¤«ã€‚å› ä¸ºä»–ä»¬æ¯”è¾ƒæ ‡å‡†å¯å¤åˆ¶ï¼Œæ•ˆæžœæ¯”è¾ƒç¨³å®šã€‚è€Œç›´æŽ¥è°ƒå‚çš„å·¥ä½œä¸ä¼šå¾ˆå¤šï¼Œæ¯•ç«Ÿå¤§é‡æ•°æ®è®­ç»ƒèµ·æ¥å¤ªæ…¢äº†ï¼Œè€Œä¸”æ•ˆæžœéš¾ä»¥ä¿è¯ã€‚ ä¸Šçº¿è¿è¡Œ è¿™ä¸€éƒ¨åˆ†å†…å®¹ä¸»è¦è·Ÿå·¥ç¨‹å®žçŽ°çš„ç›¸å…³æ€§æ¯”è¾ƒå¤§ã€‚å·¥ç¨‹ä¸Šæ˜¯ç»“æžœå¯¼å‘ï¼Œæ¨¡åž‹åœ¨çº¿ä¸Šè¿è¡Œçš„æ•ˆæžœç›´æŽ¥å†³å®šæ¨¡åž‹çš„æˆè´¥ã€‚ ä¸å•çº¯åŒ…æ‹¬å…¶å‡†ç¡®ç¨‹åº¦ã€è¯¯å·®ç­‰æƒ…å†µï¼Œè¿˜åŒ…æ‹¬å…¶è¿è¡Œçš„é€Ÿåº¦(æ—¶é—´å¤æ‚åº¦)ã€èµ„æºæ¶ˆè€—ç¨‹åº¦ï¼ˆç©ºé—´å¤æ‚åº¦ï¼‰ã€ç¨³å®šæ€§æ˜¯å¦å¯æŽ¥å—ã€‚è¿™äº›å·¥ä½œæµç¨‹ä¸»è¦æ˜¯å·¥ç¨‹å®žè·µä¸Šæ€»ç»“å‡ºçš„ä¸€äº›ç»éªŒã€‚å¹¶ä¸æ˜¯æ¯ä¸ªé¡¹ç›®éƒ½åŒ…å«å®Œæ•´çš„ä¸€ä¸ªæµç¨‹ã€‚è¿™é‡Œçš„éƒ¨åˆ†åªæ˜¯ä¸€ä¸ªæŒ‡å¯¼æ€§çš„è¯´æ˜Žï¼Œåªæœ‰å¤§å®¶è‡ªå·±å¤šå®žè·µï¼Œå¤šç§¯ç´¯é¡¹ç›®ç»éªŒï¼Œæ‰ä¼šæœ‰è‡ªå·±æ›´æ·±åˆ»çš„è®¤è¯†ã€‚ å…³äºŽç§¯ç´¯é¡¹ç›®ç»éªŒåˆå­¦æœºå™¨å­¦ä¹ å¯èƒ½æœ‰ä¸€ä¸ªè¯¯åŒºï¼Œå°±æ˜¯ä¸€ä¸Šæ¥å°±é™·å…¥åˆ°å¯¹å„ç§é«˜å¤§ä¸Šç®—æ³•çš„è¿½é€å½“ä¸­ã€‚åŠ¨ä¸åŠ¨å°±æˆ‘èƒ½ä¸èƒ½ç”¨æ·±åº¦å­¦ä¹ åŽ»è§£å†³è¿™ä¸ªé—®é¢˜å•Šï¼Ÿæˆ‘æ˜¯ä¸æ˜¯è¦ç”¨boostingç®—æ³•åšä¸€äº›æ¨¡åž‹èžåˆå•Šï¼Ÿæˆ‘ä¸€ç›´æŒæœ‰ä¸€ä¸ªè§‚ç‚¹ï¼Œã€Žè„±ç¦»ä¸šåŠ¡å’Œæ•°æ®çš„ç®—æ³•è®¨è®ºæ˜¯æ¯«æ— æ„ä¹‰çš„ã€ã€‚ å®žé™…ä¸ŠæŒ‰æˆ‘ä»¬çš„å­¦ä¹ ç»éªŒï¼Œä»Žä¸€ä¸ªæ•°æ®æºå¼€å§‹ï¼Œå³ä½¿æ˜¯ç”¨æœ€ä¼ ç»Ÿï¼Œå·²ç»åº”ç”¨å¤šå¹´çš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œå…ˆå®Œæ•´åœ°èµ°å®Œæœºå™¨å­¦ä¹ çš„æ•´ä¸ªå·¥ä½œæµç¨‹ï¼Œä¸æ–­å°è¯•å„ç§ç®—æ³•æ·±æŒ–è¿™äº›æ•°æ®çš„ä»·å€¼ï¼Œåœ¨è¿ç”¨è¿‡ç¨‹ä¸­æŠŠæ•°æ®ã€ç‰¹å¾å’Œç®—æ³•æžé€ï¼ŒçœŸæ­£ç§¯ç´¯å‡ºé¡¹ç›®ç»éªŒ æ‰æ˜¯æœ€å¿«ã€æœ€é è°±çš„å­¦ä¹ è·¯å¾„ã€‚ é‚£å¦‚ä½•èŽ·å–æ•°æ®å’Œé¡¹ç›®å‘¢ï¼Ÿä¸€ä¸ªæ·å¾„å°±æ˜¯ç§¯æžå‚åŠ å›½å†…å¤–å„ç§æ•°æ®æŒ–æŽ˜ç«žèµ›ï¼Œæ•°æ®ç›´æŽ¥ä¸‹è½½ä¸‹æ¥ï¼ŒæŒ‰ç…§ç«žèµ›çš„è¦æ±‚åŽ»ä¸æ–­ä¼˜åŒ–ï¼Œç§¯ç´¯ç»éªŒã€‚å›½å¤–çš„Kaggleå’Œå›½å†…çš„DataCastle ä»¥åŠé˜¿é‡Œå¤©æ± æ¯”èµ›éƒ½æ˜¯å¾ˆå¥½çš„å¹³å°ï¼Œä½ å¯ä»¥åœ¨ä¸Šé¢èŽ·å–çœŸå®žçš„æ•°æ®å’Œæ•°æ®ç§‘å­¦å®¶ä»¬ä¸€èµ·å­¦ä¹ å’Œè¿›è¡Œç«žèµ›ï¼Œå°è¯•ä½¿ç”¨å·²ç»å­¦è¿‡çš„æ‰€æœ‰çŸ¥è¯†æ¥å®Œæˆè¿™ä¸ªæ¯”èµ›æœ¬èº«ä¹Ÿæ˜¯ä¸€ä»¶å¾ˆæœ‰ä¹è¶£çš„äº‹æƒ…ã€‚å’Œå…¶ä»–æ•°æ®ç§‘å­¦å®¶çš„è®¨è®ºèƒ½å¼€é˜”è§†é‡Žï¼Œå¯¹æœºå™¨å­¦ä¹ ç®—æ³•æœ‰æ›´æ·±å±‚æ¬¡çš„è®¤è¯†ã€‚ æœ‰æ„æ€çš„æ˜¯ï¼Œæœ‰äº›å¹³å°ï¼Œæ¯”å¦‚é˜¿é‡Œå¤©æ± æ¯”èµ›ï¼Œç”šè‡³ç»™å‡ºäº†ä»Žæ•°æ®å¤„ç†åˆ°æ¨¡åž‹è®­ç»ƒåˆ°æ¨¡åž‹è¯„ä¼°ã€å¯è§†åŒ–åˆ°æ¨¡åž‹èžåˆå¢žå¼ºçš„å…¨éƒ¨ç»„ä»¶ï¼Œä½ è¦åšçš„äº‹æƒ…åªæ˜¯å‚ä¸Žæ¯”èµ›ï¼ŒèŽ·å–æ•°æ®ï¼Œç„¶åŽä½¿ç”¨è¿™äº›ç»„ä»¶åŽ»å®žçŽ°è‡ªå·±çš„ideaå³å¯ã€‚å…·ä½“å†…å®¹å¯ä»¥å‚è§é˜¿é‡Œäº‘æœºå™¨å­¦ä¹ æ–‡æ¡£ã€‚ ä¹¦ç±æŽ¨è Mitchell çš„ã€Šæœºå™¨å­¦ä¹ ã€‹ã€‚Mitchellæ˜¯æœºå™¨å­¦ä¹ çš„é¼»ç¥–ï¼Œç¬¬ä¸€ä¸ªæå‡ºæœºå™¨å­¦ä¹ æ¦‚å¿µçš„äººã€‚è¿™æœ¬ä¹¦å¾ˆè–„ï¼Œå¾ˆç®€å•ã€‚å†…å®¹å¾ˆé™ˆæ—§ï¼Œä½†æ˜¯éƒ½æ˜¯æœºå™¨å­¦ä¹ çš„ç»å…¸é—®é¢˜ã€‚è€Œä¸”ï¼Œè¿™æœ¬ä¹¦æ¦‚å¿µæ¸…æ™°æ­£ç¡®(å¾ˆå¯è´µå•Šï¼Œåˆç®€å•åˆæ­£ç¡®çš„ä¹¦ï¼Œè¯´æ˜Žä½œè€…åŠŸåŠ›å¾ˆå¼º)]]></content>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[lunixåˆ‡æ¢é˜²ç«å¢™]]></title>
    <url>%2F2017%2F11%2F06%2F2018%2Flunix%E5%88%87%E6%8D%A2%E9%98%B2%E7%81%AB%E5%A2%99%2F</url>
    <content type="text"><![CDATA[å½“ç„¶ä½ å¯ä»¥è¿˜åŽŸä¼ ç»Ÿçš„ç®¡ç†æ–¹å¼ã€‚ æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼š åœæ­¢åŽŸæ¥çš„é˜²ç«å¢™æ¨¡å¼ systemctl stop firewalld systemctl mask firewalld å¹¶ä¸”å®‰è£…iptables-servicesï¼šyum install iptables-services è®¾ç½®å¼€æœºå¯åŠ¨ï¼š systemctl enable iptables 12341. systemctl stop iptables 2. systemctl start iptables 3. systemctl restart iptables 4. systemctl reload iptables OKï¼Œå†è¯•ä¸€ä¸‹åº”è¯¥å°±å¥½ä½¿äº† å¼€æ”¾æŸä¸ªç«¯å£çš„ä¸¤ç§æ–¹å¼ç›´æŽ¥ç¼–è¾‘æ–‡ä»¶å¼€æ”¾æŸä¸ªç«¯å£ åœ¨/etc/sysconfig/iptablesé‡Œæ·»åŠ -A RH-Firewall-1-INPUT -m state â€“state NEW -m tcp -p tcp â€“dport 8080 -j ACCEPT vim /etc/sysconfig/iptableså°†ä¸Šé¢çš„è¯­å¥-A INPUT -p tcp -m state â€“state NEW -m tcp â€“dport 82 -j ACCEPTç›´æŽ¥æ’å…¥åˆ°ä¸Šè¿°æ–‡ä»¶ä¸­ã€‚ è¿™æ—¶å€™è§„åˆ™æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼Œéœ€è¦é‡å¯æœåŠ¡service iptables restartã€‚ä¹‹åŽè¿™æ¡è§„åˆ™å°±æ°¸ä¹…ç”Ÿæ•ˆäº† ç”¨å‘½ä»¤è¡Œæ·»åŠ æ·»åŠ inputè®°å½•ï¼š iptables -A INPUT -p tcp â€“dport 22 -j ACCEPTæ·»åŠ outputè®°å½•ï¼š iptables -A OUTPUT -p tcp â€“sport 22 -j ACCEPT æœ€åŽæ³¨æ„éœ€è¦å†æ‰§è¡Œä¸€ä¸‹ /etc/init.d/iptables saveï¼Œè¿™æ ·è¿™ä¸¤æ¡è¯­å¥å°±ä¿å­˜åˆ°åˆšæ‰é‚£ä¸ª/etc/sysconfig/iptables æ–‡ä»¶ä¸­äº† æ³¨æ„è¿™ä¸¤ç§æ–¹æ³•äºŒé€‰ä¸€ï¼Œä¸å¯åŒæ—¶ä½¿ç”¨]]></content>
      <tags>
        <tag>lunix</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[xcodeè‡ªåŠ¨åˆ›å»ºç»“æž„åŒ–æ¨¡ç‰ˆ]]></title>
    <url>%2F2017%2F11%2F03%2F2018%2Fxcode%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%E7%BB%93%E6%9E%84%E5%8C%96%E6%A8%A1%E7%89%88%2F</url>
    <content type="text"><![CDATA[ä¸‹è¾¹è¿™ä¸ªè·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼Œæ˜¯å¯ä»¥è¢«xcodeåŠ è½½ï¼Œç„¶åŽå½¢æˆä¸€ä¸ªæ¨¡ç‰ˆçš„ï¼Œæˆ‘ä»¬çŽ°åœ¨å…·ä½“æ¥çœ‹çœ‹&quot;/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates/File Templates/JDJRCustom&quot;]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Lunix-Centos7 scrapyå®žæˆ˜]]></title>
    <url>%2F2017%2F11%2F02%2F2018%2FLunix-Centos7-scrapy%E5%AE%9E%E6%88%98%2F</url>
    <content type="text"><![CDATA[å®‰è£…scrapy centos7ä¸Šè½¯ä»¶ç®¡ç†å·¥å…·ä¸ºyumè€Œä¸æ˜¯apt-get å®‰è£…scrapysudo pip install scrapyï¼Œè¿™ä¸ªæ—¶å€™å¯èƒ½æŠ¥é”™ï¼Œfatal error: Python.h: No such file or directoryï¼Œè¿™æ˜¯å› ä¸ºç¼ºå°‘python-devè¿™ä¸ªåº“ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…sudo yum install python-devä½†æ˜¯åœ¨centos7ä¸Šä¼šè¯´æ‰¾ä¸åˆ°ï¼Œæ˜¯å› ä¸ºåœ¨è¯¥ç‰ˆæœ¬ä¸Šä¸æ˜¯python-devè€Œæ˜¯python-devel æˆ–è€…æ˜¯ä½¿ç”¨å¦å¤–ä¸€ç§æ–¹æ³• 1234567891011root@localhost ~]# yum -y updateå®‰è£…gccåŠæ‰©å±•åŒ…[root@localhost ~]# yum install gcc libffi-devel python-devel openssl-develå®‰è£…å¼€å‘å·¥å…·åŒ…[root@localhost ~]# yum groupinstall -y developmentå®‰è£…libxslt-develæ”¯æŒlxml[root@localhost ~]# yum install libxslt-develå®‰è£…pip[root@localhost ~]# yum -y install python-pipå®‰è£…Scrapy[root@localhost ~]# pip install scrapy é…ç½®mongoå®‰è£…çŽ¯å¢ƒåŠé…ç½®yum12345678910# more /etc/redhat-release CentOS Linux release 7.2.1511 (Core)# vi /etc/yum.repos.d/mongodb-org-3.2.repo [mongodb-org-3.2]name=MongoDB Repositorybaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.2/x86_64/gpgcheck=1enabled=1gpgkey=https://www.mongodb.org/static/pgp/server-3.2.asc å®‰è£…MongoDB1yum -y install mongodb-org åˆ›å»ºdataæ–‡ä»¶å’Œlogæ–‡ä»¶å¹¶ä¸”å¯åŠ¨ å…ˆåœ¨åŒçº§ç›®å½•ä¸‹åˆ›å»ºæ•°æ®æ–‡ä»¶å’Œæ—¥å¿—æ–‡ä»¶mkdir dataå’Œmkdir log å¯åŠ¨mongodbæœåŠ¡mongod â€“dbpath data â€“logpath log/mongod.log â€“logappend â€“fork å†æ¬¡mongoå¦‚æžœæ˜¾ç¤ºconnecting to testè¯´æ˜Žå¯åŠ¨æˆåŠŸï¼Œè¾“å…¥exit;é€€å‡ºmongo Lunixé•¿æ—¶é—´è¿è¡Œå‘½ä»¤è¡Œæ–¹æ³•ä½¿ç”¨screen å¸¸ç”¨å‘½ä»¤ screen -lsæŸ¥çœ‹å½“å‰çš„screen screen -S screennameåˆ›å»ºä¸€ä¸ªæ–°çš„screenå¹¶ä¸”ç»™å‘½åï¼Œè¿™ä¸ªåå­—å¯ä»¥åŽæœŸç”¨ä»¥æ¢å¤screen control+a----&gt;dé€€å‡ºå½“å‰screenå¹¶ä¸”æŒ‚èµ· screen -r number/nameè¿›å…¥æŸä¸ªscreen å®šæ—¶è¿è¡Œä»»åŠ¡1234while True: print time.strftime(&apos;%Y-%m-%d %X&apos;,time.localtime()) yourTask() # æ­¤å¤„ä¸ºè¦æ‰§è¡Œçš„ä»»åŠ¡ time.sleep(n) è¾“å‡ºåˆ°logç›´æŽ¥ç”¨printæ¥è¾“å‡ºï¼Œæ­£å¸¸åœ¨terminalè¿è¡Œå°±å¯ä»¥çœ‹åˆ°æ‰“å°è¾“å‡ºä½†æ˜¯å¦‚æžœç”¨ä¸‹é¢è¿™ç§æ–¹å¼æ¥è¾“å‡ºå°±ä¼šç›´æŽ¥è¾“å‡ºåˆ°logä¸­python test.py &gt;&gt; test.logè¿™æ ·å°±printåˆ°logle Scrapyè¯¦è§£ä¸»è¦æ˜¯ä¸‰ä¸ªæ–‡ä»¶ items.py pipelines.py xxx_spider.py(è¿™ä¸ªæ–‡ä»¶æ˜¯è‡ªå·±åˆ›å»ºçš„ï¼Œåœ¨spidersè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹è¾¹) ä¸‹è¾¹åˆ†åˆ«è¯´æ˜Žæ–‡ä»¶ä»¥åŠå…¶æ•´ä½“å…³ç³» xxx_spider.py1234567891011121314151617181920212223242526272829303132333435363738394041import scrapyimport jsonfrom tutorial.items import JdjrItem#è¿™é‡Œå€’å…¥çš„æ˜¯ä¸€ä¸ªç›¸å½“äºŽiosä¸­çš„modelä¸€æ ·çš„ä¸œè¥¿ï¼Œæ˜¯å®šä¹‰äºŽitems.pyè¿™ä¸ªæ–‡ä»¶class DmozSpider(scrapy.Spider): name = &quot;spider&quot;#è¿™ä¸ªåå­—ç›¸å½“é‡è¦ï¼Œå®ƒæ˜¯çˆ¬è™«çš„å”¯ä¸€æ ‡ç¤ºï¼Œä½ è¿è¡Œå‘½ä»¤è¡Œçš„æ—¶å€™ï¼Œå®ƒè¯†åˆ«çš„ä¹Ÿæ˜¯è¿™ä¸ªåå­—ï¼Œè·Ÿä½ å¤–è¾¹æ–‡ä»¶å«å•¥æ²¡å…³ç³»ï¼Œè·Ÿä½ è¿™ä¸ªç±»å«å•¥ä¹Ÿæ²¡æœ‰å…³ç³» allowed_domains = [&quot;itunes.apple.com&quot;] start_urls = [] start = 0 for i in range(0,2): end = start + 100 endString = &apos;%d&apos; % end startString = &apos;%d&apos; % start start = end + 1# url1 = &quot;https://itunes.apple.com/WebObjects/MZStore.woa/wa/userReviewsRow?id=895682747&amp;displayable-kind=11&amp;startIndex=%s&amp;endIndex=%s&amp;sort=1&amp;appVersion=all&quot; % (startString,endString) url2 = &quot;https://itunes.apple.com/WebObjects/MZStore.woa/wa/userReviewsRow?id=895682747&amp;displayable-kind=11&amp;startIndex=%s&amp;endIndex=%s&amp;sort=1&amp;appVersion=current&quot; % (startString,endString)# start_urls.append(url1) start_urls.append(url2)# start_urls = [# # &quot;https://itunes.apple.com/WebObjects/MZStore.woa/wa/userReviewsRow?id=895682747&amp;displayable-kind=11&amp;startIndex=0&amp;endIndex=50&amp;sort=1&amp;appVersion=cureent&quot;# # ,# &quot;https://itunes.apple.com/WebObjects/MZStore.woa/wa/userReviewsRow?id=895682747&amp;displayable-kind=11&amp;startIndex=0&amp;endIndex=50&amp;sort=1&amp;appVersion=all&quot;# ] def parse(self, response): sites = json.loads(response.body_as_unicode())#å‰è¾¹çš„urlè¯·æ±‚æˆåŠŸä¹‹åŽå°±æ˜¯è°ƒç”¨è¿™ä¸ªparseæ–¹æ³•ï¼Œè¿™é‡Œçš„responseçš„å¤„ç†ç›¸å½“å…³é”®ï¼Œä½†æ€»ç»“æ¥çœ‹ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯jsonï¼Œä¸€ç§æ˜¯htmlï¼Œè¿™é‡Œä¸¾ä¾‹çš„æ˜¯jsonçš„å¤„ç†æ–¹å¼ siteitems = sites[&apos;userReviewList&apos;] for item in siteitems: JrItem = JdjrItem() JrItem[&apos;userReviewId&apos;] = item[&apos;userReviewId&apos;].encode(&quot;utf-8&quot;) JrItem[&apos;body&apos;] = item[&apos;body&apos;].encode(&quot;utf-8&quot;) dateString = item[&apos;date&apos;].encode(&quot;utf-8&quot;) dateStringList = dateString.split(&apos;T&apos;) date = dateStringList[0] time = dateStringList[1] JrItem[&apos;date&apos;] = date JrItem[&apos;time&apos;] = time JrItem[&apos;name&apos;] = item[&apos;name&apos;].encode(&quot;utf-8&quot;) JrItem[&apos;rating&apos;] = item[&apos;rating&apos;] JrItem[&apos;title&apos;] = item[&apos;title&apos;].encode(&quot;utf-8&quot;) yield JrItem#æˆ‘ä»¬æŠŠæ•°æ®åšä¸€ä¸ªè§£æžï¼Œç„¶åŽæŠŠæ•°æ®è£…å…¥æˆ‘ä»¬çš„JrItemè¿™ä¸ªModelé‡Œè¾¹ï¼Œè¿›è¡Œè¿”å›žï¼Œè¿›è¡Œä¸‹ä¸€æ­¥çš„å¤„ç† pipelines.pyè¿™é‡Œæ˜¯æŽ¥æ”¶ä¸Šä¸€æ­¥yield JrItemçš„å†…å®¹ï¼Œç„¶åŽè¿›è¡Œè¿›ä¸€æ­¥çš„å¤„ç†ï¼Œå…·ä½“æ¥è®²å°±æ˜¯æˆ‘ä»¬åˆå§‹åŒ–äº†mongoï¼Œç„¶åŽæŠŠæ•°æ®å­˜å…¥mongo 12345678910111213141516171819202122import pymongofrom scrapy.conf import settingsclass TutorialPipeline(object): def __init__(self):#åœ¨è¿™é‡Œå¾ˆé‡è¦çš„ä¸€æ­¥æ˜¯æˆ‘ä»¬åˆå§‹åŒ–äº†mongoï¼Œç„¶åŽæŠŠæ•°æ®å­˜å…¥mongo # é“¾æŽ¥æ•°æ®åº“ self.client = pymongo.MongoClient(host=settings[&apos;MONGO_HOST&apos;], port=settings[&apos;MONGO_PORT&apos;]) # æ•°æ®åº“ç™»å½•éœ€è¦å¸å·å¯†ç çš„è¯ # self.client.admin.authenticate(settings[&apos;MINGO_USER&apos;], settings[&apos;MONGO_PSW&apos;]) self.db = self.client[settings[&apos;MONGO_DB&apos;]] # èŽ·å¾—æ•°æ®åº“çš„å¥æŸ„ self.coll = self.db[settings[&apos;MONGO_COLL&apos;]] # èŽ·å¾—collectionçš„å¥æŸ„ def process_item(self, item, spider): dbs = self.coll.find(&#123;&apos;userReviewId&apos;:item[&apos;userReviewId&apos;]&#125;) count = 0 for itemnew in dbs:#è¿›è¡Œäº†ä¸€ä¸ªåŽ»é‡ count = count + 1 if count == 0: postItem = dict(item) # æŠŠitemè½¬åŒ–æˆå­—å…¸å½¢å¼ self.coll.insert(postItem) # å‘æ•°æ®åº“æ’å…¥ä¸€æ¡è®°å½• return item item.py1234567891011import scrapyclass JdjrItem(scrapy.Item): # define the fields for your item here like: userReviewId = scrapy.Field() body = scrapy.Field() date = scrapy.Field() name = scrapy.Field() rating = scrapy.Field() title = scrapy.Field() time = scrapy.Field() è‡ªå®šä¹‰header1234567891011121314151617181920212223242526272829303132333435363738394041class AppstoreSpider(scrapy.Spider): name = &quot;ios&quot; allowed_domains = [&quot;itunes.apple.com&quot;] start_urls = [] start = 0 for i in range(10,12): end = start + 100 endString = &apos;%d&apos; % end startString = &apos;%d&apos; % start start = end + 1 url1 = &quot;https://itunes.apple.com/WebObjects/MZStore.woa/wa/userReviewsRow?id=895682747&amp;displayable-kind=11&amp;startIndex=%s&amp;endIndex=%s&amp;sort=1&amp;appVersion=all&quot; % (startString,endString) url2 = &quot;https://itunes.apple.com/WebObjects/MZStore.woa/wa/userReviewsRow?id=895682747&amp;displayable-kind=11&amp;startIndex=%s&amp;endIndex=%s&amp;sort=1&amp;appVersion=current&quot; % (startString,endString) start_urls.append(url1) start_urls.append(url2) def start_requests(self): headers = &#123; &quot;Host&quot;: &quot;itunes.apple.com&quot;, &quot;X-Apple-Tz&quot;: &quot;28800&quot;, &quot;Connection&quot;: &quot;keep-alive&quot;, &quot;Accept&quot;: &quot;*/*&quot;, &quot;X-Apple-Store-Front&quot;: &quot;143465-19,32&quot;, &quot;Proxy-Connection&quot;: &quot;keep-alive&quot;, &quot;If-Modified-Since&quot;: &quot;Mon, 30 Oct 2017 05:09:14 GMT&quot;, &quot;Accept-Language&quot;: &quot;zh-Hans;q=1.0, en;q=0.9&quot;, &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;, &quot;X-Apple-I-MD-RINFO&quot;: &quot;17106176&quot;, &quot;X-Apple-I-MD-M&quot;: &quot;4yta1gxLU2/1yorU7oVB982KDbxQfTgDNV0Kx6rMh83dcH6GSFvvMX4j2xTK1pydINZyrdPRmrAqnMrx&quot;, &quot;User-Agent&quot;: &quot;iTunes/12.5.5 (Macintosh; OS X 10.11.6) AppleWebKit/601.7.7&quot;, &quot;X-Apple-I-Client-Time&quot;: &quot;2017-10-30T06:38:41Z&quot;, &quot;Referer&quot;: &quot;https://itunes.apple.com/cn/app/%E4%BA%AC%E4%B8%9C%E9%87%91%E8%9E%8D-%E6%96%B0%E4%BA%BA%E9%A2%86666%E5%85%83%E5%A4%A7%E7%A4%BC%E5%8C%85/id895682747?mt=8&quot;, &quot;X-Apple-I-MD&quot;: &quot;AAAABQAAABB/8E70ajsA2bpSsQneRzRzAAAAAQ==&quot;, &quot;X-Dsid&quot;: &quot;1851386458&quot;, &quot;Cookie&quot;: &quot;groupingPillToken=1_iphone; mt-asn-1851386458=5; mt-asn-1952598692=5; mt-tkn-1851386458=AquPBN7pBVJrtDMwCG1MrwviP60xe4f/EE45hsAOovLfR/ovUuHxcsKrlj2pxor0U9F3HIkuroemH+0MuFQnpjqUFC4oYoymULT5CpIKnJ3VpDni/Y/moZel5PjbSHG4GD+Ijl5r7uyk/NbjAbcP2c6m643pr8/RJ8pEGPfTmpVhsZJWGga7Uku1jMcsYZwUcq4thww=; mt-tkn-1952598692=AmPsxyX+Zm3hcSBdOCr1LAg942a/+QI1OZsorJ+0WD2wkyUHZ6Dv3jDaRipaZfgo7xzHgpeVUdtG70RFfh0FA5pOHGZGJ/5b/MiFc4VGex0OtgQ9XasD8i89/gI1Ai21Fi7kJkngVal3DewE6NPKYC8difiYN7R7wY/nH/Z3bcgGM9wio22SK/ZdDyrs38XhS717EKw=; X-Dsid=1851386458; itspod=24; mz_at0-1851386458=AwQAAAEBAAHWuQAAAABZo5zH8UZyjuA18kRtUGbvu8lLlA89jpk=; mz_at0-1952598692=AwQAAAEBAAHWUwAAAABX91VVP4AXK30/tKDBEUr2V9fwfUERl9A=; mz_at_ssl-1851386458=AwUAAAEBAAHWUwAAAABYFwZni0EdGJhw1mXiPHOZnkeCs8m3DaU=; mz_at_ssl-1952598692=AwUAAAEBAAHWUQAAAABXfIMB4QjT3cNSHm+BuLBHSWqkz1Ndd0g=; s_vi=[CS]v1|2B45BA5205011739-600001038013C541[CE]; xp_ab=1#isj11bm+3579+17Eg4xa0; xp_abc=17Eg4xa0; xp_ci=3z34ZpILzCUZz4Vrz9pTzlq8yrxrJ&quot;, &quot;iCloud-DSID&quot;: &quot;1851386458&quot; &#125; for url in self.start_urls: yield scrapy.Request(url, headers=headers, callback=self.parse) å®šæ—¶è·‘å¤šä¸ªspider12class AppstoreSpider(scrapy.Spider): name = &quot;ios&quot; é‡ç‚¹æ˜¯è¿™é‡Œçš„nameï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ¥é©±åŠ¨è¿™ä¸ªnameçš„spider å…¶ä»–å‘½ä»¤æŸ¥çœ‹/æ–°å»º/åˆ é™¤ç”¨æˆ· cat /etc/passwd å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·çš„åˆ—è¡¨ cat /etc/group æŸ¥çœ‹ç”¨æˆ·ç»„ userdel peter åˆ é™¤ç”¨æˆ· useradd phpq å¢žåŠ ç”¨æˆ· passwd xxx è¯¥ç”¨æˆ·å¯†ç ]]></content>
      <tags>
        <tag>çˆ¬è™«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonè¾“å‡ºè¡¨æ ¼]]></title>
    <url>%2F2017%2F10%2F31%2F2018%2Fpython%E8%BE%93%E5%87%BA%E8%A1%A8%E6%A0%BC%2F</url>
    <content type="text"><![CDATA[123456789101112from prettytable import PrettyTable x = PrettyTable([&quot;City name&quot;, &quot;Area&quot;, &quot;Population&quot;, &quot;Annual Rainfall&quot;]) x.align[&quot;City name&quot;] = &quot;l&quot;# Left align city namesx.padding_width = 1# One space between column edges and contents (default)x.add_row([&quot;Adelaide&quot;,1295, 1158259, 600.5]) x.add_row([&quot;Brisbane&quot;,5905, 1857594, 1146.4]) x.add_row([&quot;Darwin&quot;, 112, 120900, 1714.7]) x.add_row([&quot;Hobart&quot;, 1357, 205556, 619.5]) x.add_row([&quot;Sydney&quot;, 2058, 4336374, 1214.8]) x.add_row([&quot;Melbourne&quot;, 1566, 3806092, 646.9]) x.add_row([&quot;Perth&quot;, 5386, 1554769, 869.4]) print x]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[appstroeè¯„è®ºçˆ¬å–]]></title>
    <url>%2F2017%2F10%2F30%2F2018%2Fappstroe%E8%AF%84%E8%AE%BA%E7%88%AC%E5%8F%96%2F</url>
    <content type="text"><![CDATA[123456789101112131415161718192021222324252627282930313233343536#!/usr/bin/env python# coding:utf-8import requests# ç¦ç”¨å®‰å…¨è¯·æ±‚è­¦å‘Šfrom requests.packages.urllib3.exceptions import InsecureRequestWarningrequests.packages.urllib3.disable_warnings(InsecureRequestWarning)url = &apos;https://itunes.apple.com/WebObjects/MZStore.woa/wa/userReviewsRow?id=895682747&amp;displayable-kind=11&amp;startIndex=600&amp;endIndex=800&amp;sort=1&amp;appVersion=all&apos;headers = &#123;&quot;Host&quot;: &quot;itunes.apple.com&quot;,&quot;X-Apple-Tz&quot;: &quot;28800&quot;,&quot;Connection&quot;: &quot;keep-alive&quot;,&quot;Accept&quot;: &quot;*/*&quot;,&quot;X-Apple-Store-Front&quot;: &quot;143465-19,32&quot;,&quot;Proxy-Connection&quot;: &quot;keep-alive&quot;,&quot;If-Modified-Since&quot;: &quot;Mon, 30 Oct 2017 05:09:14 GMT&quot;,&quot;Accept-Language&quot;: &quot;zh-Hans;q=1.0, en;q=0.9&quot;,&quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,&quot;X-Apple-I-MD-RINFO&quot;: &quot;17106176&quot;,&quot;X-Apple-I-MD-M&quot;: &quot;4yta1gxLU2/1yorU7oVB982KDbxQfTgDNV0Kx6rMh83dcH6GSFvvMX4j2xTK1pydINZyrdPRmrAqnMrx&quot;,&quot;User-Agent&quot;: &quot;iTunes/12.5.5 (Macintosh; OS X 10.11.6) AppleWebKit/601.7.7&quot;,&quot;X-Apple-I-Client-Time&quot;: &quot;2017-10-30T06:38:41Z&quot;,&quot;Referer&quot;: &quot;https://itunes.apple.com/cn/app/%E4%BA%AC%E4%B8%9C%E9%87%91%E8%9E%8D-%E6%96%B0%E4%BA%BA%E9%A2%86666%E5%85%83%E5%A4%A7%E7%A4%BC%E5%8C%85/id895682747?mt=8&quot;,&quot;X-Apple-I-MD&quot;: &quot;AAAABQAAABB/8E70ajsA2bpSsQneRzRzAAAAAQ==&quot;,&quot;X-Dsid&quot;: &quot;1851386458&quot;,&quot;Cookie&quot;: &quot;groupingPillToken=1_iphone; mt-asn-1851386458=5; mt-asn-1952598692=5; mt-tkn-1851386458=AquPBN7pBVJrtDMwCG1MrwviP60xe4f/EE45hsAOovLfR/ovUuHxcsKrlj2pxor0U9F3HIkuroemH+0MuFQnpjqUFC4oYoymULT5CpIKnJ3VpDni/Y/moZel5PjbSHG4GD+Ijl5r7uyk/NbjAbcP2c6m643pr8/RJ8pEGPfTmpVhsZJWGga7Uku1jMcsYZwUcq4thww=; mt-tkn-1952598692=AmPsxyX+Zm3hcSBdOCr1LAg942a/+QI1OZsorJ+0WD2wkyUHZ6Dv3jDaRipaZfgo7xzHgpeVUdtG70RFfh0FA5pOHGZGJ/5b/MiFc4VGex0OtgQ9XasD8i89/gI1Ai21Fi7kJkngVal3DewE6NPKYC8difiYN7R7wY/nH/Z3bcgGM9wio22SK/ZdDyrs38XhS717EKw=; X-Dsid=1851386458; itspod=24; mz_at0-1851386458=AwQAAAEBAAHWuQAAAABZo5zH8UZyjuA18kRtUGbvu8lLlA89jpk=; mz_at0-1952598692=AwQAAAEBAAHWUwAAAABX91VVP4AXK30/tKDBEUr2V9fwfUERl9A=; mz_at_ssl-1851386458=AwUAAAEBAAHWUwAAAABYFwZni0EdGJhw1mXiPHOZnkeCs8m3DaU=; mz_at_ssl-1952598692=AwUAAAEBAAHWUQAAAABXfIMB4QjT3cNSHm+BuLBHSWqkz1Ndd0g=; s_vi=[CS]v1|2B45BA5205011739-600001038013C541[CE]; xp_ab=1#isj11bm+3579+17Eg4xa0; xp_abc=17Eg4xa0; xp_ci=3z34ZpILzCUZz4Vrz9pTzlq8yrxrJ&quot;,&quot;iCloud-DSID&quot;: &quot;1851386458&quot;&#125;r = requests.get(url, headers=headers, verify=True)# print(r.status_code)respose = r.textprint(type(respose))print respose å…ˆè¯´ä¸€ä¸‹å‘åœ¨å“ªé‡Œï¼Œé‚£å°±æ˜¯æœ€æ–°ç‰ˆæœ¬çš„itunsæ²¡æœ‰åº”ç”¨æœç´¢è¿™ä¸ªåŠŸèƒ½ï¼Œè€Œappstroeçš„æŽ¥å£å®Œå…¨æŠ“ä¸åˆ°ï¼Œè¿™é‡Œè¦è®°ä½æˆ‘ä»¬è¦ä½¿ç”¨10.11.6ä»¥å‰çš„ç³»ç»Ÿç‰ˆæœ¬ï¼Œç„¶åŽä½¿ç”¨12.5.5.5ä»¥å‰çš„itunesç‰ˆæœ¬]]></content>
      <tags>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¯æ‰§è¡Œæ–‡ä»¶åˆ†æžè®°å½•ç³»ç»Ÿæž„å»º]]></title>
    <url>%2F2017%2F10%2F25%2F2017%2FiOS%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E5%88%86%E6%9E%90%E8%AE%B0%E5%BD%95%E7%B3%BB%E7%BB%9F%E6%9E%84%E5%BB%BA%2F</url>
    <content type="text"><![CDATA[é…ç½®æ–‡ä»¶é€‰é¡¹æž„å»º è®¾ç½®æ–‡ä»¶è·¯å¾„å’Œlinkmapé€‰é¡¹ä¸ºYES ç¼–å†™è‡ªåŠ¨åŒ–è§£æžè„šæœ¬ ç¼–å†™è‡ªåŠ¨æ‰“åŒ…è„šæœ¬ å°†è„šæœ¬è¿›è¡Œç¼–è¯‘ï¼Œå¹¶ä¸”åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œå®‰è£… æ­å»ºå¯è§†åŒ–ç•Œé¢ å°†ä»»åŠ¡å¼€å§‹å‘½ä»¤æ¤å…¥git åŽ†å²æ•°æ®å±•ç¤º é…ç½®æ–‡ä»¶é€‰é¡¹æž„å»ºé‡ç‚¹ï¼šæ‰€æœ‰çš„å·¥ç¨‹éƒ½è¦æ·»åŠ ä¸€ä¸ªAnalyseè¿™ä¸ªé¡¹ï¼Œå¦åˆ™ä½ é€‰æ‹©è¿™ä¸ªè¿›è¡Œç¼–è¯‘ï¼Œå°±ä¼šæŠ¥é”™ è®¾ç½®æ–‡ä»¶è·¯å¾„å’Œlinkmapé€‰é¡¹ä¸ºYES $(TARGET_TEMP_DIR)/$(PRODUCT_NAME)-LinkMap-$(CURRENT_VARIANT)-$(CURRENT_ARCH).txt $(BUILD_DIR)/$(CONFIGURATION)$(EFFECTIVE_PLATFORM_NAME)æˆ‘ä»¬å¯ä»¥è®¾ç½®è·¯å¾„ä¸ºBUILD_DIRï¼Œè¿™æ ·å°±ç›´æŽ¥å‡ºçŽ°åœ¨Buildè¿™ä¸ªç›®å½•ä¸‹äº† ç¼–å†™è‡ªåŠ¨åŒ–è§£æžè„šæœ¬ç¼–å†™è‡ªåŠ¨æ‰“åŒ…è„šæœ¬1xcodebuild -workspace JDFinance.xcworkspace -scheme JDMobile -configuration Analyse build]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå®‰å…¨ç‚¹ç½—åˆ—]]></title>
    <url>%2F2017%2F10%2F23%2F2017%2FiOS%E5%AE%89%E5%85%A8%E7%82%B9%E7%BD%97%E5%88%97%2F</url>
    <content type="text"><![CDATA[é’ˆå¯¹å¯æ‰§è¡Œæ–‡ä»¶åŽ»é™¤ç¬¦å·è¡¨ 1strip JDMobile è¿™æ ·å°±åŽ»é™¤äº†ç¬¦å·è¡¨ï¼Œé˜²æ­¢ä»–äººæŸ¥çœ‹æˆ‘ä»¬ä½¿ç”¨çš„ç±»å’Œæ–¹æ³•ï¼Œä½†æ˜¯éœ€è¦é‡æ–°ç­¾åæˆ‘ä»¬çš„åŒ…æ‰èƒ½å‘å‡ºåŽ»]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®ç§‘å­¦å…¥é—¨]]></title>
    <url>%2F2017%2F10%2F23%2F2018%2F%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[äº§å“æœ¬è´¨ä¸Šæ‰¿è½½çš„æ˜¯æ•°æ®ï¼Œé€šè¿‡å¯¹æ•°æ®çš„æŒ–æŽ˜ç„¶åŽä¸æ–­çš„ä¼˜åŒ–äº§å“ï¼Œä»Žè€Œè¾¾åˆ°å˜çŽ°çš„ç›®çš„ å…³äºŽå¤§æ•°æ®ï¼š æ•°æ®æ¥æº äº¤æ˜“æ•°æ®ï¼šä¸šåŠ¡å¼€å±•å¿…é¡»è®°å½•çš„æ•°æ®ï¼Œæ¯”å¦‚åŸºé‡‘äº¤æ˜“æ•°æ®ï¼Œæ¯”å¦‚ç—…ä¾‹ è¡Œä¸ºæ•°æ®ï¼šæ—¥å¿—æ•°æ®ï¼Œè¿™æ˜¯æœ€å…³é”®çš„ç‚¹ï¼Œæ¯”å¦‚æ“ä½œä¹ æƒ¯ï¼Œä»€ä¹ˆæ—¶å€™å–œæ¬¢ä½¿ç”¨ï¼Œä»€ä¹ˆåœ°ç‚¹ï¼Œä¸€ä¸ªæ²¡æœ‰ç—…çš„äººæ¯å¤©å¹²ä»€ä¹ˆï¼Œä¸€ä¸ªæœ‰ç—…çš„äººæ¯å¤©å¹²ä»€ä¹ˆ å…¨é‡åŠ å·¥ æ— æ³•é€šè¿‡é‡‡æ ·çš„æ–¹å¼æ¥è¾¾åˆ°ç›®çš„ï¼Œæ¯”å¦‚ç»Ÿè®¡ä½¿ç”¨è”é€šå¡çš„ç”¨æˆ·æ¯”ä¾‹ï¼Œé‡‡æŸå‡ ä¸ªç‰¹å¾åŒºåŸŸæ•°æ®ï¼Œç„¶åŽåŠ æƒåŽä½ å‘çŽ°æ”¾åˆ°å…¨å›½å¤§å·®ä¸å·®ï¼Œä½†æ˜¯è¡Œä¸ºæ•°æ®åƒå·®ä¸‡åˆ«ï¼Œå¹¶ä¸”å¯¹ç»†åˆ†äººç¾¤æ„ä¹‰é‡å¤§ åˆ†å¸ƒå¼çš„å¿…è¦æ€§ è‡ªåŠ¨åŒ–åº”ç”¨ ç›¸å¯¹äºŽæ´žå¯Ÿåº”ç”¨è€Œè¨€ï¼Œå°†æ•°æ®æ€»ç»“ä¸ºæŠ¥è¡¨ï¼Œç„¶åŽå†³ç­–äººå‘˜æ ¹æ®æ•°æ®è¿›è¡Œå†³ç­–ï¼Œæ¯”å¦‚è´¢åŠ¡æŠ¥è¡¨å’Œè¿è¥æŠ¥è¡¨ï¼Œæœ¬è´¨æ˜¯æ•°æ®åˆ°äººå†åˆ°äººçš„å†³ç­–ï¼Œæ•°æ®åˆ°æœºå™¨ç„¶åŽåˆ°æœºå™¨è‡ªåŠ¨å†³ç­–ï¼Œè¿™æ˜¯è‡ªåŠ¨åŒ–åº”ç”¨ æ¯”å¦‚å¹¿å‘Šç³»ç»Ÿå’Œå¾ä¿¡ç³»ç»Ÿå’Œè‡ªåŠ¨è¡¥è´§ç³»ç»Ÿï¼Œåœ¨äººè¿›è¡Œæµè§ˆçš„æ—¶å€™å¹¿å‘Šç­–ç•¥å°±ä¼šè‡ªåŠ¨è°ƒæ•´ å…·å¤‡äº†ä¸Šè¾¹çš„ç‰¹ç‚¹æ‰æ˜¯ä¸€ä¸ªå…¸åž‹çš„å¤§æ•°æ®é—®é¢˜ è½åœ°å…·ä½“åˆ°è½åœ°çš„æ—¶å€™ï¼Œéœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š æ”¶é›† æ•°æ®è½¬åŒ–ä¸ºä¿¡æ¯ æŒ–æŽ˜ å˜çŽ° æ€»ä½“æ€è·¯ç›®çš„ï¼šæ•°æ®å’Œæµé‡æˆ–è€…IPå˜çŽ° æµé‡å˜çŽ°ï¼šæ­£å¸¸å†…å®¹å¤¹å¸¦ä»˜è´¹å†…å®¹æˆ–è€…å¯è½¬åŒ–çš„å†…å®¹ æ•°æ®å˜çŽ°ï¼šæ ¹æ®ç”¨æˆ·åå¥½æˆ–è€…å«ç”»åƒæé«˜ä»˜è´¹å†…å®¹æˆ–è€…æ¸ é“çš„æŠ•æ”¾æˆ–è€…è¯´ç”±äºŽæ•°æ®çš„å­˜åœ¨ï¼Œæµé‡çš„å•ä½å˜çŽ°èƒ½åŠ›å˜å¼º å“ç‰Œå˜çŽ°ï¼šåˆ©ç”¨ç†Ÿæ‚‰çš„å½¢è±¡æé«˜å…³æ³¨åº¦å’ŒæŽ¥å—åº¦ï¼Œå¢žåŠ è½¬åŒ–çŽ‡ï¼Œå»¶ä¼¸åˆ©ç”¨ç†Ÿæ‚‰å“ç‰Œè¿›è¡Œå†è¥é”€ ä¸¾ä¾‹1ï¼šå¹¿å‘Šä½å®šä»·1ä¸‡ï¼Œè¿™æ˜¯æµé‡å˜çŽ°ï¼ŒçŽ°åœ¨æˆ‘ä»¬åˆ©ç”¨æ•°æ®ä¸€ä¸ªå¹¿å‘Šä½ä¸€åˆ†ä¸ºäºŒï¼Œä¸Šè¾¹å–å‰ƒé¡»åˆ€ä¸‹è¾¹å–æŠ¤è‚¤å“ï¼Œæ¯ä¸ªå¹¿å‘Šä½å–6åƒï¼Œå¤šå–2åƒï¼Œå¤šçš„æ”¶å…¥ä¾¿æ˜¯æ•°æ®æ”¶å…¥ã€‚å¤§å®¶åŒèµ¢ä¸¾ä¾‹2:ç½‘çº¢ï¼Œè‡ªåª’ä½“ åŽŸåˆ™ï¼š æ•°æ®ä¼˜äºŽç»éªŒ è‡ªåŠ¨å…ˆäºŽäººå·¥ è¡Œä¸ºæ•°æ®å…·ä½“ å±å¹•æ‹–åŠ¨å¿«æ…¢ gg]]></content>
      <tags>
        <tag>å¤§æ•°æ®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å›¾ç‰‡åŽ‹ç¼©å·¥å…·ImageOptimåœ¨gitçš„é›†æˆ]]></title>
    <url>%2F2017%2F10%2F23%2F2018%2F%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9%E5%B7%A5%E5%85%B7ImageOptim%E5%9C%A8git%E7%9A%84%E9%9B%86%E6%88%90%2F</url>
    <content type="text"><![CDATA[è¿‡ç¨‹æ˜¯çœ‹çœ‹æœ‰æ²¡æœ‰è£…è¿™ä¸ªè½¯ä»¶ï¼Œå¦‚æžœæ²¡æœ‰è£…å°±å…ˆä¸‹è½½å†è£…ä¸Šï¼Œç„¶åŽå¼€å§‹è¿›è¡Œæ£€ç´¢æ‰€æœ‰çš„å›¾ç‰‡ï¼Œç„¶åŽæŠŠå›¾ç‰‡ä¼ å…¥è¿™ä¸ªè½¯ä»¶ï¼Œæ‰“å¼€è¿›è¡ŒåŽ‹ç¼© 12345678910111213141516171819202122232425262728293031323334353637383940#!/usr/bin/env python#coding:utf-8import sys,os,time,shutilimport urllib import urllib2import zipfileimport tarfiledef un_tar(file_name): tar = tarfile.open(file_name) names = tar.getnames() if os.path.isdir(file_name + &quot;_files&quot;): pass else: os.mkdir(file_name + &quot;_files&quot;) #å› ä¸ºè§£åŽ‹åŽæ˜¯å¾ˆå¤šæ–‡ä»¶ï¼Œé¢„å…ˆå»ºç«‹åŒåç›®å½• for name in names: tar.extract(name, file_name + &quot;_files/&quot;) tar.close()if os.path.exists(&apos;/Applications/ImageOptim.app&apos;) == False: print &apos;ä¸‹è½½&apos; un_tar(&apos;ImageOptim.tar&apos;) shutil.copytree(&apos;ImageOptim.tar_files/ImageOptim.app&apos;,&apos;/Applications/ImageOptim.app&apos;)text = os.popen(&apos;find . -name *.png&apos;).read()images = text.split(&apos;\n&apos;)imagepaths = &apos;&apos;for x in xrange(1,200): image = images[x] if chr(32) in image: print &apos;è¯¥æ–‡ä»¶ä¸å¯ç”¨ï¼Œè¯·åŽ»é™¤æ–‡ä»¶åå­—çš„ç©ºæ ¼&apos; + image continue imagepaths = imagepaths + &apos; &apos; + imageos.system(&apos;open -a ImageOptim &apos; + imagepaths)]]></content>
      <tags>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå®‰å…¨--ç¬¦å·è¡¨]]></title>
    <url>%2F2017%2F10%2F20%2F2017%2FiOS%E5%AE%89%E5%85%A8-%E7%AC%A6%E5%8F%B7%E8%A1%A8%2F</url>
    <content type="text"><![CDATA[ç¬¦å·è¡¨ä¸­æœ‰äº›ç¬¦å·æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯å¾ˆå¤šç¬¦å·éƒ½æ˜¯åŽ»æŽ‰çš„ã€‚ å…ˆæ¥çœ‹ä¸€ä¸ªæ­£å¸¸çš„äºŒè¿›åˆ¶æ–‡ä»¶çš„ç¬¦å·è¡¨ï¼š IOSå®‰å…¨â€“ä½¿ç”¨stripä»Žç¬¦å·è¡¨ä¸­åŽ»æŽ‰ä¸éœ€è¦çš„ç¬¦å· ä»Žä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¾ˆå¤šæš´éœ²çš„ç±»åã€å‡½æ•°åç­‰ï¼Œè¿™è®©æ”»å‡»è€…å¾ˆå®¹æ˜“çœ‹å‡ºä½ çš„ç¨‹åºä¸­æœ‰å“ªäº›å…³é”®çš„é€»è¾‘ã€‚ä½†æ˜¯æˆ‘ä»¬å¯¹è¯¥æ–‡ä»¶stripåŽï¼Œå†æ¥çœ‹å®ƒçš„ç¬¦å·è¡¨ï¼š strip JDMobile IOSå®‰å…¨â€“ä½¿ç”¨stripä»Žç¬¦å·è¡¨ä¸­åŽ»æŽ‰ä¸éœ€è¦çš„ç¬¦å· è¿™æ—¶æˆ‘ä»¬çœ‹åˆ°ç¨‹åºä¸­å®šä¹‰çš„å‡½æ•°åœ¨ç¬¦å·è¡¨ä¸­éƒ½æ²¡æœ‰äº†ã€‚ è€Œä¸”è¿™æ ·åœ¨åæ±‡ç¼–çš„ä»£ç ä¸­ä¹Ÿä¸ä¼šå­˜åœ¨ç¬¦å·ã€‚]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iosç¼–è¯‘è¿‡ç¨‹]]></title>
    <url>%2F2017%2F10%2F20%2F2017%2Fios%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[çœ‹ä¸€ä¸‹iosé¡¹ç›®çš„å½’æ¡£æž„å»ºæµç¨‹: å‡†å¤‡æž„å»ºçŽ¯å¢ƒï¼Œæž„å»ºç›®å½• ç¼–è¯‘ä¸»å·¥ç¨‹ä¾èµ–çš„Podså·¥ç¨‹çš„é™æ€åº“æˆ–è€…Framework (=== BUILD TARGET Aspects OF PROJECT Pods WITH CONFIGURATION Debug ===) ç¼–è¯‘ä¸»å·¥ç¨‹çš„æºä»£ç æ–‡ä»¶ (CompileC) é“¾æŽ¥ç”Ÿæˆä¸»å·¥ç¨‹å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ (Ld) æ‹·è´å›¾ç‰‡ï¼Œlocalizedå­—ç¬¦ä¸²ç­‰èµ„æºæ–‡ä»¶ (CpResource) ç¼–è¯‘storyboardæ–‡ä»¶ (CompileStoryboard) CompileAssetCatalog å¤„ç†pinfo.listæ–‡ä»¶ (ProcessInfoPlistFile) ç”Ÿæˆç¬¦å·è¡¨æ–‡ä»¶(GenerateDSYMFile) é“¾æŽ¥StoryBoard(LinkStoryboards) æ‰§è¡Œé…ç½®çš„è„šæœ¬æ–‡ä»¶(PhaseScriptExecution) æ‰“åŒ…ç”Ÿæˆappæ–‡ä»¶ï¼Œä¸æ˜¯ipaæ–‡ä»¶(ProcessProductPackaging) ç­¾å (CodeSign) æ ¡éªŒ (Validate)]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ipaè‡ªåŠ¨åˆ›å»ºä¸Šä¼ åŠŸèƒ½æž„å»º]]></title>
    <url>%2F2017%2F10%2F16%2F2017%2Fipa%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%E4%B8%8A%E4%BC%A0%E5%8A%9F%E8%83%BD%E6%9E%84%E5%BB%BA%2F</url>
    <content type="text"><![CDATA[æˆ‘ä»¬å…¶å®žæ˜¯å¯¹Application LoaderåŠŸèƒ½è¿›è¡Œè„šæœ¬åŒ– åšä¸€ä¸ªè½¯é“¾é¦–å…ˆln -s /Applications/Xcode.app/Contents/Applications/Application\ Loader.app/Contents/Frameworks/ITunesSoftwareService.framework/Versions/A/Support/altool /usr/local/bin/altool å¢žåŠ å…³è”é¡¹ç›®ln -s /Applications/Xcode.app/Contents/Applications/Application\ Loader.app/Contents/itms /usr/local/itms æ‰“åŒ…è„šæœ¬xcodebuild -workspace JDFinance.xcworkspace -scheme JDMobile -configuration Beta build æ‰“åŒ…è„šæœ¬xcodebuild archive -workspace JDFinance.xcworkspace -scheme JDMobile -configuration Beta -archivePath JDMobile.xcarchive altool -v -f JDMobile.ipa -u xxxxxxxx@126.com -p xxxxxx -t iosæ£€éªŒæ˜¯å¦å¯ä»¥è¿›è¡Œä¸Šä¼  altool --upload-app -f JDMobile.ipa -u xxxxxxxx@126.com -p xxxxxxxx -t iosä¸Šä¼  ERROR ITMS-90535: &quot;Unexpected CFBundleExecutable Key. The bundle at &#39;Payload/JDMobile.app/CBPResource.bundle&#39; does not contain a bundle executable. If this bundle intentionally does not contain an executable, consider removing the CFBundleExecutable keyå‡ºçŽ°è¿™ä¸ªé”™è¯¯çš„æ—¶å€™åˆ é™¤è¿™ä¸ªkeyå°±å¥½ ERROR ITMS-90207: &quot;Invalid Bundle. The bundle at &#39;JDMobile.app&#39; does not contain a bundle executable.&quot;å‡ºçŽ°è¿™ä¸ªé”™è¯¯çš„æ—¶å€™çœ‹çœ‹é‡Œè¾¹æ˜¯ä¸æ˜¯å­˜åœ¨ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå½“ç„¶å¦‚æžœä½ ç¼–è¯‘ä¸€ä¸ªbundleæ˜¯å®Œå…¨å¯èƒ½çš„ï¼Œè¿™ä¸ªæ—¶å€™ä½ å°±è¦å…ˆæ‰‹åŠ¨ç¼–è¯‘ï¼Œç„¶åŽåˆ é™¤å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç„¶åŽåœ¨æ‰‹åŠ¨åŠ å…¥è¿›åŽ»å°±å¥½äº† ç­¾åå¤±è´¥ï¼Œcodesigné‚£ä¹ˆçœ‹ä¸€çœ‹ä½ çš„è¯ä¹¦æ˜¯ä¸æ˜¯åœ¨é’¥åŒ™ä¸²é‡Œè¾¹ï¼Œè¦åšçš„å°±æ˜¯æŠŠå®ƒå¼„åˆ°ç³»ç»Ÿé‡Œè¾¹]]></content>
      <tags>
        <tag>è‡ªåŠ¨åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexoå¤šç«¯åŒæ­¥é”™è¯¯è§£å†³æ–¹æ¡ˆ]]></title>
    <url>%2F2017%2F10%2F11%2F2017%2Fhexo%E5%A4%9A%E7%AB%AF%E5%90%8C%E6%AD%A5%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%2F</url>
    <content type="text"><![CDATA[hexo dè¿™ä¸ªå‘½ä»¤æ˜¯ç›¸å½“äºŽç›´æŽ¥git pushï¼Œå¦‚æžœåªæœ‰ä¸€å°æœºå™¨é‚£ä¹ˆæ˜¯æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¦‚æžœæ˜¯ä¸¤å°æœºå™¨ï¼Œé‚£ä¹ˆè¿˜å°‘ä¸€æ­¥git pullï¼Œæ‰€ä»¥å¦‚æžœæ˜¯ä¸¤å°æœºå™¨åŒæ—¶ç»´æŠ¤ä¸€ä¸ªåº“çš„æ—¶å€™éœ€è¦ è¿›å…¥åˆ°.deploy_gitè¿™ä¸ªç›®å½•ä¸‹ ç„¶åŽæ‰§è¡Œgit pull origin master --allow-unrelated-histories ç„¶åŽå†push æ‰§è¡Œhexo då°±å¥½äº†]]></content>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F10%2F11%2F2016%2F%E8%BD%AC-block%E8%BF%9B%E9%98%B61-block%E5%AE%9E%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[title: (è½¬)blockè¿›é˜¶1â€“blockå®žçŽ°date: 2016-06-29 14:15:20tags: iOScategories: iOS æœ¬ç³»åˆ—åšæ–‡æ€»ç»“è‡ªã€ŠPro Multithreading and Memory Management for iOS and OS X with ARCã€‹ block é¡¾åæ€ä¹‰å°±æ˜¯ä»£ç å—ï¼Œå°†åŒä¸€é€»è¾‘çš„ä»£ç æ”¾åœ¨ä¸€ä¸ªå—ï¼Œä½¿ä»£ç æ›´ç®€æ´ç´§å‡‘ï¼Œæ˜“äºŽé˜…è¯»ï¼Œè€Œä¸”å®ƒæ¯”å‡½æ•°ä½¿ç”¨æ›´æ–¹ä¾¿ï¼Œä»£ç æ›´ç¾Žè§‚ï¼Œå› è€Œå¹¿å—å¼€å‘è€…æ¬¢è¿Žã€‚ä½†åŒæ—¶ block ä¹Ÿæ˜¯ iOS å¼€å‘ä¸­å‘æœ€å¤šçš„åœ°æ–¹ä¹‹ä¸€ï¼Œå› æ­¤æœ‰å¿…è¦äº†è§£ä¸‹ block çš„å®žçŽ°åŽŸç†ï¼ŒçŸ¥å…¶ç„¶ï¼Œæ›´çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œæ‰èƒ½ä»Žæ ¹æœ¬ä¸Šé¿å…æŒ–å‘å’Œè¸©å‘ã€‚ éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œblock åªæ˜¯ Objective-C å¯¹é—­åŒ…çš„å®žçŽ°ï¼Œå¹¶ä¸æ˜¯ iOS ç‹¬æœ‰çš„æ¦‚å¿µï¼Œåœ¨ C++ã€Java ç­‰è¯­è¨€ä¹Ÿæœ‰å®žçŽ°é—­åŒ…ï¼Œåç§°ä¸åŒè€Œå·²ã€‚ ä»¥ä¸‹ç ”ç©¶æ‰€ç”¨çš„è¿‡ç¨‹ä»£ç ç”± clang ç¼–è¯‘å‰ç«¯ç”Ÿæˆï¼Œä»…ä½œç†è§£ä¹‹ç”¨ã€‚å®žé™…ä¸Š clang æ ¹æœ¬ä¸ä¼šå°† block è½¬æ¢æˆäººç±»å¯è¯»çš„ä»£ç ï¼Œå®ƒå¯¹ block åˆ°åº•åšäº†ä»€ä¹ˆï¼Œè°ä¹Ÿä¸çŸ¥é“ã€‚ æ‰€ä»¥ï¼Œåˆ‡å‹¿å°†è¿‡ç¨‹ä»£ç å½“åšblockçš„å®žé™…å®žçŽ°ï¼Œåˆ‡è®°åˆ‡è®°ï¼ï¼ï¼ å°†ä¸‹é¢çš„ test.m ä»£ç ç”¨ clang å·¥å…·ç¿»è¯‘ test.cpp ä»£ç  clang -rewrite-objc test.m test.m ä»£ç 1234567/************* Objective-C æºç  *************/int main()&#123; void (^blk)(void) = ^&#123; printf(&quot;Block\n&quot;); &#125;; blk(); return 0;&#125; test.cpp1234567891011121314151617181920212223242526272829303132333435/************* ä½¿ç”¨ clang ç¿»è¯‘åŽå¦‚ä¸‹ *************/struct __block_impl&#123; void *isa; int Flags; int Reserved; void *FuncPtr;&#125;;struct __main_block_impl_0&#123; struct __block_impl impl; struct __main_block_desc_0* Desc; __main_block_impl_0(void *fp, struct __main_block_desc_0 *desc, int flags=0) &#123; impl.isa = &amp;_NSConcreteStackBlock; impl.Flags = flags; impl.FuncPtr = fp; Desc = desc; &#125;&#125;;static void __main_block_func_0(struct __main_block_impl_0 *__cself)&#123; printf(&quot;Block\n&quot;);&#125;static struct __main_block_desc_0&#123; size_t reserved; size_t Block_size;&#125; __main_block_desc_0_DATA = &#123; 0, sizeof(struct __main_block_impl_0) &#125;;int main()&#123; void (*blk)(void) = (void (*)())&amp;__main_block_impl_0((void *)__main_block_func_0, &amp;__main_block_desc_0_DATA); ((void (*)(__block_impl *))((__block_impl *)blk)-&gt;FuncPtr)((__block_impl *)blk); return 0;&#125; æŽ¥ç€ï¼Œæˆ‘ä»¬é€ä¸€æ¥çœ‹ä¸‹è¿™äº›å‡½æ•°å’Œç»“æž„ä½“ block ç»“æž„ä½“ä¿¡æ¯è¯¦è§£struct __block_impl12345678// __block_impl æ˜¯ block å®žçŽ°çš„ç»“æž„ä½“struct __block_impl&#123; void *isa; int Flags; int Reserved; void *FuncPtr;&#125;; isa 123impl.isa = &amp;_NSConcreteStackBlock; impl.isa = &amp;_NSConcreteMallocBlock; impl.isa = &amp;_NSConcreteGlobalBlock; FlagsæŒ‰ä½æ‰¿è½½ block çš„é™„åŠ ä¿¡æ¯ï¼› Reservedä¿ç•™å˜é‡ï¼› FuncPtrå‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘ Block è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œå³{ printf(â€œBlock\nâ€) }; struct __main_block_impl_012345678910111213// __main_block_impl_0 æ˜¯ block å®žçŽ°çš„ç»“æž„ä½“ï¼Œä¹Ÿæ˜¯ block å®žçŽ°çš„å…¥å£struct __main_block_impl_0&#123; struct __block_impl impl; struct __main_block_desc_0* Desc; __main_block_impl_0(void *fp, struct __main_block_desc_0 *desc, int flags=0) &#123; impl.isa = &amp;_NSConcreteStackBlock; impl.Flags = flags; impl.FuncPtr = fp; Desc = desc; &#125;&#125;; implblock å®žçŽ°çš„ç»“æž„ä½“å˜é‡ï¼Œè¯¥ç»“æž„ä½“å‰é¢å·²è¯´æ˜Žï¼› Descæè¿° block çš„ç»“æž„ä½“å˜é‡ï¼› __main_block_impl_0ç»“æž„ä½“çš„æž„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–ç»“æž„ä½“å˜é‡ implã€Descï¼› static void __main_block_func_012345// __main_block_func_0 æ˜¯ block è¦æœ€ç»ˆè¦æ‰§è¡Œçš„å‡½æ•°ä»£ç static void __main_block_func_0(struct __main_block_impl_0 *__cself)&#123; printf(&quot;Block\n&quot;);&#125; static struct __main_block_desc_0123456// __main_block_desc_0 æ˜¯ block çš„æè¿°ä¿¡æ¯ç»“æž„ä½“static struct __main_block_desc_0&#123; size_t reserved; size_t Block_size;&#125; __main_block_desc_0_DATA = &#123; 0, sizeof(struct __main_block_impl_0) &#125;; reservedç»“æž„ä½“ä¿¡æ¯ä¿ç•™å­—æ®µ Block_sizeç»“æž„ä½“å¤§å° æ­¤å¤„å·²å®šä¹‰äº†ä¸€ä¸ªè¯¥ç»“æž„ä½“ç±»åž‹çš„å˜é‡ __main_block_desc_0_DATA æŽ¥ç€å†çœ‹ block èŽ·å–å¤–éƒ¨å˜é‡ block èŽ·å–å¤–éƒ¨å˜é‡è¿è¡Œä¸‹é¢çš„ä»£ç 1234567int main()&#123; int intValue = 1; void (^blk)(void) = ^&#123; printf(&quot;intValue = %d\n&quot;, intValue); &#125;; blk(); return 0;&#125; æ‰“å°ç»“æžœ intValue = 1å’Œç¬¬ä¸€æ®µæºç ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œå¤šäº†ä¸ªå±€éƒ¨å˜é‡ intValueï¼Œè€Œä¸”è¿˜åœ¨ block é‡Œé¢èŽ·å–åˆ°äº†ã€‚ é€šè¿‡å‰ä¸€æ®µå¯¹ block æºç çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»äº†è§£åˆ° block çš„å‡½æ•°å®šä¹‰åœ¨ main() å‡½æ•°ä¹‹å¤–ï¼Œé‚£å®ƒåˆæ˜¯å¦‚ä½•èŽ·å– main() é‡Œé¢çš„å±€éƒ¨å˜é‡å‘¢ï¼Ÿä¸ºäº†è§£å¼€ç–‘æƒ‘ï¼Œæˆ‘ä»¬å†æ¬¡ç”¨ clang é‡å†™è¿™æ®µä»£ç 12345678910111213141516171819202122232425262728293031323334353637struct __block_impl&#123; void *isa; int Flags; int Reserved; void *FuncPtr;&#125;;struct __main_block_impl_0&#123; struct __block_impl impl; struct __main_block_desc_0* Desc; int intValue; __main_block_impl_0(void *fp, struct __main_block_desc_0 *desc, int _intValue, int flags=0) : intValue(_intValue) &#123; impl.isa = &amp;_NSConcreteStackBlock; impl.Flags = flags; impl.FuncPtr = fp; Desc = desc; &#125;&#125;;static void __main_block_func_0(struct __main_block_impl_0 *__cself)&#123; int intValue = __cself-&gt;intValue; // bound by copy printf(&quot;intValue = %d\n&quot;, intValue);&#125;static struct __main_block_desc_0&#123; size_t reserved; size_t Block_size;&#125; __main_block_desc_0_DATA = &#123; 0, sizeof(struct __main_block_impl_0)&#125;;int main()&#123; int intValue = 1; void (*blk)(void) = (void (*)())&amp;__main_block_impl_0((void *)__main_block_func_0, &amp;__main_block_desc_0_DATA, intValue); ((void (*)(__block_impl *))((__block_impl *)blk)-&gt;FuncPtr)((__block_impl *)blk); return 0;&#125; åŽŸæ¥ block é€šè¿‡å‚æ•°å€¼ä¼ é€’èŽ·å–åˆ° intValue å˜é‡ï¼Œé€šè¿‡å‡½æ•°1234__main_block_impl_0 (void *fp, struct __main_block_desc_0 *desc, int _intValue, int flags=0) : intValue(_intValue)ä¿å­˜åˆ° __main_block_impl_0 ç»“æž„ä½“çš„åŒåå˜é‡ intValueï¼Œé€šè¿‡ä»£ç  int intValue = __cself-&gt;intValue; å–å‡º intValueï¼Œæ‰“å°å‡ºæ¥ã€‚æž„é€ å‡½æ•° __main_block_impl_0 å†’å·åŽçš„è¡¨è¾¾å¼ intValue(_intValue) çš„æ„æ€æ˜¯ï¼Œç”¨ _intValue åˆå§‹åŒ–ç»“æž„ä½“æˆå‘˜å˜é‡ intValueã€‚ æœ‰å››ç§æƒ…å†µä¸‹åº”è¯¥ä½¿ç”¨åˆå§‹åŒ–è¡¨è¾¾å¼æ¥åˆå§‹åŒ–æˆå‘˜ï¼š1ï¼šåˆå§‹åŒ–constæˆå‘˜2ï¼šåˆå§‹åŒ–å¼•ç”¨æˆå‘˜3ï¼šå½“è°ƒç”¨åŸºç±»çš„æž„é€ å‡½æ•°ï¼Œè€Œå®ƒæ‹¥æœ‰ä¸€ç»„å‚æ•°æ—¶4ï¼šå½“è°ƒç”¨æˆå‘˜ç±»çš„æž„é€ å‡½æ•°ï¼Œè€Œå®ƒæ‹¥æœ‰ä¸€ç»„å‚æ•°æ—¶ è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†block çš„å®žçŽ°ï¼Œä»¥åŠèŽ·å–å¤–éƒ¨å˜é‡çš„åŽŸç†ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬è¿˜ä¸èƒ½åœ¨ block å†…ä¿®æ”¹ intValue å˜é‡ã€‚å¦‚æžœä½ æœ‰å¿ƒè¯•ä¸‹ï¼Œåœ¨ block å†…éƒ¨ä¿®æ”¹ intValue çš„å€¼ï¼Œä¼šæŠ¥ç¼–è¯‘é”™è¯¯ Variable is not assignable(missing __block type specifier)]]></content>
  </entry>
  <entry>
    <title><![CDATA[pythonå­¦ä¹ çŽ¯å¢ƒæ­å»º-jupyter notebook]]></title>
    <url>%2F2017%2F10%2F11%2F2018%2Fpython%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-jupyter-notebook%2F</url>
    <content type="text"><![CDATA[å…ˆè¯´ä¸€ä¸‹å¥½å¤„ï¼šæˆ‘ä»¬å­¦ä¹ pythonå¯ä»¥åœ¨å‘½ä»¤è¡Œè¾“å…¥pythonç›´æŽ¥è¿›å…¥pythonçŽ¯å¢ƒè¿›è¡Œç»ƒä¹ ï¼Œä½†æ˜¯é—®é¢˜æ˜¯å¤šè¡Œè¿è¡Œæ¯”è¾ƒç¹çï¼Œè¿™é‡Œæˆ‘ä»¬æŽ¨èä½¿ç”¨jupyteræ¥è¿è¡Œä»£ç  å†è¯´ä¸€ä¸‹çŽ¯å¢ƒ ï¼šMACå°å¼æœº python:macä¸‹è‡ªå¸¦Python 2.7.10 1.å…ˆå‡çº§äº†pipå®‰è£…å·¥å…·ï¼šsudo python -m pip install â€“upgrade â€“force pip 2.å®‰è£…setuptools å·¥å…·ï¼šsudo pip install setuptools==33.1.1 3.å®‰è£… Python-dateutil:sudo pip install python-dateutil==2.2 4.å®‰è£…six:sudo pip install â€“ignore-installed six 5.å®‰è£…jupyterï¼šsudo install jupyter å¯åŠ¨å‘½ä»¤ï¼šç›´æŽ¥åœ¨ç»ˆç«¯è¾“å…¥jupyter notebook æŠ˜è…¾äº†åŠå¤©ï¼Œæ‰æžå¥½ï¼Œä»¥ä¸Šå‘½ä»¤æ˜¯åœ¨å®‰è£…çš„æ—¶å€™é‡åˆ°å„ç§é—®é¢˜æ—¶ä½¿ç”¨çš„ï¼Œä¸‹é¢å†™è®°å½•ä¸€ä¸‹é‡åˆ°çš„é—®é¢˜ ä»¥åŠå¯¹åº”çš„è§£å†³åŠžæ³• 1.ImportError: cannot import name _thread æŠ¥è¿™ä¸ªé”™è¯¯ è§£å†³åŠžæ³•ï¼š sudo pip uninstall python-dateutilsudo pip install python-dateutil==2.22.File â€œ/Library/Python/2.7/site-packages/dateutil/tz/_common.pyâ€, line 2, in from six.moves import _threadImportError: cannot import name _thread è§£å†³åŠžæ³•ï¼šå®‰è£…six å‘½ä»¤å†ä¸Šæ–¹ è§£å†³äº†ä¸Šé¢çš„é—®é¢˜ å¯åŠ¨çš„æ—¶å€™ è¿˜æ˜¯ä¼šæŠ¥é”™è¿™æ˜¯ä¸ªé¡½å›ºçš„é”™è¯¯ï¼š File â€œ/Library/Python/2.7/site-packages/packaging/requirements.pyâ€, line 59, in MARKER_EXPR = originalTextFor(MARKER_EXPR())(&quot;marker&quot;) TypeError: call() takes exactly 2 arguments (1 given) è§£å†³åŠžæ³•ï¼šæ ¹æ®é”™è¯¯ä¿¡æ¯ç›´æŽ¥æ‰¾åˆ°è·¯å¾„ä¸­çš„æ–‡ä»¶ï¼Œæ‰“å¼€æ–‡ä»¶å°† 59 è¡Œä¸­çš„å‡½æ•°ä¿®æ”¹ 59ï¼š#MARKER_EXPR = originalTextFor(MARKER_EXPR())(â€œmarkerâ€)60ï¼šMARKER_EXPR = originalTextFor(MARKER_EXPR(â€œmarkerâ€)) ä¿®æ”¹å¥½ä¹‹åŽç›´æŽ¥ä¿å­˜æ–‡ä»¶ å†æ¬¡è¿è¡Œjupyter notebook å‘½ä»¤ å³å¯å¯åŠ¨jupyter å…³äºŽsixé‚£ä¸ªé—®é¢˜ï¼Œè¿˜æœ‰ä¸€ç‚¹ éœ€è¦åˆ é™¤æˆ‘ä»¬é»˜è®¤è·¯å¾„ä¸‹çš„six å¦åˆ™ å³ä½¿æ›´æ–°æˆåŠŸäº† ä¹Ÿä¸ä¼šä½¿ç”¨æœ€æ–°çš„six æ–¹æ³•ï¼šå…ˆæŸ¥çœ‹ä¸€ä¸‹é»˜è®¤çš„sixè·¯å¾„ import six æœ€åŽè¯´ä¸€ä¸‹æ€Žä¹ˆä½¿ç”¨fileâ€“&gt;newâ€“&gt;python2]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonå‘é€é‚®ä»¶ä»£ç è®°å½•]]></title>
    <url>%2F2017%2F10%2F10%2F2018%2Fpython%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950#!/usr/bin/env python#coding:utf-8from email import encodersfrom email.header import Headerfrom email.mime.text import MIMETextfrom email.mime.multipart import MIMEMultipartfrom email.mime.application import MIMEApplicationfrom email.utils import parseaddr, formataddrimport smtplib,osdef _format_addr(s): name, addr = parseaddr(s) return formataddr(( \ Header(name, &apos;utf-8&apos;).encode(), \ addr.encode(&apos;utf-8&apos;) if isinstance(addr, unicode) else addr))def sendMail(): username = &apos;hanshenghui&apos; password = &apos;11111111111&apos; from_addr = &apos;hanshenghui@jd.com&apos; to_addr = &apos;hanshenghui@jd.com&apos; # to_addrList = [&apos;hanshenghui@jd.com&apos;,&apos;gaixutian@jd.com&apos;,&apos;wangzhenyang1@jd.com&apos;] to_addrList = [&apos;hanshenghui@jd.com&apos;,&apos;wangxiugang@jd.com&apos;,&apos;dingchao1@jd.com&apos;] smtp_server = &apos;smtp.jd.local&apos; msg = MIMEMultipart() part = MIMEText(&quot;è¿™æ˜¯ä¸€å°æµ‹è¯•é‚®ä»¶\n\nçŽ°åœ¨ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå¾…ç¡®å®šç‚¹:\n1.æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹æ•°æ®è¿›è¡Œæå–ï¼Œåšä¸€äº›åˆ†æžå’Œç®€ä»‹ä½œä¸ºé‚®ä»¶çš„æ­£æ–‡ï¼Œæˆ–è€…æ˜¯ä¸€äº›å…¶ä»–ä»€ä¹ˆå†…å®¹\n2.çŽ°åœ¨é‚®ç®±æˆ‘æ·»åŠ äº†åå­—ä¸ºJDJRMobileï¼Œå®žé™…ä¸Šæ˜¯æˆ‘è‡ªå·±çš„é‚®ç®±ï¼Œç”¨å“ªä¸ªé‚®ç®±æ¥å‘é€æ¯”è¾ƒåˆé€‚\n3.æ£€æµ‹å“ªä¸ªåˆ†æ”¯\n4.æ£€æµ‹é¢‘çŽ‡\n\n&quot;) msg.attach(part) basePath = os.environ[&apos;HOME&apos;] reportPath = basePath + &apos;/Documents/Build/JDJRAPPAndroid/infer-out/report.csv&apos; if os.path.exists(reportPath): part1 = MIMEApplication(open(reportPath,&apos;rb&apos;).read()) part1.add_header(&apos;Content-Disposition&apos;, &apos;attachment&apos;, filename=&quot;report.csv&quot;) msg.attach(part1) # part2 = MIMEApplication(open(&apos;cesh.png&apos;,&apos;rb&apos;).read()) # part2.add_header(&apos;Content-Disposition&apos;, &apos;attachment&apos;, filename=&quot;cesh.png&quot;) # msg.attach(part2) msg[&apos;From&apos;] = _format_addr(u&apos;JDJRMobile &lt;%s&gt;&apos; % from_addr) msg[&apos;To&apos;] = _format_addr(&apos;JDJR&apos;) msg[&apos;Subject&apos;] = Header(u&apos;JDJRå®‰å“æºç æ£€æµ‹æŠ¥å‘Š&apos;, &apos;utf-8&apos;).encode() server = smtplib.SMTP(smtp_server,25) server.set_debuglevel(1) server.sendmail(from_addr, to_addrList, msg.as_string()) server.quit()]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[xcodeå·¥ç¨‹åŠ å¯†æ€è·¯]]></title>
    <url>%2F2017%2F10%2F10%2F2018%2Fxcode%E5%B7%A5%E7%A8%8B%E5%8A%A0%E5%AF%86%E6%80%9D%E8%B7%AF%2F</url>
    <content type="text"><![CDATA[çŽ°åœ¨æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼Œå¦‚ä½•åšåˆ°å¦‚æžœä¸å®‰è£…æˆ‘ä»¬çš„å¼€å‘çŽ¯å¢ƒï¼Œå°±æ— æ³•æŸ¥çœ‹iOSå·¥ç¨‹ã€‚é¦–å…ˆæˆ‘ä»¬å¦‚æžœå¯¹æ‰€æœ‰çš„ä»£ç è¿›è¡ŒåŠ å¯†è¿™è‚¯å®šæ˜¯ä¸€ä¸ªæµ©å¤§çš„å·¥ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©æ˜¯å¯¹projectåŠ å¯†ï¼Œ 123456789101112131415161718192021222324252627282930313233343536373839404142434445/usr/bin/env python#coding:utf-8from Crypto.Cipher import AES from binascii import b2a_hex,a2b_hex class prpcrypt(): #å®šä¹‰ä¸€ä¸ªç±» def __init__(self,key): self.key=key self.mode=AES.MODE_CBC def encrypt(self,text): cryptor=AES.new(self.key,self.mode,self.key) x = len(text) % 16 if x != 0: text = text + &apos;0&apos; * (16 - x) #ä¸æ»¡16ï¼Œ32ï¼Œ64ä½è¡¥0 self.ciphertext=cryptor.encrypt(text) return b2a_hex(self.ciphertext) def decrypt(self,text): cryptor=AES.new(self.key,self.mode,self.key) plain_text=cryptor.decrypt(a2b_hex(text)) return plain_text.rstrip(&apos;\0&apos;) pc=prpcrypt(&apos;tecentbluewhaleA&apos;) #è‡ªå·±è®¾å®šçš„å¯†é’¥f = open(&apos;project.pbxproj&apos;,&apos;r&apos;)text = f.read()liens = text.split(&apos;\n&apos;)if len(liens) &gt; 10: item = liens[10] print item # item = pc.decrypt(item) item = pc.encrypt(item) item = item.replace(&apos;000000000000000&apos;,&apos;&apos;) print item liens[10] = itemfor i in range(0,len(liens) - 1): liens[i] = liens[i] + &apos;\n&apos;strings = &apos;&apos;.join(liens)f = open(&apos;project.pbxproj&apos;,&apos;w&apos;)f.writelines(strings)f.close() è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨åˆ°äº†pycryptoåº“ï¼Œå®‰è£…çš„æ—¶å€™éœ€è¦å…ˆå¸è½½sudo pip uninstall cryptosudo pip uninstall pycrypto ç„¶åŽsudo pip install pycryptoè¿™æ ·å°±å®‰è£…å¥½äº†éœ€è¦çš„åº“ å…³äºŽæˆ‘ä»¬åŠ å¯†é‚£å“ªäº›ä¸œè¥¿ï¼Œå…¶å®žä¸»è¦æ˜¯projectæ–‡ä»¶é‡Œè¾¹çš„è§£æžæ–‡ä»¶ï¼Œå°†ä¸€äº›å…³é”®æ˜¯è¢«ç¬¦å·è¿›è¡ŒåŠ å¯†ï¼Œå…¶å®žå¦‚æžœæŸ¥çœ‹gitæ“ä½œè®°å½•æ˜¯å¯ä»¥å‘çŽ°è¯¥å¦‚ä½•è¿˜åŽŸçš„ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦é å¤šè¡Œæ›¿æ¢æ¥å¢žå¤§æ›¿æ¢çš„å·¥ä½œé‡æ¥äººä¸ºè®¾ç½®é—¨æ§› å¦å¤–éœ€è¦é…åˆæ”¹è£…çš„gitï¼Œåœ¨commitçš„æ—¶å€™è¿›è¡ŒåŠ å¯†ç„¶åŽcommitï¼Œåœ¨pullçš„æ—¶å€™ä¹Ÿæ˜¯è§£å¯†ç„¶åŽcommitä¸€ä¸‹ï¼Œè¿™æ ·æˆ‘ä»¬å°±åšåˆ°äº†ï¼Œåœ¨è¿œç«¯åº“é‡Œè¾¹æ˜¯ä¸èƒ½è¢«ç›´æŽ¥æœ‰åºæŸ¥çœ‹çš„ä»£ç ï¼Œåœ¨æœ¬åœ°éœ€è¦é…åˆæˆ‘ä»¬çš„gitæ‰èƒ½è¢«é¡ºç•…çš„ä½¿ç”¨]]></content>
      <tags>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[xcodeå¤šç‰ˆæœ¬è‡ªåŠ¨åŒ–æ‰“åŒ…è®¾ç½®]]></title>
    <url>%2F2017%2F10%2F10%2F2018%2Fxcode%E5%A4%9A%E7%89%88%E6%9C%AC%E8%87%AA%E5%8A%A8%E5%8C%96%E6%89%93%E5%8C%85%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[å¦‚æžœä½ å‡çº§äº†xcodeä½†æ˜¯è¿™ä¸ªæ—¶å€™ä½ åˆæƒ³é™çº§å›žåŽ»ï¼Œä½ å‘çŽ°appstoreå·²ç»ä¸è¦æŒ‡æœ›äº†ï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½ä¸€ä¸ªä½ éœ€è¦ç‰ˆæœ¬çš„xcodeã€‚ä¸‹è½½å„ä¸ªXcodeç‰ˆæœ¬çš„åœ°å€https://developer.apple.com/download/moreç„¶åŽæ”¾ç½®åˆ°æˆ‘ä»¬çš„ç¨‹åºç›®å½•ä¸‹ï¼Œæ”¹ä¸ªåå­—æ¯”å¦‚è¯´å«Xcode2ä½†æ˜¯çŽ°åœ¨é—®é¢˜åˆæ¥äº†ï¼ŒåŠ å…¥ä½ æ˜¯ä¸ªæ‰“åŒ…æœåŠ¡å™¨ï¼Œä½ ä½¿ç”¨çš„æ˜¯xcodebuildæ¥æ‰“åŒ…çš„ï¼Œè¿™ä¸ªæ—¶å€™ä¸¤ä¸ªç‰ˆæœ¬çš„xcodeåŒæ—¶å­˜åœ¨ï¼Œå®ƒå¦‚ä½•é€‰æ‹©sdkè¿›è¡Œæ‰“åŒ…å‘¢ï¼Ÿ é¦–å…ˆæŸ¥çœ‹sdkç‰ˆæœ¬ xcodebuild -showsdks ç„¶åŽåˆ‡æ¢é»˜è®¤çš„xcode sudo xcode-select -switch /Applications/Xcode2.app ç„¶åŽåœ¨æ‰§è¡Œxcodebuild -showsdks ä½ ä¼šå‘çŽ°sdkå·²ç»å˜äº†ï¼Œè¿™ä¸ªæ—¶å€™ä½ ä½¿ç”¨xcodebuildæ¥æ‰“åŒ…å¯ä»¥é€‰æ‹©ä½ éœ€è¦çš„è¿™ä¸ªç‰ˆæœ¬çš„sdkäº†]]></content>
      <tags>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macä¸­çš„äºŒè¿›åˆ¶æ–‡ä»¶]]></title>
    <url>%2F2017%2F10%2F09%2F2018%2FMach-O%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"><![CDATA[åœ¨Unixç³»ç»Ÿä¸­ï¼Œä»»ä½•æ–‡ä»¶éƒ½å¯ä»¥é€šè¿‡chmod+xå‘½ä»¤æ¥æ ‡è®°ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä½†æ˜¯è¿™å¹¶ä¸èƒ½ä¿è¯è¿™ä¸ªæ–‡ä»¶æ˜¯èƒ½å¤Ÿè¢«æ‰§è¡Œçš„ï¼Œè¿™ä¸ªæ ‡å¿—åªæ˜¯å‘Šè¯‰ç³»ç»Ÿè¿™ä¸ªæ–‡ä»¶å¯ä»¥è¯»å…¥å†…å®¹ï¼Œç„¶åŽå¯»æ‰¾ä¸€ä¸ªå¤´ç­¾åï¼Œæ®æ­¤å¯ä»¥ç¡®å®šç²¾ç¡®çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼Œè¿™ä¸ªæ–‡ä»¶ç­¾åé€šå¸¸ç§°ä¸ºâ€magicâ€ã€‚ä¾‹å¦‚: #!è„šæœ¬ 0xcafebabe/0xbebafecaåŒ…å«å¤šç§æž¶æž„æ”¯æŒçš„äºŒè¿›åˆ¶ï¼Œåˆè¢«ç§°ä¸ºé€šç”¨äºŒè¿›åˆ¶æˆ–è€…èƒ–äºŒè¿›åˆ¶ 0xfeedface(32ä½)ï¼Œ0xfeedfacf(64ä½)Mach-Oæ ¼å¼æˆ–è€…å«OSXåŽŸç”ŸäºŒè¿›åˆ¶æ ¼å¼ èƒ–äºŒè¿›åˆ¶é€šç”¨äºŒè¿›åˆ¶åªä¸è¿‡æ˜¯å…¶æ”¯æŒçš„å„ç§æž¶æž„çš„äºŒè¿›åˆ¶æ–‡ä»¶çš„æ‰“åŒ…æ–‡ä»¶ï¼Œè¿™ç§æ ¼å¼çš„æ–‡ä»¶åŒ…å«ä¸€ä¸ªæ–‡ä»¶å¤´ï¼Œç„¶åŽæ–‡ä»¶å¤´åŽé¢ä¾æ¬¡æ‹·è´äº†æ¯ä¸€ç§æ”¯æŒæž¶æž„çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ é€šç”¨äºŒè¿›åˆ¶æ–‡ä»¶çš„å¤„ç†å·¥å…·å«åšlipoè„‚è‚ªçš„æ„æ€ï¼Œå¯¹åº”èƒ–äºŒè¿›åˆ¶çš„æ„æ€ è¿™ä¸ªå·¥å…·å¯ä»¥æå–ï¼Œåˆ é™¤å’Œæ›¿æ¢é€šç”¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­åˆ¶å®šæž¶æž„çš„äºŒè¿›åˆ¶ä»£ç ï¼Œå› æ­¤å¯ä»¥é€šè¿‡è¿™ä¸ªå·¥å…·å¯¹äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œç˜¦èº« Mach-Oé¦–å…ˆçœ‹mach_headerotool -hV JDMobile12345Mach headermagic cputype cpusubtype caps filetype ncmds sizeofcmds flagsMH_MAGIC_64 ARM64 ALL 0x00 EXECUTE 68 7464 NOUNDEFS DYLDLINK TWOLEVEL WEAK_DEFINES BINDS_TO_WEAK PIE magicé­”æ•°ä»£è¡¨32æˆ–è€…64ä½ cputypeå’Œsubcuptypeä»£è¡¨cupç±»åž‹ filetypeä»£è¡¨æ–‡ä»¶ç±»åž‹(å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåº“æ–‡ä»¶ï¼Œæ ¸å¿ƒè½¬å‚¨æ–‡ä»¶ï¼Œå†…æ ¸æ‰©å±•) ncmdså’Œsizeofcmdsç”¨äºŽåŠ è½½çš„å®¶åœ¨å‘½ä»¤çš„æ¡æ•°å’Œå¤§å° flagsä»£è¡¨åŠ¨æ€è¿žæŽ¥å™¨(dyld)çš„æ ‡å¿— åˆ†æžæ–¹æ³•stingsotoolnm otool12345678910111213141516171819202122232425262728293031-f print the fat headers-a print the archive header-h print the mach header-l print the load commands-L print shared libraries used #ä½¿ç”¨åˆ°çš„åº“-D print shared library id name #æ”¯æŒçš„æž¶æž„arm64 armv7-t print the text section (disassemble with -v)#æŸ¥çœ‹æ•°æ®æ®µï¼ŒåŸºæœ¬æ— ç”¨-p &lt;routine name&gt; start dissassemble from routine name#æ— ç”¨-s &lt;segname&gt; &lt;sectname&gt; print contents of section-d print the data section-o print the Objective-C segment-r print the relocation entries-S print the table of contents of a library-T print the table of contents of a dynamic shared library-M print the module table of a dynamic shared library-R print the reference table of a dynamic shared library-I print the indirect symbol table-H print the two-level hints table-G print the data in code table-v print verbosely (symbolically) when possible-V print disassembled operands symbolically-c print argument strings of a core file-X print no leading addresses or headers-m don&apos;t use archive(member) syntax-B force Thumb disassembly (ARM objects only)-q use llvm&apos;s disassembler (the default)-Q use otool(1)&apos;s disassembler-mcpu=arg use `arg&apos; as the cpu for disassembly-j print opcode bytes-P print the info plist section as strings-C print linker optimization hints ç˜¦èº«å®žæˆ˜12345678910111213141516171819202122232425262728293031323334# Address Size Segment Section0x1000070C0 0x02C814F0 __TEXT __text0x102C885B0 0x00005C58 __TEXT __stubs0x102C8E208 0x0000420C __TEXT __stub_helper0x102C92420 0x002C8B1F __TEXT __const0x102F5AF3F 0x0012A102 __TEXT __objc_methname0x103085050 0x0017170F __TEXT __cstring0x1031F6760 0x000120F8 __TEXT __ustring0x103208858 0x0002402D __TEXT __objc_classname0x10322C885 0x00028B82 __TEXT __objc_methtype0x103255408 0x000C4E54 __TEXT __gcc_except_tab0x10331A25C 0x00055918 __TEXT __unwind_info0x10336FB78 0x00000464 __TEXT __eh_frame0x103370000 0x00001910 __DATA __got0x103371910 0x00003D90 __DATA __la_symbol_ptr0x1033756A0 0x00000438 __DATA __mod_init_func0x103375AE0 0x000DF810 __DATA __const0x1034552F0 0x000BA100 __DATA __cfstring0x10350F3F0 0x0000BAB0 __DATA __objc_classlist0x10351AEA0 0x00000428 __DATA __objc_nlclslist0x10351B2C8 0x00001120 __DATA __objc_catlist0x10351C3E8 0x000000C0 __DATA __objc_nlcatlist0x10351C4A8 0x000015E0 __DATA __objc_protolist0x10351DA88 0x00000008 __DATA __objc_imageinfo0x10351DA90 0x004ECB80 __DATA __objc_const0x103A0A610 0x00047820 __DATA __objc_selrefs0x103A51E30 0x00000148 __DATA __objc_protorefs0x103A51F78 0x0000AA08 __DATA __objc_classrefs0x103A5C980 0x00007DC8 __DATA __objc_superrefs0x103A64748 0x0001E8A0 __DATA __objc_ivar0x103A82FE8 0x00074B30 __DATA __objc_data0x103AF7B20 0x002FCC08 __DATA __data0x103DF4740 0x00489580 __DATA __bss0x10427E000 0x000AD71C __DATA __common æŸ¥çœ‹æ‰€æœ‰ç¼–è¯‘è¿›åŽ»çš„æ–¹æ³•nm JDMobile 12 æŸ¥çœ‹æ‰€æœ‰è¢«ä½¿ç”¨çš„æ–¹æ³•otool -v -s __DATA __objc_selrefs JDMobile-build-beta-s æ˜¯è¯´æˆ‘è¦çœ‹è¿™ä¸ªsegä¸‹çš„è¿™ä¸ªsection-v æ˜¯è¯´å°½å¯èƒ½å±•ç¤ºå¯è¯†åˆ«å†…å®¹ GetFileInfo filename| grep modifiedæŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯ï¼ŒåŒ…æ‹¬ directory: â€œ/Users/jrmacpro/Library/Developer/Xcode/DerivedData/JDFinance-eqeqtaeyecxhiqgogjuodubajlyt/Build/Products/Beta-iphoneos/JDMobile.appâ€ attributes: avbstclinmedz created: 10/18/2017 12:55:09 modified: 10/18/2017 12:59:11 nmçš„ä½¿ç”¨nm [option(s)] [file(s)]æœ‰ç”¨çš„options: -A åœ¨æ¯ä¸ªç¬¦å·ä¿¡æ¯çš„å‰é¢æ‰“å°æ‰€åœ¨å¯¹è±¡æ–‡ä»¶åç§°ï¼› -C è¾“å‡ºdemangleè¿‡äº†çš„ç¬¦å·åç§°ï¼› -D æ‰“å°åŠ¨æ€ç¬¦å·ï¼› -l ä½¿ç”¨å¯¹è±¡æ–‡ä»¶ä¸­çš„è°ƒè¯•ä¿¡æ¯æ‰“å°å‡ºæ‰€åœ¨æºæ–‡ä»¶åŠè¡Œå·ï¼› -n æŒ‰ç…§åœ°å€/ç¬¦å·å€¼æ¥æŽ’åºï¼› -u æ‰“å°å‡ºé‚£äº›æœªå®šä¹‰çš„ç¬¦å·ï¼› å¸¸è§çš„ç¬¦å·ç±»åž‹: 1234567A è¯¥ç¬¦å·çš„å€¼åœ¨ä»ŠåŽçš„é“¾æŽ¥ä¸­å°†ä¸å†æ”¹å˜ï¼›B è¯¥ç¬¦å·æ”¾åœ¨BSSæ®µä¸­ï¼Œé€šå¸¸æ˜¯é‚£äº›æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼›D è¯¥ç¬¦å·æ”¾åœ¨æ™®é€šçš„æ•°æ®æ®µä¸­ï¼Œé€šå¸¸æ˜¯é‚£äº›å·²ç»åˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼›T è¯¥ç¬¦å·æ”¾åœ¨ä»£ç æ®µä¸­ï¼Œé€šå¸¸æ˜¯é‚£äº›å…¨å±€éžé™æ€å‡½æ•°ï¼›U è¯¥ç¬¦å·æœªå®šä¹‰è¿‡ï¼Œéœ€è¦è‡ªå…¶ä»–å¯¹è±¡æ–‡ä»¶ä¸­é“¾æŽ¥è¿›æ¥ï¼›W æœªæ˜Žç¡®æŒ‡å®šçš„å¼±é“¾æŽ¥ç¬¦å·ï¼›åŒé“¾æŽ¥çš„å…¶ä»–å¯¹è±¡æ–‡ä»¶ä¸­æœ‰å®ƒçš„å®šä¹‰å°±ç”¨ä¸Šï¼Œå¦åˆ™å°±ç”¨ä¸€ä¸ªç³»ç»Ÿç‰¹åˆ«æŒ‡å®šçš„é»˜è®¤å€¼ã€‚ æ³¨æ„å‡ ç‚¹ï¼š-C æ€»æ˜¯é€‚ç”¨äºŽc++ç¼–è¯‘å‡ºæ¥çš„å¯¹è±¡æ–‡ä»¶ã€‚è¿˜è®°å¾—c++ä¸­æœ‰é‡è½½ä¹ˆï¼Ÿä¸ºäº†åŒºåˆ†é‡è½½å‡½æ•°ï¼Œc++ç¼–è¯‘å™¨ä¼šå°†å‡½æ•°è¿”å›žå€¼/å‚æ•°ç­‰ä¿¡æ¯é™„åŠ åˆ°å‡½æ•°åç§°ä¸­åŽ»å½¢æˆä¸€ä¸ªmangleè¿‡çš„ç¬¦å·ï¼Œé‚£ç”¨è¿™ä¸ªé€‰é¡¹åˆ—å‡ºç¬¦å·çš„æ—¶å€™ï¼Œåšä¸€ä¸ªé€†æ“ä½œï¼Œè¾“å‡ºé‚£äº›åŽŸå§‹çš„ã€æˆ‘ä»¬å¯ç†è§£çš„ç¬¦å·åç§°ã€‚ä½¿ç”¨ -l æ—¶ï¼Œå¿…é¡»ä¿è¯ä½ çš„å¯¹è±¡æ–‡ä»¶ä¸­å¸¦æœ‰ç¬¦å·è°ƒå¼ä¿¡æ¯ï¼Œè¿™ä¸€èˆ¬è¦æ±‚ä½ åœ¨ç¼–è¯‘çš„æ—¶å€™æŒ‡å®šä¸€ä¸ª -g é€‰é¡¹ï¼Œè§ Linux:Gccã€‚ä½¿ç”¨nmå‰ï¼Œæœ€å¥½å…ˆç”¨Linux:FileæŸ¥çœ‹å¯¹è±¡æ–‡ä»¶æ‰€å±žå¤„ç†å™¨æž¶æž„ï¼Œç„¶åŽå†ç”¨ç›¸åº”äº¤å‰ç‰ˆæœ¬çš„nmå·¥å…·ã€‚]]></content>
      <tags>
        <tag>iOSè¿›é˜¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[otoolä½œç”¨ä»¥åŠä½¿ç”¨]]></title>
    <url>%2F2017%2F09%2F28%2F2018%2Fotool%E4%BD%9C%E7%94%A8%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[é¦–å…ˆæ¥çœ‹çœ‹é‚£äº›å‘½ä»¤ -h print the mach headeræ‰“å°å¤´éƒ¨]]></content>
      <tags>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[findä¸Žgrepå‘½ä»¤]]></title>
    <url>%2F2017%2F09%2F22%2F2017%2Ffind%E5%91%BD%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[åŒºåˆ« findå‘½ä»¤æ˜¯æ ¹æ®æ–‡ä»¶çš„å±žæ€§è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æ–‡ä»¶åï¼Œæ–‡ä»¶å¤§å°ï¼Œæ‰€æœ‰è€…ï¼Œæ‰€å±žç»„ï¼Œæ˜¯å¦ä¸ºç©ºï¼Œè®¿é—®æ—¶é—´ï¼Œä¿®æ”¹æ—¶é—´ç­‰ã€‚ grepæ˜¯æ ¹æ®æ–‡ä»¶çš„å†…å®¹è¿›è¡ŒæŸ¥æ‰¾ï¼Œä¼šå¯¹æ–‡ä»¶çš„æ¯ä¸€è¡ŒæŒ‰ç…§ç»™å®šçš„æ¨¡å¼(patter)è¿›è¡ŒåŒ¹é…æŸ¥æ‰¾ã€‚ findåŸºæœ¬æ ¼å¼ï¼šfind path expression æŒ‰ç…§æ–‡ä»¶åæŸ¥æ‰¾ find / -name httpd.conf #åœ¨æ ¹ç›®å½•ä¸‹æŸ¥æ‰¾æ–‡ä»¶httpd.confï¼Œè¡¨ç¤ºåœ¨æ•´ä¸ªç¡¬ç›˜æŸ¥æ‰¾ find /etc -name httpd.conf #åœ¨/etcç›®å½•ä¸‹æ–‡ä»¶httpd.conf find /etc -name &#39;*srm*&#39; #ä½¿ç”¨é€šé…ç¬¦*(0æˆ–è€…ä»»æ„å¤šä¸ª)ã€‚è¡¨ç¤ºåœ¨/etcç›®å½•ä¸‹æŸ¥æ‰¾æ–‡ä»¶åä¸­å«æœ‰å­—ç¬¦ä¸²â€˜srmâ€™çš„æ–‡ä»¶ find . -name &#39;srm*&#39; #è¡¨ç¤ºå½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾æ–‡ä»¶åå¼€å¤´æ˜¯å­—ç¬¦ä¸²â€˜srmâ€™çš„æ–‡ä»¶ æŒ‰ç…§æ–‡ä»¶ç‰¹å¾æŸ¥æ‰¾ find / -amin -10 # æŸ¥æ‰¾åœ¨ç³»ç»Ÿä¸­æœ€åŽ10åˆ†é’Ÿè®¿é—®çš„æ–‡ä»¶(access time) find / -atime -2 # æŸ¥æ‰¾åœ¨ç³»ç»Ÿä¸­æœ€åŽ48å°æ—¶è®¿é—®çš„æ–‡ä»¶ find / -empty # æŸ¥æ‰¾åœ¨ç³»ç»Ÿä¸­ä¸ºç©ºçš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ find / -group cat # æŸ¥æ‰¾åœ¨ç³»ç»Ÿä¸­å±žäºŽ groupä¸ºcatçš„æ–‡ä»¶ find / -mmin -5 # æŸ¥æ‰¾åœ¨ç³»ç»Ÿä¸­æœ€åŽ5åˆ†é’Ÿé‡Œä¿®æ”¹è¿‡çš„æ–‡ä»¶(modify time) find / -mtime -1 #æŸ¥æ‰¾åœ¨ç³»ç»Ÿä¸­æœ€åŽ24å°æ—¶é‡Œä¿®æ”¹è¿‡çš„æ–‡ä»¶ find / -user fred #æŸ¥æ‰¾åœ¨ç³»ç»Ÿä¸­å±žäºŽfredè¿™ä¸ªç”¨æˆ·çš„æ–‡ä»¶ find / -size +10000c #æŸ¥æ‰¾å‡ºå¤§äºŽ10000000å­—èŠ‚çš„æ–‡ä»¶(c:å­—èŠ‚ï¼Œw:åŒå­—ï¼Œk:KBï¼ŒM:MBï¼ŒG:GB) find / -size -1000k #æŸ¥æ‰¾å‡ºå°äºŽ1000KBçš„æ–‡ä»¶ ä½¿ç”¨æ··åˆæŸ¥æ‰¾æ–¹å¼æŸ¥æ‰¾æ–‡ä»¶å‚æ•°æœ‰ï¼š ï¼ï¼Œ-and(-a)ï¼Œ-or(-o)ã€‚ find /tmp -size +10000c -and -mtime +2 #åœ¨/tmpç›®å½•ä¸‹æŸ¥æ‰¾å¤§äºŽ10000å­—èŠ‚å¹¶åœ¨æœ€åŽ2åˆ†é’Ÿå†…ä¿®æ”¹çš„æ–‡ä»¶ find / -user fred -or -user george #åœ¨/ç›®å½•ä¸‹æŸ¥æ‰¾ç”¨æˆ·æ˜¯fredæˆ–è€…georgeçš„æ–‡ä»¶æ–‡ä»¶ find /tmp ! -user panda #åœ¨/tmpç›®å½•ä¸­æŸ¥æ‰¾æ‰€æœ‰ä¸å±žäºŽpandaç”¨æˆ·çš„æ–‡ä»¶ grepgrep &#39;^[0-9]&#39; text.txtè¿”å›žä»¥æ•°å­—å¼€å¤´çš„è¡Œgrep &#39;@&#39; text.txtè¿”å›žåŒ…å«@çš„è¡Œ]]></content>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[c++ stringç”¨æ³•]]></title>
    <url>%2F2017%2F09%2F06%2F2017%2Fc-string%E7%94%A8%E6%B3%95%2F</url>
    <content type="text"><![CDATA[C++ stringçš„ç”¨æ³•å’Œä¾‹å­(è½¬)Markä¸€ä¸‹ä½¿ç”¨åœºåˆï¼šstringæ˜¯C++æ ‡å‡†åº“çš„ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ï¼Œä¸»è¦ç”¨äºŽå­—ç¬¦ä¸²å¤„ç†ã€‚å¯ä»¥ä½¿ç”¨è¾“å…¥è¾“å‡ºæµæ–¹å¼ç›´æŽ¥è¿›è¡Œæ“ä½œï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ–‡ä»¶ç­‰æ‰‹æ®µè¿›è¡Œæ“ä½œã€‚åŒæ—¶C++çš„ç®—æ³•åº“å¯¹stringä¹Ÿæœ‰ç€å¾ˆå¥½çš„æ”¯æŒï¼Œè€Œä¸”stringè¿˜å’Œcè¯­è¨€çš„å­—ç¬¦ä¸²ä¹‹é—´æœ‰ç€è‰¯å¥½çš„æŽ¥å£ã€‚è™½ç„¶ä¹Ÿæœ‰ä¸€äº›å¼Šç«¯ï¼Œä½†æ˜¯ç‘•ä¸æŽ©ç‘œã€‚å…¶ä¸­ä½¿ç”¨çš„ä»£ç å¤šæ•°éƒ½æ˜¯æ¥è‡ªcppå®˜ç½‘ï¼Œå› ä¸ºä¾‹å­éžå¸¸å…¨ã€‚ å£°æ˜Žå’Œåˆå§‹åŒ–æ–¹æ³•ï¼šæƒ³ä½¿ç”¨stringé¦–å…ˆè¦åœ¨å¤´æ–‡ä»¶å½“ä¸­åŠ å…¥&lt; string &gt;å£°æ˜Žæ–¹å¼ä¹Ÿå¾ˆç®€å• å£°æ˜Žï¼š12string s;//å£°æ˜Žä¸€ä¸ªstring å¯¹è±¡string ss[10];//å£°æ˜Žä¸€ä¸ªstringå¯¹è±¡çš„æ•°ç»„ åˆå§‹åŒ–ï¼šä½¿ç”¨ç­‰å·çš„åˆå§‹åŒ–å«åšæ‹·è´åˆå§‹åŒ–ï¼Œä¸ä½¿ç”¨ç­‰å·çš„åˆå§‹åŒ–å«åšç›´æŽ¥åˆå§‹åŒ–ã€‚ 123456789101112131415161718192021222324252627#include &lt;bits/stdc++.h&gt;using namespace std;int main()&#123; ios::sync_with_stdio(false); string s;//é»˜è®¤åˆå§‹åŒ–ï¼Œä¸€ä¸ªç©ºå­—ç¬¦ä¸² string s1(&quot;ssss&quot;);//s1æ˜¯å­—é¢å€¼â€œssssâ€çš„å‰¯æœ¬ string s2(s1);//s2æ˜¯s1çš„å‰¯æœ¬ string s3=s2;//s3æ˜¯s2çš„å‰¯æœ¬ string s4(10,&apos;c&apos;);//æŠŠs4åˆå§‹åŒ– string s5=&quot;hiya&quot;;//æ‹·è´åˆå§‹åŒ– string s6=string(10,&apos;c&apos;);//æ‹·è´åˆå§‹åŒ–ï¼Œç”Ÿæˆä¸€ä¸ªåˆå§‹åŒ–å¥½çš„å¯¹è±¡ï¼Œæ‹·è´ç»™s6 //string s(cp,n) char cs[]=&quot;12345&quot;; string s7(cs,3);//å¤åˆ¶å­—ç¬¦ä¸²csçš„å‰3ä¸ªå­—ç¬¦åˆ°så½“ä¸­ //string s(s2,pos2) string s8=&quot;asac&quot;; string s9(s8,2);//ä»Žs2çš„ç¬¬äºŒä¸ªå­—ç¬¦å¼€å§‹æ‹·è´ï¼Œä¸èƒ½è¶…è¿‡s2çš„size //string s(s2,pos2,len2) string s10=&quot;qweqweqweq&quot;; string s11(s10,3,4);//s4æ˜¯s3ä»Žä¸‹æ ‡3å¼€å§‹4ä¸ªå­—ç¬¦çš„æ‹·è´ï¼Œè¶…è¿‡s3.sizeå‡ºçŽ°æœªå®šä¹‰ return 0;&#125; å­—ç¬¦ä¸²å¤„ç†ï¼šsubstræ“ä½œï¼šæ³¨æ„substræ²¡æœ‰è¿­ä»£å™¨ä½œä¸ºå‚æ•°çš„æ“ä½œ 123456789101112131415#include &lt;bits/stdc++.h&gt;using namespace std;int main()&#123; ios::sync_with_stdio(false); string s=&quot;abcdefg&quot;; //s.substr(pos1,n)è¿”å›žå­—ç¬¦ä¸²ä½ç½®ä¸ºpos1åŽé¢çš„nä¸ªå­—ç¬¦ç»„æˆçš„ä¸² string s2=s.substr(1,5);//abcde //s.substr(pos)//å¾—åˆ°ä¸€ä¸ªposåˆ°ç»“å°¾çš„ä¸² string s3=s.substr(4);//efg return 0;&#125; å¦‚æžœè¾“å…¥çš„ä½ç½®è¶…è¿‡å­—ç¬¦çš„é•¿åº¦ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªout_of_rangeçš„å¼‚å¸¸ insertæ“ä½œ:ä»£ç æ¥è‡ªcppå®˜ç½‘ï¼Œç»è¿‡è‡ªå·±çš„æ•´ç†æ³¨æ„ç”¨è¿­ä»£å™¨å½“å‚æ•°å’Œæ— ç¬¦å·æ•°å½“å‚æ•°çš„åŒºåˆ« 123456789101112131415161718192021222324252627282930313233343536#include &lt;bits/stdc++.h&gt;using namespace std;int main()&#123; ios::sync_with_stdio(false); string str=&quot;to be question&quot;; string str2=&quot;the &quot;; string str3=&quot;or not to be&quot;; string::iterator it; //s.insert(pos,str)//åœ¨sçš„posä½ç½®æ’å…¥str str.insert(6,str2); // to be the question //s.insert(pos,str,a,n)åœ¨sçš„posä½ç½®æ’å…¥strä¸­æ’å…¥ä½ç½®aåˆ°åŽé¢çš„nä¸ªå­—ç¬¦ str.insert(6,str3,3,4); // to be not the question //s.insert(pos,cstr,n)//åœ¨posä½ç½®æ’å…¥cstrå­—ç¬¦ä¸²ä»Žå¼€å§‹åˆ°åŽé¢çš„nä¸ªå­—ç¬¦ str.insert(10,&quot;that is cool&quot;,8); // to be not that is the question //s.insert(pos,cstr)åœ¨sçš„posä½ç½®æ’å…¥cstr str.insert(10,&quot;to be &quot;); // to be not to be that is the question //s.insert(pos,n,ch)åœ¨s.posä½ç½®ä¸Šé¢æ’å…¥nä¸ªch str.insert(15,1,&apos;:&apos;); // to be not to be: that is the question //s.insert(s.it,ch)åœ¨sçš„itæŒ‡å‘ä½ç½®å‰é¢æ’å…¥ä¸€ä¸ªå­—ç¬¦chï¼Œè¿”å›žæ–°æ’å…¥çš„ä½ç½®çš„è¿­ä»£å™¨ it = str.insert(str.begin()+5,&apos;,&apos;); // to be, not to be: that is the question //s.insert(s.it,n,ch)//åœ¨sçš„itæ‰€æŒ‡å‘ä½ç½®çš„å‰é¢æ’å…¥nä¸ªch str.insert (str.end(),3,&apos;.&apos;); // to be, not to be: that is the question... //s.insert(it,str.ita,str.itb)åœ¨itæ‰€æŒ‡å‘çš„ä½ç½®çš„å‰é¢æ’å…¥[ita,itb)çš„å­—ç¬¦ä¸² str.insert (it+2,str3.begin(),str3.begin()+3); // to be, or not to be: that is the question... return 0;&#125; eraseæ“ä½œï¼šç”¨æ¥æ‰§è¡Œåˆ é™¤æ“ä½œåˆ é™¤æ“ä½œæœ‰ä¸‰ç§ æŒ‡å®šposå’Œlenï¼Œå…¶ä¸­posä¸ºä¸ºèµ·å§‹ä½ç½®ï¼Œposä»¥åŠåŽé¢len-1ä¸ªå­—ç¬¦ä¸²éƒ½åˆ é™¤è¿­ä»£å™¨ï¼Œåˆ é™¤è¿­ä»£å™¨æŒ‡å‘çš„å­—ç¬¦è¿­ä»£å™¨èŒƒå›´ï¼Œåˆ é™¤è¿™ä¸€èŒƒå›´çš„å­—ç¬¦ä¸²ï¼ŒèŒƒå›´å·¦é—­å³å¼€ä»£ç æ¥è‡ªcppå®˜ç½‘ 1234567891011121314151617181920212223#include &lt;iostream&gt;#include &lt;string&gt;int main ()&#123; std::string str (&quot;This is an example sentence.&quot;); std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;; // &quot;This is an example sentence.&quot; str.erase (10,8); // ^^^^^^^^ //ç›´æŽ¥æŒ‡å®šåˆ é™¤çš„å­—ç¬¦ä¸²ä½ç½®ç¬¬åä¸ªåŽé¢çš„8ä¸ªå­—ç¬¦ std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;; // &quot;This is an sentence.&quot; str.erase (str.begin()+9);// ^ //åˆ é™¤è¿­ä»£å™¨æŒ‡å‘çš„å­—ç¬¦ std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;; // &quot;This is a sentence.&quot; // ^^^^^ str.erase (str.begin()+5, str.end()-9); //åˆ é™¤è¿­ä»£å™¨èŒƒå›´çš„å­—ç¬¦ std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;; // &quot;This sentence.&quot; return 0;&#125; appendå’Œreplaceæ“ä½œ:appendå‡½æ•°å¯ä»¥ç”¨æ¥åœ¨å­—ç¬¦ä¸²çš„æœ«å°¾è¿½åŠ å­—ç¬¦å’Œå­—ç¬¦ä¸²ã€‚ç”±äºŽstringé‡è½½äº†è¿ç®—ç¬¦ï¼Œä¹Ÿå¯ä»¥ç”¨+=æ“ä½œå®žçŽ°repalceé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ›¿æ¢çš„æ„æ€ï¼Œå…ˆåˆ é™¤ï¼ŒåŽå¢žåŠ ã€‚ä»£ç æ¥è‡ªcppå®˜ç½‘ï¼Œé™„ä¸Šè‡ªå·±çš„è§£é‡Š 12345678910111213141516171819202122232425262728#include &lt;iostream&gt;#include &lt;string&gt;int main ()&#123; std::string str; std::string str2=&quot;Writing &quot;; std::string str3=&quot;print 10 and then 5 more&quot;; //ç›´æŽ¥è¿½åŠ ä¸€ä¸ªstr2çš„å­—ç¬¦ä¸² str.append(str2); // &quot;Writing &quot; //åŽé¢è¿½åŠ str3ç¬¬6ä¸ªå­—ç¬¦å¼€å§‹çš„3ä¸ªå­—ç¬¦ä¸² str.append(str3,6,3); // &quot;10 &quot; //è¿½åŠ å­—ç¬¦ä¸²å½¢å‚çš„å‰5ä¸ªå­—ç¬¦ str.append(&quot;dots are cool&quot;,5); // &quot;dots &quot; //ç›´æŽ¥æ·»åŠ  str.append(&quot;here: &quot;); // &quot;here: &quot; //æ·»åŠ 10ä¸ª&apos;.&apos; str.append(10u,&apos;.&apos;); // &quot;..........&quot; //æ·»åŠ str3è¿­ä»£å™¨èŒƒå›´çš„å­—ç¬¦ä¸² str.append(str3.begin()+8,str3.end()); // &quot; and then 5 more&quot; //æœ€åŽè¿™ä¸ªæ¯”è¾ƒç‰¹æ®Šï¼Œæ„æ€æ˜¯æ·»åŠ 5ä¸ª&apos;A&apos;ï¼Œå®žé™…ä¸Šå‚æ•°é‡Œé¢çš„65å¯¹åº”çš„ascç å°±æ˜¯65 str.append&lt;int&gt;(5,65); // &quot;.....&quot; //å­—ç¬¦ä¸²è¿½åŠ ä¹Ÿå¯ä»¥ç”¨é‡è½½è¿ç®—ç¬¦å®žçŽ° str+=&quot;lalala&quot;; std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;; return 0;&#125; replaceçš„ä½¿ç”¨æ–¹æ³•ï¼Œreplaceæ”¯æŒä½¿ç”¨æ— ç¬¦å·æ•´æ•°å¯»æ‰¾ä½ç½®ï¼Œä¹Ÿæ”¯æŒç”¨è¿­ä»£å™¨å¯»æ‰¾ä½ç½® 12345678910111213141516171819202122232425262728293031323334#include &lt;iostream&gt;#include &lt;string&gt;int main ()&#123; std::string base=&quot;this is a test string.&quot;; std::string str2=&quot;n example&quot;; std::string str3=&quot;sample phrase&quot;; std::string str4=&quot;useful.&quot;; // replace signatures used in the same order as described above: // Using positions: 0123456789*123456789*12345 std::string str=base; // &quot;this is a test string.&quot; //ç¬¬9ä¸ªå­—ç¬¦ä»¥åŠåŽé¢çš„4ä¸ªå­—ç¬¦è¢«str2ä»£æ›¿ str.replace(9,5,str2); // &quot;this is an example string.&quot; (1) //ç¬¬19ä¸ªå­—ç¬¦ä¸²ä»¥åŠåŽé¢çš„5ä¸ªå­—ç¬¦ç”¨strçš„ç¬¬7ä¸ªå­—ç¬¦ä»¥åŠåŽé¢çš„5ä¸ªå­—ç¬¦ä»£æ›¿ str.replace(19,6,str3,7,6); // &quot;this is an example phrase.&quot; (2) //ç¬¬8ä¸ªå­—ç¬¦ä»¥åŠåŽé¢çš„9ä¸ªå­—ç¬¦ç”¨å­—ç¬¦ä¸²å‚æ•°ä»£æ›¿ str.replace(8,10,&quot;just a&quot;); // &quot;this is just a phrase.&quot; (3) //ç¬¬8ä¸ªå­—ç¬¦ä»¥åŠåŽé¢çš„5ä¸ªå­—ç¬¦ç”¨å­—ç¬¦ä¸²å‚æ•°çš„å‰7ä¸ªå­—ç¬¦æ›¿æ¢ str.replace(8,6,&quot;a shorty&quot;,7); // &quot;this is a short phrase.&quot; (4) //ç¬¬22ä»¥åŠåŽé¢çš„0ä¸ªå­—ç¬¦ç”¨3ä¸ªå¹å·æ›¿æ¢ str.replace(22,1,3,&apos;!&apos;); // &quot;this is a short phrase!!!&quot; (5) //è¿­ä»£å™¨çš„åŽŸç†åŒä¸Š // Using iterators: 0123456789*123456789* str.replace(str.begin(),str.end()-3,str3); // &quot;sample phrase!!!&quot; (1) str.replace(str.begin(),str.begin()+6,&quot;replace&quot;); // &quot;replace phrase!!!&quot; (3) str.replace(str.begin()+8,str.begin()+14,&quot;is coolness&quot;,7); // &quot;replace is cool!!!&quot; (4) str.replace(str.begin()+12,str.end()-4,4,&apos;o&apos;); // &quot;replace is cooool!!!&quot; (5) str.replace(str.begin()+11,str.end(),str4.begin(),str4.end());// &quot;replace is useful.&quot; (6) std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;; return 0;&#125; ä»¥ä¸Šçš„replaceæ“ä½œå¯ä»¥ç”¨insertå’Œeraseçš„æ“ä½œç»„åˆæ›¿æ¢ï¼Œä½†æ˜¯replaceæ“ä½œæ›´åŠ æ–¹ä¾¿ã€‚ assignæ“ä½œï¼šassignæ“ä½œåœ¨ä¸€èµ·åˆ—å®¹å™¨å½“ä¸­éƒ½å­˜åœ¨ï¼Œæ¯”å¦‚vectorç­‰ç­‰ã€‚æ˜¯ä¸€ä¸ªå¾ˆåŸºæœ¬çš„æ“ä½œå‡½æ•°ï¼Œstringä½¿ç”¨assignå¯ä»¥çµæ´»çš„å¯¹å…¶è¿›è¡Œèµ‹å€¼ã€‚ä»£ç æ¥è‡ªcppå®˜ç½‘ 123456789101112131415161718192021222324252627282930313233#include &lt;iostream&gt;#include &lt;string&gt;int main ()&#123; std::string str; std::string base=&quot;The quick brown fox jumps over a lazy dog.&quot;; // used in the same order as described above: //ç›´æŽ¥æŠŠbaseèµ‹å€¼ç»™str str.assign(base); std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;; //æŠŠbaseç¬¬10ä¸ªå­—ç¬¦ä»¥åŠåŽé¢çš„8ä¸ªå­—ç¬¦èµ‹ç»™str str.assign(base,10,9); std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;; // &quot;brown fox&quot; //æŠŠå‚æ•°ä¸­çš„0åˆ°6ä¸ªå­—ç¬¦ä¸²èµ‹ç»™str str.assign(&quot;pangrams are cool&quot;,7); std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;; // &quot;pangram&quot; //ç›´æŽ¥ä½¿ç”¨å‚æ•°èµ‹å€¼ str.assign(&quot;c-string&quot;); std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;; // &quot;c-string&quot; //ç»™strèµ‹å€¼10ä¸ª&apos;*&apos;å­—ç¬¦ str.assign(10,&apos;*&apos;); std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;; // &quot;**********&quot; //èµ‹å€¼æ˜¯10ä¸ª&apos;-&apos; str.assign&lt;int&gt;(10,0x2D); std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;; // &quot;----------&quot; //æŒ‡å®šbaseè¿­ä»£å™¨èŒƒå›´çš„å­—ç¬¦ä¸² str.assign(base.begin()+16,base.end()-12); std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;; // &quot;fox jumps over&quot; return 0;&#125; stringçš„æœç´¢æ“ä½œ:stringç±»ä¸­æä¾›äº†å¾ˆå¤šæ€§èƒ½ä¼˜ç§€ï¼Œä½¿ç”¨æ–¹ä¾¿çš„æˆå‘˜æ–¹æ³•ã€‚è€Œä¸”åœ¨æ³›åž‹ç®—æ³•å½“ä¸­ä¹Ÿæœ‰å¾ˆå¤šå®žç”¨çš„æŠ€å·§ã€‚ findå’Œrfindå‡½æ•°: findå‡½æ•°ä¸»è¦æ˜¯æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åœ¨è°ƒç”¨çš„å­—ç¬¦ä¸²ä¸­å‡ºçŽ°è¿‡ï¼Œå¤§å°å†™æ•æ„Ÿã€‚ä»£ç æ¥è‡ªcppå®˜ç½‘ 1234567891011121314151617181920212223242526272829303132#include &lt;bits/stdc++.h&gt;using namespace std;int main()&#123; ios::sync_with_stdio(false); std::string str (&quot;There are two needles in this haystack with needles.&quot;); std::string str2 (&quot;needle&quot;); // different member versions of find in the same order as above: //åœ¨strå½“ä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå‡ºçŽ°çš„needleï¼Œæ‰¾åˆ°åˆ™è¿”å›žå‡ºçŽ°çš„ä½ç½®ï¼Œå¦åˆ™è¿”å›žç»“å°¾ std::size_t found = str.find(str2); if (found!=std::string::npos) std::cout &lt;&lt; &quot;first &apos;needle&apos; found at: &quot; &lt;&lt; found &lt;&lt; &apos;\n&apos;; //åœ¨strå½“ä¸­ï¼Œä»Žç¬¬found+1çš„ä½ç½®å¼€å§‹æŸ¥æ‰¾å‚æ•°å­—ç¬¦ä¸²çš„å‰6ä¸ªå­—ç¬¦ found=str.find(&quot;needles are small&quot;,found+1,6); if (found!=std::string::npos) std::cout &lt;&lt; &quot;second &apos;needle&apos; found at: &quot; &lt;&lt; found &lt;&lt; &apos;\n&apos;; //åœ¨strå½“ä¸­æŸ¥æ‰¾å‚æ•°ä¸­çš„å­—ç¬¦ä¸² found=str.find(&quot;haystack&quot;); if (found!=std::string::npos) std::cout &lt;&lt; &quot;&apos;haystack&apos; also found at: &quot; &lt;&lt; found &lt;&lt; &apos;\n&apos;; //æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦ found=str.find(&apos;.&apos;); if (found!=std::string::npos) std::cout &lt;&lt; &quot;Period found at: &quot; &lt;&lt; found &lt;&lt; &apos;\n&apos;; //ç»„åˆä½¿ç”¨ï¼ŒæŠŠstr2ç”¨å‚æ•°è¡¨ä¸­çš„å­—ç¬¦ä¸²ä»£æ›¿ // let&apos;s replace the first needle: str.replace(str.find(str2),str2.length(),&quot;preposition&quot;); std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;; return 0;&#125; rfindå‡½æ•°å°±æ˜¯æ‰¾æœ€åŽä¸€ä¸ªå‡ºçŽ°çš„åŒ¹é…å­—ç¬¦ä¸²ï¼Œè¿”å›žçš„ä½ç½®ä»ç„¶æ˜¯ä»Žå‰å¾€åŽæ•°çš„ã€‚ 12345678910111213141516171819#include &lt;bits/stdc++.h&gt;using namespace std;int main()&#123; ios::sync_with_stdio(false); std::string str (&quot;The sixth sick sheik&apos;s sixth sheep&apos;s sick.&quot;); std::string key (&quot;sixth&quot;);// ^ //rfindæ˜¯æ‰¾æœ€åŽä¸€ä¸ªå‡ºçŽ°çš„åŒ¹é…å­—ç¬¦ä¸² std::size_t found = str.rfind(key); if (found!=std::string::npos) &#123; cout&lt;&lt;found&lt;&lt;endl;//è¾“å‡º23 str.replace (found,key.length(),&quot;seventh&quot;);//æ‰¾åˆ°çš„sixthæ›¿æ¢æˆseventh &#125; std::cout &lt;&lt; str &lt;&lt; &apos;\n&apos;; return 0;&#125; æŸ¥æ‰¾çš„æ•ˆçŽ‡éžå¸¸é«˜ï¼Œæˆ‘æ²¡çœ‹è¿‡stlæºç å‰–æžï¼Œä½†æ˜¯æ„Ÿè§‰æ˜¯ç”¨kmpå®žçŽ°çš„ã€‚å‘µå‘µï¼Œå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªã€‚ find_â€¦.ofå‡½æ•°: find_first_of(args) æŸ¥æ‰¾argsä¸­ä»»ä½•ä¸€ä¸ªå­—ç¬¦ç¬¬ä¸€æ¬¡å‡ºçŽ°çš„ä½ç½®find_last_of(args) æœ€åŽä¸€ä¸ªå‡ºçŽ°çš„ä½ç½®find_fist_not_of(args) æŸ¥æ‰¾ç¬¬ä¸€ä¸ªä¸åœ¨argsä¸­çš„å­—ç¬¦find_last_not_of æŸ¥æ‰¾æœ€åŽä¸€ä¸ªä¸åœ¨argsä¸­å‡ºçŽ°çš„å­—ç¬¦ 1234567891011121314151617181920212223242526#include &lt;bits/stdc++.h&gt;using namespace std;int main()&#123; ios::sync_with_stdio(false); std::string str1 (&quot;Please, replace the vowels in this sentence by asterisks.&quot;); std::size_t found1 = str1.find_first_of(&quot;aeiou&quot;); //æŠŠæ‰€æœ‰å…ƒéŸ³æ‰¾å‡ºæ¥ç”¨*ä»£æ›¿ while (found1!=std::string::npos) &#123; str1[found1]=&apos;*&apos;; found1=str1.find_first_of(&quot;aeiou&quot;,found1+1); &#125; std::cout &lt;&lt; str1 &lt;&lt; &apos;\n&apos;; //åœ¨str2ä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸æ˜¯æ¶ˆåè‹±æ–‡å­—æ¯å’Œç©ºæ ¼çš„å­—ç¬¦ std::string str2 (&quot;look for non-alphabetic characters...&quot;); std::size_t found2 = str2.find_first_not_of(&quot;abcdefghijklmnopqrstuvwxyz &quot;); if (found2!=std::string::npos) &#123; std::cout &lt;&lt; &quot;The first non-alphabetic character is &quot; &lt;&lt; str2[found2]; std::cout &lt;&lt; &quot; at position &quot; &lt;&lt; found2 &lt;&lt; &apos;\n&apos;; &#125; return 0;&#125; find_last_ofå’Œfind_last_not_ofä¸ŽfirståŸºæœ¬ç›¸åŒï¼Œå°±ä¸å†™ä¾‹å­ä»£ç äº†ã€‚ æ¯”è¾ƒä¸Žè½¬æ¢: ç±»ä¼¼cè¯­è¨€çš„å­—ç¬¦ä¸²æ¯”è¾ƒå‡½æ•°strcmpå‡½æ•°ä¸€æ ·ï¼Œæ”¯æŒå­—ç¬¦ä¸²æ¯”è¾ƒæ“ä½œï¼ŒåŒæ—¶ä¹Ÿç±»ä¼¼pythonã€C#è¯­è¨€ä¸­çš„å‡½æ•°ä¸€æ ·ï¼Œæ”¯æŒæŠŠæ•°å­—å’Œå­—ç¬¦ä¸²è½¬æ¢ã€‚æœ‰äº›ç‰¹æ€§æ˜¯C++11å½“ä¸­æ‰æœ‰ã€‚æ³¨æ„ç¼–è¯‘å™¨bugï¼šåœ¨MinGWç¼–è¯‘å™¨å½“ä¸­å¦‚æžœç‰ˆæœ¬ä½ŽäºŽ3.8ï¼Œè™½ç„¶æ”¯æŒc++11ä½†æ˜¯é‡Œé¢æœ‰ä¸€ä¸ªbugï¼Œå°±æ˜¯ä¸æ”¯æŒå­—ç¬¦ä¸²å’Œæ•°ç»„çš„è½¬æ¢ï¼è¦æ›´æ–°MinGWçš„ç‰ˆæœ¬æ‰å¯ä»¥ï¼Œæˆ–è€…ç›´æŽ¥ä½¿ç”¨g++ã€‚ compareå‡½æ•°:å’Œstrcmpå‡½æ•°ä¸€æ ·ï¼Œå¦‚æžœä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ï¼Œé‚£ä¹ˆè¿”å›ž0ï¼Œè°ƒç”¨å¯¹è±¡å¤§äºŽå‚æ•°è¿”å›ž1ï¼Œå°äºŽè¿”å›ž-1ã€‚åœ¨compareå½“ä¸­è¿˜æ”¯æŒéƒ¨åˆ†æ¯”è¾ƒï¼Œé‡Œé¢æœ‰6ä¸ªå‚æ•°å¯ä»¥è®¾ç½®ã€‚ 12345678910111213141516171819202122232425262728293031#include &lt;bits/stdc++.h&gt;using namespace std;int main()&#123; ios::sync_with_stdio(false); string s1=&quot;123&quot;,s2=&quot;123&quot;; cout&lt;&lt;s1.compare(s2)&lt;&lt;endl;//0 s1=&quot;123&quot;,s2=&quot;1234&quot;; cout&lt;&lt;s1.compare(s2)&lt;&lt;endl;//-1 s1=&quot;1234&quot;,s2=&quot;123&quot;; cout&lt;&lt;s1.compare(s2)&lt;&lt;endl;//1 std::string str1 (&quot;green apple&quot;); std::string str2 (&quot;red apple&quot;); if (str1.compare(str2) != 0) std::cout &lt;&lt; str1 &lt;&lt; &quot; is not &quot; &lt;&lt; str2 &lt;&lt; &apos;\n&apos;; //str1çš„ç¬¬6ä¸ªå­—ç¬¦ä»¥åŠåŽé¢çš„4ä¸ªå­—ç¬¦å’Œå‚æ•°æ¯”è¾ƒ if (str1.compare(6,5,&quot;apple&quot;) == 0) std::cout &lt;&lt; &quot;still, &quot; &lt;&lt; str1 &lt;&lt; &quot; is an apple\n&quot;; if (str2.compare(str2.size()-5,5,&quot;apple&quot;) == 0) std::cout &lt;&lt; &quot;and &quot; &lt;&lt; str2 &lt;&lt; &quot; is also an apple\n&quot;; //str1çš„ç¬¬6ä¸ªå­—ç¬¦ä»¥åŠåŽé¢çš„4ä¸ªå­—ç¬¦å’Œstr2çš„ç¬¬4ä¸ªå­—ç¬¦ä»¥åŠåŽé¢çš„4ä¸ªå­—ç¬¦æ¯”è¾ƒ if (str1.compare(6,5,str2,4,5) == 0) std::cout &lt;&lt; &quot;therefore, both are apples\n&quot;; return 0;&#125; ç”±äºŽstringé‡è½½äº†è¿ç®—ç¬¦ï¼Œå¯ä»¥ç›´æŽ¥ç”¨&gt;,&lt;ï¼Œ==æ¥è¿›è¡Œæ¯”è¾ƒï¼Œä¹Ÿå¾ˆæ–¹ä¾¿ã€‚ æ•°å€¼è½¬æ¢ï¼šåœ¨ioçš„éƒ¨åˆ†æœ‰è¿‡æ•°å€¼å’Œå­—ç¬¦ä¸²ç›¸äº’è½¬æ¢çš„ä¾‹å­ï¼Œä½¿ç”¨çš„æ˜¯stringstreamå‡½æ•°ï¼Œåœ¨c++11å½“ä¸­æœ‰å®šä¹‰å¥½çš„çŽ°æˆçš„å‡½æ•°å–è°ƒç”¨ï¼Œéžå¸¸æ–¹ä¾¿ã€‚ stringå’Œæ•°å€¼è½¬æ¢to_string(val) æŠŠvalè½¬æ¢æˆstringstoi(s,p,b) æŠŠå­—ç¬¦ä¸²sä»Žpå¼€å§‹è½¬æ¢æˆbè¿›åˆ¶çš„intstol(s,p,b) longstoul(s,p,b) unsigned longstoll(s,p,b) long longstoull(s,p,b) unsigned long longstof(s,p) floatstod(s,p) doublestold(s,p) long double//æ³¨æ„ï¼Œä¸‹æ®µä»£ç åœ¨MinGwä¸­ä¼šæŠ¥é”™ï¼å³ä½¿ä½¿ç”¨c++11ç¼–è¯‘ä¹Ÿä¸€æ ·ï¼Œæ— æ³•è¯†åˆ«to_stringï¼ 1234567891011121314#include &lt;bits/stdc++.h&gt;using namespace std;int main()&#123; ios::sync_with_stdio(false); string s1; s1=to_string(100); cout&lt;&lt;s1&lt;&lt;endl; int a=stoi(s1,0,10)+1; cout&lt;&lt;a&lt;&lt;endl; return 0;&#125;]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[clangæ’ä»¶å¼€å‘]]></title>
    <url>%2F2017%2F09%2F05%2F2017%2Fclang%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%2F</url>
    <content type="text"><![CDATA[èµ„æºå‡†å¤‡&amp;&amp;ç¼–è¯‘æºæ–‡ä»¶æˆ‘ä»¬éœ€è¦llvmå’Œclangçš„æºæ–‡ä»¶ï¼Œè€Œä¸”è¿™äº›æ–‡ä»¶éƒ½å­˜åœ¨äºŽgithubä¸Šï¼Œæˆ‘ä»¬å¦‚æžœç›´æŽ¥ä»Žgithubä¸‹è½½ä¼šå¾ˆæ…¢ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥æ˜¯åˆ¶ä½œå›½å†…æºã€‚ åˆ¶ä½œå›½å†…æºhttp://jingyan.baidu.com/article/f79b7cb367e72e9145023e40.html è¿˜æœ‰å°±æ˜¯ä¸è¦æŠŠè¿™äº›æºæ–‡ä»¶æ”¾åˆ°ä¸€äº›éœ€è¦æƒé™æ‰§è¡Œçš„æ–‡ä»¶é‡Œï¼Œè¿™æ ·åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä½ ä¼šå‘çŽ°å„ç§é—®é¢˜ã€‚ ä¸‹è½½æºç çš„æ—¶å€™æ³¨æ„ç‚¹å°±æ˜¯è¦å¯¹ç…§ä½ çš„xcodeçš„ç‰ˆæœ¬:https://trac.macports.org/wiki/XcodeVersionInfo ç„¶åŽæ‰¾åˆ°å¯¹åº”çš„clangç‰ˆæœ¬https://opensource.apple.com/source/clang/clang-800.0.42.1/src/configure.auto.html ç»è¿‡å¯¹æ¯”æˆ‘ä»¬å‘çŽ°æˆ‘ä»¬éœ€è¦çš„æ˜¯39ç‰ˆæœ¬ æ¯”å¦‚çŽ°åœ¨æˆ‘ä»¬åœ¨ä¸€ä¸ªå«åšGitHubçš„æ–‡ä»¶å¤¹ä¸‹éå»ºç«‹äº†ä¸€ä¸ªå«åšllvmçš„æ–‡ä»¶æŒ‰ç…§é¡ºåºæ‰§è¡Œä»¥åŽä»£ç ï¼š 1234567891011121314cd GitHubsudo mkdir llvmsudo chown `whoami` llvmcd llvmexport LLVM_HOME=`pwd`git clone -b release_39 https://git.coding.net/hanshenghui/llvm.git llvmgit clone -b release_39 https://git.coding.net/hanshenghui/clangnew.git llvm/tools/clanggit clone -b release_39 https://git.coding.net/hanshenghui/clang-tools-extra.git llvm/tools/clang/tools/extragit clone -b release_39 https://git.coding.net/hanshenghui/compiler-rt.git llvm/projects/compiler-rtmkdir llvm_buildcd llvm_buildcmake -G Xcode ../llvm -DCMAKE_BUILD_TYPE:STRING=MinSizeRel æœ€åŽä¸€å¥cmake -G Xcodeæ˜¯å…³é”®ï¼Œç”¨è¿™ç§æ–¹å¼cmakeçš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨Xcodeæ¥ç¼–è¯‘åŽè¾¹çš„å·¥ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åŽä½ ä¼šå‘çŽ°ï¼Œåœ¨llvm_buildè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹è¾¹ä½ ä¼šå‘çŽ°æœ‰ä¸€ä¸ªLLVM.xcodeprojçš„æ–‡ä»¶ï¼Œæœ‰äº†è¿™ä¸ªæˆ‘ä»¬å¯ä»¥åƒiOSå¼€å‘æ ·åŽ»ç¼–è¯‘ä»»ä½•ä¸€ä¸ªåº“äº† ç¼–å†™æ’ä»¶ä»£ç  è¿›å…¥æ–‡ä»¶/llvm/tools/clang/examplesåœ¨é‡Œé¢æ–°å»ºä¸€ä¸ªç›®å½•å¦‚MyPlugin ç„¶åŽä¿®æ”¹exampleç›®å½•çš„CMakeLists.txtæ–‡ä»¶ï¼Œæ·»åŠ ä¸€é¡¹ï¼š 1add_subdirectory(MyPlugin) ç„¶åŽè¿›å…¥åˆ›å»ºçš„MyPluginç›®å½•ï¼Œç”Ÿæˆä¸‰ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ï¼š 123CodingStyleUtil.hppMyPlugin.cppCMakeLists.txt CMakeLists.txtä¸­çš„å†…å®¹ï¼š12345678910add_llvm_loadable_module(MyPlugin MyPlugin.cpp PLUGIN_TOOL clang)if(LLVM_ENABLE_PLUGINS AND (WIN32 OR CYGWIN)) target_link_libraries(MyPlugin $&#123;cmake_2_8_12_PRIVATE&#125; clangAST clangBasic clangFrontend LLVMSupport )endif() CodingStyleUtil.hppä¸»è¦æ˜¯ä¸€äº›å¤„ç†å­—ç¬¦ä¸²çš„å‡½æ•° MyPlugin.cppè¿™ä¸ªæ–‡ä»¶æ˜¯å…³é”®æ‰€åœ¨ï¼Œå½“æˆ‘ä»¬ç¼–è¯‘æ’ä»¶çš„æ—¶å€™ï¼Œä¸»è¦å°±æ˜¯è¿™é‡Œçš„ä»£ç åœ¨èµ·ä½œç”¨ï¼Œå…ˆæ¥ä¸ªç®€åŒ–ç‰ˆçš„ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788#include &quot;clang/Frontend/FrontendPluginRegistry.h&quot;#include &quot;clang/AST/AST.h&quot;#include &quot;clang/AST/ASTConsumer.h&quot;#include &quot;clang/Frontend/CompilerInstance.h&quot;#include &quot;clang/AST/RecursiveASTVisitor.h&quot;#include &quot;CodingStyleUtil.hpp&quot;#include &lt;fstream&gt;using namespace clang;using namespace std;using namespace llvm;string gSrcRootPath;static string kClassInterfPrefix = &quot;JR&quot;;static int kMethodParamMaxLen = 15;//static int kMethodParamMaxParamsSingleLine = 3;static int kMethodBodyMaxLines = 500;namespace MyPlugin &#123;class MyPluginVisitor : public RecursiveASTVisitor&lt;MyPluginVisitor&gt;//è¿™é‡Œæˆ‘ä»¬è¦å£°æ˜Žä¸€ä¸ªclassï¼Œè¿™ä¸ªclassæ˜¯ç»§æ‰¿è‡ªRecursiveASTVisitorçš„ï¼Œå¯ä»¥éšä¾¿å–åå­—ï¼Œå°–æ‹¬å·é‡Œè¾¹å°±æ˜¯è¿™ä¸ªvisitorçš„åå­— &#123; private: CompilerInstance &amp;Instance; ASTContext *Context; string objcClsImpl; bool objcIsInstanceMethod; string objcSelector; string objcMethodSrcCode; public: void setASTContext (ASTContext &amp;context)//è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªèƒ½æ–¹æ³•ï¼Œç”¨æ¥ä¾¿æ·çš„å¯¹contextè¿›è¡Œèµ‹å€¼æ“ä½œ &#123; this -&gt; Context = &amp;context; &#125; MyPluginVisitor (CompilerInstance &amp;Instance) :Instance(Instance) &#123; &#125; bool VisitDecl(Decl *decl) &#123;//æ‰€æœ‰çš„å£°æ˜Žåˆ†æžéƒ½éœ€è¦é‡è½½è¿™ä¸ªæ–¹æ³• &#125; &#125;; class MyPluginConsumer : public ASTConsumer &#123; CompilerInstance &amp;Instance; std::set&lt;std::string&gt; ParsedTemplates; public: MyPluginConsumer(CompilerInstance &amp;Instance, std::set&lt;std::string&gt; ParsedTemplates) : Instance(Instance), ParsedTemplates(ParsedTemplates), visitor(Instance) &#123;&#125; bool HandleTopLevelDecl(DeclGroupRef DG) override &#123; return true; &#125; void HandleTranslationUnit(ASTContext&amp; context) override &#123; visitor.setASTContext(context); visitor.TraverseDecl(context.getTranslationUnitDecl()); &#125; private: MyPluginVisitor visitor; &#125;; //è¿™é‡Œæ˜¯æ‰€æœ‰å¤„ç†é€»è¾‘çš„å…¥å£ï¼Œåœ¨è¿™é‡Œè°ƒç”¨äº†consumer class MyPluginASTAction : public PluginASTAction &#123; std::set&lt;std::string&gt; ParsedTemplates; protected: std::unique_ptr&lt;ASTConsumer&gt; CreateASTConsumer(CompilerInstance &amp;CI, llvm::StringRef) override &#123; return llvm::make_unique&lt;MyPluginConsumer&gt;(CI, ParsedTemplates); &#125; bool ParseArgs(const CompilerInstance &amp;CI, const std::vector&lt;std::string&gt; &amp;args) override &#123; return true; &#125; &#125;; çŽ°åœ¨å…ˆå›žåˆ°æºç æ ¹ç›®å½•ï¼Œä½¿ç”¨åŒæ ·çš„cmakeè¯­å¥æ¥æ›´æ–°Xcodeé¡¹ç›®ï¼Œæ›´æ–°å®ŒæˆåŽåŽŸæ¥çš„é¡¹ç›®ä¼šå¤šå‡ºä¸€ä¸ªå«MyPluginçš„æ’ä»¶é¡¹ç›®ï¼Œç„¶åŽå¯¹è¿™ä¸ªæ’ä»¶é¡¹ç›®è¿›è¡Œç¼–è¯‘ã€‚ç¼–è¯‘æˆåŠŸåŽä¼šåœ¨Debug/libç›®å½•ä¸­å¤šå‡ºä¸€ä¸ªåå­—å«åšMyPlugin.dylibæ–‡ä»¶ åªæœ‰è¿™ä¸ªpluginæ–‡ä»¶æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå¯¹åº”çš„clangå’Œclang++ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶æ˜¯å“ªé‡Œæ¥çš„å‘¢ï¼Œç­”æ¡ˆå°±æ˜¯æˆ‘ä»¬è‡ªå·±ç¼–è¯‘çš„ï¼Œè¿™ä¸ªæ’ä»¶å’Œclangç‰ˆæœ¬å¿…é¡»æ˜¯å¯¹åº”çš„ï¼Œå¦åˆ™åœ¨è¿è¡Œå·¥ç¨‹çš„æ—¶å€™å°±ä¼šè¯´symbolä¸å­˜åœ¨ç­‰é”™è¯¯ å®‰è£…è°ƒè¯•æ’ä»¶æ‰“å¼€è¦ä½¿ç”¨æ’ä»¶çš„Xcodeé¡¹ç›®ï¼Œåœ¨build settingsä¸€æ ä¸­å¯¹Other C Flagsä¸€é¡¹è¿›è¡Œç¼–è¾‘ï¼Œè°ƒæ•´ä¸ºï¼š1-Xclang -load -Xclang /Users/han/GitHub/llvm/llvm_build/Debug/lib/MyPlugin.dylib -Xclang -add-plugin -Xclang MyPlugin æ³¨ï¼šæœ€åŽä¸€é¡¹-Xclang MyPluginä¸­çš„MyPluginä¸ºæ’ä»¶åå­—ï¼Œä¸€å®šè¦æ˜¯è‡ªå·±è®¾ç½®çš„æ’ä»¶åç§°ï¼Œå¦åˆ™æ— æ³•è°ƒç”¨æ’ä»¶ è¿™ä¸ªæ—¶å€™è¿è¡Œä½ ä¼šå‘çŽ°æŠ¥é”™ï¼Œerror:unable to load plugin ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜éœ€è¦è°ƒæ•´Xcodeä¸­ä½¿ç”¨çš„Clangç¼–è¯‘å™¨ï¼Œå°†é»˜è®¤çš„ç¼–è¯‘å™¨æ”¹ä¸ºæˆ‘ä»¬è‡ªå·±ç¼–è¯‘å‡ºæ¥çš„ç¼–è¯‘å™¨ã€‚å…·ä½“çš„æ–¹æ³•æ˜¯åœ¨build settingsä¸­å†æ·»åŠ ä¸¤é¡¹è‡ªå®šä¹‰é¡¹ï¼š12CC = /Users/han/GitHub/llvm/llvm_build/Debug/bin/clangCXX = &quot;/Users/han/GitHub/llvm/llvm_build/Debug/bin/clang+ clangæ’ä»¶ä½œç”¨èŒƒå›´]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®ç»“æž„ç®—æ³•-æ¦‚è®º]]></title>
    <url>%2F2017%2F07%2F17%2F2018%2F%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95-%E6%A6%82%E8%AE%BA%2F</url>
    <content type="text"><![CDATA[ç»ªè®º ç®—æ³•ä¸ä¸€å®šæ˜¯ç¨‹åºï¼Œç®—æ³•éœ€è¦æœ‰ç©·æ€§ ç®—æ³•ç»„é‡è¦çš„æ˜¯æ•ˆçŽ‡ï¼Œé€Ÿåº¦å°½å¯èƒ½å¿«ï¼Œå­˜å‚¨ç©ºé—´å°½å¯èƒ½å°‘ DSA æ–¹æ³•è®º å¦‚æžœé—®é¢˜å®žä¾‹æœ‰å¾ˆå¤šï¼Œé‚£ä¹ˆå¾ˆæ˜Žæ˜¾æˆ‘ä»¬æ— æ³•ä¸€ä¸€è§£å†³ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ€è·¯å°±æ˜¯å¯¹é—®é¢˜è¿›è¡Œåˆ†ç±»ï¼Œç„¶åŽåŽ»è§£å†³è¿™ä¸€ç±»é—®é¢˜ å¦‚æžœä½ æƒ³æ”¹è¿›å’Œä¼˜åŒ–ä¸€ä¸ªä¸œè¥¿ï¼Œä½ é¦–å…ˆéœ€è¦èƒ½å¤Ÿå‡†ç¡®çš„æµ‹é‡å®ƒï¼Œä½ éœ€è¦ä¸€æŠŠå°ºå­ å¤æ‚çš„é—®é¢˜åªæœ‰ç®€åŒ–ä¹‹åŽæˆ‘ä»¬æ‰èƒ½æŠ“ä½ä¸»è¦çš„çŸ›ç›¾ï¼Œè€Œç®€åŒ–çš„æ–¹æ³•å°±æ˜¯å¿½ç•¥é‚£äº›ä¸é‡è¦çš„ä¸œè¥¿ åŽ»ç²—å­˜ç²¾ è¿­ä»£ä¹ƒäººå·¥ï¼Œé€’å½’ä¹ƒç¥žé€š å‡¡æ²»ä¼—å¦‚æ²»å¯¡ï¼Œåˆ†è€Œæ²»ä¹‹ å¤æ‚é—®é¢˜åˆ†è§£ä¸ºä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯è§„æ¨¡å‡å°çš„é—®é¢˜ï¼Œå¦ä¸€ä¸ªæ˜¯å¹³å‡¡é—®é¢˜ ç®—æ³•åˆ†æžæ—¶é—´æˆæœ¬å’Œç©ºé—´æˆæœ¬ï¼Œæˆ‘ä»¬æ›´å…³æ³¨æ—¶é—´æˆæœ¬ æ¸è¿›åˆ†æžå¤§Oè®°å·nè¶³å¤Ÿå¤§çš„æ—¶å€™æˆç«‹å°±å¥½ å¸¸æ•°é¡¹å¯å¿½ç•¥ ä½Žæ¬¡é¡¹å¯å¿½ç•¥ å…·ä½“çš„åˆ»åº¦ O(1)ï¼Œå†å¤§çš„å¸¸æ•°éƒ½æ˜¯è¿™ä¸ªå¤æ‚åº¦2023x239238 O(logn) O(n^c)å¤šé¡¹å¼å¤æ‚åº¦ å¤æ‚åº¦åˆ†æžä¸»è¦æ–¹æ³• è¿­ä»£ï¼šçº§æ•°æ±‚å’Œ é€’å½’ï¼šé€’å½’è·Ÿè¸ªå’Œé€’å½’æ–¹ç¨‹ çŒœæµ‹+éªŒè¯ çº§æ•°(è¿­ä»£) ä¼°ç®—ï¼š ä¸€å¤©æ˜¯10^5s ä¸€ä¸–çºªæ˜¯3 x 10^9 æ™®é€šçš„pcä¸€ç§’æ˜¯10^9æ¬¡è¿ç®— æœ€åŽ‰å®³çš„æœºå™¨æ˜¯10^15æ¬¡è¿ç®— é€’å½’(æ›´é«˜çº§çš„åšæ³•ï¼Œä½†æ˜¯æ•ˆçŽ‡ä¸åº”æœ€å¥½)]]></content>
      <tags>
        <tag>æ•°æ®ç»“æž„ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è‡ªç„¶è¯­è¨€å¤„ç†æ¦‚å¿µåŸºç¡€]]></title>
    <url>%2F2017%2F06%2F27%2F2018%2F%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E6%A6%82%E5%BF%B5%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[markAllAsReadSuccessåˆ†è¯ï¼Œè¯é¢‘ï¼Œè¯æ€§ https://m.jr.jd.com/bzx/fillpolicy.html?iteamid=10000103&amp;source=jrm&amp;sid= http://m.jr.jd.com/bzx/fillpolicy.html?iteamid=10000901&amp;source=jrm]]></content>
  </entry>
  <entry>
    <title><![CDATA[itchatä½¿ç”¨æ€»ç»“]]></title>
    <url>%2F2017%2F06%2F14%2F2017%2Fitchat%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[ç™»å½•1itchat.auto_login() æŸ¥æ‰¾å¥½å‹ èŽ·å–ä»»ä½•ä¸€é¡¹ç­‰äºŽnameé”®å€¼çš„ç”¨æˆ·itchat.search_friends(name=â€™littlecodershâ€™)è¿™é‡Œçš„nameæ˜¯RemarkNameâ€™, â€˜NickNameâ€™, â€˜Alias å‘é€ä¸­æ–‡è¦è¿›è¡Œä¸€ä¸ªè½¬æ¢123f = open(path,&apos;r&apos;)text = f.read()text = text.decode(&apos;utf-8&apos;)]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆ©ç”¨hexoæ­å»ºå›¢é˜Ÿåšå®¢ç³»ç»Ÿ]]></title>
    <url>%2F2017%2F06%2F12%2F2018%2F%E5%88%A9%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E5%9B%A2%E9%98%9F%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F%2F</url>
    <content type="text"><![CDATA[hexoæ­å»ºä¸ªäººåšå®¢çš„åŽŸç† å°†mdæ¸²æŸ“ä¸ºhtml å°†htmlä»¥åŠèµ„æºæ–‡ä»¶ä¸Šä¼ åˆ°githubï¼Œåˆ©ç”¨githubpagesåŠŸèƒ½è¿›è¡Œå±•ç¤º è§£æžçš„è¿‡ç¨‹æ˜¯å°†ç›®å½•ä¸‹source/_postæ–‡ä»¶ä¸­çš„ä¸œè¥¿ï¼Œæ¸²æŸ“ä¸ºpublickä¸­çš„htmlæ–‡ä»¶ï¼Œç„¶åŽå°†è¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å¤åˆ¶åˆ°.deploy_gitæ–‡ä»¶ä¸‹ï¼Œç„¶åŽåˆ©ç”¨gitæ“ä½œå°†è¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶pushåˆ°å¯¹åº”çš„gitåº“ ä½¿ç”¨hexoåˆ¶ä½œå›¢é˜Ÿåšå®¢çš„å›°éš¾ å†…ç½‘ä¸èƒ½ç›´æŽ¥ä¾èµ–äºŽgithub å›¢é˜Ÿå¼€å‘çš„æƒé™ç®¡ç†é—®é¢˜ å›¢é˜Ÿå¼€å‘çš„ä½œè€…è¯†åˆ«é—®é¢˜ å›¢é˜Ÿå¼€å‘çš„æ–‡ä»¶å†²çªé—®é¢˜ é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ]]></content>
      <tags>
        <tag>hexo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonå¤šè¿›ç¨‹é€šä¿¡å’Œè°ƒç”¨]]></title>
    <url>%2F2017%2F06%2F12%2F2018%2FPython%E5%A4%9A%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E5%92%8C%E8%B0%83%E7%94%A8%2F</url>
    <content type="text"><![CDATA[pythonå¤šè¿›ç¨‹é€šä¿¡ è¿™é‡Œè§£å†³çš„ä¸»è¦æ˜¯ï¼Œå¦‚æžœæ˜¯å¯åŠ¨ä¸€ä¸ªå‘½ä»¤è¡Œï¼Œç„¶åŽæ‰§è¡Œä¸€ä¸ªpythonè„šæœ¬ï¼Œå¦‚æžœæœ‰å¤šä¸ªpythonè„šæœ¬å°±éœ€è¦å¤šä¸ªå‘½ä»¤è¡Œç¨‹åºï¼Œè¿™ä¸æ˜¯å¾ˆæ˜Žæ™ºçš„é€‰æ‹©ï¼Œæœ€å¥½çš„åšæ³•æ˜¯ï¼Œä¸€ä¸ªå‘½ä»¤è¡Œæžå®šæ‰€æœ‰çš„pythonè„šæœ¬ï¼Œè¿™é‡Œå°±æ¶‰åŠåˆ°ä¸¤ä¸ªé—®é¢˜ å¦‚ä½•åšåˆ°å¹¶å‘ å¦‚ä½•åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªpythonçš„æ‰§è¡Œå…¥å£ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231#coding:utf-8import os,re,timeimport multiprocessing,commands,shutil,subprocessfrom pymongo import MongoClientlock = multiprocessing.Lock()def func(name, processName, pipe): p_info = &apos;Process[%s] hello %s&apos; % (processName, name) print &apos;pipe send: &apos;, p_info pipe.send(p_info) print &apos;sub pid: %d, ppid: %d&apos; % (os.getpid(), os.getppid()) time.sleep(0.1)def serverForPull(name,pipe): path = &apos;/Users/jdjr/Desktop/branches.txt&apos; while True: time.sleep(3) newpath = &apos;/Users/jdjr/Desktop/gradleDir&apos; if os.path.exists(newpath) == True: os.chdir(&apos;/Users/jdjr/Documents/Build/JDJRAPPAndroid&apos;) currentbranch = &apos;&apos; branch = os.popen(&apos;git branch&apos;).read() lines = branch.split(&apos;\n&apos;) for item in lines: if &apos;*&apos; in item: currentbranch = item[2:] p = subprocess.Popen(&quot;gradle assembleDebug&quot;,shell=True,stdout=subprocess.PIPE) indexcount = 0 returncode = p.poll() while returncode is None: text = p.stdout.readline().strip() f = open(&apos;/Users/jdjr/Desktop/buildlog.txt&apos;,&apos;a&apos;) f.write(text) f.close() mc = MongoClient(&quot;localhost&quot;,27017) db = mc.package post_info = db.index dbs = post_info.find(&#123;&apos;branchname&apos;:currentbranch&#125;) count = 0 itemc = &#123;&#125; for itemn in dbs: itemc = itemn count = count + 1 if count == 0: post_info.save(&#123;&apos;branchname&apos;:currentbranch,&apos;count&apos;:indexcount,&apos;time&apos;:0,&apos;lastcount&apos;:0&#125;) else: ctime = itemc[&apos;time&apos;] lastcount = itemc[&apos;lastcount&apos;] if &apos;Total time:&apos; in text: indexnew = text.find(&apos;:&apos;) newtime = text[indexnew + 1:] post_info.update(&#123;&apos;branchname&apos;:currentbranch&#125;,&#123;&apos;branchname&apos;:currentbranch,&apos;count&apos;:indexcount,&apos;time&apos;:newtime,&apos;lastcount&apos;:lastcount&#125;) else: post_info.update(&#123;&apos;branchname&apos;:currentbranch&#125;,&#123;&apos;branchname&apos;:currentbranch,&apos;count&apos;:indexcount,&apos;time&apos;:ctime,&apos;lastcount&apos;:lastcount&#125;) if &apos;BUILD SUCCESSFUL&apos; in text: post_info.update(&#123;&apos;branchname&apos;:currentbranch&#125;,&#123;&apos;branchname&apos;:currentbranch,&apos;count&apos;:0,&apos;time&apos;:ctime,&apos;lastcount&apos;:indexcount&#125;) else: post_info.update(&#123;&apos;branchname&apos;:currentbranch&#125;,&#123;&apos;branchname&apos;:currentbranch,&apos;count&apos;:indexcount,&apos;time&apos;:ctime,&apos;lastcount&apos;:lastcount&#125;) indexcount = indexcount + 1 returncode = p.poll() f1 = open(&apos;/Users/jdjr/Desktop/buildlog.txt&apos;,&apos;r&apos;) texts = f1.read() f1.close() if &apos;BUILD FAILED&apos; in texts: (status, output) = commands.getstatusoutput(&apos;gradle assembleDebug&apos;) f2 = open(&apos;/Users/jdjr/Desktop/buildlog.txt&apos;,&apos;w&apos;) texts = f2.write(output) f2.close() shutil.rmtree(newpath) time.sleep(2) mc = MongoClient(&quot;localhost&quot;,27017) db = mc.package post_info = db.index post_info.update(&#123;&apos;branchname&apos;:currentbranch&#125;,&#123;&apos;branchname&apos;:currentbranch,&apos;count&apos;:20,&apos;time&apos;:0,&apos;lastcount&apos;:indexcount&#125;) if os.path.exists(path): f1 = open(path,&apos;r&apos;) lists = f1.readlines() if len(lists) == 2: dir = lists[0] branch = lists[1] if &apos;JDJRAPPAndroid&apos; in dir: dir = &apos;/Users/jdjr/Documents/Build/JDJRAPPAndroid&apos; if &apos;JDMobileNew&apos; in dir: dir = &apos;/Users/wxg/Documents/JDMobileNew&apos; if len(dir) &gt; 0: print dir os.chdir(dir) (status, output) = commands.getstatusoutput(&apos;git pull origin %s&apos; % branch) f1 = open(&apos;/Users/jdjr/Desktop/buildlog.txt&apos;,&apos;r&apos;) text = f1.read() f1.close() f1 = open(&apos;/Users/jdjr/Desktop/buildlog.txt&apos;,&apos;w&apos;) text1 = text + &apos;\n&apos; + output + &apos;%i&apos; % status f1.write(text1) f1.close() f2 = open(path,&apos;w&apos;) f2.write(&apos;&apos;) f2.close() f1.close()def monitorForBlog(name,pipe): lastTimeStr = &apos;&apos; while True: time.sleep(3) os.chdir(&apos;/Users/jdjr/Documents/Blog/blogsource&apos;) # os.chdir(&apos;/usr/local/var/www&apos;) (status, output) = commands.getstatusoutput(&apos;git pull origin blog&apos;) (status, output) = commands.getstatusoutput(&apos;git log&apos;) f = open(&apos;/Users/jdjr/Documents/Blog/logcommit.txt&apos;,&apos;w&apos;) f.write(output) f.close() f1 = open(&apos;/Users/jdjr/Documents/Blog/logcommit.txt&apos;,&apos;r&apos;) lines = f1.readlines() firstline = lines[0] f1.close() if lastTimeStr != firstline: print &apos;æŽ¨é€ä¸€æ¬¡åšå®¢&apos; sourcepath = &apos;/Users/jdjr/Documents/Blog/blog/source&apos; if os.path.exists(sourcepath): shutil.rmtree(sourcepath) shutil.copytree(&apos;/Users/jdjr/Documents/Blog/blogsource/source&apos;,&apos;/Users/jdjr/Documents/Blog/blog/source&apos;) os.chdir(&apos;/Users/jdjr/Documents/Blog/blog&apos;)# os.popen(&apos;hexo clean&apos;) os.system(&apos;hexo clean&apos;) os.system(&apos;hexo g&apos;) filepath = &apos;/usr/local/var/www&apos; if os.path.exists(filepath): shutil.rmtree(filepath) publicfile = &apos;/Users/jdjr/Documents/Blog/blog/public&apos; while not os.path.exists(publicfile): time.sleep(1)# print &apos;not exist&apos; shutil.move(publicfile,filepath) lastTimeStr = firstline print lastTimeStrdef main(): print &apos;main pid: %d, ppid: %d&apos; % (os.getpid(), os.getppid()) # æ³¨æ„ï¼š æ­¤å¤„æ˜¯Pipeæ¥è‡ªmultiprocessing.Pipe(), å…¶æ¥æºäºŽ multiprocessing.connection import Pipe pipe_parent, pipe_child = multiprocessing.Pipe(duplex=False) processList = []# for i in xrange(4):# pro = multiprocessing.Process(target=func, args=(&apos;ceshi&apos;, &apos;Process-&apos; + str(10), pipe_child))# pro.start()# processList.append(pro)# # pro1 = multiprocessing.Process(target=func1, args=(&apos;waha&apos;,pipe_child))# pro1.start()# processList.append(pro1)# # pro2 = multiprocessing.Process(target=func2, args=(&apos;heihei&apos;,pipe_child))# pro2.start()# processList.append(pro2) pro3 = multiprocessing.Process(target=serverForPull, args=(&apos;heihei&apos;,pipe_child)) pro3.start() processList.append(pro3) pro4 = multiprocessing.Process(target=monitorForBlog, args=(&apos;heihei&apos;,pipe_child)) pro4.start() processList.append(pro4) for pro in processList: pro.join() # åœ¨æ­¤å¤„é˜»å¡žå­è¿›ç¨‹ï¼Œå¯å®žçŽ°å¼‚æ­¥æ‰§è¡Œæ•ˆæžœï¼Œç›´è‡³å­è¿›ç¨‹å…¨éƒ¨å®ŒæˆåŽå†ç»§ç»­æ‰§è¡Œçˆ¶è¿›ç¨‹ pipe_child.send(None) # æ­¤å¤„ç­‰å…¨éƒ¨å­è¿›ç¨‹æ‰§è¡Œå®ŒæˆåŽï¼Œè¾“å…¥&apos;None&apos;æ ‡è®°ï¼Œè¡¨ç¤ºPipeç»“æŸæŽ¥æ”¶ä»»åŠ¡ï¼Œå¯ä»¥é€€å‡º while pipe_parent: p_info = pipe_parent.recv() print &apos;pipe get: &apos;, p_info if not p_info: # å¦‚æžœæŽ¥æ”¶åˆ°äº†&apos;None&apos;æ ‡è®°ï¼Œé€€å‡ºPipe print &apos;pipe get: None, then exit out.&apos; break# æµ‹è¯•if __name__ == &apos;__main__&apos;: main() print(&apos;end.&apos;)]]></content>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[macä¸‹ä½¿ç”¨virtualboxå®‰è£…win7ä»¥åŠè®¾ç½®å…±äº«æ–‡ä»¶]]></title>
    <url>%2F2017%2F05%2F25%2F2017%2Fmac%E4%B8%8B%E4%BD%BF%E7%94%A8virtualbox%E5%AE%89%E8%A3%85win7%E4%BB%A5%E5%8F%8A%E8%AE%BE%E7%BD%AE%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[å®‰è£…é¦–å…ˆè¿›å…¥win7-peçŽ¯å¢ƒï¼Œç„¶åŽè¿›è¡Œåˆ†åŒºï¼Œè¿™é‡Œçš„å…³é”®åœ¨äºŽcç›˜è¦å¤§äºŽ10G è®¾ç½®å…±äº«æ–‡ä»¶å¤¹è¦å®žçŽ°macä¸Žwindowsçš„æ–‡ä»¶å…±äº«ï¼Œä¿¡æ¯äº’é€šï¼Œéœ€è¦æœ‰ä¸€ä¸ªéƒ½å¯ä»¥è®¿é—®çš„æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œçš„å…³é”®æ˜¯ï¼Œè¦é¦–å…ˆå®‰è£…virtualboxçš„deviceä¸‹çš„insert Guest Additions CD image]]></content>
      <tags>
        <tag>mac</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºŽDjangoçš„å¹³å°æž„å»ºç¬”è®°(2)]]></title>
    <url>%2F2017%2F05%2F18%2F2017%2F%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E5%B9%B3%E5%8F%B0%E6%9E%84%E5%BB%BA%E7%AC%94%E8%AE%B0(2)%2F</url>
    <content type="text"><![CDATA[pythonä¸­Jsonå­—ç¬¦ä¸²çš„åˆ›å»ºä¸Žjavascriptä¸­jsonå­—ç¬¦ä¸²çš„è½¬æ¢ 1234567891011121314import jsondef getindex(indexname): datas = [] for item in namelist: pes.append(dic) pes = json.dumps(pes) datas.append(pes) datas = json.dumps(datas) return datas ä»”ç»†çœ‹ä¸Šè¾¹è¿™æ®µpythonæˆ‘ä»¬èƒ½å¾—å‡ºæ¥ä¸€ä¸ªç»“è®ºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨jsonè¿™ä¸ªåŠŸèƒ½ï¼Œå°†ä¸€ä¸ªpythonä¸­çš„åˆ—è¡¨ï¼Œè½¬æ¢ä¸ºä¸€æ®µå­—ç¬¦ä¸²ï¼Œç„¶åŽè¿”å›žå‡ºåŽ»ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å°±æ˜¯ä¸€æ®µjsonå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™æ®µjsonå­—ç¬¦ä¸²åè¿‡æ¥è½¬æ¢æˆä¸€ä¸ªæ•°ç»„ ä¸‹é¢æˆ‘ä»¬æ¥çž…çž…ï¼Œå¦‚ä½•å°†ä¸€ä¸ªjsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ªjsonæ•°ç»„ é¦–å…ˆè¯´æ˜ŽåŸºæœ¬åŠŸèƒ½ï¼š dumpsæ˜¯å°†dictè½¬åŒ–æˆstræ ¼å¼ï¼Œloadsæ˜¯å°†strè½¬åŒ–æˆdictæ ¼å¼ã€‚ dumpå’Œloadä¹Ÿæ˜¯ç±»ä¼¼çš„åŠŸèƒ½ï¼Œåªæ˜¯ä¸Žæ–‡ä»¶æ“ä½œç»“åˆèµ·æ¥äº†ã€‚ çœ‹ä»£ç å®žä¾‹ï¼š 1234567891011121314In [1]: import jsonIn [2]: a = &#123;&apos;name&apos;: &apos;wang&apos;, &apos;age&apos;: 29&#125;In [3]: b = json.dumps(a)In [4]: print b, type(b)&#123;&quot;age&quot;: 29, &quot;name&quot;: &quot;wang&quot;&#125; &lt;type &apos;str&apos;&gt;In [11]: json.loads(b)Out[11]: &#123;u&apos;age&apos;: 29, u&apos;name&apos;: u&apos;wang&apos;&#125;In [12]: print type(json.loads(b))&lt;type &apos;dict&apos;&gt; ç„¶åŽå†çœ‹dumpå’Œdumpsçš„åŒºåˆ«ï¼Œè§ä»£ç ï¼š 12345678910111213141516In [1]: import jsonIn [2]: a = &#123;&apos;name&apos;: &apos;wang&apos;, &apos;age&apos;: 29&#125;In [3]: b = json.dumps(a)In [4]: print b, type(b)&#123;&quot;age&quot;: 29, &quot;name&quot;: &quot;wang&quot;&#125; &lt;type &apos;str&apos;&gt;In [5]: c = json.dump(a)---------------------------------------------------------------------------TypeError Traceback (most recent call last)&lt;ipython-input-5-92dc0d929363&gt; in &lt;module&gt;()----&gt; 1 c = json.dump(a)TypeError: dump() takes at least 2 arguments (1 given) è¿™é‡Œæç¤ºæˆ‘ä»¬å°‘ä¸€ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å¸®åŠ©æ–‡ä»¶ï¼ˆiPyhtonä¸­å¯ä»¥ç›´æŽ¥ä½¿ç”¨help(json.dumps)æ¥æŸ¥çœ‹å¸®åŠ©æ–‡ä»¶ï¼‰ï¼š dumps(obj, skipkeys=False, ensure_ascii=True, check_circular=True, allow_nan=True, cls=None, indent=None, separators=None, encoding=â€™utf-8â€™, default=None, sort_keys=False, **kw)Serialize obj to a JSON formatted str. dump(obj, fp, skipkeys=False, ensure_ascii=True, check_circular=True, allow_nan=True, cls=None, indent=None, separators=None, encoding=â€™utf-8â€™, default=None, sort_keys=False, **kw)Serialize obj as a JSON formatted stream to fp (a.write()-supporting file-like object). ç®€å•è¯´å°±æ˜¯dumpéœ€è¦ä¸€ä¸ªç±»ä¼¼äºŽæ–‡ä»¶æŒ‡é’ˆçš„å‚æ•°ï¼ˆå¹¶ä¸æ˜¯çœŸçš„æŒ‡é’ˆï¼Œå¯ç§°ä¹‹ä¸ºç±»æ–‡ä»¶å¯¹è±¡ï¼‰ï¼Œå¯ä»¥ä¸Žæ–‡ä»¶æ“ä½œç»“åˆï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥å°†dictè½¬æˆstrç„¶åŽå­˜å…¥æ–‡ä»¶ä¸­ï¼›è€Œdumpsç›´æŽ¥ç»™çš„æ˜¯strï¼Œä¹Ÿå°±æ˜¯å°†å­—å…¸è½¬æˆstrã€‚ ä¾‹å­è§ä»£ç ï¼ˆæ³¨æ„æ–‡ä»¶æ“ä½œçš„ä¸€äº›å°ç»†èŠ‚ï¼‰ï¼š 12345678910111213141516171819202122232425262728293031323334353637In [1]: import jsonIn [2]: a = &#123;&apos;name&apos;: &apos;wang&apos;&#125;In [3]: fp = file(&apos;test.txt&apos;, &apos;w&apos;)In [4]: type(fp)Out[4]: fileIn [5]: json.dump(a, fp)In [6]: cat test.txtIn [7]: fp.close()In [8]: cat test.txt&#123;&quot;name&quot;: &quot;wang&quot;&#125;In [9]: json.load(fp)---------------------------------------------------------------------------ValueError Traceback (most recent call last)&lt;ipython-input-9-0064dabedb17&gt; in &lt;module&gt;()----&gt; 1 json.load(fp)/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.pyc in load(fp, encoding, cls, object_hook, parse_float, parse_int, parse_constant, object_pairs_hook, **kw)285286 &quot;&quot;&quot;--&gt; 287 return loads(fp.read(),288 encoding=encoding, cls=cls, object_hook=object_hook,289 parse_float=parse_float, parse_int=parse_int,ValueError: I/O operation on closed fileIn [10]: fp = file(&apos;test.txt&apos;, &apos;r&apos;)In [11]: json.load(fp)Out[11]: &#123;u&apos;name&apos;: u&apos;wang&apos;&#125;æ³¨ï¼šå®žé™…ä¸­dumpç”¨çš„è¾ƒå°‘ã€‚ javascriptä¸­å¦‚ä½•å°†ä¸€æ®µjsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºjsonå¯¹è±¡var obj = JSON.parse(data); webä¸­ä¸Šä¼ æ–‡ä»¶ï¼Œå¸¦è¿›åº¦æ¡çš„åšæ³•1234567891011121314&lt;div id=&quot;upload&quot;&gt; &lt;form&gt; &#123;% csrf_token %&#125; &lt;input type=&quot;file&quot; id=&apos;file&apos; class=&apos;file&apos; style=&quot;margin-top: 5px;margin-left: 10px&quot; name=&quot;file&quot;&gt;&lt;br&gt; &lt;div id=&apos;1&apos; style=&quot;margin-top: 40px;margin-left: 10px;height:10px;width:200px;border-color: rgba(110,3,120,1);border:1px solid gray;float:left;margin-right:10px;&quot;&gt; &lt;div id=&apos;2&apos; style=&quot;height:100%;width:0px;background:rgba(220,220,220,1);&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;a style=&quot;position: absolute;top: 72px;;margin-right:25px&quot; id=&apos;3&apos;&gt;0%&lt;/a&gt; &lt;button type=&quot;button&quot; style=&quot;margin-top: 32px;margin-left: 50px;&quot; onclick=&quot;upload();&quot;&gt;ä¸Šä¼ &lt;/button&gt; &lt;/form&gt;&lt;/div&gt; æ˜¯è¦å®šä¹‰ä¸€ä¸ªfile,ä¸‹è¾¹æ˜¯jsçš„ä»£ç ï¼Œæˆ‘ä»¬æ¥å®žçŽ°ä¸Šä¼ åŠŸèƒ½ 12345678910111213141516171819function upload() &#123; var apktextinput = document.getElementById(&apos;apkname&apos;) var apkname = apktextinput.value if (apkname.length == 0) &#123; alert(&apos;è¯·è¾“å…¥è¯ä¹¦åç§°&apos;) return &#125; var xhr = new XMLHttpRequest(); var file = document.getElementById(&apos;file&apos;).files[0]; //å–å¾—æ–‡ä»¶æ•°æ®ï¼Œè€Œ.fileå¯¹è±¡åªæ˜¯æ–‡ä»¶ä¿¡æ¯ var form = new FormData(); //FormDataæ˜¯HTML5ä¸ºå®žçŽ°åºåˆ—åŒ–è¡¨å•è€Œæä¾›çš„ç±»ï¼Œæ›´å¤šç»†èŠ‚å¯è‡ªè¡ŒæŸ¥è¯¢ form.append(&apos;file&apos;,file); //è¿™é‡Œä¸ºåºåˆ—åŒ–è¡¨å•å¯¹è±¡formæ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå³file xhr.upload.addEventListener(&apos;progress&apos;,on_progress,false); //xhrå¯¹è±¡å«æœ‰ä¸€ä¸ªuploadå¯¹è±¡ï¼Œå®ƒæœ‰ä¸€ä¸ªprogressäº‹ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸Šä¼ è¿‡ç¨‹ä¸­ä¼šè¢«ä¸æ–­è§¦å‘ï¼Œæˆ‘ä»¬ä¸ºè¿™ä¸ªäº‹ä»¶å¯¹åº”ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œæ¯å½“äº‹ä»¶è§¦å‘å°±ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼ŒäºŽæ˜¯ä¾¿å¯åˆ©ç”¨è¿™ä¸ªå‡½æ•°æ¥ä¿®æ”¹å½“å‰è¿›åº¦ï¼Œæ›´å¤šç»†èŠ‚å¯è‡ªè¡ŒæŸ¥è¯¢ xhr.open(&apos;POST&apos;,&apos;http://10.13.8.12:89/uploadAPK/&apos;,true); //è¯·å°†urlæ”¹æˆä¸Šä¼ url xhr.setRequestHeader(&apos;X-CSRFTOKEN&apos;,&apos;&#123;&#123; request.COOKIES.csrftoken &#125;&#125;&apos;); //æ­¤å¤„ä¸ºDjangoè¦æ±‚ï¼Œå¯æ— è§†ï¼Œæˆ–è€…æ¢æˆç›¸åº”åŽå°æ‰€è¦æ±‚çš„CSRFé˜²æŠ¤ï¼Œä¸æ˜¯djangoç”¨æˆ·è¯·åŽ»æŽ‰ xhr.send(form); //å‘é€è¡¨å• &#125; é‡ç‚¹æ˜¯xhr.upload.addEventListener(&#39;progress&#39;,on_progress,false);è¿™ä¸ªæ–¹æ³•ä¼šä¿è¯ä¸Šä¼ è¿‡ç¨‹ä¸­ä¸æ–­çš„å›žè°ƒæˆ‘ä»¬æ¥å®žçŽ°on_progress 123456789101112131415161718192021222324252627282930313233343536function on_progress(evt) &#123; //çœ‹è¿™ä¸ªå‡½æ•°ä¹‹å‰å…ˆçœ‹uploadå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥æŽ¥æ”¶ä¸€ä¸ªevt(event)å¯¹è±¡(ç»†èŠ‚è‡ªè¡ŒæŸ¥è¯¢progress)ï¼Œä»–æœ‰3ä¸ªå±žæ€§lengthComputableï¼Œloadedï¼Œtotalï¼Œç¬¬ä¸€ä¸ªå±žæ€§æ˜¯ä¸ªboolç±»åž‹çš„ï¼Œä»£è¡¨æ˜¯å¦æ”¯æŒï¼Œç¬¬äºŒä¸ªä»£è¡¨å½“å‰ä¸Šä¼ çš„å¤§å°ï¼Œç¬¬ä¸‰ä¸ªä¸ºæ€»çš„å¤§å°ï¼Œç”±æ­¤ä¾¿å¯ä»¥è®¡ç®—å‡ºå®žæ—¶ä¸Šä¼ çš„ç™¾åˆ†æ¯” if(evt.lengthComputable) &#123; var ele = document.getElementById(&apos;2&apos;); var percent = Math.round((evt.loaded) * 100 / evt.total); if (percent == 100 &amp;&amp; strongapk == 1) &#123; strongapk = 0 var textcontent = document.getElementById(&quot;wating&quot;) textcontent.style.display = &apos;block&apos; var apktextinput = document.getElementById(&apos;apkname&apos;) var apkname = apktextinput.value $.ajax(&#123; url: &quot;/startstrongapk/&quot;, //åŽå°webserviceé‡Œçš„æ–¹æ³•åç§° data:&#123;&quot;apkname&quot;:apkname&#125;, type: &quot;post&quot;, traditional: true, success: function (data) &#123; downloadurl = data alert(data) $(&quot;#wating&quot;).css(&apos;display&apos;,&apos;none&apos;); if (confirm(&quot;ä½ ç¡®å®šè¦ä¸‹è½½æ–‡ä»¶å—ï¼Ÿ&quot;)) &#123; self.location=(&apos;downloadsdk?url=&apos; + data) &#125; &#125;, error: function (msg) &#123; alert(msg) $(&quot;#wating&quot;).css(&apos;display&apos;,&apos;none&apos;); &#125; &#125;); &#125; ele.style.width = percent + &apos;%&apos;; document.getElementById(&apos;3&apos;).innerHTML = percent + &apos;%&apos;; &#125; &#125; è¿™é‡Œæˆ‘ä»¬åœ¨percentè¾¾åˆ°100ä¹‹åŽï¼Œè°ƒç”¨ajaxåšä¸€äº›äº‹æƒ… djangoä¸­æŽ¥å£è°ƒç”¨çš„æ–¹å¼æ€»ç»“ç½‘ç»œæ–¹æ³•è°ƒç”¨å¤§è‡´æœ‰è¿™ä¹ˆå‡ ç§ ç‚¹å‡»æŒ‰é’®è·³è½¬æ–°é¡µé¢è¿™ç§ç›´æŽ¥ç”¨æ ‡ç­¾ï¼Œç„¶åŽç”¨hrefå°±å¥½ 1&lt;a class=&quot;button&quot; id=&quot;ios&quot; style=&quot;position: absolute;top: 50px;&quot; href=&quot;jinkensios&quot; onmouseover=&quot;showDetailText(this)&quot; onmouseout=&quot;clearTest()&quot;&gt;â— æ‰“åŒ…(iOS)&lt;/a&gt; ç‚¹å‡»æŒ‰é’®åˆ·æ–°å±€éƒ¨æ•°æ®è¿™ç§æœ€å¥½æ˜¯é¢„å…ˆåŸ‹ä¼å¥½ajaxï¼Œç„¶åŽç”¨idç»‘å®šï¼Œç‚¹å‡»ä¹‹åŽç›´æŽ¥è°ƒç”¨12345678$(document).ready(function()&#123; $(&quot;#btn&quot;).click(function()&#123; string = $(&quot;#textarea1&quot;).val() $.get(&quot;/ajaxcreateui/&quot;, &#123;&apos;text&apos;: string&#125;,function(ret)&#123; $(&apos;#textarea2&apos;).html(ret) &#125;) &#125;); &#125;); $(document).ready(function(){}é¢„å…ˆåŸ‹ä¼çš„å†™æ³•è¦å†™åœ¨è¿™å¥ä»£ç é‡Œè¾¹ $(&quot;#btn&quot;).click(function(){}è¿™ä¸ªæ˜¯é¢„å…ˆåŸ‹ä¼ $.get(&quot;/ajaxcreateui/&quot;, {&#39;text&#39;: string},function(ret){}ajaxçš„getè°ƒç”¨ ç›´æŽ¥ä½¿ç”¨XMLHttpRequest123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657var progresshttp;function getprogress() &#123; progresshttp=null; if (window.XMLHttpRequest) &#123;// code for all new browsers progresshttp=new XMLHttpRequest(); &#125; else if (window.ActiveXObject) &#123;// code for IE5 and IE6 progresshttp=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;); &#125; if (progresshttp!=null) &#123; progresshttp.onreadystatechange=progressstate_Change; progresshttp.open(&quot;POST&quot;,&apos;getpackprogress&apos;,false); var formData = new FormData(); formData.append(&apos;branchname&apos;, branchname); progresshttp.send(formData); &#125; else &#123; alert(&quot;Your browser does not support XMLHTTP.&quot;); &#125;&#125;function progressstate_Change()&#123;if (progresshttp.readyState==4) &#123;// 4 = &quot;loaded&quot; if (progresshttp.status==200) &#123;// 200 = OK num = this.responseText var ele = document.getElementById(&apos;12&apos;); var percent = num * 100; percent = percent.toFixed(2) if (percent &gt;= 100.00) &#123; percent = 100.00 &#125; ele.style.width = percent + &apos;%&apos;; document.getElementById(&apos;13&apos;).innerHTML = percent + &apos;%&apos;; if (percent &gt;= 100) &#123; window.clearInterval(waitinterval) ele.style.width = 100 + &apos;%&apos;; var text = document.getElementById(&apos;building&apos;) text.innerHTML = &quot;&quot; &#125; &#125; else &#123; alert(&quot;Problem retrieving XML data&quot;); &#125; &#125;&#125; æ·»åŠ å›žè°ƒçš„æ–¹å¼ xhr.upload.addEventListener(&#39;progress&#39;,on_progress,false);è¿›åº¦æ¡ progresshttp.onreadystatechange=progressstate_Changeäº‹ä»¶å›žè°ƒ æŸä¸ªäº‹ä»¶è°ƒç”¨ç»“æŸåˆ·æ–°å±€éƒ¨æ•°æ®ç›´æŽ¥ä½¿ç”¨ajaxæˆ–è€…XMLHttpRequestå°±å¥½ pythonä¸­è°ƒç”¨å‘½ä»¤è¡Œéšæ—¶è¾“å‡ºçš„åšæ³•12345678910111213p = subprocess.Popen(&quot;gradle assembleDebug&quot;,shell=True,stdout=subprocess.PIPE)indexcount = 0returncode = p.poll()while returncode is None: text = p.stdout.readline().strip() f = open(&apos;/Users/jdjr/Desktop/buildlog.txt&apos;,&apos;a&apos;)#è¿½åŠ æ‰“å¼€æ–¹å¼ f.write(text) f.close() returncode = p.poll()]]></content>
      <tags>
        <tag>python</tag>
        <tag>Django</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mongodbä½¿ç”¨å°ç»“]]></title>
    <url>%2F2017%2F05%2F17%2F2017%2Fmongodb%E4%BD%BF%E7%94%A8%E5%B0%8F%E7%BB%93%2F</url>
    <content type="text"><![CDATA[åˆ›å»ºä¸€ä¸ªmongoæ•°æ®åº“ 123456from pymongo import MongoClientimport json,timeconnection = MongoClient(&quot;localhost&quot;,27017)mydb = connection.mydb # new a databasemyser = mydb.allindex # new a table æŸ¥12345678910111213dicn = &#123;&#125;dicn[&apos;indexname&apos;] = itemdicn[&apos;date&apos;] = dateStringdbs = myser.find(dicn)for item in dbs: dic = &#123;&#125; datestring = item[&apos;date&apos;] datestring = datestring.encode(&apos;utf-8&apos;) dic[&apos;date&apos;] = datestring dic[&apos;earyeild&apos;] = item[&apos;earyeild&apos;] dic[&apos;indexname&apos;] = item[&apos;indexname&apos;] MongoDBæä¾›äº†ä¸€ç»„æ¯”è¾ƒæ“ä½œç¬¦ï¼š$lt/$lte/$gt/$gte/$neï¼Œä¾æ¬¡ç­‰ä»·äºŽ&lt;/&lt;=/&gt;/&gt;=/!=ã€‚ ä¸‹é¢çš„ç¤ºä¾‹è¿”å›žç¬¦åˆæ¡ä»¶age &gt;= 18 &amp;&amp; age &lt;= 40çš„æ–‡æ¡£ã€‚ 12&gt; db.test.find(&#123;&quot;age&quot;:&#123;&quot;$gte&quot;:18, &quot;$lte&quot;:40&#125;&#125;)&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125; ä¸‹é¢çš„ç¤ºä¾‹è¿”å›žæ¡ä»¶ç¬¦åˆname != â€œstephen1â€ 12&gt; db.test.find(&#123;&quot;name&quot;:&#123;&quot;$ne&quot;:&quot;stephen1&quot;&#125;&#125;)&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125; $inç­‰åŒäºŽSQLä¸­çš„inï¼Œä¸‹é¢çš„ç¤ºä¾‹ç­‰åŒäºŽSQLä¸­çš„in (â€œstephenâ€,â€stephen1â€) 12&gt; db.test.find(&#123;&quot;name&quot;:&#123;&quot;$in&quot;:[&quot;stephen&quot;,&quot;stephen1&quot;]&#125;&#125;)&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125; å’ŒSQLä¸åŒçš„æ˜¯ï¼ŒMongoDBçš„in listä¸­çš„æ•°æ®å¯ä»¥æ˜¯ä¸åŒç±»åž‹ã€‚è¿™ç§æƒ…å†µå¯ç”¨äºŽä¸åŒç±»åž‹çš„åˆ«ååœºæ™¯ã€‚ 12&gt; db.test.find(&#123;&quot;name&quot;:&#123;&quot;$in&quot;:[&quot;stephen&quot;,123]&#125;&#125;)&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125; $ninç­‰åŒäºŽSQLä¸­çš„not inï¼ŒåŒæ—¶ä¹Ÿæ˜¯$inçš„å–åã€‚å¦‚ï¼š 12&gt; db.test.find(&#123;&quot;name&quot;:&#123;&quot;$nin&quot;:[&quot;stephen2&quot;,&quot;stephen1&quot;]&#125;&#125;)&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125; $orç­‰åŒäºŽSQLä¸­çš„orï¼Œ$oræ‰€é’ˆå¯¹çš„æ¡ä»¶è¢«æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œæ¯ä¸ªæ•°ç»„å…ƒç´ è¡¨ç¤ºorçš„ä¸€ä¸ªæ¡ä»¶ã€‚ä¸‹é¢çš„ç¤ºä¾‹ç­‰åŒäºŽname = â€œstephen1â€ or age = 35 12&gt; db.test.find(&#123;&quot;$or&quot;: [&#123;&quot;name&quot;:&quot;stephen1&quot;&#125;, &#123;&quot;age&quot;:35&#125;]&#125;)&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125; ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•æ··åˆä½¿ç”¨$orå’Œ$inã€‚ 12&gt; db.test.find(&#123;&quot;$or&quot;: [&#123;&quot;name&quot;:&#123;&quot;$in&quot;:[&quot;stephen&quot;,&quot;stephen1&quot;]&#125;&#125;, &#123;&quot;age&quot;:36&#125;]&#125;)&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125; $notè¡¨ç¤ºå–åï¼Œç­‰åŒäºŽSQLä¸­çš„notã€‚ 12&gt; db.test.find(&#123;&quot;name&quot;: &#123;&quot;$not&quot;: &#123;&quot;$in&quot;:[&quot;stephen2&quot;,&quot;stephen1&quot;]&#125;&#125;&#125;)&#123; &quot;_id&quot; : ObjectId(&quot;4fd58ecbb9ac507e96276f1a&quot;), &quot;name&quot; : &quot;stephen&quot;, &quot;age&quot; : 35,&quot;genda&quot; : &quot;male&quot;, &quot;email&quot; : &quot;stephen@hotmail.com&quot; &#125; å¢ž1myser.save(&#123;&apos;æŒ‡æ•°åç§°&apos;:item,&apos;å¸‚ç›ˆçŽ‡&apos;:pe,&apos;ç›ˆåˆ©æ”¶ç›ŠçŽ‡&apos;:roe,&apos;æ—¥æœŸ&apos;:date,&apos;å¸‚å‡€çŽ‡&apos;:pb,&apos;è‚¡æ¯çŽ‡&apos;:rate&#125;) æ—¶é—´çš„ç”¨æ³•1234567891011121314current = time.localtime(time.time())year = current.tm_yearmonth = current.tm_monday = current.tm_mdayyearStr = &apos;%i&apos; % yearyearList = list(yearStr)yearStr1 = yearList[-1]yearStr2 = yearList[-2]yearStr = yearStr2 + yearStr1monthStr = months[month - 1]targetStr = &apos;idx_%i%s%s&apos; % (day,monthStr,yearStr)]]></content>
      <tags>
        <tag>mongo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå·¥ç¨‹å°çŸ¥è¯†]]></title>
    <url>%2F2017%2F02%2F26%2F2017%2FiOS%E5%B7%A5%E7%A8%8B%E5%B0%8F%E7%9F%A5%E8%AF%86%2F</url>
    <content type="text"><![CDATA[1:å‡ºçŽ°ï¼ˆ linker command failed with exit code 1ï¼‰å¦‚æžœå…·ä½“çš„é”™è¯¯æ˜¯è¿™ä¸ªä¸Žç¬¬ä¸‰æ–¹.aåº“é‡å¤ï¼Œé‚£ä¹ˆè¦æ›´æ”¹çš„æ˜¯ï¼Œç±»åå’Œå…¨å±€å˜é‡çš„åå­— 2.SEGV_ACCERRé”™è¯¯è¯´æ˜Žå¯¹è±¡è¢«è¿‡åº¦é‡Šæ”¾ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰åœ¨=nilä¹‹åŽåˆä½¿ç”¨äº†è¯¥å¯¹è±¡ï¼Œæ¯”å¦‚è¯´è¿™æ®µä»£ç case MessageComposeResultSent: { //ä¿¡æ¯ä¼ é€æˆåŠŸ// [JRMsgShow showMsg:@â€å‘é€æˆåŠŸâ€]; if (self.closeBlock) { self.closeBlock(); } if (self.messageSuccessBlock) { self.messageSuccessBlock(); } [[UIApplication sharedApplication].keyWindow.rootViewController dismissViewControllerAnimated:YES completion:nil]; } å¾ˆæ˜Žæ˜¾å‰è¾¹æˆ‘ä»¬ä½¿ç”¨äº†closeblockï¼Œè¿™ä¸ªblockä¹‹è¡Œä¹‹åŽï¼Œå¾ˆå¿«selfä¼šæ­»æŽ‰ï¼Œè€Œè¿™ä¸ªä¹‹åŽæˆ‘ä»¬åˆä½¿ç”¨äº†self.messageSuccessBlockè¿™æ ·å†æ¬¡ä½¿ç”¨selfï¼Œå¿…ç„¶å¯¼è‡´å´©æºƒï¼Œä¸è¿‡è¿™æ˜¯åœ¨iOS8ä¸Šé¢ï¼Œåœ¨iOS9å’Œ10ä¸Šå°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œè¯´æ˜Žè‹¹æžœåšäº†ç³»ç»Ÿçº§çš„ä¼˜åŒ– 3.å‚æ•°ä¼ é€’å°½é‡è¦ç”¨modelï¼Œå“ªæ€•æ˜¯å›žè°ƒï¼Œå› ä¸ºå¯èƒ½åŽè¾¹ä¼šå¢žåŠ éœ€æ±‚ï¼Œé‚£ä¹ˆå‚æ•°ä¼ é€’å°†ä¼šå˜å¾—å¾ˆæ¶å¿ƒ]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®šæ—¶æ£€æŸ¥ç½‘é¡µæ›´æ–°å¹¶å‘é€å¾®ä¿¡æ¶ˆæ¯]]></title>
    <url>%2F2017%2F02%2F16%2F2017%2F%E5%AE%9A%E6%97%B6%E6%A3%80%E6%9F%A5%E7%BD%91%E9%A1%B5%E6%9B%B4%E6%96%B0%E5%B9%B6%E5%8F%91%E9%80%81%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF%2F</url>
    <content type="text"><![CDATA[123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263# -*- coding: utf-8 -*-import urllib2,time,urllib while True: current = time.localtime(time.time()) year = current.tm_year month = current.tm_mon day = current.tm_mday hour = current.tm_hour minite = current.tm_min sec = current.tm_sec if sec == 0: downLoadStr = &apos;http://www.bjjs.gov.cn/bjjs/fwgl/zzxspzf/index.shtml&apos; print downLoadStr try: i_headers = &#123;&quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.1) Gecko/20090624 Firefox/3.5&quot;,\ &quot;Referer&quot;: &apos;http://www.baidu.com&apos;&#125; req = urllib2.Request(downLoadStr, headers=i_headers) f = urllib2.urlopen(req) data = f.read() date = &apos;&apos; if month &lt; 10 and day &lt; 10: date = &apos;%i-0%i-0%i&apos; % (year, month, day) elif month &gt; 10 and day &lt; 10: date = &apos;%i-%i-0%i&apos; % (year, month, day) elif month &lt; 10 and day &gt; 10: date = &apos;%i-0%i-%i&apos; % (year, month, day) else: date = &apos;%i-%i-%i&apos; % (year, month, day) string = &apos;the web has update http://www.bjjs.gov.cn/bjjs/fwgl/zzxspzf/index.shtml&apos; print date if date in data: f = open(&apos;update.txt&apos;,&apos;w&apos;) f.write(date + string) f.close() print &apos;yes&apos; else: print &apos;no&apos; except Exception,ex: print ex#import itchat##itchat.auto_login()##itchat.send(&apos;Hello, filehelper&apos;, toUserName=&apos;filehelper&apos;)#while True:# f = open(&apos;update.txt&apos;,&apos;r&apos;)# text = f.read()# f.close()# if len(text) != 0:# f = open(&apos;update.txt&apos;,&apos;w&apos;)# f.write(&apos;&apos;)# f.close()# itchat.send(&apos;the web has update http://www.bjjs.gov.cn/bjjs/fwgl/zzxspzf/index.shtml&apos;, toUserName=&apos;Liu647ziqi&apos;)]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æŒ‡æ•°è‡ªåŠ¨èŽ·å–]]></title>
    <url>%2F2017%2F02%2F16%2F2017%2F%E6%8C%87%E6%95%B0%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96%2F</url>
    <content type="text"><![CDATA[123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215# -*- coding: utf-8 -*-import urllib2,time,urllibimport ast,os,sys,stringfrom pymongo import MongoClientmonths = [&apos;Jan&apos;,&apos;Feb&apos;,&apos;Mar&apos;,&apos;Apr&apos;,&apos;May&apos;,&apos;Jun&apos;,&apos;Jul&apos;,&apos;Aug&apos;,&apos;Sep&apos;,&apos;Oct&apos;,&apos;Nov&apos;,&apos;Dec&apos;]dicts = &#123;&apos;zsgz00&apos;:&apos;no&apos;,&apos;zsgz10&apos;:&apos;ä¸Šè¯æŒ‡æ•°&apos;,&apos;zsgz20&apos;:&apos;ä¸Šè¯180&apos;,&apos;zsgz30&apos;:&apos;ä¸Šè¯50&apos;,&apos;zsgz40&apos;:&apos;æ²ªæ·±300&apos;,&apos;zsgz50&apos;:&apos;æ·±è¯æˆæŒ‡&apos;,&apos;zsgz60&apos;:&apos;æ·±è¯100R&apos;,&apos;zsgz70&apos;:&apos;ä¸­å°æ¿æŒ‡&apos;,&apos;zsgz80&apos;:&apos;ä¸Šè¯380&apos;,&apos;zsgz90&apos;:&apos;çº¢åˆ©æŒ‡æ•°&apos;,&apos;zsgz100&apos;:&apos;ä¸­è¯çº¢åˆ©&apos;,&apos;zsgz110&apos;:&apos;ä¸­è¯500&apos;&#125;connection = MongoClient(&quot;localhost&quot;,27017)mydb = connection.mydb # new a databasemyser = mydb.hengsengindex # new a tabledef getindexs(): downLoadStr = &apos;http://www.csindex.com.cn/sseportal/ps/zhs/hqjt/csi/show_zsgz.js&apos; print downLoadStr try: i_headers = &#123;&quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.1) Gecko/20090624 Firefox/3.5&quot;,\ &quot;Referer&quot;: &apos;http://www.baidu.com&apos;&#125; req = urllib2.Request(downLoadStr, headers=i_headers) f = urllib2.urlopen(req) data = f.read() str = data.decode(&apos;gbk&apos;) data = str.encode(&apos;utf-8&apos;) print data listString = data.split(&apos;\n&apos;) date = &apos;&apos; index = 0 for item in listString: if &apos;zsgz00&apos; in item: date = item[12:-2] datelist = list(date) for s in datelist: if s == &apos;-&apos;: datelist.remove(s) date = &apos;&apos;.join(datelist) print date if &apos;0=&apos; in item: pe = listString[index + 1] pb = listString[index + 3] rate = listString[index + 4] indexitem = item.index(&apos;=&apos;) indexpe = pe.index(&apos;=&apos;) indexpb = pb.index(&apos;=&apos;) indexrate = rate.index(&apos;=&apos;) pe = pe[indexpe+2:-2] pb = pb[indexpe+2:-2] rate = rate[indexpe+2:-2] item = item[indexitem+2:-2] print item pe = filter(lambda ch: ch in &apos;.0123456789&apos;, pe) pb = filter(lambda ch: ch in &apos;.0123456789&apos;, pb) rate = filter(lambda ch: ch in &apos;.0123456789&apos;, rate) if len(pe) and len(pb) and len(rate): roaf = float(pe) roe = 1/roaf * 100 dbs = myser.find(&#123;&apos;æŒ‡æ•°åç§°&apos;:item,&apos;æ—¥æœŸ&apos;:date&#125;) count = 0 for item in dbs: count = count + 1 if count == 0: myser.save(&#123;&apos;æŒ‡æ•°åç§°&apos;:item,&apos;å¸‚ç›ˆçŽ‡&apos;:pe,&apos;ç›ˆåˆ©æ”¶ç›ŠçŽ‡&apos;:roe,&apos;æ—¥æœŸ&apos;:date,&apos;å¸‚å‡€çŽ‡&apos;:pb,&apos;è‚¡æ¯çŽ‡&apos;:rate&#125;) index = index + 1 except Exception,ex: print exdef gethenghseng(day,month,year):yearStr = &apos;%i&apos; % yearyearList = list(yearStr)yearStr1 = yearList[-1]yearStr2 = yearList[-2]yearStr = yearStr2 + yearStr1monthStr = months[month - 1]targetStr = &apos;idx_%i%s%s&apos; % (day,monthStr,yearStr)fileName = &apos;/Users/han/Desktop/index/hengsheng/%i%s%s.txt&apos; % (day,monthStr,yearStr)downLoadStr = &apos;http://sc.hangseng.com/gb/www.hsi.com.hk/HSI-Net/static/revamp/contents/en/indexes/report/hsi/&apos; + targetStr + &apos;.csv&apos;print downLoadStrtry:i_headers = &#123;&quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.1) Gecko/20090624 Firefox/3.5&quot;,\&quot;Referer&quot;: &apos;http://www.baidu.com&apos;&#125;req = urllib2.Request(downLoadStr, headers=i_headers)f = urllib2.urlopen(req)data = f.read()f = open(fileName,&apos;wb&apos;)f.write(data)f.close()f1 = open(fileName,&apos;rb&apos;)dataList = f1.readlines()item = dataList[2]list2 = item.split(&apos; &apos;)date = list2[0]index = list2[5]roa = list2[9]date = filter(lambda ch: ch in &apos;0123456789&apos;, date)index = filter(lambda ch: ch in &apos;.0123456789&apos;, index)string = filter(lambda ch: ch in &apos;.0123456789&apos;, roa)roaf = float(string)roe = 1/roaf * 100print dateprint indexdbs = myser.find(&#123;&apos;æŒ‡æ•°åç§°&apos;:&apos;æ’ç”ŸæŒ‡æ•°&apos;,&apos;æ—¥æœŸ&apos;:date&#125;)count = 0for item in dbs:count = count + 1if count == 0:myser.save(&#123;&apos;æŒ‡æ•°åç§°&apos;:&apos;æ’ç”ŸæŒ‡æ•°&apos;,&apos;å¸‚ç›ˆçŽ‡&apos;:roaf,&apos;ç›ˆåˆ©æ”¶ç›ŠçŽ‡&apos;:roe,&apos;æ—¥æœŸ&apos;:date,&apos;æŒ‡æ•°&apos;:index&#125;) # add a recordsaveStr = &apos;%s %f&apos; % (date, roe)f = open(&apos;hengseng.txt&apos;,&apos;r&apos;)data = f.read()f.close()dataStr = data + &apos;\n&apos; + saveStrf = open(&apos;hengseng.txt&apos;,&apos;w&apos;)f.write(dataStr)f.close()except Exception,ex:print exdef gethenghsengchina(day,month,year):yearStr = &apos;%i&apos; % yearyearList = list(yearStr)yearStr1 = yearList[-1]yearStr2 = yearList[-2]yearStr = yearStr2 + yearStr1monthStr = months[month - 1]targetStr = &apos;idx_%i%s%s&apos; % (day,monthStr,yearStr)fileName = &apos;/Users/han/Desktop/index/hengsheng/china%i%s%s.txt&apos; % (day,monthStr,yearStr)downLoadStr = &apos;http://sc.hangseng.com/gb/www.hsi.com.hk/HSI-Net/static/revamp/contents/en/indexes/report/hscei/&apos; + targetStr + &apos;.csv&apos;print downLoadStrtry:i_headers = &#123;&quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.1) Gecko/20090624 Firefox/3.5&quot;,\&quot;Referer&quot;: &apos;http://www.baidu.com&apos;&#125;req = urllib2.Request(downLoadStr, headers=i_headers)f = urllib2.urlopen(req)data = f.read()f = open(fileName,&apos;wb&apos;)f.write(data)f.close()f1 = open(fileName,&apos;rb&apos;)dataList = f1.readlines()item = dataList[2]list2 = item.split(&apos; &apos;)date = list2[0]index = list2[5]roa = list2[9]date = filter(lambda ch: ch in &apos;0123456789&apos;, date)index = filter(lambda ch: ch in &apos;.0123456789&apos;, index)string = filter(lambda ch: ch in &apos;.0123456789&apos;, roa)roaf = float(string)roe = 1/roaf * 100print indexdbs = myser.find(&#123;&apos;æŒ‡æ•°åç§°&apos;:&apos;æ’ç”ŸæŒ‡H&apos;,&apos;æ—¥æœŸ&apos;:date&#125;)count = 0for item in dbs:count = count + 1if count == 0:myser.save(&#123;&apos;æŒ‡æ•°åç§°&apos;:&apos;æ’ç”ŸæŒ‡æ•°H&apos;, &apos;å¸‚ç›ˆçŽ‡&apos;:roaf,&apos;ç›ˆåˆ©æ”¶ç›ŠçŽ‡&apos;:roe,&apos;æ—¥æœŸ&apos;:date,&apos;æŒ‡æ•°&apos;:index&#125;)saveStr = &apos;%s %f&apos; % (date, roe)f = open(&apos;hengsengchina.txt&apos;,&apos;r&apos;)data = f.read()f.close()dataStr = data + &apos;\n&apos; + saveStrf = open(&apos;hengsengchina.txt&apos;,&apos;w&apos;)f.write(dataStr)f.close()except Exception,ex:print exgetindexs()current = time.localtime(time.time())year = current.tm_yearmonth = current.tm_monday = current.tm_mdayindex = 0if month == 12:index = 1index = month - 1day = day - 1# gethenghseng(day,month,year)for month in xrange(1,3):for day in xrange(1,31):gethenghsengchina(day,month,year)gethenghseng(day,month,year)]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çˆ¬è™«ç³»åˆ—]]></title>
    <url>%2F2017%2F02%2F10%2F2017%2F%E7%88%AC%E8%99%AB%E7%B3%BB%E5%88%97%2F</url>
    <content type="text"><![CDATA[è¿™é‡Œä¸»è¦å®žçŽ°çš„æ˜¯åˆ©ç”¨çˆ¬è™«æ¥å®žçŽ°å¯¹å…³æ³¨æŒ‡æ•°åŸºé‡‘çš„ä¼°å€¼æ•°æ®çš„æŠ“å–ï¼Œç„¶åŽè¿›è¡Œä¼°å€¼åˆ†æžï¼Œé…åˆäº‘æœåŠ¡å™¨å¹¶ä¸”æ¯å¤©è¿›è¡ŒæŽ¨é€ã€‚ çˆ¬è™«çš„åŸºæœ¬æ­¥éª¤å¾ˆç®€å•ï¼Œå°†è¯¥ç½‘é¡µçš„jså’Œhtmlå…¨éƒ¨ä¸‹è½½ä¸‹æ¥ï¼Œç„¶åŽä»Žå…¶ä¸­å¯»æ‰¾æœ‰ç”¨çš„ä¿¡æ¯ï¼Œè¿›è€Œå°†æœ‰ç”¨çš„ä¿¡æ¯è¿›è¡Œç»“æž„åŒ–çš„å­˜å‚¨ï¼Œå…¶ä¸­å°†ç½‘é¡µçˆ¬å–ä¸‹æ¥ä½¿ç”¨çš„scrapyï¼Œè€Œå¯»æ‰¾ä¿¡æ¯æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯xpathï¼Œå­˜å‚¨æˆ‘ä»¬ä½¿ç”¨mongo ä½¿ç”¨scrapyæ¡†æž¶ å®‰è£…sudo pip install scrapyæˆ–è€…ç›´æŽ¥ä¸‹è½½æºç ï¼Œè‡ªå·±ç¼–è¯‘*ä¸‹è½½0.24ç‰ˆæœ¬çš„scrapyhttp://scrapy.org/download/ç„¶åŽcd è¿›å…¥è§£åŽ‹åŽçš„æ–‡ä»¶ï¼Œç„¶åŽæ‰§è¡Œsudo python setup.py installå®‰è£…scrapy å¦‚æžœåœ¨ä½¿ç”¨å‘½ä»¤è¡Œè¿‡ç¨‹ä¸­å‘çŽ°sudoä¹‹åŽä»ç„¶æ— æ³•èŽ·å–æƒé™ï¼Œåˆ é™¤æ–‡ä»¶æ—¶ä¼šæç¤ºOperation not permittedï¼Œé‚£å°±å…³æœºé‡å¯ï¼Œç„¶åŽæŒ‰ä½comman+Rï¼Œå¯åŠ¨ä¹‹åŽå¯åŠ¨å‘½ä»¤è¡Œï¼Œè¾“å…¥ï¼Œcsrutil disableå…³é—­rootlesså°±å¯ä»¥äº† scrapy startproject tutorialåˆ›å»ºçˆ¬è™«å·¥ç¨‹ scrapy.cfg: é¡¹ç›®çš„é…ç½®æ–‡ä»¶ tutorial/: è¯¥é¡¹ç›®çš„pythonæ¨¡å—ã€‚ä¹‹åŽæ‚¨å°†åœ¨æ­¤åŠ å…¥ä»£ç ã€‚ tutorial/items.py: é¡¹ç›®ä¸­çš„itemæ–‡ä»¶. tutorial/pipelines.py: é¡¹ç›®ä¸­çš„pipelinesæ–‡ä»¶. tutorial/settings.py: é¡¹ç›®çš„è®¾ç½®æ–‡ä»¶. tutorial/spiders/: æ”¾ç½®spiderä»£ç çš„ç›®å½•. æ–‡ä»¶ä½œç”¨è¯´æ˜Ž items.pyï¼šå®šä¹‰åŽæœŸå¤„ç†çš„æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œåƒä¸€ä¸ªå­—å…¸ settings.pyï¼šé…ç½®scrapyï¼Œä»Žè€Œä¿®æ”¹user-agent,è®¾ç½®çˆ¬å–æ—¶é—´ï¼Œè®¾ç½®ä»£ç†ï¼Œè®¾ç½®ä¸­é—´ä»¶ pipelines.py:ç”¨äºŽå­˜æ”¾æ‰§è¡ŒåŽåŽ»æ•°æ®å¤„ç†çš„åŠŸèƒ½ï¼Œä»Žè€ŒæŠŠçˆ¬å–ä¸Žå¤„ç†åˆ†å¼€itemæˆåŠŸèŽ·å–æ•°æ®ä¹‹åŽï¼Œå®ƒä¼šé€åˆ°pipelineï¼Œè®©pipelineå¯¹æ•°æ®è¿›è¡Œå¤„ç† è¿è¡Œå·¥ç¨‹ï¼šscrapyç›®å‰åªèƒ½ä½¿ç”¨å‘½ä»¤è¡Œæ¥è¿è¡Œscrapy crawl demoè¿™é‡Œè¦æ³¨æ„çš„æ˜¯åŽè¾¹çš„è¿™ä¸ªdemoè¿™ä¸ªåå­—ä¸æ˜¯éšä¾¿æ¥çš„ï¼Œspiderè¿™ä¸ªæ–‡ä»¶å‘½åè¦æ˜¯demo_spideræ‰å¯ä»¥ xpathçš„ä½¿ç”¨ç”¨åˆ°çš„å·¥å…·ï¼š ç«ç‹æµè§ˆå™¨ FirePathæ’ä»¶ Firebugæ’ä»¶ XPath Checkeræ’ä»¶ 1.å³é”®é€‰æ‹©ï¼Inspect in FirePath2.å¤åˆ¶xpath3.åœ¨è¯¥é¡µé¢ä¸Šå³é”®ï¼&gt;View XPath4.æŠŠxpathçš„è·¯å¾„å¤åˆ¶è¿›å…¥è¯¥é¡µé¢ï¼ŒæŸ¥çœ‹æ˜¯å¦èƒ½å¤Ÿæ‰¾åˆ°è‡ªå·±æƒ³è¦çš„å…ƒç´  mongodbçš„å®‰è£…ä»¥åŠä½¿ç”¨ ä¸€è¡Œä»£ç å®‰è£…mongodbbrew install mongoDBå‰ææ˜¯å·²ç»å®‰è£…äº†brewå·¥å…·ï¼Œä¸€æ¬¡å¤±è´¥å°±æ‰§è¡Œç¬¬äºŒæ¬¡*å¦‚æžœä¸Šè¾¹çš„æ–¹æ³•è¿˜æ˜¯ä¸è¡Œï¼Œé‚£å°±åªèƒ½æ‰‹åŠ¨ä¸‹è½½äº† https://fastdl.mongodb.org/osx/mongodb-osx-x86_64-3.2.3.tgz å‘½ä»¤è¡Œè§£åŽ‹è¯¥åŒ…tar xzvf mongodb-osx-x86_64-3.2.3.tgz å°†è§£åŽ‹åŽçš„æ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªå¯ä»¥é•¿æœŸæ”¾ç½®çš„åœ°æ–¹ï¼Œç„¶åŽè¿›å…¥è¯¥æ–‡ä»¶å¤¹ pwdè®°å½•å½“å‰æ–‡ä»¶è·¯å¾„ï¼Œcopyä¸€ä¸‹ï¼Œä¸€ä¼šå„¿æœ‰ç”¨ vim ~/.zshrcè¿›å…¥é…ç½®ç›®å½•#mongod configMONGODB_HOME=/Users/shenghuihan/Desktop/mongodb-osx-x86_64-3.2.3PATH=$PATH:$MONGODB_HOME/binæ·»åŠ binç›®å½•æ–‡ä»¶åˆ°ç³»ç»Ÿæœç´¢ç›®å½•ä¸‹ source ~/.zshrcä½¿è®¾ç½®ç”Ÿæ•ˆ æŸ¥çœ‹mongoæ˜¯å¦ç”Ÿæ•ˆmongoï¼Œå¦‚æžœæ˜¾ç¤ºç‰ˆæœ¬å·è¯´æ˜Žç”Ÿæ•ˆï¼Œä½†æ˜¯æ²¡æœ‰å¯åŠ¨ä¸‹é¢æˆ‘ä»¬æ¥å¯åŠ¨æœåŠ¡ å…ˆåœ¨åŒçº§ç›®å½•ä¸‹åˆ›å»ºæ•°æ®æ–‡ä»¶å’Œæ—¥å¿—æ–‡ä»¶mkdir dataå’Œmkdir log å¯åŠ¨mongodbæœåŠ¡mongod â€“dbpath data â€“logpath log/mongod.log â€“logappend â€“fork å†æ¬¡mongoå¦‚æžœæ˜¾ç¤ºconnecting to testè¯´æ˜Žå¯åŠ¨æˆåŠŸï¼Œè¾“å…¥exit;é€€å‡ºmongo å°†å¯åŠ¨å‘½ä»¤å†™å…¥ä¸€ä¸ªå¯åŠ¨è„šæœ¬ä¸­echo â€œmongod â€“dbpath data â€“logpath log/mongod.log â€“logappend â€“forkâ€ &gt;&gt; start.sh å¯è§†åŒ–å·¥å…·å®‰è£…https://mongohub.s3.amazonaws.com/MongoHub.zipç›´æŽ¥åŽ»è¿™é‡Œä¸‹è½½ å®‰è£…pythonæ“ä½œmongodbçš„é©±åŠ¨sudo pip install pymongoå‰ææ˜¯è¦å®‰è£…pipå•Šï¼Œè¿™æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨æ¥å®‰è£…pythonå„ç§åº“çš„è½¯ä»¶ é»˜è®¤ç«¯å£27017 æŸ¥çœ‹ipçš„æ–¹å¼ï¼Œdb.getMongo() ä½¿ç”¨mongodbå‘½ä»¤è¡Œ12345678910bogon:mongo shenghuihan$ mongoMongoDB shell version: 3.2.3connecting to: testServer has startup warnings: 2016-09-08T17:51:01.057+0800 I CONTROL [initandlisten] 2016-09-08T17:51:01.057+0800 I CONTROL [initandlisten] ** WARNING: soft rlimits too low. Number of files is 256, should be at least 1000&gt; use mydb//åˆ›å»ºä¸€ä¸ªæ–°çš„åº“switched to db mydb&gt; show collections&gt; show dbs ä½¿ç”¨ä»¥åŠæŸ¥çœ‹æ•°æ®æˆ‘ä»¬å¯ä»¥ä½¿ç”¨mongohubæŸ¥çœ‹æ•°æ®ï¼Œå½“ç„¶è¿˜å¯ä»¥ä½¿ç”¨æˆ‘ä»¬æœ€å–œæ¬¢çš„python1234567891011121314import pymongoconnection = pymongo.MongoClient()tdb = connection.jikexueyuanpost_info = tdb.ceshijike = &#123;&apos;name&apos;:u&apos;å“ˆå“ˆå“ˆ&apos;&#125;#æ’å…¥æ•°æ®goog = &#123;&apos;name&apos;:u&apos;æ ¡é•¿&apos;&#125;# post_info.insert(jike)# post_info.insert(goog)post_info.remove(&#123;&apos;name&apos;:u&apos;æ ¡é•¿&apos;&#125;)print u&apos;æ“ä½œå®Œæˆ&apos; 1234567891011121314from pymongo import MongoClientmc = MongoClient(&quot;localhost&quot;,27017)db = mc.usersc = db.users.find()db.users.save(&#123;&quot;age&quot;:8&#125;)for objc in c: print(objc)mc.close()]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Lunixäº‘æœåŠ¡å™¨æŠ˜è…¾å°è®°]]></title>
    <url>%2F2017%2F01%2F17%2F2017%2FLunix%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8A%98%E8%85%BE%E5%B0%8F%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[Macç™»å½•äº‘æœåŠ¡å™¨1ssh root@127.987.883.888 è¿™æ ·å†è¾“å…¥å¯†ç æˆ‘ä»¬å°±è¿›å…¥äº†æˆ‘ä»¬çš„æœåŠ¡å™¨çš„å‘½ä»¤è¡Œç•Œé¢ï¼Œè¿™é‡Œæ‰§è¡Œçš„å‘½ä»¤è¡Œä¸Žæœ¬æœºæ˜¯ä¸€è‡´çš„ï¼Œä¸è¿‡ä½ çœ‹åˆ°çš„æ˜¯ä½ æœåŠ¡å™¨çš„ä¸€äº›æƒ…å†µ æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½ ä¸Šä¼ 1scp ceshi.txt root@127.987.883.888:~ è¿™æ ·æ–‡ä»¶ä¼šè¢«ä¼ è¾“åˆ°ä½ çš„ç”¨æˆ·åä¸‹çš„æ–‡ä»¶å¤¹ä¸‹ ä¸‹è½½1scp root@127.987.883.888:~ï¼ceshi.txt ceshi.txt apacheå®‰è£…-1. è¿è¡Œ Terminalï¼Œè¾“å…¥å‘½ä»¤ï¼š1ssh username@ipï¼Œç„¶åŽè¾“å…¥å¯†ç ã€‚ å®‰è£… Apache è½¯ä»¶ï¼š 1yum install httpd è®¾ç½® Apache åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶è¿è¡Œï¼š 1chkconfig --levels 235 httpd on åœ¨ Apache é…ç½®æ–‡ä»¶ä¸­é…ç½®åŸŸåï¼š 1vi /etc/httpd/conf/httpd.confï¼Œæ‰¾åˆ° ServerName ï¼Œæ·»åŠ â€œåŸŸå:80â€ï¼Œä¿å­˜å¹¶é€€å‡ºã€‚ é‡å¯ Apacheï¼š 1service httpd restart æµè§ˆå™¨ä¸­è®¿é—®ç¬¬4æ­¥é…ç½®çš„åŸŸåï¼Œå¦‚æžœå‡ºçŽ°â€œApache 2 Test Page powered by CentOSâ€çš„é¡µé¢ï¼Œè¯´æ˜Žé…ç½®æˆåŠŸã€‚ djangoå®‰è£… å®‰è£…pipsudo yum install python-pip pipå®‰è£… 1sudo pip install --upgrade django==1.11 é‡æ–°æ ¼å¼åŒ–äº‘æœåŠ¡å™¨ä¹‹åŽç™»å½•ä¸ä¸Šæ€Žä¹ˆåŠžå°†æœ¬åœ°çš„./sshæ–‡ä»¶å¤¹ä¸­çš„know_hostsé‡Œè¾¹å¯¹åº”çš„ipçš„è®°å½•åˆ é™¤æŽ‰ï¼Œé‡æ–°ç”Ÿæˆ lunixä¸­çš„å¤åˆ¶æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹1cp -r xxx xxx -rä»£è¡¨æˆ‘ä»¬å¤åˆ¶å…¶ä¸­çš„æ‰€æœ‰æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹ lunixåˆ é™¤æ–‡ä»¶1rm -rf xxx åœ¨python çš„djangoæœåŠ¡ä¸å¯ç”¨æŸ¥çœ‹ lunixå‡çº§python123456789101112131415161718192021222324252627282930313233343536373839é¦–å…ˆä¸‹è½½æºtaråŒ… å¯åˆ©ç”¨linuxè‡ªå¸¦ä¸‹è½½å·¥å…·wgetä¸‹è½½ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š1# wget http://www.python.org/ftp/python/2.7.3/Python-2.7.3.tgz ä¸‹è½½å®ŒæˆåŽåˆ°ä¸‹è½½ç›®å½•ä¸‹ï¼Œè§£åŽ‹1 tar -zxvf Python-2.7.3.tgz2 è¿›å…¥è§£åŽ‹ç¼©åŽçš„æ–‡ä»¶å¤¹1 cd Python-2.7.3 åœ¨ç¼–è¯‘å‰å…ˆåœ¨/usr/localå»ºä¸€ä¸ªæ–‡ä»¶å¤¹python27ï¼ˆä½œä¸ºpythonçš„å®‰è£…è·¯å¾„ï¼Œä»¥å…è¦†ç›–è€çš„ç‰ˆæœ¬ï¼‰1 mkdir /usr/local/python27 åœ¨è§£åŽ‹ç¼©åŽçš„ç›®å½•ä¸‹ç¼–è¯‘å®‰è£…1 ./configure --prefix=/usr/local/python272 make3 make install æ­¤æ—¶æ²¡æœ‰è¦†ç›–è€ç‰ˆæœ¬ï¼Œå†å°†åŽŸæ¥/usr/bin/pythoné“¾æŽ¥æ”¹ä¸ºåˆ«çš„åå­—1 mv /usr/bin/python /usr/bin/python_old å†å»ºç«‹æ–°ç‰ˆæœ¬pythonçš„é“¾æŽ¥1ln -s /usr/local/python27/bin/python2.7 è¿™ä¸ªæ—¶å€™è¾“å…¥1 python å°±ä¼šæ˜¾ç¤ºå‡ºpythonçš„æ–°ç‰ˆæœ¬ä¿¡æ¯1 Python 2.7.3 (default, Sep 29 2013, 11:05:02)2 [GCC 4.1.2 20080704 (Red Hat 4.1.2-54)] on linux23 Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.4 &gt;&gt;&gt;ä¿®æ”¹YUM /usr/bin/yumæ–‡ä»¶è®©yumèƒ½æ­£å¸¸çš„å·¥ä½œï¼šæ”¹æˆä¸Šé¢æˆ‘ä»¬ä¿®æ”¹çš„PYTHON 2.6.6çš„åå­— lunixè§£åŽ‹å‘½ä»¤12345678910111213141516171ã€*.tar ç”¨ tar -xvf è§£åŽ‹2ã€*.gz ç”¨ gzip -dæˆ–è€…gunzip è§£åŽ‹3ã€*.tar.gzå’Œ*.tgz ç”¨ tar -xzf è§£åŽ‹4ã€*.bz2 ç”¨ bzip2 -dæˆ–è€…ç”¨bunzip2 è§£åŽ‹5ã€*.tar.bz2ç”¨tar -xjf è§£åŽ‹6ã€*.Z ç”¨ uncompress è§£åŽ‹7ã€*.tar.Z ç”¨tar -xZf è§£åŽ‹8ã€*.rar ç”¨ unrar eè§£åŽ‹9ã€*.zip ç”¨ unzip è§£åŽ‹ å®‰è£…apex12345678910111213141516171819lunix å®‰è£…apxsæ‰©å±•å¥½åƒå‘½ä»¤è¡Œå®‰è£…çš„ï¼Œè‡ªå¸¦äº†è¿™ä¸ªæ¨¡å—ï¼Œæ‰‹åŠ¨ç¼–è¯‘çš„apacheï¼ŒåŒæ ·éœ€è¦æ‰‹åŠ¨ç¼–è¯‘è¿™ä¸ªæ¨¡å—ï¼Œç¼–è¯‘çš„æ—¶å€™å¯èƒ½ä¼šé‡åˆ°è¿™ä¸ªé”™è¯¯ï¼šmod_wsgi.c Python.hï¼šæ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•,ï¼Œè§£å†³æ–¹æ³•ï¼šyum install python-develï¼Œå®‰è£…apacheçš„apxsæ‰©å±•ã€‚python 2.7 No module named â€˜zlib&apos;yum -y install zlib-devel openssl-develcd /wls/softwares/Python-2.7.10./configure --prefix=/usr/local/python27 make make installpipæ˜¯pythonçš„åŒ…ç®¡ç†å·¥å…·ï¼Œæˆ‘ä»¬é€šè¿‡pipæ¥å®‰è£…pythonæ‰€éœ€è¦çš„ä¸€äº›æ¨¡å—ï¼Œå½“ç„¶å¦‚æžœä½ æœ‰å¤šç‰ˆæœ¬å­˜åœ¨ï¼Œå¯èƒ½éœ€è¦å°†pipè¿™ä¸ªæ¨¡å—copyåˆ°å¯¹åº”çš„pythonç‰ˆæœ¬ä¸‹è¾¹åœ¨å®‰è£… Linux ç³»ç»Ÿæ˜¯é¡ºä¾¿æŠŠapache æœåŠ¡è£…å¥½äº† ï¼Œè¿™æ—¶è¿™æ˜¯è£…äº†ä¸€ä¸ªæœåŠ¡ä¸èƒ½è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œæ‰€ä»¥å¾ˆå¤šçš„å¼€å‘å·¥å…·å’Œæ–‡ä»¶åœ¨apacheä¸‹æ‰¾ä¸åˆ°ï¼Œæ¯”å¦‚æ¨¡å—ç¼–è¯‘å·¥å…·apxs ï¼Œè¿™æ—¶å°±è¦æ±‚å®‰è£… å¼€å‘åŒ…ï¼Œå‘½ä»¤ rpm -ql httpd-devel ï¼Œç„¶åŽä¼šåœ¨ usr/local/ä¸‹é¢å¤šå‡ºä¸ª apache2æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸å°‘å¼€å‘éœ€è¦çš„æ–‡ä»¶ã€‚å¦‚æžœæç¤ºæ²¡æœ‰apxsï¼Œé‚£å°±å…ˆyum install httpd-devel lunix å®‰è£…git123456789101112131415161718192021222324252627282930313233343536373839404142431.2 CentOS6.6ä¸‹åœ¨CentOS5çš„æ—¶ä»£ï¼Œç”±äºŽyumæºä¸­æ²¡æœ‰gitï¼Œæ‰€ä»¥éœ€è¦é¢„å…ˆå®‰è£…ä¸€ç³»åˆ—çš„ä¾èµ–åŒ…ã€‚ä½†åœ¨CentOS6çš„yumæºä¸­å·²ç»æœ‰gitçš„ç‰ˆæœ¬äº†ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨yumæºè¿›è¡Œå®‰è£…ã€‚$ sudo yum install gitä½†æ˜¯yumæºä¸­å®‰è£…çš„gitç‰ˆæœ¬æ˜¯1.7.1ï¼Œå¤ªè€äº†ï¼ŒGithubç­‰éœ€è¦çš„Gitç‰ˆæœ¬æœ€ä½Žéƒ½ä¸èƒ½ä½ŽäºŽ1.7.2 ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¸ç”¨ä¸Šé¢çš„æ–¹æ³•ã€‚è€Œæ˜¯ä¸‹è½½gitæºç ï¼Œç¼–è¯‘å®‰è£…ã€‚ç¼–è¯‘å®‰è£…çš„æ­¥éª¤æ˜¯ã€4ã€‘ï¼šï¼ˆ1ï¼‰é¦–å…ˆå…ˆæ›´æ–°ç³»ç»Ÿsudo yum updateï¼ˆ2ï¼‰å®‰è£…ä¾èµ–çš„åŒ…sudo yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMakerï¼ˆ3ï¼‰ä¸‹è½½gitæºç å¹¶è§£åŽ‹ç¼©$ wget https://github.com/git/git/archive/v2.3.0.zip$ unzip v2.3.0.zip$ cd git-2.3.0ï¼ˆ4ï¼‰ç¼–è¯‘å®‰è£…å°†å…¶å®‰è£…åœ¨â€œ/usr/local/gitâ€ç›®å½•ä¸‹ã€‚make prefix=/usr/local/git allsudo make prefix=/usr/local/git installï¼ˆ5ï¼‰æ­¤æ—¶ä½ å¦‚æžœä½¿ç”¨git --version æŸ¥çœ‹gitç‰ˆæœ¬çš„è¯ï¼Œå‘çŽ°gitä»ç„¶æ˜¯1.7.1ç‰ˆæœ¬ã€‚è¿™æ˜¯å› ä¸ºå®ƒé»˜è®¤ä½¿ç”¨äº†&quot;/usr/bin&quot;ä¸‹çš„gitã€‚ä½ å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹gitæ‰€åœ¨çš„è·¯å¾„ï¼š$ whereis gitgit: /usr/bin/git /usr/local/git /usr/share/man/man1/git.1.gzï¼ˆ6ï¼‰æˆ‘ä»¬è¦æŠŠç¼–è¯‘å®‰è£…çš„gitè·¯å¾„æ”¾åˆ°çŽ¯å¢ƒå˜é‡é‡Œï¼Œè®©å®ƒæ›¿æ¢&quot;/usr/bin&quot;ä¸‹çš„gitã€‚ä¸ºæ­¤æˆ‘ä»¬å¯ä»¥ä¿®æ”¹â€œ/etc/profileâ€æ–‡ä»¶ï¼ˆæˆ–è€…/etc/bashrcæ–‡ä»¶ï¼‰ã€‚sudo vim /etc/profileç„¶åŽåœ¨æ–‡ä»¶çš„æœ€åŽä¸€è¡Œï¼Œæ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼Œç„¶åŽä¿å­˜é€€å‡ºã€‚export PATH=/usr/local/git/bin:$PATHï¼ˆ7ï¼‰ä½¿ç”¨sourceå‘½ä»¤åº”ç”¨ä¿®æ”¹ã€‚source /etc/profileï¼ˆ8ï¼‰ç„¶åŽå†æ¬¡ä½¿ç”¨git --version æŸ¥çœ‹gitç‰ˆæœ¬ï¼Œå‘çŽ°è¾“å‡º2.3.0ï¼Œè¡¨æ˜Žå®‰è£…æˆåŠŸã€‚ djangoé”™è¯¯123456789101112131415161718192021222324252627DisallowedHost at /Invalid HTTP_HOST header: &apos;10.211.55.6:8000&apos;. You may need to add u&apos;10.211.55.6&apos; to ALLOWED_HOSTS.Request Method: GETRequest URL: http://10.211.55.6:8000/Django Version: 1.10.4Exception Type: DisallowedHostException Value: Invalid HTTP_HOST header: &apos;10.211.55.6:8000&apos;. You may need to add u&apos;10.211.55.6&apos; to ALLOWED_HOSTS.Exception Location: /usr/lib/python2.7/site-packages/django/http/request.py in get_host, line 113Python Executable: /usr/bin/pythonPython Version:1ï¼Œä»¥ä¸Šæ—¶æˆ‘è®¿é—®è¯·æ±‚çš„æ—¶å€™å‡ºçŽ°çš„ï¼ŒåŽŸå› åœ¨äºŽDjangoæ¡†æž¶ä¸­çš„åˆ›å»ºçš„ä¸€ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œ2ï¼Œè·‘ä¸‹è¿™ä¸ªå‘½ä»¤ï¼šPython manage.py runserver 10.211.55.5:80003ï¼Œç„¶åŽåœ¨æˆ‘æœ¬æœºçš„æµè§ˆå™¨ä¸­å†™å…¥ä¸Šè¿°IPå’Œç«¯å£è¯·æ±‚è¿‡åŽ»ï¼šhttp://10.211.55.6:80004ï¼ŒäºŽæ˜¯å°±å‡ºçŽ°äº†æœ€ä¸Šé¢çš„é‚£ä¸ªé—®é¢˜ï¼›5ï¼ŒäºŽæ˜¯å°±åŽ»django-admin.py startproject project-nameåˆ›å»ºçš„é¡¹ç›®ä¸­åŽ»ä¿®æ”¹ setting.py æ–‡ä»¶ï¼šALLOWED_HOSTS = [&apos;*&apos;] ï¼ƒåœ¨è¿™é‡Œè¯·æ±‚çš„hostæ·»åŠ äº†ï¼Š6ï¼ŒäºŽæ˜¯å°±æˆåŠŸçš„è®¿é—®åˆ°äº†Djangoçš„é¡¹ç›®äº†ï¼› é…ç½®django/etc/httpd/conf/httpd.confconfåœ°å€/etc/httpd/modules/mod_wsgi.sosoæ–‡ä»¶åœ°å€/etc/httpd/extra/vhosts/dev.mysite.com.conf httpd.confé…ç½® è®°å¾—ä¿®æ”¹userå’Œgroupä¸ºwwwï¼Œè¿™ä¸ªwwwæ˜¯ä½ è‡ªå·±åˆ›å»ºçš„ç”¨æˆ·ï¼Œè®°å¾—è¿™ä¸ªwwwè¦åŠ åˆ°rootä¸‹ï¼Œç„¶åŽå°†æ ¹æ–‡ä»¶æ›´æ”¹æ‰€æœ‰è€… è®°å¾—æ·»åŠ ä½ çš„ç«¯å£åˆ°iptablesä¸­åŽ» wsgi.pyæ–‡ä»¶å†…å®¹12345678910111213import osfrom os.path import join,dirname,abspathPROJECT_DIR = dirname(dirname(abspath(__file__)))#3import sys # 4sys.path.insert(0,PROJECT_DIR) # 5from django.core.wsgi import get_wsgi_applicationos.environ.setdefault(&quot;DJANGO_SETTINGS_MODULE&quot;, &quot;jdjrweb.settings&quot;)application = get_wsgi_application() /etc/httpd/extra/vhosts/dev.mysite.com.confé…ç½®12345678910111213141516171819202122232425262728293031323334353637383940414243444546Listen 80&lt;VirtualHost *:80&gt; LogLevel info ServerName 104.238.153.13 ServerAdmin my@mysite.com ErrorLog &quot;/root/jdjr/datalog/error_log&quot; CustomLog &quot;/root/jdjr/datalog/access_log&quot; common WSGIScriptAlias / /root/jdjr/jdjrweb/jdjrweb/wsgi.py #WSGIScriptAlias / /root/jdjr/jdjrweb &lt;Directory &quot;/root/jdjr/jdjrweb&quot;&gt; Require all granted &lt;/Directory&gt; Alias /static/ /root/jdjr/jdjrweb/jdjrweb/static/ &lt;Directory &quot;/root/jdjr/jdjrweb/jdjrweb/static/&quot;&gt; Require all granted &lt;/Directory&gt; &lt;Directory &quot;/root/jdjr/jdjrweb&quot;&gt; #Options Indexes FollowSymLinks #AllowOverride All #Order allow,deny Require all granted &lt;/Directory&gt; &lt;Directory &quot;/root/jdjr/datalog&quot;&gt; Require all granted &lt;/Directory&gt; &lt;Directory &quot;/root/jdjr/jdjrweb/jdjrweb&quot;&gt; &lt;Files wsgi.py&gt; Require all granted &lt;/Files&gt; &lt;/Directory&gt; #&lt;Files &quot;/root/jdjr/jdjrweb/jdjrweb/wsgi.py&quot;&gt; # Require all granted # &lt;/Files&gt;&lt;/VirtualHost&gt; æ–‡ä»¶æƒé™é…ç½®çœ‹/etc/httpd/conf/httpd.confè¿™ä¸ªæ–‡ä»¶é‡Œè¾¹çš„userå’Œgroupï¼Œè¿™é‡Œé…ç½®çš„æ˜¯apacheï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦ç»™æˆ‘ä»¬ç”¨åˆ°çš„æ–‡ä»¶çš„ç”¨æˆ·åˆ‡æ¢åˆ°apacheï¼Œç„¶åŽç»™è¿™ä¸ªç”¨æˆ·æœ€é«˜æƒé™ sudo chmod -R u+wrx jdjrå…¶ä¸­jdjræ˜¯æˆ‘æ‰€ç”¨åˆ°çš„æ–‡ä»¶å¤¹ï¼Œ-Rä»£è¡¨é€’å½’æ‰€æœ‰å­æ–‡ä»¶ ah01797: client denied by server configuration /wsgi.pyå‡å¦‚æŠ¥è¿™ä¸ªé”™è¯¯è¯´æ˜Žæ–‡ä»¶å¤¹çš„æƒé™é…ç½®ä¸å¯¹ï¼Œåº”è¯¥æŠŠä¸‹è¾¹æˆ‘æ³¨é‡ŠæŽ‰çš„é‚£äº›ä¸œè¥¿åŽ»äº†å°±å¥½äº†ï¼Œåªç•™ä¸‹Require all granted 123456&lt;Directory &quot;/root/jdjr/jdjrweb&quot;&gt; #Options Indexes FollowSymLinks #AllowOverride All #Order allow,deny Require all granted&lt;/Directory&gt;]]></content>
      <tags>
        <tag>Lunix</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Andoridè‡ªåŠ¨æ‰“åŒ…gradleå®‰è£…ç¬”è®°]]></title>
    <url>%2F2016%2F12%2F16%2F2017%2FAndorid%E8%87%AA%E5%8A%A8%E6%89%93%E5%8C%85gradle%E5%AE%89%E8%A3%85%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[å®‰è£…andorid studio copyä¸€ä»½sdkè¿‡æ¥ è®¾ç½®andorid studioçš„sdkè·¯å¾„ å®‰è£…sdkman åœ¨æŽ§åˆ¶å°æˆ–è€…item2ä¸­è¾“å…¥ 12curl -s https://get.sdkman.io | bashsource &quot;$HOME/.sdkman/bin/sdkman-init.sh&quot; æ£€éªŒsdkmanæ˜¯å¦å®‰è£…æˆåŠŸ 1sdk version å®‰è£…andorid studioä¸­è®¤å¯çš„gradleç‰ˆæœ¬ 1sdk install gradle 2.8 å‡çº§jdkåˆ°andorid studioè®¤å¯çš„ç‰ˆæœ¬æ¯”å¦‚è¯´1.7 åˆ°å·¥ç¨‹æ ¹ç›®å½•ï¼Œæ‰§è¡Œgradle buildå°±å¯ä»¥äº†â€™gradle assembleDebugâ€™ æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶åœ¨outputsä¸­]]></content>
      <tags>
        <tag>andorid</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºŽDjangoçš„è‡ªåŠ¨åŒ–å¹³å°æž„å»ºç¬”è®°(1)]]></title>
    <url>%2F2016%2F12%2F15%2F2017%2F%E5%9F%BA%E4%BA%8EDjango%E7%9A%84%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B9%B3%E5%8F%B0%E6%9E%84%E5%BB%BA%E7%AC%94%E8%AE%B0(1)%2F</url>
    <content type="text"><![CDATA[çŽ°åœ¨æä¾›çš„æœåŠ¡ä¸»è¦æœ‰ï¼š æ ¹æ®propertyåˆ›å»ºUIä»£ç  JSONè‡ªåŠ¨è½¬æ¨¡åž‹ è‡ªåŠ¨æ‰“åŒ…æœåŠ¡ å…¶ä»–æ•ˆçŽ‡å·¥å…·çš„é“¾æŽ¥ å…¶ä¸­æœ€é‡è¦çš„ï¼Œä¹Ÿæ˜¯æœ€å¤æ‚çš„åº”è¯¥æ˜¯è‡ªåŠ¨æ‰“åŒ…çš„æœåŠ¡ï¼Œè¿™å¥—æœåŠ¡ç”¨pythonè¯­è¨€æ¥å®žçŽ°ï¼ŒåŸºäºŽpythonçš„djangoæ¡†æž¶ï¼Œå…¶ä¸­djangoæ¡†æž¶ä¸»è¦ç”¨æ¥æä¾›webæœåŠ¡ï¼Œç”¨æ¥ç»™ç”¨æˆ·è®¿é—®ï¼Œè€ŒæœåŠ¡çš„æ‰§è¡Œè€…ï¼Œæ¯”å¦‚è¯´UIçš„ä»£ç åˆ›å»ºï¼Œéœ€è¦ç”¨åˆ°å­—ç¬¦ä¸²è§£æžç­‰åŠŸèƒ½ï¼Œå®Œå…¨ç”±pythonåœ¨æœåŠ¡å™¨ç«¯æ¥å®Œæˆï¼Œæˆ‘ä»¬é€šè¿‡ç½‘ç»œå°†éœ€è¦è§£æžçš„æ•°æ®å‘é€ç»™æœåŠ¡å™¨ï¼Œç„¶åŽæœåŠ¡å™¨åšå®Œå¤„ç†ä¹‹åŽï¼Œå†é€šè¿‡ç½‘ç»œå°†æ•°æ®è¿”å›žï¼Œç„¶åŽé€šè¿‡djangoæ¥å®Œæˆå±•ç¤ºã€‚å†åˆ°æ‰“åŒ…æœåŠ¡ä¹Ÿæ˜¯è¿™ç§é€»è¾‘ï¼Œé€šè¿‡webæœåŠ¡æ¥å‘é€æŒ‡ä»¤ç»™æœåŠ¡å™¨ï¼Œç„¶åŽæœåŠ¡å™¨è°ƒç”¨å‘½ä»¤è¡Œæ¥å®Œæˆæ‰“åŒ…çš„å…·ä½“çš„åŠ¨ä½œ Djangoä½¿ç”¨ç®€è§£Djangoæ˜¯ä¸€ä¸ªpythonçš„é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨WebStormæ¥ç¼–è¾‘è¯¥é¡¹ç›®ã€‚å½“è¿è¡Œçš„æ—¶å€™ä¼šç”Ÿæˆä¸€ä¸ªæœ¬åœ°çš„webæœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯¥åœ°å€ï¼Œåœ¨æµè§ˆå™¨è®¿é—®è¿™ä¸ªæœåŠ¡ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œæ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæžœï¼Œè¿›å…¥åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼Œmanager.pyçš„æ‰€åœ¨ç›®å½•ï¼Œæ‰§è¡Œpython manager.py runserverï¼Œç„¶åŽç‚¹å‡»ç»™å‡ºçš„åœ°å€ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥æŸ¥çœ‹æœåŠ¡ã€‚ å¯¹äºŽè¿™ä¸ªæ–°å»ºçš„djangoå·¥ç¨‹æˆ‘ä»¬ä¸»è¦å…³æ³¨çš„æ˜¯ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯ProjectName/urls.pyï¼Œå¦ä¸€ä¸ªæ˜¯appName/views.pyã€‚ urls.pyè¿™ä¸ªæ–‡ä»¶æ—¶æ•´ä¸ªå·¥ç¨‹çš„è·¯ç”±ï¼Œå°†urlä¸Žå…·ä½“çš„æœåŠ¡æˆ–è€…è¦å±•ç¤ºçš„é¡µé¢ç›¸å¯¹åº”ã€‚ 123456789101112131415161718192021222324252627282930313233from django.conf.urls import urlfrom django.contrib import adminfrom learn import views as learn_views # newfrom django.contrib.staticfiles.urls import staticfiles_urlpatternsurlpatterns = [url(r&apos;next&apos;, learn_views.nextPage), # newurl(r&apos;^$&apos;, learn_views.home,name=&apos;home&apos;), # newurl(r&apos;^admin/&apos;, admin.site.urls),url(r&apos;callPython&apos;, learn_views.compute), # newurl(r&apos;ajaxpack&apos;, learn_views.ajaxpack),url(r&apos;ajaxgetbranches&apos;, learn_views.ajaxgetbranchesfunc),url(r&apos;add&apos;, learn_views.compute), # newurl(r&apos;uicreate&apos;, learn_views.uicreate),url(r&apos;ajaxcreateui&apos;, learn_views.createui),url(r&apos;package&apos;, learn_views.package),url(r&apos;buildlist&apos;, learn_views.buildlist),url(r&apos;ajaxsendMail&apos;, learn_views.sendMails),url(r&apos;jsonFormatClick1&apos;, learn_views.jsonFormat1),url(r&apos;jsonFormatClick2&apos;, learn_views.jsonFormat2),url(r&apos;interfaceTestClick&apos;, learn_views.interfaceTest),url(r&apos;url1&apos;, learn_views.getUrl1),url(r&apos;url2&apos;, learn_views.getUrl2), # newurl(r&apos;url3&apos;, learn_views.getUrl3),url(r&apos;url4&apos;, learn_views.getUrl4),url(r&apos;url5&apos;, learn_views.getUrl5), # newurl(r&apos;url6&apos;, learn_views.getUrl6),url(r&apos;url7&apos;, learn_views.getUrl7)]# ... the rest of your URLconf goes here ...urlpatterns += staticfiles_urlpatterns() çœ‹ä¸Šè¾¹è¿™æ®µä»£ç ï¼Œæ–°åŠ å…¥çš„æœ‰from learn import views as learn_views # newè¿™ä¸ªæ˜¯å¼•å…¥äº†learnè¿™ä¸ªappä¸­çš„viewsè¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åŽåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ—è¡¨ä¸­æ·»åŠ å¾ˆå¤šçš„urlä¸ŽæœåŠ¡çš„å¯¹åº”ï¼Œurlçš„å†™æ³•çš„è®²ç©¶åœ¨äºŽï¼Œnextæ„å‘³ç€åŒ…å«nextå°±è·³è¿™ä¸ªï¼Œ^nextæ„å‘³ç€ä»¥nextå¼€å¤´ï¼Œnext$æ„å‘³ç€ä»¥nextç»“å°¾ï¼Œ^next$æ„å‘³ç€ç›´é‚®nextæ‰è·³è¿™ä¸ªï¼Œå®Œå…¨å¯¹åº”çš„æ„æ€ï¼Œè¿™ä¸ªæ–‡ä»¶çš„ä½œç”¨ä¸»è¦å°±è¿™äº› views.pyå…·ä½“çš„æœåŠ¡æˆ‘ä»¬æ˜¯ç”±è¿™ä¸ªæ–‡ä»¶æ¥æä¾›çš„ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103from django.http import HttpResponsefrom django.shortcuts import renderfrom DIY.compute import getModelFromJsonfrom DIY.createui import getCreatedStringWithPropertiesfrom DIY.packServer import packaged,getbranchesfrom django.http import HttpResponseRedirectfrom DIY.mail import sendMaildef home(request):string = &apos;è¿™æ˜¯&apos;return render(request,&apos;home.html&apos;,&#123;&apos;string&apos;:string&#125;)def nextPage(request):return render(request,&apos;next.html&apos;)def compute(request):string = request.POST[&apos;text&apos;]string = getModelFromJson(string)return HttpResponse(string)def uicreate(request):return render(request,&apos;UICreate.html&apos;)def createui(request):string = request.GET[&apos;text&apos;]string = getCreatedStringWithProperties(string)return HttpResponse(string)def package(request):return render(request,&apos;package.html&apos;)def ajaxpack(request):f = open(&apos;/Users/wxg/Documents/Build/building.txt&apos;,&apos;r&apos;)text = f.read()if text == &apos;&apos;:string = request.GET[&apos;text&apos;]resurtString = packaged(string)return HttpResponse(&apos;done&apos;)else:return HttpResponse(&apos;wait&apos;) def ajaxgetbranchesfunc(request):return HttpResponse(getbranches(&apos;string&apos;))def buildlist(requets):return HttpResponseRedirect(&apos;http://10.13.80.19:8000/Documents/Build&apos;)def sendMails(request):sendMail(&apos;&apos;)return HttpResponse(&apos;hi&apos;) def jsonFormat1(request):return HttpResponseRedirect(&apos;http://www.jsonparseronline.com&apos;)def jsonFormat2(request):return HttpResponseRedirect(&apos;http://www.sojson.com&apos;) def interfaceTest(request):return HttpResponseRedirect(&apos;http://www.atool.org/httptest.php&apos;)def getUrl1(request):f = open(&apos;/Users/han/Desktop/text1.txt&apos;, &apos;r&apos;)text = f.read()f.close()return HttpResponse(text)def getUrl2(request):f = open(&apos;/Users/han/Desktop/text2.txt&apos;, &apos;r&apos;)text = f.read()f.close()return HttpResponse(text)def getUrl3(request):f = open(&apos;/Users/han/Desktop/text3.txt&apos;, &apos;r&apos;)text = f.read()f.close()return HttpResponse(text)def getUrl4(request):f = open(&apos;/Users/han/Desktop/text4.txt&apos;, &apos;r&apos;)text = f.read()f.close()return HttpResponse(text)def getUrl5(request):f = open(&apos;/Users/han/Desktop/text5.txt&apos;, &apos;r&apos;)text = f.read()f.close()return HttpResponse(text)def getUrl6(request):f = open(&apos;/Users/han/Desktop/text6.txt&apos;, &apos;r&apos;)text = f.read()f.close()return HttpResponse(text)def getUrl7(request):f = open(&apos;/Users/han/Desktop/text7.txt&apos;, &apos;r&apos;)text = f.read()f.close()return HttpResponse(text) æˆ‘ä»¬æ‹¿å…·ä½“çš„ä¾‹å­æ¥è¯´ï¼Œä¸Šè¾¹çš„è¿™äº›ä»£ç ï¼Œå°±æ˜¯æˆ‘ä»¬èƒ½å¤Ÿæä¾›çš„å…·ä½“çš„æœåŠ¡ï¼Œå…·ä½“è¯´æ¥æˆ‘ä»¬ä¸»è¦æä¾›ä¸‰ç§æœåŠ¡ è¿”å›žjson1234def compute(request):string = request.POST[&apos;text&apos;]string = getModelFromJson(string)return HttpResponse(string) æ¯”å¦‚è¿™ä¸ªï¼Œéœ€è¦å¼•å…¥from django.http import HttpResponse è¿”å›žä¸€ä¸ªhtmlæ–‡ä»¶123def home(request):string = &apos;è¿™æ˜¯&apos;return render(request,&apos;home.html&apos;,&#123;&apos;string&apos;:string&#125;) ä¸­é—´çš„å‚æ•°home.htmlå°±æ˜¯ä¸€ä¸ªhtmlçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ä»Žå“ªé‡Œæ¥çš„ï¼Œä¸Žviews.pyåŒçº§æœ‰ä¸ªtemplatesæ–‡ä»¶å¤¹ï¼Œé‡Œè¾¹æ˜¯æˆ‘ä»¬è¦å­˜æ”¾çš„htmlæ–‡ä»¶ï¼Œè¿™ä¸ªéœ€è¦htmlå’Œcssçš„ä¸€äº›çŸ¥è¯†æ¥ç¼–å†™ è¿”å›žè·³ä¸€ä¸ªå…¶ä»–çš„urlï¼Œæ¯”å¦‚è·³baiduæˆ–è€…æ¡æœåŠ¡å™¨çš„æŸä¸ªæ–‡ä»¶å¤¹éƒ½æ˜¯å¯ä»¥çš„12def jsonFormat1(request):return HttpResponseRedirect(&apos;http://www.jsonparseronline.com&apos;) 12def buildlist(requets):return HttpResponseRedirect(&apos;http://10.13.80.19:8000/Documents/Build&apos;) è¿˜æœ‰ä¸ªé—®é¢˜éœ€è¦è¯´æ˜Žå°±æ˜¯ï¼Œæˆ‘ä»¬è¿™é‡Œéœ€è¦å¾ˆå¤špythonçš„æœåŠ¡ï¼Œå¦‚ä½•å¼•å…¥å‘¢ï¼Œç›´æŽ¥å¼•å…¥å‡½æ•°çš„åç§°å°±å¯ä»¥äº†ï¼Œå°±åƒæ˜¯from DIY.packServer import packaged,getbranches Djangoå®‰è£…å’Œé…ç½®å…·ä½“å¯ä»¥å‚è€ƒDjangoéƒ¨ç½²+apache+mod_wsgi è‡ªåŠ¨æ‰“åŒ…æœåŠ¡çš„æž„å»ºè¿‡ç¨‹è¿™é‡Œè¯´ä¸¤ç‚¹ï¼Œç¬¬ä¸€ä¸ªæ˜¯æˆ‘ä»¬å®žçŽ°çš„ä¸€äº›æ¯”è¾ƒä¸å¸¸è§çš„åŠŸèƒ½ï¼Œä¸€ä¸ªæ˜¯è¸©åˆ°çš„å‘ã€‚å…ˆæ¥è¯´ä¸€ä¸‹åŠŸèƒ½ç‚¹ï¼š çº¿ä¸Šå’Œé¢„å‘çš„åˆ‡æ¢ æ¸…é™¤æœ¬åˆ†æ”¯åšçš„æ“ä½œ .appè½¬æ¢ä¸º.ipa xcode XCBuildConfigurationé…ç½®æ–‡ä»¶è‡ªåŠ¨è®¾ç½® .appè½¬æ¢ä¸º.ipaå½“æˆ‘ä»¬æ‰§è¡Œäº†xcodebuild buildçš„å‘½ä»¤ä¹‹åŽï¼Œå½¢æˆçš„æ˜¯ä¸€ä¸ª.appæ–‡ä»¶ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦åšçš„åŽ‹ç¼©è¿™ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ˜¯ipaæ–‡ä»¶ç”Ÿæˆçš„åŽŸç†å…·ä½“æ­¥éª¤ï¼š Step1: æ–°å»ºâ€œPayloadâ€æ–‡ä»¶å¤¹ï¼Œæ³¨æ„åå­—è¦ä¸€å­—ä¸å·®ï¼› Step2: å°†ä½ çš„.appåŒ…æ”¾åˆ°Payloadä¸­ï¼Œæ³¨æ„appçš„åå­—ä¸åšä»»ä½•æ›´æ”¹ï¼Œå°±ç”¨xcodeç”Ÿæˆçš„appåç§°ï¼› Step3: åœ¨Payloadæ–‡ä»¶å¤¹ä¸Šå³é”®åŽ‹ç¼©æˆzipï¼Œç„¶åŽå°†ç”Ÿæˆçš„.zipæ–‡ä»¶åŽç¼€æ”¹æˆ.ipaå³å¯å…·ä½“ä»£ç : 123456789101112131415161718import os,shutilos.mkdir(&apos;Payload&apos;)shutil.copytree(&apos;JDMobile.app&apos;,&apos;Payload/JDMobile.app&apos;)os.system(&apos;zip -r Payload.zip Payload&apos;)files=os.listdir(&quot;.&quot;)for filename in files: li=os.path.splitext(filename) if li[1]==&quot;.zip&quot;: newname=li[0]+&quot;.ipa&quot; os.rename(filename,newname)shutil.rmtree(&apos;JDMobile.app&apos;)shutil.rmtree(&apos;Payload&apos;) xcode XCBuildConfigurationé…ç½®æ–‡ä»¶è‡ªåŠ¨è®¾ç½®è¿™é‡Œä½¿ç”¨mod-pbxprojï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªpythonè§£æžåº“ï¼Œç”¨æ³•å¦‚ä¸‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445from mod_pbxproj import XcodeProjectimport commandsdef configProject(): project = XcodeProject.Load(&apos;/Users/wxg/Documents/JDMobileNew/JDMobile_2.0/JDMobile.xcodeproj/project.pbxproj&apos;) for item in project.objects.values(): nameIsa = item.get(&apos;isa&apos;) if (nameIsa == &apos;XCBuildConfiguration&apos;): setting = item.get(&apos;buildSettings&apos;) nameReference = item.get(&apos;baseConfigurationReference&apos;) if (nameReference): idStr = setting.get(&apos;PRODUCT_BUNDLE_IDENTIFIER&apos;) print &apos;----&gt;&apos; + idStr setting.__setitem__(&apos;PRODUCT_BUNDLE_IDENTIFIER&apos;,&apos;com.jd.jinrong2016&apos;) setting.__setitem__(&apos;PROVISIONING_PROFILE&apos;,&apos;&apos;) setting.__setitem__(&apos;PROVISIONING_PROFILE_SPECIFIER&apos;,&apos;&apos;) setting.__setitem__(&apos;DEVELOPMENT_TEAM&apos;,&apos;5TKVHWTT79&apos;) setting.__setitem__(&apos;CODE_SIGN_IDENTITY[sdk=iphoneos*]&apos;,&apos;iPhone Developer&apos;) item.__setitem__(&apos;buildSettings&apos;,setting) else: codeSign = setting.get(&apos;CODE_SIGN_IDENTITY&apos;) profile = setting.get(&apos;PROVISIONING_PROFILE&apos;) print codeSign print profile setting.__setitem__(&apos;CODE_SIGN_IDENTITY&apos;,&apos;iPhone Distribution: Beijing Jingdong Century Trading Co., Ltd. (TQZTTUQ9ZE)&apos;) setting.__setitem__(&apos;PROVISIONING_PROFILE&apos;,&apos;0d8cd55a-c922-4f27-b1aa-df6a2f277ea5&apos;) item.__setitem__(&apos;buildSettings&apos;,setting) elif (nameIsa == &apos;PBXProject&apos;): attributes = item.get(&apos;attributes&apos;) targetAttributes = attributes.get(&apos;TargetAttributes&apos;) targets = item.get(&apos;targets&apos;) tar = targets[0] attr = targetAttributes.get(&apos;%s&apos; % tar) developmentTeamName = attr.get(&apos;DevelopmentTeamName&apos;) developmentTeamName = attr.get(&apos;ProvisioningStyle&apos;) print developmentTeamName attr.__setitem__(&apos;DevelopmentTeamName&apos;,&apos;Beijing Jingdong Century Information Technology Co., Ltd.&apos;) attr.__setitem__(&apos;ProvisioningStyle&apos;, &apos;Automatic&apos;) attr.__setitem__(&apos;DevelopmentTeam&apos;, &apos;5TKVHWTT79&apos;) project.save() è¿™é‡Œçš„å‘ä¸»è¦æ˜¯ç”±æƒé™å¼•èµ·çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä»ŽwebæœåŠ¡åŽ»è°ƒç”¨ä¸€ä¸ªå‘½ä»¤è¡Œçš„æŒ‡ä»¤çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™çš„å¹¶ä¸æ˜¯ç™»å½•çŠ¶æ€çš„æƒé™ï¼Œè€Œæ˜¯ä¸€ä¸ªéžç™»å½•çŠ¶æ€çš„æƒé™ï¼Œè¿™ä¸ªæ—¶å€™æœ‰ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ˜¯å¾ˆå¤šæœåŠ¡æ˜¯æ²¡æœ‰è¢«åŠ è½½çš„ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸€äº›æ–‡ä»¶æ²¡æœ‰æƒé™åŽ»è°ƒç”¨ï¼Œä¸‹é¢åˆ†åˆ«æ¥è¯´ gradleæ— æ³•è°ƒç”¨ è‹¹æžœçš„å¼€å‘è€…è¯ä¹¦ä¸èƒ½è¯»å– git pullå‘½ä»¤éœ€è¦ç”¨æˆ·åå’Œå¯†ç  gradleæ— æ³•è°ƒç”¨è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªé—®é¢˜æ˜¯macçš„çŽ¯å¢ƒå˜é‡ï¼Œé€šè¿‡åœ¨ç»ˆç«¯è¾“å…¥$PATHæ¥æŸ¥çœ‹å½“å‰ç”¨æˆ·ä¸‹åŠ è½½çš„è·¯å¾„æœ‰å“ªäº›ï¼Œå¦‚æžœè¿”å›žçš„è·¯å¾„ä¸­åŒ…å«æˆ‘ä»¬çš„æœåŠ¡çš„è·¯å¾„ï¼Œé‚£ä¹ˆè‚¯å®šè¿™ä¸ªæœåŠ¡å½“å‰ç”¨æˆ·æ˜¯å¯ä»¥è°ƒç”¨çš„ï¼Œæˆ‘ä»¬åœ¨webæœåŠ¡ä¸­è°ƒç”¨è¿™ä¸ªå‘½ä»¤å‘çŽ°è¿”å›žçš„åªæœ‰usr/binç­‰ç€å‡ ä¸ªè·¯å¾„ï¼Œé‚£ä¹ˆæ€è·¯å°±æ¥äº†ï¼Œå¦‚æžœgradleæƒ³è¦è¢«ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±éœ€è¦åŠ åˆ°è¿™è·¯å¾„ä¸‹ï¼Œè§£å†³çš„åŠžæ³•å°±æ˜¯åŠ ä¸€ä¸ªè½¯è¿žæŽ¥åˆ°/usr/binæ–‡ä»¶ä¸‹ï¼Œsudo ln -s xxxxx xxxxxå°±å¯ä»¥äº†ï¼Œé‚£ä¹ˆå¦‚æžœæ‰¾åˆ°è¿™ä¸ªæœåŠ¡çš„å®‰è£…è·¯å¾„å‘¢ï¼Ÿä»¥gradleä¸ºä¾‹which gradleï¼Œå¦‚æžœæ˜¯gitçš„è¯å°±æ˜¯which gitè¿™é‡Œè¿˜æœ‰ä¸ªé—®é¢˜æ˜¯macå‡çº§ç³»ç»ŸåŽï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ä¸å…è®¸æ›´æ”¹çš„ï¼Œè§£å†³åŠžæ³•: å¯¹äºŽMac OS X 10.11 El Capitanç”¨æˆ·ï¼Œç”±äºŽç³»ç»Ÿå¯ç”¨äº†SIP(System Integrity Protection), å¯¼è‡´rootç”¨æˆ·ä¹Ÿæ²¡æœ‰æƒé™ä¿®æ”¹/usr/binç›®å½•ã€‚æŒ‰å¦‚ä¸‹æ–¹å¼å¯æ¢å¤æƒé™ã€‚å±è”½æ–¹æ³•ï¼šé‡å¯Macï¼ŒæŒ‰ä½command+R,è¿›å…¥recoveryæ¨¡å¼ã€‚é€‰æ‹©æ‰“å¼€Utilitiesä¸‹çš„ç»ˆç«¯ï¼Œè¾“å…¥ï¼šcsrutil disableå¹¶å›žè½¦ï¼Œç„¶åŽæ­£å¸¸é‡å¯Macå³å¯ è‹¹æžœçš„å¼€å‘è€…è¯ä¹¦ä¸èƒ½è¯»å–User interaction is not allowedè¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºè¯ä¹¦ä¸èƒ½è¢«è¯»å–ï¼Œè¿™æ˜¯å› ä¸ºè¯ä¹¦åœ¨ç™»å½•ä¸‹ï¼Œæˆ‘ä»¬å°†è¯ä¹¦ç§»åŠ¨åˆ°ç³»ç»Ÿä¸‹å°±å¯ä»¥äº† git pullå‘½ä»¤éœ€è¦ç”¨æˆ·åå’Œå¯†ç è¿™ä¸ªä¸èƒ½è¢«æ‰§è¡Œä¹Ÿæ˜¯å› ä¸ºæƒé™çš„é—®é¢˜ï¼Œæœ€åŽçš„è§£å†³æ–¹æ¡ˆï¼Œæ˜¯åœ¨ç™»å½•çŠ¶æ€ä¸‹(å‘½ä»¤è¡Œ)ç›´æŽ¥å¼€ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œæ­»å¾ªçŽ¯ä¸æ–­çš„æ£€æµ‹ä¸€ä¸ªæ–‡ä»¶ä¸‹æ˜¯å¦æœ‰å¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œå¦‚æžœæœ‰è¿™ä¸ªæ–‡ä»¶å¤¹å°±æ‰§è¡Œgit pullå‘½ä»¤ï¼Œæ‰§è¡Œå®Œæ¯•ä¹‹åŽå†™å…¥æ—¥å¿—ï¼Œç„¶åŽåˆ é™¤æ–‡ä»¶å†…å®¹ï¼Œç»§ç»­è¿›å…¥åˆ°ä¸‹ä¸€ä¸ªå¾ªçŽ¯ï¼Œè¿™ä¸ªä¸ŽiOSçš„runloopæ˜¯ä¸€ä¸ªé“ç† djangoä¸­ä½¿ç”¨ajaxçš„postæ–¹æ³•123456$(&quot;#insert&quot;).click(function()&#123; text = $(&apos;#textarea1&apos;).val() $.post(&quot;/writecontent/&quot;, &#123;&apos;content&apos;: text,&apos;foldername&apos;:foldername,&apos;filename&apos;:filename&#125;,function(ret)&#123; alert(ret) &#125;) &#125;); ä¹‹æ‰€ä»¥ä½¿ç”¨postè¿™é‡Œæ˜¯å› ä¸ºæ— æ³•çªç ´apacheå¯¹äºŽgetæ–¹æ³•çš„æ•´ä½“å‚æ•°é•¿åº¦é™åˆ¶ï¼Œè€Œä½¿ç”¨postæ–¹æ³•æœ‰ä¸ªé—®é¢˜å°±æ˜¯ä¼šå¼ºåˆ¶CSRFæ ¡éªŒï¼Œè§£å†³æ–¹æ³•å°±æ˜¯å…³é—­djangoçš„éªŒè¯ï¼Œå…·ä½“æ¥è¯´æ˜¯åˆ°settingæ–‡ä»¶ä¸­æ³¨é‡Šä¸€è¡Œä»£ç  django.middleware.csrf.CsrfViewMiddleware å®‰è£…pymongoé¦–å…ˆè¦å®‰è£…pipï¼Œç„¶åŽç”¨pipå®‰è£…pymongo1sudo easy_install pip ç„¶åŽä½¿ç”¨pipå®‰è£…pymongo1sudo pip install pymongo è¿™ä¸ªæ—¶å€™è¿›å…¥pythonçŽ¯å¢ƒä½¿ç”¨å‘½ä»¤è¡ŒåŽ»è®¿é—®pymongoåº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯ä½ ä½¿ç”¨webè°ƒç”¨çš„æ–¹å¼åŽ»è°ƒç”¨ä¸ä¸€å®šèƒ½å¤Ÿè®¿é—®åˆ°mongoï¼Œè¿™å¯èƒ½æ˜¯å› ä¸ºä½ ä½¿ç”¨çš„pythonå®‰è£…è·¯å¾„çš„é—®é¢˜1which python çœ‹ä¸€ä¸‹å½“å‰åŠ è½½çš„pythonï¼Œä¸å‡ºæ„å¤–åº”è¯¥æ˜¯/usr/local/bin/pythonï¼Œè¿™ä¸ªæ˜¯ç™»å½•çŠ¶æ€ä¸‹æ‰èƒ½åŠ è½½çš„ä¸€ä¸ªçŽ¯å¢ƒå’Œè·¯å¾„ï¼Œè€Œwebæ˜¯éžç™»å½•çš„ï¼Œæ‰€ä»¥å¾ˆå¤šåŠŸèƒ½è®¿é—®ä¸åˆ°æ­£å¸¸ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯è®©ç³»ç»Ÿç›´æŽ¥åŠ è½½/usr/bin/pythonï¼Œè¿™å°±æ¶‰åŠåˆ°ä¸€ä¸ªåŠ è½½ä¼˜å…ˆçº§çš„é—®é¢˜1sudo emacs /etc/paths /usr/local/bin/usr/bin/bin/usr/sbin/sbin tips:ç¾åœ¨è¦æŠŠ /usr/local/bin ç§»åˆ°ä¸Šé¢åŽ» control + kï¼šæŠŠä¸€è¡Œå­—å‰ªä¸‹ä¾† control + yï¼šæŠŠå­—è²¼ä¸Š control + x + sï¼šå­˜æª” control + x + cï¼šé—œæŽ‰ emacs ç„¶åŽå†æ‰§è¡Œä¸‹è¾¹è¿™å¥1echo $PATH è¿™ä¸ªæ—¶å€™ä½ å†æ‰“å¼€å‘çŽ°å·²ç»å˜æˆäº†ä¸‹è¾¹è¿™æ · /usr/bin/usr/local/bin/bin/usr/sbin/sbin è¿™ä¸ªæ—¶å€™ä½ å†æ‰§è¡Œ1which python å‘çŽ°å·²ç»å˜æˆäº†/usr/bin/pythonçŽ°åœ¨çœ‹æ¥ï¼Œç³»ç»ŸåŠ è½½æŸä¸ªåŠŸèƒ½çš„é€»è¾‘ï¼Œå°±æ˜¯ç›´æŽ¥åœ¨è¿™äº›ä¸ªåŠ è½½åˆ—è¡¨ä¸­æ‰¾è¿™äº›ä¸ªåŠŸèƒ½ï¼Œå¦‚æžœé€ä¸ªåŠ è½½äº†ä¸€éå‘çŽ°æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ï¼Œå¦‚æžœç¬¬ä¸€è·¯å¾„ä¸‹æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œç¬¬äºŒè·¯å¾„ä¸‹ä¹Ÿæœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œé‚£ä¹ˆå°±ä¼šç”¨ç¬¬ä¸€è·¯å¾„ä¸‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ›´æ”¹ç¬¬ä¸€è·¯å¾„æ˜¯æœ‰æ„ä¹‰çš„]]></content>
      <tags>
        <tag>python</tag>
        <tag>Django</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NSString && NSData]]></title>
    <url>%2F2016%2F11%2F15%2F2014%2FFoundation%E7%B3%BB%E5%88%97-NSString%2F</url>
    <content type="text"><![CDATA[å†…å­˜ç®€è¿°ï¼ŒCopyä¸ŽStrongå…³é”®å­—å†…å­˜ç®€è¿°ä¸ºäº†æ–¹ä¾¿è§‚å¯Ÿå¼•ç”¨è®¡æ•°ï¼Œè¿™é‡Œåœ¨MRCä¸‹æ¥è¿›è¡Œæµ‹è¯•ã€‚å…ˆé‡æ–°å®šä¹‰NSLogè®©å…¶ä¸æ‰“å°æ—¶é—´æˆ³ã€‚å†ç¼–å†™ä¸€ä¸ªæ‰“å°å®ï¼Œç”¨æ¥æ‰“å°NSStringå¯¹è±¡çš„ç±»ã€å†…å­˜åœ°å€ã€å€¼ã€å¼•ç”¨è®¡æ•°ã€‚12#define NSLog(FORMAT, ...) fprintf(stderr,&quot;%s\n&quot;,[[NSString stringWithFormat:FORMAT, ##__VA_ARGS__] UTF8String]);#define YLog(_var) (&#123; NSString *name = @#_var; NSLog(@&quot;%@: %@ -&gt; %p : %@ %tu&quot;, name, [_var class], _var, _var, [_var retainCount]); &#125;) å†æ–°å»ºä¸€ä¸ªStrObjectç±»ï¼Œç”¨äºŽæµ‹è¯•ã€‚è¯¥ç±»åˆ›å»ºå®žä¾‹æ—¶ï¼Œå°†æ‰“å°ä¸€ä¸ªNSStringï¼Œå†…å®¹ä¸ºâ€Strâ€ã€‚12345678910111213141516171819202122232425@interface StrObject : NSObject@end@implementation StrObject- (id)init &#123; self = [super init]; if (self) &#123; NSLog(@&quot;StrObj Create&quot;); NSString *strA = @&quot;Str&quot;; YLog(strA);&#125;return self;&#125;- (void)dealloc &#123; [super dealloc]; NSLog(@&quot;StrObj Dealloc&quot;);&#125; ä¹‹åŽè¿è¡Œä»¥ä¸‹ä»£ç ã€‚ï¼ˆä¸€èˆ¬æ¥è¯´æˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹å‡ ç§æ–¹æ³•æ¥åˆ›å»ºNSStringå¯¹è±¡ï¼Œå…¶ä¸­stringWithStringåœ¨iOS 6ä¹‹åŽå·²å˜ä¸ºå¤šä½™çš„æ–¹æ³•ï¼ˆredundantï¼‰ï¼Œå› å…¶ç­‰åŒäºŽå­—é¢é‡åˆ›å»ºæ³•ï¼Œä½¿ç”¨è¿™æ–¹æ³•ç¼–è¯‘å™¨ä¼šç»™å‡ºè­¦å‘Šï¼Œï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445//åˆ›å»ºå¹¶é‡Šæ”¾StrObjectå¯¹è±¡StrObject *obj = [StrObject new];[obj release];//åˆ›å»ºä¸€äº›å­—ç¬¦ä¸²NSString *str1 = @&quot;Str&quot;; YLog(str1);NSString *str2 = @&quot;Str&quot;; YLog(str2);NSString *str3 = [NSString stringWithString:@&quot;Str&quot;]; YLog(str3);NSString *str4 = [NSString stringWithFormat:@&quot;Str&quot;]; YLog(str4);NSString *str5 = [str1 retain]; YLog(str5);NSString *str6 = [str1 copy]; YLog(str6);NSString *str7 = [str1 mutableCopy]; YLog(str7);//æ”¹å˜NSStringå˜é‡çš„å­—ç¬¦ä¸²å†…å®¹str1 = @&quot;StrNew&quot;; YLog(str1);str2 = str1; YLog(str2);//åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å¹¶å°†å…¶é‡Šæ”¾NSString *str8 = @&quot;Str&quot;;[str8 retain];[str8 release];[str8 release];YLog(str8);//=======è¾“å‡ºç»“æžœ========//åˆ›å»ºå¹¶é‡Šæ”¾StrObjectå¯¹è±¡//StrObj Create//strA: __NSCFConstantString -&gt; 0x10d2ce088 : Str 18446744073709551615//StrObj Dealloc//åˆ›å»ºä¸€äº›å­—ç¬¦ä¸²//str1: __NSCFConstantString -&gt; 0x10d2ce088 : Str 18446744073709551615//str2: __NSCFConstantString -&gt; 0x10d2ce088 : Str 18446744073709551615//str3: __NSCFConstantString -&gt; 0x10d2ce088 : Str 18446744073709551615//str4: NSTaggedPointerString -&gt; 0xa000000007274533 : Str 18446744073709551615//str5: __NSCFConstantString -&gt; 0x10d2ce088 : Str 18446744073709551615//str6: __NSCFConstantString -&gt; 0x10d2ce088 : Str 18446744073709551615//str7: __NSCFString -&gt; 0x7f951a409c80 : Str 1//æ”¹å˜NSStringå˜é‡çš„å­—ç¬¦ä¸²å†…å®¹//str1: __NSCFConstantString -&gt; 0x10d2ce1e8 : StrNew 18446744073709551615//str2: __NSCFConstantString -&gt; 0x10d2ce1e8 : StrNew 18446744073709551615//åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å¹¶å°†å…¶é‡Šæ”¾//str8: __NSCFConstantString -&gt; 0x10d2ce088 : Str 18446744073709551615 å¯è§‚å¯Ÿåˆ°ï¼Œè™½ç„¶æˆ‘ä»¬é€šè¿‡ä¸åŒæ–¹æ³•åˆ›å»ºäº†ä¸åŒçš„NSStringå¯¹è±¡ï¼Œä½†å­—ç¬¦ä¸²å†…å®¹ä¸€è‡´ï¼Œç»“æžœæ˜¾ç¤ºstrAã€str1ã€str2ã€str3ã€str5ã€str6éƒ½æŒ‡å‘åŒä¸€ä¸ªåœ°å€ã€‚å³ä¾¿@â€Strâ€é¦–å…ˆåœ¨StrObjectå¯¹è±¡ä¸­å‡ºçŽ°ï¼Œèµ‹å€¼ç»™strAï¼Œé‡Šæ”¾äº†ä¹‹åŽï¼Œstr1å’Œå…¶ä»–å¯¹è±¡ä»ç„¶æŒ‡å‘åŒä¸€ä¸ªåœ°å€ã€‚ å°†ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å†…å®¹@â€Str aâ€èµ‹å€¼ç»™str1ï¼Œå¹¶ä¸”å°†str1èµ‹å€¼ç»™str2åŽï¼Œä»Žç»“æžœçœ‹åˆ°str1ã€str2çš„å†…å­˜åœ°å€æ”¹å˜äº†ï¼Œä¸”æŒ‡å‘åŒä¸€ä¸ªåœ°å€ã€‚ ä¹‹åŽåˆ›å»ºçš„str8ï¼Œå¯¹å…¶è¿›è¡Œå¤šæ¬¡releaseåŽï¼Œå†…å­˜åœ°å€ï¼ˆå’ŒstrAåœ°å€ç›¸åŒï¼‰å’ŒretaionCountéƒ½ä¸æ›¾å˜åŒ–ã€‚ __NSCFConstantStringè¿™äº›å¯¹è±¡åœ°å€ç›¸åŒï¼Œæ˜¯å› ä¸ºä»–ä»¬éƒ½æ˜¯NSCFConstantStringå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²å¸¸é‡å¯¹è±¡ï¼Œå¯ä»¥çœ‹åˆ°å…¶isaéƒ½æ˜¯NSCFConstantStringï¼Œè¯¥å¯¹è±¡å­˜å‚¨åœ¨æ ˆä¸Šï¼Œåˆ›å»ºä¹‹åŽç”±ç³»ç»Ÿæ¥ç®¡ç†å†…å­˜é‡Šæ”¾ï¼Œç›¸åŒå†…å®¹çš„NSCFConstantStringå¯¹è±¡åœ°å€ç›¸åŒã€‚è¯¥å¯¹è±¡å¼•ç”¨è®¡æ•°å¾ˆå¤§ï¼Œä¸ºå›ºå®šå€¼ä¸ä¼šå˜åŒ–ï¼Œè¡¨ç¤ºæ— é™è¿è¡Œçš„retainCountï¼Œå¯¹å…¶è¿›è¡Œretainæˆ–releaseä¹Ÿä¸ä¼šå½±å“å…¶å¼•ç”¨è®¡æ•°ã€‚ å½“åˆ›å»ºä¸€ä¸ªNSCFConstantStringå¯¹è±¡æ—¶ï¼Œä¼šæ£€æµ‹è¿™ä¸ªå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¦‚æžœå­˜åœ¨ï¼Œåˆ™ç›´æŽ¥å°†åœ°å€èµ‹å€¼ç»™å˜é‡ï¼›ä¸å­˜åœ¨çš„è¯ï¼Œåˆ™åˆ›å»ºæ–°åœ°å€ï¼Œå†èµ‹å€¼ã€‚ æ€»çš„æ¥è¯´ï¼Œå¯¹äºŽNSCFConstantStringå¯¹è±¡ï¼Œåªè¦å­—ç¬¦ä¸²å†…å®¹ä¸å˜ï¼Œå°±ä¸ä¼šåˆ†é…æ–°çš„å†…å­˜åœ°å€ï¼Œæ— è®ºä½ æ˜¯èµ‹å€¼ã€retainã€copyã€‚è¿™ç§ä¼˜åŒ–åœ¨å¤§é‡ä½¿ç”¨NSStringçš„æƒ…å†µä¸‹å¯ä»¥èŠ‚çœå†…å­˜ï¼Œæé«˜æ€§èƒ½ã€‚ __NSCFStringåœ¨ä¸Šé¢çš„è¾“å‡ºç»“æžœä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°å¦å¤–è¿˜æœ‰ä¸¤ç±»isaåˆ†åˆ«æ˜¯ï¼šNSCFStringå’ŒNSTaggedPointerStringï¼Œå…ˆæ¥çœ‹NSCFStringã€‚ åœ¨æˆ‘çš„ç†è§£ï¼Œ__NSCFStringå¯¹è±¡æ˜¯ä¸€ç§NSStringå­ç±»ï¼Œå­˜å‚¨åœ¨å †ä¸Šï¼Œä¸å±žäºŽå­—ç¬¦ä¸²å¸¸é‡å¯¹è±¡ã€‚è¯¥å¯¹è±¡åˆ›å»ºä¹‹åŽå’Œå…¶ä»–çš„Objå¯¹è±¡ä¸€æ ·å¼•ç”¨è®¡æ•°ä¸º1ï¼Œå¯¹å…¶æ‰§è¡Œretainå’Œreleaseå°†æ”¹å˜å…¶retainCountã€‚123456789101112131415161718192021222324252627NSString *str1 = [NSString stringWithFormat:@&quot;ThisIsAStr&quot;];YLog(str1);NSString *str2 = [str1 retain];YLog(str1);YLog(str2);NSString *str3 = [str1 copy];YLog(str1);YLog(str2);YLog(str3);//è¾“å‡ºç»“æžœ//str1: __NSCFString -&gt; 0x100206c70 : ThisIsAStr 1//str1 retainåŽèµ‹å€¼ç»™str2//str1: __NSCFString -&gt; 0x100206c70 : ThisIsAStr 2//str2: __NSCFString -&gt; 0x100206c70 : ThisIsAStr 2//str3ç”±str1æµ…å¤åˆ¶å¾—æ¥//str1: __NSCFString -&gt; 0x100206c70 : ThisIsAStr 3//str2: __NSCFString -&gt; 0x100206c70 : ThisIsAStr 3//str3: __NSCFString -&gt; 0x100206c70 : ThisIsAStr 3//å¯¹str1è¿›è¡Œrelease//str1: __NSCFString -&gt; 0x100206c70 : ThisIsAStr 2//str2: __NSCFString -&gt; 0x100206c70 : ThisIsAStr 2//str3: __NSCFString -&gt; 0x100206c70 : ThisIsAStr 2 NSTaggedPointerStringè¿™ä¸ªå¯¹è±¡æ˜¯æ ‡ç­¾æŒ‡é’ˆï¼Œè‹¹æžœåœ¨ 64 ä½çŽ¯å¢ƒä¸‹å¯¹NSStringã€NSNumberç­‰å¯¹è±¡åšäº†ä¸€äº›ä¼˜åŒ–ã€‚ç®€å•çš„è¯´å°±æ˜¯æŠŠæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ç›´æŽ¥æ”¾åœ¨äº†æŒ‡é’ˆå˜é‡çš„å†…å­˜åœ°å€ä¸­ï¼Œåœ¨ 64 ä½çŽ¯å¢ƒä¸‹æŒ‡é’ˆå˜é‡çš„å¤§å°è¾¾åˆ°äº† 8 ä½ï¼Œèƒ½å®¹çº³é•¿åº¦è¾ƒå°çš„å†…å®¹ï¼ŒäºŽæ˜¯ä½¿ç”¨äº†æ ‡ç­¾æŒ‡é’ˆæ¥ä¼˜åŒ–æ•°æ®çš„å­˜å‚¨ã€‚ä»Žå…¶å¼•ç”¨è®¡æ•°å¯ä»¥çœ‹å‡ºï¼Œè¿™ç§å¯¹è±¡ä¹Ÿæ˜¯æ— åž çš„retainCountï¼Œè¿™ç§å¯¹è±¡å­˜å‚¨åœ¨æŒ‡é’ˆçš„å†…å®¹ä¸­ã€‚ å¯¹ NSStringå¯¹è±¡æ¥è¯´ï¼Œå½“éžå­—é¢é‡çš„æ•°å­—ï¼Œè‹±æ–‡å­—æ¯å­—ç¬¦ä¸²çš„é•¿åº¦å°äºŽç­‰äºŽ9çš„æ—¶å€™ä¼šè‡ªåŠ¨æˆä¸ºNSTaggedPointerStringç±»åž‹ï¼Œå¦‚æžœæœ‰ä¸­æ–‡æˆ–å…¶ä»–ç‰¹æ®Šç¬¦å·ï¼ˆå¯èƒ½æ˜¯éž ASCII å­—ç¬¦ï¼‰å­˜åœ¨çš„è¯åˆ™ä¼šç›´æŽ¥æˆä¸º__NSCFStringç±»åž‹ã€‚ 12345678910NSString *str1 = @&quot;123456789&quot;; YLog(str1);NSString *str2 = [NSString stringWithFormat:@&quot;123456789&quot;]; YLog(str2);NSString *str3 = [NSString stringWithFormat:@&quot;1234567890&quot;]; YLog(str3);NSString *str4 = [NSString stringWithFormat:@&quot;äº”&quot;]; YLog(str4);//è¾“å‡ºç»“æžœ//str1: __NSCFConstantString -&gt; 0x10a0c5108 : 123456789 18446744073709551615//str2: NSTaggedPointerString -&gt; 0xa1ea1f72bb30ab19 : 123456789 18446744073709551615//str3: __NSCFString -&gt; 0x7f8183c02630 : 1234567890 1//str4: __NSCFString -&gt; 0x7f8183c0fae0 : äº” 1 å£°æ˜ŽNSStingä¸ºå±žæ€§æ—¶ç”¨copyè¿˜æ˜¯strongå£°æ˜ŽNSStringå±žæ€§ä¸€èˆ¬æ¥è¯´ç”¨copyï¼Œå› ä¸ºçˆ¶ç±»æŒ‡é’ˆå¯ä»¥æŒ‡å‘å­ç±»å¯¹è±¡ï¼Œè€ŒNSMutableNSStringæ˜¯NSStringçš„å­ç±»ï¼Œä½¿ç”¨strongçš„è¯è¯¥NSStringå±žæ€§å¯èƒ½æŒ‡å‘ä¸€ä¸ªNSMutableNSStringå¯å˜å¯¹è±¡ï¼Œå¦‚æžœè¿™ä¸ªå¯å˜å¯¹è±¡çš„å†…å®¹åœ¨å¤–éƒ¨è¢«ä¿®æ”¹äº†ï¼Œé‚£è¯¥å±žæ€§æ‰€å±žçš„å¯¹è±¡å¯èƒ½å¯¹æ­¤æ¯«ä¸çŸ¥æƒ…ã€‚ å…ˆæ¥çœ‹æ­£å¸¸çš„æƒ…å†µï¼ŒNSStringå±žæ€§æŒ‡å‘ä¸€ä¸ªä¸å¯å˜å¯¹è±¡ã€‚123456789101112131415161718192021222324//Personå¯¹è±¡@interface Person : NSObject@property (nonatomic, strong) NSString *name;@end@implementation Person@end//æµ‹è¯•ä»£ç NSString *strA = @&quot;Susan_Miller&quot;;Person *personA = [Person new];personA.name = strA;YLog(strA);YLog(personA.name);strA = @&quot;Susan_Test&quot;;YLog(strA);YLog(personA.name);//è¾“å‡ºç»“æžœ//strA: __NSCFConstantString -&gt; 0x102f20108 : Susan_Miller 18446744073709551615//personA.name: __NSCFConstantString -&gt; 0x102f20108 : Susan_Miller 18446744073709551615//strA: __NSCFConstantString -&gt; 0x102f20148 : Susan_Test 18446744073709551615//personA.name: __NSCFConstantString -&gt; 0x102f20108 : Susan_Miller 18446744073709551615 ä»Žç»“æžœå¯è§‚å¯Ÿåˆ°æ­¤æ—¶çš„nameå±žæ€§æŒ‡å‘ä¸€ä¸ªä¸å¯å˜çš„å­—ç¬¦ä¸²å¸¸é‡ï¼Œå°±ç®—strAå› ä¸ºå†…å®¹å˜åŒ–è€Œç”Ÿæˆäº†æ–°åœ°å€ï¼Œå¯¹nameå±žæ€§ä¸ä¼šæœ‰å½±å“ï¼Œæ— è®ºå£°æ˜Žnameå±žæ€§æ—¶å…³é”®å­—ç”¨copyè¿˜æ˜¯strongï¼ˆä¸å¯å˜å¯¹è±¡çš„copyæ˜¯æµ…å¤åˆ¶ï¼Œstrongä¹Ÿæ˜¯æŒ‡é’ˆå¼•ç”¨ï¼Œæ‰€ä»¥strAå†…å®¹æ”¹å˜åŽåœ°å€åŒæ—¶æ”¹å˜ï¼Œä¸ä¼šå½±å“nameå±žæ€§ï¼‰ã€‚ å†æ¥çœ‹nameå±žæ€§æŒ‡å‘ä¸€ä¸ªå¯å˜å¯¹è±¡çš„æƒ…å†µï¼Œå±žæ€§å…³é”®å­—ç”¨strongã€‚12345678910111213141516171819//å±žæ€§å…³é”®å­—ä¸ºstrong@property (nonatomic, strong) NSString *name;//æµ‹è¯•ä»£ç NSMutableString *strB = [@&quot;Susan_Miller&quot; mutableCopy];Person *personB = [Person new];personB.name = strB;YLog(strB);YLog(personB.name);[strB setString:@&quot;Susan_Test&quot;];YLog(strB);YLog(personB.name);//è¾“å‡ºç»“æžœ//strB: __NSCFString -&gt; 0x7ff9b2c1a090 : Susan_Miller 2//personB.name: __NSCFString -&gt; 0x7ff9b2c1a090 : Susan_Miller 2//strB: __NSCFString -&gt; 0x7ff9b2c1a090 : Susan_Test 2//personB.name: __NSCFString -&gt; 0x7ff9b2c1a090 : Susan_Test 2 ä»Žç»“æžœå¯çœ‹å‡ºï¼Œnameå±žæ€§æŒ‡å‘äº†ä¸€ä¸ªå¯å˜å¯¹è±¡strBï¼Œå½“strBçš„å†…å®¹æ”¹å˜æ—¶ï¼Œnameå±žæ€§ä¹Ÿè·Ÿç€æ”¹å˜ï¼Œè€Œpersonå¯¹æ­¤ä¸çŸ¥æƒ…ï¼Œå¯èƒ½ä¼šäº§ç”Ÿé”™è¯¯ã€‚ ç»§ç»­æ¥çœ‹nameå±žæ€§å…³é”®å­—ä½¿ç”¨copyæ—¶çš„æƒ…å†µã€‚12345678910111213141516171819//å±žæ€§å…³é”®å­—ä¸ºcopy@property (nonatomic, copy) NSString *name;//æµ‹è¯•ä»£ç NSMutableString *strB = [@&quot;Susan_Miller&quot; mutableCopy];Person *personB = [Person new];personB.name = strB;YLog(strB);YLog(personB.name);[strB setString:@&quot;Susan_Test&quot;];YLog(strB);YLog(personB.name);//è¾“å‡ºç»“æžœ//strB: __NSCFString -&gt; 0x7fb15af31360 : Susan_Miller 1**//personB.name: __NSCFString -&gt; 0x7fb15af26620 : Susan_Miller 1**//strB: __NSCFString -&gt; 0x7fb15af31360 : Susan_Test 1**//personB.name: __NSCFString -&gt; 0x7fb15af26620 : Susan_Miller 1** æ­¤æ—¶ï¼Œå› ä¸ºå¯¹NSMutableStringè¿›è¡Œcopyæ˜¯æ·±å¤åˆ¶ï¼ˆå³å†…å®¹æ‹·è´ï¼‰ï¼Œæ‰€ä»¥nameå±žæ€§ä¸ŽstrBæŒ‡å‘ä¸åŒçš„åœ°å€ï¼ŒstrBçš„å†…å®¹æ›´æ”¹ä¸ä¼šå½±å“åˆ°nameå±žæ€§ã€‚ æ‰€ä»¥ï¼Œå£°æ˜ŽNSStringä¸ºå±žæ€§æ—¶ï¼Œå¦‚æžœå¸Œæœ›ä¿æŠ¤å±žæ€§å°è£…æ€§ä¸å—å¤–ç•Œå½±å“ï¼Œåˆ™åº”è¯¥ä½¿ç”¨copyå…³é”®å­—ï¼Œè®©æ‰€å±žå¯¹è±¡æŒæœ‰çš„æ˜¯ä¸€ä»½â€œä¸å¯å˜â€ï¼ˆimmutableï¼‰å‰¯æœ¬ï¼Œä¸ç”¨æ‹…å¿ƒå­—ç¬¦ä¸²å†…å®¹æ— æ„é—´å˜åŠ¨ã€‚ åŽ»é™¤å­—ç¬¦ä¸²ä¸­çš„ä¸­æ–‡1234567891011121314151617181920212223- (NSString *)removeChinese:(NSString *)string &#123; NSString *chi = [self getChineseStringWithString:string]; return [string stringByReplacingOccurrencesOfString:chi withString:@&quot;&quot;];&#125;- (NSString *)getChineseStringWithString:(NSString *)string&#123; //(unicodeä¸­æ–‡ç¼–ç èŒƒå›´æ˜¯0x4e00~0x9fa5) for (int i = 0; i &lt; string.length; i++) &#123; int utfCode = 0; void *buffer = &amp;utfCode; NSRange range = NSMakeRange(i, 1); BOOL b = [string getBytes:buffer maxLength:2 usedLength:NULL encoding:NSUTF16LittleEndianStringEncoding options:NSStringEncodingConversionExternalRepresentation range:range remainingRange:NULL]; if (b &amp;&amp; (utfCode &gt;= 0x4e00 &amp;&amp; utfCode &lt;= 0x9fa5)) &#123; return [string substringFromIndex:i]; &#125; &#125; return nil;&#125; - (BOOL)containsString:(NSString *)str NS_AVAILABLE(10_10, 8_0);//7ä»¥ä¸‹ä¸å¯ç”¨NSStringçš„å„ç§è½¬æ¢NSData ä¸Ž NSString12345 NSData --&gt; NSString NSString *aString = [[NSString alloc] initWithData:adata encoding:NSUTF8StringEncoding]; NSString --&gt; NSData NSString *aString = @&quot;1234&quot;; NSData *aData = [aString dataUsingEncoding: NSUTF8StringEncoding]; NSStringè½¬åŒ–ä¸ºUNICODE Stringï¼š1234(NSString*)fname ï¼ @â€œTestâ€;char fnameStr[10];memcpy(fnameStr, [fname cStringUsingEncoding:NSUnicodeStringEncoding], 2*([fname length]));ä¸Žstrcpyç›¸æ¯”ï¼Œmemcpyå¹¶ä¸æ˜¯é‡åˆ°&apos;\0&apos;å°±ç»“æŸï¼Œè€Œæ˜¯ä¸€å®šä¼šæ‹·è´å®Œnä¸ªå­—èŠ‚ NSString è½¬åŒ–ä¸º char *12NSString * strï¼ @â€œTestâ€;const char * a =[str UTF8String]; char * è½¬åŒ–ä¸º NSString1NSString *str=[NSString stringWithCString encoding:NSUTF8StringEncoding]; char * è½¬åŒ– NSData12æ–¹æ³•ä¸€ï¼š char * a = (char*)malloc(sizeof(byte)*16); NSData *data = [NSData dataWithBytes: a length:strlen(a)]; æ–¹æ³•äºŒï¼š è½¬æ¢ä¸ºNSStringï¼š - (id)initWithUTF8String:(const char *)bytes ç„¶åŽç”¨NSStringçš„ - (NSData *)dataUsingEncoding:(NSStringEncoding)encoding NSData è½¬åŒ– char *12NSData data ï¼› char* a=[data bytes]; NSString è½¬åŒ– NSURL123//NSURL *url = [NSURL URLWithString:[str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding ]];NSString *urlString=[@&quot;http://www.google.com/search?client=safari&amp;rls=en&amp;q=æœç´¢&amp;ie=UTF-8&amp;oe=UTF-8&quot; stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; NSURL è½¬åŒ– NSString123NSURL *url=[NSURL URLWithString:urlString];NSString *s=[[url absoluteString] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; NSData ä¸Ž Byte1234567 NSData --&gt; Byte NSString *testString = @&quot;1234567890&quot;; NSData *testData = [testString dataUsingEncoding: NSUTF8StringEncoding]; Byte *testByte = (Byte *)[testData bytes]; Byte --&gt; NSData Byte byte[] = &#123;0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23&#125;; NSData *adata = [[NSData alloc] initWithBytes:byte length:24]; NSData ä¸Ž UIImage12345678910 NSData --&gt; UIImage UIImage *aimage = [UIImage imageWithData: imageData]; //ä¾‹ï¼šä»Žæœ¬åœ°æ–‡ä»¶æ²™ç›’ä¸­å–å›¾ç‰‡å¹¶è½¬æ¢ä¸ºNSData NSString *path = [[NSBundle mainBundle] bundlePath]; NSString *name = [NSString stringWithFormat:@&quot;ceshi.png&quot;]; NSString *finalPath = [path stringByAppendingPathComponent:name]; NSData *imageData = [NSData dataWithContentsOfFile: finalPath]; UIImage *aimage = [UIImage imageWithData: imageData]; UIImageï¼&gt; NSData NSData *imageData = UIImagePNGRepresentation(aimae); NSData ä¸Ž NSMutableData1234 NSData --&gt; MSMutableData NSData *data=[[NSData alloc]init]; NSMutableData *mdata=[[NSMutableData alloc]init]; mdata=[NSData dataWithData:data]; NSDataåˆå¹¶ä¸ºä¸€ä¸ªNSMutableData12345678910111213141516171819202122232425262728- (NSString *)filePathWithName:(NSString *)filename&#123;NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);NSString *documentsDirectory = [paths objectAtIndex:0];return [documentsDirectory stringByAppendingPathComponent:filename];&#125;- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;//éŸ³é¢‘æ–‡ä»¶è·¯å¾„NSString *mp3Path1 = [[NSBundle mainBundle] pathForResource:@&quot;1&quot; ofType:@&quot;mp3&quot;];NSString *mp3Path2 = [[NSBundle mainBundle] pathForResource:@&quot;2&quot; ofType:@&quot;mp3&quot;];//éŸ³é¢‘æ•°æ®NSData *sound1Data = [[NSData alloc] initWithContentsOfFile: mp3Path1];NSData *sound2Data = [[NSData alloc] initWithContentsOfFile: mp3Path2];//åˆå¹¶éŸ³é¢‘NSMutableData *sounds = [NSMutableData alloc];[sounds appendData:sound1Data];[sounds appendData:sound2Data];//ä¿å­˜éŸ³é¢‘NSLog(@&quot;data length:%d&quot;, [sounds length]);[sounds writeToFile:[self filePathWithName:@&quot;tmp.mp3&quot;] atomically:YES];[window makeKeyAndVisible];return YES;&#125; è½¬è¯‘å­—ç¬¦ è½¬ä¹‰å­—ç¬¦ æ„ä¹‰ ASCIIç å€¼(åè¿›åˆ¶)\a å“é“ƒ(BEL) 007\b é€€æ ¼(BS) 008\f æ¢é¡µ(FF) 012\n æ¢è¡Œ(LF) 010\r å›žè½¦(CR) 013\t æ°´å¹³åˆ¶è¡¨(HT) 009\v åž‚ç›´åˆ¶è¡¨(VT) 011\ åæ–œæ  092\? é—®å·å­—ç¬¦ 063\â€™ å•å¼•å·å­—ç¬¦ 039\â€ åŒå¼•å·å­—ç¬¦ 034\0 ç©ºå­—ç¬¦(NULL) 000\ddd ä»»æ„å­—ç¬¦ ä¸‰ä½å…«è¿›åˆ¶\xhh ä»»æ„å­—ç¬¦ äºŒä½åå…­è¿›åˆ¶\a:èœ‚é¸£ï¼Œå“é“ƒ\b:å›žé€€ï¼šå‘åŽé€€ä¸€æ ¼\f:æ¢é¡µ\n:æ¢è¡Œï¼Œå…‰æ ‡åˆ°ä¸‹è¡Œè¡Œé¦–\r:å›žè½¦ï¼Œå…‰æ ‡åˆ°æœ¬è¡Œè¡Œé¦–\t:æ°´å¹³åˆ¶è¡¨\v:åž‚ç›´åˆ¶è¡¨\:åæ–œæ \â€™:å•å¼•å·\â€:åŒå¼•å·\?:é—®å·\ddd:ä¸‰ä½å…«è¿›åˆ¶\xhh:äºŒä½åå…­è¿›åˆ¶\0:ç©ºå­—ç¬¦(NULL),ä»€ä¹ˆéƒ½ä¸åšæ³¨ï¼š1ï¼Œ\våž‚ç›´åˆ¶è¡¨å’Œ\fæ¢é¡µç¬¦å¯¹å±å¹•æ²¡æœ‰ä»»ä½•å½±å“ï¼Œä½†ä¼šå½±å“æ‰“å°æœºæ‰§è¡Œå“åº”æ“ä½œã€‚2ï¼Œ\nå…¶å®žåº”è¯¥å«å›žè½¦æ¢è¡Œã€‚æ¢è¡Œåªæ˜¯æ¢ä¸€è¡Œï¼Œä¸æ”¹å˜å…‰æ ‡çš„æ¨ªåæ ‡ï¼›å›žè½¦åªæ˜¯å›žåˆ°è¡Œé¦–ï¼Œä¸æ”¹å˜å…‰æ ‡çš„çºµåæ ‡ã€‚3ï¼Œ\t å…‰æ ‡å‘å‰ç§»åŠ¨å››æ ¼æˆ–å…«æ ¼ï¼Œå¯ä»¥åœ¨ç¼–è¯‘å™¨é‡Œè®¾ç½®4ï¼Œ\â€™ åœ¨å­—ç¬¦é‡Œï¼ˆå³å•å¼•å·é‡Œï¼‰ä½¿ç”¨ã€‚åœ¨å­—ç¬¦ä¸²é‡Œ(å³åŒå¼•å·é‡Œ)ä¸éœ€è¦ï¼Œåªè¦ç”¨ â€˜ å³å¯ã€‚5ï¼Œ\? å…¶å®žä¸å¿…è¦ã€‚åªè¦ç”¨ ? å°±å¯ä»¥äº†ï¼ˆåœ¨windows VC6 å’Œtc2 ä¸­éªŒè¯ï¼‰ã€‚ å¸¸ç”¨çš„å¯Œæ–‡æœ¬å•çº¯æ”¹å˜ä¸€å¥è¯ä¸­çš„æŸäº›å­—çš„é¢œè‰²ï¼ˆä¸€ç§é¢œè‰²ï¼‰1234567891011121314151617181920/*** å•çº¯æ”¹å˜ä¸€å¥è¯ä¸­çš„æŸäº›å­—çš„é¢œè‰²ï¼ˆä¸€ç§é¢œè‰²ï¼‰** @param color éœ€è¦æ”¹å˜æˆçš„é¢œè‰²* @param totalStr æ€»çš„å­—ç¬¦ä¸²* @param subArray éœ€è¦æ”¹å˜é¢œè‰²çš„æ–‡å­—æ•°ç»„(è¦æ˜¯æœ‰ç›¸åŒçš„ åªå–ç¬¬ä¸€ä¸ª)** @return ç”Ÿæˆçš„å¯Œæ–‡æœ¬*/+ (NSMutableAttributedString *)ls_changeCorlorWithColor:(UIColor *)color TotalString:(NSString *)totalStr SubStringArray:(NSArray *)subArray &#123;NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:totalStr];for (NSString *rangeStr in subArray) &#123;NSRange range = [totalStr rangeOfString:rangeStr options:NSBackwardsSearch];[attributedStr addAttribute:NSForegroundColorAttributeName value:color range:range];&#125;return attributedStr;&#125; æ”¹å˜æ¯è¡Œçš„å­—é—´è·123456789101112131415161718/*** å•çº¯æ”¹å˜å¥å­çš„å­—é—´è·ï¼ˆéœ€è¦ &lt;CoreText/CoreText.h&gt;ï¼‰** @param totalString éœ€è¦æ›´æ”¹çš„å­—ç¬¦ä¸²* @param space å­—é—´è·** @return ç”Ÿæˆçš„å¯Œæ–‡æœ¬*/+ (NSMutableAttributedString *)ls_changeSpaceWithTotalString:(NSString *)totalString Space:(CGFloat)space &#123;NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:totalString];long number = space;CFNumberRef num = CFNumberCreate(kCFAllocatorDefault,kCFNumberSInt8Type,&amp;number);[attributedStr addAttribute:(id)kCTKernAttributeName value:(__bridge id)num range:NSMakeRange(0,[attributedStr length])];CFRelease(num);return attributedStr;&#125; æ”¹å˜è¡Œé—´è·12345678910111213141516171819/*** å•çº¯æ”¹å˜æ®µè½çš„è¡Œé—´è·** @param totalString éœ€è¦æ›´æ”¹çš„å­—ç¬¦ä¸²* @param lineSpace è¡Œé—´è·** @return ç”Ÿæˆçš„å¯Œæ–‡æœ¬*/+ (NSMutableAttributedString *)ls_changeLineSpaceWithTotalString:(NSString *)totalString LineSpace:(CGFloat)lineSpace &#123;NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:totalString];NSMutableParagraphStyle * paragraphStyle = [[NSMutableParagraphStyle alloc] init];[paragraphStyle setLineSpacing:lineSpace];[attributedStr addAttribute:NSParagraphStyleAttributeName value:paragraphStyle range:NSMakeRange(0, [totalString length])];return attributedStr;&#125; åŒæ—¶æ›´æ”¹è¡Œé—´è·å’Œå­—é—´è·12345678910111213141516171819202122232425/*** åŒæ—¶æ›´æ”¹è¡Œé—´è·å’Œå­—é—´è·** @param totalString éœ€è¦æ”¹å˜çš„å­—ç¬¦ä¸²* @param lineSpace è¡Œé—´è·* @param textSpace å­—é—´è·** @return ç”Ÿæˆçš„å¯Œæ–‡æœ¬*/+ (NSMutableAttributedString *)ls_changeLineAndTextSpaceWithTotalString:(NSString *)totalString LineSpace:(CGFloat)lineSpace textSpace:(CGFloat)textSpace &#123;NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:totalString];NSMutableParagraphStyle * paragraphStyle = [[NSMutableParagraphStyle alloc] init];[paragraphStyle setLineSpacing:lineSpace];[attributedStr addAttribute:NSParagraphStyleAttributeName value:paragraphStyle range:NSMakeRange(0, [totalString length])];long number = textSpace;CFNumberRef num = CFNumberCreate(kCFAllocatorDefault,kCFNumberSInt8Type,&amp;number);[attributedStr addAttribute:(id)kCTKernAttributeName value:(__bridge id)num range:NSMakeRange(0,[attributedStr length])];CFRelease(num);return attributedStr;&#125; æ›´æ”¹æŸäº›æ–‡å­—çš„é¢œè‰²å¹¶ä¿®æ”¹å…¶å­—ä½“ï¼Œçªå‡ºé‡ç‚¹å¼ºè°ƒ1234567891011121314151617181920212223/*** æ”¹å˜æŸäº›æ–‡å­—çš„é¢œè‰² å¹¶å•ç‹¬è®¾ç½®å…¶å­—ä½“** @param font è®¾ç½®çš„å­—ä½“* @param color é¢œè‰²* @param totalString æ€»çš„å­—ç¬¦ä¸²* @param subArray æƒ³è¦å˜è‰²çš„å­—ç¬¦æ•°ç»„** @return ç”Ÿæˆçš„å¯Œæ–‡æœ¬*/+ (NSMutableAttributedString *)ls_changeFontAndColor:(UIFont *)font Color:(UIColor *)color TotalString:(NSString *)totalString SubStringArray:(NSArray *)subArray &#123;NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:totalString];for (NSString *rangeStr in subArray) &#123;NSRange range = [totalString rangeOfString:rangeStr options:NSBackwardsSearch];[attributedStr addAttribute:NSForegroundColorAttributeName value:color range:range];[attributedStr addAttribute:NSFontAttributeName value:font range:range];&#125;return attributedStr; å¯Œæ–‡æœ¬ç›¸å…³å±žæ€§æ±‡æ€» NSFontAttributeName ï¼šå­—ä½“å­—å· valueå€¼ï¼šUIFontç±»åž‹ NSParagraphStyleAttributeName ï¼š æ®µè½æ ·å¼ valueå€¼ï¼šNSParagraphStyleç±»åž‹ï¼ˆå…¶å±žæ€§å¦‚ä¸‹ï¼‰ lineSpacing è¡Œé—´è·(å…·ä½“ç”¨æ³•å¯æŸ¥çœ‹ä¸Šé¢çš„è®¾ç½®è¡Œé—´è·API) paragraphSpacing æ®µè½é—´è· alignment å¯¹é½æ–¹å¼ firstLineHeadIndent æŒ‡å®šæ®µè½å¼€å§‹çš„ç¼©è¿›åƒç´  headIndent è°ƒæ•´å…¨éƒ¨æ–‡å­—çš„ç¼©è¿›åƒç´  NSForegroundColorAttributeName å­—ä½“é¢œè‰² valueå€¼ï¼šUIColorç±»åž‹ NSBackgroundColorAttributeName èƒŒæ™¯é¢œè‰² valueå€¼ï¼šUIColorç±»åž‹ NSObliquenessAttributeName å­—ä½“ç²—å€¾æ–œ valueå€¼ï¼šNSNumberç±»åž‹ NSExpansionAttributeName å­—ä½“åŠ ç²— valueå€¼ï¼šNSNumberç±»åž‹(æ¯”ä¾‹) 0å°±æ˜¯ä¸å˜ 1å¢žåŠ ä¸€å€ NSKernAttributeName å­—é—´è· valueå€¼ï¼šCGFloatç±»åž‹ NSUnderlineStyleAttributeName ä¸‹åˆ’çº¿ valueå€¼ï¼š1æˆ–0 NSUnderlineColorAttributeName ä¸‹åˆ’çº¿é¢œè‰² valueå€¼ï¼šUIColorç±»åž‹ NSStrikethroughStyleAttributeName åˆ é™¤çº¿ valueå€¼ï¼š1æˆ–0 NSStrikethroughColorAttributeName åˆ é™¤çº¿é¢œè‰² valueå€¼ï¼šUIColorç±»åž‹ NSStrokeColorAttributeName å­—ä½“é¢œè‰² valueå€¼ï¼šUIColorç±»åž‹ NSStrokeWidthAttributeName å­—ä½“æè¾¹ valueå€¼ï¼šCGFloat NSLigatureAttributeName è¿žç¬”å­— valueå€¼ï¼š1æˆ–0 NSShadowAttributeName é˜´å½± valueå€¼ï¼šNSShawdowç±»åž‹ï¼ˆä¸‹é¢æ˜¯å…¶å±žæ€§ï¼‰ shadowOffset å½±å­ä¸Žå­—ç¬¦ä¸²çš„åç§»é‡ shadowBlurRadius å½±å­çš„æ¨¡ç³Šç¨‹åº¦ shadowColor å½±å­çš„é¢œè‰² NSTextEffectAttributeName è®¾ç½®æ–‡æœ¬ç‰¹æ®Šæ•ˆæžœ,ç›®å‰åªæœ‰å›¾ç‰ˆå°åˆ·æ•ˆæžœå¯ç”¨ valueå€¼ï¼šNSStringç±»åž‹ NSAttachmentAttributeName è®¾ç½®æ–‡æœ¬é™„ä»¶ valueå€¼ï¼šNSTextAttachmentç±»åž‹ï¼ˆæ²¡ç ”ç©¶è¿‡ï¼Œå¯è‡ªè¡Œç™¾åº¦ç ”ç©¶ï¼‰ NSLinkAttributeName é“¾æŽ¥ valueå€¼ï¼šNSURL (preferred) or NSStringç±»åž‹ NSBaselineOffsetAttributeName åŸºå‡†çº¿åç§» valueå€¼ï¼šNSNumberç±»åž‹ NSWritingDirectionAttributeName æ–‡å­—æ–¹å‘ åˆ†åˆ«ä»£è¡¨ä¸åŒçš„æ–‡å­—å‡ºçŽ°æ–¹å‘ valueå€¼ï¼š@[@(1),@(2)] NSVerticalGlyphFormAttributeName æ°´å¹³æˆ–è€…ç«–ç›´æ–‡æœ¬ åœ¨iOSæ²¡åµç”¨ï¼Œä¸æ”¯æŒç«–ç‰ˆ valueå€¼ï¼š1ç«–ç›´ 0æ°´å¹³ èŽ·å–æ±‰å­—çš„æ‹¼éŸ³12345678910111213+ (NSString *)transform:(NSString *)chinese&#123;//å°†NSStringè£…æ¢æˆNSMutableStringNSMutableString *pinyin = [chinese mutableCopy];//å°†æ±‰å­—è½¬æ¢ä¸ºæ‹¼éŸ³(å¸¦éŸ³æ ‡)CFStringTransform((__bridge CFMutableStringRef)pinyin, NULL, kCFStringTransformMandarinLatin, NO);NSLog(@&quot;%@&quot;, pinyin);//åŽ»æŽ‰æ‹¼éŸ³çš„éŸ³æ ‡CFStringTransform((__bridge CFMutableStringRef)pinyin, NULL, kCFStringTransformStripCombiningMarks, NO);NSLog(@&quot;%@&quot;, pinyin);//è¿”å›žæœ€è¿‘ç»“æžœreturn pinyin;&#125;]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Djangoéƒ¨ç½²+apache+mod_wsgi]]></title>
    <url>%2F2016%2F11%2F09%2F2016%2FDjango%E9%83%A8%E7%BD%B2-apache-mod-wsgi%2F</url>
    <content type="text"><![CDATA[Djangoçš„éƒ¨ç½²(apache + mod_wsgi)æ¦‚å¿µè§£æžDjangoDjangoæ˜¯ä¸€ä¸ªæ¡†æž¶ï¼Œå¯ä»¥ç”¨pythonæ¥å¼€å‘webåº”ç”¨ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯ç‹¬ç«‹çš„å¼€å‘webï¼Œåœ¨UIæ”¾é¢ä¾ç„¶éœ€è¦ä¾é html+css+jsï¼Œç”¨è¿™äº›æ¥æ­å»ºç•Œé¢ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥ä½¿ç”¨djangoæ— ç¼çš„ä½¿ç”¨pythonçš„é€»è¾‘åŠŸèƒ½ï¼Œæ¯”å¦‚ä½¿ç”¨pythonæ¥å¤„ç†æ•°æ®ï¼Œç„¶åŽäº¤ç»™é¡µé¢æ¥è¿›è¡Œå±•ç¤º Djangoæœ¬èº«æ˜¯æœ‰webæœåŠ¡å™¨çš„ï¼Œä½†æ˜¯è¿™ä¸ªæœåŠ¡å™¨åªèƒ½åœ¨æœ¬æœºæä¾›webæœåŠ¡ï¼Œå…¶ä½œç”¨ä¸»è¦æ˜¯ç”¨æ¥åšæµ‹è¯•ï¼Œå¦‚æžœæƒ³å…¶ä»–æœºå™¨ä¹Ÿèƒ½è®¿é—®ä½ çš„webè¿™ä¸ªæ—¶å€™ä½ è¿˜éœ€è¦å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæä¾›ç½‘ç»œè®¿é—®çš„åŠŸèƒ½ apacheApacheæ˜¯ä¸“é—¨ç”¨äº†æä¾›HTTPæœåŠ¡çš„ï¼Œä»¥åŠç›¸å…³é…ç½®çš„ï¼ˆä¾‹å¦‚è™šæ‹Ÿä¸»æœºã€URLè½¬å‘ç­‰ç­‰ï¼‰ mod_wsgimod_wsgiçš„ç›®çš„æ˜¯å®žçŽ°ä¸€ä¸ªç®€å•çš„ä½¿ç”¨Apacheæ¨¡å—å¯ä»¥ä¸¾åŠžä»»ä½•Pythonåº”ç”¨ç¨‹åºæ”¯æŒPythonçš„WSGIæŽ¥å£ã€‚è¯¥æ¨¡å—å°†é€‚ç”¨äºŽä¸»æœºçš„é«˜æ€§èƒ½ç”Ÿäº§çš„ç½‘ç«™ï¼Œä»¥åŠä¸€èˆ¬çš„è‡ªæˆ‘ç®¡ç†ä¸ªäººç½‘ç«™çš„ç½‘é¡µå¯„å­˜æœåŠ¡è¿è¡Œã€‚ï¼‰ è™šæ‹Ÿä¸»æœºåœ¨apacheä¸Šé…ç½®è™šæ‹Ÿä¸»æœºï¼Œè¿™å°†åœ¨ä½ macä¸Šæä¾›ä¸€ä¸ªç®€å•ç®¡ç†å¤šä¸ªç½‘ç«™çš„æ¡†æž¶ é™æ€æ–‡ä»¶django1.3æ–°åŠ å…¥äº†ä¸€ä¸ªé™æ€èµ„æºç®¡ç†çš„appï¼Œdjango.contrib.staticfilesã€‚åœ¨ä»¥å¾€çš„djangoç‰ˆæœ¬ä¸­ï¼Œé™æ€èµ„æºçš„ç®¡ç†ä¸€å‘éƒ½æ˜¯ä¸ªé—®é¢˜ã€‚éƒ¨åˆ†appå‘å¸ƒçš„æ—¶å€™ä¼šå¸¦ä¸Šé™æ€èµ„æºæ–‡ä»¶ï¼Œåœ¨éƒ¨ç½²çš„æ—¶å€™ä½ å¿…é¡»æ‰‹åŠ¨ä»Žå„ä¸ªappä¸­å°†è¿™äº›é™æ€èµ„æºæ–‡ä»¶å¤åˆ¶åˆ°åŒä¸€ä¸ªstaticç›®å½•ã€‚åœ¨å¼•å…¥staticfilesåŽï¼Œä½ åªéœ€è¦æ‰§è¡Œ./manage.py collectstaticå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†æ‰€ç”¨åˆ°appä¸­çš„é™æ€èµ„æºå¤åˆ¶åˆ°åŒä¸€ç›®å½•ã€‚staticfilesçš„å¼•å…¥ï¼Œæ–¹ä¾¿äº†djangoé™æ€æ–‡ä»¶çš„ç®¡ç†ï¼Œä¸è¿‡æ„Ÿè§‰staticfilesçš„æ–‡æ¡£å†™çš„å¹¶ä¸æ˜¯å¤ªæ¸…æ¥šï¼Œåˆæ¬¡ä½¿ç”¨çš„æ—¶å€™è¿˜æ˜¯è®©æˆ‘æœ‰äº›å›°æƒ‘ã€‚ä¸‹é¢ç®€å•çš„ä»‹ç»ä¸€ä¸‹staticfilesçš„ä¸»è¦é…ç½®ï¼š STATIC_ROOTï¼šè¿è¡Œmanage.py collectstaticåŽé™æ€æ–‡ä»¶å°†å¤åˆ¶åˆ°çš„ç›®å½•ã€‚æ³¨æ„ï¼šä¸è¦æŠŠä½ é¡¹ç›®çš„é™æ€æ–‡ä»¶æ”¾åˆ°è¿™ä¸ªç›®å½•ã€‚è¿™ä¸ªç›®å½•åªæœ‰åœ¨è¿è¡Œcollectstaticæ—¶æ‰ä¼šç”¨åˆ°ã€‚æˆ‘æœ€å¼€å§‹æƒ³å½“ç„¶çš„ä»¥ä¸ºè¿™ä¸ªç›®å½•å’ŒMEDIA_ROOTçš„ä½œç”¨æ˜¯ç›¸åŒçš„ï¼Œè‡´ä½¿åœ¨å¼€å‘çŽ¯å¢ƒä¸‹ä¸€ç›´æ— æ³•æ‰¾åˆ°é™æ€æ–‡ä»¶ã€‚ STATIC_URLï¼šè®¾ç½®çš„static fileçš„èµ·å§‹urlï¼Œè¿™ä¸ªåªå¯ä»¥åœ¨templateé‡Œé¢å¼•ç”¨åˆ°ã€‚è¿™ä¸ªå‚æ•°å’ŒMEDIA_URLçš„å«ä¹‰å·®ä¸å¤šã€‚ STATICFILES_DIRSï¼šé™¤äº†å„ä¸ªappçš„staticç›®å½•ä»¥å¤–è¿˜éœ€è¦ç®¡ç†çš„é™æ€æ–‡ä»¶ä½ç½®ï¼Œæ¯”å¦‚é¡¹ç›®å…¬å…±çš„é™æ€æ–‡ä»¶å·®ä¸å¤šã€‚å’ŒTEMPLATE_DIRSçš„å«ä¹‰å·®ä¸å¤šã€‚å„ä¸ªAPPä¸‹static/ç›®å½•ä¸‹çš„é™æ€æ–‡ä»¶djangoçš„å¼€å‘æœåŠ¡å™¨ä¼šè‡ªåŠ¨æ‰¾åˆ°ï¼Œè¿™ç‚¹å’Œä»¥å‰APPä¸‹çš„templatesç›®å½•å·®ä¸å¤šã€‚åœ¨urls.pyä¸­åŠ å…¥é™æ€æ–‡ä»¶å¤„ç†çš„ä»£ç  123from django.contrib.staticfiles.urls import staticfiles_urlpatterns# ... the rest of your URLconf goes here ...urlpatterns += staticfiles_urlpatterns() å„ç§ç›®å½• djangoé¡¹ç›®ç›®å½• é™æ€æ–‡ä»¶ç›®å½• é”™è¯¯æ—¥å¿—ç›®å½• è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹sitename.conf â€“&gt; wsgi.py â€“&gt; settings.py â€“&gt; urls.py â€“&gt; views.py é…ç½®çš„è¿‡ç¨‹ pythonæ˜¯ç³»ç»Ÿè‡ªå¸¦ä¸éœ€è¦å®‰è£… apacheç³»ç»Ÿè‡ªå¸¦ä¸éœ€è¦å®‰è£…mod_wsgiå®‰è£… brew tap homebrew/apache brew install mod_wsgi djangoå®‰è£…åŠå·¥ç¨‹åˆ›å»º å®‰è£…pipsudo easy_install pip åˆ©ç”¨pipå®‰è£…djangoï¼ˆsudo) pip install Django æ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸ 123456&gt;&gt;&gt; import django&gt;&gt;&gt; django.VERSION(1, 7, 6, &apos;final&apos;, 0)&gt;&gt;&gt; &gt;&gt;&gt; django.get_version()&apos;1.7.6&apos; åˆ›å»ºå·¥ç¨‹ 1django-admin.py startproject project-name åˆ›å»ºappåˆ°å·¥ç¨‹çš„ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°namage.pyè¿™ä¸ªæ–‡ä»¶ 1python manage.py startapp app-name apacheé…ç½®/etc/apache2/httpd.confè¿™ä¸ªæ–‡å†… LoadModule wsgi_module /usr/local/Cellar/mod_wsgi/4.5.6/libexec/mod_wsgi.soè¿™ä¸ªç›®å½•æ˜¯å®‰è£…mod_wsgiè¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œç”Ÿæˆçš„ï¼Œæ‰¾åˆ°å®ƒ Include /private/etc/apache2/extra/httpd-vhosts.confæ”¾å¼€è¿™å¥è¯ï¼Œæ„æ€æ˜¯æˆ‘è¦ä½¿ç”¨è™šæ‹Ÿä¸»æœº é…ç½®è™šæ‹Ÿä¸»æœºåœ¨httpd-vhosts.confè¿™ä¸ªæ–‡ä»¶å†…å¯¼å…¥æ–‡ä»¶12include /private/etc/apache2/extra/vhosts/localhost.confinclude /private/etc/apache2/extra/vhosts/dev.mysite.com.conf æ„æ€æ˜¯å¯¼å…¥è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œä½œä¸ºè™šæ‹Ÿä¸»æœºçš„é…ç½®ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªæ–‡ä»¶éœ€è¦è‡ªå·±åˆ›å»º è™šæ‹Ÿä¸»æœºé…ç½®dev.mysite.com.confè¿™ä¸ªæ˜¯æœ€å…³é”®çš„åœ°æ–¹12345678910111213141516171819202122232425262728293031323334353637383940414243444546Listen 89#è™šæ‹Ÿä¸»æœºçš„ç›‘å¬ç«¯å£&lt;VirtualHost *:89&gt;LogLevel infoServerName dev.mysite.com#è™šæ‹Ÿä¸»æœºçš„åå­—ServerAdmin my@mysite.comErrorLog &quot;/Users/han/Sites/logs/mysite.com-error_log&quot;CustomLog &quot;/Users/han/Sites/logs/mysite.com-access_log&quot; common#è¿™ä¸¤ä¸ªä¸€å®šè¦é…ç½®ï¼Œå› ä¸ºä¸€æ—¦æœ‰é”™è¯¯ï¼Œæˆ‘ä»¬éœ€è¦ä¾é è¿™ä¸¤ä¸ªæ–‡ä»¶çš„å†…çš„æ—¥å¿—æ¥æ‰¾åˆ°é”™è¯¯WSGIScriptAlias / /Users/han/Documents/mysite/mysite/wsgi.py#è¿™ä¸ªæ˜¯æ•´ä¸ªè®¾ç½®æœ€é‡è¦çš„åœ°æ–¹ï¼Œè®©apacheå¯ä»¥çŸ¥é“ä½¿ç”¨å“ªä¸ªwsgi&lt;Directory &quot;/Users/han/Documents/mysite/mysite&quot;&gt;&lt;Files wsgi.py&gt;Require all granted&lt;/Files&gt;&lt;/Directory&gt;#è®¾ç½®wsgiçš„æ–‡ä»¶æƒé™#################ä¸‹è¾¹çš„éƒ½ä¸æ˜¯é‡ç‚¹äº†################### Static filesDocumentRoot &quot;/Users/han/Sites/mysite.com&quot;&lt;Directory &quot;/Users/han/Sites/mysite.com&quot;&gt;Options FollowSymLinks MultiviewsRequire all granted&lt;/Directory&gt;Alias /static/ /Users/han/Sites/mysite.com/static/&lt;Directory &quot;/Users/han/Sites/mysite.com/static&quot;&gt;Require all granted&lt;/Directory&gt;# WGSI configuration#WSGIDaemonProcess dev.mysite.com processes=2 threads=15 display-name=%&#123;GROUP&#125; python-#path=/Users/han/Documents/mysite/:/Users/han/Documents/VirtualEnvs/python2.7-django/lib/python2.7/site-#packages#WSGIProcessGroup dev.mysite.com&lt;Directory &quot;/Users/han/Documents/mysite&quot;&gt;Options FollowSymLinks MultiviewsRequire all granted&lt;/Directory&gt;&lt;/VirtualHost&gt; djangoå·¥ç¨‹é…ç½®è®¾ç½®wsgiæ–‡ä»¶ï¼Œè®©mod_wsgiçŸ¥é“ï¼Œä½¿ç”¨å“ªä¸ªdjangoé¡¹ç›®12345678910111213import osfrom os.path import join,dirname,abspathPROJECT_DIR = dirname(dirname(abspath(__file__)))#3import sys # 4sys.path.insert(0,PROJECT_DIR) # 5from django.core.wsgi import get_wsgi_applicationos.environ.setdefault(&quot;DJANGO_SETTINGS_MODULE&quot;, &quot;mysite.settings&quot;)application = get_wsgi_application() æœ€é‡è¦çš„æ˜¯3ï¼Œ4ï¼Œ5ä¸‰å¥ï¼Œè®©mod_wsgiçŸ¥é“åŽ»å“ªé‡Œæ‰¾djangoé¡¹ç›®ï¼Œå‰©ä¸‹çš„å°±æ˜¯djangoçš„äº‹æƒ…äº† é”™è¯¯è¯´æ˜Ž å…¶å®žæ‰€æœ‰çš„staticæ–‡ä»¶éƒ½æ˜¯éžé‡ç‚¹ï¼Œå› ä¸ºæˆ‘ä»¬æœ€ç»ˆè°ƒç”¨çš„æ˜¯djangoçš„æœåŠ¡ï¼Œæ‰€ä»¥æ²¡æœ‰é™æ€æ–‡ä»¶ï¼Œåªæ˜¯ä¸å±•ç¤ºè€Œå·²ï¼Œä¸è¿‡å¦‚æžœæˆ‘ä»¬éœ€è¦ä¸€äº›å°çš„iconç­‰ç­‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦è¿™ä¸ªé™æ€æ–‡ä»¶çš„ï¼Œè¿™æ˜¯åŽè¯ï¼Œå…ˆå®žçŽ°æœåŠ¡è¿™æ˜¯å¤§äº‹ å¦‚æžœæˆ‘ä»¬é‡åˆ°äº†æƒé™é—®é¢˜ï¼Œ Permission denied: access to / denied (filesystem path â€˜/Users/han/Documents/mysite use search permissions are missing on a component of the path åƒä¸‹è¾¹è¿™æ ·çš„ï¼Œè¯´æ˜Žæˆ‘ä»¬æ²¡æœ‰åˆé€‚çš„æƒé™ï¼Œè¿™æ˜¯æ‰€æœ‰æ–‡æ¡£éƒ½æ²¡æœ‰è¯´æ˜Žç™½çš„åœ°æ–¹ï¼Œè¿™é‡Œä¹‹æ‰€ä»¥å›žè®¿é—®è¿™ä¸ªæ˜¯å› ä¸ºåœ¨mod_wsgiä¸­è¿›è¡Œäº†è®¾ç½®ï¼Œmod_wsgiåŽ»è¿™ä¸ªæ–‡ä»¶ä¸­å¯»æ‰¾djangoçš„æœåŠ¡ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰åœ¨æ‰€æœ‰çš„è®¾ç½®ä¸­è®¾ç½®mod_wsgiçš„è®¿é—®æƒé™ï¼Œè¿™æ˜¯å…¶ä¸€ï¼Œå…¶äºŒæˆ‘ä»¬å¹¶ä¸èƒ½ç›´æŽ¥è®¾ç½®mysiteçš„æƒé™ï¼Œè¿™æ ·åˆ°æœ€åŽæˆ‘ä»¬å‘çŽ°è¿˜æ˜¯ä¸€ç›´æŠ¥è¿™ä¸ªé”™è¯¯ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸Šå±‚ç›®å½•çš„æƒé™ï¼Œä¸çŸ¥é“ä¸ºå•¥ä¼šè¿™ä¹ˆå‘çˆ¹åˆ°ï½žç›®å½•ä¸‹ï¼Œç„¶åŽchmod o+rx Documentsæœ€åŽæˆ‘ä»¬è¾“å…¥dev.mysite.com:89çš„æ—¶å€™æ˜¾ç¤ºçš„å°±æ˜¯djangoçš„é¦–é¡µäº† å¸¸ç”¨å‘½ä»¤è¡Œ sudo apachectl restarté‡å¯å‘½ä»¤ apachectl confittestä¿®æ”¹é…ä¹‹åŽæµ‹è¯•ä¸€ä¸‹çœ‹çœ‹å“ªé‡Œæœ‰é”™è¯¯ï¼Œåªå‡ºçŽ°ä¸€ä¸ªOKæ‰æ˜¯æ²¡æœ‰é—®é¢˜]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FLVæ ¼å¼è§£æž]]></title>
    <url>%2F2016%2F07%2F30%2F2016%2FFLV%E6%A0%BC%E5%BC%8F%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"><![CDATA[FLV æ˜¯ FLASH VIDEO çš„ç®€ç§°,ï¼ŒFLVæµåª’ä½“æ ¼å¼æ˜¯ä¸€ç§æ–°çš„è§†é¢‘æ ¼å¼ï¼Œå…¨ç§°ä¸ºFlash Videoã€‚FLV åŽ‹ç¼©ä¸Žè½¬æ¢éžå¸¸æ–¹ä¾¿ï¼Œé€‚åˆåšçŸ­ç‰‡.ï¼Œå¹¶ä¸” FLV å¯ä»¥å¾ˆå¥½çš„ä¿æŠ¤åŽŸå§‹åœ°å€ï¼Œä¸å®¹æ˜“ä¸‹è½½åˆ°ï¼Œå¯ä»¥èµ·åˆ°ä¿æŠ¤ç‰ˆæƒçš„ç›®çš„ æœ€è¿‘è¦ç”¨åˆ°flvï¼Œæ•´ç†äº†ä¸€äº›flvæ ¼å¼çš„èµ„æ–™ï¼Œä¾›å‚è€ƒã€‚ flvæ–‡ä»¶ä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šheaderå’Œbodyã€‚ 1.headerheaderéƒ¨åˆ†è®°å½•äº†flvçš„ç±»åž‹ã€ç‰ˆæœ¬ç­‰ä¿¡æ¯ï¼Œæ˜¯flvçš„å¼€å¤´ï¼Œä¸€èˆ¬éƒ½å·®ä¸å¤šï¼Œå 9bytesã€‚å…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š æ–‡ä»¶ç±»åž‹ 3bytes â€œFLVâ€ ç‰ˆæœ¬ 1 byte ä¸€èˆ¬ä¸º0x01 æµä¿¡æ¯ 1 byte å€’æ•°ç¬¬ä¸€ä½æ˜¯1è¡¨ç¤ºæœ‰è§†é¢‘ï¼Œå€’æ•°ç¬¬ä¸‰ä½æ˜¯1è¡¨ç¤ºæœ‰éŸ³é¢‘ï¼Œå€’æ•°ç¬¬äºŒã€å››ä½å¿…é¡»ä¸º0 headeré•¿åº¦ 4 bytes æ•´ä¸ªheaderçš„é•¿åº¦ï¼Œä¸€èˆ¬ä¸º9ï¼›å¤§äºŽ9è¡¨ç¤ºä¸‹é¢è¿˜æœ‰æ‰©å±•ä¿¡æ¯ 2.bodybodyéƒ¨åˆ†ç”±ä¸€ä¸ªä¸ªTagç»„æˆï¼Œæ¯ä¸ªTagçš„ä¸‹é¢æœ‰ä¸€å—4bytesçš„ç©ºé—´ï¼Œç”¨æ¥è®°å½•è¿™ä¸ªtagçš„é•¿åº¦ï¼Œè¿™ä¸ªåŽç½®ç”¨äºŽé€†å‘è¯»å–å¤„ç†ï¼Œä»–ä»¬çš„å…³ç³»å¦‚ä¸‹å›¾ï¼š flv 2.1.Tagæ¯ä¸ªTagç”±ä¹Ÿæ˜¯ç”±ä¸¤éƒ¨åˆ†ç»„æˆçš„ï¼šTag Headerå’ŒTag Dataã€‚Tag Headeré‡Œå­˜æ”¾çš„æ˜¯å½“å‰Tagçš„ç±»åž‹ã€æ•°æ®åŒºï¼ˆTag Dataï¼‰é•¿åº¦ç­‰ä¿¡æ¯ï¼Œå…·ä½“å¦‚ä¸‹ï¼š åç§° é•¿åº¦ ä»‹ç» Tagç±»åž‹ 1 bytes 8ï¼šéŸ³é¢‘ 9ï¼šè§†é¢‘ 18ï¼šè„šæœ¬ å…¶ä»–ï¼šä¿ç•™ æ•°æ®åŒºé•¿åº¦ 3 bytes åœ¨æ•°æ®åŒºçš„é•¿åº¦ æ—¶é—´æˆ³ 3 bytes æ•´æ•°ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚å¯¹äºŽè„šæœ¬åž‹çš„tagæ€»æ˜¯0 æ—¶é—´æˆ³æ‰©å±• 1 bytes å°†æ—¶é—´æˆ³æ‰©å±•ä¸º4bytesï¼Œä»£è¡¨é«˜8ä½ã€‚å¾ˆå°‘ç”¨åˆ° StreamsID 3 bytes æ€»æ˜¯0 æ•°æ®åŒº(data) ç”±æ•°æ®åŒºé•¿åº¦å†³å®š æ•°æ®å®žä½“ 2.2.Tag Dataæ•°æ®åŒºæ ¹æ®Tagç±»åž‹çš„ä¸åŒå¯åˆ†ä¸ºä¸‰ç§ï¼ŒéŸ³é¢‘æ•°æ®ã€è§†é¢‘æ•°æ®å’Œè„šæœ¬æ•°æ®ã€‚ 2.2.1.éŸ³é¢‘æ•°æ®ç¬¬ä¸€ä¸ªbyteæ˜¯éŸ³é¢‘çš„ä¿¡æ¯ï¼Œæ ¼å¼å¦‚ä¸‹ã€‚ åç§° é•¿åº¦ ä»‹ç» éŸ³é¢‘æ ¼å¼ 4 bits 0 = Linear PCM, platform endian,1 = ADPCM,2 = MP3,3 = Linear PCM, little endian,4 = Nellymoser 16-kHz mono,5 = Nellymoser 8-kHz mono,6 = Nellymoser,7 = G.711 A-law logarithmic PCM,8 = G.711 mu-law logarithmic PCM,9 = reserved,10 = AAC,11 = Speex,14 = MP3 8-Khz,15 = Device-specific sound é‡‡æ ·çŽ‡ 2 bits 0 = 5.5-kHz,1 = 11-kHz,2 = 22-kHz,3 = 44-kHz,å¯¹äºŽAACæ€»æ˜¯3 é‡‡æ ·çš„é•¿åº¦ 1 bit 0 = snd8Bit,1 = snd16Bit,åŽ‹ç¼©è¿‡çš„éŸ³é¢‘éƒ½æ˜¯16bit éŸ³é¢‘ç±»åž‹ 1 bit 0 = sndMono,1 = sndStereo,å¯¹äºŽAACæ€»æ˜¯1 ç¬¬2byteå¼€å§‹å°±æ˜¯éŸ³é¢‘æµæ•°æ®äº†ã€‚ 2.2.2.è§†é¢‘æ•°æ®å’ŒéŸ³é¢‘æ•°æ®ä¸€æ ·ï¼Œç¬¬ä¸€ä¸ªbyteæ˜¯è§†é¢‘ä¿¡æ¯ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š åç§° é•¿åº¦ ä»‹ç» å¸§ç±»åž‹ 4 bits 1: keyframe (for AVC, a seekable frame) 2: inter frame (for AVC, a non-seekable frame)3: disposable inter frame (H.263 only)4: generated keyframe (reserved for server use only)5: video info/command frame||ç¼–ç ID |4 bits |1: JPEG (currently unused)2: Sorenson H.2633: Screen video4: On2 VP65: On2 VP6 with alpha channel6: Screen video version 27: AVC| 2.2.3è„šæœ¬æ•°æ®è„šæœ¬Tagä¸€èˆ¬åªæœ‰ä¸€ä¸ªï¼Œæ˜¯flvçš„ç¬¬ä¸€ä¸ªTagï¼Œç”¨äºŽå­˜æ”¾flvçš„ä¿¡æ¯ï¼Œæ¯”å¦‚durationã€audiodatarateã€creatorã€widthç­‰ã€‚é¦–å…ˆä»‹ç»ä¸‹è„šæœ¬çš„æ•°æ®ç±»åž‹ã€‚æ‰€æœ‰æ•°æ®éƒ½æ˜¯ä»¥æ•°æ®ç±»åž‹+ï¼ˆæ•°æ®é•¿åº¦ï¼‰+æ•°æ®çš„æ ¼å¼å‡ºçŽ°çš„ï¼Œæ•°æ®ç±»åž‹å 1byteï¼Œæ•°æ®é•¿åº¦çœ‹æ•°æ®ç±»åž‹æ˜¯å¦å­˜åœ¨ï¼ŒåŽé¢æ‰æ˜¯æ•°æ®ã€‚å…¶ä¸­æ•°æ®ç±»åž‹çš„ç§ç±»æœ‰ï¼š 0 = Number type 1 = Boolean type 2 = String type 3 = Object type 4 = MovieClip type 5 = Null type 6 = Undefined type 7 = Reference type 8 = ECMA array type 10 = Strict array type 11 = Date type 12 = Long string type å¦‚æžœç±»åž‹ä¸ºStringï¼ŒåŽé¢çš„2bytesä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆLong Stringæ˜¯4bytesï¼‰ï¼Œå†åŽé¢æ‰æ˜¯å­—ç¬¦ä¸²æ•°æ®ï¼›å¦‚æžœæ˜¯Numberç±»åž‹ï¼ŒåŽé¢çš„8bytesä¸ºDoubleç±»åž‹çš„æ•°æ®ï¼›Booleanç±»åž‹ï¼ŒåŽé¢1byteä¸ºBoolç±»åž‹ã€‚ çŸ¥é“äº†è¿™äº›åŽå†æ¥çœ‹çœ‹flvä¸­çš„è„šæœ¬ï¼Œä¸€èˆ¬å¼€å¤´æ˜¯0x02ï¼Œè¡¨ç¤ºStringç±»åž‹ï¼ŒåŽé¢çš„2bytesä¸ºå­—ç¬¦ä¸²é•¿åº¦ï¼Œä¸€èˆ¬æ˜¯0x000aï¼ˆâ€œonMetaDataâ€çš„é•¿åº¦ï¼‰ï¼Œå†åŽé¢å°±æ˜¯å­—ç¬¦ä¸²â€œonMetaDataâ€ã€‚å¥½åƒflvæ ¼å¼çš„æ–‡ä»¶éƒ½æœ‰onMetaDataæ ‡è®°ï¼Œåœ¨è¿è¡ŒActionScriptçš„æ—¶å€™ä¼šç”¨åˆ°å®ƒã€‚åŽé¢è·Ÿçš„æ˜¯0x08ï¼Œè¡¨ç¤ºECMA Arrayç±»åž‹ï¼Œè¿™ä¸ªå’ŒMapæ¯”è¾ƒç›¸ä¼¼ï¼Œä¸€ä¸ªé”®è·Ÿç€ä¸€ä¸ªå€¼ã€‚é”®éƒ½æ˜¯Stringç±»åž‹çš„ï¼Œæ‰€ä»¥å¼€å¤´çš„0x02è¢«çœç•¥äº†ï¼Œç›´æŽ¥è·Ÿç€çš„æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œç„¶åŽæ˜¯å­—ç¬¦ä¸²ï¼Œå†æ˜¯å€¼çš„ç±»åž‹ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ä»‹ç»çš„é‚£äº›äº†ã€‚ 3.æ€»ç»“flvçš„æ ¼å¼è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œheaderéƒ¨åˆ†å¾ˆç®€æ´ï¼Œbodyéƒ¨åˆ†éƒ½æ˜¯ç”±ä¸€ä¸ªä¸ªtagï¼Œtagçš„è¯ä¹Ÿå°±ä¸‰ç§ï¼Œè„šæœ¬tagä¸€èˆ¬åªæœ‰ä¸€ä¸ªçš„ï¼Œæˆ‘æƒ³è¿™ä¹Ÿæ˜¯flvèƒ½æˆä¸ºåœ¨çº¿è§†é¢‘æ ¼å¼çš„åŽŸå› å§ã€‚åªè¦äº†è§£äº†æ ¼å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™ä¸ªç¨‹åºæ¥è§£æžflvæ–‡ä»¶äº†ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä¸‹ä¸€æ­¥è¦åšçš„ã€‚æœ€åŽé™„ä¸Šflvå®˜æ–¹æ‰‹å†Œï¼švideo_file_format_spec_v10]]></content>
      <categories>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>æµåª’ä½“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSæ€§èƒ½ä¼˜åŒ–æ¦‚è¿°]]></title>
    <url>%2F2016%2F07%2F21%2F2016%2FiOS%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%A6%82%E8%BF%B0%2F</url>
    <content type="text"><![CDATA[å“åº”é€Ÿåº¦ä¸Žè¿è¡Œé€Ÿåº¦å“åº”é€Ÿåº¦å’Œè¿è¡Œé€Ÿåº¦ä¹‹é—´æœ‰ç€å¾®å¦™çš„åŒºåˆ«ï¼Œå“åº”é€Ÿåº¦æ˜¯æŒ‡ç›‘å¬ç”¨æˆ·è¾“å…¥åˆ°åé¦ˆç”¨æˆ·çš„é€Ÿåº¦ï¼Œè€Œè¿è¡Œé€Ÿåº¦æ˜¯æŒ‡å¤„ç†ä»»åŠ¡çš„é€Ÿåº¦ã€‚ç”¨æˆ·éƒ½è®¨åŽŒç­‰å¾…ï¼Œæ‰€ä»¥ä½ ä¼šè¯´è®©Appè¿è¡Œçš„æ›´å¿«éžå¸¸é‡è¦ã€‚ç¡®å®žå¦‚æ­¤ï¼Œä½†æ˜¯è¿è¡Œé€Ÿåº¦çš„æå‡æœ‰ä¸€ä¸ªè¾¹ç•Œï¼Œå‡å¦‚æ•°æ®è¦é€šè¿‡ç½‘ç»œä¸‹è½½ï¼Œæˆ–è€…è¦è¿›è¡Œå¤æ‚çš„è®¡ç®—å’Œæ¸²æŸ“ï¼Œé‚£ä¹ˆAppä¸å¯èƒ½ç«‹å³æ˜¾ç¤ºè¿™äº›å†…å®¹ã€‚è¿™ç§æƒ…å†µä¸‹ç”¨æˆ·å®žé™…ä¸Šè¿˜æ˜¯æ„¿æ„ç­‰å¾…çš„ï¼Œä½†æ˜¯ä½ è¦é’ˆå¯¹ä»–ä»¬çš„æ“ä½œç»™å‡ºå³æ—¶çš„å“åº”ï¼Œè¿™ç§å“åº”å¯ä»¥æ˜¯ç®€å•çš„æŒ‰é’®çŠ¶æ€çš„æ”¹å˜ä¹Ÿå¯ä»¥æ˜¯å¤æ‚çš„åŠ¨ç”»æ•ˆæžœã€‚è®©Appè¿è¡Œæ›´å¿«å¾ˆé‡è¦ï¼Œè®©å…¶è¿…é€Ÿå“åº”åŒæ ·é‡è¦ã€‚ä½¿ç”¨çŽ°å®žä¸­çœŸå®žçš„æŒ‰é’®å’Œå¼€å…³æ—¶ä¼šè®©äººæ„Ÿè§‰é è°±ï¼Œå½“æŒ‰ä¸‹æŒ‰é’®æˆ–è€…æ‰“å¼€å¼€å…³æ—¶ä½ å¯ä»¥ç™¾åˆ†ç™¾ç¡®å®šä½ è¿›è¡Œäº†æ“ä½œã€‚ä½†æ˜¯åœ¨è§¦æ‘¸å±ä¸Šä½ æ— æ³•æ„ŸçŸ¥ï¼Œæ‰€ä»¥è§†è§‰å“åº”éžå¸¸é‡è¦ã€‚å¦‚æžœä¸€ä¸ªAppä¸èƒ½æä¾›è¿™ç§å³æ—¶çš„å“åº”é‚£ä½“éªŒå°†å˜å¾—éžå¸¸ç³Ÿç³•ï¼Œæ›´å…·ä½“ç‚¹è¯´å°±æ˜¯å“åº”æ—¶é—´ä¸è¦è¶…è¿‡ä¸‰åˆ†ä¹‹ä¸€ç§’ã€‚å½“ä½ ç‚¹å‡»äº†æŸä¸ªä½ç½®ä½†æ˜¯æ²¡æœ‰ä»»ä½•äº‹æƒ…å‘ç”Ÿï¼Œä½ ä¼šè‡ªç„¶è€Œç„¶çš„è®¤ä¸ºç‚¹å‡»æœ‰å¯èƒ½æ²¡æœ‰è¢«æŽ¥å—ã€‚ç»å¤§å¤šæ•°äººåœ¨è¿™æ—¶ä¼šå†ç‚¹å‡»ä¸€æ¬¡ï¼Œè¿™å¯èƒ½é€ æˆé‡å¤çš„æ“ä½œã€‚ å…³äºŽå“åº”é€Ÿåº¦çš„ä¸‰ä¸ªåŽŸåˆ™ï¼š è¿…é€Ÿå›žé¦ˆç”¨æˆ·ä»–çš„æ“ä½œå·²ç»è¢«æŽ¥å—ï¼Œç„¶åŽè¿…é€Ÿæ‰§è¡Œã€‚ä¾‹å¦‚ç‚¹å‡»æŒ‰é’®æ—¶æä¾›ä¸€ä¸ªtouch-downçŠ¶æ€å‘ˆçŽ°ç»™ç”¨æˆ·ã€‚ å…è®¸ç”¨æˆ·ä»»æ„æ—¶åˆ»ä¸­æ–­ å½“è€—æ—¶æ“ä½œè¿›è¡Œæ—¶ï¼Œåé¦ˆç”¨æˆ·ä¸€ä¸ªè¿›åº¦ é’ˆå¯¹ä¸Šè¾¹æå‡ºçš„é—®é¢˜ï¼Œç»™äºˆçŠ¶æ€æç¤ºæ˜¯UIå±‚é¢çš„äº‹æƒ…ï¼Œæ¯”è¾ƒå®¹æ˜“åšåˆ°ï¼Œä½†æ˜¯å¦‚æžœä¿è¯æ— è®ºä»»ä½•æ—¶å€™ç”¨æˆ·çš„æ“ä½œå’Œè§¦æ‘¸äº‹ä»¶éƒ½èƒ½å¾—åˆ°ç«‹åˆ»çš„å“åº”å‘¢ï¼Ÿ runloopä¸Žç”¨æˆ·äº‹ä»¶å“åº”åœ¨æ¯æ¬¡çš„runloopä¸­ï¼Œéœ€è¦å¤„ç†ä¸‹è¾¹å‡ ç§äº‹ä»¶ï¼š handlePortï¼šè·¨çº¿ç¨‹é€šä¿¡çš„ä¸€äº›æ¶ˆæ¯ customSrc: è¢«æ ‡è®°ä¸ºUIå¾…å¤„ç†çš„äº‹ä»¶ mySelectorï¼šæœ¬çº¿ç¨‹æ–¹æ³•çš„è°ƒç”¨ timerFiredï¼šå®šæ—¶å™¨ å½“æˆ‘ä»¬ç¨‹åºå¯åŠ¨å®Œä¹‹åŽï¼ŒåŸºæœ¬ä¸Šçº¿ç¨‹å°±æ²¡æœ‰ä»€ä¹ˆäº‹æƒ…è¦å¤„ç†äº†ï¼Œè¿™ä¸ªæ—¶å€™èƒ½å¤Ÿåšå‡ºæ”¹å˜è¿™ä¸ªçŠ¶æ€çš„äº‹ç‰©æœ‰ä¸‹è¾¹è¿™å‡ ç§ï¼š ç”¨æˆ·æ‰‹åŠ¿äº‹ä»¶ï¼Œç‚¹ä¸€ä¸‹æˆ–è€…æ‹–ä¸€ä¸‹ ç³»ç»Ÿæ¶ˆæ¯ï¼Œæ¥ç”µè¯ç­‰ å…·ä½“çš„ä¸¤ç§å¦‚ä¸‹é¢æ‰€æè¿°ï¼š ç•Œé¢åˆ·æ–°ï¼š å½“UIæ”¹å˜ï¼ˆ Frameå˜åŒ–ã€ UIView/CALayer çš„ç»§æ‰¿ç»“æž„å˜åŒ–ç­‰ï¼‰æ—¶ï¼Œæˆ–æ‰‹åŠ¨è°ƒç”¨äº† UIView/CALayer çš„ setNeedsLayout/setNeedsDisplayæ–¹æ³•åŽï¼Œè¿™ä¸ª UIView/CALayer å°±è¢«æ ‡è®°ä¸ºå¾…å¤„ç†ã€‚ è‹¹æžœæ³¨å†Œäº†ä¸€ä¸ªç”¨æ¥ç›‘å¬BeforeWaitingå’ŒExitçš„Observerï¼Œåœ¨å®ƒçš„å›žè°ƒå‡½æ•°é‡Œä¼šéåŽ†æ‰€æœ‰å¾…å¤„ç†çš„ UIView/CAlayer ä»¥æ‰§è¡Œå®žé™…çš„ç»˜åˆ¶å’Œè°ƒæ•´ï¼Œå¹¶æ›´æ–° UI ç•Œé¢ã€‚ æ‰‹åŠ¿è¯†åˆ«ï¼š å¦‚æžœä¸Šä¸€æ­¥çš„ _UIApplicationHandleEventQueue() è¯†åˆ«åˆ°æ˜¯ä¸€ä¸ªguestureæ‰‹åŠ¿ï¼Œä¼šè°ƒç”¨Cancelæ–¹æ³•å°†å½“å‰çš„touchesBegin/Move/End ç³»åˆ—å›žè°ƒæ‰“æ–­ã€‚éšåŽç³»ç»Ÿå°†å¯¹åº”çš„ UIGestureRecognizer æ ‡è®°ä¸ºå¾…å¤„ç†ã€‚ è‹¹æžœæ³¨å†Œäº†ä¸€ä¸ª Observer ç›‘æµ‹ BeforeWaiting (Loopå³å°†è¿›å…¥ä¼‘çœ ) äº‹ä»¶ï¼Œå…¶å›žè°ƒå‡½æ•°ä¸º _UIGestureRecognizerUpdateObserver()ï¼Œå…¶å†…éƒ¨ä¼šèŽ·å–æ‰€æœ‰åˆšè¢«æ ‡è®°ä¸ºå¾…å¤„ç†çš„ GestureRecognizerï¼Œå¹¶æ‰§è¡ŒGestureRecognizerçš„å›žè°ƒã€‚ å½“æœ‰ UIGestureRecognizer çš„å˜åŒ–(åˆ›å»º/é”€æ¯/çŠ¶æ€æ”¹å˜)æ—¶ï¼Œè¿™ä¸ªå›žè°ƒéƒ½ä¼šè¿›è¡Œç›¸åº”å¤„ç†ã€‚ æ€»çš„æ¥è®²ï¼Œå¹¶ä¸æ˜¯å½“ç”¨æˆ·è§¦å‘ä¸€ä¸ªäº‹ä»¶çš„æ—¶å€™è¿™ä¸ªäº‹ä»¶å°±ä¼šè¢«é©¬ä¸Šæ‰§è¡Œï¼Œè€Œæ˜¯è¿™ä¸ªäº‹ä»¶ä¼šè¢«æ ‡è®°ï¼ŒåŠ å…¥è¢«æ‰§è¡Œçš„äº‹ä»¶é˜Ÿåˆ—ï¼Œç„¶åŽç­‰å¾…runloopä»Žè¿™ä¸ªäº‹ä»¶é˜Ÿåˆ—ä¸­å–å‡ºæ¥äº‹ä»¶ï¼Œç„¶åŽæ‰§è¡Œã€‚çŽ°åœ¨å‡å¦‚è¯´ï¼Œä½ æœ‰ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œè¿™ä¸ªæ—¶å€™è¿™ä¸ªäº‹ä»¶è¢«åŠ å…¥åˆ°å¾…æ‰§è¡Œçš„äº‹ä»¶ä¸­ï¼Œå¦‚æžœå‰è¾¹æœ‰ä¸€ç³»åˆ—çš„äº‹ä»¶è¦åšï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹ä»¶å°±è¦æŽ’é˜Ÿï¼ŒçŽ°è±¡å°±æ˜¯ï¼Œä½ å‘çŽ°ä½ ç‚¹å®Œä¹‹åŽæ²¡æœ‰ä»»ä½•çš„ååº”ã€‚[self performSelector:@selector(perform4) withObject:nil afterDelay:0.005];åˆ©ç”¨è¯¥æ–¹æ³•å°†å¤§æ®µçš„æ–¹æ³•è¿›è¡Œæ‹†åˆ†ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ç”¨æˆ·äº‹ä»¶çš„å“åº”ã€‚ æ€§èƒ½ä¼˜åŒ–è¿è¡Œæ—¶é—´å‰è¾¹æˆ‘ä»¬ä¿è¯äº†å“åº”é€Ÿåº¦ï¼ŒçŽ°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼Œå¦‚ä½•åŠ å¿«æ‰§è¡Œçš„é€Ÿåº¦ã€‚åŸºæœ¬ä¸Šæˆ‘ä»¬èƒ½å¤Ÿä¾èµ–çš„å°±æ˜¯Time Profilerï¼Œ æ¸²æŸ“é€Ÿåº¦ä¸å¹¸çš„æ˜¯Time Profilerä¸èƒ½æ‰¾å‡ºæ‰€æœ‰çš„æ€§èƒ½é—®é¢˜ã€‚å½“ä½ çš„Appçš„å¸§çŽ‡æŽ‰åˆ°60ï¼ˆå¸§/ç§’ï¼‰ä»¥ä¸‹ä½ çš„Appå°±æ„Ÿè§‰è¿è¡Œå¾—ä¸æ˜¯é‚£ä¹ˆå¹³æ»‘äº†ã€‚ä½Žå¸§çŽ‡å¯¼è‡´æ»šåŠ¨è§†å›¾å’ŒåŠ¨ç”»å¡é¡¿ã€‚ å¸§çŽ‡ä¸‹é™é€šå¸¸æ„å‘³ç€iPadçš„æ¸²æŸ“é€Ÿåº¦è·Ÿä¸ä¸Šã€‚è§†è§‰ä¸Šè¾ƒä¸ºç†æƒ³çš„å¸§çŽ‡ä¸ä½ŽäºŽ60ï¼ˆå¸§/ç§’ï¼‰ï¼Œæ„å‘³ç€æ¯ä¸€å¸§åº”è¯¥åœ¨å…­ååˆ†ä¹‹ä¸€ç§’å†…æ¸²æŸ“å®Œã€‚ åŸºæœ¬ä¸Šæˆ‘ä»¬ä½¿ç”¨ä¸Šè¾¹è¿™äº›é€‰é¡¹æ¥æŸ¥æ‰¾å½±å“æ¸²æŸ“çš„å› ç´ ã€‚ color blended layersæˆ‘ä»¬çŸ¥é“GPUæ˜¯å›¾å½¢ç¡¬ä»¶ï¼Œä¸»è¦çš„å·¥ä½œæ˜¯æ··åˆçº¹ç†å¹¶ç®—å‡ºåƒç´ çš„RGBå€¼ï¼Œè¿™æ˜¯ä¸€ä¸ªéžå¸¸å¤æ‚çš„è®¡ç®—è¿‡ç¨‹ï¼Œè®¡ç®—çš„è¿‡ç¨‹è¶Šå¤æ‚ï¼Œæ‰€éœ€è¦æ¶ˆè€—çš„æ—¶é—´å°±è¶Šé•¿ï¼ŒGPUçš„ä½¿ç”¨çŽ‡å°±è¶Šé«˜ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„çŽ°åƒï¼Œè€Œæˆ‘ä»¬éœ€è¦åšçš„æ˜¯å‡å°‘GPUçš„è®¡ç®—é‡ã€‚æˆ‘ä»¬åœ¨è¿™ä¸ªå›¾å±‚ä¸Šæ”¾ç½®ä¸€ä¸ªå®Œå…¨ä¸é€æ˜Žçš„å›¾å±‚ï¼Œé‚£ä¹ˆGPUå°†ä¼šæŠŠä¸Šé¢çš„å›¾å±‚åˆæˆåˆ°ä¸‹é¢çš„å›¾å±‚å½“ä¸­ï¼Œç”±äºŽä¸Šé¢çš„æ˜¯ä¸€ä¸ªå®Œå…¨ä¸é€æ˜Žçš„å›¾å±‚ï¼Œæ‰€ä»¥ä¸Šé¢çš„å›¾å±‚ä¼šéƒ¨ä»½é®ç›–æŽ‰ä¸‹é¢çš„å›¾å±‚ï¼Œè€Œåœ¨é®ç›–æŽ‰çš„çŸ©å½¢åŒºåŸŸå†…ï¼ŒGPUä¼šç›´æŽ¥ä½¿ç”¨ä¸Šé¢å›¾å±‚çš„åƒç´ æ¥æ˜¾ç¤ºã€‚å¦‚æžœæˆ‘ä»¬æœ€åº•çš„å›¾å±‚ä¸Šæ”¾ç½®çš„æ˜¯ä¸€ä¸ªæœ‰é€æ˜Žåº¦çš„å›¾å±‚ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªçŸ©å½¢åŒºåŸŸé‡Œï¼ŒGPUéœ€è¦æ··åˆä¸Šä¸‹ä¸¤ä¸ªå›¾å±‚æ¥è®¡ç®—å‡ºåœ¨å±å¹•ä¸Šæ˜¾ç¤ºå‡ºæ¥çš„åƒç´ çš„RGBå€¼ã€‚è‹¥åœ¨åŒä¸€ä¸ªåŒºåŸŸå†…ï¼Œå­˜åœ¨ç€å¤šä¸ªæœ‰é€æ˜Žåº¦çš„å›¾å±‚ï¼Œé‚£ä¹ˆGPUéœ€è¦æ›´å¤šçš„è®¡ç®—æ‰èƒ½å¾—å‡ºæœ€ç»ˆåƒç´ çš„RGBå€¼ã€‚è€Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯é¿å…åƒç´ æ··åˆï¼Œå°½å¯èƒ½åœ°ä¸ºè§†å›¾è®¾ç½®èƒŒæ™¯è‰²ï¼Œä¸”è®¾ç½®opaqueä¸ºYESï¼Œè¿™ä¼šå¤§å¤§å‡å°‘GPUçš„è®¡ç®—ã€‚ä»¥labelä¸ºä¾‹ä¸Šè¾¹ä¸ºä¸é€æ˜Žï¼Œä¸‹è¾¹ä¸ºé€æ˜Žï¼Œé‚£ä¹ˆæˆ‘ä»¬å¾—åˆ°çš„ç»“æžœæ˜¯ä¸‹è¾¹æ··åˆä¸¥é‡ä¸Šè¾¹ä¸ºiOS7çš„æƒ…å†µï¼Œé‚£ä¹ˆiOS8å‘¢è™½ç„¶è®¾ç½®äº†èƒŒæ™¯è‰²ï¼Œä½†åœ¨iOS8ä¸Šç”¨UILabelæ˜¾ç¤ºä¸­æ–‡å´å‡ºçŽ°äº†åƒç´ æ··åˆçš„æƒ…å†µï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹çœ‹UILabelåœ¨iOS8å‰åŽçš„å˜åŒ–ï¼Œåœ¨iOS8ä»¥å‰ï¼ŒUILabelä½¿ç”¨çš„æ˜¯CALayerä½œä¸ºåº•å›¾å±‚ï¼Œè€Œåœ¨iOS8å¼€å§‹ï¼ŒUILabelçš„åº•å›¾å±‚å˜æˆäº†_UILabelLayerï¼Œç»˜åˆ¶æ–‡æœ¬ä¹Ÿæœ‰æ‰€æ”¹å˜ï¼Œå°±åƒä¸Šå›¾æ‰€è§†(åœ¨iOS8åˆšå‘å¸ƒçš„æ—¶å€™ï¼Œæˆ‘ä¸€åº¦æ€€ç–‘Appleæ­§è§†ä¸­æ–‡)ã€‚ é‚£æ€Žä¹ˆè§£å†³å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬æ¥è§‚å¯Ÿä¸€ä¸‹ä¸Šå›¾ï¼Œä»Žå›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨èƒŒæ™¯è‰²çš„å››å‘¨å¤šäº†ä¸€åœˆé€æ˜Žçš„è¾¹ï¼Œè€Œè¿™ä¸€åœˆé€æ˜Žçš„è¾¹æ˜Žæ˜¾è¶…å‡ºäº†å›¾å±‚çš„çŸ©å½¢åŒºåŸŸï¼Œæ—¢ç„¶å‘çŽ°è¿™äº†ä¸€ç‚¹ï¼Œé‚£ä¹ˆè§£å†³æ–¹æ¡ˆå°±å¾ˆæ˜Žäº†äº†ã€‚ è®¾ç½®å›¾å±‚çš„masksToBoundsä¸ºYESæ—¶ï¼Œå›¾å±‚å°†ä¼šæ²¿ç€Boundsè¿›è¡Œè£å‰ªï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¿®æ”¹åŽçš„æ•ˆæžœã€‚æœ¨æœ‰é—®é¢˜äº†ã€‚maskToboundséœ€è¦ä¸ŽcornerRadiusç»“åˆæ‰ä¼šç¦»å±æ¸²æŸ“ï¼Œæ‰€ä»¥è¿™é‡Œå¹¶ä¸ä¼šå¯¼è‡´ç¦»å±æ¸²æŸ“ã€‚å¯ä»¥çš„è¯ï¼Œè¦æ±‚ç¾Žå·¥åœ¨åˆ‡å›¾çš„æ—¶å€™ï¼Œä¸€å®šä¸è¦åˆ‡å‡ºé‚£äº›ç•™æœ‰é€æ˜ŽåŒºåŸŸçš„å›¾ç‰‡ï¼Œä¸ç„¶åœ¨ä½ æ˜¾ç¤ºå›¾ç‰‡çš„æ—¶å€™ï¼ŒåŒæ ·ä¼šå‡ºçŽ°åƒç´ æ··åˆé—®é¢˜ã€‚ tableViewçš„ä¼˜åŒ–iOSå¹³å°å› ä¸ºUIKitæœ¬èº«çš„ç‰¹æ€§ï¼Œéœ€è¦å°†æ‰€æœ‰çš„UIæ“ä½œéƒ½æ”¾åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œæ‰€ä»¥æœ‰æ—¶å€™å°±ä¹ æƒ¯å°†ä¸€äº›çº¿ç¨‹å®‰å…¨æ€§ä¸ç¡®å®šçš„é€»è¾‘ï¼Œä»¥åŠå®ƒçº¿ç¨‹ç»“æŸåŽçš„æ±‡æ€»å·¥ä½œç­‰ç­‰æ”¾åˆ°äº†ä¸»çº¿ç¨‹ï¼Œæ‰€ä»¥ä¸»çº¿ç¨‹åŒ…å«å¤§é‡è®¡ç®—ã€IOã€ç»˜åˆ¶éƒ½æœ‰å¯èƒ½é€ æˆå¡é¡¿ã€‚ å¯ä»¥é€šè¿‡ç›‘æŽ§runLoopç›‘æŽ§ç›‘æŽ§å¡é¡¿ï¼Œè°ƒç”¨æ–¹æ³•ä¸»è¦å°±æ˜¯åœ¨kCFRunLoopBeforeSourceså’ŒkCFRunLoopBeforeWaitingä¹‹é—´,è¿˜æœ‰kCFRunLoopAfterWaitingä¹‹åŽ,ä¹Ÿå°±æ˜¯å¦‚æžœæˆ‘ä»¬å‘çŽ°è¿™ä¸¤ä¸ªæ—¶é—´å†…è€—æ—¶å¤ªé•¿,é‚£ä¹ˆå°±å¯ä»¥åˆ¤å®šå‡ºæ­¤æ—¶ä¸»çº¿ç¨‹å¡é¡¿. ä½¿ç”¨åˆ°CFRunLoopObserverRef,é€šè¿‡å®ƒå¯ä»¥å®žæ—¶èŽ·å¾—è¿™äº›çŠ¶æ€å€¼çš„å˜åŒ– ç›‘æŽ§åŽå¦å¤–å†å¼€å¯ä¸€ä¸ªçº¿ç¨‹,å®žæ—¶è®¡ç®—è¿™ä¸¤ä¸ªçŠ¶æ€åŒºåŸŸä¹‹é—´çš„è€—æ—¶æ˜¯å¦åˆ°è¾¾æŸä¸ªé˜€å€¼,ä¾¿èƒ½æªå‡ºè¿™äº›æ€§èƒ½æ€æ‰‹. ç›‘æŽ§åˆ°äº†å¡é¡¿çŽ°åœº,å½“ç„¶ä¸‹ä¸€æ­¥ä¾¿æ˜¯è®°å½•æ­¤æ—¶çš„å‡½æ•°è°ƒç”¨ä¿¡æ¯,æ­¤å¤„å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹Crashæ”¶é›†ç»„ä»¶PLCrashReporter,å®ƒä¸ä»…å¯ä»¥æ”¶é›†Crashä¿¡æ¯ä¹Ÿå¯ç”¨äºŽå®žæ—¶èŽ·å–å„çº¿ç¨‹çš„è°ƒç”¨å †æ ˆ å½“æ£€æµ‹åˆ°å¡é¡¿æ—¶,æŠ“å–å †æ ˆä¿¡æ¯,ç„¶åŽåœ¨å®¢æˆ·ç«¯åšä¸€äº›è¿‡æ»¤å¤„ç†,ä¾¿å¯ä»¥ä¸ŠæŠ¥åˆ°æœåŠ¡å™¨,é€šè¿‡æ”¶é›†ä¸€å®šé‡çš„å¡é¡¿æ•°æ®åŽç»è¿‡åˆ†æžä¾¿èƒ½å‡†ç¡®å®šä½éœ€è¦ä¼˜åŒ–çš„é€»è¾‘ è®¾ç½®æ­£ç¡®çš„ reuseidentifer ä»¥é‡ç”¨ cell å°½é‡å°† View è®¾ç½®ä¸ºä¸é€æ˜Ž,åŒ…æ‹¬ cell æœ¬èº«ï¼ˆbackgroundcoloré»˜è®¤æ˜¯é€æ˜Žçš„ï¼‰ï¼Œå›¾å±‚æ··åˆé GPUåŽ»æ¸²æŸ“,å¦‚æžœé€æ˜Žåº¦è®¾ç½®ä¸º100%ï¼Œé‚£ä¹ˆGPUå°±ä¼šå¿½ç•¥ä¸‹é¢æ‰€æœ‰çš„layerï¼ŒèŠ‚çº¦äº†å¾ˆå¤šä¸å¿…è¦çš„è¿ç®—ã€‚æ¨¡æ‹Ÿå™¨ä¸Šç‚¹å‡»â€œDebugâ€èœå•ï¼Œç„¶åŽé€‰æ‹©â€œcolor Blended Layersâ€ï¼Œä¼šæŠŠæ‰€æœ‰åŒºåŸŸåˆ†æˆç»¿è‰²å’Œçº¢è‰²,ç»¿è‰²çš„å¥½,çº¢è‰²çš„æ€§èƒ½å·®ï¼ˆç»è¿‡æ··åˆæ¸²æŸ“çš„ï¼‰ï¼Œå½“ç„¶ä¹Ÿæœ‰ä¸€äº›å›¾ç‰‡è™½ç„¶æ˜¯ä¸é€æ˜Žçš„ï¼Œä½†æ˜¯ä¹Ÿä¼šæ˜¾ç¤ºçº¢è‰²ï¼Œå¦‚æžœæ£€æŸ¥ä»£ç æ²¡é”™çš„è¯ï¼Œä¸€èˆ¬å°±æ˜¯å›¾ç‰‡è‡ªèº«çš„æ€§è´¨é—®é¢˜äº†ï¼Œç›´æŽ¥è”ç³»ç¾Žå·¥æˆ–åŽå°è§£å†³å°±å¥½äº†ã€‚é™¤éžå¿…é¡»è¦ç”¨GPUåŠ è½½çš„ï¼Œå…¶ä»–æœ€å¥½è¦ç”¨CPUåŠ è½½ï¼Œå› ä¸ºCPUä¸€èˆ¬ä¸ä¼šç™¾åˆ†ç™¾åŠ è½½ï¼Œå¯ä»¥é€šè¿‡CoreGraphicsç”»å‡ºåœ†è§’ æœ‰æ—¶å€™ç¾Žå·¥å¤±è¯¯ï¼Œå›¾ç‰‡å¤§å°ç»™é”™äº†ï¼Œå¼•èµ·ä¸å¿…è¦çš„å›¾ç‰‡ç¼©æ”¾ï¼ˆå¯ä»¥æ‰¾ç¾Žå·¥åŽ»æ”¹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¼‚æ­¥åŽ»è£å‰ªå›¾ç‰‡ç„¶åŽç¼“å­˜ä¸‹æ¥ï¼‰ï¼Œè¿˜æ˜¯ä½¿ç”¨Instrumentçš„Color Misaligned Imagesï¼Œé»„è‰²è¡¨ç¤ºå›¾ç‰‡éœ€è¦ç¼©æ”¾ï¼Œç´«è‰²è¡¨ç¤ºæ²¡æœ‰åƒç´ å¯¹é½ã€‚å½“ç„¶ä¸€èˆ¬æƒ…å†µä¸‹å›¾ç‰‡æ ¼å¼ä¸ä¼šç»™é”™ï¼Œæœ‰äº›å›¾ç‰‡æ ¼å¼æ˜¯GPUä¸æ”¯æŒçš„ï¼Œå°±è¿˜è¦åŠ³çƒ¦CPUåŽ»è¿›è¡Œæ ¼å¼è½¬æ¢ã€‚è¿˜æœ‰å¯ä»¥é€šè¿‡Color Offscreen-Rendered Yellowæ¥æ£€æµ‹ç¦»å±æ¸²æŸ“ï¼ˆå°±æ˜¯æŠŠæ¸²æŸ“ç»“æžœä¸´æ—¶ä¿å­˜ï¼Œç­‰åˆ°ç”¨çš„æ—¶å€™å†å–å‡ºï¼Œè¿™æ ·ç›¸å¯¹äºŽæ™®é€šæ¸²æŸ“æ›´æ¶ˆè€—å†…å­˜ï¼Œä½¿ç”¨maskToBoundsã€è®¾ç½®shadowï¼Œé‡å†™drawRectæ–¹æ³•éƒ½ä¼šå¯¼è‡´ç¦»å±æ¸²æŸ“ï¼‰é¿å…æ¸å˜ï¼ŒcornerRadiusåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå±žæ€§åªä¼šå½±å“è§†å›¾çš„èƒŒæ™¯é¢œè‰²å’Œ borderï¼Œä½†æ˜¯ä¸ä¼šç¦»å±ç»˜åˆ¶ï¼Œä¸å½±å“æ€§èƒ½ã€‚ä¸ç”¨clipsToBoundsï¼ˆè¿‡å¤šè°ƒç”¨GPUåŽ»ç¦»å±æ¸²æŸ“ï¼‰ï¼Œè€Œæ˜¯è®©åŽå°åŠ è½½å›¾ç‰‡å¹¶å¤„ç†åœ†è§’ï¼Œå¹¶å°†å¤„ç†è¿‡çš„å›¾ç‰‡èµ‹å€¼ç»™UIImageViewã€‚UIImageView çš„åœ†è§’é€šè¿‡ç›´æŽ¥æˆªå–å›¾ç‰‡å®žçŽ°ï¼Œåœ†è§’è·¯å¾„ç›´æŽ¥ç”¨è´å¡žå°”æ›²çº¿UIBezierPathç»˜åˆ¶ï¼ˆäººä¸ºæŒ‡å®šè·¯å¾„ä¹‹åŽå°±ä¸ä¼šè§¦å‘ç¦»å±æ¸²æŸ“ï¼‰ï¼ŒUIGraphicsBeginImageContextWithOptionsã€‚UIViewçš„åœ†è§’å¯ä»¥ä½¿ç”¨CoreGraphicsç”»å‡ºåœ†è§’çŸ©å½¢ï¼Œæ ¸å¿ƒæ˜¯CGContextAddArcToPoint å‡½æ•°ã€‚å®ƒä¸­é—´çš„å››ä¸ªå‚æ•°è¡¨ç¤ºæ›²çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹åæ ‡ï¼Œæœ€åŽä¸€ä¸ªå‚æ•°è¡¨ç¤ºåŠå¾„ã€‚è°ƒç”¨äº†å››æ¬¡å‡½æ•°åŽï¼Œå°±å¯ä»¥ç”»å‡ºåœ†è§’çŸ©å½¢ã€‚æœ€åŽå†ä»Žå½“å‰çš„ç»˜å›¾ä¸Šä¸‹æ–‡ä¸­èŽ·å–å›¾ç‰‡å¹¶è¿”å›žï¼Œæœ€åŽæŠŠè¿™ä¸ªå›¾ç‰‡æ’å…¥åˆ°è§†å›¾å±‚çº§çš„åº•éƒ¨ã€‚â€œFlash updated Regionsâ€ç”¨äºŽæ ‡è®°å‘ç”Ÿé‡ç»˜çš„åŒºåŸŸ å¦‚æžœ row çš„é«˜åº¦ä¸ç›¸åŒ,é‚£ä¹ˆå°†å…¶ç¼“å­˜ä¸‹æ¥ å¦‚æžœ cell æ˜¾ç¤ºçš„å†…å®¹æ¥è‡ªç½‘ç»œ,é‚£ä¹ˆç¡®ä¿è¿™äº›å†…å®¹æ˜¯é€šè¿‡å¼‚æ­¥ä¸‹è½½ ä½¿ç”¨ shadowPath æ¥è®¾ç½®é˜´å½±ï¼Œå›¾å±‚æœ€å¥½ä¸è¦ä½¿ç”¨é˜´å½±,é˜´å½±ä¼šå¯¼è‡´ç¦»å±æ¸²æŸ“(åœ¨è¿›å…¥å±å¹•æ¸²æŸ“ä¹‹å‰,è¿˜çœ‹ä¸åˆ°çš„æ—¶å€™ä¼šå†æ¸²æŸ“ä¸€æ¬¡,å°½é‡ä¸è¦äº§ç”Ÿç¦»å±æ¸²æŸ“) å‡å°‘ subview çš„æ•°é‡ï¼Œä¸è¦åŽ»æ·»åŠ æˆ–ç§»é™¤viewï¼Œè¦å°±æ˜¾ç¤ºï¼Œä¸è¦å°±éšè— åœ¨ cellForRowAtIndexPath ä¸­å°½é‡åšæ›´å°‘çš„æ“ä½œ,æœ€å¥½æ˜¯åœ¨åˆ«çš„åœ°æ–¹ç®—å¥½ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œåªåšæ•°æ®çš„æ˜¾ç¤ºï¼Œå¦‚æžœéœ€è¦åšä¸€äº›å¤„ç†,é‚£ä¹ˆæœ€å¥½åšä¸€æ¬¡ä¹‹åŽå°†ç»“æžœå‚¨å­˜èµ·æ¥. ä½¿ç”¨é€‚å½“çš„æ•°æ®ç»“æž„æ¥ä¿å­˜éœ€è¦çš„ä¿¡æ¯,ä¸åŒçš„ç»“æž„ä¼šå¸¦æ¥ä¸åŒçš„æ“ä½œä»£ä»· ä½¿ç”¨,rowHeight , sectionFooterHeight å’Œ sectionHeaderHeight æ¥è®¾ç½®ä¸€ä¸ªæ’å®šé«˜åº¦ , è€Œä¸æ˜¯ä»Žä»£ç†(delegate)ä¸­èŽ·å– cellåšæ•°æ®ç»‘å®šçš„æ—¶å€™ï¼Œæœ€å¥½åœ¨willDisPlayCellé‡Œé¢è¿›è¡Œï¼Œå…¶ä»–æ“ä½œåœ¨cellForRowAtIndexPathï¼Œå› ä¸ºå‰è€…æ˜¯ç¬¬ä¸€é¡µæœ‰å¤šå°‘æ¡å°±æ‰§è¡Œå¤šå°‘æ¬¡ï¼ŒåŽè€…æ˜¯ç¬¬ä¸€æ¬¡åŠ è½½æœ‰å¤šå°‘ä¸ªcellå°±æ‰§è¡Œå¤šå°‘æ¬¡ï¼Œè€Œä¸”è°ƒç”¨åŽè€…çš„æ—¶å€™cellè¿˜æ²¡æ˜¾ç¤º è¯»å–æ–‡ä»¶,å†™å…¥æ–‡ä»¶,æœ€å¥½æ˜¯æ”¾åˆ°å­çº¿ç¨‹,æˆ–å…ˆè¯»å–å¥½,åœ¨è®©tableViewåŽ»æ˜¾ç¤º tableViewæ»šåŠ¨çš„æ—¶å€™,ä¸è¦åŽ»åšåŠ¨ç”»(å¾®ä¿¡çš„èŠå¤©ç•Œé¢åšçš„å°±å¾ˆå¥½,åœ¨æ»šåŠ¨çš„æ—¶å€™,åŠ¨æ€å›¾å°±ä¸è®©ä»–åŠ¨,æ»šåŠ¨åœæ­¢çš„æ—¶å€™æ‰åŠ¨,ä¸ç„¶å¯èƒ½ä¼šæœ‰ç‚¹å½±å“æµç•…åº¦)ã€‚åœ¨æ»šåŠ¨çš„æ—¶å€™åŠ è½½å›¾ç‰‡ï¼Œåœæ­¢æ‹–æ‹½åŽåœ¨å‡é€Ÿè¿‡ç¨‹ä¸­ä¸åŠ è½½å›¾ç‰‡ï¼Œå‡é€Ÿåœæ­¢åŽåŠ è½½å¯è§èŒƒå›´å†…å›¾ç‰‡ ä»£ç ä¼˜åŒ–checkList2.3 æå‰è°ƒæ•´ImageViewä¸­çš„å›¾ç‰‡å¤§å°ï¼ˆåŒå›¾ç‰‡å’ŒåŠ¨ç”»çš„æ¸²æŸ“ï¼‰å¦‚æžœè¦åœ¨UIImageViewä¸­æ˜¾ç¤ºä¸€ä¸ªå›¾ç‰‡ï¼Œä½ åº”ä¿è¯å›¾ç‰‡çš„å¤§å°å’ŒUIImageViewçš„å¤§å°ç›¸åŒã€‚å› ä¸ºåœ¨è¿è¡Œä¸­ç¼©æ”¾å›¾ç‰‡æ˜¯å¾ˆè€—è´¹èµ„æºçš„ï¼Œç‰¹åˆ«æ˜¯UIImageViewåµŒå¥—åœ¨UIScrollViewä¸­çš„æƒ…å†µä¸‹ã€‚ å¦‚æžœå›¾ç‰‡æ˜¯ä»Žè¿œç«¯æœåŠ¡åŠ è½½çš„ä½ ä¸èƒ½æŽ§åˆ¶å›¾ç‰‡å¤§å°ï¼Œæ¯”å¦‚åœ¨ä¸‹è½½å‰è°ƒæ•´åˆ°åˆé€‚å¤§å°çš„è¯ï¼Œä½ å¯ä»¥åœ¨ä¸‹è½½å®ŒæˆåŽï¼Œæœ€å¥½æ˜¯ç”¨background threadï¼Œç¼©æ”¾ä¸€æ¬¡ï¼Œç„¶åŽåœ¨UIImageViewä¸­ä½¿ç”¨ç¼©æ”¾åŽçš„å›¾ç‰‡ã€‚ è¿™ä¸ªç±»æ¯”åˆ°å›¾ç‰‡å’ŒåŠ¨ç”»çš„æ¸²æŸ“ä¸­ï¼Œæ˜¯é€šç”¨çš„ã€‚ å…·ä½“æ–¹æ³•å‚è€ƒä¸Šé¢çš„GCDæ“ä½œã€‚ 2.4 æ­£ç¡®ä½¿ç”¨å®¹å™¨çš„ç‰¹æ€§Arrays: æœ‰åºçš„ä¸€ç»„å€¼ã€‚ä½¿ç”¨indexæ¥æŸ¥æ‰¾å¾ˆå¿«ï¼Œä½¿ç”¨value æŸ¥æ‰¾å¾ˆæ…¢ï¼Œ æ’å…¥/åˆ é™¤å¾ˆæ…¢ã€‚ Dictionaries: å­˜å‚¨é”®å€¼å¯¹ã€‚ ç”¨é”®æ¥æŸ¥æ‰¾æ¯”è¾ƒå¿«ã€‚ Sets: æ— åºçš„ä¸€ç»„å€¼ã€‚ç”¨å€¼æ¥æŸ¥æ‰¾å¾ˆå¿«ï¼Œæ’å…¥/åˆ é™¤å¾ˆå¿«ã€‚ 2.5 å¤§æ–‡ä»¶ä¼ è¾“ä½¿ç”¨gzipå¤§é‡appä¾èµ–äºŽè¿œç«¯èµ„æºå’Œç¬¬ä¸‰æ–¹APIï¼Œä½ å¯èƒ½ä¼šå¼€å‘ä¸€ä¸ªéœ€è¦ä»Žè¿œç«¯ä¸‹è½½XML, JSON, HTMLæˆ–è€…å…¶å®ƒæ ¼å¼çš„appã€‚ é—®é¢˜æ˜¯æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç§»åŠ¨è®¾å¤‡ï¼Œå› æ­¤ä½ å°±ä¸èƒ½æŒ‡æœ›ç½‘ç»œçŠ¶å†µæœ‰å¤šå¥½ã€‚ä¸€ä¸ªç”¨æˆ·çŽ°åœ¨è¿˜åœ¨edgeç½‘ç»œï¼Œä¸‹ä¸€åˆ†é’Ÿå¯èƒ½å°±åˆ‡æ¢åˆ°äº†3Gã€‚ä¸è®ºä»€ä¹ˆåœºæ™¯ï¼Œä½ è‚¯å®šä¸æƒ³è®©ä½ çš„ç”¨æˆ·ç­‰å¤ªé•¿æ—¶é—´ã€‚ å‡å°æ–‡æ¡£çš„ä¸€ä¸ªæ–¹å¼å°±æ˜¯åœ¨æœåŠ¡ç«¯å’Œä½ çš„appä¸­æ‰“å¼€gzipã€‚è¿™å¯¹äºŽæ–‡å­—è¿™ç§èƒ½æœ‰æ›´é«˜åŽ‹ç¼©çŽ‡çš„æ•°æ®æ¥è¯´ä¼šæœ‰æ›´æ˜¾è‘—çš„æ•ˆç”¨ã€‚ å½“ç„¶ï¼ŒçŽ°åœ¨è‹¹æžœå·²ç»è‡ªåŠ¨æ”¯æŒäº†ï¼Œä½ åªéœ€è¦å‘Šè¯‰ä½ ä»¬æœåŠ¡ç«¯çš„åŒå­¦ï¼Œä¼ è¾“å¤§æ–‡ä»¶çš„æ—¶å€™è®°å¾—ç”¨gzipå°±å®Œäº†ã€‚ 2.6 Viewçš„é‡ç”¨å’Œæ‡’åŠ è½½æ›´å¤šçš„viewæ„å‘³ç€æ›´å¤šçš„æ¸²æŸ“ï¼Œä¹Ÿå°±æ˜¯æ›´å¤šçš„CPUå’Œå†…å­˜æ¶ˆè€—ï¼Œå¯¹äºŽé‚£ç§åµŒå¥—äº†å¾ˆå¤šviewåœ¨UIScrollViewé‡Œè¾¹çš„appæ›´æ˜¯å¦‚æ­¤ã€‚ é‡ç”¨å°±æ˜¯æ¨¡ä»¿UITableViewå’ŒUICollectionViewçš„æ“ä½œ: ä¸è¦ä¸€æ¬¡åˆ›å»ºæ‰€æœ‰çš„subviewï¼Œè€Œæ˜¯å½“éœ€è¦æ—¶æ‰åˆ›å»ºï¼Œå½“å®ƒä»¬å®Œæˆäº†ä½¿å‘½ï¼ŒæŠŠä»–ä»¬æ”¾è¿›ä¸€ä¸ªå¯é‡ç”¨çš„é˜Ÿåˆ—ä¸­ã€‚å½“éœ€è¦ä½¿ç”¨Viewçš„æ—¶å€™ï¼ŒåŽ»å¯é‡ç”¨é˜Ÿåˆ—é‡Œé¢æ‰¾ä¸€æ‰¾æœ‰æ²¡æœ‰å¯ä»¥è¢«å¤ç”¨çš„Viewã€‚è¿™é‡Œæˆ‘çš„ä¸€ä»½æ¡†æž¶ä¸­æ›¾ç»ä½¿ç”¨è¿‡ç±»ä¼¼çš„æ–¹æ³•åŽ»åˆ›å»ºä¸€ä¸ªå›¾ç‰‡æµè§ˆå™¨ï¼Œå¤§å®¶å¯ä»¥ç¨åšå‚è€ƒã€‚Viewçš„é‡ç”¨ æ‡’åŠ è½½å°±æ˜¯åœ¨ç¨‹åºå¯åŠ¨æ—¶å¹¶ä¸è¿›è¡ŒåŠ è½½ï¼Œåªæœ‰å½“ç”¨åˆ°è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œæ‰è¿›è¡ŒåŠ è½½ã€‚è¿™ä¸ªä¸ä»…åœ¨å±žæ€§ä¸­å¯ä»¥è¿›è¡Œè¿™æ ·çš„ä½¿ç”¨ï¼Œåœ¨Viewä¸Šé¢ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä¸è¿‡å®žçŽ°ç¨æœ‰ä¸åŒã€‚æ‡’åŠ è½½ä¼šæ¶ˆè€—æ›´å°‘å†…å­˜ï¼Œä½†æ˜¯åœ¨Viewçš„æ˜¾ç¤ºä¸Šä¼šç¨æœ‰æ»žåŽã€‚ 2.7 Cacheä¸€ä¸ªæžå¥½çš„åŽŸåˆ™å°±æ˜¯ï¼Œç¼“å­˜æ‰€éœ€è¦çš„ï¼Œä¹Ÿå°±æ˜¯é‚£äº›ä¸å¤§å¯èƒ½æ”¹å˜ä½†æ˜¯éœ€è¦ç»å¸¸è¯»å–çš„ä¸œè¥¿ã€‚ æˆ‘ä»¬èƒ½ç¼“å­˜äº›ä»€ä¹ˆå‘¢ï¼Ÿä¸€äº›é€‰é¡¹æ˜¯ï¼Œè¿œç«¯æœåŠ¡å™¨çš„å“åº”ï¼Œå›¾ç‰‡ï¼Œç”šè‡³è®¡ç®—ç»“æžœï¼Œæ¯”å¦‚UITableViewçš„è¡Œé«˜ã€‚ NSURLConnectioné»˜è®¤ä¼šç¼“å­˜èµ„æºåœ¨å†…å­˜æˆ–è€…å­˜å‚¨ä¸­æ ¹æ®å®ƒæ‰€åŠ è½½çš„HTTP Headersã€‚ä½ ç”šè‡³å¯ä»¥æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªNSURLRequestç„¶åŽä½¿å®ƒåªåŠ è½½ç¼“å­˜çš„å€¼ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå¯ç”¨çš„ä»£ç æ®µï¼Œä½ å¯ä»¥å¯ä»¥ç”¨å®ƒåŽ»ä¸ºä¸€ä¸ªåŸºæœ¬ä¸ä¼šæ”¹å˜çš„å›¾ç‰‡åˆ›å»ºä¸€ä¸ªNSURLRequestå¹¶ç¼“å­˜å®ƒï¼š (NSMutableURLRequest )imageRequestWithURL:(NSURL )url { NSMutableURLRequest request = [NSMutableURLRequest requestWithURL:url]; request.cachePolicy = NSURLRequestReturnCacheDataElseLoad; // this will make sure the request always returns the cached image request.HTTPShouldHandleCookies = NO; request.HTTPShouldUsePipelining = YES; [request addValue:@â€image/â€œ forHTTPHeaderField:@â€Acceptâ€]; return request; } æ³¨æ„ä½ å¯ä»¥é€šè¿‡ NSURLConnection èŽ·å–ä¸€ä¸ªURL requestï¼Œ AFNetworkingä¹Ÿä¸€æ ·çš„ã€‚è¿™æ ·ä½ å°±ä¸å¿…ä¸ºé‡‡ç”¨è¿™æ¡tipè€Œæ”¹å˜æ‰€æœ‰çš„networkingä»£ç äº†ã€‚ å¦‚æžœä½ éœ€è¦ç¼“å­˜å…¶å®ƒä¸æ˜¯HTTP Requestçš„ä¸œè¥¿ï¼Œä½ å¯ä»¥ç”¨NSCacheã€‚ 2.8 è®°å¾—å¤„ç†å†…å­˜è­¦å‘Šä¸€æ—¦ç³»ç»Ÿå†…å­˜è¿‡ä½Žï¼ŒiOSä¼šé€šçŸ¥æ‰€æœ‰è¿è¡Œä¸­appã€‚åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æ˜¯è¿™æ ·è®°è¿°: å¦‚æžœä½ çš„appæ”¶åˆ°äº†å†…å­˜è­¦å‘Šï¼Œå®ƒå°±éœ€è¦å°½å¯èƒ½é‡Šæ”¾æ›´å¤šçš„å†…å­˜ã€‚æœ€ä½³æ–¹å¼æ˜¯ç§»é™¤å¯¹ç¼“å­˜ï¼Œå›¾ç‰‡objectå’Œå…¶ä»–ä¸€äº›å¯ä»¥é‡åˆ›å»ºçš„objectsçš„strong references. å¹¸è¿çš„æ˜¯ï¼ŒUIKitæä¾›äº†å‡ ç§æ”¶é›†ä½Žå†…å­˜è­¦å‘Šçš„æ–¹æ³•: åœ¨app delegateä¸­ä½¿ç”¨applicationDidReceiveMemoryWarning: çš„æ–¹æ³• åœ¨ä½ çš„è‡ªå®šä¹‰UIViewControllerçš„å­ç±»(subclass)ä¸­è¦†ç›–didReceiveMemoryWarning æ³¨å†Œå¹¶æŽ¥æ”¶ UIApplicationDidReceiveMemoryWarningNotification çš„é€šçŸ¥ ä¸€æ—¦æ”¶åˆ°è¿™ç±»é€šçŸ¥ï¼Œä½ å°±éœ€è¦é‡Šæ”¾ä»»ä½•ä¸å¿…è¦çš„å†…å­˜ä½¿ç”¨ã€‚ ä¾‹å¦‚ï¼ŒUIViewControllerçš„é»˜è®¤è¡Œä¸ºæ˜¯ç§»é™¤ä¸€äº›ä¸å¯è§çš„viewï¼Œ å®ƒçš„ä¸€äº›å­ç±»åˆ™å¯ä»¥è¡¥å……è¿™ä¸ªæ–¹æ³•ï¼Œåˆ æŽ‰ä¸€äº›é¢å¤–çš„æ•°æ®ç»“æž„ã€‚ä¸€ä¸ªæœ‰å›¾ç‰‡ç¼“å­˜çš„appå¯ä»¥ç§»é™¤ä¸åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„å›¾ç‰‡ã€‚ è¿™æ ·å¯¹å†…å­˜è­¦æŠ¥çš„å¤„ç†æ˜¯å¾ˆå¿…è¦çš„ï¼Œè‹¥ä¸é‡è§†ï¼Œä½ çš„appå°±å¯èƒ½è¢«ç³»ç»Ÿæ€æŽ‰ã€‚ ç„¶è€Œï¼Œå½“ä½ ä¸€å®šè¦ç¡®è®¤ä½ æ‰€é€‰æ‹©çš„objectæ˜¯å¯ä»¥è¢«é‡çŽ°åˆ›å»ºçš„æ¥é‡Šæ”¾å†…å­˜ã€‚ä¸€å®šè¦åœ¨å¼€å‘ä¸­ç”¨æ¨¡æ‹Ÿå™¨ä¸­çš„å†…å­˜æé†’æ¨¡æ‹ŸåŽ»æµ‹è¯•ä¸€ä¸‹ã€‚ 2.9 é‡ç”¨å¤§çš„å¼€é”€å¯¹è±¡è¿™é‡Œçš„å¤§å¼€é”€æ˜¯æŒ‡ä¸€äº›åˆå§‹åŒ–å¾ˆæ…¢çš„objectsï¼Œå¦‚ï¼šNSDateFormatterå’ŒNSCalendarã€‚ä½†æ˜¯ï¼Œä½ åˆä¸å¯é¿å…åœ°éœ€è¦ä½¿ç”¨å®ƒä»¬ï¼Œæ¯”å¦‚ä»ŽJSONæˆ–è€…XMLä¸­è§£æžæ•°æ®ã€‚ æƒ³è¦é¿å…ä½¿ç”¨è¿™ä¸ªå¯¹è±¡çš„ç“¶é¢ˆä½ å°±éœ€è¦é‡ç”¨ä»–ä»¬ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ å±žæ€§åˆ°ä½ çš„classé‡Œæˆ–è€…åˆ›å»ºé™æ€å˜é‡æ¥å®žçŽ°ã€‚ æ³¨æ„å¦‚æžœä½ è¦é€‰æ‹©ç¬¬äºŒç§æ–¹æ³•ï¼Œå¯¹è±¡ä¼šåœ¨ä½ çš„appè¿è¡Œæ—¶ä¸€ç›´å­˜åœ¨äºŽå†…å­˜ä¸­ï¼Œå’Œå•ä¾‹(singleton)å¾ˆç›¸ä¼¼ã€‚ ä¸‹é¢çš„ä»£ç è¯´æ˜Žäº†ä½¿ç”¨ä¸€ä¸ªå±žæ€§æ¥å»¶è¿ŸåŠ è½½ä¸€ä¸ªdate formatter. ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶å®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®žä¾‹ï¼Œä»¥åŽçš„è°ƒç”¨åˆ™å°†è¿”å›žå·²ç»åˆ›å»ºçš„å®žä¾‹ï¼š // in your .h or inside a class extension @property (nonatomic, strong) NSDateFormatter formatter; // inside the implementation (.m) // When you need, just use self.formatter - (NSDateFormatter )formatter { if (! _formatter) { _formatter = [[NSDateFormatter alloc] init]; _formatter.dateFormat = @â€EEE MMM dd HH:mm:ss Z yyyyâ€; // twitter date format } return _formatter; } è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…¶å®žè®¾ç½®ä¸€ä¸ªNSDateFormatterçš„é€Ÿåº¦å·®ä¸å¤šæ˜¯å’Œåˆ›å»ºæ–°çš„ä¸€æ ·æ…¢çš„ï¼æ‰€ä»¥å¦‚æžœä½ çš„appéœ€è¦ç»å¸¸è¿›è¡Œæ—¥æœŸæ ¼å¼å¤„ç†çš„è¯ï¼Œä½ ä¼šä»Žè¿™ä¸ªæ–¹æ³•ä¸­å¾—åˆ°ä¸å°çš„æ€§èƒ½æå‡ã€‚ 2.10 é¿å…åå¤çš„å¤„ç†æ•°æ®è®¸å¤šåº”ç”¨éœ€è¦ä»ŽæœåŠ¡å™¨åŠ è½½åŠŸèƒ½æ‰€éœ€çš„å¸¸ä¸ºJSONæˆ–è€…XMLæ ¼å¼çš„æ•°æ®ã€‚åœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ä½¿ç”¨ç›¸åŒçš„æ•°æ®ç»“æž„å¾ˆé‡è¦ã€‚åœ¨å†…å­˜ä¸­æ“ä½œæ•°æ®ä½¿å®ƒä»¬æ»¡è¶³ä½ çš„æ•°æ®ç»“æž„æ˜¯å¼€é”€å¾ˆå¤§çš„ã€‚ æ¯”å¦‚ä½ éœ€è¦æ•°æ®æ¥å±•ç¤ºä¸€ä¸ªtable view,æœ€å¥½ç›´æŽ¥ä»ŽæœåŠ¡å™¨å–arrayç»“æž„çš„æ•°æ®ä»¥é¿å…é¢å¤–çš„ä¸­é—´æ•°æ®ç»“æž„æ”¹å˜ã€‚ ç±»ä¼¼çš„ï¼Œå¦‚æžœéœ€è¦ä»Žç‰¹å®škeyä¸­å–æ•°æ®ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨é”®å€¼å¯¹çš„dictionaryã€‚ 2.11 æ­£ç¡®è®¾å®šèƒŒæ™¯å›¾ç‰‡åœ¨Viewé‡Œæ”¾èƒŒæ™¯å›¾ç‰‡å°±åƒå¾ˆå¤šå…¶å®ƒiOSç¼–ç¨‹ä¸€æ ·æœ‰å¾ˆå¤šæ–¹æ³•: ä½¿ç”¨UIColorçš„ colorWithPatternImageæ¥è®¾ç½®èƒŒæ™¯è‰²ï¼› åœ¨viewä¸­æ·»åŠ ä¸€ä¸ªUIImageViewä½œä¸ºä¸€ä¸ªå­Viewã€‚ å¦‚æžœä½ ä½¿ç”¨å…¨ç”»å¹…çš„èƒŒæ™¯å›¾ï¼Œä½ å°±å¿…é¡»ä½¿ç”¨UIImageViewå› ä¸ºUIColorçš„colorWithPatternImageæ˜¯ç”¨æ¥åˆ›å»ºå°çš„é‡å¤çš„å›¾ç‰‡ä½œä¸ºèƒŒæ™¯çš„ã€‚è¿™ç§æƒ…å½¢ä¸‹ä½¿ç”¨UIImageViewå¯ä»¥èŠ‚çº¦ä¸å°‘çš„å†…å­˜ï¼š // You could also achieve the same result in Interface Builder UIImageView *backgroundView = [ [UIImageView alloc] initWithImage:[UIImage imageNamed:@â€backgroundâ€]]; [self.view addSubview:backgroundView]; å¦‚æžœä½ ç”¨å°å›¾å¹³é“ºæ¥åˆ›å»ºèƒŒæ™¯ï¼Œä½ å°±éœ€è¦ç”¨UIColorçš„colorWithPatternImageæ¥åšäº†ï¼Œå®ƒä¼šæ›´å¿«åœ°æ¸²æŸ“ä¹Ÿä¸ä¼šèŠ±è´¹å¾ˆå¤šå†…å­˜ï¼š self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@â€backgroundâ€]]; 2.12 è¯•è¯•è‹¹æžœæœ€æ–°çš„WKWebViewæ¥å¤„ç†webUIWebViewå¾ˆæœ‰ç”¨ï¼Œç”¨å®ƒæ¥å±•ç¤ºç½‘é¡µå†…å®¹æˆ–è€…åˆ›å»ºUIKitå¾ˆéš¾åšåˆ°çš„åŠ¨ç”»æ•ˆæžœæ˜¯å¾ˆç®€å•çš„ä¸€ä»¶äº‹ã€‚ ä½†æ˜¯ä½ å¯èƒ½æœ‰æ³¨æ„åˆ°UIWebViewå¹¶ä¸åƒé©±åŠ¨Safariçš„é‚£ä¹ˆå¿«ã€‚è¿™æ˜¯ç”±äºŽä»¥JIT compilation ä¸ºç‰¹è‰²çš„Webkitçš„Nitro Engineçš„é™åˆ¶ã€‚ æ‰€ä»¥æƒ³è¦æ›´é«˜çš„æ€§èƒ½ä½ å°±è¦è°ƒæ•´ä¸‹ä½ çš„HTMLäº†ã€‚ç¬¬ä¸€ä»¶è¦åšçš„äº‹å°±æ˜¯å°½å¯èƒ½ç§»é™¤ä¸å¿…è¦çš„javascriptï¼Œé¿å…ä½¿ç”¨è¿‡å¤§çš„æ¡†æž¶ã€‚èƒ½åªç”¨åŽŸç”Ÿjså°±æ›´å¥½äº†ã€‚ å¦å¤–ï¼Œå°½å¯èƒ½å¼‚æ­¥åŠ è½½ä¾‹å¦‚ç”¨æˆ·è¡Œä¸ºç»Ÿè®¡scriptè¿™ç§ä¸å½±å“é¡µé¢è¡¨è¾¾çš„javascriptã€‚ æœ€åŽï¼Œæ°¸è¿œè¦æ³¨æ„ä½ ä½¿ç”¨çš„å›¾ç‰‡ï¼Œä¿è¯å›¾ç‰‡çš„ç¬¦åˆä½ ä½¿ç”¨çš„å¤§å°ã€‚ä½¿ç”¨Sprite sheetæé«˜åŠ è½½é€Ÿåº¦å’ŒèŠ‚çº¦å†…å­˜ã€‚ å½“ç„¶ï¼Œä¸Šé¢æ˜¯é’ˆå¯¹ä½ åœ¨ä½¿ç”¨UIWebViewçš„æƒ…å†µä¸‹ï¼Œéœ€è¦å°½é‡å‡å°‘ä½¿ç”¨webçš„ç‰¹æ€§ï¼Œè€Œè‹¹æžœæœ€è¿‘åˆšæŽ¨å‡ºçš„Safariçš„åº•å±‚æ¡†æž¶WKWebViewä¹Ÿè®¸èƒ½å¸®æˆ‘ä»¬è§„é¿æŽ‰å¾ˆå¤šè¿™æ ·çš„æ€§èƒ½é—®é¢˜ã€‚ 2.13 ä¼˜åŒ–ä½ çš„TableViewTable viewéœ€è¦æœ‰å¾ˆå¥½çš„æ»šåŠ¨æ€§èƒ½ï¼Œä¸ç„¶ç”¨æˆ·ä¼šåœ¨æ»šåŠ¨è¿‡ç¨‹ä¸­å‘çŽ°åŠ¨ç”»çš„ç‘•ç–µã€‚ ä¸ºäº†ä¿è¯table viewå¹³æ»‘æ»šåŠ¨ï¼Œç¡®ä¿ä½ é‡‡å–äº†ä»¥ä¸‹çš„æŽªæ–½: æ­£ç¡®ä½¿ç”¨reuseIdentifieræ¥é‡ç”¨cells å°½é‡ä½¿æ‰€æœ‰çš„view opaqueï¼ŒåŒ…æ‹¬cellè‡ªèº« é¿å…æ¸å˜ï¼Œå›¾ç‰‡ç¼©æ”¾ï¼ŒåŽå°é€‰äºº ç¼“å­˜è¡Œé«˜ å¦‚æžœcellå†…çŽ°å®žçš„å†…å®¹æ¥è‡ªwebï¼Œä½¿ç”¨å¼‚æ­¥åŠ è½½ï¼Œç¼“å­˜è¯·æ±‚ç»“æžœ ä½¿ç”¨shadowPathæ¥ç”»é˜´å½± å‡å°‘subviewsçš„æ•°é‡ å°½é‡ä¸é€‚ç”¨cellForRowAtIndexPath:ï¼Œå¦‚æžœä½ éœ€è¦ç”¨åˆ°å®ƒï¼Œåªç”¨ä¸€æ¬¡ç„¶åŽç¼“å­˜ç»“æžœ ä½¿ç”¨æ­£ç¡®çš„æ•°æ®ç»“æž„æ¥å­˜å‚¨æ•°æ® ä½¿ç”¨rowHeight, sectionFooterHeight å’Œ sectionHeaderHeightæ¥è®¾å®šå›ºå®šçš„é«˜ï¼Œä¸è¦è¯·æ±‚delegate 2.14 é€‰æ‹©æ­£ç¡®çš„æ•°æ®å­˜å‚¨æ–¹å¼å½“å­˜å‚¨å¤§å—æ•°æ®æ—¶ä½ ä¼šæ€Žä¹ˆåšï¼Ÿ ä½ æœ‰å¾ˆå¤šé€‰æ‹©ï¼Œæ¯”å¦‚ï¼š ä½¿ç”¨NSUerDefaults ä½¿ç”¨XML, JSON, æˆ–è€… plist ä½¿ç”¨NSCodingå­˜æ¡£ ä½¿ç”¨ç±»ä¼¼SQLiteçš„æœ¬åœ°SQLæ•°æ®åº“ ä½¿ç”¨ Core Data NSUserDefaultsçš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿè™½ç„¶å®ƒå¾ˆniceä¹Ÿå¾ˆä¾¿æ·ï¼Œä½†æ˜¯å®ƒåªé€‚ç”¨äºŽå°æ•°æ®ï¼Œæ¯”å¦‚ä¸€äº›ç®€å•çš„å¸ƒå°”åž‹çš„è®¾ç½®é€‰é¡¹ï¼Œå†å¤§ç‚¹ä½ å°±è¦è€ƒè™‘å…¶å®ƒæ–¹å¼äº† XMLè¿™ç§ç»“æž„åŒ–æ¡£æ¡ˆå‘¢ï¼Ÿæ€»ä½“æ¥è¯´ï¼Œä½ éœ€è¦è¯»å–æ•´ä¸ªæ–‡ä»¶åˆ°å†…å­˜é‡ŒåŽ»è§£æžï¼Œè¿™æ ·æ˜¯å¾ˆä¸ç»æµŽçš„ã€‚ä½¿ç”¨SAXåˆæ˜¯ä¸€ä¸ªå¾ˆéº»çƒ¦çš„äº‹æƒ…ã€‚ NSCodingï¼Ÿä¸å¹¸çš„æ˜¯ï¼Œå®ƒä¹Ÿéœ€è¦è¯»å†™æ–‡ä»¶ï¼Œæ‰€ä»¥ä¹Ÿæœ‰ä»¥ä¸Šé—®é¢˜ã€‚ åœ¨è¿™ç§åº”ç”¨åœºæ™¯ä¸‹ï¼Œä½¿ç”¨SQLite æˆ–è€… Core Dataæ¯”è¾ƒå¥½ã€‚ä½¿ç”¨è¿™äº›æŠ€æœ¯ä½ ç”¨ç‰¹å®šçš„æŸ¥è¯¢è¯­å¥å°±èƒ½åªåŠ è½½ä½ éœ€è¦çš„å¯¹è±¡ã€‚ åœ¨æ€§èƒ½å±‚é¢æ¥è®²ï¼ŒSQLiteå’ŒCore Dataæ˜¯å¾ˆç›¸ä¼¼çš„ã€‚ä»–ä»¬çš„ä¸åŒåœ¨äºŽå…·ä½“ä½¿ç”¨æ–¹æ³•ã€‚Core Dataä»£è¡¨ä¸€ä¸ªå¯¹è±¡çš„graph modelï¼Œä½†SQLiteå°±æ˜¯ä¸€ä¸ªDBMSã€‚Appleåœ¨ä¸€èˆ¬æƒ…å†µä¸‹å»ºè®®ä½¿ç”¨Core Dataï¼Œä½†æ˜¯å¦‚æžœä½ æœ‰ç†ç”±ä¸ä½¿ç”¨å®ƒï¼Œé‚£ä¹ˆå°±åŽ»ä½¿ç”¨æ›´åŠ åº•å±‚çš„SQLiteå§ã€‚ å¦‚æžœä½ ä½¿ç”¨SQLiteï¼Œä½ å¯ä»¥ç”¨FMDB(https://github.com/ccgus/fmdb)è¿™ä¸ªåº“æ¥ç®€åŒ–SQLiteçš„æ“ä½œï¼Œè¿™æ ·ä½ å°±ä¸ç”¨èŠ±å¾ˆå¤šç»åŽ†äº†è§£SQLiteçš„C APIäº†ã€‚ 2.15 æŠŠXibæ¢æˆStoryboardå§å½“ä½ åŠ è½½ä¸€ä¸ªXIBçš„æ—¶å€™æ‰€æœ‰å†…å®¹éƒ½è¢«æ”¾åœ¨äº†å†…å­˜é‡Œï¼ŒåŒ…æ‹¬ä»»ä½•å›¾ç‰‡ã€‚å¦‚æžœæœ‰ä¸€ä¸ªä¸ä¼šå³åˆ»ç”¨åˆ°çš„viewï¼Œä½ è¿™å°±æ˜¯åœ¨æµªè´¹å®è´µçš„å†…å­˜èµ„æºäº†ã€‚ Storyboardså°±æ˜¯å¦ä¸€ç äº‹å„¿äº†ï¼Œstoryboardä»…åœ¨éœ€è¦æ—¶å®žä¾‹åŒ–ä¸€ä¸ªview controller. å½“åŠ è½½XIBæ—¶ï¼Œæ‰€æœ‰å›¾ç‰‡éƒ½è¢«ç¼“å­˜ï¼Œå¦‚æžœä½ åœ¨åšOS Xå¼€å‘çš„è¯ï¼Œå£°éŸ³æ–‡ä»¶ä¹Ÿæ˜¯ã€‚Appleåœ¨ç›¸å…³æ–‡æ¡£ä¸­çš„è®°è¿°æ˜¯ï¼š å½“ä½ åŠ è½½ä¸€ä¸ªå¼•ç”¨äº†å›¾ç‰‡æˆ–è€…å£°éŸ³èµ„æºçš„nibæ—¶ï¼ŒnibåŠ è½½ä»£ç ä¼šæŠŠå›¾ç‰‡å’Œå£°éŸ³æ–‡ä»¶å†™è¿›å†…å­˜ã€‚åœ¨OS Xä¸­ï¼Œå›¾ç‰‡å’Œå£°éŸ³èµ„æºè¢«ç¼“å­˜åœ¨named cacheä¸­ä»¥ä¾¿å°†æ¥ç”¨åˆ°æ—¶èŽ·å–ã€‚åœ¨iOSä¸­ï¼Œä»…å›¾ç‰‡èµ„æºä¼šè¢«å­˜è¿›named cachesã€‚å–å†³äºŽä½ æ‰€åœ¨çš„å¹³å°ï¼Œä½¿ç”¨NSImage æˆ–UIImage çš„imageNamed:æ–¹æ³•æ¥èŽ·å–å›¾ç‰‡èµ„æºã€‚ å¾ˆæ˜Žæ˜¾ï¼ŒåŒæ ·çš„äº‹æƒ…ä¹Ÿå‘ç”Ÿåœ¨storyboardsä¸­ï¼Œä½†æˆ‘å¹¶æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æ”¯æŒè¿™ä¸ªç»“è®ºçš„æ–‡æ¡£ã€‚ å¦å¤–ï¼Œå¿«é€Ÿæ‰“å¼€appæ˜¯å¾ˆé‡è¦çš„ï¼Œç‰¹åˆ«æ˜¯ç”¨æˆ·ç¬¬ä¸€æ¬¡æ‰“å¼€å®ƒæ—¶ï¼Œå¯¹appæ¥è®²ï¼Œç¬¬ä¸€å°è±¡å¤ªå¤ªå¤ªé‡è¦äº†ã€‚ ä½ èƒ½åšçš„å°±æ˜¯ä½¿å®ƒå°½å¯èƒ½åšæ›´å¤šçš„å¼‚æ­¥ä»»åŠ¡ï¼Œæ¯”å¦‚åŠ è½½è¿œç«¯æˆ–è€…æ•°æ®åº“æ•°æ®ï¼Œè§£æžæ•°æ®ã€‚ è¿˜æ˜¯é‚£å¥è¯ï¼Œé¿å…è¿‡äºŽåºžå¤§çš„XIBï¼Œå› ä¸ºä»–ä»¬æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸ŠåŠ è½½çš„ã€‚æ‰€ä»¥å°½é‡ä½¿ç”¨æ²¡æœ‰è¿™ä¸ªé—®é¢˜çš„Storyboardså§ï¼ æ³¨æ„ï¼Œç”¨Xcode debugæ—¶watchdogå¹¶ä¸è¿è¡Œï¼Œä¸€å®šè¦æŠŠè®¾å¤‡ä»ŽXcodeæ–­å¼€æ¥æµ‹è¯•å¯åŠ¨é€Ÿåº¦ 2.16 å­¦ä¼šæ‰‹åŠ¨åˆ›å»ºAutorelease PoolNSAutoreleasePoolè´Ÿè´£é‡Šæ”¾blockä¸­çš„autoreleased objectsã€‚ä¸€èˆ¬æƒ…å†µä¸‹å®ƒä¼šè‡ªåŠ¨è¢«UIKitè°ƒç”¨ã€‚ä½†æ˜¯æœ‰äº›çŠ¶å†µä¸‹ä½ ä¹Ÿéœ€è¦æ‰‹åŠ¨åŽ»åˆ›å»ºå®ƒã€‚ å‡å¦‚ä½ åˆ›å»ºå¾ˆå¤šä¸´æ—¶å¯¹è±¡ï¼Œä½ ä¼šå‘çŽ°å†…å­˜ä¸€ç›´åœ¨å‡å°‘ç›´åˆ°è¿™äº›å¯¹è±¡è¢«releaseçš„æ—¶å€™ã€‚è¿™æ˜¯å› ä¸ºåªæœ‰å½“UIKitç”¨å…‰äº†autorelease poolçš„æ—¶å€™memoryæ‰ä¼šè¢«é‡Šæ”¾ã€‚ å¥½æ¶ˆæ¯æ˜¯ä½ å¯ä»¥åœ¨ä½ è‡ªå·±çš„@autoreleasepoolé‡Œåˆ›å»ºä¸´æ—¶çš„å¯¹è±¡æ¥é¿å…è¿™ä¸ªè¡Œä¸ºï¼š NSArray urls = [@â€url1â€,@â€url2â€]; for (NSURL url in urls) { @autoreleasepool { NSError error; NSString fileContents = [NSString stringWithContentsOfURL: url encoding: NSUTF8StringEncoding error: &amp;error]; / Process the string, creating and autoreleasing more objects. / } } è¿™æ®µä»£ç åœ¨æ¯æ¬¡éåŽ†åŽé‡Šæ”¾æ‰€æœ‰autoreleaseå¯¹è±¡ 2.17UIImageåˆå§‹åŒ–Aï¼šimagedNamedåˆå§‹åŒ– Bï¼šimageWithContentsOfFileåˆå§‹åŒ– äºŒè€…ä¸åŒä¹‹å¤„åœ¨äºŽï¼ŒimageNamedé»˜è®¤åŠ è½½å›¾ç‰‡æˆåŠŸåŽä¼šå†…å­˜ä¸­ç¼“å­˜å›¾ç‰‡ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨ä¸€ä¸ªæŒ‡å®šçš„åå­—åœ¨ç³»ç»Ÿç¼“å­˜ä¸­æŸ¥æ‰¾å¹¶è¿”å›žä¸€ä¸ªå›¾ç‰‡å¯¹è±¡ï¼Œå¦‚æžœç¼“å­˜ä¸­æ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„å›¾ç‰‡å¯¹è±¡ï¼Œåˆ™ä»ŽæŒ‡å®šåœ°æ–¹åŠ è½½å›¾ç‰‡ç„¶åŽç¼“å­˜å¯¹è±¡ï¼Œå¹¶è¿”å›žè¿™ä¸ªå›¾ç‰‡å¯¹è±¡ è€ŒimageWithContentsOfFileåˆ™ä»…åªåŠ è½½å›¾ç‰‡ï¼Œä¸ç¼“å­˜ å¤§é‡ä½¿ç”¨imageNamedæ–¹å¼ä¼šåœ¨ä¸éœ€è¦ç¼“å­˜çš„åœ°æ–¹é¢å¤–å¢žåŠ å¼€é”€CPUçš„æ—¶é—´æ¥åšè¿™ä»¶äº‹ï¼Œå½“åº”ç”¨ç¨‹åºéœ€è¦åŠ è½½ä¸€å¼ æ¯”è¾ƒå¤§çš„å›¾ç‰‡å¹¶ä¸”ä½¿ç”¨ä¸€æ¬¡æ€§ï¼Œé‚£ä¹ˆå…¶å®žæ˜¯æ²¡æœ‰å¿…è¦åŽ»ç¼“å­˜è¿™ä¸ªå›¾ç‰‡çš„ï¼Œç”¨imageWithContentsOfFileæ˜¯æœ€ä¸ºç»æµŽçš„æ–¹å¼ï¼Œè¿™æ ·ä¸ä¼šå› ä¸ºUIImageå…ƒç´ è¾ƒå¤šæƒ…å†µä¸‹ï¼ŒCPUä¼šè¢«é€ä¸ªåˆ†æ•£åœ¨ä¸å¿…è¦ç¼“å­˜ä¸Šæµªè´¹è¿‡å¤šæ—¶é—´ ä½¿ç”¨åœºæ™¯éœ€è¦ç¼–ç¨‹æ—¶ï¼Œåº”è¯¥æ ¹æ®å®žé™…åº”ç”¨åœºæ™¯åŠ ä»¥åŒºåˆ†ï¼ŒUIimageè™½å°ï¼Œä½†ä½¿ç”¨å…ƒç´ è¾ƒå¤šé—®é¢˜ä¼šæœ‰æ‰€å‡¸æ˜¾ 2.18åˆ—è¡¨æ»šåŠ¨çš„æ—¶å€™ä¸è¦å¯¹imageviewèµ‹å€¼12// åªåœ¨NSDefaultRunLoopModeæ¨¡å¼ä¸‹æ˜¾ç¤ºå›¾ç‰‡ [self.imageView performSelector:@selector(setImage:) withObject:[UIImage imageNamed:@&quot;placeholder&quot;] afterDelay:3.0 inModes:@[NSDefaultRunLoopMode]]; æ¯”å¦‚ä¿®æ”¹sdwebimageä¸­çš„æ–¹æ³•ï¼Œå¦‚æžœè®¾ç½®imageviewä¸ºæ»šåŠ¨åˆ—è¡¨æ¨¡å¼ï¼Œåˆ™åŠ å…¥è¯¥æ–¹æ³•ï¼Œå½“åˆ—è¡¨åœæ­¢æ»šåŠ¨æ¨¡å¼çš„æ—¶å€™æ‰åŠ è½½å›¾ç‰‡ ä¸€äº›ç¬¬ä¸‰æ–¹çš„ä½¿ç”¨ å½“ç„¶æœ‰æ—¶å€™ä¹Ÿä¼šç”¨åˆ°ä¸€äº›ç¬¬ä¸‰æ–¹ï¼Œæ¯”å¦‚åœ¨ä½¿ç”¨UICollectionViewå’ŒUITableViewçš„æ—¶å€™ï¼ŒFacebookæœ‰ä¸€ä¸ªæ¡†æž¶å«AsyncDisplayKitï¼Œè¿™ä¸ªåº“å°±å¯ä»¥å¾ˆå¥½åœ°æå‡æ»šåŠ¨æ—¶æµç•…æ€§ä»¥åŠå›¾ç‰‡å¼‚æ­¥ä¸‹è½½åŠŸèƒ½ï¼ˆä¸æ”¯æŒsbå’ŒautoLayoutï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œçº¦æŸè®¾ç½®ï¼‰ï¼ŒAsyncDisplayKitç”¨ç›¸å…³nodeç±»ï¼Œæ›¿æ¢äº†UIViewå’Œå®ƒçš„å­ç±»,è€Œä¸”æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å®ƒå¯ä»¥å¼‚æ­¥è§£ç å›¾ç‰‡ï¼Œè°ƒæ•´å›¾ç‰‡å¤§å°ä»¥åŠå¯¹å›¾ç‰‡å’Œæ–‡æœ¬è¿›è¡Œæ¸²æŸ“ï¼ŒæŠŠè¿™äº›æ“ä½œéƒ½æ”¾åˆ°å­çº¿ç¨‹ï¼Œæ»‘åŠ¨çš„æ—¶å€™å°±æµç•…è®¸å¤šã€‚æˆ‘è®¤ä¸ºè¿™ä¸ªåº“æœ€æ–¹ä¾¿çš„å°±æ˜¯å®žçŽ°å›¾ç‰‡å¼‚æ­¥è§£ç ã€‚UIImageæ˜¾ç¤ºä¹‹å‰å¿…é¡»è¦å…ˆè§£ç å®Œæˆï¼Œè€Œä¸”è§£ç è¿˜æ˜¯åŒæ­¥çš„ã€‚å°¤å…¶æ˜¯åœ¨UICollectionView/UITableView ä¸­ä½¿ç”¨ prototype cellæ˜¾ç¤ºå¤§å›¾ï¼ŒUIImageçš„åŒæ­¥è§£ç åœ¨æ»šåŠ¨çš„æ—¶å€™ä¼šæœ‰æ˜Žæ˜¾çš„å¡é¡¿ã€‚å¦å¤–ä¸€ä¸ªå¾ˆå¸å¼•äººçš„ç‚¹æ˜¯AsyncDisplayKitå¯ä»¥æŠŠviewå±‚æ¬¡ç»“æž„è½¬æˆlayerã€‚å› ä¸ºå¤æ‚çš„viewå±‚æ¬¡ç»“æž„å¼€é”€å¾ˆå¤§ï¼Œå¦‚æžœä¸éœ€è¦viewç‰¹æœ‰çš„åŠŸèƒ½ï¼ˆä¾‹å¦‚ç‚¹å‡»äº‹ä»¶ï¼‰ï¼Œå°±å¯ä»¥ä½¿ç”¨AsyncDisplayKit çš„layer backingç‰¹æ€§ä»Žè€ŒèŽ·å¾—ä¸€äº›é¢å¤–çš„æå‡ã€‚å½“ç„¶è¿™ä¸ªåº“è¿˜å¤„äºŽå¼€å‘é˜¶æ®µï¼Œè¿˜æœ‰ä¸€äº›åœ°æ–¹åœ°æ–¹æœ‰å¾…å®Œå–„ï¼Œæ¯”å¦‚ä¸æ”¯æŒç¼“å­˜ï¼Œæˆ‘è¦ä½¿ç”¨è¿™ä¸ªåº“çš„æ—¶å€™ä¸€èˆ¬æ˜¯ç»“åˆAlamofireå’ŒAlamofireImageå®žçŽ°å›¾ç‰‡çš„ç¼“å­˜]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[blockè¿›é˜¶4--blockçš„é€»è¾‘ç†è§£]]></title>
    <url>%2F2016%2F06%2F29%2F2016%2F%E8%BD%AC-block%E8%BF%9B%E9%98%B64-block%E7%9A%84%E9%80%BB%E8%BE%91%E7%90%86%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[å¯¹ä¸ºä»€ä¹ˆè¦åƒå‰è¾¹ä¸‰ç¯‡æ–‡ç« åˆ†æžçš„é‚£æ ·åŽ»å®žçŽ°blockï¼Ÿblockæ˜¯ä¸€ç§ç±»ä¼¼äºŽé—­åŒ…çš„æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯å°†ä¸€æ®µä»£ç ä¿å­˜ï¼Œç„¶åŽåœ¨éœ€è¦çš„æ—¶å€™å†æ‰§è¡Œï¼Œè¿™æ ·å°±å¸¦æ¥äº†ä¸¤ä¸ªé—®é¢˜ æˆ‘æ€Žä¹ˆä¿è¯å½“æˆ‘éœ€è¦æ‰§è¡Œè¿™æ®µblockä»£ç çš„æ—¶å€™ï¼Œblockæœ¬èº«æ˜¯å­˜åœ¨çš„ å› ä¸ºä»£ç æ‰§è¡Œçš„å‚æ•°éœ€è¦ï¼Œæˆ‘å¦‚ä½•ä¿è¯å½“æˆ‘æ‰§è¡Œçš„æ—¶å€™å‚æ•°æ˜¯å¯ç”¨çš„ æˆ‘ä»¬é€šè¿‡å‰è¾¹çš„å­¦ä¹ çŸ¥é“ï¼Œblockæ˜¯ä¸€ä¸ªç»“æž„ä½“ï¼Œè¦æ‰§è¡Œçš„ä»£ç ä¼šè¢«å°è£…ä¸ºä¸€æ®µå‡½æ•°ï¼Œç„¶åŽè¿™ä¸ªå‡½æ•°çš„æŒ‡é’ˆè¢«ç»“æž„ä½“å¼•ç”¨ï¼Œè€Œè¿™ä¸ªå‡½æ•°çš„ä¸€ä¸ªå‚æ•°å°±æ˜¯blockç»“æž„ä½“ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä»Žç»“æž„ä½“ä¸­èŽ·å–éœ€è¦çš„å‚æ•°blockç»“æž„ä½“---&gt;æ–¹æ³•-----&gt;ä»Žblockç»“æž„ä½“èŽ·å–å‚æ•° ä¿è¯blockæœ¬èº«å­˜åœ¨é¦–å…ˆå¦‚æžœ blockå­—é¢é‡å†™åœ¨å…¨å±€åŒºä¸ºglobal block blockå­—é¢é‡æ²¡æœ‰èŽ·å–ä»»ä½•å¤–éƒ¨å˜é‡ï¼Œä¸ºglobal blockå…¶ä»–æƒ…å†µå…¨éƒ¨ä¸ºstatck blockï¼Œglobal blockå­˜åœ¨äºŽå…¨å±€åŒºï¼Œä¸ä¾èµ–ä¸Šä¸‹æ–‡ï¼Œå†…å­˜ç®¡ç†æ²¡æœ‰å•¥å¤§çš„å›°æ‰°ï¼Œæ ˆblockåœ¨å†…å­˜ä¸­çš„æ ˆåŒºï¼Œå˜é‡çš„ä½œç”¨åŸŸç»“æŸåŽï¼Œblockä¼šè¢«åºŸå¼ƒï¼ŒåŒæ—¶blockä¹Ÿä¼šè¢«åºŸå¼ƒï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ ˆblockæ‰¾åˆ°ä¸€ä¸ªæå‡ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œblockæä¾›äº†copyåŠŸèƒ½ï¼Œå°†blockå’Œblockå˜é‡ä»Žæ ˆæ‹·è´åˆ°å †ï¼Œæ­¤æ—¶è¿™ä¸ªblockä¹Ÿå°±å˜æˆäº†å †blockï¼Œè¿™æ ·åªè¦å¼•ç”¨çš„æŒ‡é’ˆå­˜åœ¨ï¼Œblockçš„ç”Ÿå­˜å°±ä¸æˆé—®é¢˜ã€‚è‡³äºŽè¿™ä¸ªcopyçš„åŠŸèƒ½åº”è¯¥è¯´æ¯”è¾ƒéšæ™¦copyçš„è°ƒç”¨æ—¶æœºå› ä¸ºblockæ˜¯åŒ¿åçš„ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ä¸åˆ›å»ºä¸€ä¸ªblockå£°æ˜Žçš„è¯ï¼Œæˆ‘ä»¬ä¸èƒ½å¤Ÿè°ƒç”¨å’Œä½¿ç”¨è¿™ä¸ªblockï¼Œæ‰€ä»¥æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¯¹blockçš„ä½¿ç”¨æƒ…å†µåšå¦‚ä¸‹çš„å½’çº³ï¼š ä½œä¸ºå˜é‡ ä½œä¸ºæ–¹æ³•å‚æ•° ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ€»éœ€è¦åšä¸€ä¸ªèµ‹å€¼çš„æ“ä½œï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨blockï¼Œæˆ‘ä»¬å¯ä»¥åƒä¸‹è¾¹è¿™æ ·æ‰“å°ä¸€ä¸ªæ•èŽ·å±€éƒ¨å˜é‡çš„block1NSLog(@&quot;%@&quot;, ^&#123;NSLog(@&quot;%d&quot;, c);&#125;);//ç»“æžœæ˜¯è¿™æ˜¯ç»™stackblock æ‰€ä»¥å¹¶ä¸æ˜¯æ•èŽ·äº†å±€éƒ¨å˜é‡å°±æ˜¯å †blockçš„ï¼Œéœ€è¦åšä¸€ä¸ªèµ‹å€¼æ“ä½œ123void(^myBlock)() = ^&#123;NSLog(@&quot;%d&quot;, c);&#125;; NSLog(@&quot;%@&quot;, myBlock); è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¾—åˆ°çš„å°±æ˜¯ä¸€ä¸ªmallocblockäº†ï¼Œè¿™æ˜¯å› ä¸ºè¿™ä¸ªå˜é‡å‰è¾¹æœ‰ä¸ªé»˜è®¤çš„å…³é”®å­—__strongï¼Œè¿™ä¸ªæ—¶å€™ç¼–è¯‘å™¨ä¼šé»˜è®¤å¯¹blockåšcopyæ“ä½œçš„ ç¬¬äºŒç§æƒ…å†µï¼Œä½œä¸ºä¸€ä¸ªå‚æ•°è¢«ä¼ é€’çš„æ—¶å€™ï¼Œå¦‚æžœæ˜¯æ ˆblockï¼Œé‚£ä¹ˆé»˜è®¤ä¹Ÿæ˜¯åšcopyæ“ä½œçš„1234- (MyBlcok)getaBlock&#123; int a = 0; return ^()&#123;NSLog(@&quot;%d&quot;, a);&#125;;&#125; æ‰“å°è¯¥blockå‘çŽ°æ˜¯mallocblock ä¿è¯å‚æ•°å¯ç”¨å…¨å±€å˜é‡æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå‚æ•°æ— éžåšå–å€¼å’Œèµ‹å€¼ä¸¤ç§æ“ä½œï¼Œè€Œæˆ‘ä»¬èƒ½å¦æ‹¿åˆ°è¿™ä¸ªå˜é‡ä¸€ä¸ªå…³é”®ç‚¹åœ¨äºŽè¿™ä¸ªå˜é‡çš„ä½œç”¨åŸŸï¼Œæœ¬è´¨æ¥è®²blockæ˜¯ä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸï¼Œå…¨å±€å˜é‡ç©¿é€æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å±€éƒ¨å˜é‡å°±æ— æ³•è¢«ç›´æŽ¥ä½¿ç”¨ï¼Œæ‰€ä»¥å±€éƒ¨å˜é‡åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæ˜¯åœ¨blockç»“æž„ä½“å†…éƒ¨åˆé‡æ–°å®šä¹‰äº†å¦å¤–ä¸€ä¸ªå˜é‡ï¼Œç„¶åŽå°†å€¼èµ‹ç»™è¿™ä¸ªå˜é‡ï¼Œè¿™æ ·çš„ç»“æžœå°±æ˜¯ï¼Œè¯¥å˜é‡é¦–å…ˆå¯ä»¥è¢«blockä½¿ç”¨äº†ï¼Œå…¶æ¬¡ç”Ÿå‘½å‘¨æœŸä¸Žblockä¸€è‡´äº†ï¼Œä¸ä¼šå­˜åœ¨è¢«è®¿é—®çš„æ—¶å€™é‡Šæ”¾è¿™æ ·çš„é—®é¢˜äº†ï¼Œè¿™ä¸ªblockå†…éƒ¨çš„åŒåå˜é‡ä¸Žå±€éƒ¨å˜é‡å…¶å®žæ²¡æœ‰ä»»ä½•çš„å…³ç³»ã€‚ä¿®æ”¹è¯¥å˜é‡çš„å€¼å¹¶ä¸ä¼šæ”¹å˜å±€éƒ¨å˜é‡çš„å€¼ã€‚ å±€éƒ¨å˜é‡å½“æˆ‘ä»¬åœ¨å±€éƒ¨å˜é‡çš„å¤–è¾¹åŠ ä¸Šä¸€ä¸ªconstçš„æ—¶å€™ï¼Œè¿™ä¸ªå˜é‡çš„ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿäº†æ”¹å˜ï¼Œå¹¶ä¸”å†…å­˜ä¸Šç§»åŠ¨åˆ°äº†é™æ€å˜é‡åŒºï¼Œä½†æ˜¯ä½œç”¨åŸŸå¹¶æ²¡æœ‰å˜åŒ–ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¸èƒ½ç©¿é€blockåƒå…¨å±€å˜é‡ä¸€æ ·è¢«èµ‹å€¼ï¼Œå½“ç„¶æˆ‘ä»¬å‘çŽ°ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ˜¯å¯ä»¥æ”¹å˜å±€éƒ¨å˜é‡çš„å€¼å¾—ï¼Œå…¶å®žè¿™ä¸ªæ—¶å€™ç³»ç»Ÿçš„åšæ³•æ˜¯ï¼Œå°†è¯¥å±€éƒ¨å˜é‡çš„æŒ‡é’ˆä¼ å…¥è¿›åŽ»ï¼Œå› ä¸ºåŠ ä¸Šäº†consté¦–å…ˆèµ·ç ç”Ÿå‘½å‘¨æœŸä¸€è‡´äº†ï¼Œèƒ½å¤Ÿä¿è¯ä¸ä¼šè¢«é‡Šæ”¾äº†ï¼Œå°†æŒ‡é’ˆä¼ å…¥è¿›åŽ»ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡é’ˆæ¥è®¿é—®è¯¥é™æ€å˜é‡çš„å†…å­˜åœ°å€è¿›è¡Œä¸€äº›ä¿®æ”¹çš„æ“ä½œ __blockå½“ç„¶å¯¹äºŽä¿®æ”¹å±€éƒ¨å˜é‡é™¤äº†æå‡å…¶ç”Ÿå‘½å‘¨æœŸè¿˜æœ‰ä¸€ç§åŠžæ³•å°±æ˜¯åŠ ä¸Š__blockå…³é”®å­—ï¼Œè¯¥å…³é”®å­—çš„ä½œç”¨æ˜¯ç”Ÿæˆäº†å¦å¤–ä¸€ä¸ªç»“æž„ä½“ï¼Œç„¶åŽèµ‹å€¼ç»™blockï¼Œè¿™æ ·ä¸€æ–¹é¢ä¿è¯äº†ç”Ÿå‘½å‘¨æœŸä¸€è‡´ï¼Œåˆå› ä¸ºæœ€åŽçš„æ‰§è¡Œå‡½æ•°ä»¥blockä¸ºå‚æ•°ï¼Œæ‰€ä»¥è®¿é—®è¯¥å˜é‡é—®é¢˜ä¸å¤§ï¼Œä¹Ÿè§£å†³äº†ä½œç”¨åŸŸçš„é—®é¢˜]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[(è½¬)blockè¿›é˜¶3--blockå’Œå¯¹è±¡çš„å†…å­˜ç®¡ç†]]></title>
    <url>%2F2016%2F06%2F25%2F2016%2F%E8%BD%AC-block%E8%BF%9B%E9%98%B63-block%E5%92%8C%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡é“¾æŽ¥https://www.zybuluo.com/MicroCai/note/51116åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®²äº†å¾ˆå¤šå…³äºŽ block å’ŒåŸºç¡€å˜é‡çš„å†…å­˜ç®¡ç†ï¼ŒæŽ¥ç€æˆ‘ä»¬èŠèŠ block å’Œå¯¹è±¡çš„å†…å­˜ç®¡ç†ï¼Œå¦‚ block ç»å¸¸ä¼šç¢°åˆ°çš„å¾ªçŽ¯å¼•ç”¨é—®é¢˜ç­‰ç­‰ã€‚ èŽ·å–å¯¹è±¡ç…§ä¾‹å…ˆæ¥æ®µä»£ç è½»æ¾ä¸‹ï¼Œçž§çž§ block æ˜¯æ€Žä¹ˆèŽ·å–å¤–éƒ¨å¯¹è±¡çš„123456789101112131415161718/********************** capturing objects **********************/typedef void (^blk_t)(id obj);blk_t blk;- (void)viewDidLoad&#123; [self captureObject]; blk([[NSObject alloc] init]); blk([[NSObject alloc] init]); blk([[NSObject alloc] init]);&#125;- (void)captureObject&#123; id array = [[NSMutableArray alloc] init]; blk = [^(id obj) &#123; [array addObject:obj]; NSLog(@&quot;array count = %ld&quot;, [array count]); &#125; copy];&#125; ç¿»è¯‘åŽçš„å…³é”®ä»£ç æ‘˜å½•å¦‚ä¸‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152/* a struct for the Block and some functions */struct __main_block_impl_0&#123; struct __block_impl impl; struct __main_block_desc_0 *Desc; id __strong array; __main_block_impl_0(void *fp, struct __main_block_desc_0 *desc, id __strong _array, int flags=0) : array(_array) &#123; impl.isa = &amp;_NSConcreteStackBlock; impl.Flags = flags; impl.FuncPtr = fp; Desc = desc; &#125;&#125;;static void __main_block_func_0(struct __main_block_impl_0 *__cself, id obj)&#123; id __strong array = __cself-&gt;array; [array addObject:obj]; NSLog(@&quot;array count = %ld&quot;, [array count]);&#125;static void __main_block_copy_0(struct __main_block_impl_0 *dst, __main_block_impl_0 *src)&#123; _Block_object_assign(&amp;dst-&gt;array, src-&gt;array, BLOCK_FIELD_IS_OBJECT);&#125;static void __main_block_dispose_0(struct __main_block_impl_0 *src)&#123; _Block_object_dispose(src-&gt;array, BLOCK_FIELD_IS_OBJECT);&#125;struct static struct __main_block_desc_0&#123; unsigned long reserved; unsigned long Block_size; void (*copy)(struct __main_block_impl_0*, struct __main_block_impl_0*); void (*dispose)(struct __main_block_impl_0*);&#125; __main_block_desc_0_DATA = &#123; 0, sizeof(struct __main_block_impl_0), __main_block_copy_0, __main_block_dispose_0 &#125;;/* Block literal and executing the Block */blk_t blk;&#123; id __strong array = [[NSMutableArray alloc] init]; blk = &amp;__main_block_impl_0(__main_block_func_0, &amp;__main_block_desc_0_DATA, array, 0x22000000); blk = [blk copy];&#125;(*blk-&gt;impl.FuncPtr)(blk, [[NSObject alloc] init]);(*blk-&gt;impl.FuncPtr)(blk, [[NSObject alloc] init]);(*blk-&gt;impl.FuncPtr)(blk, [[NSObject alloc] init]); åœ¨æœ¬ä¾‹ä¸­ï¼Œå½“å˜é‡å˜é‡ä½œç”¨åŸŸç»“æŸæ—¶ï¼Œarray è¢«åºŸå¼ƒï¼Œå¼ºå¼•ç”¨å¤±æ•ˆï¼ŒNSMutableArray ç±»çš„å®žä¾‹å¯¹è±¡ä¼šè¢«é‡Šæ”¾å¹¶åºŸå¼ƒã€‚åœ¨è¿™å±éš¾å…³å¤´ï¼Œblock åŠæ—¶è°ƒç”¨äº† copy æ–¹æ³•ï¼Œåœ¨ _Block_object_assign ä¸­ï¼Œå°† array èµ‹å€¼ç»™ block æˆå‘˜å˜é‡å¹¶æŒæœ‰ã€‚æ‰€ä»¥ä¸Šé¢ä»£ç å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œæ‰“å°å‡ºæ¥çš„ array count ä¾æ¬¡é€’å¢žã€‚ æ€»ç»“ä»£ç å¯æ­£å¸¸è¿è¡Œçš„åŽŸå› å…³é”®å°±åœ¨äºŽ block é€šè¿‡è°ƒç”¨ copy æ–¹æ³•ï¼ŒæŒæœ‰äº† __strong ä¿®é¥°çš„å¤–éƒ¨å˜é‡ï¼Œä½¿å¾—å¤–éƒ¨å¯¹è±¡åœ¨è¶…å‡ºå…¶ä½œç”¨åŸŸåŽå¾—ä»¥ç»§ç»­å­˜æ´»ï¼Œä»£ç æ­£å¸¸æ‰§è¡Œã€‚ åœ¨ä»¥ä¸‹æƒ…å½¢ä¸­ï¼Œ block ä¼šä»Žæ ˆæ‹·è´åˆ°å †ï¼š å½“ block è°ƒç”¨ copy æ–¹æ³•æ—¶ï¼Œå¦‚æžœ block åœ¨æ ˆä¸Šï¼Œä¼šè¢«æ‹·è´åˆ°å †ä¸Šï¼› å½“ block ä½œä¸ºå‡½æ•°è¿”å›žå€¼è¿”å›žæ—¶ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨å°† block ä½œä¸º _Block_copy å‡½æ•°ï¼Œæ•ˆæžœç­‰åŒäºŽ block ç›´æŽ¥è°ƒç”¨ copy æ–¹æ³•ï¼› å½“ block è¢«èµ‹å€¼ç»™ __strong id ç±»åž‹çš„å¯¹è±¡æˆ– block çš„æˆå‘˜å˜é‡æ—¶ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨å°† block ä½œä¸º _Block_copy å‡½æ•°ï¼Œæ•ˆæžœç­‰åŒäºŽ block ç›´æŽ¥è°ƒç”¨ copy æ–¹æ³•ï¼› å½“ block ä½œä¸ºå‚æ•°è¢«ä¼ å…¥æ–¹æ³•åå¸¦æœ‰ usingBlock çš„ Cocoa Framework æ–¹æ³•æˆ– GCD çš„ API æ—¶ã€‚è¿™äº›æ–¹æ³•ä¼šåœ¨å†…éƒ¨å¯¹ä¼ é€’è¿›æ¥çš„ block è°ƒç”¨ copy æˆ– _Block_copy è¿›è¡Œæ‹·è´;å…¶å®žåŽä¸‰ç§æƒ…å†µåœ¨ä¸Šç¯‡æ–‡ç« blockçš„è‡ªåŠ¨æ‹·è´å·²ç»åšè¿‡è¯´æ˜Žé™¤æ­¤ä¹‹å¤–ï¼Œéƒ½éœ€è¦æ‰‹åŠ¨è°ƒç”¨ã€‚ å»¶ä¼¸é˜…è¯»ï¼šObjective-C ç»“æž„ä½“ä¸­çš„ __strong æˆå‘˜å˜é‡ æ³¨æ„åˆ° main_block_impl_0 ç»“æž„ä½“æœ‰ä»€ä¹ˆå¼‚å¸¸æ²¡ï¼Ÿåœ¨ C ç»“æž„ä½“ä¸­å‡ºçŽ°äº† strong å…³é”®å­—ä¿®é¥°çš„å˜é‡ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œ Objective-C çš„ç¼–è¯‘å™¨å› ä¸ºæ— æ³•æ£€æµ‹ C ç»“æž„ä½“åˆå§‹åŒ–å’Œé‡Šæ”¾çš„æ—¶é—´ï¼Œä¸èƒ½è¿›è¡Œæœ‰æ•ˆçš„å†…å­˜ç®¡ç†ï¼Œæ‰€ä»¥ Objective-C çš„ C ç»“æž„ä½“æˆå‘˜æ˜¯ä¸èƒ½ç”¨ strongã€weak ç­‰ç­‰è¿™ç±»å…³é”®å­—ä¿®é¥°ã€‚ç„¶è€Œ runtime åº“æ˜¯å¯ä»¥åœ¨è¿è¡Œæ—¶æ£€æµ‹åˆ° block çš„å†…å­˜å˜åŒ–ï¼Œå¦‚ block ä½•æ—¶ä»Žæ ˆæ‹·è´åˆ°å †ï¼Œä½•æ—¶ä»Žå †ä¸Šé‡Šæ”¾ç­‰ç­‰ï¼Œæ‰€ä»¥å°±ä¼šå‡ºçŽ°ä¸Šè¿°ç»“æž„ä½“æˆå‘˜å˜é‡ç”¨ __strong ä¿®é¥°çš„æƒ…å†µã€‚ __block å˜é‡å’Œå¯¹è±¡__block è¯´æ˜Žç¬¦å¯ä»¥ä¿®é¥°ä»»ä½•ç±»åž‹çš„è‡ªåŠ¨å˜é‡ã€‚ä¸‹é¢è®©æˆ‘ä»¬å†çœ‹ä¸ªå°ä¾‹å­ï¼Œå•Šï¼Œæ„‰å¿«çš„ä»£ç æ—¶é—´åˆåˆ°å•¦ã€‚ 12/******* block ä¿®é¥°å¯¹è±¡ *******/__block id obj = [[NSObject alloc] init]; ARC ä¸‹ï¼Œå¯¹è±¡æ‰€æœ‰æƒä¿®é¥°ç¬¦é»˜è®¤ä¸º __strongï¼Œå³ 123456789101112131415161718192021222324252627282930__block id __strong obj = [[NSObject alloc] init];/******* block ä¿®é¥°å¯¹è±¡è½¬æ¢åŽçš„ä»£ç  *******//* struct for __block variable */struct __Block_byref_obj_0 &#123; void *__isa; __Block_byref_obj_0 *__forwarding; int __flags; int __size; void (*__Block_byref_id_object_copy)(void*, void*); void (*__Block_byref_id_object_dispose)(void*); __strong id obj;&#125;;static void __Block_byref_id_object_copy_131(void *dst, void *src) &#123; _Block_object_assign((char*)dst + 40, *(void * *) ((char*)src + 40), 131);&#125;static void __Block_byref_id_object_dispose_131(void *src) &#123; _Block_object_dispose(*(void * *) ((char*)src + 40), 131);&#125;/* __block variable declaration */__Block_byref_obj_0 obj = &#123; 0, &amp;obj, 0x2000000, sizeof(__Block_byref_obj_0), __Block_byref_id_object_copy_131, __Block_byref_id_object_dispose_131, [[NSObject alloc] init] &#125;; block id strong obj çš„ä½œç”¨å’Œ id strong obj çš„ä½œç”¨ååˆ†ç±»ä¼¼ã€‚å½“ block id strong obj ä»Žæ ˆä¸Šæ‹·è´åˆ°å †ä¸Šæ—¶ï¼Œ_Block_object_assign è¢«è°ƒç”¨ï¼Œblock æŒæœ‰ objï¼›å½“ block id __strong obj ä»Žå †ä¸Šè¢«åºŸå¼ƒæ—¶ï¼Œ_Block_object_dispose è¢«è°ƒç”¨ç”¨ä»¥é‡Šæ”¾æ­¤å¯¹è±¡ï¼Œblock å¼•ç”¨æ¶ˆå¤±ã€‚ æ‰€ä»¥ï¼Œåªè¦æ˜¯å †ä¸Šçš„ strong ä¿®é¥°ç¬¦ä¿®é¥°çš„ block å¯¹è±¡ç±»åž‹çš„å˜é‡ï¼Œå’Œ block å†…èŽ·å–åˆ°çš„ __strong ä¿®é¥°ç¬¦ä¿®é¥°çš„å¯¹è±¡ç±»åž‹çš„å˜é‡ï¼Œç¼–è¯‘å™¨éƒ½èƒ½å¯¹å®ƒä»¬çš„å†…å­˜è¿›è¡Œé€‚å½“çš„ç®¡ç†ã€‚ å¦‚æžœä¸Šé¢çš„ strong æ¢æˆ weakï¼Œç»“æžœä¼šæ€Žæ ·å‘¢ï¼Ÿ 123456789101112131415161718192021222324/********************** capturing __weak objects **********************/typedef void (^blk_t)(id obj);blk_t blk;- (void)viewDidLoad&#123; [self captureObject]; blk([[NSObject alloc] init]); blk([[NSObject alloc] init]); blk([[NSObject alloc] init]);&#125;- (void)captureObject&#123; id array = [[NSMutableArray alloc] init]; id __weak array2 = array; blk = [^(id obj) &#123; [array2 addObject:obj]; NSLog(@&quot;array2 count = %ld&quot;, [array2 count]); &#125; copy];&#125;ç»“æžœæ˜¯ï¼šarray2 count = 0array2 count = 0array2 count = 0 åŽŸå› å¾ˆç®€å•ï¼Œarray2 æ˜¯å¼±å¼•ç”¨ï¼Œå½“å˜é‡ä½œç”¨åŸŸç»“æŸï¼Œarray æ‰€æŒ‡å‘çš„å¯¹è±¡å†…å­˜è¢«é‡Šæ”¾ï¼Œarray2 æŒ‡å‘ nilï¼Œå‘ nil å¯¹è±¡å‘é€ count æ¶ˆæ¯å°±è¿”å›žç»“æžœ 0 äº†ã€‚ å¦‚æžœ weak å†æ”¹æˆ unsafe_unretained å‘¢ï¼Ÿ__unsafe_unretained ä¿®é¥°çš„å¯¹è±¡å˜é‡æŒ‡é’ˆå°±ç›¸å½“äºŽä¸€ä¸ªæ™®é€šæŒ‡é’ˆã€‚ä½¿ç”¨è¿™ä¸ªä¿®é¥°ç¬¦æœ‰ç‚¹éœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œå½“æŒ‡é’ˆæ‰€æŒ‡å‘çš„å¯¹è±¡å†…å­˜è¢«é‡Šæ”¾æ—¶ï¼ŒæŒ‡é’ˆå˜é‡ä¸ä¼šè¢«ç½®ä¸º nilã€‚æ‰€ä»¥å½“ä½¿ç”¨è¿™ä¸ªä¿®é¥°ç¬¦æ—¶ï¼Œä¸€å®šè¦æ³¨æ„ä¸è¦é€šè¿‡æ‚¬æŒ‚æŒ‡é’ˆï¼ˆæŒ‡å‘è¢«åºŸå¼ƒå†…å­˜çš„æŒ‡é’ˆï¼‰æ¥è®¿é—®å·²ç»è¢«åºŸå¼ƒçš„å¯¹è±¡å†…å­˜ï¼Œå¦åˆ™ç¨‹åºå°±ä¼šå´©æºƒã€‚ å¦‚æžœ unsafe_unretained å†æ”¹æˆ autoreleasing ä¼šæ€Žæ ·å‘¢ï¼Ÿä¼šæŠ¥é”™ï¼Œç¼–è¯‘å™¨å¹¶ä¸å…è®¸ä½ è¿™ä¹ˆå¹²ï¼å¦‚æžœä½ è¿™ä¹ˆå†™ __block id __autoreleasing obj = [[NSObject alloc] init];ç¼–è¯‘å™¨å°±ä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯ï¼Œæ„æ€å°±æ˜¯ block å’Œ autoreleasing ä¸èƒ½åŒæ—¶ä½¿ç”¨ã€‚ 1error: __block variables cannot have __autoreleasing ownership __block id __autoreleasing obj = [[NSObject alloc] init]; å¾ªçŽ¯å¼•ç”¨åƒè¾›ä¸‡è‹¦ï¼Œé‡å¤´æˆç»ˆäºŽæ¥äº†ã€‚block å¦‚æžœä½¿ç”¨ä¸å°å¿ƒï¼Œå°±å®¹æ˜“å‡ºçŽ°å¾ªçŽ¯å¼•ç”¨ï¼Œå¯¼è‡´å†…å­˜æ³„éœ²ã€‚åˆ°åº•å“ªé‡Œæ³„éœ²äº†å‘¢ï¼Ÿé€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œå„ä½ç«¥éž‹åº”è¯¥æœ‰ä¸ªåº•äº†ï¼Œä¸‹é¢å°±è®©æˆ‘ä»¬ä¸€èµ·è¿›å…¥è¿™æ³„éœ²åœ°åŒºçž§çž§ï¼Œå“ªå„¿å‡ºäº†é—®é¢˜ï¼ æ„‰å¿«çš„ä»£ç æ—¶é—´åˆ° 123456789101112131415161718192021222324252627// ARC enabled/************** MyObject Class **************/typedef void (^blk_t)(void);@interface MyObject : NSObject&#123; blk_t blk_;&#125; @end@implementation MyObject- (id)init&#123; self = [super init]; blk_ = ^&#123;NSLog(@&quot;self = %@&quot;, self);&#125;; return self;&#125;- (void)dealloc&#123; NSLog(@&quot;dealloc&quot;);&#125; @end/************** main function **************/int main()&#123; id myObject = [[MyObject alloc] init]; NSLog(@&quot;%@&quot;, myObject); return 0;&#125; ç”±äºŽ self æ˜¯ __strong ä¿®é¥°ï¼Œåœ¨ ARC ä¸‹ï¼Œå½“ç¼–è¯‘å™¨è‡ªåŠ¨å°†ä»£ç ä¸­çš„ block ä»Žæ ˆæ‹·è´åˆ°å †æ—¶ï¼Œblock ä¼šå¼ºå¼•ç”¨å’ŒæŒæœ‰ selfï¼Œè€Œ self æ°å¥½ä¹Ÿå¼ºå¼•ç”¨å’ŒæŒæœ‰äº† blockï¼Œå°±é€ æˆäº†ä¼ è¯´ä¸­çš„å¾ªçŽ¯å¼•ç”¨ã€‚ ç”±äºŽå¾ªçŽ¯å¼•ç”¨çš„å­˜åœ¨ï¼Œé€ æˆåœ¨ main() å‡½æ•°ç»“æŸæ—¶ï¼Œå†…å­˜ä»ç„¶æ— æ³•é‡Šæ”¾ï¼Œå³å†…å­˜æ³„éœ²ã€‚ç¼–è¯‘å™¨ä¹Ÿä¼šç»™å‡ºè­¦å‘Šä¿¡æ¯12345warning: capturing &apos;self&apos; strongly in this block is likely to lead to a retain cycle [-Warc-retain-cycles] blk_ = ^&#123;NSLog(@&quot;self = %@&quot;, self);&#125;;note: Block will be retained by an object strongly retained by the captured object blk_ = ^&#123;NSLog(@&quot;self = %@&quot;, self);&#125;; ä¸ºäº†é¿å…è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œå¯ä»¥åœ¨å˜é‡å£°æ˜Žæ—¶ç”¨ weak ä¿®é¥°ç¬¦ä¿®é¥°å˜é‡ selfï¼Œè®© block ä¸å¼ºå¼•ç”¨ selfï¼Œä»Žè€Œç ´é™¤å¾ªçŽ¯ã€‚iOS4 å’Œ Snow Leopard ç”±äºŽå¯¹ weak çš„æ”¯æŒä¸å¤Ÿå®Œå…¨ï¼Œå¯ä»¥ç”¨ unsafe_unretained ä»£æ›¿ã€‚Æ’12345678910111213- (id)init&#123; self = [super init]; id __weak tmp = self; blk_ = ^&#123;NSLog(@&quot;self = %@&quot;, tmp);&#125;; return self;&#125;``` ![](http://i1.piimg.com/567571/b1057b9ff703d7cd.png)å†çœ‹ä¸€ä¸ªä¾‹å­ @interface MyObject : NSObject{ blkt blk; id obj_;}@end@implementation MyObject (id)init{ self = [super init]; blk = ^{ NSLog(@â€obj = %@â€, obj_); }; return self;}â€¦â€¦@end1234567ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè™½ç„¶æ²¡æœ‰ç›´æŽ¥ä½¿ç”¨ selfï¼Œå´ä¹Ÿå­˜åœ¨å¾ªçŽ¯å¼•ç”¨çš„é—®é¢˜ã€‚å› ä¸ºå¯¹äºŽç¼–è¯‘å™¨æ¥è¯´ï¼Œobj_ å°±ç›¸å½“äºŽ self-&gt;obj_ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å°±ä¼šå˜æˆ`blk_ = ^&#123; NSLog(@&quot;obj_ = %@&quot;, self-&gt;obj_); &#125;;`æ‰€ä»¥è¿™ä¸ªä¾‹å­åªè¦ç”¨ __weakï¼Œåœ¨ init æ–¹æ³•é‡Œé¢åŠ ä¸€è¡Œå³å¯`id __weak obj = obj_;`ç ´è§£å¾ªçŽ¯å¼•ç”¨è¿˜æœ‰ä¸€æ‹›ï¼Œä½¿ç”¨ __block ä¿®é¥°å¯¹è±¡ï¼Œåœ¨ block å†…å°†å¯¹è±¡ç½®ä¸º nil å³å¯ï¼Œå¦‚ä¸‹ typedef void (^blk_t)(void);@interface MyObject : NSObject{ blkt blk;}@end@implementation MyObject (id)init{ self = [super init]; _block id tmp = self; blk = ^{ NSLog(@&quot;self = %@&quot;, tmp); tmp = nil; }; return self;} (void)execBlock{ blk_();} (void)dealloc{ NSLog(@â€deallocâ€);}@endint main(){ id object = [[MyObject alloc] init]; [object execBlock]; return 0;}1234567891011è¿™ä¸ªä¾‹å­æŒºæœ‰æ„æ€çš„ï¼Œå¦‚æžœæ‰§è¡Œ execBlock æ–¹æ³•ï¼Œå°±æ²¡æœ‰å¾ªçŽ¯å¼•ç”¨ï¼Œå¦‚æžœä¸æ‰§è¡Œå°±æœ‰å¾ªçŽ¯å¼•ç”¨ï¼ŒæŒºå€¼å¾—çŽ©å‘³çš„ã€‚ä¸€æ–¹é¢ï¼Œä½¿ç”¨ __block æŒºå±é™©çš„ï¼Œä¸‡ä¸€ä»£ç ä¸­ä¸æ‰§è¡Œ block ï¼Œå°±é€ æˆäº†å¾ªçŽ¯å¼•ç”¨ï¼Œè€Œä¸”ç¼–è¯‘å™¨è¿˜æ²¡æ³•æ£€æŸ¥å‡ºæ¥ï¼›å¦ä¸€æ–¹é¢ï¼Œä½¿ç”¨ __block å¯ä»¥è®©æˆ‘ä»¬é€šè¿‡ __block å˜é‡åŽ»æŽ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œè€Œä¸”æœ‰å¯èƒ½åœ¨ä¸€äº›éžå¸¸è€æ—§çš„ MRC ä»£ç ä¸­ï¼Œç”±äºŽä¸æ”¯æŒ __weakï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•æ¥ä»£æ›¿ __unsafe_unretainedï¼Œä»Žè€Œé¿å…æ‚¬æŒ‚æŒ‡é’ˆçš„é—®é¢˜ã€‚è¿˜æœ‰ä¸ªå€¼å¾—ä¸€æçš„æ—¶ï¼Œåœ¨ MRC ä¸‹ï¼Œä½¿ç”¨ __block è¯´æ˜Žç¬¦ä¹Ÿå¯ä»¥é¿å…å¾ªçŽ¯å¼•ç”¨ã€‚å› ä¸ºå½“ block ä»Žæ ˆæ‹·è´åˆ°å †æ—¶ï¼Œ__block å¯¹è±¡ç±»åž‹çš„å˜é‡ä¸ä¼šè¢« retainï¼Œæ²¡æœ‰ __block è¯´æ˜Žç¬¦çš„å¯¹è±¡ç±»åž‹çš„å˜é‡åˆ™ä¼šè¢« retianã€‚æ­£æ˜¯ç”±äºŽ __block åœ¨ ARC å’Œ MRC ä¸‹çš„å·¨å¤§å·®å¼‚ï¼Œæˆ‘ä»¬åœ¨å†™ä»£ç æ—¶ä¸€å®šè¦åŒºåˆ†æ¸…æ¥šåˆ°åº•æ˜¯ ARC è¿˜æ˜¯ MRCã€‚&gt;å°½ç®¡ ARC å·²ç»å¦‚æ­¤æ™®åŠï¼Œæˆ‘ä»¬å¯èƒ½å·²ç»å¯ä»¥ä¸ç”¨åŽ»ç®¡ MRC çš„ä¸œè¥¿ï¼Œä½†è¦æœ‰ç‚¹ä¸€å®šè¦æ˜Žç™½ï¼ŒARC å’Œ MRC éƒ½æ˜¯åŸºäºŽå¼•ç”¨è®¡æ•°çš„å†…å­˜ç®¡ç†ï¼Œå…¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œåªä¸è¿‡ ARC åœ¨ç¼–è¯‘æœŸè‡ªåŠ¨åŒ–çš„åšäº†å†…å­˜å¼•ç”¨è®¡æ•°çš„ç®¡ç†ï¼Œä½¿å¾—ç³»ç»Ÿå¯ä»¥åœ¨é€‚å½“çš„æ—¶å€™ä¿ç•™å†…å­˜ï¼Œé€‚å½“çš„æ—¶å€™é‡Šæ”¾å†…å­˜ã€‚å¾ªçŽ¯å¼•ç”¨åˆ°æ­¤ä¸ºæ­¢ï¼Œä¸œè¥¿å¹¶ä¸å¤šã€‚å¦‚æžœæ˜Žç™½äº†ä¹‹å‰çš„çŸ¥è¯†ç‚¹ï¼Œå°±ä¼šäº†è§£å¾ªçŽ¯å¼•ç”¨ä¸è¿‡æ˜¯å‰é¢çŸ¥è¯†ç‚¹çš„è‡ªç„¶å»¶ä¼¸ç‚¹ç½¢äº†ã€‚## Copy å’Œ Releaseåœ¨ ARC ä¸‹ï¼Œæœ‰æ—¶éœ€è¦æ‰‹åŠ¨æ‹·è´å’Œé‡Šæ”¾ blockã€‚åœ¨ MRC ä¸‹æ›´æ˜¯å¦‚æ­¤ï¼Œå¯ä»¥ç›´æŽ¥ç”¨ copy å’Œ release æ¥æ‹·è´å’Œé‡Šæ”¾ void (^blk_on_heap)(void) = [blk_on_stack copy];[blk_on_heap release];12æ‹·è´åˆ°å †åŽï¼Œå°±å¯ä»¥ ç”¨ retain æŒæœ‰ block [blk_on_heap retain];123ç„¶è€Œå¦‚æžœ block åœ¨æ ˆä¸Šï¼Œä½¿ç”¨ retain æ˜¯æ¯«æ— æ•ˆæžœçš„ï¼Œå› æ­¤æŽ¨èä½¿ç”¨ copy æ–¹æ³•æ¥æŒæœ‰ blockã€‚block æ˜¯ C è¯­è¨€çš„æ‰©å±•ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ C ä¸­ä½¿ç”¨ block çš„è¯­æ³•ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ Block_copy å’Œ Block_release å‡½æ•°æ¥ä»£æ›¿ copy å’Œ release æ–¹æ³• void (^blk_on_heap)(void) = Block_copy(blk_on_stack);Block_release(blk_on_heap);```Block_copy çš„ä½œç”¨ç›¸å½“äºŽä¹‹å‰çœ‹åˆ°è¿‡çš„ _Block_copy å‡½æ•°ï¼Œè€Œä¸” Objective-C runtime åº“åœ¨è¿è¡Œæ—¶æ‹·è´ block ç”¨çš„å°±æ˜¯è¿™ä¸ªå‡½æ•°ã€‚åŒç†ï¼Œé‡Šæ”¾ block æ—¶ï¼Œruntime è°ƒç”¨äº† Block_release å‡½æ•°ã€‚ æœ€åŽè¿™é‡Œæœ‰ä¸€ç¯‡æ€»ç»“ block çš„æ–‡ç« çš„å¾ˆä¸é”™ï¼ŒæŽ¨èå¤§å®¶çœ‹çœ‹ï¼šhttp://tanqisen.github.io/blog/2013/04/19/gcd-block-cycle-retain/]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[(è½¬)blockè¿›é˜¶2--blockå’Œå˜é‡å†…å­˜ç®¡ç†]]></title>
    <url>%2F2016%2F06%2F25%2F2016%2F%E8%BD%AC-block%E8%BF%9B%E9%98%B62-block%E5%92%8C%E5%8F%98%E9%87%8F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%2F</url>
    <content type="text"><![CDATA[äº†è§£äº† blockçš„å®žçŽ°ï¼Œæˆ‘ä»¬æŽ¥ç€æ¥èŠèŠ block å’Œå˜é‡çš„å†…å­˜ç®¡ç†ã€‚æœ¬æ–‡å°†ä»‹ç»å¯å†™å˜é‡ã€blockçš„å†…å­˜æ®µã€__blockå˜é‡çš„å†…å­˜æ®µç­‰å†…å®¹ï¼Œçœ‹å®Œæœ¬æ–‡ä¼šå¯¹ block å’Œå˜é‡çš„å†…å­˜ç®¡ç†æœ‰æ›´åŠ æ¸…æ™°çš„è®¤è¯†ã€‚ä¸Šç¯‡æ–‡ç« ä¸¾äº†ä¸ªä¾‹å­ï¼Œåœ¨ block å†…èŽ·å–äº†ä¸€ä¸ªå¤–éƒ¨çš„å±€éƒ¨å˜é‡ï¼Œå¯ä»¥è¯»å–ï¼Œä½†æ— æ³•è¿›è¡Œå†™å…¥çš„ä¿®æ”¹æ“ä½œã€‚åœ¨ C è¯­è¨€ä¸­æœ‰ä¸‰ç§ç±»åž‹çš„å˜é‡ï¼Œå¯åœ¨ block å†…è¿›è¡Œè¯»å†™æ“ä½œ å…¨å±€å˜é‡ å…¨å±€é™æ€å˜é‡ é™æ€å˜é‡ å…¨å±€å˜é‡ å’Œ å…¨å±€é™æ€å˜é‡ ç”±äºŽä½œç”¨åŸŸåœ¨å…¨å±€ï¼Œæ‰€ä»¥åœ¨ block å†…è®¿é—®å’Œè¯»å†™è¿™ä¸¤ç±»å˜é‡å’Œæ™®é€šå‡½æ•°æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œè€Œ é™æ€å˜é‡ ä½œç”¨åŸŸåœ¨ block ä¹‹å¤–ï¼Œæ˜¯æ€Žä¹ˆå¯¹å®ƒè¿›è¡Œè¯»å†™å‘¢ï¼Ÿé€šè¿‡ clang å·¥å…·ï¼Œæˆ‘ä»¬å‘çŽ°åŽŸæ¥ é™æ€å˜é‡ æ˜¯é€šè¿‡æŒ‡é’ˆä¼ é€’ï¼Œå°†å˜é‡ä¼ é€’åˆ° block å†…ï¼Œæ‰€ä»¥å¯ä»¥ä¿®æ”¹å˜é‡å€¼ã€‚è€Œä¸Šç¯‡æ–‡ç« ä¸­çš„å¤–éƒ¨å˜é‡æ˜¯é€šè¿‡å€¼ä¼ é€’ï¼Œè‡ªç„¶æ²¡æ³•å¯¹èŽ·å–åˆ°çš„å¤–éƒ¨å˜é‡è¿›è¡Œä¿®æ”¹ã€‚ç”±æ­¤ï¼Œå¯ä»¥ç»™æˆ‘ä»¬ä¸€ä¸ªå¯ç¤ºï¼Œå½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹å¤–éƒ¨å˜é‡æ—¶ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥åƒ é™æ€å˜é‡ è¿™æ ·é€šè¿‡æŒ‡é’ˆæ¥ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼å‘¢ï¼Ÿ Apple æ—©å°±ä¸ºæˆ‘ä»¬å‡†å¤‡äº†è¿™ä¹ˆä¸€ä¸ªä¸œè¥¿ â€”â€” â€œ__blockâ€ __block è¯´æ˜Žç¬¦æŒ‰ç…§æƒ¯ä¾‹ï¼Œé‡å†™ä¸€å°æ®µä»£ç çœ‹çœ‹ __block çš„çœŸèº«123456789/************* ä½¿ç”¨ __block çš„æºç  *************/int main()&#123; __block int intValue = 0; void (^blk)(void) = ^&#123; intValue = 1; &#125;; return 0;&#125; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273/************* ä½¿ç”¨ clang ç¿»è¯‘åŽå¦‚ä¸‹ *************/struct __block_impl&#123; void *isa; int Flags; int Reserved; void *FuncPtr;&#125;;struct __Block_byref_intValue_0&#123; void *__isa; __Block_byref_intValue_0 *__forwarding; int __flags; int __size; int intValue;&#125;;struct __main_block_impl_0&#123; struct __block_impl impl; struct __main_block_desc_0* Desc; __Block_byref_intValue_0 *intValue; // by ref __main_block_impl_0(void *fp, struct __main_block_desc_0 *desc, __Block_byref_intValue_0 *_intValue, int flags=0) : intValue(_intValue-&gt;__forwarding) &#123; impl.isa = &amp;_NSConcreteStackBlock; impl.Flags = flags; impl.FuncPtr = fp; Desc = desc; &#125;&#125;;static void __main_block_func_0(struct __main_block_impl_0 *__cself)&#123; __Block_byref_intValue_0 *intValue = __cself-&gt;intValue; // bound by ref (intValue-&gt;__forwarding-&gt;intValue) = 1;&#125;static void __main_block_copy_0(struct __main_block_impl_0 *dst, struct __main_block_impl_0 *src)&#123; _Block_object_assign((void*)&amp;dst-&gt;intValue, (void*)src-&gt;intValue, 8/*BLOCK_FIELD_IS_BYREF*/);&#125;static void __main_block_dispose_0(struct __main_block_impl_0 *src)&#123; _Block_object_dispose((void*)src-&gt;intValue, 8/*BLOCK_FIELD_IS_BYREF*/);&#125;static struct __main_block_desc_0&#123; size_t reserved; size_t Block_size; void (*copy)(struct __main_block_impl_0*, struct __main_block_impl_0*); void (*dispose)(struct __main_block_impl_0*);&#125; __main_block_desc_0_DATA = &#123; 0, sizeof(struct __main_block_impl_0), __main_block_copy_0, __main_block_dispose_0 &#125;;int main()&#123; __attribute__((__blocks__(byref))) __Block_byref_intValue_0 \ intValue = &#123; (void*)0, (__Block_byref_intValue_0 *)&amp;intValue, 0, sizeof(__Block_byref_intValue_0), 0 &#125;; void (*blk)(void) = (void (*)()) &amp;__main_block_impl_0 \ ( (void *)__main_block_func_0, \ &amp;__main_block_desc_0_DATA, \ (__Block_byref_intValue_0 *)&amp;intValue, \ 570425344 \ ); return 0;&#125; åœ¨åŠ äº† __block ä¹‹åŽï¼Œä»£ç é‡å¢žåŠ äº†ä¸å°‘ï¼Œä»”ç»†æŸ¥çœ‹ï¼Œå…¶å®žåªæ˜¯æ¯”åŽŸæ¥å¤šäº† -Block_byref_intValue_0 ç»“æž„ä½“ï¼šç”¨äºŽå°è£… block ä¿®é¥°çš„å¤–éƒ¨å˜é‡ã€‚ _Block_object_assign å‡½æ•°ï¼šå½“ block ä»Žæ ˆæ‹·è´åˆ°å †æ—¶ï¼Œè°ƒç”¨æ­¤å‡½æ•°ã€‚ _Block_object_dispose å‡½æ•°ï¼šå½“ block ä»Žå †å†…å­˜é‡Šæ”¾æ—¶ï¼Œè°ƒç”¨æ­¤å‡½æ•°ã€‚ OCæºç ä¸­çš„ block intValue ç¿»è¯‘åŽå˜æˆäº† Block_byref_intValue_0 ç»“æž„ä½“æŒ‡é’ˆå˜é‡ intValueï¼Œé€šè¿‡æŒ‡é’ˆä¼ é€’åˆ° block å†…ï¼Œè¿™ä¸Žå‰é¢è¯´çš„ é™æ€å˜é‡ çš„æŒ‡é’ˆä¼ é€’æ˜¯ä¸€è‡´çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ•´ä½“çš„æ‰§è¡Œæµç¨‹ä¸Žä¸åŠ  block åŸºæœ¬ä¸€è‡´ï¼Œä¸å†èµ˜è¿°ã€‚ä½† Block_byref_intValue_0 è¿™ä¸ªç»“æž„ä½“éœ€ç‰¹åˆ«æ³¨æ„ä¸‹ 123456789// å­˜å‚¨ __block å¤–éƒ¨å˜é‡çš„ç»“æž„ä½“struct __Block_byref_intValue_0&#123; void *__isa; // å¯¹è±¡æŒ‡é’ˆ __Block_byref_intValue_0 *__forwarding; // æŒ‡å‘è‡ªå·±çš„æŒ‡é’ˆ int __flags; // æ ‡å¿—ä½å˜é‡ int __size; // ç»“æž„ä½“å¤§å° int intValue; // å¤–éƒ¨å˜é‡&#125;; åœ¨å·²æœ‰ç»“æž„ä½“æŒ‡é’ˆæŒ‡å‘ __Block_byref_intValue_0 æ—¶ï¼Œç»“æž„ä½“é‡Œé¢è¿˜å¤šäº†ä¸ª __forwarding æŒ‡å‘è‡ªå·±çš„æŒ‡é’ˆå˜é‡ï¼Œéš¾é“ä¸æ˜¾å¾—å¤šä½™å—ï¼Ÿä¸€ç‚¹ä¹Ÿä¸ï¼Œæœ¬æ–‡åŽé¢ä¼šé˜è¿°ã€‚ block çš„å†…å­˜ç®¡ç†åœ¨å‰æ–‡ä¸­ï¼Œå·²ç»æåˆ°äº† block çš„ä¸‰ç§ç±»åž‹ NSConcreteGlobalBlockã€_NSConcreteStackBlockã€_NSConcreteMallocBlockï¼Œè§åçŸ¥æ„ï¼Œå¯ä»¥çœ‹å‡ºä¸‰ç§ block åœ¨å†…å­˜ä¸­çš„åˆ†å¸ƒ _NSConcreteGlobalBlock 1ã€å½“ block å­—é¢é‡å†™åœ¨å…¨å±€ä½œç”¨åŸŸæ—¶ï¼Œå³ä¸º global blockï¼› 2ã€å½“ block å­—é¢é‡ä¸èŽ·å–ä»»ä½•å¤–éƒ¨å˜é‡æ—¶ï¼Œå³ä¸º global blockï¼› é™¤äº†ä¸Šè¿°æè¿°çš„ä¸¤ç§æƒ…å†µï¼Œå…¶ä»–å½¢å¼åˆ›å»ºçš„ block å‡ä¸º stack blockã€‚ 123456// ä¸‹é¢ block è™½ç„¶å®šä¹‰åœ¨ for å¾ªçŽ¯å†…ï¼Œä½†ç¬¦åˆç¬¬äºŒç§æƒ…å†µï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ global blocktypedef int (^blk_t)(int);for (int rate = 0; rate &lt; 10; ++rate) &#123; blk_t blk = ^(int count)&#123;return rate * count;&#125;; &#125; _NSConcreteGlobalBlock ç±»åž‹çš„ block å¤„äºŽå†…å­˜çš„ ROData æ®µï¼Œæ­¤å¤„æ²¡æœ‰å±€éƒ¨å˜é‡çš„éªšæ‰°ï¼Œè¿è¡Œä¸ä¾èµ–ä¸Šä¸‹æ–‡ï¼Œå†…å­˜ç®¡ç†ä¹Ÿç®€å•çš„å¤šã€‚ _NSConcreteStackBlock_NSConcreteStackBlock ç±»åž‹çš„ block å¤„äºŽå†…å­˜çš„æ ˆåŒºã€‚global block ç”±äºŽå¤„åœ¨ data æ®µï¼Œå¯ä»¥é€šè¿‡æŒ‡é’ˆå®‰å…¨è®¿é—®ï¼Œä½† stack block å¤„åœ¨å†…å­˜æ ˆåŒºï¼Œå¦‚æžœå…¶å˜é‡ä½œç”¨åŸŸç»“æŸï¼Œè¿™ä¸ª block å°±è¢«åºŸå¼ƒï¼Œblock ä¸Šçš„ __block å˜é‡ä¹ŸåŒæ ·ä¼šè¢«åºŸå¼ƒã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œblock æä¾›äº† copy çš„åŠŸèƒ½ï¼Œå°† block å’Œ __block å˜é‡ä»Žæ ˆæ‹·è´åˆ°å †ï¼Œå°±æ˜¯ä¸‹é¢è¦è¯´çš„ _NSConcreteMallocBlockã€‚ _NSConcreteMallocBlockå½“ block ä»Žæ ˆæ‹·è´åˆ°å †åŽï¼Œå½“æ ˆä¸Šå˜é‡ä½œç”¨åŸŸç»“æŸæ—¶ï¼Œä»ç„¶å¯ä»¥ç»§ç»­ä½¿ç”¨ blockæ­¤æ—¶ï¼Œå †ä¸Šçš„ block ç±»åž‹ä¸º _NSConcreteMallocBlockï¼Œæ‰€ä»¥ä¼šå°† _NSConcreteMallocBlock å†™å…¥ isa 1impl.isa = &amp;_NSConcreteMallocBlock; å¦‚æžœä½ ç»†å¿ƒçš„è§‚å¯Ÿä¸Šé¢çš„è½¬æ¢åŽçš„ä»£ç ï¼Œä¼šå‘çŽ°è®¿é—®ç»“æž„ä½“ Block_byref_intValue_0 å†…éƒ¨çš„æˆå‘˜å˜é‡éƒ½æ˜¯é€šè¿‡è®¿é—® forwarding æŒ‡é’ˆå®Œæˆçš„ã€‚ä¸ºäº†ä¿è¯èƒ½æ­£ç¡®è®¿é—®æ ˆä¸Šçš„ block å˜é‡ï¼Œè¿›è¡Œ copy æ“ä½œæ—¶ï¼Œä¼šå°†æ ˆä¸Šçš„ forwarding æŒ‡é’ˆæŒ‡å‘äº†å †ä¸Šçš„ block ç»“æž„ä½“å®žä¾‹ã€‚ block çš„è‡ªåŠ¨æ‹·è´å’Œæ‰‹åŠ¨æ‹·è´åœ¨å¼€å¯ ARC æ—¶ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ç¼–è¯‘å™¨é€šå¸¸ä¼šå°†åˆ›å»ºåœ¨æ ˆä¸Šçš„ block è‡ªåŠ¨æ‹·è´åˆ°å †ä¸Šï¼Œåªæœ‰å½“ block ä½œä¸ºæ–¹æ³•æˆ–å‡½æ•°çš„å‚æ•°ä¼ é€’æ—¶ï¼Œç¼–è¯‘å™¨ä¸ä¼šè‡ªåŠ¨è°ƒç”¨ copy æ–¹æ³•ï¼› ä½†æ–¹æ³•/å‡½æ•°åœ¨å†…éƒ¨å·²ç»å®žçŽ°äº†ä¸€ä»½æ‹·è´äº† block å‚æ•°çš„ä»£ç ï¼Œæˆ–è€…å¦‚æžœç¼–è¯‘å™¨è‡ªåŠ¨æ‹·è´ï¼Œé‚£ä¹ˆè°ƒç”¨è€…å°±ä¸éœ€å†æ‰‹åŠ¨æ‹·è´ï¼Œæ¯”å¦‚ï¼š å½“ block ä½œä¸ºå‡½æ•°è¿”å›žå€¼è¿”å›žæ—¶ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨å°† block ä½œä¸º _Block_copy å‡½æ•°ï¼Œæ•ˆæžœç­‰åŒäºŽ block ç›´æŽ¥è°ƒç”¨ copy æ–¹æ³•ï¼› å½“ block è¢«èµ‹å€¼ç»™ __strong id ç±»åž‹çš„å¯¹è±¡æˆ– block çš„æˆå‘˜å˜é‡æ—¶ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨å°† block ä½œä¸º _Block_copy å‡½æ•°ï¼Œæ•ˆæžœç­‰åŒäºŽ block ç›´æŽ¥è°ƒç”¨ copy æ–¹æ³•ï¼› å½“ block ä½œä¸ºå‚æ•°è¢«ä¼ å…¥æ–¹æ³•åå¸¦æœ‰ usingBlock çš„ Cocoa Framework æ–¹æ³•æˆ– GCD çš„ API æ—¶ã€‚è¿™äº›æ–¹æ³•ä¼šåœ¨å†…éƒ¨å¯¹ä¼ é€’è¿›æ¥çš„ block è°ƒç”¨ copy æˆ– _Block_copy è¿›è¡Œæ‹·è´; è®©æˆ‘ä»¬çœ‹ä¸ª block è‡ªåŠ¨æ‹·è´çš„ä¾‹å­123456/************ ARCä¸‹ç¼–è¯‘å™¨è‡ªåŠ¨æ‹·è´block ************/typedef int (^blk_t)(int);blk_t func(int rate)&#123; return ^(int count)&#123;return rate * count;&#125;;&#125; ä¸Šé¢çš„ block èŽ·å–äº†å¤–éƒ¨å˜é‡ï¼Œæ‰€ä»¥æ˜¯åˆ›å»ºåœ¨æ ˆä¸Šï¼Œå½“ func å‡½æ•°è¿”å›žç»™è°ƒç”¨è€…æ—¶ï¼Œè„±ç¦»äº†å±€éƒ¨å˜é‡ rate çš„ä½œç”¨èŒƒå›´ï¼Œå¦‚æžœè°ƒç”¨è€…ä½¿ç”¨è¿™ä¸ª block å°±ä¼šå‡ºé—®é¢˜ã€‚é‚£ ARC å¼€å¯çš„æƒ…å†µå‘¢ï¼Ÿè¿è¡Œè¿™ä¸ª block ä¸€åˆ‡æ­£å¸¸ã€‚å’Œæˆ‘ä»¬çš„é¢„æœŸç»“æžœä¸ä¸€æ ·ï¼ŒARC åˆ°åº•ç»™ block æ–½äº†ä»€ä¹ˆé­”æ³•ï¼Ÿæˆ‘ä»¬å°†ä¸Šé¢çš„ä»£ç ç¿»è¯‘ä¸‹123456blk_t func(int rate)&#123; blk_t tmp = &amp;__func_block_impl_0(__func_block_func_0, &amp;__func_block_desc_0_DATA, rate); tmp = objc_retainBlock(tmp); return objc_autoreleaseReturnValue(tmp); &#125; è½¬æ¢åŽå‡ºçŽ°ä¸¤ä¸ªæ–°å‡½æ•° objc_retainBlockã€objc_autoreleaseReturnValueã€‚å¦‚æžœä½ çœ‹è¿‡runtime åº“ï¼ˆç‚¹æ­¤ä¸‹è½½ï¼‰ ï¼Œåœ¨ runtime/objc-arr.mm æ–‡ä»¶ä¸­å°±æœ‰è¿™ä¸¤ä¸ªå‡½æ•°çš„å®žçŽ°ï¼š 1234567891011121314/*********** objc_retainBlock() çš„å®žçŽ° ***********/id objc_retainBlock(id x) &#123;#if ARR_LOGGING objc_arr_log(&quot;objc_retain_block&quot;, x); ++CompilerGenerated.blockCopies;#endif return (id)_Block_copy(x);&#125;// Create a heap based copy of a Block or simply add a reference to an existing one.// This must be paired with Block_release to recover memory, even when running// under Objective-C Garbage Collection.BLOCK_EXPORT void *_Block_copy(const void *aBlock) __OSX_AVAILABLE_STARTING(__MAC_10_6, __IPHONE_3_2); 123456789101112 /*********** objc_autoreleaseReturnValue() çš„å®žçŽ° ***********/id objc_autoreleaseReturnValue(id obj)&#123;#if SUPPORT_RETURN_AUTORELEASE assert(_pthread_getspecific_direct(AUTORELEASE_POOL_RECLAIM_KEY) == NULL); if (callerAcceptsFastAutorelease(__builtin_return_address(0))) &#123; _pthread_setspecific_direct(AUTORELEASE_POOL_RECLAIM_KEY, obj); return obj; &#125;#endif return objc_autorelease(obj);&#125; é€šè¿‡ä¸Šé¢çš„ä»£ç å’Œæ³¨é‡Šï¼Œæ„æ€å°±å¾ˆæ˜Žæ˜¾äº†ï¼Œç”±äºŽ block å­—é¢é‡æ˜¯åˆ›å»ºåœ¨æ ˆå†…å­˜ï¼Œé€šè¿‡ objc_retainBlock() å‡½æ•°æ‹·è´åˆ°å †å†…å­˜ï¼Œè®© tmp é‡æ–°æŒ‡å‘å †ä¸Šçš„ blockï¼Œç„¶åŽå°† tmp æ‰€æŒ‡çš„å †ä¸Šçš„ block ä½œä¸ºä¸€ä¸ª Objective-C å¯¹è±¡æ”¾å…¥ autoreleasepool é‡Œé¢ï¼Œä»Žè€Œä¿è¯äº†è¿”å›žåŽçš„ block ä»ç„¶å¯ä»¥æ­£ç¡®æ‰§è¡Œã€‚ çœ‹å®Œäº† block çš„è‡ªåŠ¨æ‹·è´ï¼Œé‚£ä¹ˆçœ‹çœ‹åœ¨ ARC ä¸‹éœ€è¦æ‰‹åŠ¨æ‹·è´ block çš„ä¾‹å­ 12345678/************ ARCä¸‹ç¼–è¯‘å™¨æ‰‹åŠ¨æ‹·è´block ************/- (id)getBlockArray&#123; int val = 10; return [[NSArray alloc] initWithObjects: ^&#123;NSLog(@&quot;blk0:%d&quot;, val);&#125;, ^&#123;NSLog(@&quot;blk1:%d&quot;, val);&#125;, nil];&#125; ä¸€ä¸ªä¾‹å­å°±äº†ç„¶ï¼Œè¿”å›žçš„æ•°ç»„é‡Œé¢çš„ block æ˜¯ä¸å¯ç”¨çš„ï¼Œéœ€è¦å†æ‰‹åŠ¨æ‹·è´ä¸€æ¬¡æ‰å¯ä»¥ï¼Œè¿™ä¸ªè¾ƒä¸ºç®€å•ï¼Œå°±ä¸ä½œè¿‡å¤šè§£é‡Šã€‚ å…³äºŽ block çš„æ‹·è´æ“ä½œå¯ä»¥ç”¨ä¸€å¼ è¡¨æ€»ç»“ä¸‹ block æ‹·è´çš„è®²è§£å°±åˆ°æ­¤ä¸ºæ­¢ï¼Œæœ‰å…´è¶£å¯ä»¥äº†è§£ä¸‹ block çš„å¤šæ¬¡æ‹·è´ã€‚ 123456789101112131415161718192021blockçš„å¤šæ¬¡æ‹·è´ï¼šä¸‹é¢çš„ä¾‹å­åœ¨ ARC ä¸‹å¹¶ä¸ä¼šäº§ç”Ÿå†…å­˜æ³„éœ²å“¦// block å¤šæ¬¡æ‹·è´æºç blk = [[[[blk copy] copy] copy] copy]; // ç¿»è¯‘åŽçš„ä»£ç &#123; blk_t tmp = [blk copy]; blk = tmp; &#125;&#123; blk_t tmp = [blk copy]; blk = tmp; &#125;&#123; blk_t tmp = [blk copy]; blk = tmp; &#125;&#123; blk_t tmp = [blk copy]; blk = tmp;&#125; __block å˜é‡çš„å†…å­˜ç®¡ç†ä¸Šé¢å•°å—¦ä¸€å †ï¼Œè¿™å°èŠ‚ä¸»è¦ç”¨å›¾è¯´è¯ï¼Œå¿…è¦æ—¶åŠ æ–‡å­—è¯´æ˜Žã€‚ å½“ block ä»Žæ ˆå†…å­˜è¢«æ‹·è´åˆ°å †å†…å­˜æ—¶ï¼Œblock å˜é‡çš„å˜åŒ–å¦‚ä¸‹å›¾ã€‚éœ€è¦è¯´æ˜Žçš„æ˜¯ï¼Œå½“æ ˆä¸Šçš„ block è¢«æ‹·è´åˆ°å †ä¸Šï¼Œå †ä¸Šçš„ block å†æ¬¡è¢«æ‹·è´æ—¶ï¼Œå¯¹ block å˜é‡å·²ç»æ²¡æœ‰å½±å“äº†ã€‚ å½“å¤šä¸ª block èŽ·å–åŒä¸€ä¸ª __block å˜é‡ï¼Œblock ä»Žæ ˆè¢«æ‹·è´åˆ°å †æ—¶ å½“ block è¢«åºŸå¼ƒæ—¶ï¼Œ__block å˜é‡è¢«é‡Šæ”¾ __forwarding å‰æ–‡å·²ç»è¯´è¿‡ï¼Œå½“ block ä»Žæ ˆè¢«æ‹·è´åˆ°å †æ—¶ï¼Œforwarding æŒ‡é’ˆå˜é‡ä¹Ÿä¼šæŒ‡å‘å †åŒºçš„ç»“æž„ä½“ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿä¸ºä»€ä¹ˆè¦è®©åŽŸæœ¬æŒ‡å‘æ ˆåŒºçš„ç»“æž„ä½“çš„æŒ‡é’ˆï¼ŒåŽ»æŒ‡å‘å †åŒºçš„ç»“æž„ä½“å‘¢ï¼Ÿçœ‹èµ·æ¥åŒªå¤·æ‰€æ€ï¼Œå®žåˆ™åŽŸå› å¾ˆç®€å•ï¼Œè¦ä»Ž forwarding äº§ç”Ÿçš„ç¼˜ç”±è¯´èµ·ã€‚æƒ³æƒ³èµ·åˆä¸ºä»€ä¹ˆè¦ç»™ block æ·»åŠ  copy çš„åŠŸèƒ½ï¼Œå°±æ˜¯å› ä¸º block èŽ·å–äº†å±€éƒ¨å˜é‡ï¼Œå½“è¦åœ¨å…¶ä»–åœ°æ–¹ï¼ˆè¶…å‡ºå±€éƒ¨å˜é‡ä½œç”¨èŒƒå›´ï¼‰ä½¿ç”¨è¿™ä¸ª block çš„æ—¶å€™ï¼Œç”±äºŽè®¿é—®å±€éƒ¨å˜é‡å¼‚å¸¸ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±ç»™ block æ·»åŠ äº† copy åŠŸèƒ½ã€‚åœ¨å°† block æ‹·è´åˆ°å †ä¸Šçš„åŒæ—¶ï¼Œå°† forwarding æŒ‡é’ˆæŒ‡å‘å †ä¸Šç»“æž„ä½“ã€‚åŽé¢å¦‚æžœè¦æƒ³ä½¿ç”¨ block å˜é‡ï¼Œåªè¦é€šè¿‡ __forwarding è®¿é—®å †ä¸Šå˜é‡ï¼Œå°±ä¸ä¼šå‡ºçŽ°ç¨‹åºå´©æºƒäº†ã€‚123456789/*************** __forwarding çš„ä½œç”¨ ***************///çŒœçŒœä¸‹é¢ä»£ç çš„æ‰“å°ç»“æžœï¼Ÿ&#123; __block int val = 0; void (^blk)(void) = [^&#123;++val;&#125; copy]; ++val; blk(); NSLog(@&quot;%d&quot;, val);&#125; ä¸€å®šæœ‰å¾ˆå¤šäººä¼šçŒœ 1ï¼Œå…¶å®žæ‰“å° 2ã€‚åŽŸå› å¾ˆç®€å•ï¼Œå½“æ ˆä¸Šçš„ block è¢«æ‹·è´åˆ°å †ä¸Šæ—¶ï¼Œæ ˆä¸Šçš„ forwarding ä¹Ÿä¼šæŒ‡å‘å †ä¸Šçš„ block å˜é‡çš„ç»“æž„ä½“ã€‚ ä¸Šé¢çš„ä»£ç ä¸­ ^{++val;} å’Œ ++val; éƒ½ä¼šè¢«è½¬æ¢æˆ ++(val.__forwarding-&gt;val);ï¼Œå †ä¸Šçš„ val è¢«åŠ äº†ä¸¤æ¬¡ï¼Œæœ€åŽæ‰“å°å †ä¸Šçš„ val ä¸º 2ã€‚]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PythonåŸºç¡€çŸ¥è¯†-æ–‡ä»¶æ“ä½œ]]></title>
    <url>%2F2016%2F04%2F16%2F2017%2FPython%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%2F</url>
    <content type="text"><![CDATA[pythonä¸­å¯¹æ–‡ä»¶ã€æ–‡ä»¶å¤¹ï¼ˆæ–‡ä»¶æ“ä½œå‡½æ•°ï¼‰çš„æ“ä½œéœ€è¦æ¶‰åŠåˆ°osæ¨¡å—å’Œshutilæ¨¡å—ã€‚ å¾—åˆ°å½“å‰å·¥ä½œç›®å½•ï¼Œå³å½“å‰Pythonè„šæœ¬å·¥ä½œçš„ç›®å½•è·¯å¾„: os.getcwd() è¿”å›žæŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•å:os.listdir() å‡½æ•°ç”¨æ¥åˆ é™¤ä¸€ä¸ªæ–‡ä»¶:os.remove() åˆ é™¤å¤šä¸ªç›®å½•ï¼šos.removedirsï¼ˆrâ€œcï¼š\pythonâ€ï¼‰ æ£€éªŒç»™å‡ºçš„è·¯å¾„æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼šos.path.isfile() æ£€éªŒç»™å‡ºçš„è·¯å¾„æ˜¯å¦æ˜¯ä¸€ä¸ªç›®å½•ï¼šos.path.isdir() åˆ¤æ–­æ˜¯å¦æ˜¯ç»å¯¹è·¯å¾„ï¼šos.path.isabs() æ£€éªŒç»™å‡ºçš„è·¯å¾„æ˜¯å¦çœŸåœ°å­˜:os.path.exists() è¿”å›žä¸€ä¸ªè·¯å¾„çš„ç›®å½•åå’Œæ–‡ä»¶å:os.path.split() 1os.path.split(&apos;/home/swaroop/byte/code/poem.txt&apos;) ç»“æžœï¼š(&apos;/home/swaroop/byte/code&apos;, &apos;poem.txt&apos;) åˆ†ç¦»æ‰©å±•åï¼šos.path.splitext() èŽ·å–è·¯å¾„åï¼šos.path.dirname() èŽ·å–æ–‡ä»¶åï¼šos.path.basename() è¿è¡Œshellå‘½ä»¤: os.system() è¯»å–å’Œè®¾ç½®çŽ¯å¢ƒå˜é‡:os.getenv() ä¸Žos.putenv() ç»™å‡ºå½“å‰å¹³å°ä½¿ç”¨çš„è¡Œç»ˆæ­¢ç¬¦:os.linesep Windowsä½¿ç”¨â€™\r\nâ€™ï¼ŒLinuxä½¿ç”¨â€™\nâ€™è€ŒMacä½¿ç”¨â€™\râ€™ æŒ‡ç¤ºä½ æ­£åœ¨ä½¿ç”¨çš„å¹³å°ï¼šos.name å¯¹äºŽWindowsï¼Œå®ƒæ˜¯â€™ntâ€™ï¼Œè€Œå¯¹äºŽLinux/Unixç”¨æˆ·ï¼Œå®ƒæ˜¯â€™posixâ€™ é‡å‘½åï¼šos.renameï¼ˆoldï¼Œ newï¼‰ åˆ›å»ºå¤šçº§ç›®å½•ï¼šos.makedirsï¼ˆrâ€œcï¼š\python\testâ€ï¼‰ åˆ›å»ºå•ä¸ªç›®å½•ï¼šos.mkdirï¼ˆâ€œtestâ€ï¼‰ èŽ·å–æ–‡ä»¶å±žæ€§ï¼šos.statï¼ˆfileï¼‰ ä¿®æ”¹æ–‡ä»¶æƒé™ä¸Žæ—¶é—´æˆ³ï¼šos.chmodï¼ˆfileï¼‰ ç»ˆæ­¢å½“å‰è¿›ç¨‹ï¼šos.exitï¼ˆï¼‰ èŽ·å–æ–‡ä»¶å¤§å°ï¼šos.path.getsizeï¼ˆfilenameï¼‰ os.mknod(â€œtest.txtâ€) åˆ›å»ºç©ºæ–‡ä»¶ fp = open(â€œtest.txtâ€,w) ç›´æŽ¥æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æžœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ å…³äºŽopen æ¨¡å¼:w ä»¥å†™æ–¹å¼æ‰“å¼€ï¼Œa ä»¥è¿½åŠ æ¨¡å¼æ‰“å¼€ (ä»Ž EOF å¼€å§‹, å¿…è¦æ—¶åˆ›å»ºæ–°æ–‡ä»¶)r+ ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€w+ ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w )a+ ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ a )rb ä»¥äºŒè¿›åˆ¶è¯»æ¨¡å¼æ‰“å¼€wb ä»¥äºŒè¿›åˆ¶å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w )ab ä»¥äºŒè¿›åˆ¶è¿½åŠ æ¨¡å¼æ‰“å¼€ (å‚è§ a )rb+ ä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ r+ )wb+ ä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w+ )ab+ ä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ a+ ) fp.read([size]) #sizeä¸ºè¯»å–çš„é•¿åº¦ï¼Œä»¥byteä¸ºå•ä½ fp.readline([size]) #è¯»ä¸€è¡Œï¼Œå¦‚æžœå®šä¹‰äº†sizeï¼Œæœ‰å¯èƒ½è¿”å›žçš„åªæ˜¯ä¸€è¡Œçš„ä¸€éƒ¨åˆ† fp.readlines([size]) #æŠŠæ–‡ä»¶æ¯ä¸€è¡Œä½œä¸ºä¸€ä¸ªlistçš„ä¸€ä¸ªæˆå‘˜ï¼Œå¹¶è¿”å›žè¿™ä¸ªlistã€‚å…¶å®žå®ƒçš„å†…éƒ¨æ˜¯é€šè¿‡å¾ªçŽ¯è°ƒç”¨readline()æ¥å®žçŽ°çš„ã€‚å¦‚æžœæä¾›sizeå‚æ•°ï¼Œsizeæ˜¯è¡¨ç¤ºè¯»å–å†…å®¹çš„æ€»é•¿ï¼Œä¹Ÿå°±æ˜¯è¯´å¯èƒ½åªè¯»åˆ°æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ã€‚ fp.write(str) #æŠŠstrå†™åˆ°æ–‡ä»¶ä¸­ï¼Œwrite()å¹¶ä¸ä¼šåœ¨stråŽåŠ ä¸Šä¸€ä¸ªæ¢è¡Œç¬¦ fp.writelines(seq) #æŠŠseqçš„å†…å®¹å…¨éƒ¨å†™åˆ°æ–‡ä»¶ä¸­(å¤šè¡Œä¸€æ¬¡æ€§å†™å…¥)ã€‚è¿™ä¸ªå‡½æ•°ä¹Ÿåªæ˜¯å¿ å®žåœ°å†™å…¥ï¼Œä¸ä¼šåœ¨æ¯è¡ŒåŽé¢åŠ ä¸Šä»»ä½•ä¸œè¥¿ã€‚ fp.close() #å…³é—­æ–‡ä»¶ã€‚pythonä¼šåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸ç”¨åŽè‡ªåŠ¨å…³é—­æ–‡ä»¶ï¼Œä¸è¿‡è¿™ä¸€åŠŸèƒ½æ²¡æœ‰ä¿è¯ï¼Œæœ€å¥½è¿˜æ˜¯å…»æˆè‡ªå·±å…³é—­çš„ä¹ æƒ¯ã€‚ å¦‚æžœä¸€ä¸ªæ–‡ä»¶åœ¨å…³é—­åŽè¿˜å¯¹å…¶è¿›è¡Œæ“ä½œä¼šäº§ç”ŸValueError fp.flush() #æŠŠç¼“å†²åŒºçš„å†…å®¹å†™å…¥ç¡¬ç›˜ fp.fileno() #è¿”å›žä¸€ä¸ªé•¿æ•´åž‹çš„â€æ–‡ä»¶æ ‡ç­¾â€œ fp.isatty() #æ–‡ä»¶æ˜¯å¦æ˜¯ä¸€ä¸ªç»ˆç«¯è®¾å¤‡æ–‡ä»¶ï¼ˆunixç³»ç»Ÿä¸­çš„ï¼‰ fp.tell() #è¿”å›žæ–‡ä»¶æ“ä½œæ ‡è®°çš„å½“å‰ä½ç½®ï¼Œä»¥æ–‡ä»¶çš„å¼€å¤´ä¸ºåŽŸç‚¹ fp.next() #è¿”å›žä¸‹ä¸€è¡Œï¼Œå¹¶å°†æ–‡ä»¶æ“ä½œæ ‡è®°ä½ç§»åˆ°ä¸‹ä¸€è¡Œã€‚æŠŠä¸€ä¸ªfileç”¨äºŽfor â€¦ in fileè¿™æ ·çš„è¯­å¥æ—¶ï¼Œå°±æ˜¯è°ƒç”¨next()å‡½æ•°æ¥å®žçŽ°éåŽ†çš„ã€‚ fp.seek(offset[,whence]) #å°†æ–‡ä»¶æ‰“æ“ä½œæ ‡è®°ç§»åˆ°offsetçš„ä½ç½®ã€‚è¿™ä¸ªoffsetä¸€èˆ¬æ˜¯ç›¸å¯¹äºŽæ–‡ä»¶çš„å¼€å¤´æ¥è®¡ç®—çš„ï¼Œä¸€èˆ¬ä¸ºæ­£æ•°ã€‚ä½†å¦‚æžœæä¾›äº†whenceå‚æ•°å°±ä¸ä¸€å®šäº†ï¼Œwhenceå¯ä»¥ä¸º0è¡¨ç¤ºä»Žå¤´å¼€å§‹è®¡ç®—ï¼Œ1è¡¨ç¤ºä»¥å½“å‰ä½ç½®ä¸ºåŽŸç‚¹è®¡ç®—ã€‚2è¡¨ç¤ºä»¥æ–‡ä»¶æœ«å°¾ä¸ºåŽŸç‚¹è¿›è¡Œè®¡ç®—ã€‚éœ€è¦æ³¨æ„ï¼Œå¦‚æžœæ–‡ä»¶ä»¥aæˆ–a+çš„æ¨¡å¼æ‰“å¼€ï¼Œæ¯æ¬¡è¿›è¡Œå†™æ“ä½œæ—¶ï¼Œæ–‡ä»¶æ“ä½œæ ‡è®°ä¼šè‡ªåŠ¨è¿”å›žåˆ°æ–‡ä»¶æœ«å°¾ã€‚ fp.truncate([size]) #æŠŠæ–‡ä»¶è£æˆè§„å®šçš„å¤§å°ï¼Œé»˜è®¤çš„æ˜¯è£åˆ°å½“å‰æ–‡ä»¶æ“ä½œæ ‡è®°çš„ä½ç½®ã€‚å¦‚æžœsizeæ¯”æ–‡ä»¶çš„å¤§å°è¿˜è¦å¤§ï¼Œä¾æ®ç³»ç»Ÿçš„ä¸åŒå¯èƒ½æ˜¯ä¸æ”¹å˜æ–‡ä»¶ï¼Œä¹Ÿå¯èƒ½æ˜¯ç”¨0æŠŠæ–‡ä»¶è¡¥åˆ°ç›¸åº”çš„å¤§å°ï¼Œä¹Ÿå¯èƒ½æ˜¯ä»¥ä¸€äº›éšæœºçš„å†…å®¹åŠ ä¸ŠåŽ»ã€‚ os.mkdir(â€œfileâ€) åˆ›å»ºç›®å½•å¤åˆ¶æ–‡ä»¶ï¼š shutil.copyfile(â€œoldfileâ€,â€newfileâ€) oldfileå’Œnewfileéƒ½åªèƒ½æ˜¯æ–‡ä»¶ shutil.copy(â€œoldfileâ€,â€newfileâ€) oldfileåªèƒ½æ˜¯æ–‡ä»¶å¤¹ï¼Œnewfileå¯ä»¥æ˜¯æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›®æ ‡ç›®å½•å¤åˆ¶æ–‡ä»¶å¤¹ï¼š shutil.copytree(â€œolddirâ€,â€newdirâ€) olddirå’Œnewdiréƒ½åªèƒ½æ˜¯ç›®å½•ï¼Œä¸”newdirå¿…é¡»ä¸å­˜åœ¨é‡å‘½åæ–‡ä»¶ï¼ˆç›®å½•ï¼‰ os.rename(â€œoldnameâ€,â€newnameâ€) æ–‡ä»¶æˆ–ç›®å½•éƒ½æ˜¯ä½¿ç”¨è¿™æ¡å‘½ä»¤ç§»åŠ¨æ–‡ä»¶ï¼ˆç›®å½•ï¼‰ shutil.move(â€œoldposâ€,â€newposâ€)åˆ é™¤æ–‡ä»¶ os.remove(â€œfileâ€)åˆ é™¤ç›®å½• os.rmdir(â€œdirâ€)åªèƒ½åˆ é™¤ç©ºç›®å½•shutil.rmtree(â€œdirâ€) ç©ºç›®å½•ã€æœ‰å†…å®¹çš„ç›®å½•éƒ½å¯ä»¥åˆ è½¬æ¢ç›®å½• os.chdir(â€œpathâ€) æ¢è·¯å¾„]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PythonåŸºç¡€çŸ¥è¯†-å­—å…¸]]></title>
    <url>%2F2016%2F04%2F10%2F2017%2FPython%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E5%AD%97%E5%85%B8%2F</url>
    <content type="text"><![CDATA[å­—å…¸è¿™ç§æ•°æ®ç»“æž„ï¼Œæˆ‘ä»¬åˆç§°ä¹‹ä¸ºæ˜ å°„(mapping)ï¼Œåœ¨javaä¸­ä¹Ÿæ˜¯è¿™ä¹ˆç§°å‘¼çš„ï¼Œä½†æ˜¯åœ¨pythonä¸­æˆ‘ä»¬ç§°ä¹‹ä¸ºå­—å…¸ï¼Œä¸ŽOCä¸­çš„å«æ³•ä¸€è‡´ã€‚ åˆ›å»ºå­—å…¸1234567891011121314&gt;&gt;&gt; dicts = &#123;&apos;name&apos;:&apos;han&apos;,&apos;tele&apos;:&apos;136&apos;&#125;//ç›´æŽ¥åˆ›å»º&gt;&gt;&gt; xiaohan = (&apos;xiaohan&apos;,42)//åˆ©ç”¨dictå‡½æ•°æ¥åˆ›å»º&gt;&gt;&gt; xiaoming = (&apos;xiaoming&apos;,45)&gt;&gt;&gt; items = [xiaohan,xiaoming]&gt;&gt;&gt; d = dict(items)&gt;&gt;&gt; d&#123;&apos;xiaohan&apos;: 42, &apos;xiaoming&apos;: 45&#125;&gt;&gt;&gt; &gt;&gt;&gt; d = dict(name=&apos;han&apos;,age=43)//æˆ–è€…dictå‡½æ•°è¿˜å¯ä»¥è¿™æ ·æ¥ç”¨&gt;&gt;&gt; d&#123;&apos;age&apos;: 43, &apos;name&apos;: &apos;han&apos;&#125;&gt;&gt;&gt; åŸºæœ¬æ“ä½œ len(d)è¿”å›ždä¸­é”®å€¼å¯¹çš„æ•°é‡ d[k]è¿”å›žå…³è”åˆ°kä¸Šçš„å€¼ d[k]=vå°†å€¼vå…³è”åˆ°é”®ä¸ºkçš„é¡¹ä¸Š del d[k]åˆ é™¤é”®ä¸ºkçš„é¡¹ k in dæ£€æŸ¥dä¸­æ˜¯å¦å«æœ‰é”®ä¸ºkçš„é¡¹ é”®ç±»åž‹å¯ä»¥æ˜¯ä»»æ„ç±»åž‹ï¼Œæ¯”å¦‚å…ƒç»„ï¼Œæµ®ç‚¹æ•°æˆ–è€…å­—ç¬¦ä¸² è‡ªåŠ¨æ·»åŠ ï¼ŒåŠæ—¶é”®èµ·å‡ºåœ¨å­—å…¸ä¸­å¹¶ä¸å­˜åœ¨ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ï¼Œè¿™æ ·å­—å…¸å°±ä¼šå»ºç«‹èµ·æ–°çš„é¡¹ æˆå‘˜èµ„æ ¼:ç”¨k in dæŸ¥æ‰¾çš„æ˜¯é”®è€Œä¸æ˜¯å€¼ï¼Œè€Œåœ¨åˆ—è¡¨ä¸­ï¼Œv in læ˜¯ç”¨å€¼åœ¨æŸ¥æ‰¾ï¼Œè€Œä¸æ˜¯ç´¢å¼• å­—å…¸æ–¹æ³•clear12 ###]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PythonåŸºç¡€çŸ¥è¯†-åˆ—è¡¨/å…ƒç»„/å­—ç¬¦ä¸²]]></title>
    <url>%2F2016%2F04%2F09%2F2017%2FPython%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E5%88%97%E8%A1%A8-%E5%85%83%E7%BB%84-%E5%AD%97%E7%AC%A6%E4%B8%B2%2F</url>
    <content type="text"><![CDATA[åˆ—è¡¨å’Œå…ƒç»„åœ¨pythonä¸­æˆ‘ä»¬æœ‰ä¸¤ç§å¾ˆé‡è¦çš„æ•°æ®ç»“æž„ï¼Œåˆ†åˆ«ä¸ºåºåˆ—å’Œæ˜ å°„ï¼Œå¯¹åº”åˆ°OCä¸­å°±æ˜¯æ•°ç»„å’Œå­—å…¸ï¼Œåºåˆ—åˆåˆ†ä¸ºåˆ—è¡¨å’Œå…ƒç»„ï¼Œä»–ä»¬çš„åŒºåˆ«åœ¨äºŽï¼Œåˆ—è¡¨å¯ä¿®æ”¹ï¼Œå…ƒç»„ä¸èƒ½ï¼Œåˆ—è¡¨ç”¨æ–¹æ‹¬å·[]ï¼Œè€Œå…ƒç»„ç”¨å°æ‹¬å·ï¼ˆï¼‰12list = [&apos;hanshenghui&apos;,&apos;xiaoming&apos;]list1 = (&apos;hanshenghui&apos;,&apos;xiaoming&apos;) åºåˆ—é€šç”¨æ“ä½œåˆ—è¡¨å’Œå…ƒç»„éƒ½èƒ½åšçš„æ“ä½œ ç´¢å¼•12345678910111213&gt;&gt;&gt; greeting = &apos;hello&apos;&gt;&gt;&gt; greeting[1]&apos;e&apos;&gt;&gt;&gt; greeting[2]&apos;l&apos;&gt;&gt;&gt; &gt;&gt;&gt; greeting1 = (&apos;h&apos;,&apos;e&apos;,&apos;l&apos;)&gt;&gt;&gt; greeting1[0]&apos;h&apos;&gt;&gt;&gt; greeting1[1]&apos;e&apos;&gt;&gt;&gt; å­—ç¬¦ä¸²å¯ä»¥ç†è§£ä¸ºç”±ä¸€ä¸ªä¸ªçš„å­—ç¬¦æ‹¼æˆçš„åˆ—è¡¨ åˆ†ç‰‡æˆ‘ä»¬ä¸ä½†å¯ä»¥ç”¨ä¸€ä¸ªç´¢å¼•æ¥èŽ·å–æŸä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå¯ä»¥èŽ·å–æŸä¸ªèŒƒå›´çš„å…ƒç´ ã€‚123&gt;&gt;&gt; numbers = [1,2,3,4,5,6,7,8,9,0]&gt;&gt;&gt; numbers[0:2][1, 2] æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå·¦è¾¹çš„è¾¹ç•ŒåŒ…å«åœ¨å…¶ä¸­ï¼Œè€Œå³è¾¹çš„è¾¹ç•Œæ˜¯ä¸åŒ…å«åœ¨å…¶ä¸­çš„123456789&gt;&gt;&gt; numbers[-1:2][]&gt;&gt;&gt; numbers[-1:-3][]&gt;&gt;&gt; numbers[-3:-1][8, 9]&gt;&gt;&gt; &gt;&gt;&gt; numbers[-3:][8, 9, 0] æˆ‘ä»¬è¿˜å¯ä»¥ç”¨å€’åºæ¥å–å…ƒç´ ï¼Œä½†æ˜¯åˆ‡è®°ä¸€å®šè¦å·¦è¾¹å°ï¼Œå³è¾¹çš„å¤§ï¼Œåªæ ‡è®°ä¸€ä¸ªå°±ä¼šä»Žè¿™ä¸ªå¼€å§‹å–æ‰€æœ‰ï¼Œæˆ–è€…åˆ°è¿™ä¸ªä¸ºæ­¢ è¿˜å¯ä»¥ç»™ä¸€ä¸ªæ­¥é•¿12&gt;&gt;&gt; numbers[::3][1, 4, 7, 0] ç›¸åŠ 1234567891011121314&gt;&gt;&gt; item1 = [1,2,3]&gt;&gt;&gt; item2 = [4,5,6]&gt;&gt;&gt; item1 + item2[1, 2, 3, 4, 5, 6]&gt;&gt;&gt; string1 = &apos;hansheng&apos;&gt;&gt;&gt; string2 = &apos;hui&apos;&gt;&gt;&gt; string1 + string2&apos;hanshenghui&apos;&gt;&gt;&gt; string1 + item1Traceback (most recent call last): File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;TypeError: cannot concatenate &apos;str&apos; and &apos;list&apos; objects ä½†æ˜¯åªæœ‰åŒç§ç±»åž‹æ‰èƒ½ç›¸åŠ  ä¹˜æ³•1234&gt;&gt;&gt; &apos;python&apos; * 5&apos;pythonpythonpythonpythonpython&apos;&gt;&gt;&gt; [10,11] * 3[10, 11, 10, 11, 10, 11] æˆå‘˜èµ„æ ¼123456&gt;&gt;&gt; han = &apos;hanshenghui&apos;&gt;&gt;&gt; &apos;shenghui&apos; in hanTrue&gt;&gt;&gt; &apos;wahha&apos; in hanFalse&gt;&gt;&gt; é•¿åº¦ï¼Œæœ€å¤§å€¼ï¼Œæœ€å°å€¼12345678910111213141516han = &apos;hanshenghui&apos;item1 = [1,2,3]&gt;&gt;&gt; len(han)11&gt;&gt;&gt; max(han)&apos;u&apos;&gt;&gt;&gt; min(han)&apos;a&apos;&gt;&gt;&gt; len(item1)3&gt;&gt;&gt; max(item1)3&gt;&gt;&gt; min(item1)1&gt;&gt;&gt; åˆ—è¡¨æ“ä½œlistä¸Žjoin123456789&gt;&gt;&gt; name = list(&apos;hanshenghui&apos;)&gt;&gt;&gt; name[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;, &apos;h&apos;, &apos;u&apos;, &apos;i&apos;]&gt;&gt;&gt; len(name)11&gt;&gt;&gt; &apos;&apos;.join(name)&apos;hanshenghui&apos;&gt;&gt;&gt; &apos;a&apos;.join(name)&apos;haaanasahaeanagahauai&apos; èµ‹å€¼æ›´æ”¹æŸä¸ªå…ƒç´ çš„å€¼123&gt;&gt;&gt; name[0] = &apos;i&apos;&gt;&gt;&gt; name[&apos;i&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;, &apos;h&apos;, &apos;u&apos;, &apos;i&apos;] åˆ é™¤del12345678&gt;&gt;&gt; name = &apos;han&apos;&gt;&gt;&gt; name&apos;han&apos;&gt;&gt;&gt; name = list(name)&gt;&gt;&gt; del name[0]&gt;&gt;&gt; name[&apos;a&apos;, &apos;n&apos;]&gt;&gt;&gt; åˆ†ç‰‡èµ‹å€¼è¿™æ˜¯å¼‚å¸¸å¼ºå¤§çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå¯ä»¥ç”¨æ¥æ’å…¥å…ƒç´ ï¼Œæ›´æ”¹å…ƒç´ ï¼Œç”šè‡³åˆ é™¤å…ƒç´ 1234567891011&gt;&gt;&gt; name = list(&apos;han&apos;)&gt;&gt;&gt; name[1:] = list(&apos;python&apos;)&gt;&gt;&gt; name[&apos;h&apos;, &apos;p&apos;, &apos;y&apos;, &apos;t&apos;, &apos;h&apos;, &apos;o&apos;, &apos;n&apos;]&gt;&gt;&gt; name[2:]=[]&gt;&gt;&gt; name[&apos;h&apos;, &apos;p&apos;]&gt;&gt;&gt; name[1:1] = list(&apos;wahha&apos;)&gt;&gt;&gt; name[&apos;h&apos;, &apos;w&apos;, &apos;a&apos;, &apos;h&apos;, &apos;h&apos;, &apos;a&apos;, &apos;p&apos;]&gt;&gt;&gt; appendè¿½åŠ 123456789&gt;&gt;&gt; name = list(&apos;han&apos;)&gt;&gt;&gt; name[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;]&gt;&gt;&gt; name.append(&apos;shenghui&apos;)&gt;&gt;&gt; name[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;shenghui&apos;]&gt;&gt;&gt; &apos;&apos;.join(name)&apos;hanshenghui&apos;&gt;&gt;&gt; countç»Ÿè®¡å‡ºçŽ°çš„æ¬¡æ•°123456&gt;&gt;&gt; name = &apos;hanshenghui&apos;&gt;&gt;&gt; name.count(&apos;h&apos;)3&gt;&gt;&gt; name.count(&apos;n&apos;)2&gt;&gt;&gt; extendä¸€ä¸ªåˆ—è¡¨åŽè¿½åŠ ä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼ŒåŒåŠ æ³•ä½œç”¨ä¸€è‡´123456789&gt;&gt;&gt; name[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;]&gt;&gt;&gt; name1 = list(&apos;sheng&apos;)&gt;&gt;&gt; name1[&apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;]&gt;&gt;&gt; name.extend(name1)&gt;&gt;&gt; name[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;]&gt;&gt;&gt; indexæ‰¾å‡ºåˆ—è¡¨ä¸­æŸä¸ªé¡¹çš„ç¬¬ä¸€ä¸ªåŒ¹é…ç´¢å¼•12345&gt;&gt;&gt; name[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;]&gt;&gt;&gt; name.index(&apos;h&apos;)0&gt;&gt;&gt; insert123456&gt;&gt;&gt; name[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;]&gt;&gt;&gt; name.insert(0,&apos;wahha&apos;)&gt;&gt;&gt; name[&apos;wahha&apos;, &apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;]&gt;&gt;&gt; popç§»é™¤æŸä¸ªå€¼å¹¶ä¸”å°†è¯¥å€¼è¿”å›žï¼Œéœ€è¦æä¾›ç´¢å¼•123456789&gt;&gt;&gt; name[&apos;wahha&apos;, &apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;]&gt;&gt;&gt; name.pop()&apos;g&apos;&gt;&gt;&gt; name.pop()&apos;n&apos;&gt;&gt;&gt; name.pop(0)&apos;wahha&apos;&gt;&gt;&gt; removeç§»é™¤æŸä¸ªåŒ¹é…é¡¹123456789&gt;&gt;&gt; name[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;]&gt;&gt;&gt; name.remove(&apos;s&apos;)&gt;&gt;&gt; name[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;h&apos;, &apos;e&apos;]&gt;&gt;&gt; name.remove(&apos;s&apos;)Traceback (most recent call last): File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;ValueError: list.remove(x): x not in list å¦‚æžœè¯¥å€¼ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ reverse12345&gt;&gt;&gt; name[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;h&apos;, &apos;e&apos;]&gt;&gt;&gt; name.reverse()&gt;&gt;&gt; name[&apos;e&apos;, &apos;h&apos;, &apos;n&apos;, &apos;a&apos;, &apos;h&apos;] sortæ”¹å˜åŽŸæ¥çš„åˆ—è¡¨ï¼Œè¿”å›žä¸€ä¸ªç©ºå€¼123456&gt;&gt;&gt; name[&apos;e&apos;, &apos;h&apos;, &apos;n&apos;, &apos;a&apos;, &apos;h&apos;]&gt;&gt;&gt; name.sort()&gt;&gt;&gt; name[&apos;a&apos;, &apos;e&apos;, &apos;h&apos;, &apos;h&apos;, &apos;n&apos;]&gt;&gt;&gt; éœ€è¦è¿”å›žå€¼ï¼Œsorted12345&gt;&gt;&gt; name = list(&apos;hna&apos;)&gt;&gt;&gt; name1 = sorted(name)&gt;&gt;&gt; name1[&apos;a&apos;, &apos;h&apos;, &apos;n&apos;]&gt;&gt;&gt; é«˜çº§æŽ’åº12345678&gt;&gt;&gt; name = list(&apos;hanshenghui&apos;)&gt;&gt;&gt; name.sort(reverse = True)&gt;&gt;&gt; name[&apos;u&apos;, &apos;s&apos;, &apos;n&apos;, &apos;n&apos;, &apos;i&apos;, &apos;h&apos;, &apos;h&apos;, &apos;h&apos;, &apos;g&apos;, &apos;e&apos;, &apos;a&apos;]&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt;&gt; returnList.sort(key=lambda k: (k.get(&apos;date&apos;, 0)), reverse=False) å­—ç¬¦ä¸²å­—ç¬¦ä¸²æ ¼å¼åŒ–1234&gt;&gt;&gt; python = &apos;%s is a %s&apos; &gt;&gt;&gt; value = (&apos;xiaohong&apos;,&apos;dog&apos;)&gt;&gt;&gt; print python % valuexiaohong is a dog ç¬¦å·è¯´æ˜Ž:sä»£è¡¨å­—ç¬¦ä¸²ï¼ŒåŽè¾¹çš„å¯¹è±¡å°†ä»¥strè½¬è¯‘ï¼Œ%ä»£è¡¨å ä½ï¼Œåªæœ‰å…ƒç»„æ‰ä¼šè¢«åˆ†å¼€è§£é‡Šï¼Œå¦‚æžœæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œé‚£ä¹ˆåªèƒ½è¢«è§£é‡Šä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ç‚¹è¦ç‰¹åˆ«æ³¨æ„ã€‚dä»£è¡¨æ•´åž‹ï¼Œfä»£è¡¨æµ®ç‚¹æ•° 123&gt;&gt;&gt; python = &apos;%10.1fha&apos;&gt;&gt;&gt; print python % 10 10.0ha få‰è¾¹çš„å°æ•°ç‚¹åŽçš„æ•°å­—ä»£è¡¨ï¼Œå°æ•°ç‚¹çš„ä¿ç•™ä½æ•°ï¼Œè€Œå‰è¾¹çš„10ä»£è¡¨å­—æ®µå®½ã€‚ 1234567891011&gt;&gt;&gt; python = &apos;%010.1fha&apos;&gt;&gt;&gt; print python % 1000000010.0ha&gt;&gt;&gt; python = &apos;%+10.1fha&apos;&gt;&gt;&gt; print python % 10 +10.0ha&gt;&gt;&gt; print python % 1010.0 ha&gt;&gt;&gt; åœ¨å­—æ®µå®½å’Œç²¾åº¦å‰è¾¹è¿˜å¯ä»¥æ”¾ç½®ä¸€ä¸ªæ ‡å¿—ï¼Œè¿™ä¸ªæ ‡å¿—å¯ä»¥æ˜¯é›¶ï¼ŒåŠ å·å’Œå‡å·æˆ–è€…ç©ºæ ¼ï¼Œç”¨æ³•è§ä¸Š å­—ç¬¦ä¸²æ–¹æ³•1ã€findfindæ–¹æ³•å¯ä»¥åœ¨ä¸€ä¸ªè¾ƒé•¿çš„å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾å­å­—ç¬¦ä¸²ã€‚å®ƒè¿”å›žå­ä¸²æ‰€åœ¨ä½ç½®çš„æœ€å·¦ç«¯ç´¢å¼•ã€‚å¦‚æžœæ²¡æœ‰æ‰¾åˆ°åˆ™è¿”å›ž-1ã€‚1234567891011&gt;&gt;&gt; name = &apos;hanshenghui&apos;&gt;&gt;&gt; name.find(&apos;h&apos;)0&gt;&gt;&gt; name.find(&apos;h&apos;,2)4&gt;&gt;&gt; name.find(&apos;h&apos;,2,6)4&gt;&gt;&gt; name.find(&apos;h&apos;,2,5)4&gt;&gt;&gt; name.find(&apos;h&apos;,2,3)-1 2ã€join &amp;&amp; splitjoinæ–¹æ³•æ˜¯éžå¸¸é‡è¦çš„å­—ç¬¦ä¸²æ–¹æ³•ï¼Œå®ƒæ˜¯splitæ–¹æ³•çš„é€†æ–¹æ³•ï¼Œç”¨æ¥åœ¨é˜Ÿåˆ—ä¸­æ·»åŠ å…ƒç´ ï¼š123&gt;&gt;&gt; s = [&apos;1&apos;, &apos;2&apos;, &apos;3&apos;]&gt;&gt;&gt; &apos;+&apos;.join(s)&apos;1+2+3&apos; æ³¨æ„ï¼šéœ€è¦æ·»åŠ çš„é˜Ÿåˆ—å…ƒç´ éƒ½å¿…é¡»æ˜¯å­—ç¬¦ä¸²ã€‚ splitè¿™æ˜¯ä¸ªéžå¸¸é‡è¦çš„å­—ç¬¦ä¸²æ–¹æ³•ï¼Œå®ƒæ˜¯joinçš„é€†æ–¹æ³•ï¼Œç”¨æ¥å°†å­—ç¬¦ä¸²åˆ†å‰²æˆåºåˆ—ã€‚1234&gt;&gt;&gt; &apos;1+2+3+4&apos;.split(&apos;+&apos;)[&apos;1&apos;, &apos;2&apos;, &apos;3&apos;, &apos;4&apos;]&gt;&gt;&gt; &apos;1 2 3 4&apos;.split()[&apos;1&apos;, &apos;2&apos;, &apos;3&apos;, &apos;4&apos;] 3.lower &amp;&amp; upperloweræ–¹æ³•è¿”å›žå­—ç¬¦ä¸²çš„å°å†™å­—æ¯ç‰ˆã€‚1234567891011&gt;&gt;&gt; name = &apos;A&apos;&gt;&gt;&gt; name.lower()&apos;a&apos;&gt;&gt;&gt; b = name.lower()&gt;&gt;&gt; b.upper()&apos;A&apos;S.lower() #å°å†™ S.upper() #å¤§å†™ S.swapcase() #å¤§å°å†™äº’æ¢ S.capitalize() #é¦–å­—æ¯å¤§å†™ 4.stripstripæ–¹æ³•è¿”å›žåŽ»é™¤ä¸¤ä¾§ï¼ˆä¸åŒ…å«å†…éƒ¨ï¼‰ç©ºæ ¼çš„å­—ç¬¦ä¸²åŽ»ä¸¤è¾¹ç©ºæ ¼ï¼šstr.strip()åŽ»å·¦ç©ºæ ¼ï¼šstr.lstrip()åŽ»å³ç©ºæ ¼ï¼šstr.rstrip()åŽ»ä¸¤è¾¹å­—ç¬¦ä¸²ï¼šstr.strip(â€˜dâ€™)ï¼Œç›¸åº”çš„ä¹Ÿæœ‰lstripï¼Œrstrip 5.replace &amp;&amp; translatetranslateæ–¹æ³•å’Œreplaceæ–¹æ³•ä¸€æ ·ï¼Œå¯ä»¥æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„æŸäº›éƒ¨åˆ†ï¼Œä½†æ˜¯å’Œå‰è€…ä¸åŒçš„æ˜¯ï¼Œtranslateæ–¹æ³•åªå¤„ç†å•ä¸ªå­—ç¬¦ã€‚å®ƒçš„ä¼˜åŠ¿åœ¨äºŽå¯ä»¥åŒæ—¶è¿›è¡Œå¤šä¸ªæ›¿æ¢ï¼Œæœ‰äº›æ—¶å€™æ¯”replaceæ•ˆçŽ‡é«˜å¾—å¤šã€‚ 123&gt;&gt;&gt; name = &apos;hanshenghui&apos;&gt;&gt;&gt; name.replace(&apos;h&apos;,&apos;z&apos;)&apos;zanszengzui&apos; åœ¨ä½¿ç”¨translateè½¬æ¢å‰ï¼Œéœ€è¦å…ˆå®Œæˆä¸€å¼ è½¬æ¢è¡¨ã€‚è½¬æ¢è¡¨ä¸­æ˜¯ä»¥æŸå­—ç¬¦æ›¿æ¢æŸå­—ç¬¦çš„å¯¹åº”å…³ç³»ã€‚å› ä¸ºè¿™ä¸ªè¡¨ï¼ˆäº‹å®žä¸Šæ˜¯å­—ç¬¦ä¸²ï¼‰æœ‰å¤šè¾¾256ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¸è¦è‡ªå·±å†™äº†ï¼Œç”¨stringæ¨¡å—é‡Œé¢çš„maketranså‡½æ•°å°±è¡Œäº†ã€‚ maketranså‡½æ•°æŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä¸¤ä¸ªç­‰é•¿çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦éƒ½ç”¨ç¬¬äºŒä¸ªå­—ç¬¦ä¸²ä¸­ç›¸åŒä½ç½®çš„å­—ç¬¦æ›¿æ¢ã€‚12345678910&gt;&gt;&gt; from string import maketrans&gt;&gt;&gt; table = maketrans(&apos;cs&apos;, &apos;kz&apos;) åˆ›å»ºè¿™ä¸ªè¡¨åŽï¼Œå¯ä»¥å°†å®ƒç”¨ä½œtranslateæ–¹æ³•çš„å‚æ•°ï¼Œè¿›è¡Œå­—ç¬¦ä¸²çš„è½¬æ¢ï¼š&gt;&gt;&gt; &apos;this is an incredible test&apos;.translate(table)&apos;thiz iz an inkredible tezt&apos;translateçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œè¿™ä¸ªå‚æ•°æ˜¯ç”¨æ¥æŒ‡å®šéœ€è¦åˆ é™¤çš„å­—ç¬¦ã€‚&gt;&gt;&gt; &apos;this is an incredible test&apos;.translate(table, &apos; &apos;)&apos;thizizaninkredibletezt&apos; 6.å­—ç¬¦ä¸²åˆ¤æ–­ç›¸å…³å­—ç¬¦ä¸²åˆ¤æ–­ç›¸å…³æ˜¯å¦ä»¥startå¼€å¤´ï¼šstr.startswith(â€˜startâ€™)æ˜¯å¦ä»¥endç»“å°¾ï¼šstr.endswith(â€˜endâ€™)æ˜¯å¦å…¨ä¸ºå­—æ¯æˆ–æ•°å­—ï¼šstr.isalnum()æ˜¯å¦å…¨å­—æ¯ï¼šstr.isalpha()æ˜¯å¦å…¨æ•°å­—ï¼šstr.isdigit()æ˜¯å¦å…¨å°å†™ï¼šstr.islower()æ˜¯å¦å…¨å¤§å†™ï¼šstr.isupper() 7.å­—ç¬¦ä¸²æ¯”è¾ƒcmpæ–¹æ³•æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶æ ¹æ®ç»“æžœè¿”å›žä¸€ä¸ªæ•´æ•°ã€‚cmp(x,y)å¦‚æžœX&lt; Y,è¿”å›žå€¼æ˜¯è´Ÿæ•° å¦‚æžœX&gt;Y è¿”å›žçš„å€¼ä¸ºæ­£æ•°ã€‚sStr1 = â€˜strchâ€™sStr2 = â€˜strchrâ€™print cmp(sStr1,sStr2)##-1 åˆ—è¡¨ï¼Œå…ƒç»„ï¼Œå­—ç¬¦ä¸²çš„è½¬æ¢listä¸Žtupleæ„ä¹‰åœ¨äºŽå…ƒç»„å¯ä»¥ä½œä¸ºä¸€ä¸ªå‚æ•°æ•´ä½“ä½¿ç”¨ï¼Œè€Œåˆ—è¡¨ä¸å¯ä»¥1234567&gt;&gt;&gt; name = &apos;hanshenghui&apos;&gt;&gt;&gt; tuple(name)(&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;, &apos;h&apos;, &apos;u&apos;, &apos;i&apos;)&gt;&gt;&gt; list(name)[&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;, &apos;h&apos;, &apos;u&apos;, &apos;i&apos;]&gt;&gt;&gt; tuple(list(name))(&apos;h&apos;, &apos;a&apos;, &apos;n&apos;, &apos;s&apos;, &apos;h&apos;, &apos;e&apos;, &apos;n&apos;, &apos;g&apos;, &apos;h&apos;, &apos;u&apos;, &apos;i&apos;)]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[(è½¬)delegate/KVO/Notificationé€‰æ‹©]]></title>
    <url>%2F2016%2F03%2F18%2F2016%2F%E8%BD%AC-delegate-KVO-Notification%E9%80%89%E6%8B%A9%2F</url>
    <content type="text"><![CDATA[å‰é¢åˆ†åˆ«è®²äº†delegateã€notificationå’ŒKVOçš„å®žçŽ°åŽŸç†ï¼Œä»¥åŠå®žé™…ä½¿ç”¨æ­¥éª¤ï¼Œæˆ‘ä»¬å¿ƒä¸­ä¸ç¦æœ‰ä¸ªç–‘é—®ï¼Œä»–ä»¬çš„åŠŸèƒ½æ¯”è¾ƒç±»ä¼¼ï¼Œé‚£ä¹ˆåœ¨å®žé™…çš„ç¼–ç¨‹ä¸­ï¼Œå¦‚ä½•é€‰æ‹©è¿™äº›æ–¹å¼å‘¢ï¼Ÿåœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€ä¸ªåšå®¢ä¸Šè¯¦ç»†çš„åˆ†æžäº†ä¸‰è€…ä¹‹é—´çš„åŒºåˆ«ä»¥åŠå„è‡ªçš„ä¼˜åŠ¿ï¼Œåšæ–‡åœ°å€ä¸ºhttp://blog.shinetech.com/2011/06/14/delegation-notification-and-observation/ï¼Œå› ä¸ºåšæ–‡æ˜¯ç”¨è‹±æ–‡å†™çš„ï¼Œä¸‹é¢å°†å…¶ç¿»è¯‘æˆä¸­æ–‡ã€‚ åœ¨å¼€å‘iosåº”ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šç»å¸¸é‡åˆ°ä¸€ä¸ªå¸¸è§çš„é—®é¢˜ï¼šåœ¨ä¸è¿‡åˆ†è€¦åˆçš„å‰æä¸‹ï¼Œcontrollersé—´æ€Žä¹ˆè¿›è¡Œé€šä¿¡ã€‚åœ¨IOSåº”ç”¨ä¸æ–­çš„å‡ºçŽ°ä¸‰ç§æ¨¡å¼æ¥å®žçŽ°è¿™ç§é€šä¿¡ï¼š 1.å§”æ‰˜delegationï¼› 2.é€šçŸ¥ä¸­å¿ƒNotification Centerï¼› 3.é”®å€¼è§‚å¯Ÿkey value observingï¼ŒKVO å› æ­¤ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦è¿™äº›æ¨¡å¼ä»¥åŠä»€ä¹ˆæ—¶å€™ç”¨å®ƒä»¥åŠä»€ä¹ˆæ—¶å€™ä¸ç”¨å®ƒã€‚ ä¸‹é¢å®Œå…¨æ ¹æ®æˆ‘çš„å¼€å‘ç»éªŒæ¥è®¨è®ºè¿™ä¸‰ä¸­æ¨¡å¼ã€‚æˆ‘å°†è®¨è®ºä¸ºä»€ä¹ˆæˆ‘è§‰å¾—æŸç§æ¨¡å¼è¦å¥½äºŽå¦å¤–ä¸€ç§æ¨¡å¼ä»¥åŠä¸ºä»€ä¹ˆæˆ‘è§‰å¾—åœ¨ä¸€å®šçš„çŽ¯å¢ƒä¸‹æŸä¸­æ¨¡å¼æ¯”è¾ƒå¥½ã€‚æˆ‘ç»™å‡ºçš„è¿™äº›åŽŸå› å¹¶ä¸æ˜¯åœ£ç»ï¼Œè€Œä»…ä»…æ˜¯ä¸ªäººè§‚ç‚¹ã€‚å¦‚æžœä½ æœ‰ä»€ä¹ˆä¸åŒçš„è§‚ç‚¹æˆ–è€…è¿˜å¯ä»¥è¿›è¡Œè¡¥å……çš„åœ°æ–¹ï¼Œå¯ä»¥è”ç³»æˆ‘ï¼Œä¸€èµ·è®¨è®ºã€‚ ä¸Šé¢çš„ä¸‰ç§æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ ä¸‰ç§æ¨¡å¼éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ä¼ é€’äº‹ä»¶ç»™å¦å¤–ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”ä¸è¦ä»–ä»¬æœ‰è€¦åˆã€‚ä¸‰ç§æ¨¡å¼éƒ½æ˜¯å¯¹è±¡æ¥é€šçŸ¥æŸä¸ªäº‹ä»¶å‘ç”Ÿäº†çš„æ–¹æ³•ï¼Œæˆ–è€…æ›´å‡†ç¡®çš„è¯´ï¼Œæ˜¯å…è®¸å…¶ä»–çš„å¯¹è±¡æ”¶åˆ°è¿™ç§äº‹ä»¶çš„æ–¹æ³•ã€‚è¿™å¯¹äºŽä¸€ä¸ªå¯¹è±¡æ¥è¯´ï¼Œæ˜¯éžå¸¸æ™®é€šè€Œä¸”å¿…é¡»åšçš„ä»»åŠ¡ï¼Œå› ä¸ºæ²¡æœ‰é€šä¿¡ï¼Œcontrollerså°†ä¸èƒ½æ•´åˆåˆ°æ•´ä¸ªåº”ç”¨ä¸­ã€‚controllerçš„å¦å¤–ä¸€ä¸ªç›®çš„æ˜¯å°½å¯èƒ½çš„è‡ªåŒ…å«ã€‚æˆ‘ä»¬å¸Œæœ›controllersä»¥è‡ªå·±çš„æ–¹å¼å­˜åœ¨ï¼Œåœ¨controllerså±‚é¢ä¸Šä¸èƒ½ä¸Žå…¶ä»–çš„controllersè¿›è¡Œè€¦åˆã€‚Controllersèƒ½å¤Ÿç©¿ä»¶å…¶ä»–çš„controllersè€Œä¸”ä»–ä»¬ä¹‹é—´å¯ä»¥è‡ªç”±é€šä¿¡ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›controlleråˆå›žæŽ¥åˆ°åˆ›å»ºè‡ªå·±çš„controllerã€‚å¦‚æžœæˆ‘ä»¬è€¦åˆäº†ä»–ä»¬ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†ä¸èƒ½å¤ç”¨ä»–ä»¬ï¼Œä»¥åŠå®Œå…¨å¤±åŽ»å¯¹åº”ç”¨ä¸­ä¸€ä¸ªç‹¬ç«‹çš„ç»„ä»¶çš„æŽ§åˆ¶ã€‚ è¿™ä¸‰ç§æ¨¡å¼ç»™controllers(ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–çš„å¯¹è±¡ï¼‰æä¾›é€šä¿¡çš„æ–¹æ³•ã€‚ä¸‹é¢å°†æè¿°å¦‚ä½•åœ¨iosåº”ç”¨ä¸­ä½¿ç”¨è¿™äº›æ¨¡å¼ï¼ŒåŒæ ·éœ€è¦æ³¨æ„çš„ä»–ä»¬åœ¨å…¶ä»–çš„åœ°æ–¹ä¹Ÿä¼šç”¨åˆ°ï¼Œå¹¶ä¸”ç¡®å®žæ˜¯å­˜åœ¨ã€‚ delegationå½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡ç¼–å†™iosåº”ç”¨æ—¶ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°ä¸æ–­çš„åœ¨ä½¿ç”¨â€œdelegateâ€ï¼Œå¹¶ä¸”è´¯ç©¿äºŽæ•´ä¸ªSDKã€‚delegationæ¨¡å¼ä¸æ˜¯IOSç‰¹æœ‰çš„æ¨¡å¼ï¼Œè€Œæ˜¯ä¾èµ–ä¸Žä½ è¿‡åŽ»æ‹¥æœ‰çš„ç¼–ç¨‹èƒŒæ™¯ã€‚é’ˆå¯¹å®ƒçš„ä¼˜åŠ¿ä»¥åŠä¸ºä»€ä¹ˆç»å¸¸ä½¿ç”¨åˆ°ï¼Œè¿™ç§æ¨¡å¼å¯èƒ½ä¸æ˜¯å¾ˆæ˜Žæ˜¾çš„ã€‚ delegationçš„åŸºæœ¬ç‰¹å¾æ˜¯ï¼Œä¸€ä¸ªcontrollerå®šä¹‰äº†ä¸€ä¸ªåè®®ï¼ˆå³ä¸€ç³»åˆ—çš„æ–¹æ³•å®šä¹‰ï¼‰ã€‚è¯¥åè®®æè¿°äº†ä¸€ä¸ªdelegateå¯¹è±¡ä¸ºäº†èƒ½å¤Ÿå“åº”ä¸€ä¸ªcontrollerçš„äº‹ä»¶è€Œå¿…é¡»åšçš„äº‹æƒ…ã€‚åè®®å°±æ˜¯delegatorè¯´ï¼Œâ€œå¦‚æžœä½ æƒ³ä½œä¸ºæˆ‘çš„delegateï¼Œé‚£ä¹ˆä½ å°±å¿…é¡»å®žçŽ°è¿™äº›æ–¹æ³•â€ã€‚å®žçŽ°è¿™äº›æ–¹æ³•å°±æ˜¯å…è®¸controlleråœ¨å®ƒçš„delegateèƒ½å¤Ÿè°ƒç”¨è¿™äº›æ–¹æ³•ï¼Œè€Œå®ƒçš„delegateçŸ¥é“ä»€ä¹ˆæ—¶å€™è°ƒç”¨å“ªç§æ–¹æ³•ã€‚delegateå¯ä»¥æ˜¯ä»»ä½•ä¸€ç§å¯¹è±¡ç±»åž‹ï¼Œå› æ­¤controllerä¸ä¼šä¸ŽæŸç§å¯¹è±¡è¿›è¡Œè€¦åˆï¼Œä½†æ˜¯å½“è¯¥å¯¹è±¡å°è¯•å‘Šè¯‰å§”æ‰˜äº‹æƒ…æ—¶ï¼Œè¯¥å¯¹è±¡èƒ½ç¡®å®šdelegateå°†å“åº”ã€‚ delegateçš„ä¼˜åŠ¿ï¼š 1.éžå¸¸ä¸¥æ ¼çš„è¯­æ³•ã€‚æ‰€æœ‰å°†å¬åˆ°çš„äº‹ä»¶å¿…é¡»æ˜¯åœ¨delegateåè®®ä¸­æœ‰æ¸…æ™°çš„å®šä¹‰ã€‚ 2.å¦‚æžœdelegateä¸­çš„ä¸€ä¸ªæ–¹æ³•æ²¡æœ‰å®žçŽ°é‚£ä¹ˆå°±ä¼šå‡ºçŽ°ç¼–è¯‘è­¦å‘Š/é”™è¯¯ 3.åè®®å¿…é¡»åœ¨controllerçš„ä½œç”¨åŸŸèŒƒå›´å†…å®šä¹‰ 4.åœ¨ä¸€ä¸ªåº”ç”¨ä¸­çš„æŽ§åˆ¶æµç¨‹æ˜¯å¯è·Ÿè¸ªçš„å¹¶ä¸”æ˜¯å¯è¯†åˆ«çš„ï¼› 5.åœ¨ä¸€ä¸ªæŽ§åˆ¶å™¨ä¸­å¯ä»¥å®šä¹‰å®šä¹‰å¤šä¸ªä¸åŒçš„åè®®ï¼Œæ¯ä¸ªåè®®æœ‰ä¸åŒçš„delegates 6.æ²¡æœ‰ç¬¬ä¸‰æ–¹å¯¹è±¡è¦æ±‚ä¿æŒ/ç›‘è§†é€šä¿¡è¿‡ç¨‹ã€‚ 7.èƒ½å¤ŸæŽ¥æ”¶è°ƒç”¨çš„åè®®æ–¹æ³•çš„è¿”å›žå€¼ã€‚è¿™æ„å‘³ç€delegateèƒ½å¤Ÿæä¾›åé¦ˆä¿¡æ¯ç»™controller ç¼ºç‚¹ï¼š 1.éœ€è¦å®šä¹‰å¾ˆå¤šä»£ç ï¼š1.åè®®å®šä¹‰ï¼›2.controllerçš„delegateå±žæ€§ï¼›3.åœ¨delegateæœ¬èº«ä¸­å®žçŽ°delegateæ–¹æ³•å®šä¹‰ 2.åœ¨é‡Šæ”¾ä»£ç†å¯¹è±¡æ—¶ï¼Œéœ€è¦å°å¿ƒçš„å°†delegateæ”¹ä¸ºnilã€‚ä¸€æ—¦è®¾å®šå¤±è´¥ï¼Œé‚£ä¹ˆè°ƒç”¨é‡Šæ”¾å¯¹è±¡çš„æ–¹æ³•å°†ä¼šå‡ºçŽ°å†…å­˜crash 3.åœ¨ä¸€ä¸ªcontrollerä¸­æœ‰å¤šä¸ªdelegateå¯¹è±¡ï¼Œå¹¶ä¸”delegateæ˜¯éµå®ˆåŒä¸€ä¸ªåè®®ï¼Œä½†è¿˜æ˜¯å¾ˆéš¾å‘Šè¯‰å¤šä¸ªå¯¹è±¡åŒä¸€ä¸ªäº‹ä»¶ï¼Œä¸è¿‡æœ‰å¯èƒ½ã€‚ notificationåœ¨IOSåº”ç”¨å¼€å‘ä¸­æœ‰ä¸€ä¸ªâ€Notification Centerâ€œçš„æ¦‚å¿µã€‚å®ƒæ˜¯ä¸€ä¸ªå•ä¾‹å¯¹è±¡ï¼Œå…è®¸å½“äº‹ä»¶å‘ç”Ÿæ—¶é€šçŸ¥ä¸€äº›å¯¹è±¡ã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨ä½Žç¨‹åº¦è€¦åˆçš„æƒ…å†µä¸‹ï¼Œæ»¡è¶³æŽ§åˆ¶å™¨ä¸Žä¸€ä¸ªä»»æ„çš„å¯¹è±¡è¿›è¡Œé€šä¿¡çš„ç›®çš„ã€‚è¿™ç§æ¨¡å¼çš„åŸºæœ¬ç‰¹å¾æ˜¯ä¸ºäº†è®©å…¶ä»–çš„å¯¹è±¡èƒ½å¤ŸæŽ¥æ”¶åˆ°åœ¨è¯¥controllerä¸­å‘ç”ŸæŸç§äº‹ä»¶è€Œäº§ç”Ÿçš„æ¶ˆæ¯ï¼Œcontrollerç”¨ä¸€ä¸ªkeyï¼ˆé€šçŸ¥åç§°ï¼‰ã€‚è¿™æ ·å¯¹äºŽcontrolleræ¥è¯´æ˜¯åŒ¿åçš„ï¼Œå…¶ä»–çš„ä½¿ç”¨åŒæ ·çš„keyæ¥æ³¨å†Œäº†è¯¥é€šçŸ¥çš„å¯¹è±¡ï¼ˆå³è§‚å¯Ÿè€…ï¼‰èƒ½å¤Ÿå¯¹é€šçŸ¥çš„äº‹ä»¶ä½œå‡ºååº”ã€‚ ä¼˜åŠ¿ï¼š 1.ä¸éœ€è¦ç¼–å†™å¤šå°‘ä»£ç ï¼Œå®žçŽ°æ¯”è¾ƒç®€å•ï¼› 2.å¯¹äºŽä¸€ä¸ªå‘å‡ºçš„é€šçŸ¥ï¼Œå¤šä¸ªå¯¹è±¡èƒ½å¤Ÿåšå‡ºååº”ï¼Œå³1å¯¹å¤šçš„æ–¹å¼å®žçŽ°ç®€å• 3.controllerèƒ½å¤Ÿä¼ é€’contextå¯¹è±¡ï¼ˆdictionaryï¼‰ï¼Œcontextå¯¹è±¡æºå¸¦äº†å…³äºŽå‘é€é€šçŸ¥çš„è‡ªå®šä¹‰çš„ä¿¡æ¯ ç¼ºç‚¹ï¼š 1.åœ¨ç¼–è¯‘æœŸä¸ä¼šæ£€æŸ¥é€šçŸ¥æ˜¯å¦èƒ½å¤Ÿè¢«è§‚å¯Ÿè€…æ­£ç¡®çš„å¤„ç†ï¼› 2.åœ¨é‡Šæ”¾æ³¨å†Œçš„å¯¹è±¡æ—¶ï¼Œéœ€è¦åœ¨é€šçŸ¥ä¸­å¿ƒå–æ¶ˆæ³¨å†Œï¼› 3.åœ¨è°ƒè¯•çš„æ—¶å€™åº”ç”¨çš„å·¥ä½œä»¥åŠæŽ§åˆ¶è¿‡ç¨‹éš¾è·Ÿè¸ªï¼› 4.éœ€è¦ç¬¬ä¸‰æ–¹å¯¹å–œçˆ±é‚£ä¸ªæ¥ç®¡ç†controllerä¸Žè§‚å¯Ÿè€…å¯¹è±¡ä¹‹é—´çš„è”ç³»ï¼› 5.controllerå’Œè§‚å¯Ÿè€…éœ€è¦æå‰çŸ¥é“é€šçŸ¥åç§°ã€UserInfo dictionary keysã€‚å¦‚æžœè¿™äº›æ²¡æœ‰åœ¨å·¥ä½œåŒºé—´å®šä¹‰ï¼Œé‚£ä¹ˆä¼šå‡ºçŽ°ä¸åŒæ­¥çš„æƒ…å†µï¼› 6.é€šçŸ¥å‘å‡ºåŽï¼Œcontrollerä¸èƒ½ä»Žè§‚å¯Ÿè€…èŽ·å¾—ä»»ä½•çš„åé¦ˆä¿¡æ¯ã€‚ KVOKVOæ˜¯ä¸€ä¸ªå¯¹è±¡èƒ½å¤Ÿè§‚å¯Ÿå¦å¤–ä¸€ä¸ªå¯¹è±¡çš„å±žæ€§çš„å€¼ï¼Œå¹¶ä¸”èƒ½å¤Ÿå‘çŽ°å€¼çš„å˜åŒ–ã€‚å‰é¢ä¸¤ç§æ¨¡å¼æ›´åŠ é€‚åˆä¸€ä¸ªcontrollerä¸Žä»»ä½•å…¶ä»–çš„å¯¹è±¡è¿›è¡Œé€šä¿¡ï¼Œè€ŒKVOæ›´åŠ é€‚åˆä»»ä½•ç±»åž‹çš„å¯¹è±¡ä¾¦å¬å¦å¤–ä¸€ä¸ªä»»æ„å¯¹è±¡çš„æ”¹å˜ï¼ˆè¿™é‡Œä¹Ÿå¯ä»¥æ˜¯controllerï¼Œä½†ä¸€èˆ¬ä¸æ˜¯controllerï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªå¯¹è±¡ä¸Žå¦å¤–ä¸€ä¸ªå¯¹è±¡ä¿æŒåŒæ­¥çš„ä¸€ç§æ–¹æ³•ï¼Œå³å½“å¦å¤–ä¸€ç§å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè§‚å¯Ÿå¯¹è±¡é©¬ä¸Šä½œå‡ºååº”ã€‚å®ƒåªèƒ½ç”¨æ¥å¯¹å±žæ€§ä½œå‡ºååº”ï¼Œè€Œä¸ä¼šç”¨æ¥å¯¹æ–¹æ³•æˆ–è€…åŠ¨ä½œä½œå‡ºååº”ã€‚ ä¼˜ç‚¹ï¼š 1.èƒ½å¤Ÿæä¾›ä¸€ç§ç®€å•çš„æ–¹æ³•å®žçŽ°ä¸¤ä¸ªå¯¹è±¡é—´çš„åŒæ­¥ã€‚ä¾‹å¦‚ï¼šmodelå’Œviewä¹‹é—´åŒæ­¥ï¼› 2.èƒ½å¤Ÿå¯¹éžæˆ‘ä»¬åˆ›å»ºçš„å¯¹è±¡ï¼Œå³å†…éƒ¨å¯¹è±¡çš„çŠ¶æ€æ”¹å˜ä½œå‡ºå“åº”ï¼Œè€Œä¸”ä¸éœ€è¦æ”¹å˜å†…éƒ¨å¯¹è±¡ï¼ˆSKDå¯¹è±¡ï¼‰çš„å®žçŽ°ï¼› 3.èƒ½å¤Ÿæä¾›è§‚å¯Ÿçš„å±žæ€§çš„æœ€æ–°å€¼ä»¥åŠå…ˆå‰å€¼ï¼› 4.ç”¨key pathsæ¥è§‚å¯Ÿå±žæ€§ï¼Œå› æ­¤ä¹Ÿå¯ä»¥è§‚å¯ŸåµŒå¥—å¯¹è±¡ï¼› 5.å®Œæˆäº†å¯¹è§‚å¯Ÿå¯¹è±¡çš„æŠ½è±¡ï¼Œå› ä¸ºä¸éœ€è¦é¢å¤–çš„ä»£ç æ¥å…è®¸è§‚å¯Ÿå€¼èƒ½å¤Ÿè¢«è§‚å¯Ÿ ç¼ºç‚¹ï¼š 1.æˆ‘ä»¬è§‚å¯Ÿçš„å±žæ€§å¿…é¡»ä½¿ç”¨stringsæ¥å®šä¹‰ã€‚å› æ­¤åœ¨ç¼–è¯‘å™¨ä¸ä¼šå‡ºçŽ°è­¦å‘Šä»¥åŠæ£€æŸ¥ï¼› 2.å¯¹å±žæ€§é‡æž„å°†å¯¼è‡´æˆ‘ä»¬çš„è§‚å¯Ÿä»£ç ä¸å†å¯ç”¨ï¼› 3.å¤æ‚çš„â€œIFâ€è¯­å¥è¦æ±‚å¯¹è±¡æ­£åœ¨è§‚å¯Ÿå¤šä¸ªå€¼ã€‚è¿™æ˜¯å› ä¸ºæ‰€æœ‰çš„è§‚å¯Ÿä»£ç é€šè¿‡ä¸€ä¸ªæ–¹æ³•æ¥æŒ‡å‘ï¼› 4.å½“é‡Šæ”¾è§‚å¯Ÿè€…æ—¶ä¸éœ€è¦ç§»é™¤è§‚å¯Ÿè€…ã€‚ æ€»ç»“ï¼šä»Žä¸Šé¢çš„åˆ†æžä¸­å¯ä»¥çœ‹å‡º3ä¸­è®¾è®¡æ¨¡å¼éƒ½æœ‰å„è‡ªçš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚å…¶å®žä»»ä½•ä¸€ç§äº‹ç‰©éƒ½æ˜¯è¿™æ ·ï¼Œé—®é¢˜æ˜¯å¦‚ä½•åœ¨æ­£ç¡®çš„æ—¶é—´æ­£ç¡®çš„çŽ¯å¢ƒä¸‹é€‰æ‹©æ­£ç¡®çš„äº‹ç‰©ã€‚ä¸‹é¢å°±è®²è®²å¦‚ä½•å‘æŒ¥ä»–ä»¬å„è‡ªçš„ä¼˜åŠ¿ï¼Œåœ¨å“ªç§æƒ…å†µä¸‹ä½¿ç”¨å“ªç§æ¨¡å¼ã€‚æ³¨æ„ä½¿ç”¨ä»»ä½•ä¸€ç§æ¨¡å¼éƒ½æ²¡æœ‰å¯¹å’Œé”™ï¼Œåªæœ‰æ›´é€‚åˆæˆ–è€…ä¸é€‚åˆã€‚æ¯ä¸€ç§æ¨¡å¼éƒ½ç»™å¯¹è±¡æä¾›ä¸€ç§æ–¹æ³•æ¥é€šçŸ¥ä¸€ä¸ªäº‹ä»¶ç»™å…¶ä»–å¯¹è±¡ï¼Œè€Œä¸”å‰è€…ä¸éœ€è¦çŸ¥é“ä¾¦å¬è€…ã€‚åœ¨è¿™ä¸‰ç§æ¨¡å¼ä¸­ï¼Œæˆ‘è®¤ä¸ºKVOæœ‰æœ€æ¸…æ™°çš„ä½¿ç”¨æ¡ˆä¾‹ï¼Œè€Œä¸”é’ˆå¯¹æŸä¸ªéœ€æ±‚æœ‰æ¸…æ™°çš„å®žç”¨æ€§ã€‚è€Œå¦å¤–ä¸¤ç§æ¨¡å¼æœ‰æ¯”è¾ƒç›¸ä¼¼çš„ç”¨å¤„ï¼Œå¹¶ä¸”ç»å¸¸ç”¨æ¥ç»™controlleré—´è¿›è¡Œé€šä¿¡ã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨ä»€ä¹ˆæƒ…å†µä½¿ç”¨å…¶ä¸­ä¹‹ä¸€å‘¢ï¼Ÿ æ ¹æ®æˆ‘å¼€å‘iOSåº”ç”¨çš„ç»åŽ†ï¼Œæˆ‘å‘çŽ°æœ‰äº›è¿‡åˆ†çš„ä½¿ç”¨é€šçŸ¥æ¨¡å¼ã€‚æˆ‘ä¸ªäººä¸æ˜¯å¾ˆå–œæ¬¢ä½¿ç”¨é€šçŸ¥ä¸­å¿ƒã€‚æˆ‘å‘çŽ°ç”¨é€šçŸ¥ä¸­å¿ƒå¾ˆéš¾æŠŠæ¡åº”ç”¨çš„æ‰§è¡Œæµç¨‹ã€‚UserInfo dictionariesçš„keysåˆ°å¤„ä¼ é€’å¯¼è‡´å¤±åŽ»äº†åŒæ­¥ï¼Œè€Œä¸”åœ¨å…¬å…±ç©ºé—´éœ€è¦å®šä¹‰å¤ªå¤šçš„å¸¸é‡ã€‚å¯¹äºŽä¸€ä¸ªå·¥ä½œäºŽçŽ°æœ‰çš„é¡¹ç›®çš„å¼€å‘è€…æ¥è¯´ï¼Œå¦‚æžœè¿‡åˆ†çš„ä½¿ç”¨é€šçŸ¥ä¸­å¿ƒï¼Œé‚£ä¹ˆå¾ˆéš¾ç†è§£åº”ç”¨çš„æµç¨‹ã€‚ æˆ‘è§‰å¾—ä½¿ç”¨å‘½åè§„åˆ™å¥½çš„åè®®å’Œåè®®æ–¹æ³•å®šä¹‰å¯¹äºŽæ¸…æ™°çš„ç†è§£controllersé—´çš„é€šä¿¡æ˜¯å¾ˆå®¹æ˜“çš„ã€‚åŠªåŠ›çš„å®šä¹‰è¿™äº›åè®®æ–¹æ³•å°†å¢žå¼ºä»£ç çš„å¯è¯»æ€§ï¼Œä»¥åŠæ›´å¥½çš„è·Ÿè¸ªä½ çš„appã€‚ä»£ç†åè®®å‘ç”Ÿæ”¹å˜ä»¥åŠå®žçŽ°éƒ½å¯é€šè¿‡ç¼–è¯‘å™¨æ£€æŸ¥å‡ºæ¥ï¼Œå¦‚æžœæ²¡æœ‰å°†ä¼šåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­è‡³å°‘ä¼šå‡ºçŽ°crashï¼Œè€Œä¸ä»…ä»…æ˜¯è®©ä¸€äº›äº‹æƒ…å¼‚å¸¸å·¥ä½œã€‚ç”šè‡³åœ¨åŒä¸€äº‹ä»¶é€šçŸ¥å¤šæŽ§åˆ¶å™¨çš„åœºæ™¯ä¸­ï¼Œåªè¦ä½ çš„åº”ç”¨åœ¨controllerå±‚æ¬¡æœ‰ç€è‰¯å¥½çš„ç»“æž„ï¼Œæ¶ˆæ¯å°†åœ¨è¯¥å±‚æ¬¡ä¸Šä¼ é€’ã€‚è¯¥å±‚æ¬¡èƒ½å¤Ÿå‘åŽä¼ é€’ç›´è‡³è®©æ‰€æœ‰éœ€è¦çŸ¥é“äº‹ä»¶çš„controllerséƒ½çŸ¥é“ã€‚ å½“ç„¶ä¼šæœ‰delegationæ¨¡å¼ä¸é€‚åˆçš„ä¾‹å¤–æƒ…å†µå‡ºçŽ°ï¼Œè€Œä¸”notificationå¯èƒ½æ›´åŠ æœ‰æ•ˆã€‚ä¾‹å¦‚ï¼šåº”ç”¨ä¸­æ‰€æœ‰çš„controlleréœ€è¦çŸ¥é“ä¸€ä¸ªäº‹ä»¶ã€‚ç„¶è€Œè¿™äº›ç±»åž‹çš„åœºæ™¯å¾ˆå°‘å‡ºçŽ°ã€‚å¦å¤–ä¸€ä¸ªä¾‹å­æ˜¯å½“ä½ å»ºç«‹äº†ä¸€ä¸ªæž¶æž„è€Œä¸”éœ€è¦é€šçŸ¥è¯¥äº‹ä»¶ç»™æ­£åœ¨è¿è¡Œä¸­åº”ç”¨ã€‚ æ ¹æ®ç»éªŒï¼Œå¦‚æžœæ˜¯å±žæ€§å±‚çš„äº‹ä»¶ï¼Œä¸ç®¡æ˜¯åœ¨ä¸éœ€è¦ç¼–ç¨‹çš„å¯¹è±¡è¿˜æ˜¯åœ¨ç´§ç´§ç»‘å®šä¸€ä¸ªviewå¯¹è±¡çš„modelå¯¹è±¡ï¼Œæˆ‘åªä½¿ç”¨è§‚å¯Ÿã€‚å¯¹äºŽå…¶ä»–çš„äº‹ä»¶ï¼Œæˆ‘éƒ½ä¼šä½¿ç”¨delegateæ¨¡å¼ã€‚å¦‚æžœå› ä¸ºæŸç§åŽŸå› æˆ‘ä¸èƒ½ä½¿ç”¨delegateï¼Œé¦–å…ˆæˆ‘å°†ä¼°è®¡æˆ‘çš„appæž¶æž„æ˜¯å¦å‡ºçŽ°äº†ä¸¥é‡çš„é”™è¯¯ã€‚å¦‚æžœæ²¡æœ‰é”™è¯¯ï¼Œç„¶åŽæ‰ä½¿ç”¨notificationã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSæŠ€èƒ½æ€»ç»“]]></title>
    <url>%2F2016%2F02%2F19%2F2016%2FiOS%E6%8A%80%E8%83%BD%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[å‚è€ƒâ€“å”å·§ï¼ŒiOSæŠ€èƒ½å›¾è°± ç¼–ç¨‹è¯­è¨€ Swift Objective-C C++/C JavaScript Python æ“ä½œç³»ç»Ÿ Mac OSX iOS watchOS tvOS Linux å¸¸ç”¨å‘½ä»¤ å¼€å‘åŸºç¡€ UI æŽ§ä»¶ Storyboard &amp; Xib Core Data &amp; Sqliteæ•°æ®æŒä¹…åŒ–CoreDataçš„å¤šçº¿ç¨‹ äº†è§£æ²¡? CoreData çš„ä¸åŒç‰ˆæœ¬çš„æ•°æ®è¿ç§»æ€Žä¹ˆåš? Core Graphics Animation Block &amp; GCDï¼ŒGCD ,NSThread ,NSOperation èƒ½ä¸èƒ½æ»”æ»”ä¸ç»çš„è®²å‡ºæ¥ Test Case ç¼–å†™ Framework Autolayout WebController æ‰‹åŠ¿è¯†åˆ«ï¼Œé‡åŠ›æ„Ÿåº” æŽ¨é€ ç½‘ç»œåŠ å¯† keyChain é’¥åŒ™ä¸²å­˜å‚¨ å¼€å‘è¿›é˜¶ å†…å­˜ç®¡ç† Runtimeï¼Œåœ¨é¡¹ç›®ä¸­çš„åº”ç”¨ Runloopï¼Œåœ¨é¡¹ç›®ä¸­çš„åº”ç”¨ å¯¹è±¡æ¨¡åž‹ Hybrid æ²™ç›’æœºåˆ¶ AVFoundation Core Text appç˜¦èº« æ’ä»¶åˆ¶ä½œ æ‰“åŒ….aå’Œframwork ä¼˜åŒ– ç”µé‡ æµé‡ æ€§èƒ½ ç½‘ç»œ é€†å‘ä¸Žå®‰å…¨ class dump IDA Pro Hopper iOS Class Guard è®¾è®¡æ¨¡å¼ MVC MVVM é€šçŸ¥ ä»£ç† KVO å·¥åŽ‚æ¨¡å¼ å‘½ä»¤æ¨¡å¼ å¼€å‘å·¥å…· IDE Xcode AppCode è°ƒè¯•å·¥å…· Charlesã€Wireshark Reveal Instruments æ’ä»¶ Alcatraz VVDocument XVim FuzzyAutocompletePlugin KSImageNamed-Xcode è¾…åŠ©å·¥å…· xScope ImageOptim é©¬å…‹é³— Dash Deploymate FauxPas PaintCode å‘½ä»¤è¡Œå·¥å…· xcodebuildã€xcode-select nomad xctool fastlane æŒç»­é›†æˆ Jenkins Travis CI Bot å¼€æºé¡¹ç›® AFNetworking &amp; Alamofire Masonry SDWebImage SwiftyJSON JSPatch React Native App æ‰“åŒ…ä¸Šä¼ ä¸Žå®¡æ ¸ Apple Developer ç½‘ç«™ iTunes Connect ç½‘ç«™ IAP åŠ æ€¥å®¡æ ¸ç”³è¯· æ‰“åŒ…è„šæœ¬ ç¬¬ä¸‰æ–¹æœåŠ¡ å´©æºƒæ”¶é›† Bugly Crashlytics BugHD Fabric æ•°æ®ç»Ÿè®¡ Google Analytics å‹ç›Ÿ MTA Flurry App Annie åº”ç”¨åˆ†å‘ TestFlight è’²å…¬è‹± FIR åŒ…ç®¡ç† CocoaPods Carthage Swift Package Manager å‡½æ•°å¼ç¼–ç¨‹ ReactiveCocoa RxSwift]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[(è½¬)é¡¹ç›®ä¼˜åŒ–--å®‰è£…åŒ…ä½“ç§¯æŽ§åˆ¶]]></title>
    <url>%2F2016%2F01%2F18%2F2016%2F%E8%BD%AC-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96-%E5%AE%89%E8%A3%85%E5%8C%85%E4%BD%93%E7%A7%AF%E6%8E%A7%E5%88%B6%2F</url>
    <content type="text"><![CDATA[iOSå¾®ä¿¡å®‰è£…åŒ…ç˜¦èº« å‰æ å¾®ä¿¡ç»è¿‡å¤šæ¬¡ç‰ˆæœ¬è¿­ä»£ï¼Œäº§ç”Ÿä¸å°‘å†—ä½™ä»£ç å’Œæ— ç”¨èµ„æºã€‚ä¹‹å‰å¾®ä¿¡ä¹Ÿæ²¡æœ‰å¾ˆå¥½çš„æ‰‹æ®µçŸ¥é“å“ªä¸ªæ¨¡å—å¢žé‡å¤šå°‘ã€‚å¦å¤–åŽ»å¹´10æœˆå¾®ä¿¡å¼€å§‹åšARCæ”¯æŒï¼Œç›®çš„æ˜¯ä¸ºäº†å‡å°‘é‡ŽæŒ‡é’ˆå¸¦æ¥çš„Crashï¼Œä½†ä»£ä»·æ˜¯å¯æ‰§è¡Œæ–‡ä»¶å¢žå¤§20%å·¦å³ã€‚è€Œè‹¹æžœè§„å®šä»Šå¹´6æœˆæäº¤ç»™Appstoreçš„åº”ç”¨å¿…é¡»æ”¯æŒ64ä½ï¼Œ32ä½å’Œ64ä½ä¸¤ä¸ªæž¶æž„çš„å­˜åœ¨ä½¿å¾—å¯æ‰§è¡Œæ–‡ä»¶å¢žåŠ äº†ä¸€å€å¤šã€‚å®‰è£…åŒ…å¤§å°ä¼˜åŒ–è¿«åœ¨çœ‰ç«ã€‚ Appstoreå®‰è£…åŒ…æ˜¯ç”±èµ„æºå’Œå¯æ‰§è¡Œæ–‡ä»¶ä¸¤éƒ¨åˆ†ç»„æˆï¼Œå®‰è£…åŒ…ç˜¦èº«ä¹Ÿæ˜¯ä»Žè¿™ä¸¤éƒ¨åˆ†è¿›è¡Œã€‚ èµ„æºç˜¦èº«èµ„æºç˜¦èº«ä¸»è¦æ˜¯åŽ»æŽ‰æ— ç”¨èµ„æºå’ŒåŽ‹ç¼©èµ„æºï¼Œèµ„æºåŒ…æ‹¬å›¾ç‰‡ã€éŸ³è§†é¢‘æ–‡ä»¶ã€é…ç½®æ–‡ä»¶ä»¥åŠå¤šè¯­è¨€wordingã€‚æ— ç”¨èµ„æºæ˜¯æŒ‡èµ„æºåœ¨å·¥ç¨‹æ–‡ä»¶é‡Œï¼Œä½†æ²¡æœ‰è¢«ä»£ç å¼•ç”¨ã€‚æ£€æŸ¥æ–¹æ³•æ˜¯ï¼Œç”¨èµ„æºå…³é”®å­—ï¼ˆé€šå¸¸æ˜¯æ–‡ä»¶åï¼Œå›¾ç‰‡èµ„æºéœ€è¦åŽ»æŽ‰@2x @3xï¼‰ï¼Œæœç´¢ä»£ç ï¼Œæœä¸åˆ°å°±æ˜¯æ²¡æœ‰è¢«å¼•ç”¨ã€‚å½“ç„¶ï¼Œæœ‰äº›èµ„æºåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æ˜¯æ‹¼æŽ¥è€Œæˆçš„ï¼ˆå¦‚loading_xxx.pngï¼‰ï¼Œéœ€è¦æ‰‹å·¥è¿‡æ»¤ã€‚ èµ„æºåŽ‹ç¼©ä¸»è¦å¯¹pngè¿›è¡Œæ— æŸåŽ‹ç¼©ï¼Œç”¨çš„æ˜¯ImageOptimå·¥å…·å’Œcompresså‘½ä»¤ï¼ˆéœ€è¦å®‰è£…XQuartz-2.7.5.dmæ’ä»¶ï¼‰ã€‚ä¸å»ºè®®å¯¹èµ„æºåšæœ‰æŸåŽ‹ç¼©ï¼Œæœ‰æŸåŽ‹ç¼©éœ€è¦è®¾è®¡ä¸€ä¸ªä¸ªæ£€æŸ¥ï¼Œé€šå¸¸åŽ‹ç¼©åŽæ•ˆæžœä¸å°½äººæ„ã€‚ Xcodeâ€™s Link Map Fileåœ¨è®²å¯æ‰§è¡Œæ–‡ä»¶ç˜¦èº«ä¹‹å‰å…ˆä»‹ç»Xcodeçš„LinkMapæ–‡ä»¶ã€‚LinkMapæ–‡ä»¶æ˜¯Xcodeäº§ç”Ÿå¯æ‰§è¡Œæ–‡ä»¶çš„åŒæ—¶ç”Ÿæˆçš„é“¾æŽ¥ä¿¡æ¯ï¼Œç”¨æ¥æè¿°å¯æ‰§è¡Œæ–‡ä»¶çš„æž„é€ æˆåˆ†ï¼ŒåŒ…æ‹¬ä»£ç æ®µï¼ˆTEXTï¼‰å’Œæ•°æ®æ®µï¼ˆDATAï¼‰çš„åˆ†å¸ƒæƒ…å†µã€‚åªè¦è®¾ç½®Project-&gt;Build Settings-&gt;Write Link Map Fileä¸ºYESï¼Œå¹¶è®¾ç½®Path to Link Map Fileï¼Œbuildå®ŒåŽå°±å¯ä»¥åœ¨è®¾ç½®çš„è·¯å¾„çœ‹åˆ°LinkMapæ–‡ä»¶äº†ï¼š æ¯ä¸ªLinkMapç”±3ä¸ªéƒ¨åˆ†ç»„æˆï¼Œä»¥å¾®ä¿¡ä¸ºä¾‹ï¼š Object files: [ 0] linker synthesized [ 1] /xxxx/WCPayInfoItem.o [ 2] /xxxx/GameCenterFriendRankCell.o [ 3] /xxxx/WloginTlv_0x168.o â€¦ ç¬¬ä¸€éƒ¨åˆ†åˆ—ä¸¾å¯æ‰§è¡Œæ–‡ä»¶é‡Œæ‰€æœ‰.objæ–‡ä»¶ï¼Œä»¥åŠæ¯ä¸ªæ–‡ä»¶çš„ç¼–å·ã€‚ Sections: ç¬¬äºŒéƒ¨åˆ†æ˜¯å¯æ‰§è¡Œæ–‡ä»¶çš„æ®µè¡¨ï¼Œæè¿°å„ä¸ªæ®µåœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„åç§»ä½ç½®å’Œå¤§å°ã€‚ç¬¬ä¸€åˆ—æ˜¯æ®µçš„åç§»é‡ï¼Œç¬¬äºŒåˆ—æ˜¯æ®µå ç”¨å¤§å°ï¼ŒAddress(n)=Address(n-1)+Size(n-1)ï¼›ç¬¬ä¸‰åˆ—æ˜¯æ®µç±»åž‹ï¼Œä»£ç æ®µå’Œæ•°æ®æ®µï¼›ç¬¬å››åˆ—æ˜¯æ®µåå­—ï¼Œå¦‚textæ˜¯å¯æ‰§è¡Œæœºå™¨ç ï¼Œcstringæ˜¯å­—ç¬¦ä¸²å¸¸é‡ã€‚æœ‰å…³æ®µçš„æ¦‚å¿µå¯å‚è€ƒè‹¹æžœå®˜æ–¹æ–‡æ¡£ã€ŠOS X ABI Mach-O File Format Referenceã€‹ Symbols: Address Size File Name0x100005A50 0x00000074 [ 1] +[WCPayInfoItem initialize] â€¦ 0x10231C120 0x00000018 [ 1] literal string: I16@?0@â€WCPayInfoItemâ€8 â€¦ 0x10252A41A 0x0000000E [ 1] literal string: WCPayInfoItem â€¦ ç¬¬ä¸‰éƒ¨åˆ†è¯¦ç»†æè¿°æ¯ä¸ªobjæ–‡ä»¶åœ¨æ¯ä¸ªæ®µçš„åˆ†å¸ƒæƒ…å†µï¼ŒæŒ‰ç¬¬äºŒéƒ¨åˆ†Sectionsé¡ºåºå±•ç¤ºã€‚ä¾‹å¦‚åºå·1çš„WCPayInfoItem.oæ–‡ä»¶ï¼Œ+[WCPayInfoItem initialize]æ–¹æ³•åœ¨TEXT.textåœ°å€æ˜¯0x100005A50ï¼Œå ç”¨å¤§å°æ˜¯116å­—èŠ‚ã€‚æ ¹æ®åºå·ç´¯åŠ æ¯ä¸ªobjæ–‡ä»¶åœ¨æ¯ä¸ªæ®µçš„å ç”¨å¤§å°ï¼Œä»Žè€Œè®¡ç®—å‡ºæ¯ä¸ªobjæ–‡ä»¶åœ¨å¯æ‰§è¡Œæ–‡ä»¶çš„å ç”¨å¤§å°ï¼Œè¿›è€Œç®—å‡ºæ¯ä¸ªé™æ€åº“ã€æ¯ä¸ªåŠŸèƒ½æ¨¡å—ä»£ç å ç”¨å¤§å°ã€‚è¿™é‡Œè¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œç”±äºŽDATA.bbsæ˜¯ä»£è¡¨æœªåˆå§‹åŒ–çš„é™æ€å˜é‡ï¼ŒSizeè¡¨ç¤ºåº”ç”¨è¿è¡Œæ—¶å ç”¨çš„å †å¤§å°ï¼Œå¹¶ä¸å ç”¨å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰€ä»¥è®¡ç®—objå ç”¨å¤§å°æ—¶ï¼Œè¦æŽ’é™¤è¿™ä¸ªæ®µçš„Sizeã€‚ å¯æ‰§è¡Œæ–‡ä»¶ç˜¦èº«å›žåˆ°æˆ‘ä»¬çš„å¯æ‰§è¡Œæ–‡ä»¶ç˜¦èº«é—®é¢˜ï¼ŒLinkMapæ–‡ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¯»æ‰¾ä¼˜åŒ–ç‚¹ã€‚ 1. æŸ¥æ‰¾æ— ç”¨selectorä»¥å¾€C++åœ¨é“¾æŽ¥æ—¶ï¼Œæ²¡æœ‰è¢«ç”¨åˆ°çš„ç±»å’Œæ–¹æ³•æ˜¯ä¸ä¼šç¼–è¿›å¯æ‰§è¡Œæ–‡ä»¶é‡Œã€‚ä½†Objctive-Cä¸åŒï¼Œç”±äºŽå®ƒçš„åŠ¨æ€æ€§ï¼Œå®ƒå¯ä»¥é€šè¿‡ç±»åå’Œæ–¹æ³•åèŽ·å–è¿™ä¸ªç±»å’Œæ–¹æ³•è¿›è¡Œè°ƒç”¨ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¼šæŠŠé¡¹ç›®é‡Œæ‰€æœ‰OCæºæ–‡ä»¶ç¼–è¿›å¯æ‰§è¡Œæ–‡ä»¶é‡Œï¼Œå“ªæ€•è¯¥ç±»å’Œæ–¹æ³•æ²¡æœ‰è¢«ä½¿ç”¨åˆ°ã€‚ ç»“åˆLinkMapæ–‡ä»¶çš„TEXT.textï¼Œé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼([+|-][.+\s(.+)])ï¼Œæˆ‘ä»¬å¯ä»¥æå–å½“å‰å¯æ‰§è¡Œæ–‡ä»¶é‡Œæ‰€æœ‰objcç±»æ–¹æ³•å’Œå®žä¾‹æ–¹æ³•ï¼ˆSelectorsAllï¼‰ã€‚å†ä½¿ç”¨otoolå‘½ä»¤otool -v -s DATA objc_selrefsé€†å‘DATA.objc_selrefsæ®µï¼Œæå–å¯æ‰§è¡Œæ–‡ä»¶é‡Œå¼•ç”¨åˆ°çš„æ–¹æ³•åï¼ˆUsedSelectorsAllï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å¤§è‡´åˆ†æžå‡ºSelectorsAllé‡Œå“ªäº›æ–¹æ³•æ˜¯æ²¡æœ‰è¢«å¼•ç”¨çš„ï¼ˆSelectorsAll-UsedSelectorsAllï¼‰ã€‚æ³¨æ„ï¼Œç³»ç»ŸAPIçš„Protocolå¯èƒ½è¢«åˆ—å…¥æ— ç”¨æ–¹æ³•åå•é‡Œï¼Œå¦‚UITableViewDelegateçš„æ–¹æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹è¿™äº›Protocolé‡Œçš„æ–¹æ³•åŠ å…¥ç™½åå•è¿‡æ»¤å³å¯ã€‚ å¦å¤–ç¬¬ä¸‰æ–¹åº“çš„æ— ç”¨selectorä¹Ÿå¯ä»¥è¿™æ ·æ‰«å‡ºæ¥çš„ã€‚ 2. æŸ¥æ‰¾æ— ç”¨ocç±»æŸ¥æ‰¾æ— ç”¨ocç±»æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ç±»ä¼¼äºŽæŸ¥æ‰¾æ— ç”¨èµ„æºï¼Œé€šè¿‡æœç´¢â€[ClassName alloc/newâ€ã€â€ClassName *â€ã€â€[ClassName class]â€ç­‰å…³é”®å­—åœ¨ä»£ç é‡Œæ˜¯å¦å‡ºçŽ°ã€‚å¦ä¸€ç§æ˜¯é€šè¿‡otoolå‘½ä»¤é€†å‘DATA.objc_classlistæ®µå’ŒDATA.objc_classrefsæ®µæ¥èŽ·å–å½“å‰æ‰€æœ‰ocç±»å’Œè¢«å¼•ç”¨çš„ocç±»ï¼Œä¸¤ä¸ªé›†åˆç›¸å‡å°±æ˜¯æ— ç”¨ocç±»ã€‚ 3. æ‰«æé‡å¤ä»£ç å¯ä»¥åˆ©ç”¨ç¬¬ä¸‰æ–¹å·¥å…·simianæ‰«æã€‚å—éžæ”¯ä»˜copyä»£ç å°±æ˜¯è¿™æ ·è¢«å‘çŽ°çš„ã€‚ä½†é™¤æ­¤æˆæžœä¹‹å¤–ï¼Œæ‰«æå‡ºæ¥çš„ç»“æžœè¿‡å¤šï¼Œé‡æž„èµ·æ¥ä¹Ÿä¸æ–¹ä¾¿ï¼Œä¸å¦‚ç åŠŸèƒ½éœ€æ±‚æ•ˆæžœå¥½ã€‚ 4. protobufç²¾ç®€æ”¹é€ protobufæ˜¯GoogleæŽ¨å‡ºçš„ä¸€ç§è½»é‡é«˜æ•ˆçš„ç»“æž„åŒ–æ•°æ®å­˜å‚¨æ ¼å¼ï¼Œåœ¨å¾®ä¿¡ç”¨äºŽç½‘ç»œåè®®å’Œæœ¬åœ°æ–‡ä»¶åºåˆ—åŒ–ã€‚ä½†googleé»˜è®¤å·¥å…·ç”Ÿæˆçš„ä»£ç æ¯”è¾ƒå†—ä½™ï¼Œåƒåºåˆ—åŒ–ã€ååºåˆ—åŒ–ã€è®¡ç®—åºåˆ—åŒ–å¤§å°ç­‰æ–¹æ³•éƒ½ç”Ÿæˆåœ¨å…·ä½“çš„pbç±»é‡Œï¼Œæ¯ä¸ªç±»çš„å®žçŽ°å¤§åŒå°å¼‚ã€‚é€šè¿‡ä»£ç åˆ†æžä»¥åŠç»“åˆprotobufåŽŸç†ï¼Œè¦æƒ³æŠŠè¿™äº›æ–¹æ³•æŠ½è±¡åˆ°åŸºç±»ï¼Œæ´¾ç”Ÿç±»æä¾›æ¯ä¸ªå­—æ®µç›¸å…³ä¿¡æ¯å°±å¤Ÿäº†ï¼š field number field label, optional, required or repeated wire type, double, float, int, etc æ˜¯å¦packed repeatedçš„æ•°æ®ç±»åž‹ 123456789101112typedef struct &#123; Byte _fieldNumber; Byte _fieldLabel; Byte _fieldType; BOOL _isPacked; int _enumInitValue; union &#123; __unsafe_unretained NSString* _messageClassName; __unsafe_unretained Class _messageClass; // ClassNameå¯¹åº”çš„Class IsEnumValidFunc _isEnumValidFunc; // æ£€æµ‹æžšä¸¾å€¼æ˜¯å¦åˆæ³•å‡½æ•°æŒ‡é’ˆ &#125;;&#125; PBFieldInfo; å¦å¤–é€šè¿‡æ— ç”¨selectoråˆ—è¡¨ï¼Œå‘çŽ°ä¸å°‘pbç±»å±žæ€§çš„getteræˆ–setteræ²¡æœ‰è¢«ä½¿ç”¨ã€‚åŽŸå…ˆçš„pbç±»å±žæ€§æ˜¯ç”¨@synthesizeä¿®é¥°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆgetterå’Œsetterã€‚å¦‚æžœä¸æƒ³ç¼–è¯‘å™¨ç”Ÿæˆï¼Œåˆ™è¦ç”¨@dynamicã€‚ç”šè‡³æˆ‘ä»¬å¯ä»¥æŠŠpbç±»çš„æˆå‘˜å˜é‡åŽ»æŽ‰ã€‚åšæ³•å¦‚ä¸‹ï¼š åŸºç±»å¢žåŠ idç±»åž‹æ•°ç»„ivarValuesï¼ˆå‚è€ƒäº†objc_classç»“æž„ä½“ivarsåšæ³•ï¼‰ï¼Œç”¨äºŽå­˜æ”¾å¯¹è±¡çš„å±žæ€§å€¼ã€‚å¯¹è±¡å±žæ€§å€¼ç»Ÿä¸€ç”¨ocå¯¹è±¡è¡¨ç¤ºï¼Œå¦‚æžœç±»åž‹æ˜¯åŸºç¡€ç±»åž‹ï¼ˆprimitiveï¼Œå¦‚intã€floatç­‰ï¼‰ï¼Œåˆ™ç”¨NSValueå­˜ é‡è½½methodSignatureForSelector:æ–¹æ³•ï¼Œè¿”å›žå±žæ€§getterã€setterçš„æ–¹æ³•ç­¾å é‡è½½forwardInvocation:æ–¹æ³•ï¼Œåˆ†æžinvocation.selectorç±»åž‹ã€‚å¦‚æžœæ˜¯getterï¼Œä»ŽivarValuesèŽ·å–å±žæ€§å€¼å¹¶è®¾ç½®ä¸ºinvocationçš„returnValueï¼›å¦‚æžœæ˜¯setterï¼Œä»Žinvocationç¬¬äºŒä¸ªargumentèŽ·å–å±žæ€§å€¼ï¼Œå¹¶å­˜æ”¾åˆ°ivarValuesé‡Œ é‡è½½setValue:forUndefinedKey:ã€valueForUndefinedKey:ï¼Œé˜²æ­¢é€šè¿‡KVOè®¿é—®å±žæ€§Crash åšä¸‹æ€§èƒ½ä¼˜åŒ–ï¼Œå¦‚pbç±»åœ¨initializeåšä¸€æ¬¡åˆå§‹åŒ–ï¼Œç¼“å­˜å±žæ€§åçš„hashå€¼ï¼Œå±žæ€§çš„getterã€setteræ–¹æ³•çš„objcTypeç­‰ï¼›å±žæ€§å€¼ä¸ç”¨std::mapï¼ˆå±žæ€§å-&gt;å±žæ€§å€¼ï¼‰ï¼Œè€Œæ˜¯æ”¹ç”¨æ•°ç»„ï¼›MRCä»£æ›¿ARCï¼ˆæœ‰äº›æ—¶å€™ARCè‡ªåŠ¨æ·»åŠ çš„retain/releaseæŒºå½±å“æ€§èƒ½çš„ï¼‰ï¼›ç­‰ç­‰ 1234567891011121314151617181920212223class PBClassInfo &#123;public: PBClassInfo(Class cls, PBFieldInfo* fieldInfo); ~PBClassInfo();public: unsigned int _numberOfProperty; std::string* _propertyNames; size_t* _propertyNameHashes; std::string* _getterObjCTypes; std::string* _setterObjCTypes; PBFieldInfo* _fieldInfos;&#125;;@interface WXPBGeneratedMessage () &#123; uint32_t _has_bits_[3]; // æœ€å¤š96ä¸ªå±žæ€§ï¼Œè¡¨ç¤ºå±žæ€§æ˜¯å¦æœ‰èµ‹å€¼ int32_t _serializedSize; PBClassInfo* _classInfo; id* _ivarValues;&#125;- (NSMethodSignature*) methodSignatureForSelector:(SEL) aSelector;- (void) forwardInvocation:(NSInvocation*) anInvocation;- (void) setValue:(id) value forUndefinedKey:(NSString*) key;- valueForUndefinedKey:(NSString*) key;@end æŠŠå†—ä½™ä»£ç åŽ»æŽ‰åŽï¼Œæ•´ä¸ªç±»æ¸…çˆ½å¤šäº†ã€‚åƒGameResourceReqåªæœ‰3ä¸ªå±žæ€§çš„protoç»“æž„ä½“ï¼Œç±»æ–¹æ³•ä»£ç è¡Œæ•°ç”±ä»¥å‰çš„127è¡Œå˜æˆçŽ°åœ¨çš„8è¡Œã€‚protobufç²¾ç®€æ”¹é€ ä¸­ï¼Œç²¾ç®€ç±»æ–¹æ³•å‡å°‘äº†å¯æ‰§è¡Œæ–‡ä»¶8.8Mï¼ŒåŽ»æŽ‰ç±»æˆå‘˜å˜é‡å’Œç±»å±žæ€§æ”¹ç”¨@dynamicå‡å°‘äº†2.5Mã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041message GameResourceReq &#123; required BaseRequest BaseRequest = 1; required int32 PropsCount = 2; repeated uint32 PropsIdList = 3[packed=true];&#125;// è€å®žçŽ°@implementation GameResourceReq@synthesize hasBaseRequest;@synthesize baseRequest;@synthesize hasPropsCount;@synthesize propsCount;@synthesize mutablePropsIdListList;@dynamic propsIdList;- (id) init &#123;...&#125;- (void) SetBaseRequest:(BaseRequest*) value &#123;...&#125;- (void) SetPropsCount:(int32_t) value &#123;...&#125;- (NSArray*) propsIdListList &#123;...&#125;- (NSMutableArray*)propsIdList &#123;...&#125;- (void)setPropsIdList:(NSMutableArray*) values &#123;...&#125;- (BOOL) isInitialized &#123;...&#125;- (void) writeToCodedOutputStream:(PBCodedOutputStream*) output &#123;...&#125;- (int32_t) serializedSize &#123;...&#125;+ (GameResourceReq*) parseFromData:(NSData*) data &#123;...&#125;- (GameResourceReq*) mergeFromCodedInputStream:(PBCodedInputStream*) input &#123;...&#125;- (void) addPropsIdList:(uint32_t) value &#123;...&#125;- (void) addPropsIdListFromArray:(NSArray*) values &#123;...&#125;@end// æ–°å®žçŽ°@implementation GameResourceReqPB_PROPERTY_TYPE baseRequest;PB_PROPERTY_TYPE opType;PB_PROPERTY_TYPE brandUserName;+ (void) initialize &#123; static PBFieldInfo _fieldInfoArray[] = &#123; &#123;1, FieldLabelRequired, FieldTypeMessage, NO, 0, ._messageClassName = STRING_FROM(BaseRequest)&#125;, &#123;2, FieldLabelRequired, FieldTypeInt32, NO, 0, 0&#125;, &#123;3, FieldLabelRepeated, FieldTypeUint32, NO, 0, 0&#125;, &#125;; initializePBClassInfo(self, _fieldInfoArray);&#125;@end ç¼–è¯‘é€‰é¡¹ä¼˜åŒ– Strip Link Productè®¾æˆYESï¼ŒWeChatWatchå¯æ‰§è¡Œæ–‡ä»¶å‡å°‘0.3M Make Strings Read-Onlyè®¾ä¸ºYESï¼Œä¹Ÿè®¸æ˜¯å› ä¸ºå¾®ä¿¡å·¥ç¨‹ä»Žä½Žç‰ˆæœ¬Xcodeå‡çº§è¿‡æ¥ï¼Œè¿™ä¸ªç¼–è¯‘é€‰é¡¹ä¹‹å‰ä¸€ç›´ä¸ºNOï¼Œè®¾ä¸ºYESåŽå¯æ‰§è¡Œæ–‡ä»¶å‡å°‘äº†3M åŽ»æŽ‰å¼‚å¸¸æ”¯æŒï¼ŒEnable C++ Exceptionså’ŒEnable Objective-C Exceptionsè®¾ä¸ºNOï¼Œå¹¶ä¸”Other C Flagsæ·»åŠ -fno-exceptionsï¼Œå¯æ‰§è¡Œæ–‡ä»¶å‡å°‘äº†27Mï¼Œå…¶ä¸­gcc_except_tabæ®µå‡å°‘äº†17.3Mï¼Œtextå‡å°‘äº†9.7Mï¼Œæ•ˆæžœç‰¹åˆ«æ˜Žæ˜¾ã€‚å¯ä»¥å¯¹æŸäº›æ–‡ä»¶å•ç‹¬æ”¯æŒå¼‚å¸¸ï¼Œç¼–è¯‘é€‰é¡¹åŠ ä¸Š-fexceptionså³å¯ã€‚ä½†æœ‰ä¸ªé—®é¢˜ï¼Œå‡å¦‚ABCä¸‰ä¸ªæ–‡ä»¶ï¼ŒACæ–‡ä»¶æ”¯æŒäº†å¼‚å¸¸ï¼ŒBä¸æ”¯æŒï¼Œå¦‚æžœCæŠ›äº†å¼‚å¸¸ï¼Œåœ¨æ¨¡æ‹Ÿå™¨ä¸‹Aè¿˜æ˜¯èƒ½æ•èŽ·å¼‚å¸¸ä¸è‡³äºŽCrashï¼Œä½†çœŸæœºä¸‹æ•èŽ·ä¸äº†ï¼ˆæœ‰çŸ¥é“åŽŸå› å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€ï¼šï¼‰ã€‚åŽ»æŽ‰å¼‚å¸¸åŽï¼ŒAppstoreåŽç»­å‡ ä¸ªç‰ˆæœ¬CrashçŽ‡æ²¡æœ‰æ˜Žæ˜¾ä¸Šå‡ã€‚ä¸ªäººè®¤ä¸ºå…³é”®è·¯å¾„æ”¯æŒå¼‚å¸¸å¤„ç†å°±å¥½ï¼Œåƒå¯åŠ¨æ—¶NSCoderè¯»å–settingé…ç½®æ–‡ä»¶å¾—è¦æ”¯æŒæ•èŽ·å¼‚å¸¸ï¼Œç­‰ç­‰ å…¶ä»–å¯æŽ¢ç´¢é€”å¾„ iOS8 Embed-Frameworkï¼šæå–WeChatWatchã€ShareExtentionå’Œå¾®ä¿¡ä¸»å·¥ç¨‹çš„å…¬å…±ä»£ç ï¼Œå¯æ‰§è¡Œæ–‡ä»¶å¯ä»¥å‡å°‘5M+ï¼Œä¸è¿‡è¿™ç‰¹æ€§éœ€è¦æœ€ä½Žç‰ˆæœ¬iOS8æ‰èƒ½ç”¨ï¼ŒiOS7è®¾å¤‡å¯åŠ¨ä¼šcrash iOS9 App Thinningï¼šä¸¥æ ¼æ¥è¯´App Thinningä¸ä¼šè®©å®‰è£…åŒ…å˜å°ï¼Œä½†ç”¨æˆ·å®‰è£…åº”ç”¨æ—¶ï¼Œè‹¹æžœä¼šæ ¹æ®ç”¨æˆ·çš„æœºåž‹è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„èµ„æºå’Œå¯¹åº”CPUæž¶æž„çš„äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·æœ¬åœ°å¯æ‰§è¡Œæ–‡ä»¶ä¸ä¼šåŒæ—¶å­˜åœ¨armv7å’Œarm64ï¼‰ï¼Œå®‰è£…åŽç©ºé—´å ç”¨æ›´å° å»ºç«‹ç›‘æŽ§ é€šè¿‡å¯¹LinkMapæ–‡ä»¶çš„åˆ†æžï¼Œå¯ä»¥å¾—çŸ¥æ¯ä¸ªæ¨¡å—å¯æ‰§è¡Œæ–‡ä»¶å ç”¨å¤§å°ã€‚å†å¯¹æ¯”ä¸¤ä¸ªç‰ˆæœ¬ï¼Œå°±çŸ¥é“ä¸šåŠ¡æ¨¡å—çš„å¢žé‡å¤§å°ã€‚å‚è€ƒå¦‚ä¸‹ï¼š]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çƒ­ä¿®å¤æŠ€æœ¯åœ¨ç§»åŠ¨ç«¯çš„åº”ç”¨]]></title>
    <url>%2F2016%2F01%2F12%2F2016%2F%E7%83%AD%E4%BF%AE%E5%A4%8D%E6%8A%80%E6%9C%AF%E5%9C%A8%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%9A%84%E5%BA%94%E7%94%A8%2F</url>
    <content type="text"><![CDATA[çƒ­ä¿®å¤æŠ€æœ¯æ¦‚è¿°ç§»åŠ¨åº”ç”¨çš„éƒ¨ç½²æ–¹å¼ï¼Œå³å‘å¸ƒ-&gt;ä¸‹è½½-&gt;å®‰è£…-&gt;è¿è¡Œï¼Œå†³å®šäº†ä»–ä¸å…·å¤‡Webçš„é«˜çµæ´»æ€§ï¼Œå°¤å…¶æ–°ç‰ˆæœ¬ä¸Šçº¿åŽå‘çŽ°æœ‰ä¸ªä¸¥é‡çš„bugï¼Œå¯èƒ½ä¼šå¯¼è‡´crashçŽ‡æ¿€å¢žï¼Œå¯èƒ½ä¼šä½¿ç½‘ç»œè¯·æ±‚æ— æ³•å‘å‡ºï¼Œè¿™æ—¶èƒ½åšçš„åªæ˜¯èµ¶ç´§ä¿®å¤bugç„¶åŽæäº¤ç­‰å¾…æ¼«é•¿çš„AppStoreå®¡æ ¸ï¼Œå†ç›¼æœ›ç”¨æˆ·å¿«ç‚¹å‡çº§ï¼Œä»˜å‡ºå·¨å¤§çš„äººåŠ›å’Œæ—¶é—´æˆæœ¬ï¼Œæ‰èƒ½å®Œæˆæ­¤æ¬¡bugçš„ä¿®å¤ã€‚çƒ­ä¿®å¤æŠ€æœ¯(HotfixPatch)ï¼Œæ˜¯ä¸€ç§åŸºäºŽåŽŸç”Ÿåº”ç”¨å¼€å‘çš„çµæ´»æ€§è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥åœ¨ä¸æ”¹å˜å¼€å‘äººå‘˜æŠ€èƒ½è¦æ±‚å’Œå·²æœ‰çš„å¼€å‘æ–¹å¼çš„å‰æä¸‹ï¼Œç»™äºŽåº”ç”¨åœ¨å‘å¸ƒåŽæ”¹å˜ç¨‹åºè¡Œä¸ºçš„èƒ½åŠ›ã€‚çƒ­è¡¥ä¸çš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä¸ä¼šä½¿è®¾å¤‡å½“å‰æ­£åœ¨è¿è¡Œçš„ä¸šåŠ¡ä¸­æ–­ï¼Œå³åœ¨ä¸é‡å¯è®¾å¤‡çš„æƒ…å†µä¸‹å¯ä»¥å¯¹è®¾å¤‡å½“å‰è½¯ä»¶ç‰ˆæœ¬çš„ç¼ºé™·è¿›è¡Œä¿®å¤ã€‚ä¸€èˆ¬ç”¨äºŽæŸä¸ªå‡½æ•°å¯¼è‡´çš„bugï¼Œå¦‚æžœæ˜¯æŸä¸ªç±»å¯¼è‡´çš„bugï¼Œæˆ–è€…å¢žå‡ä¸šåŠ¡æ¨¡å—ï¼Œä¸å»ºè®®ä½¿ç”¨çƒ­ä¿®å¤ï¼Œè€Œä½¿ç”¨Reactive Nativeã€‚ å¸‚åœºä¸­çš„çƒ­ä¿®å¤æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯” WaxPatch(é˜¿é‡Œåœ¨ç»´æŠ¤) JSPatch(ä¸ªäººé¡¹ç›®) ä¸¤è€…ç›¸æ¯”ï¼ŒJSPatchçš„ä¼˜åŠ¿ï¼š 1.JSè¯­è¨€: JSæ¯”Luaåœ¨åº”ç”¨å¼€å‘é¢†åŸŸæœ‰æ›´å¹¿æ³›çš„åº”ç”¨ï¼Œç›®å‰å‰ç«¯å¼€å‘å’Œç»ˆç«¯å¼€å‘æœ‰èžåˆçš„è¶‹åŠ¿ï¼Œä½œä¸ºæ‰©å±•çš„è„šæœ¬è¯­è¨€ï¼ŒJSæ˜¯ä¸äºŒä¹‹é€‰ã€‚ 2.ç¬¦åˆAppleè§„åˆ™: JSPatchæ›´ç¬¦åˆAppleçš„è§„åˆ™ã€‚iOS Developer Program License Agreementé‡Œ3.3.2æåˆ°ä¸å¯åŠ¨æ€ä¸‹å‘å¯æ‰§è¡Œä»£ç ï¼Œä½†é€šè¿‡è‹¹æžœJavaScriptCore.frameworkæˆ–WebKitæ‰§è¡Œçš„ä»£ç é™¤å¤–ï¼ŒJSæ­£æ˜¯é€šè¿‡JavaScriptCore.frameworkæ‰§è¡Œçš„ã€‚ 3.å°å·§: ä½¿ç”¨ç³»ç»Ÿå†…ç½®çš„JavaScriptCore.frameworkï¼Œæ— éœ€å†…åµŒè„šæœ¬å¼•æ“Žï¼Œä½“ç§¯å°å·§ã€‚ 4.æ”¯æŒblock: waxåœ¨å‡ å¹´å‰å°±åœæ­¢äº†å¼€å‘å’Œç»´æŠ¤ï¼Œä¸æ”¯æŒObjective-Cé‡Œblockè·ŸLuaç¨‹åºçš„äº’ä¼ ï¼Œè™½ç„¶ä¸€äº›ç¬¬ä¸‰æ–¹å·²ç»å®žçŽ°blockï¼Œä½†ä½¿ç”¨æ—¶å‚æ•°ä¸Šä¹Ÿæœ‰æ¯”è¾ƒå¤šçš„é™åˆ¶ã€‚ JSPatchçš„åŠ£åŠ¿ï¼š ç›¸å¯¹äºŽWaxPatchï¼ŒJSPatchåŠ£åŠ¿åœ¨äºŽä¸æ”¯æŒiOS6ï¼Œå› ä¸ºéœ€è¦å¼•å…¥JavaScriptCore.frameworkã€‚å¦å¤–ç›®å‰å†…å­˜çš„ä½¿ç”¨ä¸Šä¼šé«˜äºŽwaxï¼ŒæŒç»­æ”¹è¿›ä¸­ã€‚ é—®é¢˜ä¸Žé£Žé™©JSPatchè®©è„šæœ¬è¯­è¨€èŽ·å¾—è°ƒç”¨æ‰€æœ‰åŽŸç”ŸOCæ–¹æ³•çš„èƒ½åŠ›ï¼Œä¸åƒwebå‰ç«¯æŠŠèƒ½åŠ›å±€é™åœ¨æµè§ˆå™¨ï¼Œä½¿ç”¨ä¸Šä¼šæœ‰ä¸€äº›å®‰å…¨é£Žé™©ï¼š1.è‹¥åœ¨ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­ä¸‹å‘æ˜Žæ–‡JSï¼Œå¯èƒ½ä¼šè¢«ä¸­é—´äººç¯¡æ”¹JSè„šæœ¬ï¼Œæ‰§è¡Œä»»æ„æ–¹æ³•ï¼Œç›—å–APPé‡Œçš„ç›¸å…³ä¿¡æ¯ã€‚å¯ä»¥å¯¹ä¼ è¾“è¿‡ç¨‹è¿›è¡ŒåŠ å¯†ï¼Œæˆ–ç”¨ç›´æŽ¥ä½¿ç”¨httpsè§£å†³ã€‚2.è‹¥ä¸‹è½½å®ŒåŽçš„JSä¿å­˜åœ¨æœ¬åœ°æ²¡æœ‰åŠ å¯†ï¼Œåœ¨æœªè¶Šç‹±çš„æœºå™¨ä¸Šç”¨æˆ·ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ›¿æ¢æˆ–ç¯¡æ”¹è„šæœ¬ã€‚è¿™ç‚¹å±å®³æ²¡æœ‰ç¬¬ä¸€ç‚¹å¤§ï¼Œå› ä¸ºæ“ä½œè€…æ˜¯æ‰‹æœºæ‹¥æœ‰è€…ï¼Œä¸å­˜åœ¨APPå†…ç›¸å…³ä¿¡æ¯è¢«ç›—ç”¨çš„é£Žé™©ã€‚è‹¥è¦é¿å…ç”¨æˆ·ä¿®æ”¹ä»£ç å½±å“APPè¿è¡Œï¼Œå¯ä»¥é€‰æ‹©ç®€å•çš„åŠ å¯†å­˜å‚¨ã€‚3.ç”±äºŽä¸»è¦çš„åº”ç”¨æ–¹å¼æ˜¯å¯¹å‡½æ•°çš„æ›¿æ¢ï¼Œæ‰€ä»¥å¦‚æžœæŸä¸ªå‡½æ•°åŒ…å«å‡ åƒè¡Œçš„ä»£ç ï¼Œä¿®å¤çš„æ—¶å€™å·¥ä½œé‡ä¼šç›¸å¯¹è¾ƒå¤§ JSPatchç®€ä»‹ ä½œè€…bang(è…¾è®¯)ä¸ªäººåšå®¢ï¼Œgithub é¡¹ç›®åˆ›å»ºäºŽ2015-5 JSPatchæŽ¥å…¥å¹³å° æ·˜å®ï¼Œç¾Žå›¢ç­‰éƒ½æœ‰ä½¿ç”¨ï¼ŒSDKåŽå°æŽ¥å…¥ç»Ÿè®¡æ•°æ®è¶…è¿‡1200ä¸ªåº”ç”¨ JSPatchäº¤æµç¾¤(207283178) éœ€è¦çš„åŸºç¡€çŸ¥è¯†-JavaScriptCoreçš„ä½¿ç”¨-runtime JSPatchåŽŸç† è¿è¡Œæ—¶ä¿®å¤ä¸ç”¨ç­‰å¾…Appé‡æ–°å¯åŠ¨ï¼ŒiOS åˆ©ç”¨è¿è¡Œæ—¶ç‰¹æ€§ä¿®æ”¹å‡½æ•°çš„IMPï¼Œä»Žè€Œè¾¾åˆ°ä¿®å¤ç›®çš„ã€‚ æ‰€è°“çš„è„šæœ¬æ‰§è¡Œå…¶å®žåªæ˜¯å¢žåŠ äº†å†…å­˜ä¸­çš„ç±»ä»¥åŠæ–°å¢žçš„IMPï¼Œä»¥åŠå¯¹OCä¸­çš„IMPçš„ç»„åˆã€‚ jspatchè„šæœ¬åªæ˜¯ä¸€å¥—è§„åˆ™ï¼Œjspatchå†…éƒ¨å¯¹å…¶è¿›è¡Œäº†å­—ç¬¦ä¸²æˆªå–çš„è½¬æ¢ï¼Œä¸ºç±»åï¼Œæ–¹æ³•åï¼Œä»¥åŠå‚æ•°ï¼Œç„¶åŽåˆ©ç”¨è¿è¡Œæ—¶çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚ evaluateScriptæ–¹æ³•åªæ˜¯è®©è„šæœ¬åŽ»è°ƒç”¨jsæ–¹æ³•åŸŸä¸­çš„æ–¹æ³•ï¼Œç„¶åŽiOSä¼šåŽ»è°ƒç”¨å¯¹åº”IMPï¼Œæ‰€ä»¥JSPatchæ–‡ä»¶çš„ä½œç”¨æ˜¯å¢žåŠ jsæ–¹æ³•åŸŸä¸­çš„æ–¹æ³•ã€‚ èƒ½åšåˆ°é€šè¿‡JSè°ƒç”¨å’Œæ”¹å†™OCæ–¹æ³•æœ€æ ¹æœ¬çš„åŽŸå› æ˜¯ Objective-C æ˜¯åŠ¨æ€è¯­è¨€ï¼ŒOCä¸Šæ‰€æœ‰æ–¹æ³•çš„è°ƒç”¨/ç±»çš„ç”Ÿæˆéƒ½é€šè¿‡ Objective-C Runtime åœ¨è¿è¡Œæ—¶è¿›è¡Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»å/æ–¹æ³•ååå°„å¾—åˆ°ç›¸åº”çš„ç±»å’Œæ–¹æ³•ï¼Œå…·ä½“æ¥è¯´èƒ½åšçš„æœ‰ï¼š é€šè¿‡ç±»åå’Œæ–¹æ³•åå¾—åˆ°å…·ä½“çš„ç±»ä»¥åŠæ–¹æ³• æ›¿æ¢æŸä¸ªç±»çš„æ–¹æ³•çš„å®žçŽ° æ³¨å†Œä¸€ä¸ªæ–°çš„ç±»å¹¶ä¸”ä¸ºè¯¥ç±»æ·»åŠ æ–¹æ³•å®žçŽ° JSPatchå…·ä½“å®žçŽ° æœ€å¤–å±‚éœ€è¦çš„æ˜¯jsçš„è°ƒç”¨èƒ½åŠ›ï¼Œæ‰€ä»¥éœ€è¦å®šä¹‰jså‡½æ•°ï¼Œæä¾›è„šæœ¬è°ƒç”¨çš„æŽ¥å£ åˆå› ä¸ºæˆ‘ä»¬éœ€è¦ç”¨åˆ°è¿è¡Œæ—¶çš„å‡½æ•°ï¼Œæ‰€ä»¥éœ€è¦åˆ©ç”¨jsæ¥è°ƒç”¨OCä¸­çš„æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”Ÿæˆä¸€ç³»åˆ—çš„IMP require JSæŽ¥å£(.alloc().init())/(NSInvocation)invocationå¯¹æ¶ˆæ¯çš„ç›´æŽ¥è°ƒç”¨ æ¶ˆæ¯ä¼ é€’(JSContext) å¯¹è±¡æŒæœ‰/è½¬æ¢ ç±»åž‹è½¬æ¢ æ–¹æ³•æ›¿æ¢ æ–°å¢žæ–¹æ³• property å‚è€ƒ:bang-JSPatchåŽŸç†è¯¦è§£ JSPatchä½¿ç”¨æµç¨‹ å¼€å‘çƒ­ä¿®å¤è„šæœ¬ åŽ‹ç¼©ä¸ºzip(èŠ‚çœç©ºé—´) ä¸Šä¼ è„šæœ¬åˆ°æœåŠ¡å™¨ appæ¯æ¬¡å¯åŠ¨åˆ¤æ–­æœ¬åœ°è„šæœ¬æ˜¯å¦è¶…è¿‡ä¸€å¤©ï¼Œå¦‚æžœè¶…è¿‡ä¸€å¤©å‘æœåŠ¡å™¨è¯·æ±‚æ–°çš„ï¼Œå¦åˆ™æ£€æŸ¥è¯¥è„šæœ¬æ˜¯å¦åˆæ³•å¦‚æžœä¸åˆæ³•å°±åˆ é™¤ èŽ·å–åˆ°è„šæœ¬æ–‡ä»¶åŽï¼Œè°ƒç”¨JSPatchå¼•æ“Žï¼Œæ‰§è¡Œè„šæœ¬æ–‡ä»¶è¿›è¡Œä¿®å¤ è¡¥å……:ç»ˆç«¯èŽ·å–è„šæœ¬æ–‡ä»¶æ˜¯éœ€è¦ä¸€ä¸ªç­–ç•¥çš„ï¼Œæœ€ç®€å•çš„å°±æ˜¯ï¼Œç»ˆç«¯æ ¹æ®ç‰ˆæœ¬å·ï¼ŒèŽ·å–ä¸Žè¯¥ç‰ˆæœ¬å·æœ‰å…³çš„è„šæœ¬æ–‡ä»¶ï¼šå¦‚ï¼šæœ¬æ¬¡ç»ˆç«¯å‘å¸ƒçš„ç‰ˆæœ¬æ˜¯ï¼š1.0.3ï¼Œé‚£åœ¨ä¸Šä¼ è„šæœ¬æ–‡ä»¶æ—¶ï¼Œå°±å¯ä»¥å°†è„šæœ¬æ–‡ä»¶çš„åç§°å®šä¹‰ä¸ºï¼špatch1_0_3.jsè¿™æ ·ç»ˆç«¯å°±å¯ä»¥æ ¹æ®ç‰ˆæœ¬å·ï¼ŒåŠ¨æ€ç»„ç»‡è„šæœ¬çš„ä¸‹è½½åœ°å€ï¼Œè€Œä¸”ä¸€ä¸ªç‰ˆæœ¬å¯¹åº”ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œç®€å•æ˜Žäº†ï½žï½ž JSPatchçš„å¼•å…¥ å¼•å…¥SDK åŽŸç‰ˆSDK é…·ç‹—SDK è‡ªå®šä¹‰ï¼šæºæ–‡ä»¶+ç‰ˆæœ¬ç®¡ç†è§„åˆ™ é¡¹ç›®å¯åŠ¨å‡½æ•°ä¸­æ·»åŠ JSPatchå¼•æ“Žå¯åŠ¨å‘½ä»¤ è„šæœ¬åˆ†å‘å¹³å°æŽ¥å…¥ å®˜æ–¹å¹³å°(http://jspatch.com/Docs/price) é…·ç‹—åŽå°ï¼šç§˜é’¥ç”Ÿæˆï¼Œurlä¼ å…¥ JSPatchä¸­çš„jsè¯­æ³•1.https://github.com/bang590/JSPatch/wiki/JSPatch-åŸºç¡€ç”¨æ³•#å¸¸é‡æžšä¸¾ 2.è¯­æ³•è½¬è¯‘å·¥å…· 3.ä¸€äº›è¸©è¿‡çš„å‘123456789tmpLitterImg.length ä¸èƒ½å†™æˆ tmpLitterImg.length()infoModel.kugouId() ä¸èƒ½å†™æˆ infoModel.kugouIdself.headerView().sd__setImageWithURL//å•ä¸‹åˆ’çº¿è¦ç”¨åŒä¸‹åˆ’çº¿self.locationIconView().right()//left/rightåŽè¦åŠ ()UIScreen.mainScreen().bounds().width//CGrectè¿™ç§ç»“æž„å–å€¼ä¸ç”¨åŠ ()//å®è¦ç›´æŽ¥ç”¨å…·ä½“çš„å€¼//æžšä¸¾è¦ç”¨å…·ä½“çš„æ•°å­—//intç±»åž‹è½¬stringç±»åž‹è¦ç”¨ä¸‹é¢çš„æ–¹æ³•self.viewerNumLbl().setText(&apos;&apos; + info.viewerNum()); é—®é¢˜ swiftå› ä¸ºæ²¡æœ‰OCçš„åŠ¨æ€æ€§ï¼Œæ‰€ä»¥æš‚æ—¶æ²¡æœ‰æˆç†Ÿçš„åªæ˜¯é’ˆå¯¹swiftçš„çƒ­ä¿®å¤æŠ€æœ¯æ–¹æ¡ˆ å½“å‘å¸ƒäº†æ–°ç‰ˆï¼ŒåŽŸæ¥ä¸‹å‘çš„è„šæœ¬æ€Žä¹ˆåŠžï¼Ÿ æ ¹æ®ç‰ˆæœ¬å·è¿›è¡Œjsæ–‡ä»¶çš„è¯»å–ï¼Œæ–°ç‰ˆæœ¬æƒ…å†µä¸‹æ—§ç‰ˆæœ¬æ–‡ä»¶ä¸ä¼šå†è¢«æ‰§è¡Œ å…³äºŽå®žæ—¶æŽ¨é€çš„å®žçŽ°ï¼Ÿ çŽ°åœ¨çš„æŠ€æœ¯æ–¹æ¡ˆæ˜¯ä½¿ç”¨é•¿è¿žæŽ¥è¿›è¡ŒæŽ¨é€ï¼Œå•å°æœåŠ¡å™¨æš‚æ—¶èƒ½å¤Ÿèƒ½å¤Ÿæ”¯æ’‘200ä¸‡çš„é“¾æŽ¥é‡ æœåŠ¡å™¨éœ€è¦åšçš„ ä¸Šä¼ åŠŸèƒ½ MD5å”¯ä¸€æ€§éªŒè¯ CDNç¼“å­˜ï¼ŒåŠ é€Ÿ(å¾…å®š) å¯¹æ–‡ä»¶è¿›è¡ŒRSAåŠ å¯†åŒæ—¶ç”ŸæˆMD5ç­¾å httpæŽ¥å£1 å‚æ•°ï¼šappversion è¿”å›ž patchId appversion fileHash downloadUrl httpæŽ¥å£2è¿”å›žåŠ å¯†åŽçš„æ–‡ä»¶ - åœ¨æœ€å¼€å§‹å¢žåŠ å‚æ•°ï¼Œé…ç½®æ˜¯å¦åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œä¸»è¦è§£å†³å‡å¦‚é¦–é¡µå´©æºƒï¼Œå¯ä»¥å µå¡žã€‚ - å”¤é†’çš„æ—¶å€™è¿›è¡Œä¸‹è½½ï¼Œ24å°æ—¶æ‰§è¡Œä¸€æ¬¡ Demo javascriptCoreçš„ä½¿ç”¨ JSPatchDemo åœ¨ç¹æ˜Ÿä¸­çš„ä½¿ç”¨ å¯åŠ¨å´©æºƒä¸¤æ¬¡åˆ¤æ–­ æœ¬åœ°å›žæ»š jsæ–‡ä»¶çš„ç‰ˆæœ¬å·ï¼Œå¦‚æžœè¿™ä¸ªç‰ˆæœ¬å·æœ¬åœ°å·²ç»æœ‰äº†ï¼Œé‚£å°±ä¸å†ä¸‹å‘äº† æœ¬åœ°ä¿å­˜çš„ä¸Šä¸€æ¬¡çš„è¿™ä¸ªæ–‡ä»¶æ˜¯åŠ å¯†å‘¢è¿˜æ˜¯æ˜Žæ–‡å‘¢ï¼Ÿ MD5ä¸¤æ¬¡åŠ å¯†]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[categoryå†…éƒ¨å®žçŽ°åŽŸç†]]></title>
    <url>%2F2015%2F12%2F15%2F2015%2Fcategory%E5%86%85%E9%83%A8%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%2F</url>
    <content type="text"><![CDATA[è§è¿‡çš„æ¯”è¾ƒå¥½çš„ä¸€ç¯‡è®²è¿°categoryå®žçŽ°çš„åšå®¢ï¼Œåœ¨æ­¤åšä¸ªè®°å½• è½¬è½½è‡ªï¼šhttp://tech.meituan.com/DiveIntoCategory.html æ— è®ºä¸€ä¸ªç±»è®¾è®¡çš„å¤šä¹ˆå®Œç¾Žï¼Œåœ¨æœªæ¥çš„éœ€æ±‚æ¼”è¿›ä¸­ï¼Œéƒ½æœ‰å¯èƒ½ä¼šç¢°åˆ°ä¸€äº›æ— æ³•é¢„æµ‹çš„æƒ…å†µã€‚é‚£æ€Žä¹ˆæ‰©å±•å·²æœ‰çš„ç±»å‘¢ï¼Ÿä¸€èˆ¬è€Œè¨€ï¼Œç»§æ‰¿å’Œç»„åˆæ˜¯ä¸é”™çš„é€‰æ‹©ã€‚ä½†æ˜¯åœ¨Objective-C 2.0ä¸­ï¼Œåˆæä¾›äº†categoryè¿™ä¸ªè¯­è¨€ç‰¹æ€§ï¼Œå¯ä»¥åŠ¨æ€åœ°ä¸ºå·²æœ‰ç±»æ·»åŠ æ–°è¡Œä¸ºã€‚å¦‚ä»Šcategoryå·²ç»éå¸ƒäºŽObjective-Cä»£ç çš„å„ä¸ªè§’è½ï¼Œä»ŽAppleå®˜æ–¹çš„frameworkåˆ°å„ä¸ªå¼€æºæ¡†æž¶ï¼Œä»ŽåŠŸèƒ½ç¹å¤çš„å¤§åž‹APPåˆ°ç®€å•çš„åº”ç”¨ï¼Œcatagoryæ— å¤„ä¸åœ¨ã€‚æœ¬æ–‡å¯¹categoryåšäº†æ¯”è¾ƒå…¨é¢çš„æ•´ç†ï¼Œå¸Œæœ›å¯¹è¯»è€…æœ‰æ‰€è£¨ç›Šã€‚ ç®€ä»‹ æœ¬æ–‡ä½œè€…æ¥è‡ªç¾Žå›¢é…’åº—æ—…æ¸¸äº‹ä¸šç¾¤iOSç ”å‘ç»„ã€‚æˆ‘ä»¬è‡´åŠ›äºŽåˆ›é€ ä»·å€¼ã€æå‡æ•ˆçŽ‡ã€è¿½æ±‚å“è¶Šã€‚æ¬¢è¿Žå¤§å®¶åŠ å…¥æˆ‘ä»¬ï¼ˆç®€åŽ†è¯·å‘é€åˆ°é‚®ç®±majia03@meituan.comï¼‰ã€‚æœ¬æ–‡ç³»å­¦ä¹ Objective-Cçš„runtimeæºç æ—¶æ•´ç†æ‰€æˆï¼Œä¸»è¦å‰–æžäº†categoryåœ¨runtimeå±‚çš„å®žçŽ°åŽŸç†ä»¥åŠå’Œcategoryç›¸å…³çš„æ–¹æ–¹é¢é¢ï¼Œå†…å®¹åŒ…æ‹¬ï¼š åˆå…¥å®åœ°-categoryç®€ä»‹ è¿žç±»æ¯”äº‹-categoryå’Œextension æŒ‘ç¯ç»†è§ˆ-categoryçœŸé¢ç›® è¿½æœ¬æº¯æº-categoryå¦‚ä½•åŠ è½½ æ—æžæœ«å¶-categoryå’Œ+loadæ–¹æ³• è§¦ç±»æ—é€š-categoryå’Œæ–¹æ³•è¦†ç›– æ›´ä¸Šä¸€å±‚-categoryå’Œå…³è”å¯¹è±¡ 1ã€åˆå…¥å®åœ°-categoryç®€ä»‹categoryæ˜¯Objective-C 2.0ä¹‹åŽæ·»åŠ çš„è¯­è¨€ç‰¹æ€§ï¼Œcategoryçš„ä¸»è¦ä½œç”¨æ˜¯ä¸ºå·²ç»å­˜åœ¨çš„ç±»æ·»åŠ æ–¹æ³•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œappleè¿˜æŽ¨èäº†categoryçš„å¦å¤–ä¸¤ä¸ªä½¿ç”¨åœºæ™¯1 å¯ä»¥æŠŠç±»çš„å®žçŽ°åˆ†å¼€åœ¨å‡ ä¸ªä¸åŒçš„æ–‡ä»¶é‡Œé¢ã€‚è¿™æ ·åšæœ‰å‡ ä¸ªæ˜¾è€Œæ˜“è§çš„å¥½å¤„ï¼Œa)å¯ä»¥å‡å°‘å•ä¸ªæ–‡ä»¶çš„ä½“ç§¯ b)å¯ä»¥æŠŠä¸åŒçš„åŠŸèƒ½ç»„ç»‡åˆ°ä¸åŒçš„categoryé‡Œ c)å¯ä»¥ç”±å¤šä¸ªå¼€å‘è€…å…±åŒå®Œæˆä¸€ä¸ªç±» d)å¯ä»¥æŒ‰éœ€åŠ è½½æƒ³è¦çš„category ç­‰ç­‰ã€‚ å£°æ˜Žç§æœ‰æ–¹æ³• ä¸è¿‡é™¤äº†appleæŽ¨èçš„ä½¿ç”¨åœºæ™¯ï¼Œå¹¿å¤§å¼€å‘è€…è„‘æ´žå¤§å¼€ï¼Œè¿˜è¡ç”Ÿå‡ºäº†categoryçš„å…¶ä»–å‡ ä¸ªä½¿ç”¨åœºæ™¯ï¼š æ¨¡æ‹Ÿå¤šç»§æ‰¿ æŠŠframeworkçš„ç§æœ‰æ–¹æ³•å…¬å¼€ Objective-Cçš„è¿™ä¸ªè¯­è¨€ç‰¹æ€§å¯¹äºŽçº¯åŠ¨æ€è¯­è¨€æ¥è¯´å¯èƒ½ä¸ç®—ä»€ä¹ˆï¼Œæ¯”å¦‚javascriptï¼Œä½ å¯ä»¥éšæ—¶ä¸ºä¸€ä¸ªâ€œç±»â€æˆ–è€…å¯¹è±¡æ·»åŠ ä»»æ„æ–¹æ³•å’Œå®žä¾‹å˜é‡ã€‚ä½†æ˜¯å¯¹äºŽä¸æ˜¯é‚£ä¹ˆâ€œåŠ¨æ€â€çš„è¯­è¨€è€Œè¨€ï¼Œè¿™ç¡®å®žæ˜¯ä¸€ä¸ªäº†ä¸èµ·çš„ç‰¹æ€§ã€‚ 2ã€è¿žç±»æ¯”äº‹-categoryå’Œextensionextensionçœ‹èµ·æ¥å¾ˆåƒä¸€ä¸ªåŒ¿åçš„categoryï¼Œä½†æ˜¯extensionå’Œæœ‰åå­—çš„categoryå‡ ä¹Žå®Œå…¨æ˜¯ä¸¤ä¸ªä¸œè¥¿ã€‚ extensionåœ¨ç¼–è¯‘æœŸå†³è®®ï¼Œå®ƒå°±æ˜¯ç±»çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨ç¼–è¯‘æœŸå’Œå¤´æ–‡ä»¶é‡Œçš„@interfaceä»¥åŠå®žçŽ°æ–‡ä»¶é‡Œçš„@implementä¸€èµ·å½¢æˆä¸€ä¸ªå®Œæ•´çš„ç±»ï¼Œå®ƒä¼´éšç±»çš„äº§ç”Ÿè€Œäº§ç”Ÿï¼Œäº¦éšä¹‹ä¸€èµ·æ¶ˆäº¡ã€‚extensionä¸€èˆ¬ç”¨æ¥éšè—ç±»çš„ç§æœ‰ä¿¡æ¯ï¼Œä½ å¿…é¡»æœ‰ä¸€ä¸ªç±»çš„æºç æ‰èƒ½ä¸ºä¸€ä¸ªç±»æ·»åŠ extensionï¼Œæ‰€ä»¥ä½ æ— æ³•ä¸ºç³»ç»Ÿçš„ç±»æ¯”å¦‚NSStringæ·»åŠ extensionã€‚ï¼ˆè¯¦è§2ï¼‰ ä½†æ˜¯categoryåˆ™å®Œå…¨ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯åœ¨è¿è¡ŒæœŸå†³è®®çš„ã€‚å°±categoryå’Œextensionçš„åŒºåˆ«æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æŽ¨å¯¼å‡ºä¸€ä¸ªæ˜Žæ˜¾çš„äº‹å®žï¼Œextensionå¯ä»¥æ·»åŠ å®žä¾‹å˜é‡ï¼Œè€Œcategoryæ˜¯æ— æ³•æ·»åŠ å®žä¾‹å˜é‡çš„ï¼ˆå› ä¸ºåœ¨è¿è¡ŒæœŸï¼Œå¯¹è±¡çš„å†…å­˜å¸ƒå±€å·²ç»ç¡®å®šï¼Œå¦‚æžœæ·»åŠ å®žä¾‹å˜é‡å°±ä¼šç ´åç±»çš„å†…éƒ¨å¸ƒå±€ï¼Œè¿™å¯¹ç¼–è¯‘åž‹è¯­è¨€æ¥è¯´æ˜¯ç¾éš¾æ€§çš„ï¼‰ã€‚ 3ã€æŒ‘ç¯ç»†è§ˆ-categoryçœŸé¢ç›®æˆ‘ä»¬çŸ¥é“ï¼Œæ‰€æœ‰çš„OCç±»å’Œå¯¹è±¡ï¼Œåœ¨runtimeå±‚éƒ½æ˜¯ç”¨structè¡¨ç¤ºçš„ï¼Œcategoryä¹Ÿä¸ä¾‹å¤–ï¼Œåœ¨runtimeå±‚ï¼Œcategoryç”¨ç»“æž„ä½“category_tï¼ˆåœ¨objc-runtime-new.hä¸­å¯ä»¥æ‰¾åˆ°æ­¤å®šä¹‰ï¼‰ï¼Œå®ƒåŒ…å«äº†1)ã€ç±»çš„åå­—ï¼ˆnameï¼‰2)ã€ç±»ï¼ˆclsï¼‰3)ã€categoryä¸­æ‰€æœ‰ç»™ç±»æ·»åŠ çš„å®žä¾‹æ–¹æ³•çš„åˆ—è¡¨ï¼ˆinstanceMethodsï¼‰4)ã€categoryä¸­æ‰€æœ‰æ·»åŠ çš„ç±»æ–¹æ³•çš„åˆ—è¡¨ï¼ˆclassMethodsï¼‰5)ã€categoryå®žçŽ°çš„æ‰€æœ‰åè®®çš„åˆ—è¡¨ï¼ˆprotocolsï¼‰6)ã€categoryä¸­æ·»åŠ çš„æ‰€æœ‰å±žæ€§ï¼ˆinstancePropertiesï¼‰ 12345678typedef struct category_t &#123; const char *name; classref_t cls; struct method_list_t *instanceMethods; struct method_list_t *classMethods; struct protocol_list_t *protocols; struct property_list_t *instanceProperties;&#125; category_t; ä»Žcategoryçš„å®šä¹‰ä¹Ÿå¯ä»¥çœ‹å‡ºcategoryçš„å¯ä¸ºï¼ˆå¯ä»¥æ·»åŠ å®žä¾‹æ–¹æ³•ï¼Œç±»æ–¹æ³•ï¼Œç”šè‡³å¯ä»¥å®žçŽ°åè®®ï¼Œæ·»åŠ å±žæ€§ï¼‰å’Œä¸å¯ä¸ºï¼ˆæ— æ³•æ·»åŠ å®žä¾‹å˜é‡ï¼‰ã€‚okï¼Œæˆ‘ä»¬å…ˆåŽ»å†™ä¸€ä¸ªcategoryçœ‹ä¸€ä¸‹categoryåˆ°åº•ä¸ºä½•ç‰©ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445MyClass.hï¼š#import &lt;Foundation/Foundation.h&gt;@interface MyClass : NSObject- (void)printName;@end@interface MyClass(MyAddition)@property(nonatomic, copy) NSString *name;- (void)printName;@endMyClass.mï¼š#import &quot;MyClass.h&quot;@implementation MyClass- (void)printName&#123; NSLog(@&quot;%@&quot;,@&quot;MyClass&quot;);&#125;@end@implementation MyClass(MyAddition)- (void)printName&#123; NSLog(@&quot;%@&quot;,@&quot;MyAddition&quot;);&#125;@end æˆ‘ä»¬ä½¿ç”¨clangçš„å‘½ä»¤åŽ»çœ‹çœ‹categoryåˆ°åº•ä¼šå˜æˆä»€ä¹ˆï¼š clang -rewrite-objc MyClass.m å¥½å§ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª3Må¤§å°ï¼Œ10wå¤šè¡Œçš„.cppæ–‡ä»¶ï¼ˆè¿™ç»å¯¹æ˜¯Appleå€¼å¾—åæ§½çš„ä¸€ç‚¹ï¼‰ï¼Œæˆ‘ä»¬å¿½ç•¥æŽ‰æ‰€æœ‰å’Œæˆ‘ä»¬æ— å…³çš„ä¸œè¥¿ï¼Œåœ¨æ–‡ä»¶çš„æœ€åŽï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†å¦‚ä¸‹ä»£ç ç‰‡æ®µï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647static struct /*_method_list_t*/ &#123;unsigned int entsize; // sizeof(struct _objc_method)unsigned int method_count;struct _objc_method method_list[1];&#125; _OBJC_$_CATEGORY_INSTANCE_METHODS_MyClass_$_MyAddition __attribute__ ((used, section (&quot;__DATA,__objc_const&quot;))) = &#123;sizeof(_objc_method),1,&#123;&#123;(struct objc_selector *)&quot;printName&quot;, &quot;v16@0:8&quot;, (void *)_I_MyClass_MyAddition_printName&#125;&#125;&#125;;static struct /*_prop_list_t*/ &#123;unsigned int entsize; // sizeof(struct _prop_t)unsigned int count_of_properties;struct _prop_t prop_list[1];&#125; _OBJC_$_PROP_LIST_MyClass_$_MyAddition __attribute__ ((used, section (&quot;__DATA,__objc_const&quot;))) = &#123;sizeof(_prop_t),1,&#123;&#123;&quot;name&quot;,&quot;T@\&quot;NSString\&quot;,C,N&quot;&#125;&#125;&#125;;extern &quot;C&quot; __declspec(dllexport) struct _class_t OBJC_CLASS_$_MyClass;static struct _category_t _OBJC_$_CATEGORY_MyClass_$_MyAddition __attribute__ ((used, section (&quot;__DATA,__objc_const&quot;))) =&#123;&quot;MyClass&quot;,0, // &amp;OBJC_CLASS_$_MyClass,(const struct _method_list_t *)&amp;_OBJC_$_CATEGORY_INSTANCE_METHODS_MyClass_$_MyAddition,0,0,(const struct _prop_list_t *)&amp;_OBJC_$_PROP_LIST_MyClass_$_MyAddition,&#125;;static void OBJC_CATEGORY_SETUP_$_MyClass_$_MyAddition(void ) &#123;_OBJC_$_CATEGORY_MyClass_$_MyAddition.cls = &amp;OBJC_CLASS_$_MyClass;&#125;#pragma section(&quot;.objc_inithooks$B&quot;, long, read, write)__declspec(allocate(&quot;.objc_inithooks$B&quot;)) static void *OBJC_CATEGORY_SETUP[] = &#123;(void *)&amp;OBJC_CATEGORY_SETUP_$_MyClass_$_MyAddition,&#125;;static struct _class_t *L_OBJC_LABEL_CLASS_$ [1] __attribute__((used, section (&quot;__DATA, __objc_classlist,regular,no_dead_strip&quot;)))= &#123;&amp;OBJC_CLASS_$_MyClass,&#125;;static struct _class_t *_OBJC_LABEL_NONLAZY_CLASS_$[] = &#123;&amp;OBJC_CLASS_$_MyClass,&#125;;static struct _category_t *L_OBJC_LABEL_CATEGORY_$ [1] __attribute__((used, section (&quot;__DATA, __objc_catlist,regular,no_dead_strip&quot;)))= &#123;&amp;_OBJC_$_CATEGORY_MyClass_$_MyAddition,&#125;; æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ1)ã€é¦–å…ˆç¼–è¯‘å™¨ç”Ÿæˆäº†å®žä¾‹æ–¹æ³•åˆ—è¡¨OBJC$CATEGORY_INSTANCE_METHODS_MyClass$MyAdditionå’Œå±žæ€§åˆ—è¡¨_OBJC$PROP_LIST_MyClass$MyAdditionï¼Œä¸¤è€…çš„å‘½åéƒ½éµå¾ªäº†å…¬å…±å‰ç¼€+ç±»å+categoryåå­—çš„å‘½åæ–¹å¼ï¼Œè€Œä¸”å®žä¾‹æ–¹æ³•åˆ—è¡¨é‡Œé¢å¡«å……çš„æ­£æ˜¯æˆ‘ä»¬åœ¨MyAdditionè¿™ä¸ªcategoryé‡Œé¢å†™çš„æ–¹æ³•printNameï¼Œè€Œå±žæ€§åˆ—è¡¨é‡Œé¢å¡«å……çš„ä¹Ÿæ­£æ˜¯æˆ‘ä»¬åœ¨MyAdditioné‡Œæ·»åŠ çš„nameå±žæ€§ã€‚è¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„åˆ°çš„äº‹å®žå°±æ˜¯categoryçš„åå­—ç”¨æ¥ç»™å„ç§åˆ—è¡¨ä»¥åŠåŽé¢çš„categoryç»“æž„ä½“æœ¬èº«å‘½åï¼Œè€Œä¸”æœ‰staticæ¥ä¿®é¥°ï¼Œæ‰€ä»¥åœ¨åŒä¸€ä¸ªç¼–è¯‘å•å…ƒé‡Œæˆ‘ä»¬çš„categoryåä¸èƒ½é‡å¤ï¼Œå¦åˆ™ä¼šå‡ºçŽ°ç¼–è¯‘é”™è¯¯ã€‚2)ã€å…¶æ¬¡ï¼Œç¼–è¯‘å™¨ç”Ÿæˆäº†categoryæœ¬èº«_OBJC$CATEGORY_MyClass$MyAdditionï¼Œå¹¶ç”¨å‰é¢ç”Ÿæˆçš„åˆ—è¡¨æ¥åˆå§‹åŒ–categoryæœ¬èº«ã€‚3)ã€æœ€åŽï¼Œç¼–è¯‘å™¨åœ¨DATAæ®µä¸‹çš„objc_catlist sectioné‡Œä¿å­˜äº†ä¸€ä¸ªå¤§å°ä¸º1çš„category_tçš„æ•°ç»„L_OBJC_LABELCATEGORY$ï¼ˆå½“ç„¶ï¼Œå¦‚æžœæœ‰å¤šä¸ªcategoryï¼Œä¼šç”Ÿæˆå¯¹åº”é•¿åº¦çš„æ•°ç»„^^ï¼‰ï¼Œç”¨äºŽè¿è¡ŒæœŸcategoryçš„åŠ è½½ã€‚åˆ°è¿™é‡Œï¼Œç¼–è¯‘å™¨çš„å·¥ä½œå°±æŽ¥è¿‘å°¾å£°äº†ï¼Œå¯¹äºŽcategoryåœ¨è¿è¡ŒæœŸæ€Žä¹ˆåŠ è½½ï¼Œæˆ‘ä»¬ä¸‹èŠ‚æ­æ™“ã€‚ 4ã€è¿½æœ¬æº¯æº-categoryå¦‚ä½•åŠ è½½ æˆ‘ä»¬çŸ¥é“ï¼ŒObjective-Cçš„è¿è¡Œæ˜¯ä¾èµ–OCçš„runtimeçš„ï¼Œè€ŒOCçš„runtimeå’Œå…¶ä»–ç³»ç»Ÿåº“ä¸€æ ·ï¼Œæ˜¯OS Xå’ŒiOSé€šè¿‡dyldåŠ¨æ€åŠ è½½çš„ã€‚æƒ³äº†è§£æ›´å¤šdyldåœ°åŒå­¦å¯ä»¥ç§»æ­¥è¿™é‡Œï¼ˆ3ï¼‰ã€‚ å¯¹äºŽOCè¿è¡Œæ—¶ï¼Œå…¥å£æ–¹æ³•å¦‚ä¸‹ï¼ˆåœ¨objc-os.mmæ–‡ä»¶ä¸­ï¼‰ï¼š 123456789101112131415161718void _objc_init(void)&#123; static bool initialized = false; if (initialized) return; initialized = true; // fixme defer initialization until an objc-using image is found? environ_init(); tls_init(); lock_init(); exception_init(); // Register for unmap first, in case some +load unmaps something _dyld_register_func_for_remove_image(&amp;unmap_image); dyld_register_image_state_change_handler(dyld_image_state_bound, 1/*batch*/, &amp;map_images); dyld_register_image_state_change_handler(dyld_image_state_dependents_initialized, 0/*not batch*/, &amp;load_images);&#125; categoryè¢«é™„åŠ åˆ°ç±»ä¸Šé¢æ˜¯åœ¨map_imagesçš„æ—¶å€™å‘ç”Ÿçš„ï¼Œåœ¨new-ABIçš„æ ‡å‡†ä¸‹ï¼Œ_objc_inité‡Œé¢çš„è°ƒç”¨çš„map_imagesæœ€ç»ˆä¼šè°ƒç”¨objc-runtime-new.mmé‡Œé¢çš„_read_imagesæ–¹æ³•ï¼Œè€Œåœ¨_read_imagesæ–¹æ³•çš„ç»“å°¾ï¼Œæœ‰ä»¥ä¸‹çš„ä»£ç ç‰‡æ®µï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354// Discover categories. for (EACH_HEADER) &#123; category_t **catlist = _getObjc2CategoryList(hi, &amp;count); for (i = 0; i &lt; count; i++) &#123; category_t *cat = catlist[i]; class_t *cls = remapClass(cat-&gt;cls); if (!cls) &#123; // Category&apos;s target class is missing (probably weak-linked). // Disavow any knowledge of this category. catlist[i] = NULL; if (PrintConnecting) &#123; _objc_inform(&quot;CLASS: IGNORING category \?\?\?(%s) %p with &quot; &quot;missing weak-linked target class&quot;, cat-&gt;name, cat); &#125; continue; &#125; // Process this category. // First, register the category with its target class. // Then, rebuild the class&apos;s method lists (etc) if // the class is realized. BOOL classExists = NO; if (cat-&gt;instanceMethods || cat-&gt;protocols || cat-&gt;instanceProperties) &#123; addUnattachedCategoryForClass(cat, cls, hi); if (isRealized(cls)) &#123; remethodizeClass(cls); classExists = YES; &#125; if (PrintConnecting) &#123; _objc_inform(&quot;CLASS: found category -%s(%s) %s&quot;, getName(cls), cat-&gt;name, classExists ? &quot;on existing class&quot; : &quot;&quot;); &#125; &#125; if (cat-&gt;classMethods || cat-&gt;protocols /* || cat-&gt;classProperties */) &#123; addUnattachedCategoryForClass(cat, cls-&gt;isa, hi); if (isRealized(cls-&gt;isa)) &#123; remethodizeClass(cls-&gt;isa); &#125; if (PrintConnecting) &#123; _objc_inform(&quot;CLASS: found category +%s(%s)&quot;, getName(cls), cat-&gt;name); &#125; &#125; &#125; &#125; é¦–å…ˆï¼Œæˆ‘ä»¬æ‹¿åˆ°çš„catlistå°±æ˜¯ä¸ŠèŠ‚ä¸­è®²åˆ°çš„ç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬å‡†å¤‡çš„category_tæ•°ç»„ï¼Œå…³äºŽæ˜¯å¦‚ä½•åŠ è½½catlistæœ¬èº«çš„ï¼Œæˆ‘ä»¬æš‚ä¸”ä¸è¡¨ï¼Œè¿™å’Œcategoryæœ¬èº«çš„å…³ç³»ä¹Ÿä¸å¤§ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥åŽ»ç ”ç©¶ä»¥ä¸‹Appleçš„äºŒè¿›åˆ¶æ ¼å¼å’Œloadæœºåˆ¶ã€‚ç•¥åŽ»PrintConnectingè¿™ä¸ªç”¨äºŽlogçš„ä¸œè¥¿ï¼Œè¿™æ®µä»£ç å¾ˆå®¹æ˜“ç†è§£ï¼š1)ã€æŠŠcategoryçš„å®žä¾‹æ–¹æ³•ã€åè®®ä»¥åŠå±žæ€§æ·»åŠ åˆ°ç±»ä¸Š2)ã€æŠŠcategoryçš„ç±»æ–¹æ³•å’Œåè®®æ·»åŠ åˆ°ç±»çš„metaclassä¸Š å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä»£ç ä¸­æœ‰ä¸€å°æ®µæ³¨é‡Š / || cat-&gt;classProperties /ï¼Œçœ‹æ¥è‹¹æžœæœ‰è¿‡ç»™ç±»æ·»åŠ å±žæ€§çš„è®¡åˆ’å•Šã€‚okï¼Œæˆ‘ä»¬æŽ¥ç€å¾€é‡Œçœ‹ï¼Œcategoryçš„å„ç§åˆ—è¡¨æ˜¯æ€Žä¹ˆæœ€ç»ˆæ·»åŠ åˆ°ç±»ä¸Šçš„ï¼Œå°±æ‹¿å®žä¾‹æ–¹æ³•åˆ—è¡¨æ¥è¯´å§ï¼šåœ¨ä¸Šè¿°çš„ä»£ç ç‰‡æ®µé‡Œï¼ŒaddUnattachedCategoryForClassåªæ˜¯æŠŠç±»å’Œcategoryåšä¸€ä¸ªå…³è”æ˜ å°„ï¼Œè€ŒremethodizeClassæ‰æ˜¯çœŸæ­£åŽ»å¤„ç†æ·»åŠ äº‹å®œçš„åŠŸè‡£ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243static void remethodizeClass(class_t *cls)&#123; category_list *cats; BOOL isMeta; rwlock_assert_writing(&amp;runtimeLock); isMeta = isMetaClass(cls); // Re-methodizing: check for more categories if ((cats = unattachedCategoriesForClass(cls))) &#123; chained_property_list *newproperties; const protocol_list_t **newprotos; if (PrintConnecting) &#123; _objc_inform(&quot;CLASS: attaching categories to class &apos;%s&apos; %s&quot;, getName(cls), isMeta ? &quot;(meta)&quot; : &quot;&quot;); &#125; // Update methods, properties, protocols BOOL vtableAffected = NO; attachCategoryMethods(cls, cats, &amp;vtableAffected); newproperties = buildPropertyList(NULL, cats, isMeta); if (newproperties) &#123; newproperties-&gt;next = cls-&gt;data()-&gt;properties; cls-&gt;data()-&gt;properties = newproperties; &#125; newprotos = buildProtocolList(cats, NULL, cls-&gt;data()-&gt;protocols); if (cls-&gt;data()-&gt;protocols &amp;&amp; cls-&gt;data()-&gt;protocols != newprotos) &#123; _free_internal(cls-&gt;data()-&gt;protocols); &#125; cls-&gt;data()-&gt;protocols = newprotos; _free_internal(cats); // Update method caches and vtables flushCaches(cls); if (vtableAffected) flushVtables(cls); &#125;&#125; è€Œå¯¹äºŽæ·»åŠ ç±»çš„å®žä¾‹æ–¹æ³•è€Œè¨€ï¼Œåˆä¼šåŽ»è°ƒç”¨attachCategoryMethodsè¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬åŽ»çœ‹ä¸‹attachCategoryMethodsï¼š 12345678910111213141516171819202122232425262728static voidattachCategoryMethods(class_t *cls, category_list *cats, BOOL *inoutVtablesAffected)&#123; if (!cats) return; if (PrintReplacedMethods) printReplacements(cls, cats); BOOL isMeta = isMetaClass(cls); method_list_t **mlists = (method_list_t **) _malloc_internal(cats-&gt;count * sizeof(*mlists)); // Count backwards through cats to get newest categories first int mcount = 0; int i = cats-&gt;count; BOOL fromBundle = NO; while (i--) &#123; method_list_t *mlist = cat_method_list(cats-&gt;list[i].cat, isMeta); if (mlist) &#123; mlists[mcount++] = mlist; fromBundle |= cats-&gt;list[i].fromBundle; &#125; &#125; attachMethodLists(cls, mlists, mcount, NO, fromBundle, inoutVtablesAffected); _free_internal(mlists);&#125; attachCategoryMethodsåšçš„å·¥ä½œç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œå®ƒåªæ˜¯æŠŠæ‰€æœ‰categoryçš„å®žä¾‹æ–¹æ³•åˆ—è¡¨æ‹¼æˆäº†ä¸€ä¸ªå¤§çš„å®žä¾‹æ–¹æ³•åˆ—è¡¨ï¼Œç„¶åŽè½¬äº¤ç»™äº†attachMethodListsæ–¹æ³•ï¼ˆæˆ‘å‘èª“ï¼Œè¿™æ˜¯æœ¬èŠ‚æˆ‘ä»¬çœ‹çš„æœ€åŽä¸€æ®µä»£ç äº†^_^ï¼‰ï¼Œè¿™ä¸ªæ–¹æ³•æœ‰ç‚¹é•¿ï¼Œæˆ‘ä»¬åªçœ‹ä¸€å°æ®µï¼š 123456789101112131415161718192021222324for (uint32_t m = 0; (scanForCustomRR || scanForCustomAWZ) &amp;&amp; m &lt; mlist-&gt;count; m++) &#123; SEL sel = method_list_nth(mlist, m)-&gt;name; if (scanForCustomRR &amp;&amp; isRRSelector(sel)) &#123; cls-&gt;setHasCustomRR(); scanForCustomRR = false; &#125; else if (scanForCustomAWZ &amp;&amp; isAWZSelector(sel)) &#123; cls-&gt;setHasCustomAWZ(); scanForCustomAWZ = false; &#125; &#125; // Fill method list array newLists[newCount++] = mlist; . . . // Copy old methods to the method list array for (i = 0; i &lt; oldCount; i++) &#123; newLists[newCount++] = oldLists[i]; &#125; éœ€è¦æ³¨æ„çš„æœ‰ä¸¤ç‚¹ï¼š1)ã€categoryçš„æ–¹æ³•æ²¡æœ‰â€œå®Œå…¨æ›¿æ¢æŽ‰â€åŽŸæ¥ç±»å·²ç»æœ‰çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æžœcategoryå’ŒåŽŸæ¥ç±»éƒ½æœ‰methodAï¼Œé‚£ä¹ˆcategoryé™„åŠ å®Œæˆä¹‹åŽï¼Œç±»çš„æ–¹æ³•åˆ—è¡¨é‡Œä¼šæœ‰ä¸¤ä¸ªmethodA2)ã€categoryçš„æ–¹æ³•è¢«æ”¾åˆ°äº†æ–°æ–¹æ³•åˆ—è¡¨çš„å‰é¢ï¼Œè€ŒåŽŸæ¥ç±»çš„æ–¹æ³•è¢«æ”¾åˆ°äº†æ–°æ–¹æ³•åˆ—è¡¨çš„åŽé¢ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„categoryçš„æ–¹æ³•ä¼šâ€œè¦†ç›–â€æŽ‰åŽŸæ¥ç±»çš„åŒåæ–¹æ³•ï¼Œè¿™æ˜¯å› ä¸ºè¿è¡Œæ—¶åœ¨æŸ¥æ‰¾æ–¹æ³•çš„æ—¶å€™æ˜¯é¡ºç€æ–¹æ³•åˆ—è¡¨çš„é¡ºåºæŸ¥æ‰¾çš„ï¼Œå®ƒåªè¦ä¸€æ‰¾åˆ°å¯¹åº”åå­—çš„æ–¹æ³•ï¼Œå°±ä¼šç½¢ä¼‘^_^ï¼Œæ®Šä¸çŸ¥åŽé¢å¯èƒ½è¿˜æœ‰ä¸€æ ·åå­—çš„æ–¹æ³•ã€‚ 5ã€æ—æžæœ«å¶-categoryå’Œ+loadæ–¹æ³•æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ç±»å’Œcategoryä¸­éƒ½å¯ä»¥æœ‰+loadæ–¹æ³•ï¼Œé‚£ä¹ˆæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š1)ã€åœ¨ç±»çš„+loadæ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨categoryä¸­å£°æ˜Žçš„æ–¹æ³•ä¹ˆï¼Ÿ2)ã€è¿™ä¹ˆäº›ä¸ª+loadæ–¹æ³•ï¼Œè°ƒç”¨é¡ºåºæ˜¯å’‹æ ·çš„å‘¢ï¼Ÿé‰´äºŽä¸Šè¿°å‡ èŠ‚æˆ‘ä»¬çœ‹çš„ä»£ç å¤ªå¤šäº†ï¼Œå¯¹äºŽè¿™ä¸¤ä¸ªé—®é¢˜æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ç‚¹ç›´è§‚çš„ï¼š æˆ‘ä»¬çš„ä»£ç é‡Œæœ‰MyClasså’ŒMyClassçš„ä¸¤ä¸ªcategory ï¼ˆCategory1å’ŒCategory2ï¼‰ï¼ŒMyClasså’Œä¸¤ä¸ªcategoryéƒ½æ·»åŠ äº†+loadæ–¹æ³•ï¼Œå¹¶ä¸”Category1å’ŒCategory2éƒ½å†™äº†MyClassçš„printNameæ–¹æ³•ã€‚åœ¨Xcodeä¸­ç‚¹å‡»Edit Schemeï¼Œæ·»åŠ å¦‚ä¸‹ä¸¤ä¸ªçŽ¯å¢ƒå˜é‡ï¼ˆå¯ä»¥åœ¨æ‰§è¡Œloadæ–¹æ³•ä»¥åŠåŠ è½½categoryçš„æ—¶å€™æ‰“å°logä¿¡æ¯ï¼Œæ›´å¤šçš„çŽ¯å¢ƒå˜é‡é€‰é¡¹å¯å‚è§objc-private.hï¼‰: è¿è¡Œé¡¹ç›®ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æŽ§åˆ¶å°æ‰“å°å¾ˆå¤šä¸œè¥¿å‡ºæ¥ï¼Œæˆ‘ä»¬åªæ‰¾åˆ°æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ï¼Œé¡ºåºå¦‚ä¸‹ï¼š1234567891011121314151617objc[1187]: REPLACED: -[MyClass printName] by category Category1objc[1187]: REPLACED: -[MyClass printName] by category Category2...objc[1187]: LOAD: class &apos;MyClass&apos; scheduled for +loadobjc[1187]: LOAD: category &apos;MyClass(Category1)&apos; scheduled for +loadobjc[1187]: LOAD: category &apos;MyClass(Category2)&apos; scheduled for +loadobjc[1187]: LOAD: +[MyClass load]...objc[1187]: LOAD: +[MyClass(Category1) load]...objc[1187]: LOAD: +[MyClass(Category2) load] æ‰€ä»¥ï¼Œå¯¹äºŽä¸Šé¢ä¸¤ä¸ªé—®é¢˜ï¼Œç­”æ¡ˆæ˜¯å¾ˆæ˜Žæ˜¾çš„ï¼š1)ã€å¯ä»¥è°ƒç”¨ï¼Œå› ä¸ºé™„åŠ categoryåˆ°ç±»çš„å·¥ä½œä¼šå…ˆäºŽ+loadæ–¹æ³•çš„æ‰§è¡Œ2)ã€+loadçš„æ‰§è¡Œé¡ºåºæ˜¯å…ˆç±»ï¼ŒåŽcategoryï¼Œè€Œcategoryçš„+loadæ‰§è¡Œé¡ºåºæ˜¯æ ¹æ®ç¼–è¯‘é¡ºåºå†³å®šçš„ã€‚ç›®å‰çš„ç¼–è¯‘é¡ºåºæ˜¯è¿™æ ·çš„ï¼š æˆ‘ä»¬è°ƒæ•´ä¸€ä¸ªCategory1å’ŒCategory2çš„ç¼–è¯‘é¡ºåºï¼Œrunã€‚okï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æŽ§åˆ¶å°çš„è¾“å‡ºé¡ºåºå˜äº†ï¼š1234567891011121314151617objc[1187]: REPLACED: -[MyClass printName] by category Category2objc[1187]: REPLACED: -[MyClass printName] by category Category1...objc[1187]: LOAD: class &apos;MyClass&apos; scheduled for +loadobjc[1187]: LOAD: category &apos;MyClass(Category2)&apos; scheduled for +loadobjc[1187]: LOAD: category &apos;MyClass(Category1)&apos; scheduled for +loadobjc[1187]: LOAD: +[MyClass load]...objc[1187]: LOAD: +[MyClass(Category2) load]...objc[1187]: LOAD: +[MyClass(Category1) load] è™½ç„¶å¯¹äºŽ+loadçš„æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·ï¼Œä½†æ˜¯å¯¹äºŽâ€œè¦†ç›–â€æŽ‰çš„æ–¹æ³•ï¼Œåˆ™ä¼šå…ˆæ‰¾åˆ°æœ€åŽä¸€ä¸ªç¼–è¯‘çš„categoryé‡Œçš„å¯¹åº”æ–¹æ³•ã€‚è¿™ä¸€èŠ‚æˆ‘ä»¬åªæ˜¯ç”¨å¾ˆç›´è§‚çš„æ–¹å¼å¾—åˆ°äº†é—®é¢˜çš„ç­”æ¡ˆï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç»§ç»­åŽ»ç ”ç©¶ä¸€ä¸‹OCçš„è¿è¡Œæ—¶ä»£ç ã€‚ 6ã€è§¦ç±»æ—é€š-categoryå’Œæ–¹æ³•è¦†ç›–é‰´äºŽä¸Šé¢å‡ èŠ‚æˆ‘ä»¬å·²ç»æŠŠåŽŸç†éƒ½è®²äº†ï¼Œè¿™ä¸€èŠ‚åªæœ‰ä¸€ä¸ªé—®é¢˜:æ€Žä¹ˆè°ƒç”¨åˆ°åŽŸæ¥ç±»ä¸­è¢«categoryè¦†ç›–æŽ‰çš„æ–¹æ³•ï¼Ÿå¯¹äºŽè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“categoryå…¶å®žå¹¶ä¸æ˜¯å®Œå…¨æ›¿æ¢æŽ‰åŽŸæ¥ç±»çš„åŒåæ–¹æ³•ï¼Œåªæ˜¯categoryåœ¨æ–¹æ³•åˆ—è¡¨çš„å‰é¢è€Œå·²ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦é¡ºç€æ–¹æ³•åˆ—è¡¨æ‰¾åˆ°æœ€åŽä¸€ä¸ªå¯¹åº”åå­—çš„æ–¹æ³•ï¼Œå°±å¯ä»¥è°ƒç”¨åŽŸæ¥ç±»çš„æ–¹æ³•ï¼š 12345678910111213141516171819202122232425Class currentClass = [MyClass class];MyClass *my = [[MyClass alloc] init];if (currentClass) &#123; unsigned int methodCount; Method *methodList = class_copyMethodList(currentClass, &amp;methodCount); IMP lastImp = NULL; SEL lastSel = NULL; for (NSInteger i = 0; i &lt; methodCount; i++) &#123; Method method = methodList[i]; NSString *methodName = [NSString stringWithCString:sel_getName(method_getName(method)) encoding:NSUTF8StringEncoding]; if ([@&quot;printName&quot; isEqualToString:methodName]) &#123; lastImp = method_getImplementation(method); lastSel = method_getName(method); &#125; &#125; typedef void (*fn)(id,SEL); if (lastImp != NULL) &#123; fn f = (fn)lastImp; f(my,lastSel); &#125; free(methodList);&#125; 7ã€æ›´ä¸Šä¸€å±‚-categoryå’Œå…³è”å¯¹è±¡å¦‚ä¸Šæ‰€è§ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨categoryé‡Œé¢æ˜¯æ— æ³•ä¸ºcategoryæ·»åŠ å®žä¾‹å˜é‡çš„ã€‚ä½†æ˜¯æˆ‘ä»¬å¾ˆå¤šæ—¶å€™éœ€è¦åœ¨categoryä¸­æ·»åŠ å’Œå¯¹è±¡å…³è”çš„å€¼ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥æ±‚åŠ©å…³è”å¯¹è±¡æ¥å®žçŽ°ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243MyClass+Category1.h:#import &quot;MyClass.h&quot;@interface MyClass (Category1)@property(nonatomic,copy) NSString *name;@endMyClass+Category1.m:#import &quot;MyClass+Category1.h&quot;#import &lt;objc/runtime.h&gt;@implementation MyClass (Category1)+ (void)load&#123; NSLog(@&quot;%@&quot;,@&quot;load in Category1&quot;);&#125;- (void)setName:(NSString *)name&#123; objc_setAssociatedObject(self, &quot;name&quot;, name, OBJC_ASSOCIATION_COPY);&#125;- (NSString*)name&#123; NSString *nameObject = objc_getAssociatedObject(self, &quot;name&quot;); return nameObject;&#125;@end ä½†æ˜¯å…³è”å¯¹è±¡åˆæ˜¯å­˜åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿ å¦‚ä½•å­˜å‚¨ï¼Ÿ å¯¹è±¡é”€æ¯æ—¶å€™å¦‚ä½•å¤„ç†å…³è”å¯¹è±¡å‘¢ï¼Ÿæˆ‘ä»¬åŽ»ç¿»ä¸€ä¸‹runtimeçš„æºç ï¼Œåœ¨objc-references.mmæ–‡ä»¶ä¸­æœ‰ä¸ªæ–¹æ³•_object_set_associative_referenceï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445void _object_set_associative_reference(id object, void *key, id value, uintptr_t policy) &#123; // retain the new value (if any) outside the lock. ObjcAssociation old_association(0, nil); id new_value = value ? acquireValue(value, policy) : nil; &#123; AssociationsManager manager; AssociationsHashMap &amp;associations(manager.associations()); disguised_ptr_t disguised_object = DISGUISE(object); if (new_value) &#123; // break any existing association. AssociationsHashMap::iterator i = associations.find(disguised_object); if (i != associations.end()) &#123; // secondary table exists ObjectAssociationMap *refs = i-&gt;second; ObjectAssociationMap::iterator j = refs-&gt;find(key); if (j != refs-&gt;end()) &#123; old_association = j-&gt;second; j-&gt;second = ObjcAssociation(policy, new_value); &#125; else &#123; (*refs)[key] = ObjcAssociation(policy, new_value); &#125; &#125; else &#123; // create the new association (first time). ObjectAssociationMap *refs = new ObjectAssociationMap; associations[disguised_object] = refs; (*refs)[key] = ObjcAssociation(policy, new_value); _class_setInstancesHaveAssociatedObjects(_object_getClass(object)); &#125; &#125; else &#123; // setting the association to nil breaks the association. AssociationsHashMap::iterator i = associations.find(disguised_object); if (i != associations.end()) &#123; ObjectAssociationMap *refs = i-&gt;second; ObjectAssociationMap::iterator j = refs-&gt;find(key); if (j != refs-&gt;end()) &#123; old_association = j-&gt;second; refs-&gt;erase(j); &#125; &#125; &#125; &#125; // release the old value (outside of the lock). if (old_association.hasValue()) ReleaseValue()(old_association);&#125; æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„å…³è”å¯¹è±¡éƒ½ç”±AssociationsManagerç®¡ç†ï¼Œè€ŒAssociationsManagerå®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213class AssociationsManager &#123; static OSSpinLock _lock; static AssociationsHashMap *_map; // associative references: object pointer -&gt; PtrPtrHashMap.public: AssociationsManager() &#123; OSSpinLockLock(&amp;_lock); &#125; ~AssociationsManager() &#123; OSSpinLockUnlock(&amp;_lock); &#125; AssociationsHashMap &amp;associations() &#123; if (_map == NULL) _map = new AssociationsHashMap(); return *_map; &#125;&#125;; AssociationsManageré‡Œé¢æ˜¯ç”±ä¸€ä¸ªé™æ€AssociationsHashMapæ¥å­˜å‚¨æ‰€æœ‰çš„å…³è”å¯¹è±¡çš„ã€‚è¿™ç›¸å½“äºŽæŠŠæ‰€æœ‰å¯¹è±¡çš„å…³è”å¯¹è±¡éƒ½å­˜åœ¨ä¸€ä¸ªå…¨å±€mapé‡Œé¢ã€‚è€Œmapçš„çš„keyæ˜¯è¿™ä¸ªå¯¹è±¡çš„æŒ‡é’ˆåœ°å€ï¼ˆä»»æ„ä¸¤ä¸ªä¸åŒå¯¹è±¡çš„æŒ‡é’ˆåœ°å€ä¸€å®šæ˜¯ä¸åŒçš„ï¼‰ï¼Œè€Œè¿™ä¸ªmapçš„valueåˆæ˜¯å¦å¤–ä¸€ä¸ªAssociationsHashMapï¼Œé‡Œé¢ä¿å­˜äº†å…³è”å¯¹è±¡çš„kvå¯¹ã€‚è€Œåœ¨å¯¹è±¡çš„é”€æ¯é€»è¾‘é‡Œé¢ï¼Œè§objc-runtime-new.mm: 12345678910111213141516171819void *objc_destructInstance(id obj)&#123; if (obj) &#123; Class isa_gen = _object_getClass(obj); class_t *isa = newcls(isa_gen); // Read all of the flags at once for performance. bool cxx = hasCxxStructors(isa); bool assoc = !UseGC &amp;&amp; _class_instancesHaveAssociatedObjects(isa_gen); // This order is important. if (cxx) object_cxxDestruct(obj); if (assoc) _object_remove_assocations(obj); if (!UseGC) objc_clear_deallocating(obj); &#125; return obj;&#125; å—¯ï¼Œruntimeçš„é”€æ¯å¯¹è±¡å‡½æ•°objc_destructInstanceé‡Œé¢ä¼šåˆ¤æ–­è¿™ä¸ªå¯¹è±¡æœ‰æ²¡æœ‰å…³è”å¯¹è±¡ï¼Œå¦‚æžœæœ‰ï¼Œä¼šè°ƒç”¨_object_remove_assocationsåšå…³è”å¯¹è±¡çš„æ¸…ç†å·¥ä½œã€‚ åŽè®° æ­£å¦‚ä¾¯æ·å…ˆç”Ÿæ‰€è®²-â€œæºç é¢å‰ï¼Œäº†æ— ç§˜å¯†â€ï¼ŒAppleçš„Cocoa Touchæ¡†æž¶è™½ç„¶å¹¶ä¸å¼€æºï¼Œä½†æ˜¯Objective-Cçš„runtimeå’ŒCore Foundationå´æ˜¯å®Œå…¨å¼€æ”¾æºç çš„(åœ¨http://www.opensource.apple.com/tarballs/å¯ä»¥ä¸‹è½½åˆ°å…¨éƒ¨çš„å¼€æºä»£ç )ã€‚æœ¬ç³»åˆ—runtimeæºç å­¦ä¹ å°†ä¼šæŒç»­æ›´æ–°ï¼Œæ„çŠ¹æœªå°½çš„åŒå­¦å¯ä»¥è‡ªè¡Œåˆ°ä¸Šè¿°ç½‘ç«™ä¸‹è½½æºç å­¦ä¹ ã€‚è¡Œç¬”ç®€é™‹ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæœ›æŒ‡æ­£ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSçŸ¥è¯†åœ°å›¾]]></title>
    <url>%2F2015%2F09%2F25%2FiOS%E7%9F%A5%E8%AF%86%E5%9C%B0%E5%9B%BE%2F</url>
    <content type="text"><![CDATA[ä¸»è¦ç½—åˆ—iOSå¼€å‘ä¸­æ¶‰åŠåˆ°çš„åŸºç¡€çŸ¥è¯†ç‚¹ä»¥åŠæž¶æž„å’ŒåŸºç¡€çš„ä¸€äº›æ–¹é¢ åŸºç¡€ éœ€æ±‚ è´¨é‡ æ•ˆçŽ‡ 01 UIè§†å›¾(åŸºç¡€) äº‹ä»¶ä¼ é€’æœºåˆ¶ UIç»˜åˆ¶åŽŸç† UIç»˜åˆ¶åŽŸç†2 å¼‚æ­¥ç»˜åˆ¶åŽŸç† æµå¼é¡µé¢çš„æ€§èƒ½ä¼˜åŒ– ç¦»å±æ¸²æŸ“ UIImageViewçš„å®Œæˆç»˜åˆ¶è¿‡ç¨‹ UILabelå®Œæ•´ç»˜åˆ¶è¿‡ç¨‹ äº‹ä»¶ä¼ é€’1.å¦‚ä½•æ›´æ”¹å“åº”å¯¹è±¡ 2.æœ€é‡è¦çš„ä¸¤ä¸ªå‡½æ•° 3.ä¼ é€’é“¾å’Œå“åº”é“¾ 4.ä¸€ä¸ªäº‹ä»¶å¤šæ¬¡å“åº” UIç»˜åˆ¶åŽŸç† å¡é¡¿çš„æœ¬è´¨ ç»˜åˆ¶çš„æ—¶å€™cpuå’Œgpuæ€Žä¹ˆåˆ†å·¥ ç»˜åˆ¶ä¼˜åŒ–ç‚¹ 02 OCè¯­è¨€(åŸºç¡€) KVOï¼Œobserver KVCï¼Œset value for key kvc vs kvo åˆ†ç±» åˆ†ç±»ä¸Žæ‹“å±•åŒºåˆ« kvo/delegate/notificationé€‰æ‹© å…³è”å¯¹è±¡ copy/strong/weak property é€šçŸ¥(åŒæ­¥æ‰§è¡Œè¿˜æ˜¯å¼‚æ­¥ï¼Ÿ) 03 Runtime(åŸºç¡€)runtimeæ¦‚è¿° å¯¹è±¡ã€ç±»å¯¹è±¡ã€å…ƒç±»å¯¹è±¡ æ¶ˆæ¯ä¼ é€’æœºåˆ¶ æ¶ˆæ¯è½¬å‘æµç¨‹ Method-Swizzling å¯¹è±¡ã€ç±»å¯¹è±¡ã€åŽŸç±»å¯¹è±¡çš„ç†è§£ã€æ¶ˆæ¯ä¼ é€’æœºåˆ¶ã€æ¶ˆæ¯è½¬å‘æµç¨‹ã€Method-Swizzlingã€ISA-swizzlingã€åŠ¨æ€æ–¹æ³•è§£æžã€åŠ¨æ€æ·»åŠ æ–¹æ³• ä¸€ä¸ªç¨‹åºå¯åŠ¨ä¹‹åŽï¼Œç±»å¯¹è±¡å’Œæ–¹æ³•æ˜¯å¦‚ä½•å­˜åœ¨çš„ï¼Ÿ 04 å†…å­˜(åŸºç¡€) å¼•ç”¨è®¡æ•°è¡¨ å¼±å¼•ç”¨è¡¨ ARCã€MRC å¾ªçŽ¯å¼•ç”¨ å†…å­˜ç®¡ç† ä¸ºä»€ä¹ˆç”¨copyï¼Œå“ªäº›æƒ…å†µä¸‹ç”¨copyï¼Œä¸ºä»€ä¹ˆç”¨copy? NSTimerçš„å¼•ç”¨é‡Šæ”¾(runloopå¼•ç”¨timerï¼Œtimerå¼•ç”¨selfï¼Œå¯¼è‡´ä¸èƒ½é‡Šæ”¾) 05 Block(åŸºç¡€) Blockæœ¬è´¨ æˆªèŽ·å˜é‡ç‰¹æ€§ å†…å­˜ç®¡ç† å¾ªçŽ¯å¼•ç”¨ 06 å¤šçº¿ç¨‹(åŸºç¡€) GCDã€nsoperation èµ„æºå…±äº« çº¿ç¨‹åŒæ­¥ SpinLockç­‰ atomicå’Œçº¿ç¨‹å®‰å…¨ ä½ æ€Žæ ·å®žçŽ°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿè¿™äº›çº¿ç¨‹å®‰å…¨çš„åŠžæ³•å’Œatomicæœ‰ä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿatomicçš„å®žçŽ°æœºåˆ¶æ˜¯æ€Žæ · 07 RunLoop(åŸºç¡€) äº‹ä»¶å¾ªçŽ¯ ç”¨æˆ·æ€ æ ¸å¿ƒæ€ å¸¸é©»çº¿ç¨‹ 08 ç½‘ç»œ(åŸºç¡€) HTTPS å¯¹ç§°åŠ å¯†ç®—æ³• éžå¯¹ç§°åŠ å¯† DNSè§£æž HTTPã€TCP ASI AFN æœ‰å¬è¿‡HTTPDNSå—ï¼Ÿ æœ‰å“ªäº›æ–¹æ³•èƒ½åŠ å¿«ç½‘ç»œè¿žæŽ¥é€Ÿåº¦ å¦‚ä½•ç»´æŒé•¿é“¾æŽ¥ å¦‚ä½•å‘é€å¿ƒè·³åŒ… ç”¨æˆ·äº§ç”Ÿä¸€ä¸ªä¸‹æ‹‰åˆ·æ–°åŠ¨ä½œï¼Œè¯·è¯¦ç»†æè¿°ç½‘ç»œå¦‚ä½•ä¼ è¾“ ç®€è¿°tcpè¿žæŽ¥æ—¶çš„æ¡æ‰‹è¿‡ç¨‹ï¼Œä¸è¦ç¬¬ä¸‰æ¬¡æ¡æ‰‹è¡Œä¸è¡Œï¼Ÿ 09 è®¾è®¡æ¨¡å¼(åŸºç¡€) æ¡¥æŽ¥ã€é€‚é…å™¨ã€å‘½ä»¤ è´£ä»»é“¾ã€å•ä¾‹ å…­å¤§è®¾è®¡åŽŸåˆ™ 10 æž¶æž„/æ¡†æž¶(æ•ˆçŽ‡) MVVMã€æ—¶é•¿ç»Ÿè®¡æ¡†æž¶ å›¾ç‰‡ç¼“å­˜æ¡†æž¶ PVé‡çº§10äº¿çº§ä¸šåŠ¡æž¶æž„ CocoaPods ç¼–è¯‘åŽŸç† å® ç¼–è¯‘è¿‡ç¨‹ clang ä¼˜åŒ–ç†è®ºä¸Žå®žè·µ(è´¨é‡)YYKitç»ˆæžä¼˜åŒ– å¯åŠ¨æ—¶é•¿ä¼˜åŒ– å¡é¡¿ä¼˜åŒ– cpuå ç”¨ å†…å­˜å ç”¨ UIä¸»çº¿ç¨‹ ç”µé‡ å›¾ç‰‡ ç˜¦èº« æ•ˆçŽ‡æå‡(æ•ˆçŽ‡) ä»£ç å— åŠŸèƒ½æ¨¡ç‰ˆ è‡ªåŠ¨ä»£ç  jsonè½¬model è·¨å¹³å° ç ”å‘è´¨é‡ç®¡ç†(è´¨é‡) codereview clangäºŒæ¬¡å¼€å‘(ç¼–è¯‘å™¨è­¦å‘Š) oclint infer git commit(å¢žé‡æ£€æµ‹) å†—ä½™ä»£ç  é‡å¤ä»£ç  é‡å¤å›¾ç‰‡æ£€æµ‹ ipaåŒ…å¤§å°å’Œæ¨¡å—å¤§å°æ£€æµ‹ ç›‘æŽ§ç†è®ºå’Œå®žè·µ(è´¨é‡) crash ç½‘ç»œ æµé‡ æ€§èƒ½ è¡Œä¸º æˆªå›¾è¡Œä¸ºåº”ç”¨ çƒ­ä¿®å¤ç†è®ºä¸Žå®žè·µ JSPatch Luaï¼Ÿ å‘åŒ…ä¸Žç°åº¦(æ•ˆçŽ‡) testflightç°åº¦çš„åº”ç”¨ CIçš„ä¼˜åŒ–(è‡ªåŠ¨å‘åŒ…) ç®—æ³• å­—ç¬¦ä¸²åè½¬ å¥å­åè½¬ å¿«é€ŸæŽ’åº å•é“¾è¡¨åè½¬ æœ‰åºæ•°ç»„å½’å¹¶ æ— åºæ•°ç»„æ‰¾ä¸­ä½æ•°(å¿«æŽ’) 12 ç¬¬ä¸‰æ–¹ AFNetworking ReactCocoaå“åº”å¼ç¼–ç¨‹åº“]]></content>
  </entry>
  <entry>
    <title><![CDATA[runtimeæ¦‚è¿°]]></title>
    <url>%2F2015%2F08%2F10%2F2015%2Fruntime%E6%A6%82%E8%BF%B0%2F</url>
    <content type="text"><![CDATA[runtimeæ¦‚è¿° ä»€ä¹ˆæ˜¯runtime?runtimeç›´è¯‘å°±æ˜¯è¿è¡Œæ—¶é—´,run(è·‘,è¿è¡Œ) time(æ—¶é—´),ç½‘ä¸Šå¤§å®¶éƒ½å«å®ƒè¿è¡Œæ—¶,å®ƒæ˜¯ä¸€å¥—æ¯”è¾ƒåº•å±‚çš„çº¯Cè¯­è¨€API,å±žäºŽä¸€ä¸ªCè¯­è¨€åº“,åŒ…å«äº†å¾ˆå¤šåº•å±‚çš„Cè¯­è¨€API,å®ƒæ˜¯OCçš„å¹•åŽå·¥ä½œè€…,æˆ‘ä»¬å¹³æ—¶å†™çš„OCä»£ç ,åœ¨è¿è¡Œè¿‡ç¨‹æ—¶,éƒ½ä¼šè½¬ä¸ºruntimeçš„Cè¯­è¨€ä»£ç  ç±»ä¸Žå¯¹è±¡####Object123interface NSObject &lt;NSObject&gt; &#123; Class isa OBJC_ISA_AVAILABILITY;&#125; objc_method12345typedef struct objc_ method &#123; SEL method_name; char *method_types; IMP method_imp;&#125;; objc_class12345678910111213141516struct objc_class &#123; Class isa;#if !__OBJC2__ Class super_class; const char *name; long version; //ç±»çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œé»˜è®¤ä¸º0 long info; //ç±»ä¿¡æ¯ï¼Œä¾›è¿è¡ŒæœŸä½¿ç”¨çš„ä¸€äº›ä½æ ‡è¯† long instance_size; //è¯¥ç±»çš„å®žä¾‹å˜é‡å¤§å° struct objc_ivar_list *ivars; //æˆå‘˜åˆ—è¡¨ struct objc_method_list **methodLists; //æ–¹æ³•åˆ—è¡¨ struct objc_cache *cache; //æ–¹æ³•ç¼“å­˜ struct objc_protocol_list *protocols; //åè®®é“¾è¡¨#endif&#125; OBJC2_UNAVAILABLE; Method &amp; SEL &amp; IMP Method:(typedef struct objc_method *Method)åœ¨ç±»å®šä¹‰ä¸­è¡¨ç¤ºæ–¹æ³•çš„ç±»åž‹ï¼Œç›¸å½“äºŽSELå’ŒIMPçš„æ˜ å°„ SEL(selector):typedef struct objc_selector *SELæ–¹æ³•é€‰æ‹©å™¨ï¼Œç”¨äºŽåœ¨è¿è¡Œæ—¶ä¸­è¡¨ç¤ºä¸€ä¸ªæ–¹æ³•çš„åç§°ã€‚ä¸€ä¸ªæ–¹æ³•é€‰æ‹©å™¨æ˜¯ä¸€ä¸ªCå­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯åœ¨Objective-Cè¿è¡Œæ—¶è¢«æ³¨å†Œçš„ã€‚é€‰æ‹©å™¨ç”±ç¼–è¯‘å™¨ç”Ÿæˆï¼Œå¹¶ä¸”åœ¨ç±»è¢«åŠ è½½æ—¶ç”±è¿è¡Œæ—¶è‡ªåŠ¨åšæ˜ å°„æ“ä½œã€‚ IMP(implement):typedef id (*IMP)(id, SEL, â€¦)æ–¹æ³•çš„å®žçŽ°ï¼Œè¿™æ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»åž‹ï¼ŒæŒ‡å‘æ–¹æ³•å®žçŽ°å‡½æ•°çš„å¼€å§‹ä½ç½®ã€‚è¿™ä¸ªå‡½æ•°ä½¿ç”¨ä¸ºå½“å‰CPUæž¶æž„å®žçŽ°çš„æ ‡å‡†Cè°ƒç”¨è§„èŒƒã€‚æ¯ä¸€ä¸ªå‚æ•°æ˜¯æŒ‡å‘å¯¹è±¡è‡ªèº«çš„æŒ‡é’ˆ(self)ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–¹æ³•é€‰æ‹©å™¨ã€‚ç„¶åŽæ˜¯æ–¹æ³•çš„å®žé™…å‚æ•°ã€‚ æ³¨æ„ï¼ŒSELæ˜¯ç”±æ–¹æ³•çš„åå­—ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²æ¥ç”Ÿæˆçš„(åŒ…å«å‚æ•°)ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸åŒçš„ç±»ä¸­çš„æ–¹æ³•ï¼Œåªè¦åå­—å’Œå‚æ•°ç›¸åŒï¼Œé‚£ä¹ˆå®ƒçš„SELä¹Ÿæ˜¯ç›¸åŒçš„ï¼ŒSELæœ¬è´¨æ˜¯ä¸€ä¸ªIntç±»åž‹çš„ä¸€ä¸ªåœ°å€(ç”¨%pæ¥è¡¨ç¤º)ï¼Œåœ°å€ä¸­å­˜æ”¾ç€æ–¹æ³•çš„åå­—æ‰€æœ‰çš„SELå­˜å‚¨åœ¨ä¸€ä¸ªNSSetä¸­ï¼Œæ‰€ä»¥SELæ˜¯å”¯ä¸€çš„ï¼Œä»¥hashå®žçŽ°æœç´¢å®šä½ï¼Œæ•ˆçŽ‡é«˜äºŽNSArrayï¼Œåœ¨æ–¹æ³•çš„è°ƒç”¨çš„æ—¶å€™ï¼Œæ˜¯é€šè¿‡æ•°å­—çš„æŸ¥æ‰¾è€Œéžå­—ç¬¦ä¸²çš„æŸ¥æ‰¾æ¥è¿›è¡Œæ–¹æ³•å®šä½çš„ï¼Œå½“æˆ‘å®šä¹‰ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œæœ‰å£°æ˜Žæˆ–è€…å®žçŽ°ï¼Œéƒ½ä¼šæœ‰å¯¹åº”çš„SELä»¥åŠMethodå¯¹è±¡å­˜åœ¨ï¼Œä½†æ˜¯æ²¡æœ‰å®žçŽ°æ˜¯IMPåˆ™ä¸ºç©ºï¼ŒSEL selector = NSSelectorFromString(@&quot;run&quot;);è¿™ä¸ªä»£ç æ°¸è¿œæ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯IMP ipmSel = [FXViewController methodForSelector:selector];å¦‚æžœè¿™ä¸ªç±»æ²¡æœ‰è¿™ä¸ªå®žçŽ°ï¼Œé‚£ä¹ˆæ˜¯ä¼šè¿”å›ž(libobjc.A.dylib_objc_msgForward)ã€‚æ‰€ä»¥ç†è®ºä¸Šæ¥è®²iOSä¸å­˜åœ¨ç§æœ‰æ–¹æ³•ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œæ—¶æ¥è°ƒç”¨ä»»ä½•å­˜åœ¨çš„methodï¼Œåªä¸è¿‡è¿™ä¸ªæ–¹æ³•æ²¡æœ‰åœ¨.hæ–‡ä»¶è¿›è¡Œå£°æ˜Žçš„è¯ï¼Œåœ¨ç¼–è¯‘å±‚é¢ä¼šè¿›è¡Œä¸€äº›ç¦æ­¢è€Œå·²ï¼Œè¿™æ ·ä¹Ÿä¿éšœäº†è¿è¡Œçš„å®‰å…¨ã€‚12345SEL selector = NSSelectorFromString(@&quot;run&quot;);Class class = NSClassFromString(@&quot;FXViewController&quot;);if ([class respondsToSelector:selector]) &#123; [class performSelector:selector withObject:nil];&#125; å½“æˆ‘ä»¬åœ¨ç±»ä¸­è¿›è¡Œæ–¹æ³•çš„å£°æ˜Žæˆ–è€…å®žçŽ°çš„æ—¶å€™ï¼Œåº•å±‚ä¼šé»˜è®¤æ ¹æ®æ–¹æ³•åï¼Œæ¥æ³¨å†Œè¿™ä¸ªæ–¹æ³•ï¼Œç”Ÿæˆå¯¹åº”çš„SELå’ŒMethodï¼ŒSELä¼šç”±ä¸€ä¸ªNSSetæ¥åšä¸€ä¸ªç»Ÿä¸€çš„ç»´æŠ¤ï¼Œå¦å¤–Methodå¯¹è±¡ä¼šä¿å­˜åœ¨å¯¹åº”çš„ç±»çš„methodlistä¸­ï¼Œå½“æˆ‘ä»¬åœ¨æ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šå¿«é€Ÿçš„é€šè¿‡æ³¨å†Œæ–¹æ³•æ¥æ‹¿åˆ°SELï¼Œç„¶åŽåˆ°å¯¹åº”çš„ç±»çš„å®žçŽ°ä¸­åŽ»æ ¹æ®SELæŸ¥æ‰¾Methodï¼Œå¦‚æžœMethodå­˜åœ¨åˆ™ç›´æŽ¥è·³è½¬åˆ°IMPåŽ»è°ƒç”¨å…¶æŒ‡å‘çš„å‡½æ•°ã€‚å¦‚æžœä¸€ä¸ªæ–¹æ³•åªæœ‰å£°æ˜Žæ²¡æœ‰å®žçŽ°ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»ä¸­æ˜¯ä¸ä¼šæœ‰Methodå¯¹è±¡å­˜åœ¨çš„ï¼Œå¯ä»¥ç”¨class_copyMethodListè¿›è¡ŒéªŒè¯ è¿™å¼ å›¾åœ¨åŠ è½½ç±»çš„æ—¶å€™åˆ›å»ºï¼Œå½“å‘çŽ°æœ‰æ–¹æ³•å£°æ˜Žï¼Œæˆ–è€…æ–¹æ³•å®žçŽ°ï¼Œæˆ–è€…æ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œå°±ä¼šæŠŠå¯¹åº”çš„å­—ç¬¦ä¸²è¿›è¡Œä¸€ä¸ªæ³¨å†Œï¼Œå½¢æˆä¸Šè¾¹é‚£æ ·çš„ä¸€å¼ è¡¨ï¼Œè¿™å¼ è¡¨ä¸­çš„SELæ˜¯ç»è¿‡è¿ç®—å¾—åˆ°çš„ï¼Œè€Œä¸æ˜¯æŸ¥æ‰¾ã€‚ 1234567SEL sel = NSSelectorFromString(@&quot;thename123&quot;);NSLog(@&quot;%d&quot;, sel); NSLog(@&quot;%@&quot;, NSStringFromSelector(sel)); SEL sel1 = NSSelectorFromString(@&quot;thename123&quot;);NSLog(@&quot;%d&quot;, sel1); ç»“æžœ 123xiancheng[69979:33043952] 41424xiancheng[69979:33043952] thename123xiancheng[69979:33043952] 41424 æˆ‘ä»¬çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªhashçš„è¿‡ç¨‹ï¼Œæ˜¯ç»è¿‡è¿ç®—å¾—åˆ°çš„ï¼Œè€Œä¸æ˜¯æŸ¥æ‰¾ã€‚ï¼Œä»Žä¸€ä¸ªå­—ç¬¦ä¸²å¾—åˆ°ä¸€ä¸ªæ•°å­—ï¼Œç„¶åŽä»Žæ•°å­—å¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™æ ·å°±æ›´èƒ½ä¿è¯æ•ˆçŽ‡äº† è¿è¡Œæ—¶æ–¹æ³•æ€»ç»“é€šè¿‡åå­—èŽ·å–SELï¼Œé€šè¿‡SELå’ŒClassèŽ·å–IMP123456789101112131415// æ·»åŠ æ–¹æ³•BOOL class_addMethod ( Class cls, SEL name, IMP imp, const char *types );// èŽ·å–å®žä¾‹æ–¹æ³•Method class_getInstanceMethod ( Class cls, SEL name );// èŽ·å–ç±»æ–¹æ³•Method class_getClassMethod ( Class cls, SEL name );// èŽ·å–æ‰€æœ‰å®žä¾‹æ–¹æ³•çš„æ•°ç»„ï¼Œä¸èƒ½èŽ·å–ç±»æ–¹æ³•Method * class_copyMethodList ( Class cls, unsigned int *outCount );// æ›¿ä»£æ–¹æ³•çš„å®žçŽ°ï¼Œå¦‚æžœIMPä¸å­˜åœ¨åˆ™é»˜è®¤è°ƒç”¨class_addMethodæ–¹æ³•IMP class_replaceMethod ( Class cls, SEL name, IMP imp, const char *types );// è¿”å›žæ–¹æ³•çš„å…·ä½“å®žçŽ°IMP class_getMethodImplementation ( Class cls, SEL name );IMP class_getMethodImplementation_stret ( Class cls, SEL name );// ç±»å®žä¾‹æ˜¯å¦å“åº”æŒ‡å®šçš„selectorBOOL class_respondsToSelector ( Class cls, SEL sel ); èŽ·å–åˆ—è¡¨123456789101112131415161718192021222324252627282930unsigned int count; //èŽ·å–å±žæ€§åˆ—è¡¨ objc_property_t *propertyList = class_copyPropertyList([self class], &amp;count); for (unsigned int i=0; i&lt;count; i++) &#123; const char *propertyName = property_getName(propertyList[i]); NSLog(@&quot;property----&gt;%@&quot;, [NSString stringWithUTF8String:propertyName]); &#125; //èŽ·å–æ–¹æ³•åˆ—è¡¨ Method *methodList = class_copyMethodList([self class], &amp;count); for (unsigned int i; i&lt;count; i++) &#123; Method method = methodList[i]; NSLog(@&quot;method----&gt;%@&quot;, NSStringFromSelector(method_getName(method))); &#125; //èŽ·å–æˆå‘˜å˜é‡åˆ—è¡¨ Ivar *ivarList = class_copyIvarList([self class], &amp;count); for (unsigned int i; i&lt;count; i++) &#123; Ivar myIvar = ivarList[i]; const char *ivarName = ivar_getName(myIvar); NSLog(@&quot;Ivar----&gt;%@&quot;, [NSString stringWithUTF8String:ivarName]); &#125; //èŽ·å–åè®®åˆ—è¡¨ __unsafe_unretained Protocol **protocolList = class_copyProtocolList([self class], &amp;count); for (unsigned int i; i&lt;count; i++) &#123; Protocol *myProtocal = protocolList[i]; const char *protocolName = protocol_getName(myProtocal); NSLog(@&quot;protocol----&gt;%@&quot;, [NSString stringWithUTF8String:protocolName]); &#125; isaæŒ‡é’ˆ æ–¹æ³•çš„æ‰§è¡Œ è°ƒç”¨ç±»çš„allocæ–¹æ³•ï¼Œåˆ†é…å†…å­˜ï¼Œåˆå§‹åŒ–æˆå‘˜å˜é‡ï¼Œå…¶ä¸­isaæŒ‡é’ˆä¹Ÿä¼šè¢«åˆå§‹åŒ–ï¼Œè®©è¿™ä¸ªå¯¹è±¡æœ‰è®¿é—®å…¶ç±»çš„èƒ½åŠ›ï¼› å½“æˆ‘ä»¬è°ƒç”¨æŸä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šå¯¹è¿™ä¸ªæ–¹æ³•è°ƒç”¨è¿›è¡Œè½¬æ¢ 1234567//1.åˆ©ç”¨msgSendå‡½æ•° [someone method]; [someone performSelector:@selector(method)]; ----&gt;objc_msgSend(someone, @selector(method));//2.åˆ©ç”¨è½¬å‘å‡½æ•° NSinvocation *invocation = [NSInvocation invocationWithMethodSignature:methodSignature];[invocation invoke]; objc_msgSendçš„ä½œç”¨: å®ƒé¦–å…ˆæ‰¾åˆ° SEL å¯¹åº”çš„æ–¹æ³•å®žçŽ° IMPã€‚å› ä¸ºä¸åŒçš„ç±»å¯¹åŒä¸€æ–¹æ³•å¯èƒ½ä¼šæœ‰ä¸åŒçš„å®žçŽ°ï¼Œæ‰€ä»¥æ‰¾åˆ°çš„æ–¹æ³•å®žçŽ°ä¾èµ–äºŽæ¶ˆæ¯æŽ¥æ”¶è€…çš„ç±»åž‹ ç„¶åŽå°†æ¶ˆæ¯æŽ¥æ”¶è€…å¯¹è±¡(æŒ‡å‘æ¶ˆæ¯æŽ¥æ”¶è€…å¯¹è±¡çš„æŒ‡é’ˆ)ä»¥åŠæ–¹æ³•ä¸­æŒ‡å®šçš„å‚æ•°ä¼ é€’ç»™æ–¹æ³•å®žçŽ° IMPã€‚ æœ€åŽï¼Œå°†æ–¹æ³•å®žçŽ°çš„è¿”å›žå€¼ä½œä¸ºè¯¥å‡½æ•°çš„è¿”å›žå€¼è¿”å›žã€‚ æ³¨æ„ï¼šå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œé¦–å…ˆæ ¹æ®ç±»çš„infoæ¥åˆ†é…å†…å­˜ï¼Œç„¶åŽåˆå§‹åŒ–æˆå‘˜å˜é‡ï¼Œå…¶ä¸­isaæŒ‡é’ˆä¹Ÿä¼šè¢«åˆå§‹åŒ–ï¼Œè®©è¿™ä¸ªå¯¹è±¡æœ‰è®¿é—®å…¶ç±»çš„èƒ½åŠ›ï¼Œå½“æ¶ˆæ¯å‘é€ç»™ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œobjc_msgSendé€šè¿‡å¯¹è±¡çš„isaæŒ‡é’ˆèŽ·å–åˆ°ç±»çš„ç»“æž„ä½“ï¼Œç„¶åŽåœ¨æ–¹æ³•åˆ†å‘è¡¨é‡Œé¢æŸ¥æ‰¾æ–¹æ³•çš„selectorã€‚å¦‚æžœæ²¡æœ‰æ‰¾åˆ°selectorï¼Œåˆ™é€šè¿‡objc_msgSendç»“æž„ä½“ä¸­çš„æŒ‡å‘çˆ¶ç±»çš„æŒ‡é’ˆæ‰¾åˆ°å…¶çˆ¶ç±»ï¼Œå¹¶åœ¨çˆ¶ç±»çš„åˆ†å‘è¡¨é‡Œé¢æŸ¥æ‰¾æ–¹æ³•çš„selectorã€‚ä¾æ­¤ï¼Œä¼šä¸€ç›´æ²¿ç€ç±»çš„ç»§æ‰¿ä½“ç³»åˆ°è¾¾NSObjectç±»ã€‚ä¸€æ—¦å®šä½åˆ°selectorï¼Œå‡½æ•°ä¼šå°±èŽ·å–åˆ°äº†å®žçŽ°çš„å…¥å£ç‚¹ï¼Œå¹¶ä¼ å…¥ç›¸åº”çš„å‚æ•°æ¥æ‰§è¡Œæ–¹æ³•çš„å…·ä½“å®žçŽ°ã€‚å¦‚æžœæœ€åŽæ²¡æœ‰å®šä½åˆ°selectorï¼Œåˆ™ä¼šèµ°æ¶ˆæ¯è½¬å‘æµç¨‹ã€‚åŠ¨æ€ç»‘å®šä¸ºæˆ‘ä»¬å†™ä»£ç æä¾›äº†æ–¹ä¾¿ï¼Œå´å¸¦æ¥äº†æ€§èƒ½çš„æŸè€—ï¼Œå› ä¸ºå‡½æ•°çš„è°ƒç”¨é€šè¿‡åœ°å€å¯ä»¥ç›´æŽ¥ç¡®å®šï¼Œè€Œæ–¹æ³•éœ€è¦é€šè¿‡å‡½æ•°çš„æŸ¥æ‰¾ï¼Œä½†æ˜¯æ–¹æ³•çš„ç¼“å­˜ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ æ¶ˆæ¯è½¬å‘æœºåˆ¶æ¶ˆæ¯è½¬å‘ç”¨åˆ°çš„æ–¹æ³•(æ¶ˆæ¯æ‹¦æˆªç”¨åˆ°çš„æ–¹æ³•) 12345+ (BOOL)resolveClassMethod:(SEL)sel;+ (BOOL)resolveInstanceMethod:(SEL)sel;//åŽä¸¤ä¸ªæ–¹æ³•éœ€è¦è½¬å‘åˆ°å…¶ä»–çš„ç±»å¤„ç†- (id)forwardingTargetForSelector:(SEL)aSelector;- (void)forwardInvocation:(NSInvocation *)anInvocation; æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æœ‰ä¸¤ç§å½¢å¼123[object message];[object performSelector:@selector(method) withObject:nil]; ç¬¬ä¸€ç§æˆ‘ä»¬å¯ä»¥ç¡®å®šå¯¹è±¡æ˜¯å¦èƒ½å¤Ÿå¤„ç†è¯¥æ–¹æ³•ï¼Œå¦‚æžœæ²¡æœ‰å£°æ˜Žç¼–è¯‘å™¨ä¼šç›´æŽ¥æŠ¥é”™ï¼Œä¸è¿‡ä¹Ÿå­˜åœ¨æ²¡æœ‰æ–¹æ³•å®žçŽ°çš„é£Žé™©ï¼Œç¬¬äºŒç§æ–¹å¼å°±ä¼šç›´æŽ¥ç¼–è¯‘é€šè¿‡ï¼Œè¿è¡Œå´©æºƒã€‚è§„é¿çš„æ–¹æ³•æœ‰ä¸¤ç§ ç¬¬ä¸€å°±æ˜¯åœ¨è°ƒç”¨æ–¹æ³•ä¹‹å‰åˆ¤æ–­æ˜¯å¦è¯¥æ–¹æ³•å®žçŽ° 123if ([self respondsToSelector:@selector(method)]) &#123; [self performSelector:@selector(method)];&#125; æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼šé€šè¿‡è¿™ä¸€æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥å‘Šè¯‰å¯¹è±¡å¦‚ä½•å¤„ç†æœªçŸ¥çš„æ¶ˆæ¯ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹è±¡æŽ¥æ”¶åˆ°æœªçŸ¥çš„æ¶ˆæ¯ï¼Œä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼Œé€šè¿‡æŽ§åˆ¶å°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»¥ä¸‹å¼‚å¸¸ä¿¡æ¯ï¼š 123-[SUTRuntimeMethod method]: unrecognized selector sent to instance 0x100111940*** Terminating app due to uncaught exception &apos;NSInvalidArgumentException&apos;, reason: &apos;-[SUTRuntimeMethod method]: unrecognized selector sent to instance 0x100111940&apos; è¿™æ®µå¼‚å¸¸ä¿¡æ¯å®žé™…ä¸Šæ˜¯ç”±NSObjectçš„â€doesNotRecognizeSelectorâ€æ–¹æ³•æŠ›å‡ºçš„ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–ä¸€äº›æŽªæ–½ï¼Œè®©æˆ‘ä»¬çš„ç¨‹åºæ‰§è¡Œç‰¹å®šçš„é€»è¾‘ï¼Œè€Œé¿å…ç¨‹åºçš„å´©æºƒã€‚æ¶ˆæ¯è½¬å‘æœºåˆ¶åŸºæœ¬ä¸Šåˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š åŠ¨æ€æ–¹æ³•è§£æž å¤‡ç”¨æŽ¥æ”¶è€… å®Œæ•´è½¬å‘ åŠ¨æ€æ–¹æ³•è§£æžå¯¹è±¡åœ¨æŽ¥æ”¶åˆ°æœªçŸ¥çš„æ¶ˆæ¯æ—¶ï¼Œé¦–å…ˆä¼šè°ƒç”¨æ‰€å±žç±»çš„ç±»æ–¹æ³•+resolveInstanceMethod:(å®žä¾‹æ–¹æ³•)æˆ–è€…+resolveClassMethod:(ç±»æ–¹æ³•)ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æœ‰æœºä¼šä¸ºè¯¥æœªçŸ¥æ¶ˆæ¯æ–°å¢žä¸€ä¸ªâ€å¤„ç†æ–¹æ³•â€â€œã€‚ä¸è¿‡ä½¿ç”¨è¯¥æ–¹æ³•çš„å‰ææ˜¯æˆ‘ä»¬å·²ç»å®žçŽ°äº†è¯¥â€å¤„ç†æ–¹æ³•â€ï¼Œåªéœ€è¦åœ¨è¿è¡Œæ—¶é€šè¿‡class_addMethodå‡½æ•°åŠ¨æ€æ·»åŠ åˆ°ç±»é‡Œé¢å°±å¯ä»¥äº†ã€‚ 123456789101112void functionForMethod1(id self, SEL _cmd) &#123; NSLog(@&quot;%@, %p&quot;, self, _cmd);&#125;+ (BOOL)resolveInstanceMethod:(SEL)sel &#123; NSString *selectorString = NSStringFromSelector(sel); if ([selectorString isEqualToString:@&quot;method1&quot;]) &#123; class_addMethod(self.class, @selector(method1), (IMP)functionForMethod1, &quot;@:&quot;); &#125; return [super resolveInstanceMethod:sel];&#125; ä¸è¿‡è¿™ç§æ–¹æ¡ˆæ›´å¤šçš„æ˜¯ä¸ºäº†å®žçŽ°@dynamicå±žæ€§ã€‚ å¤‡ç”¨æŽ¥æ”¶è€…1- (id)forwardingTargetForSelector:(SEL)aSelector å¦‚æžœä¸€ä¸ªå¯¹è±¡å®žçŽ°äº†è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶è¿”å›žä¸€ä¸ªéžnilçš„ç»“æžœï¼Œåˆ™è¿™ä¸ªå¯¹è±¡ä¼šä½œä¸ºæ¶ˆæ¯çš„æ–°æŽ¥æ”¶è€…ï¼Œä¸”æ¶ˆæ¯ä¼šè¢«åˆ†å‘åˆ°è¿™ä¸ªå¯¹è±¡ã€‚å½“ç„¶è¿™ä¸ªå¯¹è±¡ä¸èƒ½æ˜¯selfè‡ªèº«ï¼Œå¦åˆ™å°±æ˜¯å‡ºçŽ°æ— é™å¾ªçŽ¯ã€‚å½“ç„¶ï¼Œå¦‚æžœæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šç›¸åº”çš„å¯¹è±¡æ¥å¤„ç†aSelectorï¼Œåˆ™åº”è¯¥è°ƒç”¨çˆ¶ç±»çš„å®žçŽ°æ¥è¿”å›žç»“æžœã€‚ 12345678910111213141516171819202122232425262728293031323334353637interface SUTRuntimeMethodHelper : NSObject- (void)method2;endimplementation SUTRuntimeMethodHelper- (void)method2 &#123; NSLog(@&quot;%@, %p&quot;, self, _cmd);&#125;@(02-Foundation)end#pragma mark -@interface SUTRuntimeMethod () &#123; SUTRuntimeMethodHelper *_helper;&#125;@end@implementation SUTRuntimeMethod+ (instancetype)object &#123; return [[self alloc] init];&#125;- (instancetype)init &#123; self = [super init]; if (self != nil) &#123; _helper = [[SUTRuntimeMethodHelper alloc] init]; &#125; return self;&#125;- (void)test &#123; [self performSelector:@selector(method2)];&#125;- (id)forwardingTargetForSelector:(SEL)aSelector &#123; NSLog(@&quot;forwardingTargetForSelector&quot;); NSString *selectorString = NSStringFromSelector(aSelector); // å°†æ¶ˆæ¯è½¬å‘ç»™_helperæ¥å¤„ç† if ([selectorString isEqualToString:@&quot;method2&quot;]) &#123; return _helper; &#125; return [super forwardingTargetForSelector:aSelector];&#125;@end å®Œæ•´è½¬å‘å¦‚æžœåœ¨ä¸Šä¸€æ­¥è¿˜ä¸èƒ½å¤„ç†æœªçŸ¥æ¶ˆæ¯ï¼Œåˆ™å”¯ä¸€èƒ½åšçš„å°±æ˜¯å¯ç”¨å®Œæ•´çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶äº†ã€‚æ­¤æ—¶ä¼šè°ƒç”¨ä»¥ä¸‹æ–¹æ³•1- (void)forwardInvocation:(NSInvocation *)anInvocation å¯¹è±¡ä¼šåˆ›å»ºä¸€ä¸ªè¡¨ç¤ºæ¶ˆæ¯çš„NSInvocationå¯¹è±¡ï¼ŒæŠŠä¸Žå°šæœªå¤„ç†çš„æ¶ˆæ¯æœ‰å…³çš„å…¨éƒ¨ç»†èŠ‚éƒ½å°è£…åœ¨anInvocationä¸­ï¼ŒåŒ…æ‹¬selectorï¼Œç›®æ ‡(target)å’Œå‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥åœ¨forwardInvocationæ–¹æ³•ä¸­é€‰æ‹©å°†æ¶ˆæ¯è½¬å‘ç»™å…¶å®ƒå¯¹è±¡1234567891011121314- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector &#123; NSMethodSignature *signature = [super methodSignatureForSelector:aSelector]; if (!signature) &#123; if ([SUTRuntimeMethodHelper instancesRespondToSelector:aSelector]) &#123; signature = [SUTRuntimeMethodHelper instanceMethodSignatureForSelector:aSelector]; &#125; &#125; return signature;&#125;- (void)forwardInvocation:(NSInvocation *)anInvocation &#123; if ([SUTRuntimeMethodHelper instancesRespondToSelector:anInvocation.selector]) &#123; [anInvocation invokeWithTarget:_helper]; &#125;&#125; NSObjectçš„forwardInvocation:æ–¹æ³•å®žçŽ°åªæ˜¯ç®€å•è°ƒç”¨äº†doesNotRecognizeSelector:æ–¹æ³•ï¼Œå®ƒä¸ä¼šè½¬å‘ä»»ä½•æ¶ˆæ¯ã€‚è¿™æ ·ï¼Œå¦‚æžœä¸åœ¨ä»¥ä¸Šæ‰€è¿°çš„ä¸‰ä¸ªæ­¥éª¤ä¸­å¤„ç†æœªçŸ¥æ¶ˆæ¯ï¼Œåˆ™ä¼šå¼•å‘ä¸€ä¸ªå¼‚å¸¸ã€‚ åŠ¨æ€æ–¹æ³•æ·»åŠ é¦–å…ˆè°ƒç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„æ–¹æ³•12//éšå¼è°ƒç”¨æ–¹æ³•[target performSelector:@selector(resolveAdd:) withObject:@&quot;test&quot;]; ç„¶åŽï¼Œåœ¨targetå¯¹è±¡å†…éƒ¨é‡å†™æ‹¦æˆªè°ƒç”¨çš„æ–¹æ³•ï¼ŒåŠ¨æ€æ·»åŠ æ–¹æ³•ã€‚1234567891011void runAddMethod(id self, SEL _cmd, NSString *string)&#123; NSLog(@&quot;add C IMP &quot;, string);&#125;+ (BOOL)resolveInstanceMethod:(SEL)sel&#123; //ç»™æœ¬ç±»åŠ¨æ€æ·»åŠ ä¸€ä¸ªæ–¹æ³• if ([NSStringFromSelector(sel) isEqualToString:@&quot;resolveAdd:&quot;]) &#123; class_addMethod(self, sel, (IMP)runAddMethod, &quot;v@:*&quot;); &#125; return YES;&#125; å…¶ä¸­class_addMethodçš„å››ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ï¼š Class cls ç»™å“ªä¸ªç±»æ·»åŠ æ–¹æ³•ï¼Œæœ¬ä¾‹ä¸­æ˜¯self SEL name æ·»åŠ çš„æ–¹æ³•ï¼Œæœ¬ä¾‹ä¸­æ˜¯é‡å†™çš„æ‹¦æˆªè°ƒç”¨ä¼ è¿›æ¥çš„selectorã€‚ IMP imp æ–¹æ³•çš„å®žçŽ°ï¼ŒCæ–¹æ³•çš„æ–¹æ³•å®žçŽ°å¯ä»¥ç›´æŽ¥èŽ·å¾—ã€‚å¦‚æžœæ˜¯OCæ–¹æ³•ï¼Œå¯ä»¥ç”¨- + (IMP)instanceMethodForSelector:(SEL)aSelector;èŽ·å¾—æ–¹æ³•çš„å®žçŽ°ã€‚ â€œv@:*â€æ–¹æ³•çš„ç­¾åï¼Œä»£è¡¨æœ‰ä¸€ä¸ªå‚æ•°çš„æ–¹æ³• ###Method Swizzlingä¸ºäº†swizzleä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ†å‘è¡¨ä¸­å°†ä¸€ä¸ªæ–¹æ³•çš„çŽ°æœ‰çš„é€‰æ‹©å™¨æ˜ å°„åˆ°ä¸åŒçš„å®žçŽ°ï¼Œè€Œå°†è¯¥é€‰æ‹©å™¨å¯¹åº”çš„åŽŸå§‹å®žçŽ°å…³è”åˆ°ä¸€ä¸ªæ–°çš„é€‰æ‹©å™¨ä¸­ã€‚123456789101112131415161718192021222324252627282930313233#import &lt;objc/runtime.h&gt;@implementation UIViewController (Tracking)+ (void)load &#123; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; Class class = [self class]; // When swizzling a class method, use the following: // Class class = object_getClass((id)self); SEL originalSelector = @selector(viewWillAppear:); SEL swizzledSelector = @selector(xxx_viewWillAppear:); Method originalMethod = class_getInstanceMethod(class, originalSelector); Method swizzledMethod = class_getInstanceMethod(class, swizzledSelector); BOOL didAddMethod = class_addMethod(class, originalSelector, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod)); if (didAddMethod) &#123; class_replaceMethod(class, swizzledSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod)); &#125; else &#123; method_exchangeImplementations(originalMethod, swizzledMethod); &#125; &#125;);&#125;#pragma mark - Method Swizzling- (void)xxx_viewWillAppear:(BOOL)animated &#123; [self xxx_viewWillAppear:animated]; NSLog(@&quot;viewWillAppear: %@&quot;, self);&#125;@end æ³¨æ„ Swizzlingåº”è¯¥æ€»æ˜¯åœ¨+loadä¸­æ‰§è¡Œ åœ¨Objective-Cä¸­ï¼Œè¿è¡Œæ—¶ä¼šè‡ªåŠ¨è°ƒç”¨æ¯ä¸ªç±»çš„ä¸¤ä¸ªæ–¹æ³•ã€‚+loadä¼šåœ¨ç±»åˆå§‹åŠ è½½æ—¶è°ƒç”¨ï¼Œ+initializeä¼šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ç±»çš„ç±»æ–¹æ³•æˆ–å®žä¾‹æ–¹æ³•ä¹‹å‰è¢«è°ƒç”¨ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯å¯é€‰çš„ï¼Œä¸”åªæœ‰åœ¨å®žçŽ°äº†å®ƒä»¬æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚ç”±äºŽmethod swizzlingä¼šå½±å“åˆ°ç±»çš„å…¨å±€çŠ¶æ€ï¼Œå› æ­¤è¦å°½é‡é¿å…åœ¨å¹¶å‘å¤„ç†ä¸­å‡ºçŽ°ç«žäº‰çš„æƒ…å†µã€‚+loadèƒ½ä¿è¯åœ¨ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹ä¸­è¢«åŠ è½½ï¼Œå¹¶ä¿è¯è¿™ç§æ”¹å˜åº”ç”¨çº§åˆ«çš„è¡Œä¸ºçš„ä¸€è‡´æ€§ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ+initializeåœ¨å…¶æ‰§è¡Œæ—¶ä¸æä¾›è¿™ç§ä¿è¯â€”äº‹å®žä¸Šï¼Œå¦‚æžœåœ¨åº”ç”¨ä¸­æ²¡ä¸ºç»™è¿™ä¸ªç±»å‘é€æ¶ˆæ¯ï¼Œåˆ™å®ƒå¯èƒ½æ°¸è¿œä¸ä¼šè¢«è°ƒç”¨ã€‚ Swizzlingåº”è¯¥æ€»æ˜¯åœ¨dispatch_onceä¸­æ‰§è¡Œ ä¸Žä¸Šé¢ç›¸åŒï¼Œå› ä¸ºswizzlingä¼šæ”¹å˜å…¨å±€çŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨è¿è¡Œæ—¶é‡‡å–ä¸€äº›é¢„é˜²æŽªæ–½ã€‚åŽŸå­æ€§å°±æ˜¯è¿™æ ·ä¸€ç§æŽªæ–½ï¼Œå®ƒç¡®ä¿ä»£ç åªè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œä¸ç®¡æœ‰å¤šå°‘ä¸ªçº¿ç¨‹ã€‚GCDçš„dispatch_onceå¯ä»¥ç¡®ä¿è¿™ç§è¡Œä¸ºï¼Œæˆ‘ä»¬åº”è¯¥å°†å…¶ä½œä¸ºmethod swizzlingçš„æœ€ä½³å®žè·µ å°å¿ƒæ— é™å¾ªçŽ¯ å’‹çœ‹ä¸ŠåŽ»æ˜¯ä¼šå¯¼è‡´æ— é™å¾ªçŽ¯çš„ã€‚ä½†ä»¤äººæƒŠå¥‡çš„æ˜¯ï¼Œå¹¶æ²¡æœ‰å‡ºçŽ°è¿™ç§æƒ…å†µã€‚åœ¨swizzlingçš„è¿‡ç¨‹ä¸­ï¼Œæ–¹æ³•ä¸­çš„[self xxx_viewWillAppear:animated]å·²ç»è¢«é‡æ–°æŒ‡å®šåˆ°UIViewControllerç±»çš„-viewWillAppear:ä¸­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ä¼šäº§ç”Ÿæ— é™å¾ªçŽ¯ã€‚ä¸è¿‡å¦‚æžœæˆ‘ä»¬è°ƒç”¨çš„æ˜¯[self viewWillAppear:animated]ï¼Œåˆ™ä¼šäº§ç”Ÿæ— é™å¾ªçŽ¯ï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•çš„å®žçŽ°åœ¨è¿è¡Œæ—¶å·²ç»è¢«é‡æ–°æŒ‡å®šä¸ºxxx_viewWillAppear:äº†ã€‚ å¯¹è±¡å…³è”çŽ°åœ¨ä½ å‡†å¤‡ç”¨ä¸€ä¸ªç³»ç»Ÿçš„ç±»ï¼Œä½†æ˜¯ç³»ç»Ÿçš„ç±»å¹¶ä¸èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œä½ éœ€è¦é¢å¤–æ·»åŠ ä¸€ä¸ªå±žæ€§ã€‚è¿™ç§æƒ…å†µçš„ä¸€èˆ¬è§£å†³åŠžæ³•å°±æ˜¯ç»§æ‰¿ã€‚ä½†æ˜¯ï¼Œåªå¢žåŠ ä¸€ä¸ªå±žæ€§ï¼Œå°±åŽ»ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œæ€»æ˜¯è§‰å¾—å¤ªéº»çƒ¦ç±»ã€‚è¿™ä¸ªæ—¶å€™ï¼Œruntimeçš„å…³è”å±žæ€§å°±å‘æŒ¥å®ƒçš„ä½œç”¨äº†ã€‚123456//é¦–å…ˆå®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œç”¨å®ƒçš„åœ°å€ä½œä¸ºå…³è”å¯¹è±¡çš„keystatic char associatedObjectKey;//è®¾ç½®å…³è”å¯¹è±¡objc_setAssociatedObject(target, &amp;associatedObjectKey, @&quot;æ·»åŠ çš„å­—ç¬¦ä¸²å±žæ€§&quot;, OBJC_ASSOCIATION_RETAIN_NONATOMIC); //èŽ·å–å…³è”å¯¹è±¡NSString *string = objc_getAssociatedObject(target, &amp;associatedObjectKey);NSLog(@&quot;AssociatedObject = %@&quot;, string); objc_setAssociatedObjectçš„å››ä¸ªå‚æ•°ï¼š id objectç»™è°è®¾ç½®å…³è”å¯¹è±¡ã€‚ const void *keyå…³è”å¯¹è±¡å”¯ä¸€çš„keyï¼ŒèŽ·å–æ—¶ä¼šç”¨åˆ°ã€‚ id valueå…³è”å¯¹è±¡ã€‚ objc_AssociationPolicyå…³è”ç­–ç•¥ï¼Œæœ‰ä»¥ä¸‹å‡ ç§ç­–ç•¥ï¼šenum { OBJC_ASSOCIATION_ASSIGN = 0, OBJC_ASSOCIATION_RETAIN_NONATOMIC = 1, OBJC_ASSOCIATION_COPY_NONATOMIC = 3, OBJC_ASSOCIATION_RETAIN = 01401, OBJC_ASSOCIATION_COPY = 01403};å¦‚æžœä½ ç†Ÿæ‚‰OCï¼Œçœ‹åå­—åº”è¯¥çŸ¥é“è¿™å‡ ç§ç­–ç•¥çš„æ„æ€äº†å§ã€‚ objc_getAssociatedObjectçš„ä¸¤ä¸ªå‚æ•°ã€‚ id objectèŽ·å–è°çš„å…³è”å¯¹è±¡ã€‚ const void *keyæ ¹æ®è¿™ä¸ªå”¯ä¸€çš„keyèŽ·å–å…³è”å¯¹è±¡ã€‚å…¶å®žï¼Œä½ è¿˜å¯ä»¥æŠŠæ·»åŠ å’ŒèŽ·å–å…³è”å¯¹è±¡çš„æ–¹æ³•å†™åœ¨ä½ éœ€è¦ç”¨åˆ°è¿™ä¸ªåŠŸèƒ½çš„ç±»çš„ç±»åˆ«ä¸­ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚12345678//æ·»åŠ å…³è”å¯¹è±¡- (void)addAssociatedObject:(id)object&#123; objc_setAssociatedObject(self, @selector(getAssociatedObject), object, OBJC_ASSOCIATION_RETAIN_NONATOMIC);&#125;//èŽ·å–å…³è”å¯¹è±¡- (id)getAssociatedObject&#123; return objc_getAssociatedObject(self, _cmd);&#125; æ³¨æ„ï¼šè¿™é‡Œé¢æˆ‘ä»¬æŠŠgetAssociatedObjectæ–¹æ³•çš„åœ°å€ä½œä¸ºå”¯ä¸€çš„keyï¼Œ_cmdä»£è¡¨å½“å‰è°ƒç”¨æ–¹æ³•çš„åœ°å€ã€‚ æ€»ç»“ æ–¹æ³•è°ƒç”¨çš„æœ¬è´¨å°±æ˜¯é€šè¿‡instance/class+SELæ¥æ‰¾åˆ°IMPï¼Œæœ€ç»ˆè°ƒç”¨IMPçš„å‡½æ•°æ¥æ‰§è¡Œè°ƒç”¨çš„ æ–¹æ³•è°ƒç”¨å¯ä»¥ä½¿ç”¨invokeçš„æ–¹æ³• å¢žåŠ æ–¹æ³•çš„æ˜¯åœ¨æŸä¸ªç±»ä¸­å¢žåŠ Methodï¼Œä¹Ÿå°±æ˜¯å¢žåŠ SLEå’ŒIMP æ›¿æ¢æ–¹æ³•çš„æ˜¯æ›´æ”¹SLEä¸ŽIMPçš„æ˜ å°„å…³ç³» å‚è€ƒï¼šå—å³°å­-runtime iOS-runtimeç†è§£-ç®€ä¹¦]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Runloopæ¦‚è¿°]]></title>
    <url>%2F2015%2F07%2F21%2F2015%2FRunloop%E6%A6%82%E8%BF%B0%2F</url>
    <content type="text"><![CDATA[å‚è€ƒibiremeâ€™s Block 1.åŸºæœ¬æ¦‚å¿µä¸ºä»€ä¹ˆéœ€è¦runloop ä½¿ç¨‹åºä¸€ç›´æ´»ç€ å†³å®šç¨‹åºä½•æ—¶åº”è¯¥å¤„ç†å“ªäº›event è°ƒç”¨è§£è€¦(message queue) èŠ‚çœCPUæ—¶é—´ å¼€å¯ä¸»çº¿ç¨‹è¦æ¶ˆè€—1Må†…å­˜ï¼Œå¼€å¯ä¸€ä¸ªåŽå°çº¿ç¨‹éœ€è¦æ¶ˆè€—512kå†…å­˜ï¼Œæˆ‘ä»¬åº”å½“åœ¨çº¿ç¨‹æ²¡æœ‰ä»»åŠ¡çš„æ—¶å€™ä¼‘çœ ï¼Œæ¥é‡Šæ”¾æ‰€å ç”¨çš„èµ„æº ä¸Žrunloopç›¸å…³çš„ç±» NSTimer UIEvent Autorelease NSObjecâ€“&gt;NSDelayedPerforming NSObjecâ€“&gt;NSThreadPerformAddition CADisplayLink CATransition CAAnimation dispatch_get_main_queue() NSURLConnection runloopä¸Žçº¿ç¨‹ æ¯æ¡çº¿ç¨‹éƒ½æœ‰å”¯ä¸€çš„ä¸€ä¸ªä¸Žä¹‹å¯¹åº”çš„RunLoopå¯¹è±¡ ä¸»çº¿ç¨‹çš„RunLoopå·²ç»è‡ªåŠ¨åˆ›å»ºå¥½äº†ï¼Œå­çº¿ç¨‹çš„RunLoopéœ€è¦ä¸»åŠ¨åˆ›å»º RunLoopåœ¨ç¬¬ä¸€æ¬¡èŽ·å–æ—¶åˆ›å»ºï¼Œåœ¨çº¿ç¨‹ç»“æŸæ—¶é”€æ¯ ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯æ²¡æœ‰å¿…è¦åŽ»å¯ç”¨çº¿ç¨‹çš„RunLoopçš„ï¼Œé™¤éžä½ åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸­éœ€è¦é•¿ä¹…çš„æ£€æµ‹æŸä¸ªäº‹ä»¶ï¼Œæ¯”å¦‚è¯´ä¸»çº¿ç¨‹ã€‚ çº¿ç¨‹å’ŒRunLoopä¹‹é—´æ˜¯ä»¥é”®å€¼å¯¹çš„å½¢å¼ä¸€ä¸€å¯¹åº”çš„ï¼Œå…¶ä¸­keyæ˜¯threadï¼Œvalueæ˜¯runLoop(è¿™ç‚¹å¯ä»¥ä»Žè‹¹æžœå…¬å¼€çš„æºç ä¸­çœ‹å‡ºæ¥)ï¼Œå…¶å®žRunLoopæ˜¯ç®¡ç†çº¿ç¨‹çš„ä¸€ç§æœºåˆ¶ï¼Œè¿™ç§æœºåˆ¶ä¸ä»…åœ¨IOSä¸Šæœ‰ï¼Œåœ¨Node.jsä¸­çš„EventLoopï¼ŒAndroidä¸­çš„Looperï¼Œéƒ½æœ‰ç±»ä¼¼çš„æ¨¡å¼ èŽ·å–runloop Foundation12[NSRunLoop currentRunLoop]; // èŽ·å¾—å½“å‰çº¿ç¨‹çš„RunLoopå¯¹è±¡[NSRunLoop mainRunLoop]; // èŽ·å¾—ä¸»çº¿ç¨‹çš„RunLoopå¯¹è±¡ Core Foundation12CFRunLoopGetCurrent(); // èŽ·å¾—å½“å‰çº¿ç¨‹çš„RunLoopå¯¹è±¡CFRunLoopGetMain(); // èŽ·å¾—ä¸»çº¿ç¨‹çš„RunLoopå¯¹è±¡ runloopåŸºæœ¬ç»“æž„NSRunLoopç»§æ‰¿è‡ªNSObject runloopä¸ŽThreadä¸€ä¸€å¯¹åº”ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯ä¸€ä¸ªthreadåªèƒ½æœ‰ä¸€runloopï¼Œæˆ‘ä»¬å¯ä»¥ç»™runloopåµŒå¥—runloop CFRunLoopMode CFRunLoopModeRefä»£è¡¨RunLoopçš„è¿è¡Œæ¨¡å¼ ä¸€ä¸ª RunLoop åŒ…å«è‹¥å¹²ä¸ª Modeï¼Œæ¯ä¸ªModeåˆåŒ…å«è‹¥å¹²ä¸ªSource/Timer/Observer æ¯æ¬¡RunLoopå¯åŠ¨æ—¶ï¼Œåªèƒ½æŒ‡å®šå…¶ä¸­ä¸€ä¸ª Modeï¼Œè¿™ä¸ªModeè¢«ç§°ä½œ CurrentMode å¦‚æžœéœ€è¦åˆ‡æ¢Modeï¼Œåªèƒ½é€€å‡ºLoopï¼Œå†é‡æ–°æŒ‡å®šä¸€ä¸ªModeè¿›å…¥ è¿™æ ·åšä¸»è¦æ˜¯ä¸ºäº†åˆ†éš”å¼€ä¸åŒç»„çš„Source/Timer/Observerï¼Œè®©å…¶äº’ä¸å½±å“ ç³»ç»Ÿé»˜è®¤æ³¨å†Œäº†5ä¸ªMode:(å‰ä¸¤ä¸ªè·Ÿæœ€åŽä¸€ä¸ªå¸¸ç”¨) kCFRunLoopDefaultModeï¼šAppçš„é»˜è®¤Modeï¼Œé€šå¸¸ä¸»çº¿ç¨‹æ˜¯åœ¨è¿™ä¸ªModeä¸‹è¿è¡Œ UITrackingRunLoopModeï¼šç•Œé¢è·Ÿè¸ª Modeï¼Œç”¨äºŽ ScrollView è¿½è¸ªè§¦æ‘¸æ»‘åŠ¨ï¼Œä¿è¯ç•Œé¢æ»‘åŠ¨æ—¶ä¸å—å…¶ä»– Mode å½±å“ UIInitializationRunLoopMode: åœ¨åˆšå¯åŠ¨ App æ—¶ç¬¬è¿›å…¥çš„ç¬¬ä¸€ä¸ª Modeï¼Œå¯åŠ¨å®ŒæˆåŽå°±ä¸å†ä½¿ç”¨ GSEventReceiveRunLoopMode: æŽ¥å—ç³»ç»Ÿäº‹ä»¶çš„å†…éƒ¨ Modeï¼Œé€šå¸¸ç”¨ä¸åˆ° kCFRunLoopCommonModes: è¿™æ˜¯ä¸€ä¸ªå ä½ç”¨çš„Modeï¼Œä¸æ˜¯ä¸€ç§çœŸæ­£çš„Mod CFRunLoopSource CFRunLoopSourceRefæ˜¯äº‹ä»¶æºï¼ˆè¾“å…¥æºï¼‰ æŒ‰ç…§å®˜æ–¹æ–‡æ¡£çš„åˆ†ç±» Port-Based Sources (åŸºäºŽç«¯å£,è·Ÿå…¶ä»–çº¿ç¨‹äº¤äº’,é€šè¿‡å†…æ ¸å‘å¸ƒçš„æ¶ˆæ¯) Custom Input Sources (è‡ªå®šä¹‰) Cocoa Perform Selector Sources (performSelectorâ€¦æ–¹æ³•) æŒ‰ç…§å‡½æ•°è°ƒç”¨æ ˆçš„åˆ†ç±» Source0ï¼šéžåŸºäºŽPortçš„ Source1ï¼šåŸºäºŽPortçš„ Source0: eventäº‹ä»¶ï¼Œåªå«æœ‰å›žè°ƒï¼Œéœ€è¦å…ˆè°ƒç”¨CFRunLoopSourceSignal(source)ï¼Œå°†è¿™ä¸ª Source æ ‡è®°ä¸ºå¾…å¤„ç†ï¼Œç„¶åŽæ‰‹åŠ¨è°ƒç”¨ CFRunLoopWakeUp(runloop) æ¥å”¤é†’ RunLoopã€‚Source1: åŒ…å«äº†ä¸€ä¸ª mach_port å’Œä¸€ä¸ªå›žè°ƒï¼Œè¢«ç”¨äºŽé€šè¿‡å†…æ ¸å’Œå…¶ä»–çº¿ç¨‹ç›¸äº’å‘é€æ¶ˆæ¯,èƒ½ä¸»åŠ¨å”¤é†’ RunLoop çš„çº¿ç¨‹ã€‚ CFRunLoopTimeræœ¬è´¨å°±æ˜¯ä¸€ä¸ªtimer12345+ (NSTimer *)timerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(nullable id)userInfo repeats:(BOOL)yesOrNo;+ (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(nullable id)userInfo repeats:(BOOL)yesOrNo;- (void)performSelector:(SEL)aSelector withObject:(nullable id)anArgument afterDelay:(NSTimeInterval)delay;//è¯¥æ–¹æ³•å®šä¹‰åœ¨RunLoopä¸­ï¼Œä¸è¿‡æ˜¯NSObjectçš„åˆ†ç±»ï¼›+ (CADisplayLink *)displayLinkWithTarget:(id)target selector:(SEL)sel;//è¿™ä¸ªç±»æ–¹æ³•å®šä¹‰åœ¨DisPlayLinkä¸­- (void)addToRunLoop:(NSRunLoop *)runloop forMode:(NSString *)mode;//è¿™ä¹Ÿæ˜¯DisPlayLinkä¸­çš„æ–¹æ³• CFRunLoopTimerRefæ˜¯åŸºäºŽæ—¶é—´çš„è§¦å‘å™¨ åŸºæœ¬ä¸Šè¯´çš„å°±æ˜¯NSTimer(CADisplayLinkä¹Ÿæ˜¯åŠ åˆ°RunLoop),å®ƒå—RunLoopçš„Modeå½±å“ GCDçš„å®šæ—¶å™¨ä¸å—RunLoopçš„Modeå½±å“CFRunLoopObserver CFRunLoopObserverRefæ˜¯è§‚å¯Ÿè€…ï¼Œèƒ½å¤Ÿç›‘å¬RunLoopçš„çŠ¶æ€æ”¹å˜ å¯ä»¥ç›‘å¬çš„æ—¶é—´ç‚¹æœ‰ä»¥ä¸‹å‡ ä¸ª åº”ç”¨ CADisplayLink NSTimer ImageViewæ˜¾ç¤º PerformSelector å¸¸é©»çº¿ç¨‹ è‡ªåŠ¨é‡Šæ”¾æ±  NSURLConnectionçš„æ‰§è¡Œè¿‡ç¨‹ AFNetWorkingä¸­æ˜¯å¦‚ä½•ä½¿ç”¨RunLoopçš„? æ·±å…¥ç†è§£Perform Selector12345678910111213- (void)tryPerformSelectorOnMianThread&#123;dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; [self performSelector:@selector(perform1) withObject:nil]; &#125;);&#125;- (void)mainThreadMethod&#123;NSLog(@&quot;execute %s&quot;,__func__);// print: execute -[ViewController mainThreadMethod]&#125; 123456789101112131415- (void)tryPerformSelectorOnBackGroundThread&#123;dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;[self performSelector:@selector(backGroundThread) onThread:[NSThread currentThread] withObject:nil waitUntilDone:NO];&#125;);&#125;- (void)backGroundThread&#123;NSLog(@&quot;%u&quot;,[NSThread isMainThread]);NSLog(@&quot;execute %s&quot;,__FUNCTION__);&#125; è¿™æ ·æˆ‘ä»¬åœ¨ViewDidLoadä¸­è°ƒç”¨tryPerformSelectorOnMianThread,å°±ä¼šç«‹å³æ‰§è¡Œï¼Œå¹¶ä¸”è¾“å‡º:print: execute -[ViewController mainThreadMethod];ä¸Šè¾¹çš„performselectoråœ¨å­çº¿ç¨‹ä¸­ä¾ç„¶å¯ä»¥æ‰§è¡Œï¼Œå› ä¸ºå®ƒä¸ä¾èµ–äºŽtimerï¼Œä¸éœ€è¦å¯åŠ¨runloopï¼Œä½†æ˜¯ä¸‹è¾¹çš„åšæ³•å°±ä¸è¡Œã€‚ å’Œä¸Šé¢çš„ä¾‹å­ä¸€æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨GCD,è®©è¿™ä¸ªæ–¹æ³•åœ¨åŽå°çº¿ç¨‹ä¸­æ‰§è¡Œ 123456789101112131415- (void)tryPerformSelectorOnBackGroundThread&#123;dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;[self performSelector:@selector(backGroundThread) onThread:[NSThread currentThread] withObject:nil waitUntilDone:NO];&#125;);&#125;- (void)backGroundThread&#123;NSLog(@&quot;%u&quot;,[NSThread isMainThread]);NSLog(@&quot;execute %s&quot;,__FUNCTION__);&#125; åŒæ ·çš„ï¼Œæˆ‘ä»¬è°ƒç”¨tryPerformSelectorOnBackGroundThreadè¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬ä¼šå‘çŽ°ï¼Œä¸‹é¢çš„backGroundThreadä¸ä¼šè¢«è°ƒç”¨ï¼Œè¿™æ˜¯ä»€ä¹ˆåŽŸå› å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œåœ¨è°ƒç”¨performSelector:onThread: withObject: waitUntilDoneçš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šç»™æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªTimerçš„sourceï¼ŒåŠ åˆ°å¯¹åº”çš„RunLoopä¸ŠåŽ»ï¼Œç„¶è€Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ²¡æœ‰RunLoop,å¦‚æžœæˆ‘ä»¬åŠ ä¸ŠRunLoop:1234567891011- (void)tryPerformSelectorOnBackGroundThread&#123;dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;[self performSelector:@selector(backGroundThread) onThread:[NSThread currentThread] withObject:nil waitUntilDone:NO];NSRunLoop *runLoop = [NSRunLoop currentRunLoop];[runLoop run];&#125;);&#125; è¿™æ—¶å°±ä¼šå‘çŽ°æˆ‘ä»¬çš„æ–¹æ³•æ­£å¸¸è¢«è°ƒç”¨äº†ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ä¸­çš„perfom selectorå´èƒ½å¤Ÿæ­£å¸¸è°ƒç”¨å‘¢ï¼Ÿé€šè¿‡ä¸Šé¢çš„ä¾‹å­ç›¸ä¿¡ä½ å·²ç»çŒœåˆ°äº†ï¼Œä¸»çº¿ç¨‹çš„RunLoopæ˜¯ä¸€ç›´å­˜åœ¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„æ—¶å€™ï¼Œæ— éœ€å†æ·»åŠ RunLoopã€‚å°ç»“:å½“perform selectoråœ¨åŽå°çº¿ç¨‹ä¸­æ‰§è¡Œçš„æ—¶å€™ï¼Œè¿™ä¸ªçº¿ç¨‹å¿…é¡»æœ‰ä¸€ä¸ªå¼€å¯çš„runLoop Perform Selector afterå½“æŸä¸ªäº‹ä»¶è§¦å‘äº†æŸæ®µä»£ç æ‰§è¡Œçš„æ—¶å€™ï¼Œæ˜¯è¦åœ¨ä¸€ä¸ªrunloopä¸­æ‰§è¡Œå®Œæ¯•çš„ï¼Œå¦‚æžœè¿™ä¸ªçº¿ç¨‹æœ‰runloopçš„è¯ï¼Œè¿™æ ·å¦‚æžœåœ¨ä¸€ä¸ªä¸»çº¿ç¨‹æœ‰ä¸€å¤§æ®µä»£ç è¦æ‰§è¡Œï¼Œé‚£ä¹ˆå°±ä¼šé˜»ç¢è¿™ä¸ªçº¿ç¨‹ï¼Œæˆ–è€…æ›´å‡†ç¡®æ¥è®²æ˜¯è®©è¿™ä¸ªrunloopä¸èƒ½åŽ»å¤„ç†ç”¨æˆ·äº‹ä»¶å’Œåˆ·æ–°å±å¹•ï¼Œé‚£è¯¥æ€Žä¹ˆåŠžå‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯è¿™ä¸ªæ–¹æ³•- (void)performSelector:(SEL)aSelector withObject:(nullable id)anArgument afterDelay:(NSTimeInterval)delayæˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªå¤§æ®µçš„æ–¹æ³•æ‰§è¡Œåˆ‡åˆ†æˆå‡ ä»½ï¼Œç„¶åŽç”¨è¯¥æ–¹æ³•è¿žæŽ¥ï¼Œæ¯æ¬¡æ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œå°±ä¼šè¿›å…¥åˆ°ä¸‹ä¸€ä¸ªrunloopæ‰ä¼šæ‰§è¡Œï¼Œè€Œæ¯ä¸ªrunloopçš„æ‰§è¡Œï¼Œç”¨æˆ·äº‹ä»¶çš„å¤„ç†å’Œå±å¹•åˆ·æ–°æ˜¯åœ¨ä»£ç æ‰§è¡Œå‰è¾¹çš„ï¼Œæ‰€ä»¥è¿™æ ·å°±æœ‰æœºä¼šä¸­æ–­ä»£ç çš„æ‰§è¡Œï¼Œå°±åƒæ˜¯ä¸‹è¾¹è¿™æ · 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677@property (nonatomic, strong) UIButton *btn1;@property (nonatomic, strong) UIButton *btn2;@property (nonatomic, assign) BOOL next;@endint b = 0;@implementation ViewController- (UIButton *)btn1 &#123; if (!_btn1) &#123; _btn1 = [UIButton buttonWithType:UIButtonTypeCustom]; [_btn1 setTitle:@&quot;ç‚¹æˆ‘1&quot; forState:UIControlStateNormal]; [_btn1 sizeToFit]; [_btn1 addTarget:self action:@selector(click1) forControlEvents:UIControlEventTouchUpInside]; [_btn1 setTitleColor:[UIColor redColor] forState:UIControlStateNormal]; &#125; return _btn1;&#125;- (UIButton *)btn2 &#123; if (!_btn2) &#123; _btn2 = [UIButton buttonWithType:UIButtonTypeCustom]; [_btn2 setTitle:@&quot;ç‚¹æˆ‘2&quot; forState:UIControlStateNormal]; [_btn2 sizeToFit]; [_btn2 addTarget:self action:@selector(click2) forControlEvents:UIControlEventTouchUpInside]; [_btn2 setTitleColor:[UIColor redColor] forState:UIControlStateNormal]; &#125; return _btn2;&#125;- (void)viewDidLoad &#123; [super viewDidLoad]; [self.view addSubview:self.btn1]; [self.view addSubview:self.btn2]; self.btn1.frame = CGRectMake(10, 30, 50, 20); self.btn2.frame = CGRectMake(100, 30, 50, 20);&#125;- (void)click1 &#123; for (int i = 0; i &lt; 3000; i++) &#123; NSLog(@&quot;%d&quot;, i); &#125;[self performSelector:@selector(perform1) withObject:nil afterDelay:0.005];&#125;- (void)perform1 &#123; for (int i = 3000; i &lt; 6000; i++) &#123; NSLog(@&quot;%d&quot;, i); &#125; [self performSelector:@selector(perform4) withObject:nil afterDelay:0.005];&#125;- (void)perform4 &#123; if (!_next) return; for (int i = 6000; i &lt; 9000; i++) &#123; NSLog(@&quot;%d&quot;, i); &#125; [self performSelector:@selector(perform5) withObject:nil afterDelay:0.005];&#125;- (void)perform5 &#123; if (!_next) return; for (int i = 600; i &lt; 900; i++) &#123; NSLog(@&quot;%d&quot;, i); &#125;&#125;- (void)click2 &#123; _next = NO;&#125; å®žéªŒè¯æ˜Žï¼Œåªæœ‰afteræ–¹æ³•æœ‰è¿™æ ·çš„é­”åŠ›ã€‚ æ€»ç»“:å½“æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªtimeräº‹ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™è¿™ä¸ªäº‹ä»¶å°±ä¼šè¢«æ”¾åˆ°ä¸‹ä¸€ä¸ªrunloopä¸­æ‰§è¡Œï¼Œå¦‚æžœè¿™ä¸ªçº¿ç¨‹ä¸­æ ¹æœ¬å°±æ²¡æœ‰èµ·runloopï¼Œé‚£ä¹ˆä¹Ÿå°±ä¸å­˜åœ¨ä¸‹ä¸€ä¸ªrunloopï¼Œè¿™ä¸ªäº‹ä»¶ä¹Ÿå°±æ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œäº†ã€‚ CADisplayLinkç”¨æ³•å’Œtimerä¸€æ ·ï¼Œæ”¾åœ¨å­çº¿ç¨‹çš„è¯è®°å¾—è‡ªå·±åˆ›å»ºrunloop1234567dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; // Track FPS using display link _displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(displayLinkTick)]; // [_displayLink setPaused:YES]; [_displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes]; [[NSRunLoop currentRunLoop] run]; &#125;); Timer123456789101112131415161718192021222324252627282930@interface ViewController ()@property (nonatomic, strong) UIScrollView *scrollView;@property (nonatomic, assign) NSInteger count;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; [self.view addSubview:self.scrollView]; NSTimer *timer = [NSTimer timerWithTimeInterval:2 target:self selector:@selector(printfString) userInfo:nil repeats:YES]; [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode]; [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];// æ ‡è®°ä¸ºcommon modesçš„æ¨¡å¼ï¼šUITrackingRunLoopModeå’ŒNSDefaultRunLoopModeå…¼å®¹,timerå°±éƒ½å¯ä»¥è·‘äº†&#125;- (UIScrollView *)scrollView &#123; if (!_scrollView) &#123; _scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 100, kScreenW, 200)]; _scrollView.backgroundColor = [UIColor redColor]; _scrollView.contentSize = CGSizeMake(kScreenW * 2, 0); &#125; return _scrollView;&#125;- (void)printfString &#123; self.count ++; NSLog(@&quot;%ld&quot;, self.count);&#125; è¿™ä¸ªæ—¶å€™ä»£ç æŒ‰ç…§æˆ‘ä»¬é¢„å®šçš„ç»“æžœè¿è¡Œï¼Œå¦‚æžœæˆ‘ä»¬æŠŠè¿™ä¸ªTiemræ”¾åˆ°åŽå°çº¿ç¨‹ä¸­å‘¢?1234567dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; NSTimer *myTimer = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(timerAction) userInfo:nil repeats:YES]; [myTimer fire];&#125;); è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¼šå‘çŽ°ï¼Œè¿™ä¸ªtimeråªæ‰§è¡Œäº†ä¸€æ¬¡ï¼Œå°±åœæ­¢äº†ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿé€šè¿‡ä¸Šé¢çš„è®²è§£ï¼Œæƒ³å¿…ä½ å·²ç»çŸ¥é“äº†ï¼ŒNSTimer,åªæœ‰æ³¨å†Œåˆ°RunLoopä¹‹åŽæ‰ä¼šç”Ÿæ•ˆï¼Œè¿™ä¸ªæ³¨å†Œæ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨ç»™æˆ‘ä»¬å®Œæˆçš„,æ—¢ç„¶éœ€è¦æ³¨å†Œåˆ°RunLoop,é‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦æœ‰ä¸€ä¸ªRunLoop,æˆ‘ä»¬åœ¨åŽå°çº¿ç¨‹ä¸­åŠ å…¥å¦‚ä¸‹çš„ä»£ç :12NSRunLoop *runLoop = [NSRunLoop currentRunLoop]; [runLoop run]; è¿™æ ·æˆ‘ä»¬å°±ä¼šå‘çŽ°ç¨‹åºæ­£å¸¸è¿è¡Œäº†ã€‚åœ¨Timeræ³¨å†Œåˆ°RunLoopä¹‹åŽï¼ŒRunLoopä¼šä¸ºå…¶é‡å¤çš„æ—¶é—´ç‚¹æ³¨å†Œå¥½äº‹ä»¶ï¼Œæ¯”å¦‚1ï¼š10ï¼Œ1ï¼š20ï¼Œ1ï¼š30è¿™å‡ ä¸ªæ—¶é—´ç‚¹ã€‚æœ‰æ—¶å€™æˆ‘ä»¬ä¼šåœ¨è¿™ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œä¸€ä¸ªè€—æ—¶æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™RunLoopä¸ºäº†èŠ‚çœèµ„æºï¼Œå¹¶ä¸ä¼šåœ¨éžå¸¸å‡†ç¡®çš„æ—¶é—´ç‚¹å›žè°ƒè¿™ä¸ªTimerï¼Œè¿™å°±é€ æˆäº†è¯¯å·®(Timeræœ‰ä¸ªå†—ä½™åº¦å±žæ€§å«åštolerance,å®ƒæ ‡æ˜Žäº†å½“å‰ç‚¹åˆ°åŽï¼Œå®¹è®¸æœ‰å¤šå°‘æœ€å¤§è¯¯å·®)ï¼Œå¯ä»¥åœ¨æ‰§è¡Œä¸€æ®µå¾ªçŽ¯ä¹‹åŽè°ƒç”¨ä¸€ä¸ªè€—æ—¶æ“ä½œï¼Œå¾ˆå®¹æ˜“çœ‹åˆ°timerä¼šæœ‰å¾ˆå¤§çš„è¯¯å·®ï¼Œè¿™è¯´æ˜Žåœ¨çº¿ç¨‹å¾ˆé—²çš„æ—¶å€™ä½¿ç”¨NSTiemræ˜¯æ¯”è¾ƒå‚²ä½ å‡†ç¡®çš„ï¼Œå½“çº¿ç¨‹å¾ˆå¿™ç¢Œæ—¶å€™ä¼šæœ‰è¾ƒå¤§çš„è¯¯å·®ã€‚ç³»ç»Ÿè¿˜æœ‰ä¸€ä¸ªCADisplayLink,ä¹Ÿå¯ä»¥å®žçŽ°å®šæ—¶æ•ˆæžœï¼Œå®ƒæ˜¯ä¸€ä¸ªå’Œå±å¹•çš„åˆ·æ–°çŽ‡ä¸€æ ·çš„å®šæ—¶å™¨ã€‚å¦‚æžœåœ¨ä¸¤æ¬¡å±å¹•åˆ·æ–°ä¹‹é—´æ‰§è¡Œä¸€ä¸ªè€—æ—¶çš„ä»»åŠ¡ï¼Œé‚£å…¶ä¸­å°±ä¼šæœ‰ä¸€ä¸ªå¸§è¢«è·³è¿‡åŽ»ï¼Œé€ æˆç•Œé¢å¡é¡¿ã€‚å¦å¤–GCDä¹Ÿå¯ä»¥å®žçŽ°å®šæ—¶å™¨çš„æ•ˆæžœï¼Œç”±äºŽå…¶å’ŒRunLoopæ²¡æœ‰å…³è”ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä½¿ç”¨å®ƒä¼šæ›´åŠ çš„å‡†ç¡®ï¼Œè¿™åœ¨æœ€åŽä¼šç»™äºˆè¯´æ˜Žã€‚ ImageViewéœ€æ±‚:å½“ç”¨æˆ·åœ¨æ‹–æ‹½æ—¶(UIäº¤äº’æ—¶)ä¸æ˜¾ç¤ºå›¾ç‰‡,æ‹–æ‹½å®Œæˆæ—¶æ˜¾ç¤ºå›¾ç‰‡ æ–¹æ³•1 ç›‘å¬UIScrollerViewæ»šåŠ¨ (é€šè¿‡UIScrollViewDelegateç›‘å¬,æ­¤å¤„ä¸å†ä¸¾ä¾‹) æ–¹æ³•2 RunLoop è®¾ç½®è¿è¡Œæ¨¡å¼ 12// åªåœ¨NSDefaultRunLoopModeæ¨¡å¼ä¸‹æ˜¾ç¤ºå›¾ç‰‡ [self.imageView performSelector:@selector(setImage:) withObject:[UIImage imageNamed:@&quot;placeholder&quot;] afterDelay:3.0 inModes:@[NSDefaultRunLoopMode]]; æ¯”å¦‚ä¿®æ”¹sdwebimageä¸­çš„æ–¹æ³•ï¼Œå¦‚æžœè®¾ç½®imageviewä¸ºæ»šåŠ¨åˆ—è¡¨æ¨¡å¼ï¼Œåˆ™åŠ å…¥è¯¥æ–¹æ³•ï¼Œå½“åˆ—è¡¨åœæ­¢æ»šåŠ¨æ¨¡å¼çš„æ—¶å€™æ‰åŠ è½½å›¾ç‰‡ ä¸€ç›´æ´»ç€çš„åŽå°çº¿ç¨‹çŽ°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œæ¯ç‚¹å‡»ä¸€ä¸‹å±å¹•ï¼Œè®©å­çº¿ç¨‹åšä¸€ä¸ªä»»åŠ¡,ç„¶åŽå¤§å®¶ä¸€èˆ¬ä¼šæƒ³åˆ°è¿™æ ·çš„æ–¹å¼: 12345678910111213141516171819202122232425262728293031@interface ViewController ()@property(nonatomic,strong) NSThread *myThread;@end@implementation ViewController- (void)alwaysLiveBackGoundThread&#123;NSThread *thread = [[NSThread alloc]initWithTarget:self selector:@selector(myThreadRun) object:@&quot;etund&quot;];self.myThread = thread;[self.myThread start];&#125;- (void)myThreadRun&#123;NSLog(@&quot;my thread run&quot;);&#125;- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123; NSLog(@&quot;%@&quot;,self.myThread); [self performSelector:@selector(doBackGroundThreadWork) onThread:self.myThread withObject:nil waitUntilDone:NO];&#125;- (void)doBackGroundThreadWork&#123; NSLog(@&quot;do some work %s&quot;,__FUNCTION__);&#125;@end è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ä¸€ä¸ªå¼ºå¼•ç”¨æ¥èŽ·å–äº†åŽå¤©çº¿ç¨‹ä¸­çš„thread,ç„¶åŽåœ¨ç‚¹å‡»å±å¹•çš„æ—¶å€™ï¼Œåœ¨è¿™ä¸ªçº¿ç¨‹ä¸Šæ‰§è¡ŒdoBackGroundThreadWorkè¿™ä¸ªæ–¹æ³•ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨touchesBeginæ–¹æ³•ä¸­ï¼Œself.myThreadæ˜¯å­˜åœ¨çš„ï¼Œä½†æ˜¯è¿™æ˜¯ä¸ºæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿™å°±è¦ä»Žçº¿ç¨‹çš„äº”å¤§çŠ¶æ€æ¥è¯´æ˜Žäº†:æ–°å»ºçŠ¶æ€ã€å°±ç»ªçŠ¶æ€ã€è¿è¡ŒçŠ¶æ€ã€é˜»å¡žçŠ¶æ€ã€æ­»äº¡çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™å°½ç®¡å†…å­˜ä¸­è¿˜æœ‰çº¿ç¨‹ï¼Œä½†æ˜¯è¿™ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œå®Œä»»åŠ¡ä¹‹åŽå·²ç»æ­»äº¡äº†ï¼Œç»è¿‡ä¸Šé¢çš„è®ºè¿°ï¼Œæˆ‘ä»¬åº”è¯¥æ€Žæ ·å¤„ç†å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç»™è¿™ä¸ªçº¿ç¨‹çš„RunLoopæ·»åŠ ä¸€ä¸ªsourceï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°±ä¼šæ£€æµ‹è¿™ä¸ªsourceç­‰å¾…æ‰§è¡Œï¼Œè€Œä¸è‡³äºŽæ­»äº¡(æœ‰å·¥ä½œçš„å¼ºçƒˆæ„¿æœ›è€Œä¸æ­»äº¡): 12345678- (void)myThreadRun&#123;[[NSRunLoop currentRunLoop] addPort:[[NSPort alloc] init] forMode:NSDefaultRunLoopMode];[[NSRunLoop currentRunLoop] run] NSLog(@&quot;my thread run&quot;);&#125; è¿™ä¸ªæ—¶å€™å†æ¬¡ç‚¹å‡»å±å¹•ï¼Œæˆ‘ä»¬å°±ä¼šå‘çŽ°ï¼ŒåŽå°çº¿ç¨‹ä¸­æ‰§è¡Œçš„ä»»åŠ¡å¯ä»¥æ­£å¸¸è¿›è¡Œäº†ã€‚å°ç»“:æ­£å¸¸æƒ…å†µä¸‹ï¼ŒåŽå°çº¿ç¨‹æ‰§è¡Œå®Œä»»åŠ¡ä¹‹åŽå°±å¤„äºŽæ­»äº¡çŠ¶æ€ï¼Œæˆ‘ä»¬è¦é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿå¯ä»¥åˆ©ç”¨RunLoopï¼Œå¹¶ä¸”ç»™å®ƒä¸€ä¸ªSourceè¿™æ ·æ¥ä¿è¯çº¿ç¨‹ä¾æ—§è¿˜åœ¨ NSURLConnectionçš„æ‰§è¡Œè¿‡ç¨‹åœ¨ä½¿ç”¨NSURLConnectionæ—¶ï¼Œæˆ‘ä»¬ä¼šä¼ å…¥ä¸€ä¸ªDelegate,å½“æˆ‘ä»¬è°ƒç”¨äº†[connection start]ä¹‹åŽï¼Œè¿™ä¸ªDelegateä¼šä¸åœçš„æ”¶åˆ°äº‹ä»¶çš„å›žè°ƒã€‚å®žé™…ä¸Šï¼Œstartè¿™ä¸ªå‡½æ•°çš„å†…éƒ¨ä¼šèŽ·å–CurrentRunloopï¼Œç„¶åŽåœ¨å…¶ä¸­çš„DefaultModeä¸­æ·»åŠ 4ä¸ªsourceã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒCFMultiplexerSourceæ˜¯è´Ÿè´£å„ç§Delegateå›žè°ƒçš„ï¼ŒCFHTTPCookieStorageæ˜¯å¤„ç†å„ç§Cookieçš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º:ä»Žä¸­å¯ä»¥çœ‹å‡ºï¼Œå½“å¼€å§‹ç½‘ç»œä¼ è¾“æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°NSURLConnectionåˆ›å»ºäº†ä¸¤ä¸ªæ–°çš„çº¿ç¨‹:com.apple.NSURLConnectionLoaderå’Œcom.apple.CFSocket.privateã€‚å…¶ä¸­CFSocketæ˜¯å¤„ç†åº•å±‚socketé“¾æŽ¥çš„ã€‚NSURLConnectionLoaderè¿™ä¸ªçº¿ç¨‹å†…éƒ¨ä¼šä½¿ç”¨RunLoopæ¥æŽ¥æ”¶åº•å±‚socketçš„äº‹ä»¶ï¼Œå¹¶é€šè¿‡ä¹‹å‰æ·»åŠ çš„sourceï¼Œæ¥é€šçŸ¥(å”¤é†’)ä¸Šå±‚çš„Delegateã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç†è§£æˆ‘ä»¬å¹³æ—¶å°è£…ç½‘ç»œè¯·æ±‚æ—¶å€™å¸¸è§çš„ä¸‹é¢é€»è¾‘äº†: 1234567891011121314while (!_isEndRequest)&#123; NSLog(@&quot;entered run loop&quot;); [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];&#125;NSLog(@&quot;main finishedï¼Œtask be removed&quot;);- (void)connectionDidFinishLoading:(NSURLConnection *)connection&#123; _isEndRequest = YES;&#125; è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥è§£å†³ä¸‹é¢è¿™äº›ç–‘é—®äº†: ä¸ºä»€ä¹ˆè¿™ä¸ªWhileå¾ªçŽ¯ä¸åœçš„æ‰§è¡Œï¼Œè¿˜éœ€è¦ä½¿ç”¨ä¸€ä¸ªRunLoop? ç¨‹åºæ‰§è¡Œä¸€ä¸ªwhileå¾ªçŽ¯æ˜¯ä¸ä¼šè€—è´¹å¾ˆå¤§æ€§èƒ½çš„ï¼Œæˆ‘ä»¬è¿™é‡Œçš„ç›®çš„æ˜¯æƒ³è®©å­çº¿ç¨‹åœ¨æœ‰ä»»åŠ¡çš„æ—¶å€™å¤„ç†ä»»åŠ¡ï¼Œæ²¡æœ‰ä»»åŠ¡çš„æ—¶å€™ä¼‘çœ ï¼Œæ¥èŠ‚çº¦CPUçš„å¼€æ”¯ã€‚ å¦‚æžœæ²¡æœ‰ä¸ºRunLoopæ·»åŠ item,é‚£ä¹ˆå®ƒå°±ä¼šç«‹å³é€€å‡ºï¼Œè¿™é‡Œçš„itemå‘¢? å…¶å®žç³»ç»Ÿå·²ç»ç»™æˆ‘ä»¬é»˜è®¤æ·»åŠ äº†4ä¸ªsourceäº†ã€‚ æ—¢ç„¶[[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];è®©çº¿ç¨‹åœ¨è¿™é‡Œåœä¸‹æ¥ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿™ä¸ªå¾ªçŽ¯ä¼šæŒç»­çš„æ‰§è¡Œå‘¢ï¼Ÿå› ä¸ºè¿™ä¸ªä¸€ç›´åœ¨å¤„ç†ä»»åŠ¡ï¼Œå¹¶ä¸”æŽ¥å—ç³»ç»Ÿå¯¹è¿™ä¸ªDelegateçš„å›žè°ƒï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå›žè°ƒå”¤é†’äº†è¿™ä¸ªçº¿ç¨‹ï¼Œè®©å®ƒåœ¨è¿™é‡Œå¾ªçŽ¯ã€‚ AFNetWorkingä¸­æ˜¯å¦‚ä½•ä½¿ç”¨RunLoopçš„?åœ¨AFNä¸­AFURLConnectionOperationæ˜¯åŸºäºŽNSURLConnectionæž„å»ºçš„ï¼Œå…¶å¸Œæœ›èƒ½å¤Ÿåœ¨åŽå°çº¿ç¨‹æ¥æŽ¥æ”¶Delegateçš„å›žè°ƒã€‚ä¸ºæ­¤AFNåˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹,ç„¶åŽåœ¨é‡Œé¢å¼€å¯äº†ä¸€ä¸ªRunLoopï¼Œç„¶åŽæ·»åŠ item 12345678910111213141516171819+ (void)networkRequestThreadEntryPoint:(id)__unused object &#123;@autoreleasepool &#123; [[NSThread currentThread] setName:@&quot;AFNetworking&quot;]; NSRunLoop *runLoop = [NSRunLoop currentRunLoop]; [runLoop addPort:[NSMachPort port] forMode:NSDefaultRunLoopMode]; [runLoop run];&#125;&#125;+ (NSThread *)networkRequestThread &#123; static NSThread *_networkRequestThread = nil; static dispatch_once_t oncePredicate; dispatch_once(&amp;oncePredicate, ^&#123; _networkRequestThread = [[NSThread alloc] initWithTarget:self selector:@selector(networkRequestThreadEntryPoint:) object:nil]; [_networkRequestThread start]; &#125;); return _networkRequestThread;&#125; è¿™é‡Œè¿™ä¸ªNSMachPortçš„ä½œç”¨å’Œä¸Šæ–‡ä¸­çš„ä¸€æ ·ï¼Œå°±æ˜¯è®©çº¿ç¨‹ä¸è‡³äºŽåœ¨å¾ˆå¿«æ­»äº¡ï¼Œç„¶åŽRunLoopä¸è‡³äºŽé€€å‡º(å¦‚æžœè¦ä½¿ç”¨è¿™ä¸ªMachPortçš„è¯ï¼Œè°ƒç”¨è€…éœ€è¦æŒæœ‰è¿™ä¸ªNSMachPortï¼Œç„¶åŽåœ¨å¤–éƒ¨çº¿ç¨‹é€šè¿‡è¿™ä¸ªportå‘é€ä¿¡æ¯åˆ°è¿™ä¸ªloopå†…éƒ¨,å®ƒè¿™é‡Œæ²¡æœ‰è¿™ä¹ˆåš)ã€‚ç„¶åŽå’Œä¸Šé¢çš„åšæ³•ç›¸ä¼¼ï¼Œåœ¨éœ€è¦åŽå°æ‰§è¡Œè¿™ä¸ªä»»åŠ¡çš„æ—¶å€™ï¼Œä¼šé€šè¿‡è°ƒç”¨:[NSObject performSelector:onThread:..]æ¥å°†è¿™ä¸ªä»»åŠ¡æ‰”ç»™åŽå°çº¿ç¨‹çš„RunLoopä¸­æ¥æ‰§è¡Œã€‚ 12345678910- (void)start &#123;[self.lock lock];if ([self isCancelled]) &#123; [self performSelector:@selector(cancelConnection) onThread:[[self class] networkRequestThread] withObject:nil waitUntilDone:NO modes:[self.runLoopModes allObjects]];&#125; else if ([self isReady]) &#123; self.state = AFOperationExecutingState; [self performSelector:@selector(operationDidStart) onThread:[[self class] networkRequestThread] withObject:nil waitUntilDone:NO modes:[self.runLoopModes allObjects]];&#125;[self.lock unlock];&#125; GCDå®šæ—¶å™¨çš„å®žçŽ°12345678910111213141516171819202122232425262728- (void)gcdTimer&#123;// get the queuedispatch_queue_t queue = dispatch_get_global_queue(0, 0);// creat timerself.timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);// config the timer (starting timeï¼Œinterval)// set begining timedispatch_time_t start = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1.0 * NSEC_PER_SEC));// set the intervaluint64_t interver = (uint64_t)(1.0 * NSEC_PER_SEC);dispatch_source_set_timer(self.timer, start, interver, 0.0);dispatch_source_set_event_handler(self.timer, ^&#123; // the tarsk needed to be processed async dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; for (int i = 0; i &lt; 100000; i++) &#123; NSLog(@&quot;gcdTimer&quot;); &#125; &#125;);&#125;);dispatch_resume(self.timer);&#125; è°ˆè°ˆä½ å¯¹Run Loopçš„ç†è§£ RunLoopæ˜¯å¤šçº¿ç¨‹çš„ä¸€ä¸ªå¾ˆé‡è¦çš„æœºåˆ¶ï¼Œå°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œå®Œä»»åŠ¡åŽå°±ä¼šé€€å‡ºçº¿ç¨‹ã€‚ä¸»çº¿ç¨‹ä¼šé€šè¿‡do-whileæ­»å¾ªçŽ¯è®©ç¨‹åºæŒç»­ç­‰å¾…ä¸‹ä¸€ä¸ªä»»åŠ¡ä¸é€€å‡ºã€‚é€šè¿‡mach_msg()è®©runloopæ²¡äº‹æ—¶è¿›å…¥trapçŠ¶æ€ï¼ŒèŠ‚çœCPUèµ„æºã€‚éžä¸»çº¿ç¨‹é€šå¸¸æ¥è¯´å°±æ˜¯ä¸ºäº†æ‰§è¡ŒæŸä¸ªä»»åŠ¡è€Œåˆ›å»ºçš„ï¼Œæ‰§è¡Œå®Œå°±ä¼šå½’è¿˜èµ„æºï¼Œå› æ­¤é»˜è®¤ä¸å¼€å¯RunLoop å®žè´¨ä¸Šï¼Œå¯¹äºŽå­çº¿ç¨‹çš„runloopæ˜¯é»˜è®¤ä¸å­˜åœ¨çš„ï¼Œå› ä¸ºè‹¹æžœé‡‡ç”¨äº†æ‡’åŠ è½½çš„æ–¹å¼ï¼Œå¦‚æžœæ²¡æœ‰æ‰‹åŠ¨è°ƒç”¨[NSRunLoop currentRunLoop]çš„è¯ï¼Œå°±ä¸ä¼šåŽ»æŸ¥è¯¢å½“å‰çº¿ç¨‹çš„RunLoopï¼Œä¹Ÿä¸ä¼šåˆ›å»ºã€åŠ è½½ å½“ç„¶å¦‚æžœå­çº¿ç¨‹å¤„ç†å®ŒæŸä¸ªä»»åŠ¡åŽä¸é€€å‡ºï¼Œéœ€è¦ç»§ç»­ç­‰å¾…æŽ¥å—äº‹ä»¶ï¼Œéœ€è¦å¯åŠ¨çš„æ—¶å€™ä¹Ÿå¯ä»¥æ‰‹åŠ¨å¯åŠ¨ï¼Œæ¯”å¦‚è¯´æ·»åŠ å®šæ—¶å™¨çš„æ—¶å€™å°±è¦æ‰‹åŠ¨å¼€å§‹RunLoopå¦‚ä½•å¤„ç†äº‹ä»¶ ç•Œé¢åˆ·æ–°ï¼š å½“UIæ”¹å˜ï¼ˆ Frameå˜åŒ–ã€ UIView/CALayer çš„ç»§æ‰¿ç»“æž„å˜åŒ–ç­‰ï¼‰æ—¶ï¼Œæˆ–æ‰‹åŠ¨è°ƒç”¨äº† UIView/CALayer çš„ setNeedsLayout/setNeedsDisplayæ–¹æ³•åŽï¼Œè¿™ä¸ª UIView/CALayer å°±è¢«æ ‡è®°ä¸ºå¾…å¤„ç†ã€‚ è‹¹æžœæ³¨å†Œäº†ä¸€ä¸ªç”¨æ¥ç›‘å¬BeforeWaitingå’ŒExitçš„Observerï¼Œåœ¨å®ƒçš„å›žè°ƒå‡½æ•°é‡Œä¼šéåŽ†æ‰€æœ‰å¾…å¤„ç†çš„ UIView/CAlayer ä»¥æ‰§è¡Œå®žé™…çš„ç»˜åˆ¶å’Œè°ƒæ•´ï¼Œå¹¶æ›´æ–° UI ç•Œé¢ã€‚ æ‰‹åŠ¿è¯†åˆ«ï¼š å¦‚æžœä¸Šä¸€æ­¥çš„ _UIApplicationHandleEventQueue() è¯†åˆ«åˆ°æ˜¯ä¸€ä¸ªguestureæ‰‹åŠ¿ï¼Œä¼šè°ƒç”¨Cancelæ–¹æ³•å°†å½“å‰çš„touchesBegin/Move/End ç³»åˆ—å›žè°ƒæ‰“æ–­ã€‚éšåŽç³»ç»Ÿå°†å¯¹åº”çš„ UIGestureRecognizer æ ‡è®°ä¸ºå¾…å¤„ç†ã€‚ è‹¹æžœæ³¨å†Œäº†ä¸€ä¸ª Observer ç›‘æµ‹ BeforeWaiting (Loopå³å°†è¿›å…¥ä¼‘çœ ) äº‹ä»¶ï¼Œå…¶å›žè°ƒå‡½æ•°ä¸º _UIGestureRecognizerUpdateObserver()ï¼Œå…¶å†…éƒ¨ä¼šèŽ·å–æ‰€æœ‰åˆšè¢«æ ‡è®°ä¸ºå¾…å¤„ç†çš„ GestureRecognizerï¼Œå¹¶æ‰§è¡ŒGestureRecognizerçš„å›žè°ƒã€‚ å½“æœ‰ UIGestureRecognizer çš„å˜åŒ–(åˆ›å»º/é”€æ¯/çŠ¶æ€æ”¹å˜)æ—¶ï¼Œè¿™ä¸ªå›žè°ƒéƒ½ä¼šè¿›è¡Œç›¸åº”å¤„ç†ã€‚ ç½‘ç»œè¯·æ±‚ï¼šæœ€åº•å±‚æ˜¯CFSocketå±‚ï¼Œç„¶åŽæ˜¯CFNetworkå°†å…¶å°è£…ï¼Œç„¶åŽæ˜¯NSURLConnectionå¯¹CFNetworkè¿›è¡Œé¢å‘å¯¹è±¡çš„å°è£…ï¼ŒNSURLConnectionæ˜¯iOS7ä¸­æ–°å¢žçš„æŽ¥å£ã€‚å½“ç½‘ç»œå¼€å§‹ä¼ è¾“æ—¶ï¼ŒNSURLConnectionåˆ›å»ºäº†ä¸¤ä¸ªæ–°çº¿ç¨‹ï¼šcom.apple.NSURLConnectionLoaderå’Œcom.apple.CFSocket.privateã€‚å…¶ä¸­CFSocketçº¿ç¨‹æ˜¯å¤„ç†åº•å±‚socketè¿žæŽ¥çš„ã€‚NSURLConnectionLoaderè¿™ä¸ªçº¿ç¨‹å†…éƒ¨ä¼šä½¿ç”¨RunLoopæ¥æŽ¥å—åº•å±‚socketçš„äº‹ä»¶ï¼Œå¹¶æ·»åŠ åˆ°ä¸Šå±‚çš„Delegate åº”ç”¨ æ»‘åŠ¨ä¸Žå›¾ç‰‡åˆ·æ–°ï¼šå½“tableViewçš„cellä¸Šæœ‰éœ€è¦ä»Žç½‘ç»œèŽ·å–çš„å›¾ç‰‡çš„æ—¶å€™ï¼Œæ»šåŠ¨tableViewï¼Œå¼‚æ­¥çº¿ç¨‹å›žåŽ»åŠ è½½å›¾ç‰‡ï¼ŒåŠ è½½å®ŒæˆåŽä¸»çº¿ç¨‹ä¼šè®¾ç½®cellçš„å›¾ç‰‡ï¼Œä½†æ˜¯ä¼šé€ æˆå¡é¡¿ã€‚å¯ä»¥è®¾ç½®å›¾ç‰‡çš„ä»»åŠ¡åœ¨CFRunloopDefaultModeä¸‹è¿›è¡Œï¼Œå½“æ»šåŠ¨tableViewçš„æ—¶å€™ï¼ŒRunloopåˆ‡æ¢åˆ°UITrackingRunLoopModeï¼Œä¸åŽ»è®¾ç½®å›¾ç‰‡ï¼Œè€Œæ˜¯è€Œæ˜¯å½“åœæ­¢çš„æ—¶å€™ï¼Œå†åŽ»è®¾ç½®å›¾ç‰‡ã€‚ï¼ˆåœ¨viewDidLoadä¸­è°ƒç”¨self.imageView performSelector@selector(setImage) withObject:â€¦afterDelay:â€¦inModes@[NSDefayltRunLoopMode]ï¼‰ å¸¸é©»å­çº¿ç¨‹ï¼Œä¿æŒå­çº¿ç¨‹ä¸€ç›´å¤„ç†äº‹ä»¶ ä¸ºäº†ä¿è¯çº¿ç¨‹é•¿æœŸè¿è½¬ï¼Œå¯ä»¥åœ¨å­çº¿ç¨‹ä¸­åŠ å…¥RunLoopï¼Œå¹¶ä¸”ç»™Runloopè®¾ç½®itemï¼Œé˜²æ­¢Runloopè‡ªåŠ¨é€€å‡º RunLoopå¤„ç†çš„å‡ ç§äº‹ä»¶ static void CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION();static void CFRUNLOOP_IS_CALLING_OUT_TO_A_BLOCK();static void CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE();static void CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION();static void CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION();static void CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION(); ä»–å¯¹è¿™å…­ç±»äº‹ä»¶æœ‰å¦‚ä¸‹è§£é‡Š 1.Observeräº‹ä»¶ï¼Œrunloopä¸­çŠ¶æ€å˜åŒ–æ—¶è¿›è¡Œé€šçŸ¥ã€‚ï¼ˆå¾®ä¿¡å¡é¡¿ç›‘æŽ§å°±æ˜¯åˆ©ç”¨è¿™ä¸ªäº‹ä»¶é€šçŸ¥æ¥è®°å½•ä¸‹æœ€è¿‘ä¸€æ¬¡main runloopæ´»åŠ¨æ—¶é—´ï¼Œåœ¨å¦ä¸€ä¸ªcheckçº¿ç¨‹ä¸­ç”¨å®šæ—¶å™¨æ£€æµ‹å½“å‰æ—¶é—´è·ç¦»æœ€åŽä¸€æ¬¡æ´»åŠ¨æ—¶é—´è¿‡ä¹…æ¥åˆ¤æ–­åœ¨ä¸»çº¿ç¨‹ä¸­çš„å¤„ç†é€»è¾‘è€—æ—¶å’Œå¡ä¸»çº¿ç¨‹ï¼‰ã€‚è¿™é‡Œè¿˜éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼ŒCAAnimationæ˜¯ç”±RunloopObserverè§¦å‘å›žè°ƒæ¥é‡ç»˜ï¼Œã€‚ 2.Blockäº‹ä»¶ï¼Œéžå»¶è¿Ÿçš„NSObject PerformSelectorç«‹å³è°ƒç”¨ï¼Œdispatch_afterç«‹å³è°ƒç”¨ï¼Œblockå›žè°ƒã€‚ 3.Main_Dispatch_Queueäº‹ä»¶ï¼šGCDä¸­dispatchåˆ°main queueçš„blockä¼šè¢«dispatchåˆ°main loopæ‰§è¡Œï¼Œå¦‚æžœä¸»çº¿ç¨‹æ˜¯ç¡çœ çš„ï¼Œè¿™ä¸ªè¡Œä¸ºæ˜¯ä¼šå”¤é†’ä¸»çº¿ç¨‹çš„ã€‚ 4.Timeräº‹ä»¶ï¼šå»¶è¿Ÿçš„NSObject PerformSelectorï¼Œå»¶è¿Ÿçš„dispatch_afterï¼Œtimeräº‹ä»¶ã€‚CADisplayLinkä¹Ÿæ˜¯è¿™é‡Œè§¦å‘ï¼ŒåŒæ—¶è¿™ä¸ªè¡Œä¸ºä¹Ÿæ˜¯ä¼šå”¤é†’çº¿ç¨‹çš„ã€‚å¦‚æžœæŸä¸ªtimeråˆ°äº†å›žè°ƒæ—¶æœºï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™runloopåœ¨å¿™ç€ï¼Œé‚£ä¹ˆè¿™ä¸ªtimerå°±ä¼šè¢«è·³è¿‡åŽ»ï¼Œè€Œä¸æ˜¯å»¶æ—¶æ‰§è¡Œï¼Œç­‰åˆ°ä¸‹ä¸€æ¬¡timerè§¦å‘æ‰ä¼šè¢«æ‰§è¡Œã€‚ 5.Source0äº‹ä»¶ï¼šå¤„ç†å¦‚UIEventï¼ŒCFSocketè¿™ç±»äº‹ä»¶ã€‚éœ€è¦æ‰‹åŠ¨è§¦å‘ã€‚è§¦æ‘¸äº‹ä»¶å…¶å®žæ˜¯Source1æŽ¥æ”¶ç³»ç»Ÿäº‹ä»¶åŽåœ¨å›žè°ƒ __IOHIDEventSystemClientQueueCallback() å†…è§¦å‘çš„ Source0ï¼ŒSource0 å†è§¦å‘çš„ _UIApplicationHandleEventQueue()ã€‚source0ä¸€å®šæ˜¯è¦å”¤é†’runloopåŠæ—¶å“åº”å¹¶æ‰§è¡Œçš„ï¼Œå¦‚æžœrunloopæ­¤æ—¶åœ¨ä¼‘çœ ç­‰å¾…ç³»ç»Ÿçš„ mach_msgäº‹ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šé€šè¿‡source1æ¥å”¤é†’runloopæ‰§è¡Œã€‚[self performSelector:@selector(perform1) withObject:nil];æ˜¯èµ°source0çš„ã€‚ 6.Source1äº‹ä»¶ï¼šå¤„ç†ç³»ç»Ÿå†…æ ¸çš„mach_msgäº‹ä»¶ã€‚ éªŒè¯æ–¹æ³•æ˜¯ï¼Œæ‰“æ–­ç‚¹ï¼Œlldbä¸Šè¾¹çš„è°ƒç”¨æ ˆ æ·±åˆ»ç†è§£ä¸€ä¸‹å°±æ˜¯ï¼Œç‚¹å‡»äº‹ä»¶ç­‰ï¼Œå’ŒUIç»˜åˆ¶ï¼Œéƒ½åªæ˜¯å…ˆæ ‡è®°ï¼Œç„¶åŽç­‰åˆ°çº¿ç¨‹ç¡çœ å‰å†æ ¹æ®æ ‡è®°ï¼Œç»Ÿä¸€å¤„ç†ã€‚è€Œåšä¸€ä¸ªå€¼è®¡ç®—ä¹‹ç±»çš„ï¼Œç›´æŽ¥å°±æ˜¯source0ç›´æŽ¥è¿›è¡Œæ“ä½œäº†ã€‚ å¦‚ä½•æ¶‰åŠåˆ°åˆ‡æ¢çº¿ç¨‹ï¼Œä¸€èˆ¬æ˜¯è§¦å‘ä¸€ä¸ªsource1ï¼Œä¸éœ€è¦åˆ‡æ¢çº¿ç¨‹çš„performæ˜¯ä¸€ä¸ªsource0äº‹ä»¶ã€‚ å‡ ä¸ªé—®é¢˜runloopè¢«å”¤é†’æœ‰å‡ ç§æƒ…å†µï¼Ÿ åŸºäºŽportçš„sourceäº‹ä»¶ï¼Œæ¯”å¦‚è§¦æ‘¸è¿™ç§source1 timeråˆ°æ—¶é—´äº† runloopè‡ªèº«ç¡çœ æ—¶é—´åˆ°äº†ï¼ŒiOSçŽ°åœ¨æµ‹è¯•æ˜¯1åˆ†é’Ÿï¼Œè¿™æ˜¯è‡ªèº«çš„ä¸€ä¸ªä¿æ´»æœºåˆ¶ï¼Œå¦‚æžœä¸€ä¸ªçº¿ç¨‹é•¿æœŸä¼‘çœ ï¼Œé‚£ä¹ˆunixå°±ä¼šæŠŠå®ƒæ€æ­» è¢«å…¶ä»–ä»€ä¹ˆè°ƒç”¨è€…æ‰‹åŠ¨å”¤é†’ï¼Œæ¯”å¦‚å…¶ä»–çº¿ç¨‹è¦æ±‚å›žåˆ°è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œä¸ªå•¥æ–¹æ³• åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œä¸€ä¸ªå¤§è®¡ç®—çš„æ–¹æ³•ï¼Œå¦‚ä½•ä¿è¯æœ€ä½Žé™åº¦å½±å“UIå°†è¿™ä¸ªä»»åŠ¡è¿›è¡Œæ‹†åˆ†ï¼Œé€šè¿‡perform afterè¿›è¡Œæ‹¼æŽ¥ï¼Œè¿™æ ·è¿™ä¸ªä»»åŠ¡ä¼šè¢«åˆ†æˆå‡ ä¸ªrunloopåŽ»æ‰§è¡Œï¼Œè¿™æ ·æœ‰æœºä¼šè¿›å…¥åˆ°çº¿ç¨‹ä¼‘çœ ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šæœºä¼šæäº¤UIçš„ä¸€äº›å˜åŒ–äº† å…·ä½“é—®é¢˜ï¼Œè¦æ±‚æ‰“å°1-10000ï¼Œç„¶åŽç‚¹å‡»ä¸€ä¸ªæŒ‰é’®å¯ä»¥æš‚åœï¼Œæ€Žä¹ˆåšï¼Ÿ æ€»ç»“å¦‚æžœæˆ‘ä»¬æƒ³è¦æ‰“æ–­ä¸€ä¸ªæ–¹æ³•çš„æ‰§è¡Œï¼Œä¸€ä¸ªåŠžæ³•å°±æ˜¯ç”¨[self performSelector:@selector(perform4) withObject:nil afterDelay:0.005];æ¥è¿žæŽ¥æ–¹æ³•çš„æ‰§è¡Œï¼Œè¿™é‡Œå»¶è¿Ÿæ—¶é—´è®¾ç½®ä¸º0æœ‰æ—¶æ˜¯æ— æ•ˆçš„ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä¸€ä¸ªå¾ˆå°çš„æ—¶é—´ï¼Œ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[(è½¬)è§†éŸ³é¢‘ç¼–è§£ç æŠ€æœ¯é›¶åŸºç¡€å­¦ä¹ æ–¹æ³•]]></title>
    <url>%2F2015%2F07%2F17%2F2015%2F%E8%BD%AC-%E8%A7%86%E9%9F%B3%E9%A2%91%E7%BC%96%E8%A7%A3%E7%A0%81%E6%8A%80%E6%9C%AF%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡åœ°å€http://blog.csdn.net/leixiaohua1020/article/details/18893769 è§†é¢‘æ’­æ”¾å™¨åŽŸç†è§†éŸ³é¢‘æŠ€æœ¯ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ç‚¹ï¼šå°è£…æŠ€æœ¯ï¼Œè§†é¢‘åŽ‹ç¼©ç¼–ç æŠ€æœ¯ä»¥åŠéŸ³é¢‘åŽ‹ç¼©ç¼–ç æŠ€æœ¯ã€‚å¦‚æžœè€ƒè™‘åˆ°ç½‘ç»œä¼ è¾“çš„è¯ï¼Œè¿˜åŒ…æ‹¬æµåª’ä½“åè®®æŠ€æœ¯ã€‚è§†é¢‘æ’­æ”¾å™¨çš„æºä»£ç è¯¦ç»†è§£æžï¼ˆMedia Player Classic - HCï¼ŒMplayerï¼ŒFFplayï¼ŒXBMCï¼‰å¯ä»¥å‚è€ƒç³»åˆ—æ–‡ç« ï¼šMedia Player Classicï¼šMedia Player Classic - HCæºä»£ç åˆ†æž 1ï¼šæ•´ä½“ç»“æž„[ç³»åˆ—æ–‡ç« ]Mplayerï¼šMPlayeræºä»£ç åˆ†æžFFplayï¼š FFplayæºä»£ç åˆ†æžï¼šæ•´ä½“æµç¨‹å›¾XBMCï¼š XBMCæºä»£ç åˆ†æž 1ï¼šæ•´ä½“ç»“æž„ä»¥åŠç¼–è¯‘æ–¹æ³•[ç³»åˆ—æ–‡ç« ]åœ¨è¿™é‡Œä¸ç»†è¯´äº†ï¼Œä»…ç®€è¦è¯´æ˜Žä¸€ä¸‹è§†é¢‘æ’­æ”¾å™¨çš„åŽŸç†ã€‚è§†é¢‘æ’­æ”¾å™¨æ’­æ”¾ä¸€ä¸ªäº’è”ç½‘ä¸Šçš„è§†é¢‘æ–‡ä»¶ï¼Œéœ€è¦ç»è¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼šè§£åè®®ï¼Œè§£å°è£…ï¼Œè§£ç è§†éŸ³é¢‘ï¼Œè§†éŸ³é¢‘åŒæ­¥ã€‚å¦‚æžœæ’­æ”¾æœ¬åœ°æ–‡ä»¶åˆ™ä¸éœ€è¦è§£åè®®ï¼Œä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼šè§£å°è£…ï¼Œè§£ç è§†éŸ³é¢‘ï¼Œè§†éŸ³é¢‘åŒæ­¥ã€‚ä»–ä»¬çš„è¿‡ç¨‹å¦‚å›¾æ‰€ç¤ºã€‚ è§£åè®®çš„ä½œç”¨ï¼Œå°±æ˜¯å°†æµåª’ä½“åè®®çš„æ•°æ®ï¼Œè§£æžä¸ºæ ‡å‡†çš„ç›¸åº”çš„å°è£…æ ¼å¼æ•°æ®ã€‚è§†éŸ³é¢‘åœ¨ç½‘ç»œä¸Šä¼ æ’­çš„æ—¶å€™ï¼Œå¸¸å¸¸é‡‡ç”¨å„ç§æµåª’ä½“åè®®ï¼Œä¾‹å¦‚HTTPï¼ŒRTMPï¼Œæˆ–æ˜¯MMSç­‰ç­‰ã€‚è¿™äº›åè®®åœ¨ä¼ è¾“è§†éŸ³é¢‘æ•°æ®çš„åŒæ—¶ï¼Œä¹Ÿä¼šä¼ è¾“ä¸€äº›ä¿¡ä»¤æ•°æ®ã€‚è¿™äº›ä¿¡ä»¤æ•°æ®åŒ…æ‹¬å¯¹æ’­æ”¾çš„æŽ§åˆ¶ï¼ˆæ’­æ”¾ï¼Œæš‚åœï¼Œåœæ­¢ï¼‰ï¼Œæˆ–è€…å¯¹ç½‘ç»œçŠ¶æ€çš„æè¿°ç­‰ã€‚è§£åè®®çš„è¿‡ç¨‹ä¸­ä¼šåŽ»é™¤æŽ‰ä¿¡ä»¤æ•°æ®è€Œåªä¿ç•™è§†éŸ³é¢‘æ•°æ®ã€‚ä¾‹å¦‚ï¼Œé‡‡ç”¨RTMPåè®®ä¼ è¾“çš„æ•°æ®ï¼Œç»è¿‡è§£åè®®æ“ä½œåŽï¼Œè¾“å‡ºFLVæ ¼å¼çš„æ•°æ®ã€‚è§£å°è£…çš„ä½œç”¨ï¼Œå°±æ˜¯å°†è¾“å…¥çš„å°è£…æ ¼å¼çš„æ•°æ®ï¼Œåˆ†ç¦»æˆä¸ºéŸ³é¢‘æµåŽ‹ç¼©ç¼–ç æ•°æ®å’Œè§†é¢‘æµåŽ‹ç¼©ç¼–ç æ•°æ®ã€‚å°è£…æ ¼å¼ç§ç±»å¾ˆå¤šï¼Œä¾‹å¦‚MP4ï¼ŒMKVï¼ŒRMVBï¼ŒTSï¼ŒFLVï¼ŒAVIç­‰ç­‰ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å°†å·²ç»åŽ‹ç¼©ç¼–ç çš„è§†é¢‘æ•°æ®å’ŒéŸ³é¢‘æ•°æ®æŒ‰ç…§ä¸€å®šçš„æ ¼å¼æ”¾åˆ°ä¸€èµ·ã€‚ä¾‹å¦‚ï¼ŒFLVæ ¼å¼çš„æ•°æ®ï¼Œç»è¿‡è§£å°è£…æ“ä½œåŽï¼Œè¾“å‡ºH.264ç¼–ç çš„è§†é¢‘ç æµå’ŒAACç¼–ç çš„éŸ³é¢‘ç æµã€‚è§£ç çš„ä½œç”¨ï¼Œå°±æ˜¯å°†è§†é¢‘/éŸ³é¢‘åŽ‹ç¼©ç¼–ç æ•°æ®ï¼Œè§£ç æˆä¸ºéžåŽ‹ç¼©çš„è§†é¢‘/éŸ³é¢‘åŽŸå§‹æ•°æ®ã€‚éŸ³é¢‘çš„åŽ‹ç¼©ç¼–ç æ ‡å‡†åŒ…å«AACï¼ŒMP3ï¼ŒAC-3ç­‰ç­‰ï¼Œè§†é¢‘çš„åŽ‹ç¼©ç¼–ç æ ‡å‡†åˆ™åŒ…å«H.264ï¼ŒMPEG2ï¼ŒVC-1ç­‰ç­‰ã€‚è§£ç æ˜¯æ•´ä¸ªç³»ç»Ÿä¸­æœ€é‡è¦ä¹Ÿæ˜¯æœ€å¤æ‚çš„ä¸€ä¸ªçŽ¯èŠ‚ã€‚é€šè¿‡è§£ç ï¼ŒåŽ‹ç¼©ç¼–ç çš„è§†é¢‘æ•°æ®è¾“å‡ºæˆä¸ºéžåŽ‹ç¼©çš„é¢œè‰²æ•°æ®ï¼Œä¾‹å¦‚YUV420Pï¼ŒRGBç­‰ç­‰ï¼›åŽ‹ç¼©ç¼–ç çš„éŸ³é¢‘æ•°æ®è¾“å‡ºæˆä¸ºéžåŽ‹ç¼©çš„éŸ³é¢‘æŠ½æ ·æ•°æ®ï¼Œä¾‹å¦‚PCMæ•°æ®ã€‚è§†éŸ³é¢‘åŒæ­¥çš„ä½œç”¨ï¼Œå°±æ˜¯æ ¹æ®è§£å°è£…æ¨¡å—å¤„ç†è¿‡ç¨‹ä¸­èŽ·å–åˆ°çš„å‚æ•°ä¿¡æ¯ï¼ŒåŒæ­¥è§£ç å‡ºæ¥çš„è§†é¢‘å’ŒéŸ³é¢‘æ•°æ®ï¼Œå¹¶å°†è§†é¢‘éŸ³é¢‘æ•°æ®é€è‡³ç³»ç»Ÿçš„æ˜¾å¡å’Œå£°å¡æ’­æ”¾å‡ºæ¥ã€‚æŽ¥ä¸‹æ¥çš„å‡ èŠ‚æˆ‘ä»¬å°†ä¼šåˆ—å‡ºä¸»è¦çš„æµåª’ä½“åè®®ï¼Œå°è£…æ ¼å¼ï¼Œä»¥åŠè§†éŸ³é¢‘ç¼–ç æ ‡å‡†ã€‚æ›´è¯¦ç»†çš„æ¯”è¾ƒå¯ä»¥å‚è€ƒï¼šè§†é¢‘å‚æ•°ï¼ˆæµåª’ä½“ç³»ç»Ÿï¼Œå°è£…æ ¼å¼ï¼Œè§†é¢‘ç¼–ç ï¼ŒéŸ³é¢‘ç¼–ç ï¼Œæ’­æ”¾å™¨ï¼‰å¯¹æ¯”æœ‰å…³æœ¬æ–‡ä¸­æ¶‰åŠåˆ°çš„åè®®æ•°æ®ã€å°è£…æ ¼å¼æ•°æ®ã€è§†é¢‘ç¼–ç æ•°æ®ã€éŸ³é¢‘ç¼–ç æ•°æ®ã€è§†é¢‘åƒç´ æ•°æ®ã€éŸ³é¢‘é‡‡æ ·æ•° æµåª’ä½“åè®®æµåª’ä½“åè®®æ˜¯æœåŠ¡å™¨ä¸Žå®¢æˆ·ç«¯ä¹‹é—´é€šä¿¡éµå¾ªçš„è§„å®šã€‚å½“å‰ç½‘ç»œä¸Šä¸»è¦çš„æµåª’ä½“åè®®å¦‚è¡¨æ‰€ç¤ºã€‚ä¸»è¦æµåª’ä½“åè®®ä¸€è§ˆRTSP+RTPç»å¸¸ç”¨äºŽIPTVé¢†åŸŸã€‚å› ä¸ºå…¶é‡‡ç”¨UDPä¼ è¾“è§†éŸ³é¢‘ï¼Œæ”¯æŒç»„æ’­ï¼Œæ•ˆçŽ‡è¾ƒé«˜ã€‚ä½†å…¶ç¼ºç‚¹æ˜¯ç½‘ç»œä¸å¥½çš„æƒ…å†µä¸‹å¯èƒ½ä¼šä¸¢åŒ…ï¼Œå½±å“è§†é¢‘è§‚çœ‹è´¨é‡ã€‚å› è€Œå›´ç»•IPTVçš„è§†é¢‘è´¨é‡çš„ç ”ç©¶è¿˜æ˜¯æŒºå¤šçš„ã€‚RTSPè§„èŒƒå¯å‚è€ƒï¼šRTSPåè®®å­¦ä¹ ç¬”è®°RTSP+RTPç³»ç»Ÿä¸­è¡¡é‡æœåŠ¡è´¨é‡å¯å‚è€ƒï¼šç½‘ç»œè§†é¢‘ä¼ è¾“çš„æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰ä¸Šæµ·IPTVç æµåˆ†æžç»“æžœå¯å‚è€ƒï¼šIPTVè§†é¢‘ç æµåˆ†æžå› ä¸ºäº’è”ç½‘ç½‘ç»œçŽ¯å¢ƒçš„ä¸ç¨³å®šæ€§ï¼ŒRTSP+RTPè¾ƒå°‘ç”¨äºŽäº’è”ç½‘è§†éŸ³é¢‘ä¼ è¾“ã€‚äº’è”ç½‘è§†é¢‘æœåŠ¡é€šå¸¸é‡‡ç”¨TCPä½œä¸ºå…¶æµåª’ä½“çš„ä¼ è¾“å±‚åè®®ï¼Œå› è€ŒåƒRTMPï¼ŒMMSï¼ŒHTTPè¿™ç±»çš„åè®®å¹¿æ³›ç”¨äºŽäº’è”ç½‘è§†éŸ³é¢‘æœåŠ¡ä¹‹ä¸­ã€‚è¿™ç±»åè®®ä¸ä¼šå‘ç”Ÿä¸¢åŒ…ï¼Œå› è€Œä¿è¯äº†è§†é¢‘çš„è´¨é‡ï¼Œä½†æ˜¯ä¼ è¾“çš„æ•ˆçŽ‡ä¼šç›¸å¯¹ä½Žä¸€äº›ã€‚æ­¤å¤–RTMFPæ˜¯ä¸€ç§æ¯”è¾ƒæ–°çš„æµåª’ä½“åè®®ï¼Œç‰¹ç‚¹æ˜¯æ”¯æŒP2Pã€‚RTMPæˆ‘åšçš„ç ”ç©¶ç›¸å¯¹å¤šä¸€äº›ï¼šæ¯”å¦‚RTMPè§„èŒƒç®€å•åˆ†æžï¼Œæˆ–è€…RTMPæµåª’ä½“æ’­æ”¾è¿‡ç¨‹ç›¸å…³å·¥å…·çš„æºä»£ç åˆ†æžï¼šRTMPdumpæºä»£ç åˆ†æž 1ï¼š main()å‡½æ•°[ç³»åˆ—æ–‡ç« ]RTMPåè®®å­¦ä¹ ï¼šRTMPæµåª’ä½“æŠ€æœ¯é›¶åŸºç¡€å­¦ä¹ æ–¹æ³• å°è£…æ ¼å¼å°è£…æ ¼å¼çš„ä¸»è¦ä½œç”¨æ˜¯æŠŠè§†é¢‘ç æµå’ŒéŸ³é¢‘ç æµæŒ‰ç…§ä¸€å®šçš„æ ¼å¼å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚çŽ°å¦‚ä»Šæµè¡Œçš„å°è£…æ ¼å¼å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼šç”±è¡¨å¯è§ï¼Œé™¤äº†AVIä¹‹å¤–ï¼Œå…¶ä»–å°è£…æ ¼å¼éƒ½æ”¯æŒæµåª’ä½“ï¼Œå³å¯ä»¥â€œè¾¹ä¸‹è¾¹æ’­â€ã€‚æœ‰äº›æ ¼å¼æ›´â€œä¸‡èƒ½â€ä¸€äº›ï¼Œæ”¯æŒçš„è§†éŸ³é¢‘ç¼–ç æ ‡å‡†å¤šä¸€äº›ï¼Œæ¯”å¦‚MKVã€‚è€Œæœ‰äº›æ ¼å¼åˆ™æ”¯æŒçš„ç›¸å¯¹æ¯”è¾ƒå°‘ï¼Œæ¯”å¦‚è¯´RMVBã€‚è¿™äº›å°è£…æ ¼å¼éƒ½æœ‰ç›¸å…³çš„æ–‡æ¡£ï¼Œåœ¨è¿™é‡Œå°±ä¸ä¸€ä¸€ä¾‹ä¸¾äº†ã€‚æˆ‘è‡ªå·±ä¹Ÿåšè¿‡è¾…åŠ©å­¦ä¹ çš„å°é¡¹ç›®ï¼šTSå°è£…æ ¼å¼åˆ†æžå™¨FLVå°è£…æ ¼å¼åˆ†æžå™¨ è§†é¢‘ç¼–ç è§†é¢‘ç¼–ç çš„ä¸»è¦ä½œç”¨æ˜¯å°†è§†é¢‘åƒç´ æ•°æ®ï¼ˆRGBï¼ŒYUVç­‰ï¼‰åŽ‹ç¼©æˆä¸ºè§†é¢‘ç æµï¼Œä»Žè€Œé™ä½Žè§†é¢‘çš„æ•°æ®é‡ã€‚å¦‚æžœè§†é¢‘ä¸ç»è¿‡åŽ‹ç¼©ç¼–ç çš„è¯ï¼Œä½“ç§¯é€šå¸¸æ˜¯éžå¸¸å¤§çš„ï¼Œä¸€éƒ¨ç”µå½±å¯èƒ½å°±è¦ä¸Šç™¾Gçš„ç©ºé—´ã€‚è§†é¢‘ç¼–ç æ˜¯è§†éŸ³é¢‘æŠ€æœ¯ä¸­æœ€é‡è¦çš„æŠ€æœ¯ä¹‹ä¸€ã€‚è§†é¢‘ç æµçš„æ•°æ®é‡å äº†è§†éŸ³é¢‘æ€»æ•°æ®é‡çš„ç»å¤§éƒ¨åˆ†ã€‚é«˜æ•ˆçŽ‡çš„è§†é¢‘ç¼–ç åœ¨åŒç­‰çš„ç çŽ‡ä¸‹ï¼Œå¯ä»¥èŽ·å¾—æ›´é«˜çš„è§†é¢‘è´¨é‡ã€‚è§†é¢‘ç¼–ç çš„ç®€å•åŽŸç†å¯ä»¥å‚è€ƒï¼šè§†é¢‘åŽ‹ç¼©ç¼–ç å’ŒéŸ³é¢‘åŽ‹ç¼©ç¼–ç çš„åŸºæœ¬åŽŸç†æ³¨ï¼šè§†é¢‘ç¼–ç æŠ€æœ¯åœ¨æ•´ä¸ªè§†éŸ³é¢‘æŠ€æœ¯ä¸­åº”è¯¥æ˜¯æœ€å¤æ‚çš„æŠ€æœ¯ã€‚å¦‚æžœæ²¡æœ‰åŸºç¡€çš„è¯ï¼Œå¯ä»¥å…ˆä¹°ä¸€äº›ä¹¦çœ‹ä¸€ä¸‹åŽŸç†ï¼Œæ¯”å¦‚è¯´ã€ŠçŽ°ä»£ç”µè§†åŽŸç†ã€‹ã€Šæ•°å­—ç”µè§†å¹¿æ’­åŽŸç†ä¸Žåº”ç”¨ã€‹ï¼ˆæœ¬ç§‘çš„è¯¾æœ¬ï¼‰ä¸­çš„éƒ¨åˆ†ç« èŠ‚ã€‚ ç”±è¡¨å¯è§ï¼Œæœ‰ä¸¤ç§è§†é¢‘ç¼–ç æ–¹æ¡ˆæ˜¯æœ€æ–°æŽ¨å‡ºçš„ï¼šVP9å’ŒHEVCã€‚ç›®å‰è¿™ä¸¤ç§æ–¹æ¡ˆéƒ½å¤„äºŽç ”å‘é˜¶æ®µï¼Œè¿˜æ²¡æœ‰åˆ°è¾¾å®žç”¨çš„ç¨‹åº¦ã€‚å½“å‰ä½¿ç”¨æœ€å¤šçš„è§†é¢‘ç¼–ç æ–¹æ¡ˆå°±æ˜¯H.264ã€‚ 4.1 ä¸»æµç¼–ç æ ‡å‡†H.264ä»…ä»…æ˜¯ä¸€ä¸ªç¼–ç æ ‡å‡†ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„ç¼–ç å™¨ï¼ŒH.264åªæ˜¯ç»™ç¼–ç å™¨çš„å®žçŽ°æä¾›å‚ç…§ç”¨çš„ã€‚åŸºäºŽH.264æ ‡å‡†çš„ç¼–ç å™¨è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œç©¶ç«Ÿå­°ä¼˜å­°åŠ£ï¼Ÿå¯å‚è€ƒï¼šMSUå‡ºå“çš„ H.264ç¼–ç å™¨æ¯”è¾ƒï¼ˆ2011.5ï¼‰åœ¨å­¦ä¹ è§†é¢‘ç¼–ç çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šç”¨åˆ°å„ç§ç¼–ç å™¨ï¼ˆå®žé™…ä¸Šå°±æ˜¯ä¸€ä¸ªexeæ–‡ä»¶ï¼‰ï¼Œä»–ä»¬å¸¸ç”¨çš„ç¼–ç å‘½ä»¤å¯ä»¥å‚è€ƒï¼šå„ç§è§†é¢‘ç¼–ç å™¨çš„å‘½ä»¤è¡Œæ ¼å¼å­¦ä¹ H.264æœ€æ ‡å‡†çš„æºä»£ç ï¼Œå°±æ˜¯å…¶å®˜æ–¹æ ‡å‡†JMäº†ã€‚ä½†æ˜¯è¦æ³¨æ„ï¼ŒJMé€Ÿåº¦éžå¸¸çš„æ…¢ï¼Œæ˜¯æ— æ³•ç”¨äºŽå®žé™…çš„ï¼šH.264å‚è€ƒè½¯ä»¶JM12.2RCä»£ç è¯¦ç»†æµç¨‹å®žé™…ä¸­ä½¿ç”¨æœ€å¤šçš„å°±æ˜¯x264äº†ï¼Œæ€§èƒ½å¼ºæ‚ï¼ˆè¶…è¿‡äº†å¾ˆå¤šå•†ä¸šç¼–ç å™¨ï¼‰ï¼Œè€Œä¸”å¼€æºã€‚å…¶åŸºæœ¬æ•™ç¨‹ç½‘ä¸Šæžå¤šï¼Œä¸å†èµ˜è¿°ã€‚ç¼–ç æ—¶å€™å¯å‚è€ƒï¼šx264ç¼–ç æŒ‡å—â€”â€”ç çŽ‡æŽ§åˆ¶ã€‚ç¼–ç åŽç»Ÿè®¡å€¼çš„å«ä¹‰ï¼šX264è¾“å‡ºçš„ç»Ÿè®¡å€¼çš„å«ä¹‰ï¼ˆX264 Stats Outputï¼‰GoogleæŽ¨å‡ºçš„VP8å±žäºŽå’ŒH.264åŒä¸€æ—¶ä»£çš„æ ‡å‡†ã€‚æ€»ä½“è€Œè¨€ï¼ŒVP8æ¯”H.264è¦ç¨å¾®å·®ä¸€ç‚¹ã€‚æœ‰ä¸€ç¯‡å†™çš„å¾ˆå¥½çš„VP8çš„ä»‹ç»æ–‡ç« ï¼šæ·±å…¥äº†è§£ VP8ã€‚é™¤äº†åœ¨æŠ€æœ¯é¢†åŸŸï¼ŒVP8å’ŒH.264åœ¨ä¸“åˆ©ç­‰æ–¹é¢ä¹Ÿæ˜¯æ‰“çš„ä¸å¯å¼€äº¤ï¼Œå¯å‚è€ƒæ–‡ç« ï¼šWebM(VP8) vs H.264æ­¤å¤–ï¼Œæˆ‘å›½è¿˜æŽ¨å‡ºäº†è‡ªå·±çš„å›½äº§æ ‡å‡†AVSï¼Œæ€§èƒ½ä¹Ÿä¸é”™ï¼Œä½†ç›®å‰æ¯”H.264è¿˜æ˜¯è¦ç¨å¾®é€Šè‰²ä¸€ç‚¹ã€‚ä¸è¿‡æ„Ÿè§‰æˆ‘å›½åœ¨è§†é¢‘ç¼–è§£ç é¢†åŸŸè¿˜ç®—æ¯”è¾ƒå…ˆè¿›çš„ï¼Œå¯å‚è€ƒï¼šè§†é¢‘ç¼–ç å›½å®¶æ ‡å‡†AVSä¸ŽH.264çš„æ¯”è¾ƒï¼ˆèŠ‚é€‰ï¼‰è¿‘æœŸåˆæŽ¨å‡ºäº†AVSæ–°ä¸€ä»£çš„ç‰ˆæœ¬AVS+ï¼Œå…·ä½“çš„æ€§èƒ½æµ‹è¯•è¿˜æ²¡çœ‹è¿‡ã€‚ä¸è¿‡æ®è¯´AVS+å¾—åˆ°äº†å›½å®¶æ”¿ç­–ä¸Šéžå¸¸å¼ºåŠ›çš„æ”¯æŒã€‚ 4.2 ä¸‹ä¸€ä»£ç¼–ç æ ‡å‡†ä¸‹ä¸€ä»£çš„ç¼–è§£ç æ ‡å‡†å°±è¦æ•°HEVCå’ŒVP9äº†ã€‚VP9æ˜¯Googleç»§VP8ä¹‹åŽæŽ¨å‡ºçš„æ–°ä¸€ä»£æ ‡å‡†ã€‚VP9å’ŒHEVCç›¸æ¯”ï¼Œè¦ç¨å¾®é€Šè‰²ä¸€äº›ã€‚å®ƒä»¬çš„å¯¹æ¯”å¯å‚è€ƒï¼šï¼ˆ1ï¼‰HEVCä¸ŽVP9ç¼–ç æ•ˆçŽ‡å¯¹æ¯” ï¼ˆ2ï¼‰HEVCï¼ŒVP9ï¼Œx264æ€§èƒ½å¯¹æ¯”HEVCåœ¨æœªæ¥æ‹¥æœ‰å¾ˆå¤šå¤§çš„ä¼˜åŠ¿ï¼Œå¯å‚è€ƒï¼šHEVCå°†ä¼šå–ä»£H.264çš„åŽŸå› å­¦ä¹ HEVCæœ€æ ‡å‡†çš„æºä»£ç ï¼Œå°±æ˜¯å…¶å®˜æ–¹æ ‡å‡†HMäº†ã€‚å…¶é€Ÿåº¦æ¯”H.264çš„å®˜æ–¹æ ‡å‡†ä»£ç åˆæ…¢äº†ä¸€å¤§æˆªï¼Œä½¿ç”¨å¯å‚è€ƒï¼šHEVCå­¦ä¹ â€”â€” HMçš„ä½¿ç”¨æœªæ¥å®žé™…ä½¿ç”¨çš„HEVCå¼€æºç¼–ç å™¨å¾ˆæœ‰å¯èƒ½æ˜¯x265ï¼Œç›®å‰è¯¥é¡¹ç›®è¿˜å¤„äºŽå‘å±•é˜¶æ®µï¼Œå¯å‚è€ƒï¼šx265(HEVCç¼–ç å™¨ï¼ŒåŸºäºŽx264)ä»‹ç»ã€‚x265çš„ä½¿ç”¨å¯ä»¥å‚è€ƒï¼šHEVCï¼ˆH.265ï¼‰æ ‡å‡†çš„ç¼–ç å™¨ï¼ˆx265ï¼ŒDivX265ï¼‰è¯•ç”¨ä¸»æµä»¥åŠä¸‹ä¸€ä»£ç¼–ç æ ‡å‡†ä¹‹é—´çš„æ¯”è¾ƒå¯ä»¥å‚è€ƒæ–‡ç« ï¼šè§†é¢‘ç¼–ç æ–¹æ¡ˆä¹‹é—´çš„æ¯”è¾ƒï¼ˆHEVCï¼ŒH.264ï¼ŒMPEG2ç­‰ï¼‰æ­¤å¤–ï¼Œåœ¨ç çŽ‡ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œå‡ ç§ç¼–ç æ ‡å‡†çš„æ¯”è¾ƒå¯å‚è€ƒï¼šé™åˆ¶ç çŽ‡çš„è§†é¢‘ç¼–ç æ ‡å‡†æ¯”è¾ƒï¼ˆåŒ…æ‹¬MPEG-2ï¼ŒH.263ï¼Œ MPEG-4ï¼Œä»¥åŠ H.264ï¼‰ç»“æžœå¤§è‡´æ˜¯è¿™æ ·çš„ï¼šHEVC &gt; VP9 &gt; H.264&gt; VP8 &gt; MPEG4 &gt; H.263 &gt; MPEG2ã€‚æˆªäº†ä¸€äº›å›¾ï¼Œå¯ä»¥æ¯”è¾ƒç›´è§‚çš„äº†è§£å„ç§ç¼–ç æ ‡å‡†ï¼šHEVCç æµç®€æžï¼šHEVCç æµç®€å•åˆ†æžH.264ç æµç®€æžï¼šH.264ç®€å•ç æµåˆ†æžMPEG2ç æµç®€æžï¼šMPEG2ç®€å•ç æµåˆ†æžä»¥ä¸Šç®€æžä½¿ç”¨çš„å·¥å…·ï¼šè§†é¢‘ç æµåˆ†æžå·¥å…·æˆ‘è‡ªå·±åšçš„å°å·¥å…·ï¼š H.264ç æµåˆ†æžå™¨ éŸ³é¢‘ç¼–ç éŸ³é¢‘ç¼–ç çš„ä¸»è¦ä½œç”¨æ˜¯å°†éŸ³é¢‘é‡‡æ ·æ•°æ®ï¼ˆPCMç­‰ï¼‰åŽ‹ç¼©æˆä¸ºéŸ³é¢‘ç æµï¼Œä»Žè€Œé™ä½ŽéŸ³é¢‘çš„æ•°æ®é‡ã€‚éŸ³é¢‘ç¼–ç ä¹Ÿæ˜¯äº’è”ç½‘è§†éŸ³é¢‘æŠ€æœ¯ä¸­ä¸€ä¸ªé‡è¦çš„æŠ€æœ¯ã€‚ä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹éŸ³é¢‘çš„æ•°æ®é‡è¦è¿œå°äºŽè§†é¢‘çš„æ•°æ®é‡ï¼Œå› è€Œå³ä½¿ä½¿ç”¨ç¨å¾®è½åŽçš„éŸ³é¢‘ç¼–ç æ ‡å‡†ï¼Œè€Œå¯¼è‡´éŸ³é¢‘æ•°æ®é‡æœ‰æ‰€å¢žåŠ ï¼Œä¹Ÿä¸ä¼šå¯¹è§†éŸ³é¢‘çš„æ€»æ•°æ®é‡äº§ç”Ÿå¤ªå¤§çš„å½±å“ã€‚é«˜æ•ˆçŽ‡çš„éŸ³é¢‘ç¼–ç åœ¨åŒç­‰çš„ç çŽ‡ä¸‹ï¼Œå¯ä»¥èŽ·å¾—æ›´é«˜çš„éŸ³è´¨ã€‚éŸ³é¢‘ç¼–ç çš„ç®€å•åŽŸç†å¯ä»¥å‚è€ƒï¼šè§†é¢‘åŽ‹ç¼©ç¼–ç å’ŒéŸ³é¢‘åŽ‹ç¼©ç¼–ç çš„åŸºæœ¬åŽŸç† ç”±è¡¨å¯è§ï¼Œè¿‘å¹´æ¥å¹¶æœªæŽ¨å‡ºå…¨æ–°çš„éŸ³é¢‘ç¼–ç æ–¹æ¡ˆï¼Œå¯è§éŸ³é¢‘ç¼–ç æŠ€æœ¯å·²ç»åŸºæœ¬å¯ä»¥æ»¡è¶³äººä»¬çš„éœ€è¦ã€‚éŸ³é¢‘ç¼–ç æŠ€æœ¯è¿‘æœŸç»å¤§éƒ¨åˆ†çš„æ”¹åŠ¨éƒ½æ˜¯åœ¨MP3çš„ç»§ä»»è€…â€”â€”AACçš„åŸºç¡€ä¸Šå®Œæˆçš„ã€‚è¿™äº›ç¼–ç æ ‡å‡†ä¹‹é—´çš„æ¯”è¾ƒå¯ä»¥å‚è€ƒæ–‡ç« ï¼šéŸ³é¢‘ç¼–ç æ–¹æ¡ˆä¹‹é—´éŸ³è´¨æ¯”è¾ƒï¼ˆAACï¼ŒMP3ï¼ŒWMAç­‰ï¼‰ç»“æžœå¤§è‡´æ˜¯è¿™æ ·çš„ï¼šAAC+ &gt; MP3PRO &gt; AAC&gt; RealAudio &gt; WMA &gt; MP3AACæ ¼å¼çš„ä»‹ç»ï¼šAACæ ¼å¼ç®€ä»‹AACå‡ ç§ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„å¯¹æ¯”ï¼šAACè§„æ ¼ï¼ˆLCï¼ŒHEï¼ŒHEv2ï¼‰åŠæ€§èƒ½å¯¹æ¯”AACä¸“åˆ©æ–¹é¢çš„ä»‹ç»ï¼šAACä¸“åˆ©ä»‹ç»æ­¤å¤–æœæ¯”æ•°å­—çš„ç¼–ç æ ‡å‡†ä¹Ÿæ¯”è¾ƒæµè¡Œï¼Œä½†æ˜¯è²Œä¼¼æ¯”æœ€æ–°çš„AACç¨ä¸ºé€Šè‰²ï¼šAC-3æŠ€æœ¯ç»¼è¿°æˆ‘è‡ªå·±åšçš„å°å·¥å…·ï¼š AACæ ¼å¼åˆ†æžå™¨ çŽ°æœ‰ç½‘ç»œè§†éŸ³é¢‘å¹³å°å¯¹æ¯”çŽ°æœ‰çš„ç½‘ç»œè§†éŸ³é¢‘æœåŠ¡ä¸»è¦åŒ…æ‹¬ä¸¤ç§æ–¹å¼ï¼šç‚¹æ’­å’Œç›´æ’­ã€‚ç‚¹æ’­æ„å³æ ¹æ®ç”¨æˆ·çš„éœ€è¦æ’­æ”¾ç›¸åº”çš„è§†é¢‘èŠ‚ç›®ï¼Œè¿™æ˜¯äº’è”ç½‘è§†éŸ³é¢‘æœåŠ¡æœ€ä¸»è¦çš„æ–¹å¼ã€‚ç»å¤§éƒ¨åˆ†è§†é¢‘ç½‘ç«™éƒ½æä¾›äº†ç‚¹æ’­æœåŠ¡ã€‚ç›´æ’­æ„å³äº’è”ç½‘è§†éŸ³é¢‘å¹³å°ç›´æŽ¥å°†è§†é¢‘å†…å®¹å®žæ—¶å‘é€ç»™ç”¨æˆ·ï¼Œç›®å‰è¿˜å¤„äºŽå‘å±•é˜¶æ®µã€‚ç›´æ’­åœ¨ç½‘ç»œç”µè§†å°ï¼Œç¤¾äº¤è§†é¢‘ç½‘ç«™è¾ƒä¸ºå¸¸è§ã€‚ ç›´æ’­å¹³å°å‚æ•°å¯¹æ¯”ä¸»æµäº’è”ç½‘è§†éŸ³é¢‘å¹³å°ç›´æ’­æœåŠ¡çš„å‚æ•°å¯¹æ¯”å¦‚è¡¨æ‰€ç¤ºï¼šçŽ°æœ‰ç½‘ç»œè§†éŸ³é¢‘å¹³å°å‚æ•°å¯¹æ¯” å¯ä»¥çœ‹å‡ºï¼Œç›´æ’­æœåŠ¡æ™®éé‡‡ç”¨äº†RTMPä½œä¸ºæµåª’ä½“åè®®ï¼ŒFLVä½œä¸ºå°è£…æ ¼å¼ï¼ŒH.264ä½œä¸ºè§†é¢‘ç¼–ç æ ¼å¼ï¼ŒAACä½œä¸ºéŸ³é¢‘ç¼–ç æ ¼å¼ã€‚é‡‡ç”¨RTMPä½œä¸ºç›´æ’­åè®®çš„å¥½å¤„åœ¨äºŽå…¶è¢«Flashæ’­æ”¾å™¨æ”¯æŒã€‚è€ŒFlashæ’­æ”¾å™¨å¦‚ä»Šå·²ç»å®‰è£…åœ¨å…¨çƒ99%çš„ç”µè„‘ä¸Šï¼Œå¹¶ä¸”ä¸Žæµè§ˆå™¨ç»“åˆçš„å¾ˆå¥½ã€‚å› æ­¤è¿™ç§æµåª’ä½“ç›´æ’­å¹³å°å¯ä»¥å®žçŽ°â€œæ— æ’ä»¶ç›´æ’­â€ï¼Œæžå¤§çš„ç®€åŒ–äº†å®¢æˆ·ç«¯çš„æ“ä½œã€‚å°è£…æ ¼å¼ï¼Œè§†é¢‘ç¼–ç ï¼ŒéŸ³é¢‘ç¼–ç æ–¹é¢ï¼Œæ— ä¸€ä¾‹å¤–çš„ä½¿ç”¨äº†FLV + H.264 + AACçš„ç»„åˆã€‚FLVæ˜¯RTMPä½¿ç”¨çš„å°è£…æ ¼å¼ï¼ŒH.264æ˜¯å½“ä»Šå®žé™…åº”ç”¨ä¸­ç¼–ç æ•ˆçŽ‡æœ€é«˜çš„è§†é¢‘ç¼–ç æ ‡å‡†ï¼ŒAACåˆ™æ˜¯å½“ä»Šå®žé™…åº”ç”¨ä¸­ç¼–ç æ•ˆçŽ‡æœ€é«˜çš„éŸ³é¢‘ç¼–ç æ ‡å‡†ã€‚è§†é¢‘æ’­æ”¾å™¨æ–¹é¢ï¼Œéƒ½ä½¿ç”¨äº†Flashæ’­æ”¾å™¨ã€‚ ç‚¹æ’­å¹³å°å‚æ•°å¯¹æ¯”ä¸»æµç½‘ç»œè§†éŸ³é¢‘å¹³å°ç‚¹æ’­æœåŠ¡çš„å‚æ•°å¯¹æ¯”å¦‚è¡¨æ‰€ç¤ºï¼šçŽ°æœ‰äº’è”ç½‘è§†éŸ³é¢‘å¹³å°å‚æ•°å¯¹æ¯” å¯ä»¥çœ‹å‡ºï¼Œç‚¹æ’­æœåŠ¡æ™®éé‡‡ç”¨äº†HTTPä½œä¸ºæµåª’ä½“åè®®ï¼ŒH.264ä½œä¸ºè§†é¢‘ç¼–ç æ ¼å¼ï¼ŒAACä½œä¸ºéŸ³é¢‘ç¼–ç æ ¼å¼ã€‚é‡‡ç”¨HTTPä½œä¸ºç‚¹æ’­åè®®æœ‰ä»¥ä¸‹ä¸¤ç‚¹ä¼˜åŠ¿ï¼šä¸€æ–¹é¢ï¼ŒHTTPæ˜¯åŸºäºŽTCPåè®®çš„åº”ç”¨å±‚åè®®ï¼Œåª’ä½“ä¼ è¾“è¿‡ç¨‹ä¸­ä¸ä¼šå‡ºçŽ°ä¸¢åŒ…ç­‰çŽ°è±¡ï¼Œä»Žè€Œä¿è¯äº†è§†é¢‘çš„è´¨é‡ï¼›å¦ä¸€æ–¹é¢ï¼ŒHTTPè¢«ç»å¤§éƒ¨åˆ†çš„WebæœåŠ¡å™¨æ”¯æŒï¼Œå› è€Œæµåª’ä½“æœåŠ¡æœºæž„ä¸å¿…æŠ•èµ„è´­ä¹°é¢å¤–çš„æµåª’ä½“æœåŠ¡å™¨ï¼Œä»Žè€ŒèŠ‚çº¦äº†å¼€æ”¯ã€‚ç‚¹æ’­æœåŠ¡é‡‡ç”¨çš„å°è£…æ ¼å¼æœ‰å¤šç§ï¼šMP4ï¼ŒFLVï¼ŒF4Vç­‰ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä¸æ˜¯å¾ˆå¤§ã€‚è§†é¢‘ç¼–ç æ ‡å‡†å’ŒéŸ³é¢‘ç¼–ç æ ‡å‡†æ˜¯H.264å’ŒAACã€‚è¿™ä¸¤ç§æ ‡å‡†åˆ†åˆ«æ˜¯å½“ä»Šå®žé™…åº”ç”¨ä¸­ç¼–ç æ•ˆçŽ‡æœ€é«˜çš„è§†é¢‘æ ‡å‡†å’ŒéŸ³é¢‘æ ‡å‡†ã€‚è§†é¢‘æ’­æ”¾å™¨æ–¹é¢ï¼Œæ— ä¸€ä¾‹å¤–çš„éƒ½ä½¿ç”¨äº†Flashæ’­æ”¾å™¨ã€‚]]></content>
      <categories>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>æµåª’ä½“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[(è½¬)éŸ³è§†é¢‘åŸºç¡€æ¦‚å¿µæ±‡æ€»]]></title>
    <url>%2F2015%2F07%2F17%2F2015%2F%E8%BD%AC-%E9%9F%B3%E8%A7%86%E9%A2%91%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5%E6%B1%87%E6%80%BB%2F</url>
    <content type="text"><![CDATA[ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºæœ¬æ¦‚å¿µè®²è§£ åª’ä½“ï¼šæ˜¯è¡¨ç¤ºï¼Œä¼ è¾“ï¼Œå­˜å‚¨ä¿¡æ¯çš„è½½ä½“ï¼Œå¸¸äººä»¬è§åˆ°çš„æ–‡å­—ã€å£°éŸ³ã€å›¾åƒã€å›¾å½¢ç­‰éƒ½æ˜¯è¡¨ç¤ºä¿¡æ¯çš„åª’ä½“ã€‚ å¤šåª’ä½“ï¼š æ˜¯å£°éŸ³ã€åŠ¨ç”»ã€æ–‡å­—ã€å›¾åƒå’Œå½•åƒç­‰å„ç§åª’ä½“çš„ç»„åˆï¼Œä»¥å›¾æ–‡å¹¶èŒ‚ï¼Œç”ŸåŠ¨æ´»æ³¼çš„åŠ¨æ€å½¢å¼è¡¨çŽ°å‡ºæ¥ï¼Œç»™äººä»¥å¾ˆå¼ºçš„è§†è§‰å†²å‡»åŠ›ï¼Œç•™ä¸‹æ·±åˆ»å°è±¡ å¤šåª’ä½“æŠ€æœ¯ï¼šæ˜¯å°†æ–‡å­—ã€å£°éŸ³ã€å›¾å½¢ã€é™æ€å›¾åƒã€åŠ¨æ€å›¾åƒä¸Žè®¡ç®—é›†æˆåœ¨ä¸€èµ·çš„æŠ€æœ¯ã€‚å®ƒè¦è§£å†³çš„é—®é¢˜æ˜¯è®¡ç®—æœºè¿›ä¸€æ­¥å¸®åŠ©äººç±»æŒ‰æœ€è‡ªç„¶çš„å’Œæœ€ä¹ æƒ¯çš„æ–¹å¼æŽ¥å—å’Œå¤„ç†ä¿¡æ¯ã€‚ æµåª’ä½“ ï¼šæµåª’ä½“æ˜¯æŒ‡é‡‡ç”¨æµå¼ä¼ è¾“çš„æ–¹å¼åœ¨Internetæ’­æ”¾çš„è¿žç»­æ—¶åŸºåª’ä½“æ ¼å¼ï¼Œå®žé™…æŒ‡çš„æ˜¯ä¸€ç§æ–°çš„åª’ä½“ä¼ é€æ–¹å¼ï¼Œè€Œä¸æ˜¯ä¸€ç§æ–°çš„åª’ä½“æ ¼å¼ï¼ˆåœ¨ç½‘ç»œä¸Šä¼ è¾“éŸ³/è§†é¢‘ç­‰å¤šåª’ä½“ä¿¡æ¯çŽ°åœ¨ä¸»è¦æœ‰ä¸‹è½½å’Œæµå¼ä¼ è¾“ä¸¤ç§æ–¹å¼ï¼‰æµå¼ä¼ è¾“åˆ†ä¸¤ç§æ–¹æ³•ï¼šå®žæ—¶æµå¼ä¼ è¾“æ–¹å¼(Realtime streaming)å’Œé¡ºåºæµå¼ä¼ è¾“æ–¹å¼(progressive streaming)ã€‚ å¤šåª’ä½“æ–‡ä»¶ï¼šæ˜¯æ—¢åŒ…æ‹¬è§†é¢‘åˆåŒ…æ‹¬éŸ³é¢‘ï¼Œç”šè‡³è¿˜å¸¦æœ‰è„šæœ¬çš„ä¸€ä¸ªé›†åˆï¼Œä¹Ÿå¯ä»¥å«å®¹å™¨ï¼› åª’ä½“ç¼–ç ï¼šæ˜¯æ–‡ä»¶å½“ä¸­çš„è§†é¢‘å’ŒéŸ³é¢‘æ‰€é‡‡ç”¨çš„åŽ‹ç¼©ç®—æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªaviçš„æ–‡ä»¶ï¼Œå½“ä¸­çš„è§†é¢‘ç¼–ç æœ‰å¯èƒ½æ˜¯Aï¼Œä¹Ÿå¯èƒ½æ˜¯Bï¼Œè€Œå…¶éŸ³é¢‘ç¼–ç æœ‰å¯èƒ½æ˜¯1ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯2ã€‚ è½¬ç  ï¼šæŒ‡å°†ä¸€æ®µå¤šåª’ä½“åŒ…æ‹¬éŸ³é¢‘ã€è§†é¢‘æˆ–è€…å…¶ä»–çš„å†…å®¹ä»Žä¸€ç§ç¼–ç æ ¼å¼è½¬æ¢æˆä¸ºå¦å¤–ä¸€ç§ç¼–ç æ ¼å¼ è§†é¢‘ï¼šè¿žç»­çš„å›¾è±¡å˜åŒ–æ¯ç§’è¶…è¿‡24å¸§ï¼ˆFrameï¼‰ç”»é¢ä»¥ä¸Šæ—¶ï¼Œæ ¹æ®è§†è§‰æš‚ç•™åŽŸç†ï¼Œäººçœ¼æ— æ³•è¾¨åˆ«å•å¹…çš„é™æ€ç”»é¢ï¼Œçœ‹ä¸ŠåŽ»æ˜¯å¹³æ»‘è¿žç»­çš„è§†è§‰æ•ˆæžœï¼Œè¿™æ ·è¿žç»­çš„ç”»é¢å«åšè§†é¢‘ éŸ³é¢‘ ï¼šäººç±»èƒ½å¬åˆ°çš„å£°éŸ³éƒ½æˆä¸ºéŸ³é¢‘ï¼Œä½†æ˜¯ä¸€èˆ¬æˆ‘ä»¬æ‰€è¯´åˆ°çš„éŸ³é¢‘æ—¶å­˜å‚¨åœ¨è®¡ç®—æœºé‡Œçš„å£°éŸ³ ç¬¬äºŒéƒ¨åˆ†ï¼šè§†é¢‘æ–‡ä»¶æ ¼å¼ ç çŽ‡ï¼šç çŽ‡å°±æ˜¯æ•°æ®ä¼ è¾“æ—¶å•ä½æ—¶é—´ä¼ é€çš„æ•°æ®ä½æ•°,ä¸€èˆ¬æˆ‘ä»¬ç”¨çš„å•ä½æ˜¯kbpså³åƒä½æ¯ç§’ã€‚ é€šä¿—ä¸€ç‚¹çš„ç†è§£å°±æ˜¯å–æ ·çŽ‡ï¼Œå•ä½æ—¶é—´å†…å–æ ·çŽ‡è¶Šå¤§ï¼Œç²¾åº¦å°±è¶Šé«˜ï¼Œå¤„ç†å‡ºæ¥çš„æ–‡ä»¶å°±è¶ŠæŽ¥è¿‘åŽŸå§‹æ–‡ä»¶ï¼Œä½†æ˜¯æ–‡ä»¶ä½“ç§¯ä¸Žå–æ ·çŽ‡æ˜¯æˆæ­£æ¯”çš„ï¼Œæ‰€ä»¥å‡ ä¹Žæ‰€æœ‰çš„ç¼–ç æ ¼å¼é‡è§†çš„éƒ½æ˜¯å¦‚ä½•ç”¨æœ€ä½Žçš„ç çŽ‡è¾¾åˆ°æœ€å°‘çš„å¤±çœŸã€‚ä½†æ˜¯å› ä¸ºç¼–ç ç®—æ³•ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¹Ÿä¸èƒ½ç”¨ç çŽ‡æ¥ç»Ÿä¸€è¡¡é‡éŸ³è´¨æˆ–è€…ç”»è´¨. å¸§ï¼šå¸§å°±æ˜¯ä¸€æ®µæ•°æ®çš„ç»„åˆï¼Œå®ƒæ˜¯æ•°æ®ä¼ è¾“çš„åŸºæœ¬å•ä½ã€‚å°±æ˜¯å½±åƒåŠ¨ç”»ä¸­æœ€å°å•ä½çš„å•å¹…å½±åƒç”»é¢ï¼Œç›¸å½“äºŽç”µå½±èƒ¶ç‰‡ä¸Šçš„æ¯ä¸€æ ¼é•œå¤´ã€‚ä¸€å¸§å°±æ˜¯ä¸€å‰¯é™æ­¢çš„ç”»é¢ï¼Œè¿žç»­çš„å¸§å°±å½¢æˆåŠ¨ç”»ï¼Œå¦‚ç”µè§†å›¾åƒç­‰ã€‚ å¸§çŽ‡ï¼šå¸§çŽ‡å³æ¯ç§’æ˜¾ç¤ºå¸§æ•°ï¼Œå¸§çŽ‡è¡¨ç¤ºå›¾å½¢å¤„ç†å™¨å¤„ç†åœºæ—¶æ¯ç§’é’Ÿèƒ½å¤Ÿæ›´æ–°çš„æ¬¡æ•°ã€‚é«˜çš„å¸§çŽ‡å¯ä»¥å¾—åˆ°æ›´æµç•…ã€æ›´é€¼çœŸçš„åŠ¨ç”»ã€‚ä¸€èˆ¬æ¥è¯´30fpså°±æ˜¯å¯ä»¥æŽ¥å—çš„ï¼Œä½†æ˜¯å°†æ€§èƒ½æå‡è‡³60fpsåˆ™å¯ä»¥æ˜Žæ˜¾æå‡äº¤äº’æ„Ÿå’Œé€¼çœŸæ„Ÿï¼Œä½†æ˜¯ä¸€èˆ¬æ¥è¯´è¶…è¿‡75fpsä¸€èˆ¬å°±ä¸å®¹æ˜“å¯Ÿè§‰åˆ°æœ‰æ˜Žæ˜¾çš„æµç•…åº¦æå‡äº†ã€‚å¦‚æžœå¸§çŽ‡è¶…è¿‡å±å¹•åˆ·æ–°çŽ‡åªä¼šæµªè´¹å›¾å½¢å¤„ç†çš„èƒ½åŠ›ï¼Œå› ä¸ºç›‘è§†å™¨ä¸èƒ½ä»¥è¿™ä¹ˆå¿«çš„é€Ÿåº¦æ›´æ–°ï¼Œè¿™æ ·è¶…è¿‡æ–°çŽ‡çš„å¸§çŽ‡å°±æµªè´¹æŽ‰äº†ã€‚å…³é”®å¸§ï¼šç›¸å½“äºŽäºŒç»´åŠ¨ç”»ä¸­çš„åŽŸç”»ï¼ŒæŒ‡è§’è‰²æˆ–è€…ç‰©ä½“è¿åŠ¨æˆ–å˜åŒ–ä¸­çš„å…³é”®åŠ¨ä½œæ‰€å¤„çš„é‚£ä¸€å¸§ï¼Œå®ƒåŒ…å«äº†å›¾åƒçš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŽæ¥å¸§ä»…åŒ…å«äº†æ”¹å˜äº†çš„ä¿¡æ¯ã€‚å¦‚æžœä½ æ²¡æœ‰è¶³å¤Ÿçš„å…³é”®å¸§ï¼Œä½ çš„å½±ç‰‡å“è´¨å¯èƒ½æ¯”è¾ƒå·®ï¼Œå› ä¸ºæ‰€æœ‰çš„å¸§ä»Žåˆ«çš„å¸§å¤„äº§ç”Ÿã€‚å¯¹äºŽä¸€èˆ¬çš„ç”¨é€”ï¼Œä¸€ä¸ªæ¯”è¾ƒå¥½çš„åŽŸåˆ™æ˜¯æ¯5ç§’è®¾ä¸€ä¸ªå…³é”®é”®ã€‚ä½†å¦‚æžœæ—¶é‚£ç§å®žæ—¶ä¼ è¾“çš„æµæ–‡ä»¶ï¼Œé‚£ä¹ˆè¦è€ƒè™‘ä¼ è¾“ç½‘ç»œçš„å¯é åº¦ï¼Œæ‰€ä»¥è¦1åˆ°2ç§’å¢žåŠ ä¸€ä¸ªå…³é”®å¸§ã€‚ç›®å‰æˆ‘ä»¬ç»å¸¸è§çš„è§†é¢‘æ ¼å¼æ— éžå°±æ˜¯ä¸¤å¤§ç±»ï¼š1ã€å½±åƒæ ¼å¼ï¼ˆVideoï¼‰2ã€æµåª’ä½“æ ¼å¼ï¼ˆStream Videoï¼‰ åœ¨å½±åƒæ ¼å¼ä¸­è¿˜å¯ä»¥æ ¹æ®å‡ºå¤„åˆ’åˆ†ä¸ºä¸‰å¤§ç§ï¼š1ã€AVIæ ¼å¼ï¼šè¿™æ˜¯ç”±å¾®è½¯ï¼ˆMicrosoftï¼‰æå‡ºï¼Œå…·æœ‰â€œæ‚ ä¹…åŽ†å²â€çš„ä¸€ç§è§†é¢‘æ ¼å¼2ã€MOVæ ¼å¼ï¼šè¿™æ˜¯ç”±è‹¹æžœï¼ˆAppleï¼‰å…¬å¸æå‡ºçš„ä¸€ç§è§†é¢‘æ ¼å¼3ã€MPEG/MPG/DATï¼šè¿™æ˜¯ç”±å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ISO(International Standards Organization)ä¸ŽIEC(International Electronic Committee)è”åˆå¼€å‘çš„ä¸€ç§ç¼–ç è§†é¢‘æ ¼å¼ã€‚MPEGæ˜¯è¿åŠ¨å›¾åƒåŽ‹ç¼©ç®—æ³•çš„å›½é™…æ ‡å‡†ï¼ŒçŽ°å·²è¢«å‡ ä¹Žæ‰€æœ‰çš„è®¡ç®—æœºå¹³å°å…±åŒæ”¯æŒã€‚ åœ¨æµåª’ä½“æ ¼å¼ä¸­åŒæ ·è¿˜å¯ä»¥åˆ’åˆ†ä¸ºä¸‰ç§ï¼š1ã€RMæ ¼å¼ï¼šè¿™æ˜¯ç”±Real Networkså…¬å¸å¼€å‘çš„ä¸€ç§æ–°åž‹æµå¼è§†é¢‘æ–‡ä»¶æ ¼å¼ã€‚2ã€MOV/QTæ ¼å¼ï¼šMOVä¹Ÿå¯ä»¥ä½œä¸ºä¸€ç§æµæ–‡ä»¶æ ¼å¼ã€‚QuickTimeèƒ½å¤Ÿé€šè¿‡Internetæä¾›å®žæ—¶çš„æ•°å­—åŒ–ä¿¡æ¯æµã€å·¥ä½œæµä¸Žæ–‡ä»¶å›žæ”¾åŠŸèƒ½ï¼Œä¸ºäº†é€‚åº”è¿™ä¸€ç½‘ç»œå¤šåª’ä½“åº”ç”¨ï¼ŒQuickTimeä¸ºå¤šç§æµè¡Œçš„æµè§ˆå™¨è½¯ä»¶æä¾›äº†ç›¸åº”çš„QuickTime Vieweræ’ä»¶ï¼ˆPlugï¼inï¼‰ï¼Œèƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¸­å®žçŽ°å¤šåª’ä½“æ•°æ®çš„å®žæ—¶å›žæ”¾ã€‚3ã€ASFæ ¼å¼ï¼šè¿™æ˜¯ç”±å¾®è½¯å…¬å¸å¼€å‘çš„æµåª’ä½“æ ¼å¼ï¼Œæ˜¯ä¸€ä¸ªåœ¨Internetä¸Šå®žæ—¶ä¼ æ’­å¤šåª’ä½“çš„æŠ€æœ¯æ ‡å‡†ã€‚4ã€FLV å…·ä½“è§†é¢‘æ–‡ä»¶æ ¼å¼è¯¦è§£ï¼š *. MPEG/.MPG/.DATMPEGä¹Ÿæ˜¯Motion Picture Experts Groupçš„ç¼©å†™ã€‚è¿™ç±»æ ¼å¼åŒ…æ‹¬äº†MPEG-1, MPEG-2å’Œ MPEG-4åœ¨å†…çš„å¤šç§è§†é¢‘æ ¼å¼ã€‚MPEG-1ç›¸ä¿¡æ˜¯å¤§å®¶æŽ¥è§¦å¾—æœ€å¤šçš„äº†ï¼Œå› ä¸ºç›®å‰å…¶æ­£åœ¨è¢«å¹¿æ³›åœ°åº”ç”¨åœ¨VCDçš„åˆ¶ä½œå’Œä¸€äº›è§†é¢‘ç‰‡æ®µä¸‹è½½çš„ç½‘ç»œåº”ç”¨ä¸Šé¢ï¼Œå¤§éƒ¨åˆ†çš„VCDéƒ½æ˜¯ç”¨ MPEG1æ ¼å¼åŽ‹ç¼©çš„( åˆ»å½•è½¯ä»¶è‡ªåŠ¨å°†MPEG1è½¬ä¸º.DATæ ¼å¼)ï¼Œä½¿ç”¨ MPEG-1çš„åŽ‹ç¼©ç®—æ³•ï¼Œå¯ä»¥æŠŠä¸€éƒ¨ 120 åˆ†é’Ÿé•¿çš„ç”µå½±åŽ‹ç¼©åˆ°1.2 GB å·¦å³å¤§å°ã€‚MPEG-2åˆ™æ˜¯åº”ç”¨åœ¨DVD çš„åˆ¶ä½œï¼ŒåŒæ—¶åœ¨ä¸€äº›HDTVï¼ˆé«˜æ¸…æ™°ç”µè§†å¹¿æ’­ï¼‰å’Œä¸€äº›é«˜è¦æ±‚è§†é¢‘ç¼–è¾‘ã€å¤„ç†ä¸Šé¢ä¹Ÿæœ‰ç›¸å½“å¤šçš„åº”ç”¨ã€‚ä½¿ç”¨MPEG-2çš„åŽ‹ç¼©ç®—æ³•åŽ‹ç¼©ä¸€éƒ¨ 120 åˆ†é’Ÿé•¿çš„ç”µå½±å¯ä»¥åŽ‹ç¼©åˆ° 5-8 GBçš„å¤§å°ï¼ˆMPEG2çš„å›¾åƒè´¨é‡MPEG-1ä¸Žå…¶æ— æ³•æ¯”æ‹Ÿçš„ï¼‰ã€‚ *.AVI å®ƒçš„è‹±æ–‡å…¨ç§°ä¸ºAudio Video Interleavedï¼Œå³éŸ³é¢‘è§†é¢‘äº¤é”™æ ¼å¼ã€‚æ˜¯å°†è¯­éŸ³å’Œå½±åƒåŒæ­¥ç»„åˆåœ¨ä¸€èµ·çš„æ–‡ä»¶æ ¼å¼ã€‚å®ƒå¯¹è§†é¢‘æ–‡ä»¶é‡‡ç”¨äº†ä¸€ç§æœ‰æŸåŽ‹ç¼©æ–¹å¼ï¼Œä½†åŽ‹ç¼©æ¯”è¾ƒé«˜ï¼Œå› æ­¤å°½ç®¡é¢é¢è´¨é‡ä¸æ˜¯å¤ªå¥½ï¼Œä½†å…¶åº”ç”¨èŒƒå›´ä»ç„¶éžå¸¸å¹¿æ³›ã€‚AVIæ”¯æŒ256è‰²å’ŒRLEåŽ‹ç¼©ã€‚AVIä¿¡æ¯ä¸»è¦åº”ç”¨åœ¨å¤šåª’ä½“å…‰ç›˜ä¸Šï¼Œç”¨æ¥ä¿å­˜ç”µè§†ã€ç”µå½±ç­‰å„ç§å½±åƒä¿¡æ¯ã€‚å®ƒäºŽ1992å¹´è¢«Microsoftå…¬å¸æŽ¨å‡ºï¼ŒéšWindows3.1ä¸€èµ·è¢«äººä»¬æ‰€è®¤è¯†å’Œç†ŸçŸ¥ã€‚æ‰€è°“â€œéŸ³é¢‘è§†é¢‘äº¤é”™â€ï¼Œå°±æ˜¯å¯ä»¥å°†è§†é¢‘å’ŒéŸ³é¢‘äº¤ç»‡åœ¨ä¸€èµ·è¿›è¡ŒåŒæ­¥æ’­æ”¾ã€‚è¿™ç§è§†é¢‘æ ¼å¼çš„ä¼˜ç‚¹æ˜¯å›¾åƒè´¨é‡å¥½ï¼Œå¯ä»¥è·¨å¤šä¸ªå¹³å°ä½¿ç”¨ï¼Œå…¶ç¼ºç‚¹æ˜¯ä½“ç§¯è¿‡äºŽåºžå¤§ï¼Œè€Œä¸”æ›´åŠ ç³Ÿç³•çš„æ˜¯åŽ‹ç¼©æ ‡å‡†ä¸ç»Ÿä¸€ï¼Œæœ€æ™®éçš„çŽ°è±¡å°±æ˜¯é«˜ç‰ˆæœ¬Windowsåª’ä½“æ’­æ”¾å™¨æ’­æ”¾ä¸äº†é‡‡ç”¨æ—©æœŸç¼–ç ç¼–è¾‘çš„AVIæ ¼å¼è§†é¢‘ï¼Œè€Œä½Žç‰ˆæœ¬Windowsåª’ä½“æ’­æ”¾å™¨åˆæ’­æ”¾ä¸äº†é‡‡ç”¨æœ€æ–°ç¼–ç ç¼–è¾‘çš„AVIæ ¼å¼è§†é¢‘ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿›è¡Œä¸€äº›AVIæ ¼å¼çš„è§†é¢‘æ’­æ”¾æ—¶å¸¸ä¼šå‡ºçŽ°ç”±äºŽè§†é¢‘ç¼–ç é—®é¢˜è€Œé€ æˆçš„è§†é¢‘ä¸èƒ½æ’­æ”¾æˆ–å³ä½¿èƒ½å¤Ÿæ’­æ”¾ï¼Œä½†å­˜åœ¨ä¸èƒ½è°ƒèŠ‚æ’­æ”¾è¿›åº¦å’Œæ’­æ”¾æ—¶åªæœ‰å£°éŸ³æ²¡æœ‰å›¾åƒç­‰ä¸€äº›èŽ«åå…¶å¦™çš„é—®é¢˜ï¼Œå¦‚æžœç”¨æˆ·åœ¨è¿›è¡ŒAVIæ ¼å¼çš„è§†é¢‘æ’­æ”¾æ—¶é‡åˆ°äº†è¿™äº›é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä¸‹è½½ç›¸åº”çš„è§£ç å™¨æ¥è§£å†³ã€‚æ˜¯ç›®å‰è§†é¢‘æ–‡ä»¶çš„ä¸»æµã€‚ è¿™ç§æ ¼å¼çš„æ–‡ä»¶éšå¤„å¯è§ï¼Œæ¯”å¦‚ä¸€äº›æ¸¸æˆã€æ•™è‚²è½¯ä»¶çš„ç‰‡å¤´ï¼Œå¤šåª’ä½“å…‰ç›˜ä¸­ï¼Œéƒ½ä¼šæœ‰ä¸å°‘çš„ AVI ã€‚çŽ°åœ¨ï¼Œåœ¨WINDOWS 95æˆ–98é‡Œéƒ½èƒ½ç›´æŽ¥æ’­æ”¾AVIï¼ŒåŒä¸€ç§æ ¼å¼çš„aviæ–‡ä»¶æœ‰å¯èƒ½é‡‡ç”¨ä¸åŒçš„ç¼–ç æ–¹å¼ï¼Œæœ€å¸¸è§çš„æœ‰Intel Indeoï¼ˆRï¼‰Video R3.2ï¼ˆåƒæ¸¸æˆè¿‡åœºåŠ¨ç”»ç­‰ï¼Œæ˜¯ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„ä¸€ç§aviç¼–ç æŠ€æœ¯ï¼‰ã€Microsoft video ç­‰ã€‚ .RA/RM/RAM .RMï¼ŒReal Networkså…¬å¸æ‰€åˆ¶å®šçš„éŸ³é¢‘/è§†é¢‘åŽ‹ç¼©è§„èŒƒReal Mediaä¸­çš„ä¸€ç§ï¼ŒReal Playerèƒ½åšçš„å°±æ˜¯åˆ©ç”¨Internetèµ„æºå¯¹è¿™äº›ç¬¦åˆReal MediaæŠ€æœ¯è§„èŒƒçš„éŸ³é¢‘/è§†é¢‘è¿›è¡Œå®žå†µè½¬æ’­ã€‚åœ¨Real Mediaè§„èŒƒä¸­ä¸»è¦åŒ…æ‹¬ä¸‰ç±»æ–‡ä»¶ï¼šRealAudioã€Real Videoå’ŒReal Flashï¼ˆReal Networkså…¬å¸ä¸ŽMacromediaå…¬å¸åˆä½œæŽ¨å‡ºçš„æ–°ä¸€ä»£é«˜åŽ‹ç¼©æ¯”åŠ¨ç”»æ ¼å¼ï¼‰ã€‚REAL VIDEOï¼ˆRAã€RAMï¼‰æ ¼å¼ç”±ä¸€å¼€å§‹å°±æ˜¯å®šä½å°±æ˜¯åœ¨è§†é¢‘æµåº”ç”¨æ–¹é¢çš„ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯è§†é¢‘æµæŠ€æœ¯çš„å§‹åˆ›è€…ã€‚å®ƒå¯ä»¥åœ¨ç”¨56K MODEM æ‹¨å·ä¸Šç½‘çš„æ¡ä»¶å®žçŽ°ä¸é—´æ–­çš„è§†é¢‘æ’­æ”¾ï¼Œä»ŽRealVideoçš„å®šä½æ¥çœ‹ï¼Œå°±æ˜¯ç‰ºç‰²ç”»é¢è´¨é‡æ¥æ¢å–å¯è¿žç»­è§‚çœ‹æ€§ã€‚å…¶å®žRealVideoä¹Ÿå¯ä»¥å®žçŽ°ä¸é”™çš„ç”»é¢è´¨é‡ï¼Œç”±äºŽRealVideoå¯ä»¥æ‹¥æœ‰éžå¸¸é«˜çš„åŽ‹ç¼©æ•ˆçŽ‡ï¼Œå¾ˆå¤šäººæŠŠVCDç¼–ç æˆRealVideoæ ¼å¼çš„ï¼Œè¿™æ ·ä¸€æ¥ï¼Œä¸€å¼ å…‰ç›˜ä¸Šå¯ä»¥å­˜æ”¾å¥½å‡ éƒ¨ç”µå½±ã€‚REAL VIDEOå­˜åœ¨é¢œè‰²è¿˜åŽŸä¸å‡†ç¡®çš„é—®é¢˜ï¼ŒRealVideoå°±ä¸å¤ªé€‚åˆä¸“ä¸šçš„åœºåˆï¼Œä½†RealVideoå‡ºè‰²çš„åŽ‹ç¼©æ•ˆçŽ‡å’Œæ”¯æŒæµå¼æ’­æ”¾çš„ç‰¹å¾ï¼Œä½¿å¾—RealVideoåœ¨ç½‘ç»œå’Œå¨±ä¹åœºåˆå æœ‰ä¸é”™çš„å¸‚åœºä»½é¢ã€‚ *.MOVMOVæ ¼å¼ï¼Œç¾Žå›½Appleå…¬å¸å¼€å‘çš„ä¸€ç§è§†é¢‘æ ¼å¼ï¼Œé»˜è®¤çš„æ’­æ”¾å™¨æ˜¯è‹¹æžœçš„QuickTimePlayerã€‚å…·æœ‰è¾ƒé«˜çš„åŽ‹ç¼©æ¯”çŽ‡å’Œè¾ƒå®Œç¾Žçš„è§†é¢‘æ¸…æ™°åº¦ç­‰ç‰¹ç‚¹ï¼Œä½†æ˜¯å…¶æœ€å¤§çš„ç‰¹ç‚¹è¿˜æ˜¯è·¨å¹³å°æ€§ï¼Œå³ä¸ä»…èƒ½æ”¯æŒMacOSï¼ŒåŒæ ·ä¹Ÿèƒ½æ”¯æŒWindowsç³»åˆ—,åœ¨æ‰€æœ‰è§†é¢‘æ ¼å¼å½“ä¸­ï¼Œä¹Ÿè®¸MOVæ ¼å¼æ˜¯æœ€ä¸çŸ¥åçš„ã€‚ä¹Ÿè®¸ä½ ä¼šå¬è¯´è¿‡QuickTimeï¼ŒMOVæ ¼å¼çš„æ–‡ä»¶æ­£æ˜¯ç”±å®ƒæ¥æ’­æ”¾çš„ã€‚åœ¨PCå‡ ä¹Žä¸€ç»Ÿå¤©ä¸‹çš„ä»Šå¤©ï¼Œä»ŽAppleç§»æ¤è¿‡æ¥çš„MOVæ ¼å¼è‡ªç„¶æ˜¯å—åˆ°æŽ’æŒ¤çš„ã€‚å®ƒå…·æœ‰è·¨å¹³å°ã€å­˜å‚¨ç©ºé—´è¦æ±‚å°çš„æŠ€æœ¯ç‰¹ç‚¹ï¼Œè€Œé‡‡ç”¨äº†æœ‰æŸåŽ‹ç¼©æ–¹å¼çš„MOVæ ¼å¼æ–‡ä»¶ï¼Œç”»é¢æ•ˆæžœè¾ƒAVIæ ¼å¼è¦ç¨å¾®å¥½ä¸€äº›ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå®ƒå…±æœ‰4ä¸ªç‰ˆæœ¬ï¼Œå…¶ä¸­ä»¥ 4.0 ç‰ˆæœ¬çš„åŽ‹ç¼©çŽ‡æœ€å¥½ã€‚è¿™ç§ç¼–ç æ”¯æŒ16ä½å›¾åƒæ·±åº¦çš„å¸§å†…åŽ‹ç¼©å’Œå¸§é—´åŽ‹ç¼©ï¼Œå¸§çŽ‡æ¯ç§’10å¸§ä»¥ä¸Šã€‚çŽ°åœ¨è¿™ç§æ ¼å¼æœ‰äº›éžç¼–è½¯ä»¶ä¹Ÿå¯ä»¥å¯¹å®ƒæ—¶è¡Œå¤„ç†ï¼Œå…¶ä¸­åŒ…æ‹¬ADOBEå…¬å¸çš„ä¸“ä¸šçº§å¤šåª’ä½“è§†é¢‘å¤„ç†è½¯ä»¶AFTEREFFECTå’ŒPREMIEREã€‚ *.ASF ASF (Advanced Streaming formaté«˜çº§æµæ ¼å¼)ã€‚ASFæ˜¯MICROSOFT ä¸ºäº†å’ŒçŽ°åœ¨çš„ Real player ç«žäº‰è€Œå‘å±•å‡ºæ¥çš„ä¸€ç§å¯ä»¥ç›´æŽ¥åœ¨ç½‘ä¸Šè§‚çœ‹è§†é¢‘èŠ‚ç›®çš„æ–‡ä»¶åŽ‹ç¼©æ ¼å¼ã€‚ASFä½¿ç”¨äº†MPEG4çš„åŽ‹ç¼©ç®—æ³•ï¼ŒåŽ‹ç¼©çŽ‡å’Œå›¾åƒçš„è´¨é‡éƒ½å¾ˆä¸é”™ã€‚å› ä¸ºASFæ˜¯ä»¥ä¸€ä¸ªå¯ä»¥åœ¨ç½‘ä¸Šå³æ—¶è§‚èµçš„è§†é¢‘â€œæµâ€æ ¼å¼å­˜åœ¨çš„ï¼Œæ‰€ä»¥å®ƒçš„å›¾åƒè´¨é‡æ¯”VCDå·®ä¸€ç‚¹ç‚¹å¹¶ä¸å‡ºå¥‡ï¼Œä½†æ¯”åŒæ˜¯è§†é¢‘â€œæµâ€æ ¼å¼çš„RAMæ ¼å¼è¦å¥½ã€‚ ASFæ”¯æŒä»»æ„çš„åŽ‹ç¼©/è§£åŽ‹ç¼©ç¼–ç æ–¹å¼ï¼Œå¹¶å¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ç§åº•å±‚ç½‘ç»œä¼ è¾“åè®®ï¼Œå…·æœ‰å¾ˆå¤§çš„çµæ´»æ€§ã€‚ASFæµæ–‡ä»¶çš„æ•°æ®é€ŸçŽ‡å¯ä»¥åœ¨28.8Kbpsåˆ°3Mbpsä¹‹é—´å˜åŒ–ã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±åº”ç”¨çŽ¯å¢ƒå’Œç½‘ç»œæ¡ä»¶é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„é€ŸçŽ‡ï¼Œå®žçŽ°VODç‚¹æ’­å’Œç›´æ’­ã€‚ *.WMV WMVæ˜¯å¾®è½¯æŽ¨å‡ºçš„ä¸€ç§æµåª’ä½“æ ¼å¼ï¼Œå®ƒæ˜¯ASFçš„å‡çº§å»¶ä¼¸ï¼Œåœ¨åŒç­‰è§†é¢‘è´¨é‡ä¸‹ï¼ŒWMVæ ¼å¼çš„ä½“ç§¯éžå¸¸å°ï¼Œå› æ­¤å¾ˆé€‚åˆåœ¨ç½‘ä¸Šæ’­æ”¾å’Œä¼ è¾“ã€‚å¾®è½¯å¸Œæœ›ç”¨å…¶å–ä»£QuickTimeä¹‹ç±»çš„æŠ€æœ¯æ ‡å‡†ä»¥åŠWAVã€AVIä¹‹ç±»çš„æ–‡ä»¶æ‰©å±•åã€‚WMVçš„ä¸»è¦ä¼˜ç‚¹åœ¨äºŽï¼šå¯æ‰©å……çš„åª’ä½“ç±»åž‹ã€æœ¬åœ°æˆ–ç½‘ç»œå›žæ”¾ã€å¯ä¼¸ç¼©çš„åª’ä½“ç±»åž‹ã€æµçš„ä¼˜å…ˆçº§åŒ–ã€å¤šè¯­è¨€æ”¯æŒã€æ‰©å±•æ€§ç­‰ã€‚ *. NAVI å¦‚æžœä½ å‘çŽ°åŽŸæ¥çš„æ’­æ”¾è½¯ä»¶çªç„¶æ‰“ä¸å¼€æ­¤ç±»æ ¼å¼çš„AVIæ–‡ä»¶ï¼Œé‚£ä½ å°±è¦è€ƒè™‘æ˜¯ä¸æ˜¯ç¢°åˆ°äº†n AVIã€‚n AVIæ˜¯New AVI çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªåä¸ºShadow Realmçš„åœ°ä¸‹ç»„ç»‡å‘å±•èµ·æ¥çš„ä¸€ç§æ–°è§†é¢‘æ ¼å¼ã€‚å®ƒæ˜¯ç”±Microsoft ASFåŽ‹ç¼©ç®—æ³•çš„ä¿®æ”¹è€Œæ¥çš„ï¼ˆå¹¶ä¸æ˜¯æƒ³è±¡ä¸­çš„AVIï¼‰ï¼Œè§†é¢‘æ ¼å¼è¿½æ±‚çš„æ— éžæ˜¯åŽ‹ç¼©çŽ‡å’Œå›¾åƒè´¨é‡ï¼Œæ‰€ä»¥NAVIä¸ºäº†è¿½æ±‚è¿™ä¸ªç›®æ ‡ï¼Œæ”¹å–„äº†åŽŸå§‹çš„ASFæ ¼å¼çš„ä¸€äº›ä¸è¶³ï¼Œè®© NAVI å¯ä»¥æ‹¥æœ‰æ›´é«˜çš„å¸§çŽ‡ã€‚å¯ä»¥è¿™æ ·è¯´ï¼ŒNAVIæ˜¯ä¸€ç§åŽ»æŽ‰è§†é¢‘æµç‰¹æ€§çš„æ”¹è‰¯åž‹ASFæ ¼å¼ã€‚ *.FLV FLV æ˜¯ FLASH VIDEOçš„ç®€ç§°ï¼Œæ˜¯ç”±Macromediaå…¬å¸å¼€å‘çš„å±žäºŽè‡ªå·±çš„æµå¼è§†é¢‘æ ¼å¼ã€‚FLVä¹Ÿå°±æ˜¯éšç€Flash MXçš„æŽ¨å‡ºå‘å±•è€Œæ¥çš„è§†é¢‘æ ¼å¼ï¼Œæ˜¯åœ¨sorensonå…¬å¸çš„åŽ‹ç¼©ç®—æ³•çš„åŸºç¡€ä¸Šå¼€å‘å‡ºæ¥çš„ã€‚FLVæ ¼å¼ä¸ä»…å¯ä»¥è½»æ¾çš„å¯¼å…¥Flashä¸­ï¼Œé€Ÿåº¦æžå¿«ï¼Œå¹¶ä¸”èƒ½å…¶åˆ°ä¿æŠ¤ç‰ˆæƒçš„ä½œç”¨ï¼Œå¹¶ä¸”å¯ä»¥ä¸é€šè¿‡æœ¬åœ°çš„å¾®è½¯æˆ–è€…REALæ’­æ”¾å™¨æ’­æ”¾è§†é¢‘ã€‚Flash MX 2004å¯¹å…¶æä¾›äº†å®Œç¾Žçš„æ”¯æŒï¼Œå®ƒçš„å‡ºçŽ°æœ‰æ•ˆåœ°è§£å†³äº†è§†é¢‘æ–‡ä»¶å¯¼å…¥FlashåŽï¼Œä½¿å¯¼å‡ºçš„SWFæ–‡ä»¶ä½“ç§¯åºžå¤§ï¼Œä¸èƒ½åœ¨ç½‘ç»œä¸Šå¾ˆå¥½çš„ä½¿ç”¨ç­‰ç¼ºç‚¹ã€‚ç”±äºŽå®ƒå½¢æˆçš„æ–‡ä»¶æžå°ã€åŠ è½½é€Ÿåº¦æžå¿«ï¼Œä½¿å¾—ç½‘ç»œè§‚çœ‹è§†é¢‘æ–‡ä»¶æˆä¸ºå¯èƒ½ï¼Œå®ƒçš„å‡ºçŽ°æœ‰æ•ˆåœ°è§£å†³äº†è§†é¢‘æ–‡ä»¶å¯¼å…¥FlashåŽï¼Œä½¿å¯¼å‡ºçš„SWFæ–‡ä»¶ä½“ç§¯åºžå¤§ï¼Œä¸èƒ½åœ¨ç½‘ç»œä¸Šå¾ˆå¥½çš„ä½¿ç”¨ç­‰ç¼ºç‚¹ã€‚ è§†é¢‘æ–‡ä»¶è½¬æ¢ï¼šæ¯”è¾ƒå¸¸è§çš„è§†é¢‘æ ¼å¼è½¬åŒ–æœ‰ï¼š RMâ†’ASF AVIâ†’RMVB datâ€“&gt;divx mpgâ€“&gt;divx vcdâ€“&gt;rm datâ€“&gt;rm mpg,datã€aviã€movâ€“&gt;rm *â€“&gt;FLV æœ€è¿‘è§†é¢‘åšå®¢çš„å…´èµ·ï¼Œå¯¼è‡´äº†flvçš„å¿«é€Ÿå‘å±• AVIâ†’MPEG(MPEGï¼1) ä¾‹å¦‚æœ‰çºªå¿µæ€§çš„å®¶åº­å½•å½±å¸¦ï¼Œå¯ä»¥äº‹å…ˆè½¬æ¢æˆAVIæ ¼å¼ï¼Œå†ç”¨è½¯ä»¶å°†å®ƒè½¬æ¢æˆMPEGï¼1æ ¼å¼ï¼Œç„¶åŽç”¨åˆ»å½•å™¨å°†MPEGï¼1æ ¼å¼æ–‡ä»¶åˆ»å½•å…‰ç›˜ç‰‡ï¼Œå¾—åˆ°çš„å°±æ˜¯æ™®é€šçš„VCDå…‰ç›˜äº†ï¼Œå¯ä»¥æ‹¿åˆ°ä»»ä½•VCDæ’­æ”¾å™¨ä¸Šæ’­æ”¾ã€‚ MPEG(MPEGï¼1)â†’AVI ä»ŽMPEGåˆ°AVIæ–‡ä»¶ä¹‹é—´çš„è½¬æ¢ï¼Œä¸ºç£ç›˜èŠ‚çœç©ºé—´ã€‚ MPEG(MPEGï¼1)â†’ASF å°†vcdæ–‡ä»¶è½¬ç åŽå®žçŽ°VODç‚¹æ’­å’Œç›´æ’­ã€‚ ASFâ†’MPEG(MPEGï¼1) ç”±äºŽASFè§†é¢‘æ ¼å¼çš„å…ˆå¤©é™åˆ¶ï¼Œä¸€èˆ¬æ¥è¯´å®ƒçš„å›¾åƒè´¨é‡å¾€å¾€æ¯”ä¸ä¸ŠMPEGï¼1ï¼Œæ‰€ä»¥è½¬æ¢ä¹‹å‰ï¼Œè¯·ä¸‰æ€è€ŒåŽè¡Œã€‚ DVD(MPEGï¼2)â†’VCD (MPEGï¼1) ç”±äºŽDVDé©±åŠ¨å™¨å°šæœªæ™®åŠä»¥åŠDVDå…‰ç›˜æˆæœ¬æ˜‚è´µç­‰å®¢è§‚åŽŸå› ï¼ŒDVDå½±ç‰‡ä¸€ç›´æœªèƒ½åƒVCDä¸€æ ·æµè¡Œã€‚ä½†æˆ‘ä»¬å¯ä»¥å°†å–œçˆ±çš„DVDå½±ç‰‡è½¬æ¢æˆMPEGï¼1æ ¼å¼çš„è§†é¢‘æ–‡ä»¶ï¼Œç•™åœ¨ç¡¬ç›˜ä¸Šè§‚çœ‹æˆ–æ˜¯åˆ»æˆVCDå…‰ç›˜ã€‚ dat/mpg-&gt;mp3 CDâ€“&gt;wav,mp3,wma rmâ€“&gt;mp3 mp3â€“&gt;wma ä»¥ä¸Šåˆ—ä¸¾çš„è§†é¢‘æ ¼å¼è½¬åŒ–éƒ½æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œå½“ç„¶äº†ï¼Œè¯´åˆ°åº•ï¼Œæ˜¯æœ‰è¿™æ–¹é¢çš„å®žé™…åº”ç”¨éœ€æ±‚æ‰ä¼šå‡ºçŽ°è¿™æ–¹é¢çš„è§†é¢‘è½¬åŒ–éœ€è¦ã€‚æ¯”å¦‚è¯´ï¼Œè¦æŠŠä¸€éƒ¨VCDï¼ˆä¹Ÿå°±æ˜¯MPEG1ç¼–ç çš„è§†é¢‘æ–‡ä»¶ï¼‰åˆ¶ä½œæˆå¯ä»¥åœ¨çº¿è§‚çœ‹çš„å½±ç‰‡ï¼Œæœ€å¤§çš„ç“¶é¢ˆå°±åœ¨äºŽæ–‡ä»¶å°ºå¯¸çš„æ”¹å˜ï¼Œå¹¶ä¸”è¦èƒ½å¤Ÿé€‚åº”ç½‘ç»œçš„ç‰¹ç‚¹ï¼Œè¿™æ ·åŽŸå§‹çš„æ ¼å¼å°±ä¸èƒ½æ»¡è¶³éœ€ è¦ï¼Œå¿…é¡»è¦è½¬åŒ–æˆäº’è”ç½‘è§†é¢‘æ’­æ”¾è§„èŒƒçš„æµåª’ä½“æ ¼å¼æ‰å¯ä»¥ï¼Œæ¯”å¦‚è¯´æ˜¯RMæˆ–è€…ASFï¼Œè¿™å°±æ˜¯éœ€è¦ï¼Œæ‰€ä»¥é’ˆå¯¹å½±åƒæ ¼å¼è½¬åŒ–ä¸ºæµåª’ä½“æ ¼å¼çš„è½¯ä»¶ä¹Ÿå°±åº”ç”¨è€Œç”Ÿäº†ï¼Œè¿˜æœ‰çŽ°åœ¨éžå¸¸æµè¡Œçš„MPEG4è§†é¢‘åŽ‹ç¼©æŠ€æœ¯ï¼Œå®ƒèƒ½å¤ŸæŠŠä¸€å¼ DVDåŽ‹ç¼©åˆ°ä¸€å¼ CDä¸ŠåŽ»ï¼Œå¹¶ä¸”è§†é¢‘æ•ˆæžœä¹Ÿä¸ä¼šæœ‰å¤ªå¤§çš„å˜åŒ–ï¼Œè‡³å°‘åœ¨æˆ‘ä»¬æ™®é€šç”¨æˆ·çœ‹æ¥ä¹Ÿæ˜¯éžå¸¸ä¸é”™çš„ï¼Œè€Œæ–‡ä»¶ä½“ç§¯åˆ™å¤§å¤§å‡å°äº†ï¼Œè¿™å°±è¦æ±‚æœ‰èƒ½å¤ŸæŠŠDVDè½¬åŒ–æˆMPEG4æ–‡ä»¶çš„è½¯ä»¶å‡ºçŽ°ï¼Œä½†æ˜¯å¦‚æžœæœ‰äººæƒ³è¦æŠŠRMè½¬åŒ–æˆMPEG1ï¼ˆVCDï¼‰ï¼Œå°±æ²¡æœ‰å¤ªå¤§çš„å®žé™…æ„ä¹‰äº†ï¼Œå› ä¸ºè¿™æ ·å¹¶ä¸èƒ½ç»™è§†é¢‘æ•ˆæžœå¸¦æ¥å¤ªå¤§çš„æå‡ï¼Œåè€Œæ–‡ä»¶å°ºå¯¸å¤§äº†è®¸å¤šï¼Œæ‰€ä»¥æˆ‘ä»¬å¾ˆå°‘èƒ½å¤Ÿçœ‹åˆ°è¿™æ ·çš„è½¬åŒ–è½¯ä»¶ï¼Œå…¶ä»–çš„ä¹Ÿç±»ä¼¼ï¼Œæ‰€ä»¥ï¼Œåœ¨è§†é¢‘è½¬åŒ–é¢†åŸŸï¼Œå¯ä»¥å‚ç…§ä»¥ä¸‹ä¸¤ä¸ªåŽŸåˆ™ï¼š1 æœ‰æ˜Žç¡®çš„åº”ç”¨æ–¹å‘ï¼šå°±æ˜¯è¯´ä¸€ç§è§†é¢‘æ ¼å¼è½¬åŒ–æˆå¦ä¸€ç§è§†é¢‘æ ¼å¼ï¼Œå¿…é¡»è¦æœ‰æ˜Žç¡®çš„åº”ç”¨æ–¹å‘ï¼Œå³ç›®æ ‡æ ¼å¼èƒ½å¤Ÿæœ‰å¾ˆå¹¿æ³›çš„åº”ç”¨ä»·å€¼ï¼Œè€Œä¸æ˜¯è¯´ä¸ºäº†è½¬åŒ–è€Œè½¬åŒ–ï¼Œæ¯”å¦‚ä¸Šæ–‡æ‰€è¯´çš„VCD-&gt;RMï¼Œå®ƒçš„åº”ç”¨æ–¹å‘å°±æ˜¯ç½‘ç»œæ’­æ”¾ï¼Œå› ä¸ºçŽ°åœ¨åœ¨çº¿ç”µå½±æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å¸‚åœºå’Œç½‘ç»œçš„åº”ç”¨æ–¹å‘ã€‚2 èƒ½å¤Ÿæå‡æ’­æ”¾ä»·å€¼ï¼š å°±æ˜¯è¯´ä¸€ç§è§†é¢‘æ ¼å¼è½¬åŒ–æˆå¦ä¸€ç§è§†é¢‘æ ¼å¼é™¤äº†æœ‰æ˜Žç¡®çš„åº”ç”¨æ–¹å‘å¤–ï¼Œè¿˜è¦è€ƒè™‘è½¬åŒ–æ˜¯ä¸æ˜¯æœ‰ä»·å€¼ï¼Œå¦‚æžœè¯´è½¬åŒ–åŽçš„æ–‡ä»¶æ’­æ”¾æ•ˆæžœæ²¡æœ‰æ˜Žæ˜¾æå‡ï¼Œä½†æ˜¯æ–‡ä»¶å°ºå¯¸å´å¤§äº†ä¸€å€ï¼Œæˆ‘æƒ³è¿™æ ·äºæœ¬çš„ä¹°å–æ˜¯æ²¡æœ‰äººä¼šåŽ»åšçš„ï¼ŒRMè½¬åŒ–æˆVCDå°±æ²¡æœ‰å®žé™…çš„æ„ä¹‰ï¼ŒåŽŸå› å¦‚å‰æ–‡æ‰€è¿°ï¼Œè€ŒDVDè½¬åŒ–æˆMPEG4ä»·å€¼å°±å¾ˆå¤§ï¼Œä¸è¯´è½¬åŒ–åŽçš„æ’­æ”¾æ•ˆæžœï¼Œå•è¯´æˆæœ¬å°±é™ä½Žäº†ä¸å°‘ã€‚ éŸ³è§†é¢‘åŽ‹ç¼©ç¼–ç æ ‡å‡†ï¼šå¤šåª’ä½“ç¼–è¾‘ç æ–¹å¼å°±æ˜¯æŒ‡é€šè¿‡ç‰¹å®šçš„åŽ‹ç¼©æŠ€æœ¯ï¼Œå°†æŸä¸ªè§†é¢‘æ ¼å¼çš„æ–‡ä»¶è½¬æ¢æˆå¦ä¸€ç§è§†é¢‘æ ¼å¼æ–‡ä»¶çš„æ–¹å¼ï¼ŒçŽ°åœ¨ä¸»è¦çš„ç¼–ç æ–¹å¼æœ‰ï¼š MPEGç³»åˆ—ï¼š è§†é¢‘ç¼–ç æ–¹é¢ä¸»è¦æ˜¯Mpeg1ã€Mpeg2ã€Mpeg4ã€Mpeg4 AVCï¼›éŸ³é¢‘ç¼–ç æ–¹é¢ä¸»è¦æ˜¯MPEG Audio Layer 1/2ã€MPEG Audio Layer 3ã€MPEG-2 AACã€MPEG-4 AACç­‰ç­‰ã€‚ æ³¨æ„ï¼šDVDéŸ³é¢‘æ²¡æœ‰é‡‡ç”¨Mpegçš„ H.26Xç³»åˆ—ï¼šåŒ…æ‹¬H261ã€H262ã€H263ã€H263+ã€H263++ã€H264 å¾®è½¯windows mediaç³»åˆ—ï¼šè§†é¢‘ç¼–ç æœ‰Mpeg-4 v1/v2/v3ã€Windows Media Video 7/8/9/10ï¼›éŸ³é¢‘ç¼–ç æœ‰Windows Media audeo v1/v2/7/8/9 Real Mediaç³»åˆ—ï¼š è§†é¢‘ç¼–ç æœ‰RealVideo G2ã€RealVideo 8/9/10ï¼›éŸ³é¢‘ç¼–ç æœ‰RealAudio cook/siproã€RealAudio AAC/AACPlusç­‰ QuickTimeç³»åˆ—ï¼š è§†é¢‘ç¼–ç æœ‰Sorenson Video 3ã€Apple MPEG-4ã€Apple H.264ï¼›éŸ³é¢‘ç¼–ç æœ‰QDesign Music 2ã€Apple MPEG-4 AAC å…¶å®ƒï¼Œå¦‚ï¼šOggã€On2-vpxã€flash vidioï¼Œä»¥åŠM-JPEGè§†é¢‘åŽ‹ç¼©æ–¹å¼ å„è§†é¢‘ç¼–ç çš„åº”ç”¨åœºåˆç®€è¦ï¼šhttp://blog.csdn.net/luchy/archive/2007/03/27/1542478.aspxè¿™é‡Œè®²çš„æŒºè¯¦ç»†çš„ Mpeg1è¾ƒæ—©çš„è§†é¢‘ç¼–ç ï¼Œè´¨é‡æ¯”è¾ƒå·®ï¼Œä¸»è¦ç”¨äºŽ CD-ROM å­˜å‚¨è§†é¢‘ï¼Œå›½å†…æœ€ä¸ºå¤§å®¶ç†Ÿæ‚‰çš„å°±æ˜¯ VCDï¼ˆVideo CDï¼‰ï¼Œä»–çš„è§†é¢‘ç¼–ç å°±æ˜¯é‡‡ç”¨ MPEG-1ï¼› åœ¨ MPEG-1 çš„åŸºç¡€ä¸Šå¼€å‘çš„ä¸€ç§è§†é¢‘ç¼–ç ï¼Œå®ƒçš„è´¨é‡è¿œè¿œå¥½äºŽ MPEG-1ï¼Œæ‰€ä»¥è¢«è¿ç”¨åœ¨äº† DVD-Video ä¸Šé¢ï¼ŒMPEG-2 æ˜¯ DVD-Video å”¯ä¸€æŒ‡å®šçš„è§†é¢‘ç¼–ç ã€‚MPEG-2 ä¸å…‰è¿ç”¨äºŽ DVD-Video ï¼ŒçŽ°åœ¨å¤§éƒ¨åˆ† HDTVï¼ˆé«˜æ¸…ç”µè§†ï¼‰ä¹Ÿé‡‡ç”¨ MPEG-2 ç¼–ç ï¼Œåˆ†è¾¨çŽ‡è¾¾åˆ°äº† 1920x1080ã€‚ MPEG-3æ˜¯MPEGç»„ç»‡åˆ¶å®šçš„è§†é¢‘å’ŒéŸ³é¢‘åŽ‹ç¼©æ ‡å‡†ã€‚æœ¬æ¥çš„ç›®æ ‡æ˜¯ä¸ºHDTVæä¾›20-40Mbpsè§†é¢‘åŽ‹ç¼©æŠ€æœ¯ã€‚åœ¨æ ‡å‡†åˆ¶å®šçš„è¿‡ç¨‹ä¸­ï¼Œå§”å‘˜ä¼šå¾ˆå¿«å‘çŽ°MPEG-2å¯ä»¥å–å¾—ç±»ä¼¼çš„æ•ˆæžœã€‚éšåŽï¼ŒMPEG-3é¡¹ç›®åœæ­¢äº†ã€‚ MPEG-4æ˜¯ä¸ºäº†é€‚åº”ç½‘ç»œçš„éœ€æ±‚ï¼Œé‡‡ç”¨ä¸€ç³»åˆ—æ–°æŠ€æœ¯ï¼Œä»¥æœ€å°‘çš„æ•°æ®èŽ·å¾—æœ€ä½³çš„å›¾åƒè´¨é‡ä¸ºç›®æ ‡çš„æ–°ä¸€ä»£ç¼–ç æ–¹å¼ã€‚ä¸»è¦åº”ç”¨åœ¨æ•°å­—ç”µè§†ã€åŠ¨æ€å›¾åƒã€äº’è”ç½‘ã€å®žæ—¶å¤šåª’ä½“ç›‘æŽ§ã€ç§»åŠ¨å¤šåª’ä½“é€šä¿¡ã€Internetï¼intranetä¸Šçš„è§†é¢‘æµä¸Žå¯è§†æ¸¸æˆã€DVDä¸Šçš„äº¤äº’å¤šåª’ä½“åº”ç”¨ç­‰æ–¹é¢ã€‚Divxï¼Œxvidï¼Œms mpeg4éƒ½æ˜¯é‡‡ç”¨mpeg-4è§†é¢‘ç¼–ç çš„ã€‚å¯¹äºŽæ™®é€šç”¨æˆ·æ¥è¯´ï¼ŒMPEG-4åœ¨ç›®å‰æ¥è¯´æœ€æœ‰å¸å¼•åŠ›çš„åœ°æ–¹è¿˜åœ¨äºŽå®ƒèƒ½åœ¨æ™®é€šCD-ROMä¸ŠåŸºæœ¬å®žçŽ°DVDçš„è´¨é‡ï¼›ç”¨MPEG-4åŽ‹ç¼©ç®—æ³•çš„ASF(Advanced Streaming formatï¼Œé«˜çº§æ ¼å¼æµ)å¯ä»¥å°†120åˆ†é’Ÿçš„ç”µå½±åŽ‹ç¼©ä¸º300MBå·¦å³çš„è§†é¢‘æµï¼›é‡‡ç”¨MPEG-4åŽ‹ç¼©ç®—æ³•çš„DIVXè§†é¢‘ç¼–ç æŠ€æœ¯å¯ä»¥å°†120åˆ†é’Ÿçš„ç”µå½±åŽ‹ç¼©600MBå·¦å³ Mpeg4 AVCå’Œ MPEG-4 æ˜¯ä¸¤ç§ä¸åŒçš„ç¼–ç ï¼Œä¸»è¦æ˜¯åœ¨æžä½Žç çŽ‡ä¸‹ MPEG-4 è¡¨çŽ°å¹¶ä¸å¥½ï¼Œè€Œ AVC æ›´åŠ é€‚åˆä½Žå¸¦å®½ä¼ è¾“ã€‚åœ¨é«˜ç çŽ‡ä¸Šï¼ŒAVC çš„è¡¨çŽ°ä¹Ÿè¦å¥½è¿‡ MPEG-4ï¼Œæ‰€ä»¥çŽ°åœ¨å¤§æœ‰å–ä»£ MPEG-4 çš„è¶‹åŠ¿ã€‚ä¸‹ä¸€ä»£ HD DVD å’Œ Blue Ray Disc å·²ç»æ­£å¼æŽ¥çº³ AVC ä¸ºè§†é¢‘ç¼–ç æ–¹æ¡ˆä¹‹ä¸€ï¼Œç›¸ä¿¡ AVC çš„å‘å±•å‰é€”ä¼šéžå¸¸å¥½ã€‚AVC/H.264æžæœ‰å¯èƒ½æˆä¸ºä¸‹ä¸€ä»£è§†é¢‘æ ¼å¼ï¼Œï¼ˆavsï¼Œä¸­å›½æ ‡å‡†ï¼‰ H.261æ˜¯ITU-Tä¸ºåœ¨ç»¼åˆä¸šåŠ¡æ•°å­—ç½‘(ISDN)ä¸Šå¼€å±•åŒå‘å£°åƒä¸šåŠ¡(å¯è§†ç”µè¯ã€è§†é¢‘ä¼šè®®)è€Œåˆ¶å®šçš„ï¼Œå®ƒæ˜¯æœ€æ—©çš„è¿åŠ¨å›¾åƒåŽ‹ç¼©æ ‡å‡†ï¼Œå®ƒè¯¦ç»†åˆ¶å®šäº†è§†é¢‘ç¼–ç çš„å„ä¸ªéƒ¨åˆ†ï¼ŒåŒ…æ‹¬è¿åŠ¨è¡¥å¿çš„å¸§é—´é¢„æµ‹ã€DCTå˜æ¢ã€é‡åŒ–ã€ç†µç¼–ç ï¼Œä»¥åŠä¸Žå›ºå®šé€ŸçŽ‡çš„ä¿¡é“ç›¸é€‚é…çš„é€ŸçŽ‡æŽ§åˆ¶ç­‰éƒ¨åˆ†ã€‚ H.262æ˜¯ç”±ITU-Tçš„VCEGç»„ç»‡å’ŒISO/IECçš„MPEGç»„ç»‡è”åˆåˆ¶å®šçš„ï¼Œæ‰€ä»¥åˆ¶å®šå®ŒæˆåŽåˆ†åˆ«æˆä¸ºäº†ä¸¤ä¸ªç»„ç»‡çš„æ ‡å‡†ï¼Œæ­£å¼åç§°æ˜¯â€ITU-Tå»ºè®®H.262â€å’Œâ€ISO/IEC 13818-2â€ã€‚è¿™ä¸¤ä¸ªæ ‡å‡†åœ¨æ‰€æœ‰çš„æ–‡å­—å™è¿°ä¸Šéƒ½æ˜¯ç›¸åŒçš„ã€‚ H.263æ˜¯ITU-Tä¸ºä½ŽäºŽ64kb/sçš„çª„å¸¦é€šä¿¡ä¿¡é“åˆ¶å®šçš„è§†é¢‘ç¼–ç æ ‡å‡†ï¼Œå®ƒæ˜¯åœ¨H.261åŸºç¡€ä¸Šå‘å±•èµ·æ¥çš„ H263+æ˜¯H.263 çš„ç¬¬äºŒä¸ªç‰ˆæœ¬ï¼ŒåŠ å…¥äº†è®¸å¤šæ–°æŠ€æœ¯æ¥æ‰©å±• H.263 çš„åº”ç”¨èŒƒå›´ã€‚ 10.H.263++æ˜¯åœ¨ H.263+ ä¸Šå¢žåŠ äº†å‡ ä¸ªé€‰é¡¹ï¼Œæ¥å¢žå¼ºç æµåœ¨æ¶åŠ£ä¿¡é“ä¸Šçš„æŠ—è¯¯ç æ€§èƒ½ï¼ŒåŒæ—¶æé«˜å¢žå¼ºç¼–ç æ•ˆçŽ‡ã€‚ 11.H.264ä¹Ÿå°±æ˜¯å‰é¢æåˆ°çš„ MPEG-4 AVCã€‚H.264æ˜¯ç”±ISO/IECä¸ŽITU-Tç»„æˆçš„è”åˆè§†é¢‘ç»„(JVT)åˆ¶å®šçš„æ–°ä¸€ä»£è§†é¢‘åŽ‹ç¼©ç¼–ç æ ‡å‡†ã€‚åœ¨ISO/IECä¸­è¯¥æ ‡å‡†å‘½åä¸ºAVC (Advanced Video Coding)ï¼Œä½œä¸ºMPEG-4æ ‡å‡†çš„ç¬¬10ä¸ªé€‰é¡¹ï¼›åœ¨ITU-Tä¸­æ­£å¼å‘½åä¸ºH.264æ ‡å‡†ã€‚ 12.Microsoft MPEG-4 v1/v2/v3ï¼Œæœ€æ—©çš„ ASF é‡‡ç”¨çš„è§†é¢‘ç¼–ç ï¼ŒåŸºäºŽ MPEG-4 æŠ€æœ¯å¼€å‘ï¼ŒDivX3.11 å°±æ˜¯åŸºäºŽ Microsoft MPEG-4 v3 ç ´è§£å‡ºæ¥çš„ï¼ŒåŽæ¥æ‰è¿›è¡Œäº†é‡å†™ã€‚ 13.Windows Media Video 7ï¼ŒMicrosoft æ­£å¼å¼€å‘çš„ç¬¬ä¸€ä¸ª Windows Media Videoï¼Œå¼€å§‹è„±ç¦»äº† MPEG-4ï¼Œå’Œ MPEG-4 ä¸å…¼å®¹ï¼Œä»Žè¿™ä¸€ç‚¹ä¸Šå¯è§å¾®è½¯çš„é‡Žå¿ƒã€‚å¯æƒœè¿™ä¸ªç‰ˆæœ¬åŽ‹ç¼©æ•ˆæžœéžå¸¸çƒ‚ï¼Œæ‰“ç ´äº†å¾®è½¯ä¸€é£žå†²å¤©çš„ç¾Žæ¢¦ï¼Œä¸è¿‡å®ƒåœ¨åŽ‹ç¼©é€Ÿåº¦ä¸Šéžå¸¸å¿«ï¼ŒçŽ°åœ¨ç½‘ç»œä¸Šæœ‰å¾ˆå¤šé‡‡ç”¨è¿™ç§æ ¼å¼åŽ‹ç¼©çš„ WMVã€‚ 14.Windows Media Video 8ï¼Œåœ¨ WMV7 åŸºç¡€ä¸Šæ”¹è¿›çš„ç‰ˆæœ¬ï¼Œè´¨é‡ä¸Šé¢è¿›ä¸äº†ä¸å°‘ 15.Windows Media Video 9ï¼Œå¾®è½¯çš„é‡å¤´æˆï¼Œä¸å…‰æ˜¯è¿™ä¸€ä¸ªç¼–ç ï¼ŒV9 ç³»åˆ—æ›´æ˜¯ä¸€ä¸ªå¹³å°ï¼Œè®©å¾®è½¯æœ‰è¶³å¤Ÿçš„èƒ½åŠ›æŒ‘æˆ˜ MPEGï¼ŒITU ç­‰æ ‡å‡†åŒ–ç»„ç»‡ã€‚è™½ç„¶è¿™ä¸ªç‰ˆæœ¬å¹¶æ²¡æœ‰å¾®è½¯å¹å¾—é‚£ä¹ˆåŽ‰å®³ï¼Œç‰¹åˆ«æ˜¯ä½Žç çŽ‡ä¸‹æ¯”è¾ƒå·®ï¼Œä¸è¿‡è·Ÿä»¥å‰ç‰ˆæœ¬ç›¸æ¯”è¿›æ­¥è¿˜æ˜¯éžå¸¸å¤šçš„ã€‚ç‰¹åˆ«æ˜¯ WMV HD çš„åº”ç”¨ï¼Œè®©å¾®è½¯ä¹Ÿè·»èº«è§†é¢‘æ ‡å‡†é¢†åŸŸã€‚ 16.RealVideo G2ï¼Œæ—©æœŸçš„ RealVideo ç¼–ç ï¼Œè´¨é‡æ¯”è¾ƒç³Ÿç³•ï¼Œä¸è¿‡é‚£æ—¶åœ¨ç½‘ç»œä¸Šç®—æ˜¯å¾ˆå…ˆè¿›äº†ï¼Œæ¯•ç«Ÿå½“æ—¶èƒ½ç”¨ç½‘ç»œçœ‹è§†é¢‘çš„äººä¸å¤šã€‚ 17.RealVideo 8ï¼Œéšç€ RealPlayer 8 æŽ¨å‡ºçš„è§†é¢‘æ ¼å¼ï¼Œæ˜¯çŽ°åœ¨ä¸»æµçš„ç½‘ç»œè§†é¢‘ç¼–ç ä¹‹ä¸€ã€‚ç¼–ç é€Ÿåº¦è¾ƒæ…¢ï¼Œè´¨é‡ä¹Ÿåªèƒ½ç®—ä¸€èˆ¬ã€‚ 18.RealVideo 9ï¼ŒRealNetworks å¼€å‘çš„æ–°ä¸€ä»£ç¼–ç ï¼Œè´¨é‡è¿›æ­¥äº†å¾ˆå¤šï¼Œç‰¹åˆ«æ˜¯åœ¨åº•ç çŽ‡ä¸‹ï¼Œè€Œä¸”ç¼–ç é€Ÿåº¦å¾ˆå¿«ï¼Œåšåˆ°äº†é€Ÿä¸Žè´¨çš„å¾ˆå¥½ç»Ÿä¸€ã€‚ 19.RealVideo 10ï¼Œåœ¨ RealVideo 9 åŸºç¡€ä¸ŠåŠ å…¥äº†ä¸€äº›å‚æ•°ï¼Œå¦‚ EHQ ç­‰ï¼Œæ›´åŠ ç²¾ç¡®æŽ§åˆ¶ç çŽ‡ï¼Œå’Œ RealVideo 9 å…¼å®¹ã€‚ 20.Sorenson Video 3ï¼ŒSorenson Media å…¬å¸éš QuickTime 5 å‘å¸ƒçš„ç¼–ç å™¨ï¼Œè´¨é‡å¾ˆä¸é”™ï¼Œå·²ç»æˆä¸º QuickTime çš„æ ‡å‡†è§†é¢‘ç¼–ç ï¼Œç½‘ç»œä¸Šå¤§éƒ¨åˆ†ç”µå½±é¢„å‘Šç‰‡éƒ½é‡‡ç”¨è¿™ç§ç¼–ç ã€‚ 21.Apple MPEG-4ï¼ŒApple å…¬å¸è‡ªå·±å¼€å‘çš„ MPEG-4 ç¼–ç å™¨ï¼Œéš QuickTime 6 å‘å¸ƒï¼Œè´¨é‡å¾ˆå·®ã€‚ 22.Apple H.264ï¼ŒApple å…¬å¸è‡ªå·±å¼€å‘çš„ H.264 ç¼–ç å™¨ï¼Œéš QuickTime 7 å‘å¸ƒï¼Œæ”¯æŒ HDTVã€‚ 23.Ogg æ˜¯ Xiph.org åŸºé‡‘ä¼šå‘èµ·çš„ä¸€ä¸ªå¼€æ”¾æºä»£ç é¡¹ç›®ï¼ŒåŒ…æ‹¬è§†é¢‘éŸ³é¢‘ï¼ŒæœåŠ¡å™¨ï¼Œä¼ è¾“ç³»ç»Ÿï¼Œå®¢æˆ·ç«¯ï¼Œç¡¬ä»¶æ”¯æŒç­‰ï¼Œæœ€ä¸ºå¤§å®¶ç†Ÿæ‚‰çš„å°±æ˜¯éŸ³é¢‘ Ogg Vorbisï¼Œå®ƒè¢«è®¤ä¸ºæ˜¯è¿„ä»Šä¸ºæ­¢ 128kbps ç çŽ‡ä¸Šæœ€å¥½çš„ç¼–ç å™¨ã€‚ 24.On2 VPXç³»åˆ—ï¼ŒOn2 å…¬å¸å¼€å‘äº†ä¸€ç³»åˆ—ä¼˜ç§€çš„è§†é¢‘ç¼–ç ï¼ŒçŽ°åœ¨åº”ç”¨å¾—æœ€å¤šçš„ææ€•æ˜¯ Nullsoft Video çš„è§†é¢‘ï¼Œå®ƒä»¬å°±é‡‡ç”¨äº† VP3ï¼ŒVP5ï¼ŒVP6 è§†é¢‘ç¼–ç ã€‚ 25.Flash Videoï¼ŒMacromedia å…¬å¸æŽ¨å‡ºçš„å¤šåª’ä½“æ ¼å¼ï¼Œä¸»è¦ç”¨äºŽåœ¨ Flash ä¸­åŽ‹ç¼©è§†é¢‘ã€‚è§†é¢‘é‡‡ç”¨ Sorenson å…¬å¸çš„ Spark ç¼–ç å™¨ï¼ŒéŸ³é¢‘é‡‡ç”¨ MP3ï¼Œè´¨é‡æ¯”è¾ƒå·®ã€‚ä¼ é—»ä¸‹ä¸€ä»£ Flash Video å‡†å¤‡ä½¿ç”¨ On2 VP6 ï¼Œé‚£å°†è®©è§†é¢‘è´¨é‡å¾—åˆ°ä¸€ä¸ªé‡çš„æå‡ã€‚ 26.M-JPEGï¼ˆMotion-JoinPhotographicExpertsGroupï¼‰æŠ€æœ¯å³è¿åŠ¨é™æ­¢å›¾åƒï¼ˆæˆ–é€å¸§ï¼‰åŽ‹ç¼©æŠ€æœ¯ï¼Œå¹¿æ³›åº”ç”¨äºŽéžçº¿æ€§ç¼–è¾‘é¢†åŸŸå¯ç²¾ç¡®åˆ°å¸§ç¼–è¾‘å’Œå¤šå±‚å›¾åƒå¤„ç†ï¼ŒæŠŠè¿åŠ¨çš„è§†é¢‘åºåˆ—ä½œä¸ºè¿žç»­çš„é™æ­¢å›¾åƒæ¥å¤„ç†ï¼Œè¿™ç§åŽ‹ç¼©æ–¹å¼å•ç‹¬å®Œæ•´åœ°åŽ‹ç¼©æ¯ä¸€å¸§ï¼Œåœ¨ç¼–è¾‘è¿‡ç¨‹ä¸­å¯éšæœºå­˜å‚¨æ¯ä¸€å¸§ï¼Œå¯è¿›è¡Œç²¾ç¡®åˆ°å¸§çš„ç¼–è¾‘ï¼Œæ­¤å¤–M-JPEGçš„åŽ‹ç¼©å’Œè§£åŽ‹ç¼©æ˜¯å¯¹ç§°çš„ï¼Œå¯ç”±ç›¸åŒçš„ç¡¬ä»¶å’Œè½¯ä»¶å®žçŽ°ã€‚ å„éŸ³é¢‘ç¼–ç çš„åº”ç”¨åœºåˆç®€è¦ï¼š MPEG Audio Layer 1å…¸åž‹æ•°æ®åŽ‹ç¼©çŽ‡æ˜¯1ï¼š4ï¼Œå³æ¯ä¸ªç«‹ä½“å£°ä¿¡å·ä¸º384 kbps MPEG Audio Layer 2å…¸åž‹æ•°æ®åŽ‹ç¼©çŽ‡æ˜¯1ï¼š4â€”1ï¼š8ï¼Œå³æ¯ä¸ªç«‹ä½“å£°ä¿¡å·ä¸º256åˆ°192 kbpsã€‚MPEG Audio Layer1/2ä¸»è¦ç”¨äºŽvcdï¼Œsvcdçš„éŸ³é¢‘ç¼–ç  MPEG Audio Layer 3ï¼Œä¹Ÿå°±æ˜¯å¤§åé¼Žé¼Žçš„mp3ï¼Œå·²ç»æˆä¸ºç½‘ç»œéŸ³é¢‘çš„ä¸»æµæ ¼å¼ï¼Œèƒ½åœ¨128kbpsçš„ç çŽ‡ä¸‹æŽ¥è¿‘cdéŸ³è´¨ã€‚å…¸åž‹æ•°æ®åŽ‹ç¼©çŽ‡æ˜¯1ï¼š10â€”1ï¼š12ï¼Œå³æ¯ä¸ªç«‹ä½“å£°ä¿¡å·ä¸º128åˆ°112 kbps MPEG-2 AACï¼ˆAdvanced Audio Codingï¼‰æ˜¯åœ¨1997å¹´ç”±ä»¥Bosiã€Brandenburgã€Johnstonç­‰ä¸ºé¦–çš„éŸ³é¢‘ç¼–ç ç ”ç©¶æå‡ºçš„ï¼Œå®ƒæ€»ç»“äº†MPEG-1ã€MPEG-2å’ŒAC-3ç­‰çš„é•¿å¤„ï¼Œåœ¨MPEG ç³»ç»Ÿä¸Šè¿›ä¸€æ­¥æ”¹è¿›äº†å¾ˆå¤šæ–°çš„åŠŸèƒ½ï¼Œå¤§å¤§å¢žå¼ºäº†ç¼–ç çš„çµæ´»åº¦ï¼Œåœ¨ä¿è¯éŸ³è´¨çš„åŒæ—¶æ›´å¤§é™åº¦åœ°åŽ‹ç¼©äº†ç çŽ‡ã€‚å®ƒå’Œä¼ ç»Ÿçš„mpeg audioä¸å…¼å®¹ï¼Œåœ¨ç†è®ºä¸Šè´¨é‡è¦é«˜äºŽmp3ï¼Œå¹¶ä¸”æ”¯æŒå¤šå£°é“ï¼Œåœ¨96kbpsçš„ç çŽ‡èŒƒå›´å†…èƒ½æŽ¥è¿‘cdéŸ³è´¨ï¼Œæ¯”mp3æ›´åŠ é€‚åˆä½Žç çŽ‡ä¼ è¾“ï¼›åŒæ—¶ï¼ŒMPEG-2 AACå·²ç»æˆä¸ºMPEG-4æ ‡å‡†ä¸­é«˜è´¨é‡éŸ³é¢‘ç¼–ç çš„æ ¸å¿ƒï¼Œæ˜¯ä¸‹ä¸€ä»£éŸ³é¢‘åŽ‹ç¼©æ ‡å‡†ã€‚ MPEG-4 AACï¼šæ˜¯MPEG-4æ ‡å‡†éŸ³é¢‘ç¼–ç æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œappleå…¬å¸è‡ªå·±å¼€å‘æœ‰è¿™ç§ AAC ç¼–ç å™¨ï¼Œè´¨é‡éžå¸¸å¥½ï¼Œæ˜¯æœ€ä¼˜ç§€çš„ AAC ç¼–ç å™¨ä¹‹ä¸€ï¼Œéš QuickTime 6 å‘å¸ƒ æœæ¯”æ•°å­—AC-3æŠ€æœ¯ä¹Ÿå°±æ˜¯5.1å£°é“æŠ€æœ¯ Windows Media Audio v1/v2ï¼Œå¾®è½¯æœ€æ—©çš„éŸ³é¢‘ç¼–ç æŠ€æœ¯ï¼Œç”¨äºŽ ASF ä¸­ï¼ŒåŽæ¥è¢«ç ´è§£ä¹Ÿç”¨åœ¨ DivX Audio ä¸­ï¼Œè´¨é‡æ¯”è¾ƒå·®ã€‚ Windows Media Audio 7/8/9ï¼Œéšç€å„ç§ä¸åŒçš„ WMV è€ŒæŽ¨å‡ºçš„ç›¸åº”çš„éŸ³é¢‘ç¼–ç ï¼Œè´¨é‡èŠ‚èŠ‚æå‡ï¼Œä¸è¿‡è¿˜æ²¡æœ‰è¾¾åˆ° 64kbps CDéŸ³è´¨çš„ç¥žåŒ– Windows Media Audio 9 Professionalï¼ŒWMA9 ä¸­å‡ºçŽ°çš„æ–°ç¼–ç ï¼Œä¸»è¦ç”¨äºŽå¤šå£°é“ç¼–ç å’Œé«˜é‡‡æ ·çŽ‡éŸ³é¢‘çš„ç¼–ç ï¼Œè´¨é‡ä¸é”™ã€‚ RealAudio Cookï¼Œæ—©æœŸçš„éŸ³é¢‘ç¼–ç ï¼Œä½†æ˜¯åœ¨çŽ°åœ¨çœ‹æ¥ï¼Œä»ç„¶è´¨é‡ä¸é”™ï¼Œå¯æƒœæœ€é«˜ç çŽ‡ 96kbpsã€‚åº”ç”¨åˆ°äº†ä¸¤ä»£éŸ³é¢‘ç¼–ç ä¸­ï¼šRealAudio G2ã€RealAudio 8ã€‚ RealAudio Siproï¼Œé‡‡ç”¨äº† Sipro è¯­éŸ³ç¼–ç æŠ€æœ¯ï¼Œä¸»è¦é’ˆå¯¹è¯­éŸ³ç¼–ç ï¼Œåº”ç”¨åœ¨æ›´æ—©æœŸçš„ RealAudio 4.0ã€RealAudio 5.0 ä¸­ã€‚ RealAudio AACï¼ŒAAC éŸ³é¢‘ç¼–ç ï¼Œç”¨äºŽ RealAudio 10 ä¸­ã€‚ RealAudio aacPlusï¼ŒaacPlus éŸ³é¢‘ç¼–ç ï¼Œç”¨äºŽ RealAudio 10 ä¸­ï¼Œä¸è¿‡å¹¶æ²¡æœ‰éš RealProducer å‘è¡Œï¼Œéœ€è¦å•ç‹¬è´­ä¹°ã€‚ QDesign Music 2ï¼ŒQDesign Music çš„ç¬¬äºŒä¸ªç‰ˆæœ¬ï¼Œä¹Ÿæ˜¯æœ€åŽä¸€ä¸ªç‰ˆæœ¬ï¼Œåœ¨æ—¶ä¸‹è¿™äº›å…ˆè¿›çš„éŸ³é¢‘ç¼–ç é¢å‰ï¼Œå®ƒå·²ç»æ²¡æœ‰ç”Ÿå‘½åŠ›äº†ï¼Œä¸»è¦åº”ç”¨äºŽç½‘ä¸Šçš„ç”µå½±é¢„å‘Šç‰‡ã€‚ Apple MPEG-4 AACï¼ŒApple å…¬å¸è‡ªå·±å¼€å‘çš„ AAC ç¼–ç å™¨ï¼Œè´¨é‡éžå¸¸å¥½ï¼Œæ˜¯æœ€ä¼˜ç§€çš„ AAC ç¼–ç å™¨ä¹‹ä¸€ï¼Œéš QuickTime 6 å‘å¸ƒã€‚ å››ç§ä¸»æµçš„è§†é¢‘åŽ‹ç¼©ç¼–ç æ ‡å‡†ï¼š1ã€Windows Media Video 9 ç›¸æ¯”èµ·å…¶ä»–ä¸‰ç§å›¾åƒåŽ‹ç¼©æŠ€æœ¯ï¼ŒWMVå¯èƒ½æ˜¯ä½¿ç”¨çŽ‡æœ€é«˜çš„è§†é¢‘ç¼–ç æ ¼å¼ã€‚åŽŸå› ååˆ†ç®€å•ï¼Œå¦‚æžœæƒ³ä½¿è‡ªå·±çš„å½±ç‰‡ç›´æŽ¥ç»™ç½‘ä¸Šå…¶ä»–ç”¨æˆ·è§‚çœ‹åˆ°çš„è¯ï¼Œåˆ©ç”¨å¾®è½¯è‡ªèº«çš„è§†é¢‘ç¼–ç æ ‡å‡†æ˜¯æœ€ç®€å•çš„åšæ³•ã€‚å› ä¸ºåªè¦ç”¨æˆ·çš„ç”µè„‘ä¸­æœ‰Windows Media Player(åª’ä½“æ’­æ”¾å™¨)ï¼Œå°±èƒ½å¤Ÿæ’­æ”¾WMVå½±ç‰‡ï¼Œè€Œä¸”ä¸ç”¨é¢å¤–å®‰è£…Codecï¼ˆç¼–ç ï¼‰ï¼Œæ‰€ä»¥å…¼å®¹æ€§æ–¹é¢å®Œå…¨ä¸ç”¨æ‹…å¿ƒã€‚å€ŸåŠ©Windows Media 9.0 Seriesçš„æ–°æŠ€æœ¯ï¼ŒWindows Media Video 9.0æ¯”æ—§çš„8.0ç‰ˆæœ‰å¤šè¾¾15-50%çš„åŽ‹ç¼©çŽ‡æé«˜ã€‚è€Œä¸”ä¸ŽMPEG-4ç”»è´¨ç›¸æ¯”æ—¶ï¼Œå…¶å®¹é‡å¤§å°åªéœ€ä¸€åŠå³å¯è¾¾åˆ°ã€‚åŠ ä¸Šé…åˆWindows Media Service 9.0æœåŠ¡å™¨ï¼Œåœ¨Streaming mediaï¼ˆæµåª’ä½“ï¼‰æ–¹é¢ä¹Ÿæœ‰æ›´ä½³çš„è¡¨çŽ°ã€‚ å®˜æ–¹ç½‘ç«™ï¼šhttp://www.microsoft.com 2ã€Real Video 9 çŽ©ç”µè„‘æ—¶é—´é•¿çš„æœ‹å‹éƒ½çŸ¥é“ï¼ŒReal Videoæ˜¯å¤šå¹´å‰å¸‚åœºä¸Šæœ€æ™®åŠçš„éŸ³ä¹ã€å›¾åƒæ ¼å¼ã€‚ä¸è¿‡éšç€MP3ã€WMVåŠWMVç­‰çš„å…´èµ·ï¼Œå·²ç»ä½¿Real Mediaæ ¼å¼çš„æ™®åŠçŽ‡å¤§ä¸å¦‚å‰ã€‚ä½†çŽ°åœ¨å…¨ä¸–ç•Œä»ç„¶æœ‰è®¸å¤šçš„ç”µè„‘çŽ©å®¶æ˜¯Real Videoçš„æ”¯æŒè€…ï¼Œç½‘ä¸Šä¾›ä¸‹è½½çš„å½±ç‰‡å¾ˆå¤šä¹Ÿæ˜¯RMæˆ–RMVBæ ¼å¼ã€‚ RealNetworkæ–°æŽ¨å‡ºäº†ä¸€å¥—åä¸ºHelix Producerçš„å·¥å…·ï¼ˆä¹Ÿå°±æ˜¯Real Producer 9ï¼‰ï¼Œå…¶ä¸­çš„RealVideo 9åœ¨å›¾åƒåŽ‹ç¼©ç¼–ç æŠ€æœ¯æ–¹é¢ä½œå‡ºé‡å¤§ä¼˜åŒ–ï¼Œæ— è®ºåœ¨ä¸‹è½½æˆ–Streamingæ—¶éƒ½å£°ç§°æ¯”Windows Media 9å‡ºè‰²ï¼Œèƒ½å¤Ÿä»¥ä¸€åŠçš„æ¯”ç‰¹é€ŸçŽ‡ï¼ˆbitrateï¼‰è¾¾åˆ°MPEG-4çº§å›¾åƒï¼Œåœ¨çº¦500 Kbpsæ—¶è¾¾åˆ°æŽ¥è¿‘DVDçš„ç”»è´¨è¡¨çŽ°ã€‚åŒæ ·åœ°ï¼Œé…åˆæœåŠ¡å™¨å¯èŽ·å¾—æ›´å‡ºè‰²çš„æ•ˆæžœã€‚ å®˜æ–¹ç½‘å€ï¼šhttp://www.realnetworks.com 3ã€DivX åŽ†å²ä»‹ç»ï¼š ISOå…¬å¸ƒäº†â€œè¶…ä½Žæ¯”ç‰¹çŽ‡æ´»åŠ¨å›¾åƒå’Œè¯­éŸ³åŽ‹ç¼©æ ‡å‡† â€ï¼ŒæŽ’åºMPEGï¼4,1998å¹´10æœˆæ‰¹å‡†ç¬¬ä¸€ç‰ˆï¼Œ1994å¹´4æœˆåˆå…¬å¸ƒäº†ç¬¬äºŒç‰ˆåŠå…¶æ ¡éªŒæ¨¡åž‹ï¼ˆVMï¼‰ï¼ŒMPEGï¼4æ­£å¼ç¼–å·æ˜¯ISO/IECå›½é™…æ ‡å‡†14496ï¼Œå®ƒæ˜¯ä¸€ç§æ–°åž‹çš„å¤šåª’ä½“æ ‡å‡†ï¼Œå®ƒä¸Žå‰æ ‡å‡†ä¸€ä¸ªé‡è¦åŒºåˆ«å°±åœ¨äºŽï¼Œæ˜¯ä¸€ä¸ªåŸºäºŽå¯¹è±¡çš„è§†ç¼–ç åŽ‹ç¼©æ ‡å‡†ï¼Œæ‰€å®šä¹‰çš„ç çŽ‡æŽ§åˆ¶çš„ç›®æ ‡å°±æ˜¯èŽ·å¾—åœ¨ç»™å®šç çŽ‡ä¸‹çš„æœ€ä¼˜è´¨é‡ï¼Œå®ƒä¸ºäº’è”ç½‘ä¸Šä¼ è¾“é«˜è´¨é‡çš„å¤šåª’ä½“è§†é¢‘æä¾›äº†å¾ˆå¥½çš„æŠ€æœ¯å¹³å°ã€‚ 1998å¹´å¾®è½¯å¼€å‘äº†ç¬¬ä¸€ä¸ªåœ¨PCä¸Šä½¿ç”¨çš„MPEGï¼4ç¼–ç å™¨ï¼Œå®ƒåŒ…æ‹¬MS MPEG4V1ã€MS MPEG4V2ã€MS MPEG4V3çš„ç³»åˆ—ç¼–ç å†…ç ï¼Œå…¶ä¸­V1å’ŒV2ç”¨æ¥åˆ¶ä½œAVIæ–‡ä»¶ï¼Œä¸€ç›´åˆ°çŽ°åœ¨å®ƒéƒ½æ˜¯ä½œä¸ºWindowsçš„é»˜è®¤ç»„ä»¶ï¼Œä¸è¿‡V1å’ŒV2çš„ç¼–ç è´¨é‡ä¸æ˜¯å¾ˆå¥½ï¼Œä¸€ç›´åˆ°MS MPEG4V3æ‰å¼€å§‹æœ‰å¥½è½¬ï¼Œç”»è´¨æœ‰äº†æ˜¾è‘—çš„è¿›æ­¥ï¼Œä½†æ˜¯ä¸çŸ¥å¾®è½¯å‡ºäºŽä»€ä¹ˆç›®çš„ï¼Œå´å°†è¿™ä¸ªMS MPEGV3çš„è§†é¢‘ç¼–ç å†…æ ¸å°é—­ï¼Œä»…ä»…ä½¿å…¶åº”ç”¨äºŽWindows Mediaæµåª’ä½“æŠ€æœ¯ä¸Šï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„ASFæµåª’ä½“æ–‡ä»¶ä¸­ã€‚ASFæ–‡ä»¶è™½ç„¶æœ‰ä¸€äº›ä¼˜åŠ¿ï¼Œä½†æ˜¯ç”±äºŽè¿‡åˆ†çš„å°é—­ä¸èƒ½è¢«ç¼–è¾‘ï¼Œæœ«å¾—åˆ°å¹¿æ³›åº”ç”¨ï¼Œè¿™ä¾¿æƒ¹æ€’äº†é‚£äº›ä¸ªä¸æ€•å¤©ä¸æ€•åœ°çš„è§†é¢‘é»‘å®¢å’Œè‡´åŠ›äºŽé’»ç ”è§†é¢‘ç¼–ç çš„é«˜æ‰‹ï¼ŒåŽæ¥ï¼Œè¿™äº›å°ç»„ä¸ä»…ç ´è§£äº†å¾®è½¯çš„è§†é¢‘ç¼–ç ï¼Œè€Œä¸”ç»è¿‡ä»–ä»¬çš„ä¿®æ”¹ï¼Œä¸€ç§æ–°çš„è§†é¢‘ç¼–ç è¯žç”Ÿäº†ï¼šé‚£å°±æ˜¯å¹¿ä¸ºæµä¼ çš„MPEGç¼–ç å™¨ï¼DivX3.11ã€‚ DivXé‡‡ç”¨äº†MSçš„MPEGV3ï¼Œæ”¹è‰¯åŽå¹¶åŠ å…¥è‡ªå·±åŠŸèƒ½ç§°ä¹‹ä¸ºDivX3.11ï¼Œä¹Ÿæ˜¯ç›®å‰äº’è”ç½‘ä¸Šæ™®é€šé‡‡ç”¨çš„MPEGï¼4ç¼–ç å™¨ä¹‹ä¸€ã€‚å¾ˆå¿«ï¼ŒDivXè¢«ä¼ å¾—çº¢å¾—å‘ç´«ï¼Œå‡ ä¹Žæˆäº†ä¸šç•Œçš„æ ‡å‡†ï¼Œä½†æ˜¯ï¼ŒåŒæ ·å¾ˆå¿«åœ°å‡ºçŽ°äº†ï¼ŒDivXçš„åŸºç¡€æŠ€æœ¯æ˜¯éžæ³•ç›—ç”¨å¾®è½¯çš„ï¼Œå¾®è½¯å£°ç§°å°†å¯¹æ‰€æœ‰æŽ¨åŠ¨DivXå‘å±•çš„äººã€ä¼ä¸šè¿›è¡Œè¿½ç©¶ï¼Œå¯æ˜¯DivXæŠ€æœ¯çš„åˆ›é€ è€…ä¹‹ä¸€ç½—è¾¾ï¼ˆRotaï¼‰æ­£å…¨é¢ç”³è¯·å°†DivXåˆæ³•åŒ–ï¼Œè¿™æ˜¯åŸºäºŽDivXè™½ç„¶æ˜¯ä»ŽWindowçš„å‘æ˜Žå‡ºæ¥çš„ï¼Œä½†å´æ²¡æœ‰ç”¨è¿‡ä»»ä½•å¾®è½¯çš„æŠ€æœ¯ï¼Œæ›´ç»„å»ºæ–°å…¬å¸DivXNetworkså…¨åŠ›æŽ¨å¹¿DivXï¼Œçœ‹æ¥DivXï¼ˆä¿—ç§°åŽ‹ç¼©ç”µå½±ï¼‰è“¬å‹ƒå‘å±•çš„å¤§æ½®æ˜¯åŠ¿ä¸å¯æŒ¡äº†ã€‚ çœ‹æ¥ä»»ä½•å¸å¼•çœ¼çƒçš„æ•…äº‹åœ¨å…³é”®æ—¶åˆ»éƒ½ä¼šå‘ç”Ÿè½¬æŠ˜ï¼ŒDivXçš„å‘å±•ç«Ÿä¹Ÿä¸èƒ½è„±ç¦»è¿™ä¸€ä¿—å¥—ï¼Œå°±åœ¨DivXé¡ºåˆ©å‘å±•æ—¶æœŸï¼ŒDivXçš„æŠ€æœ¯é€æ¸æˆç†Ÿï¼Œå•†æœºæ— é™çš„æ—¶å€™ï¼Œä¸€å°å¥½æˆä¸Šæ¼”äº†ï¼ŒDivXNetworksæˆç«‹åˆè¡·å°±æ˜¯æ‘†è„±å¾®è½¯çš„æŠ€æœ¯å°é—­ï¼Œå› è€Œå‘èµ·ä¸€ä¸ªå®Œå…¨å¼€æ”¾æºç çš„é¡¹ç›®ï¼Œåä¸º â€œ Projet Mayo â€ï¼Œç›®æ ‡æ˜¯å¼€å‘ä¸€å¥—å…¨æ–°çš„ã€å¼€æ”¾æºç çš„MPEG4ç¼–ç è½¯ä»¶ï¼Œç”±äºŽå®ƒå®Œå…¨ç¬¦åˆISO MPEGæ ‡å‡†ï¼Œåˆæ˜¯å®Œå…¨å¼€æ”¾æºä»£ç ï¼ŒOpenDivXCODECå¸å¼•äº†å¾ˆå¤šè½¯ä»¶ï¼Œè§†é¢‘é«˜æ‰‹å‚ä¸Žï¼Œå¾ˆå¿«ä¾¿å¼€å‘å‡ºå…·æœ‰æ›´é«˜æ€§èƒ½çš„ç¼–ç å™¨Encore2ç­‰ç­‰ï¼Œå°±åœ¨DivXæœ€è¾‰ç…Œçš„æ—¶æœŸï¼ŒDXNå…¬å¸çªç„¶å°é—­äº†DivXçš„æºä»£ç ï¼Œå¹¶åœ¨Encore2çš„åŸºç¡€ä¸Šå‘å¸ƒäº†è‡ªæœ‰äº§å“DivX4ï¼ŒåŽŸæ¥DXNæ—©å°±ç»™è‡ªå·±ç•™äº†åŽé—¨ï¼ŒDivXé‡‡å–çš„æ˜¯LGPLåè®®ï¼Œè€Œä¸æ˜¯GPLåè®®ï¼Œè™½è¯´å®ƒä»¬éƒ½æ˜¯å…¬å…±è®¸å¯è¯åè®®ï¼Œä¿éšœè‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹è½¯ä»¶æˆ–æºç çš„æƒåˆ©ï¼Œä½†LGPLå…è®¸ç§æœ‰ï¼ŒDXNå°±æ˜¯åˆ©ç”¨è¿™ä¸€åè®®åˆå…¶ä¸å¤‡çš„è€å‡ºäº†å¤§åˆ€ã€‚ æŽ¥ç€ï¼Œå¾ˆå¤šè¢«DXNå…¬å¸ç‹ ç‹ æ¶®äº†ä¸€å›žçš„è½¯ä»¶ã€è§†é¢‘å›¢ä½“å¦èµ·é—¨æˆ·ï¼Œé€æ¸é‡æ–°èšæ‹¢å¼€å‘åŠ›é‡ï¼Œé«˜ä¸¾å¤ä»‡å¤§æ——ï¼Œåœ¨OpenDivXç‰ˆæœ¬åŸºç¡€ä¸Šï¼Œå†æ¬¡å¼€å‘å‡ºä¸€ç§æ–°çš„MPEGï¼4ç¼–ç â€“XviDï¼Œåå­—çš„é¡ºåºå’ŒDviXåˆšå¥½ç›¸åï¼Œä»…ä»…ä»Žåå­—å°±å¯ä»¥çœ‹å‡ºXvidå……æ»¡äº†å¤ä»‡çš„åŠ›é‡ã€‚ DivXæ˜¯è¿‘ä¸€ä¸¤å¹´æ¥ç§°éœ¸ç½‘ç»œè§†é¢‘çš„å›¾åƒåŽ‹ç¼©ç¼–ç æ ‡å‡†ã€‚èµ·åˆå®ƒæ˜¯ä»¥å¾®è½¯MPEG 4è§†é¢‘ç¼–ç æ ‡å‡†ä¸ºåŸºç¡€ä¿®æ”¹å’Œå¼€å‘çš„ï¼Œå¹¶ä»¥å…è´¹æ–¹å¼å‘å¸ƒã€‚å…¶ç‰¹ç‚¹æ˜¯å…·æœ‰ååˆ†ä¸é”™çš„åŽ‹ç¼©æ¯”çŽ‡ï¼Œå¯ä»¥å°†ä¸€æ•´å¥—DVDè´¨é‡çš„å½±ç‰‡åŽ‹ç¼©å­˜æ”¾åˆ°ä¸€å¼ CD-Rå…‰ç›˜ä¸­ã€‚çŽ°åœ¨çš„DivXåˆ†ä¸ºæ™®é€šç‰ˆå’ŒProç‰ˆï¼Œå…¶ä¸­åŽè€…è¿˜æœ‰æ”¶è´¹ç‰ˆå’ŒAdwareï¼ˆå¹¿å‘Šï¼‰ç‰ˆä¸¤ç§ï¼Œè‡ªå¸¦DivX Playerç¨‹åºè¿›è¡Œæ’­æ”¾ã€‚ç”¨æˆ·å¦‚æžœå®‰è£…äº†å…è´¹çš„DivX CodecåŽï¼Œä¹Ÿå¯ç”¨Windows Media playerè§‚çœ‹DivXå½±ç‰‡ã€‚ å®˜æ–¹ç½‘ç«™ï¼šhttp://www.divx.com 4ã€Koepiâ€™s XviD Codec ç›¸æ¯”èµ·å‰ä¸‰ç§è§†é¢‘ç¼–ç æ ‡å‡†æ¥è¯´ï¼ŒXvidæŽ¨å‡ºå¸‚åœºçš„æ—¶é—´æœ€è¿Ÿã€‚ä»Žå…¶åå­—å°±çŸ¥é“è¿™ç§æ ‡å‡†æ˜¯é’ˆå¯¹DivXè€Œæ¥çš„ã€‚åŽŸæ¥ï¼ŒDivXç”±å…è´¹è½¬ä¸ºæ”¶è´¹ç¼–ç åŽï¼Œä½¿éƒ¨ä»½åŽŸæœ‰å¼€å‘äººå‘˜ä¸æ»¡ï¼Œç»§è€Œç¦»å¼€å¹¶ç»„æˆä¸€ä¸ªæ–°çš„å¼€å‘å°ç»„ï¼Œè®¾è®¡å…è´¹ä¸”å¼€æ”¾æºä»£ç çš„XviD Codecã€‚å½“å‰ï¼ŒKoepiå’ŒNicçš„XviDéƒ½æ˜¯æ¯”è¾ƒæ´»è·ƒå’Œæœ€å¤šäººä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œè™½ç„¶ä¸¤è€…åœ¨ç¼–è¯‘ä¸Šæœ‰æ‰€ä¸åŒï¼Œä½†å®žé™…åšå‡ºçš„æ•ˆæžœç›¸å·®æ— å‡ ã€‚Xivdä¸ŽDivXä¸€æ ·ï¼Œåœ¨ç¼–è¯‘åŽéƒ½æ˜¯ä¸€ä¸ª.AVIæ–‡ä»¶ï¼Œæ’­æ”¾æ—¶åªè¦å®‰è£…Xvid codecå°±èƒ½ç”¨Windowsåª’ä½“æ’­æ”¾å™¨ä¸­æ’­æ”¾ã€‚ å®˜æ–¹ç½‘ç«™ï¼šhttp://roeder.goe.net/~koepi è§†é¢‘åŽ‹ç¼©åŸºæœ¬æ¦‚å¿µï¼šä¸€ã€æœ‰æŸå’Œæ— æŸåŽ‹ç¼©ï¼šåœ¨è§†é¢‘åŽ‹ç¼©ä¸­æœ‰æŸï¼ˆLossyï¼‰å’Œæ— æŸï¼ˆLosslessï¼‰çš„æ¦‚å¿µä¸Žé™æ€å›¾åƒä¸­åŸºæœ¬ç±»ä¼¼ã€‚æ— æŸåŽ‹ç¼©ä¹Ÿå³åŽ‹ç¼©å‰å’Œè§£åŽ‹ç¼©åŽçš„æ•°æ®å®Œå…¨ä¸€è‡´ã€‚å¤šæ•°çš„æ— æŸåŽ‹ç¼©éƒ½é‡‡ç”¨RLEè¡Œç¨‹ç¼–ç ç®—æ³•ã€‚æœ‰æŸåŽ‹ç¼©æ„å‘³ç€è§£åŽ‹ç¼©åŽçš„æ•°æ®ä¸ŽåŽ‹ç¼©å‰çš„æ•°æ®ä¸ä¸€è‡´ã€‚åœ¨åŽ‹ç¼©çš„è¿‡ç¨‹ä¸­è¦ä¸¢å¤±ä¸€äº›äººçœ¼å’Œäººè€³æ‰€ä¸æ•æ„Ÿçš„å›¾åƒæˆ–éŸ³é¢‘ä¿¡æ¯ï¼Œè€Œä¸”ä¸¢å¤±çš„ä¿¡æ¯ä¸å¯æ¢å¤ã€‚å‡ ä¹Žæ‰€æœ‰é«˜åŽ‹ç¼©çš„ç®—æ³•éƒ½é‡‡ç”¨æœ‰æŸåŽ‹ç¼©ï¼Œè¿™æ ·æ‰èƒ½è¾¾åˆ°ä½Žæ•°æ®çŽ‡çš„ç›®æ ‡ã€‚ä¸¢å¤±çš„æ•°æ®çŽ‡ä¸ŽåŽ‹ç¼©æ¯”æœ‰å…³ï¼ŒåŽ‹ç¼©æ¯”è¶Šå°ï¼Œä¸¢å¤±çš„æ•°æ®è¶Šå¤šï¼Œè§£åŽ‹ç¼©åŽçš„æ•ˆæžœä¸€èˆ¬è¶Šå·®ã€‚æ­¤å¤–ï¼ŒæŸäº›æœ‰æŸåŽ‹ç¼©ç®—æ³•é‡‡ç”¨å¤šæ¬¡é‡å¤åŽ‹ç¼©çš„æ–¹å¼ï¼Œè¿™æ ·è¿˜ä¼šå¼•èµ·é¢å¤–çš„æ•°æ®ä¸¢å¤±ã€‚ äºŒã€å¸§å†…å’Œå¸§é—´åŽ‹ç¼©ï¼šå¸§å†…ï¼ˆIntraframeï¼‰åŽ‹ç¼©ä¹Ÿç§°ä¸ºç©ºé—´åŽ‹ç¼©ï¼ˆSpatial compressionï¼‰ã€‚å½“åŽ‹ç¼©ä¸€å¸§å›¾åƒæ—¶ï¼Œä»…è€ƒè™‘æœ¬å¸§çš„æ•°æ®è€Œä¸è€ƒè™‘ç›¸é‚»å¸§ä¹‹é—´çš„å†—ä½™ä¿¡æ¯ï¼Œè¿™å®žé™…ä¸Šä¸Žé™æ€å›¾åƒåŽ‹ç¼©ç±»ä¼¼ã€‚å¸§å†…ä¸€èˆ¬é‡‡ç”¨æœ‰æŸåŽ‹ç¼©ç®—æ³•ï¼Œç”±äºŽå¸§å†…åŽ‹ç¼©æ—¶å„ä¸ªå¸§ä¹‹é—´æ²¡æœ‰ç›¸äº’å…³ç³»ï¼Œæ‰€ä»¥åŽ‹ç¼©åŽçš„è§†é¢‘æ•°æ®ä»å¯ä»¥ä»¥å¸§ä¸ºå•ä½è¿›è¡Œç¼–è¾‘ã€‚å¸§å†…åŽ‹ç¼©ä¸€èˆ¬è¾¾ä¸åˆ°å¾ˆé«˜çš„åŽ‹ç¼©ã€‚ é‡‡ç”¨å¸§é—´ï¼ˆInterframeï¼‰åŽ‹ç¼©æ˜¯åŸºäºŽè®¸å¤šè§†é¢‘æˆ–åŠ¨ç”»çš„è¿žç»­å‰åŽä¸¤å¸§å…·æœ‰å¾ˆå¤§çš„ç›¸å…³æ€§ï¼Œæˆ–è€…è¯´å‰åŽä¸¤å¸§ä¿¡æ¯å˜åŒ–å¾ˆå°çš„ç‰¹ç‚¹ã€‚ä¹Ÿå³è¿žç»­çš„è§†é¢‘å…¶ç›¸é‚»å¸§ä¹‹é—´å…·æœ‰å†—ä½™ä¿¡æ¯ï¼Œæ ¹æ®è¿™ä¸€ç‰¹æ€§ï¼ŒåŽ‹ç¼©ç›¸é‚»å¸§ä¹‹é—´çš„å†—ä½™é‡å°±å¯ä»¥è¿›ä¸€æ­¥æé«˜åŽ‹ç¼©é‡ï¼Œå‡å°åŽ‹ç¼©æ¯”ã€‚å¸§é—´åŽ‹ç¼©ä¹Ÿç§°ä¸ºæ—¶é—´åŽ‹ç¼©ï¼ˆTemporal compressionï¼‰ï¼Œå®ƒé€šè¿‡æ¯”è¾ƒæ—¶é—´è½´ä¸Šä¸åŒå¸§ä¹‹é—´çš„æ•°æ®è¿›è¡ŒåŽ‹ç¼©ã€‚å¸§é—´åŽ‹ç¼©ä¸€èˆ¬æ˜¯æ— æŸçš„ã€‚å¸§å·®å€¼ï¼ˆFrame differencingï¼‰ç®—æ³•æ˜¯ä¸€ç§å…¸åž‹çš„æ—¶é—´åŽ‹ç¼©æ³•ï¼Œå®ƒé€šè¿‡æ¯”è¾ƒæœ¬å¸§ä¸Žç›¸é‚»å¸§ä¹‹é—´çš„å·®å¼‚ï¼Œä»…è®°å½•æœ¬å¸§ä¸Žå…¶ç›¸é‚»å¸§çš„å·®å€¼ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘æ•°æ®é‡ã€‚ ä¸‰ã€å¯¹ç§°å’Œä¸å¯¹ç§°ç¼–ç ï¼šå¯¹ç§°æ€§ï¼ˆsymmetricï¼‰æ˜¯åŽ‹ç¼©ç¼–ç çš„ä¸€ä¸ªå…³é”®ç‰¹å¾ã€‚å¯¹ç§°æ„å‘³ç€åŽ‹ç¼©å’Œè§£åŽ‹ç¼©å ç”¨ç›¸åŒçš„è®¡ç®—å¤„ç†èƒ½åŠ›å’Œæ—¶é—´ï¼Œå¯¹ç§°ç®—æ³•é€‚åˆäºŽå®žæ—¶åŽ‹ç¼©å’Œä¼ é€è§†é¢‘ï¼Œå¦‚è§†é¢‘ä¼šè®®åº”ç”¨å°±ä»¥é‡‡ç”¨å¯¹ç§°çš„åŽ‹ç¼©ç¼–ç ç®—æ³•ä¸ºå¥½ã€‚è€Œåœ¨ç”µå­å‡ºç‰ˆå’Œå…¶å®ƒå¤šåª’ä½“åº”ç”¨ä¸­ï¼Œä¸€èˆ¬æ˜¯æŠŠè§†é¢‘é¢„å…ˆåŽ‹ç¼©å¤„ç†å¥½ï¼Œå°”åŽå†æ’­æ”¾ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨ä¸å¯¹ç§°ï¼ˆasymmetricï¼‰ç¼–ç ã€‚ä¸å¯¹ç§°æˆ–éžå¯¹ç§°æ„å‘³ç€åŽ‹ç¼©æ—¶éœ€è¦èŠ±è´¹å¤§é‡çš„å¤„ç†èƒ½åŠ›å’Œæ—¶é—´ï¼Œè€Œè§£åŽ‹ç¼©æ—¶åˆ™èƒ½è¾ƒå¥½åœ°å®žæ—¶å›žæ”¾ï¼Œä¹Ÿå³ä»¥ä¸åŒçš„é€Ÿåº¦è¿›è¡ŒåŽ‹ç¼©å’Œè§£åŽ‹ç¼©ã€‚ä¸€èˆ¬åœ°è¯´ï¼ŒåŽ‹ç¼©ä¸€æ®µè§†é¢‘çš„æ—¶é—´æ¯”å›žæ”¾ï¼ˆè§£åŽ‹ç¼©ï¼‰è¯¥è§†é¢‘çš„æ—¶é—´è¦å¤šå¾—å¤šã€‚ä¾‹å¦‚ï¼ŒåŽ‹ç¼©ä¸€æ®µä¸‰åˆ†é’Ÿçš„è§†é¢‘ç‰‡æ–­å¯èƒ½éœ€è¦10å¤šåˆ†é’Ÿçš„æ—¶é—´ï¼Œè€Œè¯¥ç‰‡æ–­å®žæ—¶å›žæ”¾æ—¶é—´åªæœ‰ä¸‰åˆ†é’Ÿã€‚ ç¬¬ä¸‰éƒ¨åˆ†ï¼šéŸ³é¢‘æ–‡ä»¶æ ¼å¼ ä¸€äº›éŸ³è§†é¢‘çš„å‚æ•°å«ä¹‰:å£°é“ï¼šç›®å‰äººä»¬æ‰€ä½¿ç”¨çš„å„ç§å£°åœºæŠ€æœ¯è§„èŒƒéžå¸¸å¤šï¼Œä½†æœ€å¸¸è§çš„å‡ ä¹Žéƒ½æ¥è‡ªä¸‰å®¶å…¬å¸ï¼Œä»–ä»¬æ˜¯Dolbyï¼ˆæœæ¯”ï¼‰ã€HTXå’ŒDTSã€‚å£°å¡æ‰€æ”¯æŒçš„å£°é“æ•°æ˜¯è¡¡é‡å£°å¡æ¡£æ¬¡çš„é‡è¦æŒ‡æ ‡ä¹‹ä¸€ï¼Œä»Žå•å£°é“åˆ°æœ€æ–°çš„çŽ¯ç»•ç«‹ä½“å£°ï¼Œä¸‹é¢ä¸€ä¸€è¯¦ç»†ä»‹ç»ï¼š1.å•å£°é“ï¼šå•å£°é“æ˜¯æ¯”è¾ƒåŽŸå§‹çš„å£°éŸ³å¤åˆ¶å½¢å¼ï¼Œæ—©æœŸçš„å£°å¡é‡‡ç”¨çš„æ¯”è¾ƒæ™®éã€‚å½“é€šè¿‡ä¸¤ä¸ªæ‰¬å£°å™¨å›žæ”¾å•å£°é“ä¿¡æ¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ˜Žæ˜¾æ„Ÿè§‰åˆ°å£°éŸ³æ˜¯ä»Žä¸¤ä¸ªéŸ³ç®±ä¸­é—´ä¼ é€’åˆ°æˆ‘ä»¬è€³æœµé‡Œçš„ã€‚è¿™ç§ç¼ºä¹ä½ç½®æ„Ÿçš„å½•åˆ¶æ–¹å¼ç”¨çŽ°åœ¨çš„çœ¼å…‰çœ‹è‡ªç„¶æ˜¯å¾ˆè½åŽçš„ï¼Œä½†åœ¨å£°å¡åˆšåˆšèµ·æ­¥æ—¶ï¼Œå·²ç»æ˜¯éžå¸¸å…ˆè¿›çš„æŠ€æœ¯äº†ã€‚2.ç«‹ä½“å£°ï¼šå•å£°é“ç¼ºä¹å¯¹å£°éŸ³çš„ä½ç½®å®šä½ï¼Œè€Œç«‹ä½“å£°æŠ€æœ¯åˆ™å½»åº•æ”¹å˜äº†è¿™ä¸€çŠ¶å†µã€‚å£°éŸ³åœ¨å½•åˆ¶è¿‡ç¨‹ä¸­è¢«åˆ†é…åˆ°ä¸¤ä¸ªç‹¬ç«‹çš„å£°é“ï¼Œä»Žè€Œè¾¾åˆ°äº†å¾ˆå¥½çš„å£°éŸ³å®šä½æ•ˆæžœã€‚è¿™ç§æŠ€æœ¯åœ¨éŸ³ä¹æ¬£èµä¸­æ˜¾å¾—å°¤ä¸ºæœ‰ç”¨ï¼Œå¬ä¼—å¯ä»¥æ¸…æ™°åœ°åˆ†è¾¨å‡ºå„ç§ä¹å™¨æ¥è‡ªçš„æ–¹å‘ï¼Œä»Žè€Œä½¿éŸ³ä¹æ›´å¯Œæƒ³è±¡åŠ›ï¼Œæ›´åŠ æŽ¥è¿‘äºŽä¸´åœºæ„Ÿå—ã€‚ç«‹ä½“å£°æŠ€æœ¯å¹¿æ³›è¿ç”¨äºŽè‡ªSound Blaster Proä»¥åŽçš„å¤§é‡å£°å¡ï¼Œæˆä¸ºäº†å½±å“æ·±è¿œçš„ä¸€ä¸ªéŸ³é¢‘æ ‡å‡†ã€‚æ—¶è‡³ä»Šæ—¥ï¼Œç«‹ä½“å£°ä¾ç„¶æ˜¯è®¸å¤šäº§å“éµå¾ªçš„æŠ€æœ¯æ ‡å‡†ã€‚3.å‡†ç«‹ä½“å£°ï¼šå‡†ç«‹ä½“å£°å£°å¡çš„åŸºæœ¬æ¦‚å¿µå°±æ˜¯ï¼šåœ¨å½•åˆ¶å£°éŸ³çš„æ—¶å€™é‡‡ç”¨å•å£°é“ï¼Œè€Œæ”¾éŸ³æœ‰æ—¶æ˜¯ç«‹ä½“å£°ï¼Œæœ‰æ—¶æ˜¯å•å£°é“ã€‚é‡‡ç”¨è¿™ç§æŠ€æœ¯çš„å£°å¡ä¹Ÿæ›¾åœ¨å¸‚é¢ä¸Šæµè¡Œè¿‡ä¸€æ®µæ—¶é—´ï¼Œä½†çŽ°åœ¨å·²ç»é”€å£°åŒ¿è¿¹äº†ã€‚4.å››å£°é“çŽ¯ç»•ï¼šäººä»¬çš„æ¬²æœ›æ˜¯æ— æ­¢å¢ƒçš„ï¼Œç«‹ä½“å£°è™½ç„¶æ»¡è¶³äº†äººä»¬å¯¹å·¦å³å£°é“ä½ç½®æ„Ÿä½“éªŒçš„è¦æ±‚ï¼Œä½†æ˜¯éšç€æŠ€æœ¯çš„è¿›ä¸€æ­¥å‘å±•ï¼Œå¤§å®¶é€æ¸å‘çŽ°åŒå£°é“å·²ç»è¶Šæ¥è¶Šä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚ç”±äºŽPCIå£°å¡çš„å‡ºçŽ°å¸¦æ¥äº†è®¸å¤šæ–°çš„æŠ€æœ¯ï¼Œå…¶ä¸­å‘å±•æœ€ä¸ºç¥žé€Ÿçš„å½“æ•°ä¸‰ç»´éŸ³æ•ˆã€‚ä¸‰ç»´éŸ³æ•ˆçš„ä¸»æ—¨æ˜¯ä¸ºäººä»¬å¸¦æ¥ä¸€ä¸ªè™šæ‹Ÿçš„å£°éŸ³çŽ¯å¢ƒï¼Œé€šè¿‡ç‰¹æ®Šçš„HRTFæŠ€æœ¯è¥é€ ä¸€ä¸ªè¶‹äºŽçœŸå®žçš„å£°åœºï¼Œä»Žè€ŒèŽ·å¾—æ›´å¥½çš„æ¸¸æˆå¬è§‰æ•ˆæžœå’Œå£°åœºå®šä½ã€‚è€Œè¦è¾¾åˆ°å¥½çš„æ•ˆæžœï¼Œä»…ä»…ä¾é ä¸¤ä¸ªéŸ³ç®±æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œæ‰€ä»¥ç«‹ä½“å£°æŠ€æœ¯åœ¨ä¸‰ç»´éŸ³æ•ˆé¢å‰å°±æ˜¾å¾—æ‰è¥Ÿè§è‚˜äº†ï¼Œä½†å››å£°é“çŽ¯ç»•éŸ³é¢‘æŠ€æœ¯åˆ™å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸€é—®é¢˜ã€‚å››å£°é“çŽ¯ç»•è§„å®šäº†4ä¸ªå‘éŸ³ç‚¹ï¼šå‰å·¦ã€å‰å³ï¼ŒåŽå·¦ã€åŽå³ï¼Œå¬ä¼—åˆ™è¢«åŒ…å›´åœ¨è¿™ä¸­é—´ã€‚åŒæ—¶è¿˜å»ºè®®å¢žåŠ ä¸€ä¸ªä½ŽéŸ³éŸ³ç®±ï¼Œä»¥åŠ å¼ºå¯¹ä½Žé¢‘ä¿¡å·çš„å›žæ”¾å¤„ç†(è¿™ä¹Ÿå°±æ˜¯å¦‚ä»Š4.1å£°é“éŸ³ç®±ç³»ç»Ÿå¹¿æ³›æµè¡Œçš„åŽŸå› )ã€‚å°±æ•´ä½“æ•ˆæžœè€Œè¨€ï¼Œå››å£°é“ç³»ç»Ÿå¯ä»¥ä¸ºå¬ä¼—å¸¦æ¥æ¥è‡ªå¤šä¸ªä¸åŒæ–¹å‘çš„å£°éŸ³çŽ¯ç»•ï¼Œå¯ä»¥èŽ·å¾—èº«ä¸´å„ç§ä¸åŒçŽ¯å¢ƒçš„å¬è§‰æ„Ÿå—ï¼Œç»™ç”¨æˆ·ä»¥å…¨æ–°çš„ä½“éªŒã€‚å¦‚ä»Šå››å£°é“æŠ€æœ¯å·²ç»å¹¿æ³›èžå…¥äºŽå„ç±»ä¸­é«˜æ¡£å£°å¡çš„è®¾è®¡ä¸­ï¼Œæˆä¸ºæœªæ¥å‘å±•çš„ä¸»æµè¶‹åŠ¿ã€‚5.5.1å£°é“5.1å£°é“å·²å¹¿æ³›è¿ç”¨äºŽå„ç±»ä¼ ç»Ÿå½±é™¢å’Œå®¶åº­å½±é™¢ä¸­ï¼Œä¸€äº›æ¯”è¾ƒçŸ¥åçš„å£°éŸ³å½•åˆ¶åŽ‹ç¼©æ ¼å¼ï¼Œè­¬å¦‚æœæ¯”AC-3ï¼ˆDolby Digitalï¼‰ã€DTSç­‰éƒ½æ˜¯ä»¥5.1å£°éŸ³ç³»ç»Ÿä¸ºæŠ€æœ¯è“æœ¬çš„ã€‚å…¶å®ž5.1å£°éŸ³ç³»ç»Ÿæ¥æºäºŽ4.1çŽ¯ç»•ï¼Œä¸åŒä¹‹å¤„åœ¨äºŽå®ƒå¢žåŠ äº†ä¸€ä¸ªä¸­ç½®å•å…ƒã€‚è¿™ä¸ªä¸­ç½®å•å…ƒè´Ÿè´£ä¼ é€ä½ŽäºŽ80Hzçš„å£°éŸ³ä¿¡å·ï¼Œåœ¨æ¬£èµå½±ç‰‡æ—¶æœ‰åˆ©äºŽåŠ å¼ºäººå£°ï¼ŒæŠŠå¯¹è¯é›†ä¸­åœ¨æ•´ä¸ªå£°åœºçš„ä¸­éƒ¨ï¼Œä»¥å¢žåŠ æ•´ä½“æ•ˆæžœã€‚ç›¸ä¿¡æ¯ä¸€ä¸ªçœŸæ­£ä½“éªŒè¿‡Dolby AC-3éŸ³æ•ˆçš„æœ‹å‹éƒ½ä¼šä¸º5.1å£°é“æ‰€æŠ˜æœã€‚åƒä¸‡ä¸è¦ä»¥ä¸º5.1å·²ç»æ˜¯çŽ¯ç»•ç«‹ä½“å£°çš„é¡¶å³°äº†ï¼Œæ›´å¼ºå¤§çš„7.1ç³»ç»Ÿå·²ç»å‡ºçŽ°äº†ã€‚å®ƒåœ¨5.1çš„åŸºç¡€ä¸Šåˆå¢žåŠ äº†ä¸­å·¦å’Œä¸­å³ä¸¤ä¸ªå‘éŸ³ç‚¹ï¼Œä»¥æ±‚è¾¾åˆ°æ›´åŠ å®Œç¾Žçš„å¢ƒç•Œã€‚ç”±äºŽæˆæœ¬æ¯”è¾ƒé«˜ï¼Œæ²¡æœ‰å¹¿æ³›æ™®åŠã€‚ ä¸€.WMA WMAçš„å…¨ç§°æ˜¯Windows Media Audioï¼Œæ˜¯å¾®è½¯åŠ›æŽ¨çš„ä¸€ç§éŸ³é¢‘æ ¼å¼ã€‚WMAæ ¼å¼æ˜¯ä»¥å‡å°‘æ•°æ®æµé‡ä½†ä¿æŒéŸ³è´¨çš„æ–¹æ³•æ¥è¾¾åˆ°æ›´é«˜çš„åŽ‹ç¼©çŽ‡ç›®çš„ï¼Œå…¶åŽ‹ç¼©çŽ‡ä¸€èˆ¬å¯ä»¥è¾¾åˆ°1:18ï¼Œç”Ÿæˆçš„æ–‡ä»¶å¤§å°åªæœ‰ç›¸åº”MP3æ–‡ä»¶çš„ä¸€åŠã€‚æ­¤å¤–ï¼ŒWMAè¿˜å¯ä»¥é€šè¿‡DRMï¼ˆDigital Rights Managementï¼‰æ–¹æ¡ˆåŠ å…¥é˜²æ­¢æ‹·è´ï¼Œæˆ–è€…åŠ å…¥é™åˆ¶æ’­æ”¾æ—¶é—´å’Œæ’­æ”¾æ¬¡æ•°ï¼Œç”šè‡³æ˜¯æ’­æ”¾æœºå™¨çš„é™åˆ¶ï¼Œå¯æœ‰åŠ›åœ°é˜²æ­¢ç›—ç‰ˆã€‚ ä¼˜ç‚¹WMA 7ä¹‹åŽçš„WMAæ”¯æŒè¯ä¹¦åŠ å¯†ï¼Œæœªç»è®¸å¯ï¼ˆå³æœªèŽ·å¾—è®¸å¯è¯ä¹¦ï¼‰ï¼Œå³ä½¿æ˜¯éžæ³•æ‹·è´åˆ°æœ¬åœ°ï¼Œä¹Ÿæ˜¯æ— æ³•æ”¶å¬çš„ã€‚åŒæ—¶ï¼Œå¾®è½¯å…¬å¸å¼€å§‹æ—¶å®£ç§°çš„ï¼šåŒæ–‡ä»¶æ¯”MP3ä½“ç§¯å°ä¸€å€è€ŒéŸ³è´¨ä¸å˜ï¼Œä¹Ÿå¾—åˆ°äº†å…‘çŽ°ã€‚äº‹å®žä¸Šï¼Œè¿™ä¸ªè¯´æ³•ï¼Œä»…ä»…é€‚ç”¨äºŽä½Žæ¯”ç‰¹çŽ‡çš„æƒ…å†µï¼Œå¦å¤–ï¼Œå¾®è½¯å…¬å¸åœ¨WMA 9å¤§å¹…æ”¹è¿›äº†å…¶å¼•æ“Žï¼Œå®žé™…ä¸Šå‡ ä¹Žå¯ä»¥åœ¨åŒæ–‡ä»¶åŒéŸ³è´¨ä¸‹æ¯”ç›¸åŒçš„MP3ä½“ç§¯å°‘1/3å·¦å³ã€‚ç¼ºç‚¹åœ¨é«˜æ¯”çŽ‡çš„æ¸²æŸ“èƒ½åŠ›ä½Žä¸‹ï¼ŒåŒéŸ³æºçš„ä¸€ä¸ª320KBPSçš„MP3ä¸Žæ¯”è¾ƒ192KBPSçš„WMAç›¸æ¯”ï¼ŒéŸ³è´¨å’Œæ¸²æŸ“åŠ›å¾ˆå®¹æ˜“åˆ†åˆ«å‡ºæ˜¯å‰è€…è¾ƒä¼˜ã€‚ äºŒ.VQF VQFå³TwinVQï¼ˆTransformï¼domain Weighted Interleave Vector Quantizationï¼‰ï¼Œæ˜¯ç”±NTTï¼ˆNippon Telegraph and Telephoneï¼‰ä¸ŽYamahaå…±åŒå¼€å‘çš„ä¸€ç§éŸ³é¢‘åŽ‹ç¼©æŠ€æœ¯ã€‚VQFçš„éŸ³é¢‘åŽ‹ç¼©çŽ‡æ¯”æ ‡å‡†çš„MPEGéŸ³é¢‘åŽ‹ç¼©çŽ‡é«˜å‡ºè¿‘ä¸€å€ï¼Œå¯ä»¥è¾¾åˆ°18:1å·¦å³ç”šè‡³æ›´é«˜ã€‚ä¹Ÿå°±æ˜¯è¯´æŠŠä¸€é¦–4åˆ†é’Ÿçš„æ­Œæ›²ï¼ˆWAVæ–‡ä»¶ï¼‰åŽ‹æˆMP3ï¼Œå¤§çº¦éœ€è¦4MBå·¦å³çš„ç¡¬ç›˜ç©ºé—´ï¼Œè€ŒåŒä¸€é¦–æ­Œæ›²ï¼Œå¦‚æžœä½¿ç”¨VQFéŸ³é¢‘åŽ‹ç¼©æŠ€æœ¯çš„è¯ï¼Œé‚£åªéœ€è¦2MBå·¦å³çš„ç¡¬ç›˜ç©ºé—´ã€‚å› æ­¤ï¼Œåœ¨éŸ³é¢‘åŽ‹ç¼©çŽ‡æ–¹é¢ï¼ŒMP3å’ŒRAéƒ½ä¸æ˜¯VQFçš„å¯¹æ‰‹ã€‚ ä½†æ˜¯VQFä¸æ”¯æŒâ€æµâ€ï¼Œè¿™å¯èƒ½ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆçŽ°åœ¨å®ƒå®Œå…¨è¢«WMAåŽ‹ä¸‹åŽ»çš„ä¸€ä¸ªä¸»è¦åŽŸå› . ä¸‰.MP3MP3çš„å…¨ç§°æ˜¯Moving Picture Experts Group Audio Layer IIIã€‚ç®€å•çš„è¯´ï¼ŒMP3å°±æ˜¯ä¸€ç§éŸ³é¢‘åŽ‹ç¼©æŠ€æœ¯ï¼Œç”±äºŽè¿™ç§åŽ‹ç¼©æ–¹å¼çš„å…¨ç§°å«MPEG Audio Layer3ï¼Œæ‰€ä»¥äººä»¬æŠŠå®ƒç®€ç§°ä¸ºMP3ã€‚MP3æ˜¯åˆ©ç”¨MPEG Audio Layer 3çš„æŠ€æœ¯ï¼Œå°†éŸ³ä¹ä»¥1:10ç”šè‡³1:12 çš„åŽ‹ç¼©çŽ‡ï¼ŒåŽ‹ç¼©æˆå®¹é‡è¾ƒå°çš„fileï¼Œæ¢å¥è¯è¯´ï¼Œèƒ½å¤Ÿåœ¨éŸ³è´¨ä¸¢å¤±å¾ˆå°çš„æƒ…å†µä¸‹æŠŠæ–‡ä»¶åŽ‹ç¼©åˆ°æ›´å°çš„ç¨‹åº¦ã€‚è€Œä¸”è¿˜éžå¸¸å¥½çš„ä¿æŒäº†åŽŸæ¥çš„éŸ³è´¨ã€‚æ­£æ˜¯å› ä¸ºMP3ä½“ç§¯å°ï¼ŒéŸ³è´¨é«˜çš„ç‰¹ç‚¹ä½¿å¾—MP3æ ¼å¼å‡ ä¹Žæˆä¸ºç½‘ä¸ŠéŸ³ä¹çš„ä»£åè¯ã€‚æ¯åˆ†é’ŸéŸ³ä¹çš„MP3æ ¼å¼åªæœ‰1MBå·¦å³å¤§å°ï¼Œè¿™æ ·æ¯é¦–æ­Œçš„å¤§å°åªæœ‰3-4å…†å­—èŠ‚ã€‚ä½¿ç”¨MP3æ’­æ”¾å™¨å¯¹MP3æ–‡ä»¶è¿›è¡Œå®žæ—¶çš„è§£åŽ‹ç¼©(è§£ç )ï¼Œè¿™æ ·ï¼Œé«˜å“è´¨çš„MP3éŸ³ä¹å°±æ’­æ”¾å‡ºæ¥äº†ã€‚ MP3æœ€å—äº‰è®®çš„å°±æ˜¯éŸ³è´¨é—®é¢˜(å°¤å…¶æ˜¯éšç€WMAçš„æ™®åŠ)ï¼Œå…¶é«˜é¢‘æŸå¤±å¾ˆå¤§ï¼Œå¾ˆå¤šMP3ç¼–ç å™¨ç²—ç³™çš„ç¼–ç ç®—æ³•ä¸ä½†å¯¼è‡´é«˜é¢‘ä¸¢å¤±ï¼Œè¿˜ä¸¢å¤±äº†è®¸å¤šç»†èŠ‚ï¼Œç±»ä¼¼å‰ä»–æ“¦å¼¦çš„æ„Ÿè§‰åœ¨MP3ä¸­æ˜¯æ‰¾ä¸åˆ°çš„.åœ¨å¯¹MP3å¿«è¦å¤±æœ›æ—¶ï¼Œå¶å‘çŽ°äº†Lame,å®ƒæ”¯æŒæ ¹æ®äººè€³é®è”½æ•ˆåº”åŽŸç†æ¥åˆ†æžæ³¢å½¢ï¼Œé…åˆVBRæŠ€æœ¯ï¼Œå¯ä»¥è®©éŸ³è´¨è¾¾åˆ°ä»¤äººåƒæƒŠçš„åœ°æ­¥;å…¶ç‹¬åˆ›çš„å¿ƒç†éŸ³å“æ¨¡åž‹æŠ€æœ¯ä¿è¯äº†CDéŸ³é¢‘è¿˜åŽŸçš„çœŸå®žæ€§ï¼Œé…åˆVBR(åŠ¨æ€æ¯”ç‰¹çŽ‡)å’ŒABR(å¹³å‡æ¯”ç‰¹çŽ‡)å‚æ•°ï¼Œç¼–ç å‡ºæ¥çš„MP3éŸ³è‰²çº¯åŽšã€ç©ºé—´å®½å¹¿ã€ä½ŽéŸ³æ¸…æ™°ã€ç»†èŠ‚è¡¨çŽ°è‰¯å¥½,éŸ³è´¨å‡ ä¹Žå¯ä»¥åª²ç¾ŽCDéŸ³é¢‘ï¼Œä½†æ–‡ä»¶ä½“ç§¯å´éžå¸¸å°.å¾ˆå¤šç½‘å‹åœ¨ä½¿ç”¨LAMEåŽçš„åæ˜ å°±æ˜¯ï¼šç«‹åˆ»åˆ é™¤ç¡¬ç›˜ä¸Šæ‰€æœ‰çš„MP3å’Œå…¶ä»–ç¼–ç å™¨ï¼Œå…¨éƒ¨ç”¨Lameé‡æ–°æ¥è¿‡ã€‚Lameæä¾›EXEå’ŒDLLï¼Œå…¶ä¸­DLLæ˜¯ä½œä¸ºæ ‡å‡†çš„åŠ¨æ€è¿è¡Œåº“ä¾›å…¶ä»–ç¨‹åºè°ƒç”¨.EXEæ˜¯Command Lineç¨‹åºï¼Œè±¡DOSç¨‹åºä¸€æ ·å·¥ä½œï¼Œä¸¤è€…å½¼æ­¤ç‹¬ç«‹ï¼Œäº’ä¸å…³è”ã€‚ä½†å¤§å®¶å¾ˆå¿«èƒ½å‘çŽ°ä¸¤è€…ç¼–ç çš„è´¨é‡æ˜¯ä¸ä¸€æ ·çš„,é‚£æ˜¯ç”±äºŽdllå¯æŽ§æ€§å·®ï¼Œä¸Žå…·å¤‡ä¸°å¯Œè°ƒèŠ‚å‚æ•°çš„EXEç‰ˆç›¸æ¯”ï¼Œå…¶åŽ‹ç¼©å‡ºæ¥çš„MP3æ•ˆæžœç¨é€Šä¸€ç­¹ã€‚ä½†EXEæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œæ“ä½œå¾ˆéº»çƒ¦ï¼Œå¹¸äºæœ‰äº†WinLAMEræˆ–lameGUIxpè¿™äº›Shellã€‚åªè¦å­¦ä¼šä½¿ç”¨è¿™äº›Shell(æ˜¯å‚»ç“œåž‹çš„,ä¸€çœ‹å³ä¼š)ï¼Œå°±å¯ä»¥ç”¨LAMEåŽ‹ç¼©å‡ºæœ€æœ€ç²¾å½©çš„MP3äº†ã€‚å†è¯´è¯´APS,åœ¨LAMEå‡ºçŽ°ä»¥å‰ï¼ŒAPSå°±æ˜¯æœ€å¥½çš„MP3ç¼–ç å™¨ï¼Œå®ƒä½¿ç”¨çš„Fraunhofer IISç¼–ç ç®—æ³•ï¼Œè¿™æ¯”LAMEä½¿ç”¨çš„ç¼–ç ç®—æ³•è¦å…ˆè¿›ï¼Œåœ¨192k Bitrate(CBR)ä¸‹ï¼Œç”šè‡³æ¯”LAMEç¼–ç çš„æ›²å­è¦ä¼˜ç§€ï¼Œç»†èŠ‚æ˜Žæ˜¾è¦ä¸°å¯Œä¸€äº›ï¼Œä½†APSæœ¬èº«ä¸æ”¯æŒVBRï¼Œå½“Bitrateå¾€ä¸Šæé«˜æ—¶ï¼ŒéŸ³è´¨å°±è¦æ¯”LAMEç¼–ç çš„è¦å·®äº†ï¼Œå¤§éƒ¨åˆ†æœ‹å‹çš„MP3çš„ä¸€èˆ¬éƒ½æ˜¯128-192K Bitrateçš„ï¼Œå› æ­¤APSä»æ—§æœ‰æŽ¨èçš„ä»·å€¼ã€‚ç‰¹åˆ«æ˜¯æœ‰å¾ˆå¤šMP3éšèº«å¬ä¸æ”¯æŒVBRå’Œ256K Bitrateä»¥ä¸Šçš„MP3ï¼ŒLAMEå°±ä¸ä¸€å®šåˆé€‚è¿™äº›æœ‹å‹äº†ï¼ŒAPSå°±æˆäº†ä¸é”™çš„é€‰æ‹©ï¼Œç”±å®ƒç¼–ç çš„æ›²å­ï¼Œç»å¯¹ä¸ä¼šè¾±æ²¡ä½ æ˜‚è´µçš„PLAYER. å››.MP3PRO MP3PROå®Œå…¨æ˜¯åŸºäºŽä¼ ç»ŸMP3ç¼–ç æŠ€æœ¯çš„ä¸€ç§æ”¹è‰¯ï¼Œæœ¬èº«æœ€å¤§çš„æŠ€æœ¯äº®ç‚¹å°±åœ¨äºŽSBR(Spectral Band Replicationé¢‘æ®µå¤åˆ¶),è¿™æ˜¯ä¸€ç§æ–°çš„éŸ³é¢‘ç¼–ç å¢žå¼ºç®—æ³•.å®ƒæä¾›äº†æ”¹å–„ä½Žä½çŽ‡æƒ…å†µä¸‹éŸ³é¢‘å’Œè¯­éŸ³ç¼–ç çš„æ€§èƒ½çš„å¯èƒ½.è¿™ç§æ–¹æ³•å¯åœ¨æŒ‡å®šçš„ä½çŽ‡ä¸‹å¢žåŠ éŸ³é¢‘çš„å¸¦å®½æˆ–æ”¹å–„ç¼–ç æ•ˆçŽ‡,SBRæœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯åœ¨ä½Žæ•°æ®é€ŸçŽ‡ä¸‹å®žçŽ°éžå¸¸é«˜æ•ˆçš„ç¼–ç .å¦‚æžœåœ¨é«˜æ•°æ®é€ŸçŽ‡çš„æƒ…å†µä¸‹ï¼ŒSBRå°†å¦‚åŒè™šè®¾.å½“åˆ¶ä½œMP3PROæ–‡ä»¶æ—¶ï¼Œç¼–ç å™¨å°†éŸ³é¢‘åˆ†ä¸ºä¸¤éƒ¨åˆ†ã€‚ä¸€éƒ¨åˆ†æ˜¯å°†éŸ³é¢‘æ•°æ®ä¸­çš„ä½Žé¢‘æ®µéƒ¨åˆ†åˆ†ç¦»å‡ºæ¥ï¼Œé€šè¿‡ä¼ ç»Ÿçš„MP3æŠ€æœ¯è€Œç¼–ç å¾—å‡ºçš„æ­£å¸¸çš„MP3éŸ³é¢‘æµï¼Œæ­¤ä¸¾å¯ä»¤åˆ°MP3ç¼–ç å™¨å¯ä»¥ä¸“æ³¨äºŽä½Žé¢‘æ®µä¿¡å·ä»Žè€ŒèŽ·å¾—æ›´å¥½çš„åŽ‹ç¼©è´¨é‡ï¼Œè€Œä¸”åŽŸæ¥çš„MP3æ’­æ”¾å™¨ä¹Ÿå¯æ’­æ”¾MP3PROæ–‡ä»¶ã€‚å¦ä¸€éƒ¨åˆ†åˆ™æ˜¯å°†åˆ†ç¦»å‡ºæ¥çš„é«˜é¢‘æ®µä¿¡å·è¿›è¡Œç¼–ç å¹¶åµŒå…¥åˆ°MP3æµä¸­ï¼Œä¼ ç»Ÿçš„MP3æ’­æ”¾å™¨ä¼šå°†å…¶å¿½ç•¥æŽ‰ï¼Œè€Œæ–°çš„MP3PROæ’­æ”¾å™¨åˆ™å¯ä»Žä¸­è¿˜åŽŸå‡ºé«˜é¢‘ä¿¡å·ï¼Œå¹¶å°†ä¸¤è€…è¿›è¡Œç»„åˆï¼Œå¾—åˆ°é«˜è´¨é‡çš„å…¨å¸¦å®½çš„å£°éŸ³.å®˜æ–¹å®£ç§°é€šè¿‡è¿™æ ·çš„æŠ€æœ¯ï¼Œä½¿å¾—MP3PROèƒ½åœ¨64kbpsçš„ç¼–ç çŽ‡ä¾¿å¯æä¾›ä¸Ž128kbpsçš„mp3ç›¸åŒçš„è´¨é‡ã€‚ä½Žæ¯”ç‰¹çŽ‡ä¸‹MP3PROçš„æ€§èƒ½å¾ˆæ˜Žæ˜¾åœ°æ¯”MP3è¦é«˜,ä½†æ˜¯å®ƒä¸ŽWMAè°èƒœè°è´Ÿå°±å¾ˆéš¾è¯´äº†,æ ¹æ®ä¸€äº›å‘çƒ§å‹çš„è¯„æµ‹, MP3PROä¼¼ä¹Žç•¥èƒœä¸€äº›.é«˜æ¯”ç‰¹çŽ‡ä¸‹å¾ˆå°‘æœ‰äººç”¨åˆ°MP3PRO. äº”.OGG OGGæ ¼å¼çš„å…¨ç§°åº”è¯¥æ˜¯OGG Vobisã€‚å®ƒæ˜¯ä¸€ç§æ–°çš„éŸ³é¢‘åŽ‹ç¼©æ ¼å¼ï¼Œç±»ä¼¼äºŽMP3ç­‰çŽ°æœ‰çš„éŸ³ä¹æ ¼å¼ã€‚ä½†æœ‰ä¸€ç‚¹ä¸åŒçš„æ˜¯ï¼Œå®ƒæ˜¯å®Œå…¨å…è´¹ã€å¼€æ”¾å’Œæ²¡æœ‰ä¸“åˆ©é™åˆ¶çš„ã€‚OGG Vobisæœ‰ä¸€ä¸ªå¾ˆå‡ºä¼—çš„ç‰¹ç‚¹ï¼Œå°±æ˜¯æ”¯æŒå¤šå£°é“ï¼Œéšç€å®ƒçš„æµè¡Œï¼Œä»¥åŽç”¨éšèº«å¬æ¥å¬DTSç¼–ç çš„å¤šå£°é“ä½œå“å°†ä¸ä¼šæ˜¯æ¢¦æƒ³ã€‚OGG Vobisåœ¨åŽ‹ç¼©æŠ€æœ¯ä¸Šæ¯”MP3å¥½ï¼Œè€Œä¸”å®ƒçš„å¤šå£°é“ï¼Œå…è´¹ï¼Œå¼€æºè¿™äº›ç‰¹ç‚¹ï¼Œä½¿å®ƒå¾ˆæœ‰å¯èƒ½æˆä¸ºä¸€ä¸ªæµè¡Œçš„è¶‹åŠ¿ï¼Œè¿™ä¹Ÿæ­£æ˜¯ä¸€äº›MP3æ’­æ”¾å™¨å¯¹å…¶æ”¯æŒçš„åŽŸå›  åœ¨é«˜éŸ³è´¨è¦æ±‚ä¸‹,æœ‰æŸéŸ³é¢‘ç¼–ç ä¸–ç•Œä¸­æ˜¯ä¸‰è¶³é¡¹ç«‹ï¼Œåˆ†åˆ«ä¸ºMP3ã€MPCã€OGGã€‚ Ogg Vorbisä¸­çš„ä¸»è¦ç®—æ³•è¿˜æ˜¯åˆ©ç”¨MDCTï¼ˆä¿®é¥°ç¦»æ•£ä½™å¼¦å˜æ¢Modified Discrete Cosine Transform ï¼‰è€Œä¸æ˜¯ç”¨çŽ°åœ¨æ¯”è¾ƒæ—¶å…´çš„å°æ³¢ï¼ˆwaveletï¼‰æŠ€æœ¯ã€‚Oggçš„å¤šé€šé“ç¼–ç æŠ€æœ¯ï¼Œç»Ÿç§°ä¸ºç«‹ä½“å£°é€šé“è€¦åˆStereo Channel Couplingã€‚è€Œè¯¥æŠ€æœ¯å®žé™…åˆæ˜¯ç”±ä¸¤ç§ä¸åŒçš„æŠ€æœ¯ç»„æˆçš„ï¼šchannel interleaving å’Œ square polar mappingï¼Œè€Œè¿™ä¹Ÿæ˜¯Oggèƒ½æˆä¸ºå…è´¹åˆ¶å¼çš„ä¸€ä¸ªå¿…è¦æ¡ä»¶ï¼Œä»¥å¾€çš„â€œè”åˆç«‹ä½“å£°Joint Stereoâ€çš„ç¼–ç æ¨¡å¼æ˜¯æœ‰ä¸“åˆ©é™åˆ¶çš„ã€‚æ®å®˜æ–¹å£°ç§°ï¼Œä¸Žå…¶ä»–ä¼šé€ æˆç«‹ä½“ç©ºé—´æ„Ÿå‡å¼±çš„ç¼–ç æ¨¡åž‹ç›¸æ¯”ï¼Œè¿™ä¸¤ç§æŠ€æœ¯éƒ½å¯ä»¥åœ¨ä¿æŒç¼–ç å™¨çš„çµæ´»æ€§çš„åŒæ—¶è€Œä¸æŸå®³æœ¬æ¥çš„ç«‹ä½“å£°ç©ºé—´å½±åƒâ€•â€•ç›¸ä¿¡é…åˆiRiverçš„3déŸ³æ•ˆä¼šæœ‰æ›´å¥½çš„è¡¨çŽ°åŠ›ï¼Œè€Œä¸”å®žçŽ°çš„å¤æ‚ç¨‹åº¦æ¯”è”åˆç«‹ä½“å£°æ–¹å¼è¦ä½Žã€‚ OGG Vorbisè¿™ç§ç¼–ç ä¹Ÿè¿œæ¯”90å¹´ä»£å¼€å‘æˆåŠŸçš„MP3å…ˆè¿›ï¼Œå®ƒå¯ä»¥åœ¨ç›¸å¯¹è¾ƒä½Žçš„æ•°æ®é€ŸçŽ‡ä¸‹å®žçŽ°æ¯”MP3æ›´å¥½çš„éŸ³è´¨ï¼â€•â€•æˆ‘è®¤ä¸ºOggå¾ˆè±¡MDçš„atracæ ¼å¼ï¼Œç‰¹åˆ«è±¡æ–°çš„lp2ç¼–ç ï¼Œå®ƒèƒ½åœ¨ä½Žåˆ«ç‰¹çŽ‡ä¸‹æœ‰ç€å¾ˆè¦çš„éŸ³è´¨ã€‚æ­¤å¤–ï¼Œåœ¨ç¼–ç ä¸Šï¼ŒOgg Vorbisæ˜¯ä½¿ç”¨äº†VBRï¼ˆå¯å˜æ¯”ç‰¹çŽ‡ï¼‰å’ŒABRï¼ˆå¹³å‡æ¯”ç‰¹çŽ‡ï¼‰æ–¹å¼è¿›è¡Œç¼–ç ï¼Œæ‰€ä»¥ç†è®ºä¸Šï¼ŒOgg Vorbiså¸¦æ¥çš„éŸ³ä¹å¯ä»¥æ¯”é‡‡ç”¨CBRæ–‡ä»¶æœ‰æ›´å¥½çš„å£°éŸ³è¡¨çŽ°ï¼Œå½“ç„¶å‰ææ˜¯ä¸¤è€…ä½¿ç”¨åŒæ ·æ¯”ç‰¹çŽ‡(Bit Rate)çš„åŽ‹ç¼©æ¨¡å¼â€•â€•è¿™é‡Œå¯ä»¥çŸ¥é“ã€‚Ogg Vorbisçš„æ¯”ç‰¹çŽ‡ç¼©æ”¾åŠŸèƒ½å¯ä»¥åœ¨ä¸ç”¨é‡æ–°ç¼–ç çš„æƒ…å†µä¸‹è°ƒèŠ‚æ–‡ä»¶çš„ç›¸å…³åŽ‹ç¼©çŽ‡ï¼Œä¸Žæ­¤åŒæ—¶ï¼ŒOggæ–‡ä»¶çš„å•ä½ç¼–è¾‘èƒ½åŠ›å’Œè¶…è¶Šå·¦å³å£°é“çš„éŸ³é¢‘æµæŠ€æœ¯å¯ä»¥å¸¦æ¥æ›´ä¸ºå¥‡å¦™çš„éŸ³ä¹äº«å—ã€‚Vorbisè¿˜å…·æœ‰æ¯”ç‰¹çŽ‡ç¼©æ”¾åŠŸèƒ½ï¼Œå¯ä»¥ä¸ç”¨é‡æ–°ç¼–ç ä¾¿å¯è°ƒèŠ‚æ–‡ä»¶çš„æ¯”ç‰¹çŽ‡ã€‚ Vorbisæ–‡ä»¶å¯ä»¥è¢«åˆ†æˆå°å—å¹¶ä»¥æ ·æœ¬ç²’åº¦ï¼ˆgranularityï¼Œä¸“ä¸šæœ¯è¯­ï¼ŒæŒ‡æ•°æ®å¯ä»¥è¢«åˆ†å‰²çš„æœ€å°å°ºå¯¸ï¼‰è¿›è¡Œç¼–è¾‘ï¼›Vorbisæ”¯æŒå¤šé€šé“ï¼ˆå¤§äºŽ2ï¼‰éŸ³é¢‘æµå¹¶ä½¿ç”¨äº†ç‹¬åˆ›æ€§çš„å¤„ç†æŠ€æœ¯ï¼›è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿè¿™æ„å‘³ç€Ogg Vorbisåœ¨SACDã€DTSCDã€DVD AUDIOæŠ“è½¨è½¯ä»¶ï¼ˆç›®å‰è¿™ç§è½¯ä»¶è¿˜æ²¡æœ‰ï¼‰çš„æ”¯æŒä¸‹ï¼Œå¯ä»¥å¯¹æ‰€æœ‰çš„å£°é“è¿›è¡Œç¼–ç ï¼Œè€Œä¸æ˜¯MP3åªèƒ½ç¼–ç 2ä¸ªå£°é“ã€‚å¤šå£°é“éŸ³ä¹çš„å…´èµ·ï¼Œç»™éŸ³ä¹æ¬£èµå¸¦æ¥äº†é©å‘½æ€§çš„å˜åŒ–ï¼Œå°¤å…¶åœ¨æ¬£èµäº¤å“æ—¶ï¼Œä¼šå¸¦æ¥æ›´å¤šä¸´åœºæ„Ÿã€‚è¿™åœºé©å‘½æ€§çš„å˜åŒ–æ˜¯MP3æ— æ³•é€‚åº”çš„ã€‚åœ¨ä»¥åŽçš„æ’­æ”¾æŠ€æœ¯ä¸æ–­æé«˜ä»¥åŽï¼Œè€Œä¸”äººä»¬å¯¹éŸ³è´¨è¦æ±‚ä¸æ–­æé«˜ï¼ŒOggçš„ä¼˜åŠ¿å°†æ›´åŠ æ˜Žæ˜¾ã€‚ å…­. MPC MusePaCkæ˜¯ç”±å¾·å›½äººAndree Buschmannå¼€å‘çš„ä¸€ç§å®Œå…¨å…è´¹çš„é«˜å“è´¨éŸ³é¢‘æ ¼å¼ã€‚åœ¨å…¶é—®ä¸–ä¹‹å‰ï¼ŒLame MP3æ˜¯å…¬è®¤éŸ³è´¨æœ€å¥½çš„æœ‰æŸåŽ‹ç¼©æ–¹æ¡ˆï¼Œè¿½æ±‚éŸ³è´¨çš„äººå¯¹å®ƒè¶‹ä¹‹è‹¥é¹œã€‚ä½†çŽ°åœ¨è¿™ä¸ªæ¡‚å† æ— ç–‘è¯¥è®©ç»™MPCäº†ï¼Œåœ¨ä¸­é«˜ç çŽ‡ä¸‹ï¼ŒMPCå¯ä»¥åšåˆ°æ¯”MP3æ›´å¥½éŸ³è´¨ã€‚åœ¨é«˜ç çŽ‡ä¸‹ï¼ŒMPCçš„é«˜é¢‘è¦æ¯”MP3ç»†è…»ä¸å°‘ï¼Œå¯ä»¥åœ¨èŠ‚çœå¤§é‡ç©ºé—´çš„å‰æä¸‹èŽ·å¾—æœ€ä½³éŸ³è´¨çš„éŸ³ä¹æ¬£èµï¼Œæ˜¯ç›®å‰æœ€é€‚åˆç”¨äºŽéŸ³ä¹æ¬£èµçš„æœ‰æŸç¼–ç ã€‚ MPCçš„ç¼–ç æ–¹æ¡ˆæ˜¯åœ¨MP2çš„åŸºç¡€ä¸Šæ”¹è¿›è€Œæ¥ã€‚å®ƒåŒæ ·é‡‡ç”¨å­å¸¦ç¼–ç æŠ€æœ¯ï¼Œä½†ç›¸æ¯”MP2ï¼Œå®ƒæ‰€é‡‡ç”¨çš„å¿ƒç†å£°å­¦æ¨¡åž‹è¦ä¼˜ç§€å¾—å¤šï¼Œå¹¶åŠ å…¥äº†åƒANSï¼ˆAdaptive Noise Shapingï¼‰ã€CVD(ClearVoiceDetection)ç­‰æŠ€æœ¯ï¼Œç”šè‡³æ”¹å˜äº†åŽ‹ç¼©æ—¶æ‰€ç”¨çš„Huffmanï¼ˆå“ˆå¤«æ›¼ï¼‰ç¼–ç ï¼Œä»¥å¾—åˆ°æ›´å¤§çš„åŽ‹ç¼©çŽ‡ã€‚å¦å¤–ï¼ŒMPCé‡‡ç”¨çš„æ˜¯å¯å˜ç çŽ‡è¿›è¡Œç¼–ç ã€‚æ¯«æ— ç–‘é—®ï¼Œå¯å˜ç çŽ‡çš„ç¼–ç æ•ˆçŽ‡è¦é«˜äºŽå›ºå®šç çŽ‡ï¼Œå› ä¸ºå‰è€…å¯ä»¥åˆç†åœ°åˆ†é…æ•°æ®é‡ï¼Œåœ¨ä¿¡å·å¤æ‚ï¼ˆå¾®å¼±ï¼‰æ—¶æé«˜ï¼ˆé™ä½Žï¼‰æ¯”ç‰¹çŽ‡ï¼Œåœ¨å¾—åˆ°æ»¡æ„çš„æ•ˆæžœåˆèƒ½ç¡®ä¿ä¸é”™çš„åŽ‹ç¼©çŽ‡ã€‚ä¸ºäº†ä¿è¯é«˜éŸ³è´¨ï¼ŒMPCçš„çž¬é—´æœ€å¤§ç çŽ‡ç”šè‡³é«˜è¾¾1.32Mbpsï¼Œè¿™å·²ç»å¿«æŽ¥è¿‘CDçš„1.41Mbpsäº† è¾ƒé«˜æ¯”ç‰¹çŽ‡ä¸‹(250kbpså·¦å³),MPCè¡¨çŽ°éžå¸¸çš„å‡ºä¼—,ç”šè‡³è¶…è¿‡äº†MP3ï¼Œå¾ˆéš¾åˆ†è¾¨å®ƒå’ŒåŽŸå§‹ä¿¡å·æœ‰å¤šå°‘åŒºåˆ«ï¼Œæ— è®ºä»Žé¢‘çŽ‡ä¿ç•™è¿˜æ˜¯ç»†èŠ‚ä¿ç•™ï¼Œä»¥åŠä¿¡å·å¼ºåº¦å¤±çœŸæ¥è¯´ï¼ŒMPCå¤ªä¼˜ç§€äº†.ä½†MPCå¹¶éžä¸‡èƒ½çš„ï¼Œå®ƒæ— æ³•ç¼–ç 48khzé‡‡æ ·çŽ‡çš„æ›²å­ï¼Œæ‰€å¹¸çš„æ˜¯ï¼Œè¿™æ ·çš„æ›²å­æ¥æºå¾ˆå°‘.å¯æƒœè¿™ç§æ ¼å¼å¹¶æ²¡æœ‰åƒMP3æˆ–WMAé‚£æ ·æµè¡Œ. ä¸ƒ.ATRAC ATRACï¼ˆAdaptive TRansform Acoustic Codingè‡ªé€‚åº”å£°å­¦è½¬æ¢ç¼–ç æŠ€æœ¯ï¼‰ï¼šæ˜¯Sonyçš„åŽŸåˆ›éŸ³ä¹åŽ‹ç¼©æŠ€æœ¯ï¼Œä¸»è¦ç”¨äºŽMD Walkmançš„å½•éŸ³åŠæ’­æ”¾æ–¹é¢ã€‚æ˜¯ä¸€é¡¹åŸºäºŽå¬è§‰å¿ƒç†å­¦é¢†åŸŸçš„ç ”ç©¶å’Œä¸æŸä¼¤å¯é—»å£°è´¨é‡çš„æ•°ç éŸ³é¢‘è¯‘ç åŽ‹ç¼©æŠ€æœ¯ï¼Œå¯¹éŸ³ä¹èµ„è®¯æœ‰æ•ˆçš„è¿›è¡ŒåŽ‹ç¼©ï¼ŒåŽ‹ç¼©çš„æ¯”çŽ‡ä¸ºåŽŸæ¥çš„äº”åˆ†ä¹‹ä¸€ï¼Œå› ä¸ºMDä½¿ç”¨äº†ATRACåŽ‹ç¼©æŠ€æœ¯ï¼Œè¿™æ ·çš„åŽ‹ç¼©å¤§å¤§èŠ‚çœäº†è®¸å¤šç©ºé—´ï¼Œæ‰€ä»¥ CDçš„ç¢Ÿç‰‡è¦120mmå¤§å°ï¼Œè€ŒMDåªéœ€64mmå°±å¯ä»¥å½•ä¸‹74åˆ†é’Ÿçš„éŸ³ä¹ã€‚ ATRACåŽ‹ç¼©æŠ€æœ¯ä¸»è¦æ˜¯åˆ©ç”¨äº†äººè€³çš„è”½é®æ•ˆåº”ï¼Œåœ¨å¿ƒç†å£°å­¦åŽŸç†ä¸Šï¼Œåœ¨è¿›è¡ŒéŸ³é¢‘å½•å…¥çš„åŒæ—¶ï¼Œæœ‰è®¸å¤šå¤–éƒ¨çš„é¢‘æ®µåŒæ—¶ä¹Ÿä¼šè¢«å½•å…¥ï¼Œå½“äººè€³åŒæ—¶å¬åˆ°ä¸¤ä¸ªä¸åŒé¢‘çŽ‡ã€ä¸åŒéŸ³é‡çš„å£°éŸ³æ—¶ï¼ŒéŸ³é‡è¾ƒå°çš„ä½Žé¢‘åŠéŸ³é‡è¾ƒå°çš„é«˜é¢‘è¿žåŒä¸ä¸ºäººè€³æ‰€å¯Ÿè§‰çš„é¢‘æ®µä¿¡å·éƒ½ä¼šè¢«è‡ªåŠ¨å‡å¼±æˆ–å¿½ç•¥ä¸äºˆè®°å½•ï¼Œå› æ­¤åˆå¯ä»¥ç§°ä¸ºé€‚åº”æ€§å˜æ¢å£°ç æŠ€æœ¯ï¼Œç”±äºŽè¿‘å¹´ä¾†ç¼–ç åŽ‹ç¼©æŠ€æœ¯ï¼ˆATRACçš„ç‰ˆæœ¬ï¼‰è¶Šä¾†è¶Šæˆç†Ÿï¼Œæ‰€ä»¥ç»è¿‡ç¼–ç è§£ç è¿‡ç¨‹åŽçš„å£°éŸ³ä»ç›´é€¼CDï¼Œå¤§å®¶å°±ä¸å¿…æ‹…å¿ƒéŸ³è´¨å·®å•¦ã€‚ ATRACå°†16æ¯”ç‰¹44.1KHzçš„æ•°å­—ä¿¡å·ä»¥é¢‘çŽ‡å“åº”è½´åˆ†æˆ52ä¸ªåŒºæ®µï¼ˆåœ¨ä½Žé¢‘æ—¶åˆ†å‰²è¾ƒç»†è€Œåœ¨é«˜é¢‘æ—¶åˆ†å‰²è¾ƒç²—ï¼‰ï¼Œæ ¹æ®å£°éŸ³å¿ƒç†å­¦çš„åŽŸç†ï¼Œå°†å£°éŸ³ä¿¡å·ä¸­äººè€³å¬ä¸åˆ°å’Œå¯¹äººçš„å¬åŠ›å½±å“ä¸å¤§çš„ä¿¡æ¯ç»™å‰”é™¤å‡ºåŽ»è€Œè¾¾åˆ°ç¼©å°å£°éŸ³æ–‡ä»¶çš„ç›®çš„ã€‚åˆ©ç”¨è¿™ç§åŽŸç†ï¼ŒATRACå¯ä»¥å°†å½•éŸ³çš„èµ„æ–™é‡åŽ‹ç¼©ä¸ºåŽŸæ¥çš„äº”åˆ†ä¹‹ä¸€ï¼ˆå³åŽ‹ç¼©æ¯”ä¸º1ï¼š5ï¼‰ã€‚ . å…«. APE APEçš„æœ¬è´¨ï¼Œå…¶å®žå®ƒæ˜¯ä¸€ç§æ— æŸåŽ‹ç¼©éŸ³é¢‘æ ¼å¼ã€‚åºžå¤§çš„WAVéŸ³é¢‘æ–‡ä»¶å¯ä»¥é€šè¿‡Monkeyâ€™â€™s Audioè¿™ä¸ªè½¯ä»¶è¿›è¡Œâ€œç˜¦èº«â€åŽ‹ç¼©ä¸ºAPEã€‚å¾ˆæ—¶å€™å®ƒè¢«ç”¨åšç½‘ç»œéŸ³é¢‘æ–‡ä»¶ä¼ è¾“ï¼Œå› ä¸ºè¢«åŽ‹ç¼©åŽçš„APEæ–‡ä»¶å®¹é‡è¦æ¯”WAVæºæ–‡ä»¶å°ä¸€åŠå¤šï¼Œå¯ä»¥èŠ‚çº¦ä¼ è¾“æ‰€ç”¨çš„æ—¶é—´ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œé€šè¿‡Monkeyâ€™â€™s Audioè§£åŽ‹ç¼©è¿˜åŽŸä»¥åŽå¾—åˆ°çš„WAVæ–‡ä»¶å¯ä»¥åšåˆ°ä¸ŽåŽ‹ç¼©å‰çš„æºæ–‡ä»¶å®Œå…¨ä¸€è‡´ã€‚æ‰€ä»¥APEè¢«èª‰ä¸ºâ€œæ— æŸéŸ³é¢‘åŽ‹ç¼©æ ¼å¼â€ï¼ŒMonkeyâ€™â€™s Audioè¢«èª‰ä¸ºâ€œæ— æŸéŸ³é¢‘åŽ‹ç¼©è½¯ä»¶â€ã€‚ä¸Žé‡‡ç”¨WinZipæˆ–è€…WinRARè¿™ç±»ä¸“ä¸šæ•°æ®åŽ‹ç¼©è½¯ä»¶æ¥åŽ‹ç¼©éŸ³é¢‘æ–‡ä»¶ä¸åŒï¼ŒåŽ‹ç¼©ä¹‹åŽçš„APEéŸ³é¢‘æ–‡ä»¶æ˜¯å¯ä»¥ç›´æŽ¥è¢«æ’­æ”¾çš„ã€‚ Monkeyâ€™â€™s Audioä¼šå‘Winampä¸­å®‰è£…ä¸€ä¸ªâ€œin_APE.dllâ€æ’ä»¶ï¼Œä»Žè€Œä½¿Winampä¹Ÿå…·å¤‡æ’­æ”¾APEæ–‡ä»¶çš„èƒ½åŠ›ã€‚ å’Œä¸Šé¢ä»‹ç»çš„å‡ æ¬¾ç¼–ç ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªç¼–ç æä¾›äº†æœ€å¥½çš„éŸ³è´¨ä¿è¯(æ— æŸåŽ‹ç¼©)ï¼è¿˜æä¾›äº†Winampçš„æ’ä»¶æ”¯æŒ,å¯ä»¥ç›´æŽ¥ç”¨Winampæ¥æ’­æ”¾.æ‰€è°“æ— æŸå°±æ˜¯æŒ‡åŽ‹ç¼©åŽçš„æ ¼å¼å’Œæºæ–‡ä»¶åœ¨éŸ³è´¨ä¸Šå¹¶æ— å·®å¼‚ï¼Œè€ŒMp3ã€WMAç­‰çš„ç¼–ç æ–¹æ¡ˆæ˜¯åŸºäºŽæœ‰æŸçš„ï¼Œåœ¨æŸå¤±éƒ¨åˆ†éŸ³è´¨çš„å‰æä¸‹èŠ‚çº¦å­˜è´®ç©ºé—´ï¼Œæ‰€ä»¥è¯´éŸ³è´¨å†å¥½çš„Mp3ã€WMAä¹Ÿåªèƒ½æ˜¯æ— é™æŽ¥è¿‘æºæ–‡ä»¶çš„éŸ³è´¨ã€‚APEéžå¸¸é€‚åˆæ¥ç¼–ç è®²ç©¶ç»†èŠ‚çš„ç‹¬å¥æ›²ç›®å’Œå¤§åŠ¨æ€çš„äº¤å“æ›²ã€‚å‘å„ä½éŸ³ä¹è¿·ä»¬(ä¸æ˜¯æ­Œè¿·)ä½œæœ€å¼ºçƒˆçš„æŽ¨èï¼å®ƒçš„åŽ‹ç¼©æ¯”çº¦ä¸º2:1. ä¹. WAV WAVæ˜¯å½•éŸ³æ—¶ç”¨çš„æ ‡å‡†çš„windowsæ–‡ä»¶æ ¼å¼ï¼Œæ–‡ä»¶çš„æ‰©å±•åä¸ºâ€œ.wavâ€ï¼ŒWAVEæ–‡ä»¶ä½œä¸ºæœ€ç»å…¸çš„Windowså¤šåª’ä½“éŸ³é¢‘æ ¼å¼ï¼Œåº”ç”¨éžå¸¸å¹¿æ³›ã€‚å£°é“æœ‰å•å£°é“å’Œç«‹ä½“å£°ä¹‹åˆ†ï¼Œé‡‡æ ·é¢‘çŽ‡ä¸€èˆ¬æœ‰11kHzã€22kHzå’Œ44kHzä¸‰ç§ã€‚ WAVEæ–‡ä»¶æ‰€å å®¹é‡=ï¼ˆé‡‡æ ·é¢‘çŽ‡Ã—é‡‡æ ·ä½æ•°Ã—å£°é“ï¼‰Ã—æ—¶é—´/8ï¼ˆ1å­—èŠ‚=8bitï¼‰ã€‚ WAVæ–‡ä»¶ä¸ŽMIDIMP3è¿™ç±»å¤šåª’ä½“å£°éŸ³æ–‡ä»¶æ¯”è¾ƒèµ·æ¥ï¼Œæ‰€å çš„ç¡¬ç›˜ç©ºé—´è¦å¤§å¾—å¤šï¼Œä½†WAVæ–‡ä»¶çš„å›žæ”¾æ•ˆæžœæ˜¯æœ€å¥½çš„ï¼ŒWAVæ–‡ä»¶ç›´æŽ¥åæ˜ äº†ä¸€ä¸ªå£°éŸ³åœ¨æ¯ä¸ªæ—¶åˆ»çš„å¤§å°å€¼ï¼Œ1åˆ†é’Ÿ44khzé‡‡æ ·çŽ‡çš„WAVæ–‡ä»¶å°±ä¼šå ç”¨10Mç¡¬ç›˜ç©ºé—´ï¼ å®ƒé€šå¸¸ä½œä¸ºåˆ¶ä½œé«˜è´¨é‡éŸ³ä¹çš„ä¸­é—´ä½“ å.RM Real Networkså…¬å¸æ‰€åˆ¶å®šçš„éŸ³é¢‘è§†é¢‘åŽ‹ç¼©è§„èŒƒç§°ä¸ºReal Mediaï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨RealPlayeræˆ–RealOne Playerå¯¹ç¬¦åˆRealMediaæŠ€æœ¯è§„èŒƒçš„ç½‘ç»œéŸ³é¢‘/è§†é¢‘èµ„æºè¿›è¡Œå®žå†µè½¬æ’­å¹¶ä¸”RealMediaå¯ä»¥æ ¹æ®ä¸åŒçš„ç½‘ç»œä¼ è¾“é€ŸçŽ‡åˆ¶å®šå‡ºä¸åŒçš„åŽ‹ç¼©æ¯”çŽ‡ï¼Œä»Žè€Œå®žçŽ°åœ¨ä½Žé€ŸçŽ‡çš„ç½‘ç»œä¸Šè¿›è¡Œå½±åƒæ•°æ®å®žæ—¶ä¼ é€å’Œæ’­æ”¾ã€‚è¿™ç§æ ¼å¼çš„å¦ä¸€ä¸ªç‰¹ç‚¹æ˜¯ç”¨æˆ·ä½¿ç”¨RealPlayeræˆ–RealOne Playeræ’­æ”¾å™¨å¯ä»¥åœ¨ä¸ä¸‹è½½éŸ³é¢‘/è§†é¢‘å†…å®¹çš„æ¡ä»¶ä¸‹å®žçŽ°åœ¨çº¿æ’­æ”¾ã€‚å¦å¤–ï¼ŒRMä½œä¸ºç›®å‰ä¸»æµç½‘ç»œè§†é¢‘æ ¼å¼ï¼Œå®ƒè¿˜å¯ä»¥é€šè¿‡å…¶Real ServeræœåŠ¡å™¨å°†å…¶å®ƒæ ¼å¼çš„è§†é¢‘è½¬æ¢æˆRMè§†é¢‘å¹¶ç”±Real ServeræœåŠ¡å™¨è´Ÿè´£å¯¹å¤–å‘å¸ƒå’Œæ’­æ”¾ã€‚RMå’ŒASFæ ¼å¼å¯ä»¥è¯´å„æœ‰åƒç§‹ï¼Œé€šå¸¸RMè§†é¢‘æ›´æŸ”å’Œä¸€äº›ï¼Œè€ŒASFè§†é¢‘åˆ™ç›¸å¯¹æ¸…æ™°ä¸€äº›ã€‚ RMæ ¼å¼ä¸€å¼€å§‹å°±å®šä½åœ¨è§†é¢‘æµåº”ç”¨æ–¹é¢ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯è§†é¢‘æµæŠ€æœ¯çš„å§‹åˆ›è€…ã€‚å®ƒå¯ä»¥åœ¨ç”¨56 K Modemæ‹¨å·ä¸Šç½‘çš„æ¡ä»¶ä¸‹å®žçŽ°ä¸é—´æ–­çš„è§†é¢‘æ’­æ”¾ï¼Œå½“ç„¶ï¼Œå…¶å›¾åƒè´¨é‡å’ŒMPEG2ï¼ŒDIVXç­‰ç›¸æ¯”æœ‰ä¸€å®šå·®è·ï¼Œæ¯•ç«Ÿè¦å®žçŽ°åœ¨ç½‘ä¸Šä¼ è¾“ä¸é—´æ–­çš„è§†é¢‘æ˜¯éœ€è¦å¾ˆå¤§å¸¦å®½çš„ã€‚ RMå·²ç»æ˜¯æ˜¨æ—¥é»„èŠ±ï¼Œæ²¡æœ‰ä»»ä½•æ–°æ„ï¼Œä½ŽBitrateæ¯”ä¸è¿‡WMAï¼Œé«˜Bitrateæ¯”ä¸è¿‡MP3ï¼Œè™½ç„¶æ–°çš„RMå¯¼å…¥äº†ATRAC3ç®—æ³•ï¼Œä½†é¢“åŠ¿å·²å®šï¼Œå¾ˆéš¾ä¸œå±±å†èµ·äº†ã€‚]]></content>
      <categories>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>æµåª’ä½“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[c/c++æŒ‡é’ˆé—®é¢˜æ±‡æ€»]]></title>
    <url>%2F2015%2F07%2F09%2Fc-c-%E6%8C%87%E9%92%88%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB%2F</url>
    <content type="text"><![CDATA[1char const p;char const pconst char *p ä¸Šè¿°ä¸‰ä¸ªæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿchar const p; //å¸¸é‡æŒ‡é’ˆï¼Œpçš„å€¼ä¸å¯ä»¥ä¿®æ”¹char const pï¼›//æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆï¼ŒæŒ‡å‘çš„å¸¸é‡å€¼ä¸å¯ä»¥æ”¹const char pï¼› //å’Œchar const p 21234567891011121314151617char str1[] = â€œabcâ€;char str2[] = â€œabcâ€;const char str3[] = â€œabcâ€;const char str4[] = â€œabcâ€;const char *str5 = â€œabcâ€;const char *str6 = â€œabcâ€;char *str7 = â€œabcâ€;char *str8 = â€œabcâ€;cout &lt;&lt; ( str1 == str2 ) &lt;&lt; endl;cout &lt;&lt; ( str3 == str4 ) &lt;&lt; endl;cout &lt;&lt; ( str5 == str6 ) &lt;&lt; endl;cout &lt;&lt; ( str7 == str8 ) &lt;&lt; endl; æ‰“å°ç»“æžœæ˜¯ä»€ä¹ˆï¼Ÿ 12è§£ç­”ï¼šç»“æžœæ˜¯ï¼š0 0 1 1str1,str2,str3,str4æ˜¯æ•°ç»„å˜é‡ï¼Œå®ƒä»¬æœ‰å„è‡ªçš„å†…å­˜ç©ºé—´ï¼›è€Œstr5,str6,str7,str8æ˜¯æŒ‡é’ˆï¼Œå®ƒä»¬æŒ‡å‘ç›¸åŒçš„å¸¸é‡åŒºåŸŸ ###3 ä»¥ä¸‹ä»£ç ä¸­çš„ä¸¤ä¸ªsizeofç”¨æ³•æœ‰é—®é¢˜å—ï¼Ÿ 1234567891011void UpperCase( char str[] ) // å°† str ä¸­çš„å°å†™å­—æ¯è½¬æ¢æˆå¤§å†™å­—æ¯&#123;for( size_t i=0; i&lt;sizeof(str)/sizeof(str[0]); ++i )if( â€˜aâ€™&lt;=str[i] &amp;&amp; str[i]&lt;=â€™zâ€™ )str[i] -= (â€˜aâ€™-&apos;Aâ€™ );&#125;char str[] = â€œaBcDeâ€;cout &lt;&lt; â€œstrå­—ç¬¦é•¿åº¦ä¸º: â€ &lt;&lt; sizeof(str)/sizeof(str[0]) &lt;&lt; endl;UpperCase( str );cout &lt;&lt; str &lt;&lt; endl; ç­”ï¼šå‡½æ•°å†…çš„sizeofæœ‰é—®é¢˜ã€‚æ ¹æ®è¯­æ³•ï¼Œsizeofå¦‚ç”¨äºŽæ•°ç»„ï¼Œåªèƒ½æµ‹å‡ºé™æ€æ•°ç»„çš„å¤§å°ï¼Œæ— æ³•æ£€æµ‹åŠ¨æ€åˆ†é…çš„æˆ–å¤–éƒ¨æ•°ç»„å¤§å°ã€‚å‡½æ•°å¤–çš„stræ˜¯ä¸€ä¸ªé™æ€å®šä¹‰çš„æ•°ç»„ï¼Œå› æ­¤å…¶å¤§å°ä¸º6ï¼Œå‡½æ•°å†…çš„strå®žé™…åªæ˜¯ä¸€ä¸ªæŒ‡å‘å­—ç¬¦ä¸²çš„æŒ‡é’ˆï¼Œæ²¡æœ‰ä»»ä½•é¢å¤–çš„ä¸Žæ•°ç»„ç›¸å…³çš„ä¿¡æ¯ï¼Œå› æ­¤sizeofä½œç”¨äºŽä¸Šåªå°†å…¶å½“æŒ‡é’ˆçœ‹ï¼Œä¸€ä¸ªæŒ‡é’ˆä¸º4ä¸ªå­—èŠ‚ï¼Œå› æ­¤è¿”å›ž4ã€‚ 4123456main()&#123;int a[5]=&#123;1,2,3,4,5&#125;;int *ptr=(int *)(&amp;a+1);printf(â€œ%d,%dâ€,*(a+1),*(ptr-1));&#125; è¾“å‡ºç»“æžœæ˜¯ä»€ä¹ˆï¼Ÿ ç­”æ¡ˆï¼šè¾“å‡ºï¼š2,5 1234567891011121314151617*(a+1ï¼‰å°±æ˜¯a[1]ï¼Œ*(ptr-1)å°±æ˜¯a[4],æ‰§è¡Œç»“æžœæ˜¯2ï¼Œ5&amp;a+1ä¸æ˜¯é¦–åœ°å€+1ï¼Œç³»ç»Ÿä¼šè®¤ä¸ºåŠ ä¸€ä¸ªaæ•°ç»„çš„åç§»ï¼Œæ˜¯åç§»äº†ä¸€ä¸ªæ•°ç»„çš„å¤§å°ï¼ˆæœ¬ä¾‹æ˜¯5ä¸ªintï¼‰int *ptr=(int *)(&amp;a+1);åˆ™ptrå®žé™…æ˜¯&amp;(a[5]),ä¹Ÿå°±æ˜¯a+5åŽŸå› å¦‚ä¸‹ï¼š&amp;aæ˜¯æ•°ç»„æŒ‡é’ˆï¼Œå…¶ç±»åž‹ä¸º int (*)[5];è€ŒæŒ‡é’ˆåŠ 1è¦æ ¹æ®æŒ‡é’ˆç±»åž‹åŠ ä¸Šä¸€å®šçš„å€¼ï¼Œä¸åŒç±»åž‹çš„æŒ‡é’ˆ+1ä¹‹åŽå¢žåŠ çš„å¤§å°ä¸åŒã€‚aæ˜¯é•¿åº¦ä¸º5çš„intæ•°ç»„æŒ‡é’ˆï¼Œæ‰€ä»¥è¦åŠ  5*sizeof(int)æ‰€ä»¥ptrå®žé™…æ˜¯a[5]ä½†æ˜¯prtä¸Ž(&amp;a+1)ç±»åž‹æ˜¯ä¸ä¸€æ ·çš„(è¿™ç‚¹å¾ˆé‡è¦)æ‰€ä»¥prt-1åªä¼šå‡åŽ»sizeof(int*)a,&amp;açš„åœ°å€æ˜¯ä¸€æ ·çš„ï¼Œä½†æ„æ€ä¸ä¸€æ ·aæ˜¯æ•°ç»„é¦–åœ°å€ï¼Œä¹Ÿå°±æ˜¯a[0]çš„åœ°å€ï¼Œ&amp;aæ˜¯å¯¹è±¡ï¼ˆæ•°ç»„ï¼‰é¦–åœ°å€ï¼Œa+1æ˜¯æ•°ç»„ä¸‹ä¸€å…ƒç´ çš„åœ°å€ï¼Œå³a[1],&amp;a+1æ˜¯ä¸‹ä¸€ä¸ªå¯¹è±¡çš„åœ°å€ï¼Œå³a[5]. 5è¯·é—®ä»¥ä¸‹ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼š 12345678int main()&#123;char a;char *str=&amp;a;strcpy(str,â€helloâ€);printf(str);return 0;&#125; ç­”æ¡ˆï¼šæ²¡æœ‰ä¸ºstråˆ†é…å†…å­˜ç©ºé—´ï¼Œå°†ä¼šå‘ç”Ÿå¼‚å¸¸ã€‚é—®é¢˜å‡ºåœ¨å°†ä¸€ä¸ªå­—ç¬¦ä¸²å¤åˆ¶è¿›ä¸€ä¸ªå­—ç¬¦å˜é‡æŒ‡é’ˆæ‰€æŒ‡åœ°å€ã€‚è™½ç„¶å¯ä»¥æ­£ç¡®è¾“å‡ºç»“æžœï¼Œä½†å› ä¸ºè¶Šç•Œè¿›è¡Œå†…åœ¨è¯»å†™è€Œå¯¼è‡´ç¨‹åºå´©æºƒã€‚ 61234char* s=â€AAAâ€;printf(â€œ%sâ€,s);s[0]=â€™B&apos;;printf(â€œ%sâ€,s); æœ‰ä»€ä¹ˆé”™ï¼Ÿ ç­”æ¡ˆï¼šâ€œAAAâ€æ˜¯å­—ç¬¦ä¸²å¸¸é‡ã€‚sæ˜¯æŒ‡é’ˆï¼ŒæŒ‡å‘è¿™ä¸ªå­—ç¬¦ä¸²å¸¸é‡ï¼Œæ‰€ä»¥å£°æ˜Žsçš„æ—¶å€™å°±æœ‰é—®é¢˜ã€‚cosnt char* s=â€AAAâ€;ç„¶åŽåˆå› ä¸ºæ˜¯å¸¸é‡ï¼Œæ‰€ä»¥å¯¹æ˜¯s[0]çš„èµ‹å€¼æ“ä½œæ˜¯ä¸åˆæ³•çš„ã€‚ 7123int (*s[10])(int) è¡¨ç¤ºçš„æ˜¯ä»€ä¹ˆï¼Ÿç­”æ¡ˆï¼šint (*s[10])(int) å‡½æ•°æŒ‡é’ˆæ•°ç»„ï¼Œæ¯ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªint func(int param)çš„å‡½æ•°ã€‚ 8æœ‰ä»¥ä¸‹è¡¨è¾¾å¼ï¼š 12345int a=248; b=4;int const c=21;const int *d=&amp;a;int *const e=&amp;b;int const *f const =&amp;a; è¯·é—®ä¸‹åˆ—è¡¨è¾¾å¼å“ªäº›ä¼šè¢«ç¼–è¯‘å™¨ç¦æ­¢ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿc=32;d=&b;d=43;e=34;e=&a;f=0x321f; ç­”æ¡ˆï¼šc è¿™æ˜¯ä¸ªä»€ä¹ˆä¸œä¸œï¼Œç¦æ­¢ d è¯´äº†æ˜¯constï¼Œ ç¦æ­¢e = &amp;a è¯´äº†æ˜¯const ç¦æ­¢const *f const =&a; ç¦æ­¢â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 91234567891011121314151617#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;void getmemory(char *p)&#123; p=(char *) malloc(100);strcpy(p,â€hello worldâ€);&#125; int main( )&#123;char *str=NULL;getmemory(str);printf(â€œ%s/nâ€,str);free(str);return 0;&#125; åˆ†æžä¸€ä¸‹è¿™æ®µä»£ç  ç­”æ¡ˆï¼šç¨‹åºå´©æºƒï¼Œgetmemoryä¸­çš„malloc ä¸èƒ½è¿”å›žåŠ¨æ€å†…å­˜ï¼Œ freeï¼ˆï¼‰å¯¹stræ“ä½œå¾ˆå±é™© åšä¸»ï¼šgetmemoryä¸­pæ˜¯å½¢å‚ï¼Œæ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼Œgetmemory(str)è°ƒç”¨åŽï¼Œä¼ å…¥çš„æ˜¯æŒ‡é’ˆå˜é‡ä¿å­˜çš„å¯¹è±¡åœ°å€ï¼Œp=(char ) malloc(100)å®žé™…ä¸Šæ˜¯æŠŠç”³è¯·çš„åŠ¨æ€å†…å­˜ç©ºé—´çš„é¦–åœ°å€ä»˜ç»™pæŒ‡å‘çš„åœ°å€ï¼ˆå³stræŒ‡å‘çš„åœ°å€nullï¼‰ï¼Œè¿™ä¸ªæ˜¯é”™è¯¯çš„ã€‚åº”è¯¥ä¿®æ”¹æˆæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆvoid getmemory(char **p)ï¼Œè¿™æ ·mallocè¿”å›žçš„åœ°å€ä»˜ç»™pï¼ˆå³strå˜é‡æœ¬èº«ï¼‰ã€‚ 1012char szstr[10];strcpy(szstr,â€0123456789â€³); äº§ç”Ÿä»€ä¹ˆç»“æžœï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ ç­”æ¡ˆï¼šé•¿åº¦ä¸ä¸€æ ·ï¼Œä¼šé€ æˆéžæ³•çš„OSï¼Œå­—ç¬¦ä¸²æœ€åŽä¸€ä¸ªæ˜¯â€™\0â€™æ‰€ä»¥ä¸Šè¾¹åº”è¯¥æ˜¯11 11è¦å¯¹ç»å¯¹åœ°å€0Ã—100000èµ‹å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨(unsigned int*)0Ã—100000 = 1234;é‚£ä¹ˆè¦æ˜¯æƒ³è®©ç¨‹åºè·³è½¬åˆ°ç»å¯¹åœ°å€æ˜¯0Ã—100000åŽ»æ‰§è¡Œï¼Œåº”è¯¥æ€Žä¹ˆåšï¼Ÿ ç­”æ¡ˆï¼š((void ()( ))0Ã—100000 ) ( );é¦–å…ˆè¦å°†0Ã—100000å¼ºåˆ¶è½¬æ¢æˆå‡½æ•°æŒ‡é’ˆ,å³:(void ()())0Ã—100000ç„¶åŽå†è°ƒç”¨å®ƒ: ((void ()())0Ã—100000)();ç”¨typedefå¯ä»¥çœ‹å¾—æ›´ç›´è§‚äº›:typedef void()() voidFuncPtr;*((voidFuncPtr)0Ã—100000)();â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 12åˆ†æžä¸‹é¢çš„ç¨‹åºï¼š 123456789101112131415161718192021void GetMemory(char **p,int num)&#123; //pï¼ŒæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆï¼Œ*pï¼ŒpæŒ‡å‘çš„æŒ‡é’ˆ(å³str)ï¼Œ**pï¼Œæœ€ç»ˆçš„å¯¹è±¡ï¼ŒstræŒ‡å‘çš„å•å…ƒ*p=(char *)malloc(num); //ç”³è¯·ç©ºé—´é¦–åœ°å€ä»˜ç»™ä¼ å…¥çš„è¢«pæŒ‡å‘çš„æŒ‡é’ˆï¼Œå³str&#125; int main()&#123;char *str=NULL;GetMemory(&amp;str,100); //ä¼ å…¥æŒ‡é’ˆå˜é‡æœ¬èº«çš„åœ°å€strcpy(str,â€helloâ€);free(str);if(str!=NULL)&#123;strcpy(str,â€worldâ€);&#125; printf(â€œ\n str is %sâ€,str); è½¯ä»¶å¼€å‘ç½‘ www.mscto.comgetchar();&#125; é—®è¾“å‡ºç»“æžœæ˜¯ä»€ä¹ˆï¼Ÿ ç­”æ¡ˆï¼šè¾“å‡ºstr is worldã€‚ free åªæ˜¯é‡Šæ”¾çš„stræŒ‡å‘çš„å†…å­˜ç©ºé—´,å®ƒæœ¬èº«çš„å€¼è¿˜æ˜¯å­˜åœ¨çš„.æ‰€ä»¥freeä¹‹åŽï¼Œæœ‰ä¸€ä¸ªå¥½çš„ä¹ æƒ¯å°±æ˜¯å°†str=NULL.æ­¤æ—¶stræŒ‡å‘ç©ºé—´çš„å†…å­˜å·²è¢«å›žæ”¶,å¦‚æžœè¾“å‡ºè¯­å¥ä¹‹å‰è¿˜å­˜åœ¨åˆ†é…ç©ºé—´çš„æ“ä½œçš„è¯,è¿™æ®µå­˜å‚¨ç©ºé—´æ˜¯å¯èƒ½è¢«é‡æ–°åˆ†é…ç»™å…¶ä»–å˜é‡çš„,å°½ç®¡è¿™æ®µç¨‹åºç¡®å®žæ˜¯å­˜åœ¨å¤§å¤§çš„é—®é¢˜ï¼ˆä¸Šé¢å„ä½å·²ç»è¯´å¾—å¾ˆæ¸…æ¥šäº†ï¼‰ï¼Œä½†æ˜¯é€šå¸¸ä¼šæ‰“å°å‡ºworldæ¥ã€‚è¿™æ˜¯å› ä¸ºï¼Œè¿›ç¨‹ä¸­çš„å†…å­˜ç®¡ç†ä¸€èˆ¬ä¸æ˜¯ç”±æ“ä½œç³»ç»Ÿå®Œæˆçš„ï¼Œè€Œæ˜¯ç”±åº“å‡½æ•°è‡ªå·±å®Œæˆçš„ã€‚ å½“ä½ mallocä¸€å—å†…å­˜çš„æ—¶å€™ï¼Œç®¡ç†åº“å‘æ“ä½œç³»ç»Ÿç”³è¯·ä¸€å—ç©ºé—´ï¼ˆå¯èƒ½ä¼šæ¯”ä½ ç”³è¯·çš„å¤§ä¸€äº›ï¼‰ï¼Œç„¶åŽåœ¨è¿™å—ç©ºé—´ä¸­è®°å½•ä¸€äº›ç®¡ç†ä¿¡æ¯ï¼ˆä¸€èˆ¬æ˜¯åœ¨ä½ ç”³è¯·çš„å†…å­˜ å‰é¢ä¸€ç‚¹ï¼‰ï¼Œå¹¶å°†å¯ç”¨å†…å­˜çš„åœ°å€è¿”å›žã€‚ä½†æ˜¯é‡Šæ”¾å†…å­˜çš„æ—¶å€™ï¼Œç®¡ç†åº“é€šå¸¸éƒ½ä¸ä¼šå°†å†…å­˜è¿˜ç»™æ“ä½œç³»ç»Ÿï¼Œå› æ­¤ä½ æ˜¯å¯ä»¥ç»§ç»­è®¿é—®è¿™å—åœ°å€çš„ã€‚ 13123456789101112char a[10]ï¼›strlen(a)ä¸ºä»€ä¹ˆç­‰äºŽ15ï¼Ÿ#include â€œstdio.hâ€#include â€œstring.hâ€void main()&#123;char aa[10];printf(â€œ%dâ€,strlen(aa));&#125; ç­”æ¡ˆï¼šsizeof()å’Œåˆä¸åˆå§‹åŒ–ï¼Œæ²¡æœ‰å…³ç³»ï¼›strlen()å’Œåˆå§‹åŒ–æœ‰å…³ã€‚ 1412char (*str)[20];/*stræ˜¯ä¸€ä¸ªæ•°ç»„æŒ‡é’ˆï¼Œå³æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼Ž*/char *str[20];/*stræ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œå…¶å…ƒç´ ä¸ºæŒ‡é’ˆåž‹æ•°æ®ï¼Ž*/ 1512345678910111213141516171819202122#include&lt;iostream.h&gt;#include &lt;string.h&gt;#include &lt;malloc.h&gt;#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;memory.h&gt;typedef struct AA&#123;int b1:5;int b2:2;&#125;AA;void main()&#123;AA aa;char cc[100];strcpy(cc,â€0123456789abcdefghijklmnopqrstuvwxyzâ€);memcpy(&amp;aa,cc,sizeof(AA));cout &lt;&lt; aa.b1 &lt;&lt;endl;cout &lt;&lt; aa.b2 &lt;&lt;endl;&#125; è¾“å‡ºç»“æžœæ˜¯å¤šå°‘ï¼Ÿ ç­”æ¡ˆï¼š-16å’Œï¼‘ é¦–å…ˆsizeof(AA)çš„å¤§å°ä¸º4,b1å’Œb2åˆ†åˆ«å 5bitå’Œ2bit.ç»è¿‡strcpyå’ŒmemcpyåŽ,aaçš„4ä¸ªå­—èŠ‚æ‰€å­˜æ”¾çš„å€¼æ˜¯: 0,1,2,3çš„ASCç ï¼Œå³00110000,00110001,00110010,00110011æ‰€ä»¥ï¼Œæœ€åŽä¸€æ­¥ï¼šæ˜¾ç¤ºçš„æ˜¯è¿™ï¼”ä¸ªå­—èŠ‚çš„å‰ï¼•ä½ï¼Œå’Œ ä¹‹åŽçš„ï¼’ä½åˆ†åˆ«ä¸ºï¼š10000,å’Œ01ï¼Œå› ä¸ºintæ˜¯æœ‰æ­£è´Ÿä¹‹åˆ† 16è¯•é¢˜ä¸‰ï¼š ä»¥ä¸‹ä»£ç æœ‰å“ªäº›é”™è¯¯æˆ–ä¸è¶³ä¹‹å¤„ 1234567891011121314151617181920212223void GetMemory( char **p, int num )&#123; *p = (char *) malloc( num );&#125; void Test( void )&#123; char *str = NULL; GetMemory( &amp;str, 100 ); strcpy( str, &quot;hello&quot; ); printf( str );&#125; è§£ç­”ï¼š å­˜åœ¨2å¤„é—®é¢˜ï¼š æœ¬é¢˜ä¸­çš„Testå‡½æ•°ä¸­æœªå¯¹mallocçš„å†…å­˜è¿›è¡Œé‡Šæ”¾ã€‚ æœ¬é¢˜ä¸­çš„GetMemoryé¿å…äº†è¯•é¢˜ä¸€çš„é—®é¢˜ï¼Œä¼ å…¥GetMemoryçš„å‚æ•°ä¸ºå­—ç¬¦ä¸²æŒ‡é’ˆçš„æŒ‡é’ˆï¼Œä½†æ˜¯åœ¨GetMemoryä¸­æ‰§è¡Œç”³è¯·å†…å­˜åŠèµ‹å€¼è¯­å¥ p = (char ) malloc( num ); åŽæœªåˆ¤æ–­å†…å­˜æ˜¯å¦ç”³è¯·æˆåŠŸï¼Œåº”åŠ ä¸Šï¼š if ( *p == NULL ) { â€¦//è¿›è¡Œç”³è¯·å†…å­˜å¤±è´¥å¤„ç† } 17è¯•é¢˜å››ï¼šæ‰¾å‡ºä¸‹é¢ä»£ç çš„ä¸è¶³æˆ–é”™è¯¯ä¹‹å¤„12345678910111213void Test( void )&#123; char *str = (char *) malloc( 100 ); strcpy( str, &quot;hello&quot; ); free( str ); ... //çœç•¥çš„å…¶å®ƒè¯­å¥&#125; è§£ç­”ï¼š å­˜åœ¨2å¤„é—®é¢˜ï¼š è¯•é¢˜å››å­˜åœ¨ä¸Žè¯•é¢˜ä¸‰åŒæ ·çš„é—®é¢˜ï¼Œåœ¨æ‰§è¡Œchar str = (char ) malloc(100); åŽæœªè¿›è¡Œå†…å­˜æ˜¯å¦ç”³è¯·æˆåŠŸçš„åˆ¤æ–­ï¼› å¦å¤–ï¼Œåœ¨free(str)åŽæœªç½®strä¸ºç©ºï¼Œå¯¼è‡´å¯èƒ½å˜æˆä¸€ä¸ªâ€œé‡Žâ€æŒ‡é’ˆï¼Œåº”åŠ ä¸Šï¼š str = NULL; 18 åˆ¤æ–­è¾“å‡ºæ˜¯ä¹±ç  è¿˜æ˜¯å­—ç¬¦æˆ–æ˜¯å­—ç¬¦ä¸² è¿˜æ˜¯è¡¨ç¤ºåœ°å€å€¼ ï¼Ÿ å¦‚æžœæ˜¯åœ°å€å€¼å°±ç”¨0xF1247000ä»£è¡¨ .charç±»åž‹æŒ‡é’ˆçš„è¾“å‡º æ ‡å‡†åº“coutè¾“å‡ºæ—¶ï¼Œæ— æ³•åˆ¤æ–­æŒ‡é’ˆçš„ç±»åž‹ï¼Œå¦‚ä¸‹é¢ç¨‹åºæ‰€ç¤ºï¼šchar ch = â€˜aâ€™;int num = 1;char pch = &ch;int pnum = &num;std::cout&lt;&lt;pch&lt;&lt;std::endl; //è¾“å‡ºï¼šä¹±ç std::cout&lt;&lt;(void)pch&lt;&lt;std::endl; //è¾“å‡ºï¼š0xF1247000std::cout&lt;&lt;pnum&lt;&lt;std::endl;//è¾“å‡ºï¼š0xF1247004std::cout&lt;&lt;(void)pnum&lt;&lt;std::endl; //è¾“å‡ºï¼š0xF12470004 char pch2=â€Helloâ€;std::cout&lt;&lt;pch2&lt;&lt;std::endl;//è¾“å‡ºï¼šHellostd::cout&lt;&lt;(void)pch2&lt;&lt;std::endl;//è¾“å‡ºï¼š16è¿›åˆ¶åœ°å€ å¯¹äºŽå­—ç¬¦åž‹æŒ‡é’ˆï¼Œè¦ç”¨void*è¿›è¡Œç±»åž‹è½¬æ¢åŽï¼Œæ‰èƒ½è¾“å‡ºå…¶åœ°å€ï¼Œåœ°å€ä»¥16è¿›åˆ¶æ•°çš„æ ¼å¼æ˜¾ç¤º32ä½åœ°å€å€¼ã€‚è‹¥ä¸è¿›è¡Œè½¬æ¢ï¼Œcoutä¼šæŒ‰ç…§charç±»åž‹è§£æžæŒ‡é’ˆå†…å®¹ã€‚è‹¥æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œæ²¡æœ‰â€™\0â€™ç»“æŸç¬¦ï¼Œè¾“å‡ºä¹±ç ï¼›è‹¥æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™è¾“å‡ºå­—ç¬¦ä¸²å†…å®¹ã€‚ é™¤äº†å­—ç¬¦æŒ‡é’ˆï¼Œå…¶ä»–æŒ‡é’ˆéƒ½å¯ä»¥ç›´æŽ¥ç”¨coutè¯­å¥æ¥è¾“å‡ºåœ°å€å€¼ã€‚æ— é¡»è¿›è¡ŒæŒ‡é’ˆç±»åž‹è½¬æ¢ã€‚ 19 æŒ‡é’ˆä¸Žå¼•ç”¨çš„åŒºåˆ«ï¼Ÿ ç­”æ¡ˆï¼š ï¼ˆ1ï¼‰éžç©ºåŒºåˆ«ã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸èƒ½ä½¿ç”¨æŒ‡å‘ç©ºå€¼çš„å¼•ç”¨ã€‚å› æ­¤å¦‚æžœä½ ä½¿ç”¨ä¸€ä¸ªå˜é‡å¹¶è®©å®ƒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯è¯¥å˜é‡åœ¨æŸäº›æ—¶å€™ä¹Ÿå¯èƒ½ä¸æŒ‡å‘ä»»ä½•å¯¹è±¡ï¼Œè¿™æ—¶ä½ åº”è¯¥æŠŠå˜é‡å£°æ˜Žä¸ºæŒ‡é’ˆï¼Œå› ä¸ºè¿™æ ·ä½ å¯ä»¥èµ‹ç©ºå€¼ç»™è¯¥å˜é‡ã€‚ç›¸åï¼Œå¦‚æžœå˜é‡è‚¯å®šæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œä¾‹å¦‚ä½ çš„è®¾è®¡ä¸å…è®¸å˜é‡ä¸ºç©ºï¼Œè¿™æ—¶ä½ å°±å¯ä»¥æŠŠå˜é‡å£°æ˜Žä¸ºå¼•ç”¨ã€‚ä¸å­˜åœ¨æŒ‡å‘ç©ºå€¼çš„å¼•ç”¨è¿™ä¸ªäº‹å®žæ„å‘³ç€ä½¿ç”¨å¼•ç”¨çš„ä»£ç æ•ˆçŽ‡æ¯”ä½¿ç”¨æŒ‡é’ˆè¦é«˜ã€‚ ï¼ˆ2ï¼‰åˆæ³•æ€§åŒºåˆ«ã€‚åœ¨ä½¿ç”¨å¼•ç”¨ä¹‹å‰ä¸éœ€è¦æµ‹è¯•å®ƒçš„åˆæ³•æ€§ã€‚ç›¸åï¼ŒæŒ‡é’ˆåˆ™åº”è¯¥æ€»æ˜¯è¢«æµ‹è¯•ï¼Œé˜²æ­¢å…¶ä¸ºç©ºã€‚ ï¼ˆ3ï¼‰å¯ä¿®æ”¹åŒºåˆ«ã€‚æŒ‡é’ˆä¸Žå¼•ç”¨çš„å¦ä¸€ä¸ªé‡è¦çš„åŒºåˆ«æ˜¯æŒ‡é’ˆå¯ä»¥è¢«é‡æ–°èµ‹å€¼ä»¥æŒ‡å‘å¦ä¸€ä¸ªä¸åŒå¯¹è±¡ã€‚ä½†æ˜¯å¼•ç”¨åˆ™æ€»æ˜¯æŒ‡å‘åœ¨åˆå§‹åŒ–æ—¶è¢«æŒ‡å®šçš„å¯¹è±¡ï¼Œä»¥åŽä¸èƒ½æ”¹å˜ï¼Œä½†æ˜¯æŒ‡å®šçš„å¯¹è±¡å…¶å†…å®¹å¯ä»¥æ”¹å˜ã€‚ æ€è·¯ï¼š é‡åˆ°æ¬¡ç±»åž‹çš„é¢˜ç›® ä¸€å®šè¦æƒ³æƒ³ä»–ä»¬çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆ æŠ“ä½ç‰¹ç‚¹è¿›è¡Œåˆ†æž æƒ³æƒ³ä»–ä»¬çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆ è¿›è¡Œæ¯”è¾ƒ 20ï¼š ä¸‹é¢5ä¸ªå‡½æ•°å“ªä¸ªèƒ½æˆåŠŸè¿›è¡Œä¸¤ä¸ªæ•°çš„äº¤æ¢ï¼Ÿ #includeusing namespace std; void swap1(int p,int q){ int temp; temp=p; p=q; q=temp;} void swap2(int p,int q){ int temp; temp=p; p=q; q=*temp;} void swap3(int p,int q){ int *temp; temp=p; p=q; q=temp;} void swap4(int p,int q){ int temp; temp=p; p=q; q=temp;} void swap5(int &amp;p,int &amp;q){ int temp; temp=p; p=q; q=temp;} int main (){ int a=1,b=2; //swap1(a,b); //swap2(&amp;a,&amp;b); //swap3(&amp;a,&amp;b); //swap4(&amp;a,&amp;b); //swap5(a,b); cout &lt;&lt; â€œa:â€&lt;&lt; a &lt;&lt;endl; cout &lt;&lt; â€œb:â€&lt;&lt; b &lt;&lt;endl; return 0; } è§£æžï¼šè¿™é“é¢˜è€ƒå¯Ÿçš„æ˜¯å‚æ•°ä¼ é€’ã€å€¼ä¼ é€’ã€æŒ‡é’ˆä¼ é€’ï¼ˆåœ°å€ä¼ é€’ï¼‰å’Œå¼•ç”¨ä¼ é€’ã€‚ swap1ä¼ é€’çš„æ˜¯å€¼çš„å‰¯æœ¬ï¼Œåœ¨å‡½æ•°ä¸­åªæ˜¯ä¿®æ”¹äº†å½¢å‚pã€qï¼ˆå®žé™…æ˜¯aã€bçš„ä¸€ä¸ªæ‹·è´ï¼‰ï¼Œpã€qçš„å€¼ç¡®å®žäº¤æ¢äº†ï¼Œä½†æ˜¯å®ƒä»¬æ˜¯å±€éƒ¨å˜é‡ï¼Œä¸ä¼šå½±å“åˆ°ä¸»å‡½æ•°aå’Œ b ã€‚å½“å‡½æ•°swap1ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼Œpã€qæ‰€åœ¨çš„æ ˆä¹Ÿå°±è¢«åˆ é™¤äº†ã€‚ swap2ä¼ é€’çš„æ˜¯ä¸€ä¸ªåœ°å€è¿›åŽ»ï¼Œåœ¨å‡½æ•°ä½“å†…çš„å½¢å‚*pã€*qæ˜¯æŒ‡å‘å®žé™…çš„å‚æ•°aã€båœ°å€çš„ä¸¤ä¸ªæŒ‡é’ˆã€‚ è¿™é‡Œè¦æ³¨æ„ï¼š int *temp; *temp=*p; æ˜¯ä¸ç¬¦åˆé€»è¾‘çš„ï¼Œint *tempæ–°å»ºäº†ä¸€ä¸ªæŒ‡é’ˆï¼ˆä½†æ˜¯æ²¡åˆ†é…å†…å­˜ï¼‰ã€‚*temp=*pä¸æ˜¯æŒ‡å‘è€Œæ˜¯æ‹·è´ã€‚æŠŠ*pæ‰€æŒ‡å‘çš„å†…å­˜çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯a çš„å€¼ï¼‰æ‹·è´åˆ°*tempæ‰€æŒ‡å‘å†…å­˜é‡Œäº†ã€‚ä½†æ˜¯int *tempä¸æ˜¯ä¸åˆ†é…å†…å­˜å—ï¼Ÿçš„ç¡®ä¸åˆ†é…ï¼ŒäºŽæ˜¯ç³»ç»Ÿåœ¨æ‹·è´æ—¶ä¸´æ—¶ç»™äº†ä¸€ä¸ªéšæœºåœ°å€ï¼Œè®©å®ƒå­˜å€¼ã€‚åˆ†é…çš„éšæœºåœ°å€æ˜¯ä¸ªâ€œæ„å¤–â€ï¼Œä¸”å‡½æ•°ç»“æŸåŽä¸å›žæ”¶ï¼Œé€ æˆå†…å­˜æ³„æ¼ã€‚ swap3ä¼ é€’çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œåœ¨å‡½æ•°ä½“å†…çš„å‚æ•°*pã€*qæ˜¯æŒ‡å‘å®žé™…å‚æ•°aã€båœ°å€çš„ä¸¤ä¸ªæŒ‡é’ˆã€‚ è¿™é‡Œè¦æ³¨æ„ï¼š int *temp; temp=p; int *tempæ–°å»ºäº†ä¸€ä¸ªæŒ‡é’ˆï¼ˆä½†æ˜¯æ²¡åˆ†é…å†…å­˜ï¼‰ã€‚temp=pæ˜¯æŒ‡å‘è€Œä¸æ˜¯æ‹·è´ã€‚tempæŒ‡å‘äº†*pæ‰€æŒ‡å‘çš„åœ°å€ï¼ˆä¹Ÿå°±æ˜¯a ï¼‰ã€‚è€Œä»£ç ï¼š int *temp; q=temp; ä½†æ˜¯å‡½æ•°swap3ä¸èƒ½å®žçŽ°ä¸¤æ•°çš„äº¤æ¢ï¼Œè¿™æ˜¯å› ä¸ºå‡½æ•°ä½“å†…åªæ˜¯æŒ‡é’ˆçš„å˜åŒ–ï¼Œè€Œå¯¹åœ°å€ä¸­çš„å€¼å´æ²¡æœ‰å˜åŒ–ã€‚ swap4å¯ä»¥å®žçŽ°ä¸¤æ•°çš„äº¤æ¢ï¼Œå› ä¸ºå®ƒä¿®æ”¹çš„æ˜¯æŒ‡é’ˆæ‰€æŒ‡å‘åœ°å€ä¸­çš„å€¼ã€‚ swap5å‡½æ•°ä¸Žswap4ç›¸ä¼¼ï¼Œæ˜¯ä¸€ä¸ªå¼•ç”¨ä¼ é€’ï¼Œä¿®æ”¹çš„ç»“æžœç›´æŽ¥å½±å“å®žå‚ã€‚ ç­”æ¡ˆï¼š swap4 å‡½æ•°å’Œ swap5 å‡½æ•°ã€‚ 21ã€è¿™ä¸ªå‡½æ•°æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿè¯¥å¦‚ä½•ä¿®æ”¹ï¼Ÿ char *strA(){ charstr[] =â€hello worldâ€; returnstr;} è§£æžï¼šè¿™ä¸ªstré‡Œå­˜åœ¨çš„åœ°å€æ˜¯å‡½æ•°strAæ ˆé‡Œâ€œhello worldâ€çš„é¦–åœ°å€ã€‚å‡½æ•°è°ƒç”¨å®Œæˆï¼Œæ ˆå¸§æ¢å¤è°ƒç”¨strAä¹‹å‰çš„çŠ¶æ€ï¼Œä¸´æ—¶ç©ºé—´è¢«é‡ç½®ï¼Œå †æ ˆâ€œå›žç¼©â€ï¼ŒstrAæ ˆå¸§ä¸å†å±žäºŽåº”è¯¥è®¿é—®çš„èŒƒå›´ã€‚è¿™æ®µç¨‹åºå¯ä»¥æ­£ç¡®è¾“å‡ºç»“æžœï¼Œä½†æ˜¯è¿™ç§è®¿é—®æ–¹æ³•è¿èƒŒäº†å‡½æ•°çš„æ ˆå¸§æœºåˆ¶ã€‚ ä½†æ˜¯åªè¦å¦å¤–ä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„è¯ï¼Œä½ å°±ä¼šå‘çŽ°ï¼Œè¿™ç§æ–¹å¼çš„ä¸åˆç†åŠå±é™©æ€§ã€‚ å¦‚æžœæƒ³èŽ·å¾—æ­£ç¡®çš„å‡½æ•°ï¼Œæ”¹æˆä¸‹é¢è¿™æ ·å°±å¯ä»¥ï¼š char strA(){ charstr =â€hello worldâ€; returnstr;} é¦–å…ˆè¦æžæ¸…æ¥šchar *str å’Œ char str[] ï¼š 1char str[] = â€œhello worldâ€;æ˜¯åˆ†é…ä¸€ä¸ªå±€éƒ¨æ•°ç»„ã€‚å±€éƒ¨æ•°ç»„æ˜¯å±€éƒ¨å˜é‡ï¼Œå®ƒæ‰€å¯¹åº”çš„æ˜¯å†…å­˜ä¸­çš„æ ˆã€‚å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸç»“æŸåŽè¯¥å˜é‡ä¸å­˜åœ¨äº†ã€‚ 1char *str = â€œhello worldâ€; æ˜¯æŒ‡å‘äº†å¸¸é‡åŒºçš„å­—ç¬¦ä¸²ï¼Œä½äºŽé™æ€å­˜å‚¨åŒºï¼Œå®ƒåœ¨ç¨‹åºç”Ÿå‘½æœŸå†…æ’å®šä¸å˜ï¼Œæ‰€ä»¥å­—ç¬¦ä¸²è¿˜åœ¨ã€‚æ— è®ºä»€ä¹ˆæ—¶å€™è°ƒç”¨ strAï¼Œå®ƒè¿”å›žçš„å§‹ç»ˆæ˜¯åŒä¸€ä¸ªâ€œåªè¯»â€çš„å†…å­˜å—ã€‚ å¦å¤–æƒ³è¦ä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥è¿™æ ·ï¼š char *strA(){ staticcharstr[] =â€hello worldâ€; returnstr;} é€šè¿‡staticå¼€è¾Ÿä¸€æ®µé™æ€å­˜è´®ç©ºé—´ã€‚ ç­”æ¡ˆï¼š å› ä¸ºè¿™ä¸ªå‡½æ•°è¿”å›žçš„æ˜¯å±€éƒ¨å˜é‡çš„åœ°å€ï¼Œå½“è°ƒç”¨è¿™ä¸ªå‡½æ•°åŽï¼Œè¿™ä¸ªå±€éƒ¨å˜é‡strå°±é‡Šæ”¾äº†ï¼Œæ‰€ä»¥è¿”å›žçš„ç»“æžœæ˜¯ä¸ç¡®å®šçš„ä¸”ä¸å®‰å…¨ï¼Œéšæ—¶éƒ½æœ‰è¢«æ”¶å›žçš„å¯èƒ½ã€‚ 22 int arr[] = {1,2,3,4,5,6,7,8};int p=arr; (p++)+=123;printf(â€œ%d,%d\nâ€, p,(++p));ç¬¬ä¸€è¡Œï¼Œå®šä¹‰æ•°ç»„arrï¼Œå…ƒç´ å…±å…«ä¸ªç¬¬äºŒè¡Œï¼Œå®šä¹‰æŒ‡é’ˆpæŒ‡å‘arræ•°ç»„æ­¤æ—¶çš„pè¿˜æ˜¯ç­‰äºŽarræ•°ç»„çš„ç¬¬0ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯1ç¬¬ä¸‰è¡Œï¼Œp++é‡Œçš„++æ˜¯æœ€åŽæ‰è¿ç®—ï¼Œæ‰€ä»¥å…ˆæ‰§è¡Œp+=123ï¼Œä¹Ÿå°±æ˜¯arrçš„ç¬¬0ä¸ªå…ƒç´ è¢«èµ‹å€¼ä¸º123æ­¤æ—¶arrå˜æˆ{123,2,3,4,5,6,7,8} ï¼Œç„¶åŽæ˜¯p++ï¼Œæ­¤æ—¶på·²ç»æ˜¯ç­‰äºŽarrçš„ç¬¬1ä¸ªå…ƒç´ äº†ï¼Œä¹Ÿå°±æ˜¯2ç¬¬å››è¡Œï¼Œåœ¨æ‰§è¡Œprintfæ—¶ï¼Œæ‹¬å·é‡Œçš„å‚æ•°æ˜¯ä»Žå³å¾€å·¦çš„é¡ºåºè¿›è¡Œè¯»å–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å…ˆæ‰§è¡Œ (++p)ï¼Œä¹Ÿå°±æ˜¯på…ˆåŠ ä¸€å†æŒ‡é’ˆï¼ŒæŒ‡å‘çš„æ˜¯arrç¬¬2ä¸ªå…ƒç´ 3ï¼Œç„¶åŽåœ¨æ‰§è¡Œ*pï¼Œè¿˜æ˜¯3æœ€åŽæ˜¾ç¤ºçš„å†…å®¹å°±æ˜¯3,3]]></content>
  </entry>
  <entry>
    <title><![CDATA[ç®—æ³•é¢˜æ”¶é›†]]></title>
    <url>%2F2015%2F07%2F06%2F%E7%AE%97%E6%B3%95%E9%A2%98%E6%94%B6%E9%9B%86%2F</url>
    <content type="text"><![CDATA[åœ¨çº¿è¿è¡Œä»£ç æµ‹è¯• æµ‹è¯•1 æµ‹è¯•2 æµ‹è¯•3 å­—ç¬¦ä¸²åè½¬ é“¾è¡¨åè½¬ æœ‰åºæ•°ç»„åˆå¹¶ Hashç®—æ³• æŸ¥æ‰¾ä¸¤ä¸ªå­è§†å›¾ ä¸­ä½æ•° å­—ç¬¦ä¸²å­—ç¬¦ä¸²åè½¬12345678string reverseString(string s) &#123;//åè½¬å­—ç¬¦ä¸² for (int i = 0;i &lt; (s.size() + 1) / 2;i++) &#123; char temp = s[i]; s[i] = s[s.size()-i-1]; s[s.size()-i-1] = temp; &#125; return s;&#125; å­—ç¬¦ä¸²å”¯ä¸€å­—ç¬¦ï¼Œå‡è®¾åªæœ‰å°å†™å­—æ¯1234567891011121314151617int firstUniqChar(string s) &#123;//å­—ç¬¦ä¸²å”¯ä¸€å­—ç¬¦ï¼Œå‡è®¾åªæœ‰å°å†™å­—æ¯ int code[26] = &#123;0&#125;; for (int i = 0;i &lt; s.size();i++) &#123; char letter = s[i]; code[letter - &apos;a&apos;] ++; // cout &lt;&lt; code[0] &lt;&lt; &quot;++++&quot; &lt;&lt; code[letter - &apos;a&apos;] &lt;&lt; &quot;***&quot; &lt;&lt; letter - &apos;a&apos; &lt;&lt; letter &lt;&lt; endl; &#125; for (int i = 0;i &lt; s.size();i++) &#123; char letter = s[i]; // cout &lt;&lt; code[letter - &apos;a&apos;] &lt;&lt; &quot; code &quot; &lt;&lt; letter &lt;&lt; endl; if (code[letter - &apos;a&apos;] == 1) &#123; return i; &#125; &#125; return -1;&#125; å­—ç¬¦ä¸²å”¯ä¸€å­—ç¬¦ï¼Œå•¥å­—æ¯éƒ½æœ‰123456789101112131415161718192021222324252627282930313233char findFirstChar(char* cha)&#123; char result = &apos;\0&apos;; // å®šä¹‰ä¸€ä¸ªæ•°ç»„ ç”¨æ¥å­˜å‚¨å„ä¸ªå­—æ¯å‡ºçŽ°æ¬¡æ•° int array[256]; // å¯¹æ•°ç»„è¿›è¡Œåˆå§‹åŒ–æ“ä½œ for (int i=0; i&lt;256; i++) &#123; array[i] =0; &#125; // å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆ æŒ‡å‘å½“å‰å­—ç¬¦ä¸²å¤´éƒ¨ char* p = cha; // éåŽ†æ¯ä¸ªå­—ç¬¦ while (*p != &apos;\0&apos;) &#123; // åœ¨å­—æ¯å¯¹åº”å­˜å‚¨ä½ç½® è¿›è¡Œå‡ºçŽ°æ¬¡æ•°+1æ“ä½œ array[*(p++)]++; &#125; // å°†PæŒ‡é’ˆé‡æ–°æŒ‡å‘å­—ç¬¦ä¸²å¤´éƒ¨ p = cha; // éåŽ†æ¯ä¸ªå­—æ¯çš„å‡ºçŽ°æ¬¡æ•° while (*p != &apos;\0&apos;) &#123; // é‡åˆ°ç¬¬ä¸€ä¸ªå‡ºçŽ°æ¬¡æ•°ä¸º1çš„å­—ç¬¦ï¼Œæ‰“å°ç»“æžœ if (array[*p] == 1) &#123; result = *p; break; &#125; // åä¹‹ç»§ç»­å‘åŽéåŽ† p++; &#125; return result;&#125; é“¾è¡¨å¢žåŠ èŠ‚ç‚¹123456void insertNode(Node *p,int i) &#123; //å¢žåŠ èŠ‚ç‚¹ Node *node = new Node; p-&gt;next = node; node-&gt;value = i; node-&gt;next = p-&gt;next;&#125; åˆ é™¤èŠ‚ç‚¹1234void deleteNode(Node *p) &#123; //åˆ é™¤èŠ‚ç‚¹ï¼Œå› ä¸ºä¸çŸ¥é“ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥åªèƒ½ç”¨ä¸‹ä¸€ä¸ªèŠ‚ç‚¹è¦†ç›–è‡ªå·± p-&gt;next = p-&gt;next-&gt;next; p-&gt;value = p-&gt;next-&gt;value;&#125; å¯»æ‰¾ä¸­é—´èŠ‚ç‚¹ç”¨slowå’ŒfastæŒ‡é’ˆæ ‡è®°ï¼Œslowæ¯æ¬¡èµ°ä¸€æ­¥ï¼Œfastæ¯æ¬¡èµ°ä¸¤æ­¥ï¼Œå½“faståˆ°å°¾èŠ‚ç‚¹æ—¶ï¼Œslowå°±ç›¸å½“äºŽæ€»é•¿åº¦çš„ä¸€åŠï¼Œå³åœ¨ä¸­é—´èŠ‚ç‚¹ã€‚ 123456789Node* findMidNode(Node* head)&#123;//æ‰¾å‡ºä¸­é—´èŠ‚ç‚¹ Node* slow = head; Node* fast = head; while (fast-&gt;next != 0&amp;&amp;fast-&gt;next-&gt;next!=0) &#123; slow = slow-&gt;next; fast = fast-&gt;next-&gt;next; &#125; return slow;&#125; æ‰¾å‡ºå€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹//ç”¨slowå’ŒfastæŒ‡é’ˆæ ‡è®°,fastæŒ‡é’ˆäº‹å…ˆèµ°kæ­¥ï¼Œç„¶åŽslowå’ŒfaståŒæ—¶èµ°ï¼Œå½“faståˆ°è¾¾æœ«èŠ‚ç‚¹æ—¶ï¼Œslowåœ¨fastçš„å‰kä¸ªèŠ‚ç‚¹ï¼Œå³ä¸ºå€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹ã€‚ 123456789101112131415161718192021222324252627282930ListNode* FindKthFromTail(ListNode* pListHead,int k)&#123; if (pListHead == NULL || k == 0) //é˜²æ­¢ç©ºçš„é“¾è¡¨ å’Œ kå€¼ ç­‰äºŽ 0 çš„æƒ…å†µ &#123; return NULL; &#125; ListNode* pAhead = pListHead; ListNode* pBehind = NULL; for (int i = 0; i &lt; k-1; i++) &#123; if (pAhead-&gt;next != NULL) &#123; pAhead = pAhead-&gt;next; &#125; else &#123; return NULL; &#125; &#125; pBehind = pListHead; while(pAhead-&gt;next != NULL) &#123; pAhead = pAhead-&gt;next; pBehind = pBehind-&gt;next; &#125; return pBehind;&#125; é“¾è¡¨åè½¬12345678910111213141516171819ListNode* reverseLinkedList3(ListNode* head)&#123; if(NULL==head|| NULL==head-&gt;next) return head; //å°‘äºŽä¸¤ä¸ªèŠ‚ç‚¹æ²¡æœ‰åè½¬çš„å¿…è¦ã€‚ ListNode* p; ListNode* q; ListNode* r; p = head; q = head-&gt;next; head-&gt;next = NULL; //æ—§çš„å¤´æŒ‡é’ˆæ˜¯æ–°çš„å°¾æŒ‡é’ˆï¼Œnextéœ€è¦æŒ‡å‘NULL while(q)&#123; r = q-&gt;next; //å…ˆä¿ç•™ä¸‹ä¸€ä¸ªstepè¦å¤„ç†çš„æŒ‡é’ˆ q-&gt;next = p; //ç„¶åŽp qäº¤æ›¿å·¥ä½œè¿›è¡Œåå‘ p = q; q = r; &#125; head=p; // æœ€åŽqå¿…ç„¶æŒ‡å‘NULLï¼Œæ‰€ä»¥è¿”å›žäº†pä½œä¸ºæ–°çš„å¤´æŒ‡é’ˆ return head;&#125; æœ‰åºå•é“¾è¡¨åˆå¹¶æ•°ç»„æœ‰åºæ•°ç»„åˆå¹¶123456789101112131415161718192021222324252627282930313233343536373839void mergeList(int a[], int aLen, int b[], int bLen, int result[])//æœ‰åºæ•°ç»„åˆå¹¶&#123; int p = 0; // éåŽ†æ•°ç»„açš„æŒ‡é’ˆ int q = 0; // éåŽ†æ•°ç»„bçš„æŒ‡é’ˆ int i = 0; // è®°å½•å½“å‰å­˜å‚¨ä½ç½® // ä»»ä¸€æ•°ç»„æ²¡æœ‰åˆ°è¾¾è¾¹ç•Œåˆ™è¿›è¡ŒéåŽ† while (p &lt; aLen &amp;&amp; q &lt; bLen) &#123; // å¦‚æžœaæ•°ç»„å¯¹åº”ä½ç½®çš„å€¼å°äºŽbæ•°ç»„å¯¹åº”ä½ç½®çš„å€¼ if (a[p] &lt;= b[q]) &#123; // å­˜å‚¨aæ•°ç»„çš„å€¼ result[i] = a[p]; // ç§»åŠ¨aæ•°ç»„çš„éåŽ†æŒ‡é’ˆ p++; &#125; else&#123; // å­˜å‚¨bæ•°ç»„çš„å€¼ result[i] = b[q]; // ç§»åŠ¨bæ•°ç»„çš„éåŽ†æŒ‡é’ˆ q++; &#125; // æŒ‡å‘åˆå¹¶ç»“æžœçš„ä¸‹ä¸€ä¸ªå­˜å‚¨ä½ç½® i++; &#125; // å¦‚æžœaæ•°ç»„æœ‰å‰©ä½™ while (p &lt; aLen) &#123; // å°†aæ•°ç»„å‰©ä½™éƒ¨åˆ†æ‹¼æŽ¥åˆ°åˆå¹¶ç»“æžœçš„åŽé¢ result[i] = a[p++]; i++; &#125; // å¦‚æžœbæ•°ç»„æœ‰å‰©ä½™ while (q &lt; bLen) &#123; // å°†bæ•°ç»„å‰©ä½™éƒ¨åˆ†æ‹¼æŽ¥åˆ°åˆå¹¶ç»“æžœçš„åŽé¢ result[i] = b[q++]; i++; &#125;&#125; æ— åºæ•°ç»„ä¸­ä½æ•°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364//æ±‚ä¸€ä¸ªæ— åºæ•°ç»„çš„ä¸­ä½æ•°int PartSort(int a[], int start, int end)&#123; int low = start; int high = end; //é€‰å–å…³é”®å­— int key = a[end]; while (low &lt; high) &#123; //å·¦è¾¹æ‰¾æ¯”keyå¤§çš„å€¼ while (low &lt; high &amp;&amp; a[low] &lt;= key) &#123; ++low; &#125; //å³è¾¹æ‰¾æ¯”keyå°çš„å€¼ while (low &lt; high &amp;&amp; a[high] &gt;= key) &#123; --high; &#125; if (low &lt; high) &#123; //æ‰¾åˆ°ä¹‹åŽäº¤æ¢å·¦å³çš„å€¼ int temp = a[low]; a[low] = a[high]; a[high] = temp; &#125; &#125; int temp = a[high]; a[high] = a[end]; a[end] = temp; return low;&#125;int findMedian(int a[], int aLen)&#123; int low = 0; int high = aLen - 1; int mid = (aLen - 1) / 2; int div = PartSort(a, low, high); while (div != mid) &#123; if (mid &lt; div) &#123; //å·¦åŠåŒºé—´æ‰¾ div = PartSort(a, low, div - 1); &#125; else &#123; //å³åŠåŒºé—´æ‰¾ div = PartSort(a, div + 1, high); &#125; &#125; //æ‰¾åˆ°äº† return a[mid];&#125; å¤§æ•°æ±‚å’Œ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt; /************************************************************************//* åŠŸèƒ½ï¼šå®žçŽ°ä¸¤ä¸ªè¶…å¤§æ•°ç›¸åŠ /* å‚æ•°ï¼šsource1 -- è¢«åŠ æ•°ï¼Œå­—ç¬¦åž‹æ•°ç»„,å¦‚12/* source2 -- åŠ æ•°ï¼Œå­—ç¬¦åž‹æ•°ç»„,/* result -- å­˜æ”¾å’Œï¼Œå­—ç¬¦åž‹æ•°ç»„/************************************************************************/void Add(char *source1, char *source2, char *result)&#123; int len1 = strlen(source1); int len2 = strlen(source2); int len = len1 &gt;= len2 ? len1 : len2; int i = len1 - 1, j = len2 - 1, k = 0; char *temp = (char *)malloc(sizeof(char) * (len + 2)); char x, y, z; int carryBit = 0; while (i &gt;= 0 || j &gt;= 0) &#123; if (i &lt; 0) x = &apos;0&apos;; else x = source1[i]; if (j &lt; 0) y = &apos;0&apos;; else y = source2[j]; z = x + y - &apos;0&apos; - &apos;0&apos; + carryBit; temp[k++] = z % 10 + &apos;0&apos;; carryBit = z / 10; i--; j--; &#125; while (carryBit) &#123; temp[k++] = carryBit % 10 + &apos;0&apos;; carryBit /= 10; &#125; for (--k, i = 0; k &gt;= 0; k--, i++) &#123; result[i] = temp[k]; &#125; result[i] = &apos;\0&apos;; free(temp);// é‡Šæ”¾å†…å­˜&#125; int main()&#123; char source1[1000]; char source2[1000]; char result[1100]; scanf(&quot;%s%s&quot;, source1, source2); Add(source1, source2, result); printf(&quot;%s\n&quot;, result); return 0; TopKé—®é¢˜TopKé—®é¢˜æœ€å°å † æ€è·¯ ç½—åˆ—åè½¬é“¾è¡¨ äºŒåˆ†æŸ¥æ‰¾æ³• å†’æ³¡æŽ’åº äºŒåˆ†æ³• æ•°æ®ç»“æž„ï¼ˆé“¾è¡¨ã€äºŒå‰æ ‘ã€ç®—æ³•æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦ï¼‰ ä»€ä¹ˆæ˜¯äºŒå‰æœç´¢æ ‘ï¼Ÿæ—¶é—´å¤æ‚åº¦æ˜¯ä»€ä¹ˆï¼Ÿ é‡‡ç”¨äºŒå‰æ ‘é“¾è¡¨ä½œä¸ºå­˜å‚¨ç»“æž„ï¼Œæ¯ä¸ªå·¦èŠ‚ç‚¹å‡å°äºŽçˆ¶èŠ‚ç‚¹ï¼Œæ¯ä¸ªå³èŠ‚ç‚¹å‡å¤§äºŽçˆ¶èŠ‚ç‚¹ O(log2(n)) T9ç®—æ³•å¦‚ä½•å®žçŽ°, å…¨æ‹¼ç®—æ³• æœ€çŸ­è·¯å¾„ç®—æ³• å¼ºè¿žé€šé‡ç®—æ³• å®žçŽ°è¿žè¿žçœ‹ç®—æ³• å¦‚ä½•å®žçŽ°ä¸€ä¸ªæ•°ç»„æ¯ä¸ªå…ƒç´ ä¾æ¬¡å‘å³ç§»åŠ¨kä½ã€‚(åŽå¤´çš„å¾€å‰é¢è¡¥) æ¯”å¦‚: [1, 2, 3, 4, 5] æŒªä¸¤ä½å˜æˆ[4, 5, 1, 2, 3] æ±‚ä¸¤ä¸ªæ•´æ•°çš„æœ€å¤§å…¬çº¦æ•° å¾®ä¿¡ç”¨æˆ·éƒ½æ˜¯åŒå‘çš„å¥½å‹ï¼Œaæ˜¯bçš„å¥½å‹ï¼Œé‚£ä¹ˆbä¸€å®šæ˜¯açš„ã€‚ç»™å®šä¸€ä¸ªç”¨æˆ·åˆ—è¡¨ï¼Œæœ‰äº›ç”¨æˆ·æ˜¯å¥½å‹ï¼Œæœ‰äº›ä¸æ˜¯ï¼Œè¯·åˆ¤æ–­ï¼Œè¿™äº›ç”¨æˆ·æ˜¯å¦å¯ä»¥åˆ’åˆ†ä¸ºä¸¤ç»„ï¼Œæ¯ç»„å†…çš„ç”¨ æˆ·ï¼Œäº’ç›¸éƒ½ä¸æ˜¯å¥½å‹ã€‚å¦‚æžœèƒ½ï¼Œè¯·ç»™å‡ºè¿™ä¸ªåˆ’åˆ† ç®—æ³•é¢˜ï¼šè¯´ é¢„çº¦ä¼šè®®å®¤ï¼Œä¼šæœ‰nä¸ªå›¢é˜Ÿé¢„çº¦å½“å¤©ä¼šè®®å®¤ï¼Œæ—¶é—´å„ä¸ç›¸åŒï¼Œæ±‚æœ€å°‘éœ€è¦å‡ ä¸ªä¼šè®®å®¤ã€‚æ¯”å¦‚ï¼š1é¢„çº¦çš„æ—¶é—´æ˜¯[9-11], 2é¢„çº¦çš„æ—¶é—´æ˜¯[10-12], 3é¢„çº¦çš„æ—¶é—´æ˜¯[12-14], æ­¤æ—¶ä¼šè®®æœ€å°ä¸ªæ•°æ˜¯2ä¸ª 1ã€å°±nçš„é˜¶ä¹˜ã€‚ï¼ˆè¿™é‡Œåªæ˜¯ç”¨äºŽå°æ•°ï¼Œå¤§æ•°ä¼šè¶Šç•Œï¼‰ æ€è·¯ï¼šè¿™é‡Œé¢ç”¨é€’å½’å®žçŽ° #include int getNJ(int n) { || n==) { ; } );}int main() { printf()); ;}è¿è¡Œç»“æžœå¦‚ä¸‹ï¼š 2ã€åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯ipã€‚ æ€è·¯ï¼šå…ˆå°†å­—ç¬¦ä¸²åˆ†å‰²åˆ°ä¸¤ä¸ªæ•°ç»„é‡Œé¢ï¼ˆä¸€ä¸ªæ•°å­—æ•°ç»„ï¼Œä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼‰ï¼Œç„¶åŽåˆ¤æ–­æ•°å­—æ•°ç»„å†…å®¹æ˜¯å¦æ»¡è¶³ipæ¡ä»¶ï¼Œå­—ç¬¦æ•°ç»„é‡Œé¢æ˜¯å¦æ˜¯â€.â€ã€‚è¿™é‡Œé¢ä¸»è¦ç”¨äº†sscanfå‡½æ•°ã€‚ä»£ç å¦‚ä¸‹ï¼š #include int checkIP(const char *p) { ]; ]; ],&amp;c[],&amp;n[],&amp;c[],&amp;n[],&amp;c[],&amp;n[],&amp;c[])==) { int i; ;i&lt;;i++) { if(c[i]!=â€™.â€™) { ; } } ;i&lt;;i++) { ||n[i]&lt;) { ; } } ; }else { ; } } int main() { const char x[] = { â€œ132.168.1.1â€, â€œ10.0.0.1.â€, â€œ127.256.0.1â€, â€œiudfdsfdasfdafâ€, â€œ172.16,2.1â€ }; const char m[] = { â€œä¸æ˜¯åˆæ³•çš„IPåœ°å€â€, â€œæ˜¯åˆæ³•çš„IPåœ°å€â€ }; ; ) { printf(â€œ%s %s\nâ€,x[i],m[checkIP(x[i])]); i++; } ; ;}è¿è¡Œç»“æžœå¦‚ä¸‹ï¼š 132.168.1.1 æ˜¯åˆæ³•çš„IPåœ°å€10.0.0.1. ä¸æ˜¯åˆæ³•çš„IPåœ°å€127.256.0.1 ä¸æ˜¯åˆæ³•çš„IPåœ°å€iudfdsfdasfdaf ä¸æ˜¯åˆæ³•çš„IPåœ°å€172.16,2.1 ä¸æ˜¯åˆæ³•çš„IPåœ°å€3ã€äºŒåˆ†æŸ¥æ‰¾ æ€è·¯ï¼šäºŒåˆ†æŸ¥æ‰¾åˆç§°æŠ˜åŠæŸ¥æ‰¾ï¼Œå‰ææ˜¯å¾…æŸ¥æ‰¾è¡¨ä¸ºæœ‰åºè¡¨ã€‚å°†æŸ¥æ‰¾ç›®æ ‡ä¸Žæ•°ç»„ä¸­é—´çš„æ•°å¯¹æ¯”ï¼Œå¦‚æžœå¤§äºŽä¸­é—´çš„æ•°å°±åœ¨ä¸­é—´æ•°å’Œæœ€å¤§æ•°ä¹‹é—´æŸ¥æ‰¾ï¼Œå¦‚æžœå°äºŽä¸­é—´æ•°å°±åœ¨å°æ•°å’Œä¸­é—´æ•°ä¹‹é—´æŸ¥æ‰¾ã€‚ 1234567891011121314151617181920#include &lt;stdio.h&gt;int bsearchMethod(int arr[],int low,int high,int target) &#123; while (low&lt;high) &#123; ; if (arr[mid]&gt;target) &#123; high = mid-; &#125;else if(arr[mid]&lt;target)&#123; low = mid+; &#125;else &#123; return mid; &#125; &#125; ;&#125;int main(void) &#123; ,,,,,,,,,,&#125;; printf(,,)); ;&#125; è¿è¡Œç»“æžœä¸ºï¼š æŸ¥æ‰¾æ•°åœ¨æ•°ç»„ç¬¬5ä½å…¶ä¸­-1ä¸ºæŸ¥æ‰¾å¤±è´¥ å†’æ³¡æŽ’åº 123456789101112131415å†’æ³¡æŽ’åº Î¸(n^2)void bubble_sort(int a[], int n)&#123; int i, j, temp; for (j = 0; j &lt; n - 1; j++) for (i = 0; i &lt; n - 1 - j; i++) //å¤–å±‚å¾ªçŽ¯æ¯å¾ªçŽ¯ä¸€æ¬¡å°±èƒ½ç¡®å®šå‡ºä¸€ä¸ªæ³¡æ³¡ï¼ˆæœ€å¤§æˆ–è€…æœ€å°ï¼‰ï¼Œæ‰€ä»¥å†…å±‚å¾ªçŽ¯ä¸ç”¨å†è®¡ç®—å·²ç»æŽ’å¥½çš„éƒ¨åˆ† &#123; if(a[i] &gt; a[i + 1]) &#123; temp = a[i]; a[i] = a[i + 1]; a[i + 1] = temp; &#125; &#125;&#125; å¿«é€ŸæŽ’åº è°ƒç”¨æ–¹æ³• quickSort(a,0,n); Î¸(nlogn) 123456789101112131415161718192021222324252627282930313233343536void quickSort (int a[] , int low , int high)&#123; if (high &lt; low + 2) return; int start = low; int end = high; int temp; while (start &lt; end) &#123; while ( ++start &lt; high &amp;&amp; a[start] &lt;= a[low]);//æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”a[low]æ•°å€¼å¤§çš„ä½å­start while ( --end &gt; low &amp;&amp; a[end] &gt;= a[low]);//æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”a[low]æ•°å€¼å°çš„ä½å­end //è¿›è¡Œåˆ°æ­¤ï¼Œa[end] &lt; a[low] &lt; a[start],ä½†æ˜¯ç‰©ç†ä½ç½®ä¸Šè¿˜æ˜¯low &lt; start &lt; endï¼Œå› æ­¤æŽ¥ä¸‹æ¥äº¤æ¢a[start]å’Œa[end],äºŽæ˜¯[low,start]è¿™ä¸ªåŒºé—´é‡Œé¢å…¨éƒ¨æ¯”a[low]å°çš„ï¼Œ[end,hight]è¿™ä¸ªåŒºé—´é‡Œé¢å…¨éƒ¨éƒ½æ˜¯æ¯”a[low]å¤§çš„ if (start &lt; end) &#123; temp = a[start]; a[start]=a[end]; a[end]=temp; &#125; //åœ¨GCCç¼–è¯‘å™¨ä¸‹ï¼Œè¯¥å†™æ³•æ— æ³•è¾¾åˆ°äº¤æ¢çš„ç›®çš„ï¼Œa[start] ^= a[end] ^= a[start] ^= a[end];ç¼–è¯‘å™¨çš„é—®é¢˜ &#125; //è¿›è¡Œåˆ°æ­¤ï¼Œ[low,end]åŒºé—´é‡Œé¢çš„æ•°éƒ½æ¯”a[low]å°çš„,[end,higt]åŒºé—´é‡Œé¢éƒ½æ˜¯æ¯”a[low]å¤§çš„ï¼ŒæŠŠa[low]æ”¾åˆ°ä¸­é—´å³å¯ //åœ¨GCCç¼–è¯‘å™¨ä¸‹ï¼Œè¯¥å†™æ³•æ— æ³•è¾¾åˆ°äº¤æ¢çš„ç›®çš„ï¼Œa[low] ^= a[end] ^= a[low] ^= a[end];ç¼–è¯‘å™¨çš„é—®é¢˜ temp = a[low]; a[low]=a[end]; a[end]=temp; //çŽ°åœ¨å°±åˆ†æˆäº†3æ®µäº†ï¼Œç”±æœ€åˆçš„a[low]æž¢çº½åˆ†å¼€çš„ quickSort(a, low, end); quickSort(a, start, high);&#125; 4ã€100å±‚æ¥¼2ä¸ªé¸¡è›‹é—®é¢˜ï¼Ÿ æ¢ä¸ªè§’åº¦ï¼ŒæŠŠé—®é¢˜è½¬åŒ–ä¸ºä¸¤ä¸ªé¸¡è›‹å°è¯•xæ¬¡ï¼Œèƒ½æµ‹å‡ºçš„æœ€é«˜ä¸´ç•Œå±‚æ˜¯å“ªå±‚ï¼Ÿä¸ºäº†ä¿è¯ç”¨xæ¬¡æµ‹å‡ºä¸´ç•Œå±‚ï¼Œç¬¬ä¸€ä¸ªé¸¡è›‹æœ€é«˜åªèƒ½æ‰”åœ¨xå±‚ï¼Œå¦‚æžœæ²¡ç¢Žä¸‹æ¬¡ä¸Šå‡x-1å±‚ï¼Œè¿˜æ²¡ç¢Žå†ä¸Šå‡x-2å±‚ï¼Œä¸€ç›´æ²¡ç¢Žçš„è¯æœ€åŽä¸Šå‡1å±‚ã€‚å³å°è¯•xæ¬¡ï¼Œæœ€å¤šæµ‹x+(x-1)+(x-2)+â€¦+1=(x+1)x/2ã€‚å†æ¥è€ƒè™‘åŽŸé¢˜ï¼Œä¸ºäº†æµ‹åˆ°100å±‚ï¼Œå°±è¦ä½¿(x+1)x/2&gt;=100ï¼Œå³x&gt;=14ã€‚è¿™å°±è¯æ˜Žäº†è¿™ç§æ–¹æ³•æ˜¯æœ€ä¼˜è§£ã€‚ 5ã€å­—ç¬¦ä¸²åè½¬è¾“å‡ºé—®é¢˜ï¼Ÿ 6ã€çº¢é»‘æ ‘ï¼Ÿ 7ã€æ²³å·¦è¾¹æœ‰ï¼šç‹¼ã€ç¾Šã€ç™½èœï¼Œä¸€ä¸ªäººè¿‡æ²³ï¼Œä¸€æ¬¡åªèƒ½å¸¦èµ°ä¸€ä»¶ä¸œè¥¿ï¼Œæ€Žä¹ˆåšèƒ½å¤Ÿä¿è¯ä¸‰ç‰©éƒ½åˆ°æ²³å³è¾¹?è§„åˆ™ï¼ˆç‹¼åƒç¾Šã€ç¾Šåƒç™½èœï¼‰ ç­”ï¼šå…ˆæŠŠç¾Šå¸¦åˆ°å¯¹é¢ï¼Œç„¶åŽæŠŠç™½èœå¸¦åˆ°å¯¹é¢ï¼Œè¿™ä¸ªæ—¶å€™æŠŠç¾Šå¸¦èµ°ï¼ŒæŠŠç‹¼å¸¦å›žå¯¹é¢ï¼Œå›žåŽ»å†æŠŠç¾Šå¸¦å›žå¯¹é¢ã€‚ 8ã€æœ‰ä¸€å¼ åœ†å½¢çš„æ¡Œå­,ä¸¤ä¸ªäººè½®æµå¾€æ¡Œå­ä¸Šæ”¾ç¡¬å¸,å‡è®¾ä¸¤äººæœ‰æ— é™å¤šçš„å¤§å°ç›¸åŒçš„ç¡¬å¸ä¸”ä¸è€ƒè™‘æ¡Œå­çš„å¤§å°,è§„å®šç¡¬å¸ä¹‹é—´ä¸å¯ä»¥é‡å ,ä½†å¯ä»¥ç›¸äº’ç¢°ç€è¾¹,è°æœ€åŽä¸€ä¸ªæ”¾ç¡¬å¸è°å°±èµ¢,é—®è°ä¼šèµ¢,ç¬¬ä¸€ç»™æ”¾ç¡¬å¸çš„äººè¿˜æ˜¯ç¬¬äºŒä¸ª? ç­”ï¼šç¬¬ä¸€ä¸ªå‡ºçš„èµ¢ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªé¦–å…ˆçš„åšæ³•æ˜¯ï¼šæŠŠç¬¬ä¸€ä¸ªæ”¾åœ¨ä¸­å¿ƒï¼Œç„¶åŽå½“ç¬¬äºŒä¸ªäººå‡ºçš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªäººå°±å¯¹ç§°ç€æ”¾ç¡¬å¸ï¼Œç¬¬ä¸€ä¸ªäººå°±èµ¢äº†ã€‚ ä¸ç”¨ä¸­é—´å˜é‡,ç”¨ä¸¤ç§æ–¹æ³•äº¤æ¢Aå’ŒBçš„å€¼12345678910111213141516171819202122232425262728293031323334353637383940// 1.ä¸­é—´å˜é‡void swap(int a, int b) &#123;int temp = a;a = b;b = temp;&#125;// 2.åŠ æ³•void swap(int a, int b) &#123;a = a + b;b = a - b;a = a - b;&#125;// 3.å¼‚æˆ–ï¼ˆç›¸åŒä¸º0ï¼Œä¸åŒä¸º1. å¯ä»¥ç†è§£ä¸ºä¸è¿›ä½åŠ æ³•ï¼‰void swap(int a, int b) &#123;a = a ^ b;b = a ^ b;a = a ^ b;&#125; æ±‚æœ€å¤§å…¬çº¦æ•°1234567891011121314151617181920212223242526272829303132333435363738394041424344/** 1.ç›´æŽ¥éåŽ†æ³• */int maxCommonDivisor(int a, int b) &#123;int max = 0;for (int i = 1; i &lt;=b; i++) &#123;if (a % i == 0 &amp;&amp; b % i == 0) &#123;max = i;&#125;&#125;return max;&#125;/** 2.è¾—è½¬ç›¸é™¤æ³• */int maxCommonDivisor(int a, int b) &#123;int r;while(a % b &gt; 0) &#123;r = a % b;a = b;b = r;&#125;return b;&#125;// æ‰©å±•ï¼šæœ€å°å…¬å€æ•° = (a * b)/æœ€å¤§å…¬çº¦æ•°]]></content>
  </entry>
  <entry>
    <title><![CDATA[ç¬¬ä¸‰æ–¹åº“ç›¸å…³]]></title>
    <url>%2F2015%2F07%2F05%2F%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E7%9B%B8%E5%85%B3%2F</url>
    <content type="text"><![CDATA[AFNetworking SDWebImage ReactiveCocoa ä¿¡å· è®¢é˜… RACSignalâ€“&gt;RACStream AsyncDisplayKitASNodeçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥æ”¾åœ¨å­çº¿ç¨‹ é’ˆå¯¹ASNodeçš„ä¿®æ”¹å’Œæäº¤ï¼Œä¼šå¯¹å…¶è¿›è¡Œå°è£…å¹¶ä¸”æäº¤åˆ°ä¸€ä¸ªå…¨å±€å®¹å™¨ä¸­ï¼ŒASKDä¹Ÿåœ¨runloopä¸­æ³¨å†Œäº†ä¸€ä¸ªObserverï¼Œå½“Runloopè¿›å…¥ä¼‘çœ å‰ï¼ŒASDKæ‰§è¡Œè¯¥loopå†…æäº¤æ‰€æœ‰çš„ä»»åŠ¡ã€‚]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ç›¸å…³]]></title>
    <url>%2F2015%2F07%2F05%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9B%B8%E5%85%B3%2F</url>
    <content type="text"><![CDATA[1.ä»£ç†æ¨¡å¼ 2.è§‚å¯Ÿè€…æ¨¡å¼ 3.MVCæ¨¡å¼ 4.å•ä¾‹æ¨¡å¼ 5.ç­–ç•¥æ¨¡å¼ 6.å·¥åŽ‚æ¨¡å¼ è®¾è®¡æ¨¡å¼è´£ä»»é“¾:å“åº”è€…é“¾æ¡ è®¾è®¡åŽŸåˆ™å•ä¸€èŒè´£:ä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä»¶äº‹ï¼Œæ¯”å¦‚UIViewè´Ÿè´£äº‹ä»¶ï¼ŒCALayeråªè´Ÿè´£æ˜¾ç¤º å¼€é—­åŽŸåˆ™:å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾ å¯¹å±žæ€§çš„å®šä¹‰è¦å°å¿ƒï¼Œä»¥åŽæ‰©å±•è¦å°½é‡ä¸ä¿®æ”¹ç±»æœ¬èº« æŽ¥å£éš”ç¦»:ä½¿ç”¨å¾ˆå¤šä¸“é—¨åè®®ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåºžå¤§è‡ƒè‚¿çš„åè®® åè®®ä¸­çš„æ–¹æ³•å°½é‡å°‘ æ¯”å¦‚tableviewçš„datasourceå’Œdelegateä¸¤ç§åè®® ä¾èµ–å€’ç½®åŽŸåˆ™:æŠ½è±¡ä¸åº”è¯¥ä¾èµ–å…·ä½“å®žçŽ°ï¼Œå…·ä½“å®žçŽ°å¯ä»¥ä¾èµ–æŠ½è±¡ æ‰€æœ‰ä¸Šå±‚åªä¾èµ–æŽ¥å£å®šä¹‰ï¼Œå…·ä½“é‡Œè¾¹çš„å®žçŽ°æ˜¯ä¸å…³æ³¨çš„ é‡Œæ°æ›¿æ¢:çˆ¶ç±»å¯ä»¥è¢«å­ç±»æ— ç¼æ›¿æ¢ï¼Œä¸”åŽŸæœ‰åŠŸèƒ½ä¸å—å½±å“ æ¯”å¦‚KVO è¿ªç±³ç‰¹æ³•åˆ™:ä¸€ä¸ªå¯¹è±¡åº”å½“å¯¹å…¶ä»–å¯¹è±¡å°½å¯èƒ½å°‘çš„äº†è§£ è¿™æ ·å°±å¯ä»¥åšåˆ°é«˜å†…èšï¼Œä½Žè€¦åˆ è´£ä»»é“¾è°ƒæ•´nextResponderæŒ‡å‘ æ¡¥æŽ¥æ¨¡å¼è¿™ä¸ªæ˜¯ä¸€ä¸ªç‰¹åˆ«ç‰›é€¼çš„æ–¹æ³•ï¼Œä¸¾ä¸€ä¸ªå®žé™…çš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚çŽ°åœ¨æœ‰3ç§å¸ƒå±€æ ·å¼çš„cellï¼Œç„¶åŽè¿˜æœ‰3ç§æ’ä»¶ï¼ŒçŽ°åœ¨ä½ è¦åœ¨ä¸€ä¸ªtableviewç§ä»»æ„ç»„åˆè¿™å‡ ç§æƒ…å†µï¼Œå¦‚æžœæ‰€æœ‰çš„cellç±»åž‹éƒ½æš´éœ²ç»™tableviewï¼Œé‚£ä¹ˆè¿™ä¸ªé€»è¾‘å°†å¾ˆå¤æ‚ï¼Œé‚£ä¹ˆæ€Žä¹ˆåŠžå‘¢ï¼Ÿ è§£å†³åŠžæ³•æ˜¯å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»å«åšAï¼Œä»£è¡¨cellï¼Œå†å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»Bï¼Œä»£è¡¨æ’ä»¶ï¼Œæ ¹æ®ç½‘ç»œæ•°æ®å†³å®šå®žé™…åˆå§‹åŒ–Açš„æ—¶å€™åˆå§‹åŒ–å…·ä½“å“ªä¸ªå­ç±»ï¼Œä½†æ˜¯åœ¨tableviewå†™ä»£ç çš„æ—¶å€™åªéœ€è¦é¢å¯¹Aå°±å¥½äº†ï¼Œå°†å¤§å¤§å°†å°‘æŽ§åˆ¶å™¨å¯¹cellçš„å„ç§ç±»åž‹çš„ä¾èµ–ã€‚ é€‚é…å™¨ä¸€ä¸ªçŽ°æœ‰ç±»éœ€è¦é€‚åº”å˜åŒ–çš„é—®é¢˜ï¼Ÿ å¯¹è±¡é€‚é…å™¨ ç±»é€‚é…å™¨ è§£å†³åŠžæ³•æ˜¯åˆ›å»ºä¸€ä¸ªæ–°ç±»ï¼Œå¯¹åŽŸæ¥çš„ç±»è¿›è¡Œä¸€ä¸ªåŒ…è£…ï¼Œç„¶åŽæ—§å¯¹è±¡åšä¸ºä¸€ä¸ªæˆå‘˜å˜é‡ï¼ŒæŠŠä½ çš„æ–°é€»è¾‘å¢žåŠ åˆ°ä¹‹å‰çš„æ–¹æ³•è°ƒç”¨ä¹‹å‰æˆ–è€…ä¹‹åŽã€‚ 123456789101112@implementation CoolTarget- (void)request&#123; // é¢å¤–å¤„ç† [self.target operation]; // é¢å¤–å¤„ç†&#125;@end å•ä¾‹æ¨¡å¼1234567891011121314151617181920212223242526272829#import &quot;Mooc.h&quot;@implementation Mooc+ (id)sharedInstance&#123; // é™æ€å±€éƒ¨å˜é‡ static Mooc *instance = nil; // é€šè¿‡dispatch_onceæ–¹å¼ ç¡®ä¿instanceåœ¨å¤šçº¿ç¨‹çŽ¯å¢ƒä¸‹åªè¢«åˆ›å»ºä¸€æ¬¡ static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; // åˆ›å»ºå®žä¾‹ instance = [[super allocWithZone:NULL] init]; &#125;); return instance;&#125;// é‡å†™æ–¹æ³•ã€å¿…ä¸å¯å°‘ã€‘+ (id)allocWithZone:(struct _NSZone *)zone&#123; return [self sharedInstance];&#125;// é‡å†™æ–¹æ³•ã€å¿…ä¸å¯å°‘ã€‘- (id)copyWithZone:(nullable NSZone *)zone&#123; return self;&#125;@end æ³¨æ„ä¸‰ä¸ªç‚¹: é‡å†™allocWithZone é‡å†™copyWithZone è¦è°ƒç”¨super allocWithZoneï¼Œä¸ç”¨selfé˜²æ­¢å¾ªçŽ¯è°ƒç”¨ å‘½ä»¤æ¨¡å¼è¡Œä¸ºå‚æ•°åŒ– ä½œç”¨ï¼Œé™ä½Žä»£ç é‡åˆåº¦ å®žé™…ä½¿ç”¨åœºæ™¯ï¼Œè½¬å‘ï¼Œè¯„è®ºï¼Œèµžç­‰ï¼Œå¦‚æžœæ²¡æœ‰å‘½ä»¤æ¨¡å¼ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸ªé¡µé¢è¿›è¡Œç›¸å…³å¤„ç†ï¼Œå¦‚æžœè¿›è¡Œäº†è¡Œä¸ºå‚æ•°åŒ–ï¼Œé‚£ä¹ˆå°±èƒ½çœä¸‹å¾ˆå¤šä¸œè¥¿ã€‚ æˆ‘ä»¬éœ€è¦ä¸¤ä¸ªæ¨¡å—ï¼Œä¸€ä¸ªæ˜¯å‘½ä»¤ç®¡ç†è€…ï¼Œä¸€ä¸ªæ˜¯å‘½ä»¤çš„è™šæ‹Ÿç±»ï¼Œæœ€åŽæ˜¯å¾ˆå¤šå‘½ä»¤çš„å…·ä½“å­ç±»ã€‚ å½“æˆ‘ä»¬éœ€è¦æ‰§è¡Œä¸€ä¸ªå‘½ä»¤çš„æ—¶å€™å°±ç›´æŽ¥è°ƒç”¨è¿™ä¸ªç®¡ç†è€…ï¼Œç„¶åŽæ‰§è¡Œè¿™ä¸ªå‘½ä»¤å°±å¥½äº†ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç»œç›¸å…³]]></title>
    <url>%2F2015%2F07%2F04%2F%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%85%B3%2F</url>
    <content type="text"><![CDATA[HTTPè¯·æ±‚è¡Œ é¦–éƒ¨å­—æ®µåŒº å®žä½“ä¸»ä½“ï¼Œgetæ²¡æœ‰ï¼Œpostæœ‰ å“åº”è¡Œ é¦–éƒ¨å­—æ®µåŒº httpsçš„å»ºç«‹æµç¨‹ httpså»ºç«‹è¿žæŽ¥è¯¦ç»† é ç­¾åçŸ¥é“è°æ˜¯è°ï¼Œæ‰€ä»¥ï¼Œç­¾åä¸€å®šæ˜¯ç§é’¥ã€‚ å…³äºŽåŠ å¯†ç®—æ³•éžå¯¹ç§° RSA å¯¹ç§° DES TCP/UDP ä¸Žhttpçš„å…³ç³»ï¼ŒTPC/IPåè®®æ˜¯ä¼ è¾“å±‚åè®®ï¼Œä¸»è¦è§£å†³æ•°æ®å¦‚ä½•åœ¨ç½‘ç»œä¸­ä¼ è¾“ï¼Œè€ŒHTTPæ˜¯åº”ç”¨å±‚åè®®ï¼Œä¸»è¦è§£å†³å¦‚ä½•åŒ…è£…æ•°æ®ï¼ŒæŠŠIPæƒ³åƒæˆä¸€ç§é«˜é€Ÿå…¬è·¯ï¼Œå®ƒå…è®¸å…¶å®ƒåè®®åœ¨ä¸Šé¢è¡Œé©¶å¹¶æ‰¾åˆ°åˆ°å…¶å®ƒç”µè„‘çš„å‡ºå£ã€‚TCPå’ŒUDPæ˜¯é«˜é€Ÿå…¬è·¯ä¸Šçš„â€œå¡è½¦â€ï¼Œå®ƒä»¬æºå¸¦çš„è´§ç‰©å°±æ˜¯åƒHTTPï¼Œæ–‡ä»¶ä¼ è¾“åè®®FTPè¿™æ ·çš„åè®®ç­‰ UDP ===================ç‰¹ç‚¹ä¸ŽåŠŸèƒ½ ç‰¹ç‚¹:é¢å‘æŠ¥æ–‡ï¼Œæ—¢ä¸åˆå¹¶ä¹Ÿä¸æ‹†åˆ† å·®é”™æ£€æµ‹çš„æ€è·¯å’Œç­–ç•¥å¯ä»¥ç”¨åœ¨å¾®ä¿¡ç­‰IMåº”ç”¨ä¸Š TCP ======================TCPä¸­çš„çŠ¶æ€ç åœ¨TCPå±‚ï¼Œæœ‰ä¸ªFLAGSå­—æ®µï¼Œè¿™ä¸ªå­—æ®µæœ‰ä»¥ä¸‹å‡ ä¸ªæ ‡è¯†ï¼šSYN, FIN, ACK, PSH, RST, URG. å…¶ä¸­ï¼Œå¯¹äºŽæˆ‘ä»¬æ—¥å¸¸çš„åˆ†æžæœ‰ç”¨çš„å°±æ˜¯å‰é¢çš„äº”ä¸ªå­—æ®µã€‚ å®ƒä»¬çš„å«ä¹‰æ˜¯ï¼š SYNè¡¨ç¤ºå»ºç«‹è¿žæŽ¥ï¼Œ FINè¡¨ç¤ºå…³é—­è¿žæŽ¥ï¼Œ ACKè¡¨ç¤ºå“åº”ï¼Œ PSHè¡¨ç¤ºæœ‰ DATAæ•°æ®ä¼ è¾“ï¼Œ RSTè¡¨ç¤ºè¿žæŽ¥é‡ç½® TCPè¿žæŽ¥å’Œæ–­å¼€ ä¸ºä»€ä¹ˆä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ å‡è®¾è¶…æ—¶ï¼Œä¼šè§¦å‘clientçš„è¶…æ—¶é‡ä¼ ï¼Œæ–°çš„synä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿žæŽ¥ï¼Œè¿™ä¸ªæ—¶å€™æœåŠ¡ç«¯ä¼šå¯ä¸€ä¸ªè¿›ç¨‹æ¥å¤„ç†è¿™ä¸ªè¿žæŽ¥ï¼Œå¦‚æžœè¿™ä¸ªæ—¶å€™clientçš„æ—§çš„synåˆ°è¾¾äº†ï¼Œserverä¼šç»™clientä¸€ä¸ªç¡®è®¤ï¼Œä½†æ˜¯åœ¨clientçœ‹æ¥è¿™æ˜¯ä¸€ä¸ªè¯·æ±‚ï¼Œå°±ä¸ä¼šç»™ackå‘é€ackç¡®è®¤ï¼Œé‚£ä¹ˆserverå°±ä¸ä¼šå¯åŠ¨æ–°è¿›ç¨‹å¤„ç†è¿™ä¸ªï¼Œè¿™æ ·å°±èƒ½è§„é¿è¿žæŽ¥å¼‚å¸¸çš„é—®é¢˜ã€‚ ä¸ºå•¥è¦å››æ¬¡æŒ¥æ‰‹ï¼Ÿ å› ä¸ºå»ºç«‹çš„è¿žæŽ¥æ˜¯åŒå‘é€šè®¯çš„ï¼Œå­¦åå«åšåŒå·¥ï¼Œå…ˆæ˜¯clientåˆ°serverçš„ä¼ è¾“å…³é—­ï¼Œè¿™ä¸ªæ—¶å€™serveråˆ°clientæ˜¯å¯ä»¥å‘é€æ•°æ®çš„ï¼ŒåŽè¾¹åœ¨åˆé€‚çš„æ—¶é—´ï¼Œserverå†æ–­æŽ‰å®ƒçš„è¿žæŽ¥ å¯é æ€§å¦‚ä½•ä¿è¯ï¼Ÿ è¶…æ—¶é‡ä¼ ï¼Œä¸¢å¼ƒï¼Œå¿½ç•¥ é¢å‘å­—èŠ‚æµä¸ç®¡å‘é€æ–¹ç»™tcpå¤šå°‘æ•°æ®ï¼Œtcpä¼šæ ¹æ®å®žé™…æƒ…å†µï¼Œè¿›è¡Œæ‹†åˆ†æˆ–è€…åˆå¹¶ï¼Œè¿›è¡Œä¼ è¾“ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå‘é€ç¼“å­˜å’ŒæŽ¥æ”¶ç¼“å­˜çš„æ¦‚å¿µ æµé‡æŽ§åˆ¶åŸºäºŽæ»‘åŠ¨çª—å£åè®®ï¼Œè¿™ä¸ªåè®®ä¹Ÿå¯ä»¥ä¿éšœæŒ‰åºåˆ°è¾¾ æ¯ä¸ªæ•°æ®åŒ…å…ˆåŠ ä¸€ä¸ªtcpå¤´ï¼Œå†åŠ ä¸€ä¸ªipå¤´ã€‚ TCPå¹¶ä¸æ˜¯æ¯ä¸€ä¸ªæŠ¥æ–‡æ®µéƒ½ä¼šå›žå¤ACKçš„ï¼Œå¯èƒ½ä¼šå¯¹ä¸¤ä¸ªæŠ¥æ–‡æ®µå‘é€ä¸€ä¸ªACKï¼Œä¹Ÿå¯èƒ½ä¼šå¯¹å¤šä¸ªæŠ¥æ–‡æ®µå‘é€1ä¸ªACKã€ç´¯è®¡ACKã€‘ï¼Œæ¯”å¦‚è¯´å‘é€æ–¹æœ‰1/2/3 3ä¸ªæŠ¥æ–‡æ®µï¼Œå…ˆå‘é€äº†2,3 ä¸¤ä¸ªæŠ¥æ–‡æ®µï¼Œä½†æ˜¯æŽ¥æ”¶æ–¹æœŸæœ›æ”¶åˆ°1æŠ¥æ–‡æ®µï¼Œè¿™ä¸ªæ—¶å€™2,3æŠ¥æ–‡æ®µå°±åªèƒ½æ”¾åœ¨ç¼“å­˜ä¸­ç­‰å¾…æŠ¥æ–‡1çš„ç©ºæ´žè¢«å¡«ä¸Šï¼Œå¦‚æžœæŠ¥æ–‡1ï¼Œä¸€ç›´ä¸æ¥ï¼ŒæŠ¥æ–‡2/3ä¹Ÿå°†è¢«ä¸¢å¼ƒï¼Œå¦‚æžœæŠ¥æ–‡1æ¥äº†ï¼Œé‚£ä¹ˆä¼šå‘é€ä¸€ä¸ªACKå¯¹è¿™3ä¸ªæŠ¥æ–‡è¿›è¡Œä¸€æ¬¡ç¡®è®¤ã€‚ ä¸¾ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜Žä¸€ä¸‹æ»‘åŠ¨çª—å£çš„åŽŸç†ï¼š å‡è®¾32~45 è¿™äº›æ•°æ®ï¼Œæ˜¯ä¸Šå±‚Applicationå‘é€ç»™TCPçš„ï¼ŒTCPå°†å…¶åˆ†æˆå››ä¸ªSegmentæ¥å‘å¾€internet seg1 32~34 seg3 35~36 seg3 37~41 seg4 42~45 è¿™å››ä¸ªç‰‡æ®µï¼Œä¾æ¬¡å‘é€å‡ºåŽ»ï¼Œæ­¤æ—¶å‡è®¾æŽ¥æ”¶ç«¯ä¹‹æŽ¥æ”¶åˆ°äº†seg1 seg2 seg4 æ­¤æ—¶æŽ¥æ”¶ç«¯çš„è¡Œä¸ºæ˜¯å›žå¤ä¸€ä¸ªACKåŒ…è¯´æ˜Žå·²ç»æŽ¥æ”¶åˆ°äº†32~36çš„æ•°æ®ï¼Œå¹¶å°†seg4è¿›è¡Œç¼“å­˜ï¼ˆä¿è¯é¡ºåºï¼Œäº§ç”Ÿä¸€ä¸ªä¿å­˜seg3 çš„holeï¼‰ å‘é€ç«¯æ”¶åˆ°ACKä¹‹åŽï¼Œå°±ä¼šå°†32~36çš„æ•°æ®åŒ…ä»Žå‘é€å¹¶æ²¡æœ‰ç¡®è®¤åˆ‡åˆ°å‘é€å·²ç»ç¡®è®¤ï¼Œæå‡ºçª—å£ï¼Œè¿™ä¸ªæ—¶å€™çª—å£å‘å³ç§»åŠ¨ å‡è®¾æŽ¥æ”¶ç«¯é€šå‘Šçš„Window Sizeä»ç„¶ä¸å˜ï¼Œæ­¤æ—¶çª—å£å³ç§»ï¼Œäº§ç”Ÿä¸€äº›æ–°çš„ç©ºä½ï¼Œè¿™äº›æ˜¯æŽ¥æ”¶ç«¯å…è®¸å‘é€çš„èŒƒç•´ å¯¹äºŽä¸¢å¤±çš„seg3ï¼Œå¦‚æžœè¶…è¿‡ä¸€å®šæ—¶é—´ï¼ŒTCPå°±ä¼šé‡æ–°ä¼ é€ï¼ˆé‡ä¼ æœºåˆ¶ï¼‰ï¼Œé‡ä¼ æˆåŠŸä¼šseg3 seg4ä¸€å—è¢«ç¡®è®¤ï¼Œä¸æˆåŠŸï¼Œseg4ä¹Ÿå°†è¢«ä¸¢å¼ƒ æ»‘åŠ¨çª—å£åŠ¨ç”» DNS DNSè½¬å‘æœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¯èƒ½è¿”å›žä¸€ä¸ªé”™è¯¯çš„ipå¯¼è‡´è·¨ç½‘è®¿é—®ï¼Œå°±æ˜¯å¯¼è‡´æ…¢ å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥ä¸€ä¸ª URL åŽï¼Œæ˜¯åœ¨ä»€ä¹ˆæ—¶å€™ã€è°è¿›è¡Œçš„æŸ¥è¯¢ï¼Ÿæµè§ˆå™¨èŽ·å¾—è¿™ä¸ªè¯·æ±‚åŽï¼Œç”©ç»™äº†æ“ä½œç³»ç»Ÿï¼Œæ“ä½œç³»ç»Ÿç”©ç»™äº†ç½‘å¡ï¼Œç½‘å¡ä½œä¸ºçœŸæ­£å¹²æ´»çš„äººæŠŠåŒ…æŒ‰ç…§é“¾è·¯å±‚åè®®é€äº†å‡ºåŽ»ã€‚DNS å‘ç”Ÿåœ¨ TCP/IP ä¹‹å‰ã€‚å‰é¢å·²ç»æè¿‡ï¼Œåˆ° TCP/IP åè®®æ ˆçš„æ—¶å€™å·²ç»æ˜¯æœ‰ IP åœ°å€äº†ã€‚çœŸç›¸å°±æ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œçš„ DNS æŸ¥è¯¢ã€‚æ‰€ä»¥åœ¨æ“ä½œç³»ç»Ÿçš„ç½‘ç»œè®¾ç½®ä¸­ï¼Œå¯ä»¥è¿›è¡Œ DNS æœåŠ¡å™¨çš„é…ç½®ã€‚æ“ä½œç³»ç»Ÿä¹ŸåŒæ—¶ç®¡ç†äº† DNS çš„ç¼“å­˜ã€‚ã€ŠiOSç½‘ç»œè¯·æ±‚ä¼˜åŒ–ä¹‹DNSæ˜ å°„ã€‹ä¸­æåˆ°ï¼š åƒ iOS ç³»ç»Ÿä¸€èˆ¬æ˜¯ 24 å°æ—¶ä¹‹åŽä¼šè¿‡æœŸï¼Œè¿˜æœ‰è¿›å…¥é£žè¡Œæ¨¡å¼å†åˆ‡å›žæ¥ï¼Œå¼€å…³æœºï¼Œé‡ç½®ç½‘ç»œè®¾ç½®ç­‰ä¹Ÿä¼šå¯¼è‡´ DNS cache çš„æ¸…é™¤ã€‚æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ç”¨æˆ·åœ¨ç¬¬äºŒå¤©æ‰“å¼€ä½ çš„ app éƒ½ä¼šç»åŽ†ä¸€æ¬¡å®Œæ•´çš„ DNS è§£æžè¯·æ±‚ã€‚ Session/Cookie]]></content>
      <tags>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ·±å…¥ç†è§£block]]></title>
    <url>%2F2015%2F07%2F02%2F%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3block%2F</url>
    <content type="text"><![CDATA[blockä»‹ç» æˆªèŽ·å˜é‡ __block å†…å­˜ç®¡ç† å¾ªçŽ¯å¼•ç”¨ ä»€ä¹ˆæ˜¯blockæ˜¯å°†å‡½æ•°åŠå…¶æ‰§è¡Œä¸Šä¸‹æ–‡å°è£…èµ·æ¥çš„å¯¹è±¡ã€‚ æŸ¥çœ‹ç¼–è¯‘åŽçš„å†…å®¹clang -rewrite-objc file.mæŸ¥çœ‹å«æœ‰UIKit.hçš„ clang -x objective-c -rewrite-objc -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk xxxx ä»€ä¹ˆæ˜¯blockè°ƒç”¨blockè°ƒç”¨å°±æ˜¯å‡½æ•°è°ƒç”¨ æˆªèŽ·å˜é‡ å±€éƒ¨å˜é‡ åŸºæœ¬æ•°æ®ç±»åž‹ï¼ŒæˆªèŽ·å…¶å€¼ å¯¹è±¡ï¼Œè¿žåŒæ‰€æœ‰æƒä¿®é¥°ç¬¦ä¸€èµ·æˆªèŽ·ï¼Œ__weakå°±æ˜¯å¼±å¼•ç”¨ï¼Œæ²¡æœ‰ä¿®é¥°ç¬¦å°±æ˜¯é»˜è®¤strongï¼Œå°±æ˜¯å¼ºå¼•ç”¨ é™æ€å±€éƒ¨å˜é‡(static)ï¼Œä»¥æŒ‡é’ˆå½¢å¼è¿›è¡ŒæˆªèŽ· å…¨å±€å˜é‡ï¼Œä¸æˆªèŽ· é™æ€å…¨å±€å˜é‡ï¼Œä¸æˆªèŽ· æ€»ç»“ åªæœ‰åŸºæœ¬æ•°æ®ç±»åž‹æ‰ä¼šç›´æŽ¥ä½¿ç”¨å€¼ï¼Œå¦‚æžœç”¨__blockä¿®é¥°ä¹Ÿå°±æ˜¯æŒ‡é’ˆäº†ï¼Œå…¶ä»–æƒ…å†µéƒ½æ˜¯æŒ‡é’ˆ __blockä»€ä¹ˆæ—¶å€™ä½¿ç”¨block æ”¹å˜å­˜å‚¨æ–¹å¼ï¼Œ_blockä¿®é¥°è‡ªåŠ¨å˜é‡åŽï¼Œ_blockçš„å˜é‡ä¹Ÿè¢«è½¬åŒ–æˆäº†ä¸€ä¸ªç»“æž„ä½“:Block_byref_i_0,è¿™ä¸ªç»“æž„ä½“æœ‰5ä¸ªæˆå‘˜å˜é‡ã€‚ 1234567struct __Block_byref_i_0 &#123; void *__isa; æŒ‡é’ˆ__Block_byref_i_0 *__forwarding; æŒ‡å‘è‡ªèº«ç±»åž‹çš„__forwardingæŒ‡é’ˆ int __flags; æ ‡è®°flag int __size;å¤§å° int i; å˜é‡å€¼&#125;; ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹è¢«æˆªèŽ·å˜é‡è¿›è¡Œèµ‹å€¼æ“ä½œéœ€è¦æ·»åŠ __blockä¿®é¥°ç¬¦ï¼Œæ³¨æ„èµ‹å€¼ä¸ç­‰äºŽæ“ä½œ 1234__block NSMutableArray *arr = nil;void(^Block)(void) = ^&#123; arr = [NSMutableArray array];&#125; è¿™ç§æ²¡æœ‰__blockç›´æŽ¥ä¼šæŠ¥é”™ __blockçš„åŽŸç†æ˜¯ä»€ä¹ˆï¼Ÿ__blockä¿®é¥°åŽçš„intç±»åž‹ä¼šå˜æˆç»“æž„ä½“ï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡ã€‚ 12345678__block int muti = 6; int(^newBlock)(int) = ^int(int num) &#123; return muti * num; &#125;; muti = 4; newBlock(2); è¿™ä¸ªç»“æžœæ˜¯8 12345678int muti = 6;int(^newBlock)(int) = ^int(int num) &#123; return muti * num;&#125;;muti = 4;newBlock(2); è¿™ä¸ªç»“æžœæ˜¯12 12345678static int muti = 6;int(^newBlock)(int) = ^int(int num) &#123; return muti * num;&#125;; muti = 4; newBlock(2); è¿™ä¸ªç»“æžœä¹Ÿæ˜¯8 12345678910111213141516171819202122232425262728293031323334353637383940414243NSMutableString *mutable_string = [NSMutableString stringWithString:@&quot;aaa&quot;]; void(^mutable_append)(void)=^&#123; [mutable_string appendString:@&quot;ccc&quot;]; &#125;; [mutable_string appendString:@&quot;bbb&quot;]; mutable_append(); NSLog(@&quot;\\n %@&quot;,mutable_string); //ç»“æžœï¼šaaabbbccc // æ²¡æœ‰__blockï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰æ¶‰åŠåˆ°ç›´æŽ¥æŒ‡é’ˆçš„ä¿®æ”¹ï¼Œåªæ˜¯æ“ä½œè€Œå·²ï¼Œå› æ­¤aaabbbccc NSString *string = @&quot;aaa&quot;; NSString*(^append)(void)=^&#123; return [string stringByAppendingString:@&quot;ccc&quot;]; &#125;; string = @&quot;bbb&quot;; NSLog(@&quot;\\n %@&quot;,append()); //ç»“æžœï¼šaaaccc // æ²¡æœ‰__blockï¼Œcopyå€¼ï¼ŒæˆªèŽ·ä¹‹åŽå’Œå¤–éƒ¨éƒ½æŒ‡å‘@&quot;aaa&quot;ï¼Œä½†æ˜¯å¤–éƒ¨stringä¿®æ”¹äº†æŒ‡å‘ä¸º@&quot;bbb&quot;,å†…éƒ¨æŒ‡é’ˆè¿˜æ˜¯æŒ‡å‘@&quot;aaa&quot;ï¼Œæ‰€ä»¥aaaccc __block NSString *block_string = @&quot;aaa&quot;; NSString*(^block_append)(void)=^&#123; return [block_string stringByAppendingString:@&quot;ccc&quot;]; &#125;; block_string = @&quot;bbb&quot;; NSLog(@&quot;\\n %@&quot;,block_append()); //ç»“æžœ: bbbccc // æœ‰__blockï¼Œè‡ªåŠ¨è½¬æ¢æˆæ–°çš„ç»“æž„ä½“ï¼Œstringå˜æˆå…¶å†…éƒ¨å±žæ€§ï¼ŒblockæˆªèŽ·çš„æ˜¯æ–°ç»“æž„ä½“çš„åœ°å€ï¼Œå¤–éƒ¨block_stringé‡æ–°èµ‹å€¼ï¼Œä¹Ÿä¸æ˜¯ç®€å•çš„èµ‹å€¼ï¼Œå†…éƒ¨è½¬æ¢æˆ`a.__forwarding.a`çš„ä»£ç ï¼Œå¯ä»¥ç†è§£ä¸ºé€šè¿‡æ–°çš„ç»“æž„ä½“æ”¹å˜æŒ‡é’ˆæ‰€æŒ‡å‘çš„å€¼ï¼Œé€šè¿‡__blockæ‰€å½¢æˆçš„æ–°ç»“æž„ä½“ä½œä¸ºè½½ä½“ï¼Œä¹‹åŽæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æ“ä½œåŒä¸€ä¸ªå¯¹è±¡ï¼Œç†è§£ä¸ºæŒ‡é’ˆæ“ä½œï¼Œå› æ­¤ï¼Œå½¢æˆä¸€è‡´ï¼Œæ‰“å°bbbccc __block NSString *name = [NSString stringWithFormat:@&quot;%@&quot;,@&quot;mikejing&quot;]; NSString *(^addaa)(void) = ^&#123; return [name stringByAppendingString:@&quot;cjj&quot;]; &#125;; name = @&quot;MKJ&quot;; NSLog(@&quot;\\n %@&quot;,addaa()); // \n MKJcj // åŒä¸Š char *ch = &quot;b =\n&quot;; void (^block)(void) = ^&#123; printf(&quot;%s&quot;,ch); // b = &#125;; ch = &quot;value had changed.b =\n&quot;; block(); // æ— æ³•ä¿®æ”¹ï¼Œä¸Šé¢å·²ç»ä»‹ç» ä¸‹è¾¹è¿™æ®µä»£ç å¦‚ä½•ä½¿å…¶æ‰“å°20ï¼Ÿ 123456789int i = 10; void (^block)() = ^ &#123; NSLog(@&quot;%d&quot;, i);&#125;; i = 20; block(); __blockæˆ–è€…static è¿™æ®µä»£ç æ‰“å°ä»€ä¹ˆï¼Ÿ 12345678910int i = 10; void (^block)() = ^ &#123; i = 30; NSLog(@&quot;%d&quot;, i);&#125;; i = 20; block(); å•¥éƒ½æ‰“å°ä¸äº†ï¼Œç›´æŽ¥æŠ¥é”™äº† ä½†æ˜¯æ”¹æˆä¸‹è¾¹è¿™æ ·å°±æ²¡æœ‰é—®é¢˜ï¼Œæˆ–è€…ç”¨static 12345678910__block int i = 10; void (^block)() = ^ &#123; i = 30; NSLog(@&quot;+++++%d&quot;, i); &#125;; i = 20; block(); è¿™æ®µä»£ç æœ‰æ²¡æœ‰é—®é¢˜ï¼Ÿç­”æ¡ˆæ˜¯æ²¡æœ‰ï¼Œè¿™é‡Œæ˜¯ä¿®æ”¹çš„å†…å­˜ä¸­çš„å†…å®¹ï¼Œå¹¶æ²¡æœ‰ä¿®æ”¹å†…å­˜åœ°å€ 12345678910- (void)blockDemo3&#123; NSMutableString *strM= [NSMutableString stringWithString:@&quot;hello&quot;]; void (^block)() = ^ &#123; [strM appendString:@&quot;hehe&quot;]; &#125;; block();&#125; è¿™æ ·å†™æœ‰æ²¡æœ‰é—®é¢˜ï¼Ÿè¿™æ ·å†™ç›´æŽ¥å°±æŠ¥é”™äº†ï¼Œæ²¡æœ‰__blockä¿®é¥°ä¸å…è®¸ä¿®æ”¹æŒ‡é’ˆåœ°å€ã€‚1234567 NSMutableString *strM= [NSMutableString stringWithString:@&quot;hello&quot;]; void (^block)() = ^ &#123; strM = @&quot;hehe&quot;;&#125;; block(); blockå†…å­˜ç®¡ç† &gt; å¦‚æžœblockå®žçŽ°ä¸­æ²¡æœ‰è®¿é—®ä»»ä½•â€å¤–éƒ¨â€å˜é‡(åŒ…æ‹¬å±€éƒ¨å’Œå…¨å±€), è¯¥blockä¸ºGlobalBlock å¦‚æžœblockå®žçŽ°ä¸­è®¿é—®äº†ä»»ä½•â€å¤–éƒ¨â€å˜é‡(åŒ…æ‹¬å±€éƒ¨å’Œå…¨å±€), è¯¥blockä¸ºStackBlock å¯¹StackBlockè¿›è¡Œæ‹·è´(copy/Block_copy), è¯¥blockä¸ºMallocBlock 1234567891011__block NSMutableString *strM= [NSMutableString stringWithString:@&quot;hello&quot;]; void (^block)() = ^&#123; strM = @&quot;hehe&quot;;&#125;; block(); NSLog(@&quot;%@&quot;,^&#123;&#125;);NSLog(@&quot;%@&quot;, ^&#123;strM = @&quot;123&quot;;&#125;);NSLog(@&quot;%@&quot;,block); 2018-07-03 10:02:20.760734+0800 xiancheng[77686:36486980] 2018-07-03 10:02:20.763747+0800 xiancheng[77686:36486980] 2018-07-03 10:02:20.764553+0800 xiancheng[77686:36486980] è¿™ä¸ªæ˜¯ä¼šæœ‰å†…å­˜æ³„æ¼çš„ï¼Œæ ˆä¸Šçš„ä¼šé‡Šæ”¾ï¼Œä½†æ˜¯å †ä¸Šçš„ä¸ä¼š å¾ªçŽ¯å¼•ç”¨weakSelf StrongSelf çš„ä½¿ç”¨è§£å†³å¾ªçŽ¯åº”ç”¨çš„é—®é¢˜ä¸€å®šè¦åˆ†æžæ¸…æ¥šå“ªé‡Œå‡ºçŽ°äº†å¾ªçŽ¯å¼•ç”¨ï¼Œåªéœ€è¦æŠŠå…¶ä¸­ä¸€çŽ¯åŠ ä¸ŠweakSelfè¿™ç±»ä¼¼çš„å®ï¼Œå°±å¯ä»¥è§£å†³å¾ªçŽ¯å¼•ç”¨ã€‚_weakçš„å®žçŽ°åŽŸç†ï¼Œåœ¨åŽŸå¯¹è±¡é‡Šæ”¾ä¹‹åŽï¼Œ_weakå¯¹è±¡å°±ä¼šå˜æˆnullï¼Œé˜²æ­¢é‡ŽæŒ‡é’ˆã€‚æ‰€ä»¥å°±è¾“å‡ºäº†nulläº†ã€‚ é‚£ä¹ˆæˆ‘ä»¬æ€Žä¹ˆæ‰èƒ½åœ¨weakSelfä¹‹åŽï¼Œblocké‡Œé¢è¿˜èƒ½ç»§ç»­ä½¿ç”¨weakSelfä¹‹åŽçš„å¯¹è±¡å‘¢ï¼Ÿ ç©¶å…¶æ ¹æœ¬åŽŸå› å°±æ˜¯weakSelfä¹‹åŽï¼Œæ— æ³•æŽ§åˆ¶ä»€ä¹ˆæ—¶å€™ä¼šè¢«é‡Šæ”¾ï¼Œä¸ºäº†ä¿è¯åœ¨blockå†…ä¸ä¼šè¢«é‡Šæ”¾ï¼Œéœ€è¦æ·»åŠ _strongã€‚ åœ¨blocké‡Œé¢ä½¿ç”¨çš„_strongä¿®é¥°çš„weakSelfæ˜¯ä¸ºäº†åœ¨å‡½æ•°ç”Ÿå‘½å‘¨æœŸä¸­é˜²æ­¢selfæå‰é‡Šæ”¾ã€‚strongSelfæ˜¯ä¸€ä¸ªè‡ªåŠ¨å˜é‡å½“blockæ‰§è¡Œå®Œæ¯•å°±ä¼šé‡Šæ”¾è‡ªåŠ¨å˜é‡strongSelfä¸ä¼šå¯¹selfè¿›è¡Œä¸€ç›´è¿›è¡Œå¼ºå¼•ç”¨ã€‚ 123456789 __weak typeof(student) weakSelf = student;student.study = ^&#123; __strong typeof(student) strongSelf = weakSelf; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; NSLog(@&quot;my name is = %@&quot;,strongSelf.name); &#125;);&#125;; è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œçœ‹ä¸ŠåŽ»æœ€ç»ˆä¹Ÿæ˜¯é€šè¿‡__storngæ¥æŠ¢å¼•ç”¨selfçš„ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸ä¼šå¼•èµ·å¾ªçŽ¯å¼•ç”¨å‘¢ï¼Ÿå…¶å®žè¿™é‡Œä¹Ÿæ˜¯ä¼šé€ æˆå¾ªçŽ¯å¼•ç”¨ï¼Œè€Œä¸”å¿…é¡»æ˜¯ä¸€ä¸ªå¾ªçŽ¯å¼•ç”¨æ‰å¯ä»¥ï¼Œä½†æ˜¯è¿™ä¸ªå¾ªçŽ¯å¼•ç”¨ä¸æ˜¯æ°¸ä¹…çš„ï¼Œæ˜¯åœ¨ä¸€ä¸ªæ—¶é—´æ®µå†…ï¼Œè¿™ä¸ªæ—¶é—´æ®µå°±æ˜¯åœ¨blockæ‰§è¡Œçš„æ—¶å€™ã€‚ è¦æœ‰ä¸€ä¸ªæ¦‚å¿µï¼Œblockå†…çš„ä»£ç åªæœ‰åœ¨æ‰§è¡Œçš„æ—¶å€™æ‰ä¼šç”Ÿæ•ˆï¼Œä½†æ˜¯å˜é‡æ•èŽ·å´æ˜¯åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šç”Ÿæ•ˆï¼Œæ‰€ä»¥æˆ‘ä»¬æ•èŽ·äº†ä¸€ä¸ªweakselfï¼Œä½†æ˜¯åœ¨è¿è¡Œçš„æ—¶å€™å¯¹è¿™ä¸ªselfåšäº†ä¸€æ¬¡retainï¼Œè¿™å°±æ„å‘³ç€åœ¨blockè¿è¡Œçš„æ—¶å€™selfç»å¯¹ä¸ä¼šé‡Šæ”¾ï¼Œä½†æ˜¯blockä¸€æ—¦æ‰§è¡Œå®Œæ¯•ï¼Œé‡Œè¾¹çš„å˜é‡å°±ä¼šè¢«é‡Šæ”¾ï¼Œè¿™ä¸ªæ—¶å€™selfå°±è·Ÿæˆ‘æ²¡æœ‰å…³ç³»äº†ï¼Œè¯¥é‡Šæ”¾å°±é‡Šæ”¾ã€‚ å¦‚æžœæˆ‘ä»¬ç›´æŽ¥å¼•ç”¨selfï¼Œé‚£ä¹ˆè¿™ä¸ªæ˜¯æ°¸ä¹…çš„ï¼Œä¸ç®¡ä½ blockæ˜¯å¦æ‰§è¡Œï¼Œè¿™ä¸ªå¼•ç”¨éƒ½æ˜¯æ°¸ä¹…å­˜åœ¨çš„ 123[UIView animateWithDuration:0.2 animations:^&#123; self.alpha = 1;&#125;]; è¿™ä¸ªæƒ…å†µç›´æŽ¥ä½¿ç”¨selfæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºå¼•ç”¨blockçš„æ˜¯animationå†…çš„æŸä¸ªå¯¹è±¡ï¼Œå½“åŠ¨ç”»æ‰§è¡Œç»“æŸä¹‹åŽblockå°±ä¼šè¢«é‡Šæ”¾ï¼Œselfä¹Ÿä¼šè¢«é‡Šæ”¾ã€‚ å¦‚æžœåªä½¿ç”¨æˆå‘˜å˜é‡å‘¢ï¼Ÿ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253_block = ^NSString *(NSString *num) &#123; return [NSString stringWithFormat:@&quot;%@&quot;, _arr[0]]; &#125;;static NSString * __ViewController__viewDidLoad_block_func_0(struct __ViewController__viewDidLoad_block_impl_0 *__cself, NSString *num) &#123; ViewController *self = __cself-&gt;self; // bound by copy return ((NSString *(*)(id, SEL, NSString *, ...))(void *)objc_msgSend)((id)objc_getClass(&quot;NSString&quot;), sel_registerName(&quot;stringWithFormat:&quot;), (NSString *)&amp;__NSConstantStringImpl__var_folders_h6_b8d2vwjj7hz3kdq9kpxts5j00000gq_T_ViewController_ed107b_mi_1, ((id (*)(id, SEL, NSUInteger))(void *)objc_msgSend)((id)(*(NSMutableArray **)((char *)self + OBJC_IVAR_$_ViewController$_arr)), sel_registerName(&quot;objectAtIndexedSubscript:&quot;), (NSUInteger)0));&#125;//è¿™ç§æƒ…å†µæ˜¯æ•èŽ·selfçš„ _block = ^NSString *(NSString *num) &#123; return [NSString stringWithFormat:@&quot;%@&quot;, self.arr[0]]; &#125;; static NSString * __ViewController__viewDidLoad_block_func_0(struct __ViewController__viewDidLoad_block_impl_0 *__cself, NSString *num) &#123; ViewController *self = __cself-&gt;self; // bound by copy return ((NSString *(*)(id, SEL, NSString *, ...))(void *)objc_msgSend)((id)objc_getClass(&quot;NSString&quot;), sel_registerName(&quot;stringWithFormat:&quot;), (NSString *)&amp;__NSConstantStringImpl__var_folders_h6_b8d2vwjj7hz3kdq9kpxts5j00000gq_T_ViewController_5b51e6_mi_1, ((id (*)(id, SEL, NSUInteger))(void *)objc_msgSend)((id)((NSMutableArray *(*)(id, SEL))(void *)objc_msgSend)((id)self, sel_registerName(&quot;arr&quot;)), sel_registerName(&quot;objectAtIndexedSubscript:&quot;), (NSUInteger)0));&#125;//è¿™ç§æƒ…å†µæ›´æ˜¯æ•èŽ·self_block = ^NSString *(NSString *num) &#123; return @&quot;afdasf&quot;; &#125;; static NSString * __ViewController__viewDidLoad_block_func_0(struct __ViewController__viewDidLoad_block_impl_0 *__cself, NSString *num) &#123; return (NSString *)&amp;__NSConstantStringImpl__var_folders_h6_b8d2vwjj7hz3kdq9kpxts5j00000gq_T_ViewController_599c3a_mi_1; &#125;//å•¥éƒ½ä¸æ•èŽ·_arr = [NSMutableArray arrayWithObject:@&quot;123&quot;]; __unsafe_unretained NSArray * weakArr = _arr; _block = ^NSString *(NSString *num) &#123; return [NSString stringWithFormat:@&quot;%@&quot;, weakArr[0]]; &#125;; static NSString * __ViewController__viewDidLoad_block_func_0(struct __ViewController__viewDidLoad_block_impl_0 *__cself, NSString *num) &#123; NSArray *weakArr = __cself-&gt;weakArr; // bound by copy return ((NSString *(*)(id, SEL, NSString *, ...))(void *)objc_msgSend)((id)objc_getClass(&quot;NSString&quot;), sel_registerName(&quot;stringWithFormat:&quot;), (NSString *)&amp;__NSConstantStringImpl__var_folders_h6_b8d2vwjj7hz3kdq9kpxts5j00000gq_T_ViewController_cba29f_mi_1, ((id (*)(id, SEL, NSUInteger))(void *)objc_msgSend)((id)weakArr, sel_registerName(&quot;objectAtIndexedSubscript:&quot;), (NSUInteger)0)); &#125; //åªæ˜¯æ•èŽ·weakå˜é‡ è¯´æ˜Žä¸€ä¸‹_arrå®žé™…ä¸Šæ˜¯self-&gt;_arrï¼Œä¹Ÿæ˜¯éœ€è¦ä¾èµ–selfæ‰èƒ½è®¿é—®çš„ï¼Œå³ä½¿åœ¨å†…éƒ¨ï¼Œå±žæ€§å’Œæˆå‘˜å˜é‡çš„è®¿é—®éƒ½æ˜¯éœ€è¦ä¾èµ–å¯¹è±¡ã€‚å†ä»Žruntimeè§’åº¦çœ‹ä¸€ä¸‹ï¼Œå½“æˆ‘è°ƒç”¨ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œç»è¿‡msg_sendå‡½æ•°è½¬å‘ï¼Œè¿™é‡Œçš„å‚æ•°åªæœ‰selfï¼Œå’ŒSELä»¥åŠå‚æ•°ï¼Œæ²¡æœ‰selfçš„æˆå‘˜å˜é‡ï¼Œæ‰€ä»¥åªèƒ½ä¾é selfåŽ»èŽ·å–ï¼Œè¿™æ ·çš„è¯æ— è®ºå¦‚ä½•éƒ½è¦ç©¿å…¥selfæ‰è¡Œã€‚ __blockåœ¨MRCå’ŒARCä¸‹çš„åŒºåˆ«ä½¿ç”¨å¼±å¼•ç”¨æ‰“æ–­blocké‡Œé¢çš„retain cycleMRCä¸­ _block æ˜¯ä¸ä¼šå¼•èµ·retainï¼›ä½†åœ¨ARCä¸­ _block åˆ™ä¼šå¼•èµ·retainã€‚ARCä¸­åº”è¯¥ä½¿ç”¨ _weak æˆ–__unsafe_unretainedå¼±å¼•ç”¨ ä¸‹è¾¹è¿™ç§å†™æ³•ä½¿blockæŒæœ‰äº†blockSelfè¿™ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¼ºå¼•ç”¨åœ¨ï¼Œè§£å†³çš„åŠžæ³•æ˜¯ç ´çŽ¯ï¼Œä½¿ç”¨å®Œä¹‹åŽé‡Šæ”¾blockSelfï¼Œè¿™ä¸ªæ–¹æ¡ˆçš„å¼Šç«¯æ˜¯ï¼Œå¦‚æžœè¿™ä¸ªblockä¸è°ƒç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªçŽ¯å°±ä¸€ç›´å­˜åœ¨ã€‚ æˆ‘ä»¬ç»å¸¸ä¼šå¬è¯´å¦‚ä½•è§£å†³blockçš„å¾ªçŽ¯å¼•ç”¨ï¼Ÿä¸€èˆ¬éƒ½ä¼šè¯´ç”¨weakå’Œblockï¼Œé‚£ä¹ˆblockå®žçŽ°è§£é™¤å¾ªçŽ¯å¼•ç”¨çš„æœ¬è´¨å°±æ˜¯ä¸‹è¾¹è¿™æ®µä»£ç ï¼Œä½¿ç”¨å®Œäº†ä¹‹åŽå¯ä»¥å°†è¿™ä¸ªå¼•ç”¨è®¾ç½®ä¸ºnilï¼Œå…¶ä»–çš„åšæ³•å°±ä¸å¯ä»¥ï¼Œå› ä¸ºä¸ç”¨blockä¿®é¥°æ ¹æœ¬å°±ä¸èƒ½æ›´æ”¹æŒ‡é’ˆæŒ‡å‘ã€‚ 12345678910111213141516__block typeof(self) blockSelf = self; _block = ^NSString *(NSString *num) &#123; NSLog(@&quot;%@&quot;, blockSelf.arr[0]);// blockSelf = nil; return @&quot;123&quot;;&#125;; =========================================static NSString * __ViewController__viewDidLoad_block_func_0(struct __ViewController__viewDidLoad_block_impl_0 *__cself, NSString *num) &#123;__Block_byref_blockSelf_0 *blockSelf = __cself-&gt;blockSelf; // bound by ref NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_h6_b8d2vwjj7hz3kdq9kpxts5j00000gq_T_ViewController_614b65_mi_0, ((id (*)(id, SEL, NSUInteger))(void *)objc_msgSend)((id)((NSMutableArray *(*)(id, SEL))(void *)objc_msgSend)((id)(blockSelf-&gt;__forwarding-&gt;blockSelf), sel_registerName(&quot;arr&quot;)), sel_registerName(&quot;objectAtIndexedSubscript:&quot;), (NSUInteger)0)); return (NSString *)&amp;__NSConstantStringImpl__var_folders_h6_b8d2vwjj7hz3kdq9kpxts5j00000gq_T_ViewController_614b65_mi_1;&#125;]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[runloopç›¸å…³]]></title>
    <url>%2F2015%2F07%2F02%2Frunloop%E7%9B%B8%E5%85%B3%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯runloopæ˜¯é€šè¿‡å†…éƒ¨ç»´æŠ¤äº‹ä»¶å¾ªçŽ¯æ¥å¯¹äº‹ä»¶/æ¶ˆæ¯è¿›è¡Œç®¡ç†çš„ä¸€ä¸ªå¯¹è±¡ã€‚ æ²¡æœ‰æ¶ˆæ¯å¤„ç†çš„æ—¶å€™ï¼Œæ˜¯ç”¨æˆ·æ€åˆ°å†…æ ¸æ€ï¼Œæœ‰æ¶ˆæ¯éœ€è¦å¤„ç†çš„æ—¶å€™ï¼Œæ˜¯å†…æ ¸æ€åˆ°ç”¨æˆ·æ€ã€‚ çŠ¶æ€çš„åˆ‡æ¢æ‰æ˜¯å…³é”®ã€‚ æ•°æ®ç»“æž„è§£æž è¯´æ˜Žï¼š ä¸Žpthreadæ˜¯ä¸€å¯¹ä¸€çš„å…³ç³» modelsæ˜¯ä¸€ä¸ªé›†åˆNSMutableSet commonModesä¹Ÿæ˜¯ä¸€ä¸ªé›†åˆï¼ŒNSMutableSet è¯´æ˜Žï¼š source0å’Œsource1æ˜¯NSMutableSetç±»åž‹ï¼Œæ— åº observerså’Œtimersæ˜¯NSMutableArrayç±»åž‹ï¼Œæœ‰åº runloopModeå½“è¿è¡Œåœ¨mode1çš„æƒ…å†µä¸‹ï¼Œæ— æ³•æŽ¥å—mode2ç§çš„ä¸€äº›äº‹ä»¶ï¼Œæ¯”å¦‚åœ¨æ»‘åŠ¨çš„æ—¶å€™æ— æ³•æŽ¥å—æ­£å¸¸çŠ¶æ€çš„äº‹ä»¶ã€‚ CommonModeä¸æ˜¯ä¸€ç§å®žé™…å­˜åœ¨çš„modeï¼Œå®ƒæ˜¯åŒæ­¥source/timer/observeråˆ°å¤šä¸ªmodeçš„ä¸€ç§æŠ€æœ¯æ–¹æ¡ˆ ä»Žç‚¹å‡»appå›¾æ ‡å¼€å§‹å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿå¸¸é©»çº¿ç¨‹]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤šçº¿ç¨‹æŠ€æœ¯]]></title>
    <url>%2F2015%2F07%2F01%2F%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%8A%80%E6%9C%AF%2F</url>
    <content type="text"><![CDATA[æ€»ç»“ å¹¶å‘æ‰§è¡Œçš„æœ¬è´¨æ˜¯å¤šçº¿ç¨‹ï¼Œä¸æ˜¯å¤šé˜Ÿåˆ— å¼€ä¸å¼€çº¿ç¨‹ï¼Œå–å†³äºŽæ‰§è¡Œä»»åŠ¡çš„å‡½æ•°ï¼ŒåŒæ­¥ä¸å¼€ï¼Œå¼‚æ­¥å¼€ã€‚ å¼€å‡ æ¡çº¿ç¨‹ï¼Œå–å†³äºŽé˜Ÿåˆ—ï¼Œä¸²è¡Œå¼€ä¸€æ¡ï¼Œå¹¶å‘å¼€å¤šæ¡(å¼‚æ­¥) ä¸»é˜Ÿåˆ—ï¼š ä¸“é—¨ç”¨æ¥åœ¨ä¸»çº¿ç¨‹ä¸Šè°ƒåº¦ä»»åŠ¡çš„â€é˜Ÿåˆ—â€ï¼Œä¸»é˜Ÿåˆ—ä¸èƒ½åœ¨å…¶ä»–çº¿ç¨‹ä¸­è°ƒåº¦ä»»åŠ¡ï¼ å¦‚æžœä¸»çº¿ç¨‹ä¸Šå½“å‰æ­£åœ¨æœ‰æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¸»é˜Ÿåˆ—æš‚æ—¶ä¸ä¼šè°ƒåº¦ä»»åŠ¡çš„æ‰§è¡Œï¼ä¸»é˜Ÿåˆ—åŒæ­¥ä»»åŠ¡ï¼Œä¼šé€ æˆæ­»é”ã€‚åŽŸå› æ˜¯å¾ªçŽ¯ç­‰å¾… åŒæ­¥ä»»åŠ¡å¯ä»¥é˜Ÿåˆ—è°ƒåº¦å¤šä¸ªå¼‚æ­¥ä»»åŠ¡å‰ï¼ŒæŒ‡å®šä¸€ä¸ªåŒæ­¥ä»»åŠ¡ï¼Œè®©æ‰€æœ‰çš„å¼‚æ­¥ä»»åŠ¡ï¼Œç­‰å¾…åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œè¿™æ˜¯ä¾èµ–å…³ç³»ã€‚ å…¨å±€é˜Ÿåˆ—ï¼šå¹¶å‘ï¼Œèƒ½å¤Ÿè°ƒåº¦å¤šä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œæ•ˆçŽ‡é«˜ï¼Œä½†æ˜¯ç›¸å¯¹è´¹ç”µã€‚ ä¸²è¡Œé˜Ÿåˆ—æ•ˆçŽ‡è¾ƒä½Žï¼Œçœç”µçœæµé‡ï¼Œæˆ–è€…æ˜¯ä»»åŠ¡ä¹‹é—´éœ€è¦ä¾èµ–ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸²è¡Œé˜Ÿåˆ—ã€‚ ä¹Ÿå¯ä»¥é€šè¿‡åˆ¤æ–­å½“å‰ç”¨æˆ·çš„ç½‘ç»œçŽ¯å¢ƒæ¥å†³å®šå¼€çš„çº¿ç¨‹æ•°ã€‚WIFIä¸‹6æ¡ï¼Œ3G/4Gä¸‹2ï½ž3æ¡ã€‚ å¹¶å‘ä¸Žå¹¶è¡Œå¹¶è¡Œå¯ä»¥åœ¨è®¡ç®—æœºçš„å¤šä¸ªæŠ½è±¡å±‚æ¬¡ä¸Šè¿ç”¨ï¼Œè¿™é‡Œä»…è®¨è®ºä»»åŠ¡çº§å¹¶è¡Œï¼ˆç¨‹åºè®¾è®¡å±‚é¢ï¼‰ï¼Œä¸è®¨è®ºæŒ‡ä»¤çº§å¹¶è¡Œç­‰ã€‚ å¹¶å‘æŒ‡èƒ½å¤Ÿè®©å¤šä¸ªä»»åŠ¡åœ¨é€»è¾‘ä¸ŠåŒæ—¶æ‰§è¡Œçš„ç¨‹åºè®¾è®¡ï¼Œè€Œå¹¶è¡Œåˆ™æ˜¯æŒ‡åœ¨ç‰©ç†ä¸ŠçœŸæ­£çš„åŒæ—¶æ‰§è¡Œã€‚å¹¶è¡Œæ˜¯å¹¶å‘çš„å­é›†ï¼Œå±žäºŽå¹¶å‘çš„ä¸€ç§å®žçŽ°æ–¹å¼ã€‚é€šè¿‡æ—¶é—´ç‰‡è½®è½¬å®žçŽ°çš„å¤šä»»åŠ¡åŒæ—¶æ‰§è¡Œæ˜¯é€šè¿‡è°ƒåº¦ç®—æ³•å®žçŽ°é€»è¾‘ä¸Šçš„åŒæ­¥æ‰§è¡Œï¼Œå±žäºŽå¹¶å‘ï¼Œä»–ä»¬ä¸æ˜¯çœŸæ­£ç‰©ç†ä¸Šçš„åŒæ—¶æ‰§è¡Œï¼Œä¸å±žäºŽå¹¶è¡Œã€‚å½“é€šè¿‡å¤šæ ¸ CPU å®žçŽ°å¹¶å‘æ—¶ï¼Œå¤šä»»åŠ¡æ˜¯çœŸæ­£ç‰©ç†ä¸Šçš„åŒæ—¶æ‰§è¡Œï¼Œæ‰å±žäºŽå¹¶è¡Œã€‚ å¤šçº¿ç¨‹ç›¸å…³æ¦‚å¿µ GCD NSOperation NSThread é” ä»€ä¹ˆæ˜¯GCDåŒæ­¥/å¼‚æ­¥ ä¸²è¡Œ/å¹¶å‘ å¸¸è§è€ƒå¯Ÿç‚¹ åŒæ­¥å¼‚æ­¥ï¼Œä¸²è¡Œå¹¶è¡Œ dispatch_barrier_async(å¤šè¯»å•å†™å®žçŽ°) dispatch_group GCDçš„API Dipatchæ˜¯è°ƒåº¦çš„æ„æ€ serialè¿žç»­(ä¸²è¡Œ) concurrentåŒæ—¶å‘ç”Ÿ(å¹¶å‘) Dispatch Queue å¼€å‘è€…è¦åšçš„åªæ˜¯å®šä¹‰æƒ³æ‰§è¡Œçš„ä»»åŠ¡å¹¶è¿½åŠ åˆ°é€‚å½“çš„Dispatch Queueæºç è¡¨ç¤ºå¦‚ä¸‹ï¼š1234dispatch_async (queue, ^&#123; //æƒ³æ‰§è¡Œçš„ä»»åŠ¡&#125;) Dispatch Queueæ˜¯æ‰§è¡Œå¤„ç†çš„ç­‰å¾…é˜Ÿåˆ—ï¼Œæ˜¯å…ˆå…¥å…ˆå‡ºçš„é¡ºåº(FIFO) å¦å¤–å­˜åœ¨ä¸¤ç§Dispatch Queueï¼š Serial Dispatch Queueï¼Œç­‰å¾…çŽ°åœ¨æ‰§è¡Œä¸­å¤„ç†ç»“æŸ Concurrent Dispatch Queueï¼Œä¸éœ€è¦çŽ°åœ¨æ‰§è¡Œä¸­å¤„ç†ç»“æŸ å¦‚ä¸‹è¾¹çš„ä»£ç ï¼Œè¿½åŠ å¤šä¸ªå¤„ç† 123456789dispatch_async(queue, blk0);dispatch_async(queue, blk1);dispatch_async(queue, blk2);dispatch_async(queue, blk3);dispatch_async(queue, blk4); Concurrent Dispatch Queueä¹‹æ‰€ä»¥ä¸éœ€è¦ç­‰å¾…æ‰§è¡Œç»“æŸï¼Œæ˜¯å› ä¸ºå®ƒæ˜¯ä½¿ç”¨äº†å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æœ‰å¤šå°‘ä¸ªä»»åŠ¡å°±ä¼šå¼€å¤šå°‘ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹ä¸ªæ•°æ˜¯ç”±ç³»ç»Ÿå†³å®šçš„ã€‚ å°ç»“:æƒ³è¦é¡ºåºæ‰§è¡Œå°±ç”¨serial queue,å¦åˆ™ä½¿ç”¨å¦å¤–ä¸€ç§ æˆ‘ä»¬çŽ°åœ¨çŸ¥é“äº†æœ‰queueçš„å­˜åœ¨ï¼Œé‚£ä¹ˆæ€Žä¹ˆå¾—åˆ°è¿™ä¸ªqueueå‘¢ï¼Ÿ dispatch_queue_create123dispatch_queue_t myQueueC = dispatch_queue_create(&quot;com.kugou.gcd.myQueue&quot;, DISPATCH_QUEUE_CONCURRENT);dispatch_queue_t myQueueS = dispatch_queue_create(&quot;com.kugou.gcd.myQueue&quot;, NULL); ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºåå­—ï¼Œä¸€å®šè¦è®¾ç½®è¿™ä¸ªå‚æ•°ï¼Œå› ä¸ºå‘ç”Ÿå´©æºƒçš„æ—¶å€™ï¼Œè¿™ä¸ªå°†æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æŒ‡å¼•ï¼Œè¿™ä¸ªåå­—ä¼šå‡ºçŽ°åœ¨å´©æºƒä¿¡æ¯ä¸­ï¼Œç¬¬äºŒä¸ªå‚æ•°å¦‚æžœè¦åˆ›å»ºserial queueå°±è®¾ç½®ä¸ºNULLï¼Œä»£è¡¨ç©ºçš„cæŒ‡é’ˆï¼Œå¦‚æžœæ˜¯å¦å¤–ä¸€ç§å°±è®¾ç½®ä¸ºDISPATCH_QUEUE_CONCURRENT æˆ‘ä»¬å¯ä»¥åˆ›å»ºå¤šä¸ªSerial Queueï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™å¦‚æžœè¿½åŠ ä»»åŠ¡è¿™äº›ä»»åŠ¡æ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œä¹Ÿå³æ˜¯è¯´ä¼šåˆ›å»ºäºŽqueueç­‰æ•°é‡çš„çº¿ç¨‹ï¼Œé‚£ä¹ˆå¦‚æžœæœ‰è¿‡å¤šçš„queueå°±ä¼šæœ‰è¿‡å¤šçš„çº¿ç¨‹ï¼Œå°±ä¼šæ¶ˆè€—ä¸å¿…è¦çš„èµ„æºï¼Œå¹¶ä¸”ä¼šé€ æˆçº¿ç¨‹ç«žäº‰ï¼Œè¿™ç§æƒ…å†µæˆ‘ä»¬è¦ä½¿ç”¨concurrent dispatch queue å¦å¤–è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶æˆ‘ä»¬å·²ç»æ­¥å…¥äº†ARCæ—¶ä»£ï¼Œä½†æ˜¯Dispatch Queueå¿…é¡»ç”±å¼€å‘äººå‘˜æ¥é‡Šæ”¾ï¼ŒæŽ¥ç€ä¸Šç­çš„ä»£ç  12dispatch_async(myQueueS, ^&#123;NSLog(@&quot;123&quot;)&#125;);dispatch_release(myQueueS); åœ¨è°ƒç”¨asyncä¹‹åŽç«‹åˆ»é‡Šæ”¾queueï¼Œè¿™æ ·å¹¶ä¸ä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºæ­¤æ—¶blockå·²ç»å¯¹é½æœ‰ä¸€ä¸ªå¼•ç”¨äº†ã€‚å½“blockç»“æŸä¹‹åŽå°±ä¼šé‡Šæ”¾è¿™ä¸ªqueueã€‚å‡¡æ˜¯ç”±createåˆ›å»ºçš„å¯¹è±¡éƒ½è¦è®°å¾—æ‰‹åŠ¨é‡Šæ”¾ã€‚ Main Dispatch Queue/Global Dispatch Queueç¬¬äºŒç§èŽ·å¾—queueçš„æ–¹æ³•æ˜¯ä½¿ç”¨ç³»ç»Ÿæ ‡å‡†æä¾›çš„Dispatch Queue: Main Dispatch Queueï¼Œä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œåªæœ‰ä¸€ä¸ªæ‰€ä»¥è‡ªç„¶æ˜¯serial dispatch queue Global Dispatch Queueï¼Œæ˜¯concurrent dispatch queueï¼Œå››ä¸ªä¼˜å…ˆçº§ 1234567//Main Dispatch Queuedispatch_queue_t mianQueue = dispatch_get_main_queue();//Global Dispatch Queueé«˜dispatch_queue_t highQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);//å…¶ä»–ä¼˜å…ˆçº§ä¸€æ ·çš„åšæ³• å¯¹è¿™ä¸¤ç§queueä½¿ç”¨retaiinå’Œreleaseæ–¹æ³•ä¸ä¼šäº§ç”Ÿä»»ä½•å˜åŒ–ï¼Œæ‰€ä»¥è¿™ç§åšæ³•æ¯”concurrent dispatch queueæ›´åŠ è½»æ¾ã€‚ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åƒä¸‹è¾¹è¿™æ ·ç›´æŽ¥ä½¿ç”¨123dispatch_asyn(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; //code&#125;) dispatch_set_target_queuedispatch_queue_createå‡½æ•°ç”Ÿæˆçš„Dispatch Queueä¸ç®¡æ˜¯Serial Dispatch Queueè¿˜æ˜¯Concurrent Dispatch Queueï¼Œå¤šä½¿ç”¨ä¸Žé»˜è®¤ä¼˜å…ˆçº§Global Dispatch Queueç›¸åŒæ‰§è¡Œä¼˜å…ˆçº§çš„çº¿ç¨‹ï¼Œå˜æ›´æ‰§è¡Œä¼˜å…ˆçº§ä½¿ç”¨dispatch_set_target_queueå‡½æ•°123dispatch_queue_t mySerialQueue = dispatch_queue_create(&quot;com.kugou.mySerQueue&quot;, NULL);dispatch_queue_t myGlobalQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,0);dispatch_set_target_queue(mySerialQueue, myGlobalQueue); æŒ‡å®šç¬¬ä¸€ä¸ªå‚æ•°ä¸Žç¬¬äºŒä¸ªå‚æ•°ä¼˜å…ˆçº§ç›¸åŒ dispatch_afterç”¨äºŽå»¶æ—¶æ‰§è¡Œ1234dispatch_time_t time = dispatch_time(DISPATCH_TIME_NOW,3ULL * NSEC_PER_SEC);dispatch_after(time, dispatch_get_main_queue(),^&#123; NSLog(@&quot;123&quot;);&#125;) æ³¨æ„ï¼Œdispatch_afterå‡½æ•°å¹¶ä¸æ˜¯åœ¨æŒ‡å®šæ—¶é—´åŽæ‰§è¡Œï¼Œè€Œåªæ˜¯åœ¨æŒ‡å®šæ—¶é—´è¿½åŠ å¤„ç†åˆ°dispatch_queueï¼Œæ­¤æºç åœ¨3ç§’åŽç”¨dispatch_asyncå‡½æ•°è¿½åŠ blockåˆ°main dispatch queueç›¸åŒã€‚åœ¨ä¸¥æ ¼æ—¶é—´è¦æ±‚ä¸‹è¿™ä¸ªå‡½æ•°çš„ä½¿ç”¨ä¼šå‡ºé—®é¢˜ã€‚ dispatch_syncdispatch_applydispatch_suspend/dispatch_resumeDispatch Sempaphoredispatch_noceDispatch I/OGCDå®žçŽ°Dispatch QueueDispatch SourceGCDç»å…¸é¢è¯•é¢˜åœ¨ä¸»çº¿ç¨‹ä¸­çš„æŸä¸ªå‡½æ•°é‡Œè°ƒç”¨äº†å¼‚æ­¥å‡½æ•°ï¼Œæ€Žä¹ˆæ · block å½“å‰çº¿ç¨‹ , ä¸”è¿˜èƒ½å“åº”å½“å‰çº¿ç¨‹çš„ timer äº‹ä»¶ï¼Œ touch äº‹ä»¶ç­‰ æ€è·¯ä¾¿æ˜¯ï¼šåˆ©ç”¨waitå‡½æ•°ï¼Œä¸æ–­åœ°æ£€æµ‹æ˜¯å¦å®Œæˆå¼‚æ­¥æ“ä½œï¼Œç„¶åŽåŒæ—¶å¼€å¯ä¸€ä¸ªç±»æ­»å¾ªçŽ¯ï¼Œä¸è¿‡è¿™å‡½æ•°çš„äº’ç›¸è°ƒç”¨è¦ç”¨performafterä¸ºäº†ç»™äº‹ä»¶å’Œtimerè°ƒç”¨ç•™å‡ºæœºä¼šå’Œæ—¶é—´ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778@interface ViewController ()&#123; dispatch_group_t group;&#125;@property (nonatomic, strong) RedView *redView;@property (nonatomic, assign) NSInteger result;@property (nonatomic, strong) UIButton *btn;@property (nonatomic, strong) NSTimer *timer;@end@implementation ViewController- (UIButton *)btn &#123; if (!_btn) &#123; _btn = [UIButton buttonWithType:UIButtonTypeCustom]; [_btn setTitle:@&quot;ç‚¹å‡»æˆ‘å•Š&quot; forState:UIControlStateNormal]; [_btn sizeToFit]; _btn.frame = CGRectMake(100, 100, _btn.bounds.size.width, _btn.bounds.size.height); [_btn setTitleColor:[UIColor redColor] forState:UIControlStateNormal]; [_btn addTarget:self action:@selector(change) forControlEvents:UIControlEventTouchUpInside]; &#125; return _btn;&#125;- (void)viewDidLoad &#123; [super viewDidLoad]; [self.view addSubview:self.btn]; self.timer = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(chang1) userInfo:nil repeats:YES]; group = dispatch_group_create(); dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0); dispatch_group_async(group, queue, ^&#123; for (int i = 0; i &lt; 10000; i++) &#123; NSLog(@&quot;%d&quot;, i); &#125; &#125;); [self wait]; &#125;- (void)wait &#123; self.result = dispatch_group_wait(group, 10 * NSEC_PER_SEC); if (self.result == 0) &#123; NSLog(@&quot;ç»“æŸ&quot;); &#125;else &#123; NSLog(@&quot;rsout--%ld&quot;, self.result); [self performSelector:@selector(wait1) withObject:nil afterDelay:0]; &#125; &#125;- (void)wait1 &#123; self.result = dispatch_group_wait(group, 10 * NSEC_PER_SEC); if (self.result == 0) &#123; NSLog(@&quot;ç»“æŸ&quot;); &#125;else &#123; NSLog(@&quot;rsout--%ld&quot;, self.result); [self performSelector:@selector(wait) withObject:nil afterDelay:0]; &#125; &#125;- (void)next &#123; NSLog(@&quot;1234567&quot;);&#125;- (void)change &#123; self.view.backgroundColor = [UIColor redColor];&#125;- (void)chang1 &#123; NSLog(@&quot;å“‡å“ˆå“ˆå“ˆå“ˆ&quot;);&#125; æ­»é”çš„ä¾‹å­12345678- (void)viewDidLoad &#123; [super viewDidLoad]; dispatch_sync(dispatch_get_main_queue(), ^&#123; [self dosomething]; &#125;);&#125; åŒæ­¥æäº¤åˆ°ä¸»é˜Ÿåˆ—çš„ä»»åŠ¡ï¼Œåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œé‚£ä¹ˆviewDidLoadè¿™ä¸ªæ–¹æ³•å’Œblockåœ¨åŒä¸€ä¸ªé˜Ÿåˆ—ï¼Œä»¥å‰ä¸€åŽï¼ŒviewDidLoadå®Œæˆè¯ç­‰åˆ°blockæ‰§è¡Œå®Œï¼Œä½†æ˜¯blockæ‰§è¡Œå®Œåœ¨é˜Ÿåˆ—ä¸­è¦ç­‰å¾…viewDidLoadå®Œæˆï¼Œè¿™ä¸ªæ—¶å€™å‡ºçŽ°äº†æ­»é” é‚£ä¹ˆä¸‹è¾¹è¿™ç§å‘¢ 123456789- (void)viewDidLoad &#123; [super viewDidLoad]; dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.kugou.gcd.myQueue&quot;, NULL); dispatch_sync(serialQueue, ^&#123; [self dosomething]; &#125;);&#125; è¿™ä¸ªä¼šæ‰§è¡Œæ­£å¸¸ï¼Œå› ä¸ºæˆ‘ä»¬æ–°å»ºäº†ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—ï¼Œè™½ç„¶syncä»ç„¶åœ¨ä¸»çº¿ç¨‹åŽ»æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼Œä½†æ˜¯åœ¨æ–°é˜Ÿåˆ—ä¸­ï¼Œblockå¹¶ä¸éœ€è¦ç­‰å¾…viewDidLoadå®Œæˆæ‰æ‰§è¡Œã€‚å¦‚æžœviewDidLoadä¹Ÿæ”¾åœ¨äº†serialQueueï¼Œé‚£ä¹ˆä¹Ÿä¼šæ­»é”çš„ã€‚ è¯·æ€è€ƒä¸‹è¾¹è¿™ä¸ªè¾“å…¥çš„ç»“æžœæ˜¯å•¥æ ·çš„ï¼Ÿ 123456789101112131415dispatch_queue_t global = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0); NSLog(@&quot;0&quot;); dispatch_sync(global, ^&#123; NSLog(@&quot;1&quot;); dispatch_sync(global, ^&#123; NSLog(@&quot;2&quot;); dispatch_sync(global, ^&#123; NSLog(@&quot;3&quot;); &#125;); &#125;); NSLog(@&quot;4&quot;); &#125;); NSLog(@&quot;5&quot;);&#125; ç»“æžœæ˜¯1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œç†è§£çš„è¦ç‚¹åœ¨äºŽï¼Œsyncæ˜¯åœ¨å½“å‰çº¿ç¨‹ç›´æŽ¥å½“å‰çº¿ç¨‹æ‰§è¡Œï¼Œè™½ç„¶æ˜¯å…¨å±€é˜Ÿåˆ—ä¼šæœ‰å¤šä¸ªï¼Œå¯¹ä¸èµ·ä¸å¥½ä½¿ï¼Œçº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œå¹¶å‘ä¸Žå¦å–å†³äºŽçº¿ç¨‹ï¼Œæ‰€ä»¥è¿˜æ˜¯åœ¨å½“å‰çº¿ç¨‹è€è€å®žå®žæŽ’é˜Ÿå§ã€‚å¦‚æžœè¿™é‡Œçš„globalqueueæ¢æˆä¸²è¡Œé˜Ÿåˆ—ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿæ­»é”ï¼ŒåŽŸå› å’Œæœ€ä¸Šè¾¹é‚£ä¸ªä¸€æ ·ã€‚ è¿™å¥æ‰“å°çš„æ˜¯å•¥å†…å®¹ï¼Ÿ 123456- (void)viewDidLoad &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; NSLog(@&quot;%@&quot;,[NSThread currentThread]); &#125;);&#125; ç­”æ¡ˆæ˜¯mainï¼Œå› ä¸ºä¸»é˜Ÿåˆ—åªèƒ½åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ ä¸‹è¾¹è¿™ä¸ªè¾“å‡ºå•¥ï¼Ÿ123456dispatch_queue_t gloabl = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0); dispatch_async(gloabl, ^&#123; NSLog(@&quot;123&quot;); NSLog(@&quot;%@&quot;,[NSThread currentThread]); [self performSelector:@selector(dosomething) withObject:nil afterDelay:0]; &#125;); 12123&lt;NSThread: 0x60400027a800&gt;&#123;number = 3, name = (null)&#125; ä¸ºå•¥æ²¡æœ‰dosomethingï¼Ÿå› ä¸ºperformselectoréœ€è¦timeræ·»åŠ åˆ°runloopï¼Œä½†æ˜¯ç›´æŽ¥å¼€çº¿ç¨‹æ˜¯æ²¡æœ‰runloopçš„ å¤šè¯»å•å†™çš„å®žçŽ°å¼‚æ­¥æ …æ dispatch_barrier_async(&lt;#dispatch_queue_t _Nonnull queue#&gt;, &lt;#^(void)block#&gt;) dispatch_barrier_asyncsyncä¸ŽasyncåŒºåˆ« dispatch_barrier_syncå’Œdispatch_barrier_asyncçš„å…±åŒç‚¹ï¼š1ã€éƒ½ä¼šç­‰å¾…åœ¨å®ƒå‰é¢æ’å…¥é˜Ÿåˆ—çš„ä»»åŠ¡ï¼ˆ1ã€2ã€3ï¼‰å…ˆæ‰§è¡Œå®Œ2ã€éƒ½ä¼šç­‰å¾…ä»–ä»¬è‡ªå·±çš„ä»»åŠ¡ï¼ˆ0ï¼‰æ‰§è¡Œå®Œå†æ‰§è¡ŒåŽé¢çš„ä»»åŠ¡ï¼ˆ4ã€5ã€6ï¼‰ dispatch_barrier_syncå’Œdispatch_barrier_asyncçš„ä¸å…±åŒç‚¹ï¼šåœ¨å°†ä»»åŠ¡æ’å…¥åˆ°queueçš„æ—¶å€™ï¼Œdispatch_barrier_syncéœ€è¦ç­‰å¾…è‡ªå·±çš„ä»»åŠ¡ï¼ˆ0ï¼‰ç»“æŸä¹‹åŽæ‰ä¼šç»§ç»­ç¨‹åºï¼Œç„¶åŽæ’å…¥è¢«å†™åœ¨å®ƒåŽé¢çš„ä»»åŠ¡ï¼ˆ4ã€5ã€6ï¼‰ï¼Œç„¶åŽæ‰§è¡ŒåŽé¢çš„ä»»åŠ¡è€Œdispatch_barrier_asyncå°†è‡ªå·±çš„ä»»åŠ¡ï¼ˆ0ï¼‰æ’å…¥åˆ°queueä¹‹åŽï¼Œä¸ä¼šç­‰å¾…è‡ªå·±çš„ä»»åŠ¡ç»“æŸï¼Œå®ƒä¼šç»§ç»­æŠŠåŽé¢çš„ä»»åŠ¡ï¼ˆ4ã€5ã€6ï¼‰æ’å…¥åˆ°queue æ‰€ä»¥ï¼Œdispatch_barrier_asyncçš„ä¸ç­‰å¾…ï¼ˆå¼‚æ­¥ï¼‰ç‰¹æ€§ä½“çŽ°åœ¨å°†ä»»åŠ¡æ’å…¥é˜Ÿåˆ—çš„è¿‡ç¨‹ï¼Œå®ƒçš„ç­‰å¾…ç‰¹æ€§ä½“çŽ°åœ¨ä»»åŠ¡çœŸæ­£æ‰§è¡Œçš„è¿‡ç¨‹ã€‚ å¦‚æžœçŽ°åœ¨æˆ‘ä»¬æ˜¯10ä¸ªè¯»å–çš„æ“ä½œï¼Œç„¶åŽå¹¶å‘æ‰§è¡Œå¹¶æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¦‚æžœæœ‰ä¸€ä¸ªå†™å…¥çš„æ“ä½œæŽºæ‚åœ¨å…¶ä¸­ï¼Œè¿™ä¸ªæ—¶å€™å°±æœ‰ç‚¹é—®é¢˜äº†ï¼Œè¯»å†™åŒæ—¶è¿›è¡Œï¼Œå°±ä¼šå‡ºé—®é¢˜ã€‚ è¯¥å‡½æ•°ä¸ŽConcurrent Dispatch QueueåŒæ—¶ä½¿ç”¨12345678dispatch_queue_t queueC = dispatch_queue_create(&quot;com.kugou.gcd.myQueue&quot;, DISPATCH_QUEUE_CONCURRENT);dispatch_async(queue, blk0_reading);dispatch_async(queue, blk1_reading);dispatch_async(queue, blk2_reading);dispatch_barrier_async(queue, blk3_writing);dispatch_async(queue, blk4_reading);dispatch_async(queue, blk5_reading);dispatch_async(queue, blk6_reading); è¿™æ ·å†™ç³»ç»Ÿä¼šç­‰0ï¼Œ1ï¼Œ2å¹¶å‘æ‰§è¡Œå®Œï¼Œæ‰§è¡Œblk3ï¼Œç­‰blk3æ‰§è¡Œå®Œå†å¹¶å‘æ‰§è¡Œ4ï¼Œ5ï¼Œ6 Dispatch Groupä¸‹è½½å¾ˆå¤šå›¾ç‰‡ï¼Œå½“éƒ½ä¸‹è½½å®Œæˆä¹‹åŽå†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚ å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬éƒ½éœ€è¦åšç»“æŸæ“ä½œï¼Œè¿™ä¸ªæ“ä½œè‚¯å®šæ˜¯åœ¨æœ€åŽçš„ï¼Œå¦‚æžœæ˜¯serial queueè‚¯å®šæ²¡æœ‰é—®é¢˜ï¼ŒæŠŠä»£ç æ”¾åœ¨æœ€åŽå°±å¥½äº†ï¼Œå¯æ˜¯concurrent queueæ€Žä¹ˆåŠžå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥è€ƒè™‘dispatch_grounp 123456789dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0);dispatch_group_async(group, queue, ^&#123;NSLog(@&quot;1&quot;)&#125;);dispatch_group_async(group, queue, ^&#123;NSLog(@&quot;2&quot;)&#125;);dispatch_group_async(group, queue, ^&#123;NSLog(@&quot;3&quot;)&#125;);dispatch_group_notify(group dispatch_get_main_queue(),^&#123;NSLog(@&quot;done&quot;)&#125;);dispatch_release(group); å¦å¤–ï¼Œé™¤äº†ä½¿ç”¨dispatch_group_notifyè¿˜å¯ä»¥ä½¿ç”¨dispatch_group_waitå‡½æ•°ç­‰å¾…å…¨éƒ¨å¤„ç†æ‰§è¡Œç»“æŸã€‚1long result = dispatch_group_wait(group, DISPATCH_TIME_FOREVER)]; ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºè¦ç­‰å¾…å“ªä¸ªgroupï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç­‰å¾…çš„æ—¶é—´ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥è®¾ç½®ä¸€ä¸ªdispatch_timeï¼Œå¦‚æžœè¿™ä¸ªå‡½æ•°è¿”å›žå€¼ä¸º0ï¼Œåˆ™è¡¨ç¤ºä½ å…¨éƒ¨å¤„ç†å®Œæ¯•ï¼Œå¦åˆ™ä»£è¡¨è¿˜æœ‰å‡½æ•°æ²¡æœ‰è¿”å›žã€‚ç­‰å¾…çš„å«ä¹‰æ˜¯ï¼Œä¸€æ—¦è°ƒç”¨waitå‡½æ•°ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°çš„çº¿ç¨‹å°±ä¼šåœæ­¢ï¼Œåœ¨ç»è¿‡æŒ‡å®šçš„æ—¶é—´æˆ–è€…æ˜¯groupä¸­çš„å…¨éƒ¨æ‰§è¡Œéƒ½ç»“æŸä¹‹åŽï¼Œè¯¥å‡½æ•°è¿”å›žã€‚å¦‚æžœæœ‰ç»“æŸæ“ä½œè¿™ç§éœ€æ±‚æŽ¨èç¬¬ä¸€ç§å®žçŽ°æ–¹æ¡ˆã€‚ NSOperation æ·»åŠ ä»»åŠ¡ä¾èµ– ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€æŽ§åˆ¶ æœ€å¤§ç¼–å‘é‡æŽ§åˆ¶ ä»»åŠ¡çŠ¶æ€æŽ§åˆ¶æœ‰å“ªäº›ï¼Ÿ isReady isExecting isFinished isCancelled æ€Žä¹ˆæŽ§åˆ¶çŠ¶æ€ å¦‚æžœåªé‡å†™äº†mainï¼Œåº•å±‚æŽ§åˆ¶å˜æ›´ä»»åŠ¡æ‰§è¡Œå®ŒæˆçŠ¶æ€ å¦‚æžœé‡å†™äº†startï¼Œéœ€è¦è‡ªè¡ŒæŽ§åˆ¶çŠ¶æ€ æ€Žä¹ˆç§»é™¤ä¸€ä¸ªisFinishedçš„NSOperationçš„ï¼ŸKVO NSThreadå¸¸é©»çº¿ç¨‹çš„å®žçŽ° 1234567891011121314151617181920212223242526272829301.è®¾ç½®æˆå…¨å±€çš„ï¼Œå¦‚æžœæ˜¯çº¿ç¨‹å¯¹è±¡æ˜¯å±€éƒ¨çš„å°±ä¼šæ­»æŽ‰@property (nonatomic,strong) NSThread *thread;2.åˆå§‹åŒ–çº¿ç¨‹å¹¶å¯åŠ¨self.thread = [[NSThread alloc]initWithTarget:self selector:@selector(run) object:nil];[self.thread start];3.å¯åŠ¨RunLoopï¼Œå­çº¿ç¨‹çš„RunLoopé»˜è®¤æ˜¯åœæ­¢çš„- (void)run&#123; //åªè¦å¾€RunLoopä¸­æ·»åŠ äº† timerã€sourceæˆ–è€…observerå°±ä¼šç»§ç»­æ‰§è¡Œï¼Œä¸€ä¸ªRun Loopé€šå¸¸å¿…é¡»åŒ…å«ä¸€ä¸ªè¾“å…¥æºæˆ–è€…å®šæ—¶å™¨æ¥ç›‘å¬äº‹ä»¶ï¼Œå¦‚æžœä¸€ä¸ªéƒ½æ²¡æœ‰ï¼ŒRun Loopå¯åŠ¨åŽç«‹å³é€€å‡ºã€‚ @autoreleasepool &#123; //1ã€æ·»åŠ ä¸€ä¸ªinput source [[NSRunLoop currentRunLoop] addPort:[NSPort port] forMode:NSDefaultRunLoopMode]; [[NSRunLoop currentRunLoop] run]; //2ã€æ·»åŠ ä¸€ä¸ªå®šæ—¶å™¨ NSTimer *timer = [NSTimer timerWithTimeInterval:2.0 target:self selector:@selector(test) userInfo:nil repeats:YES]; [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode]; [[NSRunLoop currentRunLoop] run]; &#125;&#125;è¿™æ ·threadè¿™ä¸ªçº¿ç¨‹å°±ä¼šä¸€ç›´å­˜åœ¨ï¼Œå½“éœ€è¦ä½¿ç”¨æ­¤çº¿ç¨‹åœ¨å¤„ç†ä¸€äº›äº‹æƒ…çš„æ—¶å€™å°±è¿™ä¹ˆè°ƒç”¨4.åˆ©ç”¨å¸¸é©»çº¿ç¨‹å¤„ç†äº‹æƒ…[self performSelector:@selector(action) onThread:self.thread withObject:nil waitUntilDone:NO ]; çœ‹ä¸€ä¸‹è¿™ä¸ªä»£ç çš„é—®é¢˜: 123456789dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; NSTimer * timer = [NSTimer timerWithTimeInterval:1.f repeats:YES block:^(NSTimer * _Nonnull timer) &#123; static int count = 0; [NSThread sleepForTimeInterval:1]; //ä¼‘æ¯ä¸€ç§’é’Ÿï¼Œæ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;%s - %d&quot;,__func__,count++); &#125;]; [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; &#125;); æ ¹æœ¬å•¥éƒ½ä¸ä¼šå‘ç”Ÿï¼Œå› ä¸ºè¿™ä¸ªå­çº¿ç¨‹çš„runloopéœ€è¦è°ƒç”¨runæ–¹æ³•æ‰å¯ä»¥ã€‚ [[NSRunLoop currentRunLoop] run];//å­çº¿ç¨‹éœ€è¦æ‰‹åŠ¨å¼€å¯Runloop threadå¯åŠ¨æµç¨‹ é•¿é©»å­çº¿ç¨‹æ˜¯åœ¨selectorä¸­è¿›è¡Œï¼Œå¦‚ä¸Š é” @synchronizedï¼Œå•ä¾‹å¯¹è±¡çš„æ—¶å€™ä½¿ç”¨ atomicï¼Œèµ‹å€¼æ“ä½œåŽŸå­æ€§ï¼Œä½†ä¸ä¿è¯ä½¿ç”¨ OSSpinLockï¼Œè‡ªæ—‹é”ï¼Œå¾ªçŽ¯ç­‰å¾…ï¼Œå¹¶ä¸é‡Šæ”¾å½“å‰èµ„æºï¼Œä¸€ç›´ç­‰åˆ°èƒ½å¤ŸèŽ·å–è¿™ä¸ªé”ï¼Œç”¨äºŽè½»é‡çº§æ•°æ®è®¿é—® NSRecursiveLockï¼Œé€’å½’é”ï¼Œå¯ä»¥é‡å¤ NSLockï¼Œäº’æ–¥é”ï¼Œä¸èƒ½é‡å¤ï¼Œæ¯”å¦‚æˆ‘èŽ·å–äº†é”ï¼Œæ²¡æœ‰è§£çš„æ—¶å€™åˆèŽ·å–é”ï¼Œå°±ä¼šæ­»é” dispatch_semaphore_tï¼Œä¿¡å·é‡ dispatch_semaphore_t123dispatch_semaphore_t t = dispatch_semaphore_create(1); //åˆ›å»ºdispatch_semaphore_wait(t, DISPATCH_TIME_FOREVER); //ç­‰å¾…å“ªä¸ªï¼Œæ°¸è¿œdispatch_semaphore_signal(t); ä¿¡å·é‡ï¼šå°±æ˜¯ä¸€ç§å¯ç”¨æ¥æŽ§åˆ¶è®¿é—®èµ„æºçš„æ•°é‡çš„æ ‡è¯†ï¼Œè®¾å®šäº†ä¸€ä¸ªä¿¡å·é‡ï¼Œåœ¨çº¿ç¨‹è®¿é—®ä¹‹å‰ï¼ŒåŠ ä¸Šä¿¡å·é‡çš„å¤„ç†ï¼Œåˆ™å¯å‘ŠçŸ¥ç³»ç»ŸæŒ‰ç…§æˆ‘ä»¬æŒ‡å®šçš„ä¿¡å·é‡æ•°é‡æ¥æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ã€‚ å…¶å®žï¼Œè¿™æœ‰ç‚¹ç±»ä¼¼é”æœºåˆ¶äº†ï¼Œåªä¸è¿‡ä¿¡å·é‡éƒ½æ˜¯ç³»ç»Ÿå¸®åŠ©æˆ‘ä»¬å¤„ç†äº†ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æ‰§è¡Œçº¿ç¨‹ä¹‹å‰ï¼Œè®¾å®šä¸€ä¸ªä¿¡å·é‡å€¼ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨æ—¶ï¼ŒåŠ ä¸Šä¿¡å·é‡å¤„ç†æ–¹æ³•å°±è¡Œäº†ã€‚ ç†è§£æˆåœè½¦ä½ï¼Œdispatch_semaphore_tä¸ªæ•°ï¼Œdispatch_semaphore_waitå‡å°‘ä¸€ä¸ªå¯ç”¨ï¼Œdispatch_semaphore_signalå¢žåŠ ä¸€ä¸ªå¯ç”¨123456789101112131415161718192021222324252627282930-(void)dispatchSignal&#123; //crateçš„valueè¡¨ç¤ºï¼Œæœ€å¤šå‡ ä¸ªèµ„æºå¯è®¿é—® dispatch_semaphore_t semaphore = dispatch_semaphore_create(2); //åŒæ—¶åªèƒ½æœ‰ä¸¤ä¸ªçº¿ç¨‹åŽ»å¤„ç† dispatch_queue_t quene = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0); //ä»»åŠ¡1 dispatch_async(quene, ^&#123; dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER); NSLog(@&quot;run task 1&quot;); sleep(1); NSLog(@&quot;complete task 1&quot;); dispatch_semaphore_signal(semaphore); &#125;);&lt;br&gt; //ä»»åŠ¡2 dispatch_async(quene, ^&#123; dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER); NSLog(@&quot;run task 2&quot;); sleep(1); NSLog(@&quot;complete task 2&quot;); dispatch_semaphore_signal(semaphore); &#125;);&lt;br&gt; //ä»»åŠ¡3 dispatch_async(quene, ^&#123; dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER); NSLog(@&quot;run task 3&quot;); sleep(1); NSLog(@&quot;complete task 3&quot;); dispatch_semaphore_signal(semaphore); &#125;); &#125; é¢˜ç›®æ€»ç»“:å¤šè¯»å•å†™å‡ ç§å¤šçº¿ç¨‹æŠ€æœ¯ï¼Œæ€Žä¹ˆé€‰æ‹©ï¼ŸGCDç”¨æ¥å®žçŽ°ç®€å•çš„çº¿ç¨‹åŒæ­¥ï¼Œå¤šè¯»å•å†™ NSOperationï¼Œæ–¹ä¾¿æŽ§åˆ¶çº¿ç¨‹çŠ¶æ€ï¼Œä»¥åŠæ·»åŠ ä¾èµ–ï¼Œåœ¨AFNä¸­æœ‰ä½¿ç”¨ NSThreadç”¨æ¥å®žçŽ°å¸¸é©»çº¿ç¨‹ å¦‚ä½•ç»ˆæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹URLSessionæœ‰cancleçš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æŽ¥å–æ¶ˆï¼Œè€Œæ‰§è¡Œè€—æ—¶æ“ä½œéœ€è¦æå‰é¢„ç½®flagï¼Œé€šè¿‡æ›´æ”¹flagè¿›è¡Œreturnã€‚ çº¿ç¨‹é—´å…±äº«èµ„æºï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¿›è¡Œflagä¿®æ”¹ã€‚ æŸç•Œé¢å­˜åœ¨å¤šä¸ªè¯·æ±‚ï¼Œå¸Œæœ›æ‰€æœ‰è¯·æ±‚å‡ç»“æŸæ‰è¿›è¡ŒæŸæ“ä½œä¸€ä¸ªé¡µé¢åŒæ—¶å¤šä¸ªè¯·æ±‚çš„å†™æ³• 123456789101112131415161718192021222324252627282930dispatch_group_t group = dispatch_group_create(); dispatch_group_enter(group); dispatch_group_async(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; //è¯·æ±‚1 [ç½‘ç»œè¯·æ±‚:&#123; æˆåŠŸï¼šdispatch_group_leave(group); å¤±è´¥ï¼šdispatch_group_leave(group);&#125;]; &#125;); dispatch_group_enter; dispatch_group_async(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; //è¯·æ±‚2 [ç½‘ç»œè¯·æ±‚:&#123; æˆåŠŸï¼šdispatch_group_leave; å¤±è´¥ï¼šdispatch_group_leave;&#125;]; &#125;); dispatch_group_enter(group); dispatch_group_async(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; //è¯·æ±‚3 [ç½‘ç»œè¯·æ±‚:&#123; æˆåŠŸï¼šdispatch_group_leave(group); å¤±è´¥ï¼šdispatch_group_leave(group);&#125;]; &#125;); dispatch_group_notify(group, dispatch_get_main_queue(), ^&#123; //ç•Œé¢åˆ·æ–° NSLog(@&quot;ä»»åŠ¡å‡å®Œæˆï¼Œåˆ·æ–°ç•Œé¢&quot;); &#125;);dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER); è¿™é‡Œè¦ç”¨ä¸€ä¸ªdispatch_group_enterï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸çŸ¥é“ç½‘ç»œä»€ä¹ˆæ—¶å€™å›žæ¥ï¼Œç›¸å½“äºŽç½‘ç»œå‘é€å‡ºåŽ»ï¼Œè¿™ä¸ªå°±ç»“æŸäº†ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ±‡æ€»]]></title>
    <url>%2F2015%2F07%2F01%2F%E6%B1%87%E6%80%BB%2F</url>
    <content type="text"><![CDATA[UIè§†å›¾ç›¸å…³UIViewControllerç”Ÿå‘½å‘¨æœŸå½“ä¸€ä¸ªè§†å›¾æŽ§åˆ¶å™¨è¢«åˆ›å»ºï¼Œå¹¶åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„æ—¶å€™ã€‚ ä»£ç çš„æ‰§è¡Œé¡ºåº 1ã€ alloc åˆ›å»ºå¯¹è±¡ï¼Œåˆ†é…ç©ºé—´ 2ã€init (initWithNibName) åˆå§‹åŒ–å¯¹è±¡ï¼Œåˆå§‹åŒ–æ•°æ® 3ã€loadView ä»Žnibè½½å…¥è§†å›¾ ï¼Œé€šå¸¸è¿™ä¸€æ­¥ä¸éœ€è¦åŽ»å¹²æ¶‰ã€‚é™¤éžä½ æ²¡æœ‰ä½¿ç”¨xibæ–‡ä»¶åˆ›å»ºè§†å›¾ 4ã€viewDidLoad è½½å…¥å®Œæˆï¼Œå¯ä»¥è¿›è¡Œè‡ªå®šä¹‰æ•°æ®ä»¥åŠåŠ¨æ€åˆ›å»ºå…¶ä»–æŽ§ä»¶ 5ã€viewWillAppear è§†å›¾å°†å‡ºçŽ°åœ¨å±å¹•ä¹‹å‰ï¼Œé©¬ä¸Šè¿™ä¸ªè§†å›¾å°±ä¼šè¢«å±•çŽ°åœ¨å±å¹•ä¸Šäº† 6ã€viewDidAppear è§†å›¾å·²åœ¨å±å¹•ä¸Šæ¸²æŸ“å®Œæˆ å½“ä¸€ä¸ªè§†å›¾è¢«ç§»é™¤å±å¹•å¹¶ä¸”é”€æ¯çš„æ—¶å€™çš„æ‰§è¡Œé¡ºåºï¼Œè¿™ä¸ªé¡ºåºå·®ä¸å¤šå’Œä¸Šé¢çš„ç›¸å 1ã€viewWillDisappear è§†å›¾å°†è¢«ä»Žå±å¹•ä¸Šç§»é™¤ä¹‹å‰æ‰§è¡Œ 2ã€viewDidDisappear è§†å›¾å·²ç»è¢«ä»Žå±å¹•ä¸Šç§»é™¤ï¼Œç”¨æˆ·çœ‹ä¸åˆ°è¿™ä¸ªè§†å›¾äº† 3ã€dealloc è§†å›¾è¢«é”€æ¯ï¼Œæ­¤å¤„éœ€è¦å¯¹ä½ åœ¨initå’Œ viewDidLoadä¸­åˆ›å»ºçš„å¯¹è±¡è¿›è¡Œé‡Šæ”¾ tableviewçš„cellé‡ç”¨æœºåˆ¶tablevieçš„æ•°æ®æºåŒæ­¥ä¸¤ç§ä¸€ç§æ˜¯æ‹·è´æ•°æ®ï¼Œç„¶åŽå¹¶å‘æ‰§è¡Œï¼Œä¸€ç§æ˜¯åœ¨ä¸²è¡Œé˜Ÿåˆ—ä¸­åŽ»æ‰§è¡Œ UIViewä¸ŽCALayerçš„åŒºåˆ«UIViewå‚ä¸Žå“åº”é“¾æ¡ï¼Œå¤„ç†äº‹ä»¶ï¼ŒCALayerè´Ÿè´£æ˜¾ç¤ºå†…å®¹å•ä¸€èŒè´£åŽŸåˆ™ äº‹ä»¶ä¼ é€’ å¦‚ä½•å®žçŽ°ä¸€ä¸ªæ­£æ–¹å½¢ï¼Œåªæœ‰ä¸­é—´åœ†å½¢å“åº”äº‹ä»¶å‘¢ï¼Ÿé‡å†™- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event cpucpuè´Ÿè´£ å¸ƒå±€å’Œæ–‡æœ¬è®¡ç®—ï¼Œç»˜åˆ¶ï¼Œå›¾ç‰‡ç¼–è§£ç ï¼Œæäº¤ä½å›¾ å¡é¡¿å’ŒæŽ‰å¸§çš„æ ¹æœ¬åŽŸå› æ»‘åŠ¨ä¼˜åŒ–CPU å¯¹è±¡çš„åˆ›å»ºï¼Œé”€æ¯ï¼Œè°ƒæ•´ é¢„æŽ’ç‰ˆ(å¸ƒå±€è®¡ç®—ï¼Œæ–‡æœ¬è®¡ç®—) é¢„æ¸²æŸ“(æ–‡æœ¬å¼‚æ­¥ç»˜åˆ¶ï¼Œå›¾ç‰‡è§£ç ) GPU ç¦»å±æ¸²æŸ“ è§†å›¾æ··åˆ(é€æ˜Žåº¦) UIViewç»˜åˆ¶æµç¨‹ ç³»ç»Ÿç»˜åˆ¶æµç¨‹å›¾ å¼‚æ­¥ç»˜åˆ¶æµç¨‹ [layer.delegate displayLayer:] ä»£ç†è´Ÿè´£ç”Ÿæˆbitmap è®¾ç½®bitmapä¸ºlayerçš„contentså±žæ€§ çŽ°åœ¨é—®ä¸€ä¸ªé—®é¢˜ï¼Œå¼‚æ­¥ç»˜åˆ¶çš„æ—¶å€™ï¼Œæ˜¯åœ¨æœ¬æ¬¡runloopçš„æ—¶å€™æäº¤gpuçš„å—ï¼Ÿ å¹¶ä¸æ˜¯ï¼Œæ˜¯åœ¨ä¸‹ä¸€æ¬¡ç»˜åˆ¶çš„æ—¶å€™ã€‚ drawrectä¸ºä»€ä¹ˆä¼šå¯¼è‡´å†…å­˜æš´å¢žåŽŸæ–‡é“¾æŽ¥ - (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx;è¿™ä¸ªæ–¹æ³•è°ƒç”¨ä¹‹å‰ï¼ŒCALayeråˆ›å»ºäº†ä¸€ä¸ªåˆé€‚å°ºå¯¸çš„ç©ºå¯„å®¿å›¾ï¼ˆå°ºå¯¸ç”±boundså’ŒcontentsScaleå†³å®šï¼‰å’Œä¸€ä¸ªCore Graphicsçš„ç»˜åˆ¶ä¸Šä¸‹æ–‡çŽ¯å¢ƒï¼Œä¸ºç»˜åˆ¶å¯„å®¿å›¾åšå‡†å¤‡ï¼Œå®ƒä½œä¸ºctxå‚æ•°ä¼ å…¥ã€‚åœ¨è¿™ä¸€æ­¥ç”Ÿæˆçš„ç©ºå¯„å®¿å›¾å†…å­˜æ˜¯ç›¸å½“å·¨å¤§çš„ï¼Œå®ƒå°±æ˜¯æœ¬æ¬¡å†…å­˜é—®é¢˜çš„å…³é”®ï¼Œä¸€æ—¦ä½ å®žçŽ°äº†CALayerDelegateåè®®ä¸­çš„-drawLayer:inContext:æ–¹æ³•æˆ–è€…UIViewä¸­çš„-drawRect:æ–¹æ³•ï¼ˆå…¶å®žå°±æ˜¯å‰è€…çš„åŒ…è£…æ–¹æ³•ï¼‰ï¼Œå›¾å±‚å°±åˆ›å»ºäº†ä¸€ä¸ªç»˜åˆ¶ä¸Šä¸‹æ–‡ï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡éœ€è¦çš„å†…å­˜å¯ä»Žè¿™ä¸ªå…¬å¼å¾—å‡ºï¼šå›¾å±‚å®½å›¾å±‚é«˜4 å­—èŠ‚ï¼Œå®½é«˜çš„å•ä½å‡ä¸ºåƒç´ ã€‚è€Œæˆ‘ä»¬çš„ç”»æ¿ç¨‹åºå› ä¸ºè¦æ”¯æŒåƒçŒ¿é¢˜åº“ä¸€æ ·ä¸¤æŒ‡æŒªåŠ¨çš„æ•ˆæžœï¼Œæˆ‘ä»¬å¼€è¾Ÿçš„ç”»æ¿å¤§å°ä¸ºï¼š _myDrawer = [[BHBMyDrawer alloc] initWithFrame: CGRectMake(0, 0, SCREEN_SIZE.width*5, SCREEN_SIZE.height*2)];æˆ‘ä»¬çš„ç”»æ¿ç¨‹åºçš„ç”»æ¿è§†å›¾å®ƒåœ¨iPhone6s plusæœºå™¨ä¸Šçš„ä¸Šä¸‹æ–‡å†…å­˜é‡å°±æ˜¯ 19202108054 å­—èŠ‚ï¼Œ ç›¸å½“äºŽ79MBå†…å­˜ï¼Œå›¾å±‚æ¯æ¬¡é‡ç»˜çš„æ—¶å€™éƒ½éœ€è¦é‡æ–°æŠ¹æŽ‰å†…å­˜ç„¶åŽé‡æ–°åˆ†é…ã€‚å®ƒå°±æ˜¯æˆ‘ä»¬ç”»æ¿ç¨‹åºå†…å­˜æš´å¢žçš„çœŸæ­£åŽŸå›  drawRectæ–¹æ³•ä¾èµ–Core Graphicsæ¡†æž¶æ¥è¿›è¡Œè‡ªå®šä¹‰çš„ç»˜åˆ¶ï¼Œä½†è¿™ç§æ–¹æ³•ä¸»è¦çš„ç¼ºç‚¹å°±æ˜¯å®ƒå¤„ç†touchäº‹ä»¶çš„æ–¹å¼ï¼šæ¯æ¬¡æŒ‰é’®è¢«ç‚¹å‡»åŽï¼Œéƒ½ä¼šç”¨setNeddsDisplayè¿›è¡Œå¼ºåˆ¶é‡ç»˜ï¼›è€Œä¸”ä¸æ­¢ä¸€æ¬¡ï¼Œæ¯æ¬¡å•ç‚¹äº‹ä»¶è§¦å‘ä¸¤æ¬¡æ‰§è¡Œã€‚è¿™æ ·çš„è¯ä»Žæ€§èƒ½çš„è§’åº¦æ¥è¯´ï¼Œå¯¹CPUå’Œå†…å­˜æ¥è¯´éƒ½æ˜¯æ¬ ä½³çš„ã€‚ç‰¹åˆ«æ˜¯å¦‚æžœåœ¨æˆ‘ä»¬çš„ç•Œé¢ä¸Šæœ‰å¤šä¸ªè¿™æ ·çš„UIButtonå®žä¾‹ ç¦»å±æ¸²æŸ“è¿™ä¸ªæ¦‚å¿µèµ·æºäºŽGPUï¼Œå½“æŸäº›è§†å›¾çš„æŸäº›å±žæ€§ä¸èƒ½åœ¨æœªåˆæˆä¹‹å‰ç”¨äºŽå±å¹•ç›´æŽ¥æ˜¾ç¤ºçš„æ—¶å€™å°±ä¼šåœ¨å½“å‰å±å¹•ç¼“å†²åŒºä¹‹å¤–å†å¼€è¾Ÿä¸€ä¸ªç¼“å†²åŒºè¿›è¡Œæ¸²æŸ“æ“ä½œã€‚ ä½•æ—¶è§¦å‘ï¼Ÿ åœ†è§’å’Œmasktoboundä¸€èµ·è®¾ç½® å›¾å±‚è’™ç‰ˆ å…‰æ …åŒ– é˜´å½± ä¸ºä½•è¦é¿å…UIå¡é¡¿å’ŒæŽ‰å¸§ åˆ›å»ºæ–°çš„ç¼“å†²åŒº ä¸Šä¸‹æ–‡åˆ‡æ¢ OCè¯­è¨€åŸºç¡€å…³äºŽSELçš„ç†è§£123456789NSLog(@&quot;%d&quot;, @selector(testView));NSLog(@&quot;%d&quot;, @selector(testView1)); NSLog(@&quot;%d&quot;, NSSelectorFromString(@&quot;testView&quot;)); NSLog(@&quot;%p&quot;,@&quot;testView&quot;); ``` è¾“å‡º 2018-07-10 17:28:37.378285+0800 Ceshi[18642:3374809] 1650343472018-07-10 17:28:37.378342+0800 Ceshi[18642:3374809] 1650344102018-07-10 17:28:37.378411+0800 Ceshi[18642:3374809] 1650343472018-07-10 17:28:37.378494+0800 Ceshi[18642:3374809] 0x109d6512812345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697è¿™é‡Œæ˜¯ä¸€ä¸ªæ•°å­—åˆ°å­—ç¬¦ä¸²çš„æ˜ å°„å…³ç³»ï¼Œä½†ä¹Ÿä¸æ˜¯ç®€å•çš„åœ°å€çš„æ˜ å°„#### selfä¸Žsuper[self/super](https://blog.csdn.net/shihuboke/article/details/78967824)objc_msgSend(id,sel)objc_msgSendSuper(struct,sel)#### åˆ†ç±»åšå“ªäº›äº‹- å£°æ˜Žç§æœ‰æ–¹æ³•- åˆ†è§£åºžå¤§çš„ç±»æ–‡ä»¶- æŠŠframeworkç§æœ‰æ–¹æ³•å…¬å¼€#### åˆ†ç±»ç‰¹ç‚¹- è¿è¡Œæ—¶å†³è®®(ç¼–è¯‘æ—¶ï¼Œåˆ†ç±»å’Œå®¿ä¸»æ²¡æœ‰ä¸€æ¯›é’±å…³ç³»)- å¯ä»¥ä¸ºç³»ç»Ÿæ·»åŠ åˆ†ç±»æœ€åŽç¼–è¯‘çš„åˆ†ç±»çš„æ–¹æ³•ï¼Œæœ€å…ˆè¢«æœç´¢åˆ°ï¼ŒåŒæ—¶åœ¨å®¿ä¸»ä¹‹å‰ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ€Žä¹ˆæ›¿æ¢å®¿ä¸»çš„æ–¹æ³•çš„åŽŸç†æœ€ç»ˆåˆ†ç±»ä¸­çš„æ–¹æ³•æ˜¯æ‹¼æŽ¥åˆ°å®¿ä¸»ç±»ä¸­å¾—ä»¥è¢«è°ƒç”¨çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆåˆ†ç±»æ˜¯è¿è¡Œæ—¶å†³è®®ï¼Œè¿™ä¸ªæ—¶å€™æ³¨æ„ï¼Œåœ¨ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­æˆ‘ä»¬æ˜¯æ­£å‘éåŽ†çš„ï¼Œä½†æ˜¯æ‹¼æŽ¥çš„æ—¶å€™æ˜¯åå‘éåŽ†æ‹¼æŽ¥çš„ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆåˆ†ç±»å¯ä»¥è¦†ç›–å®¿ä¸»æ–¹æ³•å‘¢ï¼Œæ˜¯å› ä¸ºåœ¨è¿›è¡Œæ‹¼æŽ¥çš„æ—¶å€™ä¼šè®²å®¿ä¸»æ–¹æ³•æŒªåˆ°åˆ†ç±»æ–¹æ³•çš„åŽè¾¹ã€‚![](../../../images/2018-07-0112.00.34.png)#### åˆ†ç±»ä¸­éƒ½èƒ½æ·»åŠ ä»€ä¹ˆå†…å®¹- å®žä¾‹æ–¹æ³•- ç±»æ–¹æ³•- åè®®- å±žæ€§(å®šä¹‰äº†ä¸€ä¸ªå±žæ€§ï¼Œåªå£°æ˜Žsetå’Œgetæ–¹æ³•ï¼Œå¹¶æ²¡æœ‰æ·»åŠ å®žä¾‹å˜é‡ï¼Œå˜é‡éœ€è¦é€šè¿‡å…³è”å¯¹è±¡)#### åˆ†ç±»æ•°æ®ç»“æž„![](../../../images/2018-07-01 10.34.59.png)#### å…³è”å¯¹è±¡å…³è”å¯¹è±¡æ˜¯å¦è¢«æ·»åŠ åˆ°äº†å®¿ä¸»ç±»ï¼Ÿå…³è”å¯¹è±¡æœ¬è´¨![](../../../images/2018-07-0112.07.40.png)ç­–ç•¥:retainæˆ–è€…copy![](../../../images/2018-07-01 12.12.50.png)#### ç”¨æ‰©å±•æ¥åšä»€ä¹ˆ- å£°æ˜Žç§æœ‰å±žæ€§- å£°æ˜Žç§æœ‰æ–¹æ³•- å£°æ˜Žç§æœ‰å˜é‡- å£°æ˜Žç§æœ‰å±žæ€§#### æ‰©å±•å’Œåˆ†ç±»çš„åŒºåˆ«- è¿™ä¸ªæ˜¯ç¼–è¯‘çš„æ—¶å€™å†³è®®- ä¸èƒ½ä¸ºç³»ç»Ÿç±»æ·»åŠ æ‰©å±•- åªæ˜¯ä»¥å£°æ˜Žçš„å½¢å¼å­˜åœ¨#### ä»£ç†- ä»£ç†æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼- ä¸Žé€šçŸ¥çš„åŒºåˆ«æ˜¯ä»£ç†ä¸€å¯¹ä¸€ï¼Œé€šçŸ¥ä¸€å¯¹å¤š- å§”æ‰˜æ–¹ä»¥weakå£°æ˜Žï¼Œé˜²æ­¢å¾ªçŽ¯å¼•ç”¨ï¼Œä»£ç†æ–¹ç”¨strongå£°æ˜Ž#### é€šçŸ¥- ç”¨è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼å®žçŽ°çš„- ä¸€å¯¹å¤š![](../../../images/2018-07-0112.27.51.png)observerä¸­åŒ…å«è§‚å¯Ÿè€…å¯¹è±¡ï¼Œå’Œå›žè°ƒçš„æ–¹æ³•#### KVOkey-value-observingè§‚å¯Ÿè€…æ¨¡å¼çš„å®žçŽ°ä½¿ç”¨isaæ··å†™æŠ€æœ¯æ¥å®žçŽ°kvo![](../../../images/2018-07-01 7.07.35.png)![](../../../images/2018-07-01 7.12.03.png)é€šè¿‡kvcè®¾ç½®valueï¼Œkvoèƒ½å¦ç”Ÿæ•ˆï¼Ÿå¯ä»¥ï¼Œå› ä¸ºè°ƒç”¨äº†setteræ–¹æ³•é‚£ä¹ˆé€šè¿‡æˆå‘˜å˜é‡ç›´æŽ¥èµ‹å€¼èƒ½å¦ç”Ÿæ•ˆï¼Ÿä¸èƒ½ï¼Œæ²¡æœ‰è°ƒç”¨setteræ–¹æ³•æ‰‹åŠ¨kvoæ˜¯ä»€ä¹ˆï¼Ÿkvoèƒ½å¦ä½¿ç”¨æˆå‘˜å˜é‡ä½œä¸ºkï¼Ÿå¯ä»¥çš„ï¼Œåœ¨åº•å±‚ä¼šä¸ºå…¶åˆ›å»ºsetteræ–¹æ³•ï¼Œåœ¨å…¶ä»–åœ°æ–¹è°ƒç”¨æˆ–è€…è¿›è¡Œkvcçš„æ—¶å€™å°±ä¼šè°ƒç”¨[kvoä½¿ç”¨ä¸­çš„å‘](https://www.cnblogs.com/wengzilin/p/4346775.html) -(void)printInfo{ NSLog(@â€isa:%@, supper class:%@â€, NSStringFromClass(object_getClass(self)), class_getSuperclass(object_getClass(self))); 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869å½“keyPathæ˜¯æˆå‘˜å˜é‡çš„æ—¶å€™ï¼Œç¡®å®žä¼šè°ƒç”¨æˆåŠŸï¼Œä½†æ˜¯å…·ä½“çš„æ–¹å¼å´å¹¶ä¸æ˜¯é‡å†™setæ–¹æ³•ï¼Œå…·ä½“æ˜¯å•¥æœ‰å¾…æŽ¢ç©¶ã€‚`willChangeValueForKey:`#### KVCkey-value-codingæ˜¯å¦ç ´åé¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³ï¼Ÿæ˜¯çš„valueForKey:![](../../../images/2018-07-01 7.22.32.png)æœ‰æ²¡æœ‰getæ–¹æ³•ï¼Œæœ‰çš„è¯ç›´æŽ¥è¿”å›žï¼Œå¦‚æžœæ²¡æœ‰çš„è¯ï¼Œé‚£ä¹ˆåŽ»çœ‹çœ‹æœ‰æ²¡æœ‰ç›¸åŒæˆ–è€…ç›¸ä¼¼çš„å˜é‡å­˜åœ¨ï¼Ÿè¿™é‡Œæœ‰ä¸€ä¸ªæ–¹æ³•å¯ä»¥ç¦æ­¢è¿™ä¸ªæµç¨‹ã€‚Accessor Method:- getKey- key- isKeyInstance Var:- _key- _isKey- key- isKeysetvalueForKeyä¸€æ ·çš„æµç¨‹å’Œé“ç†[kvcé›†åˆè¿ç®—ç¬¦](https://www.cnblogs.com/panda1024/p/6014399.html)##### KVCé›†åˆè¿ç®—ç¬¦å·å¦‚ä½•ä½¿ç”¨- å¿…é¡»ç”¨åœ¨é›†åˆå¯¹è±¡ä¸Šæ´»ç€æ™®é€šå¯¹è±¡çš„é›†åˆå±žæ€§ä¸Š- é¸¡è›‹é›†åˆè¿ç®—ç¬¦å·æœ‰@avg,@count,@max,@min,@sum- æ ¼å¼@&quot;@sum.age&quot;æˆ–è€…@&quot;é›†åˆå±žæ€§.@max.age&quot;#### å±žæ€§å…³é”®å­—è¯»å†™ readonly,readwrite åŽŸå­æ€§ atomic,nonatomicå¼•ç”¨è®¡æ•°- retain/strong- assign/unsafe_unretained- weak- copyassign/weakåŒºåˆ«- assignå¯ä»¥ä¿®é¥°intï¼Œboolï¼Œä¹Ÿå¯ä»¥ä¿®é¥°å¯¹è±¡ï¼Œweakåªèƒ½ä¿®é¥°å¯¹è±¡- assignä¿®é¥°çš„å¯¹è±¡è¢«é‡Šæ”¾åŽï¼Œä¼šå¯¼è‡´æ‚¬åž‚æŒ‡é’ˆï¼ŒweakæŒ‡é’ˆä¼šè¢«ç½®ä¸ºnil- éƒ½ä¸æ”¹å˜å¼•ç”¨è®¡æ•°`@property (copy) NSMutableArray *arr;`è¿™æ ·å£°æ˜Žæœ‰å•¥é—®é¢˜ï¼Ÿç»è¿‡copyä¿®é¥°éƒ½æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªæ·±æ‹·è´ï¼Œåªæœ‰copyä¿®é¥°ä¸å¯å˜å¯¹è±¡æ‰æ˜¯æµ…æ‹·è´æµ…æ‹·è´å¢žåŠ å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œå› ä¸ºå¤šäº†ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ï¼Œæ·±æ‹·è´æ˜¯äº§ç”Ÿäº†ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œä¸ä¼šå½±å“å¼•ç”¨è®¡æ•°ã€‚æ·±æ‹·è´vsæµ…æ‹·è´åŒºåˆ«:&gt;æ˜¯å¦å¼€è¾Ÿæ–°åœ°å€ï¼Œæ˜¯å¦å½±å“å¼•ç”¨è®¡æ•°#### atomicå®žçŽ°åœ¨ objc4-723 çš„ Objective-C runtime å®žçŽ°ä¸­ï¼Œproperty çš„ atomic æ˜¯é‡‡ç”¨ spinlock_t ä¹Ÿå°±æ˜¯ä¿—ç§°çš„è‡ªæ—‹é”å®žçŽ°çš„ã€‚å…·ä½“ä»£ç å¯ä»¥çœ‹ objc_accessors.mmï¼Œ// getter id objc_getProperty(id self, SEL _cmd, ptrdiff_t offset, BOOL atomic) { // â€¦ if (!atomic) return *slot; // Atomic retain release world spinlock_t&amp; slotlock = PropertyLocks[slot]; slotlock.lock(); id value = objc_retain(*slot); slotlock.unlock(); // ... } // setterstatic inline void reallySetProperty(id self, SEL _cmd, id newValue, ptrdiff_t offset, bool atomic, bool copy, bool mutableCopy){ // â€¦ if (!atomic) { oldValue = slot; slot = newValue; } else { spinlock_t&amp; slotlock = PropertyLocks[slot]; slotlock.lock(); oldValue = slot; slot = newValue; slotlock.unlock(); } // â€¦}123456#### é¢è¯•é¢˜![](../../../images/2018-07-01 7.46.27.png)### NSCopyingåè®®å®žçŽ° #import â€œKaoBei.hâ€ @implementation KaoBei (id)init { self = [super init]; if (self) { } return self;} (id)copyWithZone:(NSZone )zone { KaoBei instance = [[KaoBei alloc] init]; if (instance) { instance.chanPInName = self.chanPInName; instance.icon = [self.icon copyWithZone:zone]; instance.isParent = [self.isParent copyWithZone:zone]; instance.theSelected = [self.theSelected copyWithZone:zone]; instance.ids = [self.ids copyWithZone:zone]; instance.name = [self.name copyWithZone:zone]; instance.imageUrlStr = [self.imageUrlStr copyWithZone:zone]; } return instance;} (id)mutableCopyWithZone:(NSZone )zone { KaoBei instance = [[KaoBei alloc] init]; if (instance) { instance.chanPInName = self.chanPInName; instance.icon = [self.icon copyWithZone:zone]; instance.isParent = [self.isParent copyWithZone:zone]; instance.theSelected = [self.theSelected copyWithZone:zone]; instance.ids = [self.ids copyWithZone:zone]; instance.name = [self.name copyWithZone:zone]; instance.imageUrlStr = [self.imageUrlStr copyWithZone:zone]; } return instance;} 1234567891011121314#### instancetypeå’Œidçš„å¼‚åŒ##### 1ã€ç›¸åŒç‚¹éƒ½å¯ä»¥ä½œä¸ºæ–¹æ³•çš„è¿”å›žç±»åž‹##### 2ã€ä¸åŒç‚¹â‘ instancetypeå¯ä»¥è¿”å›žå’Œæ–¹æ³•æ‰€åœ¨ç±»ç›¸åŒç±»åž‹çš„å¯¹è±¡ï¼Œidåªèƒ½è¿”å›žæœªçŸ¥ç±»åž‹çš„å¯¹è±¡ï¼›â‘¡instancetypeåªèƒ½ä½œä¸ºè¿”å›žå€¼ï¼Œä¸èƒ½åƒidé‚£æ ·ä½œä¸ºå‚æ•°ï¼Œæ¯”å¦‚ä¸‹é¢çš„å†™æ³•ï¼š[objc] view plaincopyåœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡ //err,expected a type (void)setValue:(instancetype)value{ //do something}å°±æ˜¯é”™çš„ï¼Œåº”è¯¥å†™æˆï¼š[objc] view plaincopyåœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡ (void)setValue:(id)value{ //do something} 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374### runtime(é‡ç‚¹)å…ˆäº†è§£è¿™å››ç§ç»“æž„:- objc_object- objc_class- isaæŒ‡é’ˆ- method_t#### objc_objectid == objc_objectåŒ…æ‹¬isa_t isaç›¸å…³æ“ä½œå¼±å¼•ç”¨ç›¸å…³å…³è”å¯¹è±¡ç›¸å…³å†…å­˜ç®¡ç†ç›¸å…³#### objc_classClass == objc_class ç»§æ‰¿è‡ªobjc_objctåŒ…æ‹¬Class superClasscache_t cache æ–¹æ³•ç¼“å­˜class_data_bits_t bits å˜é‡ï¼Œå±žæ€§å’Œæ–¹æ³•éƒ½åœ¨è¿™##### å…³äºŽClass![](../../../images/2018-07-02 10.43.54.png)è¯´æ˜Ž:å½“æˆ‘ä»¬è°ƒç”¨å®žä¾‹æ–¹æ³•ï¼Œå®žé™…æ˜¯é€šè¿‡isaåŽ»Classå¯¹è±¡ä¸­æŸ¥æ‰¾çš„ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ç±»æ–¹æ³•ï¼Œå®žé™…æ˜¯é€šè¿‡ç±»å¯¹è±¡çš„isaåŽ»å…ƒç±»ä¸­æŸ¥æ‰¾çš„ã€‚##### å…³äºŽcache_t![](../../../images/2018-07-02 11.13.08.png)![](../../../images/2018-07-02 11.15.07.png)è¯´æ˜Žcache_tæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åŽé‡Œè¾¹æ¯ä¸ªå…ƒç´ é‡Œéƒ½æœ‰ä¸€ä¸ªkeyï¼Œä¹Ÿå³æ˜¯SELï¼Œè¿˜æœ‰ä¸€ä¸ªIMPï¼Œå½“æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªSELçš„æ—¶å€™ï¼Œé€šè¿‡hashç®—æ³•èŽ·å–è¿™ä¸ªå¯¹è±¡çš„ç´¢å¼•ï¼Œç„¶åŽå¿«é€Ÿçš„èŽ·å–åˆ°è¿™ä¸ªbucket_tï¼Œç„¶åŽèŽ·å–IMPè¿›è¡Œè°ƒç”¨##### å…³äºŽclass_data_bits_tè¿™ä¸ªæ˜¯å¯¹class_rw_tçš„å°è£…![](../../../images/2018-07-02 11.21.25.png)methodsé‡Œè¾¹æ¯ä¸€ä¸ªå…ƒç´ åˆæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åŽæ¯ä¸ªæ•°ç»„ä»£è¡¨çš„æ˜¯ä¸€ä¸ªåˆ†ç±»ä¸­çš„æ·»åŠ çš„æ‰€æœ‰çš„æ–¹æ³•ï¼Œæœ€ç»ˆéƒ½ä¼šè¢«æ±‡æ€»åˆ°è¿™é‡Œï¼Œè¿›è¡Œæ–¹æ³•æŸ¥æ‰¾çš„æ—¶å€™å°±æ˜¯åœ¨è¿™é‡Œè¿›è¡Œçš„æŸ¥æ‰¾ï¼ŒéåŽ†methodsï¼Œä»Žå‰åˆ°åŽï¼ŒçŽ°åœ¨ç¬¬ä¸€ä¸ªæ•°ç»„é‡ŒæŸ¥æ‰¾ï¼Œå†åˆ°ç¬¬äºŒä¸ªæ•°ç»„é‡ŒæŸ¥æ‰¾ï¼Œä»¥æ­¤ç±»æŽ¨åˆ†ç±»ä¸­æ·»åŠ çš„ä¸œè¥¿éƒ½åœ¨ä¸Šè¾¹è¿™ä¸ªç»“æž„ä¸­ï¼Œclass_rw_tï¼Œå®¿ä½“æœ¬èº«çš„å†…å®¹åœ¨ä¸‹è¾¹è¿™ä¸ªç»“æž„å½“ä¸­![](../../../images/ 2018-07-02 11.26.53.png)##### method_t![](../../../images/2018-07-02 11.40.12.png)![](../../../images/ 2018-07-02 11.36.39.png)ä¸€ä¸ªå‡½æ•°åªæœ‰ä¸€ä¸ªè¿”å›žå€¼ï¼Œå¤šä¸ªå‚æ•°ï¼Œè¿™é‡Œæ˜¯ç±»åž‹çš„è¡¨ç¤º##### æ€»ä½“ç»“æž„å›¾![](../../../images/ 2018-07-02 11.32.44.png)##### åŠ¨æ€æ·»åŠ æ–¹æ³•å’Œåˆ†ç±»æœ‰å•¥å…³ç³»ï¼Ÿä»–ä»¬èµ°çš„æ˜¯åŒä¸€å¥—é€»è¾‘ï¼Œéƒ½æ˜¯å°†æ–¹æ³•åŠ åœ¨äº†å¯å˜æ•°ç»„é‚£é‡Œï¼Œæˆ‘ä»¬æœ¬èº«çš„ç±»é‡Œè¾¹çš„å†…å®¹æ˜¯ä¸å¯å˜çš„ï¼Œå…·ä½“é€»è¾‘å¦‚ä¸‹å›¾ static IMPaddMethod(Class cls, SEL name, IMP imp, const char *types, bool replace){ IMP result = nil; runtimeLock.assertWriting(); assert(types); assert(cls-&gt;isRealized()); method_t *m; if ((m = getMethodNoSuper_nolock(cls, name))) { // already exists if (!replace) { result = m-&gt;imp; } else { result = _method_setImplementation(cls, m, imp); } } else { // fixme optimize method_list_t *newlist; newlist = (method_list_t *)calloc(sizeof(*newlist), 1); newlist-&gt;entsizeAndFlags = (uint32_t)sizeof(method_t) | fixed_up_method_list; newlist-&gt;count = 1; newlist-&gt;first.name = name; newlist-&gt;first.types = strdup(types); if (!ignoreSelector(name)) { newlist-&gt;first.imp = imp; } else { newlist-&gt;first.imp = (IMP)&amp;_objc_ignored_method; } prepareMethodLists(cls, &amp;newlist, 1, NO, NO); cls-&gt;data()-&gt;methods.attachLists(&amp;newlist, 1);//è¿™æ˜¯æœ€æ ¸å¿ƒçš„ä¸€å¥ï¼Œå°†newlistç»™äº†dataçš„methodsï¼Œè¿™æ˜¯é‚£ä¸ªå­˜æ”¾åˆ†ç±»æ–¹æ³•çš„äºŒç»´æ•°ç»„ flushCaches(cls); result = nil; } return result; } 12é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ŒaddIvarsæ˜¯å’‹å®žçŽ°çš„ï¼Œå› ä¸ºå¯å˜çš„å¯¹è±¡ä¸­æ²¡æœ‰ivarsï¼Œè¿™é‡Œè¦ä½“çŽ°è‹¹æžœçš„å˜é€šäº†ï¼Œç›´æŽ¥å°†ä¸å¯å˜çš„å˜æˆå¯å˜çš„.. BOOLclass_addIvar(Class cls, const char name, size_t size, uint8_t alignment, const char type){ if (!cls) return NO; if (!type) type = &quot;&quot;; if (name &amp;&amp; 0 == strcmp(name, &quot;&quot;)) name = nil; rwlock_writer_t lock(runtimeLock); assert(cls-&gt;isRealized()); // No class variables if (cls-&gt;isMetaClass()) { return NO; } // Can only add ivars to in-construction classes. if (!(cls-&gt;data()-&gt;flags &amp; RW_CONSTRUCTING)) { return NO; } // Check for existing ivar with this name, unless it&apos;s anonymous. // Check for too-big ivar. // fixme check for superclass ivar too? if ((name &amp;&amp; getIvar(cls, name)) || size &gt; UINT32_MAX) { return NO; } class_ro_t *ro_w = make_ro_writeable(cls-&gt;data());//æˆ‘æƒ³æŠŠroå˜æˆå¯å˜å†è¯´... // fixme allocate less memory here ivar_list_t *oldlist, *newlist; if ((oldlist = (ivar_list_t *)cls-&gt;data()-&gt;ro-&gt;ivars)) { size_t oldsize = oldlist-&gt;byteSize(); newlist = (ivar_list_t *)calloc(oldsize + oldlist-&gt;entsize(), 1); memcpy(newlist, oldlist, oldsize); free(oldlist); } else { newlist = (ivar_list_t *)calloc(sizeof(ivar_list_t), 1); newlist-&gt;entsizeAndFlags = (uint32_t)sizeof(ivar_t); } uint32_t offset = cls-&gt;unalignedInstanceSize(); uint32_t alignMask = (1&lt;&lt;alignment)-1; offset = (offset + alignMask) &amp; ~alignMask; ivar_t&amp; ivar = newlist-&gt;get(newlist-&gt;count++); #if x86_64 // Deliberately over-allocate the ivar offset variable. // Use calloc() to clear all 64 bits. See the note in struct ivar_t. ivar.offset = (int32_t )(int64_t )calloc(sizeof(int64_t), 1); #else ivar.offset = (int32_t *)malloc(sizeof(int32_t)); #endif *ivar.offset = offset; ivar.name = name ? strdup(name) : nil; ivar.type = strdup(type); ivar.alignment_raw = alignment; ivar.size = (uint32_t)size; ro_w-&gt;ivars = newlist; cls-&gt;setInstanceSize((uint32_t)(offset + size)); // Ivar layout updated in registerClass. return YES; }1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071#### å¯¹è±¡ï¼Œç±»å¯¹è±¡ï¼Œå…ƒç±»å¯¹è±¡æ–¹æ³•è°ƒç”¨çš„æ—¶å€™çš„æŸ¥æ‰¾è·¯å¾„å›¾![](../../../images/ 2018-07-02 11.47.06.png)æ ¹å…ƒç±»å¯¹è±¡çš„superclassæŒ‡å‘äº†NSObjectï¼Œé‚£ä¹ˆå°±æ„å‘³ç€ä¸€ä¸ªè°ƒç”¨ä¸€ä¸ªç±»æ–¹æ³•ï¼Œå¦‚æžœNSObjectä¸­æœ‰åŒåçš„å®žä¾‹æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ä¼šæ‰§è¡Œè¿™ä¸ªå®žä¾‹æ–¹æ³•ï¼Œè€Œä¸ä¼šå‘ç”Ÿå´©æºƒ#### å®žé™…ä¾‹å­![](../../../images/2018-07-02 12.03.52.png)è¿™ä¸ªé¢˜ç›®çš„ç»“æžœä¸¤ä¸ªéƒ½æ‰“å°ï¼ŒPhoneï¼Œè¿™é‡Œè¦ç†è§£è°ƒç”¨superçš„æ„æ€æ˜¯è¯´ï¼Œè·³è¿‡selfè¿™ä¸ªç±»ï¼Œç›´æŽ¥ä»Žsuperè¿™ä¸ªç±»å¯¹è±¡æ¥æŸ¥æ‰¾ï¼Œä½†æ˜¯æ¶ˆæ¯çš„æŽ¥å—è€…ä»ç„¶æ˜¯selfï¼Œæ‰€ä»¥è¿™é‡Œéƒ½æ‰“å°Phone#### æŸ¥æ‰¾è¿‡ç¨‹- ç¼“å­˜æŸ¥æ‰¾- å½“å‰ç±»æŸ¥æ‰¾![](../../../images/2018-07-0212.39.22.png)å…³é”®ç‚¹åœ¨äºŽé€šè¿‡hashæŸ¥æ‰¾ï¼Œæ‰¾åˆ°å¯¹åº”çš„bucket_tå½“å‰ç±»æŸ¥æ‰¾![](../../../images/2018-07-0212.41.50.png)çˆ¶ç±»é€çº§æŸ¥æ‰¾![](../../../images/2018-07-0212.43.03.png)æ€»æµç¨‹![](../../../images/2018-07-0212.43.41.png)#### æ¶ˆæ¯è½¬å‘æµç¨‹![](../../../images/ 2018-07-02 2.11.14.png)ä¸€ä¸ªåº”ç”¨å°±æ˜¯ç”¨æ¥å®žçŽ°å¤šé‡ä»£ç†[å¤šé‡ä»£ç†](http://www.cocoachina.com/ios/20151208/14595.html)NSPointerArrayé˜²æ­¢å¾ªçŽ¯å¼•ç”¨å†ä¸€ä¸ªåº”ç”¨å°±æ˜¯å®žçŽ°@dynamicçš„å±žæ€§#### æ–¹æ³•äº¤æ¢#### åŠ¨æ€æ·»åŠ æ–¹æ³•performSeletor:#### åŠ¨æ€æ–¹æ³•è§£æž@dynamic- åŠ¨æ€è¿è¡Œæ—¶è¯­è¨€å°†å‡½æ•°å†³è®®æŽ¨è¿Ÿåˆ°è¿è¡Œæ—¶- ç¼–è¯‘è¯­è¨€ç¼–è¯‘æ—¶å†³è®®ï¼Œæ— æ³•ä¿®æ”¹[obj foo]å’Œobj_msgSend()å‡½æ•°å…³ç³»ï¼Ÿruntimeå›¾å’Œé€šè¿‡Selectoræ‰¾åˆ°å¯¹åº”çš„IMPåœ°å€çš„ï¼Ÿ#### èƒ½å¦å‘ç¼–è¯‘åŽçš„ç±»ä¸­æ·»åŠ å®žä¾‹å˜é‡ï¼Ÿä¸èƒ½ï¼Œä¸ºå•¥ï¼Ÿ&gt;ç­”ï¼šä»Žruntimeå®žçŽ°åŽŸç†æ¥è¯´ï¼Œæœ¬æ¥æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯è‹¹æžœåšäº†ç¦æ­¢ï¼Œå°±åƒä¸‹è¾¹è¿™æ ·é€šè¿‡flagåŽ»æ ‡è®°è¿™ä¸ªç±»æ˜¯å·²ç»å»ºè®¾å®Œæˆäº†ï¼Œè¿˜æ˜¯æ­£åœ¨å»ºè®¾ä¸­ï¼Œç¼–è¯‘å®Œæˆçš„å°±æ˜¯å»ºè®¾å®Œæˆçš„ï¼ŒåŠ¨æ€æ·»åŠ çš„å°±æ˜¯æ­£åœ¨å»ºè®¾ä¸­class_addIvarå®žçŽ° // Can only add ivars to in-construction classes. if (!(cls-&gt;data()-&gt;flags &amp; RW_CONSTRUCTING)) { return NO; }``` è°ˆè°ˆloadå’Œinitializeçš„åŒºåˆ« ç¨‹åºè¿è¡ŒåŽç«‹å³æ‰§è¡Œvsç±»çš„æ–¹æ³•ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨æ‰§è¡Œ ä¸ä¼šæ²¿ç”¨çˆ¶ç±»æ–¹æ³•vsä¼šæ²¿ç”¨çˆ¶ç±»æ–¹æ³• åˆ†ç±»ä¸­å¦‚æžœæœ‰å®šä¹‰ï¼Œå…¨éƒ¨æ‰§è¡Œä½†åŽäºŽç±»ä¸­çš„ï¼Œä¹Ÿå°±æ˜¯å…ˆæ‰§è¡Œç±»æœ¬èº«ä¸­çš„vsè¦†ç›–ç±»ä¸­çš„æ–¹æ³•ï¼Œåªæ‰§è¡Œä¸€ä¸ª appå¯åŠ¨æµç¨‹å¤´æ¡å¯åŠ¨ä¼˜åŒ– å¯ä»¥ç®€å•åˆ†ä¸ºmainä¹‹å‰å–mainä¹‹åŽ mainä¹‹å‰ load dylibs image è¯»å–åº“é•œåƒæ–‡ä»¶ï¼Œå‡å°‘ç³»ç»Ÿä¾èµ–ï¼Œåˆå¹¶è‡ªå·±çš„ Rebase image Bind image å‡å°‘Objcç±»æ•°é‡ï¼Œ å‡å°‘selectoræ•°é‡ï¼Œå‡å°‘c++è™šå‡½æ•° Objc setup ç±»ï¼Œåˆ†ç±»ï¼ŒSELæ³¨å†Œ initializers mainä¹‹åŽmain()è°ƒç”¨ä¹‹åŽçš„åŠ è½½æ—¶é—´ åœ¨main()è¢«è°ƒç”¨ä¹‹åŽï¼ŒAppçš„ä¸»è¦å·¥ä½œå°±æ˜¯åˆå§‹åŒ–å¿…è¦çš„æœåŠ¡ï¼Œæ˜¾ç¤ºé¦–é¡µå†…å®¹ç­‰ã€‚è€Œæˆ‘ä»¬çš„ä¼˜åŒ–ä¹Ÿæ˜¯å›´ç»•å¦‚ä½•èƒ½å¤Ÿå¿«é€Ÿå±•çŽ°é¦–é¡µæ¥å¼€å±•ã€‚ Appé€šå¸¸åœ¨AppDelegateç±»ä¸­çš„- (BOOL)Application:(UIApplication *)Application didFinishLaunchingWithOptions:(NSDictionary *)launchOptionsæ–¹æ³•ä¸­åˆ›å»ºé¦–é¡µéœ€è¦å±•ç¤ºçš„viewï¼Œç„¶åŽåœ¨å½“å‰runloopçš„æœ«å°¾ï¼Œä¸»åŠ¨è°ƒç”¨CA::Transaction::commitå®Œæˆè§†å›¾çš„æ¸²æŸ“ã€‚è€Œè§†å›¾çš„æ¸²æŸ“ä¸»è¦æ¶‰åŠä¸‰ä¸ªé˜¶æ®µï¼š å‡†å¤‡é˜¶æ®µ è¿™é‡Œä¸»è¦æ˜¯å›¾ç‰‡çš„è§£ç å¸ƒå±€é˜¶æ®µ é¦–é¡µæ‰€æœ‰UIViewçš„- (void)layoutSubViews()è¿è¡Œç»˜åˆ¶é˜¶æ®µ é¦–é¡µæ‰€æœ‰UIViewçš„- (void)drawRect:(CGRect)rectè¿è¡Œå†åŠ ä¸Šå¯åŠ¨ä¹‹åŽå¿…è¦æœåŠ¡çš„å¯åŠ¨ã€å¿…è¦æ•°æ®çš„åˆ›å»ºå’Œè¯»å–ï¼Œè¿™äº›å°±æ˜¯æˆ‘ä»¬å¯ä»¥å°è¯•ä¼˜åŒ–çš„åœ°æ–¹å› æ­¤ï¼Œå¯¹äºŽmain()å‡½æ•°è°ƒç”¨ä¹‹å‰æˆ‘ä»¬å¯ä»¥ä¼˜åŒ–çš„ç‚¹æœ‰ï¼š ä¸ä½¿ç”¨xibï¼Œç›´æŽ¥è§†ç”¨ä»£ç åŠ è½½é¦–é¡µè§†å›¾NSUserDefaultså®žé™…ä¸Šæ˜¯åœ¨Libraryæ–‡ä»¶å¤¹ä¸‹ä¼šç”Ÿäº§ä¸€ä¸ªplistæ–‡ä»¶ï¼Œå¦‚æžœæ–‡ä»¶å¤ªå¤§çš„è¯ä¸€æ¬¡èƒ½è¯»å–åˆ°å†…å­˜ä¸­å¯èƒ½å¾ˆè€—æ—¶ï¼Œè¿™ä¸ªå½±å“éœ€è¦è¯„ä¼°ï¼Œå¦‚æžœè€—æ—¶å¾ˆå¤§çš„è¯éœ€è¦æ‹†åˆ†(éœ€è€ƒè™‘è€ç‰ˆæœ¬è¦†ç›–å®‰è£…å…¼å®¹é—®é¢˜)æ¯æ¬¡ç”¨NSLogæ–¹å¼æ‰“å°ä¼šéšå¼çš„åˆ›å»ºä¸€ä¸ªCalendarï¼Œå› æ­¤éœ€è¦åˆ å‡å¯åŠ¨æ—¶å„ä¸šåŠ¡æ–¹æ‰“çš„logï¼Œæˆ–è€…ä»…ä»…é’ˆå¯¹å†…æµ‹ç‰ˆè¾“å‡ºlogæ¢³ç†åº”ç”¨å¯åŠ¨æ—¶å‘é€çš„æ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼Œæ˜¯å¦å¯ä»¥ç»Ÿä¸€åœ¨å¼‚æ­¥çº¿ç¨‹è¯·æ±‚]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSä¸­çš„å†…å­˜ç®¡ç†]]></title>
    <url>%2F2015%2F06%2F30%2FiOS%E4%B8%AD%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%2F</url>
    <content type="text"><![CDATA[å†…å­˜å¸ƒå±€ å†…å­˜ç®¡ç†æ–¹æ¡ˆ å†…å­˜å¸ƒå±€ MRC/ARC å¼•ç”¨è®¡æ•° å¼±å¼•ç”¨ è‡ªåŠ¨é‡Šæ”¾æ±  å¾ªçŽ¯å¼•ç”¨ å†…å­˜å¸ƒå±€ æ ˆ(stack)æ–¹æ³•è°ƒç”¨éƒ½æ˜¯åœ¨æ ˆåŒºï¼Œæ ˆå‘ä¸‹å¢žé•¿ï¼Œ å †(heap)allocçš„æ•°æ®éƒ½æ˜¯åœ¨å †åŒºé—´ï¼Œè¿˜æœ‰copyè¿‡çš„block ä»£ç æ®µ(text)å†…å­˜ç®¡ç†æ–¹æ¡ˆstrongå®žçŽ°æŽ¢ç©¶ weakå®žçŽ°æŽ¢ç©¶ ä¸åŒåœºæ™¯ï¼Œä¸åŒæ–¹æ¡ˆ å°æ•°æ® TaggedPointer(NSNumber) NONPOINTER_ISAï¼Œå‰©ä½™å¤šä½™çš„ä½æ•°ç”¨æ¥å­˜å‚¨ç‚¹åˆ«çš„ï¼Œè¿™ä¸ªå…¶å®žå°±æ˜¯isa æ•£åˆ—è¡¨ï¼ŒåŒ…æ‹¬å¼•ç”¨è®¡æ•°è¡¨å’Œå¼±å¼•ç”¨è¡¨(SideTables) OCå¼•ç”¨è®¡æ•°åŽŸç† TaggedPointeråˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯å¦åœ¨ä½¿ç”¨ TaggedPointer æ˜¯çœ‹æ ‡å¿—ä½æ˜¯å¦ä¸º 1 ï¼š 1234567891011121314#if SUPPORT_MSB_TAGGED_POINTERS# define TAG_MASK (1ULL&lt;&lt;63)#else# define TAG_MASK 1inline bool objc_object::isTaggedPointer() &#123;#if SUPPORT_TAGGED_POINTERS return ((uintptr_t)this &amp; TAG_MASK);#else return false;#endif&#125; id å…¶å®žå°±æ˜¯ objc_object çš„ç®€å†™ï¼ˆtypedef struct objc_object id;ï¼‰ï¼Œå®ƒçš„ isTaggedPointer() æ–¹æ³•ç»å¸¸ä¼šåœ¨æ“ä½œå¼•ç”¨è®¡æ•°æ—¶ç”¨åˆ°ï¼Œå› ä¸ºè¿™å†³å®šäº†å­˜å‚¨å¼•ç”¨è®¡æ•°çš„ç­–ç•¥ æœ‰äº›å¯¹è±¡å¦‚æžœæ”¯æŒä½¿ç”¨ TaggedPointerï¼Œè‹¹æžœä¼šç›´æŽ¥å°†å…¶æŒ‡é’ˆå€¼ä½œä¸ºå¼•ç”¨è®¡æ•°è¿”å›žï¼›å¦‚æžœå½“å‰è®¾å¤‡æ˜¯ 64 ä½çŽ¯å¢ƒå¹¶ä¸”ä½¿ç”¨ Objective-C 2.0ï¼Œé‚£ä¹ˆâ€œä¸€äº›â€å¯¹è±¡ä¼šä½¿ç”¨å…¶ isa æŒ‡é’ˆçš„ä¸€éƒ¨åˆ†ç©ºé—´æ¥å­˜å‚¨å®ƒçš„å¼•ç”¨è®¡æ•°ï¼›å¦åˆ™ Runtime ä¼šä½¿ç”¨ä¸€å¼ æ•£åˆ—è¡¨æ¥ç®¡ç†å¼•ç”¨è®¡æ•° 12345678910111213141516NSNumber *nu = [NSNumber numberWithInteger:3]; NSLog(@&quot;%@---%p---%@&quot;, nu,nu,[nu valueForKey:@&quot;retainCount&quot;]); NSNumber *nu1 = [NSNumber numberWithInteger:1]; NSLog(@&quot;%@---%p---%@&quot;, nu1,nu1,[nu1 valueForKey:@&quot;retainCount&quot;]); NSNumber *nu2 = [NSNumber numberWithInteger:2]; NSLog(@&quot;%@---%p---%@&quot;, nu2,nu2,[nu2 valueForKey:@&quot;retainCount&quot;]); 3---0xb000000000000033---92233720368547758071---0xb000000000000013---92233720368547758072---0xb000000000000023---9223372036854775807 çœ‹ä¸Šè¾¹æ•°æ®3ï¼Œ1ï¼Œ2ç›´æŽ¥å­˜åœ¨äº†æŒ‡é’ˆé‡Œï¼Œåªè¦æŒ‡é’ˆå­˜åœ¨ï¼Œé‚£ä¹ˆæ•°æ®å°±å­˜åœ¨ï¼Œæ²¡æœ‰isaæŒ‡é’ˆï¼Œä¸å—retainCountç®¡ç†ã€‚ TaggedPointerä¸Žå¼•ç”¨è®¡æ•°TaggedPointeråŽŸç† NONPOINTER-ISAä¸Žå¼•ç”¨è®¡æ•°ã€‚12345678struct objc_object &#123;private: isa_t isa;public:xxxxxxxxxxxx å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªisa_tç±»åž‹çš„å¯¹è±¡ï¼Œisaæ˜¯ä¸€ä¸ªè”åˆä½“ï¼Œå…¶ä¸­åŒ…å«äº†è¿™æ ·çš„ä¸€ç»„å®šä¹‰ï¼š 1234567891011121314151617# if __arm64__# define ISA_MASK 0x0000000ffffffff8ULL# define ISA_MAGIC_MASK 0x000003f000000001ULL# define ISA_MAGIC_VALUE 0x000001a000000001ULL struct &#123; uintptr_t nonpointer : 1; uintptr_t has_assoc : 1; uintptr_t has_cxx_dtor : 1; uintptr_t shiftcls : 33; // MACH_VM_MAX_ADDRESS 0x1000000000 uintptr_t magic : 6; uintptr_t weakly_referenced : 1; uintptr_t deallocating : 1; uintptr_t has_sidetable_rc : 1; uintptr_t extra_rc : 19;# define RC_ONE (1ULL&lt;&lt;45)# define RC_HALF (1ULL&lt;&lt;18) &#125;; æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“ä½¿ç”¨Tagged Pointeræ—¶å€™ï¼Œä»ŽæŒ‡é’ˆçš„ç¬¬45ä½å¼€å§‹ï¼Œä¸€å…±19ä½ï¼Œå­˜å‚¨çš„éƒ½æ˜¯å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¿¡æ¯ï¼Œæ ‡å¿—ä¸ºextra_rcã€‚å½“å­˜å‚¨ç©ºé—´ä¸å¤Ÿæ—¶ï¼Œè‹¹æžœä¼šä½¿ç”¨å¯¹è±¡çš„sidetableæ¥å­˜å‚¨å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¿¡æ¯ æ•£åˆ—è¡¨ å¦‚ä½•å®žçŽ°å¿«é€Ÿåˆ†æµï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°SideTableçš„ä½ç½®çš„ï¼Ÿ æ•£åˆ—å¼æ•°æ®ç»“æž„è‡ªæ—‹é” RedcountMap(å¼•ç”¨è®¡æ•°) å¼±å¼•ç”¨è¡¨ MRCå’ŒARC ä¹‹æ‰€ä»¥è¯´ARCéœ€è¦ç”¨åˆ°runtimeæ¯”å¦‚weakå…³é”®å­—çš„å®žçŽ° ç¦æ­¢è°ƒç”¨åªæ˜¯ç¦æ­¢æ˜¾ç¤ºè°ƒç”¨ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥ç”¨kvcæ¥è¿›è¡Œè°ƒç”¨ã€‚ è¿™é‡Œéœ€è¦çœ‹ä¸€ä¸‹refcntStorageï¼Œä»Žä¸‹è¡¨ä¸­å¯ä»¥æŽ¨æµ‹ï¼Œè¿™ä¸ªå˜é‡size_tç±»åž‹å­˜å‚¨äº†å¾ˆå¤šä¿¡æ¯ï¼Œä¸å•å•æ˜¯retainCounté‚£ä¹ˆç®€å•ï¼Œ0ä½åŠ¿å¼±å¼•ç”¨ä¿¡æ¯ï¼Œæ˜¯å¦æœ‰å¼±å¼•ç”¨ï¼Œ1ä½å­˜å‚¨äº†æ˜¯å¦è¦è¢«deallocï¼Œ2ä½æ‰æ˜¯çœŸæ­£çš„å¼•ç”¨è®¡æ•°ï¼Œå†çœ‹ä¸€ä¸ªç»†èŠ‚ï¼ŒMSB-wardæ˜¯ä»€ä¹ˆæ„æ€ï¼ŸLSBæ˜¯æœ€ä½Žæœ‰æ•ˆä½ï¼Œé‚£ä¹ˆè¿™ä¸ªMSBå°±æ˜¯æœ€é«˜æœ‰æ•ˆä½äº† 1234#define SIDE_TABLE_WEAKLY_REFERENCED (1UL&lt;&lt;0)#define SIDE_TABLE_DEALLOCATING (1UL&lt;&lt;1) // MSB-ward of weak bit#define SIDE_TABLE_RC_ONE (1UL&lt;&lt;2) // MSB-ward of deallocating bit#define SIDE_TABLE_RC_PINNED (1UL&lt;&lt;(WORD_BITS-1)) è¿™é‡Œåˆè¡ç”Ÿäº†ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆè¦åœ¨è¿™è¾¹è®°å½•weakå’Œdeallocå‘¢ï¼Ÿç­”æ¡ˆæ˜¯æä¾›çŠ¶æ€æŸ¥è¯¢ï¼ŒæŸ¥è¯¢ä¸€ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯æœ‰weakå¼•ç”¨ï¼Œæˆ–è€…æ­£åœ¨deallocingï¼Œæ³¨æ„ï¼Œè¿™é‡Œä¸æ˜¯å·²ç»deallocäº†ï¼Œè€Œæ˜¯æ­£åœ¨é”€æ¯ï¼Œè¿™æ˜¯ä¸€ä¸ªè¿‡ç¨‹ï¼Œä¸€æ—¦è¿›å…¥åˆ°äº†è¿™ä¸ªè¿‡ç¨‹å°±ä¼šé€šè¿‡è¿™ä¸ªå‡½æ•°åŽ»æ ‡è®°ï¼ŒåŽ»å‘Šè¯‰åˆ«äººæˆ‘è¦é”€æ¯äº†ï¼Œä¸è¦ä½¿ç”¨æˆ‘äº†ã€‚ 1234567891011121314151617objc_object::sidetable_isDeallocating()&#123; SideTable&amp; table = SideTables()[this]; // NO SPINLOCK HERE // _objc_rootIsDeallocating() is called exclusively by _objc_storeWeak(), // which already acquired the lock on our behalf. // fixme can&apos;t do this efficiently with os_lock_handoff_s // if (table.slock == 0) &#123; // _objc_fatal(&quot;Do not call -_isDeallocating.&quot;); // &#125; RefcountMap::iterator it = table.refcnts.find(this); return (it != table.refcnts.end()) &amp;&amp; (it-&gt;second &amp; SIDE_TABLE_DEALLOCATING);&#125; æ‰€ä»¥è¯´æ˜Ždeallocæ˜¯åœ¨releaseæ–¹æ³•ä¸­è°ƒç”¨çš„ã€‚ Objective-Cçš„å¼•ç”¨è®¡æ•°ç®¡ç†ä½¿ç”¨ä¸¤ç§æ–¹å¼ç›¸ç»“åˆï¼Œsidetableå’ŒisaæŒ‡é’ˆï¼ˆæŒ‡é’ˆå¹¶ä¸æ˜¯å¯¹è±¡çš„çœŸæ­£å†…å­˜åœ°å€ï¼Œè€Œæ˜¯æŸäº›ä½ç”¨æ¥è¿›è¡Œäº†ä¸€äº›æ ‡å¿—ä½çš„å­˜æ”¾ï¼‰ï¼›æŽ¥ä¸‹æ¥ï¼Œæˆ‘å°†ä»¥sidetableè¿›è¡Œreleaseæ¥è®¨è®ºdeallocçš„è°ƒç”¨ï¼Œç›´æŽ¥ä¸Šä»£ç ï¼Œå¦‚ä¸‹sidetable_releaseï¼ˆä¸‹æ–‡æ‰€æœ‰éƒ½ä¼šç”¨sidetable_releaseæ¥è®¨è®ºï¼‰å‡½æ•°ä¼šåœ¨ç»™å¯¹è±¡å‘é€releaseæ¶ˆæ¯çš„æ—¶å€™è°ƒç”¨ï¼Œsidetable_releaseæ–¹æ³•é¦–å…ˆèŽ·å–å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œå¯¹å¼•ç”¨è®¡æ•°ç›¸å…³æ ‡å¿—ä½åšæ“ä½œï¼Œè‹¥å¯¹è±¡å®žä¾‹å¯ä»¥è¢«é‡Šæ”¾ï¼Œå°†é€šè¿‡objc_msgSendå‘é€SEL_deallocæ¶ˆæ¯ï¼Œæ—¢è°ƒç”¨å¯¹è±¡çš„deallocæ–¹æ³•ã€‚ 12345678910111213141516171819202122232425262728uintptr_tobjc_object::sidetable_release(bool performDealloc)&#123;#if SUPPORT_NONPOINTER_ISA assert(!isa.nonpointer);#endif SideTable&amp; table = SideTables()[this]; bool do_dealloc = false; table.lock(); RefcountMap::iterator it = table.refcnts.find(this); if (it == table.refcnts.end()) &#123;//å¦‚æžœæ²¡æœ‰è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ä¿¡æ¯ï¼Œé‚£ä¹ˆç›´æŽ¥èµ°deallocé€»è¾‘ï¼Œå°†è¿™ä¸ªå¯¹è±¡çš„deallocæ ‡è®°ç½®ä¸º1 do_dealloc = true; table.refcnts[this] = SIDE_TABLE_DEALLOCATING; &#125; else if (it-&gt;second &lt; SIDE_TABLE_DEALLOCATING) &#123;//å¦‚æžœsize_tä¿¡æ¯åœ¨deallocä¿¡æ¯æœ‰æ•ˆä½ä»¥ä¸‹ï¼Œé‚£ä¹ˆä¹Ÿç›´æŽ¥èµ°deallocé€»è¾‘ // SIDE_TABLE_WEAKLY_REFERENCED may be set. Don&apos;t change it. do_dealloc = true; it-&gt;second |= SIDE_TABLE_DEALLOCATING; &#125; else if (! (it-&gt;second &amp; SIDE_TABLE_RC_PINNED)) &#123;//å¦‚æžœæ˜¯æœ‰æ•ˆçš„é‚£ä¹ˆç›´æŽ¥å°†è®¡æ•°å‡å°‘4ï¼Œå› ä¸ºretainCountä¼šå³ç§»åŠ¨4ä½ï¼Œæ‰€ä»¥ååº”åˆ°retainCountå°±ä¼šæ˜¯1 it-&gt;second -= SIDE_TABLE_RC_ONE; &#125; table.unlock(); if (do_dealloc &amp;&amp; performDealloc) &#123;//å¦‚æžœè¦é”€æ¯é‚£ä¹ˆç›´æŽ¥æ‰§è¡Œdealloc ((void(*)(objc_object *, SEL))objc_msgSend)(this, SEL_dealloc); &#125; return do_dealloc;&#125; 1234TestView *test1 = [[TestView alloc] init];self.test = test1;NSLog(@&quot;%@&quot;,[[[TestView alloc] init] valueForKey:@&quot;retainCount&quot;]);NSLog(@&quot;%@&quot;,[test1 valueForKey:@&quot;retainCount&quot;]); 1232018-07-07 17:37:03.997243+0800 gpu[57393:720434] 12018-07-07 17:45:56.191210+0800 gpu[57878:728352] -[TestView dealloc]2018-07-07 17:37:03.997573+0800 gpu[57393:720434] 2 è¿™é‡Œè¦è¯´çš„æ˜¯è°ƒç”¨allocä»¥åŽï¼Œå¹¶æ²¡æœ‰å¯¹å…¶retainï¼Œä½†æ˜¯å½“è°ƒç”¨retainCountçš„æ—¶å€™ä¼šå˜æˆ1çš„ï¼Œå› ä¸ºæœ€å¼€å§‹å¹¶æ²¡æœ‰è¿™ä¸ªå¯¹è±¡å¯¹åº”çš„tableï¼Œæ‰€ä»¥ä¸ä¼šåšåˆ°ifé€»è¾‘é‡Œè¾¹åŽ»ï¼Œ 123456789101112131415objc_object::sidetable_retainCount()&#123; SideTable&amp; table = SideTables()[this]; size_t refcnt_result = 1; table.lock(); RefcountMap::iterator it = table.refcnts.find(this); if (it != table.refcnts.end()) &#123; // this is valid for SIDE_TABLE_RC_PINNED too refcnt_result += it-&gt;second &gt;&gt; SIDE_TABLE_RC_SHIFT; &#125; table.unlock(); return refcnt_result;&#125; deallocçš„å®žçŽ° å¼±å¼•ç”¨ç›¸å…³æºç å…¥å£NSObject.mm/objc_initWeak weakå®žçŽ°æŽ¢ç©¶ è¿™é‡Œæœ‰ä¸ªé—®é¢˜éœ€è¦æ€è€ƒï¼Œæ—¢ç„¶å‰è¾¹æåˆ°table_tä¸­çš„refcntStorageå¯ä»¥å­˜å‚¨å¼±å¼•ç”¨ç›¸å…³çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜éœ€è¦ä¸€ä¸ªweak_tableå‘¢ï¼Œå¹¶ä¸”å¼±å¼•ç”¨å¹¶ä¸å¢žåŠ è®¡æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å­˜å‚¨è¿™äº›ä¿¡æ¯åˆæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ å…¶å®žè¿™æ˜¯ä¸ºäº†å®žçŽ°åŽè¾¹weakå…³é”®å­—ä¿®é¥°çš„æŒ‡é’ˆï¼Œåœ¨å¯¹è±¡è¢«é‡Šæ”¾åŽæŒ‡é’ˆå˜ä¸ºnilçš„åŠŸèƒ½ï¼Œæ—¢ç„¶è¦å°†è¿™ä¸ªæŒ‡é’ˆè®¾ç½®ä¸ºnilï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦è®°å½•è¿™äº›æŒ‡å‘è¿™ä¸ªå¯¹è±¡çš„è¿™äº›weakæŒ‡é’ˆï¼Œå¯¹æ¯”çœ‹strongä¿®é¥°çš„æŒ‡é’ˆå°±ä¸éœ€è¦è®°å½•ã€‚ 12345struct SideTable &#123; spinlock_t slock; RefcountMap refcnts; weak_table_t weak_table;&#125; weak_table_tä¸­æœ‰ä¸€ä¸ªweak_entriesè¿™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¿™é‡Œå­˜å‚¨çš„æ˜¯weak_entry_tç±»åž‹çš„ç»“æž„ä½“ã€‚ 123456struct weak_table_t &#123; weak_entry_t *weak_entries; size_t num_entries; uintptr_t mask; uintptr_t max_hash_displacement;&#125;; weak_entry_tä¸­å‘¢å­˜å‚¨çš„æ˜¯ä¸€ä¸ªreferrersï¼Œè¿™ä¸ªåˆæ˜¯ä¸€ä¸ªweak_referrer_tçš„æ•°ç»„ï¼Œè¿™é‡Œè¾¹çš„æˆå‘˜æ˜¯weak_referrer_tï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®ƒçš„å®žè´¨ç±»åž‹æ˜¯ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€å­˜å‚¨çš„æ˜¯weakæŒ‡é’ˆçš„åœ°å€ï¼Œçœ‹æ¸…æ¥šè¿™ä¸æ˜¯å¯¹è±¡çš„åœ°å€ï¼Œæ˜¯æŒ‡é’ˆçš„åœ°å€ï¼Œä¸ºäº†æ–¹ä¾¿åŽè¾¹å°†è¿™ä¸ªæŒ‡é’ˆè®¾ç½®ä¸ºnil 12345678910111213141516struct weak_entry_t &#123; DisguisedPtr&lt;objc_object&gt; referent; union &#123; struct &#123; weak_referrer_t *referrers; uintptr_t out_of_line : 1; uintptr_t num_refs : PTR_MINUS_1; uintptr_t mask; uintptr_t max_hash_displacement; &#125;; struct &#123; // out_of_line=0 is LSB of one of these (don&apos;t care which) weak_referrer_t inline_referrers[WEAK_INLINE_COUNT]; &#125;; &#125;;&#125;; 12/// The address of a __weak object referencetypedef objc_object ** weak_referrer_t; weak_clear_no_lockçš„å®žçŽ°è¿™ä¸ªå®žçŽ°ä¹Ÿå°è¯äº†æˆ‘ä»¬ä¹‹å‰çš„åˆ¤æ–­ï¼Œè¿™é‡Œå°±æ˜¯é€šè¿‡ä¸€ä¸ªå¯¹è±¡çš„åœ°å€referent_idæ¥å¯»æ‰¾è¿™ä¸ªå¯¹è±¡å­˜å‚¨äºŽå“ªä¸ªweak_table_tæ‰¾åˆ°ä¹‹åŽä»Žä¸­æ‰¾åˆ°è¿™ä¸ªå¯¹è±¡çš„å­˜å‚¨å®žä½“ï¼Œweak_entry_tï¼Œè¿™é‡Œå­˜å‚¨çš„å°±æ˜¯è¿™ä¸ªå¯¹è±¡çš„weakæŒ‡é’ˆäº†ï¼ŒåŽè¾¹æˆ‘ä»¬çœ‹åˆ°å¾ªçŽ¯éåŽ†*referrer = nil; 12345678910111213141516171819202122232425262728293031323334353637383940414243weak_clear_no_lock(weak_table_t *weak_table, id referent_id) &#123; objc_object *referent = (objc_object *)referent_id; weak_entry_t *entry = weak_entry_for_referent(weak_table, referent); if (entry == nil) &#123; /// XXX shouldn&apos;t happen, but does with mismatched CF/objc //printf(&quot;XXX no entry for clear deallocating %p\n&quot;, referent); return; &#125; // zero out references weak_referrer_t *referrers; size_t count; if (entry-&gt;out_of_line) &#123; referrers = entry-&gt;referrers; count = TABLE_SIZE(entry); &#125; else &#123; referrers = entry-&gt;inline_referrers; count = WEAK_INLINE_COUNT; &#125; for (size_t i = 0; i &lt; count; ++i) &#123; objc_object **referrer = referrers[i]; if (referrer) &#123; if (*referrer == referent) &#123; *referrer = nil; &#125; else if (*referrer) &#123; _objc_inform(&quot;__weak variable at %p holds %p instead of %p. &quot; &quot;This is probably incorrect use of &quot; &quot;objc_storeWeak() and objc_loadWeak(). &quot; &quot;Break on objc_weak_error to debug.\n&quot;, referrer, (void*)*referrer, (void*)referent); objc_weak_error(); &#125; &#125; &#125; weak_entry_remove(weak_table, entry);&#125; è‡ªåŠ¨é‡Šæ”¾æ± AutoreleasePool åŽŸç†ï¼Ÿä¸ºä½•å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Ÿ æ•°æ®ç»“æž„objc_autoreleasePoolPushè°ƒç”¨AutoreleasePoolPage::pushï¼Œä¸€æ¬¡popç›¸å½“äºŽæ‰¹é‡çš„pop 1234567class AutoreleasePoolPage &#123; id *next; //æŒ‡å‘ä¸‹ä¸€ä¸ªå¯æ·»åŠ èŠ‚ç‚¹ pthread_t const thread; AutoreleasePoolPage * const parent; AutoreleasePoolPage *child;&#125; æ ˆç»“æž„å¤ä¹  åŒå‘é“¾è¡¨ç»“æž„å¤ä¹  Pushçš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆåˆ›å»ºä¸€ä¸ªè‡ªåŠ¨é‡Šæ”¾æ± å°±ä¼šåˆ›å»ºä¸€ä¸ªå“¨å…µï¼Œç„¶åŽè¿”å›žè¿™ä¸ªå“¨å…µçš„ä½ç½®ï¼Œç„¶åŽnextå‘ä¸Šç§»åŠ¨ï¼Œç„¶åŽåœ¨æ± å­ä¸­é—´åˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šè¢«è‡ªåŠ¨æ·»åŠ åˆ°è¿™ä¸ªæ± å­ä¸­ï¼Œnextä¸æ–­ç§»åŠ¨ï¼Œå½“æ‰§è¡Œpopçš„æ—¶å€™ï¼Œä¸­é—´çš„å†…å®¹éƒ½ä¼šæŽ¥æ”¶åˆ°releaseæ¶ˆæ¯è¢«é‡Šæ”¾ï¼ŒnextæŒ‡é’ˆä¼šç§»åŠ¨åˆ°å“¨å…µçš„ä½ç½®ã€‚ [obj autorelease]çš„è°ƒç”¨é€»è¾‘ è¿™é‡Œä¸€ä¸ªé€»è¾‘æœ‰ä¸€ç‚¹è¦æ³¨æ„å°±æ˜¯å¦‚æžœè¿™ä¸ªæ ˆå·²ç»æ»¡äº†ï¼Œå†æ·»åŠ èŠ‚ç‚¹åœ¨é“¾è¡¨ä¸Šï¼Œç„¶åŽå¢žåŠ æ ˆèŠ‚ç‚¹ã€‚ å¾ªçŽ¯å¼•ç”¨ è‡ªå¾ªçŽ¯å¼•ç”¨ ç›¸äº’å¾ªçŽ¯å¼•ç”¨ å¤šå¾ªçŽ¯å¼•ç”¨ å¸¸è€ƒ&gt; ä»£ç† Block NSTimer å¤§çŽ¯ è§£å†³æ€è·¯: é¿å…äº§ç”Ÿ åœ¨ä½•æ—¶æ—¶æœºæ‰‹åŠ¨æ–­çŽ¯ å…·ä½“çš„æ–¹æ¡ˆ: __weakï¼Œä¸å¢žåŠ è®¡æ•° __block __unsafe_unretainedï¼Œä¸ä¼šå¢žåŠ è®¡æ•°ï¼Œä½†æ˜¯ä¼šäº§ç”Ÿæ‚¬åž‚æŒ‡é’ˆ __blockæ³¨æ„ MRCä¸‹ï¼Œ__blockä¿®é¥°å¯¹è±¡ä¸ä¼šå¢žåŠ å¼•ç”¨è®¡æ•° ARCä¸‹ï¼Œ__blockä¿®é¥°çš„å¯¹è±¡ä¼šè¢«å¼ºå¼•ç”¨ï¼Œæ— æ³•é¿å…å¾ªçŽ¯å¼•ç”¨ï¼Œéœ€è¦æ‰‹åŠ¨ç ´è§£çŽ¯ NSTimerçš„å¾ªçŽ¯å¼•ç”¨ å³ä½¿å¯¹è±¡ä¸å¼•ç”¨Timerï¼Œä¹Ÿæ²¡ç”¨ï¼Œå› ä¸ºRunloopä¼šå¼•ç”¨Timerï¼ŒTimerçš„tagetæ˜¯å¯¹è±¡ï¼Œä¾ç„¶ä¼šå¢žåŠ å¯¹å…¶çš„å¼•ç”¨ï¼Œå½“ç„¶å¦‚æžœtimeråªæ‰§è¡Œä¸€æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥æ–­æŽ‰runloopçš„å¼•ç”¨ï¼Œä½†æ˜¯å¦‚æžœæ˜¯å¤šæ¬¡çš„timerå’‹åŠžå‘¢ï¼Ÿ è§£å†³æ–¹æ¡ˆï¼šå¢žåŠ ä¸­é—´å¯¹è±¡]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSä¸­çš„è§†å›¾æ¸²æŸ“æµç¨‹ iOS Rendering Process]]></title>
    <url>%2F2015%2F06%2F26%2FiOS%E4%B8%AD%E7%9A%84%E8%A7%86%E5%9B%BE%E6%B8%B2%E6%9F%93%2F</url>
    <content type="text"><![CDATA[ä»Žè½¯ä»¶å±‚é¢ä¸Šï¼ŒiOSå€ŸåŠ©Core Graohicsï¼ŒCore Animationï¼ŒCore Imageå®Œæˆå›¾å½¢çš„å¤„ç†ï¼Œå®ƒä»¬åˆéƒ½æ˜¯å€ŸåŠ©OpenGL ESæ¥å®Œæˆåº•å±‚çš„å·¥ä½œï¼Œå¦‚ä¸‹å›¾ è®¡ç®—æœºç³»ç»Ÿä¸­ CPUã€GPUã€æ˜¾ç¤ºå™¨æ˜¯ä»¥ä¸Šé¢è¿™ç§æ–¹å¼ååŒå·¥ä½œçš„ã€‚CPU è®¡ç®—å¥½æ˜¾ç¤ºå†…å®¹æäº¤åˆ° GPUï¼ŒGPU æ¸²æŸ“å®ŒæˆåŽå°†æ¸²æŸ“ç»“æžœæ”¾å…¥å¸§ç¼“å†²åŒºï¼ŒéšåŽè§†é¢‘æŽ§åˆ¶å™¨ä¼šæŒ‰ç…§ VSync ä¿¡å·é€è¡Œè¯»å–å¸§ç¼“å†²åŒºçš„æ•°æ®ï¼Œç»è¿‡å¯èƒ½çš„æ•°æ¨¡è½¬æ¢ä¼ é€’ç»™æ˜¾ç¤ºå™¨æ˜¾ç¤ºã€‚ åœ¨æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œå¸§ç¼“å†²åŒºåªæœ‰ä¸€ä¸ªï¼Œè¿™æ—¶å¸§ç¼“å†²åŒºçš„è¯»å–å’Œåˆ·æ–°éƒ½éƒ½ä¼šæœ‰æ¯”è¾ƒå¤§çš„æ•ˆçŽ‡é—®é¢˜ã€‚ä¸ºäº†è§£å†³æ•ˆçŽ‡é—®é¢˜ï¼Œæ˜¾ç¤ºç³»ç»Ÿé€šå¸¸ä¼šå¼•å…¥ä¸¤ä¸ªç¼“å†²åŒºï¼Œå³åŒç¼“å†²æœºåˆ¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒGPU ä¼šé¢„å…ˆæ¸²æŸ“å¥½ä¸€å¸§æ”¾å…¥ä¸€ä¸ªç¼“å†²åŒºå†…ï¼Œè®©è§†é¢‘æŽ§åˆ¶å™¨è¯»å–ï¼Œå½“ä¸‹ä¸€å¸§æ¸²æŸ“å¥½åŽï¼ŒGPU ä¼šç›´æŽ¥æŠŠè§†é¢‘æŽ§åˆ¶å™¨çš„æŒ‡é’ˆæŒ‡å‘ç¬¬äºŒä¸ªç¼“å†²å™¨ã€‚å¦‚æ­¤ä¸€æ¥æ•ˆçŽ‡ä¼šæœ‰å¾ˆå¤§çš„æå‡ã€‚ åœ¨ iOSä¸Šï¼ŒåŠ¨ç”»å’Œè§†å›¾çš„æ¸²æŸ“å…¶å®žæ˜¯åœ¨å¦å¤–ä¸€ä¸ªè¿›ç¨‹åšçš„ï¼ˆä¸‹é¢æˆ‘ä»¬å«è¿™ä¸ªè¿›ç¨‹ render serverï¼‰ï¼Œåœ¨ iOS 5 ä»¥å‰è¿™ä¸ªè¿›ç¨‹å« SpringBoardï¼Œåœ¨ iOS 6 ä¹‹åŽå« BackBoardã€‚ å¯¹Core Animationçš„ç†è§£ï¼Œä¸èƒ½è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªåŠ¨ç”»æ¡†æž¶ï¼Œå…¶å®žä¹‹å‰å®ƒå«åšLayer Kit CoreAnimationçš„æ¸²æŸ“æµç¨‹å¯ä»¥ç”¨ä¸‹å›¾æ¥æ¦‚æ‹¬: è§†å›¾æˆ–è€…åŠ¨ç”»æ¸²æŸ“çš„å‡ ä¸ªé˜¶æ®µåœ¨ APP å†…éƒ¨çš„æœ‰4ä¸ªé˜¶æ®µ å¸ƒå±€ï¼šåœ¨è¿™ä¸ªé˜¶æ®µï¼Œç¨‹åºè®¾ç½® View/Layer çš„å±‚çº§ä¿¡æ¯ï¼Œè®¾ç½® layer çš„å±žæ€§ï¼Œå¦‚ frameï¼Œbackground color ç­‰ç­‰ã€‚ åˆ›å»º backing imageï¼šåœ¨è¿™ä¸ªé˜¶æ®µç¨‹åºä¼šåˆ›å»º layer çš„ backing imageï¼Œæ— è®ºæ˜¯é€šè¿‡ setContents å°†ä¸€ä¸ª image ä¼ çµ¦ layerï¼Œè¿˜æ˜¯é€šè¿‡ drawRectï¼šæˆ– drawLayer:inContextï¼šæ¥ç”»å‡ºæ¥çš„ã€‚æ‰€ä»¥ drawRectï¼šç­‰å‡½æ•°æ˜¯åœ¨è¿™ä¸ªé˜¶æ®µè¢«è°ƒç”¨çš„ã€‚æ³¨æ„æœ€ç»ˆæ˜¾ç¤ºçš„å›¾åƒ å‡†å¤‡ï¼šåœ¨è¿™ä¸ªé˜¶æ®µï¼ŒCore Animation æ¡†æž¶å‡†å¤‡è¦æ¸²æŸ“çš„ layer çš„å„ç§å±žæ€§æ•°æ®ï¼Œä»¥åŠè¦åšçš„åŠ¨ç”»çš„å‚æ•°ï¼Œå‡†å¤‡ä¼ é€’çµ¦ render serverã€‚åŒæ—¶åœ¨è¿™ä¸ªé˜¶æ®µä¹Ÿä¼šè§£åŽ‹è¦æ¸²æŸ“çš„ imageã€‚ï¼ˆé™¤äº†ç”¨ imageNamedï¼šæ–¹æ³•ä»Ž bundle åŠ è½½çš„ image ä¼šç«‹åˆ»è§£åŽ‹ä¹‹å¤–ï¼Œå…¶ä»–çš„æ¯”å¦‚ç›´æŽ¥ä»Žç¡¬ç›˜è¯»å…¥ï¼Œæˆ–è€…ä»Žç½‘ç»œä¸Šä¸‹è½½çš„ image ä¸ä¼šç«‹åˆ»è§£åŽ‹ï¼Œåªæœ‰åœ¨çœŸæ­£è¦æ¸²æŸ“çš„æ—¶å€™æ‰ä¼šè§£åŽ‹ï¼‰ã€‚ æäº¤ï¼šåœ¨è¿™ä¸ªé˜¶æ®µï¼ŒCore Animation æ‰“åŒ… layer çš„ä¿¡æ¯ä»¥åŠéœ€è¦åšçš„åŠ¨ç”»çš„å‚æ•°ï¼Œé€šè¿‡ IPCï¼ˆinter-Process Communicationï¼‰ä¼ é€’çµ¦ render serverã€‚ åœ¨ APP å¤–éƒ¨çš„2ä¸ªé˜¶æ®µå½“è¿™äº›æ•°æ®åˆ°è¾¾ render server åŽï¼Œä¼šè¢«ååºåˆ—åŒ–æˆ render treeã€‚ç„¶åŽ render server ä¼šåšä¸‹é¢çš„ä¸¤ä»¶äº‹ï¼š æ ¹æ® layer çš„å„ç§å±žæ€§ï¼ˆå¦‚æžœæ˜¯åŠ¨ç”»çš„ï¼Œä¼šè®¡ç®—åŠ¨ç”» layer çš„å±žæ€§çš„ä¸­é—´å€¼ï¼‰ï¼Œç”¨ OpenGL å‡†å¤‡æ¸²æŸ“ã€‚ æ¸²æŸ“è¿™äº›å¯è§†çš„ layer åˆ°å±å¹•ã€‚ å…·ä½“çš„UIViewç»˜åˆ¶æµç¨‹ä¸‹é¢æˆ‘ä»¬æ¥å¯¹è¿™ä¸ªæµç¨‹è¿›è¡Œè¯´æ˜Žï¼š å½“æˆ‘ä»¬è°ƒç”¨[UIView setNeedsDisplay]æ–¹æ³•æ—¶ï¼Œå¹¶æ²¡æœ‰æ‰§è¡Œç«‹å³æ‰§è¡Œç»˜åˆ¶å·¥ä½œã€‚ è€Œæ˜¯é©¬ä¸Šè°ƒç”¨[view.layer setNeedsDisplay]æ–¹æ³•ï¼Œç»™å½“å‰layeræ‰“ä¸Šè„æ ‡è®°ã€‚åœ¨å½“å‰RunLoopå¿«è¦ç»“æŸçš„æ—¶å€™è°ƒç”¨layer çš„displayæ–¹æ³•ï¼Œæ¥è¿›å…¥åˆ°å½“å‰è§†å›¾çš„çœŸæ­£ç»˜åˆ¶å½“ä¸­ã€‚ åœ¨layerçš„displayæ–¹æ³•å†…éƒ¨ï¼Œç³»ç»Ÿä¼šåˆ¤æ–­layerçš„layer.delegateæ˜¯å¦å®žçŽ°äº†displayLayer:æ–¹æ³•ï¼Œa.å¦‚æžœæ²¡æœ‰å®žçŽ°ï¼Œåˆ™æ‰§è¡Œç³»ç»Ÿçš„ç»˜åˆ¶æµç¨‹;b.å¦‚æžœå®žçŽ°äº†åˆ™ä¼šè¿›å…¥å¼‚æ­¥ç»˜åˆ¶çš„å…¥å£ã€‚ æœ€åŽæŠŠç»˜åˆ¶å®Œçš„backing storeï¼ˆå¯ä»¥ç†è§£ä¸ºä½å›¾ï¼‰æäº¤ç»™GPUã€‚ å¯¹æµç¨‹åŠ ä»¥è¯´æ˜Žï¼š åœ¨layerå†…éƒ¨ä¼šåˆ›å»ºä¸€ä¸ªbacking storeï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºCGContextRefä¸Šä¸‹æ–‡ã€‚åˆ¤æ–­layeræ˜¯å¦æœ‰delegate: å¦‚æžœæœ‰delegateï¼Œåˆ™ä¼šæ‰§è¡Œ[layer.delegate drawLayer:inContext]ï¼ˆè¿™ä¸ªæ–¹æ³•çš„æ‰§è¡Œæ˜¯åœ¨ç³»ç»Ÿå†…éƒ¨æ‰§è¡Œçš„ï¼‰ï¼Œç„¶åŽåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ä¼šè°ƒç”¨viewçš„drawRect:æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é‡å†™viewçš„drawRect:æ–¹æ³•æ‰ä¼šè¢«è°ƒç”¨åˆ°ã€‚ å¦‚æžœæ²¡æœ‰delegateï¼Œä¼šè°ƒç”¨layerçš„drawInContextæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥é‡å†™çš„layerçš„è¯¥æ–¹æ³•ï¼Œæ­¤åˆ»ä¼šè¢«è°ƒç”¨åˆ°ã€‚ æœ€åŽæŠŠç»˜åˆ¶å®Œçš„backing storeï¼ˆå¯ä»¥ç†è§£ä¸ºä½å›¾ï¼‰æäº¤ç»™GPUã€‚ ä¸Žrunloopçš„å…³ç³» Viewçš„ç»˜åˆ¶ä¸ŽCPU Viewçš„ç»˜åˆ¶ä¸ŽGPUGPUåŠŸèƒ½GPUå¤„ç†çš„å•ä½æ˜¯TextureåŸºæœ¬ä¸Šæˆ‘ä»¬æŽ§åˆ¶GPUéƒ½æ˜¯é€šè¿‡OpenGLæ¥å®Œæˆçš„ï¼Œä½†æ˜¯ä»Žbitmapåˆ°Textureä¹‹é—´éœ€è¦ä¸€åº§æ¡¥æ¢ï¼ŒCore Animationæ­£å¥½å……å½“äº†è¿™ä¸ªè§’è‰²ï¼šCore Animationå¯¹OpenGLçš„apiæœ‰ä¸€å±‚å°è£…ï¼Œå½“æˆ‘ä»¬çš„è¦æ¸²æŸ“çš„layerå·²ç»æœ‰äº†bitmap contentçš„æ—¶å€™ï¼Œè¿™ä¸ªcontentä¸€èˆ¬æ¥è¯´æ˜¯ä¸€ä¸ªCGImageRefï¼ŒCoreAnimationä¼šåˆ›å»ºä¸€ä¸ªOpenGLçš„Textureå¹¶å°†CGImageRefï¼ˆbitmapï¼‰å’Œè¿™ä¸ªTextureç»‘å®šï¼Œé€šè¿‡TextureIDæ¥æ ‡è¯†ã€‚è¿™ä¸ªå¯¹åº”å…³ç³»å»ºç«‹èµ·æ¥ä¹‹åŽï¼Œå‰©ä¸‹çš„ä»»åŠ¡å°±æ˜¯GPUå¦‚ä½•å°†Textureæ¸²æŸ“åˆ°å±å¹•ä¸Šäº†ã€‚ GPUå·¥ä½œæ¨¡å¼ï¼šæ•´ä¸ªè¿‡ç¨‹ä¹Ÿå°±æ˜¯ä¸€ä»¶äº‹ï¼šCPUå°†å‡†å¤‡å¥½çš„bitmapæ”¾åˆ°RAMé‡Œï¼ŒGPUåŽ»æ¬è¿™å¿«å†…å­˜åˆ°VRAMä¸­å¤„ç†ã€‚è€Œè¿™ä¸ªè¿‡ç¨‹GPUæ‰€èƒ½æ‰¿å—çš„æžé™å¤§æ¦‚åœ¨16.7mså®Œæˆä¸€å¸§çš„å¤„ç†ï¼Œæ‰€ä»¥æœ€å¼€å§‹æåˆ°çš„60fpså…¶å®žå°±æ˜¯GPUèƒ½å¤„ç†çš„æœ€é«˜é¢‘çŽ‡ã€‚ GPUæ€§èƒ½ç“¶é¢ˆå› æ­¤ï¼ŒGPUçš„æŒ‘æˆ˜æœ‰ä¸¤ä¸ªï¼šâ€¢ å°†æ•°æ®ä»ŽRAMæ¬åˆ°VRAMä¸­â€¢ å°†Textureæ¸²æŸ“åˆ°å±å¹•ä¸Šè¿™ä¸¤ä¸ªä¸­ç“¶é¢ˆåŸºæœ¬åœ¨ç¬¬äºŒç‚¹ä¸Šã€‚æ¸²æŸ“TextureåŸºæœ¬è¦å¤„ç†è¿™ä¹ˆå‡ ä¸ªé—®é¢˜ï¼š Compositingï¼šCompositingæ˜¯æŒ‡å°†å¤šä¸ªçº¹ç†æ‹¼åˆ°ä¸€èµ·çš„è¿‡ç¨‹ï¼Œå¯¹åº”UIKitï¼Œæ˜¯æŒ‡å¤„ç†å¤šä¸ªviewåˆåˆ°ä¸€èµ·çš„æƒ…å†µï¼Œå¦‚ [self.view addsubview : subview]1å¦‚æžœviewä¹‹é—´æ²¡æœ‰å åŠ ï¼Œé‚£ä¹ˆGPUåªéœ€è¦åšæ™®é€šæ¸²æŸ“å³å¯ã€‚ å¦‚æžœå¤šä¸ªviewä¹‹é—´æœ‰å åŠ éƒ¨åˆ†ï¼ŒGPUéœ€è¦åšblendingã€‚åŠ å…¥ä¸¤ä¸ªviewå¤§å°ç›¸åŒï¼Œä¸€ä¸ªå åŠ åœ¨å¦ä¸€ä¸ªä¸Šé¢ï¼Œé‚£ä¹ˆè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š R = S+D*(1-Sa) R: ä¸ºæœ€ç»ˆçš„åƒç´ å€¼S: ä»£è¡¨ ä¸Šé¢çš„Textureï¼ˆTop Textureï¼‰D: ä»£è¡¨ä¸‹é¢çš„Texture(lower Texture)Saä»£è¡¨Textureçš„alphaå€¼ã€‚å…¶ä¸­S,Déƒ½å·²ç»pre-multipliedå„è‡ªçš„alphaå€¼ã€‚å‡å¦‚Top Textureï¼ˆä¸Šå±‚viewï¼‰çš„alphaå€¼ä¸º1ï¼Œå³ä¸é€æ˜Žã€‚é‚£ä¹ˆå®ƒä¼šé®ä½ä¸‹å±‚çš„Textureã€‚å³,R = Sã€‚æ˜¯åˆç†çš„ã€‚ å‡å¦‚Top Textureï¼ˆä¸Šå±‚viewï¼‰çš„alphaå€¼ä¸º0.5ï¼ŒS ä¸º (1,0,0)ï¼Œä¹˜ä»¥alphaåŽä¸º(0.5,0,0ï¼‰ã€‚Dä¸º(0ï¼Œ0ï¼Œ1)ã€‚ å¾—åˆ°çš„Rä¸ºï¼ˆ0.5ï¼Œ0ï¼Œ0.5ï¼‰ã€‚åŸºæœ¬ä¸Šæ¯ä¸ªåƒç´ ç‚¹éƒ½éœ€è¦è¿™ä¹ˆè®¡ç®—ä¸€æ¬¡ã€‚å› æ­¤ï¼Œviewçš„å±‚çº§å¾ˆå¤æ‚ï¼Œæˆ–è€…viewéƒ½æ˜¯åŠé€æ˜Žçš„ï¼ˆalphaå€¼ä¸ä¸º1ï¼‰éƒ½ä¼šå¸¦æ¥GPUé¢å¤–çš„è®¡ç®—å·¥ä½œã€‚åº”ç”¨åº”å½“å°½é‡å‡å°‘è§†å›¾æ•°é‡å’Œå±‚æ¬¡ï¼Œå¹¶åœ¨ä¸é€æ˜Žçš„è§†å›¾é‡Œæ ‡æ˜Ž opaque å±žæ€§ä»¥é¿å…æ— ç”¨çš„ Alpha é€šé“åˆæˆã€‚ Sizeè¿™ä¸ªé—®é¢˜ï¼Œä¸»è¦æ˜¯å¤„ç†imageå¸¦æ¥çš„ï¼Œå‡å¦‚å†…å­˜é‡Œæœ‰ä¸€å¼ 400x400çš„å›¾ç‰‡ï¼Œè¦æ”¾åˆ°100x100çš„imageviewé‡Œï¼Œå¦‚æžœä¸åšä»»ä½•å¤„ç†ï¼Œç›´æŽ¥ä¸¢è¿›åŽ»ï¼Œé—®é¢˜å°±å¤§äº†ï¼Œè¿™æ„å‘³ç€ï¼ŒGPUéœ€è¦å¯¹å¤§å›¾è¿›è¡Œç¼©æ”¾åˆ°å°çš„åŒºåŸŸæ˜¾ç¤ºï¼Œéœ€è¦åšåƒç´ ç‚¹çš„samplingï¼Œè¿™ç§smaplingçš„ä»£ä»·å¾ˆé«˜ï¼Œåˆéœ€è¦å…¼é¡¾pixel alignmentã€‚è®¡ç®—é‡ä¼šé£™å‡ã€‚ shouldRasterizeå…¶ä¸­shouldRasterizeï¼ˆå…‰æ …åŒ–ï¼‰æ˜¯æ¯”è¾ƒç‰¹åˆ«çš„ä¸€ç§ï¼šå…‰æ …åŒ–æ¦‚å¿µï¼šå°†å›¾è½¬åŒ–ä¸ºä¸€ä¸ªä¸ªæ …æ ¼ç»„æˆçš„å›¾è±¡ã€‚å…‰æ …åŒ–ç‰¹ç‚¹ï¼šæ¯ä¸ªå…ƒç´ å¯¹åº”å¸§ç¼“å†²åŒºä¸­çš„ä¸€åƒç´ ã€‚ shouldRasterize = YESåœ¨å…¶ä»–å±žæ€§è§¦å‘ç¦»å±æ¸²æŸ“çš„åŒæ—¶ï¼Œä¼šå°†å…‰æ …åŒ–åŽçš„å†…å®¹ç¼“å­˜èµ·æ¥ï¼Œå¦‚æžœå¯¹åº”çš„layeråŠå…¶sublayersæ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œåœ¨ä¸‹ä¸€å¸§çš„æ—¶å€™å¯ä»¥ç›´æŽ¥å¤ç”¨ã€‚shouldRasterize = YESï¼Œè¿™å°†éšå¼çš„åˆ›å»ºä¸€ä¸ªä½å›¾ï¼Œå„ç§é˜´å½±é®ç½©ç­‰æ•ˆæžœä¹Ÿä¼šä¿å­˜åˆ°ä½å›¾ä¸­å¹¶ç¼“å­˜èµ·æ¥ï¼Œä»Žè€Œå‡å°‘æ¸²æŸ“çš„é¢‘åº¦ï¼ˆä¸æ˜¯çŸ¢é‡å›¾ï¼‰ã€‚ ç›¸å½“äºŽå…‰æ …åŒ–æ˜¯æŠŠGPUçš„æ“ä½œè½¬åˆ°CPUä¸Šäº†ï¼Œç”Ÿæˆä½å›¾ç¼“å­˜ï¼Œç›´æŽ¥è¯»å–å¤ç”¨ã€‚ å½“ä½ ä½¿ç”¨å…‰æ …åŒ–æ—¶ï¼Œä½ å¯ä»¥å¼€å¯â€œColor Hits Green and Misses Redâ€æ¥æ£€æŸ¥è¯¥åœºæ™¯ä¸‹å…‰æ …åŒ–æ“ä½œæ˜¯å¦æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚ç»¿è‰²è¡¨ç¤ºç¼“å­˜è¢«å¤ç”¨ï¼Œçº¢è‰²è¡¨ç¤ºç¼“å­˜åœ¨è¢«é‡å¤åˆ›å»ºã€‚ å¦‚æžœå…‰æ …åŒ–çš„å±‚å˜çº¢å¾—å¤ªé¢‘ç¹é‚£ä¹ˆå…‰æ …åŒ–å¯¹ä¼˜åŒ–å¯èƒ½æ²¡æœ‰å¤šå°‘ç”¨å¤„ã€‚ä½å›¾ç¼“å­˜ä»Žå†…å­˜ä¸­åˆ é™¤åˆé‡æ–°åˆ›å»ºå¾—å¤ªè¿‡é¢‘ç¹ï¼Œçº¢è‰²è¡¨æ˜Žç¼“å­˜é‡å»ºå¾—å¤ªè¿Ÿã€‚å¯ä»¥é’ˆå¯¹æ€§çš„é€‰æ‹©æŸä¸ªè¾ƒå°è€Œè¾ƒæ·±çš„å±‚ç»“æž„è¿›è¡Œå…‰æ …åŒ–ï¼Œæ¥å°è¯•å‡å°‘æ¸²æŸ“æ—¶é—´ã€‚ æ³¨æ„ï¼šå¯¹äºŽç»å¸¸å˜åŠ¨çš„å†…å®¹,è¿™ä¸ªæ—¶å€™ä¸è¦å¼€å¯,å¦åˆ™ä¼šé€ æˆæ€§èƒ½çš„æµªè´¹ ä¾‹å¦‚æˆ‘ä»¬æ—¥ç¨‹ç»å¸¸æ‰“äº¤é“çš„TableViewCell,å› ä¸ºTableViewCellçš„é‡ç»˜æ˜¯å¾ˆé¢‘ç¹çš„ï¼ˆå› ä¸ºCellçš„å¤ç”¨ï¼‰,å¦‚æžœCellçš„å†…å®¹ä¸æ–­å˜åŒ–,åˆ™Celléœ€è¦ä¸æ–­é‡ç»˜,å¦‚æžœæ­¤æ—¶è®¾ç½®äº†cell.layerå¯å…‰æ …åŒ–ã€‚åˆ™ä¼šé€ æˆå¤§é‡çš„ç¦»å±æ¸²æŸ“,é™ä½Žå›¾å½¢æ€§èƒ½ã€‚ Offscreen Rendering And Maskï¼ˆç¦»å±æ¸²æŸ“ï¼‰GPUå±å¹•æ¸²æŸ“æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š On-Screen Renderingæ„ä¸ºå½“å‰å±å¹•æ¸²æŸ“ï¼ŒæŒ‡çš„æ˜¯GPUçš„æ¸²æŸ“æ“ä½œæ˜¯åœ¨å½“å‰ç”¨äºŽæ˜¾ç¤ºçš„å±å¹•ç¼“å†²åŒºä¸­è¿›è¡Œã€‚ Off-Screen Renderingæ„ä¸ºç¦»å±æ¸²æŸ“ï¼ŒæŒ‡çš„æ˜¯GPUåœ¨å½“å‰å±å¹•ç¼“å†²åŒºä»¥å¤–æ–°å¼€è¾Ÿä¸€ä¸ªç¼“å†²åŒºè¿›è¡Œæ¸²æŸ“æ“ä½œã€‚ ç›¸æ¯”äºŽå½“å‰å±å¹•æ¸²æŸ“ï¼Œç¦»å±æ¸²æŸ“çš„ä»£ä»·æ˜¯å¾ˆé«˜çš„ï¼Œä¸»è¦ä½“çŽ°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š åˆ›å»ºæ–°ç¼“å†²åŒºè¦æƒ³è¿›è¡Œç¦»å±æ¸²æŸ“ï¼Œé¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²åŒºã€‚ ä¸Šä¸‹æ–‡åˆ‡æ¢&gt;ç¦»å±æ¸²æŸ“çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œéœ€è¦å¤šæ¬¡åˆ‡æ¢ä¸Šä¸‹æ–‡çŽ¯å¢ƒï¼šå…ˆæ˜¯ä»Žå½“å‰å±å¹•ï¼ˆOn-Screenï¼‰åˆ‡æ¢åˆ°ç¦»å±ï¼ˆOff-Screenï¼‰ï¼›ç­‰åˆ°ç¦»å±æ¸²æŸ“ç»“æŸä»¥åŽï¼Œå°†ç¦»å±ç¼“å†²åŒºçš„æ¸²æŸ“ç»“æžœæ˜¾ç¤ºåˆ°å±å¹•ä¸Šæœ‰éœ€è¦å°†ä¸Šä¸‹æ–‡çŽ¯å¢ƒä»Žç¦»å±åˆ‡æ¢åˆ°å½“å‰å±å¹•ã€‚è€Œä¸Šä¸‹æ–‡çŽ¯å¢ƒçš„åˆ‡æ¢æ˜¯è¦ä»˜å‡ºå¾ˆå¤§ä»£ä»·çš„ã€‚ è®¾ç½®äº†ä»¥ä¸‹å±žæ€§æ—¶ï¼Œéƒ½ä¼šè§¦å‘ç¦»å±ç»˜åˆ¶ï¼š shouldRasterizeï¼ˆå…‰æ …åŒ–ï¼‰masksï¼ˆé®ç½©ï¼‰shadowsï¼ˆé˜´å½±ï¼‰edge antialiasingï¼ˆæŠ—é”¯é½¿ï¼‰group opacityï¼ˆä¸é€æ˜Žï¼‰å¤æ‚å½¢çŠ¶è®¾ç½®åœ†è§’ç­‰æ¸å˜ ä¸ºä»€ä¹ˆä¼šä½¿ç”¨ç¦»å±æ¸²æŸ“å½“ä½¿ç”¨åœ†è§’ï¼Œé˜´å½±ï¼Œé®ç½©çš„æ—¶å€™ï¼Œå›¾å±‚å±žæ€§çš„æ··åˆä½“è¢«æŒ‡å®šä¸ºåœ¨æœªé¢„åˆæˆä¹‹å‰ä¸èƒ½ç›´æŽ¥åœ¨å±å¹•ä¸­ç»˜åˆ¶ï¼Œæ‰€ä»¥å°±éœ€è¦å±å¹•å¤–æ¸²æŸ“è¢«å”¤èµ·ã€‚ å±å¹•å¤–æ¸²æŸ“å¹¶ä¸æ„å‘³ç€è½¯ä»¶ç»˜åˆ¶ï¼Œä½†æ˜¯å®ƒæ„å‘³ç€å›¾å±‚å¿…é¡»åœ¨è¢«æ˜¾ç¤ºä¹‹å‰åœ¨ä¸€ä¸ªå±å¹•å¤–ä¸Šä¸‹æ–‡ä¸­è¢«æ¸²æŸ“ï¼ˆä¸è®ºCPUè¿˜æ˜¯GPUï¼‰ã€‚ æ¸²æŸ“ä¼˜åŒ–ç†è®ºéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æžœshouldRasterizeè¢«è®¾ç½®æˆYESï¼Œåœ¨è§¦å‘ç¦»å±ç»˜åˆ¶çš„åŒæ—¶ï¼Œä¼šå°†å…‰æ …åŒ–åŽçš„å†…å®¹ç¼“å­˜èµ·æ¥ï¼Œå¦‚æžœå¯¹åº”çš„layeråŠå…¶sublayersæ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œåœ¨ä¸‹ä¸€å¸§çš„æ—¶å€™å¯ä»¥ç›´æŽ¥å¤ç”¨ã€‚è¿™å°†åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæå‡æ¸²æŸ“æ€§èƒ½ã€‚ è€Œå…¶å®ƒå±žæ€§å¦‚æžœæ˜¯å¼€å¯çš„ï¼Œå°±ä¸ä¼šæœ‰ç¼“å­˜ï¼Œç¦»å±ç»˜åˆ¶ä¼šåœ¨æ¯ä¸€å¸§éƒ½å‘ç”Ÿã€‚ åœ¨å¼€å‘æ—¶éœ€è¦æ ¹æ®å®žé™…æƒ…å†µæ¥é€‰æ‹©æœ€ä¼˜çš„å®žçŽ°æ–¹å¼ï¼Œå°½é‡ä½¿ç”¨On-Screen Renderingã€‚ç®€å•çš„Off-Screen Renderingå¯ä»¥è€ƒè™‘ä½¿ç”¨Core Graphicsè®©CPUæ¥æ¸²æŸ“ã€‚ å¸¸è§çš„å‡ ä¸ªé—®é¢˜å›¾åƒå¤šå±‚æ¬¡çš„åˆæˆâ€”ä¸ºä½•è®¾ç½®é€æ˜Žä¼šå¢žåŠ GPUå·¥ä½œé‡æ‰€ä»¥å½“æºçº¹ç†æ˜¯å®Œå…¨ä¸é€æ˜Žçš„æ—¶å€™ï¼Œç›®æ ‡åƒç´ å°±ç­‰äºŽæºçº¹ç†ã€‚è¿™å¯ä»¥çœä¸‹ GPU å¾ˆå¤§çš„å·¥ä½œé‡ï¼Œå› ä¸ºå¯ä»¥ç›´æŽ¥ä½¿ç”¨æœ€ä¸Šè¾¹çš„çº¹ç†ï¼Œè€Œä¸éœ€è¦è®¡ç®—å¤šä¸ªçº¹ç†çš„èžåˆï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ CALayer æœ‰ä¸€ä¸ªå«åš opaque çš„å±žæ€§äº†ã€‚å¦‚æžœè¿™ä¸ªå±žæ€§ä¸º NOï¼ŒGPU å°†ä¸ä¼šåšä»»ä½•åˆæˆï¼Œè€Œæ˜¯ç®€å•ä»Žè¿™ä¸ªå±‚æ‹·è´ï¼Œä¸éœ€è¦è€ƒè™‘å®ƒä¸‹æ–¹çš„ä»»ä½•ä¸œè¥¿(å› ä¸ºéƒ½è¢«å®ƒé®æŒ¡ä½äº†)ã€‚ å…³äºŽå¡é¡¿çš„ç®€å•åŽŸç†è§£é‡Š åœ¨ VSync ä¿¡å·åˆ°æ¥åŽï¼Œç³»ç»Ÿå›¾å½¢æœåŠ¡ä¼šé€šè¿‡ CADisplayLink ç­‰æœºåˆ¶é€šçŸ¥ Appï¼ŒApp ä¸»çº¿ç¨‹å¼€å§‹åœ¨ CPU ä¸­è®¡ç®—æ˜¾ç¤ºå†…å®¹ï¼Œæ¯”å¦‚è§†å›¾çš„åˆ›å»ºã€å¸ƒå±€è®¡ç®—ã€å›¾ç‰‡è§£ç ã€æ–‡æœ¬ç»˜åˆ¶ç­‰ã€‚éšåŽ CPU ä¼šå°†è®¡ç®—å¥½çš„å†…å®¹æäº¤åˆ° GPU åŽ»ï¼Œç”± GPU è¿›è¡Œå˜æ¢ã€åˆæˆã€æ¸²æŸ“ã€‚éšåŽ GPU ä¼šæŠŠæ¸²æŸ“ç»“æžœæäº¤åˆ°å¸§ç¼“å†²åŒºåŽ»ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡ VSync ä¿¡å·åˆ°æ¥æ—¶æ˜¾ç¤ºåˆ°å±å¹•ä¸Šã€‚ç”±äºŽåž‚ç›´åŒæ­¥çš„æœºåˆ¶ï¼Œå¦‚æžœåœ¨ä¸€ä¸ª VSync æ—¶é—´å†…ï¼ŒCPU æˆ–è€… GPU æ²¡æœ‰å®Œæˆå†…å®¹æäº¤ï¼Œåˆ™é‚£ä¸€å¸§å°±ä¼šè¢«ä¸¢å¼ƒï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡æœºä¼šå†æ˜¾ç¤ºï¼Œè€Œè¿™æ—¶æ˜¾ç¤ºå±ä¼šä¿ç•™ä¹‹å‰çš„å†…å®¹ä¸å˜ã€‚è¿™å°±æ˜¯ç•Œé¢å¡é¡¿çš„åŽŸå› ã€‚æœ€ç›´æŽ¥çš„ç†è§£ï¼Œå½“æˆ‘ä»¬æ‹–åŠ¨å±å¹•çš„æ—¶å€™ï¼Œç”»é¢è·Ÿä¸ä¸Šæ‰‹æŒ‡çš„ç§»åŠ¨ï¼Œå› ä¸ºæ€»æ˜¯éœ€è¦æ˜¾ç¤ºä¸Šä¸€ä¸ªæˆ–è€…ä¸Šå‡ ä¸ªç”»é¢çš„å†…å®¹ã€‚ ä»Žä¸Šé¢çš„å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒCPU å’Œ GPU ä¸è®ºå“ªä¸ªé˜»ç¢äº†æ˜¾ç¤ºæµç¨‹ï¼Œéƒ½ä¼šé€ æˆæŽ‰å¸§çŽ°è±¡ã€‚æ‰€ä»¥å¼€å‘æ—¶ï¼Œä¹Ÿéœ€è¦åˆ†åˆ«å¯¹ CPU å’Œ GPU åŽ‹åŠ›è¿›è¡Œè¯„ä¼°å’Œä¼˜åŒ–ã€‚ æ‰©å±•: å…³äºŽç¼“å†²åŒºçš„ä¼˜åŒ–ç»åŽ†äº†ä¸‰ä¸ªé˜¶æ®µï¼Œæœ€å¼€å§‹æ˜¯å•ç¼“å†²åŒºï¼ŒGPUç­‰å¾…å±å¹•è¯»å–å®Œæˆä¹‹åŽå†å†™å…¥ï¼Œæœ‰ä¸€ä¸ªæ•ˆçŽ‡é—®é¢˜ï¼ŒåŽæ¥å‘å±•ä¸ºåŒç¼“å†²åŒºï¼Œè¿™ä¸ªæ—¶å€™çš„é—®é¢˜åœ¨äºŽï¼Œç¼“å†²åŒºçš„åˆ‡æ¢æ˜¯ç”±GPUæŽ§åˆ¶çš„ï¼Œå½“GPUåœ¨ç¼“å†²åŒºå†™å…¥å®Œæˆä¹‹åŽå°±ä¼šåˆ‡æ¢æŒ‡é’ˆï¼Œè¿™ä¸ªæ—¶å€™çš„é—®é¢˜åœ¨äºŽå±å¹•æ˜¾ç¤ºäº†ä¸€åŠAç¼“å†²åŒºé—´çš„å†…å®¹ï¼Œç„¶åŽè¿˜æ˜¾ç¤ºäº†ä¸€åŠBç¼“å†²åŒºçš„å†…å®¹ï¼Œè§£å†³åŠžæ³•æ˜¯åŠ äº†ä¸€ä¸ªåž‚ç›´åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯è¯´GPUå†™ç¼“å­˜è¦ç­‰ç€å±å¹•çš„å‘½ä»¤ï¼Œå½“å±å¹•å¼€å§‹è¿™ä¸€æ¬¡è¯»å–çš„æ—¶å€™ï¼ŒCPUå’ŒGPUå¼€å§‹å·¥ä½œï¼Œæœ€ç»ˆå†™å…¥ç¼“å­˜ï¼Œå½“ä¸‹ä¸€æ¬¡å¼€å§‹è¯»å±å¹•çš„æ—¶å€™ä¼šåŽ»æ£€æŸ¥Bç¼“å­˜åŒºæ˜¯ä¸æ˜¯æ›´æ–°å†™å…¥äº†ï¼Œå¦‚æžœæ²¡æœ‰å†™å…¥å°±ä¸æ›´æ–°æŒ‡é’ˆï¼Œè¿™æ¬¡åˆ·æ–°ä»ç„¶è¯»å–Aï¼Œç„¶åŽGPUè¿™ä¸ªæ—¶å€™è¿˜åœ¨å†™å…¥ï¼Œå½“å†™å…¥æˆåŠŸäº†åªèƒ½ç­‰ç€ä¸‹æ¬¡æœ‰æœºä¼šæ˜¾ç¤ºåœ¨å±å¹•ä¸Šäº†ã€‚è¿™æ ·å°±å°†æŒ‡é’ˆæŒ‡å‘åˆ‡æ¢çš„è§¦å‘å™¨ç”±GPUå†™å…¥å®Œæˆåˆ‡æ¢ä¸ºï¼Œå±å¹•è¯»å–å®Œæˆå¹¶ä¸”å†™å…¥æˆåŠŸï¼Œå¼•å…¥çš„æ–°çš„é—®é¢˜æ˜¯æŽ‰å¸§ã€‚ drawRectå¯¼è‡´å†…å­˜æš´å¢žçš„åŽŸç†drawRectæ¶é­” è§†å›¾çš„æœ¬è´¨æ˜¯æ¥è‡ªäºŽCALayerçš„contentså±žæ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªCGImageçš„ç±»åž‹ï¼Œcontentsä¹Ÿè¢«ç§°ä¸ºå¯„å®¿å›¾ï¼Œé™¤äº†ç»™å®ƒèµ‹å€¼CGImageä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æŽ¥å¯¹å®ƒè¿›è¡Œç»˜åˆ¶ï¼Œç»˜åˆ¶çš„æ–¹æ³•æ­£æ˜¯è¿™æ¬¡é—®é¢˜çš„å…³é”®ï¼Œé€šè¿‡ç»§æ‰¿UIViewå¹¶å®žçŽ°-drawRect:æ–¹æ³•å³å¯è‡ªå®šä¹‰ç»˜åˆ¶ã€‚-drawRect: æ–¹æ³•æ²¡æœ‰é»˜è®¤çš„å®žçŽ°ï¼Œå› ä¸ºå¯¹UIViewæ¥è¯´ï¼Œå¯„å®¿å›¾å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼ŒUIViewä¸å…³å¿ƒç»˜åˆ¶çš„å†…å®¹ã€‚å¦‚æžœUIViewæ£€æµ‹åˆ°-drawRect:æ–¹æ³•è¢«è°ƒç”¨äº†ï¼Œå®ƒå°±ä¼šä¸ºè§†å›¾åˆ†é…ä¸€ä¸ªå¯„å®¿å›¾ï¼Œè¿™ä¸ªå¯„å®¿å›¾çš„åƒç´ å°ºå¯¸ç­‰äºŽè§†å›¾å¤§å°ä¹˜ä»¥contentsScale(è¿™ä¸ªå±žæ€§ä¸Žå±å¹•åˆ†è¾¨çŽ‡æœ‰å…³ï¼Œæˆ‘ä»¬çš„ç”»æ¿ç¨‹åºåœ¨ä¸åŒæ¨¡æ‹Ÿå™¨ä¸‹å‘ˆçŽ°çš„å†…å­˜ç”¨é‡ä¸åŒä¹Ÿæ˜¯å› ä¸ºå®ƒ)çš„å€¼ æˆ‘ä»¬ç»å¸¸åœ¨drawrectæ–¹æ³•é‡Œç»˜åˆ¶ä»£ç ï¼Œä½†è¯¥æ–¹æ³•æ˜¯è°è°ƒç”¨çš„ ä½•æ—¶è°ƒç”¨çš„ï¼Ÿ[self.view addSubview:view][CALayer drawInContext:][UIView(CALayerDelegate) drawLayer:inContext:][ZYYView drawRect:] drawrectæ–¹æ³•å†…ä¸ºä½•ç¬¬ä¸€è¡Œä»£ç æ€»è¦èŽ·å–å›¾å½¢çš„ä¸Šä¸‹æ–‡æ¯ä¸€ä¸ªUIViewéƒ½æœ‰ä¸€ä¸ªlayerï¼Œæ¯ä¸€ä¸ªlayeréƒ½æœ‰ä¸ªcontentï¼Œè¿™ä¸ªcontentæŒ‡å‘çš„æ˜¯ä¸€å—ç¼“å­˜ï¼Œå«åšbacking storeå½“UIViewè¢«ç»˜åˆ¶æ—¶ï¼ˆä»Ž CA::Transaction::commit:ä»¥åŽï¼‰ï¼ŒCPUæ‰§è¡ŒdrawRectï¼Œé€šè¿‡contextå°†æ•°æ®å†™å…¥backing storeå½“backing storeå†™å®ŒåŽï¼Œé€šè¿‡render serveräº¤ç»™GPUåŽ»æ¸²æŸ“ï¼Œå°†backing storeä¸­çš„bitmapæ•°æ®æ˜¾ç¤ºåœ¨å±å¹•ä¸Šæ‰€ä»¥åœ¨ drawRect æ–¹æ³•ä¸­ è¦é¦–å…ˆèŽ·å– context layerçš„ä»£ç†å¿…é¡»æ˜¯viewå—ï¼Œå¯ä»¥æ˜¯vcå—ï¼Ÿä¸ºä½•CALayerDelegate ä¸èƒ½ä¸»åŠ¨éµå¾ªï¼Ÿ ä¸èƒ½å†å°†æŸä¸ªUIViewè®¾ç½®ä¸ºCALayerçš„delegateï¼Œå› ä¸ºUIViewå¯¹è±¡å·²ç»æ˜¯å®ƒå†…éƒ¨æ ¹å±‚çš„delegateï¼Œå†æ¬¡è®¾ç½®ä¸ºå…¶ä»–å±‚çš„delegateå°±ä¼šå‡ºé—®é¢˜ã€‚UIViewControlleræ˜¯å¯ä»¥çš„ã€‚åœ¨è®¾ç½®ä»£ç†çš„æ—¶å€™ï¼Œå®ƒå¹¶ä¸è¦æ±‚æˆ‘ä»¬éµå®ˆåè®®ï¼Œè¯´æ˜Žè¿™ä¸ªæ–¹æ³•ä¸ºéžæ­£å¼åè®®ï¼Œå°±ä¸éœ€è¦å†é¢å¤–çš„æ˜¾ç¤ºéµå®ˆåè®®äº† iOS ä¸ºä»€ä¹ˆå¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­æ“ä½œUIå› ä¸ºUIKitä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è¯•æƒ³ä¸‹é¢è¿™å‡ ç§æƒ…å†µï¼š ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¾ç½®åŒä¸€ä¸ªèƒŒæ™¯å›¾ç‰‡ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½å› ä¸ºå½“å‰å›¾ç‰‡è¢«é‡Šæ”¾äº†ä¸¤æ¬¡è€Œå¯¼è‡´åº”ç”¨å´©æºƒã€‚ ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¾ç½®åŒä¸€ä¸ªUIViewçš„èƒŒæ™¯é¢œè‰²ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½æ¸²æŸ“æ˜¾ç¤ºçš„æ˜¯é¢œè‰²Aï¼Œè€Œæ­¤æ—¶åœ¨UIViewé€»è¾‘æ ‘ä¸Šçš„èƒŒæ™¯é¢œè‰²å±žæ€§ä¸ºBã€‚ ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œviewçš„æ ‘å½¢ç»“æž„ï¼šåœ¨çº¿ç¨‹Aä¸­forå¾ªçŽ¯éåŽ†å¹¶æ“ä½œå½“å‰Viewçš„æ‰€æœ‰subViewï¼Œç„¶åŽæ­¤æ—¶çº¿ç¨‹Bä¸­å°†æŸä¸ªsubViewç›´æŽ¥åˆ é™¤ï¼Œè¿™å°±å¯¼è‡´äº†é”™ä¹±è¿˜å¯èƒ½å¯¼è‡´åº”ç”¨å´©æºƒã€‚ iOS4ä¹‹åŽè‹¹æžœå°†å¤§éƒ¨åˆ†ç»˜å›¾çš„æ–¹æ³•å’Œè¯¸å¦‚ UIColor å’Œ UIFont è¿™æ ·çš„ç±»æ”¹å†™ä¸ºäº†çº¿ç¨‹å®‰å…¨å¯ç”¨ï¼Œä½†æ˜¯ä»ç„¶å¼ºçƒˆå»ºè®®è®²UIæ“ä½œä¿è¯åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œã€‚ å¦‚ä½•æ‰©å¤§buttonçš„æƒ¦è®°èŒƒå›´]]></content>
      <tags>
        <tag>iOSåŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OCä¸­çš„å„ç§å˜é‡]]></title>
    <url>%2F2015%2F06%2F10%2F2015%2FOC%E4%B8%AD%E7%9A%84%E5%90%84%E7%A7%8D%E5%8F%98%E9%87%8F%2F</url>
    <content type="text"><![CDATA[é¦–å…ˆçœ‹ä¸€ä¸‹å‡ ä¸ªæ¦‚å¿µåˆ†ç±»ï¼š æˆå‘˜å˜é‡ å±žæ€§ å±€éƒ¨å˜é‡ å…¨å±€å˜é‡ é™æ€å˜é‡ = å…¨å±€å˜é‡ + staticå£°æ˜Žçš„å±€éƒ¨å˜é‡ é¦–å…ˆå£°æ˜Žï¼š å…¨å±€å˜é‡å’Œé™æ€å˜é‡éƒ½å­˜åœ¨äºŽå…¨å±€å†…å­˜åŒºï¼Œåœ¨appç”Ÿå‘½å‘¨æœŸå†…åªåˆå§‹åŒ–ä¸€æ¬¡ å±€éƒ¨å˜é‡å­˜åœ¨äºŽæ ˆå†…å­˜åŒº è¿™é‡Œæ‰€è®¨è®ºçš„æ˜¯å˜é‡ï¼Œè€Œä¸æ˜¯å˜é‡çš„å€¼ï¼Œè¿™é‡Œä¸¤ä¸ªæ¦‚å¿µint a = 10ï¼Œaæ˜¯å˜é‡ï¼Œè€Œ10æ˜¯å®ƒçš„å€¼ï¼Œè¿™æ˜¯ä¸¤ä¸ªæ¦‚å¿µ åœ°ä½å†…å­˜æ˜¯å…¨å±€å˜é‡åŒºï¼Œé«˜ä½å†…å­˜æ˜¯å †æˆ–è€…æ ˆ0x108eae3389ä½ï¼Œ 0x7fff56d52ad412ä½ æˆå‘˜å˜é‡var å®šä¹‰ï¼šå˜é‡å­˜æ´»å‘¨æœŸè·Ÿä½ å®šä¹‰çš„è¯¥ç±»å®žä½“å¯¹è±¡ä¸€æ ·ï¼›ä½œç”¨åŸŸæ˜¯æ•´ä¸ªå®žä½“å¯¹è±¡ï¼›å¯ä»¥åœ¨hæ–‡ä»¶ä¸­å£°æ˜Žæˆ–è€…åœ¨mæ–‡ä»¶ä¸­@implementationä¸Šé¢æ·»åŠ çš„ 123456@interface CustomView1()&#123; UIView *_backView1;&#125;@property (nonatomic, strong) UIView *backView;@end ä¸Šè¾¹çš„ä¸¤ç§å†™æ³•éƒ½æ˜¯å¯¹çš„ï¼Œéƒ½ä»£è¡¨æ˜¯ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡ï¼Œåªä¸è¿‡@propertyå…³é”®å­—åšçš„äº‹æƒ…æ¯”è¾ƒå¤šï¼Œä¸Šè¾¹ç±»åç§°+()å«åšextensionï¼Œç±»æ‰©å±•ï¼Œå¦‚æžœæœ‰æ‹¬å·å†…åŠ ä¸Šåå­—å«åšcategoryï¼Œæ˜¯åˆ†ç±»ã€‚æˆå‘˜å˜é‡å£°æ˜Žå‘¨æœŸä¸Žç±»çš„å¯¹è±¡ç›¸åŒã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†ä¸€ä¸ªå¯¹è±¡èµ‹å€¼ç»™æˆå‘˜å˜é‡æ¥æå‡ä»–çš„ç”Ÿå‘½å‘¨æœŸã€‚ å±žæ€§@propertyå…³é”®å­—æ ‡è¯†çš„å˜é‡ å…¨å±€å˜é‡ å…¨å±€å˜é‡æŒ‡çš„æ˜¯å­˜åœ¨äºŽå…¨å±€å†…å­˜åŒºï¼Œè¿™ä¸ªappå£°æ˜Žå‘¨æœŸåªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œåœ¨æ‰€æœ‰çš„æ–‡ä»¶ä¸­ä¸å…è®¸é‡åï¼Œä¸‹é¢çš„æƒ…å†µå‡å±žäºŽå…¨å±€å˜é‡.mæ–‡ä»¶ä¸­123456789101112131415161718int a;@interface CustomView1()@endint b;@implementation CustomView1int c;CustomView *_backView;- (instancetype)initWithFrame:(CGRect)frame &#123; if (self = [super initWithFrame:frame]) &#123; [self initSubViews]; &#125; return self;&#125;@end è¯´æ˜Žï¼šaï¼Œbï¼Œcå‡ä¸ºå…¨å±€å˜é‡ .hæ–‡ä»¶ä¸­1234int d;@interface CustomView1@end è¯´æ˜Žï¼šä¸»è¦ä¸æ˜¯åœ¨interfaceå…³é”®å­—ä¸Žendå…³é”®å­—ä¹‹é—´éƒ½æ˜¯å…¨å±€å˜é‡ï¼Œå¦‚æžœå…¶ä»–æ–‡ä»¶ä¸­æœ‰è¿™ä¸ªåå­—çš„å˜é‡ï¼Œé‚£ä¹ˆç¼–è¯‘æ—¶ä¸èƒ½å¤Ÿé€šè¿‡çš„ å…¨å±€å˜é‡å¯ä»¥æä¾›å…¨éƒ¨çš„å¤–ç•Œè®¿é—®ï¼Œæ— è®ºä½ å®šä¹‰åœ¨hæ–‡ä»¶æˆ–è€…æ˜¯mæ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”æ— éœ€å¼•å…¥å¤´æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å†é‡æ–°å†å®šä¹‰ä¸€ä¸‹è¿™ä¸ªå˜é‡ï¼Œå¦åˆ™ç¼–è¯‘å™¨æ˜¯ä¸ä¼šé€šè¿‡çš„ï¼Œä»–æ€Žä¹ˆçŸ¥é“ä½ æœ‰è¿™ä¸ªå˜é‡å‘¢ï¼Œä½ è¯´æ˜¯å§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åƒä¸‹è¾¹è¿™æ ·æ¥ä½¿ç”¨ 123456789101112131415161718192021222324252627282930#import &quot;ViewController.h&quot;#import &quot;CustomView1.h&quot;typedef void(^MyBlcok)();NSString * const waha = @&quot;lalala&quot;;@interface ViewController ()@property (nonatomic, copy) MyBlcok myBlock;@property (nonatomic, strong) UIView *backView;@end#import &quot;AppDelegate.h&quot;@interface AppDelegate ()@end@implementation AppDelegate- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; // Override point for customization after application launch. extern NSString *waha; NSLog(@&quot;appdelegate***%@---%p&quot;, waha, &amp;waha); return YES;&#125; æˆ‘ä»¬éœ€è¦å†é‡æ–°å®šä¹‰ä¸€ä¸‹è¿™ä¸ªå˜é‡ï¼Œå¦åˆ™ç¼–è¯‘å™¨æ˜¯é€šä¸è¿‡çš„ï¼Œä¸è¿‡è¦å°†è¿™å˜é‡å˜ä¸ºå…¨å±€æ‰å¯ä»¥ï¼Œå…¶å®žä¹Ÿå°±æ˜¯æ”¹å˜ä¸€ä¸‹å®ƒçš„å†…å­˜ä½ç½®ï¼Œå°†å…¶ä»Žæ ˆç§»åŠ¨åˆ°å…¨å±€å†…å­˜ä¸­åŽ» static + å…¨å±€å˜é‡è¿™ç§æ–¹å¼çš„è¯è¿™ä¸ªå…¨å±€å˜é‡å°±ä¼šå˜æˆè¿™ä¸ªç±»æ‰€ç§æœ‰çš„ï¼Œå£°æ˜Žå‘¨æœŸä¸Žè¯¥ç±»ç›¸åŒï¼Œå…è®¸é‡å iOSä¸­ä½¿ç”¨å…¨å±€å˜é‡çš„æ–¹æ³• é™æ€å˜é‡ å•ä¾‹ åœ¨æŸä¸ªçŽ°æˆçš„å•ä¾‹ä¸­å¢žåŠ å±žæ€§ä¾‹å¦‚:appdelegate å±€éƒ¨å˜é‡é™¤äº†å…¨å±€å˜é‡å‰©ä¸‹çš„éƒ½æ˜¯å±€éƒ¨å˜é‡ï¼Œå†…å­˜æ˜¯åœ¨æ ˆä¸Šçš„ï¼Œå¦‚æžœç”¨å…³é”®å­—staticæ¥ä¿®é¥°å±€éƒ¨å˜é‡é‚£ä¹ˆå®ƒå°±å˜æˆäº†ä¸€ä¸ªé™æ€å˜é‡ï¼Œå†…å­˜ä¹Ÿåˆ°äº†å…¨å±€å˜é‡åŒºï¼Œåªæ˜¯ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿäº†æ”¹å˜ï¼Œä½†æ˜¯ä½œç”¨åŸŸå¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚ å¦‚æžœç”¨externæ¥ä¿®é¥°å±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šç›´æŽ¥å†…å­˜åŒºå˜ä¸ºå…¨å±€åŒºï¼Œç”Ÿå‘½å‘¨æœŸå’Œappä¸€æ ·äº†ã€‚å¦‚æžœåŽè¾¹å†æœ‰å…¶ä»–çš„åŒåå…¨å±€å˜é‡ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯åŽè¾¹ç”Ÿå‘½çš„é‚£ä¸ªä¸ä¼šç”Ÿæ•ˆçš„ï¼Œä¸è¿‡å€¼è¿˜æ˜¯å…è®¸æ”¹çš„ã€‚å¯ä»¥æ‰“å°æ¥éªŒè¯ä¸€ä¸‹ï¼Œæ— è®ºä½ åœ¨åŽè¾¹å£°æ˜Žå¤šå°‘ä¸ªè¯¥åŒåå˜é‡ï¼Œä»–ä»¬çš„åœ°å€æ€»æ˜¯ä¸€æ ·çš„ã€‚ å¸¸é‡ä¸Žconstå…³é”®å­—é¡¾åæ€ä¹‰ï¼Œå¸¸é‡å°±æ˜¯ä¸èƒ½è¢«ä¿®æ”¹çš„å˜é‡ï¼Œè¯´åˆ°è¿™é‡Œæˆ‘å°±æœ‰ä¸€ä¸ªç–‘é—®ï¼Œè¿™ä¸ªè·Ÿå®æœ‰å•¥åŒºåˆ«ï¼Ÿ constç®€ä»‹ï¼šä¹‹å‰å¸¸ç”¨çš„å­—ç¬¦ä¸²å¸¸é‡ï¼Œä¸€èˆ¬æ˜¯æŠ½æˆå®ï¼Œä½†æ˜¯è‹¹æžœä¸æŽ¨èæˆ‘ä»¬æŠ½æˆå®ï¼ŒæŽ¨èæˆ‘ä»¬ä½¿ç”¨constå¸¸é‡ã€‚ ç¼–è¯‘æ—¶åˆ»:å®æ˜¯é¢„ç¼–è¯‘ï¼ˆç¼–è¯‘ä¹‹å‰å¤„ç†ï¼‰ï¼Œconstæ˜¯ç¼–è¯‘é˜¶æ®µã€‚ ç¼–è¯‘æ£€æŸ¥:å®ä¸åšæ£€æŸ¥ï¼Œä¸ä¼šæŠ¥ç¼–è¯‘é”™è¯¯ï¼Œåªæ˜¯æ›¿æ¢ï¼Œconstä¼šç¼–è¯‘æ£€æŸ¥ï¼Œä¼šæŠ¥ç¼–è¯‘é”™è¯¯ã€‚ å®çš„å¥½å¤„:å®èƒ½å®šä¹‰ä¸€äº›å‡½æ•°ï¼Œæ–¹æ³•ã€‚ constä¸èƒ½ã€‚ å®çš„åå¤„:ä½¿ç”¨å¤§é‡å®ï¼Œå®¹æ˜“é€ æˆç¼–è¯‘æ—¶é—´ä¹…ï¼Œæ¯æ¬¡éƒ½éœ€è¦é‡æ–°æ›¿æ¢ã€‚ æ³¨æ„:å¾ˆå¤šBlogéƒ½è¯´ä½¿ç”¨å®ï¼Œä¼šæ¶ˆè€—å¾ˆå¤šå†…å­˜ï¼Œæˆ‘è¿™éªŒè¯å¹¶ä¸ä¼šç”Ÿæˆå¾ˆå¤šå†…å­˜ï¼Œå®å®šä¹‰çš„æ˜¯å¸¸é‡ï¼Œå¸¸é‡éƒ½æ”¾åœ¨å¸¸é‡åŒºï¼Œåªä¼šç”Ÿæˆä¸€ä»½å†…å­˜ æˆ‘ä»¬ç¡®å®žå¯ä»¥é€‰æ‹©ä½¿ç”¨å®æ¥å®šä¹‰ä¸€ä¸ªå¸¸é‡ï¼Œç„¶åŽç»™å¾ˆå¤šåœ°æ–¹ä½¿ç”¨ï¼Œå½“æˆ‘éœ€è¦æ”¹å˜è¿™ä¸ªå˜é‡çš„æ—¶å€™ï¼Œæˆ‘åªè¦æ”¹å˜è¿™ä¸ªå®åŽè¾¹çš„å€¼å°±å¯ä»¥äº†ï¼Œä½¿ç”¨çš„åœºæ™¯æ¯”å¦‚ï¼š é¡¹ç›®ä¸­çš„url é¡¹ç›®ä¸­çš„å±å¹•å°ºå¯¸ é¡¹ç›®ä¸­çš„æŸäº›ç‰¹å®šé¢œè‰²å’Œå°ºå¯¸ æœ‰äº›åœ°æ–¹å®ä¼šä½“çŽ°å‡ºå®ƒçš„ä¼˜åŠ¿ï¼Œæ¯”å¦‚ä¸€äº›ä»£ç å—çš„æ›¿æ¢ï¼Œå…·ä½“æ¥è¯´ï¼Œæ¯”å¦‚å±å¹•çš„å°ºå¯¸çš„èŽ·å–ï¼Œæ¯”å¦‚weakSelfçš„å®šä¹‰ï¼Œä½†æ˜¯ä½¿ç”¨å¸¸é‡çš„æƒ…å†µä½¿ç”¨å®æ˜¯æœ‰äº›é—®é¢˜çš„ï¼Œå°±æ˜¯å› ä¸ºå®æ˜¯æ²¡æœ‰ç±»åž‹åˆ¤æ–­çš„ï¼Œé‚£ä¹ˆå¦‚æžœæŸä¸ªCGFloatçš„å€¼ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å®ï¼Œé‚£ä¹ˆç¼–è¯‘é˜¶æ®µå°±ä¸ä¼šè­¦å‘Šä»»ä½•é”™è¯¯ï¼Œå“ªæ€•ä½ å®šä¹‰äº†ä¸€ä¸ªNSStringç±»åž‹çš„å®ï¼Œç„¶åŽä½ åˆæŠŠå®ƒå½“åšäº†CGFloatæ¥ä½¿ç”¨ï¼Œæ‰€ä»¥å¯¹äºŽæŸäº›å€¼å¾—å®šä¹‰ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ç±»åž‹å¸¸é‡ï¼Œè€Œä¸ç”¨å®æ¥å®šä¹‰ï¼Œæ¯”å¦‚ï¼š åŠ¨ç”»æ—¶é—´ æŒ‰é’®å°ºå¯¸ æ–‡å­—å°ºå¯¸ ç­‰ç­‰ å…·ä½“æ¥è®²åˆå¯èƒ½åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š å…¨éƒ¨æ–‡ä»¶éƒ½ä½¿ç”¨ åªç»™è‡ªå·±ä½¿ç”¨ æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ç»™è‡ªå·±ä½¿ç”¨çš„å¸¸é‡çš„å®šä¹‰ï¼š 1234567891011#import &quot;key1.h&quot;static const NSTimeInterval kAnimationDuration = 0.2;@interface key1()@end@implementation key1@end è¦ç‚¹æœ‰ä¸¤ä¸ªï¼š è¦ç”¨staticå’ŒconståŒæ—¶æ¥å£°æ˜Ž å£°æ˜Žåœ¨å…³é”®å­—ä¹‹å¤– å£°æ˜Žåœ¨å…³é”®å­—ä¹‹å¤–é‚£ä¹ˆå°±æ˜¯å…¨å±€å˜é‡ï¼Œåˆå› ä¸ºæ˜¯ç»™è‡ªå·±ç”¨çš„ï¼Œæ‰€ä»¥è¦åŠ ä¸Šstaticåšé™åˆ¶ï¼Œè€Œconstæ˜¯ä¸ºäº†é˜²æ­¢è¿™ä¸ªå˜é‡åœ¨åŽè¾¹è¢«ä¿®æ”¹ å†æ¥çœ‹ä¸€ä¸‹å…¨å±€ä½¿ç”¨çš„å¸¸é‡ï¼Œæ­¤ç±»å¸¸é‡éœ€è¦æ”¾åœ¨å…¨å±€ç¬¦å·è¡¨,ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç»™å…¨å±€ä½¿ç”¨çš„å¸¸é‡æ˜¯å¦‚ä½•æ¥å®šä¹‰çš„ï¼š12345//In the header fileextern NSString *const EOCStringConst;//è¿™æ ·çš„constçš„ä½ç½®æ„å‘³ç€è¿™ä¸ªæŒ‡é’ˆæ˜¯ä¸€ä¸ªå¸¸é‡//In the implementation fileNSString *const EOCStringConstant = @&quot;VALUE&quot;; è¿™ç§å¸¸é‡ä¸€èˆ¬åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜Žï¼Œç„¶åŽåœ¨å®žçŽ°æ–‡ä»¶ä¸­å®šä¹‰ï¼Œæ³¨æ„constçš„ä½ç½®ï¼Œä¸å…è®¸æ›´æ”¹æŒ‡é’ˆçš„æŒ‡å‘ï¼Œå¦å¤–ç¼–è¯‘å™¨çœ‹åˆ°externå…³é”®å­—ï¼Œå°±æ˜Žç™½åœ¨å…¨å±€ç¬¦å·è¡¨ä¸­å°†ä¼šæœ‰ä¸€ä¸ªåå­—å«EOCStringConstantçš„ç¬¦å·äº†ï¼Œ staticå’Œextern staticä½œç”¨ï¼š ä¿®é¥°å±€éƒ¨å˜é‡ å»¶é•¿å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸ å±€éƒ¨å˜é‡åªä¼šç”Ÿæˆä¸€ä»½å†…å­˜ï¼Œåˆå§‹åŒ–ä¸€æ¬¡ æ”¹å˜å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸ ä¿®é¥°å…¨å±€å˜é‡ åªèƒ½åœ¨æœ¬æ–‡ä»¶è®¿é—®ï¼Œä¿®æ”¹å…¨å±€å˜é‡çš„ä½œç”¨åŸŸï¼Œç”Ÿå‘½å‘¨æœŸä¸å˜ é¿å…é‡å¤å®šä¹‰å…¨å±€å˜é‡ extern ä½œç”¨ï¼šèŽ·å–å…¨å±€å˜é‡çš„å€¼ï¼Œä¸èƒ½ç”¨æ¥å®šä¹‰å˜é‡ å·¥ä½œåŽŸç†ï¼šçŽ°åœ¨å½“å‰æ–‡ä»¶æŸ¥æ‰¾æœ‰æœ¨æœ‰å…¨å±€å˜é‡ï¼Œæ²¡æœ‰çš„è¯æ‰åŽ»å…¶ä»–æ–‡ä»¶æŸ¥æ‰¾ staticå’Œconststaticä¸Žconstä½œç”¨:å£°æ˜Žä¸€ä¸ªåªè¯»çš„é™æ€å˜é‡ externä¸Žconstè”åˆä½¿ç”¨ å¼€å‘ä¸­ä½¿ç”¨åœºæ™¯:åœ¨å¤šä¸ªæ–‡ä»¶ä¸­ç»å¸¸ä½¿ç”¨çš„åŒä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡ï¼Œå¯ä»¥ä½¿ç”¨externä¸Žconstç»„åˆã€‚ åŽŸå› :staticä¸Žconstç»„åˆï¼šåœ¨æ¯ä¸ªæ–‡ä»¶éƒ½éœ€è¦å®šä¹‰ä¸€ä»½é™æ€å…¨å±€å˜é‡ã€‚ externä¸Žconstç»„åˆ:åªéœ€è¦å®šä¹‰ä¸€ä»½å…¨å±€å˜é‡ï¼Œå¤šä¸ªæ–‡ä»¶å…±äº«ã€‚ å…¨å±€å¸¸é‡æ­£è§„å†™æ³•:å¼€å‘ä¸­ä¾¿äºŽç®¡ç†æ‰€æœ‰çš„å…¨å±€å˜é‡ï¼Œé€šå¸¸æžä¸€ä¸ªGlobeConstæ–‡ä»¶ï¼Œé‡Œé¢ä¸“é—¨å®šä¹‰å…¨å±€å˜é‡ï¼Œç»Ÿä¸€ç®¡ç†ï¼Œè¦ä¸ç„¶é¡¹ç›®æ–‡ä»¶å¤šä¸å¥½æ‰¾ã€‚ 123456789101112GlobeConst.h/*******************************é¦–é¡µ****************************/extern NSString * const nameKey = @&quot;name&quot;;/*******************************é¦–é¡µ****************************/GlobeConst.m#import &lt;Foundation/Foundation.h&gt;/*******************************é¦–é¡µ****************************/NSString * const nameKey = @&quot;name&quot;;/*******************************é¦–é¡µ****************************/ æˆ‘ä»¬çŽ°åœ¨æ¥ç†è§£ä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼Œå…¶å®žåº”è¯¥åè¿‡æ¥çœ‹ï¼Œé¦–å…ˆæˆ‘ä»¬åœ¨.mæ–‡ä»¶ä¸­å£°æ˜Žå¹¶ä¸”å¯¹nameKeyè¿›è¡Œäº†èµ‹å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨.hæ–‡ä»¶ä¸­æ‰å¯ä»¥é€šè¿‡externæ¥å–åˆ°nameKeyçš„å€¼ï¼Œå¹¶ä¸”ä½¿ç”¨ï¼Œå…¶å®žæˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹è¿›è¡ŒnameKeyçš„å–å€¼ï¼Œæ¯”å¦‚å¦å¤–ä¸€ä¸ªä¸ç›¸å…³çš„.mæ–‡ä»¶ï¼Œåªä¸è¿‡è¿™æ ·åšä¼šæ¯”è¾ƒç¹çï¼Œéœ€è¦é‡æ–°å£°æ˜Žè¿™ä¸ªå˜é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»Ÿä¸€å°†è¿™äº›ä¸ªé™æ€å˜é‡ä»¥externçš„æ–¹å¼å£°æ˜Žå‡ºæ¥ï¼Œæ”¾åœ¨.hæ–‡ä»¶ä¸­ï¼Œè®©å…¶ä»–çš„æ–‡ä»¶è°ƒç”¨ï¼Œæ³¨æ„ï¼Œè¿™é‡Œæ˜¯ä¸èƒ½è¿›è¡Œèµ‹å€¼æ“ä½œçš„ è¿™é‡Œåšä¸€ä¸ªè¾¨æžï¼šå…¨å±€å˜é‡å¹¶ä¸æ˜¯å› ä¸ºä½ ç”¨externå…³é”®å­—ï¼Œå…¨å±€å˜é‡æ˜¯ç”±ä½ å˜é‡å£°æ˜Žçš„ä½ç½®æ‰€å†³å®šçš„ï¼Œè€Œexternå…¶å®žæ˜¯ä¸€ä¸ªå–å€¼çš„æ“ä½œï¼ŒåŒæ—¶å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªå˜é‡æ— è®ºå£°æ˜Žåœ¨å“ªé‡Œï¼Œæˆ‘çŸ¥é“è¿™ä¸ªå…¨å±€å˜é‡æ˜¯å­˜åœ¨çš„ï¼Œæ”¾å¿ƒçš„ä½¿ç”¨å°±å¥½ï¼Œä½†æ˜¯å¦‚æžœçœŸçš„è¿™ä¸ªå…¨å±€å˜é‡æ˜¯ä¸å­˜åœ¨çš„ï¼Œæ¯”å¦‚è¯´ä½ æŠŠå®ƒå£°æ˜Žå®šä¹‰åœ¨äº†æŸä¸ªå‡½æ•°å†…éƒ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™è‚¯å®šæŠ¥é”™äº†å¦å¤–æˆ‘ä»¬ä½¿ç”¨extern NSString *name = @&quot;åå­—&quot;è¿™ç§å†™æ³•æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºexternæ˜¯å–å€¼æ“ä½œï¼Œè¿™æ ·å†™ç¼–è¯‘å™¨ä¹Ÿä¼šæŠ¥é”™çš„ å…³äºŽexternå…³é”®å­—æ€»ç»“å¦‚ä¸‹ï¼š Declaration can be done any number of times but definition only once. â€œexternâ€ keyword is used to extend the visibility of variables/functions(). Since functions are visible through out the program by default. The use of extern is not needed in function declaration/definition. Its use is redundant. When extern is used with a variable, itâ€™s only declared not defined. As an exception, when an extern variable is declared with initialization, it is taken as definition of the variable as well. weak ä¸Ž strongå½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå˜é‡çš„æ—¶å€™12UIView *view;view = [UIView alloc] init]; å…¶å®žè¿™ä¸ªviewå‰è¾¹é»˜è®¤æœ‰ä¸€ä¸ªå…³é”®å­—ï¼Œé‚£å°±æ˜¯__strongï¼Œè¿™æ˜¯å› ä¸ºè¿™ä¸ªå…³é”®å­—ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„=èµ‹å€¼çš„æ—¶å€™ï¼Œæ˜¯ä¸€ä¸ªå¼ºå¼•ç”¨ï¼Œæ‰€ä»¥allocåˆ›å»ºå‡ºæ¥çš„å¯¹è±¡æ˜¯ä¸ä¼šè¢«é‡Šæ”¾çš„ï¼Œåˆå› ä¸ºviewè¿™ä¸ªå˜é‡è¢«å®šä¹‰åœ¨æ ˆä¸Šï¼Œæ‰€ä»¥å½“ä»£ç æ‰§è¡Œåˆ°ä¸€ä¸ªå‡½æ•°ç»“æŸçš„æ—¶å€™ï¼Œè¿™ä¸ªviewå˜é‡ä¼šè¢«é‡Šæ”¾ï¼Œè¿™æ ·allocå‡ºæ¥çš„å¯¹è±¡å°±å¤±åŽ»äº†å¼ºå¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å†…å­˜ä¹Ÿå°†è¢«ç³»ç»Ÿæ‰€å›žæ”¶ã€‚ çŽ°åœ¨æˆ‘ä»¬æ¥ç†è§£ä¸€ä¸‹blockçš„èµ‹å€¼æ“ä½œï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå½“ä¸€ä¸ªblockè¢«åˆ›å»ºçš„æ—¶å€™ï¼Œå‡å¦‚æ²¡æœ‰æ•èŽ·å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªblockæ˜¯å®šä¹‰åœ¨å…¨å±€çš„ï¼Œå¯¹å…¨å±€blockåšä¸€ä¸ªå¼ºå¼•ç”¨çš„èµ‹å€¼æ“ä½œæ˜¯ä¸ä¼šæ”¹å˜å®ƒçš„å­˜å‚¨ä½ç½®çš„ï¼Œå¦‚æžœè¿™ä¸ªblockæ•èŽ·äº†ä¸€ä¸ªæ ˆä¸Šçš„å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªblockå°±ä¼šè¢«ç§»åŠ¨åˆ°æ ˆä¸Šï¼Œè¿™ä¸ªæ—¶å€™å¦‚æžœæˆ‘ä»¬å¯¹è¿™ä¸ªblockåšäº†ä¸€ä¸ªå¼ºå¼•ç”¨çš„èµ‹å€¼æ“ä½œï¼Œè¿™ä¸ªblockå°±è¢«ç§»åŠ¨åˆ°äº†å †ä¸Šã€‚å†…å­˜ç®¡ç†ç­–ç•¥å°±å˜æˆäº†æ˜¯å¦æœ‰å¼ºæŒ‡é’ˆå¼•ç”¨ ä½¿ç”¨å¸¸é‡æ›¿æ¢å®å®šä¹‰ä½¿ç”¨å®å®šä¹‰è¿‡å¤šçš„è¯ï¼Œéšç€å·¥ç¨‹è¶Šæ¥è¶Šå¤§ï¼Œç¼–è¯‘é€Ÿåº¦ä¼šè¶Šæ¥è¶Šæ…¢ã€‚1234567static CGFloat const kLogoImageWidth = 100; //logoå®½åº¦static CGFloat const kLogoImageHeight = 100; //logoå®½åº¦static CGFloat const kLogoImageY = 110;static CGFloat const kBtnHeight = 40;static CGFloat const kPadding = 30;static CGFloat const kWeixinTopPadding = 15;static CGFloat const kWeiboLoginBottom = 230;#define kScaleSpace(designSpace) ((designSpace)(SCREEN_HEIGHT/667.0)) //æ ¹æ®iphone6 çš„è®¾è®¡ç¨¿è®¡ç®—ç¼©æ”¾é«˜åº¦ æ›¿æ¢å®Œæˆä¹‹åŽä»£ç çš„ç¼–è¯‘é€Ÿåº¦ç¡®å®žä¸ŠåŽ»äº†ï¼ŒçŽ°åœ¨ç¼–è¯‘å¿«äº†ã€‚å¸Œæœ›å¯¹æ­£åœ¨ä¸ºç¼–è¯‘é€Ÿåº¦æ…¢æ„Ÿåˆ°å›°æƒ‘çš„æ‚¨æœ‰æ‰€å¸®åŠ© è¡¥å……è¯´æ˜Žï¼šä»¥ä¸Šçš„ç±»åž‹å¸¸é‡æ›¿æ¢å®çš„æƒ…å†µï¼Œåªæ˜¯é€‚ç”¨äºŽå•ä¸ªæ–‡ä»¶çš„æƒ…å†µã€‚å¦‚æžœæ˜¯å¤šä¸ªæ–‡ä»¶å…±äº«çš„å¸¸é‡ï¼Œè‹¹æžœæŽ¨èçš„è¿™æ ·çš„æ–¹å¼ï¼š 12345678910111213UserInfoModelConstants.hextern NSString *const USER_AGE_KEY ;extern NSString *const USER_TELPHONE_KEY ;extern NSString *const USER_ADDRESS_KEY ;extern NSString *const USER_BRIEF_KEY ;UserInfoModelConstants.mNSString *const BKUSER_AGE_KEY = @&quot;XXXXX.userAge&quot;;NSString *const BKUSER_TELPHONE_KEY = @&quot;XXXXX.telphoneNO&quot;;NSString *const BKUSER_ADDRESS_KEY = @&quot;XXXXX.address&quot;;NSString *const BKUSER_BRIEF_KEY = @&quot;XXXXX.brief&quot;; åœ¨éœ€è¦ä½¿ç”¨å…±äº«å¸¸é‡çš„æ–‡ä»¶ä¸­å¼•å…¥UserInfoModelConstants.hå³å¯ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Blockä½¿ç”¨æ€»ç»“]]></title>
    <url>%2F2015%2F05%2F02%2F2015%2FBlock%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[blockç”¨æ¥ä¿å­˜ä¸€æ®µä»£ç ï¼Œåœ¨éœ€è¦çš„æ—¶å€™å›žè°ƒï¼Œæ˜¯å¯¹é—­åŒ…çš„å®žçŽ° æ‰€ä»¥ï¼Œåˆ‡å‹¿å°†è¿‡ç¨‹ä»£ç å½“åšblockçš„å®žé™…å®žçŽ°ï¼Œåˆ‡è®°åˆ‡è®°ï¼ï¼ï¼ blockçš„å£°æ˜Ž123456789101112131415161718192021222324252627//å˜é‡void (^myBlock)();int (^myBlock1)(int, int);//å±žæ€§1typydef void(^Myblock)();//è¿™æ ·Myblockå°±ä»£è¡¨ä¸€ä¸ªblockç±»åž‹äº†@property (nonatomic, copy) Myblock myblock; //å±žæ€§2@property (nonatomic, copy) void(^myBlock)(int);//è¿™æ ·ä»ç„¶æ˜¯ä¸€ä¸ªblockï¼Œè€Œä¸”åå­—å°±æ˜¯myBlock//å‚æ•°- (void) modifyUserInfoWithNickName:(NSString *) nickName userLogo:(NSString *) userLogo sex:(NSNumber *) sex location:(NSString *) location succeed:(void(^)())successBlock fail:(void(^)(NSError *error))errorBlock; //è¿™ä¸ªæ—¶å€™çš„æ ¼å¼å°±å˜æˆäº†(è¿”å›ž+(^)(å‚æ•°))åå­— ä¹Ÿå¯ä»¥è¿™æ ·typedef void(^FXSuccessBlock)(id result);typedef void(^FXFailBlock)(NSError *error);- (void)onlyGetLoginUserInfo:(FXSuccessBlock)successHandler failHandler:(FXFailBlock)failHandler; blockå£°æ˜Žçš„æ ¼å¼ï¼šè¿”å›žå€¼ + blockåå­— + å‚æ•° blockå®žçŽ°blockå®žçŽ°çš„æ ¼å¼ï¼š^(å‚æ•°){} æ³¨æ„blockå®žçŽ°æ˜¯è¦åŠ ä¸Šå˜é‡åå­—çš„123self.loginBlock = ^(BOOL complete) &#123; NSLog(@&quot;ç™»å½•æˆåŠŸ&quot;);&#125;; æˆ–è€…æœ‰ç§å·å·§çš„å†™æ³•ï¼Œå°±æ˜¯åˆ©ç”¨setæ–¹æ³•123[self setLoginSucBlock:^(BOOL complete) &#123; NSLog(@&quot;ç™»å½•æˆåŠŸ&quot;); &#125;]; Blockå¯¹å¤–éƒ¨å˜é‡çš„ç®¡ç†åŸºæœ¬æ•°æ®ç±»åž‹1ã€å±€éƒ¨å˜é‡å±€éƒ¨è‡ªåŠ¨å˜é‡ï¼Œåœ¨Blockä¸­åªè¯»ã€‚Blockå®šä¹‰æ—¶copyå˜é‡çš„å€¼ï¼Œåœ¨Blockä¸­ä½œä¸ºå¸¸é‡ä½¿ç”¨ï¼Œæ‰€ä»¥å³ä½¿å˜é‡çš„å€¼åœ¨Blockå¤–æ”¹å˜ï¼Œä¹Ÿä¸å½±å“ä»–åœ¨Blockä¸­çš„å€¼ã€‚12345678int base = 100;long (^sum)(int, int) = ^ long (int a, int b) &#123; return base + a + b;&#125;;base = 0;PRintf(&quot;%ld\n&quot;,sum(1,2));// è¿™é‡Œè¾“å‡ºæ˜¯103ï¼Œè€Œä¸æ˜¯3, å› ä¸ºå—å†…baseä¸ºæ‹·è´çš„å¸¸é‡ 100&#125; //è¿›å…¥blockçš„æ˜¯å€¼ï¼Œè€Œä¸æ˜¯åœ°å€ï¼Œå› ä¸ºè¿™ä¸ªå˜é‡æ˜¯å®šä¹‰åœ¨æ ˆå†…å­˜ä¸­çš„ï¼Œéšæ—¶å¯èƒ½è¢«é‡Šæ”¾ï¼Œæ‰€ä»¥æˆ‘è¦å°†å®ƒçš„å€¼copyè¿›æ¥ï¼Œé˜²æ­¢æˆ‘ä½¿ç”¨çš„æ—¶å€™å–ä¸åˆ° 2ã€STATICä¿®é¥°ç¬¦çš„å…¨å±€å˜é‡å› ä¸ºå…¨å±€å˜é‡æˆ–é™æ€å˜é‡åœ¨å†…å­˜ä¸­çš„åœ°å€æ˜¯å›ºå®šçš„ï¼ŒBlockåœ¨è¯»å–è¯¥å˜é‡å€¼çš„æ—¶å€™æ˜¯ç›´æŽ¥ä»Žå…¶æ‰€åœ¨å†…å­˜è¯»å‡ºï¼ŒèŽ·å–åˆ°çš„æ˜¯æœ€æ–°å€¼ï¼Œè€Œä¸æ˜¯åœ¨å®šä¹‰æ—¶copyçš„å¸¸é‡ã€‚ åŠ å…¥ä¸€ä¸ªå˜é‡å®šä¹‰åœ¨å‡½æ•°ä¹‹å¤–ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡æ˜¯å…¨å±€å˜é‡ã€‚ 123456789static int a = 10; int(^sum)(int) =^(int b) &#123; return a + b;&#125;;a = 0;NSLog(@&quot;----%d&quot;, sum(2));//2 //è¿›å…¥blockçš„æ˜¯åœ°å€è€Œä¸æ˜¯å€¼ï¼Œå› ä¸ºstaticä¿®é¥°çš„å˜é‡åœ¨å†…å­˜ä¸­å­˜åœ¨äºŽé™æ€å˜é‡åŒºï¼Œæ˜¯ä¸ä¼šè¢«å›žæ”¶æˆ–è€…é‡Šæ”¾çš„ï¼Œå³ä½¿é‡Šæ”¾äº†ï¼Œä¹Ÿä¼šåœ¨çˆ±diskä¸­æœ‰å¤‡ä»½ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™å†åˆ›å»ºç„¶åŽèµ‹å€¼ç»™æˆ‘å°±å¥½äº†ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒè¢«é”€æ¯ï¼Œæ‰€ä»¥ç”¨åœ°å€å°±å¥½äº† 3.__blockä¿®é¥°çš„å˜é‡è¢«__blockä¿®é¥°çš„å˜é‡ç§°ä½œBlockå˜é‡ã€‚ åŸºæœ¬ç±»åž‹çš„Blockå˜é‡ç­‰æ•ˆäºŽå…¨å±€å˜é‡ã€æˆ–é™æ€å˜é‡ã€‚ 12345678910 __block int a = 10; int(^sum)(int) =^(int b) &#123; return a + b;&#125;;a = 0;NSLog(@&quot;----%d&quot;, sum(2));//2//è¿›å…¥blockçš„æ˜¯åœ°å€è€Œä¸æ˜¯å€¼ï¼Œè¿™ä¸ªé“ç†ä¸Žstaticæ˜¯ä¸€è‡´çš„ æ³¨æ„ï¼šå¦‚æžœæˆ‘ä»¬ç”¨NSStringæ¥éªŒè¯å¯¹è±¡çš„blockçš„å†…å­˜ç®¡ç†æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºï¼ŒæŸå‡ ç§æƒ…å†µä¸‹NSStringå¯¹è±¡æ˜¯å­˜æ”¾åœ¨å¸¸é‡åŒºçš„ï¼Œç›¸å½“äºŽintè¿™ç§å˜é‡ è¡¥å……ï¼š123NSString *name = @&quot;han&quot;;NSLog(&quot;%p&quot;, name);//æ‰“å°çš„æ˜¯@&quot;han&quot;çš„åœ°å€NSLog(&quot;%p&quot;, &amp;name);//æ‰“å°çš„æ˜¯nameè¿™ä¸ªæŒ‡é’ˆçš„åœ°å€ å¯¹è±¡å¯¹è±¡ä¸€å®šæ˜¯å­˜åœ¨äºŽå †ä¸Šçš„ï¼Œæ‰€ä»¥å†³å®šè¦ä¸è¦æ‹·è´æŒ‡é’ˆçš„å…³é”®åœ¨äºŽå¼•ç”¨çš„æŒ‡é’ˆ123456789101112131415161718@implementation ViewControllerUIView *view;- (void)viewDidLoad &#123; [super viewDidLoad]; view = [[UIView alloc] init]; void(^stackBlock)() = ^() &#123; NSLog(@&quot;&amp;&amp;&amp;&amp;&amp;%p&quot;, &amp;view); &#125;; NSLog(@&quot;****%p&quot;, &amp;view); stackBlock();&#125;@end//2016-07-11 20:47:36.908 block[1906:517460] ****0x1000d1208//2016-07-11 20:47:36.909 block[1906:517460] &amp;&amp;&amp;&amp;&amp;0x1000d1208 çŽ°åœ¨æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡æ¥å¼•ç”¨UIViewï¼Œæˆ‘ä»¬å‘çŽ°æŒ‡é’ˆç›´æŽ¥å°±æ˜¯åŽŸæ¥çš„åœ°å€ï¼Œå¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œ 123456789101112131415161718192021@implementation ViewControllervoid(^globalBlock)();int a;//UIView *view;- (void)viewDidLoad &#123; [super viewDidLoad]; UIView *view = [[UIView alloc] init]; void(^stackBlock)() = ^() &#123; NSLog(@&quot;&amp;&amp;&amp;&amp;&amp;%p&quot;, &amp;view); &#125;; NSLog(@&quot;****%p&quot;, &amp;view); stackBlock();&#125;//2016-07-11 21:00:51.055 block[1916:519453] ****0x16fd69f28//2016-07-11 21:00:51.056 block[1916:519453] &amp;&amp;&amp;&amp;&amp;0x13563a480 å¾ˆæ˜Žæ˜¾æ˜¯ä¸¤ä¸ªæŒ‡é’ˆ é‚£å¦‚æžœæ˜¯ä¸€ä¸ªæˆå‘˜å˜é‡ä¼šæ˜¯ä»€ä¹ˆæ•ˆæžœå‘¢ï¼Ÿç»è¿‡éªŒè¯ä¹Ÿæ˜¯åŒä¸€ä¸ªæŒ‡é’ˆã€‚ä¸€ä¸ªæŒ‡é’ˆå’Œä¸¤ä¸ªæŒ‡é’ˆæœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ï¼Œå¦‚æžœæ˜¯ä¸¤ä¸ªæŒ‡é’ˆçš„è¯ï¼Œé‚£ä¹ˆå³ä½¿ä½ å¤–è¾¹çš„æŒ‡é’ˆé‡Šæ”¾æŽ‰ï¼Œè¿™ä¸ªå¯¹è±¡ä¹Ÿæ˜¯é‡Šæ”¾ä¸æŽ‰çš„ï¼Œå¦‚æžœè¿™ä¸ªblockä¸é‡Šæ”¾çš„è¯ï¼Œæ‰€ä»¥å¦‚æžœè¿™ä¸ªblockæ˜¯ä¸€ä¸ªå…¨å±€çš„blockè¿™ä¸ªå¯¹è±¡ä¹Ÿå°±æ²¡æœ‰é‡Šæ”¾çš„å¯èƒ½äº†ã€‚è§£å†³çš„æ–¹æ¡ˆå°±æ˜¯ï¼Œä¼ å…¥ä¸€ä¸ªå¼±å¼•ç”¨çš„æŒ‡é’ˆï¼Œè¿™æ ·èµ·ç è¿™ä¸ªè¢«å¼•ç”¨çš„å¯¹è±¡æ˜¯ä¸ä¼šå› ä¸ºblockè€Œä¸èƒ½é‡Šæ”¾äº†ã€‚ä»Žè¿™ä¸ªè§’åº¦æ¥ç†è§£ï¼Œä¸ºä»€ä¹ˆä¼šå­˜åœ¨å †ï¼Œæ ˆï¼Œå…¨å±€blockï¼Œå› ä¸ºå¦‚æžœæˆ‘å¼•ç”¨äº†æŸä¸ªå˜é‡ï¼Œè€Œè¿™ä¸ªå˜é‡æ˜¯åœ¨æ ˆä¸Šçš„ï¼Œé‚£ä¹ˆä¸èƒ½å› ä¸ºè¢«blockå¼•ç”¨è€Œä¸é‡Šæ”¾è¿™ä¸ªå˜é‡ï¼Œæ‰€ä»¥è§£å†³æ–¹æ¡ˆå°±æ˜¯ç›´æŽ¥copyä¸€ä»½è¿™ä¸ªå˜é‡çš„å€¼è¿›æ¥blockç»“æž„ä½“ï¼Œç”¨ä¸€ä¸ªæŒ‡é’ˆåŽ»å¼•ç”¨ï¼Œè€Œå¦‚æžœå¼•ç”¨äº†ä¸€ä¸ªå…¨å±€çš„å˜é‡ï¼Œé‚£ä¹ˆå°±ä¸å­˜åœ¨é‡Šæ”¾ä¸æŽ‰çš„é—®é¢˜äº†ï¼Œé‚£ä¹ˆå°±ä¸ç”¨å†å¤åˆ¶ä¸€ä»½äº†ã€‚ ä¸€ä¸ªblockå€¼åˆ›å»ºçš„æ—¶å€™æ˜¯åœ¨å…¨å±€åŒºçš„ å¦‚æžœè¿™ä¸ªæ—¶å€™ç»™æˆ‘å¼•ç”¨äº†ä¸€ä¸ªå…¨å±€çš„å˜é‡ï¼Œé‚£ä¹ˆæˆ‘ä»ç„¶åœ¨å…¨å±€ å¦‚æžœè¿™ä¸ªæ—¶å€™ç»™æˆ‘å¼•ç”¨ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªblockå°±ä¼šè¢«ç§»åŠ¨åˆ°æ ˆä¸Šï¼Œè¿™é‡Œè¦æ³¨æ„çš„æ˜¯æˆå‘˜å˜é‡ä¸Žå±€éƒ¨å˜é‡åŒç­‰å¯¹å¾…ï¼Œå› ä¸ºå®ƒæ¯•ç«Ÿä¸åœ¨å…¨å±€å˜é‡åŒºï¼Œä½†æ˜¯æ•èŽ·æˆå‘˜å˜é‡çš„æ—¶å€™ï¼Œå› ä¸ºè¿™ä¸ªå˜é‡æ˜¯ä¸ä¼šè¢«è½»æ˜“é‡Šæ”¾çš„ï¼Œæ‰€ä»¥ä¸ä¼šcopyè¿™ä¸ªæŒ‡é’ˆ è¿™ä¸ªæ—¶å€™å¦‚æžœä½ åœ¨ARCæƒ…å†µä¸‹å¯¹è¿™ä¸ªblockåšä¸€ä¸ªèµ‹å€¼æ“ä½œï¼Œå¦‚æžœä¹‹å‰è¿™ä¸ªblockåœ¨æ ˆä¸Šï¼Œé‚£ä¹ˆä¸€ä¸ªstrongå¼•ç”¨æ“ä½œä¹‹åŽè¿™ä¸ªblockå°±è¢«ç§»åŠ¨åˆ°å †ä¸Šäº† //todoautoreleaseå…³é”®å­—èµ·ä½œç”¨åœ¨arcä¸‹ï¼Œéœ€è¦è¿™ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªautoreleaseå¯¹è±¡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒUIViewä¸æ˜¯è¿™æ ·çš„å¯¹è±¡ï¼Œå…¶ä»–çš„æ˜¯è¿™æ ·çš„å¯¹è±¡ï¼Œæ‰€ä»¥123@autorelease &#123; UIView *view = [UIView alloc] init];//å†…å­˜ä¼šä¸€ç›´å¢žåŠ ï¼Œä¸ä¼šé‡Šæ”¾çš„ï¼Œä»¥ä¸ºUIViewä¸ä¼šè¢«é‡Šæ”¾ï¼Œå¦‚æžœè¿™ä¸ªæ¢æˆUIImageæˆ–è€…å…¶ä»–çš„ï¼Œé‚£å°±æ²¡æœ‰é—®é¢˜&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSä¸­çš„å±å¹•æ—‹è½¬]]></title>
    <url>%2F2015%2F04%2F12%2F2015%2FiOS%E4%B8%AD%E7%9A%84%E5%B1%8F%E5%B9%95%E6%97%8B%E8%BD%AC%2F</url>
    <content type="text"><![CDATA[æ€»è¿° æ—‹è½¬äº‹ä»¶åªä¼ é€’ç»™ä¸»window å½“æˆ‘ä»¬ä½¿ç”¨webViewæ’­æ”¾è§†é¢‘çš„æ—¶å€™ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªUIViewControllerï¼Œç„¶åŽåˆ›å»ºä¸€ä¸ªwindowï¼Œè®©è¿™ä¸ªæŽ§åˆ¶å™¨æˆä¸ºè¿™ä¸ªwindowçš„æ ¹æŽ§åˆ¶å™¨ï¼Œç„¶åŽå†å°†è§†é¢‘æ˜¾ç¤ºçš„viewæ·»åŠ åˆ°è¿™ä¸ªUIViewControllerçš„æŽ§åˆ¶å™¨viewä¸Š å±å¹•é€‰ä¸­çš„æœ¬è´¨æ˜¯å½“å‰ä¸»æŽ§åˆ¶å™¨çš„viewè·Ÿéšå±å¹•çš„æ—‹è½¬è€Œæ—‹è½¬ï¼Œå¹¶ä¸”è°ƒæ•´å¤§å°è‡³å½“å‰çš„å®½é«˜ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åšçš„å°±æ˜¯æŽ§åˆ¶å½“å‰æŽ§åˆ¶å™¨è¦ä¸è¦æ—‹è½¬ å†æœ¬è´¨ä¸€äº›å°±æ˜¯ï¼Œè¦å¯¹å½“å‰keywindonçš„æ ¹æŽ§åˆ¶å™¨è¿›è¡ŒæŽ§åˆ¶ï¼‹å¯¹ä½ è¦æ—‹è½¬çš„ç•Œé¢è¿›è¡ŒæŽ§åˆ¶ è¯¦è¿°ç¬¬ä¸€å±‚è®¾ç½®åœ¨è¿™é‡Œé€‰æ‹©æ˜¯å¦æ”¯æŒæ¨ªç«–å± ç¬¬äºŒå±‚è®¾ç½®123- (UIInterfaceOrientationMask)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window &#123; return UIInterfaceOrientationMaskAll;&#125; åœ¨Appdelegateä¸­è¿›è¡Œè®¾ç½®ï¼Œå®žçŽ°è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™é‡Œè¿”å›žä½ è¦æ”¯æŒçš„æ–¹å‘ï¼Œè¿™ä¸ªè®¾ç½®ä¼šè¦†ç›–ä¸Šè¾¹åœ¨generalä¸­çš„è®¾ç½® ç¬¬ä¸‰å±‚è®¾ç½®åœ¨windowçš„æ ¹æŽ§åˆ¶å™¨ä¸­å®žçŽ°è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œæ¥åŠ ä»¥æŽ§åˆ¶ï¼Œæ˜¯å¦å…è®¸æ—‹è½¬ä»¥åŠæ”¯æŒçš„æ–¹å‘123456789//æ˜¯å¦å…è®¸æ—‹è½¬- (BOOL)shouldAutorotate &#123; return YES;&#125;//æ—‹è½¬çš„æ—¶å€™æ”¯æŒçš„æ–¹å‘- (UIInterfaceOrientationMask)supportedInterfaceOrientations &#123; return UIInterfaceOrientationMaskAll;&#125; ç¬¬å››å±‚è®¾ç½®åœ¨ä½ è¦æŽ§åˆ¶æ˜¯å¦æ—‹è½¬çš„è¿™ä¸ªæŽ§åˆ¶é‡Œè¾¹å®žçŽ°ä¸Šè¾¹çš„è¿™ä¸¤ä¸ªæ–¹æ³• å°ç»“ å½“å±å¹•æ—‹è½¬ä¸€æ¬¡å°±ä¼šè°ƒç”¨ä¸€æ¬¡è¿™ä¸ªæ–¹æ³•ï¼Œæ¥è¯¢é—®æ”¯æŒçš„æ–¹å‘ è¿™é‡Œè¿”å›žçš„windowæ˜¯Appdelegateè¿™ä¸ªå¯¹è±¡æŒæœ‰çš„windowï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿ä¸­é—´ä½ æ¢æŽ‰äº†keywindowè¿™é‡Œè¿”å›žçš„ä»ç„¶åªæ˜¯æœ€å¼€å§‹åˆ›å»ºçš„é‚£ä¸ªwindowï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹ä½ æœ€åŽåˆ›å»ºçš„windowè¿™ä¸ªæ–¹æ³•å¹¶ä¸èƒ½å½±å“ ä¸€ä¸ªæŽ§åˆ¶å™¨åˆ°åº•æ˜¯å¦æ”¯æŒæ¨ªå±ï¼Œè‡ªå·±è¯´äº†æ˜¯ä¸ç®—çš„ï¼Œä¸»è¦çœ‹ä¸¤ä¸ªä¸œè¥¿ AppDelegateä¸­çš„è¿™ä¸ªæ–¹æ³•è¿”å›žæ”¯æŒçš„æ–¹å‘ windowçš„æ ¹æŽ§åˆ¶å™¨ä¸­æ˜¯å¦å…è®¸æ—‹è½¬ï¼Œä»¥åŠæ”¯æŒçš„æ–¹å‘ å–äº¤é›† ä¸Šè¾¹çš„çš„å››å±‚è®¾ç½®èµ·ä½œç”¨çš„æƒ…å†µï¼Œæˆ‘ä»¬è¦åˆ†ä¸‰ç§æƒ…å†µæ¥è¯´ è¦æŽ§åˆ¶çš„æŽ§åˆ¶å™¨é—´æŽ¥ä¾é™„æœ€å¼€å§‹åˆ›å»ºçš„window è¯¥æŽ§åˆ¶å™¨æ˜¯é€šè¿‡navigationcontrollerç®¡ç†çš„/ç›´æŽ¥æ·»åŠ childcontrollers presentâ€¦ è¦æŽ§åˆ¶çš„æŽ§åˆ¶å™¨ä¾é™„äºŽæ–°åˆ›å»ºçš„window åŽŸå§‹window å—åˆ°Appdelegateä¸­çš„æ–¹æ³•çš„å½±å“ å¦‚æžœæŽ§åˆ¶å™¨æ˜¯modalå‡ºæ¥çš„ï¼Œé‚£ä¹ˆè¯¥æŽ§åˆ¶å™¨ä¸­å®žçŽ°çš„è¿™ä¸¤ä¸ªæ–¹æ³•ä¼šç”Ÿæ•ˆï¼Œä½†æ˜¯ä¾ç„¶éµå¾ªäº¤é›†çš„åŽŸåˆ™ å¦‚æžœè¿™ä¸ªæŽ§åˆ¶å™¨æ˜¯navigationControllerç®¡ç†æˆ–è€…ç›´æŽ¥æ·»åŠ childcontrollersï¼Œè¯¥æŽ§åˆ¶å™¨ä¸­çš„æ–¹æ³•æ˜¯æ²¡æœ‰ä½œç”¨çš„ï¼Œå®ƒåªå—åˆ°appdelegateå’Œwindowæ ¹æŽ§åˆ¶å™¨çš„å½±å“ ä¾é™„äºŽæ–°åˆ›å»ºçš„window ä¸å—åˆ°APPdelegateæ–¹æ³•çš„å½±å“ å…¶å®ƒéƒ½ä¸€æ ·ï¼Œä½†æ˜¯åˆ†æžçš„èµ·ç‚¹å°±å˜æˆäº†å½“å‰windowçš„æ ¹æŽ§åˆ¶å™¨ æ¯”å¦‚ï¼ŒwebViewæ’­æ”¾è§†é¢‘çš„æ—¶å€™ï¼Œå®ƒä¼šæ–°åˆ›å»ºwindowï¼Œå¹¶ä¸”ä»¥UIViewControllerä¸ºæ ¹æŽ§åˆ¶å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥åœ¨è¿™ä¸ªæŽ§åˆ¶å™¨ä¸­æ·»åŠ æŽ§åˆ¶ä»£ç ï¼Œä½†æ˜¯è¿™ä¸ªæ˜¯ç³»ç»Ÿçš„ç±»ï¼Œæˆ‘ä»¬å°±åªèƒ½é åˆ†ç±»æ¥æ·»åŠ ä»£ç äº† demoæ•´ä½“æ˜¯æ”¯æŒæ¨ªå±ï¼Œä½†æ˜¯æŸä¸ªç•Œé¢ç¦æ­¢æ ¹æ®ä¸Šè¾¹å™è¿°ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹æ–¹æ¡ˆï¼š é€šè¿‡presentâ€¦æ¥ç®¡ç†æŽ§åˆ¶å™¨ åœ¨è¿™ä¸ªæŽ§åˆ¶å™¨ä¸­æ·»åŠ æŽ§åˆ¶å™¨ä»£ç ï¼Œç¦æ­¢æ—‹è½¬æˆ–è€…åªæ”¯æŒç«–ç€123456789101112131415 @implementation HSViewController- (void)viewDidLoad &#123; [super viewDidLoad];&#125;- (BOOL)shouldAutorotate &#123; return YES;&#125;- (UIInterfaceOrientationMask)supportedInterfaceOrientations &#123; return UIInterfaceOrientationMaskPortrait;&#125;@end ä¸é€šè¿‡presentæ¥ç®¡ç†ç•Œé¢ é€šè¿‡åœ¨Appdelegateæˆ–è€…æ ¹æŽ§åˆ¶å™¨ä¸­åŠ åˆ¤æ–­ä»£ç ï¼Œå®žçŽ°åœ¨ä¸åŒçš„å½“å‰æŽ§åˆ¶å™¨ï¼Œè¿”å›žä¸åŒçš„æ”¯æŒçš„æ–¹å‘ 123456789101112 - (UIInterfaceOrientationMask)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window &#123; HSNavigationContronller *nav = (HSNavigationContronller *)[UIApplication sharedApplication].keyWindow.rootViewController; if ([nav.topViewController isKindOfClass:[HSViewController class]]) &#123; return UIInterfaceOrientationMaskPortrait; &#125; return UIInterfaceOrientationMaskAll; &#125; æ•´ä½“æ˜¯æ”¯æŒç«–å±ï¼Œä½†æ˜¯æŸä¸ªç•Œé¢å¯ä»¥æ¨ªå±è¿™ç§éœ€æ±‚ï¼Œåªèƒ½é€šè¿‡åŠ åˆ¤æ–­ä»£ç æ¥åšåˆ° æŽ§åˆ¶é€šè¿‡webViewåŠ è½½çš„è§†é¢‘å…¨å±æ—¶çš„æ¨ªç«–å±webViewçš„è§†é¢‘åœ¨å…¨å±çš„æ—¶å€™ï¼Œä¼šæ–°åˆ›å»ºä¸€ä¸ªwindowï¼Œæ‰€ä»¥ä½ åœ¨Appdelegateæˆ–è€…å½“å‰æ ¹æŽ§åˆ¶å™¨ä¸‹çš„æŽ§åˆ¶ä»£ç ç»Ÿç»Ÿä¸ä¼šç”Ÿæ•ˆï¼Œå¹¶ä¸”ä»¥UIViewControllerä¸ºæ ¹æŽ§åˆ¶å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŠŠæŽ§åˆ¶ä»£ç åŠ åˆ°UIViewControllerçš„åˆ†ç±»ä¸­ï¼Œåˆå› ä¸ºå…¶å®ƒçš„æŽ§åˆ¶å™¨å…¨éƒ¨ç»§æ‰¿è‡ªè¿™ä¸ªæŽ§åˆ¶å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨è¿™ä¸ªé‡Œè¾¹åŠ åˆ¤æ–­1234567891011121314151617181920212223242526#import &quot;UIViewController+Extension.h&quot;@implementation UIViewController (Extension)#pragma mark - ä¸‹é¢çš„ä¸¤ä¸ªæ–¹æ³•ä¸»è¦ç”¨äºŽæŽ§åˆ¶webViewæ’­æ”¾è§†å±çš„æ—¶å€™ï¼Œè¯¥æ˜¯å¦æ˜¯å¦åº”è¯¥æ¨ªå±/** * å¦‚æžœå½“å‰keywindowçš„rootControllerç±»åž‹ä¸ºUIViewControllerï¼Œå°±è¿”å›žYESï¼Œå¦åˆ™è¿”å›žNO * * @return è¿”å›žæ˜¯å¦ */- (BOOL)shouldAutorotate &#123; //æ‹¿åˆ°å½“å‰ä¸»çª—å£çš„æ ¹æŽ§åˆ¶å™¨ç±»åž‹åç§° NSString *className = NSStringFromClass([[UIApplication sharedApplication].keyWindow.rootViewController class]); //å¦‚æžœæ˜¯UIViewControllerå°±è¿”å›žYESï¼Œè®©è¿™ä¸ªæŽ§åˆ¶å™¨viewå¯ä»¥è·Ÿéšå±å¹•æ—‹è½¬ if ([className isEqualToString:@&quot;UIViewController&quot;]) &#123; return YES; &#125; else &#123; return NO; &#125;&#125;- (UIInterfaceOrientationMask)supportedInterfaceOrientations &#123; return UIInterfaceOrientationMaskAll;&#125;@end]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitä½¿ç”¨æ€»ç»“]]></title>
    <url>%2F2015%2F04%2F10%2F2015%2FGit%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[1.é…ç½®ï¼š1.è®¾ç½®ä½ çš„åå­—ä¸Žé‚®ç®±ï¼ˆå¯ä¸Ž git å¸å·æ— å…³ï¼‰ï¼š git config --global user.name &quot;Your Name&quot;git config --global user.email your@email.com ç¼“å­˜ä¸€æ®µæ—¶é—´çš„ git å¸å·å¯†ç ï¼ˆtimeout å•ä½ï¼šç§’ï¼‰ï¼š git config --global credential.helper &quot;cache --timeout=3600&quot; 2.å…‹éš†ã€ç­¾å‡ºä»“åº“ï¼šgit clone &lt;url&gt; æœåŠ¡å™¨ä¸€èˆ¬ä¼šç»™å‡ºä¸¤ç§è¿žæŽ¥æ–¹å¼ ä¸€ç§æ˜¯SSH:éœ€è¦SSHåŠ å¯† ä¸€ç§æ˜¯HTTP:ç›´æŽ¥å¯ä»¥ç”¨ ä»¥ä¸Šè¾¹çš„åœ°å€ä¸ºä¾‹ï¼šgit clone http://10.16.1.16/iOS/gitintro.gitè¿™æ ·å®ƒé»˜è®¤ä¼šå°†æ–‡ä»¶ä»¥gitintroä¸ºåï¼Œå»ºç«‹åœ¨å½“å‰æ–‡ä»¶è·¯å¾„ä¸‹è‡ªå®šä¹‰ï¼šgit clone http://10.16.1.16/iOS/gitintro.git mygitè¿™æ ·å†™å®ƒä¼šå°†æ–‡ä»¶å¤¹çš„åå­—ä»Žgitintroæ”¹ä¸ºmygit å¦å¤–ï¼šå¦‚æžœè¯¥é¡¹ç›®ä½¿ç”¨äº†ï¼Œgit submoduleå­æ¨¡å— æŠ€æœ¯ï¼Œé‚£ä¹ˆè¿˜éœ€è¦å¢žåŠ å¦å¤–ä¸¤æ­¥æ“ä½œï¼š git submodule init git submodule update æˆ–è€…ä¸€æ­¥åˆ°ä½git clone --recursive http://10.16.1.16/iOS/gitintro.git mygit 3.è‡ªå»ºä»“åº“åªè¦æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶åŽè¿›è¡Œgitåˆå§‹åŒ–å°±å¯ä»¥åˆ©ç”¨å‘½ä»¤è¡Œå°†å½“å‰ç›®å½•åˆ‡æ¢åˆ°ä½ è¦åšä»“åº“çš„é‚£ä¸ªæ–‡ä»¶å¤¹ï¼Œcd xxxç„¶åŽåˆå§‹åŒ–ä»“åº“git init 3.æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨ï¼šgit remote -v è¿›é˜¶ï¼šå…³è”è¿œç¨‹æœåŠ¡å™¨ï¼šgit reomte add &lt;origin&gt; &lt;git-repo-url&gt; æŸ¥çœ‹é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ remoteã€åˆ†æ”¯å…³è”ã€æœ¬åœ°é…ç½®ç­‰ï¼šcat .git/config 2. æ·»åŠ ã€åˆ é™¤ã€æœ¬åœ°æäº¤æ·»åŠ æ–°æ–‡ä»¶ï¼Œç¡®è®¤æ–‡ä»¶ä¿®æ”¹ï¼šgit add &lt;file-path&gt; å–æ¶ˆæ·»åŠ æ–°æ–‡ä»¶ï¼šgit reset &lt;file-path&gt; ä»Ž git åˆ é™¤æ–‡ä»¶ï¼ˆä¸å†åœ¨ repo é‡Œç®¡ç†äº†ï¼‰ï¼šgit rm &lt;file-path&gt; æŸ¥çœ‹æœ¬åœ°æœªç¡®è®¤çš„ä¿®æ”¹ï¼ˆä»£ç ã€å†…å®¹å˜æ›´ï¼‰ï¼šgit diff æŸ¥çœ‹æœ¬åœ°å·²ç¡®è®¤ï¼ˆä½†æœªæäº¤ï¼‰çš„ä¿®æ”¹ï¼šgit diff --cached æŸ¥çœ‹æœ¬åœ°ä¿®æ”¹çš„æ–‡ä»¶çŠ¶æ€ï¼šgit status æœ¬åœ°æäº¤ï¼ˆæäº¤ä¸Šè¿° add\rm ç¡®è®¤çš„ä¿®æ”¹ã€æ“ä½œï¼‰ï¼Œç”Ÿæˆä¸€ä¸ªç‰ˆæœ¬ï¼šgit commit -m &quot;short commit message&quot; è¿½åŠ åˆ°ä¸Šä¸€æ¬¡æœ¬åœ°æäº¤ï¼šgit commit --amend æŸ¥çœ‹æäº¤è®°å½•ï¼šgit log ç®€åŒ–ç‰ˆgit reflog æŸ¥çœ‹æäº¤çš„è¯¦ç»†ä¿®æ”¹è®°å½•ï¼šgit log -p æŸ¥çœ‹æäº¤ä¿®æ”¹çš„æ–‡ä»¶ä¿¡æ¯ï¼šgit log --stat å…¶å®ƒï¼šè®©å½“å‰ä¿®æ”¹ AFK ä¸€ä¸‹ï¼Œå¥½å¹²ç‚¹åˆ«çš„äº‹æƒ…ï¼šgit stashäº‹æƒ…åšå®Œï¼ŒæŠŠ AFK å‰çš„ä¿®æ”¹æ‰¾å›žæ¥ï¼šgit stash pop 3. æ’¤æ¶ˆæ’¤é”€ä¸€ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ï¼šgit checkout -- &lt;file-path&gt; æ’¤é”€å½“å‰ç›®å½•çš„æ‰€æœ‰ä¿®æ”¹ï¼šgit checkout -- . åˆ é™¤æŸä¸ªæ–‡ä»¶git rm xxxx 4.ç‰ˆæœ¬å›žé€€å›žé€€åˆ°ä»»æ„ç‰ˆæœ¬ï¼Œéœ€è¦æ‹¿åˆ°commit idgit reset --hard 3628164å›žé€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ git reset --hard HEAD^ å›žé€€åˆ°ä¸Š100ä¸ªç‰ˆæœ¬ git reset --hard HEAD~100 ä½†æ˜¯è¿™æ ·ç®€å•çš„æ“ä½œåªèƒ½æ˜¯æŠŠæœ¬åœ°çš„å·¥ä½œç©ºé—´çš„å†…å®¹è¿›è¡Œå›žé€€ï¼Œé‚£ä¹ˆå¦‚æžœæˆ‘æƒ³è¦è®©è¿œç¨‹åº“ä¹Ÿå›žé€€æ€Žä¹ˆåŠžå‘¢ï¼Ÿ å›žæƒ³ä¸€ä¸‹åŽŸç†ï¼Œå½“ä½ å¯¹è¿™ä¸ªåˆ†æ”¯è¿›è¡Œpullçš„æ—¶å€™ å®ƒä¼šåŽ»ç‰ˆæœ¬åº“åŽ»æ£€æŸ¥æœ‰æ²¡æœ‰å†²çª å¦‚æžœæ²¡æœ‰é‚£ä¹ˆå®ƒç›´æŽ¥ä¼šè¦†ç›–å·¥ä½œç©ºé—´ å¦‚æžœæœ‰å†²çªå®ƒæ‰ä¼šæç¤ºä½ è§£å†³å†²çª é‚£ä¹ˆçŽ°åœ¨ï¼Œå¦‚æžœæˆ‘å·²ç»åˆ°äº†ç¬¬äº”ä¸ª commitï¼Œä½†æ˜¯æˆ‘æƒ³è¦å›žåˆ°ç¬¬3ä¸ªcommitçš„çŠ¶æ€ï¼Œgit reset --hard 87b6a3bä½ æƒ³è¦æŠŠè¿™ä¸ªçŠ¶æ€æ›´æ–°åˆ°è¿œç¨‹ï¼Œå…ˆè¦commitï¼Œä½ ä¼šå‘çŽ°ä½ commitæ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºä½ è¿™ä¸ªcommitå·²ç»å­˜åœ¨äº†ï¼Œä¸€æ‘¸ä¸€æ ·ï¼Œæ‰€ä»¥ä½ æ˜¯ä¸èƒ½commitçš„ï¼ŒçŽ°åœ¨è¦è‡ªå·±åˆ¶é€ ä¸€äº›ä¿®æ”¹ï¼Œç„¶åŽå†commitï¼Œå°±å¯ä»¥äº†ã€‚ æ‰€ä»¥è¿œç¨‹ç‰ˆæœ¬å›žé€€çš„æ ¹æœ¬æ˜¯åˆ¶é€ å†²çªï¼Œç„¶åŽæäº¤å†²çª é‚£ä¹ˆå¦‚æžœæ˜¯è¿™ä¸ªæ–‡ä»¶å·²ç»åˆ é™¤äº†é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æ€Žä¹ˆåŠžå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼š æœ¬åœ°è¿›è¡Œç‰ˆæœ¬å›žé€€git reset --hard 76824 æ‰“å¼€è¿™ä¸ªåˆæ¢å¤çš„æ–‡ä»¶ï¼Œç„¶åŽä¿®æ”¹ä¸€äº›ä¸œè¥¿ æ‰§è¡Œ add commit ç„¶åŽæ‰§è¡Œpullï¼Œæœ€æ–°çš„ä¿®æ”¹ä»Žè¿œç¨‹æ‹‰å›žæ¥ï¼Œè¿™ä¸ªæ—¶å€™å®ƒä¼šæŠ¥å†²çª å®ƒè¯´ï¼Œè¿™ä¸ªå†²çªæ˜¯ä¿®æ”¹å’Œåˆ é™¤çš„å†²çªï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªç‰ˆæœ¬åº“ä¸­å®ƒå·²ç»è¢«åˆ é™¤äº†ï¼Œå¯æ˜¯åœ¨å¦å¤–ä¸€ä¸ªç‰ˆæœ¬åº“ä¸­å®ƒæ˜¯è¢«ä¿®æ”¹çš„ï¼ŒçŽ°åœ¨ä½ å°±è¦è§£å†³å†²çªï¼Œæ€Žä¹ˆè§£å†³å‘¢ï¼ŸåŽŸæ¥çš„å†²çªæœ€å¤šæ˜¯è¿™ä¸ªæ–‡ä»¶ä¸­çš„ä»£ç ä¸ä¸€è‡´äº†ï¼Œè¿™ä¸ªæ—¶å€™æ‰¾ä½ æ‰“å¼€ä»£ç ï¼Œåˆ åˆ å‰ªå‰ªå°±å¥½äº†ï¼Œå¯æ˜¯çŽ°åœ¨æ–‡ä»¶ç›´æŽ¥æ²¡æœ‰äº†å’‹å¼„ï¼Ÿå†æ¬¡git pullå®ƒè¯´ä½ å¯ä»¥ç”¨git add/rm xxxæ¥å†³å®šä½ æ˜¯ä¿ç•™å†²çªä¸­çš„å“ªä¸€æ–¹ 5. åˆ†æ”¯åˆ›å»ºåˆ†æ”¯ï¼ˆåŸºäºŽå½“å‰åˆ†æ”¯ï¼‰ï¼šgit branch &lt;new-branch&gt; åŸºäºŽæŸä¸ªåˆ†æ”¯åˆ›å»ºåˆ†æ”¯ï¼šgit branch &lt;new-branch&gt; &lt;base-branch&gt; æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯ï¼šgit branch åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout &lt;branch&gt; åˆ›å»ºæ–°åˆ†æ”¯å¹¶ç«‹å³åˆ‡è¿‡åŽ»ï¼šgit checkout -b &lt;new-branch&gt; [base-branch] åˆå¹¶ä¸€ä¸ªåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼ˆåˆ é™¤è¯¥åˆ†æ”¯åŽä¸ä¿ç•™commitçºªå½•ï¼‰ï¼šgit merge &lt;other-branch&gt; åˆå¹¶åˆ†æ”¯ä¸”åˆ é™¤è¯¥åˆ†æ”¯åŽä¿ç•™commitçºªå½•git merge --no-ff -m&quot;xxx&quot; &lt;other-branch&gt; å›žæ»šä¸€ä¸ªåˆ†æ”¯çš„åˆå¹¶ï¼šgit revert -m (1|2) &lt;merge-commit&gt;å‚è€ƒï¼š http://pms.kugou.com/zentao/doc-view-171.html rebase æŠŠåˆ†æ”¯çš„ commit åœ¨åŸºç¡€åˆ†æ”¯ä¸Šé‡æ”¾ï¼ˆä¸Ž merge çš„åŒºåˆ«å¾ˆé‡è¦ï¼Œè¯·åªåœ¨æœ¬åœ°åˆ†æ”¯ rebaseï¼ï¼ï¼ï¼‰ï¼šgit rebase &lt;base-branch&gt; å®‰å…¨åˆ é™¤ï¼ˆå·²ç»åˆå¹¶è¿‡çš„ï¼‰æœ¬åœ°åˆ†æ”¯ï¼šgit branch -d &lt;branch&gt; å¼ºè¡Œåˆ é™¤æœ¬åœ°åˆ†æ”¯ï¼ˆè¯·å…ˆ -dï¼Œå¦‚æžœ -d å¤±è´¥ï¼Œæ£€æŸ¥æ— è¯¯åŽæ‰ -Dï¼‰ï¼šgit branch -D &lt;branch&gt; 6. è·ŸæœåŠ¡å™¨åŒæ­¥ï¼šæŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ï¼šgit branch -r ç­¾å‡ºæœåŠ¡å™¨åˆ†æ”¯å·¥ä½œï¼ˆä¼šåˆ›å»ºæœ¬åœ°ä¸ŽæœåŠ¡å™¨åˆ†æ”¯å…³è”ï¼‰ï¼šgit checkout &lt;remote-branch-name&gt;æˆ–git checkout -b &lt;local-branch-name&gt; origin/&lt;remote-branch-name&gt; ï¼ˆå·²å­˜åœ¨çš„ï¼‰æœ¬åœ°åˆ†æ”¯å…³è”åˆ°æœåŠ¡å™¨åˆ†æ”¯ï¼šgit branch -u origin/&lt;remote-branch&gt; &lt;local-branch&gt;æˆ–ï¼šgit branch --set-upstream-to=origin/&lt;remote-branch&gt; &lt;local-branch&gt; èŽ·å–æœåŠ¡å™¨ï¼ˆæ‰€æœ‰çš„ï¼‰æ›´æ–°ï¼Œå¹¶åˆå¹¶å½“å‰è¿œç¨‹åˆ†æ”¯çš„æ›´æ–°ï¼šgit pull ä½¿ç”¨ rebase çš„æ–¹å¼ pullï¼Œå¯èƒ½ä¼šå°‘äº§ç”Ÿä¸€æ¡ merge è™š commitï¼šgit pull --rebase èŽ·å–æŸä¸ªè¿œç¨‹åˆ†æ”¯çš„æ›´æ–°ï¼ˆå¹¶ä¸”åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼ï¼ï¼‰ï¼šgit pull origin &lt;branch&gt; ä»…æ‹‰å–æœåŠ¡å™¨æ›´æ–°ï¼Œä½†ä¸åˆå¹¶æˆ– rebaseï¼šgit fetch [origin [&lt;remote-branch-name&gt;]] rebase å½“å‰åˆ†æ”¯å·²ç» fetch åˆ°æœ¬åœ°çš„æœåŠ¡å™¨æ›´æ–°ï¼šgit rebase pushpushæ–°å»ºçš„æœ¬åœ°åˆ†æ”¯å¹¶ä¸”å»ºç«‹è¿žæŽ¥git push --set-upstream origin &lt;local-branch&gt;git push origin &lt;local-branch&gt;git push -u origin &lt;local-branch&gt; åˆ é™¤æœåŠ¡å™¨è¿œç¨‹åˆ†æ”¯ï¼šgit push origin :&lt;remote-branch&gt;æˆ– git 1.7 ä»¥åŽï¼šgit push origin --delete &lt;remote-branch&gt; pushè¯¥åˆ†æ”¯çš„å†…å®¹æ›´æ–°ï¼Œå‰ææ˜¯å·²ç»æœ‰é»˜è®¤çš„å¯¹åº”çš„åˆ†æ”¯ï¼Œå¦‚æžœæ²¡æœ‰å°±ä¼šæŠ¥é”™git push ä½†æ˜¯è¿™ç§æ–¹å¼ä¸éœ€è¦æå‰å…³è”ï¼Œå› ä¸ºä½ å·²ç»æŒ‡æ˜Žäº†ï¼Œæˆ‘æ‰“ç®—æŠŠæˆ‘è¿™ä¸ªåˆ†æ”¯æŽ¨é€ç»™è°ï¼šgit push origin &lt;branch&gt; æ¸…é™¤å·²è¢«åˆ é™¤è¿œç¨‹åˆ†æ”¯çš„æœ¬åœ°æ®‹ä½™ï¼šgit remote prune origin 7.forkæºç ä¹‹åŽä¸Žæºç ä¿æŒåŒæ­¥1.åˆ‡æ¢åˆ°è¦ä¿æŒåŒæ­¥çš„åˆ†æ”¯ 2.æ·»åŠ ä¸€ä¸ªåˆ«åï¼ŒæŒ‡å‘ngqaé¡¹ç›®çš„ä½ç½®git remote add ngqa https://github.com/howe/ngqa.git 3.pullä¸€ä¸‹å®ƒä¸‹è¾¹çš„æŸä¸ªåˆ†æ”¯ï¼Œä¸€å®šè¦ç¡®å®šä¸€ä¸‹è¿™ä¸ªåˆ†æ”¯æ˜¯ä¸æ˜¯æœ‰å†…å®¹git pull ngqa master 4.ç„¶åŽåœ¨sourcetreeè§£å†³ä¸€ä¸‹å†²çªï¼Œä¸€èˆ¬æ˜¯ç‚¹ä¸€ä¸‹æœ€ä¸‹è¾¹çš„é‚£ä¸ªçº¢è‰²é€‰æ¡† 5.ç„¶åŽgit push 6.å¦‚æžœå‡ºçŽ°å¦‚ä¸‹é—®é¢˜ â€œplease enter a commit message to explain why this merge is necessary,especially if it merges an updated upstream into a topic branch è§£å†³æ–¹æ¡ˆï¼š 1-press â€œiâ€2-write your merge message3-press â€œescâ€4-write â€œ:wqâ€ then press enter 8.é…ç½®SSH æŸ¥çœ‹gitç”¨æˆ·ågit config user.name æŸ¥çœ‹gité‚®ç®±git config user.email ä¿®æ”¹gitç”¨æˆ·åå’Œé‚®ç®±git config --global user.name &quot;username&quot;git config --global user.email &quot;email&quot; æŸ¥çœ‹æ˜¯å¦å·²ç»æœ‰äº†sshå¯†é’¥ï¼šcd ~/.ssh ç”ŸæˆSSHssh-keygen -t rsa -C &quot;ä½ çš„é‚®ç®±&quot; æŸ¥çœ‹SSHcat ~/.ssh/id_rsa.pubå°†ä¸‹é¢å‡ºçŽ°çš„è¿™äº›ä¸ªä¸œè¥¿éƒ½æ‹·è´åˆ°ä½ çš„SSHé¢æ¿ä¸­ 9.é—®é¢˜é›†é”¦ å¦‚æžœä½ æ˜Žæ˜Žå·²ç»æœ‰äº†æƒé™ä½†æ˜¯è¿˜æ˜¯ä¸èƒ½cloneä»£ç ï¼Œé‚£å¯èƒ½æ˜¯æœåŠ¡å™¨è®¾ç½®äº†DNSè§£æžï¼Œä½ éœ€è¦æ›´æ”¹æœ¬æœºçš„DNSè§£æžåœ°å€å’ŒæœåŠ¡å™¨ä¸€è‡´ å†²çªè§£å†³]]></content>
      <categories>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[runtimeæºç ä¸‹è½½]]></title>
    <url>%2F2015%2F04%2F02%2FiOS%E9%83%A8%E5%88%86%E6%BA%90%E7%A0%81%E4%B8%8B%E8%BD%BD%2F</url>
    <content type="text"><![CDATA[runtimeæºç éœ€è¦äº†è§£runtimeçš„å®žçŽ°åŽŸç†https://opensource.apple.com/source/objc4/æœ‰å„ä¸ªç‰ˆæœ¬ï¼Œä¸‹è½½çš„å‘½ä»¤ æ¯”å¦‚ä¸‹è½½680wget -c -r -np -k -L -p https://opensource.apple.com/source/objc4/objc4-680/ CoreFoundationæºç wget -c -r -np -k -L -p https://opensource.apple.com/source/CF/CF-855.17/ gnustepæ›´å¤šhttps://github.com/Microsoft/WinObjC https://github.com/BigZaphod/Chameleon]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexo é…ç½®/ä½¿ç”¨æ•™ç¨‹]]></title>
    <url>%2F2015%2F03%2F09%2F2015%2FHexo-%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[hexoå®‰è£… å‰æå·²ç»å®‰è£…äº†node.jså’Œgit npm install hexo --no-optional hexo init myBlog//åˆ›å»ºhexoçš„æ–‡ä»¶å¤¹ cd myBlog npm install hexo server//æ‰“å¼€å¯¹åº”çš„é“¾æŽ¥å¯çœ‹åˆ°æ•ˆæžœ gité…ç½® åˆ›å»ºgitä»“åº“name/name.github.io æ·»åŠ ä¿¡æ¯åˆ°é…ç½®æ–‡ä»¶_config.yml 123456# Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy: type: git repository: git@github.com:xizhengmeng/xizhengmeng.github.io.git branch: master å®‰è£…æ’ä»¶npm install hexo-deployer-git --save å¦‚æžœè¦è®¿é—®è¿™ä¸ªç½‘ç«™ç›´æŽ¥xizhengmeng.github.ioå°±å¥½äº† ä½¿ç”¨ è¿›å…¥åšå®¢æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚æˆ‘è¯´çš„æ˜¯~/myBlog hexo clean hexo g//ç”Ÿæˆ hexo d//æŽ¨é€åˆ°githubæœåŠ¡å™¨ hexo new &quot;fileName&quot;åˆ›å»ºæ–°çš„æ–‡ä»¶ï¼Œåœ¨_postæ–‡ä»¶ä¸­ hexo new page fileNameåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶åŽåœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªindex.mdæ–‡ä»¶ï¼Œæ¯”å¦‚æ ‡ç­¾äº‘é¡µé¢ï¼Œæˆ–è€…åˆ†ç±»é¡µé¢ ç»‘å®šåŸŸå ç”³è¯·åŸŸåï¼Œç›´æŽ¥æœç´¢hexoå’Œgithubï¼ŒåŸŸåå’Œgithubç»‘å®šçš„é—®é¢˜ ç”ŸæˆCNAMEæ–‡ä»¶ï¼Œå¹¶æ·»åŠ åˆ°sourceæ–‡ä»¶å¤¹ä¸‹ï¼Œä¸ŽpoståŒçº§ç›®å½• æ›´æ”¹é…ç½®æ–‡ä»¶â€“â€”â€”config.ymlurl: www.hanson647.com ä¸»é¢˜å®‰è£… è¿›å…¥Hexoæ–‡ä»¶çš„æ ¹ç›®å½•cd Hexo æ‹‰å–ä¸»é¢˜æ–‡ä»¶ï¼Œå¹¶åœ¨æœ¬åœ°åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶git clone https://github.com/kathyqian/crisp-ghost-theme.git themes/gost æ›´æ”¹é…ç½®æ–‡ä»¶çš„ä¸»é¢˜ä¸ºè¯¥ä¸»é¢˜ 1theme: yilia é‡æ–°éƒ¨ç½² ä¸»é¢˜æ›´æ–°git pull ä½¿ç”¨äº†yeleeä¸»é¢˜ï¼Œä¸»é¢˜ä½¿ç”¨è¯´æ˜Žhttp://moxfive.coding.me/yelee/ æœç´¢åŠŸèƒ½é…ç½® å®‰è£…æ’ä»¶npm install --save hexo-generator-search è®¾ç½®ä¸»é¢˜é…ç½®æ–‡ä»¶ 123search: on: true onload: true è®¾ç½®hexoé…ç½®æ–‡ä»¶ 123search: path: search.xml field: post é‡æ–°ç”Ÿæˆ æœ€åŽä½ ä¼šåœ¨publickæ–‡ä»¶ä¸­çœ‹åˆ°ä¸€ä¸ªsearch.xmlæ–‡ä»¶ï¼Œæœ€åŽä½ ä¼šåœ¨ä½ çš„ç½‘ç«™ä¸­çœ‹åˆ°ä½ çš„æœç´¢æ¡† æ³¨æ„åœ¨å·¥ç¨‹çš„_configæ–‡ä»¶ä¸­ï¼Œè¦å°†urlå¯¹åº”çš„å­—æ®µè®¾ç½®ä¸º/ï¼Œå¦åˆ™ä½ ä¼šå‘çŽ°æœç´¢ä¼šè‡ªåŠ¨åŠ ä¸Šä¸€ä¸ªå‰ç½®çš„urlï¼Œè¿™æ ·å°±åˆé”™ä¹±äº† æ·»åŠ æ ‡ç­¾ä»¥åŠæ ‡ç­¾äº‘é¡µé¢ åˆ›å»ºtagsé¡µé¢hexo new page tags ç›´æŽ¥åœ¨æ–‡ç« ä¸­çš„tagså…³é”®å­—åŽè¾¹æ·»åŠ å¯¹åº”çš„æ ‡ç­¾å°±å¥½ 12tags:- å·¥å…· ç¼–è¾‘åˆšæ‰åˆ›å»ºçš„tagsé¡µé¢ï¼Œå°†å…¶ç±»åž‹æ›´æ”¹ä¸ºtags 123title: tagsdate: type: &quot;tags&quot; åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œå°†tagsæ·»åŠ åˆ°menuä¸­ 1234menu: home: / archives: /archives tags: /tags åˆ›å»ºå…³äºŽé¡µé¢hexo new page about å®¹æ˜“å‡ºçŽ°çš„é—®é¢˜hexo d Error: ssh_exchange_identification: read: Connection reset by peerè¯´æ˜Žæ˜¯ç½‘å…³çš„é—®é¢˜ï¼Œæˆ‘æ˜¯è§£å†³äº†ä¸€ä¸‹ç½‘ç»œè§£å†³çš„ï¼Œä¸€å¼€å§‹è¿žæŽ¥çš„æ˜¯äº¬ä¸œçš„guestç½‘ç»œï¼Œå‡ºçŽ°è¯¥é—®é¢˜ï¼Œåˆ‡æ¢ä¸ºaccessè§£å†³ mdæ–‡ä»¶æ ¼å¼æ ‡é¢˜ä¸­#å·è¦ä¸ŽåŽè¾¹çš„æ ‡é¢˜ç•™å‡ºé—´éš™ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªç©ºæ ¼ï¼Œå¦åˆ™hexoæ¸²æŸ“æ˜¯ä¸è®¤çš„ å‚è€ƒé“¾æŽ¥ nextä¸»é¢˜è®¾ç½®http://theme-next.iissnan.com hexoå®˜ç½‘https://hexo.io/zh-cn/]]></content>
      <categories>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSä¸­çš„ç©ºå€¼]]></title>
    <url>%2F2015%2F02%2F15%2F2015%2FiOS%E4%B8%AD%E7%9A%84%E7%A9%BA%E5%80%BC%2F</url>
    <content type="text"><![CDATA[nilå’ŒNULLå’ŒNilå’ŒNSNullçš„åŒºåˆ« nil nil æ˜¯ ObjC å¯¹è±¡çš„å­—é¢ç©ºå€¼ï¼Œå¯¹åº” id ç±»åž‹çš„å¯¹è±¡ï¼Œæˆ–è€…ä½¿ç”¨ @interface å£°æ˜Žçš„ ObjC å¯¹è±¡ã€‚ ä¾‹å¦‚ï¼š12345678910111213141516171819202122NSString *someString = nil;NSURL *someURL = nil;id someObject = nil;if (anotherObject == nil) // do something- å®šä¹‰ï¼š?// objc.h#ifndef nil# if __has_feature(cxx_nullptr)# define nil nullptr# else# define nil __DARWIN_NULL# endif#endif// __DARWIN_NULL in _types.h#define __DARWIN_NULL ((void *)0) Nil Nil æ˜¯ ObjC ç±»ç±»åž‹çš„ä¹¦é¢ç©ºå€¼ï¼Œå¯¹åº” Class ç±»åž‹å¯¹è±¡ã€‚ ä¾‹å¦‚ï¼š 12Class someClass = Nil;Class anotherClass = [NSString class]; å®šä¹‰å£°æ˜Žå’Œ nil æ˜¯å·®ä¸å¤šçš„ï¼Œå€¼ç›¸åŒï¼š12345678// objc.h#ifndef Nil# if __has_feature(cxx_nullptr)# define Nil nullptr# else# define Nil __DARWIN_NULL# endif#endif NULL NULL æ˜¯ä»»æ„çš„ C æŒ‡é’ˆç©ºå€¼ã€‚ ä¾‹å¦‚ï¼š12345678910int *pointerToInt = NULL;- char *pointerToChar = NULL;- struct TreeNode *rootNode = NULL;- å®šä¹‰ï¼š?// in stddef.h#define NULL ((void*)0) NSNull NSNull æ˜¯ä¸€ä¸ªä»£è¡¨ç©ºå€¼çš„ç±»ï¼Œæ˜¯ä¸€ä¸ª ObjC å¯¹è±¡ã€‚å®žé™…ä¸Šå®ƒåªæœ‰ä¸€ä¸ªå•ä¾‹æ–¹æ³•ï¼š+[NSNull null]ï¼Œä¸€èˆ¬ç”¨äºŽè¡¨ç¤ºé›†åˆä¸­å€¼ä¸ºç©ºçš„å¯¹è±¡ã€‚ æ³¨æ„ï¼Œè¿™é‡ŒNSNullæ˜¯ä¸€ä¸ªå•ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´åŒä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå¦‚æžœæˆ‘ä»¬è¦åˆ é™¤è¿™ä¸ªç©ºå¯¹è±¡ï¼Œé‚£ä¹ˆåªè¦è°ƒç”¨ä¸€æ¬¡removeobjec:æ–¹æ³•å°±å¥½äº†ã€‚ ä¾‹å­è¯´æ˜Žï¼š12345678910111213// å› ä¸º nil è¢«ç”¨æ¥ç”¨ä¸ºé›†åˆç»“æŸçš„æ ‡å¿—ï¼Œæ‰€ä»¥ nil ä¸èƒ½å­˜å‚¨åœ¨ Foundation é›†åˆé‡Œã€‚NSArray *array = [NSArray arrayWithObjects:@&quot;one&quot;, @&quot;two&quot;, nil];-// é”™è¯¯çš„ä½¿ç”¨NSMutableDictionary *dict = [NSMutableDictionary dictionary];[dict setObject:nil forKey:@&quot;someKey&quot;];-// æ­£ç¡®çš„ä½¿ç”¨NSMutableDictionary *dict = [NSMutableDictionary dictionary];[dict setObject:[NSNull null] forKey:@&quot;someKey&quot;]; ï¼Œå¯¹äºŽåƒNSArrayè¿™æ ·çš„ç±»åž‹ï¼Œnilæˆ–NULLä¸èƒ½åšä¸ºåŠ åˆ°å…¶ä¸­çš„Objectï¼Œå¦‚æžœå®šä¹‰äº†ä¸€ä¸ªNSArrayï¼Œä¸ºå…¶åˆ†é…äº†å†…å­˜ï¼Œåˆæƒ³è®¾ç½®å…¶ä¸­çš„å†…å®¹ä¸ºç©ºï¼Œåˆ™å¯ä»¥ç”¨[NSNULL nullè¿”å›žçš„å¯¹å¯¹è±¡æ¥åˆå§‹åŒ–NSArrayä¸­çš„å†…å®¹ï¼Œæˆ‘çš„æ„Ÿè§‰æœ‰ç‚¹åƒCè¯­è¨€ä¸­mallocä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œç„¶åŽç”¨memsetåˆå§‹åŒ–è¿™æ®µç©ºé—´é‡Œçš„å€¼ä¸º0ã€‚ ç”±äºŽæœåŠ¡å™¨çš„æ•°æ®åº“ä¸­æœ‰äº›å­—æ®µä¸ºç©ºï¼Œç„¶åŽä»¥Jsonå½¢å¼è¿”å›žç»™å®¢æˆ·ç«¯æ—¶å°±ä¼šå‡ºçŽ°è¿™æ ·çš„æ•°æ®ï¼šâ€œsomevalueâ€:null ï¼Œé€šè¿‡JsonKit è¿™ä¸ªç¬¬ä¸‰æ–¹åº“è§£æžå‡ºæ¥çš„æ•°æ®å°±æˆäº†somevalue=â€â€; è¿™ä¸ªæ•°æ®ç±»åž‹ä¸æ˜¯nil ä¹Ÿä¸æ˜¯ Stringã€‚ è§£æžæˆå¯¹è±¡ä¹‹åŽï¼Œå¦‚æžœç›´æŽ¥å‘è¿™ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯ï¼ˆegï¼šlengthï¼Œcount ç­‰ç­‰ï¼‰å°±ä¼šç›´æŽ¥å´©æºƒã€‚æç¤ºé”™è¯¯ä¸ºï¼š-[NSNulllength]:unrecognizedselectorsenttoinstance0x388a4a70 ï¼Œè¿™ä¸ªå°±æ˜¯NSNullç±»åž‹çš„å¯¹è±¡ï¼Œä»£è¡¨ç©ºå¯¹è±¡ã€‚ NIL æˆ– NSNilObjC ä¸å­˜åœ¨è¿™ä¸¤ä¸ªç¬¦å·ï¼ å°ç»“ è™½ç„¶ nil, Nil, NULL çš„å€¼ç›¸åŒï¼Œç†è§£å®ƒä»¬ä¹‹é—´çš„ä¹¦é¢æ„ä¹‰æ‰é‡è¦ï¼Œè®©ä»£ç æ›´åŠ æ˜Žç¡®ï¼Œå¢žåŠ å¯è¯»æ€§ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSä¸­çš„å®šæ—¶å’Œå»¶æ—¶]]></title>
    <url>%2F2015%2F01%2F23%2F2015%2FiOS%E4%B8%AD%E7%9A%84%E5%AE%9A%E6%97%B6%E5%92%8C%E5%BB%B6%E6%97%B6%2F</url>
    <content type="text"><![CDATA[æˆ‘ä»¬ä½¿ç”¨å»¶æ—¶å’Œå®šæ—¶å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š NSTimer NSTimerå¾ªçŽ¯å¼•ç”¨æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªnstimerçš„æ—¶å€™ï¼Œä½¿ç”¨ä¸€ä¸ªç±»æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªtimerï¼Œè¿”å›žä¸€ä¸ªtimeræŒ‡é’ˆï¼Œæœ‰æ—¶éœ€è¦æŠŠtiemråŠ åˆ°runloopï¼Œæœ‰æ—¶ç³»ç»Ÿè‡ªå·±æ¥å¸®ä½ åšï¼Œä½ ä¼šå‘çŽ°ï¼Œå³ä½¿æˆ‘å¹¶æ²¡æœ‰åŽ»å¼ºå¼•ç”¨è¿™ä¸ªæŒ‡é’ˆï¼Œtimeråªè¦åœ¨runloopä¸­ï¼Œtimerå°±å¯ä»¥è‡ªç„¶çš„å›žè°ƒï¼Œè¿™æ˜¯å› ä¸ºtimerè¢«runloopæ‰€å¼•ç”¨ï¼Œæˆ‘ä»¬ç”¨æŽ§åˆ¶å™¨åŽ»å¼•ç”¨è¿™ä¸ªtimerï¼Œä¹Ÿåªæ˜¯å¢žåŠ äº†ä¸€ä¸ªå¼•ç”¨è€Œå·²ã€‚ 123456789101112131415161718192021222324+(id)scheduledTimerWithTimeInterval:(NSTimeInterval)inTimeInterval block:(void (^)())inBlock repeats:(BOOL)inRepeats&#123; void (^block)() = [inBlock copy]; id ret = [self scheduledTimerWithTimeInterval:inTimeInterval target:self selector:@selector(jdExecuteSimpleBlock:) userInfo:block repeats:inRepeats]; [block release]; return ret;&#125;+(id)timerWithTimeInterval:(NSTimeInterval)inTimeInterval block:(void (^)())inBlock repeats:(BOOL)inRepeats&#123; void (^block)() = [inBlock copy]; id ret = [self timerWithTimeInterval:inTimeInterval target:self selector:@selector(jdExecuteSimpleBlock:) userInfo:block repeats:inRepeats]; [block release]; return ret;&#125;+(void)jdExecuteSimpleBlock:(NSTimer *)inTimer;&#123; if([inTimer userInfo]) &#123; void (^block)() = (void (^)())[inTimer userInfo]; block(); &#125;&#125; è¿™ä¹Ÿæ˜¯Blockå®žçŽ°çš„tiemrä¸ä¼šè¢«é‡Šæ”¾çš„åŽŸå› ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµåª’ä½“æŠ€æœ¯æ¦‚è¿°]]></title>
    <url>%2F2015%2F01%2F17%2F2015%2F%E6%B5%81%E5%AA%92%E4%BD%93%E6%8A%80%E6%9C%AF%E6%A6%82%E8%BF%B0%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯æµåª’ä½“æŠ€æœ¯éšç€çŽ°ä»£æŠ€æœ¯çš„å‘å±•ï¼Œç½‘ç»œå¸¦ç»™äººä»¬å½¢å¼å¤šæ ·çš„ä¿¡æ¯ï¼Œä»Žç¬¬ä¸€å¼ å›¾ç‰‡å‡ºçŽ°åœ¨ç½‘ç»œä¸Šåˆ°å¦‚ä»Šå„ç§å½¢å¼çš„ç½‘ç»œè§†é¢‘å’Œä¸‰ç»´åŠ¨ç”»ï¼Œç½‘ç»œè®©äººä»¬çš„è§†å¬è§‰å¾—åˆ°äº†å¾ˆå¤§çš„æ»¡è¶³ã€‚ç„¶è€Œåœ¨æµåª’ä½“æŠ€æœ¯å‡ºçŽ°ä¹‹å‰ï¼Œäººä»¬å¿…é¡»è¦å…ˆä¸‹è½½è¿™äº›å¤šåª’ä½“å†…å®¹åˆ°æœ¬åœ°è®¡ç®—æœºï¼Œåœ¨æ¼«é•¿çš„ç­‰å¾…ä¹‹åŽï¼ˆå› ä¸ºå—é™äºŽå¸¦å®½ï¼Œä¸‹è½½é€šå¸¸è¦èŠ±ä¸Šè¾ƒé•¿çš„æ—¶é—´ï¼‰ï¼Œæ‰å¯ä»¥çœ‹åˆ°æˆ–å¬åˆ°åª’ä½“ä¼ è¾¾çš„ä¿¡æ¯ã€‚ä»¤äººæ¬£æ…°çš„æ˜¯ï¼Œåœ¨æµåª’ä½“æŠ€æœ¯å‡ºçŽ°ä¹‹åŽï¼Œäººä»¬ä¾¿æ— éœ€å†ç­‰å¾…åª’ä½“å®Œå…¨ä¸‹è½½å®Œæˆäº†ã€‚æµåª’ä½“å°±æ˜¯æŒ‡é‡‡ç”¨æµå¼ä¼ è¾“æŠ€æœ¯åœ¨ç½‘ç»œä¸Šè¿žç»­å®žæ—¶æ’­æ”¾çš„åª’ä½“æ ¼å¼ï¼Œå¦‚éŸ³é¢‘ã€è§†é¢‘æˆ–å¤šåª’ä½“æ–‡ä»¶ã€‚æµåª’ä½“æŠ€æœ¯ä¹Ÿç§°æµå¼åª’ä½“æŠ€æœ¯.æ‰€è°“æµåª’ä½“æŠ€æœ¯å°±æ˜¯æŠŠè¿žç»­çš„å½±åƒå’Œå£°éŸ³ä¿¡æ¯ç»è¿‡åŽ‹ç¼©å¤„ç†åŽæ”¾ä¸Šç½‘ç«™æœåŠ¡å™¨,ç”±è§†é¢‘æœåŠ¡å™¨å‘ç”¨æˆ·è®¡ç®—æœºé¡ºåºæˆ–å®žæ—¶åœ°ä¼ é€å„ä¸ªåŽ‹ç¼©åŒ…ï¼Œè®©ç”¨æˆ·ä¸€è¾¹ä¸‹è½½ä¸€è¾¹è§‚çœ‹ã€æ”¶å¬ï¼Œè€Œä¸è¦ç­‰æ•´ä¸ªåŽ‹ç¼©æ–‡ä»¶ä¸‹è½½åˆ°è‡ªå·±çš„è®¡ç®—æœºä¸Šæ‰å¯ä»¥è§‚çœ‹çš„ç½‘ç»œä¼ è¾“æŠ€æœ¯ã€‚è¯¥æŠ€æœ¯å…ˆåœ¨ä½¿ç”¨è€…ç«¯çš„è®¡ç®—æœºä¸Šåˆ›å»ºä¸€ä¸ªç¼“å†²åŒºï¼Œåœ¨æ’­æ”¾å‰é¢„å…ˆä¸‹ä¸€æ®µæ•°æ®ä½œä¸ºç¼“å†²ï¼Œåœ¨ç½‘è·¯å®žé™…è¿žçº¿é€Ÿåº¦å°äºŽæ’­æ”¾æ‰€è€—çš„é€Ÿåº¦æ—¶ï¼Œæ’­æ”¾ç¨‹åºå°±ä¼šå–ç”¨ä¸€å°æ®µç¼“å†²åŒºå†…çš„æ•°æ®ï¼Œè¿™æ ·å¯ä»¥é¿å…æ’­æ”¾çš„ä¸­æ–­ï¼Œä¹Ÿä½¿å¾—æ’­æ”¾å“è´¨å¾—ä»¥ä¿è¯ã€‚ æµåª’ä½“æŠ€æœ¯çš„åº”ç”¨åˆ†ç±»æµåª’ä½“åº”ç”¨å½¢å¼å¯ä»¥ç®€å•åˆ†ä¸º3ç±»ï¼šç‚¹æ’­åž‹åº”ç”¨ã€ç›´æ’­åž‹åº”ç”¨å’Œä¼šè®®åž‹åº”ç”¨ã€‚ ï¼ˆ1ï¼‰ç‚¹æ’­åž‹åº”ç”¨ã€‚ç‚¹æ’­åž‹åº”ç”¨ä¸­ï¼Œä¸€èˆ¬ç‚¹æ’­å†…å®¹å­˜æ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼Œæ ¹æ®éœ€è¦è¿›è¡Œå‘å¸ƒã€‚åœ¨åŒä¸€æ—¶é—´å¯å¤šç‚¹ç‚¹æ’­ç›¸åŒæˆ–ä¸åŒçš„èŠ‚ç›®ï¼Œå³å¤šä¸ªç»ˆç«¯å¯åœ¨ä¸åŒçš„åœ°ç‚¹ã€ä¸åŒçš„æ—¶åˆ»ï¼Œå®žæ—¶ã€äº¤äº’å¼åœ°ç‚¹æ’­åŒä¸€æµæ–‡ä»¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡é—¨æˆ·æŸ¥çœ‹å’Œé€‰æ‹©å†…å®¹è¿›è¡Œç‚¹æ’­ã€‚æ ¹æ®ç”¨æˆ·çš„éœ€è¦ï¼Œç‚¹æ’­è¿‡ç¨‹ä¸­è¿˜å¯ä»¥å®žçŽ°æ’­æ”¾ã€åœæ­¢ã€æš‚åœã€å¿«è¿›ã€åŽé€€ç­‰åŠŸèƒ½ã€‚ ï¼ˆ2ï¼‰ç›´æ’­åž‹åº”ç”¨ã€‚ç›´æ’­æœåŠ¡æ¨¡å¼ä¸‹ï¼Œç”¨æˆ·åªèƒ½è§‚çœ‹æ’­æ”¾çš„å†…å®¹ï¼Œæ— æ³•è¿›è¡ŒæŽ§åˆ¶ã€‚ ï¼ˆ3ï¼‰ä¼šè®®åž‹åº”ç”¨ã€‚ä¼šè®®åž‹åº”ç”¨ç±»ä¼¼äºŽç›´æ’­åž‹åº”ç”¨ï¼Œä½†æ˜¯ä¸¤è€…æœ‰ä¸åŒçš„è¦æ±‚ï¼Œå¦‚åŒå‘é€šä¿¡ç­‰ã€‚è¿™å¯¹ä¸€èˆ¬åŒæ–¹éƒ½è¦æœ‰åŒ…æ‹¬åª’ä½“é‡‡é›†çš„ç¡¬ä»¶å’Œè½¯ä»¶ï¼Œè¿˜æœ‰æµä¼ è¾“æŠ€æœ¯ã€‚ä¼šè®®åž‹çš„åº”ç”¨æœ‰æ—¶å€™ä¸éœ€è¦å¾ˆé«˜çš„éŸ³/è§†é¢‘è´¨é‡ã€‚ ï¼ˆ4ï¼‰è§†é¢‘å¹¿æ’­ï¼Œæ˜¯ç‚¹æ’­çš„æ‰©å±•ï¼ŒæŠŠèŠ‚ç›®æºç»„ç»‡æˆé¢‘é“ï¼Œä»¥å¹¿æ’­çš„æ–¹å¼æä¾›ï¼Œç”¨æˆ·é€šè¿‡åŠ å…¥é¢‘é“æ”¶çœ‹é¢„å®šå¥½çš„èŠ‚ç›® (5)è§†é¢‘ç›‘è§† (6)éŸ³ä¹æ’­æ”¾/åœ¨çº¿ç”µå° (7)ç”µè§†ä¸Šç½‘æµåª’ä½“æŠ€æœ¯åŽŸç†å¦‚æžœå°†æ–‡ä»¶ä¼ è¾“çœ‹ä½œæ˜¯ä¸€æ¬¡æŽ¥æ°´çš„è¿‡ç¨‹ï¼Œè¿‡åŽ»çš„ä¼ è¾“æ–¹å¼å°±åƒæ˜¯å¯¹ç”¨æˆ·åšäº†ä¸€ä¸ªè§„å®šï¼Œå¿…é¡»ç­‰åˆ°ä¸€æ¡¶æ°´æŽ¥æ»¡æ‰èƒ½ä½¿ç”¨å®ƒï¼Œè¿™ä¸ªç­‰å¾…çš„æ—¶é—´è‡ªç„¶è¦å—åˆ°æ°´æµé‡å¤§å°å’Œæ¡¶çš„å¤§å°çš„å½±å“ã€‚è€Œæµå¼ä¼ è¾“åˆ™æ˜¯ï¼Œæ‰“å¼€æ°´å¤´é¾™ï¼Œç­‰å¾…ä¸€å°ä¼šå„¿ï¼Œæ°´å°±ä¼šæºæºä¸æ–­åœ°æµå‡ºæ¥ï¼Œè€Œä¸”å¯ä»¥éšæŽ¥éšç”¨ï¼Œå› æ­¤ï¼Œä¸ç®¡æ°´æµé‡çš„å¤§å°ï¼Œä¹Ÿä¸ç®¡æ¡¶çš„å¤§å°ï¼Œç”¨æˆ·éƒ½å¯ä»¥éšæ—¶ç”¨ä¸Šæ°´ã€‚ä»Žè¿™ä¸ªæ„ä¹‰ä¸Šçœ‹ï¼Œæµåª’ä½“è¿™ä¸ªè¯æ˜¯éžå¸¸å½¢è±¡çš„ã€‚æµå¼ä¼ è¾“æŠ€æœ¯åˆåˆ†ä¸¤ç§ï¼Œä¸€ç§æ˜¯é¡ºåºæµå¼ä¼ è¾“ï¼Œå¦ä¸€ç§æ˜¯å®žæ—¶æµå¼ä¼ è¾“ã€‚é¡ºåºæµå¼ä¼ è¾“é¡ºåºæµå¼ä¼ è¾“æ˜¯é¡ºåºä¸‹è½½ï¼Œåœ¨ä¸‹è½½æ–‡ä»¶çš„åŒæ—¶ç”¨æˆ·å¯ä»¥è§‚çœ‹ï¼Œä½†æ˜¯ï¼Œç”¨æˆ·çš„è§‚çœ‹ä¸ŽæœåŠ¡å™¨ä¸Šçš„ä¼ è¾“å¹¶ä¸æ˜¯åŒæ­¥è¿›è¡Œçš„ï¼Œç”¨æˆ·æ˜¯åœ¨ä¸€æ®µå»¶æ—¶åŽæ‰èƒ½çœ‹åˆ°æœåŠ¡å™¨ä¸Šä¼ å‡ºæ¥çš„ä¿¡æ¯ï¼Œæˆ–è€…è¯´ç”¨æˆ·çœ‹åˆ°çš„æ€»æ˜¯æœåŠ¡å™¨åœ¨è‹¥å¹²æ—¶é—´ä»¥å‰ä¼ å‡ºæ¥çš„ä¿¡æ¯ã€‚åœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·åªèƒ½è§‚çœ‹å·²ä¸‹è½½çš„é‚£éƒ¨åˆ†ï¼Œè€Œä¸èƒ½è¦æ±‚è·³åˆ°è¿˜æœªä¸‹è½½çš„éƒ¨åˆ†ã€‚é¡ºåºæµå¼ä¼ è¾“æ¯”è¾ƒé€‚åˆé«˜è´¨é‡çš„çŸ­ç‰‡æ®µï¼Œå› ä¸ºå®ƒå¯ä»¥è¾ƒå¥½åœ°ä¿è¯èŠ‚ç›®æ’­æ”¾çš„æœ€ç»ˆè´¨é‡ã€‚å®ƒé€‚åˆäºŽåœ¨ç½‘ç«™ä¸Šå‘å¸ƒçš„ä¾›ç”¨æˆ·ç‚¹æ’­çš„éŸ³è§†é¢‘èŠ‚ç›®ã€‚å¯¹é€šè¿‡è°ƒåˆ¶è§£è°ƒå™¨å‘å¸ƒçš„çŸ­ç‰‡æ®µï¼Œé¡ºåºæµå¼ä¼ è¾“å¾ˆå®žç”¨ï¼Œå®ƒå…è®¸ç”¨æ¯”è°ƒåˆ¶è§£è°ƒå™¨è·Ÿé«˜çš„æ•°æ®é€ŸçŽ‡åˆ›å»ºè§†é¢‘ç‰‡æ®µï¼Œå°½ç®¡æœ‰å»¶è¿Ÿæ¯•ç«Ÿå¯è®©ä½ å‘å¸ƒé«˜è´¨é‡çš„è§†é¢‘ç‰‡æ®µã€‚é¡ºåºæµå¼æ–‡ä»¶æ˜¯æ”¾åœ¨æ ‡å‡†HTTPæˆ–FTPæœåŠ¡å™¨ä¸Šï¼Œæ˜“ç®¡ç†åŸºæœ¬ä¸Šä¸Žé˜²ç«å¢™æ— å…³ï¼Œé¡ºåºæµå¼ä¼ æ’­ä¸é€‚åˆé•¿ç‰‡æ®µå’Œæœ‰éšæœºè®¿é—®è¦æ±‚çš„è§†é¢‘ï¼Œå¦‚æ¼”è®²ï¼Œæ¼”è¯´ä¸Žæ¼”ç¤ºï¼Œå®ƒä¸æ”¯æŒçŽ°åœºå¹¿æ’­ï¼Œä¸¥æ ¼æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ç§ç‚¹æ’­æŠ€æœ¯ã€‚ å®žæ—¶æµå¼ä¼ è¾“åœ¨å®žæ—¶æµå¼ä¼ è¾“ä¸­ï¼ŒéŸ³è§†é¢‘ä¿¡æ¯å¯è¢«å®žæ—¶è§‚çœ‹åˆ°ã€‚åœ¨è§‚çœ‹è¿‡ç¨‹ä¸­ç”¨æˆ·å¯å¿«è¿›æˆ–åŽé€€ä»¥è§‚çœ‹å‰é¢æˆ–åŽé¢çš„å†…å®¹ï¼Œä½†æ˜¯åœ¨è¿™ç§ä¼ è¾“æ–¹å¼ä¸­ï¼Œå¦‚æžœç½‘ç»œä¼ è¾“çŠ¶å†µä¸ç†æƒ³ï¼Œåˆ™æ”¶åˆ°çš„ä¿¡å·æ•ˆæžœæ¯”è¾ƒå·®ã€‚å®žæ—¶æµå¼ä¼ è¾“å¿…é¡»åŒ¹é…è¿žæŽ¥å®½å¸¦ï¼Œæ„å‘³ç€ä»¥è°ƒåˆ¶è§£è°ƒå™¨é€Ÿåº¦è¿žæŽ¥æ—¶å›¾åƒè´¨é‡è¾ƒå·®ï¼Œè€Œä¸”ç”±äºŽå‡ºé”™ä¸¢å¤±çš„ä¿¡æ¯è¢«å¿½ç•¥æŽ‰ï¼Œç½‘ç»œæ‹¥æŒ¤æˆ–è€…å‡ºçŽ°é—®é¢˜æ—¶å€™ï¼Œè§†é¢‘è´¨é‡å¾ˆå·®ï¼Œå¦‚æ¬²ä¿è¯è§†é¢‘è´¨é‡ï¼Œé¡ºåºæµå¼ä¼ è¾“ä¹Ÿè®¸æ›´å¥½ï¼Œå®žæ—¶æµå¼ä¼ è¾“éœ€è¦ç‰¹å®šçš„æœåŠ¡å™¨ï¼Œå¦‚QuickTime Streaming Server/Real Server/Windows Media Serverè¿™äº›æœåŠ¡å™¨å…è®¸ä½ å¯¹åª’ä½“å‘é€è¿›è¡Œæ›´å¤šçº§åˆ«çš„æŽ§åˆ¶ï¼Œå› ä¸ºè€Œç³»ç»Ÿè®¾ç½®ç®¡ç†æ¯”HTTPæœåŠ¡å™¨æ›´å¤æ‚ï¼Œå®žæ—¶æµä¼ è¾“è¿˜éœ€è¦ç‰¹æ®Šçš„ç½‘ç»œåè®®ï¼Œæ¯”å¦‚RTSP(Real time sreming protocol)æˆ–MMS(Microsoft Media Server)è¿™äº›åè®®åœ¨æœ‰é˜²ç«å¢™çš„æ—¶å€™ä¼šå‡ºçŽ°é—®é¢˜ï¼Œå¯¼è‡´ç”¨æˆ·ä¸èƒ½çœ‹åˆ°ä¸€äº›åœ°ç‚¹çš„å®žæ—¶å†…å®¹ã€‚ æµåª’ä½“ç³»ç»Ÿçš„ç»„æˆé€šå¸¸ï¼Œç»„æˆä¸€ä¸ªå®Œæ•´çš„æµåª’ä½“ç³»ç»ŸåŒ…æ‹¬ä»¥ä¸‹5ä¸ªéƒ¨åˆ†ï¼š â‘ ä¸€ç§ç”¨äºŽåˆ›å»ºã€æ•æ‰å’Œç¼–è¾‘å¤šåª’ä½“æ•°æ®ï¼Œå½¢æˆæµåª’ä½“æ ¼å¼çš„ç¼–ç å·¥å…·; â‘¡æµåª’ä½“æ•°æ®; â‘¢ä¸€ä¸ªå­˜æ”¾å’ŒæŽ§åˆ¶æµåª’ä½“æ•°æ®çš„æœåŠ¡å™¨; â‘£è¦æœ‰é€‚åˆå¤šåª’ä½“ä¼ è¾“åè®®ç”šè‡³æ˜¯å®žæ—¶ä¼ è¾“åè®®çš„ç½‘ç»œ; â‘¤ä¾›å®¢æˆ·ç«¯æµè§ˆæµåª’ä½“æ–‡ä»¶çš„æ’­æ”¾å™¨ã€‚ æµåª’ä½“ä¼ è¾“çš„åŸºæœ¬åŽŸç†æµåª’ä½“ä¼ è¾“çš„åŸºæœ¬åŽŸç† æµåª’ä½“æœåŠ¡å™¨æž¶è®¾ æµåª’ä½“æŠ€æœ¯ä¹Ÿç§°ä¸ºæµå¼ä¼ è¾“æŠ€æœ¯ï¼Œæ˜¯æŒ‡åœ¨ç½‘ç»œä¸ŠæŒ‰æ—¶é—´å…ˆåŽæ¬¡åºä¼ è¾“å’Œæ’­æ”¾çš„è¿žç»­éŸ³ã€è§†é¢‘æ•°æ®æµã€‚éšç€ç½‘ç»œé€Ÿåº¦çš„æé«˜ï¼Œä»¥æµåª’ä½“æŠ€æœ¯ä¸ºæ ¸å¿ƒçš„è§†é¢‘ç‚¹æ’­ã€åœ¨çº¿ç”µè§†ã€è¿œç¨‹åŸ¹è®­ç­‰ä¸šåŠ¡å¼€å±•å¾—è¶Šæ¥è¶Šå¹¿æ³›ã€‚æœ¬ç« ä¸»è¦ä»‹ç»æµåª’ä½“æŠ€æœ¯çš„åŸºç¡€çŸ¥è¯†ã€æµåª’ä½“æœåŠ¡å™¨çš„å®‰è£…ã€è¿è¡Œã€é…ç½®å’Œä½¿ç”¨ç­‰å†…å®¹ã€‚ 23.1 æµåª’ä½“æŠ€æœ¯åŸºç¡€ æµåª’ä½“æ˜¯æŒ‡åˆ©ç”¨æµå¼ä¼ è¾“æŠ€æœ¯ä¼ é€çš„éŸ³é¢‘ã€è§†é¢‘ç­‰è¿žç»­åª’ä½“æ•°æ®ï¼Œå®ƒçš„æ ¸å¿ƒæ˜¯ä¸²æµï¼ˆStreamingï¼‰æŠ€æœ¯å’Œæ•°æ®åŽ‹ç¼©æŠ€æœ¯ï¼Œå…·æœ‰è¿žç»­æ€§ã€å®žæ—¶æ€§ã€æ—¶åºæ€§3ä¸ªç‰¹ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨é¡ºåºæµå¼ä¼ è¾“å’Œå®žæ—¶æµå¼ä¼ è¾“ä¸¤ç§ä¼ è¾“æ–¹å¼ã€‚æœ¬èŠ‚ä¸»è¦ä»‹ç»æœ‰å…³æµåª’ä½“çš„æŠ€æœ¯åŸºç¡€ã€‚ 23.1.1 æµåª’ä½“ä¼ è¾“çš„åŸºæœ¬åŽŸç† å®žçŽ°æµå¼ä¼ è¾“éœ€è¦ä½¿ç”¨ç¼“å­˜æœºåˆ¶ã€‚å› ä¸ºéŸ³é¢‘æˆ–è§†é¢‘æ•°æ®åœ¨ç½‘ç»œä¸­æ˜¯ä»¥åŒ…çš„å½¢å¼ä¼ è¾“çš„ï¼Œè€Œç½‘ç»œæ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œå„ä¸ªæ•°æ®åŒ…é€‰æ‹©çš„è·¯ç”±å¯èƒ½ä¸å°½ç›¸åŒï¼Œåˆ°è¾¾å®¢æˆ·ç«¯æ‰€éœ€çš„æ—¶é—´ä¹Ÿå°±ä¸ä¸€æ ·ï¼Œæœ‰å¯èƒ½ä¼šå‡ºçŽ°å…ˆå‘çš„æ•°æ®åŒ…å´åŽåˆ°ã€‚å› æ­¤ï¼Œå®¢æˆ·ç«¯å¦‚æžœæŒ‰ç…§åŒ…åˆ°è¾¾çš„æ¬¡åºæ’­æ”¾æ•°æ®ï¼Œå¿…ç„¶ä¼šå¾—åˆ°ä¸æ­£ç¡®çš„ç»“æžœã€‚ä½¿ç”¨ç¼“å­˜æœºåˆ¶å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°æ•°æ®åŒ…åŽå…ˆç¼“å­˜èµ·æ¥ï¼Œæ’­æ”¾å™¨å†ä»Žç¼“å­˜ä¸­æŒ‰æ¬¡åºè¯»å–æ•°æ®ã€‚ ä½¿ç”¨ç¼“å­˜æœºåˆ¶è¿˜å¯ä»¥è§£å†³åœé¡¿é—®é¢˜ã€‚ç½‘ç»œç”±äºŽæŸç§åŽŸå› ç»å¸¸ä¼šæœ‰ä¸€äº›çªå‘æµé‡ï¼Œæ­¤æ—¶ä¼šé€ æˆæš‚æ—¶çš„æ‹¥å¡žï¼Œä½¿æµæ•°æ®ä¸èƒ½å®žæ—¶åˆ°è¾¾å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯çš„æ’­æ”¾å°±ä¼šå‡ºçŽ°åœé¡¿ã€‚å¦‚æžœé‡‡ç”¨äº†ç¼“å­˜æœºåˆ¶ï¼Œæš‚æ—¶çš„ç½‘ç»œé˜»å¡žå¹¶ä¸ä¼šå½±å“æ’­æ”¾æ•ˆæžœï¼Œå› ä¸ºæ’­æ”¾å™¨å¯ä»¥è¯»å–ä»¥å‰ç¼“å­˜çš„æ•°æ®ã€‚ç­‰ç½‘ç»œæ­£å¸¸åŽï¼Œæ–°çš„æµæ•°æ®å°†ä¼šç»§ç»­æ·»åŠ åˆ°ç¼“å­˜ä¸­ã€‚ è™½ç„¶éŸ³é¢‘æˆ–è§†é¢‘ç­‰æµæ•°æ®å®¹é‡éžå¸¸å¤§ï¼Œä½†æ’­æ”¾æµæ•°æ®æ—¶æ‰€éœ€çš„ç¼“å­˜å®¹é‡å¹¶ä¸éœ€è¦å¾ˆå¤§ï¼Œå› ä¸ºç¼“å­˜å¯ä»¥ä½¿ç”¨çŽ¯å½¢é“¾è¡¨ç»“æž„æ¥å­˜å‚¨æ•°æ®ï¼Œå·²ç»æ’­æ”¾çš„å†…å®¹å¯ä»¥é©¬ä¸Šä¸¢å¼ƒï¼Œç¼“å­˜å¯ä»¥è…¾å‡ºç©ºé—´ç”¨äºŽå­˜æ”¾åŽç»­å°šæœªæ’­æ”¾çš„å†…å®¹ã€‚ å½“ä¼ è¾“æµæ•°æ®æ—¶ï¼Œéœ€è¦ä½¿ç”¨åˆé€‚çš„ä¼ è¾“åè®®ã€‚TCPè™½ç„¶æ˜¯ä¸€ç§å¯é çš„ä¼ è¾“åè®®ï¼Œä½†ç”±äºŽéœ€è¦çš„å¼€é”€è¾ƒå¤šï¼Œå¹¶ä¸é€‚åˆä¼ è¾“å®žæ—¶æ€§è¦æ±‚å¾ˆé«˜çš„æµæ•°æ®ã€‚å› æ­¤ï¼Œåœ¨å®žé™…çš„æµå¼ä¼ è¾“æ–¹æ¡ˆä¸­ï¼ŒTCPåè®®ä¸€èˆ¬ç”¨æ¥ä¼ è¾“æŽ§åˆ¶ä¿¡æ¯ï¼Œè€Œå®žæ—¶çš„éŸ³è§†é¢‘æ•°æ®åˆ™æ˜¯ç”¨æ•ˆçŽ‡æ›´é«˜çš„RTP/UDPç­‰åè®®æ¥ä¼ è¾“ã€‚æµåª’ä½“ä¼ è¾“çš„åŸºæœ¬åŽŸç†å¦‚å›¾23-1æ‰€ç¤ºã€‚ åœ¨å›¾23-1ä¸­ï¼ŒWebæœåŠ¡å™¨åªæ˜¯ä¸ºç”¨æˆ·æä¾›äº†ä½¿ç”¨æµåª’ä½“çš„æ“ä½œç•Œé¢ã€‚å®¢æˆ·æœºä¸Šçš„ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­é€‰ä¸­æ’­æ”¾æŸä¸€æµåª’ä½“èµ„æºåŽï¼ŒWebæœåŠ¡å™¨æŠŠæœ‰å…³è¿™ä¸€èµ„æºçš„æµåª’ä½“æœåŠ¡å™¨åœ°å€ã€èµ„æºè·¯å¾„åŠç¼–ç ç±»åž‹ç­‰ä¿¡æ¯æä¾›ç»™å®¢æˆ·ç«¯ï¼ŒäºŽæ˜¯å®¢æˆ·ç«¯å°±å¯åŠ¨äº†æµåª’ä½“æ’­æ”¾å™¨ï¼Œä¸Žæµåª’ä½“æœåŠ¡å™¨è¿›è¡Œè¿žæŽ¥ã€‚ å®¢æˆ·ç«¯çš„æµåª’ä½“æ’­æ”¾å™¨ä¸Žæµåª’ä½“æœåŠ¡å™¨ä¹‹é—´äº¤æ¢æŽ§åˆ¶ä¿¡æ¯æ—¶ä½¿ç”¨çš„æ˜¯RTSPåè®®ï¼Œå®ƒæ˜¯åŸºäºŽTCPåè®®çš„ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯554ç«¯å£ã€‚RTSPåè®®æä¾›äº†æœ‰å…³æµåª’ä½“æ’­æ”¾ã€å¿«è¿›ã€å¿«å€’ã€æš‚åœåŠå½•åˆ¶ç­‰æ“ä½œçš„å‘½ä»¤å’Œæ–¹æ³•ã€‚é€šè¿‡RTSPåè®®ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨æå‡ºäº†æ’­æ”¾æŸä¸€æµåª’ä½“èµ„æºçš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨å“åº”äº†è¿™ä¸ªè¯·æ±‚åŽï¼Œå°±å¯ä»¥æŠŠæµåª’ä½“æ•°æ®ä¼ è¾“ç»™å®¢æˆ·ç«¯äº†ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRTSPåè®®å¹¶ä¸å…·å¤‡ä¼ è¾“æµåª’ä½“æ•°æ®çš„åŠŸèƒ½ï¼Œæ‰¿æ‹…æµåª’ä½“æ•°æ®ä¼ è¾“ä»»åŠ¡çš„æ˜¯å¦ä¸€ç§åŸºäºŽUDPçš„RTPåè®®ï¼Œä½†åœ¨RTPåè®®ä¼ è¾“æµåª’ä½“æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼ŒRTSPè¿žæŽ¥æ˜¯ä¸€ç›´å­˜åœ¨çš„ï¼Œå¹¶ä¸”æŽ§åˆ¶ç€æµåª’ä½“æ•°æ®çš„ä¼ è¾“ã€‚ä¸€æ—¦æµåª’ä½“æ•°æ®åˆ°è¾¾äº†å®¢æˆ·ç«¯ï¼Œæµåª’ä½“æ’­æ”¾å™¨å°±å¯ä»¥æ’­æ”¾è¾“å‡ºäº†ã€‚æµåª’ä½“çš„æ•°æ®å’ŒæŽ§åˆ¶ä¿¡æ¯ä½¿ç”¨ä¸åŒçš„åè®®å’Œè¿žæŽ¥æ—¶ï¼Œè¿˜å¯ä»¥å¸¦æ¥ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯æ’­æ”¾æµåª’ä½“çš„å®¢æˆ·æœºå’ŒæŽ§åˆ¶æµåª’ä½“æ’­æ”¾çš„å®¢æˆ·æœºå¯ä»¥æ˜¯ä¸åŒçš„è®¡ç®—æœºã€‚ å®žæ—¶æµåª’ä½“åè®®RTSPRTSPï¼ˆReal Time Streaming Protocolï¼Œå®žæ—¶æµåª’ä½“åè®®ï¼‰æ˜¯ç”±Real Networkå’ŒNetscapeå…±åŒæå‡ºçš„ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œå®ƒå®šä¹‰äº†å¦‚ä½•åœ¨IPç½‘ç»œä¸Šæœ‰æ•ˆåœ°ä¼ è¾“æµåª’ä½“æ•°æ®ã€‚RTSPæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œä½¿éŸ³é¢‘ã€è§†é¢‘ç­‰æ•°æ®å¯ä»¥æŒ‰ç…§éœ€è¦è¿›è¡Œå®žæ—¶ä¼ è¾“ï¼Œå¹¶ä¸”å¯ä»¥å®žæ–½è¯¸å¦‚æš‚åœã€å¿«è¿›ç­‰æŽ§åˆ¶ã€‚æºæ•°æ®å¯ä»¥æ˜¯å­˜å‚¨çš„æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯çŽ°åœºæ•°æ®çš„åé¦ˆã€‚RTSPåè®®æœ¬èº«å¹¶ä¸ä¼ è¾“æ•°æ®ï¼Œæ•°æ®çš„ä¼ è¾“æ˜¯é€šè¿‡åŸºäºŽUDPåè®®çš„RTPåè®®æ¥å®Œæˆçš„ã€‚ RTSPåè®®ä¸ŽHTTPåè®®æœ‰ç‚¹ç±»ä¼¼ï¼Œé€šä¿¡åŒæ–¹æ˜¯é€šè¿‡è¯·æ±‚æ¶ˆæ¯å’Œå›žåº”æ¶ˆæ¯è¿›è¡Œäº¤äº’çš„ã€‚è¯·æ±‚æ¶ˆæ¯çš„æ ¼å¼å¦‚ä¸‹ï¼š1234&lt;è¯·æ±‚æ–¹æ³•&gt; &lt;URI&gt; &lt;RTSPç‰ˆæœ¬&gt; [æ¶ˆæ¯å¤´] CR/ LF [æ¶ˆæ¯ä½“] å…¶ä¸­ï¼Œè¯·æ±‚æ–¹æ³•åŒ…æ‹¬PLAYã€DESCRIBEç­‰ï¼Œå¯ä»¥é€šè¿‡OPTIONæ–¹æ³•å¾—åˆ°å¯¹æ–¹æ‰€æ”¯æŒçš„å…¶ä»–æ–¹æ³•åç§°ã€‚URIæ˜¯å¯¹æ–¹çš„åœ°å€ï¼Œä¾‹å¦‚ï¼šrtsp://192.168.0.1ã€‚â€RTSPç‰ˆæœ¬â€ä¸€èˆ¬éƒ½æ˜¯RTSP/1.0ã€‚æ¯ä¸€è¡Œçš„æœ€åŽéƒ½æ˜¯å›žè½¦æ¢è¡Œç¬¦CR/LFï¼Œæ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ä¹‹é—´è¦æœ‰ä¸€ä¸ªç©ºè¡Œã€‚å›žåº”æ¶ˆæ¯æ ¼å¼å¦‚ä¸‹ï¼š1234&lt;RTSPç‰ˆæœ¬&gt; &lt;çŠ¶æ€ç &gt; &lt;è§£é‡Š&gt; [æ¶ˆæ¯å¤´] CR/LF [æ¶ˆæ¯ä½“] å›žåº”æ¶ˆæ¯çš„æ ¼å¼è§„å®šä¸Žè¯·æ±‚æ¶ˆæ¯ç±»ä¼¼ã€‚å…¶ä¸­çŠ¶æ€ç æ˜¯ä¸€ä¸ª3ä½æ•°ï¼ŒåŽé¢è·Ÿéšç€è§£é‡Šæ–‡æœ¬ï¼Œä¾‹å¦‚ï¼Œ200è¡¨ç¤ºæˆåŠŸã€‚ HTTPåè®®æ˜¯å•å‘çš„ï¼Œå³åªèƒ½æ˜¯å®¢æˆ·ç«¯æå‡ºè¯·æ±‚ï¼ŒæœåŠ¡ç«¯ç»™äºˆå›žåº”ï¼Œè€Œä½¿ç”¨RTSPæ—¶ï¼Œå®¢æˆ·æœºå’ŒæœåŠ¡å™¨éƒ½å¯ä»¥å‘å‡ºè¯·æ±‚ï¼ŒåŒæ–¹éƒ½å¯ä»¥å¯¹æ”¶åˆ°çš„è¯·æ±‚è¿›è¡Œåº”ç­”ï¼Œå³RTSPå¯ä»¥æ˜¯åŒå‘çš„ã€‚ä¸€ä¸ªå…¸åž‹çš„RSTPäº¤äº’è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä¸­Cè¡¨ç¤ºRTSPå®¢æˆ·ç«¯ï¼ŒSè¡¨ç¤ºRTSPæœåŠ¡ç«¯12345678910111213141516171819202122232425C-&gt;S: OPTION request //å®¢æˆ·ç«¯é€šè¿‡OPTIONæ–¹æ³•è¯¢é—®æœåŠ¡ç«¯æ”¯æŒå“ªäº›æ–¹æ³• S-&gt;C: OPTION response //æœåŠ¡ç«¯è¿›è¡Œå›žåº”ï¼Œæä¾›äº†æ‰€æ”¯æŒæ–¹æ³•çš„åç§° C-&gt;S: DESCRIBE request //å®¢æˆ·ç«¯é€šè¿‡DESCRIBEæ–¹æ³•æŸ¥è¯¢æœåŠ¡ç«¯åª’ä½“çš„åˆå§‹åŒ–æè¿°//ä¿¡æ¯ S-&gt;C: DESCRIBE response //æœåŠ¡ç«¯å›žåº”åª’ä½“åˆå§‹åŒ–æè¿°ä¿¡æ¯ï¼Œé‡‡ç”¨çš„æ˜¯sdpä¼šè¯æè¿°//æ ¼å¼ C-&gt;S: SETUP request //å®¢æˆ·ç«¯é€šè¿‡SETUPæ–¹æ³•è®¾ç½®ä¼šè¯çš„å±žæ€§ã€ä¼ è¾“æ¨¡å¼ç­‰å‚æ•°ï¼Œ//å¹¶è¯·æ±‚å»ºç«‹ä¼šè¯ S-&gt;C: SETUP response //æœåŠ¡ç«¯å“åº”å›žè¯è¯·æ±‚ï¼Œä¸Žå®¢æˆ·ç«¯å»ºç«‹ä¼šè¯ï¼Œå¹¶è¿”å›žä¼šè¯æ ‡è¯†//ç¬¦åŠå…¶ä»–ç›¸å…³ä¿¡æ¯ C-&gt;S: PLAY request //å®¢æˆ·ç«¯é€šè¿‡PLAYæ–¹æ³•è¯·æ±‚æ’­æ”¾æŸä¸€å¤šåª’ä½“èµ„æº S-&gt;C: PLAY response //æœåŠ¡å™¨å›žåº”è¯·æ±‚ï¼Œå¼€å§‹å‘é€æµæ•°æ® S-&gt;C: â€¦ //æ­¤æ—¶ï¼ŒRTSPé€šè¿‡å…¶ä»–åè®®å‘é€æµåª’ä½“æ•°æ® C-&gt;S: TEARDOWN request //å®¢æˆ·ç«¯é€šè¿‡TEARDOWNæ–¹æ³•è¯·æ±‚å…³é—­ä¼šè¯ S-&gt;C: TEARDOWN response //æœåŠ¡å™¨å›žåº”è¯·æ±‚ï¼Œä¼šè¯å…³é—­ï¼Œäº¤äº’ç»“æŸ å®žé™…åº”ç”¨ä¸­ï¼ŒRTCPçš„äº¤äº’è¿‡ç¨‹å¯èƒ½å’Œä»¥ä¸Šè¿‡ç¨‹ä¼šæœ‰åŒºåˆ«ï¼Œä½†åŸºæœ¬çš„æµç¨‹æ˜¯ä¸€æ ·çš„ã€‚ è¯´æ˜Žï¼šè¿˜æœ‰ä¸€ç§å¸¸è§çš„æµåª’ä½“åè®®æ˜¯ç”±Microsoftå…¬å¸å¼€å‘çš„MMSåè®®ï¼Œä½†Microsoftå…¬å¸æ²¡æœ‰å…¬å¼€è¯¥åè®®ã€‚ æµåª’ä½“æ’­æ”¾æ–¹å¼æµåª’ä½“æœåŠ¡å™¨å¯ä»¥æä¾›å¤šç§æ’­æ”¾æ–¹å¼ï¼Œå®ƒå¯ä»¥æ ¹æ®ç”¨æˆ·çš„è¦æ±‚ï¼Œä¸ºæ¯ä¸ªç”¨æˆ·ç‹¬ç«‹åœ°ä¼ é€æµæ•°æ®ï¼Œå®žçŽ°VODï¼ˆVideo On Demandï¼‰çš„åŠŸèƒ½ï¼›ä¹Ÿå¯ä»¥ä¸ºå¤šä¸ªç”¨æˆ·åŒæ—¶ä¼ é€æµæ•°æ®ï¼Œå®žçŽ°åœ¨çº¿ç”µè§†æˆ–çŽ°åœºç›´æ’­çš„åŠŸèƒ½ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹è¿™äº›æ’­æ”¾æ–¹å¼çš„ç‰¹ç‚¹ã€‚ å•æ’­æ–¹å¼å½“é‡‡ç”¨å•æ’­æ–¹å¼æ—¶ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯éƒ½ä¸Žæµåª’ä½“æœåŠ¡å™¨å»ºç«‹äº†ä¸€ä¸ªå•ç‹¬çš„æ•°æ®é€šé“ï¼Œä»ŽæœåŠ¡å™¨å‘é€çš„æ¯ä¸ªæ•°æ®åŒ…éƒ½åªèƒ½ä¼ ç»™ä¸€å°å®¢æˆ·æœºã€‚å¯¹ç”¨æˆ·æ¥è¯´ï¼Œå•æ’­æ–¹å¼å¯ä»¥æ»¡è¶³è‡ªå·±çš„ä¸ªæ€§åŒ–è¦æ±‚ï¼Œå¯ä»¥æ ¹æ®éœ€è¦éšæ—¶ä½¿ç”¨åœæ­¢ã€æš‚åœã€å¿«è¿›ç­‰æŽ§åˆ¶åŠŸèƒ½ã€‚ä½†å¯¹æœåŠ¡å™¨è¿˜è¯´ï¼Œå•æ’­æ–¹å¼æ— ç–‘ä¼šå¸¦æ¥æ²‰é‡çš„è´Ÿæ‹…ï¼Œå› ä¸ºå®ƒå¿…é¡»ä¸ºæ¯ä¸ªç”¨æˆ·æä¾›å•ç‹¬çš„æŸ¥è¯¢ï¼Œå‘æ¯ä¸ªç”¨æˆ·å‘é€æ‰€ç”³è¯·çš„æ•°æ®åŒ…å¤åˆ¶ã€‚å½“ç”¨æˆ·æ•°å¾ˆå¤šæ—¶ï¼Œå¯¹ç½‘ç»œé€Ÿåº¦ã€æœåŠ¡å™¨æ€§èƒ½çš„è¦æ±‚éƒ½å¾ˆé«˜ã€‚å¦‚æžœè¿™äº›æ€§èƒ½ä¸èƒ½æ»¡è¶³è¦æ±‚ï¼Œå°±ä¼šé€ æˆæ’­æ”¾åœé¡¿ï¼Œç”šè‡³åœæ­¢æ’­æ”¾ã€‚ å¹¿æ’­æ–¹å¼æ‰¿è½½æµæ•°æ®çš„ç½‘ç»œæŠ¥æ–‡è¿˜å¯ä»¥ä½¿ç”¨å¹¿æ’­æ–¹å¼å‘é€ç»™å­ç½‘ä¸Šæ‰€æœ‰çš„ç”¨æˆ·ï¼Œæ­¤æ—¶ï¼Œæ‰€æœ‰çš„ç”¨æˆ·åŒæ—¶æŽ¥å—ä¸€æ ·çš„æµæ•°æ®ï¼Œå› æ­¤ï¼ŒæœåŠ¡å™¨åªéœ€è¦å‘é€ä¸€ä»½æ•°æ®å¤åˆ¶å°±å¯ä»¥ä¸ºå­ç½‘ä¸Šæ‰€æœ‰çš„ç”¨æˆ·æœåŠ¡ï¼Œå¤§å¤§å‡è½»äº†æœåŠ¡å™¨çš„è´Ÿæ‹…ã€‚ä½†æ­¤æ—¶ï¼Œå®¢æˆ·æœºåªèƒ½è¢«åŠ¨åœ°æŽ¥å—æµæ•°æ®ï¼Œè€Œä¸èƒ½æŽ§åˆ¶æµã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·ä¸èƒ½æš‚åœã€å¿«è¿›æˆ–åŽé€€æ‰€æ’­æ”¾çš„å†…å®¹ï¼Œè€Œä¸”ï¼Œç”¨æˆ·ä¹Ÿä¸èƒ½å¯¹èŠ‚ç›®è¿›è¡Œé€‰æ‹©ã€‚ ç»„æ’­æ–¹å¼å•æ’­æ–¹å¼è™½ç„¶ç”¨æˆ·æä¾›äº†æœ€å¤§çš„çµæ´»æ€§ï¼Œä½†ç½‘ç»œå’ŒæœåŠ¡å™¨çš„è´Ÿæ‹…å¾ˆé‡ã€‚å¹¿æ’­æ–¹å¼è™½ç„¶å¯ä»¥å‡è½»æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼Œä½†ç”¨æˆ·ä¸èƒ½é€‰æ‹©æ’­æ”¾å†…å®¹ï¼Œåªèƒ½è¢«åŠ¨åœ°æŽ¥å—æµæ•°æ®ã€‚ç»„æ’­å¸å–äº†ä¸Šè¿°ä¸¤ç§ä¼ è¾“æ–¹å¼çš„é•¿å¤„ï¼Œå¯ä»¥å°†æ•°æ®åŒ…å¤åˆ¶å‘é€ç»™éœ€è¦çš„å¤šä¸ªå®¢æˆ·ï¼Œè€Œä¸æ˜¯åƒå•æ’­æ–¹å¼é‚£æ ·å¤åˆ¶æ•°æ®åŒ…çš„å¤šä¸ªæ–‡ä»¶åˆ°ç½‘ç»œä¸Šï¼Œä¹Ÿä¸æ˜¯åƒå¹¿æ’­æ–¹å¼é‚£æ ·å°†æ•°æ®åŒ…å‘é€ç»™é‚£äº›ä¸éœ€è¦çš„å®¢æˆ·ï¼Œä¿è¯æ•°æ®åŒ…å ç”¨æœ€å°çš„ç½‘ç»œå¸¦å®½ã€‚å½“ç„¶ï¼Œç»„æ’­æ–¹å¼éœ€è¦åœ¨å…·æœ‰ç»„æ’­èƒ½åŠ›çš„ç½‘ç»œä¸Šä½¿ç”¨ã€‚ æµåª’ä½“å…³é”®æŠ€æœ¯æµåª’ä½“æœ‰ä¸‰ä¸ªå…³é”®æŠ€æœ¯:æ•°æ®åŽ‹ç¼©/è§£åŽ‹ç¼©æŠ€æœ¯ï¼Œæµåª’ä½“ç½‘ç»œä¼ è¾“å’Œåª’ä½“æ–‡ä»¶åœ¨æµå¼ä¼ è¾“ä¸­çš„ç‰ˆæƒä¿æŠ¤é—®é¢˜ï¼Œå…¶ä¸­æ•°æ®åŽ‹ç¼©å’Œè§£åŽ‹ç¼©æŠ€æœ¯ä¼˜åŠ¿é‡ä¸­ä¹‹é‡ï¼Œæ ¸å¿ƒæŠ€æœ¯ã€‚æ–¹å‘é€ç¡®è®¤å˜»å˜»ï¼Œå‘é€å‘æ”¶åˆ°ç¡®è®¤å˜»å˜»çŒ´æ‰ç»§ç»­ æµåª’ä½“åˆ¶ä½œæŠ€æœ¯æ–¹é¢è§£å†³çš„é—®é¢˜åœ¨ç½‘ç»œä¸­è¿›è¡Œæµåª’ä½“ä¼ è¾“ï¼Œæ‰€ä¼ è¾“çš„æ–‡ä»¶å¿…é¡»åˆ¶ä½œæˆé€‚åˆæµåª’ä½“ä¼ è¾“çš„æµåª’ä½“æ ¼å¼æ–‡ä»¶ï¼Œç”±äºŽé€šå¸¸æ ¼å¼å­˜å‚¨çš„å¤šåª’ä½“æ–‡ä»¶å®¹é‡ååˆ†å¤§ï¼Œä¼ è¾“æ¯”è¾ƒå›°éš¾ï¼Œå¦å¤–æµåª’ä½“ä¹Ÿä¸èƒ½æŒ‰æµåª’ä½“ä¼ è¾“çš„åè®®è¿›è¡Œä¼ è¾“ï¼Œæ‰€ä»¥å¿…é¡»å¯¹é—®æ´¥è¿›è¡Œé¢„å¤„ç†ï¼Œå°†æ–‡ä»¶åŽ‹ç¼©æˆæµåª’ä½“æ ¼å¼æ–‡ä»¶ï¼Œè¿™é‡Œè¦æ³¨æ„ä¸¤ç‚¹ï¼š1ï¼Œé€‰ç”¨åˆé€‚çš„ç®—æ³•åœ¨è´¨é‡ä¸Žä½“ç§¯ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ï¼Œ2ï¼Œéœ€è¦å‘æ–‡ä»¶ä¸­æ·»åŠ æµå¼ä¿¡æ¯ã€‚ æµåª’ä½“ä¼ è¾“æ–¹é¢éœ€è¦è§£å†³çš„é—®é¢˜æµåª’ä½“ä¼ è¾“éœ€è¦å’Œå®žæ–½çš„ä¼ è¾“åè®®ï¼Œç›®å‰æ–‡ä»¶åˆä¸‰ä¹¦å¤§éƒ¨åˆ†æ˜¯å»ºç«‹åœ¨TCPåè®®ä¸Šçš„ï¼Œä¹Ÿæœ‰ä¸€äº›ä»¥ftpä¼ è¾“åè®®æ–¹å¼è¿›è¡Œä¼ è¾“ï¼Œä½†é‡‡ç”¨è¿™äº›ä¼ è¾“æ–¹æ³•éƒ½ä¸èƒ½å®žçŽ°å®žæ—¶çš„æ–¹å¼ä¼ è¾“ï¼Œéšç€æµåª’ä½“æŠ€æœ¯çš„æ·±å…¥ç ”ç©¶ï¼Œç›®å‰æˆç†Ÿçš„æµåª’ä½“ä¼ è¾“ä¸€èˆ¬éƒ½é‡‡ç”¨å»ºç«‹åœ¨UDPåè®®ä¸Šçš„RTP/RTSPå®žæ—¶ä¼ è¾“åè®®ã€‚ä¹‹æ‰€é€‰æ‹©UDPæ˜¯å› ä¸ºåœ¨ä¼ è¾“çš„å¯é æ€§ä¸ŠUDPæ¯”TCPæœ‰å¾ˆå¤§çš„æœ‰äº‹ï¼ŒTCPåè®®ä¸­åŒ…å«äº†ä¸“é—¨çš„æ•°æ®ä¼ é€æ ¡éªŒæœºåˆ¶ï¼Œå½“æ•°æ®æŽ¥å—æ–¹æ”¶åˆ°æ•°æ®åŽå°†è‡ªåŠ¨å‘å‘é€ç¡®è®¤ä¿¡æ¯ï¼Œå‘é€æ–¹åœ¨æŽ¥æ”¶åˆ°ç¡®è®¤ä¿¡æ¯åŽæ‰ç»§ç»­ä¼ é€æ•°æ®ï¼Œå¦åˆ™å°†ä¸€ç›´å¤„äºŽç­‰å¾…çŠ¶æ€ï¼Œè€ŒUDPåè®®åˆ™ä¸åŒï¼Œæœ¬èº«å¹¶ä¸åšä»»ä½•æ ¡éªŒï¼Œç”±æ­¤å¯ä»¥çœ‹å‡ºTCPåè®®æ³¨é‡ä¼ è¾“è´¨é‡ï¼Œè€ŒUDPæ³¨é‡ä¼ è¾“é€Ÿåº¦ï¼Œå› æ­¤å¯¹äºŽä¼ è¾“è´¨é‡è¦æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œè€Œå¯¹é€Ÿåº¦è¦æ±‚å¾ˆé«˜çš„è§†éŸ³é¢‘æµåª’ä½“æ–‡ä»¶æ¥è¯´ï¼Œé‡‡ç”¨UDPæ›´åŠ åˆé€‚ã€‚ æµåª’ä½“çš„ä¼ è¯´è¿‡ç¨‹ä¸­éœ€è¦ç¼“å­˜çš„æ”¯æŒå› ä¸ºinternetæ˜¯ä»¥åŒ…ä¸ºå•ä½è¿›è¡Œå¼‚æ­¥ä¼ è¾“çš„ï¼Œæ‰€ä»¥å¤šåª’ä½“æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«åˆ†è§£ä¸ºè®¸å¤šçš„åŒ…ï¼Œç”±äºŽç½‘ç»œä¼ è¾“çš„ä¸ç¨³å®šæ€§ï¼Œå„ä¸ªåŒ…é€‰æ‹©çš„è·¯ç”±ä¸åŒï¼Œæ‰€ä»¥åˆ°è¾¾å®¢æˆ·ç«¯çš„æ—¶é—´æ¬¡åºå¯èƒ½å‘ç”Ÿæ”¹å˜ï¼Œç”šè‡³äº§ç”Ÿä¸¢åŒ…çŽ°è±¡ï¼Œä¸ºæ­¤ï¼Œå¿…é¡»é‡‡ç”¨æ­£ç¡®çš„ä¹¦åºï¼Œä»Žè€Œå¿…é¡»ä½¿ç”¨ç¼“å­˜æŠ€æœ¯æ¥çº æ­£ç”±äºŽæ•°æ®åˆ°è¾¾æ¬¡åºå‘ç”Ÿæ”¹å˜è€Œäº§ç”Ÿçš„æ··ä¹±çš„é—®é¢˜ï¼Œåˆ©ç”¨ç¼“å­˜å¯¹åˆ°è¾¾çš„æ•°æ®åŒ…è¿›è¡Œæ­£ç¡®çš„æŽ’åºï¼Œä»Žè€Œä½¿éŸ³é¢‘æ•°æ®èƒ½å¤Ÿè¿žç»­æ­£ç¡®çš„æ’­æ”¾ï¼Œç¼“å­˜ä¸­å­˜å‚¨çš„æ˜¯ä¸€æ®µæ—¶é—´å†…çš„æ•°æ®ï¼Œæ•°æ®åœ¨ç¼“å­˜ä¸­å­˜æ”¾çš„æ—¶é—´æ˜¯æš‚æ—¶çš„ï¼Œç¼“å­˜ä¸­çš„æ•°æ®ä¹Ÿæ˜¯åŠ¨æ€çš„ï¼Œä¸æ–­æ›´æ–°çš„ï¼Œæµåª’ä½“åœ¨æ’­æ”¾æ—¶ä¸æ–­çš„è¯»å–ç¼“å­˜ä¸­çš„æ•°æ®è¿›è¡Œæ’­æ”¾ï¼Œæ’­æ”¾å®ŒåŽè¯¥æ•°æ®ç«‹åˆ»è¢«æ¸…æ¥šï¼Œæ–°çš„æ•°æ®å°†åŠ å…¥ç¼“å­˜ï¼Œå› æ­¤æ’­æ”¾æµåª’ä½“æ–‡ä»¶çš„æ—¶å€™å¹¶ä¸éœ€è¦å ç”¨å¤ªå¤§çš„ç¼“å­˜ç©ºé—´ã€‚ æµåª’ä½“ä¼ è¾“çš„ç½‘ç»œåè®®TCPéœ€è¦è¾ƒå¤šçš„å¼€é”€ï¼Œæ‰€ä»¥ä¸å¤ªé€‚åˆä¼ è¾“å®žæ—¶æ•°æ®ï¼Œæµå¼ä¼ è¾“ä¸€èˆ¬é‡‡ç”¨HTTP/TCP(RTCP)ä¼ è¾“æŽ§åˆ¶ä¿¡æ¯ï¼Œè€Œé‡‡ç”¨RTP/UDP(RTP)æ¥ä¼ è¾“å®žæ—¶å£°éŸ³æ•°æ®ã€‚ å®žæ—¶ä¼ è¾“åè®®RTPè¿™ç§åè®®åœ¨ä¸€å¯¹ä¸€æˆ–ä¸€å¯¹å¤šçš„ä¼ è¾“æƒ…å†µä¸‹å·¥ä½œï¼Œå…¶ç›®çš„æ˜¯æä¾›æ—¶é—´ä¿¡æ¯å’Œå®žçŽ°æµåŒæ­¥ï¼ŒRTPé€šå¸¸ä½¿ç”¨UDPæ¥ä¼ é€æ•°æ®ï¼Œå½“å¼•ç”¨ç¨‹åºå¼€å§‹ä¸€ä¸ªRTPä¼šè¯æ—¶å°†ä½¿ç”¨ä¸¤ä¸ªç«¯å£ï¼Œä¸€ä¸ªç»™RTPï¼Œä¸€ä¸ªç»™RTCPï¼ŒRTPæœ¬èº«å¹¶ä¸èƒ½ä¸ºæŒ‰é¡ºåºä¼ é€æ•°æ®åŒ…æä¾›å¯é çš„ä¼ é€æœºåˆ¶ï¼Œä¹Ÿä¸æä¾›æµé‡æŽ§åˆ¶æˆ–æ‹¥å¡žæŽ§åˆ¶ï¼Œå®ƒä¾é RTCPæä¾›è¿™äº›æœåŠ¡ï¼Œé€šå¸¸RTPç®—æ³•å¹¶ä¸ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ç½‘ç»œå±‚æ¥å®žçŽ°ï¼Œè€Œæ˜¯ä½œä¸ºåº”ç”¨ç¨‹åºä»£ç çš„ä¸€éƒ¨åˆ†ã€‚ å®žæ—¶ä¼ è¾“æŽ§åˆ¶åè®®RTCPå®žæ—¶ä¼ è¾“æŽ§åˆ¶åè®®RTCPå’ŒRTPä¸€èµ·æä¾›æµé‡æŽ§åˆ¶å’Œæ‹¥å¡žæŽ§åˆ¶æœåŠ¡ï¼Œåœ¨RTPä¼šè¯æœŸé—´å„å‚ä¸Žè€…å‘¨æœŸæ€§çš„ä¼ é€RTCPåŒ…ï¼ŒRTCPåŒ…ä¸­å«æœ‰ å·²å‘é€çš„æ•°æ®åŒ…çš„æ•°é‡ï¼Œä¸¢å¤±çš„æ•°æ®åŒ…æ•°é‡ç­‰ç»Ÿè®¡èµ„æ–™ï¼Œå› æ­¤æœåŠ¡å™¨å¯ä»¥åˆ©ç”¨è¿™äº›ä¿¡æ¯åŠ¨æ€çš„æ”¹å˜ä¼ è¾“é€ŸçŽ‡ï¼Œç”šè‡³æ”¹å˜æœ‰æ•ˆè½½è·ç±»åž‹ã€‚RTPå’ŒRTCPé…åˆä½¿ç”¨ï¼Œèƒ½ä»¥æœ‰æ•ˆçš„åé¦ˆå’Œæœ€å°çš„å¼€é”€ä½¿ä¼ è¾“æ•ˆçŽ‡æœ€ä½³åŒ–ï¼Œå› è€Œç‰¹åˆ«é€‚åˆä¼ é€ç½‘ä¸Šçš„å®žæ—¶æ•°æ®ã€‚ å®žæ—¶æµåè®®RTSPå®žæ—¶æµåè®®RTSPå®šä¹‰äº†ä¸€å¯¹å¤šåº”ç”¨ç¨‹åºå¦‚ä½•æœ‰æ•ˆåœ°é€šè¿‡IPç½‘ç»œä¼ é€å¤šåª’ä½“æ•°æ®ï¼ŒRTSPçš„ä½“ç³»ç»“æž„ä¸Šä½äºŽRTPå’ŒRTCPä¹‹ä¸Šï¼Œå®ƒä½¿ç”¨TCPæˆ–RTPå®Œæˆæ•°æ®ä¼ è¾“ï¼ŒHTTPä¸ŽRTSPç›¸æ¯”ï¼ŒHTTPä¼ é€HTMLè¶…é“¾æŽ¥æ–‡æ¡£ï¼Œè€ŒRTSPä¼ é€çš„æ˜¯å¤šåª’ä½“æ•°æ®ï¼ŒHTTPè¯·æ±‚ç”±å®¢æˆ·æœºå‘å‡ºï¼ŒæœåŠ¡å™¨ä½œå‡ºç›¸åº”ï¼Œä½¿ç”¨RTSPæ—¶ï¼Œå®¢æˆ·æœºä¸ŽæœåŠ¡å™¨éƒ½å¯ä»¥å‘å‡ºè¯·æ±‚ï¼Œå³RTSPå¯ä»¥æ˜¯åŒå‘çš„ï¼Œç‚¹å¯¹ç‚¹çš„é¢æ‰‹æœºå¯è§†é€šè¯ï¼Œå¿…é¡»åœ¨æ‰‹æœºç»ˆç«¯å®žçŽ°RTSPã€‚ æµåª’ä½“æ–‡ä»¶æ ¼å¼å°†å¤šåª’ä½“ä¿¡æ¯è¿›è¡ŒåŽ‹ç¼©ç”Ÿæˆä¸€å®šæ ¼å¼çš„æ–‡ä»¶ï¼Œè¿™å°±æ˜¯åª’ä½“åŽ‹ç¼©æ ¼å¼ï¼Œè€Œè¦å°†è¿™äº›åŽ‹ç¼©çš„æ–‡ä»¶åœ¨IPç½‘ä¸Šè¿›è¡Œå®žæ—¶ä¼ è¾“ï¼Œå°±éœ€è¦å°†è¿™äº›åŽ‹ç¼©æ–‡ä»¶è¿›è¡Œå¿…è¦çš„å¤„ç†ï¼Œåˆ†å‰²æˆå¾ˆå¤šå°å—ï¼Œä»¥æ–¹ä¾¿ä¼ è¾“ï¼Œæ¯”å¦‚rmï¼Œrmvbï¼Œasfï¼Œè¿™å°±æ˜¯åª’ä½“æµæ ¼å¼ï¼Œè¦åœ¨ç½‘ä¸Šä¼ æ’­è¿˜éœ€è¦å°†ä¸€å®šçš„æ ¼å¼å‘Šè¯‰ç”¨æˆ·è¿™å°±æ˜¯åª’ä½“çš„å‘å¸ƒæ ¼å¼ã€‚ æµå¼æ–‡ä»¶æ ¼å¼ä¸ºäº†å‡å°ç”¨æˆ·çš„æ’­æ”¾æ¼”ç¤ºå’Œå­˜å‚¨ç©ºé—´ï¼Œå®žçŽ°è¾¹ä¸‹è¾¹æ’­ï¼Œå¹¶ä¿è¯ä¸€å®šçš„æ’­æ”¾è´¨é‡ï¼Œå°±éœ€è¦å¯¹åŽ‹ç¼©æ–‡ä»¶è¿›è¡Œç‰¹æ®Šçš„å¤„ç†ï¼Œæ·»åŠ ä¸€äº›é™„å±žä¿¡æ¯ï¼Œå¦‚è®¡æ—¶ï¼ŒåŽ‹ç¼©å’Œç‰ˆæƒä¿¡æ¯ï¼Œè¿™å°±æ˜¯æµå¼æ–‡ä»¶æ ¼å¼ï¼Œå¸¸è§çš„æœ‰å¦‚ä¸‹é›†ä¸­ï¼š flvFlash MX ä»¥å‰flashä¸­çš„è§†é¢‘æ–‡ä»¶å¯¼å…¥æ˜¯ä¸€å¸§ä¸€å¸§å˜æˆä½å›¾ï¼Œç»“æžœå¯¼è‡´æ–‡ä»¶å·¨å¤§ï¼Œé™åˆ¶äº†å®ƒçš„å¼•ç”¨èŒƒå›´ï¼Œéšç€Flash MXçš„é€€å‡ºï¼Œmacromediaå…¬å¸å¼€å‘äº†å±žäºŽè‡ªå·±æµå¼è§†é¢‘æ ¼å¼çš„FLVï¼Œè¿™ç§ä¸ªè¯•è¯•åœ¨sorensonå…¬å¸çš„åŽ‹ç¼©ç®—æ³•çš„åŸºç¡€ä¸Šå¼€å‘å‡ºæ¥çš„ï¼Œsorensonå…¬å¸ä¹Ÿä¸ºMOVæ ¼å¼æä¾›è‹çŠ¯æ³•ã€‚FLVæ ¼å¼ä¸ä»…å¯ä»¥è½»æ¾å¯¼å…¥flashä¸­ï¼Œå‡ ç™¾å¸§çš„å½±ç‰‡ä¸¤åˆ†é’Ÿå®Œæˆå¯¼å…¥ï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡rtmpåè®®ä»ŽflashcomæœåŠ¡å™¨ä¸Šæµå¼æ’­å‡ºã€‚ æµåª’ä½“æ–‡ä»¶çš„åŽ‹ç¼©æ ¼å¼æ•°æ®åŽ‹ç¼©æŠ€æœ¯ä¹Ÿæ˜¯æµåª’ä½“æŠ€æœ¯çš„ä¸€é¡¹é‡è¦å†…å®¹ï¼Œç”±äºŽè§†é¢‘æ•°æ®çš„å®¹é‡å¾€å¾€éƒ½éžå¸¸å¤§ï¼Œå¦‚æžœä¸ç»è¿‡åŽ‹ç¼©æˆ–åŽ‹ç¼©å¾—ä¸å¤Ÿï¼Œåˆ™ä¸ä»…ä¼šå¢žåŠ æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼Œæ›´é‡è¦çš„æ˜¯ä¼šå ç”¨å¤§é‡çš„ç½‘ç»œå¸¦å®½ï¼Œå½±å“æ’­æ”¾æ•ˆæžœã€‚å› æ­¤å¦‚ä½•åœ¨ä¿è¯ä¸å½±å“è§‚çœ‹æ•ˆæžœæˆ–å¯¹è§‚çœ‹æ•ˆæžœå½±å“å¾ˆå°çš„å‰æä¸‹ï¼Œæœ€å¤§é™åº¦åœ°å¯¹æµæ•°æ®è¿›è¡ŒåŽ‹ç¼©ï¼Œæ˜¯æµåª’ä½“æŠ€æœ¯ç ”ç©¶çš„ä¸€é¡¹é‡è¦å†…å®¹ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹å‡ ç§ä¸»æµçš„éŸ³è§†é¢‘æ•°æ®åŽ‹ç¼©æ ¼å¼ã€‚ 1ï¼ŽAVIæ ¼å¼AVIï¼ˆAudio Video Interleaveï¼ŒéŸ³é¢‘è§†é¢‘äº¤é”™ï¼‰æ˜¯ç¬¦åˆRIFFæ–‡ä»¶è§„èŒƒçš„æ•°å­—éŸ³é¢‘ä¸Žè§†é¢‘æ–‡ä»¶æ ¼å¼ï¼Œç”±Microsoftå…¬å¸å¼€å‘ï¼Œç›®å‰å¾—åˆ°äº†å¹¿æ³›çš„æ”¯æŒã€‚AVIæ ¼å¼æ”¯æŒ256è‰²å’ŒRLEåŽ‹ç¼©ï¼Œå¹¶å…è®¸è§†é¢‘å’ŒéŸ³é¢‘äº¤é”™åœ¨ä¸€èµ·åŒæ­¥æ’­æ”¾ã€‚ä½†AVIæ–‡ä»¶å¹¶æœªé™å®šåŽ‹ç¼©ç®—æ³•ï¼Œåªæ˜¯æä¾›äº†ä½œä¸ºæŽ§åˆ¶ç•Œé¢çš„æ ‡å‡†ï¼Œç”¨ä¸åŒåŽ‹ç¼©ç®—æ³•ç”Ÿæˆçš„AVIæ–‡ä»¶ï¼Œå¿…é¡»è¦ä½¿ç”¨ç›¸åŒçš„è§£åŽ‹ç¼©ç®—æ³•æ‰èƒ½è§£åŽ‹æ’­æ”¾ã€‚AVIæ–‡ä»¶ä¸»è¦åº”ç”¨åœ¨å¤šåª’ä½“å…‰ç›˜ä¸Šï¼Œç”¨æ¥ä¿å­˜ç”µå½±ã€ç”µè§†ç­‰å„ç§å½±åƒä¿¡æ¯ã€‚ 2ï¼ŽMPEGæ ¼å¼MPEGï¼ˆMoving Picture Experts Groupï¼ŒåŠ¨æ€å›¾åƒä¸“å®¶ç»„ï¼‰æ˜¯è¿åŠ¨å›¾åƒåŽ‹ç¼©ç®—æ³•çš„å›½é™…æ ‡å‡†ï¼Œå·²è¢«å‡ ä¹Žæ‰€æœ‰çš„è®¡ç®—æœºå¹³å°å…±åŒæ”¯æŒï¼Œå®ƒé‡‡ç”¨æœ‰æŸåŽ‹ç¼©ç®—æ³•å‡å°‘è¿åŠ¨å›¾åƒä¸­çš„å†—ä½™ä¿¡æ¯ï¼ŒåŒæ—¶ä¿è¯æ¯ç§’30å¸§çš„å›¾åƒåˆ·æ–°çŽ‡ã€‚MPEGæ ‡å‡†åŒ…æ‹¬è§†é¢‘åŽ‹ç¼©ã€éŸ³é¢‘åŽ‹ç¼©å’ŒéŸ³è§†é¢‘åŒæ­¥3ä¸ªéƒ¨åˆ†ï¼ŒMPEGéŸ³é¢‘æœ€å…¸åž‹çš„åº”ç”¨å°±æ˜¯MP3éŸ³é¢‘æ–‡ä»¶ï¼Œå¹¿æ³›ä½¿ç”¨çš„æ¶ˆè´¹ç±»è§†é¢‘äº§å“å¦‚VCDã€DVDå…¶åŽ‹ç¼©ç®—æ³•é‡‡ç”¨çš„ä¹Ÿæ˜¯MPEGæ ‡å‡†ã€‚ MPEGåŽ‹ç¼©ç®—æ³•æ˜¯é’ˆå¯¹è¿åŠ¨å›¾åƒè€Œè®¾è®¡çš„ï¼Œå…¶åŸºæœ¬æ€è·¯æ˜¯æŠŠè§†é¢‘å›¾åƒæŒ‰æ—¶é—´åˆ†æ®µï¼Œç„¶åŽé‡‡é›†å¹¶ä¿å­˜æ¯ä¸€æ®µçš„ç¬¬ä¸€å¸§æ•°æ®ï¼Œå…¶ä½™å„å¸§åªå­˜å‚¨ç›¸å¯¹ç¬¬ä¸€å¸§å‘ç”Ÿå˜åŒ–çš„éƒ¨åˆ†ï¼Œä»Žè€Œè¾¾åˆ°äº†æ•°æ®åŽ‹ç¼©çš„ç›®çš„ã€‚MPEGé‡‡ç”¨äº†ä¸¤ä¸ªåŸºæœ¬çš„åŽ‹ç¼©æŠ€æœ¯ï¼šè¿åŠ¨è¡¥å¿æŠ€æœ¯ï¼ˆé¢„æµ‹ç¼–ç å’Œæ’è¡¥ç ï¼‰å®žçŽ°äº†æ—¶é—´ä¸Šçš„åŽ‹ç¼©ï¼Œå˜æ¢åŸŸï¼ˆç¦»æ•£ä½™å¼¦å˜æ¢DCTï¼‰æŠ€æœ¯å®žçŽ°äº†ç©ºé—´ä¸Šçš„åŽ‹ç¼©ã€‚MPEGåœ¨ä¿è¯å›¾åƒå’Œå£°éŸ³è´¨é‡çš„å‰æä¸‹ï¼ŒåŽ‹ç¼©æ•ˆçŽ‡éžå¸¸é«˜ï¼Œå¹³å‡åŽ‹ç¼©æ¯”ä¸º50âˆ¶1ï¼Œæœ€é«˜å¯è¾¾200âˆ¶1ã€‚ 3ï¼ŽRealVideoæ ¼å¼RealVideoæ ¼å¼æ˜¯ç”±Real Networkså…¬å¸å¼€å‘çš„ä¸€ç§æµå¼è§†é¢‘æ–‡ä»¶æ ¼å¼ï¼ŒåŒ…å«åœ¨Real MediaéŸ³é¢‘è§†é¢‘åŽ‹ç¼©è§„èŒƒä¸­ï¼Œå…¶è®¾è®¡ç›®æ ‡æ˜¯åœ¨ä½Žé€ŸçŽ‡çš„å¹¿åŸŸç½‘ä¸Šå®žæ—¶ä¼ è¾“è§†é¢‘å½±åƒã€‚RealVideoå¯ä»¥æ ¹æ®ç½‘ç»œçš„ä¼ è¾“é€Ÿåº¦æ¥å†³å®šè§†é¢‘æ•°æ®çš„åŽ‹ç¼©æ¯”çŽ‡ï¼Œä»Žè€Œæé«˜é€‚åº”èƒ½åŠ›ï¼Œå……åˆ†åˆ©ç”¨å¸¦å®½ã€‚æœ¬ç« åŽé¢ä»‹ç»çš„Real Serverè½¯ä»¶å°±æ˜¯ç”±Real Networkså…¬å¸æä¾›çš„ï¼Œä½¿ç”¨çš„å°±æ˜¯Real Videoæ ¼å¼çš„è§†é¢‘æ–‡ä»¶ã€‚ RealVideoæ ¼å¼æ–‡ä»¶çš„æ‰©å±•åæœ‰3ç§ï¼ŒRAæ˜¯éŸ³é¢‘æ–‡ä»¶ã€RMå’ŒRMVBæ˜¯è§†é¢‘æ–‡ä»¶ã€‚RMVBæ ¼å¼æ–‡ä»¶å…·æœ‰å¯å˜æ¯”ç‰¹çŽ‡çš„ç‰¹æ€§ï¼Œå®ƒåœ¨å¤„ç†è¾ƒå¤æ‚çš„åŠ¨æ€å½±åƒæ—¶ä½¿ç”¨è¾ƒé«˜çš„é‡‡æ ·çŽ‡ï¼Œè€Œåœ¨å¤„ç†ä¸€èˆ¬é™æ­¢ç”»é¢æ—¶åˆ™çµæ´»åœ°è½¬æ¢è‡³è¾ƒä½Žçš„é‡‡æ ·çŽ‡ï¼Œä»Žè€Œåœ¨ä¸å¢žåŠ æ–‡ä»¶å¤§å°çš„å‰æä¸‹æé«˜äº†å›¾åƒè´¨é‡ã€‚ 4ï¼ŽQuickTimeæ ¼å¼QuickTimeæ˜¯ç”±Appleå…¬å¸å¼€å‘çš„ä¸€ç§éŸ³è§†é¢‘æ•°æ®åŽ‹ç¼©æ ¼å¼ï¼Œå¾—åˆ°äº†Mac OSã€Microsoft Windowsç­‰ä¸»æµæ“ä½œç³»ç»Ÿå¹³å°çš„æ”¯æŒã€‚QuickTimeæ–‡ä»¶æ ¼å¼æä¾›äº†150å¤šç§è§†é¢‘æ•ˆæžœï¼Œæ”¯æŒ25ä½å½©è‰²ï¼Œæ”¯æŒRLEã€JPEGç­‰é¢†å…ˆçš„é›†æˆåŽ‹ç¼©æŠ€æœ¯ã€‚æ­¤å¤–ï¼ŒQuickTimeè¿˜å¼ºåŒ–äº†å¯¹Internetåº”ç”¨çš„æ”¯æŒï¼Œå¹¶é‡‡ç”¨ä¸€ç§è™šæ‹ŸçŽ°å®žæŠ€æœ¯ï¼Œä½¿ç”¨æˆ·å¯ä»¥é€šè¿‡é¼ æ ‡æˆ–é”®ç›˜çš„äº¤äº’å¼æŽ§åˆ¶ï¼Œè§‚å¯ŸæŸä¸€åœ°ç‚¹å‘¨å›´360åº¦çš„æ™¯åƒï¼Œæˆ–è€…ä»Žç©ºé—´çš„ä»»ä½•è§’åº¦è§‚å¯ŸæŸä¸€ç‰©ä½“ã€‚QuickTimeä»¥å…¶é¢†å…ˆçš„å¤šåª’ä½“æŠ€æœ¯å’Œè·¨å¹³å°ç‰¹æ€§ã€è¾ƒå°çš„å­˜å‚¨ç©ºé—´è¦æ±‚ã€æŠ€æœ¯ç»†èŠ‚çš„ç‹¬ç«‹æ€§ä»¥åŠç³»ç»Ÿçš„é«˜åº¦å¼€æ”¾æ€§ï¼Œå¾—åˆ°ä¸šç•Œçš„å¹¿æ³›è®¤å¯ã€‚QuickTimeæ ¼å¼æ–‡ä»¶çš„æ‰©å±•æ˜¯MOVæˆ–QTã€‚ 5ï¼ŽASFå’ŒWMVæ ¼å¼ASFï¼ˆAdvanced Streaming Formatï¼Œé«˜çº§æµæ ¼å¼ï¼‰å’ŒWMVæ˜¯ç”±Microsoftå…¬å¸æŽ¨å‡ºçš„ä¸€ç§åœ¨Internetä¸Šå®žæ—¶ä¼ æ’­å¤šåª’ä½“æ•°æ®çš„æŠ€æœ¯æ ‡å‡†ï¼Œæä¾›äº†æœ¬åœ°æˆ–ç½‘ç»œå›žæ”¾ã€å¯æ‰©å……çš„åª’ä½“ç±»åž‹ã€éƒ¨ä»¶ä¸‹è½½ä»¥åŠå¯æ‰©å±•æ€§ç­‰åŠŸèƒ½ã€‚ASFçš„åº”ç”¨å¹³å°æ˜¯Net ShowæœåŠ¡å™¨å’ŒNet Showæ’­æ”¾å™¨ã€‚ WMVä¹Ÿæ˜¯Microsoftå…¬å¸æŽ¨å‡ºçš„ä¸€ç§æµåª’ä½“æ ¼å¼ï¼Œå®ƒæ˜¯ä»¥ASFä¸ºåŸºç¡€ï¼Œå‡çº§æ‰©å±•åŽå¾—åˆ°çš„ã€‚åœ¨åŒç­‰è§†é¢‘è´¨é‡ä¸‹ï¼ŒWMVæ ¼å¼çš„ä½“ç§¯éžå¸¸å°ï¼Œå› æ­¤å¾ˆé€‚åˆåœ¨ç½‘ä¸Šæ’­æ”¾å’Œä¼ è¾“ã€‚WMVæ–‡ä»¶ä¸€èˆ¬åŒæ—¶åŒ…å«è§†é¢‘å’ŒéŸ³é¢‘éƒ¨åˆ†ï¼Œè§†é¢‘éƒ¨åˆ†ä½¿ç”¨Windows Media Videoç¼–ç ï¼Œè€ŒéŸ³é¢‘éƒ¨åˆ†ä½¿ç”¨Windows Media Audioç¼–ç ã€‚éŸ³é¢‘æ–‡ä»¶å¯ä»¥ç‹¬ç«‹å­˜åœ¨ï¼Œå…¶æ‰©å±•åæ˜¯WMAã€‚]]></content>
      <categories>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>æµåª’ä½“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSè®¾è®¡æ¨¡å¼]]></title>
    <url>%2F2014%2F11%2F18%2F2014%2FiOS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[è®¾è®¡æ¨¡å¼çš„åŠŸèƒ½æ˜¯åœ¨è½¯ä»¶è®¾è®¡å½“ä¸­æ˜¯è§£å†³ä¸€äº›é‡å¤çš„å…¬å…±é—®é¢˜ã€‚ä»–ä»¬æ˜¯ä¸€äº›æ¨¡æ¿æ¥å¸®åŠ©ä½ æ›´å®¹æ˜“çš„ä¹¦å†™ä»£ç å’Œå¤ç”¨ä½ çš„ä»£ç ã€‚ä»–ä»¬è¿˜å¯èƒ½å¸®åŠ©ä½ åˆ›å»ºä½Žè€¦åˆçš„ä»£ç ï¼Œä½ å¯ä»¥å¾ˆè½»æ¾çš„ä¿®æ”¹å’Œæ›¿æ¢å…¶ä¸­çš„ç»„ä»¶ã€‚ MVCçŽ°åœ¨å¯èƒ½æ›´æµè¡Œçš„æ˜¯MVVMï¼Œé¦–å…ˆï¼Œä½ è¦ä¿è¯åœ¨ä½ çš„é¡¹ç›®ä¸­ä»»ä½•ä¸€ä¸ªç±»éƒ½æœ‰ä¸€ä¸ªæŽ§åˆ¶å™¨ï¼Œä¸€ä¸ªæ¨¡åž‹ï¼Œä¸€ä¸ªè§†å›¾ï¼Œä¸€ä¸ªç±»ä¸­çš„å‡½æ•°ä¸èƒ½æœ‰ä¸¤ç§ä½œç”¨ Singleton â€“ å•ä¾‹æ¨¡å¼å•ä¾‹è®¾è®¡æ¨¡å¼ç¡®åˆ‡çš„è¯´å°±æ˜¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®žä¾‹ï¼Œæœ‰ä¸€ä¸ªå…¨å±€çš„æŽ¥å£æ¥è®¿é—®è¿™ä¸ªå®žä¾‹ã€‚å½“ç¬¬ä¸€æ¬¡è½½å…¥çš„æ—¶å€™ï¼Œå®ƒé€šå¸¸ä½¿ç”¨å»¶æ—¶åŠ è½½çš„æ–¹æ³•åˆ›å»ºå•ä¸€å®žä¾‹ã€‚ åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®žä¾‹æ˜¯æœ‰æ„ä¹‰çš„ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæ²¡æœ‰å¿…è¦æœ‰å¤šä¸ªç™»å½•å®žä¾‹ï¼Œé™¤éžä½ ä¸€æ¬¡æƒ³å†™å…¥å¤šä¸ªæ—¥å¿—æ–‡ä»¶ã€‚æˆ–è€…ï¼Œä¸€ä¸ªå…¨å±€çš„é…ç½®ç±»æ–‡ä»¶ï¼šå®ƒå¯ä»¥å¾ˆå®¹æ˜“çš„å¾ˆå®‰å…¨çš„æ‰§è¡Œä¸€ä¸ªå…¬å…±èµ„æºï¼Œè¿™æ ·çš„ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œè¦æ¯”åŒæ—¶ä¿®æ”¹å¤šä¸ªé…ç½®ç±»æ–‡ä»¶å¥½å¾ˆå¤šã€‚ æŽ¨èå†™æ³•ï¼Œæ‹¦æˆªallocå’Œcopyæ–¹æ³• 123456789101112131415161718192021222324252627static MySingleton *shareSingleton ï¼ nil;+( instancetype ) sharedSingleton &#123; static dispatch_once onceToken; dispatch_once ( &amp;onceToken, ^ &#123; shareSingleton = [[super allocWithZone:NULL] init] ;&#125; ); return sharedSingleton;&#125;+(id) allocWithZone:(struct _NSZone *)zone &#123; return [Singleton shareInstance] ; &#125;-(id) copyWithZone:(struct _NSZone *)zone &#123; return [Singleton shareInstance] ;&#125; Observer â€“ è§‚å¯Ÿè€…æ¨¡å¼åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œå½“çŠ¶æ€å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œä¸€ä¸ªå¯¹è±¡ä¼šé€šçŸ¥å¦ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ä¸éœ€è¦çŸ¥é“å¦ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿäº†ä»€ä¹ˆæ”¹å˜â”€å› æ­¤éžå¸¸é¼“åŠ±è¿™ç§åˆ†ç¦»å¼çš„è®¾è®¡ã€‚è¿™ç§æ¨¡å¼ç»å¸¸ç”¨äºŽï¼Œå½“ä¸€ä¸ªå±žæ€§å‘ç”Ÿæ”¹å˜æ—¶é€šçŸ¥è·Ÿå®ƒç›¸å…³çš„å¯¹è±¡ã€‚ å®ƒé€šå¸¸éœ€è¦ä¸€ä¸ªè§‚å¯Ÿè€…(observer)æ³¨å†Œè·Ÿè¸ªå¦å¤–ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€ã€‚å½“çŠ¶æ€å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„è§‚å¯Ÿå¯¹è±¡éƒ½ä¼šè¢«é€šçŸ¥æ”¹å˜ã€‚è‹¹æžœçš„æŽ¨é€é€šçŸ¥æœåŠ¡å°±æ˜¯ä¸€ä¸ªè¿™æ ·çš„ä¾‹å­ã€‚ å¦‚æžœä½ æƒ³è¦ä¸€ç›´ä½¿ç”¨ MVC æ¨¡å¼ï¼ˆä½ ç¡®å®žéœ€è¦ï¼‰ï¼Œä½ å¦‚æžœæƒ³åœ¨æ¨¡åž‹å’Œè§†å›¾ä¹‹é—´ï¼Œä¸ç›´æŽ¥ç›¸äº’å¼•ç”¨çš„æƒ…å†µä¸‹è¿˜è¦æœ‰é€šä¿¡ã€‚è¿™æ—¶å€™å°±è¦ç”¨åˆ°è§‚å¯Ÿè€…æ¨¡å¼äº†ã€‚ Cocoa æœ‰ä¸¤ä¸ªå¸¸ç”¨çš„æ–¹æ³•æ¥æ‰§è¡Œè§‚å¯Ÿè€…æ¨¡å¼ï¼šNotifications å’Œ Key-Value Observing (KVO)ã€‚ é€šçŸ¥ Notificationså®žçŽ°åŽŸç†æ³¨æ„ é€šçŸ¥æ˜¯åŒæ­¥æ“ä½œï¼Œæ‰€ä»¥å†é€šçŸ¥çš„è°ƒç”¨æ–¹æ³•ä¸­åšå¤ªå¤šçš„äº‹æƒ…æ˜¯è‚¯å®šä¼šæœ‰é—®é¢˜çš„ï¼Œæœ‰å¤ªå¤šçš„é€šçŸ¥ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ KVOKVOå®žçŽ°åŽŸç† KVOæ˜¯åŸºäºŽruntimeæœºåˆ¶å®žçŽ°çš„ å½“æŸä¸ªç±»çš„å±žæ€§å¯¹è±¡ç¬¬ä¸€æ¬¡è¢«è§‚å¯Ÿæ—¶ï¼Œç³»ç»Ÿå°±ä¼šåœ¨è¿è¡ŒæœŸåŠ¨æ€åœ°åˆ›å»ºè¯¥ç±»çš„ä¸€ä¸ªæ´¾ç”Ÿç±»ï¼Œåœ¨è¿™ä¸ªæ´¾ç”Ÿç±»ä¸­é‡å†™åŸºç±»ä¸­ä»»ä½•è¢«è§‚å¯Ÿå±žæ€§çš„setter æ–¹æ³•ã€‚æ´¾ç”Ÿç±»åœ¨è¢«é‡å†™çš„setteræ–¹æ³•å†…å®žçŽ°çœŸæ­£çš„é€šçŸ¥æœºåˆ¶ å¦‚æžœåŽŸç±»ä¸ºPersonï¼Œé‚£ä¹ˆç”Ÿæˆçš„æ´¾ç”Ÿç±»åä¸ºNSKVONotifying_Person æ¯ä¸ªç±»å¯¹è±¡ä¸­éƒ½æœ‰ä¸€ä¸ªisaæŒ‡é’ˆæŒ‡å‘å½“å‰ç±»ï¼Œå½“ä¸€ä¸ªç±»å¯¹è±¡çš„ç¬¬ä¸€æ¬¡è¢«è§‚å¯Ÿï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šå·å·å°†isaæŒ‡é’ˆæŒ‡å‘åŠ¨æ€ç”Ÿæˆçš„æ´¾ç”Ÿç±»ï¼Œä»Žè€Œåœ¨ç»™è¢«ç›‘æŽ§å±žæ€§èµ‹å€¼æ—¶æ‰§è¡Œçš„æ˜¯æ´¾ç”Ÿç±»çš„setteræ–¹æ³• é”®å€¼è§‚å¯Ÿé€šçŸ¥ä¾èµ–äºŽNSObject çš„ä¸¤ä¸ªæ–¹æ³•: willChangeValueForKey: å’Œ didChangevlueForKey:ï¼›åœ¨ä¸€ä¸ªè¢«è§‚å¯Ÿå±žæ€§å‘ç”Ÿæ”¹å˜ä¹‹å‰ï¼Œ willChangeValueForKey: ä¸€å®šä¼šè¢«è°ƒç”¨ï¼Œè¿™å°± ä¼šè®°å½•æ—§çš„å€¼ã€‚è€Œå½“æ”¹å˜å‘ç”ŸåŽï¼ŒdidChangeValueForKey: ä¼šè¢«è°ƒç”¨ï¼Œç»§è€Œ observeValueForKey:ofObject:change:context: ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚ è¡¥å……ï¼šKVOçš„è¿™å¥—å®žçŽ°æœºåˆ¶ä¸­è‹¹æžœè¿˜å·å·é‡å†™äº†classæ–¹æ³•ï¼Œè®©æˆ‘ä»¬è¯¯è®¤ä¸ºè¿˜æ˜¯ä½¿ç”¨çš„å½“å‰ç±»ï¼Œä»Žè€Œè¾¾åˆ°éšè—ç”Ÿæˆçš„æ´¾ç”Ÿç±» KVOå’Œé€šçŸ¥ä¸€æ ·ï¼Œéƒ½æ˜¯åŒæ­¥æ“ä½œï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„ æ‰‹åŠ¨è§¦å‘KVO12345678910- (void)viewDidLoad&#123; [super viewDidLoad]; // â€œæ‰‹åŠ¨è§¦å‘self.nowçš„KVOâ€ï¼Œå¿…å†™ã€‚ [self willChangeValueForKey:@&quot;now&quot;]; // â€œæ‰‹åŠ¨è§¦å‘self.nowçš„KVOâ€ï¼Œå¿…å†™ã€‚ [self didChangeValueForKey:@&quot;now&quot;];&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
</search>
